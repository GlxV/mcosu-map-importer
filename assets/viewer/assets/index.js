const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./browserAll-DXMGw6Wf.js","./webworkerAll-D8fhvXB1.js"])))=>i.map(i=>d[i]);
(function(){const A=document.createElement("link").relList;if(A&&A.supports&&A.supports("modulepreload"))return;for(const B of document.querySelectorAll('link[rel="modulepreload"]'))I(B);new MutationObserver(B=>{for(const T of B)if(T.type==="childList")for(const R of T.addedNodes)R.tagName==="LINK"&&R.rel==="modulepreload"&&I(R)}).observe(document,{childList:!0,subtree:!0});function _(B){const T={};return B.integrity&&(T.integrity=B.integrity),B.referrerPolicy&&(T.referrerPolicy=B.referrerPolicy),B.crossOrigin==="use-credentials"?T.credentials="include":B.crossOrigin==="anonymous"?T.credentials="omit":T.credentials="same-origin",T}function I(B){if(B.ep)return;B.ep=!0;const T=_(B);fetch(B.href,T)}})();var buffer$1={},base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i$4=0,len=code.length;i$4<len;++i$4)lookup[i$4]=code[i$4],revLookup[code.charCodeAt(i$4)]=i$4;revLookup[45]=62;revLookup[95]=63;function getLens(E){var A=E.length;if(A%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var _=E.indexOf("=");_===-1&&(_=A);var I=_===A?0:4-_%4;return[_,I]}function byteLength(E){var A=getLens(E),_=A[0],I=A[1];return(_+I)*3/4-I}function _byteLength(E,A,_){return(A+_)*3/4-_}function toByteArray(E){var A,_=getLens(E),I=_[0],B=_[1],T=new Arr(_byteLength(E,I,B)),R=0,P=B>0?I-4:I,D;for(D=0;D<P;D+=4)A=revLookup[E.charCodeAt(D)]<<18|revLookup[E.charCodeAt(D+1)]<<12|revLookup[E.charCodeAt(D+2)]<<6|revLookup[E.charCodeAt(D+3)],T[R++]=A>>16&255,T[R++]=A>>8&255,T[R++]=A&255;return B===2&&(A=revLookup[E.charCodeAt(D)]<<2|revLookup[E.charCodeAt(D+1)]>>4,T[R++]=A&255),B===1&&(A=revLookup[E.charCodeAt(D)]<<10|revLookup[E.charCodeAt(D+1)]<<4|revLookup[E.charCodeAt(D+2)]>>2,T[R++]=A>>8&255,T[R++]=A&255),T}function tripletToBase64(E){return lookup[E>>18&63]+lookup[E>>12&63]+lookup[E>>6&63]+lookup[E&63]}function encodeChunk(E,A,_){for(var I,B=[],T=A;T<_;T+=3)I=(E[T]<<16&16711680)+(E[T+1]<<8&65280)+(E[T+2]&255),B.push(tripletToBase64(I));return B.join("")}function fromByteArray(E){for(var A,_=E.length,I=_%3,B=[],T=16383,R=0,P=_-I;R<P;R+=T)B.push(encodeChunk(E,R,R+T>P?P:R+T));return I===1?(A=E[_-1],B.push(lookup[A>>2]+lookup[A<<4&63]+"==")):I===2&&(A=(E[_-2]<<8)+E[_-1],B.push(lookup[A>>10]+lookup[A>>4&63]+lookup[A<<2&63]+"=")),B.join("")}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(E,A,_,I,B){var T,R,P=B*8-I-1,D=(1<<P)-1,F=D>>1,L=-7,U=_?B-1:0,V=_?-1:1,K=E[A+U];for(U+=V,T=K&(1<<-L)-1,K>>=-L,L+=P;L>0;T=T*256+E[A+U],U+=V,L-=8);for(R=T&(1<<-L)-1,T>>=-L,L+=I;L>0;R=R*256+E[A+U],U+=V,L-=8);if(T===0)T=1-F;else{if(T===D)return R?NaN:(K?-1:1)*(1/0);R=R+Math.pow(2,I),T=T-F}return(K?-1:1)*R*Math.pow(2,T-I)};ieee754.write=function(E,A,_,I,B,T){var R,P,D,F=T*8-B-1,L=(1<<F)-1,U=L>>1,V=B===23?Math.pow(2,-24)-Math.pow(2,-77):0,K=I?0:T-1,J=I?1:-1,ee=A<0||A===0&&1/A<0?1:0;for(A=Math.abs(A),isNaN(A)||A===1/0?(P=isNaN(A)?1:0,R=L):(R=Math.floor(Math.log(A)/Math.LN2),A*(D=Math.pow(2,-R))<1&&(R--,D*=2),R+U>=1?A+=V/D:A+=V*Math.pow(2,1-U),A*D>=2&&(R++,D/=2),R+U>=L?(P=0,R=L):R+U>=1?(P=(A*D-1)*Math.pow(2,B),R=R+U):(P=A*Math.pow(2,U-1)*Math.pow(2,B),R=0));B>=8;E[_+K]=P&255,K+=J,P/=256,B-=8);for(R=R<<B|P,F+=B;F>0;E[_+K]=R&255,K+=J,R/=256,F-=8);E[_+K-J]|=ee*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(E){const A=base64Js,_=ieee754,I=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;E.Buffer=L,E.SlowBuffer=pe,E.INSPECT_MAX_BYTES=50;const B=2147483647;E.kMaxLength=B;const{Uint8Array:T,ArrayBuffer:R,SharedArrayBuffer:P}=globalThis;L.TYPED_ARRAY_SUPPORT=D(),!L.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function D(){try{const ze=new T(1),Ce={foo:function(){return 42}};return Object.setPrototypeOf(Ce,T.prototype),Object.setPrototypeOf(ze,Ce),ze.foo()===42}catch{return!1}}Object.defineProperty(L.prototype,"parent",{enumerable:!0,get:function(){if(L.isBuffer(this))return this.buffer}}),Object.defineProperty(L.prototype,"offset",{enumerable:!0,get:function(){if(L.isBuffer(this))return this.byteOffset}});function F(ze){if(ze>B)throw new RangeError('The value "'+ze+'" is invalid for option "size"');const Ce=new T(ze);return Object.setPrototypeOf(Ce,L.prototype),Ce}function L(ze,Ce,Le){if(typeof ze=="number"){if(typeof Ce=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return J(ze)}return U(ze,Ce,Le)}L.poolSize=8192;function U(ze,Ce,Le){if(typeof ze=="string")return ee(ze,Ce);if(R.isView(ze))return ne(ze);if(ze==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ze);if(_t(ze,R)||ze&&_t(ze.buffer,R)||typeof P<"u"&&(_t(ze,P)||ze&&_t(ze.buffer,P)))return ce(ze,Ce,Le);if(typeof ze=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Ze=ze.valueOf&&ze.valueOf();if(Ze!=null&&Ze!==ze)return L.from(Ze,Ce,Le);const Je=fe(ze);if(Je)return Je;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ze[Symbol.toPrimitive]=="function")return L.from(ze[Symbol.toPrimitive]("string"),Ce,Le);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ze)}L.from=function(ze,Ce,Le){return U(ze,Ce,Le)},Object.setPrototypeOf(L.prototype,T.prototype),Object.setPrototypeOf(L,T);function V(ze){if(typeof ze!="number")throw new TypeError('"size" argument must be of type number');if(ze<0)throw new RangeError('The value "'+ze+'" is invalid for option "size"')}function K(ze,Ce,Le){return V(ze),ze<=0?F(ze):Ce!==void 0?typeof Le=="string"?F(ze).fill(Ce,Le):F(ze).fill(Ce):F(ze)}L.alloc=function(ze,Ce,Le){return K(ze,Ce,Le)};function J(ze){return V(ze),F(ze<0?0:de(ze)|0)}L.allocUnsafe=function(ze){return J(ze)},L.allocUnsafeSlow=function(ze){return J(ze)};function ee(ze,Ce){if((typeof Ce!="string"||Ce==="")&&(Ce="utf8"),!L.isEncoding(Ce))throw new TypeError("Unknown encoding: "+Ce);const Le=ve(ze,Ce)|0;let Ze=F(Le);const Je=Ze.write(ze,Ce);return Je!==Le&&(Ze=Ze.slice(0,Je)),Ze}function ie(ze){const Ce=ze.length<0?0:de(ze.length)|0,Le=F(Ce);for(let Ze=0;Ze<Ce;Ze+=1)Le[Ze]=ze[Ze]&255;return Le}function ne(ze){if(_t(ze,T)){const Ce=new T(ze);return ce(Ce.buffer,Ce.byteOffset,Ce.byteLength)}return ie(ze)}function ce(ze,Ce,Le){if(Ce<0||ze.byteLength<Ce)throw new RangeError('"offset" is outside of buffer bounds');if(ze.byteLength<Ce+(Le||0))throw new RangeError('"length" is outside of buffer bounds');let Ze;return Ce===void 0&&Le===void 0?Ze=new T(ze):Le===void 0?Ze=new T(ze,Ce):Ze=new T(ze,Ce,Le),Object.setPrototypeOf(Ze,L.prototype),Ze}function fe(ze){if(L.isBuffer(ze)){const Ce=de(ze.length)|0,Le=F(Ce);return Le.length===0||ze.copy(Le,0,0,Ce),Le}if(ze.length!==void 0)return typeof ze.length!="number"||Xt(ze.length)?F(0):ie(ze);if(ze.type==="Buffer"&&Array.isArray(ze.data))return ie(ze.data)}function de(ze){if(ze>=B)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+B.toString(16)+" bytes");return ze|0}function pe(ze){return+ze!=ze&&(ze=0),L.alloc(+ze)}L.isBuffer=function(Ce){return Ce!=null&&Ce._isBuffer===!0&&Ce!==L.prototype},L.compare=function(Ce,Le){if(_t(Ce,T)&&(Ce=L.from(Ce,Ce.offset,Ce.byteLength)),_t(Le,T)&&(Le=L.from(Le,Le.offset,Le.byteLength)),!L.isBuffer(Ce)||!L.isBuffer(Le))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Ce===Le)return 0;let Ze=Ce.length,Je=Le.length;for(let nt=0,rt=Math.min(Ze,Je);nt<rt;++nt)if(Ce[nt]!==Le[nt]){Ze=Ce[nt],Je=Le[nt];break}return Ze<Je?-1:Je<Ze?1:0},L.isEncoding=function(Ce){switch(String(Ce).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},L.concat=function(Ce,Le){if(!Array.isArray(Ce))throw new TypeError('"list" argument must be an Array of Buffers');if(Ce.length===0)return L.alloc(0);let Ze;if(Le===void 0)for(Le=0,Ze=0;Ze<Ce.length;++Ze)Le+=Ce[Ze].length;const Je=L.allocUnsafe(Le);let nt=0;for(Ze=0;Ze<Ce.length;++Ze){let rt=Ce[Ze];if(_t(rt,T))nt+rt.length>Je.length?(L.isBuffer(rt)||(rt=L.from(rt)),rt.copy(Je,nt)):T.prototype.set.call(Je,rt,nt);else if(L.isBuffer(rt))rt.copy(Je,nt);else throw new TypeError('"list" argument must be an Array of Buffers');nt+=rt.length}return Je};function ve(ze,Ce){if(L.isBuffer(ze))return ze.length;if(R.isView(ze)||_t(ze,R))return ze.byteLength;if(typeof ze!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ze);const Le=ze.length,Ze=arguments.length>2&&arguments[2]===!0;if(!Ze&&Le===0)return 0;let Je=!1;for(;;)switch(Ce){case"ascii":case"latin1":case"binary":return Le;case"utf8":case"utf-8":return It(ze).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Le*2;case"hex":return Le>>>1;case"base64":return Wt(ze).length;default:if(Je)return Ze?-1:It(ze).length;Ce=(""+Ce).toLowerCase(),Je=!0}}L.byteLength=ve;function ye(ze,Ce,Le){let Ze=!1;if((Ce===void 0||Ce<0)&&(Ce=0),Ce>this.length||((Le===void 0||Le>this.length)&&(Le=this.length),Le<=0)||(Le>>>=0,Ce>>>=0,Le<=Ce))return"";for(ze||(ze="utf8");;)switch(ze){case"hex":return Ae(this,Ce,Le);case"utf8":case"utf-8":return le(this,Ce,Le);case"ascii":return Q(this,Ce,Le);case"latin1":case"binary":return se(this,Ce,Le);case"base64":return oe(this,Ce,Le);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ge(this,Ce,Le);default:if(Ze)throw new TypeError("Unknown encoding: "+ze);ze=(ze+"").toLowerCase(),Ze=!0}}L.prototype._isBuffer=!0;function _e(ze,Ce,Le){const Ze=ze[Ce];ze[Ce]=ze[Le],ze[Le]=Ze}L.prototype.swap16=function(){const Ce=this.length;if(Ce%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let Le=0;Le<Ce;Le+=2)_e(this,Le,Le+1);return this},L.prototype.swap32=function(){const Ce=this.length;if(Ce%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let Le=0;Le<Ce;Le+=4)_e(this,Le,Le+3),_e(this,Le+1,Le+2);return this},L.prototype.swap64=function(){const Ce=this.length;if(Ce%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let Le=0;Le<Ce;Le+=8)_e(this,Le,Le+7),_e(this,Le+1,Le+6),_e(this,Le+2,Le+5),_e(this,Le+3,Le+4);return this},L.prototype.toString=function(){const Ce=this.length;return Ce===0?"":arguments.length===0?le(this,0,Ce):ye.apply(this,arguments)},L.prototype.toLocaleString=L.prototype.toString,L.prototype.equals=function(Ce){if(!L.isBuffer(Ce))throw new TypeError("Argument must be a Buffer");return this===Ce?!0:L.compare(this,Ce)===0},L.prototype.inspect=function(){let Ce="";const Le=E.INSPECT_MAX_BYTES;return Ce=this.toString("hex",0,Le).replace(/(.{2})/g,"$1 ").trim(),this.length>Le&&(Ce+=" ... "),"<Buffer "+Ce+">"},I&&(L.prototype[I]=L.prototype.inspect),L.prototype.compare=function(Ce,Le,Ze,Je,nt){if(_t(Ce,T)&&(Ce=L.from(Ce,Ce.offset,Ce.byteLength)),!L.isBuffer(Ce))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Ce);if(Le===void 0&&(Le=0),Ze===void 0&&(Ze=Ce?Ce.length:0),Je===void 0&&(Je=0),nt===void 0&&(nt=this.length),Le<0||Ze>Ce.length||Je<0||nt>this.length)throw new RangeError("out of range index");if(Je>=nt&&Le>=Ze)return 0;if(Je>=nt)return-1;if(Le>=Ze)return 1;if(Le>>>=0,Ze>>>=0,Je>>>=0,nt>>>=0,this===Ce)return 0;let rt=nt-Je,He=Ze-Le;const Dt=Math.min(rt,He),Rt=this.slice(Je,nt),De=Ce.slice(Le,Ze);for(let We=0;We<Dt;++We)if(Rt[We]!==De[We]){rt=Rt[We],He=De[We];break}return rt<He?-1:He<rt?1:0};function be(ze,Ce,Le,Ze,Je){if(ze.length===0)return-1;if(typeof Le=="string"?(Ze=Le,Le=0):Le>2147483647?Le=2147483647:Le<-2147483648&&(Le=-2147483648),Le=+Le,Xt(Le)&&(Le=Je?0:ze.length-1),Le<0&&(Le=ze.length+Le),Le>=ze.length){if(Je)return-1;Le=ze.length-1}else if(Le<0)if(Je)Le=0;else return-1;if(typeof Ce=="string"&&(Ce=L.from(Ce,Ze)),L.isBuffer(Ce))return Ce.length===0?-1:Te(ze,Ce,Le,Ze,Je);if(typeof Ce=="number")return Ce=Ce&255,typeof T.prototype.indexOf=="function"?Je?T.prototype.indexOf.call(ze,Ce,Le):T.prototype.lastIndexOf.call(ze,Ce,Le):Te(ze,[Ce],Le,Ze,Je);throw new TypeError("val must be string, number or Buffer")}function Te(ze,Ce,Le,Ze,Je){let nt=1,rt=ze.length,He=Ce.length;if(Ze!==void 0&&(Ze=String(Ze).toLowerCase(),Ze==="ucs2"||Ze==="ucs-2"||Ze==="utf16le"||Ze==="utf-16le")){if(ze.length<2||Ce.length<2)return-1;nt=2,rt/=2,He/=2,Le/=2}function Dt(De,We){return nt===1?De[We]:De.readUInt16BE(We*nt)}let Rt;if(Je){let De=-1;for(Rt=Le;Rt<rt;Rt++)if(Dt(ze,Rt)===Dt(Ce,De===-1?0:Rt-De)){if(De===-1&&(De=Rt),Rt-De+1===He)return De*nt}else De!==-1&&(Rt-=Rt-De),De=-1}else for(Le+He>rt&&(Le=rt-He),Rt=Le;Rt>=0;Rt--){let De=!0;for(let We=0;We<He;We++)if(Dt(ze,Rt+We)!==Dt(Ce,We)){De=!1;break}if(De)return Rt}return-1}L.prototype.includes=function(Ce,Le,Ze){return this.indexOf(Ce,Le,Ze)!==-1},L.prototype.indexOf=function(Ce,Le,Ze){return be(this,Ce,Le,Ze,!0)},L.prototype.lastIndexOf=function(Ce,Le,Ze){return be(this,Ce,Le,Ze,!1)};function ue(ze,Ce,Le,Ze){Le=Number(Le)||0;const Je=ze.length-Le;Ze?(Ze=Number(Ze),Ze>Je&&(Ze=Je)):Ze=Je;const nt=Ce.length;Ze>nt/2&&(Ze=nt/2);let rt;for(rt=0;rt<Ze;++rt){const He=parseInt(Ce.substr(rt*2,2),16);if(Xt(He))return rt;ze[Le+rt]=He}return rt}function O(ze,Ce,Le,Ze){return ft(It(Ce,ze.length-Le),ze,Le,Ze)}function z(ze,Ce,Le,Ze){return ft(yt(Ce),ze,Le,Ze)}function Y(ze,Ce,Le,Ze){return ft(Wt(Ce),ze,Le,Ze)}function te(ze,Ce,Le,Ze){return ft(Tt(Ce,ze.length-Le),ze,Le,Ze)}L.prototype.write=function(Ce,Le,Ze,Je){if(Le===void 0)Je="utf8",Ze=this.length,Le=0;else if(Ze===void 0&&typeof Le=="string")Je=Le,Ze=this.length,Le=0;else if(isFinite(Le))Le=Le>>>0,isFinite(Ze)?(Ze=Ze>>>0,Je===void 0&&(Je="utf8")):(Je=Ze,Ze=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const nt=this.length-Le;if((Ze===void 0||Ze>nt)&&(Ze=nt),Ce.length>0&&(Ze<0||Le<0)||Le>this.length)throw new RangeError("Attempt to write outside buffer bounds");Je||(Je="utf8");let rt=!1;for(;;)switch(Je){case"hex":return ue(this,Ce,Le,Ze);case"utf8":case"utf-8":return O(this,Ce,Le,Ze);case"ascii":case"latin1":case"binary":return z(this,Ce,Le,Ze);case"base64":return Y(this,Ce,Le,Ze);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return te(this,Ce,Le,Ze);default:if(rt)throw new TypeError("Unknown encoding: "+Je);Je=(""+Je).toLowerCase(),rt=!0}},L.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function oe(ze,Ce,Le){return Ce===0&&Le===ze.length?A.fromByteArray(ze):A.fromByteArray(ze.slice(Ce,Le))}function le(ze,Ce,Le){Le=Math.min(ze.length,Le);const Ze=[];let Je=Ce;for(;Je<Le;){const nt=ze[Je];let rt=null,He=nt>239?4:nt>223?3:nt>191?2:1;if(Je+He<=Le){let Dt,Rt,De,We;switch(He){case 1:nt<128&&(rt=nt);break;case 2:Dt=ze[Je+1],(Dt&192)===128&&(We=(nt&31)<<6|Dt&63,We>127&&(rt=We));break;case 3:Dt=ze[Je+1],Rt=ze[Je+2],(Dt&192)===128&&(Rt&192)===128&&(We=(nt&15)<<12|(Dt&63)<<6|Rt&63,We>2047&&(We<55296||We>57343)&&(rt=We));break;case 4:Dt=ze[Je+1],Rt=ze[Je+2],De=ze[Je+3],(Dt&192)===128&&(Rt&192)===128&&(De&192)===128&&(We=(nt&15)<<18|(Dt&63)<<12|(Rt&63)<<6|De&63,We>65535&&We<1114112&&(rt=We))}}rt===null?(rt=65533,He=1):rt>65535&&(rt-=65536,Ze.push(rt>>>10&1023|55296),rt=56320|rt&1023),Ze.push(rt),Je+=He}return ae(Ze)}const he=4096;function ae(ze){const Ce=ze.length;if(Ce<=he)return String.fromCharCode.apply(String,ze);let Le="",Ze=0;for(;Ze<Ce;)Le+=String.fromCharCode.apply(String,ze.slice(Ze,Ze+=he));return Le}function Q(ze,Ce,Le){let Ze="";Le=Math.min(ze.length,Le);for(let Je=Ce;Je<Le;++Je)Ze+=String.fromCharCode(ze[Je]&127);return Ze}function se(ze,Ce,Le){let Ze="";Le=Math.min(ze.length,Le);for(let Je=Ce;Je<Le;++Je)Ze+=String.fromCharCode(ze[Je]);return Ze}function Ae(ze,Ce,Le){const Ze=ze.length;(!Ce||Ce<0)&&(Ce=0),(!Le||Le<0||Le>Ze)&&(Le=Ze);let Je="";for(let nt=Ce;nt<Le;++nt)Je+=Nt[ze[nt]];return Je}function ge(ze,Ce,Le){const Ze=ze.slice(Ce,Le);let Je="";for(let nt=0;nt<Ze.length-1;nt+=2)Je+=String.fromCharCode(Ze[nt]+Ze[nt+1]*256);return Je}L.prototype.slice=function(Ce,Le){const Ze=this.length;Ce=~~Ce,Le=Le===void 0?Ze:~~Le,Ce<0?(Ce+=Ze,Ce<0&&(Ce=0)):Ce>Ze&&(Ce=Ze),Le<0?(Le+=Ze,Le<0&&(Le=0)):Le>Ze&&(Le=Ze),Le<Ce&&(Le=Ce);const Je=this.subarray(Ce,Le);return Object.setPrototypeOf(Je,L.prototype),Je};function Ee(ze,Ce,Le){if(ze%1!==0||ze<0)throw new RangeError("offset is not uint");if(ze+Ce>Le)throw new RangeError("Trying to access beyond buffer length")}L.prototype.readUintLE=L.prototype.readUIntLE=function(Ce,Le,Ze){Ce=Ce>>>0,Le=Le>>>0,Ze||Ee(Ce,Le,this.length);let Je=this[Ce],nt=1,rt=0;for(;++rt<Le&&(nt*=256);)Je+=this[Ce+rt]*nt;return Je},L.prototype.readUintBE=L.prototype.readUIntBE=function(Ce,Le,Ze){Ce=Ce>>>0,Le=Le>>>0,Ze||Ee(Ce,Le,this.length);let Je=this[Ce+--Le],nt=1;for(;Le>0&&(nt*=256);)Je+=this[Ce+--Le]*nt;return Je},L.prototype.readUint8=L.prototype.readUInt8=function(Ce,Le){return Ce=Ce>>>0,Le||Ee(Ce,1,this.length),this[Ce]},L.prototype.readUint16LE=L.prototype.readUInt16LE=function(Ce,Le){return Ce=Ce>>>0,Le||Ee(Ce,2,this.length),this[Ce]|this[Ce+1]<<8},L.prototype.readUint16BE=L.prototype.readUInt16BE=function(Ce,Le){return Ce=Ce>>>0,Le||Ee(Ce,2,this.length),this[Ce]<<8|this[Ce+1]},L.prototype.readUint32LE=L.prototype.readUInt32LE=function(Ce,Le){return Ce=Ce>>>0,Le||Ee(Ce,4,this.length),(this[Ce]|this[Ce+1]<<8|this[Ce+2]<<16)+this[Ce+3]*16777216},L.prototype.readUint32BE=L.prototype.readUInt32BE=function(Ce,Le){return Ce=Ce>>>0,Le||Ee(Ce,4,this.length),this[Ce]*16777216+(this[Ce+1]<<16|this[Ce+2]<<8|this[Ce+3])},L.prototype.readBigUInt64LE=qt(function(Ce){Ce=Ce>>>0,mt(Ce,"offset");const Le=this[Ce],Ze=this[Ce+7];(Le===void 0||Ze===void 0)&&Ut(Ce,this.length-8);const Je=Le+this[++Ce]*2**8+this[++Ce]*2**16+this[++Ce]*2**24,nt=this[++Ce]+this[++Ce]*2**8+this[++Ce]*2**16+Ze*2**24;return BigInt(Je)+(BigInt(nt)<<BigInt(32))}),L.prototype.readBigUInt64BE=qt(function(Ce){Ce=Ce>>>0,mt(Ce,"offset");const Le=this[Ce],Ze=this[Ce+7];(Le===void 0||Ze===void 0)&&Ut(Ce,this.length-8);const Je=Le*2**24+this[++Ce]*2**16+this[++Ce]*2**8+this[++Ce],nt=this[++Ce]*2**24+this[++Ce]*2**16+this[++Ce]*2**8+Ze;return(BigInt(Je)<<BigInt(32))+BigInt(nt)}),L.prototype.readIntLE=function(Ce,Le,Ze){Ce=Ce>>>0,Le=Le>>>0,Ze||Ee(Ce,Le,this.length);let Je=this[Ce],nt=1,rt=0;for(;++rt<Le&&(nt*=256);)Je+=this[Ce+rt]*nt;return nt*=128,Je>=nt&&(Je-=Math.pow(2,8*Le)),Je},L.prototype.readIntBE=function(Ce,Le,Ze){Ce=Ce>>>0,Le=Le>>>0,Ze||Ee(Ce,Le,this.length);let Je=Le,nt=1,rt=this[Ce+--Je];for(;Je>0&&(nt*=256);)rt+=this[Ce+--Je]*nt;return nt*=128,rt>=nt&&(rt-=Math.pow(2,8*Le)),rt},L.prototype.readInt8=function(Ce,Le){return Ce=Ce>>>0,Le||Ee(Ce,1,this.length),this[Ce]&128?(255-this[Ce]+1)*-1:this[Ce]},L.prototype.readInt16LE=function(Ce,Le){Ce=Ce>>>0,Le||Ee(Ce,2,this.length);const Ze=this[Ce]|this[Ce+1]<<8;return Ze&32768?Ze|4294901760:Ze},L.prototype.readInt16BE=function(Ce,Le){Ce=Ce>>>0,Le||Ee(Ce,2,this.length);const Ze=this[Ce+1]|this[Ce]<<8;return Ze&32768?Ze|4294901760:Ze},L.prototype.readInt32LE=function(Ce,Le){return Ce=Ce>>>0,Le||Ee(Ce,4,this.length),this[Ce]|this[Ce+1]<<8|this[Ce+2]<<16|this[Ce+3]<<24},L.prototype.readInt32BE=function(Ce,Le){return Ce=Ce>>>0,Le||Ee(Ce,4,this.length),this[Ce]<<24|this[Ce+1]<<16|this[Ce+2]<<8|this[Ce+3]},L.prototype.readBigInt64LE=qt(function(Ce){Ce=Ce>>>0,mt(Ce,"offset");const Le=this[Ce],Ze=this[Ce+7];(Le===void 0||Ze===void 0)&&Ut(Ce,this.length-8);const Je=this[Ce+4]+this[Ce+5]*2**8+this[Ce+6]*2**16+(Ze<<24);return(BigInt(Je)<<BigInt(32))+BigInt(Le+this[++Ce]*2**8+this[++Ce]*2**16+this[++Ce]*2**24)}),L.prototype.readBigInt64BE=qt(function(Ce){Ce=Ce>>>0,mt(Ce,"offset");const Le=this[Ce],Ze=this[Ce+7];(Le===void 0||Ze===void 0)&&Ut(Ce,this.length-8);const Je=(Le<<24)+this[++Ce]*2**16+this[++Ce]*2**8+this[++Ce];return(BigInt(Je)<<BigInt(32))+BigInt(this[++Ce]*2**24+this[++Ce]*2**16+this[++Ce]*2**8+Ze)}),L.prototype.readFloatLE=function(Ce,Le){return Ce=Ce>>>0,Le||Ee(Ce,4,this.length),_.read(this,Ce,!0,23,4)},L.prototype.readFloatBE=function(Ce,Le){return Ce=Ce>>>0,Le||Ee(Ce,4,this.length),_.read(this,Ce,!1,23,4)},L.prototype.readDoubleLE=function(Ce,Le){return Ce=Ce>>>0,Le||Ee(Ce,8,this.length),_.read(this,Ce,!0,52,8)},L.prototype.readDoubleBE=function(Ce,Le){return Ce=Ce>>>0,Le||Ee(Ce,8,this.length),_.read(this,Ce,!1,52,8)};function ke(ze,Ce,Le,Ze,Je,nt){if(!L.isBuffer(ze))throw new TypeError('"buffer" argument must be a Buffer instance');if(Ce>Je||Ce<nt)throw new RangeError('"value" argument is out of bounds');if(Le+Ze>ze.length)throw new RangeError("Index out of range")}L.prototype.writeUintLE=L.prototype.writeUIntLE=function(Ce,Le,Ze,Je){if(Ce=+Ce,Le=Le>>>0,Ze=Ze>>>0,!Je){const He=Math.pow(2,8*Ze)-1;ke(this,Ce,Le,Ze,He,0)}let nt=1,rt=0;for(this[Le]=Ce&255;++rt<Ze&&(nt*=256);)this[Le+rt]=Ce/nt&255;return Le+Ze},L.prototype.writeUintBE=L.prototype.writeUIntBE=function(Ce,Le,Ze,Je){if(Ce=+Ce,Le=Le>>>0,Ze=Ze>>>0,!Je){const He=Math.pow(2,8*Ze)-1;ke(this,Ce,Le,Ze,He,0)}let nt=Ze-1,rt=1;for(this[Le+nt]=Ce&255;--nt>=0&&(rt*=256);)this[Le+nt]=Ce/rt&255;return Le+Ze},L.prototype.writeUint8=L.prototype.writeUInt8=function(Ce,Le,Ze){return Ce=+Ce,Le=Le>>>0,Ze||ke(this,Ce,Le,1,255,0),this[Le]=Ce&255,Le+1},L.prototype.writeUint16LE=L.prototype.writeUInt16LE=function(Ce,Le,Ze){return Ce=+Ce,Le=Le>>>0,Ze||ke(this,Ce,Le,2,65535,0),this[Le]=Ce&255,this[Le+1]=Ce>>>8,Le+2},L.prototype.writeUint16BE=L.prototype.writeUInt16BE=function(Ce,Le,Ze){return Ce=+Ce,Le=Le>>>0,Ze||ke(this,Ce,Le,2,65535,0),this[Le]=Ce>>>8,this[Le+1]=Ce&255,Le+2},L.prototype.writeUint32LE=L.prototype.writeUInt32LE=function(Ce,Le,Ze){return Ce=+Ce,Le=Le>>>0,Ze||ke(this,Ce,Le,4,4294967295,0),this[Le+3]=Ce>>>24,this[Le+2]=Ce>>>16,this[Le+1]=Ce>>>8,this[Le]=Ce&255,Le+4},L.prototype.writeUint32BE=L.prototype.writeUInt32BE=function(Ce,Le,Ze){return Ce=+Ce,Le=Le>>>0,Ze||ke(this,Ce,Le,4,4294967295,0),this[Le]=Ce>>>24,this[Le+1]=Ce>>>16,this[Le+2]=Ce>>>8,this[Le+3]=Ce&255,Le+4};function Se(ze,Ce,Le,Ze,Je){dt(Ce,Ze,Je,ze,Le,7);let nt=Number(Ce&BigInt(4294967295));ze[Le++]=nt,nt=nt>>8,ze[Le++]=nt,nt=nt>>8,ze[Le++]=nt,nt=nt>>8,ze[Le++]=nt;let rt=Number(Ce>>BigInt(32)&BigInt(4294967295));return ze[Le++]=rt,rt=rt>>8,ze[Le++]=rt,rt=rt>>8,ze[Le++]=rt,rt=rt>>8,ze[Le++]=rt,Le}function Ie(ze,Ce,Le,Ze,Je){dt(Ce,Ze,Je,ze,Le,7);let nt=Number(Ce&BigInt(4294967295));ze[Le+7]=nt,nt=nt>>8,ze[Le+6]=nt,nt=nt>>8,ze[Le+5]=nt,nt=nt>>8,ze[Le+4]=nt;let rt=Number(Ce>>BigInt(32)&BigInt(4294967295));return ze[Le+3]=rt,rt=rt>>8,ze[Le+2]=rt,rt=rt>>8,ze[Le+1]=rt,rt=rt>>8,ze[Le]=rt,Le+8}L.prototype.writeBigUInt64LE=qt(function(Ce,Le=0){return Se(this,Ce,Le,BigInt(0),BigInt("0xffffffffffffffff"))}),L.prototype.writeBigUInt64BE=qt(function(Ce,Le=0){return Ie(this,Ce,Le,BigInt(0),BigInt("0xffffffffffffffff"))}),L.prototype.writeIntLE=function(Ce,Le,Ze,Je){if(Ce=+Ce,Le=Le>>>0,!Je){const Dt=Math.pow(2,8*Ze-1);ke(this,Ce,Le,Ze,Dt-1,-Dt)}let nt=0,rt=1,He=0;for(this[Le]=Ce&255;++nt<Ze&&(rt*=256);)Ce<0&&He===0&&this[Le+nt-1]!==0&&(He=1),this[Le+nt]=(Ce/rt>>0)-He&255;return Le+Ze},L.prototype.writeIntBE=function(Ce,Le,Ze,Je){if(Ce=+Ce,Le=Le>>>0,!Je){const Dt=Math.pow(2,8*Ze-1);ke(this,Ce,Le,Ze,Dt-1,-Dt)}let nt=Ze-1,rt=1,He=0;for(this[Le+nt]=Ce&255;--nt>=0&&(rt*=256);)Ce<0&&He===0&&this[Le+nt+1]!==0&&(He=1),this[Le+nt]=(Ce/rt>>0)-He&255;return Le+Ze},L.prototype.writeInt8=function(Ce,Le,Ze){return Ce=+Ce,Le=Le>>>0,Ze||ke(this,Ce,Le,1,127,-128),Ce<0&&(Ce=255+Ce+1),this[Le]=Ce&255,Le+1},L.prototype.writeInt16LE=function(Ce,Le,Ze){return Ce=+Ce,Le=Le>>>0,Ze||ke(this,Ce,Le,2,32767,-32768),this[Le]=Ce&255,this[Le+1]=Ce>>>8,Le+2},L.prototype.writeInt16BE=function(Ce,Le,Ze){return Ce=+Ce,Le=Le>>>0,Ze||ke(this,Ce,Le,2,32767,-32768),this[Le]=Ce>>>8,this[Le+1]=Ce&255,Le+2},L.prototype.writeInt32LE=function(Ce,Le,Ze){return Ce=+Ce,Le=Le>>>0,Ze||ke(this,Ce,Le,4,2147483647,-2147483648),this[Le]=Ce&255,this[Le+1]=Ce>>>8,this[Le+2]=Ce>>>16,this[Le+3]=Ce>>>24,Le+4},L.prototype.writeInt32BE=function(Ce,Le,Ze){return Ce=+Ce,Le=Le>>>0,Ze||ke(this,Ce,Le,4,2147483647,-2147483648),Ce<0&&(Ce=4294967295+Ce+1),this[Le]=Ce>>>24,this[Le+1]=Ce>>>16,this[Le+2]=Ce>>>8,this[Le+3]=Ce&255,Le+4},L.prototype.writeBigInt64LE=qt(function(Ce,Le=0){return Se(this,Ce,Le,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),L.prototype.writeBigInt64BE=qt(function(Ce,Le=0){return Ie(this,Ce,Le,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function we(ze,Ce,Le,Ze,Je,nt){if(Le+Ze>ze.length)throw new RangeError("Index out of range");if(Le<0)throw new RangeError("Index out of range")}function xe(ze,Ce,Le,Ze,Je){return Ce=+Ce,Le=Le>>>0,Je||we(ze,Ce,Le,4),_.write(ze,Ce,Le,Ze,23,4),Le+4}L.prototype.writeFloatLE=function(Ce,Le,Ze){return xe(this,Ce,Le,!0,Ze)},L.prototype.writeFloatBE=function(Ce,Le,Ze){return xe(this,Ce,Le,!1,Ze)};function Fe(ze,Ce,Le,Ze,Je){return Ce=+Ce,Le=Le>>>0,Je||we(ze,Ce,Le,8),_.write(ze,Ce,Le,Ze,52,8),Le+8}L.prototype.writeDoubleLE=function(Ce,Le,Ze){return Fe(this,Ce,Le,!0,Ze)},L.prototype.writeDoubleBE=function(Ce,Le,Ze){return Fe(this,Ce,Le,!1,Ze)},L.prototype.copy=function(Ce,Le,Ze,Je){if(!L.isBuffer(Ce))throw new TypeError("argument should be a Buffer");if(Ze||(Ze=0),!Je&&Je!==0&&(Je=this.length),Le>=Ce.length&&(Le=Ce.length),Le||(Le=0),Je>0&&Je<Ze&&(Je=Ze),Je===Ze||Ce.length===0||this.length===0)return 0;if(Le<0)throw new RangeError("targetStart out of bounds");if(Ze<0||Ze>=this.length)throw new RangeError("Index out of range");if(Je<0)throw new RangeError("sourceEnd out of bounds");Je>this.length&&(Je=this.length),Ce.length-Le<Je-Ze&&(Je=Ce.length-Le+Ze);const nt=Je-Ze;return this===Ce&&typeof T.prototype.copyWithin=="function"?this.copyWithin(Le,Ze,Je):T.prototype.set.call(Ce,this.subarray(Ze,Je),Le),nt},L.prototype.fill=function(Ce,Le,Ze,Je){if(typeof Ce=="string"){if(typeof Le=="string"?(Je=Le,Le=0,Ze=this.length):typeof Ze=="string"&&(Je=Ze,Ze=this.length),Je!==void 0&&typeof Je!="string")throw new TypeError("encoding must be a string");if(typeof Je=="string"&&!L.isEncoding(Je))throw new TypeError("Unknown encoding: "+Je);if(Ce.length===1){const rt=Ce.charCodeAt(0);(Je==="utf8"&&rt<128||Je==="latin1")&&(Ce=rt)}}else typeof Ce=="number"?Ce=Ce&255:typeof Ce=="boolean"&&(Ce=Number(Ce));if(Le<0||this.length<Le||this.length<Ze)throw new RangeError("Out of range index");if(Ze<=Le)return this;Le=Le>>>0,Ze=Ze===void 0?this.length:Ze>>>0,Ce||(Ce=0);let nt;if(typeof Ce=="number")for(nt=Le;nt<Ze;++nt)this[nt]=Ce;else{const rt=L.isBuffer(Ce)?Ce:L.from(Ce,Je),He=rt.length;if(He===0)throw new TypeError('The value "'+Ce+'" is invalid for argument "value"');for(nt=0;nt<Ze-Le;++nt)this[nt+Le]=rt[nt%He]}return this};const Ge={};function Oe(ze,Ce,Le){Ge[ze]=class extends Le{constructor(){super(),Object.defineProperty(this,"message",{value:Ce.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ze}]`,this.stack,delete this.name}get code(){return ze}set code(Je){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Je,writable:!0})}toString(){return`${this.name} [${ze}]: ${this.message}`}}}Oe("ERR_BUFFER_OUT_OF_BOUNDS",function(ze){return ze?`${ze} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Oe("ERR_INVALID_ARG_TYPE",function(ze,Ce){return`The "${ze}" argument must be of type number. Received type ${typeof Ce}`},TypeError),Oe("ERR_OUT_OF_RANGE",function(ze,Ce,Le){let Ze=`The value of "${ze}" is out of range.`,Je=Le;return Number.isInteger(Le)&&Math.abs(Le)>2**32?Je=et(String(Le)):typeof Le=="bigint"&&(Je=String(Le),(Le>BigInt(2)**BigInt(32)||Le<-(BigInt(2)**BigInt(32)))&&(Je=et(Je)),Je+="n"),Ze+=` It must be ${Ce}. Received ${Je}`,Ze},RangeError);function et(ze){let Ce="",Le=ze.length;const Ze=ze[0]==="-"?1:0;for(;Le>=Ze+4;Le-=3)Ce=`_${ze.slice(Le-3,Le)}${Ce}`;return`${ze.slice(0,Le)}${Ce}`}function Mt(ze,Ce,Le){mt(Ce,"offset"),(ze[Ce]===void 0||ze[Ce+Le]===void 0)&&Ut(Ce,ze.length-(Le+1))}function dt(ze,Ce,Le,Ze,Je,nt){if(ze>Le||ze<Ce){const rt=typeof Ce=="bigint"?"n":"";let He;throw Ce===0||Ce===BigInt(0)?He=`>= 0${rt} and < 2${rt} ** ${(nt+1)*8}${rt}`:He=`>= -(2${rt} ** ${(nt+1)*8-1}${rt}) and < 2 ** ${(nt+1)*8-1}${rt}`,new Ge.ERR_OUT_OF_RANGE("value",He,ze)}Mt(Ze,Je,nt)}function mt(ze,Ce){if(typeof ze!="number")throw new Ge.ERR_INVALID_ARG_TYPE(Ce,"number",ze)}function Ut(ze,Ce,Le){throw Math.floor(ze)!==ze?(mt(ze,Le),new Ge.ERR_OUT_OF_RANGE("offset","an integer",ze)):Ce<0?new Ge.ERR_BUFFER_OUT_OF_BOUNDS:new Ge.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${Ce}`,ze)}const St=/[^+/0-9A-Za-z-_]/g;function vt(ze){if(ze=ze.split("=")[0],ze=ze.trim().replace(St,""),ze.length<2)return"";for(;ze.length%4!==0;)ze=ze+"=";return ze}function It(ze,Ce){Ce=Ce||1/0;let Le;const Ze=ze.length;let Je=null;const nt=[];for(let rt=0;rt<Ze;++rt){if(Le=ze.charCodeAt(rt),Le>55295&&Le<57344){if(!Je){if(Le>56319){(Ce-=3)>-1&&nt.push(239,191,189);continue}else if(rt+1===Ze){(Ce-=3)>-1&&nt.push(239,191,189);continue}Je=Le;continue}if(Le<56320){(Ce-=3)>-1&&nt.push(239,191,189),Je=Le;continue}Le=(Je-55296<<10|Le-56320)+65536}else Je&&(Ce-=3)>-1&&nt.push(239,191,189);if(Je=null,Le<128){if((Ce-=1)<0)break;nt.push(Le)}else if(Le<2048){if((Ce-=2)<0)break;nt.push(Le>>6|192,Le&63|128)}else if(Le<65536){if((Ce-=3)<0)break;nt.push(Le>>12|224,Le>>6&63|128,Le&63|128)}else if(Le<1114112){if((Ce-=4)<0)break;nt.push(Le>>18|240,Le>>12&63|128,Le>>6&63|128,Le&63|128)}else throw new Error("Invalid code point")}return nt}function yt(ze){const Ce=[];for(let Le=0;Le<ze.length;++Le)Ce.push(ze.charCodeAt(Le)&255);return Ce}function Tt(ze,Ce){let Le,Ze,Je;const nt=[];for(let rt=0;rt<ze.length&&!((Ce-=2)<0);++rt)Le=ze.charCodeAt(rt),Ze=Le>>8,Je=Le%256,nt.push(Je),nt.push(Ze);return nt}function Wt(ze){return A.toByteArray(vt(ze))}function ft(ze,Ce,Le,Ze){let Je;for(Je=0;Je<Ze&&!(Je+Le>=Ce.length||Je>=ze.length);++Je)Ce[Je+Le]=ze[Je];return Je}function _t(ze,Ce){return ze instanceof Ce||ze!=null&&ze.constructor!=null&&ze.constructor.name!=null&&ze.constructor.name===Ce.name}function Xt(ze){return ze!==ze}const Nt=(function(){const ze="0123456789abcdef",Ce=new Array(256);for(let Le=0;Le<16;++Le){const Ze=Le*16;for(let Je=0;Je<16;++Je)Ce[Ze+Je]=ze[Le]+ze[Je]}return Ce})();function qt(ze){return typeof BigInt>"u"?nr:ze}function nr(){throw new Error("BigInt not supported")}})(buffer$1);const Buffer$1=buffer$1.Buffer,scriptRel="modulepreload",assetsURL=function(E,A){return new URL(E,A).href},seen={},__vitePreload=function(A,_,I){let B=Promise.resolve();if(_&&_.length>0){let R=function(L){return Promise.all(L.map(U=>Promise.resolve(U).then(V=>({status:"fulfilled",value:V}),V=>({status:"rejected",reason:V}))))};const P=document.getElementsByTagName("link"),D=document.querySelector("meta[property=csp-nonce]"),F=D?.nonce||D?.getAttribute("nonce");B=R(_.map(L=>{if(L=assetsURL(L,I),L in seen)return;seen[L]=!0;const U=L.endsWith(".css"),V=U?'[rel="stylesheet"]':"";if(!!I)for(let ee=P.length-1;ee>=0;ee--){const ie=P[ee];if(ie.href===L&&(!U||ie.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${L}"]${V}`))return;const J=document.createElement("link");if(J.rel=U?"stylesheet":scriptRel,U||(J.as="script"),J.crossOrigin="",J.href=L,F&&J.setAttribute("nonce",F),document.head.appendChild(J),U)return new Promise((ee,ie)=>{J.addEventListener("load",ee),J.addEventListener("error",()=>ie(new Error(`Unable to preload CSS for ${L}`)))})}))}function T(R){const P=new Event("vite:preloadError",{cancelable:!0});if(P.payload=R,window.dispatchEvent(P),!P.defaultPrevented)throw R}return B.then(R=>{for(const P of R||[])P.status==="rejected"&&T(P.reason);return A().catch(T)})};var ExtensionType=(E=>(E.Application="application",E.WebGLPipes="webgl-pipes",E.WebGLPipesAdaptor="webgl-pipes-adaptor",E.WebGLSystem="webgl-system",E.WebGPUPipes="webgpu-pipes",E.WebGPUPipesAdaptor="webgpu-pipes-adaptor",E.WebGPUSystem="webgpu-system",E.CanvasSystem="canvas-system",E.CanvasPipesAdaptor="canvas-pipes-adaptor",E.CanvasPipes="canvas-pipes",E.Asset="asset",E.LoadParser="load-parser",E.ResolveParser="resolve-parser",E.CacheParser="cache-parser",E.DetectionParser="detection-parser",E.MaskEffect="mask-effect",E.BlendMode="blend-mode",E.TextureSource="texture-source",E.Environment="environment",E.ShapeBuilder="shape-builder",E.Batcher="batcher",E))(ExtensionType||{});const normalizeExtension=E=>{if(typeof E=="function"||typeof E=="object"&&E.extension){if(!E.extension)throw new Error("Extension class must have an extension object");E={...typeof E.extension!="object"?{type:E.extension}:E.extension,ref:E}}if(typeof E=="object")E={...E};else throw new Error("Invalid extension type");return typeof E.type=="string"&&(E.type=[E.type]),E},normalizeExtensionPriority=(E,A)=>normalizeExtension(E).priority??A,extensions={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...E){return E.map(normalizeExtension).forEach(A=>{A.type.forEach(_=>this._removeHandlers[_]?.(A))}),this},add(...E){return E.map(normalizeExtension).forEach(A=>{A.type.forEach(_=>{const I=this._addHandlers,B=this._queue;I[_]?I[_]?.(A):(B[_]=B[_]||[],B[_]?.push(A))})}),this},handle(E,A,_){const I=this._addHandlers,B=this._removeHandlers;if(I[E]||B[E])throw new Error(`Extension type ${E} already has a handler`);I[E]=A,B[E]=_;const T=this._queue;return T[E]&&(T[E]?.forEach(R=>A(R)),delete T[E]),this},handleByMap(E,A){return this.handle(E,_=>{_.name&&(A[_.name]=_.ref)},_=>{_.name&&delete A[_.name]})},handleByNamedList(E,A,_=-1){return this.handle(E,I=>{A.findIndex(T=>T.name===I.name)>=0||(A.push({name:I.name,value:I.ref}),A.sort((T,R)=>normalizeExtensionPriority(R.value,_)-normalizeExtensionPriority(T.value,_)))},I=>{const B=A.findIndex(T=>T.name===I.name);B!==-1&&A.splice(B,1)})},handleByList(E,A,_=-1){return this.handle(E,I=>{A.includes(I.ref)||(A.push(I.ref),A.sort((B,T)=>normalizeExtensionPriority(T,_)-normalizeExtensionPriority(B,_)))},I=>{const B=A.indexOf(I.ref);B!==-1&&A.splice(B,1)})},mixin(E,...A){for(const _ of A)Object.defineProperties(E.prototype,Object.getOwnPropertyDescriptors(_))}},browserExt={extension:{type:ExtensionType.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await __vitePreload(()=>import("./browserAll-DXMGw6Wf.js"),__vite__mapDeps([0,1]),import.meta.url)}},webworkerExt={extension:{type:ExtensionType.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await __vitePreload(()=>import("./webworkerAll-D8fhvXB1.js"),[],import.meta.url)}};class ObservablePoint{constructor(A,_,I){this._x=_||0,this._y=I||0,this._observer=A}clone(A){return new ObservablePoint(A??this._observer,this._x,this._y)}set(A=0,_=A){return(this._x!==A||this._y!==_)&&(this._x=A,this._y=_,this._observer._onUpdate(this)),this}copyFrom(A){return(this._x!==A.x||this._y!==A.y)&&(this._x=A.x,this._y=A.y,this._observer._onUpdate(this)),this}copyTo(A){return A.set(this._x,this._y),A}equals(A){return A.x===this._x&&A.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`}get x(){return this._x}set x(A){this._x!==A&&(this._x=A,this._observer._onUpdate(this))}get y(){return this._y}set y(A){this._y!==A&&(this._y=A,this._observer._onUpdate(this))}}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs$1(E){return E&&E.__esModule&&Object.prototype.hasOwnProperty.call(E,"default")?E.default:E}function getAugmentedNamespace(E){if(Object.prototype.hasOwnProperty.call(E,"__esModule"))return E;var A=E.default;if(typeof A=="function"){var _=function I(){return this instanceof I?Reflect.construct(A,arguments,this.constructor):A.apply(this,arguments)};_.prototype=A.prototype}else _={};return Object.defineProperty(_,"__esModule",{value:!0}),Object.keys(E).forEach(function(I){var B=Object.getOwnPropertyDescriptor(E,I);Object.defineProperty(_,I,B.get?B:{enumerable:!0,get:function(){return E[I]}})}),_}var eventemitter3={exports:{}},hasRequiredEventemitter3;function requireEventemitter3(){return hasRequiredEventemitter3||(hasRequiredEventemitter3=1,(function(E){var A=Object.prototype.hasOwnProperty,_="~";function I(){}Object.create&&(I.prototype=Object.create(null),new I().__proto__||(_=!1));function B(D,F,L){this.fn=D,this.context=F,this.once=L||!1}function T(D,F,L,U,V){if(typeof L!="function")throw new TypeError("The listener must be a function");var K=new B(L,U||D,V),J=_?_+F:F;return D._events[J]?D._events[J].fn?D._events[J]=[D._events[J],K]:D._events[J].push(K):(D._events[J]=K,D._eventsCount++),D}function R(D,F){--D._eventsCount===0?D._events=new I:delete D._events[F]}function P(){this._events=new I,this._eventsCount=0}P.prototype.eventNames=function(){var F=[],L,U;if(this._eventsCount===0)return F;for(U in L=this._events)A.call(L,U)&&F.push(_?U.slice(1):U);return Object.getOwnPropertySymbols?F.concat(Object.getOwnPropertySymbols(L)):F},P.prototype.listeners=function(F){var L=_?_+F:F,U=this._events[L];if(!U)return[];if(U.fn)return[U.fn];for(var V=0,K=U.length,J=new Array(K);V<K;V++)J[V]=U[V].fn;return J},P.prototype.listenerCount=function(F){var L=_?_+F:F,U=this._events[L];return U?U.fn?1:U.length:0},P.prototype.emit=function(F,L,U,V,K,J){var ee=_?_+F:F;if(!this._events[ee])return!1;var ie=this._events[ee],ne=arguments.length,ce,fe;if(ie.fn){switch(ie.once&&this.removeListener(F,ie.fn,void 0,!0),ne){case 1:return ie.fn.call(ie.context),!0;case 2:return ie.fn.call(ie.context,L),!0;case 3:return ie.fn.call(ie.context,L,U),!0;case 4:return ie.fn.call(ie.context,L,U,V),!0;case 5:return ie.fn.call(ie.context,L,U,V,K),!0;case 6:return ie.fn.call(ie.context,L,U,V,K,J),!0}for(fe=1,ce=new Array(ne-1);fe<ne;fe++)ce[fe-1]=arguments[fe];ie.fn.apply(ie.context,ce)}else{var de=ie.length,pe;for(fe=0;fe<de;fe++)switch(ie[fe].once&&this.removeListener(F,ie[fe].fn,void 0,!0),ne){case 1:ie[fe].fn.call(ie[fe].context);break;case 2:ie[fe].fn.call(ie[fe].context,L);break;case 3:ie[fe].fn.call(ie[fe].context,L,U);break;case 4:ie[fe].fn.call(ie[fe].context,L,U,V);break;default:if(!ce)for(pe=1,ce=new Array(ne-1);pe<ne;pe++)ce[pe-1]=arguments[pe];ie[fe].fn.apply(ie[fe].context,ce)}}return!0},P.prototype.on=function(F,L,U){return T(this,F,L,U,!1)},P.prototype.once=function(F,L,U){return T(this,F,L,U,!0)},P.prototype.removeListener=function(F,L,U,V){var K=_?_+F:F;if(!this._events[K])return this;if(!L)return R(this,K),this;var J=this._events[K];if(J.fn)J.fn===L&&(!V||J.once)&&(!U||J.context===U)&&R(this,K);else{for(var ee=0,ie=[],ne=J.length;ee<ne;ee++)(J[ee].fn!==L||V&&!J[ee].once||U&&J[ee].context!==U)&&ie.push(J[ee]);ie.length?this._events[K]=ie.length===1?ie[0]:ie:R(this,K)}return this},P.prototype.removeAllListeners=function(F){var L;return F?(L=_?_+F:F,this._events[L]&&R(this,L)):(this._events=new I,this._eventsCount=0),this},P.prototype.off=P.prototype.removeListener,P.prototype.addListener=P.prototype.on,P.prefixed=_,P.EventEmitter=P,E.exports=P})(eventemitter3)),eventemitter3.exports}var eventemitter3Exports=requireEventemitter3();const EventEmitter=getDefaultExportFromCjs$1(eventemitter3Exports),PI_2=Math.PI*2,RAD_TO_DEG=180/Math.PI,DEG_TO_RAD=Math.PI/180;let Point$1=class Xi{constructor(A=0,_=0){this.x=0,this.y=0,this.x=A,this.y=_}clone(){return new Xi(this.x,this.y)}copyFrom(A){return this.set(A.x,A.y),this}copyTo(A){return A.set(this.x,this.y),A}equals(A){return A.x===this.x&&A.y===this.y}set(A=0,_=A){return this.x=A,this.y=_,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return tempPoint.x=0,tempPoint.y=0,tempPoint}};const tempPoint=new Point$1;class Matrix{constructor(A=1,_=0,I=0,B=1,T=0,R=0){this.array=null,this.a=A,this.b=_,this.c=I,this.d=B,this.tx=T,this.ty=R}fromArray(A){this.a=A[0],this.b=A[1],this.c=A[3],this.d=A[4],this.tx=A[2],this.ty=A[5]}set(A,_,I,B,T,R){return this.a=A,this.b=_,this.c=I,this.d=B,this.tx=T,this.ty=R,this}toArray(A,_){this.array||(this.array=new Float32Array(9));const I=_||this.array;return A?(I[0]=this.a,I[1]=this.b,I[2]=0,I[3]=this.c,I[4]=this.d,I[5]=0,I[6]=this.tx,I[7]=this.ty,I[8]=1):(I[0]=this.a,I[1]=this.c,I[2]=this.tx,I[3]=this.b,I[4]=this.d,I[5]=this.ty,I[6]=0,I[7]=0,I[8]=1),I}apply(A,_){_=_||new Point$1;const I=A.x,B=A.y;return _.x=this.a*I+this.c*B+this.tx,_.y=this.b*I+this.d*B+this.ty,_}applyInverse(A,_){_=_||new Point$1;const I=this.a,B=this.b,T=this.c,R=this.d,P=this.tx,D=this.ty,F=1/(I*R+T*-B),L=A.x,U=A.y;return _.x=R*F*L+-T*F*U+(D*T-P*R)*F,_.y=I*F*U+-B*F*L+(-D*I+P*B)*F,_}translate(A,_){return this.tx+=A,this.ty+=_,this}scale(A,_){return this.a*=A,this.d*=_,this.c*=A,this.b*=_,this.tx*=A,this.ty*=_,this}rotate(A){const _=Math.cos(A),I=Math.sin(A),B=this.a,T=this.c,R=this.tx;return this.a=B*_-this.b*I,this.b=B*I+this.b*_,this.c=T*_-this.d*I,this.d=T*I+this.d*_,this.tx=R*_-this.ty*I,this.ty=R*I+this.ty*_,this}append(A){const _=this.a,I=this.b,B=this.c,T=this.d;return this.a=A.a*_+A.b*B,this.b=A.a*I+A.b*T,this.c=A.c*_+A.d*B,this.d=A.c*I+A.d*T,this.tx=A.tx*_+A.ty*B+this.tx,this.ty=A.tx*I+A.ty*T+this.ty,this}appendFrom(A,_){const I=A.a,B=A.b,T=A.c,R=A.d,P=A.tx,D=A.ty,F=_.a,L=_.b,U=_.c,V=_.d;return this.a=I*F+B*U,this.b=I*L+B*V,this.c=T*F+R*U,this.d=T*L+R*V,this.tx=P*F+D*U+_.tx,this.ty=P*L+D*V+_.ty,this}setTransform(A,_,I,B,T,R,P,D,F){return this.a=Math.cos(P+F)*T,this.b=Math.sin(P+F)*T,this.c=-Math.sin(P-D)*R,this.d=Math.cos(P-D)*R,this.tx=A-(I*this.a+B*this.c),this.ty=_-(I*this.b+B*this.d),this}prepend(A){const _=this.tx;if(A.a!==1||A.b!==0||A.c!==0||A.d!==1){const I=this.a,B=this.c;this.a=I*A.a+this.b*A.c,this.b=I*A.b+this.b*A.d,this.c=B*A.a+this.d*A.c,this.d=B*A.b+this.d*A.d}return this.tx=_*A.a+this.ty*A.c+A.tx,this.ty=_*A.b+this.ty*A.d+A.ty,this}decompose(A){const _=this.a,I=this.b,B=this.c,T=this.d,R=A.pivot,P=-Math.atan2(-B,T),D=Math.atan2(I,_),F=Math.abs(P+D);return F<1e-5||Math.abs(PI_2-F)<1e-5?(A.rotation=D,A.skew.x=A.skew.y=0):(A.rotation=0,A.skew.x=P,A.skew.y=D),A.scale.x=Math.sqrt(_*_+I*I),A.scale.y=Math.sqrt(B*B+T*T),A.position.x=this.tx+(R.x*_+R.y*B),A.position.y=this.ty+(R.x*I+R.y*T),A}invert(){const A=this.a,_=this.b,I=this.c,B=this.d,T=this.tx,R=A*B-_*I;return this.a=B/R,this.b=-_/R,this.c=-I/R,this.d=A/R,this.tx=(I*this.ty-B*T)/R,this.ty=-(A*this.ty-_*T)/R,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const A=new Matrix;return A.a=this.a,A.b=this.b,A.c=this.c,A.d=this.d,A.tx=this.tx,A.ty=this.ty,A}copyTo(A){return A.a=this.a,A.b=this.b,A.c=this.c,A.d=this.d,A.tx=this.tx,A.ty=this.ty,A}copyFrom(A){return this.a=A.a,this.b=A.b,this.c=A.c,this.d=A.d,this.tx=A.tx,this.ty=A.ty,this}equals(A){return A.a===this.a&&A.b===this.b&&A.c===this.c&&A.d===this.d&&A.tx===this.tx&&A.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return identityMatrix$1.identity()}static get shared(){return tempMatrix$6.identity()}}const tempMatrix$6=new Matrix,identityMatrix$1=new Matrix,ux=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],uy=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],vx=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],vy=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],rotationCayley=[],rotationMatrices=[],signum=Math.sign;function init$1(){for(let E=0;E<16;E++){const A=[];rotationCayley.push(A);for(let _=0;_<16;_++){const I=signum(ux[E]*ux[_]+vx[E]*uy[_]),B=signum(uy[E]*ux[_]+vy[E]*uy[_]),T=signum(ux[E]*vx[_]+vx[E]*vy[_]),R=signum(uy[E]*vx[_]+vy[E]*vy[_]);for(let P=0;P<16;P++)if(ux[P]===I&&uy[P]===B&&vx[P]===T&&vy[P]===R){A.push(P);break}}}for(let E=0;E<16;E++){const A=new Matrix;A.set(ux[E],uy[E],vx[E],vy[E],0,0),rotationMatrices.push(A)}}init$1();const groupD8={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:E=>ux[E],uY:E=>uy[E],vX:E=>vx[E],vY:E=>vy[E],inv:E=>E&8?E&15:-E&7,add:(E,A)=>rotationCayley[E][A],sub:(E,A)=>rotationCayley[E][groupD8.inv(A)],rotate180:E=>E^4,isVertical:E=>(E&3)===2,byDirection:(E,A)=>Math.abs(E)*2<=Math.abs(A)?A>=0?groupD8.S:groupD8.N:Math.abs(A)*2<=Math.abs(E)?E>0?groupD8.E:groupD8.W:A>0?E>0?groupD8.SE:groupD8.SW:E>0?groupD8.NE:groupD8.NW,matrixAppendRotationInv:(E,A,_=0,I=0)=>{const B=rotationMatrices[groupD8.inv(A)];B.tx=_,B.ty=I,E.append(B)},transformRectCoords:(E,A,_,I)=>{const{x:B,y:T,width:R,height:P}=E,{x:D,y:F,width:L,height:U}=A;return _===groupD8.E?(I.set(B+D,T+F,R,P),I):_===groupD8.S?I.set(L-T-P+D,B+F,P,R):_===groupD8.W?I.set(L-B-R+D,U-T-P+F,R,P):_===groupD8.N?I.set(T+D,U-B-R+F,P,R):I.set(B+D,T+F,R,P)}},tempPoints=[new Point$1,new Point$1,new Point$1,new Point$1];class Rectangle{constructor(A=0,_=0,I=0,B=0){this.type="rectangle",this.x=Number(A),this.y=Number(_),this.width=Number(I),this.height=Number(B)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new Rectangle(0,0,0,0)}clone(){return new Rectangle(this.x,this.y,this.width,this.height)}copyFromBounds(A){return this.x=A.minX,this.y=A.minY,this.width=A.maxX-A.minX,this.height=A.maxY-A.minY,this}copyFrom(A){return this.x=A.x,this.y=A.y,this.width=A.width,this.height=A.height,this}copyTo(A){return A.copyFrom(this),A}contains(A,_){return this.width<=0||this.height<=0?!1:A>=this.x&&A<this.x+this.width&&_>=this.y&&_<this.y+this.height}strokeContains(A,_,I,B=.5){const{width:T,height:R}=this;if(T<=0||R<=0)return!1;const P=this.x,D=this.y,F=I*(1-B),L=I-F,U=P-F,V=P+T+F,K=D-F,J=D+R+F,ee=P+L,ie=P+T-L,ne=D+L,ce=D+R-L;return A>=U&&A<=V&&_>=K&&_<=J&&!(A>ee&&A<ie&&_>ne&&_<ce)}intersects(A,_){if(!_){const _e=this.x<A.x?A.x:this.x;if((this.right>A.right?A.right:this.right)<=_e)return!1;const Te=this.y<A.y?A.y:this.y;return(this.bottom>A.bottom?A.bottom:this.bottom)>Te}const I=this.left,B=this.right,T=this.top,R=this.bottom;if(B<=I||R<=T)return!1;const P=tempPoints[0].set(A.left,A.top),D=tempPoints[1].set(A.left,A.bottom),F=tempPoints[2].set(A.right,A.top),L=tempPoints[3].set(A.right,A.bottom);if(F.x<=P.x||D.y<=P.y)return!1;const U=Math.sign(_.a*_.d-_.b*_.c);if(U===0||(_.apply(P,P),_.apply(D,D),_.apply(F,F),_.apply(L,L),Math.max(P.x,D.x,F.x,L.x)<=I||Math.min(P.x,D.x,F.x,L.x)>=B||Math.max(P.y,D.y,F.y,L.y)<=T||Math.min(P.y,D.y,F.y,L.y)>=R))return!1;const V=U*(D.y-P.y),K=U*(P.x-D.x),J=V*I+K*T,ee=V*B+K*T,ie=V*I+K*R,ne=V*B+K*R;if(Math.max(J,ee,ie,ne)<=V*P.x+K*P.y||Math.min(J,ee,ie,ne)>=V*L.x+K*L.y)return!1;const ce=U*(P.y-F.y),fe=U*(F.x-P.x),de=ce*I+fe*T,pe=ce*B+fe*T,ve=ce*I+fe*R,ye=ce*B+fe*R;return!(Math.max(de,pe,ve,ye)<=ce*P.x+fe*P.y||Math.min(de,pe,ve,ye)>=ce*L.x+fe*L.y)}pad(A=0,_=A){return this.x-=A,this.y-=_,this.width+=A*2,this.height+=_*2,this}fit(A){const _=Math.max(this.x,A.x),I=Math.min(this.x+this.width,A.x+A.width),B=Math.max(this.y,A.y),T=Math.min(this.y+this.height,A.y+A.height);return this.x=_,this.width=Math.max(I-_,0),this.y=B,this.height=Math.max(T-B,0),this}ceil(A=1,_=.001){const I=Math.ceil((this.x+this.width-_)*A)/A,B=Math.ceil((this.y+this.height-_)*A)/A;return this.x=Math.floor((this.x+_)*A)/A,this.y=Math.floor((this.y+_)*A)/A,this.width=I-this.x,this.height=B-this.y,this}scale(A,_=A){return this.x*=A,this.y*=_,this.width*=A,this.height*=_,this}enlarge(A){const _=Math.min(this.x,A.x),I=Math.max(this.x+this.width,A.x+A.width),B=Math.min(this.y,A.y),T=Math.max(this.y+this.height,A.y+A.height);return this.x=_,this.width=I-_,this.y=B,this.height=T-B,this}getBounds(A){return A||(A=new Rectangle),A.copyFrom(this),A}containsRect(A){if(this.width<=0||this.height<=0)return!1;const _=A.x,I=A.y,B=A.x+A.width,T=A.y+A.height;return _>=this.x&&_<this.x+this.width&&I>=this.y&&I<this.y+this.height&&B>=this.x&&B<this.x+this.width&&T>=this.y&&T<this.y+this.height}set(A,_,I,B){return this.x=A,this.y=_,this.width=I,this.height=B,this}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const uidCache={default:-1};function uid$1(E="default"){return uidCache[E]===void 0&&(uidCache[E]=-1),++uidCache[E]}function resetUids(){for(const E in uidCache)delete uidCache[E]}const warnings={},v8_0_0="8.0.0",v8_3_4="8.3.4";function deprecation(E,A,_=3){if(warnings[A])return;let I=new Error().stack;typeof I>"u"?console.warn("PixiJS Deprecation Warning: ",`${A}
Deprecated since v${E}`):(I=I.split(`
`).splice(_).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${A}
Deprecated since v${E}`),console.warn(I),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${A}
Deprecated since v${E}`),console.warn(I))),warnings[A]=!0}const NOOP=()=>{};function nextPow2(E){return E+=E===0?1:0,--E,E|=E>>>1,E|=E>>>2,E|=E>>>4,E|=E>>>8,E|=E>>>16,E+1}function isPow2(E){return!(E&E-1)&&!!E}function log2(E){let A=(E>65535?1:0)<<4;E>>>=A;let _=(E>255?1:0)<<3;return E>>>=_,A|=_,_=(E>15?1:0)<<2,E>>>=_,A|=_,_=(E>3?1:0)<<1,E>>>=_,A|=_,A|E>>1}function definedProps(E){const A={};for(const _ in E)E[_]!==void 0&&(A[_]=E[_]);return A}const idHash$1=Object.create(null);function createResourceIdFromString(E){const A=idHash$1[E];return A===void 0&&(idHash$1[E]=uid$1("resource")),A}const _TextureStyle=class Zi extends EventEmitter{constructor(A={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,A={...Zi.defaultOptions,...A},this.addressMode=A.addressMode,this.addressModeU=A.addressModeU??this.addressModeU,this.addressModeV=A.addressModeV??this.addressModeV,this.addressModeW=A.addressModeW??this.addressModeW,this.scaleMode=A.scaleMode,this.magFilter=A.magFilter??this.magFilter,this.minFilter=A.minFilter??this.minFilter,this.mipmapFilter=A.mipmapFilter??this.mipmapFilter,this.lodMinClamp=A.lodMinClamp,this.lodMaxClamp=A.lodMaxClamp,this.compare=A.compare,this.maxAnisotropy=A.maxAnisotropy??1}set addressMode(A){this.addressModeU=A,this.addressModeV=A,this.addressModeW=A}get addressMode(){return this.addressModeU}set wrapMode(A){deprecation(v8_0_0,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=A}get wrapMode(){return this.addressMode}set scaleMode(A){this.magFilter=A,this.minFilter=A,this.mipmapFilter=A}get scaleMode(){return this.magFilter}set maxAnisotropy(A){this._maxAnisotropy=Math.min(A,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const A=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=createResourceIdFromString(A),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};_TextureStyle.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let TextureStyle=_TextureStyle;const _TextureSource=class Ji extends EventEmitter{constructor(A={}){super(),this.options=A,this.uid=uid$1("textureSource"),this._resourceType="textureSource",this._resourceId=uid$1("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,A={...Ji.defaultOptions,...A},this.label=A.label??"",this.resource=A.resource,this.autoGarbageCollect=A.autoGarbageCollect,this._resolution=A.resolution,A.width?this.pixelWidth=A.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,A.height?this.pixelHeight=A.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=A.format,this.dimension=A.dimensions,this.mipLevelCount=A.mipLevelCount,this.autoGenerateMipmaps=A.autoGenerateMipmaps,this.sampleCount=A.sampleCount,this.antialias=A.antialias,this.alphaMode=A.alphaMode,this.style=new TextureStyle(definedProps(A)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(A){this.style!==A&&(this._style?.off("change",this._onStyleChange,this),this._style=A,this._style?.on("change",this._onStyleChange,this),this._onStyleChange())}set maxAnisotropy(A){this._style.maxAnisotropy=A}get maxAnisotropy(){return this._style.maxAnisotropy}get addressMode(){return this._style.addressMode}set addressMode(A){this._style.addressMode=A}get repeatMode(){return this._style.addressMode}set repeatMode(A){this._style.addressMode=A}get magFilter(){return this._style.magFilter}set magFilter(A){this._style.magFilter=A}get minFilter(){return this._style.minFilter}set minFilter(A){this._style.minFilter=A}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(A){this._style.mipmapFilter=A}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(A){this._style.lodMinClamp=A}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(A){this._style.lodMaxClamp=A}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const A=this._resolution;if(this.resize(this.resourceWidth/A,this.resourceHeight/A))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=uid$1("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:A}=this;return A.naturalWidth||A.videoWidth||A.displayWidth||A.width}get resourceHeight(){const{resource:A}=this;return A.naturalHeight||A.videoHeight||A.displayHeight||A.height}get resolution(){return this._resolution}set resolution(A){this._resolution!==A&&(this._resolution=A,this.width=this.pixelWidth/A,this.height=this.pixelHeight/A)}resize(A,_,I){I||(I=this._resolution),A||(A=this.width),_||(_=this.height);const B=Math.round(A*I),T=Math.round(_*I);return this.width=B/I,this.height=T/I,this._resolution=I,this.pixelWidth===B&&this.pixelHeight===T?!1:(this._refreshPOT(),this.pixelWidth=B,this.pixelHeight=T,this.emit("resize",this),this._resourceId=uid$1("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(A){this._style.wrapMode=A}get wrapMode(){return this._style.wrapMode}set scaleMode(A){this._style.scaleMode=A}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=isPow2(this.pixelWidth)&&isPow2(this.pixelHeight)}static test(A){throw new Error("Unimplemented")}};_TextureSource.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let TextureSource=_TextureSource;class BufferImageSource extends TextureSource{constructor(A){const _=A.resource||new Float32Array(A.width*A.height*4);let I=A.format;I||(_ instanceof Float32Array?I="rgba32float":_ instanceof Int32Array||_ instanceof Uint32Array?I="rgba32uint":_ instanceof Int16Array||_ instanceof Uint16Array?I="rgba16uint":(_ instanceof Int8Array,I="bgra8unorm")),super({...A,resource:_,format:I}),this.uploadMethodId="buffer"}static test(A){return A instanceof Int8Array||A instanceof Uint8Array||A instanceof Uint8ClampedArray||A instanceof Int16Array||A instanceof Uint16Array||A instanceof Int32Array||A instanceof Uint32Array||A instanceof Float32Array}}BufferImageSource.extension=ExtensionType.TextureSource;const tempMat=new Matrix;class TextureMatrix{constructor(A,_){this.mapCoord=new Matrix,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof _>"u"?this.clampMargin=A.width<10?0:.5:this.clampMargin=_,this.isSimple=!1,this.texture=A}get texture(){return this._texture}set texture(A){this.texture!==A&&(this._texture?.removeListener("update",this.update,this),this._texture=A,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(A,_){_===void 0&&(_=A);const I=this.mapCoord;for(let B=0;B<A.length;B+=2){const T=A[B],R=A[B+1];_[B]=T*I.a+R*I.c+I.tx,_[B+1]=T*I.b+R*I.d+I.ty}return _}update(){const A=this._texture;this._updateID++;const _=A.uvs;this.mapCoord.set(_.x1-_.x0,_.y1-_.y0,_.x3-_.x0,_.y3-_.y0,_.x0,_.y0);const I=A.orig,B=A.trim;B&&(tempMat.set(I.width/B.width,0,0,I.height/B.height,-B.x/B.width,-B.y/B.height),this.mapCoord.append(tempMat));const T=A.source,R=this.uClampFrame,P=this.clampMargin/T._resolution,D=this.clampOffset/T._resolution;return R[0]=(A.frame.x+P+D)/T.width,R[1]=(A.frame.y+P+D)/T.height,R[2]=(A.frame.x+A.frame.width-P+D)/T.width,R[3]=(A.frame.y+A.frame.height-P+D)/T.height,this.uClampOffset[0]=this.clampOffset/T.pixelWidth,this.uClampOffset[1]=this.clampOffset/T.pixelHeight,this.isSimple=A.frame.width===T.width&&A.frame.height===T.height&&A.rotate===0,!0}}class Texture extends EventEmitter{constructor({source:A,label:_,frame:I,orig:B,trim:T,defaultAnchor:R,defaultBorders:P,rotate:D,dynamic:F}={}){if(super(),this.uid=uid$1("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new Rectangle,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=_,this.source=A?.source??new TextureSource,this.noFrame=!I,I)this.frame.copyFrom(I);else{const{width:L,height:U}=this._source;this.frame.width=L,this.frame.height=U}this.orig=B||this.frame,this.trim=T,this.rotate=D??0,this.defaultAnchor=R,this.defaultBorders=P,this.destroyed=!1,this.dynamic=F||!1,this.updateUvs()}set source(A){this._source&&this._source.off("resize",this.update,this),this._source=A,A.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new TextureMatrix(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:A,frame:_}=this,{width:I,height:B}=this._source,T=_.x/I,R=_.y/B,P=_.width/I,D=_.height/B;let F=this.rotate;if(F){const L=P/2,U=D/2,V=T+L,K=R+U;F=groupD8.add(F,groupD8.NW),A.x0=V+L*groupD8.uX(F),A.y0=K+U*groupD8.uY(F),F=groupD8.add(F,2),A.x1=V+L*groupD8.uX(F),A.y1=K+U*groupD8.uY(F),F=groupD8.add(F,2),A.x2=V+L*groupD8.uX(F),A.y2=K+U*groupD8.uY(F),F=groupD8.add(F,2),A.x3=V+L*groupD8.uX(F),A.y3=K+U*groupD8.uY(F)}else A.x0=T,A.y0=R,A.x1=T+P,A.y1=R,A.x2=T+P,A.y2=R+D,A.x3=T,A.y3=R+D}destroy(A=!1){this._source&&A&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return deprecation(v8_0_0,"Texture.baseTexture is now Texture.source"),this._source}}Texture.EMPTY=new Texture({label:"EMPTY",source:new TextureSource({label:"EMPTY"})});Texture.EMPTY.destroy=NOOP;Texture.WHITE=new Texture({source:new BufferImageSource({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});Texture.WHITE.destroy=NOOP;function updateQuadBounds(E,A,_){const{width:I,height:B}=_.orig,T=_.trim;if(T){const R=T.width,P=T.height;E.minX=T.x-A._x*I,E.maxX=E.minX+R,E.minY=T.y-A._y*B,E.maxY=E.minY+P}else E.minX=-A._x*I,E.maxX=E.minX+I,E.minY=-A._y*B,E.maxY=E.minY+B}const defaultMatrix=new Matrix;class Bounds{constructor(A=1/0,_=1/0,I=-1/0,B=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=defaultMatrix,this.minX=A,this.minY=_,this.maxX=I,this.maxY=B}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new Rectangle);const A=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(A.x=0,A.y=0,A.width=0,A.height=0):A.copyFromBounds(this),A}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=defaultMatrix,this}set(A,_,I,B){this.minX=A,this.minY=_,this.maxX=I,this.maxY=B}addFrame(A,_,I,B,T){T||(T=this.matrix);const R=T.a,P=T.b,D=T.c,F=T.d,L=T.tx,U=T.ty;let V=this.minX,K=this.minY,J=this.maxX,ee=this.maxY,ie=R*A+D*_+L,ne=P*A+F*_+U;ie<V&&(V=ie),ne<K&&(K=ne),ie>J&&(J=ie),ne>ee&&(ee=ne),ie=R*I+D*_+L,ne=P*I+F*_+U,ie<V&&(V=ie),ne<K&&(K=ne),ie>J&&(J=ie),ne>ee&&(ee=ne),ie=R*A+D*B+L,ne=P*A+F*B+U,ie<V&&(V=ie),ne<K&&(K=ne),ie>J&&(J=ie),ne>ee&&(ee=ne),ie=R*I+D*B+L,ne=P*I+F*B+U,ie<V&&(V=ie),ne<K&&(K=ne),ie>J&&(J=ie),ne>ee&&(ee=ne),this.minX=V,this.minY=K,this.maxX=J,this.maxY=ee}addRect(A,_){this.addFrame(A.x,A.y,A.x+A.width,A.y+A.height,_)}addBounds(A,_){this.addFrame(A.minX,A.minY,A.maxX,A.maxY,_)}addBoundsMask(A){this.minX=this.minX>A.minX?this.minX:A.minX,this.minY=this.minY>A.minY?this.minY:A.minY,this.maxX=this.maxX<A.maxX?this.maxX:A.maxX,this.maxY=this.maxY<A.maxY?this.maxY:A.maxY}applyMatrix(A){const _=this.minX,I=this.minY,B=this.maxX,T=this.maxY,{a:R,b:P,c:D,d:F,tx:L,ty:U}=A;let V=R*_+D*I+L,K=P*_+F*I+U;this.minX=V,this.minY=K,this.maxX=V,this.maxY=K,V=R*B+D*I+L,K=P*B+F*I+U,this.minX=V<this.minX?V:this.minX,this.minY=K<this.minY?K:this.minY,this.maxX=V>this.maxX?V:this.maxX,this.maxY=K>this.maxY?K:this.maxY,V=R*_+D*T+L,K=P*_+F*T+U,this.minX=V<this.minX?V:this.minX,this.minY=K<this.minY?K:this.minY,this.maxX=V>this.maxX?V:this.maxX,this.maxY=K>this.maxY?K:this.maxY,V=R*B+D*T+L,K=P*B+F*T+U,this.minX=V<this.minX?V:this.minX,this.minY=K<this.minY?K:this.minY,this.maxX=V>this.maxX?V:this.maxX,this.maxY=K>this.maxY?K:this.maxY}fit(A){return this.minX<A.left&&(this.minX=A.left),this.maxX>A.right&&(this.maxX=A.right),this.minY<A.top&&(this.minY=A.top),this.maxY>A.bottom&&(this.maxY=A.bottom),this}fitBounds(A,_,I,B){return this.minX<A&&(this.minX=A),this.maxX>_&&(this.maxX=_),this.minY<I&&(this.minY=I),this.maxY>B&&(this.maxY=B),this}pad(A,_=A){return this.minX-=A,this.maxX+=A,this.minY-=_,this.maxY+=_,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new Bounds(this.minX,this.minY,this.maxX,this.maxY)}scale(A,_=A){return this.minX*=A,this.minY*=_,this.maxX*=A,this.maxY*=_,this}get x(){return this.minX}set x(A){const _=this.maxX-this.minX;this.minX=A,this.maxX=A+_}get y(){return this.minY}set y(A){const _=this.maxY-this.minY;this.minY=A,this.maxY=A+_}get width(){return this.maxX-this.minX}set width(A){this.maxX=this.minX+A}get height(){return this.maxY-this.minY}set height(A){this.maxY=this.minY+A}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(A,_,I,B){let T=this.minX,R=this.minY,P=this.maxX,D=this.maxY;B||(B=this.matrix);const F=B.a,L=B.b,U=B.c,V=B.d,K=B.tx,J=B.ty;for(let ee=_;ee<I;ee+=2){const ie=A[ee],ne=A[ee+1],ce=F*ie+U*ne+K,fe=L*ie+V*ne+J;T=ce<T?ce:T,R=fe<R?fe:R,P=ce>P?ce:P,D=fe>D?fe:D}this.minX=T,this.minY=R,this.maxX=P,this.maxY=D}containsPoint(A,_){return this.minX<=A&&this.minY<=_&&this.maxX>=A&&this.maxY>=_}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(A){return this.minX=A.minX,this.minY=A.minY,this.maxX=A.maxX,this.maxY=A.maxY,this}}var r$2={grad:.9,turn:360,rad:360/(2*Math.PI)},t$2=function(E){return typeof E=="string"?E.length>0:typeof E=="number"},n$2=function(E,A,_){return A===void 0&&(A=0),_===void 0&&(_=Math.pow(10,A)),Math.round(_*E)/_+0},e$3=function(E,A,_){return A===void 0&&(A=0),_===void 0&&(_=1),E>_?_:E>A?E:A},u$2=function(E){return(E=isFinite(E)?E%360:0)>0?E:E+360},a$2=function(E){return{r:e$3(E.r,0,255),g:e$3(E.g,0,255),b:e$3(E.b,0,255),a:e$3(E.a)}},o$2=function(E){return{r:n$2(E.r),g:n$2(E.g),b:n$2(E.b),a:n$2(E.a,3)}},i$3=/^#([0-9a-f]{3,8})$/i,s$2=function(E){var A=E.toString(16);return A.length<2?"0"+A:A},h$2=function(E){var A=E.r,_=E.g,I=E.b,B=E.a,T=Math.max(A,_,I),R=T-Math.min(A,_,I),P=R?T===A?(_-I)/R:T===_?2+(I-A)/R:4+(A-_)/R:0;return{h:60*(P<0?P+6:P),s:T?R/T*100:0,v:T/255*100,a:B}},b$1=function(E){var A=E.h,_=E.s,I=E.v,B=E.a;A=A/360*6,_/=100,I/=100;var T=Math.floor(A),R=I*(1-_),P=I*(1-(A-T)*_),D=I*(1-(1-A+T)*_),F=T%6;return{r:255*[I,P,R,R,D,I][F],g:255*[D,I,I,P,R,R][F],b:255*[R,R,D,I,I,P][F],a:B}},g$1=function(E){return{h:u$2(E.h),s:e$3(E.s,0,100),l:e$3(E.l,0,100),a:e$3(E.a)}},d$2=function(E){return{h:n$2(E.h),s:n$2(E.s),l:n$2(E.l),a:n$2(E.a,3)}},f$1=function(E){return b$1((_=(A=E).s,{h:A.h,s:(_*=((I=A.l)<50?I:100-I)/100)>0?2*_/(I+_)*100:0,v:I+_,a:A.a}));var A,_,I},c$2=function(E){return{h:(A=h$2(E)).h,s:(B=(200-(_=A.s))*(I=A.v)/100)>0&&B<200?_*I/100/(B<=100?B:200-B)*100:0,l:B/2,a:A.a};var A,_,I,B},l$2=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,p$1=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,v$1=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,m$1=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,y$1={string:[[function(E){var A=i$3.exec(E);return A?(E=A[1]).length<=4?{r:parseInt(E[0]+E[0],16),g:parseInt(E[1]+E[1],16),b:parseInt(E[2]+E[2],16),a:E.length===4?n$2(parseInt(E[3]+E[3],16)/255,2):1}:E.length===6||E.length===8?{r:parseInt(E.substr(0,2),16),g:parseInt(E.substr(2,2),16),b:parseInt(E.substr(4,2),16),a:E.length===8?n$2(parseInt(E.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(E){var A=v$1.exec(E)||m$1.exec(E);return A?A[2]!==A[4]||A[4]!==A[6]?null:a$2({r:Number(A[1])/(A[2]?100/255:1),g:Number(A[3])/(A[4]?100/255:1),b:Number(A[5])/(A[6]?100/255:1),a:A[7]===void 0?1:Number(A[7])/(A[8]?100:1)}):null},"rgb"],[function(E){var A=l$2.exec(E)||p$1.exec(E);if(!A)return null;var _,I,B=g$1({h:(_=A[1],I=A[2],I===void 0&&(I="deg"),Number(_)*(r$2[I]||1)),s:Number(A[3]),l:Number(A[4]),a:A[5]===void 0?1:Number(A[5])/(A[6]?100:1)});return f$1(B)},"hsl"]],object:[[function(E){var A=E.r,_=E.g,I=E.b,B=E.a,T=B===void 0?1:B;return t$2(A)&&t$2(_)&&t$2(I)?a$2({r:Number(A),g:Number(_),b:Number(I),a:Number(T)}):null},"rgb"],[function(E){var A=E.h,_=E.s,I=E.l,B=E.a,T=B===void 0?1:B;if(!t$2(A)||!t$2(_)||!t$2(I))return null;var R=g$1({h:Number(A),s:Number(_),l:Number(I),a:Number(T)});return f$1(R)},"hsl"],[function(E){var A=E.h,_=E.s,I=E.v,B=E.a,T=B===void 0?1:B;if(!t$2(A)||!t$2(_)||!t$2(I))return null;var R=(function(P){return{h:u$2(P.h),s:e$3(P.s,0,100),v:e$3(P.v,0,100),a:e$3(P.a)}})({h:Number(A),s:Number(_),v:Number(I),a:Number(T)});return b$1(R)},"hsv"]]},N=function(E,A){for(var _=0;_<A.length;_++){var I=A[_][0](E);if(I)return[I,A[_][1]]}return[null,void 0]},x$1=function(E){return typeof E=="string"?N(E.trim(),y$1.string):typeof E=="object"&&E!==null?N(E,y$1.object):[null,void 0]},M$1=function(E,A){var _=c$2(E);return{h:_.h,s:e$3(_.s+100*A,0,100),l:_.l,a:_.a}},H=function(E){return(299*E.r+587*E.g+114*E.b)/1e3/255},$=function(E,A){var _=c$2(E);return{h:_.h,s:_.s,l:e$3(_.l+100*A,0,100),a:_.a}},j=(function(){function E(A){this.parsed=x$1(A)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return E.prototype.isValid=function(){return this.parsed!==null},E.prototype.brightness=function(){return n$2(H(this.rgba),2)},E.prototype.isDark=function(){return H(this.rgba)<.5},E.prototype.isLight=function(){return H(this.rgba)>=.5},E.prototype.toHex=function(){return A=o$2(this.rgba),_=A.r,I=A.g,B=A.b,R=(T=A.a)<1?s$2(n$2(255*T)):"","#"+s$2(_)+s$2(I)+s$2(B)+R;var A,_,I,B,T,R},E.prototype.toRgb=function(){return o$2(this.rgba)},E.prototype.toRgbString=function(){return A=o$2(this.rgba),_=A.r,I=A.g,B=A.b,(T=A.a)<1?"rgba("+_+", "+I+", "+B+", "+T+")":"rgb("+_+", "+I+", "+B+")";var A,_,I,B,T},E.prototype.toHsl=function(){return d$2(c$2(this.rgba))},E.prototype.toHslString=function(){return A=d$2(c$2(this.rgba)),_=A.h,I=A.s,B=A.l,(T=A.a)<1?"hsla("+_+", "+I+"%, "+B+"%, "+T+")":"hsl("+_+", "+I+"%, "+B+"%)";var A,_,I,B,T},E.prototype.toHsv=function(){return A=h$2(this.rgba),{h:n$2(A.h),s:n$2(A.s),v:n$2(A.v),a:n$2(A.a,3)};var A},E.prototype.invert=function(){return w$1({r:255-(A=this.rgba).r,g:255-A.g,b:255-A.b,a:A.a});var A},E.prototype.saturate=function(A){return A===void 0&&(A=.1),w$1(M$1(this.rgba,A))},E.prototype.desaturate=function(A){return A===void 0&&(A=.1),w$1(M$1(this.rgba,-A))},E.prototype.grayscale=function(){return w$1(M$1(this.rgba,-1))},E.prototype.lighten=function(A){return A===void 0&&(A=.1),w$1($(this.rgba,A))},E.prototype.darken=function(A){return A===void 0&&(A=.1),w$1($(this.rgba,-A))},E.prototype.rotate=function(A){return A===void 0&&(A=15),this.hue(this.hue()+A)},E.prototype.alpha=function(A){return typeof A=="number"?w$1({r:(_=this.rgba).r,g:_.g,b:_.b,a:A}):n$2(this.rgba.a,3);var _},E.prototype.hue=function(A){var _=c$2(this.rgba);return typeof A=="number"?w$1({h:A,s:_.s,l:_.l,a:_.a}):n$2(_.h)},E.prototype.isEqual=function(A){return this.toHex()===w$1(A).toHex()},E})(),w$1=function(E){return E instanceof j?E:new j(E)},S$1=[],k$1=function(E){E.forEach(function(A){S$1.indexOf(A)<0&&(A(j,y$1),S$1.push(A))})};function namesPlugin(E,A){var _={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},I={};for(var B in _)I[_[B]]=B;var T={};E.prototype.toName=function(R){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var P,D,F=I[this.toHex()];if(F)return F;if(R?.closest){var L=this.toRgb(),U=1/0,V="black";if(!T.length)for(var K in _)T[K]=new E(_[K]).toRgb();for(var J in _){var ee=(P=L,D=T[J],Math.pow(P.r-D.r,2)+Math.pow(P.g-D.g,2)+Math.pow(P.b-D.b,2));ee<U&&(U=ee,V=J)}return V}},A.string.push([function(R){var P=R.toLowerCase(),D=P==="transparent"?"#0000":_[P];return D?new E(D).toRgb():null},"name"])}k$1([namesPlugin]);const _Color=class wi{constructor(A=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=A}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(A){return this.value=A,this}set value(A){if(A instanceof wi)this._value=this._cloneSource(A._value),this._int=A._int,this._components.set(A._components);else{if(A===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,A))&&(this._value=this._cloneSource(A),this._normalize(this._value))}}get value(){return this._value}_cloneSource(A){return typeof A=="string"||typeof A=="number"||A instanceof Number||A===null?A:Array.isArray(A)||ArrayBuffer.isView(A)?A.slice(0):typeof A=="object"&&A!==null?{...A}:A}_isSourceEqual(A,_){const I=typeof A;if(I!==typeof _)return!1;if(I==="number"||I==="string"||A instanceof Number)return A===_;if(Array.isArray(A)&&Array.isArray(_)||ArrayBuffer.isView(A)&&ArrayBuffer.isView(_))return A.length!==_.length?!1:A.every((T,R)=>T===_[R]);if(A!==null&&_!==null){const T=Object.keys(A),R=Object.keys(_);return T.length!==R.length?!1:T.every(P=>A[P]===_[P])}return A===_}toRgba(){const[A,_,I,B]=this._components;return{r:A,g:_,b:I,a:B}}toRgb(){const[A,_,I]=this._components;return{r:A,g:_,b:I}}toRgbaString(){const[A,_,I]=this.toUint8RgbArray();return`rgba(${A},${_},${I},${this.alpha})`}toUint8RgbArray(A){const[_,I,B]=this._components;return this._arrayRgb||(this._arrayRgb=[]),A||(A=this._arrayRgb),A[0]=Math.round(_*255),A[1]=Math.round(I*255),A[2]=Math.round(B*255),A}toArray(A){this._arrayRgba||(this._arrayRgba=[]),A||(A=this._arrayRgba);const[_,I,B,T]=this._components;return A[0]=_,A[1]=I,A[2]=B,A[3]=T,A}toRgbArray(A){this._arrayRgb||(this._arrayRgb=[]),A||(A=this._arrayRgb);const[_,I,B]=this._components;return A[0]=_,A[1]=I,A[2]=B,A}toNumber(){return this._int}toBgrNumber(){const[A,_,I]=this.toUint8RgbArray();return(I<<16)+(_<<8)+A}toLittleEndianNumber(){const A=this._int;return(A>>16)+(A&65280)+((A&255)<<16)}multiply(A){const[_,I,B,T]=wi._temp.setValue(A)._components;return this._components[0]*=_,this._components[1]*=I,this._components[2]*=B,this._components[3]*=T,this._refreshInt(),this._value=null,this}premultiply(A,_=!0){return _&&(this._components[0]*=A,this._components[1]*=A,this._components[2]*=A),this._components[3]=A,this._refreshInt(),this._value=null,this}toPremultiplied(A,_=!0){if(A===1)return(255<<24)+this._int;if(A===0)return _?0:this._int;let I=this._int>>16&255,B=this._int>>8&255,T=this._int&255;return _&&(I=I*A+.5|0,B=B*A+.5|0,T=T*A+.5|0),(A*255<<24)+(I<<16)+(B<<8)+T}toHex(){const A=this._int.toString(16);return`#${"000000".substring(0,6-A.length)+A}`}toHexa(){const _=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-_.length)+_}setAlpha(A){return this._components[3]=this._clamp(A),this}_normalize(A){let _,I,B,T;if((typeof A=="number"||A instanceof Number)&&A>=0&&A<=16777215){const R=A;_=(R>>16&255)/255,I=(R>>8&255)/255,B=(R&255)/255,T=1}else if((Array.isArray(A)||A instanceof Float32Array)&&A.length>=3&&A.length<=4)A=this._clamp(A),[_,I,B,T=1]=A;else if((A instanceof Uint8Array||A instanceof Uint8ClampedArray)&&A.length>=3&&A.length<=4)A=this._clamp(A,0,255),[_,I,B,T=255]=A,_/=255,I/=255,B/=255,T/=255;else if(typeof A=="string"||typeof A=="object"){if(typeof A=="string"){const P=wi.HEX_PATTERN.exec(A);P&&(A=`#${P[2]}`)}const R=w$1(A);R.isValid()&&({r:_,g:I,b:B,a:T}=R.rgba,_/=255,I/=255,B/=255)}if(_!==void 0)this._components[0]=_,this._components[1]=I,this._components[2]=B,this._components[3]=T,this._refreshInt();else throw new Error(`Unable to convert color ${A}`)}_refreshInt(){this._clamp(this._components);const[A,_,I]=this._components;this._int=(A*255<<16)+(_*255<<8)+(I*255|0)}_clamp(A,_=0,I=1){return typeof A=="number"?Math.min(Math.max(A,_),I):(A.forEach((B,T)=>{A[T]=Math.min(Math.max(B,_),I)}),A)}static isColorLike(A){return typeof A=="number"||typeof A=="string"||A instanceof Number||A instanceof wi||Array.isArray(A)||A instanceof Uint8Array||A instanceof Uint8ClampedArray||A instanceof Float32Array||A.r!==void 0&&A.g!==void 0&&A.b!==void 0||A.r!==void 0&&A.g!==void 0&&A.b!==void 0&&A.a!==void 0||A.h!==void 0&&A.s!==void 0&&A.l!==void 0||A.h!==void 0&&A.s!==void 0&&A.l!==void 0&&A.a!==void 0||A.h!==void 0&&A.s!==void 0&&A.v!==void 0||A.h!==void 0&&A.s!==void 0&&A.v!==void 0&&A.a!==void 0}};_Color.shared=new _Color;_Color._temp=new _Color;_Color.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Color$1=_Color;const cullingMixin={cullArea:null,cullable:!1,cullableChildren:!0};let warnCount=0;const maxWarnings=500;function warn$1(...E){warnCount!==maxWarnings&&(warnCount++,warnCount===maxWarnings?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...E))}class Pool{constructor(A,_){this._pool=[],this._count=0,this._index=0,this._classType=A,_&&this.prepopulate(_)}prepopulate(A){for(let _=0;_<A;_++)this._pool[this._index++]=new this._classType;this._count+=A}get(A){let _;return this._index>0?_=this._pool[--this._index]:_=new this._classType,_.init?.(A),_}return(A){A.reset?.(),this._pool[this._index++]=A}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){this._pool.length=0,this._index=0}}class PoolGroupClass{constructor(){this._poolsByClass=new Map}prepopulate(A,_){this.getPool(A).prepopulate(_)}get(A,_){return this.getPool(A).get(_)}return(A){this.getPool(A.constructor).return(A)}getPool(A){return this._poolsByClass.has(A)||this._poolsByClass.set(A,new Pool(A)),this._poolsByClass.get(A)}stats(){const A={};return this._poolsByClass.forEach(_=>{const I=A[_._classType.name]?_._classType.name+_._classType.ID:_._classType.name;A[I]={free:_.totalFree,used:_.totalUsed,size:_.totalSize}}),A}}const BigPool=new PoolGroupClass,cacheAsTextureMixin={get isCachedAsTexture(){return!!this.renderGroup?.isCachedAsTexture},cacheAsTexture(E){typeof E=="boolean"&&E===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(E===!0?{}:E))},updateCacheTexture(){this.renderGroup?.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(E){deprecation("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(E)}};function removeItems(E,A,_){const I=E.length;let B;if(A>=I||_===0)return;_=A+_>I?I-A:_;const T=I-_;for(B=A;B<T;++B)E[B]=E[B+_];E.length=T}const childrenHelperMixin={allowChildren:!0,removeChildren(E=0,A){const _=A??this.children.length,I=_-E,B=[];if(I>0&&I<=_){for(let R=_-1;R>=E;R--){const P=this.children[R];P&&(B.push(P),P.parent=null)}removeItems(this.children,E,_);const T=this.renderGroup||this.parentRenderGroup;T&&T.removeChildren(B);for(let R=0;R<B.length;++R){const P=B[R];P.parentRenderLayer?.detach(P),this.emit("childRemoved",P,this,R),B[R].emit("removed",this)}return B.length>0&&this._didViewChangeTick++,B}else if(I===0&&this.children.length===0)return B;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(E){const A=this.getChildAt(E);return this.removeChild(A)},getChildAt(E){if(E<0||E>=this.children.length)throw new Error(`getChildAt: Index (${E}) does not exist.`);return this.children[E]},setChildIndex(E,A){if(A<0||A>=this.children.length)throw new Error(`The index ${A} supplied is out of bounds ${this.children.length}`);this.getChildIndex(E),this.addChildAt(E,A)},getChildIndex(E){const A=this.children.indexOf(E);if(A===-1)throw new Error("The supplied Container must be a child of the caller");return A},addChildAt(E,A){this.allowChildren||deprecation(v8_0_0,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:_}=this;if(A<0||A>_.length)throw new Error(`${E}addChildAt: The index ${A} supplied is out of bounds ${_.length}`);if(E.parent){const B=E.parent.children.indexOf(E);if(E.parent===this&&B===A)return E;B!==-1&&E.parent.children.splice(B,1)}A===_.length?_.push(E):_.splice(A,0,E),E.parent=this,E.didChange=!0,E._updateFlags=15;const I=this.renderGroup||this.parentRenderGroup;return I&&I.addChild(E),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",E,this,A),E.emit("added",this),E},swapChildren(E,A){if(E===A)return;const _=this.getChildIndex(E),I=this.getChildIndex(A);this.children[_]=A,this.children[I]=E;const B=this.renderGroup||this.parentRenderGroup;B&&(B.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){this.parent?.removeChild(this)},reparentChild(...E){return E.length===1?this.reparentChildAt(E[0],this.children.length):(E.forEach(A=>this.reparentChildAt(A,this.children.length)),E[0])},reparentChildAt(E,A){if(E.parent===this)return this.setChildIndex(E,A),E;const _=E.worldTransform.clone();E.removeFromParent(),this.addChildAt(E,A);const I=this.worldTransform.clone();return I.invert(),_.prepend(I),E.setFromMatrix(_),E},replaceChild(E,A){E.updateLocalTransform(),this.addChildAt(A,this.getChildIndex(E)),A.setFromMatrix(E.localTransform),A.updateLocalTransform(),this.removeChild(E)}},collectRenderablesMixin={collectRenderables(E,A,_){this.parentRenderLayer&&this.parentRenderLayer!==_||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(E,A,_):this.renderGroup?A.renderPipes.renderGroup.addRenderGroup(this.renderGroup,E):this.collectRenderablesWithEffects(E,A,_))},collectRenderablesSimple(E,A,_){const I=this.children,B=I.length;for(let T=0;T<B;T++)I[T].collectRenderables(E,A,_)},collectRenderablesWithEffects(E,A,_){const{renderPipes:I}=A;for(let B=0;B<this.effects.length;B++){const T=this.effects[B];I[T.pipe].push(T,this,E)}this.collectRenderablesSimple(E,A,_);for(let B=this.effects.length-1;B>=0;B--){const T=this.effects[B];I[T.pipe].pop(T,this,E)}}};class FilterEffect{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let A=0;A<this.filters.length;A++)this.filters[A].destroy();this.filters=null,this.filterArea=null}}class MaskEffectManagerClass{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(A=>{this.add({test:A.test,maskClass:A})}))}add(A){this._tests.push(A)}getMaskEffect(A){this._initialized||this.init();for(let _=0;_<this._tests.length;_++){const I=this._tests[_];if(I.test(A))return BigPool.get(I.maskClass,A)}return A}returnMaskEffect(A){BigPool.return(A)}}const MaskEffectManager=new MaskEffectManagerClass;extensions.handleByList(ExtensionType.MaskEffect,MaskEffectManager._effectClasses);const effectsMixin={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const E=this.renderGroup||this.parentRenderGroup;E&&(E.structureDidChange=!0)},addEffect(E){this.effects.indexOf(E)===-1&&(this.effects.push(E),this.effects.sort((_,I)=>_.priority-I.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(E){const A=this.effects.indexOf(E);A!==-1&&(this.effects.splice(A,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(E){const A=this._maskEffect;A?.mask!==E&&(A&&(this.removeEffect(A),MaskEffectManager.returnMaskEffect(A),this._maskEffect=null),E!=null&&(this._maskEffect=MaskEffectManager.getMaskEffect(E),this.addEffect(this._maskEffect)))},get mask(){return this._maskEffect?.mask},setMask(E){this._maskOptions={...this._maskOptions,...E},E.mask&&(this.mask=E.mask),this._markStructureAsChanged()},set filters(E){!Array.isArray(E)&&E&&(E=[E]);const A=this._filterEffect||(this._filterEffect=new FilterEffect);E=E;const _=E?.length>0,I=A.filters?.length>0,B=_!==I;E=Array.isArray(E)?E.slice(0):E,A.filters=Object.freeze(E),B&&(_?this.addEffect(A):(this.removeEffect(A),A.filters=E??null))},get filters(){return this._filterEffect?.filters},set filterArea(E){this._filterEffect||(this._filterEffect=new FilterEffect),this._filterEffect.filterArea=E},get filterArea(){return this._filterEffect?.filterArea}},findMixin={label:null,get name(){return deprecation(v8_0_0,"Container.name property has been removed, use Container.label instead"),this.label},set name(E){deprecation(v8_0_0,"Container.name property has been removed, use Container.label instead"),this.label=E},getChildByName(E,A=!1){return this.getChildByLabel(E,A)},getChildByLabel(E,A=!1){const _=this.children;for(let I=0;I<_.length;I++){const B=_[I];if(B.label===E||E instanceof RegExp&&E.test(B.label))return B}if(A)for(let I=0;I<_.length;I++){const T=_[I].getChildByLabel(E,!0);if(T)return T}return null},getChildrenByLabel(E,A=!1,_=[]){const I=this.children;for(let B=0;B<I.length;B++){const T=I[B];(T.label===E||E instanceof RegExp&&E.test(T.label))&&_.push(T)}if(A)for(let B=0;B<I.length;B++)I[B].getChildrenByLabel(E,!0,_);return _}},matrixPool=new Pool(Matrix),boundsPool=new Pool(Bounds),tempMatrix$5=new Matrix,getFastGlobalBoundsMixin={getFastGlobalBounds(E,A){A||(A=new Bounds),A.clear(),this._getGlobalBoundsRecursive(!!E,A,this.parentRenderLayer),A.isValid||A.set(0,0,0,0);const _=this.renderGroup||this.parentRenderGroup;return A.applyMatrix(_.worldTransform),A},_getGlobalBoundsRecursive(E,A,_){let I=A;if(E&&this.parentRenderLayer&&this.parentRenderLayer!==_||this.localDisplayStatus!==7||!this.measurable)return;const B=!!this.effects.length;if((this.renderGroup||B)&&(I=boundsPool.get().clear()),this.boundsArea)A.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const R=this.bounds;I.addFrame(R.minX,R.minY,R.maxX,R.maxY,this.groupTransform)}const T=this.children;for(let R=0;R<T.length;R++)T[R]._getGlobalBoundsRecursive(E,I,_)}if(B){let T=!1;const R=this.renderGroup||this.parentRenderGroup;for(let P=0;P<this.effects.length;P++)this.effects[P].addBounds&&(T||(T=!0,I.applyMatrix(R.worldTransform)),this.effects[P].addBounds(I,!0));T&&I.applyMatrix(R.worldTransform.copyTo(tempMatrix$5).invert()),A.addBounds(I),boundsPool.return(I)}else this.renderGroup&&(A.addBounds(I,this.relativeGroupTransform),boundsPool.return(I))}};function getGlobalBounds(E,A,_){_.clear();let I,B;return E.parent?A?I=E.parent.worldTransform:(B=matrixPool.get().identity(),I=updateTransformBackwards(E,B)):I=Matrix.IDENTITY,_getGlobalBounds(E,_,I,A),B&&matrixPool.return(B),_.isValid||_.set(0,0,0,0),_}function _getGlobalBounds(E,A,_,I){if(!E.visible||!E.measurable)return;let B;I?B=E.worldTransform:(E.updateLocalTransform(),B=matrixPool.get(),B.appendFrom(E.localTransform,_));const T=A,R=!!E.effects.length;if(R&&(A=boundsPool.get().clear()),E.boundsArea)A.addRect(E.boundsArea,B);else{E.bounds&&(A.matrix=B,A.addBounds(E.bounds));for(let P=0;P<E.children.length;P++)_getGlobalBounds(E.children[P],A,B,I)}if(R){for(let P=0;P<E.effects.length;P++)E.effects[P].addBounds?.(A);T.addBounds(A,Matrix.IDENTITY),boundsPool.return(A)}I||matrixPool.return(B)}function updateTransformBackwards(E,A){const _=E.parent;return _&&(updateTransformBackwards(_,A),_.updateLocalTransform(),A.append(_.localTransform)),A}function multiplyHexColors(E,A){if(E===16777215||!A)return A;if(A===16777215||!E)return E;const _=E>>16&255,I=E>>8&255,B=E&255,T=A>>16&255,R=A>>8&255,P=A&255,D=_*T/255|0,F=I*R/255|0,L=B*P/255|0;return(D<<16)+(F<<8)+L}const WHITE_BGR=16777215;function multiplyColors(E,A){return E===WHITE_BGR?A:A===WHITE_BGR?E:multiplyHexColors(E,A)}function bgr2rgb(E){return((E&255)<<16)+(E&65280)+(E>>16&255)}const getGlobalMixin={getGlobalAlpha(E){if(E)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let A=this.alpha,_=this.parent;for(;_;)A*=_.alpha,_=_.parent;return A},getGlobalTransform(E=new Matrix,A){if(A)return E.copyFrom(this.worldTransform);this.updateLocalTransform();const _=updateTransformBackwards(this,matrixPool.get().identity());return E.appendFrom(this.localTransform,_),matrixPool.return(_),E},getGlobalTint(E){if(E)return this.renderGroup?bgr2rgb(this.renderGroup.worldColor):this.parentRenderGroup?bgr2rgb(multiplyColors(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let A=this.localColor,_=this.parent;for(;_;)A=multiplyColors(A,_.localColor),_=_.parent;return bgr2rgb(A)}};function getLocalBounds(E,A,_){return A.clear(),_||(_=Matrix.IDENTITY),_getLocalBounds(E,A,_,E,!0),A.isValid||A.set(0,0,0,0),A}function _getLocalBounds(E,A,_,I,B){let T;if(B)T=matrixPool.get(),T=_.copyTo(T);else{if(!E.visible||!E.measurable)return;E.updateLocalTransform();const D=E.localTransform;T=matrixPool.get(),T.appendFrom(D,_)}const R=A,P=!!E.effects.length;if(P&&(A=boundsPool.get().clear()),E.boundsArea)A.addRect(E.boundsArea,T);else{E.renderPipeId&&(A.matrix=T,A.addBounds(E.bounds));const D=E.children;for(let F=0;F<D.length;F++)_getLocalBounds(D[F],A,T,I,!1)}if(P){for(let D=0;D<E.effects.length;D++)E.effects[D].addLocalBounds?.(A,I);R.addBounds(A,Matrix.IDENTITY),boundsPool.return(A)}matrixPool.return(T)}function checkChildrenDidChange(E,A){const _=E.children;for(let I=0;I<_.length;I++){const B=_[I],T=B.uid,R=(B._didViewChangeTick&65535)<<16|B._didContainerChangeTick&65535,P=A.index;(A.data[P]!==T||A.data[P+1]!==R)&&(A.data[A.index]=T,A.data[A.index+1]=R,A.didChange=!0),A.index=P+2,B.children.length&&checkChildrenDidChange(B,A)}return A.didChange}const tempMatrix$4=new Matrix,measureMixin={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(E,A){const _=Math.sign(this.scale.x)||1;A!==0?this.scale.x=E/A*_:this.scale.x=_},_setHeight(E,A){const _=Math.sign(this.scale.y)||1;A!==0?this.scale.y=E/A*_:this.scale.y=_},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new Bounds});const E=this._localBoundsCacheData;return E.index=1,E.didChange=!1,E.data[0]!==this._didViewChangeTick&&(E.didChange=!0,E.data[0]=this._didViewChangeTick),checkChildrenDidChange(this,E),E.didChange&&getLocalBounds(this,E.localBounds,tempMatrix$4),E.localBounds},getBounds(E,A){return getGlobalBounds(this,E,A||new Bounds)}},onRenderMixin={_onRender:null,set onRender(E){const A=this.renderGroup||this.parentRenderGroup;if(!E){this._onRender&&A?.removeOnRender(this),this._onRender=null;return}this._onRender||A?.addOnRender(this),this._onRender=E},get onRender(){return this._onRender}},sortMixin={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(E){this._zIndex!==E&&(this._zIndex=E,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(sortChildren))}};function sortChildren(E,A){return E._zIndex-A._zIndex}const toLocalGlobalMixin={getGlobalPosition(E=new Point$1,A=!1){return this.parent?this.parent.toGlobal(this._position,E,A):(E.x=this._position.x,E.y=this._position.y),E},toGlobal(E,A,_=!1){const I=this.getGlobalTransform(matrixPool.get(),_);return A=I.apply(E,A),matrixPool.return(I),A},toLocal(E,A,_,I){A&&(E=A.toGlobal(E,_,I));const B=this.getGlobalTransform(matrixPool.get(),I);return _=B.applyInverse(E,_),matrixPool.return(B),_}};class InstructionSet{constructor(){this.uid=uid$1("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}add(A){this.instructions[this.instructionSize++]=A}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let count=0;class TexturePoolClass{constructor(A){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=A||{},this.enableFullScreen=!1,this.textureStyle=new TextureStyle(this.textureOptions)}createTexture(A,_,I){const B=new TextureSource({...this.textureOptions,width:A,height:_,resolution:1,antialias:I,autoGarbageCollect:!1});return new Texture({source:B,label:`texturePool_${count++}`})}getOptimalTexture(A,_,I=1,B){let T=Math.ceil(A*I-1e-6),R=Math.ceil(_*I-1e-6);T=nextPow2(T),R=nextPow2(R);const P=(T<<17)+(R<<1)+(B?1:0);this._texturePool[P]||(this._texturePool[P]=[]);let D=this._texturePool[P].pop();return D||(D=this.createTexture(T,R,B)),D.source._resolution=I,D.source.width=T/I,D.source.height=R/I,D.source.pixelWidth=T,D.source.pixelHeight=R,D.frame.x=0,D.frame.y=0,D.frame.width=A,D.frame.height=_,D.updateUvs(),this._poolKeyHash[D.uid]=P,D}getSameSizeTexture(A,_=!1){const I=A.source;return this.getOptimalTexture(A.width,A.height,I._resolution,_)}returnTexture(A,_=!1){const I=this._poolKeyHash[A.uid];_&&(A.source.style=this.textureStyle),this._texturePool[I].push(A)}clear(A){if(A=A!==!1,A)for(const _ in this._texturePool){const I=this._texturePool[_];if(I)for(let B=0;B<I.length;B++)I[B].destroy(!0)}this._texturePool={}}}const TexturePool=new TexturePoolClass;class RenderGroup{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new Matrix,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new InstructionSet,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(A){this.root=A,A._onRender&&this.addOnRender(A),A.didChange=!0;const _=A.children;for(let I=0;I<_.length;I++){const B=_[I];B._updateFlags=15,this.addChild(B)}}enableCacheAsTexture(A={}){this.textureOptions=A,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(TexturePool.returnTexture(this.texture,!0),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0}reset(){this.renderGroupChildren.length=0;for(const A in this.childrenToUpdate){const _=this.childrenToUpdate[A];_.list.fill(null),_.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(A){A.renderGroupParent&&A.renderGroupParent._removeRenderGroupChild(A),A.renderGroupParent=this,this.renderGroupChildren.push(A)}_removeRenderGroupChild(A){const _=this.renderGroupChildren.indexOf(A);_>-1&&this.renderGroupChildren.splice(_,1),A.renderGroupParent=null}addChild(A){if(this.structureDidChange=!0,A.parentRenderGroup=this,A.updateTick=-1,A.parent===this.root?A.relativeRenderGroupDepth=1:A.relativeRenderGroupDepth=A.parent.relativeRenderGroupDepth+1,A.didChange=!0,this.onChildUpdate(A),A.renderGroup){this.addRenderGroupChild(A.renderGroup);return}A._onRender&&this.addOnRender(A);const _=A.children;for(let I=0;I<_.length;I++)this.addChild(_[I])}removeChild(A){if(this.structureDidChange=!0,A._onRender&&(A.renderGroup||this.removeOnRender(A)),A.parentRenderGroup=null,A.renderGroup){this._removeRenderGroupChild(A.renderGroup);return}const _=A.children;for(let I=0;I<_.length;I++)this.removeChild(_[I])}removeChildren(A){for(let _=0;_<A.length;_++)this.removeChild(A[_])}onChildUpdate(A){let _=this.childrenToUpdate[A.relativeRenderGroupDepth];_||(_=this.childrenToUpdate[A.relativeRenderGroupDepth]={index:0,list:[]}),_.list[_.index++]=A}updateRenderable(A){A.globalDisplayStatus<7||(this.instructionSet.renderPipes[A.renderPipeId].updateRenderable(A),A.didViewUpdate=!1)}onChildViewUpdate(A){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=A}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(A){this._onRenderContainers.push(A)}removeOnRender(A){this._onRenderContainers.splice(this._onRenderContainers.indexOf(A),1)}runOnRender(A){for(let _=0;_<this._onRenderContainers.length;_++)this._onRenderContainers[_]._onRender(A)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(A=[]){const _=this.root.children;for(let I=0;I<_.length;I++)this._getChildren(_[I],A);return A}_getChildren(A,_=[]){if(_.push(A),A.renderGroup)return _;const I=A.children;for(let B=0;B<I.length;B++)this._getChildren(I[B],_);return _}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new Matrix),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new Matrix),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const A=this._parentCacheAsTextureRenderGroup;return A?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new Matrix),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(A.inverseWorldTransform).translate(-A._textureBounds.x,-A._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function assignWithIgnore(E,A,_={}){for(const I in A)!_[I]&&A[I]!==void 0&&(E[I]=A[I])}const defaultSkew=new ObservablePoint(null),defaultPivot=new ObservablePoint(null),defaultScale=new ObservablePoint(null,1,1),defaultOrigin=new ObservablePoint(null),UPDATE_COLOR=1,UPDATE_BLEND=2,UPDATE_VISIBLE=4,UPDATE_TRANSFORM=8;class Container extends EventEmitter{constructor(A={}){super(),this.uid=uid$1("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new Matrix,this.relativeGroupTransform=new Matrix,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new ObservablePoint(this,0,0),this._scale=defaultScale,this._pivot=defaultPivot,this._origin=defaultOrigin,this._skew=defaultSkew,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],assignWithIgnore(this,A,{children:!0,parent:!0,effects:!0}),A.children?.forEach(_=>this.addChild(_)),A.parent?.addChild(this)}static mixin(A){deprecation("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),extensions.mixin(Container,A)}set _didChangeId(A){this._didViewChangeTick=A>>12&4095,this._didContainerChangeTick=A&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...A){if(this.allowChildren||deprecation(v8_0_0,"addChild: Only Containers will be allowed to add children in v8.0.0"),A.length>1){for(let B=0;B<A.length;B++)this.addChild(A[B]);return A[0]}const _=A[0],I=this.renderGroup||this.parentRenderGroup;return _.parent===this?(this.children.splice(this.children.indexOf(_),1),this.children.push(_),I&&(I.structureDidChange=!0),_):(_.parent&&_.parent.removeChild(_),this.children.push(_),this.sortableChildren&&(this.sortDirty=!0),_.parent=this,_.didChange=!0,_._updateFlags=15,I&&I.addChild(_),this.emit("childAdded",_,this,this.children.length-1),_.emit("added",this),this._didViewChangeTick++,_._zIndex!==0&&_.depthOfChildModified(),_)}removeChild(...A){if(A.length>1){for(let B=0;B<A.length;B++)this.removeChild(A[B]);return A[0]}const _=A[0],I=this.children.indexOf(_);return I>-1&&(this._didViewChangeTick++,this.children.splice(I,1),this.renderGroup?this.renderGroup.removeChild(_):this.parentRenderGroup&&this.parentRenderGroup.removeChild(_),_.parentRenderLayer&&_.parentRenderLayer.detach(_),_.parent=null,this.emit("childRemoved",_,this,I),_.emit("removed",this)),_}_onUpdate(A){A&&A===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(A){!!this.renderGroup!==A&&(A?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const A=this.parentRenderGroup;A?.removeChild(this),this.renderGroup=BigPool.get(RenderGroup,this),this.groupTransform=Matrix.IDENTITY,A?.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const A=this.parentRenderGroup;A?.removeChild(this),BigPool.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,A?.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new Matrix),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(A){this._position.x=A}get y(){return this._position.y}set y(A){this._position.y=A}get position(){return this._position}set position(A){this._position.copyFrom(A)}get rotation(){return this._rotation}set rotation(A){this._rotation!==A&&(this._rotation=A,this._onUpdate(this._skew))}get angle(){return this.rotation*RAD_TO_DEG}set angle(A){this.rotation=A*DEG_TO_RAD}get pivot(){return this._pivot===defaultPivot&&(this._pivot=new ObservablePoint(this,0,0)),this._pivot}set pivot(A){this._pivot===defaultPivot&&(this._pivot=new ObservablePoint(this,0,0),this._origin!==defaultOrigin&&warn$1("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof A=="number"?this._pivot.set(A):this._pivot.copyFrom(A)}get skew(){return this._skew===defaultSkew&&(this._skew=new ObservablePoint(this,0,0)),this._skew}set skew(A){this._skew===defaultSkew&&(this._skew=new ObservablePoint(this,0,0)),this._skew.copyFrom(A)}get scale(){return this._scale===defaultScale&&(this._scale=new ObservablePoint(this,1,1)),this._scale}set scale(A){this._scale===defaultScale&&(this._scale=new ObservablePoint(this,0,0)),typeof A=="string"&&(A=parseFloat(A)),typeof A=="number"?this._scale.set(A):this._scale.copyFrom(A)}get origin(){return this._origin===defaultOrigin&&(this._origin=new ObservablePoint(this,0,0)),this._origin}set origin(A){this._origin===defaultOrigin&&(this._origin=new ObservablePoint(this,0,0),this._pivot!==defaultPivot&&warn$1("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof A=="number"?this._origin.set(A):this._origin.copyFrom(A)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(A){const _=this.getLocalBounds().width;this._setWidth(A,_)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(A){const _=this.getLocalBounds().height;this._setHeight(A,_)}getSize(A){A||(A={});const _=this.getLocalBounds();return A.width=Math.abs(this.scale.x*_.width),A.height=Math.abs(this.scale.y*_.height),A}setSize(A,_){const I=this.getLocalBounds();typeof A=="object"?(_=A.height??A.width,A=A.width):_??(_=A),A!==void 0&&this._setWidth(A,I.width),_!==void 0&&this._setHeight(_,I.height)}_updateSkew(){const A=this._rotation,_=this._skew;this._cx=Math.cos(A+_._y),this._sx=Math.sin(A+_._y),this._cy=-Math.sin(A-_._x),this._sy=Math.cos(A-_._x)}updateTransform(A){return this.position.set(typeof A.x=="number"?A.x:this.position.x,typeof A.y=="number"?A.y:this.position.y),this.scale.set(typeof A.scaleX=="number"?A.scaleX||1:this.scale.x,typeof A.scaleY=="number"?A.scaleY||1:this.scale.y),this.rotation=typeof A.rotation=="number"?A.rotation:this.rotation,this.skew.set(typeof A.skewX=="number"?A.skewX:this.skew.x,typeof A.skewY=="number"?A.skewY:this.skew.y),this.pivot.set(typeof A.pivotX=="number"?A.pivotX:this.pivot.x,typeof A.pivotY=="number"?A.pivotY:this.pivot.y),this.origin.set(typeof A.originX=="number"?A.originX:this.origin.x,typeof A.originY=="number"?A.originY:this.origin.y),this}setFromMatrix(A){A.decompose(this)}updateLocalTransform(){const A=this._didContainerChangeTick;if(this._didLocalTransformChangeId===A)return;this._didLocalTransformChangeId=A;const _=this.localTransform,I=this._scale,B=this._pivot,T=this._origin,R=this._position,P=I._x,D=I._y,F=B._x,L=B._y,U=-T._x,V=-T._y;_.a=this._cx*P,_.b=this._sx*P,_.c=this._cy*D,_.d=this._sy*D,_.tx=R._x-(F*_.a+L*_.c)+(U*_.a+V*_.c)-U,_.ty=R._y-(F*_.b+L*_.d)+(U*_.b+V*_.d)-V}set alpha(A){A!==this.localAlpha&&(this.localAlpha=A,this._updateFlags|=UPDATE_COLOR,this._onUpdate())}get alpha(){return this.localAlpha}set tint(A){const I=Color$1.shared.setValue(A??16777215).toBgrNumber();I!==this.localColor&&(this.localColor=I,this._updateFlags|=UPDATE_COLOR,this._onUpdate())}get tint(){return bgr2rgb(this.localColor)}set blendMode(A){this.localBlendMode!==A&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=UPDATE_BLEND,this.localBlendMode=A,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(A){const _=A?2:0;(this.localDisplayStatus&2)!==_&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=UPDATE_VISIBLE,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(A){const _=A?0:4;(this.localDisplayStatus&4)!==_&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=UPDATE_VISIBLE,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(A){const _=A?1:0;(this.localDisplayStatus&1)!==_&&(this._updateFlags|=UPDATE_VISIBLE,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(A=!1){if(this.destroyed)return;this.destroyed=!0;let _;if(this.children.length&&(_=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._origin=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof A=="boolean"?A:A?.children)&&_)for(let B=0;B<_.length;++B)_[B].destroy(A);this.renderGroup?.destroy(),this.renderGroup=null}}extensions.mixin(Container,childrenHelperMixin,getFastGlobalBoundsMixin,toLocalGlobalMixin,onRenderMixin,measureMixin,effectsMixin,findMixin,sortMixin,cullingMixin,cacheAsTextureMixin,getGlobalMixin,collectRenderablesMixin);class ViewContainer extends Container{constructor(A){super(A),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._gpuData=Object.create(null),this._bounds=new Bounds(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(A){this._roundPixels=A?1:0}containsPoint(A){const _=this.bounds,{x:I,y:B}=A;return I>=_.minX&&I<=_.maxX&&B>=_.minY&&B<=_.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const A=this.renderGroup||this.parentRenderGroup;A&&A.onChildViewUpdate(this)}destroy(A){super.destroy(A),this._bounds=null;for(const _ in this._gpuData)this._gpuData[_].destroy?.();this._gpuData=null}collectRenderablesSimple(A,_,I){const{renderPipes:B}=_;B.blendMode.setBlendMode(this,this.groupBlendMode,A),B[this.renderPipeId].addRenderable(this,A),this.didViewUpdate=!1;const R=this.children,P=R.length;for(let D=0;D<P;D++)R[D].collectRenderables(A,_,I)}}let Sprite$1=class Ti extends ViewContainer{constructor(A=Texture.EMPTY){A instanceof Texture&&(A={texture:A});const{texture:_=Texture.EMPTY,anchor:I,roundPixels:B,width:T,height:R,...P}=A;super({label:"Sprite",...P}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new ObservablePoint({_onUpdate:()=>{this.onViewUpdate()}}),I?this.anchor=I:_.defaultAnchor&&(this.anchor=_.defaultAnchor),this.texture=_,this.allowChildren=!1,this.roundPixels=B??!1,T!==void 0&&(this.width=T),R!==void 0&&(this.height=R)}static from(A,_=!1){return A instanceof Texture?new Ti(A):new Ti(Texture.from(A,_))}set texture(A){A||(A=Texture.EMPTY);const _=this._texture;_!==A&&(_&&_.dynamic&&_.off("update",this.onViewUpdate,this),A.dynamic&&A.on("update",this.onViewUpdate,this),this._texture=A,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return updateQuadBounds(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return deprecation("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const A=this._anchor,_=this._texture,I=this._bounds,{width:B,height:T}=_.orig;I.minX=-A._x*B,I.maxX=I.minX+B,I.minY=-A._y*T,I.maxY=I.minY+T}destroy(A=!1){if(super.destroy(A),typeof A=="boolean"?A:A?.texture){const I=typeof A=="boolean"?A:A?.textureSource;this._texture.destroy(I)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null,this._gpuData=null}get anchor(){return this._anchor}set anchor(A){typeof A=="number"?this._anchor.set(A):this._anchor.copyFrom(A)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(A){this._setWidth(A,this._texture.orig.width),this._width=A}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(A){this._setHeight(A,this._texture.orig.height),this._height=A}getSize(A){return A||(A={}),A.width=Math.abs(this.scale.x)*this._texture.orig.width,A.height=Math.abs(this.scale.y)*this._texture.orig.height,A}setSize(A,_){typeof A=="object"?(_=A.height??A.width,A=A.width):_??(_=A),A!==void 0&&this._setWidth(A,this._texture.orig.width),_!==void 0&&this._setHeight(_,this._texture.orig.height)}};const tempBounds$4=new Bounds;function addMaskBounds(E,A,_){const I=tempBounds$4;E.measurable=!0,getGlobalBounds(E,_,I),A.addBoundsMask(I),E.measurable=!1}function addMaskLocalBounds(E,A,_){const I=boundsPool.get();E.measurable=!0;const B=matrixPool.get().identity(),T=getMatrixRelativeToParent(E,_,B);getLocalBounds(E,I,T),E.measurable=!1,A.addBoundsMask(I),matrixPool.return(B),boundsPool.return(I)}function getMatrixRelativeToParent(E,A,_){return E?(E!==A&&(getMatrixRelativeToParent(E.parent,A,_),E.updateLocalTransform(),_.append(E.localTransform)),_):(warn$1("Mask bounds, renderable is not inside the root container"),_)}class AlphaMask{constructor(A){this.priority=0,this.inverse=!1,this.pipe="alphaMask",A?.mask&&this.init(A.mask)}init(A){this.mask=A,this.renderMaskToTexture=!(A instanceof Sprite$1),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(A,_){this.inverse||addMaskBounds(this.mask,A,_)}addLocalBounds(A,_){addMaskLocalBounds(this.mask,A,_)}containsPoint(A,_){const I=this.mask;return _(I,A)}destroy(){this.reset()}static test(A){return A instanceof Sprite$1}}AlphaMask.extension=ExtensionType.MaskEffect;class ColorMask{constructor(A){this.priority=0,this.pipe="colorMask",A?.mask&&this.init(A.mask)}init(A){this.mask=A}destroy(){}static test(A){return typeof A=="number"}}ColorMask.extension=ExtensionType.MaskEffect;class StencilMask{constructor(A){this.priority=0,this.pipe="stencilMask",A?.mask&&this.init(A.mask)}init(A){this.mask=A,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(A,_){addMaskBounds(this.mask,A,_)}addLocalBounds(A,_){addMaskLocalBounds(this.mask,A,_)}containsPoint(A,_){const I=this.mask;return _(I,A)}destroy(){this.reset()}static test(A){return A instanceof Container}}StencilMask.extension=ExtensionType.MaskEffect;const BrowserAdapter={createCanvas:(E,A)=>{const _=document.createElement("canvas");return _.width=E,_.height=A,_},createImage:()=>new Image,getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(E,A)=>fetch(E,A),parseXML:E=>new DOMParser().parseFromString(E,"text/xml")};let currentAdapter=BrowserAdapter;const DOMAdapter={get(){return currentAdapter},set(E){currentAdapter=E}};class CanvasSource extends TextureSource{constructor(A){A.resource||(A.resource=DOMAdapter.get().createCanvas()),A.width||(A.width=A.resource.width,A.autoDensity||(A.width/=A.resolution)),A.height||(A.height=A.resource.height,A.autoDensity||(A.height/=A.resolution)),super(A),this.uploadMethodId="image",this.autoDensity=A.autoDensity,this.resizeCanvas(),this.transparent=!!A.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(A=this.width,_=this.height,I=this._resolution){const B=super.resize(A,_,I);return B&&this.resizeCanvas(),B}static test(A){return globalThis.HTMLCanvasElement&&A instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&A instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}CanvasSource.extension=ExtensionType.TextureSource;class ImageSource extends TextureSource{constructor(A){super(A),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(A){return globalThis.HTMLImageElement&&A instanceof HTMLImageElement||typeof ImageBitmap<"u"&&A instanceof ImageBitmap||globalThis.VideoFrame&&A instanceof VideoFrame}}ImageSource.extension=ExtensionType.TextureSource;var UPDATE_PRIORITY=(E=>(E[E.INTERACTION=50]="INTERACTION",E[E.HIGH=25]="HIGH",E[E.NORMAL=0]="NORMAL",E[E.LOW=-25]="LOW",E[E.UTILITY=-50]="UTILITY",E))(UPDATE_PRIORITY||{});class TickerListener{constructor(A,_=null,I=0,B=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=A,this._context=_,this.priority=I,this._once=B}match(A,_=null){return this._fn===A&&this._context===_}emit(A){this._fn&&(this._context?this._fn.call(this._context,A):this._fn(A));const _=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),_}connect(A){this.previous=A,A.next&&(A.next.previous=this),this.next=A.next,A.next=this}destroy(A=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const _=this.next;return this.next=A?null:_,this.previous=null,_}}const _Ticker=class ni{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new TickerListener(null,null,1/0),this.deltaMS=1/ni.targetFPMS,this.elapsedMS=1/ni.targetFPMS,this._tick=A=>{this._requestId=null,this.started&&(this.update(A),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(A,_,I=UPDATE_PRIORITY.NORMAL){return this._addListener(new TickerListener(A,_,I))}addOnce(A,_,I=UPDATE_PRIORITY.NORMAL){return this._addListener(new TickerListener(A,_,I,!0))}_addListener(A){let _=this._head.next,I=this._head;if(!_)A.connect(I);else{for(;_;){if(A.priority>_.priority){A.connect(I);break}I=_,_=_.next}A.previous||A.connect(I)}return this._startIfPossible(),this}remove(A,_){let I=this._head.next;for(;I;)I.match(A,_)?I=I.destroy():I=I.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let A=0,_=this._head;for(;_=_.next;)A++;return A}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let A=this._head.next;for(;A;)A=A.destroy(!0);this._head.destroy(),this._head=null}}update(A=performance.now()){let _;if(A>this.lastTime){if(_=this.elapsedMS=A-this.lastTime,_>this._maxElapsedMS&&(_=this._maxElapsedMS),_*=this.speed,this._minElapsedMS){const T=A-this._lastFrame|0;if(T<this._minElapsedMS)return;this._lastFrame=A-T%this._minElapsedMS}this.deltaMS=_,this.deltaTime=this.deltaMS*ni.targetFPMS;const I=this._head;let B=I.next;for(;B;)B=B.emit(this);I.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=A}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(A){const _=Math.min(this.maxFPS,A),I=Math.min(Math.max(0,_)/1e3,ni.targetFPMS);this._maxElapsedMS=1/I}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(A){if(A===0)this._minElapsedMS=0;else{const _=Math.max(this.minFPS,A);this._minElapsedMS=1/(_/1e3)}}static get shared(){if(!ni._shared){const A=ni._shared=new ni;A.autoStart=!0,A._protected=!0}return ni._shared}static get system(){if(!ni._system){const A=ni._system=new ni;A.autoStart=!0,A._protected=!0}return ni._system}};_Ticker.targetFPMS=.06;let Ticker$1=_Ticker,promise$1;async function detectVideoAlphaMode(){return promise$1??(promise$1=(async()=>{const A=DOMAdapter.get().createCanvas(1,1).getContext("webgl");if(!A)return"premultiply-alpha-on-upload";const _=await new Promise(R=>{const P=document.createElement("video");P.onloadeddata=()=>R(P),P.onerror=()=>R(null),P.autoplay=!1,P.crossOrigin="anonymous",P.preload="auto",P.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",P.load()});if(!_)return"premultiply-alpha-on-upload";const I=A.createTexture();A.bindTexture(A.TEXTURE_2D,I);const B=A.createFramebuffer();A.bindFramebuffer(A.FRAMEBUFFER,B),A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,I,0),A.pixelStorei(A.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),A.pixelStorei(A.UNPACK_COLORSPACE_CONVERSION_WEBGL,A.NONE),A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,_);const T=new Uint8Array(4);return A.readPixels(0,0,1,1,A.RGBA,A.UNSIGNED_BYTE,T),A.deleteFramebuffer(B),A.deleteTexture(I),A.getExtension("WEBGL_lose_context")?.loseContext(),T[0]<=T[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),promise$1}const _VideoSource=class en extends TextureSource{constructor(A){super(A),this.isReady=!1,this.uploadMethodId="video",A={...en.defaultOptions,...A},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=A.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=A.autoPlay!==!1,this.alphaMode=A.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),A.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const A=Ticker$1.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-A)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const A=this.resource,_=this.options;return(A.readyState===A.HAVE_ENOUGH_DATA||A.readyState===A.HAVE_FUTURE_DATA)&&A.width&&A.height&&(A.complete=!0),A.addEventListener("play",this._onPlayStart),A.addEventListener("pause",this._onPlayStop),A.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(_.preload||A.addEventListener("canplay",this._onCanPlay),A.addEventListener("canplaythrough",this._onCanPlayThrough),A.addEventListener("error",this._onError,!0)),this.alphaMode=await detectVideoAlphaMode(),this._load=new Promise((I,B)=>{this.isValid?I(this):(this._resolve=I,this._reject=B,_.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${_.preloadTimeoutMs}ms`))})),A.load())}),this._load}_onError(A){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",A),this._reject&&(this._reject(A),this._reject=null,this._resolve=null)}_isSourcePlaying(){const A=this.resource;return!A.paused&&!A.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const A=this.resource;this.isValid&&(this.isReady=!0,this.resize(A.videoWidth,A.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const A=this.resource;A&&(A.removeEventListener("play",this._onPlayStart),A.removeEventListener("pause",this._onPlayStop),A.removeEventListener("seeked",this._onSeeked),A.removeEventListener("canplay",this._onCanPlay),A.removeEventListener("canplaythrough",this._onCanPlayThrough),A.removeEventListener("error",this._onError,!0),A.pause(),A.src="",A.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(A){A!==this._autoUpdate&&(this._autoUpdate=A,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(A){A!==this._updateFPS&&(this._updateFPS=A,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(Ticker$1.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Ticker$1.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Ticker$1.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(A){return globalThis.HTMLVideoElement&&A instanceof HTMLVideoElement}};_VideoSource.extension=ExtensionType.TextureSource;_VideoSource.defaultOptions={...TextureSource.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};_VideoSource.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let VideoSource=_VideoSource;const convertToList=(E,A,_=!1)=>(Array.isArray(E)||(E=[E]),A?E.map(I=>typeof I=="string"||_?A(I):I):E);class CacheClass{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(A){return this._cache.has(A)}get(A){const _=this._cache.get(A);return _||warn$1(`[Assets] Asset id ${A} was not found in the Cache`),_}set(A,_){const I=convertToList(A);let B;for(let D=0;D<this.parsers.length;D++){const F=this.parsers[D];if(F.test(_)){B=F.getCacheableAssets(I,_);break}}const T=new Map(Object.entries(B||{}));B||I.forEach(D=>{T.set(D,_)});const R=[...T.keys()],P={cacheKeys:R,keys:I};I.forEach(D=>{this._cacheMap.set(D,P)}),R.forEach(D=>{const F=B?B[D]:_;this._cache.has(D)&&this._cache.get(D)!==F&&warn$1("[Cache] already has key:",D),this._cache.set(D,T.get(D))})}remove(A){if(!this._cacheMap.has(A)){warn$1(`[Assets] Asset id ${A} was not found in the Cache`);return}const _=this._cacheMap.get(A);_.cacheKeys.forEach(B=>{this._cache.delete(B)}),_.keys.forEach(B=>{this._cacheMap.delete(B)})}get parsers(){return this._parsers}}const Cache=new CacheClass,sources=[];extensions.handleByList(ExtensionType.TextureSource,sources);function autoDetectSource(E={}){return textureSourceFrom(E)}function textureSourceFrom(E={}){const A=E&&E.resource,_=A?E.resource:E,I=A?E:{resource:E};for(let B=0;B<sources.length;B++){const T=sources[B];if(T.test(_))return new T(I)}throw new Error(`Could not find a source type for resource: ${I.resource}`)}function resourceToTexture(E={},A=!1){const _=E&&E.resource,I=_?E.resource:E,B=_?E:{resource:E};if(!A&&Cache.has(I))return Cache.get(I);const T=new Texture({source:textureSourceFrom(B)});return T.on("destroy",()=>{Cache.has(I)&&Cache.remove(I)}),A||Cache.set(I,T),T}function textureFrom(E,A=!1){return typeof E=="string"?Cache.get(E):E instanceof TextureSource?new Texture({source:E}):resourceToTexture(E,A)}Texture.from=textureFrom;TextureSource.from=textureSourceFrom;extensions.add(AlphaMask,ColorMask,StencilMask,VideoSource,ImageSource,CanvasSource,BufferImageSource);var LoaderParserPriority=(E=>(E[E.Low=0]="Low",E[E.Normal=1]="Normal",E[E.High=2]="High",E))(LoaderParserPriority||{});function assertPath(E){if(typeof E!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(E)}`)}function removeUrlParams(E){return E.split("?")[0].split("#")[0]}function escapeRegExp(E){return E.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function replaceAll(E,A,_){return E.replace(new RegExp(escapeRegExp(A),"g"),_)}function normalizeStringPosix(E,A){let _="",I=0,B=-1,T=0,R=-1;for(let P=0;P<=E.length;++P){if(P<E.length)R=E.charCodeAt(P);else{if(R===47)break;R=47}if(R===47){if(!(B===P-1||T===1))if(B!==P-1&&T===2){if(_.length<2||I!==2||_.charCodeAt(_.length-1)!==46||_.charCodeAt(_.length-2)!==46){if(_.length>2){const D=_.lastIndexOf("/");if(D!==_.length-1){D===-1?(_="",I=0):(_=_.slice(0,D),I=_.length-1-_.lastIndexOf("/")),B=P,T=0;continue}}else if(_.length===2||_.length===1){_="",I=0,B=P,T=0;continue}}}else _.length>0?_+=`/${E.slice(B+1,P)}`:_=E.slice(B+1,P),I=P-B-1;B=P,T=0}else R===46&&T!==-1?++T:T=-1}return _}const path={toPosix(E){return replaceAll(E,"\\","/")},isUrl(E){return/^https?:/.test(this.toPosix(E))},isDataUrl(E){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(E)},isBlobUrl(E){return E.startsWith("blob:")},hasProtocol(E){return/^[^/:]+:/.test(this.toPosix(E))},getProtocol(E){assertPath(E),E=this.toPosix(E);const A=/^file:\/\/\//.exec(E);if(A)return A[0];const _=/^[^/:]+:\/{0,2}/.exec(E);return _?_[0]:""},toAbsolute(E,A,_){if(assertPath(E),this.isDataUrl(E)||this.isBlobUrl(E))return E;const I=removeUrlParams(this.toPosix(A??DOMAdapter.get().getBaseUrl())),B=removeUrlParams(this.toPosix(_??this.rootname(I)));return E=this.toPosix(E),E.startsWith("/")?path.join(B,E.slice(1)):this.isAbsolute(E)?E:this.join(I,E)},normalize(E){if(assertPath(E),E.length===0)return".";if(this.isDataUrl(E)||this.isBlobUrl(E))return E;E=this.toPosix(E);let A="";const _=E.startsWith("/");this.hasProtocol(E)&&(A=this.rootname(E),E=E.slice(A.length));const I=E.endsWith("/");return E=normalizeStringPosix(E),E.length>0&&I&&(E+="/"),_?`/${E}`:A+E},isAbsolute(E){return assertPath(E),E=this.toPosix(E),this.hasProtocol(E)?!0:E.startsWith("/")},join(...E){if(E.length===0)return".";let A;for(let _=0;_<E.length;++_){const I=E[_];if(assertPath(I),I.length>0)if(A===void 0)A=I;else{const B=E[_-1]??"";this.joinExtensions.includes(this.extname(B).toLowerCase())?A+=`/../${I}`:A+=`/${I}`}}return A===void 0?".":this.normalize(A)},dirname(E){if(assertPath(E),E.length===0)return".";E=this.toPosix(E);let A=E.charCodeAt(0);const _=A===47;let I=-1,B=!0;const T=this.getProtocol(E),R=E;E=E.slice(T.length);for(let P=E.length-1;P>=1;--P)if(A=E.charCodeAt(P),A===47){if(!B){I=P;break}}else B=!1;return I===-1?_?"/":this.isUrl(R)?T+E:T:_&&I===1?"//":T+E.slice(0,I)},rootname(E){assertPath(E),E=this.toPosix(E);let A="";if(E.startsWith("/")?A="/":A=this.getProtocol(E),this.isUrl(E)){const _=E.indexOf("/",A.length);_!==-1?A=E.slice(0,_):A=E,A.endsWith("/")||(A+="/")}return A},basename(E,A){assertPath(E),A&&assertPath(A),E=removeUrlParams(this.toPosix(E));let _=0,I=-1,B=!0,T;if(A!==void 0&&A.length>0&&A.length<=E.length){if(A.length===E.length&&A===E)return"";let R=A.length-1,P=-1;for(T=E.length-1;T>=0;--T){const D=E.charCodeAt(T);if(D===47){if(!B){_=T+1;break}}else P===-1&&(B=!1,P=T+1),R>=0&&(D===A.charCodeAt(R)?--R===-1&&(I=T):(R=-1,I=P))}return _===I?I=P:I===-1&&(I=E.length),E.slice(_,I)}for(T=E.length-1;T>=0;--T)if(E.charCodeAt(T)===47){if(!B){_=T+1;break}}else I===-1&&(B=!1,I=T+1);return I===-1?"":E.slice(_,I)},extname(E){assertPath(E),E=removeUrlParams(this.toPosix(E));let A=-1,_=0,I=-1,B=!0,T=0;for(let R=E.length-1;R>=0;--R){const P=E.charCodeAt(R);if(P===47){if(!B){_=R+1;break}continue}I===-1&&(B=!1,I=R+1),P===46?A===-1?A=R:T!==1&&(T=1):A!==-1&&(T=-1)}return A===-1||I===-1||T===0||T===1&&A===I-1&&A===_+1?"":E.slice(A,I)},parse(E){assertPath(E);const A={root:"",dir:"",base:"",ext:"",name:""};if(E.length===0)return A;E=removeUrlParams(this.toPosix(E));let _=E.charCodeAt(0);const I=this.isAbsolute(E);let B;A.root=this.rootname(E),I||this.hasProtocol(E)?B=1:B=0;let T=-1,R=0,P=-1,D=!0,F=E.length-1,L=0;for(;F>=B;--F){if(_=E.charCodeAt(F),_===47){if(!D){R=F+1;break}continue}P===-1&&(D=!1,P=F+1),_===46?T===-1?T=F:L!==1&&(L=1):T!==-1&&(L=-1)}return T===-1||P===-1||L===0||L===1&&T===P-1&&T===R+1?P!==-1&&(R===0&&I?A.base=A.name=E.slice(1,P):A.base=A.name=E.slice(R,P)):(R===0&&I?(A.name=E.slice(1,T),A.base=E.slice(1,P)):(A.name=E.slice(R,T),A.base=E.slice(R,P)),A.ext=E.slice(T,P)),A.dir=this.dirname(E),A},sep:"/",delimiter:":",joinExtensions:[".html"]};function processX(E,A,_,I,B){const T=A[_];for(let R=0;R<T.length;R++){const P=T[R];_<A.length-1?processX(E.replace(I[_],P),A,_+1,I,B):B.push(E.replace(I[_],P))}}function createStringVariations(E){const A=/\{(.*?)\}/g,_=E.match(A),I=[];if(_){const B=[];_.forEach(T=>{const R=T.substring(1,T.length-1).split(",");B.push(R)}),processX(E,B,0,_,I)}else I.push(E);return I}const isSingleItem=E=>!Array.isArray(E);class Resolver{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(A,_)=>`${A}${this._bundleIdConnector}${_}`,extractAssetIdFromBundle:(A,_)=>_.replace(`${A}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(A){if(this._bundleIdConnector=A.connector??this._bundleIdConnector,this._createBundleAssetId=A.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=A.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...A){A.forEach(_=>{this._preferredOrder.push(_),_.priority||(_.priority=Object.keys(_.params))}),this._resolverHash={}}set basePath(A){this._basePath=A}get basePath(){return this._basePath}set rootPath(A){this._rootPath=A}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(A){if(typeof A=="string")this._defaultSearchParams=A;else{const _=A;this._defaultSearchParams=Object.keys(_).map(I=>`${encodeURIComponent(I)}=${encodeURIComponent(_[I])}`).join("&")}}getAlias(A){const{alias:_,src:I}=A;return convertToList(_||I,T=>typeof T=="string"?T:Array.isArray(T)?T.map(R=>R?.src??R):T?.src?T.src:T,!0)}addManifest(A){this._manifest&&warn$1("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=A,A.bundles.forEach(_=>{this.addBundle(_.name,_.assets)})}addBundle(A,_){const I=[];let B=_;Array.isArray(_)||(B=Object.entries(_).map(([T,R])=>typeof R=="string"||Array.isArray(R)?{alias:T,src:R}:{alias:T,...R})),B.forEach(T=>{const R=T.src,P=T.alias;let D;if(typeof P=="string"){const F=this._createBundleAssetId(A,P);I.push(F),D=[P,F]}else{const F=P.map(L=>this._createBundleAssetId(A,L));I.push(...F),D=[...P,...F]}this.add({...T,alias:D,src:R})}),this._bundles[A]=I}add(A){const _=[];Array.isArray(A)?_.push(...A):_.push(A);let I;I=T=>{this.hasKey(T)&&warn$1(`[Resolver] already has key: ${T} overwriting`)},convertToList(_).forEach(T=>{const{src:R}=T;let{data:P,format:D,loadParser:F,parser:L}=T;const U=convertToList(R).map(J=>typeof J=="string"?createStringVariations(J):Array.isArray(J)?J:[J]),V=this.getAlias(T);Array.isArray(V)?V.forEach(I):I(V);const K=[];U.forEach(J=>{J.forEach(ee=>{let ie={};if(typeof ee!="object"){ie.src=ee;for(let ne=0;ne<this._parsers.length;ne++){const ce=this._parsers[ne];if(ce.test(ee)){ie=ce.parse(ee);break}}}else P=ee.data??P,D=ee.format??D,(ee.loadParser||ee.parser)&&(F=ee.loadParser??F,L=ee.parser??L),ie={...ie,...ee};if(!V)throw new Error(`[Resolver] alias is undefined for this asset: ${ie.src}`);ie=this._buildResolvedAsset(ie,{aliases:V,data:P,format:D,loadParser:F,parser:L}),K.push(ie)})}),V.forEach(J=>{this._assetMap[J]=K})})}resolveBundle(A){const _=isSingleItem(A);A=convertToList(A);const I={};return A.forEach(B=>{const T=this._bundles[B];if(T){const R=this.resolve(T),P={};for(const D in R){const F=R[D];P[this._extractAssetIdFromBundle(B,D)]=F}I[B]=P}}),_?I[A[0]]:I}resolveUrl(A){const _=this.resolve(A);if(typeof A!="string"){const I={};for(const B in _)I[B]=_[B].src;return I}return _.src}resolve(A){const _=isSingleItem(A);A=convertToList(A);const I={};return A.forEach(B=>{if(!this._resolverHash[B])if(this._assetMap[B]){let T=this._assetMap[B];const R=this._getPreferredOrder(T);R?.priority.forEach(P=>{R.params[P].forEach(D=>{const F=T.filter(L=>L[P]?L[P]===D:!1);F.length&&(T=F)})}),this._resolverHash[B]=T[0]}else this._resolverHash[B]=this._buildResolvedAsset({alias:[B],src:B},{});I[B]=this._resolverHash[B]}),_?I[A[0]]:I}hasKey(A){return!!this._assetMap[A]}hasBundle(A){return!!this._bundles[A]}_getPreferredOrder(A){for(let _=0;_<A.length;_++){const I=A[_],B=this._preferredOrder.find(T=>T.params.format.includes(I.format));if(B)return B}return this._preferredOrder[0]}_appendDefaultSearchParams(A){if(!this._defaultSearchParams)return A;const _=/\?/.test(A)?"&":"?";return`${A}${_}${this._defaultSearchParams}`}_buildResolvedAsset(A,_){const{aliases:I,data:B,loadParser:T,parser:R,format:P}=_;return(this._basePath||this._rootPath)&&(A.src=path.toAbsolute(A.src,this._basePath,this._rootPath)),A.alias=I??A.alias??[A.src],A.src=this._appendDefaultSearchParams(A.src),A.data={...B||{},...A.data},A.loadParser=T??A.loadParser,A.parser=R??A.parser,A.format=P??A.format??getUrlExtension(A.src),A}}Resolver.RETINA_PREFIX=/@([0-9\.]+)x/;function getUrlExtension(E){return E.split(".").pop().split("?").shift().split("#").shift()}const copySearchParams=(E,A)=>{const _=A.split("?")[1];return _&&(E+=`?${_}`),E},_Spritesheet=class Ei{constructor(A,_){this.linkedSheets=[];let I=A;A?.source instanceof TextureSource&&(I={texture:A,data:_});const{texture:B,data:T,cachePrefix:R=""}=I;this.cachePrefix=R,this._texture=B instanceof Texture?B:null,this.textureSource=B.source,this.textures={},this.animations={},this.data=T;const P=parseFloat(T.meta.scale);P?(this.resolution=P,B.source.resolution=this.resolution):this.resolution=B.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(A=>{this._callback=A,this._batchIndex=0,this._frameKeys.length<=Ei.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(A){let _=A;const I=Ei.BATCH_SIZE;for(;_-A<I&&_<this._frameKeys.length;){const B=this._frameKeys[_],T=this._frames[B],R=T.frame;if(R){let P=null,D=null;const F=T.trimmed!==!1&&T.sourceSize?T.sourceSize:T.frame,L=new Rectangle(0,0,Math.floor(F.w)/this.resolution,Math.floor(F.h)/this.resolution);T.rotated?P=new Rectangle(Math.floor(R.x)/this.resolution,Math.floor(R.y)/this.resolution,Math.floor(R.h)/this.resolution,Math.floor(R.w)/this.resolution):P=new Rectangle(Math.floor(R.x)/this.resolution,Math.floor(R.y)/this.resolution,Math.floor(R.w)/this.resolution,Math.floor(R.h)/this.resolution),T.trimmed!==!1&&T.spriteSourceSize&&(D=new Rectangle(Math.floor(T.spriteSourceSize.x)/this.resolution,Math.floor(T.spriteSourceSize.y)/this.resolution,Math.floor(R.w)/this.resolution,Math.floor(R.h)/this.resolution)),this.textures[B]=new Texture({source:this.textureSource,frame:P,orig:L,trim:D,rotate:T.rotated?2:0,defaultAnchor:T.anchor,defaultBorders:T.borders,label:B.toString()})}_++}}_processAnimations(){const A=this.data.animations||{};for(const _ in A){this.animations[_]=[];for(let I=0;I<A[_].length;I++){const B=A[_][I];this.animations[_].push(this.textures[B])}}}_parseComplete(){const A=this._callback;this._callback=null,this._batchIndex=0,A.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Ei.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Ei.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(A=!1){for(const _ in this.textures)this.textures[_].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,A&&(this._texture?.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};_Spritesheet.BATCH_SIZE=1e3;let Spritesheet=_Spritesheet;const validImages=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function getCacheableAssets(E,A,_){const I={};if(E.forEach(B=>{I[B]=A}),Object.keys(A.textures).forEach(B=>{I[`${A.cachePrefix}${B}`]=A.textures[B]}),!_){const B=path.dirname(E[0]);A.linkedSheets.forEach((T,R)=>{const P=getCacheableAssets([`${B}/${A.data.meta.related_multi_packs[R]}`],T,!0);Object.assign(I,P)})}return I}const spritesheetAsset={extension:ExtensionType.Asset,cache:{test:E=>E instanceof Spritesheet,getCacheableAssets:(E,A)=>getCacheableAssets(E,A,!1)},resolver:{extension:{type:ExtensionType.ResolveParser,name:"resolveSpritesheet"},test:E=>{const _=E.split("?")[0].split("."),I=_.pop(),B=_.pop();return I==="json"&&validImages.includes(B)},parse:E=>{const A=E.split(".");return{resolution:parseFloat(Resolver.RETINA_PREFIX.exec(E)?.[1]??"1"),format:A[A.length-2],src:E}}},loader:{name:"spritesheetLoader",id:"spritesheet",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Normal,name:"spritesheetLoader"},async testParse(E,A){return path.extname(A.src).toLowerCase()===".json"&&!!E.frames},async parse(E,A,_){const{texture:I,imageFilename:B,textureOptions:T,cachePrefix:R}=A?.data??{};let P=path.dirname(A.src);P&&P.lastIndexOf("/")!==P.length-1&&(P+="/");let D;if(I instanceof Texture)D=I;else{const U=copySearchParams(P+(B??E.meta.image),A.src);D=(await _.load([{src:U,data:T}]))[U]}const F=new Spritesheet({texture:D.source,data:E,cachePrefix:R});await F.parse();const L=E?.meta?.related_multi_packs;if(Array.isArray(L)){const U=[];for(const K of L){if(typeof K!="string")continue;let J=P+K;A.data?.ignoreMultiPack||(J=copySearchParams(J,A.src),U.push(_.load({src:J,data:{textureOptions:T,ignoreMultiPack:!0}})))}const V=await Promise.all(U);F.linkedSheets=V,V.forEach(K=>{K.linkedSheets=[F].concat(F.linkedSheets.filter(J=>J!==K))})}return F},async unload(E,A,_){await _.unload(E.textureSource._sourceOrigin),E.destroy(!1)}}};extensions.add(spritesheetAsset);class CanvasObserver{constructor(A){this._lastTransform="",this._observer=null,this._tickerAttached=!1,this.updateTranslation=()=>{if(!this._canvas)return;const _=this._canvas.getBoundingClientRect(),I=this._canvas.width,B=this._canvas.height,T=_.width/I*this._renderer.resolution,R=_.height/B*this._renderer.resolution,P=_.left,D=_.top,F=`translate(${P}px, ${D}px) scale(${T}, ${R})`;F!==this._lastTransform&&(this._domElement.style.transform=F,this._lastTransform=F)},this._domElement=A.domElement,this._renderer=A.renderer,!(globalThis.OffscreenCanvas&&this._renderer.canvas instanceof OffscreenCanvas)&&(this._canvas=this._renderer.canvas,this._attachObserver())}get canvas(){return this._canvas}ensureAttached(){!this._domElement.parentNode&&this._canvas.parentNode&&(this._canvas.parentNode.appendChild(this._domElement),this.updateTranslation())}_attachObserver(){"ResizeObserver"in globalThis?(this._observer&&(this._observer.disconnect(),this._observer=null),this._observer=new ResizeObserver(A=>{for(const _ of A){if(_.target!==this._canvas)continue;const I=this.canvas.width,B=this.canvas.height,T=_.contentRect.width/I*this._renderer.resolution,R=_.contentRect.height/B*this._renderer.resolution;(this._lastScaleX!==T||this._lastScaleY!==R)&&(this.updateTranslation(),this._lastScaleX=T,this._lastScaleY=R)}}),this._observer.observe(this._canvas)):this._tickerAttached||Ticker$1.shared.add(this.updateTranslation,this,UPDATE_PRIORITY.HIGH)}destroy(){this._observer?(this._observer.disconnect(),this._observer=null):this._tickerAttached&&Ticker$1.shared.remove(this.updateTranslation),this._domElement=null,this._renderer=null,this._canvas=null,this._tickerAttached=!1,this._lastTransform="",this._lastScaleX=null,this._lastScaleY=null}}class FederatedEvent{constructor(A){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=FederatedEvent.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Point$1,this.page=new Point$1,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=A}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(A,_,I){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(A,_,I,B,T){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}var appleIphone=/iPhone/i,appleIpod=/iPod/i,appleTablet=/iPad/i,appleUniversal=/\biOS-universal(?:.+)Mac\b/i,androidPhone=/\bAndroid(?:.+)Mobile\b/i,androidTablet=/Android/i,amazonPhone=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,amazonTablet=/Silk/i,windowsPhone=/Windows Phone/i,windowsTablet=/\bWindows(?:.+)ARM\b/i,otherBlackBerry=/BlackBerry/i,otherBlackBerry10=/BB10/i,otherOpera=/Opera Mini/i,otherChrome=/\b(CriOS|Chrome)(?:.+)Mobile/i,otherFirefox=/Mobile(?:.+)Firefox\b/i,isAppleTabletOnIos13=function(E){return typeof E<"u"&&E.platform==="MacIntel"&&typeof E.maxTouchPoints=="number"&&E.maxTouchPoints>1&&typeof MSStream>"u"};function createMatch(E){return function(A){return A.test(E)}}function isMobile$1(E){var A={userAgent:"",platform:"",maxTouchPoints:0};!E&&typeof navigator<"u"?A={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof E=="string"?A.userAgent=E:E&&E.userAgent&&(A={userAgent:E.userAgent,platform:E.platform,maxTouchPoints:E.maxTouchPoints||0});var _=A.userAgent,I=_.split("[FBAN");typeof I[1]<"u"&&(_=I[0]),I=_.split("Twitter"),typeof I[1]<"u"&&(_=I[0]);var B=createMatch(_),T={apple:{phone:B(appleIphone)&&!B(windowsPhone),ipod:B(appleIpod),tablet:!B(appleIphone)&&(B(appleTablet)||isAppleTabletOnIos13(A))&&!B(windowsPhone),universal:B(appleUniversal),device:(B(appleIphone)||B(appleIpod)||B(appleTablet)||B(appleUniversal)||isAppleTabletOnIos13(A))&&!B(windowsPhone)},amazon:{phone:B(amazonPhone),tablet:!B(amazonPhone)&&B(amazonTablet),device:B(amazonPhone)||B(amazonTablet)},android:{phone:!B(windowsPhone)&&B(amazonPhone)||!B(windowsPhone)&&B(androidPhone),tablet:!B(windowsPhone)&&!B(amazonPhone)&&!B(androidPhone)&&(B(amazonTablet)||B(androidTablet)),device:!B(windowsPhone)&&(B(amazonPhone)||B(amazonTablet)||B(androidPhone)||B(androidTablet))||B(/\bokhttp\b/i)},windows:{phone:B(windowsPhone),tablet:B(windowsTablet),device:B(windowsPhone)||B(windowsTablet)},other:{blackberry:B(otherBlackBerry),blackberry10:B(otherBlackBerry10),opera:B(otherOpera),firefox:B(otherFirefox),chrome:B(otherChrome),device:B(otherBlackBerry)||B(otherBlackBerry10)||B(otherOpera)||B(otherFirefox)||B(otherChrome)},any:!1,phone:!1,tablet:!1};return T.any=T.apple.device||T.android.device||T.windows.device||T.other.device,T.phone=T.apple.phone||T.android.phone||T.windows.phone,T.tablet=T.apple.tablet||T.android.tablet||T.windows.tablet,T}const isMobileCall=isMobile$1.default??isMobile$1,isMobile=isMobileCall(globalThis.navigator),KEY_CODE_TAB=9,DIV_TOUCH_SIZE=100,DIV_TOUCH_POS_X=0,DIV_TOUCH_POS_Y=0,DIV_TOUCH_ZINDEX=2,DIV_HOOK_SIZE=1,DIV_HOOK_POS_X=-1e3,DIV_HOOK_POS_Y=-1e3,DIV_HOOK_ZINDEX=2,_AccessibilitySystem=class tn{constructor(A,_=isMobile){this._mobileInfo=_,this.debug=!1,this._activateOnTab=!0,this._deactivateOnMouseMove=!0,this._isActive=!1,this._isMobileAccessibility=!1,this._div=null,this._pool=[],this._renderId=0,this._children=[],this._androidUpdateCount=0,this._androidUpdateFrequency=500,this._hookDiv=null,(_.tablet||_.phone)&&this._createTouchHook(),this._renderer=A}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}get hookDiv(){return this._hookDiv}_createTouchHook(){const A=document.createElement("button");A.style.width=`${DIV_HOOK_SIZE}px`,A.style.height=`${DIV_HOOK_SIZE}px`,A.style.position="absolute",A.style.top=`${DIV_HOOK_POS_X}px`,A.style.left=`${DIV_HOOK_POS_Y}px`,A.style.zIndex=DIV_HOOK_ZINDEX.toString(),A.style.backgroundColor="#FF0000",A.title="select to enable accessibility for this content",A.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this._activate(),this._destroyTouchHook()}),document.body.appendChild(A),this._hookDiv=A}_destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}_activate(){if(this._isActive)return;this._isActive=!0,this._div||(this._div=document.createElement("div"),this._div.style.position="absolute",this._div.style.top=`${DIV_TOUCH_POS_X}px`,this._div.style.left=`${DIV_TOUCH_POS_Y}px`,this._div.style.pointerEvents="none",this._div.style.zIndex=DIV_TOUCH_ZINDEX.toString(),this._canvasObserver=new CanvasObserver({domElement:this._div,renderer:this._renderer})),this._activateOnTab&&(this._onKeyDown=this._onKeyDown.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)),this._deactivateOnMouseMove&&(this._onMouseMove=this._onMouseMove.bind(this),globalThis.document.addEventListener("mousemove",this._onMouseMove,!0));const A=this._renderer.view.canvas;if(A.parentNode)this._canvasObserver.ensureAttached(),this._initAccessibilitySetup();else{const _=new MutationObserver(()=>{A.parentNode&&(_.disconnect(),this._canvasObserver.ensureAttached(),this._initAccessibilitySetup())});_.observe(document.body,{childList:!0,subtree:!0})}}_initAccessibilitySetup(){this._renderer.runners.postrender.add(this),this._renderer.lastObjectRendered&&this._updateAccessibleObjects(this._renderer.lastObjectRendered)}_deactivate(){if(!(!this._isActive||this._isMobileAccessibility)){this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),this._activateOnTab&&globalThis.addEventListener("keydown",this._onKeyDown,!1),this._renderer.runners.postrender.remove(this);for(const A of this._children)A._accessibleDiv&&A._accessibleDiv.parentNode&&(A._accessibleDiv.parentNode.removeChild(A._accessibleDiv),A._accessibleDiv=null),A._accessibleActive=!1;this._pool.forEach(A=>{A.parentNode&&A.parentNode.removeChild(A)}),this._div&&this._div.parentNode&&this._div.parentNode.removeChild(this._div),this._pool=[],this._children=[]}}_updateAccessibleObjects(A){if(!A.visible||!A.accessibleChildren)return;A.accessible&&(A._accessibleActive||this._addChild(A),A._renderId=this._renderId);const _=A.children;if(_)for(let I=0;I<_.length;I++)this._updateAccessibleObjects(_[I])}init(A){const I={accessibilityOptions:{...tn.defaultOptions,...A?.accessibilityOptions||{}}};this.debug=I.accessibilityOptions.debug,this._activateOnTab=I.accessibilityOptions.activateOnTab,this._deactivateOnMouseMove=I.accessibilityOptions.deactivateOnMouseMove,I.accessibilityOptions.enabledByDefault?this._activate():this._activateOnTab&&(this._onKeyDown=this._onKeyDown.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)),this._renderer.runners.postrender.remove(this)}postrender(){const A=performance.now();if(this._mobileInfo.android.device&&A<this._androidUpdateCount||(this._androidUpdateCount=A+this._androidUpdateFrequency,!this._renderer.renderingToScreen||!this._renderer.view.canvas))return;const _=new Set;if(this._renderer.lastObjectRendered){this._updateAccessibleObjects(this._renderer.lastObjectRendered);for(const I of this._children)I._renderId===this._renderId&&_.add(this._children.indexOf(I))}for(let I=this._children.length-1;I>=0;I--){const B=this._children[I];_.has(I)||(B._accessibleDiv&&B._accessibleDiv.parentNode&&(B._accessibleDiv.parentNode.removeChild(B._accessibleDiv),this._pool.push(B._accessibleDiv),B._accessibleDiv=null),B._accessibleActive=!1,removeItems(this._children,I,1))}this._renderer.renderingToScreen&&this._canvasObserver.ensureAttached();for(let I=0;I<this._children.length;I++){const B=this._children[I];if(!B._accessibleActive||!B._accessibleDiv)continue;const T=B._accessibleDiv,R=B.hitArea||B.getBounds().rectangle;if(B.hitArea){const P=B.worldTransform;T.style.left=`${P.tx+R.x*P.a}px`,T.style.top=`${P.ty+R.y*P.d}px`,T.style.width=`${R.width*P.a}px`,T.style.height=`${R.height*P.d}px`}else this._capHitArea(R),T.style.left=`${R.x}px`,T.style.top=`${R.y}px`,T.style.width=`${R.width}px`,T.style.height=`${R.height}px`}this._renderId++}_updateDebugHTML(A){A.innerHTML=`type: ${A.type}</br> title : ${A.title}</br> tabIndex: ${A.tabIndex}`}_capHitArea(A){A.x<0&&(A.width+=A.x,A.x=0),A.y<0&&(A.height+=A.y,A.y=0);const{width:_,height:I}=this._renderer;A.x+A.width>_&&(A.width=_-A.x),A.y+A.height>I&&(A.height=I-A.y)}_addChild(A){let _=this._pool.pop();_||(A.accessibleType==="button"?_=document.createElement("button"):(_=document.createElement(A.accessibleType),_.style.cssText=`
                        color: transparent;
                        pointer-events: none;
                        padding: 0;
                        margin: 0;
                        border: 0;
                        outline: 0;
                        background: transparent;
                        box-sizing: border-box;
                        user-select: none;
                        -webkit-user-select: none;
                        -moz-user-select: none;
                        -ms-user-select: none;
                    `,A.accessibleText&&(_.innerText=A.accessibleText)),_.style.width=`${DIV_TOUCH_SIZE}px`,_.style.height=`${DIV_TOUCH_SIZE}px`,_.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",_.style.position="absolute",_.style.zIndex=DIV_TOUCH_ZINDEX.toString(),_.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?_.setAttribute("aria-live","off"):_.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?_.setAttribute("aria-relevant","additions"):_.setAttribute("aria-relevant","text"),_.addEventListener("click",this._onClick.bind(this)),_.addEventListener("focus",this._onFocus.bind(this)),_.addEventListener("focusout",this._onFocusOut.bind(this))),_.style.pointerEvents=A.accessiblePointerEvents,_.type=A.accessibleType,A.accessibleTitle&&A.accessibleTitle!==null?_.title=A.accessibleTitle:(!A.accessibleHint||A.accessibleHint===null)&&(_.title=`container ${A.tabIndex}`),A.accessibleHint&&A.accessibleHint!==null&&_.setAttribute("aria-label",A.accessibleHint),this.debug&&this._updateDebugHTML(_),A._accessibleActive=!0,A._accessibleDiv=_,_.container=A,this._children.push(A),this._div.appendChild(A._accessibleDiv),A.interactive&&(A._accessibleDiv.tabIndex=A.tabIndex)}_dispatchEvent(A,_){const{container:I}=A.target,B=this._renderer.events.rootBoundary,T=Object.assign(new FederatedEvent(B),{target:I});B.rootTarget=this._renderer.lastObjectRendered,_.forEach(R=>B.dispatchEvent(T,R))}_onClick(A){this._dispatchEvent(A,["click","pointertap","tap"])}_onFocus(A){A.target.getAttribute("aria-live")||A.target.setAttribute("aria-live","assertive"),this._dispatchEvent(A,["mouseover"])}_onFocusOut(A){A.target.getAttribute("aria-live")||A.target.setAttribute("aria-live","polite"),this._dispatchEvent(A,["mouseout"])}_onKeyDown(A){A.keyCode!==KEY_CODE_TAB||!this._activateOnTab||this._activate()}_onMouseMove(A){A.movementX===0&&A.movementY===0||this._deactivate()}destroy(){this._deactivate(),this._destroyTouchHook(),this._canvasObserver?.destroy(),this._canvasObserver=null,this._div=null,this._pool=null,this._children=null,this._renderer=null,this._activateOnTab&&globalThis.removeEventListener("keydown",this._onKeyDown)}setAccessibilityEnabled(A){A?this._activate():this._deactivate()}};_AccessibilitySystem.extension={type:[ExtensionType.WebGLSystem,ExtensionType.WebGPUSystem],name:"accessibility"};_AccessibilitySystem.defaultOptions={enabledByDefault:!1,debug:!1,activateOnTab:!0,deactivateOnMouseMove:!0};let AccessibilitySystem=_AccessibilitySystem;const accessibilityTarget={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,accessibleType:"button",accessibleText:null,accessiblePointerEvents:"auto",accessibleChildren:!0,_accessibleActive:!1,_accessibleDiv:null,_renderId:-1},idCounts=Object.create(null),idHash=Object.create(null);function createIdFromString(E,A){let _=idHash[E];return _===void 0&&(idCounts[A]===void 0&&(idCounts[A]=1),idHash[E]=_=idCounts[A]++),_}let context;function getTestContext(){return(!context||context?.isContextLost())&&(context=DOMAdapter.get().createCanvas().getContext("webgl",{})),context}let maxFragmentPrecision;function getMaxFragmentPrecision(){if(!maxFragmentPrecision){maxFragmentPrecision="mediump";const E=getTestContext();E&&E.getShaderPrecisionFormat&&(maxFragmentPrecision=E.getShaderPrecisionFormat(E.FRAGMENT_SHADER,E.HIGH_FLOAT).precision?"highp":"mediump")}return maxFragmentPrecision}function addProgramDefines(E,A,_){return A?E:_?(E=E.replace("out vec4 finalColor;",""),`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${E}
        `):`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${E}
        `}function ensurePrecision(E,A,_){const I=_?A.maxSupportedFragmentPrecision:A.maxSupportedVertexPrecision;if(E.substring(0,9)!=="precision"){let B=_?A.requestedFragmentPrecision:A.requestedVertexPrecision;return B==="highp"&&I!=="highp"&&(B="mediump"),`precision ${B} float;
${E}`}else if(I!=="highp"&&E.substring(0,15)==="precision highp")return E.replace("precision highp","precision mediump");return E}function insertVersion(E,A){return A?`#version 300 es
${E}`:E}const fragmentNameCache={},VertexNameCache={};function setProgramName(E,{name:A="pixi-program"},_=!0){A=A.replace(/\s+/g,"-"),A+=_?"-fragment":"-vertex";const I=_?fragmentNameCache:VertexNameCache;return I[A]?(I[A]++,A+=`-${I[A]}`):I[A]=1,E.indexOf("#define SHADER_NAME")!==-1?E:`${`#define SHADER_NAME ${A}`}
${E}`}function stripVersion(E,A){return A?E.replace("#version 300 es",""):E}const processes={stripVersion,ensurePrecision,addProgramDefines,setProgramName,insertVersion},programCache$1=Object.create(null),_GlProgram=class ki{constructor(A){A={...ki.defaultOptions,...A};const _=A.fragment.indexOf("#version 300 es")!==-1,I={stripVersion:_,ensurePrecision:{requestedFragmentPrecision:A.preferredFragmentPrecision,requestedVertexPrecision:A.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:getMaxFragmentPrecision()},setProgramName:{name:A.name},addProgramDefines:_,insertVersion:_};let B=A.fragment,T=A.vertex;Object.keys(processes).forEach(R=>{const P=I[R];B=processes[R](B,P,!0),T=processes[R](T,P,!1)}),this.fragment=B,this.vertex=T,this.transformFeedbackVaryings=A.transformFeedbackVaryings,this._key=createIdFromString(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null}static from(A){const _=`${A.vertex}:${A.fragment}`;return programCache$1[_]||(programCache$1[_]=new ki(A)),programCache$1[_]}};_GlProgram.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let GlProgram=_GlProgram;const attributeFormatData={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function getAttributeInfoFromFormat(E){return attributeFormatData[E]??attributeFormatData.float32}const WGSL_TO_VERTEX_TYPES={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function extractAttributesFromGpuProgram({source:E,entryPoint:A}){const _={},I=E.indexOf(`fn ${A}`);if(I!==-1){const B=E.indexOf("->",I);if(B!==-1){const T=E.substring(I,B),R=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let P;for(;(P=R.exec(T))!==null;){const D=WGSL_TO_VERTEX_TYPES[P[3]]??"float32";_[P[2]]={location:parseInt(P[1],10),format:D,stride:getAttributeInfoFromFormat(D).stride,offset:0,instance:!1,start:0}}}}return _}function extractStructAndGroups(E){const A=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,_=/@group\((\d+)\)/,I=/@binding\((\d+)\)/,B=/var(<[^>]+>)? (\w+)/,T=/:\s*(\w+)/,R=/struct\s+(\w+)\s*{([^}]+)}/g,P=/(\w+)\s*:\s*([\w\<\>]+)/g,D=/struct\s+(\w+)/,F=E.match(A)?.map(U=>({group:parseInt(U.match(_)[1],10),binding:parseInt(U.match(I)[1],10),name:U.match(B)[2],isUniform:U.match(B)[1]==="<uniform>",type:U.match(T)[1]}));if(!F)return{groups:[],structs:[]};const L=E.match(R)?.map(U=>{const V=U.match(D)[1],K=U.match(P).reduce((J,ee)=>{const[ie,ne]=ee.split(":");return J[ie.trim()]=ne.trim(),J},{});return K?{name:V,members:K}:null}).filter(({name:U})=>F.some(V=>V.type===U))??[];return{groups:F,structs:L}}var ShaderStage=(E=>(E[E.VERTEX=1]="VERTEX",E[E.FRAGMENT=2]="FRAGMENT",E[E.COMPUTE=4]="COMPUTE",E))(ShaderStage||{});function generateGpuLayoutGroups({groups:E}){const A=[];for(let _=0;_<E.length;_++){const I=E[_];A[I.group]||(A[I.group]=[]),I.isUniform?A[I.group].push({binding:I.binding,visibility:ShaderStage.VERTEX|ShaderStage.FRAGMENT,buffer:{type:"uniform"}}):I.type==="sampler"?A[I.group].push({binding:I.binding,visibility:ShaderStage.FRAGMENT,sampler:{type:"filtering"}}):I.type==="texture_2d"&&A[I.group].push({binding:I.binding,visibility:ShaderStage.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return A}function generateLayoutHash({groups:E}){const A=[];for(let _=0;_<E.length;_++){const I=E[_];A[I.group]||(A[I.group]={}),A[I.group][I.name]=I.binding}return A}function removeStructAndGroupDuplicates(E,A){const _=new Set,I=new Set,B=[...E.structs,...A.structs].filter(R=>_.has(R.name)?!1:(_.add(R.name),!0)),T=[...E.groups,...A.groups].filter(R=>{const P=`${R.name}-${R.binding}`;return I.has(P)?!1:(I.add(P),!0)});return{structs:B,groups:T}}const programCache=Object.create(null);class GpuProgram{constructor(A){this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:_,vertex:I,layout:B,gpuLayout:T,name:R}=A;if(this.name=R,this.fragment=_,this.vertex=I,_.source===I.source){const P=extractStructAndGroups(_.source);this.structsAndGroups=P}else{const P=extractStructAndGroups(I.source),D=extractStructAndGroups(_.source);this.structsAndGroups=removeStructAndGroupDuplicates(P,D)}this.layout=B??generateLayoutHash(this.structsAndGroups),this.gpuLayout=T??generateGpuLayoutGroups(this.structsAndGroups),this.autoAssignGlobalUniforms=this.layout[0]?.globalUniforms!==void 0,this.autoAssignLocalUniforms=this.layout[1]?.localUniforms!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:A,fragment:_}=this,I=A.source+_.source+A.entryPoint+_.entryPoint;this._layoutKey=createIdFromString(I,"program")}get attributeData(){return this._attributeData??(this._attributeData=extractAttributesFromGpuProgram(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null}static from(A){const _=`${A.vertex.source}:${A.fragment.source}:${A.fragment.entryPoint}:${A.vertex.entryPoint}`;return programCache[_]||(programCache[_]=new GpuProgram(A)),programCache[_]}}const UNIFORM_TYPES_VALUES=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],UNIFORM_TYPES_MAP=UNIFORM_TYPES_VALUES.reduce((E,A)=>(E[A]=!0,E),{});function getDefaultUniformValue(E,A){switch(E){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*A);case"vec3<f32>":return new Float32Array(3*A);case"vec4<f32>":return new Float32Array(4*A);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const _UniformGroup=class rn{constructor(A,_){this._touched=0,this.uid=uid$1("uniform"),this._resourceType="uniformGroup",this._resourceId=uid$1("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,_={...rn.defaultOptions,..._},this.uniformStructures=A;const I={};for(const B in A){const T=A[B];if(T.name=B,T.size=T.size??1,!UNIFORM_TYPES_MAP[T.type])throw new Error(`Uniform type ${T.type} is not supported. Supported uniform types are: ${UNIFORM_TYPES_VALUES.join(", ")}`);T.value??(T.value=getDefaultUniformValue(T.type,T.size)),I[B]=T.value}this.uniforms=I,this._dirtyId=1,this.ubo=_.ubo,this.isStatic=_.isStatic,this._signature=createIdFromString(Object.keys(I).map(B=>`${B}-${A[B].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};_UniformGroup.defaultOptions={ubo:!1,isStatic:!1};let UniformGroup=_UniformGroup;class BindGroup{constructor(A){this.resources=Object.create(null),this._dirty=!0;let _=0;for(const I in A){const B=A[I];this.setResource(B,_++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const A=[];let _=0;for(const I in this.resources)A[_++]=this.resources[I]._resourceId;this._key=A.join("|")}setResource(A,_){const I=this.resources[_];A!==I&&(I&&A.off?.("change",this.onResourceChange,this),A.on?.("change",this.onResourceChange,this),this.resources[_]=A,this._dirty=!0)}getResource(A){return this.resources[A]}_touch(A){const _=this.resources;for(const I in _)_[I]._touched=A}destroy(){const A=this.resources;for(const _ in A)A[_].off?.("change",this.onResourceChange,this);this.resources=null}onResourceChange(A){if(this._dirty=!0,A.destroyed){const _=this.resources;for(const I in _)_[I]===A&&(_[I]=null)}else this._updateKey()}}var RendererType=(E=>(E[E.WEBGL=1]="WEBGL",E[E.WEBGPU=2]="WEBGPU",E[E.BOTH=3]="BOTH",E))(RendererType||{});class Shader extends EventEmitter{constructor(A){super(),this.uid=uid$1("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[];let{gpuProgram:_,glProgram:I,groups:B,resources:T,compatibleRenderers:R,groupMap:P}=A;this.gpuProgram=_,this.glProgram=I,R===void 0&&(R=0,_&&(R|=RendererType.WEBGPU),I&&(R|=RendererType.WEBGL)),this.compatibleRenderers=R;const D={};if(!T&&!B&&(T={}),T&&B)throw new Error("[Shader] Cannot have both resources and groups");if(!_&&B&&!P)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!_&&B&&P)for(const F in P)for(const L in P[F]){const U=P[F][L];D[U]={group:F,binding:L,name:U}}else if(_&&B&&!P){const F=_.structsAndGroups.groups;P={},F.forEach(L=>{P[L.group]=P[L.group]||{},P[L.group][L.binding]=L.name,D[L.name]=L})}else if(T){B={},P={},_&&_.structsAndGroups.groups.forEach(U=>{P[U.group]=P[U.group]||{},P[U.group][U.binding]=U.name,D[U.name]=U});let F=0;for(const L in T)D[L]||(B[99]||(B[99]=new BindGroup,this._ownedBindGroups.push(B[99])),D[L]={group:99,binding:F,name:L},P[99]=P[99]||{},P[99][F]=L,F++);for(const L in T){const U=L;let V=T[L];!V.source&&!V._resourceType&&(V=new UniformGroup(V));const K=D[U];K&&(B[K.group]||(B[K.group]=new BindGroup,this._ownedBindGroups.push(B[K.group])),B[K.group].setResource(V,K.binding))}}this.groups=B,this._uniformBindMap=P,this.resources=this._buildResourceAccessor(B,D)}addResource(A,_,I){var B,T;(B=this._uniformBindMap)[_]||(B[_]={}),(T=this._uniformBindMap[_])[I]||(T[I]=A),this.groups[_]||(this.groups[_]=new BindGroup,this._ownedBindGroups.push(this.groups[_]))}_buildResourceAccessor(A,_){const I={};for(const B in _){const T=_[B];Object.defineProperty(I,T.name,{get(){return A[T.group].getResource(T.binding)},set(R){A[T.group].setResource(R,T.binding)}})}return I}destroy(A=!1){this.emit("destroy",this),A&&(this.gpuProgram?.destroy(),this.glProgram?.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(_=>{_.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null}static from(A){const{gpu:_,gl:I,...B}=A;let T,R;return _&&(T=GpuProgram.from(_)),I&&(R=GlProgram.from(I)),new Shader({gpuProgram:T,glProgram:R,...B})}}const blendModeIds={normal:0,add:1,multiply:2,screen:3,overlay:4,erase:5,"normal-npm":6,"add-npm":7,"screen-npm":8,min:9,max:10},BLEND$1=0,OFFSET$1=1,CULLING$1=2,DEPTH_TEST$1=3,WINDING$1=4,DEPTH_MASK$1=5,_State=class nn{constructor(){this.data=0,this.blendMode="normal",this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<BLEND$1)}set blend(A){!!(this.data&1<<BLEND$1)!==A&&(this.data^=1<<BLEND$1)}get offsets(){return!!(this.data&1<<OFFSET$1)}set offsets(A){!!(this.data&1<<OFFSET$1)!==A&&(this.data^=1<<OFFSET$1)}set cullMode(A){if(A==="none"){this.culling=!1;return}this.culling=!0,this.clockwiseFrontFace=A==="front"}get cullMode(){return this.culling?this.clockwiseFrontFace?"front":"back":"none"}get culling(){return!!(this.data&1<<CULLING$1)}set culling(A){!!(this.data&1<<CULLING$1)!==A&&(this.data^=1<<CULLING$1)}get depthTest(){return!!(this.data&1<<DEPTH_TEST$1)}set depthTest(A){!!(this.data&1<<DEPTH_TEST$1)!==A&&(this.data^=1<<DEPTH_TEST$1)}get depthMask(){return!!(this.data&1<<DEPTH_MASK$1)}set depthMask(A){!!(this.data&1<<DEPTH_MASK$1)!==A&&(this.data^=1<<DEPTH_MASK$1)}get clockwiseFrontFace(){return!!(this.data&1<<WINDING$1)}set clockwiseFrontFace(A){!!(this.data&1<<WINDING$1)!==A&&(this.data^=1<<WINDING$1)}get blendMode(){return this._blendMode}set blendMode(A){this.blend=A!=="none",this._blendMode=A,this._blendModeId=blendModeIds[A]||0}get polygonOffset(){return this._polygonOffset}set polygonOffset(A){this.offsets=!!A,this._polygonOffset=A}toString(){return`[pixi.js/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const A=new nn;return A.depthTest=!1,A.blend=!0,A}};_State.default2d=_State.for2d();let State$1=_State;const _Filter=class Mi extends Shader{constructor(A){A={...Mi.defaultOptions,...A},super(A),this.enabled=!0,this._state=State$1.for2d(),this.blendMode=A.blendMode,this.padding=A.padding,typeof A.antialias=="boolean"?this.antialias=A.antialias?"on":"off":this.antialias=A.antialias,this.resolution=A.resolution,this.blendRequired=A.blendRequired,this.clipToViewport=A.clipToViewport,this.addResource("uTexture",0,1)}apply(A,_,I,B){A.applyFilter(this,_,I,B)}get blendMode(){return this._state.blendMode}set blendMode(A){this._state.blendMode=A}static from(A){const{gpu:_,gl:I,...B}=A;let T,R;return _&&(T=GpuProgram.from(_)),I&&(R=GlProgram.from(I)),new Mi({gpuProgram:T,glProgram:R,...B})}};_Filter.defaultOptions={blendMode:"normal",resolution:1,padding:0,antialias:"off",blendRequired:!1,clipToViewport:!0};let Filter=_Filter;var blendTemplateFrag=`
in vec2 vTextureCoord;
in vec4 vColor;

out vec4 finalColor;

uniform float uBlend;

uniform sampler2D uTexture;
uniform sampler2D uBackTexture;

{FUNCTIONS}

void main()
{ 
    vec4 back = texture(uBackTexture, vTextureCoord);
    vec4 front = texture(uTexture, vTextureCoord);
    float blendedAlpha = front.a + back.a * (1.0 - front.a);
    
    {MAIN}
}
`,blendTemplateVert=`in vec2 aPosition;
out vec2 vTextureCoord;
out vec2 backgroundUv;

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,blendTemplate=`
struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct BlendUniforms {
  uBlend:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;
@group(0) @binding(3) var uBackTexture: texture_2d<f32>;

@group(1) @binding(0) var<uniform> blendUniforms : BlendUniforms;


struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}

{FUNCTIONS}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>
) -> @location(0) vec4<f32> {


   var back =  textureSample(uBackTexture, uSampler, uv);
   var front = textureSample(uTexture, uSampler, uv);
   var blendedAlpha = front.a + back.a * (1.0 - front.a);
   
   var out = vec4<f32>(0.0,0.0,0.0,0.0);

   {MAIN}

   return out;
}`;class BlendModeFilter extends Filter{constructor(A){const _=A.gpu,I=compileBlendModeShader({source:blendTemplate,..._}),B=GpuProgram.from({vertex:{source:I,entryPoint:"mainVertex"},fragment:{source:I,entryPoint:"mainFragment"}}),T=A.gl,R=compileBlendModeShader({source:blendTemplateFrag,...T}),P=GlProgram.from({vertex:blendTemplateVert,fragment:R}),D=new UniformGroup({uBlend:{value:1,type:"f32"}});super({gpuProgram:B,glProgram:P,blendRequired:!0,resources:{blendUniforms:D,uBackTexture:Texture.EMPTY}})}}function compileBlendModeShader(E){const{source:A,functions:_,main:I}=E;return A.replace("{FUNCTIONS}",_).replace("{MAIN}",I)}const hslgl=`
	float getLuminosity(vec3 c) {
		return 0.3 * c.r + 0.59 * c.g + 0.11 * c.b;
	}

	vec3 setLuminosity(vec3 c, float lum) {
		float modLum = lum - getLuminosity(c);
		vec3 color = c.rgb + vec3(modLum);

		// clip back into legal range
		modLum = getLuminosity(color);
		vec3 modLumVec = vec3(modLum);

		float cMin = min(color.r, min(color.g, color.b));
		float cMax = max(color.r, max(color.g, color.b));

		if(cMin < 0.0) {
			color = mix(modLumVec, color, modLum / (modLum - cMin));
		}

		if(cMax > 1.0) {
			color = mix(modLumVec, color, (1.0 - modLum) / (cMax - modLum));
		}

		return color;
	}

	float getSaturation(vec3 c) {
		return max(c.r, max(c.g, c.b)) - min(c.r, min(c.g, c.b));
	}

	vec3 setSaturationMinMidMax(vec3 cSorted, float s) {
		vec3 colorSorted = cSorted;

		if(colorSorted.z > colorSorted.x) {
			colorSorted.y = (((colorSorted.y - colorSorted.x) * s) / (colorSorted.z - colorSorted.x));
			colorSorted.z = s;
		}
		else {
			colorSorted.y = 0.0;
			colorSorted.z = 0.0;
		}

		colorSorted.x = 0.0;

		return colorSorted;
	}

	vec3 setSaturation(vec3 c, float s) {
		vec3 color = c;

		if(color.r <= color.g && color.r <= color.b) {
			if(color.g <= color.b) {
				color = setSaturationMinMidMax(color.rgb, s).rgb;
			}
			else {
				color = setSaturationMinMidMax(color.rbg, s).rbg;
			}
		}
		else if(color.g <= color.r && color.g <= color.b) {
			if(color.r <= color.b) {
				color = setSaturationMinMidMax(color.grb, s).grb;
			}
			else {
				color = setSaturationMinMidMax(color.gbr, s).gbr;
			}
		}
		else {
			// Using bgr for both fixes part of hue
			if(color.r <= color.g) {
				color = setSaturationMinMidMax(color.brg, s).brg;
			}
			else {
				color = setSaturationMinMidMax(color.bgr, s).bgr;
			}
		}

		return color;
	}
    `,hslgpu=`
	fn getLuminosity(c: vec3<f32>) -> f32
	{
		return 0.3*c.r + 0.59*c.g + 0.11*c.b;
	}

	fn setLuminosity(c: vec3<f32>, lum: f32) -> vec3<f32>
	{
		var modLum: f32 = lum - getLuminosity(c);
		var color: vec3<f32> = c.rgb + modLum;

		// clip back into legal range
		modLum = getLuminosity(color);
		let modLumVec = vec3<f32>(modLum);

		let cMin: f32 = min(color.r, min(color.g, color.b));
		let cMax: f32 = max(color.r, max(color.g, color.b));

		if(cMin < 0.0)
		{
			color = mix(modLumVec, color, modLum / (modLum - cMin));
		}

		if(cMax > 1.0)
		{
			color = mix(modLumVec, color, (1 - modLum) / (cMax - modLum));
		}

		return color;
	}

	fn getSaturation(c: vec3<f32>) -> f32
	{
		return max(c.r, max(c.g, c.b)) - min(c.r, min(c.g, c.b));
	}

	fn setSaturationMinMidMax(cSorted: vec3<f32>, s: f32) -> vec3<f32>
	{
		var colorSorted = cSorted;

		if(colorSorted.z > colorSorted.x)
		{
			colorSorted.y = (((colorSorted.y - colorSorted.x) * s) / (colorSorted.z - colorSorted.x));
			colorSorted.z = s;
		}
		else
		{
			colorSorted.y = 0;
			colorSorted.z = 0;
		}

		colorSorted.x = 0;

		return colorSorted;
	}

	fn setSaturation(c: vec3<f32>, s: f32) -> vec3<f32>
	{
		var color = c;

		if (color.r <= color.g && color.r <= color.b)
		{
			if (color.g <= color.b)
			{
				color = vec3<f32>(setSaturationMinMidMax(color.rgb, s)).rgb;
			}
			else
			{
				color = vec3<f32>(setSaturationMinMidMax(color.rbg, s)).rbg;
			}
		}
		else if (color.g <= color.r && color.g <= color.b)
		{
			if (color.r <= color.b)
			{
				color = vec3<f32>(setSaturationMinMidMax(color.grb, s)).grb;
			}
			else
			{
				color = vec3<f32>(setSaturationMinMidMax(color.gbr, s)).gbr;
			}
		}
		else
		{
			// Using bgr for both fixes part of hue
			if (color.r <= color.g)
			{
				color = vec3<f32>(setSaturationMinMidMax(color.brg, s)).brg;
			}
			else
			{
				color  = vec3<f32>(setSaturationMinMidMax(color.bgr, s)).bgr;
			}
		}

		return color;
	}
	`;class ColorBlend extends BlendModeFilter{constructor(){super({gl:{functions:`
                ${hslgl}

                vec3 blendColor(vec3 base, vec3 blend,  float opacity)
                {
                    return (setLuminosity(blend, getLuminosity(base)) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendColor(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                ${hslgpu}

                fn blendColorOpacity(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (setLuminosity(blend, getLuminosity(base)) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendColorOpacity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}ColorBlend.extension={name:"color",type:ExtensionType.BlendMode};class ColorBurnBlend extends BlendModeFilter{constructor(){super({gl:{functions:`
                float colorBurn(float base, float blend)
                {
                    return max((1.0 - ((1.0 - base) / blend)), 0.0);
                }

                vec3 blendColorBurn(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        colorBurn(base.r, blend.r),
                        colorBurn(base.g, blend.g),
                        colorBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendColorBurn(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn colorBurn(base:f32, blend:f32) -> f32
                {
                    return max((1.0-((1.0-base)/blend)),0.0);
                }

                fn blendColorBurn(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        colorBurn(base.r, blend.r),
                        colorBurn(base.g, blend.g),
                        colorBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendColorBurn(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}ColorBurnBlend.extension={name:"color-burn",type:ExtensionType.BlendMode};class ColorDodgeBlend extends BlendModeFilter{constructor(){super({gl:{functions:`
                float colorDodge(float base, float blend)
                {
                    return base / (1.0 - blend);
                }

                vec3 blendColorDodge(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        colorDodge(base.r, blend.r),
                        colorDodge(base.g, blend.g),
                        colorDodge(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendColorDodge(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn colorDodge(base: f32, blend: f32) -> f32
                {
                    return base / (1.0 - blend);
                }

                fn blendColorDodge(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        colorDodge(base.r, blend.r),
                        colorDodge(base.g, blend.g),
                        colorDodge(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                    out = vec4<f32>(blendColorDodge(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}ColorDodgeBlend.extension={name:"color-dodge",type:ExtensionType.BlendMode};class DarkenBlend extends BlendModeFilter{constructor(){super({gl:{functions:`
                vec3 blendDarken(vec3 base, vec3 blend, float opacity)
                {
                    return (min(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendDarken(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn blendDarken(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (min(blend,base) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendDarken(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}DarkenBlend.extension={name:"darken",type:ExtensionType.BlendMode};class DifferenceBlend extends BlendModeFilter{constructor(){super({gl:{functions:`
                vec3 blendDifference(vec3 base, vec3 blend,  float opacity)
                {
                    return (abs(blend - base) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendDifference(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn blendDifference(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (abs(blend - base) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendDifference(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}DifferenceBlend.extension={name:"difference",type:ExtensionType.BlendMode};class DivideBlend extends BlendModeFilter{constructor(){super({gl:{functions:`
                float divide(float base, float blend)
                {
                    return (blend > 0.0) ? clamp(base / blend, 0.0, 1.0) : 1.0;
                }

                vec3 blendDivide(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        divide(base.r, blend.r),
                        divide(base.g, blend.g),
                        divide(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendDivide(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn divide(base: f32, blend: f32) -> f32
                {
                    return select(1.0, clamp(base / blend, 0.0, 1.0), blend > 0.0);
                }

                fn blendDivide(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        divide(base.r, blend.r),
                        divide(base.g, blend.g),
                        divide(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendDivide(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}DivideBlend.extension={name:"divide",type:ExtensionType.BlendMode};class ExclusionBlend extends BlendModeFilter{constructor(){super({gl:{functions:`
                vec3 exclusion(vec3 base, vec3 blend)
                {
                    return base + blend - 2.0 * base * blend;
                }

                vec3 blendExclusion(vec3 base, vec3 blend, float opacity)
                {
                    return (exclusion(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendExclusion(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn exclusion(base: vec3<f32>, blend: vec3<f32>) -> vec3<f32>
                {
                    return base+blend-2.0*base*blend;
                }

                fn blendExclusion(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    return (exclusion(base, blend) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendExclusion(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}ExclusionBlend.extension={name:"exclusion",type:ExtensionType.BlendMode};class HardLightBlend extends BlendModeFilter{constructor(){super({gl:{functions:`
                float hardLight(float base, float blend)
                {
                    return (blend < 0.5) ? 2.0 * base * blend : 1.0 - 2.0 * (1.0 - base) * (1.0 - blend);
                }

                vec3 blendHardLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        hardLight(base.r, blend.r),
                        hardLight(base.g, blend.g),
                        hardLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendHardLight(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn hardLight(base: f32, blend: f32) -> f32
                {
                    return select(1.0 - 2.0 * (1.0 - base) * (1.0 - blend), 2.0 * base * blend, blend < 0.5);
                }

                fn blendHardLight(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        hardLight(base.r, blend.r),
                        hardLight(base.g, blend.g),
                        hardLight(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendHardLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}HardLightBlend.extension={name:"hard-light",type:ExtensionType.BlendMode};class HardMixBlend extends BlendModeFilter{constructor(){super({gl:{functions:`
                float hardMix(float base, float blend)
                {
                    return (base + blend >= 1.0) ? 1.0 : 0.0;
                }

                vec3 blendHardMix(vec3 base, vec3 blend,  float opacity)
                {
                    vec3 blended = vec3(
                        hardMix(base.r, blend.r),
                        hardMix(base.g, blend.g),
                        hardMix(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendHardMix(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn hardMix(base: f32, blend: f32) -> f32
                {
                    return select(0.0, 1.0, base + blend >= 1.0);
                }

                fn blendHardMix(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended: vec3<f32> = vec3<f32>(
                        hardMix(base.r, blend.r),
                        hardMix(base.g, blend.g),
                        hardMix(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendHardMix(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}HardMixBlend.extension={name:"hard-mix",type:ExtensionType.BlendMode};class LightenBlend extends BlendModeFilter{constructor(){super({gl:{functions:`
                vec3 blendLighten(vec3 base, vec3 blend, float opacity)
                {
                    return (max(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLighten(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn blendLighten(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (max(base, blend) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLighten(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}LightenBlend.extension={name:"lighten",type:ExtensionType.BlendMode};class LinearBurnBlend extends BlendModeFilter{constructor(){super({gl:{functions:`
                float linearBurn(float base, float blend)
                {
                    return max(0.0, base + blend - 1.0);
                }

                vec3 blendLinearBurn(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        linearBurn(base.r, blend.r),
                        linearBurn(base.g, blend.g),
                        linearBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLinearBurn(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn linearBurn(base: f32, blend: f32) -> f32
                {
                    return max(0.0, base + blend - 1.0);
                }

                fn blendLinearBurn(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        linearBurn(base.r, blend.r),
                        linearBurn(base.g, blend.g),
                        linearBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendLinearBurn(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}LinearBurnBlend.extension={name:"linear-burn",type:ExtensionType.BlendMode};class LinearDodgeBlend extends BlendModeFilter{constructor(){super({gl:{functions:`
                float linearDodge(float base, float blend) {
                    return min(1.0, base + blend);
                }

                vec3 blendLinearDodge(vec3 base, vec3 blend, float opacity) {
                    vec3 blended = vec3(
                        linearDodge(base.r, blend.r),
                        linearDodge(base.g, blend.g),
                        linearDodge(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLinearDodge(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn linearDodge(base: f32, blend: f32) -> f32
                {
                    return min(1, base + blend);
                }

                fn blendLinearDodge(base:vec3<f32>, blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        linearDodge(base.r, blend.r),
                        linearDodge(base.g, blend.g),
                        linearDodge(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLinearDodge(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}LinearDodgeBlend.extension={name:"linear-dodge",type:ExtensionType.BlendMode};class LinearLightBlend extends BlendModeFilter{constructor(){super({gl:{functions:`
                float linearBurn(float base, float blend) {
                    return max(0.0, base + blend - 1.0);
                }

                float linearDodge(float base, float blend) {
                    return min(1.0, base + blend);
                }

                float linearLight(float base, float blend) {
                    return (blend <= 0.5) ? linearBurn(base,2.0*blend) : linearBurn(base,2.0*(blend-0.5));
                }

                vec3 blendLinearLight(vec3 base, vec3 blend, float opacity) {
                    vec3 blended = vec3(
                        linearLight(base.r, blend.r),
                        linearLight(base.g, blend.g),
                        linearLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendLinearLight(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn linearBurn(base: f32, blend: f32) -> f32
                {
                    return max(0.0, base + blend - 1.0);
                }

                fn linearDodge(base: f32, blend: f32) -> f32
                {
                    return min(1.0, base + blend);
                }

                fn linearLight(base: f32, blend: f32) -> f32
                {
                    return select(linearBurn(base,2.0*(blend-0.5)), linearBurn(base,2.0*blend), blend <= 0.5);
                }

                fn blendLinearLightOpacity(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        linearLight(base.r, blend.r),
                        linearLight(base.g, blend.g),
                        linearLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLinearLightOpacity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}LinearLightBlend.extension={name:"linear-light",type:ExtensionType.BlendMode};class LuminosityBlend extends BlendModeFilter{constructor(){super({gl:{functions:`
                ${hslgl}

                vec3 blendLuminosity(vec3 base, vec3 blend,  float opacity)
                {
                    vec3 blendLuminosity = setLuminosity(base, getLuminosity(blend));
                    return (blendLuminosity * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLuminosity(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                ${hslgpu}

                fn blendLuminosity(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blendLuminosity: vec3<f32> = setLuminosity(base, getLuminosity(blend));
                    return (blendLuminosity * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLuminosity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}LuminosityBlend.extension={name:"luminosity",type:ExtensionType.BlendMode};class NegationBlend extends BlendModeFilter{constructor(){super({gl:{functions:`
                vec3 negation(vec3 base, vec3 blend)
                {
                    return 1.0-abs(1.0-base-blend);
                }

                vec3 blendNegation(vec3 base, vec3 blend, float opacity)
                {
                    return (negation(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendNegation(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn blendNegation(base: vec3<f32>, blend: vec3<f32>) -> vec3<f32>
                {
                    return 1.0-abs(1.0-base-blend);
                }

                fn blendNegationOpacity(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    return (blendNegation(base, blend) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendNegationOpacity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}NegationBlend.extension={name:"negation",type:ExtensionType.BlendMode};class OverlayBlend extends BlendModeFilter{constructor(){super({gl:{functions:`
                float overlay(float base, float blend)
                {
                    return (base < 0.5) ? (2.0*base*blend) : (1.0-2.0*(1.0-base)*(1.0-blend));
                }

                vec3 blendOverlay(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        overlay(base.r, blend.r),
                        overlay(base.g, blend.g),
                        overlay(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendOverlay(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn overlay(base: f32, blend: f32) -> f32
                {
                    return select((1.0-2.0*(1.0-base)*(1.0-blend)), (2.0*base*blend), base < 0.5);
                }

                fn blendOverlay(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        overlay(base.r, blend.r),
                        overlay(base.g, blend.g),
                        overlay(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendOverlay(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}OverlayBlend.extension={name:"overlay",type:ExtensionType.BlendMode};class PinLightBlend extends BlendModeFilter{constructor(){super({gl:{functions:`
                float pinLight(float base, float blend)
                {
                    return (blend <= 0.5) ? min(base, 2.0 * blend) : max(base, 2.0 * (blend - 0.5));
                }

                vec3 blendPinLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        pinLight(base.r, blend.r),
                        pinLight(base.g, blend.g),
                        pinLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendPinLight(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn pinLight(base: f32, blend: f32) -> f32
                {
                    return select(max(base,2.0*(blend-0.5)), min(base,2.0*blend), blend <= 0.5);
                }

                fn blendPinLight(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        pinLight(base.r, blend.r),
                        pinLight(base.g, blend.g),
                        pinLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendPinLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}PinLightBlend.extension={name:"pin-light",type:ExtensionType.BlendMode};class SaturationBlend extends BlendModeFilter{constructor(){super({gl:{functions:`
                ${hslgl}

                vec3 blendSaturation(vec3 base, vec3 blend,  float opacity)
                {
                    vec3 blendSaturation = setLuminosity(setSaturation(base, getSaturation(blend)), getLuminosity(base));
                    return (blendSaturation * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendSaturation(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                ${hslgpu}

                fn blendSaturation(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blendSaturation = setLuminosity(setSaturation(base, getSaturation(blend)), getLuminosity(base));
                    return (blendSaturation * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendSaturation(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}SaturationBlend.extension={name:"saturation",type:ExtensionType.BlendMode};class SoftLightBlend extends BlendModeFilter{constructor(){super({gl:{functions:`
                float softLight(float base, float blend)
                {
                    return (blend < 0.5) ? (2.0 * base * blend + base * base * (1.0 - 2.0 * blend)) : (sqrt(base) * (2.0 * blend - 1.0) + 2.0 * base * (1.0 - blend));
                }

                vec3 blendSoftLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        softLight(base.r, blend.r),
                        softLight(base.g, blend.g),
                        softLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendSoftLight(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn softLight(base: f32, blend: f32) -> f32
                {
                    return select(2.0 * base * blend + base * base * (1.0 - 2.0 * blend), sqrt(base) * (2.0 * blend - 1.0) + 2.0 * base * (1.0 - blend), blend < 0.5);
                }

                fn blendSoftLight(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended: vec3<f32> = vec3<f32>(
                        softLight(base.r, blend.r),
                        softLight(base.g, blend.g),
                        softLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendSoftLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}SoftLightBlend.extension={name:"soft-light",type:ExtensionType.BlendMode};class SubtractBlend extends BlendModeFilter{constructor(){super({gl:{functions:`
                float subtract(float base, float blend)
                {
                    return max(0.0, base - blend);
                }

                vec3 blendSubtract(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        subtract(base.r, blend.r),
                        subtract(base.g, blend.g),
                        subtract(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendSubtract(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn subtract(base: f32, blend: f32) -> f32
                {
                    return max(0, base - blend);
                }

                fn blendSubtract(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        subtract(base.r, blend.r),
                        subtract(base.g, blend.g),
                        subtract(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendSubtract(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}SubtractBlend.extension={name:"subtract",type:ExtensionType.BlendMode};class VividLightBlend extends BlendModeFilter{constructor(){super({gl:{functions:`
                float colorBurn(float base, float blend)
                {
                    return max((1.0-((1.0-base)/blend)),0.0);
                }

                float colorDodge(float base, float blend)
                {
                    return min(1.0, base / (1.0-blend));
                }

                float vividLight(float base, float blend)
                {
                    return (blend < 0.5) ? colorBurn(base,(2.0*blend)) : colorDodge(base,(2.0*(blend-0.5)));
                }

                vec3 blendVividLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        vividLight(base.r, blend.r),
                        vividLight(base.g, blend.g),
                        vividLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendVividLight(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn colorBurn(base:f32, blend:f32) -> f32
                {
                    return max((1.0-((1.0-base)/blend)),0.0);
                }

                fn colorDodge(base: f32, blend: f32) -> f32
                {
                    return min(1.0, base / (1.0-blend));
                }

                fn vividLight(base: f32, blend: f32) -> f32
                {
                    return select(colorDodge(base,(2.0*(blend-0.5))), colorBurn(base,(2.0*blend)), blend<0.5);
                }

                fn blendVividLight(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended: vec3<f32> = vec3<f32>(
                        vividLight(base.r, blend.r),
                        vividLight(base.g, blend.g),
                        vividLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendVividLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}VividLightBlend.extension={name:"vivid-light",type:ExtensionType.BlendMode};const environments=[];extensions.handleByNamedList(ExtensionType.Environment,environments);async function loadEnvironmentExtensions(E){if(!E)for(let A=0;A<environments.length;A++){const _=environments[A];if(_.value.test()){await _.value.load();return}}}async function autoDetectEnvironment(E){return loadEnvironmentExtensions(!E)}let unsafeEval;function unsafeEvalSupported(){if(typeof unsafeEval=="boolean")return unsafeEval;try{unsafeEval=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{unsafeEval=!1}return unsafeEval}function earcut$1(E,A,_=2){const I=A&&A.length,B=I?A[0]*_:E.length;let T=linkedList(E,0,B,_,!0);const R=[];if(!T||T.next===T.prev)return R;let P,D,F;if(I&&(T=eliminateHoles(E,A,T,_)),E.length>80*_){P=E[0],D=E[1];let L=P,U=D;for(let V=_;V<B;V+=_){const K=E[V],J=E[V+1];K<P&&(P=K),J<D&&(D=J),K>L&&(L=K),J>U&&(U=J)}F=Math.max(L-P,U-D),F=F!==0?32767/F:0}return earcutLinked(T,R,_,P,D,F,0),R}function linkedList(E,A,_,I,B){let T;if(B===signedArea(E,A,_,I)>0)for(let R=A;R<_;R+=I)T=insertNode(R/I|0,E[R],E[R+1],T);else for(let R=_-I;R>=A;R-=I)T=insertNode(R/I|0,E[R],E[R+1],T);return T&&equals(T,T.next)&&(removeNode(T),T=T.next),T}function filterPoints(E,A){if(!E)return E;A||(A=E);let _=E,I;do if(I=!1,!_.steiner&&(equals(_,_.next)||area(_.prev,_,_.next)===0)){if(removeNode(_),_=A=_.prev,_===_.next)break;I=!0}else _=_.next;while(I||_!==A);return A}function earcutLinked(E,A,_,I,B,T,R){if(!E)return;!R&&T&&indexCurve(E,I,B,T);let P=E;for(;E.prev!==E.next;){const D=E.prev,F=E.next;if(T?isEarHashed(E,I,B,T):isEar(E)){A.push(D.i,E.i,F.i),removeNode(E),E=F.next,P=F.next;continue}if(E=F,E===P){R?R===1?(E=cureLocalIntersections(filterPoints(E),A),earcutLinked(E,A,_,I,B,T,2)):R===2&&splitEarcut(E,A,_,I,B,T):earcutLinked(filterPoints(E),A,_,I,B,T,1);break}}}function isEar(E){const A=E.prev,_=E,I=E.next;if(area(A,_,I)>=0)return!1;const B=A.x,T=_.x,R=I.x,P=A.y,D=_.y,F=I.y,L=Math.min(B,T,R),U=Math.min(P,D,F),V=Math.max(B,T,R),K=Math.max(P,D,F);let J=I.next;for(;J!==A;){if(J.x>=L&&J.x<=V&&J.y>=U&&J.y<=K&&pointInTriangleExceptFirst(B,P,T,D,R,F,J.x,J.y)&&area(J.prev,J,J.next)>=0)return!1;J=J.next}return!0}function isEarHashed(E,A,_,I){const B=E.prev,T=E,R=E.next;if(area(B,T,R)>=0)return!1;const P=B.x,D=T.x,F=R.x,L=B.y,U=T.y,V=R.y,K=Math.min(P,D,F),J=Math.min(L,U,V),ee=Math.max(P,D,F),ie=Math.max(L,U,V),ne=zOrder(K,J,A,_,I),ce=zOrder(ee,ie,A,_,I);let fe=E.prevZ,de=E.nextZ;for(;fe&&fe.z>=ne&&de&&de.z<=ce;){if(fe.x>=K&&fe.x<=ee&&fe.y>=J&&fe.y<=ie&&fe!==B&&fe!==R&&pointInTriangleExceptFirst(P,L,D,U,F,V,fe.x,fe.y)&&area(fe.prev,fe,fe.next)>=0||(fe=fe.prevZ,de.x>=K&&de.x<=ee&&de.y>=J&&de.y<=ie&&de!==B&&de!==R&&pointInTriangleExceptFirst(P,L,D,U,F,V,de.x,de.y)&&area(de.prev,de,de.next)>=0))return!1;de=de.nextZ}for(;fe&&fe.z>=ne;){if(fe.x>=K&&fe.x<=ee&&fe.y>=J&&fe.y<=ie&&fe!==B&&fe!==R&&pointInTriangleExceptFirst(P,L,D,U,F,V,fe.x,fe.y)&&area(fe.prev,fe,fe.next)>=0)return!1;fe=fe.prevZ}for(;de&&de.z<=ce;){if(de.x>=K&&de.x<=ee&&de.y>=J&&de.y<=ie&&de!==B&&de!==R&&pointInTriangleExceptFirst(P,L,D,U,F,V,de.x,de.y)&&area(de.prev,de,de.next)>=0)return!1;de=de.nextZ}return!0}function cureLocalIntersections(E,A){let _=E;do{const I=_.prev,B=_.next.next;!equals(I,B)&&intersects(I,_,_.next,B)&&locallyInside(I,B)&&locallyInside(B,I)&&(A.push(I.i,_.i,B.i),removeNode(_),removeNode(_.next),_=E=B),_=_.next}while(_!==E);return filterPoints(_)}function splitEarcut(E,A,_,I,B,T){let R=E;do{let P=R.next.next;for(;P!==R.prev;){if(R.i!==P.i&&isValidDiagonal(R,P)){let D=splitPolygon(R,P);R=filterPoints(R,R.next),D=filterPoints(D,D.next),earcutLinked(R,A,_,I,B,T,0),earcutLinked(D,A,_,I,B,T,0);return}P=P.next}R=R.next}while(R!==E)}function eliminateHoles(E,A,_,I){const B=[];for(let T=0,R=A.length;T<R;T++){const P=A[T]*I,D=T<R-1?A[T+1]*I:E.length,F=linkedList(E,P,D,I,!1);F===F.next&&(F.steiner=!0),B.push(getLeftmost(F))}B.sort(compareXYSlope);for(let T=0;T<B.length;T++)_=eliminateHole(B[T],_);return _}function compareXYSlope(E,A){let _=E.x-A.x;if(_===0&&(_=E.y-A.y,_===0)){const I=(E.next.y-E.y)/(E.next.x-E.x),B=(A.next.y-A.y)/(A.next.x-A.x);_=I-B}return _}function eliminateHole(E,A){const _=findHoleBridge(E,A);if(!_)return A;const I=splitPolygon(_,E);return filterPoints(I,I.next),filterPoints(_,_.next)}function findHoleBridge(E,A){let _=A;const I=E.x,B=E.y;let T=-1/0,R;if(equals(E,_))return _;do{if(equals(E,_.next))return _.next;if(B<=_.y&&B>=_.next.y&&_.next.y!==_.y){const U=_.x+(B-_.y)*(_.next.x-_.x)/(_.next.y-_.y);if(U<=I&&U>T&&(T=U,R=_.x<_.next.x?_:_.next,U===I))return R}_=_.next}while(_!==A);if(!R)return null;const P=R,D=R.x,F=R.y;let L=1/0;_=R;do{if(I>=_.x&&_.x>=D&&I!==_.x&&pointInTriangle$1(B<F?I:T,B,D,F,B<F?T:I,B,_.x,_.y)){const U=Math.abs(B-_.y)/(I-_.x);locallyInside(_,E)&&(U<L||U===L&&(_.x>R.x||_.x===R.x&&sectorContainsSector(R,_)))&&(R=_,L=U)}_=_.next}while(_!==P);return R}function sectorContainsSector(E,A){return area(E.prev,E,A.prev)<0&&area(A.next,E,E.next)<0}function indexCurve(E,A,_,I){let B=E;do B.z===0&&(B.z=zOrder(B.x,B.y,A,_,I)),B.prevZ=B.prev,B.nextZ=B.next,B=B.next;while(B!==E);B.prevZ.nextZ=null,B.prevZ=null,sortLinked(B)}function sortLinked(E){let A,_=1;do{let I=E,B;E=null;let T=null;for(A=0;I;){A++;let R=I,P=0;for(let F=0;F<_&&(P++,R=R.nextZ,!!R);F++);let D=_;for(;P>0||D>0&&R;)P!==0&&(D===0||!R||I.z<=R.z)?(B=I,I=I.nextZ,P--):(B=R,R=R.nextZ,D--),T?T.nextZ=B:E=B,B.prevZ=T,T=B;I=R}T.nextZ=null,_*=2}while(A>1);return E}function zOrder(E,A,_,I,B){return E=(E-_)*B|0,A=(A-I)*B|0,E=(E|E<<8)&16711935,E=(E|E<<4)&252645135,E=(E|E<<2)&858993459,E=(E|E<<1)&1431655765,A=(A|A<<8)&16711935,A=(A|A<<4)&252645135,A=(A|A<<2)&858993459,A=(A|A<<1)&1431655765,E|A<<1}function getLeftmost(E){let A=E,_=E;do(A.x<_.x||A.x===_.x&&A.y<_.y)&&(_=A),A=A.next;while(A!==E);return _}function pointInTriangle$1(E,A,_,I,B,T,R,P){return(B-R)*(A-P)>=(E-R)*(T-P)&&(E-R)*(I-P)>=(_-R)*(A-P)&&(_-R)*(T-P)>=(B-R)*(I-P)}function pointInTriangleExceptFirst(E,A,_,I,B,T,R,P){return!(E===R&&A===P)&&pointInTriangle$1(E,A,_,I,B,T,R,P)}function isValidDiagonal(E,A){return E.next.i!==A.i&&E.prev.i!==A.i&&!intersectsPolygon(E,A)&&(locallyInside(E,A)&&locallyInside(A,E)&&middleInside(E,A)&&(area(E.prev,E,A.prev)||area(E,A.prev,A))||equals(E,A)&&area(E.prev,E,E.next)>0&&area(A.prev,A,A.next)>0)}function area(E,A,_){return(A.y-E.y)*(_.x-A.x)-(A.x-E.x)*(_.y-A.y)}function equals(E,A){return E.x===A.x&&E.y===A.y}function intersects(E,A,_,I){const B=sign$2(area(E,A,_)),T=sign$2(area(E,A,I)),R=sign$2(area(_,I,E)),P=sign$2(area(_,I,A));return!!(B!==T&&R!==P||B===0&&onSegment(E,_,A)||T===0&&onSegment(E,I,A)||R===0&&onSegment(_,E,I)||P===0&&onSegment(_,A,I))}function onSegment(E,A,_){return A.x<=Math.max(E.x,_.x)&&A.x>=Math.min(E.x,_.x)&&A.y<=Math.max(E.y,_.y)&&A.y>=Math.min(E.y,_.y)}function sign$2(E){return E>0?1:E<0?-1:0}function intersectsPolygon(E,A){let _=E;do{if(_.i!==E.i&&_.next.i!==E.i&&_.i!==A.i&&_.next.i!==A.i&&intersects(_,_.next,E,A))return!0;_=_.next}while(_!==E);return!1}function locallyInside(E,A){return area(E.prev,E,E.next)<0?area(E,A,E.next)>=0&&area(E,E.prev,A)>=0:area(E,A,E.prev)<0||area(E,E.next,A)<0}function middleInside(E,A){let _=E,I=!1;const B=(E.x+A.x)/2,T=(E.y+A.y)/2;do _.y>T!=_.next.y>T&&_.next.y!==_.y&&B<(_.next.x-_.x)*(T-_.y)/(_.next.y-_.y)+_.x&&(I=!I),_=_.next;while(_!==E);return I}function splitPolygon(E,A){const _=createNode(E.i,E.x,E.y),I=createNode(A.i,A.x,A.y),B=E.next,T=A.prev;return E.next=A,A.prev=E,_.next=B,B.prev=_,I.next=_,_.prev=I,T.next=I,I.prev=T,I}function insertNode(E,A,_,I){const B=createNode(E,A,_);return I?(B.next=I.next,B.prev=I,I.next.prev=B,I.next=B):(B.prev=B,B.next=B),B}function removeNode(E){E.next.prev=E.prev,E.prev.next=E.next,E.prevZ&&(E.prevZ.nextZ=E.nextZ),E.nextZ&&(E.nextZ.prevZ=E.prevZ)}function createNode(E,A,_){return{i:E,x:A,y:_,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function signedArea(E,A,_,I){let B=0;for(let T=A,R=_-I;T<_;T+=I)B+=(E[R]-E[T])*(E[T+1]+E[R+1]),R=T;return B}const earcut=earcut$1.default||earcut$1;var CLEAR=(E=>(E[E.NONE=0]="NONE",E[E.COLOR=16384]="COLOR",E[E.STENCIL=1024]="STENCIL",E[E.DEPTH=256]="DEPTH",E[E.COLOR_DEPTH=16640]="COLOR_DEPTH",E[E.COLOR_STENCIL=17408]="COLOR_STENCIL",E[E.DEPTH_STENCIL=1280]="DEPTH_STENCIL",E[E.ALL=17664]="ALL",E))(CLEAR||{});class SystemRunner{constructor(A){this.items=[],this._name=A}emit(A,_,I,B,T,R,P,D){const{name:F,items:L}=this;for(let U=0,V=L.length;U<V;U++)L[U][F](A,_,I,B,T,R,P,D);return this}add(A){return A[this._name]&&(this.remove(A),this.items.push(A)),this}remove(A){const _=this.items.indexOf(A);return _!==-1&&this.items.splice(_,1),this}contains(A){return this.items.indexOf(A)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const defaultRunners=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],_AbstractRenderer=class an extends EventEmitter{constructor(A){super(),this.uid=uid$1("renderer"),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=A.type,this.name=A.name,this.config=A;const _=[...defaultRunners,...this.config.runners??[]];this._addRunners(..._),this._unsafeEvalCheck()}async init(A={}){const _=A.skipExtensionImports===!0?!0:A.manageImports===!1;await loadEnvironmentExtensions(_),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const I in this._systemsHash)A={...this._systemsHash[I].constructor.defaultOptions,...A};A={...an.defaultOptions,...A},this._roundPixels=A.roundPixels?1:0;for(let I=0;I<this.runners.init.items.length;I++)await this.runners.init.items[I].init(A);this._initOptions=A}render(A,_){let I=A;if(I instanceof Container&&(I={container:I},_&&(deprecation(v8_0_0,"passing a second argument is deprecated, please use render options instead"),I.target=_.renderTexture)),I.target||(I.target=this.view.renderTarget),I.target===this.view.renderTarget&&(this._lastObjectRendered=I.container,I.clearColor??(I.clearColor=this.background.colorRgba),I.clear??(I.clear=this.background.clearBeforeRender)),I.clearColor){const B=Array.isArray(I.clearColor)&&I.clearColor.length===4;I.clearColor=B?I.clearColor:Color$1.shared.setValue(I.clearColor).toArray()}I.transform||(I.container.updateLocalTransform(),I.transform=I.container.localTransform),I.container.enableRenderGroup(),this.runners.prerender.emit(I),this.runners.renderStart.emit(I),this.runners.render.emit(I),this.runners.renderEnd.emit(I),this.runners.postrender.emit(I)}resize(A,_,I){const B=this.view.resolution;this.view.resize(A,_,I),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),I!==void 0&&I!==B&&this.runners.resolutionChange.emit(I)}clear(A={}){const _=this;A.target||(A.target=_.renderTarget.renderTarget),A.clearColor||(A.clearColor=this.background.colorRgba),A.clear??(A.clear=CLEAR.ALL);const{clear:I,clearColor:B,target:T}=A;Color$1.shared.setValue(B??this.background.colorRgba),_.renderTarget.clear(T,I,Color$1.shared.toArray())}get resolution(){return this.view.resolution}set resolution(A){this.view.resolution=A,this.runners.resolutionChange.emit(A)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...A){A.forEach(_=>{this.runners[_]=new SystemRunner(_)})}_addSystems(A){let _;for(_ in A){const I=A[_];this._addSystem(I.value,I.name)}}_addSystem(A,_){const I=new A(this);if(this[_])throw new Error(`Whoops! The name "${_}" is already in use`);this[_]=I,this._systemsHash[_]=I;for(const B in this.runners)this.runners[B].add(I);return this}_addPipes(A,_){const I=_.reduce((B,T)=>(B[T.name]=T.value,B),{});A.forEach(B=>{const T=B.value,R=B.name,P=I[R];this.renderPipes[R]=new T(this,P?new P:null)})}destroy(A=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(A),Object.values(this.runners).forEach(_=>{_.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(A){return this.textureGenerator.generateTexture(A)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!unsafeEvalSupported())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};_AbstractRenderer.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let AbstractRenderer=_AbstractRenderer,_isWebGLSupported;function isWebGLSupported(E){return _isWebGLSupported!==void 0||(_isWebGLSupported=(()=>{const A={stencil:!0,failIfMajorPerformanceCaveat:E??AbstractRenderer.defaultOptions.failIfMajorPerformanceCaveat};try{if(!DOMAdapter.get().getWebGLRenderingContext())return!1;let I=DOMAdapter.get().createCanvas().getContext("webgl",A);const B=!!I?.getContextAttributes()?.stencil;if(I){const T=I.getExtension("WEBGL_lose_context");T&&T.loseContext()}return I=null,B}catch{return!1}})()),_isWebGLSupported}let _isWebGPUSupported;async function isWebGPUSupported(E={}){return _isWebGPUSupported!==void 0||(_isWebGPUSupported=await(async()=>{const A=DOMAdapter.get().getNavigator().gpu;if(!A)return!1;try{return await(await A.requestAdapter(E)).requestDevice(),!0}catch{return!1}})()),_isWebGPUSupported}const renderPriority=["webgl","webgpu","canvas"];async function autoDetectRenderer(E){let A=[];E.preference?(A.push(E.preference),renderPriority.forEach(T=>{T!==E.preference&&A.push(T)})):A=renderPriority.slice();let _,I={};for(let T=0;T<A.length;T++){const R=A[T];if(R==="webgpu"&&await isWebGPUSupported()){const{WebGPURenderer:P}=await __vitePreload(async()=>{const{WebGPURenderer:D}=await Promise.resolve().then(()=>WebGPURenderer$1);return{WebGPURenderer:D}},void 0,import.meta.url);_=P,I={...E,...E.webgpu};break}else if(R==="webgl"&&isWebGLSupported(E.failIfMajorPerformanceCaveat??AbstractRenderer.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:P}=await __vitePreload(async()=>{const{WebGLRenderer:D}=await Promise.resolve().then(()=>WebGLRenderer$1);return{WebGLRenderer:D}},void 0,import.meta.url);_=P,I={...E,...E.webgl};break}else if(R==="canvas")throw I={...E},new Error("CanvasRenderer is not yet implemented")}if(delete I.webgpu,delete I.webgl,!_)throw new Error("No available renderer for the current environment");const B=new _;return await B.init(I),B}const DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i,VERSION="8.12.0";class ApplicationInitHook{static init(){globalThis.__PIXI_APP_INIT__?.(this,VERSION)}static destroy(){}}ApplicationInitHook.extension=ExtensionType.Application;class RendererInitHook{constructor(A){this._renderer=A}init(){globalThis.__PIXI_RENDERER_INIT__?.(this._renderer,VERSION)}destroy(){this._renderer=null}}RendererInitHook.extension={type:[ExtensionType.WebGLSystem,ExtensionType.WebGPUSystem],name:"initHook",priority:-10};const _Application=class Ri{constructor(...A){this.stage=new Container,A[0]!==void 0&&deprecation(v8_0_0,"Application constructor options are deprecated, please use Application.init() instead.")}async init(A){A={...A},this.renderer=await autoDetectRenderer(A),Ri._plugins.forEach(_=>{_.init.call(this,A)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return deprecation(v8_0_0,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(A=!1,_=!1){const I=Ri._plugins.slice(0);I.reverse(),I.forEach(B=>{B.destroy.call(this)}),this.stage.destroy(_),this.stage=null,this.renderer.destroy(A),this.renderer=null}};_Application._plugins=[];let Application=_Application;extensions.handleByList(ExtensionType.Application,Application._plugins);extensions.add(ApplicationInitHook);class ResizePlugin{static init(A){Object.defineProperty(this,"resizeTo",{set(_){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=_,_&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this._cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this._cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this._cancelResize();let _,I;if(this._resizeTo===globalThis.window)_=globalThis.innerWidth,I=globalThis.innerHeight;else{const{clientWidth:B,clientHeight:T}=this._resizeTo;_=B,I=T}this.renderer.resize(_,I),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=A.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this._cancelResize(),this._cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}ResizePlugin.extension=ExtensionType.Application;class TickerPlugin{static init(A){A=Object.assign({autoStart:!0,sharedTicker:!1},A),Object.defineProperty(this,"ticker",{set(_){this._ticker&&this._ticker.remove(this.render,this),this._ticker=_,_&&_.add(this.render,this,UPDATE_PRIORITY.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=A.sharedTicker?Ticker$1.shared:new Ticker$1,A.autoStart&&this.start()}static destroy(){if(this._ticker){const A=this._ticker;this.ticker=null,A.destroy()}}}TickerPlugin.extension=ExtensionType.Application;class AbstractBitmapFont extends EventEmitter{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return deprecation(v8_0_0,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return deprecation(v8_0_0,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return deprecation(v8_0_0,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return deprecation(v8_0_0,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return deprecation(v8_0_0,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(A=!1){this.emit("destroy",this),this.removeAllListeners();for(const _ in this.chars)this.chars[_].texture?.destroy();this.chars=null,A&&(this.pages.forEach(_=>_.texture.destroy(!0)),this.pages=null)}}const genericFontFamilies=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function fontStringFromTextStyle(E){const A=typeof E.fontSize=="number"?`${E.fontSize}px`:E.fontSize;let _=E.fontFamily;Array.isArray(E.fontFamily)||(_=E.fontFamily.split(","));for(let I=_.length-1;I>=0;I--){let B=_[I].trim();!/([\"\'])[^\'\"]+\1/.test(B)&&!genericFontFamilies.includes(B)&&(B=`"${B}"`),_[I]=B}return`${E.fontStyle} ${E.fontVariant} ${E.fontWeight} ${A} ${_.join(",")}`}const contextSettings={willReadFrequently:!0},_CanvasTextMetrics=class Rr{static get experimentalLetterSpacingSupported(){let A=Rr._experimentalLetterSpacingSupported;if(A===void 0){const _=DOMAdapter.get().getCanvasRenderingContext2D().prototype;A=Rr._experimentalLetterSpacingSupported="letterSpacing"in _||"textLetterSpacing"in _}return A}constructor(A,_,I,B,T,R,P,D,F){this.text=A,this.style=_,this.width=I,this.height=B,this.lines=T,this.lineWidths=R,this.lineHeight=P,this.maxLineWidth=D,this.fontProperties=F}static measureText(A=" ",_,I=Rr._canvas,B=_.wordWrap){const T=fontStringFromTextStyle(_),R=Rr.measureFont(T);R.fontSize===0&&(R.fontSize=_.fontSize,R.ascent=_.fontSize);const P=Rr.__context;P.font=T;const F=(B?Rr._wordWrap(A,_,I):A).split(/(?:\r\n|\r|\n)/),L=new Array(F.length);let U=0;for(let ne=0;ne<F.length;ne++){const ce=Rr._measureText(F[ne],_.letterSpacing,P);L[ne]=ce,U=Math.max(U,ce)}const V=_._stroke?.width||0;let K=U+V;_.dropShadow&&(K+=_.dropShadow.distance);const J=_.lineHeight||R.fontSize;let ee=Math.max(J,R.fontSize+V)+(F.length-1)*(J+_.leading);return _.dropShadow&&(ee+=_.dropShadow.distance),new Rr(A,_,K,ee,F,L,J+_.leading,U,R)}static _measureText(A,_,I){let B=!1;Rr.experimentalLetterSpacingSupported&&(Rr.experimentalLetterSpacing?(I.letterSpacing=`${_}px`,I.textLetterSpacing=`${_}px`,B=!0):(I.letterSpacing="0px",I.textLetterSpacing="0px"));const T=I.measureText(A);let R=T.width;const P=-T.actualBoundingBoxLeft;let F=T.actualBoundingBoxRight-P;if(R>0)if(B)R-=_,F-=_;else{const L=(Rr.graphemeSegmenter(A).length-1)*_;R+=L,F+=L}return Math.max(R,F)}static _wordWrap(A,_,I=Rr._canvas){const B=I.getContext("2d",contextSettings);let T=0,R="",P="";const D=Object.create(null),{letterSpacing:F,whiteSpace:L}=_,U=Rr._collapseSpaces(L),V=Rr._collapseNewlines(L);let K=!U;const J=_.wordWrapWidth+F,ee=Rr._tokenize(A);for(let ie=0;ie<ee.length;ie++){let ne=ee[ie];if(Rr._isNewline(ne)){if(!V){P+=Rr._addLine(R),K=!U,R="",T=0;continue}ne=" "}if(U){const fe=Rr.isBreakingSpace(ne),de=Rr.isBreakingSpace(R[R.length-1]);if(fe&&de)continue}const ce=Rr._getFromCache(ne,F,D,B);if(ce>J)if(R!==""&&(P+=Rr._addLine(R),R="",T=0),Rr.canBreakWords(ne,_.breakWords)){const fe=Rr.wordWrapSplit(ne);for(let de=0;de<fe.length;de++){let pe=fe[de],ve=pe,ye=1;for(;fe[de+ye];){const be=fe[de+ye];if(!Rr.canBreakChars(ve,be,ne,de,_.breakWords))pe+=be;else break;ve=be,ye++}de+=ye-1;const _e=Rr._getFromCache(pe,F,D,B);_e+T>J&&(P+=Rr._addLine(R),K=!1,R="",T=0),R+=pe,T+=_e}}else{R.length>0&&(P+=Rr._addLine(R),R="",T=0);const fe=ie===ee.length-1;P+=Rr._addLine(ne,!fe),K=!1,R="",T=0}else ce+T>J&&(K=!1,P+=Rr._addLine(R),R="",T=0),(R.length>0||!Rr.isBreakingSpace(ne)||K)&&(R+=ne,T+=ce)}return P+=Rr._addLine(R,!1),P}static _addLine(A,_=!0){return A=Rr._trimRight(A),A=_?`${A}
`:A,A}static _getFromCache(A,_,I,B){let T=I[A];return typeof T!="number"&&(T=Rr._measureText(A,_,B)+_,I[A]=T),T}static _collapseSpaces(A){return A==="normal"||A==="pre-line"}static _collapseNewlines(A){return A==="normal"}static _trimRight(A){if(typeof A!="string")return"";for(let _=A.length-1;_>=0;_--){const I=A[_];if(!Rr.isBreakingSpace(I))break;A=A.slice(0,-1)}return A}static _isNewline(A){return typeof A!="string"?!1:Rr._newlines.includes(A.charCodeAt(0))}static isBreakingSpace(A,_){return typeof A!="string"?!1:Rr._breakingSpaces.includes(A.charCodeAt(0))}static _tokenize(A){const _=[];let I="";if(typeof A!="string")return _;for(let B=0;B<A.length;B++){const T=A[B],R=A[B+1];if(Rr.isBreakingSpace(T,R)||Rr._isNewline(T)){I!==""&&(_.push(I),I=""),T==="\r"&&R===`
`?(_.push(`\r
`),B++):_.push(T);continue}I+=T}return I!==""&&_.push(I),_}static canBreakWords(A,_){return _}static canBreakChars(A,_,I,B,T){return!0}static wordWrapSplit(A){return Rr.graphemeSegmenter(A)}static measureFont(A){if(Rr._fonts[A])return Rr._fonts[A];const _=Rr._context;_.font=A;const I=_.measureText(Rr.METRICS_STRING+Rr.BASELINE_SYMBOL),B={ascent:I.actualBoundingBoxAscent,descent:I.actualBoundingBoxDescent,fontSize:I.actualBoundingBoxAscent+I.actualBoundingBoxDescent};return Rr._fonts[A]=B,B}static clearMetrics(A=""){A?delete Rr._fonts[A]:Rr._fonts={}}static get _canvas(){if(!Rr.__canvas){let A;try{const _=new OffscreenCanvas(0,0);if(_.getContext("2d",contextSettings)?.measureText)return Rr.__canvas=_,_;A=DOMAdapter.get().createCanvas()}catch{A=DOMAdapter.get().createCanvas()}A.width=A.height=10,Rr.__canvas=A}return Rr.__canvas}static get _context(){return Rr.__context||(Rr.__context=Rr._canvas.getContext("2d",contextSettings)),Rr.__context}};_CanvasTextMetrics.METRICS_STRING="|q";_CanvasTextMetrics.BASELINE_SYMBOL="M";_CanvasTextMetrics.BASELINE_MULTIPLIER=1.4;_CanvasTextMetrics.HEIGHT_MULTIPLIER=2;_CanvasTextMetrics.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){const E=new Intl.Segmenter;return A=>{const _=E.segment(A),I=[];let B=0;for(const T of _)I[B++]=T.segment;return I}}return E=>[...E]})();_CanvasTextMetrics.experimentalLetterSpacing=!1;_CanvasTextMetrics._fonts={};_CanvasTextMetrics._newlines=[10,13];_CanvasTextMetrics._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let CanvasTextMetrics=_CanvasTextMetrics;const emptyColorStops=[{offset:0,color:"white"},{offset:1,color:"black"}],_FillGradient=class Pi{constructor(...A){this.uid=uid$1("fillGradient"),this.type="linear",this.colorStops=[];let _=ensureGradientOptions(A);_={..._.type==="radial"?Pi.defaultRadialOptions:Pi.defaultLinearOptions,...definedProps(_)},this._textureSize=_.textureSize,this._wrapMode=_.wrapMode,_.type==="radial"?(this.center=_.center,this.outerCenter=_.outerCenter??this.center,this.innerRadius=_.innerRadius,this.outerRadius=_.outerRadius,this.scale=_.scale,this.rotation=_.rotation):(this.start=_.start,this.end=_.end),this.textureSpace=_.textureSpace,this.type=_.type,_.colorStops.forEach(B=>{this.addColorStop(B.offset,B.color)})}addColorStop(A,_){return this.colorStops.push({offset:A,color:Color$1.shared.setValue(_).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:A,y:_}=this.start,{x:I,y:B}=this.end,T=I-A,R=B-_;const P=T<0||R<0;if(this._wrapMode==="clamp-to-edge"){if(T<0){const ie=A;A=I,I=ie,T*=-1}if(R<0){const ie=_;_=B,B=ie,R*=-1}}const D=this.colorStops.length?this.colorStops:emptyColorStops,F=this._textureSize,{canvas:L,context:U}=getCanvas(F,1),V=P?U.createLinearGradient(this._textureSize,0,0,0):U.createLinearGradient(0,0,this._textureSize,0);addColorStops(V,D),U.fillStyle=V,U.fillRect(0,0,F,1),this.texture=new Texture({source:new ImageSource({resource:L,addressMode:this._wrapMode})});const K=Math.sqrt(T*T+R*R),J=Math.atan2(R,T),ee=new Matrix;ee.scale(K/F,1),ee.rotate(J),ee.translate(A,_),this.textureSpace==="local"&&ee.scale(F,F),this.transform=ee}buildGradient(){this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const A=this.colorStops.length?this.colorStops:emptyColorStops,_=this._textureSize,{canvas:I,context:B}=getCanvas(_,_),{x:T,y:R}=this.center,{x:P,y:D}=this.outerCenter,F=this.innerRadius,L=this.outerRadius,U=P-L,V=D-L,K=_/(L*2),J=(T-U)*K,ee=(R-V)*K,ie=B.createRadialGradient(J,ee,F*K,(P-U)*K,(D-V)*K,L*K);addColorStops(ie,A),B.fillStyle=A[A.length-1].color,B.fillRect(0,0,_,_),B.fillStyle=ie,B.translate(J,ee),B.rotate(this.rotation),B.scale(1,this.scale),B.translate(-J,-ee),B.fillRect(0,0,_,_),this.texture=new Texture({source:new ImageSource({resource:I,addressMode:this._wrapMode})});const ne=new Matrix;ne.scale(1/K,1/K),ne.translate(U,V),this.textureSpace==="local"&&ne.scale(_,_),this.transform=ne}get styleKey(){return this.uid}destroy(){this.texture?.destroy(!0),this.texture=null,this.transform=null,this.colorStops=[],this.start=null,this.end=null,this.center=null,this.outerCenter=null}};_FillGradient.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"};_FillGradient.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256,wrapMode:"clamp-to-edge"};let FillGradient=_FillGradient;function addColorStops(E,A){for(let _=0;_<A.length;_++){const I=A[_];E.addColorStop(I.offset,I.color)}}function getCanvas(E,A){const _=DOMAdapter.get().createCanvas(E,A),I=_.getContext("2d");return{canvas:_,context:I}}function ensureGradientOptions(E){let A=E[0]??{};return(typeof A=="number"||E[1])&&(deprecation("8.5.2","use options object instead"),A={type:"linear",start:{x:E[0],y:E[1]},end:{x:E[2],y:E[3]},textureSpace:E[4],textureSize:E[5]??FillGradient.defaultLinearOptions.textureSize}),A}const repetitionMap={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class FillPattern{constructor(A,_){this.uid=uid$1("fillPattern"),this.transform=new Matrix,this._styleKey=null,this.texture=A,this.transform.scale(1/A.frame.width,1/A.frame.height),_&&(A.source.style.addressModeU=repetitionMap[_].addressModeU,A.source.style.addressModeV=repetitionMap[_].addressModeV)}setTransform(A){const _=this.texture;this.transform.copyFrom(A),this.transform.invert(),this.transform.scale(1/_.frame.width,1/_.frame.height),this._styleKey=null}get styleKey(){return this._styleKey?this._styleKey:(this._styleKey=`fill-pattern-${this.uid}-${this.texture.uid}-${this.transform.toArray().join("-")}`,this._styleKey)}destroy(){this.texture.destroy(!0),this.texture=null,this._styleKey=null}}var parseSvgPath,hasRequiredParseSvgPath;function requireParseSvgPath(){if(hasRequiredParseSvgPath)return parseSvgPath;hasRequiredParseSvgPath=1,parseSvgPath=_;var E={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},A=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function _(T){var R=[];return T.replace(A,function(P,D,F){var L=D.toLowerCase();for(F=B(F),L=="m"&&F.length>2&&(R.push([D].concat(F.splice(0,2))),L="l",D=D=="m"?"l":"L");;){if(F.length==E[L])return F.unshift(D),R.push(F);if(F.length<E[L])throw new Error("malformed path data");R.push([D].concat(F.splice(0,E[L])))}}),R}var I=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function B(T){var R=T.match(I);return R?R.map(Number):[]}return parseSvgPath}var parseSvgPathExports=requireParseSvgPath();const parse$3=getDefaultExportFromCjs$1(parseSvgPathExports);function parseSVGPath(E,A){const _=parse$3(E),I=[];let B=null,T=0,R=0;for(let P=0;P<_.length;P++){const D=_[P],F=D[0],L=D;switch(F){case"M":T=L[1],R=L[2],A.moveTo(T,R);break;case"m":T+=L[1],R+=L[2],A.moveTo(T,R);break;case"H":T=L[1],A.lineTo(T,R);break;case"h":T+=L[1],A.lineTo(T,R);break;case"V":R=L[1],A.lineTo(T,R);break;case"v":R+=L[1],A.lineTo(T,R);break;case"L":T=L[1],R=L[2],A.lineTo(T,R);break;case"l":T+=L[1],R+=L[2],A.lineTo(T,R);break;case"C":T=L[5],R=L[6],A.bezierCurveTo(L[1],L[2],L[3],L[4],T,R);break;case"c":A.bezierCurveTo(T+L[1],R+L[2],T+L[3],R+L[4],T+L[5],R+L[6]),T+=L[5],R+=L[6];break;case"S":T=L[3],R=L[4],A.bezierCurveToShort(L[1],L[2],T,R);break;case"s":A.bezierCurveToShort(T+L[1],R+L[2],T+L[3],R+L[4]),T+=L[3],R+=L[4];break;case"Q":T=L[3],R=L[4],A.quadraticCurveTo(L[1],L[2],T,R);break;case"q":A.quadraticCurveTo(T+L[1],R+L[2],T+L[3],R+L[4]),T+=L[3],R+=L[4];break;case"T":T=L[1],R=L[2],A.quadraticCurveToShort(T,R);break;case"t":T+=L[1],R+=L[2],A.quadraticCurveToShort(T,R);break;case"A":T=L[6],R=L[7],A.arcToSvg(L[1],L[2],L[3],L[4],L[5],T,R);break;case"a":T+=L[6],R+=L[7],A.arcToSvg(L[1],L[2],L[3],L[4],L[5],T,R);break;case"Z":case"z":A.closePath(),I.length>0&&(B=I.pop(),B?(T=B.startX,R=B.startY):(T=0,R=0)),B=null;break;default:warn$1(`Unknown SVG path command: ${F}`)}F!=="Z"&&F!=="z"&&B===null&&(B={startX:T,startY:R},I.push(B))}return A}let Circle$1=class sn{constructor(A=0,_=0,I=0){this.type="circle",this.x=A,this.y=_,this.radius=I}clone(){return new sn(this.x,this.y,this.radius)}contains(A,_){if(this.radius<=0)return!1;const I=this.radius*this.radius;let B=this.x-A,T=this.y-_;return B*=B,T*=T,B+T<=I}strokeContains(A,_,I,B=.5){if(this.radius===0)return!1;const T=this.x-A,R=this.y-_,P=this.radius,D=(1-B)*I,F=Math.sqrt(T*T+R*R);return F<=P+D&&F>P-(I-D)}getBounds(A){return A||(A=new Rectangle),A.x=this.x-this.radius,A.y=this.y-this.radius,A.width=this.radius*2,A.height=this.radius*2,A}copyFrom(A){return this.x=A.x,this.y=A.y,this.radius=A.radius,this}copyTo(A){return A.copyFrom(this),A}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}};class Ellipse{constructor(A=0,_=0,I=0,B=0){this.type="ellipse",this.x=A,this.y=_,this.halfWidth=I,this.halfHeight=B}clone(){return new Ellipse(this.x,this.y,this.halfWidth,this.halfHeight)}contains(A,_){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let I=(A-this.x)/this.halfWidth,B=(_-this.y)/this.halfHeight;return I*=I,B*=B,I+B<=1}strokeContains(A,_,I,B=.5){const{halfWidth:T,halfHeight:R}=this;if(T<=0||R<=0)return!1;const P=I*(1-B),D=I-P,F=T-D,L=R-D,U=T+P,V=R+P,K=A-this.x,J=_-this.y,ee=K*K/(F*F)+J*J/(L*L),ie=K*K/(U*U)+J*J/(V*V);return ee>1&&ie<=1}getBounds(A){return A||(A=new Rectangle),A.x=this.x-this.halfWidth,A.y=this.y-this.halfHeight,A.width=this.halfWidth*2,A.height=this.halfHeight*2,A}copyFrom(A){return this.x=A.x,this.y=A.y,this.halfWidth=A.halfWidth,this.halfHeight=A.halfHeight,this}copyTo(A){return A.copyFrom(this),A}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function squaredDistanceToLineSegment(E,A,_,I,B,T){const R=E-_,P=A-I,D=B-_,F=T-I,L=R*D+P*F,U=D*D+F*F;let V=-1;U!==0&&(V=L/U);let K,J;V<0?(K=_,J=I):V>1?(K=B,J=T):(K=_+V*D,J=I+V*F);const ee=E-K,ie=A-J;return ee*ee+ie*ie}let tempRect$4,tempRect2;class Polygon{constructor(...A){this.type="polygon";let _=Array.isArray(A[0])?A[0]:A;if(typeof _[0]!="number"){const I=[];for(let B=0,T=_.length;B<T;B++)I.push(_[B].x,_[B].y);_=I}this.points=_,this.closePath=!0}isClockwise(){let A=0;const _=this.points,I=_.length;for(let B=0;B<I;B+=2){const T=_[B],R=_[B+1],P=_[(B+2)%I],D=_[(B+3)%I];A+=(P-T)*(D+R)}return A<0}containsPolygon(A){const _=this.getBounds(tempRect$4),I=A.getBounds(tempRect2);if(!_.containsRect(I))return!1;const B=A.points;for(let T=0;T<B.length;T+=2){const R=B[T],P=B[T+1];if(!this.contains(R,P))return!1}return!0}clone(){const A=this.points.slice(),_=new Polygon(A);return _.closePath=this.closePath,_}contains(A,_){let I=!1;const B=this.points.length/2;for(let T=0,R=B-1;T<B;R=T++){const P=this.points[T*2],D=this.points[T*2+1],F=this.points[R*2],L=this.points[R*2+1];D>_!=L>_&&A<(F-P)*((_-D)/(L-D))+P&&(I=!I)}return I}strokeContains(A,_,I,B=.5){const T=I*I,R=T*(1-B),P=T-R,{points:D}=this,F=D.length-(this.closePath?0:2);for(let L=0;L<F;L+=2){const U=D[L],V=D[L+1],K=D[(L+2)%D.length],J=D[(L+3)%D.length],ee=squaredDistanceToLineSegment(A,_,U,V,K,J),ie=Math.sign((K-U)*(_-V)-(J-V)*(A-U));if(ee<=(ie<0?P:R))return!0}return!1}getBounds(A){A||(A=new Rectangle);const _=this.points;let I=1/0,B=-1/0,T=1/0,R=-1/0;for(let P=0,D=_.length;P<D;P+=2){const F=_[P],L=_[P+1];I=F<I?F:I,B=F>B?F:B,T=L<T?L:T,R=L>R?L:R}return A.x=I,A.width=B-I,A.y=T,A.height=R-T,A}copyFrom(A){return this.points=A.points.slice(),this.closePath=A.closePath,this}copyTo(A){return A.copyFrom(this),A}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((A,_)=>`${A}, ${_}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return deprecation("8.11.0","Polygon.lastX is deprecated, please use Polygon.lastX instead."),this.points[this.points.length-2]}get y(){return deprecation("8.11.0","Polygon.y is deprecated, please use Polygon.lastY instead."),this.points[this.points.length-1]}get startX(){return this.points[0]}get startY(){return this.points[1]}}const isCornerWithinStroke=(E,A,_,I,B,T,R)=>{const P=E-_,D=A-I,F=Math.sqrt(P*P+D*D);return F>=B-T&&F<=B+R};class RoundedRectangle{constructor(A=0,_=0,I=0,B=0,T=20){this.type="roundedRectangle",this.x=A,this.y=_,this.width=I,this.height=B,this.radius=T}getBounds(A){return A||(A=new Rectangle),A.x=this.x,A.y=this.y,A.width=this.width,A.height=this.height,A}clone(){return new RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)}copyFrom(A){return this.x=A.x,this.y=A.y,this.width=A.width,this.height=A.height,this}copyTo(A){return A.copyFrom(this),A}contains(A,_){if(this.width<=0||this.height<=0)return!1;if(A>=this.x&&A<=this.x+this.width&&_>=this.y&&_<=this.y+this.height){const I=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(_>=this.y+I&&_<=this.y+this.height-I||A>=this.x+I&&A<=this.x+this.width-I)return!0;let B=A-(this.x+I),T=_-(this.y+I);const R=I*I;if(B*B+T*T<=R||(B=A-(this.x+this.width-I),B*B+T*T<=R)||(T=_-(this.y+this.height-I),B*B+T*T<=R)||(B=A-(this.x+I),B*B+T*T<=R))return!0}return!1}strokeContains(A,_,I,B=.5){const{x:T,y:R,width:P,height:D,radius:F}=this,L=I*(1-B),U=I-L,V=T+F,K=R+F,J=P-F*2,ee=D-F*2,ie=T+P,ne=R+D;return(A>=T-L&&A<=T+U||A>=ie-U&&A<=ie+L)&&_>=K&&_<=K+ee||(_>=R-L&&_<=R+U||_>=ne-U&&_<=ne+L)&&A>=V&&A<=V+J?!0:A<V&&_<K&&isCornerWithinStroke(A,_,V,K,F,U,L)||A>ie-F&&_<K&&isCornerWithinStroke(A,_,ie-F,K,F,U,L)||A>ie-F&&_>ne-F&&isCornerWithinStroke(A,_,ie-F,ne-F,F,U,L)||A<V&&_>ne-F&&isCornerWithinStroke(A,_,V,ne-F,F,U,L)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const cachedGroups={};function getTextureBatchBindGroup(E,A,_){let I=2166136261;for(let B=0;B<A;B++)I^=E[B].uid,I=Math.imul(I,16777619),I>>>=0;return cachedGroups[I]||generateTextureBatchBindGroup(E,A,I,_)}function generateTextureBatchBindGroup(E,A,_,I){const B={};let T=0;for(let P=0;P<I;P++){const D=P<A?E[P]:Texture.EMPTY.source;B[T++]=D.source,B[T++]=D.style}const R=new BindGroup(B);return cachedGroups[_]=R,R}class ViewableBuffer{constructor(A){typeof A=="number"?this.rawBinaryData=new ArrayBuffer(A):A instanceof Uint8Array?this.rawBinaryData=A.buffer:this.rawBinaryData=A,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(A){return this[`${A}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(A){switch(A){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${A} isn't a valid view type`)}}}function fastCopy(E,A){const _=E.byteLength/8|0,I=new Float64Array(E,0,_);new Float64Array(A,0,_).set(I);const T=E.byteLength-_*8;if(T>0){const R=new Uint8Array(E,_*8,T);new Uint8Array(A,_*8,T).set(R)}}const BLEND_TO_NPM={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var STENCIL_MODES=(E=>(E[E.DISABLED=0]="DISABLED",E[E.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",E[E.MASK_ACTIVE=2]="MASK_ACTIVE",E[E.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",E[E.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",E[E.NONE=5]="NONE",E))(STENCIL_MODES||{});function getAdjustedBlendModeBlend(E,A){return A.alphaMode==="no-premultiply-alpha"&&BLEND_TO_NPM[E]||E}const fragTemplate$1=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function generateIfTestSrc(E){let A="";for(let _=0;_<E;++_)_>0&&(A+=`
else `),_<E-1&&(A+=`if(test == ${_}.0){}`);return A}function checkMaxIfStatementsInShader(E,A){if(E===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const _=A.createShader(A.FRAGMENT_SHADER);try{for(;;){const I=fragTemplate$1.replace(/%forloop%/gi,generateIfTestSrc(E));if(A.shaderSource(_,I),A.compileShader(_),!A.getShaderParameter(_,A.COMPILE_STATUS))E=E/2|0;else break}}finally{A.deleteShader(_)}return E}let maxTexturesPerBatchCache=null;function getMaxTexturesPerBatch(){if(maxTexturesPerBatchCache)return maxTexturesPerBatchCache;const E=getTestContext();return maxTexturesPerBatchCache=E.getParameter(E.MAX_TEXTURE_IMAGE_UNITS),maxTexturesPerBatchCache=checkMaxIfStatementsInShader(maxTexturesPerBatchCache,E),E.getExtension("WEBGL_lose_context")?.loseContext(),maxTexturesPerBatchCache}class BatchTextureArray{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let A=0;A<this.count;A++){const _=this.textures[A];this.textures[A]=null,this.ids[_.uid]=null}this.count=0}}class Batch{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new BatchTextureArray,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const batchPool=[];let batchPoolIndex=0;function getBatchFromPool(){return batchPoolIndex>0?batchPool[--batchPoolIndex]:new Batch}function returnBatchToPool(E){batchPool[batchPoolIndex++]=E}let BATCH_TICK=0;const _Batcher=class on{constructor(A){this.uid=uid$1("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],A={...on.defaultOptions,...A},A.maxTextures||(deprecation("v8.8.0","maxTextures is a required option for Batcher now, please pass it in the options"),A.maxTextures=getMaxTexturesPerBatch());const{maxTextures:_,attributesInitialSize:I,indicesInitialSize:B}=A;this.attributeBuffer=new ViewableBuffer(I*4),this.indexBuffer=new Uint16Array(B),this.maxTextures=_}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let A=0;A<this.batchIndex;A++)returnBatchToPool(this.batches[A]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(A){this._elements[this.elementSize++]=A,A._indexStart=this.indexSize,A._attributeStart=this.attributeSize,A._batcher=this,this.indexSize+=A.indexSize,this.attributeSize+=A.attributeSize*this.vertexSize}checkAndUpdateTexture(A,_){const I=A._batch.textures.ids[_._source.uid];return!I&&I!==0?!1:(A._textureId=I,A.texture=_,!0)}updateElement(A){this.dirty=!0;const _=this.attributeBuffer;A.packAsQuad?this.packQuadAttributes(A,_.float32View,_.uint32View,A._attributeStart,A._textureId):this.packAttributes(A,_.float32View,_.uint32View,A._attributeStart,A._textureId)}break(A){const _=this._elements;if(!_[this.elementStart])return;let I=getBatchFromPool(),B=I.textures;B.clear();const T=_[this.elementStart];let R=getAdjustedBlendModeBlend(T.blendMode,T.texture._source),P=T.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const D=this.attributeBuffer.float32View,F=this.attributeBuffer.uint32View,L=this.indexBuffer;let U=this._batchIndexSize,V=this._batchIndexStart,K="startBatch";const J=this.maxTextures;for(let ee=this.elementStart;ee<this.elementSize;++ee){const ie=_[ee];_[ee]=null;const ce=ie.texture._source,fe=getAdjustedBlendModeBlend(ie.blendMode,ce),de=R!==fe||P!==ie.topology;if(ce._batchTick===BATCH_TICK&&!de){ie._textureId=ce._textureBindLocation,U+=ie.indexSize,ie.packAsQuad?(this.packQuadAttributes(ie,D,F,ie._attributeStart,ie._textureId),this.packQuadIndex(L,ie._indexStart,ie._attributeStart/this.vertexSize)):(this.packAttributes(ie,D,F,ie._attributeStart,ie._textureId),this.packIndex(ie,L,ie._indexStart,ie._attributeStart/this.vertexSize)),ie._batch=I;continue}ce._batchTick=BATCH_TICK,(B.count>=J||de)&&(this._finishBatch(I,V,U-V,B,R,P,A,K),K="renderBatch",V=U,R=fe,P=ie.topology,I=getBatchFromPool(),B=I.textures,B.clear(),++BATCH_TICK),ie._textureId=ce._textureBindLocation=B.count,B.ids[ce.uid]=B.count,B.textures[B.count++]=ce,ie._batch=I,U+=ie.indexSize,ie.packAsQuad?(this.packQuadAttributes(ie,D,F,ie._attributeStart,ie._textureId),this.packQuadIndex(L,ie._indexStart,ie._attributeStart/this.vertexSize)):(this.packAttributes(ie,D,F,ie._attributeStart,ie._textureId),this.packIndex(ie,L,ie._indexStart,ie._attributeStart/this.vertexSize))}B.count>0&&(this._finishBatch(I,V,U-V,B,R,P,A,K),V=U,++BATCH_TICK),this.elementStart=this.elementSize,this._batchIndexStart=V,this._batchIndexSize=U}_finishBatch(A,_,I,B,T,R,P,D){A.gpuBindGroup=null,A.bindGroup=null,A.action=D,A.batcher=this,A.textures=B,A.blendMode=T,A.topology=R,A.start=_,A.size=I,++BATCH_TICK,this.batches[this.batchIndex++]=A,P.add(A)}finish(A){this.break(A)}ensureAttributeBuffer(A){A*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(A*4)}ensureIndexBuffer(A){A<=this.indexBuffer.length||this._resizeIndexBuffer(A)}_resizeAttributeBuffer(A){const _=Math.max(A,this.attributeBuffer.size*2),I=new ViewableBuffer(_);fastCopy(this.attributeBuffer.rawBinaryData,I.rawBinaryData),this.attributeBuffer=I}_resizeIndexBuffer(A){const _=this.indexBuffer;let I=Math.max(A,_.length*1.5);I+=I%2;const B=I>65535?new Uint32Array(I):new Uint16Array(I);if(B.BYTES_PER_ELEMENT!==_.BYTES_PER_ELEMENT)for(let T=0;T<_.length;T++)B[T]=_[T];else fastCopy(_.buffer,B.buffer);this.indexBuffer=B}packQuadIndex(A,_,I){A[_]=I+0,A[_+1]=I+1,A[_+2]=I+2,A[_+3]=I+0,A[_+4]=I+2,A[_+5]=I+3}packIndex(A,_,I,B){const T=A.indices,R=A.indexSize,P=A.indexOffset,D=A.attributeOffset;for(let F=0;F<R;F++)_[I++]=B+T[F+P]-D}destroy(){for(let A=0;A<this.batches.length;A++)returnBatchToPool(this.batches[A]);this.batches=null;for(let A=0;A<this._elements.length;A++)this._elements[A]._batch=null;this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}};_Batcher.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let Batcher=_Batcher;var BufferUsage=(E=>(E[E.MAP_READ=1]="MAP_READ",E[E.MAP_WRITE=2]="MAP_WRITE",E[E.COPY_SRC=4]="COPY_SRC",E[E.COPY_DST=8]="COPY_DST",E[E.INDEX=16]="INDEX",E[E.VERTEX=32]="VERTEX",E[E.UNIFORM=64]="UNIFORM",E[E.STORAGE=128]="STORAGE",E[E.INDIRECT=256]="INDIRECT",E[E.QUERY_RESOLVE=512]="QUERY_RESOLVE",E[E.STATIC=1024]="STATIC",E))(BufferUsage||{});class Buffer extends EventEmitter{constructor(A){let{data:_,size:I}=A;const{usage:B,label:T,shrinkToFit:R}=A;super(),this.uid=uid$1("buffer"),this._resourceType="buffer",this._resourceId=uid$1("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,_ instanceof Array&&(_=new Float32Array(_)),this._data=_,I??(I=_?.byteLength);const P=!!_;this.descriptor={size:I,usage:B,mappedAtCreation:P,label:T},this.shrinkToFit=R??!0}get data(){return this._data}set data(A){this.setDataWithSize(A,A.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&BufferUsage.STATIC)}set static(A){A?this.descriptor.usage|=BufferUsage.STATIC:this.descriptor.usage&=~BufferUsage.STATIC}setDataWithSize(A,_,I){if(this._updateID++,this._updateSize=_*A.BYTES_PER_ELEMENT,this._data===A){I&&this.emit("update",this);return}const B=this._data;if(this._data=A,this._dataInt32=null,!B||B.length!==A.length){!this.shrinkToFit&&B&&A.byteLength<B.byteLength?I&&this.emit("update",this):(this.descriptor.size=A.byteLength,this._resourceId=uid$1("resource"),this.emit("change",this));return}I&&this.emit("update",this)}update(A){this._updateSize=A??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}function ensureIsBuffer(E,A){if(!(E instanceof Buffer)){let _=A?BufferUsage.INDEX:BufferUsage.VERTEX;E instanceof Array&&(A?(E=new Uint32Array(E),_=BufferUsage.INDEX|BufferUsage.COPY_DST):(E=new Float32Array(E),_=BufferUsage.VERTEX|BufferUsage.COPY_DST)),E=new Buffer({data:E,label:A?"index-mesh-buffer":"vertex-mesh-buffer",usage:_})}return E}function getGeometryBounds(E,A,_){const I=E.getAttribute(A);if(!I)return _.minX=0,_.minY=0,_.maxX=0,_.maxY=0,_;const B=I.buffer.data;let T=1/0,R=1/0,P=-1/0,D=-1/0;const F=B.BYTES_PER_ELEMENT,L=(I.offset||0)/F,U=(I.stride||8)/F;for(let V=L;V<B.length;V+=U){const K=B[V],J=B[V+1];K>P&&(P=K),J>D&&(D=J),K<T&&(T=K),J<R&&(R=J)}return _.minX=T,_.minY=R,_.maxX=P,_.maxY=D,_}function ensureIsAttribute(E){return(E instanceof Buffer||Array.isArray(E)||E.BYTES_PER_ELEMENT)&&(E={buffer:E}),E.buffer=ensureIsBuffer(E.buffer,!1),E}class Geometry extends EventEmitter{constructor(A={}){super(),this.uid=uid$1("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new Bounds,this._boundsDirty=!0;const{attributes:_,indexBuffer:I,topology:B}=A;if(this.buffers=[],this.attributes={},_)for(const T in _)this.addAttribute(T,_[T]);this.instanceCount=A.instanceCount??1,I&&this.addIndex(I),this.topology=B||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(A){return this.attributes[A]}getIndex(){return this.indexBuffer}getBuffer(A){return this.getAttribute(A).buffer}getSize(){for(const A in this.attributes){const _=this.attributes[A];return _.buffer.data.length/(_.stride/4||_.size)}return 0}addAttribute(A,_){const I=ensureIsAttribute(_);this.buffers.indexOf(I.buffer)===-1&&(this.buffers.push(I.buffer),I.buffer.on("update",this.onBufferUpdate,this),I.buffer.on("change",this.onBufferUpdate,this)),this.attributes[A]=I}addIndex(A){this.indexBuffer=ensureIsBuffer(A,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,getGeometryBounds(this,"aPosition",this._bounds)):this._bounds}destroy(A=!1){this.emit("destroy",this),this.removeAllListeners(),A&&this.buffers.forEach(_=>_.destroy()),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const placeHolderBufferData=new Float32Array(1),placeHolderIndexData=new Uint32Array(1);class BatchGeometry extends Geometry{constructor(){const _=new Buffer({data:placeHolderBufferData,label:"attribute-batch-buffer",usage:BufferUsage.VERTEX|BufferUsage.COPY_DST,shrinkToFit:!1}),I=new Buffer({data:placeHolderIndexData,label:"index-batch-buffer",usage:BufferUsage.INDEX|BufferUsage.COPY_DST,shrinkToFit:!1}),B=24;super({attributes:{aPosition:{buffer:_,format:"float32x2",stride:B,offset:0},aUV:{buffer:_,format:"float32x2",stride:B,offset:8},aColor:{buffer:_,format:"unorm8x4",stride:B,offset:16},aTextureIdAndRound:{buffer:_,format:"uint16x2",stride:B,offset:20}},indexBuffer:I})}}function addBits(E,A,_){if(E)for(const I in E){const B=I.toLocaleLowerCase(),T=A[B];if(T){let R=E[I];I==="header"&&(R=R.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),_&&T.push(`//----${_}----//`),T.push(R)}else warn$1(`${I} placement hook does not exist in shader`)}}const findHooksRx=/\{\{(.*?)\}\}/g;function compileHooks(E){const A={};return(E.match(findHooksRx)?.map(I=>I.replace(/[{()}]/g,""))??[]).forEach(I=>{A[I]=[]}),A}function extractInputs(E,A){let _;const I=/@in\s+([^;]+);/g;for(;(_=I.exec(E))!==null;)A.push(_[1])}function compileInputs(E,A,_=!1){const I=[];extractInputs(A,I),E.forEach(P=>{P.header&&extractInputs(P.header,I)});const B=I;_&&B.sort();const T=B.map((P,D)=>`       @location(${D}) ${P},`).join(`
`);let R=A.replace(/@in\s+[^;]+;\s*/g,"");return R=R.replace("{{in}}",`
${T}
`),R}function extractOutputs(E,A){let _;const I=/@out\s+([^;]+);/g;for(;(_=I.exec(E))!==null;)A.push(_[1])}function extractVariableName(E){const _=/\b(\w+)\s*:/g.exec(E);return _?_[1]:""}function stripVariable(E){const A=/@.*?\s+/g;return E.replace(A,"")}function compileOutputs(E,A){const _=[];extractOutputs(A,_),E.forEach(D=>{D.header&&extractOutputs(D.header,_)});let I=0;const B=_.sort().map(D=>D.indexOf("builtin")>-1?D:`@location(${I++}) ${D}`).join(`,
`),T=_.sort().map(D=>`       var ${stripVariable(D)};`).join(`
`),R=`return VSOutput(
            ${_.sort().map(D=>` ${extractVariableName(D)}`).join(`,
`)});`;let P=A.replace(/@out\s+[^;]+;\s*/g,"");return P=P.replace("{{struct}}",`
${B}
`),P=P.replace("{{start}}",`
${T}
`),P=P.replace("{{return}}",`
${R}
`),P}function injectBits(E,A){let _=E;for(const I in A){const B=A[I];B.join(`
`).length?_=_.replace(`{{${I}}}`,`//-----${I} START-----//
${B.join(`
`)}
//----${I} FINISH----//`):_=_.replace(`{{${I}}}`,"")}return _}const cacheMap=Object.create(null),bitCacheMap=new Map;let CACHE_UID=0;function compileHighShader({template:E,bits:A}){const _=generateCacheId(E,A);if(cacheMap[_])return cacheMap[_];const{vertex:I,fragment:B}=compileInputsAndOutputs(E,A);return cacheMap[_]=compileBits(I,B,A),cacheMap[_]}function compileHighShaderGl({template:E,bits:A}){const _=generateCacheId(E,A);return cacheMap[_]||(cacheMap[_]=compileBits(E.vertex,E.fragment,A)),cacheMap[_]}function compileInputsAndOutputs(E,A){const _=A.map(R=>R.vertex).filter(R=>!!R),I=A.map(R=>R.fragment).filter(R=>!!R);let B=compileInputs(_,E.vertex,!0);B=compileOutputs(_,B);const T=compileInputs(I,E.fragment,!0);return{vertex:B,fragment:T}}function generateCacheId(E,A){return A.map(_=>(bitCacheMap.has(_)||bitCacheMap.set(_,CACHE_UID++),bitCacheMap.get(_))).sort((_,I)=>_-I).join("-")+E.vertex+E.fragment}function compileBits(E,A,_){const I=compileHooks(E),B=compileHooks(A);return _.forEach(T=>{addBits(T.vertex,I,T.name),addBits(T.fragment,B,T.name)}),{vertex:injectBits(E,I),fragment:injectBits(A,B)}}const vertexGPUTemplate=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}

        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,fragmentGPUTemplate=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;

    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {

        {{start}}

        var outColor:vec4<f32>;

        {{main}}

        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,vertexGlTemplate=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;

        {{start}}

        vColor = vec4(1.);

        {{main}}

        vUV = uv;

        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,fragmentGlTemplate=`

    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {

        {{start}}

        vec4 outColor;

        {{main}}

        finalColor = outColor * vColor;

        {{end}}
    }
`,globalUniformsBit={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},globalUniformsUBOBitGl={name:"global-uniforms-ubo-bit",vertex:{header:`
          uniform globalUniforms {
            mat3 uProjectionMatrix;
            mat3 uWorldTransformMatrix;
            vec4 uWorldColorAlpha;
            vec2 uResolution;
          };
        `}},globalUniformsBitGl={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function compileHighShaderGpuProgram({bits:E,name:A}){const _=compileHighShader({template:{fragment:fragmentGPUTemplate,vertex:vertexGPUTemplate},bits:[globalUniformsBit,...E]});return GpuProgram.from({name:A,vertex:{source:_.vertex,entryPoint:"main"},fragment:{source:_.fragment,entryPoint:"main"}})}function compileHighShaderGlProgram({bits:E,name:A}){return new GlProgram({name:A,...compileHighShaderGl({template:{vertex:vertexGlTemplate,fragment:fragmentGlTemplate},bits:[globalUniformsBitGl,...E]})})}const colorBit={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},colorBitGl={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},textureBatchBitGpuCache={};function generateBindingSrc(E){const A=[];if(E===1)A.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),A.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let _=0;for(let I=0;I<E;I++)A.push(`@group(1) @binding(${_++}) var textureSource${I+1}: texture_2d<f32>;`),A.push(`@group(1) @binding(${_++}) var textureSampler${I+1}: sampler;`)}return A.join(`
`)}function generateSampleSrc(E){const A=[];if(E===1)A.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{A.push("switch vTextureId {");for(let _=0;_<E;_++)_===E-1?A.push("  default:{"):A.push(`  case ${_}:{`),A.push(`      outColor = textureSampleGrad(textureSource${_+1}, textureSampler${_+1}, vUV, uvDx, uvDy);`),A.push("      break;}");A.push("}")}return A.join(`
`)}function generateTextureBatchBit(E){return textureBatchBitGpuCache[E]||(textureBatchBitGpuCache[E]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${generateBindingSrc(E)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${generateSampleSrc(E)}
            `}}),textureBatchBitGpuCache[E]}const textureBatchBitGlCache={};function generateSampleGlSrc(E){const A=[];for(let _=0;_<E;_++)_>0&&A.push("else"),_<E-1&&A.push(`if(vTextureId < ${_}.5)`),A.push("{"),A.push(`	outColor = texture(uTextures[${_}], vUV);`),A.push("}");return A.join(`
`)}function generateTextureBatchBitGl(E){return textureBatchBitGlCache[E]||(textureBatchBitGlCache[E]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${E}];

            `,main:`

                ${generateSampleGlSrc(E)}
            `}}),textureBatchBitGlCache[E]}const roundPixelsBit={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},roundPixelsBitGl={name:"round-pixels-bit",vertex:{header:`
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},batchSamplersUniformGroupHash={};function getBatchSamplersUniformGroup(E){let A=batchSamplersUniformGroupHash[E];if(A)return A;const _=new Int32Array(E);for(let I=0;I<E;I++)_[I]=I;return A=batchSamplersUniformGroupHash[E]=new UniformGroup({uTextures:{value:_,type:"i32",size:E}},{isStatic:!0}),A}class DefaultShader extends Shader{constructor(A){const _=compileHighShaderGlProgram({name:"batch",bits:[colorBitGl,generateTextureBatchBitGl(A),roundPixelsBitGl]}),I=compileHighShaderGpuProgram({name:"batch",bits:[colorBit,generateTextureBatchBit(A),roundPixelsBit]});super({glProgram:_,gpuProgram:I,resources:{batchSamplers:getBatchSamplersUniformGroup(A)}})}}let defaultShader=null;const _DefaultBatcher=class cn extends Batcher{constructor(A){super(A),this.geometry=new BatchGeometry,this.name=cn.extension.name,this.vertexSize=6,defaultShader??(defaultShader=new DefaultShader(A.maxTextures)),this.shader=defaultShader}packAttributes(A,_,I,B,T){const R=T<<16|A.roundPixels&65535,P=A.transform,D=P.a,F=P.b,L=P.c,U=P.d,V=P.tx,K=P.ty,{positions:J,uvs:ee}=A,ie=A.color,ne=A.attributeOffset,ce=ne+A.attributeSize;for(let fe=ne;fe<ce;fe++){const de=fe*2,pe=J[de],ve=J[de+1];_[B++]=D*pe+L*ve+V,_[B++]=U*ve+F*pe+K,_[B++]=ee[de],_[B++]=ee[de+1],I[B++]=ie,I[B++]=R}}packQuadAttributes(A,_,I,B,T){const R=A.texture,P=A.transform,D=P.a,F=P.b,L=P.c,U=P.d,V=P.tx,K=P.ty,J=A.bounds,ee=J.maxX,ie=J.minX,ne=J.maxY,ce=J.minY,fe=R.uvs,de=A.color,pe=T<<16|A.roundPixels&65535;_[B+0]=D*ie+L*ce+V,_[B+1]=U*ce+F*ie+K,_[B+2]=fe.x0,_[B+3]=fe.y0,I[B+4]=de,I[B+5]=pe,_[B+6]=D*ee+L*ce+V,_[B+7]=U*ce+F*ee+K,_[B+8]=fe.x1,_[B+9]=fe.y1,I[B+10]=de,I[B+11]=pe,_[B+12]=D*ee+L*ne+V,_[B+13]=U*ne+F*ee+K,_[B+14]=fe.x2,_[B+15]=fe.y2,I[B+16]=de,I[B+17]=pe,_[B+18]=D*ie+L*ne+V,_[B+19]=U*ne+F*ie+K,_[B+20]=fe.x3,_[B+21]=fe.y3,I[B+22]=de,I[B+23]=pe}};_DefaultBatcher.extension={type:[ExtensionType.Batcher],name:"default"};let DefaultBatcher=_DefaultBatcher;function buildUvs(E,A,_,I,B,T,R,P=null){let D=0;_*=A,B*=T;const F=P.a,L=P.b,U=P.c,V=P.d,K=P.tx,J=P.ty;for(;D<R;){const ee=E[_],ie=E[_+1];I[B]=F*ee+U*ie+K,I[B+1]=L*ee+V*ie+J,B+=T,_+=A,D++}}function buildSimpleUvs(E,A,_,I){let B=0;for(A*=_;B<I;)E[A]=0,E[A+1]=0,A+=_,B++}function transformVertices(E,A,_,I,B){const T=A.a,R=A.b,P=A.c,D=A.d,F=A.tx,L=A.ty;_||(_=0),I||(I=2),B||(B=E.length/I-_);let U=_*I;for(let V=0;V<B;V++){const K=E[U],J=E[U+1];E[U]=T*K+P*J+F,E[U+1]=R*K+D*J+L,U+=I}}const identityMatrix=new Matrix;class BatchableGraphics{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.renderable&&this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const A=this.baseColor,_=A>>16|A&65280|(A&255)<<16,I=this.renderable;return I?multiplyHexColors(_,I.groupColor)+(this.alpha*I.groupAlpha*255<<24):_+(this.alpha*255<<24)}get transform(){return this.renderable?.groupTransform||identityMatrix}copyTo(A){A.indexOffset=this.indexOffset,A.indexSize=this.indexSize,A.attributeOffset=this.attributeOffset,A.attributeSize=this.attributeSize,A.baseColor=this.baseColor,A.alpha=this.alpha,A.texture=this.texture,A.geometryData=this.geometryData,A.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}}const buildCircle={extension:{type:ExtensionType.ShapeBuilder,name:"circle"},build(E,A){let _,I,B,T,R,P;if(E.type==="circle"){const de=E;if(R=P=de.radius,R<=0)return!1;_=de.x,I=de.y,B=T=0}else if(E.type==="ellipse"){const de=E;if(R=de.halfWidth,P=de.halfHeight,R<=0||P<=0)return!1;_=de.x,I=de.y,B=T=0}else{const de=E,pe=de.width/2,ve=de.height/2;_=de.x+pe,I=de.y+ve,R=P=Math.max(0,Math.min(de.radius,Math.min(pe,ve))),B=pe-R,T=ve-P}if(B<0||T<0)return!1;const D=Math.ceil(2.3*Math.sqrt(R+P)),F=D*8+(B?4:0)+(T?4:0);if(F===0)return!1;if(D===0)return A[0]=A[6]=_+B,A[1]=A[3]=I+T,A[2]=A[4]=_-B,A[5]=A[7]=I-T,!0;let L=0,U=D*4+(B?2:0)+2,V=U,K=F,J=B+R,ee=T,ie=_+J,ne=_-J,ce=I+ee;if(A[L++]=ie,A[L++]=ce,A[--U]=ce,A[--U]=ne,T){const de=I-ee;A[V++]=ne,A[V++]=de,A[--K]=de,A[--K]=ie}for(let de=1;de<D;de++){const pe=Math.PI/2*(de/D),ve=B+Math.cos(pe)*R,ye=T+Math.sin(pe)*P,_e=_+ve,be=_-ve,Te=I+ye,ue=I-ye;A[L++]=_e,A[L++]=Te,A[--U]=Te,A[--U]=be,A[V++]=be,A[V++]=ue,A[--K]=ue,A[--K]=_e}J=B,ee=T+P,ie=_+J,ne=_-J,ce=I+ee;const fe=I-ee;return A[L++]=ie,A[L++]=ce,A[--K]=fe,A[--K]=ie,B&&(A[L++]=ne,A[L++]=ce,A[--K]=fe,A[--K]=ne),!0},triangulate(E,A,_,I,B,T){if(E.length===0)return;let R=0,P=0;for(let L=0;L<E.length;L+=2)R+=E[L],P+=E[L+1];R/=E.length/2,P/=E.length/2;let D=I;A[D*_]=R,A[D*_+1]=P;const F=D++;for(let L=0;L<E.length;L+=2)A[D*_]=E[L],A[D*_+1]=E[L+1],L>0&&(B[T++]=D,B[T++]=F,B[T++]=D-1),D++;B[T++]=F+1,B[T++]=F,B[T++]=D-1}},buildEllipse={...buildCircle,extension:{...buildCircle.extension,name:"ellipse"}},buildRoundedRectangle={...buildCircle,extension:{...buildCircle.extension,name:"roundedRectangle"}},closePointEps=1e-4,curveEps=1e-4;function getOrientationOfPoints(E){const A=E.length;if(A<6)return 1;let _=0;for(let I=0,B=E[A-2],T=E[A-1];I<A;I+=2){const R=E[I],P=E[I+1];_+=(R-B)*(P+T),B=R,T=P}return _<0?-1:1}function square(E,A,_,I,B,T,R,P){const D=E-_*B,F=A-I*B,L=E+_*T,U=A+I*T;let V,K;R?(V=I,K=-_):(V=-I,K=_);const J=D+V,ee=F+K,ie=L+V,ne=U+K;return P.push(J,ee),P.push(ie,ne),2}function round$1(E,A,_,I,B,T,R,P){const D=_-E,F=I-A;let L=Math.atan2(D,F),U=Math.atan2(B-E,T-A);P&&L<U?L+=Math.PI*2:!P&&L>U&&(U+=Math.PI*2);let V=L;const K=U-L,J=Math.abs(K),ee=Math.sqrt(D*D+F*F),ie=(15*J*Math.sqrt(ee)/Math.PI>>0)+1,ne=K/ie;if(V+=ne,P){R.push(E,A),R.push(_,I);for(let ce=1,fe=V;ce<ie;ce++,fe+=ne)R.push(E,A),R.push(E+Math.sin(fe)*ee,A+Math.cos(fe)*ee);R.push(E,A),R.push(B,T)}else{R.push(_,I),R.push(E,A);for(let ce=1,fe=V;ce<ie;ce++,fe+=ne)R.push(E+Math.sin(fe)*ee,A+Math.cos(fe)*ee),R.push(E,A);R.push(B,T),R.push(E,A)}return ie*2}function buildLine(E,A,_,I,B,T){const R=closePointEps;if(E.length===0)return;const P=A;let D=P.alignment;if(A.alignment!==.5){let ae=getOrientationOfPoints(E);_&&(ae*=-1),D=(D-.5)*ae+.5}const F=new Point$1(E[0],E[1]),L=new Point$1(E[E.length-2],E[E.length-1]),U=I,V=Math.abs(F.x-L.x)<R&&Math.abs(F.y-L.y)<R;if(U){E=E.slice(),V&&(E.pop(),E.pop(),L.set(E[E.length-2],E[E.length-1]));const ae=(F.x+L.x)*.5,Q=(L.y+F.y)*.5;E.unshift(ae,Q),E.push(ae,Q)}const K=B,J=E.length/2;let ee=E.length;const ie=K.length/2,ne=P.width/2,ce=ne*ne,fe=P.miterLimit*P.miterLimit;let de=E[0],pe=E[1],ve=E[2],ye=E[3],_e=0,be=0,Te=-(pe-ye),ue=de-ve,O=0,z=0,Y=Math.sqrt(Te*Te+ue*ue);Te/=Y,ue/=Y,Te*=ne,ue*=ne;const te=D,oe=(1-te)*2,le=te*2;U||(P.cap==="round"?ee+=round$1(de-Te*(oe-le)*.5,pe-ue*(oe-le)*.5,de-Te*oe,pe-ue*oe,de+Te*le,pe+ue*le,K,!0)+2:P.cap==="square"&&(ee+=square(de,pe,Te,ue,oe,le,!0,K))),K.push(de-Te*oe,pe-ue*oe),K.push(de+Te*le,pe+ue*le);for(let ae=1;ae<J-1;++ae){de=E[(ae-1)*2],pe=E[(ae-1)*2+1],ve=E[ae*2],ye=E[ae*2+1],_e=E[(ae+1)*2],be=E[(ae+1)*2+1],Te=-(pe-ye),ue=de-ve,Y=Math.sqrt(Te*Te+ue*ue),Te/=Y,ue/=Y,Te*=ne,ue*=ne,O=-(ye-be),z=ve-_e,Y=Math.sqrt(O*O+z*z),O/=Y,z/=Y,O*=ne,z*=ne;const Q=ve-de,se=pe-ye,Ae=ve-_e,ge=be-ye,Ee=Q*Ae+se*ge,ke=se*Ae-ge*Q,Se=ke<0;if(Math.abs(ke)<.001*Math.abs(Ee)){K.push(ve-Te*oe,ye-ue*oe),K.push(ve+Te*le,ye+ue*le),Ee>=0&&(P.join==="round"?ee+=round$1(ve,ye,ve-Te*oe,ye-ue*oe,ve-O*oe,ye-z*oe,K,!1)+4:ee+=2,K.push(ve-O*le,ye-z*le),K.push(ve+O*oe,ye+z*oe));continue}const Ie=(-Te+de)*(-ue+ye)-(-Te+ve)*(-ue+pe),we=(-O+_e)*(-z+ye)-(-O+ve)*(-z+be),xe=(Q*we-Ae*Ie)/ke,Fe=(ge*Ie-se*we)/ke,Ge=(xe-ve)*(xe-ve)+(Fe-ye)*(Fe-ye),Oe=ve+(xe-ve)*oe,et=ye+(Fe-ye)*oe,Mt=ve-(xe-ve)*le,dt=ye-(Fe-ye)*le,mt=Math.min(Q*Q+se*se,Ae*Ae+ge*ge),Ut=Se?oe:le,St=mt+Ut*Ut*ce;Ge<=St?P.join==="bevel"||Ge/ce>fe?(Se?(K.push(Oe,et),K.push(ve+Te*le,ye+ue*le),K.push(Oe,et),K.push(ve+O*le,ye+z*le)):(K.push(ve-Te*oe,ye-ue*oe),K.push(Mt,dt),K.push(ve-O*oe,ye-z*oe),K.push(Mt,dt)),ee+=2):P.join==="round"?Se?(K.push(Oe,et),K.push(ve+Te*le,ye+ue*le),ee+=round$1(ve,ye,ve+Te*le,ye+ue*le,ve+O*le,ye+z*le,K,!0)+4,K.push(Oe,et),K.push(ve+O*le,ye+z*le)):(K.push(ve-Te*oe,ye-ue*oe),K.push(Mt,dt),ee+=round$1(ve,ye,ve-Te*oe,ye-ue*oe,ve-O*oe,ye-z*oe,K,!1)+4,K.push(ve-O*oe,ye-z*oe),K.push(Mt,dt)):(K.push(Oe,et),K.push(Mt,dt)):(K.push(ve-Te*oe,ye-ue*oe),K.push(ve+Te*le,ye+ue*le),P.join==="round"?Se?ee+=round$1(ve,ye,ve+Te*le,ye+ue*le,ve+O*le,ye+z*le,K,!0)+2:ee+=round$1(ve,ye,ve-Te*oe,ye-ue*oe,ve-O*oe,ye-z*oe,K,!1)+2:P.join==="miter"&&Ge/ce<=fe&&(Se?(K.push(Mt,dt),K.push(Mt,dt)):(K.push(Oe,et),K.push(Oe,et)),ee+=2),K.push(ve-O*oe,ye-z*oe),K.push(ve+O*le,ye+z*le),ee+=2)}de=E[(J-2)*2],pe=E[(J-2)*2+1],ve=E[(J-1)*2],ye=E[(J-1)*2+1],Te=-(pe-ye),ue=de-ve,Y=Math.sqrt(Te*Te+ue*ue),Te/=Y,ue/=Y,Te*=ne,ue*=ne,K.push(ve-Te*oe,ye-ue*oe),K.push(ve+Te*le,ye+ue*le),U||(P.cap==="round"?ee+=round$1(ve-Te*(oe-le)*.5,ye-ue*(oe-le)*.5,ve-Te*oe,ye-ue*oe,ve+Te*le,ye+ue*le,K,!1)+2:P.cap==="square"&&(ee+=square(ve,ye,Te,ue,oe,le,!1,K)));const he=curveEps*curveEps;for(let ae=ie;ae<ee+ie-2;++ae)de=K[ae*2],pe=K[ae*2+1],ve=K[(ae+1)*2],ye=K[(ae+1)*2+1],_e=K[(ae+2)*2],be=K[(ae+2)*2+1],!(Math.abs(de*(ye-be)+ve*(be-pe)+_e*(pe-ye))<he)&&T.push(ae,ae+1,ae+2)}function buildPixelLine(E,A,_,I){const B=closePointEps;if(E.length===0)return;const T=E[0],R=E[1],P=E[E.length-2],D=E[E.length-1],F=A||Math.abs(T-P)<B&&Math.abs(R-D)<B,L=_,U=E.length/2,V=L.length/2;for(let K=0;K<U;K++)L.push(E[K*2]),L.push(E[K*2+1]);for(let K=0;K<U-1;K++)I.push(V+K,V+K+1);F&&I.push(V+U-1,V)}function triangulateWithHoles(E,A,_,I,B,T,R){const P=earcut(E,A,2);if(!P)return;for(let F=0;F<P.length;F+=3)T[R++]=P[F]+B,T[R++]=P[F+1]+B,T[R++]=P[F+2]+B;let D=B*I;for(let F=0;F<E.length;F+=2)_[D]=E[F],_[D+1]=E[F+1],D+=I}const emptyArray=[],buildPolygon={extension:{type:ExtensionType.ShapeBuilder,name:"polygon"},build(E,A){for(let _=0;_<E.points.length;_++)A[_]=E.points[_];return!0},triangulate(E,A,_,I,B,T){triangulateWithHoles(E,emptyArray,A,_,I,B,T)}},buildRectangle={extension:{type:ExtensionType.ShapeBuilder,name:"rectangle"},build(E,A){const _=E,I=_.x,B=_.y,T=_.width,R=_.height;return T>0&&R>0?(A[0]=I,A[1]=B,A[2]=I+T,A[3]=B,A[4]=I+T,A[5]=B+R,A[6]=I,A[7]=B+R,!0):!1},triangulate(E,A,_,I,B,T){let R=0;I*=_,A[I+R]=E[0],A[I+R+1]=E[1],R+=_,A[I+R]=E[2],A[I+R+1]=E[3],R+=_,A[I+R]=E[6],A[I+R+1]=E[7],R+=_,A[I+R]=E[4],A[I+R+1]=E[5],R+=_;const P=I/_;B[T++]=P,B[T++]=P+1,B[T++]=P+2,B[T++]=P+1,B[T++]=P+3,B[T++]=P+2}},buildTriangle={extension:{type:ExtensionType.ShapeBuilder,name:"triangle"},build(E,A){return A[0]=E.x,A[1]=E.y,A[2]=E.x2,A[3]=E.y2,A[4]=E.x3,A[5]=E.y3,!0},triangulate(E,A,_,I,B,T){let R=0;I*=_,A[I+R]=E[0],A[I+R+1]=E[1],R+=_,A[I+R]=E[2],A[I+R+1]=E[3],R+=_,A[I+R]=E[4],A[I+R+1]=E[5];const P=I/_;B[T++]=P,B[T++]=P+1,B[T++]=P+2}},tempTextureMatrix$1=new Matrix,tempRect$3=new Rectangle;function generateTextureMatrix(E,A,_,I){const B=A.matrix?E.copyFrom(A.matrix).invert():E.identity();if(A.textureSpace==="local"){const R=_.getBounds(tempRect$3);A.width&&R.pad(A.width);const{x:P,y:D}=R,F=1/R.width,L=1/R.height,U=-P*F,V=-D*L,K=B.a,J=B.b,ee=B.c,ie=B.d;B.a*=F,B.b*=F,B.c*=L,B.d*=L,B.tx=U*K+V*ee+B.tx,B.ty=U*J+V*ie+B.ty}else B.translate(A.texture.frame.x,A.texture.frame.y),B.scale(1/A.texture.source.width,1/A.texture.source.height);const T=A.texture.source.style;return!(A.fill instanceof FillGradient)&&T.addressMode==="clamp-to-edge"&&(T.addressMode="repeat",T.update()),I&&B.append(tempTextureMatrix$1.copyFrom(I).invert()),B}const shapeBuilders={};extensions.handleByMap(ExtensionType.ShapeBuilder,shapeBuilders);extensions.add(buildRectangle,buildPolygon,buildTriangle,buildCircle,buildEllipse,buildRoundedRectangle);const tempRect$2=new Rectangle,tempTextureMatrix=new Matrix;function buildContextBatches(E,A){const{geometryData:_,batches:I}=A;I.length=0,_.indices.length=0,_.vertices.length=0,_.uvs.length=0;for(let B=0;B<E.instructions.length;B++){const T=E.instructions[B];if(T.action==="texture")addTextureToGeometryData(T.data,I,_);else if(T.action==="fill"||T.action==="stroke"){const R=T.action==="stroke",P=T.data.path.shapePath,D=T.data.style,F=T.data.hole;R&&F&&addShapePathToGeometryData(F.shapePath,D,!0,I,_),F&&(P.shapePrimitives[P.shapePrimitives.length-1].holes=F.shapePath.shapePrimitives),addShapePathToGeometryData(P,D,R,I,_)}}}function addTextureToGeometryData(E,A,_){const I=[],B=shapeBuilders.rectangle,T=tempRect$2;T.x=E.dx,T.y=E.dy,T.width=E.dw,T.height=E.dh;const R=E.transform;if(!B.build(T,I))return;const{vertices:P,uvs:D,indices:F}=_,L=F.length,U=P.length/2;R&&transformVertices(I,R),B.triangulate(I,P,2,U,F,L);const V=E.image,K=V.uvs;D.push(K.x0,K.y0,K.x1,K.y1,K.x3,K.y3,K.x2,K.y2);const J=BigPool.get(BatchableGraphics);J.indexOffset=L,J.indexSize=F.length-L,J.attributeOffset=U,J.attributeSize=P.length/2-U,J.baseColor=E.style,J.alpha=E.alpha,J.texture=V,J.geometryData=_,A.push(J)}function addShapePathToGeometryData(E,A,_,I,B){const{vertices:T,uvs:R,indices:P}=B;E.shapePrimitives.forEach(({shape:D,transform:F,holes:L})=>{const U=[],V=shapeBuilders[D.type];if(!V.build(D,U))return;const K=P.length,J=T.length/2;let ee="triangle-list";if(F&&transformVertices(U,F),_){const fe=D.closePath??!0,de=A;de.pixelLine?(buildPixelLine(U,fe,T,P),ee="line-list"):buildLine(U,de,!1,fe,T,P)}else if(L){const fe=[],de=U.slice();getHoleArrays(L).forEach(ve=>{fe.push(de.length/2),de.push(...ve)}),triangulateWithHoles(de,fe,T,2,J,P,K)}else V.triangulate(U,T,2,J,P,K);const ie=R.length/2,ne=A.texture;if(ne!==Texture.WHITE){const fe=generateTextureMatrix(tempTextureMatrix,A,D,F);buildUvs(T,2,J,R,ie,2,T.length/2-J,fe)}else buildSimpleUvs(R,ie,2,T.length/2-J);const ce=BigPool.get(BatchableGraphics);ce.indexOffset=K,ce.indexSize=P.length-K,ce.attributeOffset=J,ce.attributeSize=T.length/2-J,ce.baseColor=A.color,ce.alpha=A.alpha,ce.texture=ne,ce.geometryData=B,ce.topology=ee,I.push(ce)})}function getHoleArrays(E){const A=[];for(let _=0;_<E.length;_++){const I=E[_].shape,B=[];shapeBuilders[I.type].build(I,B)&&A.push(B)}return A}class GpuGraphicsContext{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class GraphicsContextRenderData{constructor(){this.instructions=new InstructionSet}init(A){this.batcher=new DefaultBatcher({maxTextures:A}),this.instructions.reset()}get geometry(){return deprecation(v8_3_4,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}}const _GraphicsContextSystem=class Di{constructor(A){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),this._renderer=A,A.renderableGC.addManagedHash(this,"_gpuContextHash"),A.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(A){Di.defaultOptions.bezierSmoothness=A?.bezierSmoothness??Di.defaultOptions.bezierSmoothness}getContextRenderData(A){return this._graphicsDataContextHash[A.uid]||this._initContextRenderData(A)}updateGpuContext(A){let _=this._gpuContextHash[A.uid]||this._initContext(A);if(A.dirty){_?this._cleanGraphicsContextData(A):_=this._initContext(A),buildContextBatches(A,_);const I=A.batchMode;A.customShader||I==="no-batch"?_.isBatchable=!1:I==="auto"?_.isBatchable=_.geometryData.vertices.length<400:_.isBatchable=!0,A.dirty=!1}return _}getGpuContext(A){return this._gpuContextHash[A.uid]||this._initContext(A)}_initContextRenderData(A){const _=BigPool.get(GraphicsContextRenderData,{maxTextures:this._renderer.limits.maxBatchableTextures}),{batches:I,geometryData:B}=this._gpuContextHash[A.uid],T=B.vertices.length,R=B.indices.length;for(let L=0;L<I.length;L++)I[L].applyTransform=!1;const P=_.batcher;P.ensureAttributeBuffer(T),P.ensureIndexBuffer(R),P.begin();for(let L=0;L<I.length;L++){const U=I[L];P.add(U)}P.finish(_.instructions);const D=P.geometry;D.indexBuffer.setDataWithSize(P.indexBuffer,P.indexSize,!0),D.buffers[0].setDataWithSize(P.attributeBuffer.float32View,P.attributeSize,!0);const F=P.batches;for(let L=0;L<F.length;L++){const U=F[L];U.bindGroup=getTextureBatchBindGroup(U.textures.textures,U.textures.count,this._renderer.limits.maxBatchableTextures)}return this._graphicsDataContextHash[A.uid]=_,_}_initContext(A){const _=new GpuGraphicsContext;return _.context=A,this._gpuContextHash[A.uid]=_,A.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[A.uid]}onGraphicsContextDestroy(A){this._cleanGraphicsContextData(A),A.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[A.uid]=null}_cleanGraphicsContextData(A){const _=this._gpuContextHash[A.uid];_.isBatchable||this._graphicsDataContextHash[A.uid]&&(BigPool.return(this.getContextRenderData(A)),this._graphicsDataContextHash[A.uid]=null),_.batches&&_.batches.forEach(I=>{BigPool.return(I)})}destroy(){for(const A in this._gpuContextHash)this._gpuContextHash[A]&&this.onGraphicsContextDestroy(this._gpuContextHash[A].context)}};_GraphicsContextSystem.extension={type:[ExtensionType.WebGLSystem,ExtensionType.WebGPUSystem,ExtensionType.CanvasSystem],name:"graphicsContext"};_GraphicsContextSystem.defaultOptions={bezierSmoothness:.5};let GraphicsContextSystem=_GraphicsContextSystem;const RECURSION_LIMIT$1=8,FLT_EPSILON$1=11920929e-14,PATH_DISTANCE_EPSILON$1=1;function buildAdaptiveBezier(E,A,_,I,B,T,R,P,D,F){const U=Math.min(.99,Math.max(0,F??GraphicsContextSystem.defaultOptions.bezierSmoothness));let V=(PATH_DISTANCE_EPSILON$1-U)/1;return V*=V,begin$1(A,_,I,B,T,R,P,D,E,V),E}function begin$1(E,A,_,I,B,T,R,P,D,F){recursive$1(E,A,_,I,B,T,R,P,D,F,0),D.push(R,P)}function recursive$1(E,A,_,I,B,T,R,P,D,F,L){if(L>RECURSION_LIMIT$1)return;const U=(E+_)/2,V=(A+I)/2,K=(_+B)/2,J=(I+T)/2,ee=(B+R)/2,ie=(T+P)/2,ne=(U+K)/2,ce=(V+J)/2,fe=(K+ee)/2,de=(J+ie)/2,pe=(ne+fe)/2,ve=(ce+de)/2;if(L>0){let ye=R-E,_e=P-A;const be=Math.abs((_-R)*_e-(I-P)*ye),Te=Math.abs((B-R)*_e-(T-P)*ye);if(be>FLT_EPSILON$1&&Te>FLT_EPSILON$1){if((be+Te)*(be+Te)<=F*(ye*ye+_e*_e)){D.push(pe,ve);return}}else if(be>FLT_EPSILON$1){if(be*be<=F*(ye*ye+_e*_e)){D.push(pe,ve);return}}else if(Te>FLT_EPSILON$1){if(Te*Te<=F*(ye*ye+_e*_e)){D.push(pe,ve);return}}else if(ye=pe-(E+R)/2,_e=ve-(A+P)/2,ye*ye+_e*_e<=F){D.push(pe,ve);return}}recursive$1(E,A,U,V,ne,ce,pe,ve,D,F,L+1),recursive$1(pe,ve,fe,de,ee,ie,R,P,D,F,L+1)}const RECURSION_LIMIT=8,FLT_EPSILON=11920929e-14,PATH_DISTANCE_EPSILON=1;function buildAdaptiveQuadratic(E,A,_,I,B,T,R,P){const F=Math.min(.99,Math.max(0,P??GraphicsContextSystem.defaultOptions.bezierSmoothness));let L=(PATH_DISTANCE_EPSILON-F)/1;return L*=L,begin(A,_,I,B,T,R,E,L),E}function begin(E,A,_,I,B,T,R,P){recursive(R,E,A,_,I,B,T,P,0),R.push(B,T)}function recursive(E,A,_,I,B,T,R,P,D){if(D>RECURSION_LIMIT)return;const F=(A+I)/2,L=(_+B)/2,U=(I+T)/2,V=(B+R)/2,K=(F+U)/2,J=(L+V)/2;let ee=T-A,ie=R-_;const ne=Math.abs((I-T)*ie-(B-R)*ee);if(ne>FLT_EPSILON){if(ne*ne<=P*(ee*ee+ie*ie)){E.push(K,J);return}}else if(ee=K-(A+T)/2,ie=J-(_+R)/2,ee*ee+ie*ie<=P){E.push(K,J);return}recursive(E,A,_,F,L,K,J,P,D+1),recursive(E,K,J,U,V,T,R,P,D+1)}function buildArc(E,A,_,I,B,T,R,P){let D=Math.abs(B-T);(!R&&B>T||R&&T>B)&&(D=2*Math.PI-D),P||(P=Math.max(6,Math.floor(6*Math.pow(I,1/3)*(D/Math.PI)))),P=Math.max(P,3);let F=D/P,L=B;F*=R?-1:1;for(let U=0;U<P+1;U++){const V=Math.cos(L),K=Math.sin(L),J=A+V*I,ee=_+K*I;E.push(J,ee),L+=F}}function buildArcTo(E,A,_,I,B,T){const R=E[E.length-2],D=E[E.length-1]-_,F=R-A,L=B-_,U=I-A,V=Math.abs(D*U-F*L);if(V<1e-8||T===0){(E[E.length-2]!==A||E[E.length-1]!==_)&&E.push(A,_);return}const K=D*D+F*F,J=L*L+U*U,ee=D*L+F*U,ie=T*Math.sqrt(K)/V,ne=T*Math.sqrt(J)/V,ce=ie*ee/K,fe=ne*ee/J,de=ie*U+ne*F,pe=ie*L+ne*D,ve=F*(ne+ce),ye=D*(ne+ce),_e=U*(ie+fe),be=L*(ie+fe),Te=Math.atan2(ye-pe,ve-de),ue=Math.atan2(be-pe,_e-de);buildArc(E,de+A,pe+_,T,Te,ue,F*L>U*D)}const TAU=Math.PI*2,out={centerX:0,centerY:0,ang1:0,ang2:0},mapToEllipse=({x:E,y:A},_,I,B,T,R,P,D)=>{E*=_,A*=I;const F=B*E-T*A,L=T*E+B*A;return D.x=F+R,D.y=L+P,D};function approxUnitArc(E,A){const _=A===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(A/4),I=A===1.5707963267948966?.551915024494:_,B=Math.cos(E),T=Math.sin(E),R=Math.cos(E+A),P=Math.sin(E+A);return[{x:B-T*I,y:T+B*I},{x:R+P*I,y:P-R*I},{x:R,y:P}]}const vectorAngle=(E,A,_,I)=>{const B=E*I-A*_<0?-1:1;let T=E*_+A*I;return T>1&&(T=1),T<-1&&(T=-1),B*Math.acos(T)},getArcCenter=(E,A,_,I,B,T,R,P,D,F,L,U,V)=>{const K=Math.pow(B,2),J=Math.pow(T,2),ee=Math.pow(L,2),ie=Math.pow(U,2);let ne=K*J-K*ie-J*ee;ne<0&&(ne=0),ne/=K*ie+J*ee,ne=Math.sqrt(ne)*(R===P?-1:1);const ce=ne*B/T*U,fe=ne*-T/B*L,de=F*ce-D*fe+(E+_)/2,pe=D*ce+F*fe+(A+I)/2,ve=(L-ce)/B,ye=(U-fe)/T,_e=(-L-ce)/B,be=(-U-fe)/T,Te=vectorAngle(1,0,ve,ye);let ue=vectorAngle(ve,ye,_e,be);P===0&&ue>0&&(ue-=TAU),P===1&&ue<0&&(ue+=TAU),V.centerX=de,V.centerY=pe,V.ang1=Te,V.ang2=ue};function buildArcToSvg(E,A,_,I,B,T,R,P=0,D=0,F=0){if(T===0||R===0)return;const L=Math.sin(P*TAU/360),U=Math.cos(P*TAU/360),V=U*(A-I)/2+L*(_-B)/2,K=-L*(A-I)/2+U*(_-B)/2;if(V===0&&K===0)return;T=Math.abs(T),R=Math.abs(R);const J=Math.pow(V,2)/Math.pow(T,2)+Math.pow(K,2)/Math.pow(R,2);J>1&&(T*=Math.sqrt(J),R*=Math.sqrt(J)),getArcCenter(A,_,I,B,T,R,D,F,L,U,V,K,out);let{ang1:ee,ang2:ie}=out;const{centerX:ne,centerY:ce}=out;let fe=Math.abs(ie)/(TAU/4);Math.abs(1-fe)<1e-7&&(fe=1);const de=Math.max(Math.ceil(fe),1);ie/=de;let pe=E[E.length-2],ve=E[E.length-1];const ye={x:0,y:0};for(let _e=0;_e<de;_e++){const be=approxUnitArc(ee,ie),{x:Te,y:ue}=mapToEllipse(be[0],T,R,U,L,ne,ce,ye),{x:O,y:z}=mapToEllipse(be[1],T,R,U,L,ne,ce,ye),{x:Y,y:te}=mapToEllipse(be[2],T,R,U,L,ne,ce,ye);buildAdaptiveBezier(E,pe,ve,Te,ue,O,z,Y,te),pe=Y,ve=te,ee+=ie}}function roundedShapeArc(E,A,_){const I=(R,P)=>{const D=P.x-R.x,F=P.y-R.y,L=Math.sqrt(D*D+F*F),U=D/L,V=F/L;return{len:L,nx:U,ny:V}},B=(R,P)=>{R===0?E.moveTo(P.x,P.y):E.lineTo(P.x,P.y)};let T=A[A.length-1];for(let R=0;R<A.length;R++){const P=A[R%A.length],D=P.radius??_;if(D<=0){B(R,P),T=P;continue}const F=A[(R+1)%A.length],L=I(P,T),U=I(P,F);if(L.len<1e-4||U.len<1e-4){B(R,P),T=P;continue}let V=Math.asin(L.nx*U.ny-L.ny*U.nx),K=1,J=!1;L.nx*U.nx-L.ny*-U.ny<0?V<0?V=Math.PI+V:(V=Math.PI-V,K=-1,J=!0):V>0&&(K=-1,J=!0);const ee=V/2;let ie,ne=Math.abs(Math.cos(ee)*D/Math.sin(ee));ne>Math.min(L.len/2,U.len/2)?(ne=Math.min(L.len/2,U.len/2),ie=Math.abs(ne*Math.sin(ee)/Math.cos(ee))):ie=D;const ce=P.x+U.nx*ne+-U.ny*ie*K,fe=P.y+U.ny*ne+U.nx*ie*K,de=Math.atan2(L.ny,L.nx)+Math.PI/2*K,pe=Math.atan2(U.ny,U.nx)-Math.PI/2*K;R===0&&E.moveTo(ce+Math.cos(de)*ie,fe+Math.sin(de)*ie),E.arc(ce,fe,ie,de,pe,J),T=P}}function roundedShapeQuadraticCurve(E,A,_,I){const B=(P,D)=>Math.sqrt((P.x-D.x)**2+(P.y-D.y)**2),T=(P,D,F)=>({x:P.x+(D.x-P.x)*F,y:P.y+(D.y-P.y)*F}),R=A.length;for(let P=0;P<R;P++){const D=A[(P+1)%R],F=D.radius??_;if(F<=0){P===0?E.moveTo(D.x,D.y):E.lineTo(D.x,D.y);continue}const L=A[P],U=A[(P+2)%R],V=B(L,D);let K;if(V<1e-4)K=D;else{const ie=Math.min(V/2,F);K=T(D,L,ie/V)}const J=B(U,D);let ee;if(J<1e-4)ee=D;else{const ie=Math.min(J/2,F);ee=T(D,U,ie/J)}P===0?E.moveTo(K.x,K.y):E.lineTo(K.x,K.y),E.quadraticCurveTo(D.x,D.y,ee.x,ee.y,I)}}const tempRectangle=new Rectangle;class ShapePath{constructor(A){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new Bounds,this._graphicsPath2D=A,this.signed=A.checkForHoles}moveTo(A,_){return this.startPoly(A,_),this}lineTo(A,_){this._ensurePoly();const I=this._currentPoly.points,B=I[I.length-2],T=I[I.length-1];return(B!==A||T!==_)&&I.push(A,_),this}arc(A,_,I,B,T,R){this._ensurePoly(!1);const P=this._currentPoly.points;return buildArc(P,A,_,I,B,T,R),this}arcTo(A,_,I,B,T){this._ensurePoly();const R=this._currentPoly.points;return buildArcTo(R,A,_,I,B,T),this}arcToSvg(A,_,I,B,T,R,P){const D=this._currentPoly.points;return buildArcToSvg(D,this._currentPoly.lastX,this._currentPoly.lastY,R,P,A,_,I,B,T),this}bezierCurveTo(A,_,I,B,T,R,P){this._ensurePoly();const D=this._currentPoly;return buildAdaptiveBezier(this._currentPoly.points,D.lastX,D.lastY,A,_,I,B,T,R,P),this}quadraticCurveTo(A,_,I,B,T){this._ensurePoly();const R=this._currentPoly;return buildAdaptiveQuadratic(this._currentPoly.points,R.lastX,R.lastY,A,_,I,B,T),this}closePath(){return this.endPoly(!0),this}addPath(A,_){this.endPoly(),_&&!_.isIdentity()&&(A=A.clone(!0),A.transform(_));const I=this.shapePrimitives,B=I.length;for(let T=0;T<A.instructions.length;T++){const R=A.instructions[T];this[R.action](...R.data)}if(A.checkForHoles&&I.length-B>1){let T=null;for(let R=B;R<I.length;R++){const P=I[R];if(P.shape.type==="polygon"){const D=P.shape,F=T?.shape;F&&F.containsPolygon(D)?(T.holes||(T.holes=[]),T.holes.push(P),I.copyWithin(R,R+1),I.length--,R--):T=P}}}return this}finish(A=!1){this.endPoly(A)}rect(A,_,I,B,T){return this.drawShape(new Rectangle(A,_,I,B),T),this}circle(A,_,I,B){return this.drawShape(new Circle$1(A,_,I),B),this}poly(A,_,I){const B=new Polygon(A);return B.closePath=_,this.drawShape(B,I),this}regularPoly(A,_,I,B,T=0,R){B=Math.max(B|0,3);const P=-1*Math.PI/2+T,D=Math.PI*2/B,F=[];for(let L=0;L<B;L++){const U=P-L*D;F.push(A+I*Math.cos(U),_+I*Math.sin(U))}return this.poly(F,!0,R),this}roundPoly(A,_,I,B,T,R=0,P){if(B=Math.max(B|0,3),T<=0)return this.regularPoly(A,_,I,B,R);const D=I*Math.sin(Math.PI/B)-.001;T=Math.min(T,D);const F=-1*Math.PI/2+R,L=Math.PI*2/B,U=(B-2)*Math.PI/B/2;for(let V=0;V<B;V++){const K=V*L+F,J=A+I*Math.cos(K),ee=_+I*Math.sin(K),ie=K+Math.PI+U,ne=K-Math.PI-U,ce=J+T*Math.cos(ie),fe=ee+T*Math.sin(ie),de=J+T*Math.cos(ne),pe=ee+T*Math.sin(ne);V===0?this.moveTo(ce,fe):this.lineTo(ce,fe),this.quadraticCurveTo(J,ee,de,pe,P)}return this.closePath()}roundShape(A,_,I=!1,B){return A.length<3?this:(I?roundedShapeQuadraticCurve(this,A,_,B):roundedShapeArc(this,A,_),this.closePath())}filletRect(A,_,I,B,T){if(T===0)return this.rect(A,_,I,B);const R=Math.min(I,B)/2,P=Math.min(R,Math.max(-R,T)),D=A+I,F=_+B,L=P<0?-P:0,U=Math.abs(P);return this.moveTo(A,_+U).arcTo(A+L,_+L,A+U,_,U).lineTo(D-U,_).arcTo(D-L,_+L,D,_+U,U).lineTo(D,F-U).arcTo(D-L,F-L,A+I-U,F,U).lineTo(A+U,F).arcTo(A+L,F-L,A,F-U,U).closePath()}chamferRect(A,_,I,B,T,R){if(T<=0)return this.rect(A,_,I,B);const P=Math.min(T,Math.min(I,B)/2),D=A+I,F=_+B,L=[A+P,_,D-P,_,D,_+P,D,F-P,D-P,F,A+P,F,A,F-P,A,_+P];for(let U=L.length-1;U>=2;U-=2)L[U]===L[U-2]&&L[U-1]===L[U-3]&&L.splice(U-1,2);return this.poly(L,!0,R)}ellipse(A,_,I,B,T){return this.drawShape(new Ellipse(A,_,I,B),T),this}roundRect(A,_,I,B,T,R){return this.drawShape(new RoundedRectangle(A,_,I,B,T),R),this}drawShape(A,_){return this.endPoly(),this.shapePrimitives.push({shape:A,transform:_}),this}startPoly(A,_){let I=this._currentPoly;return I&&this.endPoly(),I=new Polygon,I.points.push(A,_),this._currentPoly=I,this}endPoly(A=!1){const _=this._currentPoly;return _&&_.points.length>2&&(_.closePath=A,this.shapePrimitives.push({shape:_})),this._currentPoly=null,this}_ensurePoly(A=!0){if(!this._currentPoly&&(this._currentPoly=new Polygon,A)){const _=this.shapePrimitives[this.shapePrimitives.length-1];if(_){let I=_.shape.x,B=_.shape.y;if(_.transform&&!_.transform.isIdentity()){const T=_.transform,R=I;I=T.a*I+T.c*B+T.tx,B=T.b*R+T.d*B+T.ty}this._currentPoly.points.push(I,B)}else this._currentPoly.points.push(0,0)}}buildPath(){const A=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let _=0;_<A.instructions.length;_++){const I=A.instructions[_];this[I.action](...I.data)}this.finish()}get bounds(){const A=this._bounds;A.clear();const _=this.shapePrimitives;for(let I=0;I<_.length;I++){const B=_[I],T=B.shape.getBounds(tempRectangle);B.transform?A.addRect(T,B.transform):A.addRect(T)}return A}}class GraphicsPath{constructor(A,_=!1){this.instructions=[],this.uid=uid$1("graphicsPath"),this._dirty=!0,this.checkForHoles=_,typeof A=="string"?parseSVGPath(A,this):this.instructions=A?.slice()??[]}get shapePath(){return this._shapePath||(this._shapePath=new ShapePath(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(A,_){return A=A.clone(),this.instructions.push({action:"addPath",data:[A,_]}),this._dirty=!0,this}arc(...A){return this.instructions.push({action:"arc",data:A}),this._dirty=!0,this}arcTo(...A){return this.instructions.push({action:"arcTo",data:A}),this._dirty=!0,this}arcToSvg(...A){return this.instructions.push({action:"arcToSvg",data:A}),this._dirty=!0,this}bezierCurveTo(...A){return this.instructions.push({action:"bezierCurveTo",data:A}),this._dirty=!0,this}bezierCurveToShort(A,_,I,B,T){const R=this.instructions[this.instructions.length-1],P=this.getLastPoint(Point$1.shared);let D=0,F=0;if(!R||R.action!=="bezierCurveTo")D=P.x,F=P.y;else{D=R.data[2],F=R.data[3];const L=P.x,U=P.y;D=L+(L-D),F=U+(U-F)}return this.instructions.push({action:"bezierCurveTo",data:[D,F,A,_,I,B,T]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...A){return this.instructions.push({action:"ellipse",data:A}),this._dirty=!0,this}lineTo(...A){return this.instructions.push({action:"lineTo",data:A}),this._dirty=!0,this}moveTo(...A){return this.instructions.push({action:"moveTo",data:A}),this}quadraticCurveTo(...A){return this.instructions.push({action:"quadraticCurveTo",data:A}),this._dirty=!0,this}quadraticCurveToShort(A,_,I){const B=this.instructions[this.instructions.length-1],T=this.getLastPoint(Point$1.shared);let R=0,P=0;if(!B||B.action!=="quadraticCurveTo")R=T.x,P=T.y;else{R=B.data[0],P=B.data[1];const D=T.x,F=T.y;R=D+(D-R),P=F+(F-P)}return this.instructions.push({action:"quadraticCurveTo",data:[R,P,A,_,I]}),this._dirty=!0,this}rect(A,_,I,B,T){return this.instructions.push({action:"rect",data:[A,_,I,B,T]}),this._dirty=!0,this}circle(A,_,I,B){return this.instructions.push({action:"circle",data:[A,_,I,B]}),this._dirty=!0,this}roundRect(...A){return this.instructions.push({action:"roundRect",data:A}),this._dirty=!0,this}poly(...A){return this.instructions.push({action:"poly",data:A}),this._dirty=!0,this}regularPoly(...A){return this.instructions.push({action:"regularPoly",data:A}),this._dirty=!0,this}roundPoly(...A){return this.instructions.push({action:"roundPoly",data:A}),this._dirty=!0,this}roundShape(...A){return this.instructions.push({action:"roundShape",data:A}),this._dirty=!0,this}filletRect(...A){return this.instructions.push({action:"filletRect",data:A}),this._dirty=!0,this}chamferRect(...A){return this.instructions.push({action:"chamferRect",data:A}),this._dirty=!0,this}star(A,_,I,B,T,R,P){T||(T=B/2);const D=-1*Math.PI/2+R,F=I*2,L=Math.PI*2/F,U=[];for(let V=0;V<F;V++){const K=V%2?T:B,J=V*L+D;U.push(A+K*Math.cos(J),_+K*Math.sin(J))}return this.poly(U,!0,P),this}clone(A=!1){const _=new GraphicsPath;if(_.checkForHoles=this.checkForHoles,!A)_.instructions=this.instructions.slice();else for(let I=0;I<this.instructions.length;I++){const B=this.instructions[I];_.instructions.push({action:B.action,data:B.data.slice()})}return _}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(A){if(A.isIdentity())return this;const _=A.a,I=A.b,B=A.c,T=A.d,R=A.tx,P=A.ty;let D=0,F=0,L=0,U=0,V=0,K=0,J=0,ee=0;for(let ie=0;ie<this.instructions.length;ie++){const ne=this.instructions[ie],ce=ne.data;switch(ne.action){case"moveTo":case"lineTo":D=ce[0],F=ce[1],ce[0]=_*D+B*F+R,ce[1]=I*D+T*F+P;break;case"bezierCurveTo":L=ce[0],U=ce[1],V=ce[2],K=ce[3],D=ce[4],F=ce[5],ce[0]=_*L+B*U+R,ce[1]=I*L+T*U+P,ce[2]=_*V+B*K+R,ce[3]=I*V+T*K+P,ce[4]=_*D+B*F+R,ce[5]=I*D+T*F+P;break;case"quadraticCurveTo":L=ce[0],U=ce[1],D=ce[2],F=ce[3],ce[0]=_*L+B*U+R,ce[1]=I*L+T*U+P,ce[2]=_*D+B*F+R,ce[3]=I*D+T*F+P;break;case"arcToSvg":D=ce[5],F=ce[6],J=ce[0],ee=ce[1],ce[0]=_*J+B*ee,ce[1]=I*J+T*ee,ce[5]=_*D+B*F+R,ce[6]=I*D+T*F+P;break;case"circle":ce[4]=adjustTransform(ce[3],A);break;case"rect":ce[4]=adjustTransform(ce[4],A);break;case"ellipse":ce[8]=adjustTransform(ce[8],A);break;case"roundRect":ce[5]=adjustTransform(ce[5],A);break;case"addPath":ce[0].transform(A);break;case"poly":ce[2]=adjustTransform(ce[2],A);break;default:warn$1("unknown transform action",ne.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(A){let _=this.instructions.length-1,I=this.instructions[_];if(!I)return A.x=0,A.y=0,A;for(;I.action==="closePath";){if(_--,_<0)return A.x=0,A.y=0,A;I=this.instructions[_]}switch(I.action){case"moveTo":case"lineTo":A.x=I.data[0],A.y=I.data[1];break;case"quadraticCurveTo":A.x=I.data[2],A.y=I.data[3];break;case"bezierCurveTo":A.x=I.data[4],A.y=I.data[5];break;case"arc":case"arcToSvg":A.x=I.data[5],A.y=I.data[6];break;case"addPath":I.data[0].getLastPoint(A);break}return A}}function adjustTransform(E,A){return E?E.prepend(A):A.clone()}function parseSVGFloatAttribute(E,A,_){const I=E.getAttribute(A);return I?Number(I):_}function parseSVGDefinitions(E,A){const _=E.querySelectorAll("defs");for(let I=0;I<_.length;I++){const B=_[I];for(let T=0;T<B.children.length;T++){const R=B.children[T];switch(R.nodeName.toLowerCase()){case"lineargradient":A.defs[R.id]=parseLinearGradient(R);break;case"radialgradient":A.defs[R.id]=parseRadialGradient();break}}}}function parseLinearGradient(E){const A=parseSVGFloatAttribute(E,"x1",0),_=parseSVGFloatAttribute(E,"y1",0),I=parseSVGFloatAttribute(E,"x2",1),B=parseSVGFloatAttribute(E,"y2",0),T=E.getAttribute("gradientUnits")||"objectBoundingBox",R=new FillGradient(A,_,I,B,T==="objectBoundingBox"?"local":"global");for(let P=0;P<E.children.length;P++){const D=E.children[P],F=parseSVGFloatAttribute(D,"offset",0),L=Color$1.shared.setValue(D.getAttribute("stop-color")).toNumber();R.addColorStop(F,L)}return R}function parseRadialGradient(E){return warn$1("[SVG Parser] Radial gradients are not yet supported"),new FillGradient(0,0,1,0)}function extractSvgUrlId(E){const A=E.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return A?A[1]:""}const styleAttributes={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function parseSVGStyle(E,A){const _=E.getAttribute("style"),I={},B={},T={strokeStyle:I,fillStyle:B,useFill:!1,useStroke:!1};for(const R in styleAttributes){const P=E.getAttribute(R);P&&parseAttribute(A,T,R,P.trim())}if(_){const R=_.split(";");for(let P=0;P<R.length;P++){const D=R[P].trim(),[F,L]=D.split(":");styleAttributes[F]&&parseAttribute(A,T,F,L.trim())}}return{strokeStyle:T.useStroke?I:null,fillStyle:T.useFill?B:null,useFill:T.useFill,useStroke:T.useStroke}}function parseAttribute(E,A,_,I){switch(_){case"stroke":if(I!=="none"){if(I.startsWith("url(")){const B=extractSvgUrlId(I);A.strokeStyle.fill=E.defs[B]}else A.strokeStyle.color=Color$1.shared.setValue(I).toNumber();A.useStroke=!0}break;case"stroke-width":A.strokeStyle.width=Number(I);break;case"fill":if(I!=="none"){if(I.startsWith("url(")){const B=extractSvgUrlId(I);A.fillStyle.fill=E.defs[B]}else A.fillStyle.color=Color$1.shared.setValue(I).toNumber();A.useFill=!0}break;case"fill-opacity":A.fillStyle.alpha=Number(I);break;case"stroke-opacity":A.strokeStyle.alpha=Number(I);break;case"opacity":A.fillStyle.alpha=Number(I),A.strokeStyle.alpha=Number(I);break}}function SVGParser(E,A){if(typeof E=="string"){const R=document.createElement("div");R.innerHTML=E.trim(),E=R.querySelector("svg")}const _={context:A,defs:{},path:new GraphicsPath};parseSVGDefinitions(E,_);const I=E.children,{fillStyle:B,strokeStyle:T}=parseSVGStyle(E,_);for(let R=0;R<I.length;R++){const P=I[R];P.nodeName.toLowerCase()!=="defs"&&renderChildren(P,_,B,T)}return A}function renderChildren(E,A,_,I){const B=E.children,{fillStyle:T,strokeStyle:R}=parseSVGStyle(E,A);T&&_?_={..._,...T}:T&&(_=T),R&&I?I={...I,...R}:R&&(I=R);const P=!_&&!I;P&&(_={color:0});let D,F,L,U,V,K,J,ee,ie,ne,ce,fe,de,pe,ve,ye,_e;switch(E.nodeName.toLowerCase()){case"path":pe=E.getAttribute("d"),E.getAttribute("fill-rule")==="evenodd"&&warn$1("SVG Evenodd fill rule not supported, your svg may render incorrectly"),ve=new GraphicsPath(pe,!0),A.context.path(ve),_&&A.context.fill(_),I&&A.context.stroke(I);break;case"circle":J=parseSVGFloatAttribute(E,"cx",0),ee=parseSVGFloatAttribute(E,"cy",0),ie=parseSVGFloatAttribute(E,"r",0),A.context.ellipse(J,ee,ie,ie),_&&A.context.fill(_),I&&A.context.stroke(I);break;case"rect":D=parseSVGFloatAttribute(E,"x",0),F=parseSVGFloatAttribute(E,"y",0),ye=parseSVGFloatAttribute(E,"width",0),_e=parseSVGFloatAttribute(E,"height",0),ne=parseSVGFloatAttribute(E,"rx",0),ce=parseSVGFloatAttribute(E,"ry",0),ne||ce?A.context.roundRect(D,F,ye,_e,ne||ce):A.context.rect(D,F,ye,_e),_&&A.context.fill(_),I&&A.context.stroke(I);break;case"ellipse":J=parseSVGFloatAttribute(E,"cx",0),ee=parseSVGFloatAttribute(E,"cy",0),ne=parseSVGFloatAttribute(E,"rx",0),ce=parseSVGFloatAttribute(E,"ry",0),A.context.beginPath(),A.context.ellipse(J,ee,ne,ce),_&&A.context.fill(_),I&&A.context.stroke(I);break;case"line":L=parseSVGFloatAttribute(E,"x1",0),U=parseSVGFloatAttribute(E,"y1",0),V=parseSVGFloatAttribute(E,"x2",0),K=parseSVGFloatAttribute(E,"y2",0),A.context.beginPath(),A.context.moveTo(L,U),A.context.lineTo(V,K),I&&A.context.stroke(I);break;case"polygon":de=E.getAttribute("points"),fe=de.match(/\d+/g).map(be=>parseInt(be,10)),A.context.poly(fe,!0),_&&A.context.fill(_),I&&A.context.stroke(I);break;case"polyline":de=E.getAttribute("points"),fe=de.match(/\d+/g).map(be=>parseInt(be,10)),A.context.poly(fe,!1),I&&A.context.stroke(I);break;case"g":case"svg":break;default:{warn$1(`[SVG parser] <${E.nodeName}> elements unsupported`);break}}P&&(_=null);for(let be=0;be<B.length;be++)renderChildren(B[be],A,_,I)}function isColorLike(E){return Color$1.isColorLike(E)}function isFillPattern(E){return E instanceof FillPattern}function isFillGradient(E){return E instanceof FillGradient}function isTexture(E){return E instanceof Texture}function handleColorLike(E,A,_){const I=Color$1.shared.setValue(A??0);return E.color=I.toNumber(),E.alpha=I.alpha===1?_.alpha:I.alpha,E.texture=Texture.WHITE,{..._,...E}}function handleTexture(E,A,_){return E.texture=A,{..._,...E}}function handleFillPattern(E,A,_){return E.fill=A,E.color=16777215,E.texture=A.texture,E.matrix=A.transform,{..._,...E}}function handleFillGradient(E,A,_){return A.buildGradient(),E.fill=A,E.color=16777215,E.texture=A.texture,E.matrix=A.transform,E.textureSpace=A.textureSpace,{..._,...E}}function handleFillObject(E,A){const _={...A,...E},I=Color$1.shared.setValue(_.color);return _.alpha*=I.alpha,_.color=I.toNumber(),_}function toFillStyle(E,A){if(E==null)return null;const _={},I=E;return isColorLike(E)?handleColorLike(_,E,A):isTexture(E)?handleTexture(_,E,A):isFillPattern(E)?handleFillPattern(_,E,A):isFillGradient(E)?handleFillGradient(_,E,A):I.fill&&isFillPattern(I.fill)?handleFillPattern(I,I.fill,A):I.fill&&isFillGradient(I.fill)?handleFillGradient(I,I.fill,A):handleFillObject(I,A)}function toStrokeStyle(E,A){const{width:_,alignment:I,miterLimit:B,cap:T,join:R,pixelLine:P,...D}=A,F=toFillStyle(E,D);return F?{width:_,alignment:I,miterLimit:B,cap:T,join:R,pixelLine:P,...F}:null}const tmpPoint=new Point$1,tempMatrix$3=new Matrix,_GraphicsContext=class hi extends EventEmitter{constructor(){super(...arguments),this.uid=uid$1("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new GraphicsPath,this._transform=new Matrix,this._fillStyle={...hi.defaultFillStyle},this._strokeStyle={...hi.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new Bounds,this._boundsDirty=!0}clone(){const A=new hi;return A.batchMode=this.batchMode,A.instructions=this.instructions.slice(),A._activePath=this._activePath.clone(),A._transform=this._transform.clone(),A._fillStyle={...this._fillStyle},A._strokeStyle={...this._strokeStyle},A._stateStack=this._stateStack.slice(),A._bounds=this._bounds.clone(),A._boundsDirty=!0,A}get fillStyle(){return this._fillStyle}set fillStyle(A){this._fillStyle=toFillStyle(A,hi.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(A){this._strokeStyle=toStrokeStyle(A,hi.defaultStrokeStyle)}setFillStyle(A){return this._fillStyle=toFillStyle(A,hi.defaultFillStyle),this}setStrokeStyle(A){return this._strokeStyle=toFillStyle(A,hi.defaultStrokeStyle),this}texture(A,_,I,B,T,R){return this.instructions.push({action:"texture",data:{image:A,dx:I||0,dy:B||0,dw:T||A.frame.width,dh:R||A.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:_?Color$1.shared.setValue(_).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new GraphicsPath,this}fill(A,_){let I;const B=this.instructions[this.instructions.length-1];return this._tick===0&&B&&B.action==="stroke"?I=B.data.path:I=this._activePath.clone(),I?(A!=null&&(_!==void 0&&typeof A=="number"&&(deprecation(v8_0_0,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),A={color:A,alpha:_}),this._fillStyle=toFillStyle(A,hi.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:I}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:A,y:_}=this._activePath.getLastPoint(Point$1.shared);this._activePath.clear(),this._activePath.moveTo(A,_)}stroke(A){let _;const I=this.instructions[this.instructions.length-1];return this._tick===0&&I&&I.action==="fill"?_=I.data.path:_=this._activePath.clone(),_?(A!=null&&(this._strokeStyle=toStrokeStyle(A,hi.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:_}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let A=0;A<2;A++){const _=this.instructions[this.instructions.length-1-A],I=this._activePath.clone();if(_&&(_.action==="stroke"||_.action==="fill"))if(_.data.hole)_.data.hole.addPath(I);else{_.data.hole=I;break}}return this._initNextPathLocation(),this}arc(A,_,I,B,T,R){this._tick++;const P=this._transform;return this._activePath.arc(P.a*A+P.c*_+P.tx,P.b*A+P.d*_+P.ty,I,B,T,R),this}arcTo(A,_,I,B,T){this._tick++;const R=this._transform;return this._activePath.arcTo(R.a*A+R.c*_+R.tx,R.b*A+R.d*_+R.ty,R.a*I+R.c*B+R.tx,R.b*I+R.d*B+R.ty,T),this}arcToSvg(A,_,I,B,T,R,P){this._tick++;const D=this._transform;return this._activePath.arcToSvg(A,_,I,B,T,D.a*R+D.c*P+D.tx,D.b*R+D.d*P+D.ty),this}bezierCurveTo(A,_,I,B,T,R,P){this._tick++;const D=this._transform;return this._activePath.bezierCurveTo(D.a*A+D.c*_+D.tx,D.b*A+D.d*_+D.ty,D.a*I+D.c*B+D.tx,D.b*I+D.d*B+D.ty,D.a*T+D.c*R+D.tx,D.b*T+D.d*R+D.ty,P),this}closePath(){return this._tick++,this._activePath?.closePath(),this}ellipse(A,_,I,B){return this._tick++,this._activePath.ellipse(A,_,I,B,this._transform.clone()),this}circle(A,_,I){return this._tick++,this._activePath.circle(A,_,I,this._transform.clone()),this}path(A){return this._tick++,this._activePath.addPath(A,this._transform.clone()),this}lineTo(A,_){this._tick++;const I=this._transform;return this._activePath.lineTo(I.a*A+I.c*_+I.tx,I.b*A+I.d*_+I.ty),this}moveTo(A,_){this._tick++;const I=this._transform,B=this._activePath.instructions,T=I.a*A+I.c*_+I.tx,R=I.b*A+I.d*_+I.ty;return B.length===1&&B[0].action==="moveTo"?(B[0].data[0]=T,B[0].data[1]=R,this):(this._activePath.moveTo(T,R),this)}quadraticCurveTo(A,_,I,B,T){this._tick++;const R=this._transform;return this._activePath.quadraticCurveTo(R.a*A+R.c*_+R.tx,R.b*A+R.d*_+R.ty,R.a*I+R.c*B+R.tx,R.b*I+R.d*B+R.ty,T),this}rect(A,_,I,B){return this._tick++,this._activePath.rect(A,_,I,B,this._transform.clone()),this}roundRect(A,_,I,B,T){return this._tick++,this._activePath.roundRect(A,_,I,B,T,this._transform.clone()),this}poly(A,_){return this._tick++,this._activePath.poly(A,_,this._transform.clone()),this}regularPoly(A,_,I,B,T=0,R){return this._tick++,this._activePath.regularPoly(A,_,I,B,T,R),this}roundPoly(A,_,I,B,T,R){return this._tick++,this._activePath.roundPoly(A,_,I,B,T,R),this}roundShape(A,_,I,B){return this._tick++,this._activePath.roundShape(A,_,I,B),this}filletRect(A,_,I,B,T){return this._tick++,this._activePath.filletRect(A,_,I,B,T),this}chamferRect(A,_,I,B,T,R){return this._tick++,this._activePath.chamferRect(A,_,I,B,T,R),this}star(A,_,I,B,T=0,R=0){return this._tick++,this._activePath.star(A,_,I,B,T,R,this._transform.clone()),this}svg(A){return this._tick++,SVGParser(A,this),this}restore(){const A=this._stateStack.pop();return A&&(this._transform=A.transform,this._fillStyle=A.fillStyle,this._strokeStyle=A.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(A){return this._transform.rotate(A),this}scale(A,_=A){return this._transform.scale(A,_),this}setTransform(A,_,I,B,T,R){return A instanceof Matrix?(this._transform.set(A.a,A.b,A.c,A.d,A.tx,A.ty),this):(this._transform.set(A,_,I,B,T,R),this)}transform(A,_,I,B,T,R){return A instanceof Matrix?(this._transform.append(A),this):(tempMatrix$3.set(A,_,I,B,T,R),this._transform.append(tempMatrix$3),this)}translate(A,_=A){return this._transform.translate(A,_),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;const A=this._bounds;A.clear();for(let _=0;_<this.instructions.length;_++){const I=this.instructions[_],B=I.action;if(B==="fill"){const T=I.data;A.addBounds(T.path.bounds)}else if(B==="texture"){const T=I.data;A.addFrame(T.dx,T.dy,T.dx+T.dw,T.dy+T.dh,T.transform)}if(B==="stroke"){const T=I.data,R=T.style.alignment,P=T.style.width*(1-R),D=T.path.bounds;A.addFrame(D.minX-P,D.minY-P,D.maxX+P,D.maxY+P)}}return A}containsPoint(A){if(!this.bounds.containsPoint(A.x,A.y))return!1;const _=this.instructions;let I=!1;for(let B=0;B<_.length;B++){const T=_[B],R=T.data,P=R.path;if(!T.action||!P)continue;const D=R.style,F=P.shapePath.shapePrimitives;for(let L=0;L<F.length;L++){const U=F[L].shape;if(!D||!U)continue;const V=F[L].transform,K=V?V.applyInverse(A,tmpPoint):A;if(T.action==="fill")I=U.contains(K.x,K.y);else{const ee=D;I=U.strokeContains(K.x,K.y,ee.width,ee.alignment)}const J=R.hole;if(J){const ee=J.shapePath?.shapePrimitives;if(ee)for(let ie=0;ie<ee.length;ie++)ee[ie].shape.contains(K.x,K.y)&&(I=!1)}if(I)return!0}}return I}destroy(A=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof A=="boolean"?A:A?.texture){const I=typeof A=="boolean"?A:A?.textureSource;this._fillStyle.texture&&(this._fillStyle.fill&&"uid"in this._fillStyle.fill?this._fillStyle.fill.destroy():this._fillStyle.texture.destroy(I)),this._strokeStyle.texture&&(this._strokeStyle.fill&&"uid"in this._strokeStyle.fill?this._strokeStyle.fill.destroy():this._strokeStyle.texture.destroy(I))}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};_GraphicsContext.defaultFillStyle={color:16777215,alpha:1,texture:Texture.WHITE,matrix:null,fill:null,textureSpace:"local"};_GraphicsContext.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:Texture.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let GraphicsContext=_GraphicsContext;const valuesToIterateForKeys=["align","breakWords","cssOverrides","fontVariant","fontWeight","leading","letterSpacing","lineHeight","padding","textBaseline","trim","whiteSpace","wordWrap","wordWrapWidth","fontFamily","fontStyle","fontSize"];function generateTextStyleKey(E){const A=[];let _=0;for(let I=0;I<valuesToIterateForKeys.length;I++){const B=`_${valuesToIterateForKeys[I]}`;A[_++]=E[B]}return _=addFillStyleKey(E._fill,A,_),_=addStokeStyleKey(E._stroke,A,_),_=addDropShadowKey(E.dropShadow,A,_),_=addFiltersKey(E.filters,A,_),A.join("-")}function addFiltersKey(E,A,_){if(!E)return _;for(const I of E)A[_++]=I.uid;return _}function addFillStyleKey(E,A,_){return E&&(A[_++]=E.color,A[_++]=E.alpha,A[_++]=E.fill?.styleKey),_}function addStokeStyleKey(E,A,_){return E&&(_=addFillStyleKey(E,A,_),A[_++]=E.width,A[_++]=E.alignment,A[_++]=E.cap,A[_++]=E.join,A[_++]=E.miterLimit),_}function addDropShadowKey(E,A,_){return E&&(A[_++]=E.alpha,A[_++]=E.angle,A[_++]=E.blur,A[_++]=E.distance,A[_++]=Color$1.shared.setValue(E.color).toNumber()),_}const _TextStyle=class bi extends EventEmitter{constructor(A={}){super(),convertV7Tov8Style(A);const _={...bi.defaultTextStyle,...A};for(const I in _){const B=I;this[B]=_[I]}this.update()}get align(){return this._align}set align(A){this._align=A,this.update()}get breakWords(){return this._breakWords}set breakWords(A){this._breakWords=A,this.update()}get dropShadow(){return this._dropShadow}set dropShadow(A){A!==null&&typeof A=="object"?this._dropShadow=this._createProxy({...bi.defaultDropShadow,...A}):this._dropShadow=A?this._createProxy({...bi.defaultDropShadow}):null,this.update()}get fontFamily(){return this._fontFamily}set fontFamily(A){this._fontFamily=A,this.update()}get fontSize(){return this._fontSize}set fontSize(A){typeof A=="string"?this._fontSize=parseInt(A,10):this._fontSize=A,this.update()}get fontStyle(){return this._fontStyle}set fontStyle(A){this._fontStyle=A.toLowerCase(),this.update()}get fontVariant(){return this._fontVariant}set fontVariant(A){this._fontVariant=A,this.update()}get fontWeight(){return this._fontWeight}set fontWeight(A){this._fontWeight=A,this.update()}get leading(){return this._leading}set leading(A){this._leading=A,this.update()}get letterSpacing(){return this._letterSpacing}set letterSpacing(A){this._letterSpacing=A,this.update()}get lineHeight(){return this._lineHeight}set lineHeight(A){this._lineHeight=A,this.update()}get padding(){return this._padding}set padding(A){this._padding=A,this.update()}get filters(){return this._filters}set filters(A){this._filters=A,this.update()}get trim(){return this._trim}set trim(A){this._trim=A,this.update()}get textBaseline(){return this._textBaseline}set textBaseline(A){this._textBaseline=A,this.update()}get whiteSpace(){return this._whiteSpace}set whiteSpace(A){this._whiteSpace=A,this.update()}get wordWrap(){return this._wordWrap}set wordWrap(A){this._wordWrap=A,this.update()}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(A){this._wordWrapWidth=A,this.update()}get fill(){return this._originalFill}set fill(A){A!==this._originalFill&&(this._originalFill=A,this._isFillStyle(A)&&(this._originalFill=this._createProxy({...GraphicsContext.defaultFillStyle,...A},()=>{this._fill=toFillStyle({...this._originalFill},GraphicsContext.defaultFillStyle)})),this._fill=toFillStyle(A===0?"black":A,GraphicsContext.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(A){A!==this._originalStroke&&(this._originalStroke=A,this._isFillStyle(A)&&(this._originalStroke=this._createProxy({...GraphicsContext.defaultStrokeStyle,...A},()=>{this._stroke=toStrokeStyle({...this._originalStroke},GraphicsContext.defaultStrokeStyle)})),this._stroke=toStrokeStyle(A,GraphicsContext.defaultStrokeStyle),this.update())}_generateKey(){return this._styleKey=generateTextStyleKey(this),this._styleKey}update(){this._styleKey=null,this.emit("update",this)}reset(){const A=bi.defaultTextStyle;for(const _ in A)this[_]=A[_]}get styleKey(){return this._styleKey||this._generateKey()}clone(){return new bi({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,filters:this._filters?[...this._filters]:void 0})}_getFinalPadding(){let A=0;if(this._filters)for(let _=0;_<this._filters.length;_++)A+=this._filters[_].padding;return Math.max(this._padding,A)}destroy(A=!1){if(this.removeAllListeners(),typeof A=="boolean"?A:A?.texture){const I=typeof A=="boolean"?A:A?.textureSource;this._fill?.texture&&this._fill.texture.destroy(I),this._originalFill?.texture&&this._originalFill.texture.destroy(I),this._stroke?.texture&&this._stroke.texture.destroy(I),this._originalStroke?.texture&&this._originalStroke.texture.destroy(I)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(A,_){return new Proxy(A,{set:(I,B,T)=>(I[B]=T,_?.(B,T),this.update(),!0)})}_isFillStyle(A){return(A??null)!==null&&!(Color$1.isColorLike(A)||A instanceof FillGradient||A instanceof FillPattern)}};_TextStyle.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};_TextStyle.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let TextStyle=_TextStyle;function convertV7Tov8Style(E){const A=E;if(typeof A.dropShadow=="boolean"&&A.dropShadow){const _=TextStyle.defaultDropShadow;E.dropShadow={alpha:A.dropShadowAlpha??_.alpha,angle:A.dropShadowAngle??_.angle,blur:A.dropShadowBlur??_.blur,color:A.dropShadowColor??_.color,distance:A.dropShadowDistance??_.distance}}if(A.strokeThickness!==void 0){deprecation(v8_0_0,"strokeThickness is now a part of stroke");const _=A.stroke;let I={};if(Color$1.isColorLike(_))I.color=_;else if(_ instanceof FillGradient||_ instanceof FillPattern)I.fill=_;else if(Object.hasOwnProperty.call(_,"color")||Object.hasOwnProperty.call(_,"fill"))I=_;else throw new Error("Invalid stroke value.");E.stroke={...I,width:A.strokeThickness}}if(Array.isArray(A.fillGradientStops)){if(deprecation(v8_0_0,"gradient fill is now a fill pattern: `new FillGradient(...)`"),!Array.isArray(A.fill)||A.fill.length===0)throw new Error("Invalid fill value. Expected an array of colors for gradient fill.");A.fill.length!==A.fillGradientStops.length&&warn$1("The number of fill colors must match the number of fill gradient stops.");const _=new FillGradient({start:{x:0,y:0},end:{x:0,y:1},textureSpace:"local"}),I=A.fillGradientStops.slice(),B=A.fill.map(T=>Color$1.shared.setValue(T).toNumber());I.forEach((T,R)=>{_.addColorStop(T,B[R])}),E.fill={fill:_}}}class CanvasPoolClass{constructor(A){this._canvasPool=Object.create(null),this.canvasOptions=A||{},this.enableFullScreen=!1}_createCanvasAndContext(A,_){const I=DOMAdapter.get().createCanvas();I.width=A,I.height=_;const B=I.getContext("2d");return{canvas:I,context:B}}getOptimalCanvasAndContext(A,_,I=1){A=Math.ceil(A*I-1e-6),_=Math.ceil(_*I-1e-6),A=nextPow2(A),_=nextPow2(_);const B=(A<<17)+(_<<1);this._canvasPool[B]||(this._canvasPool[B]=[]);let T=this._canvasPool[B].pop();return T||(T=this._createCanvasAndContext(A,_)),T}returnCanvasAndContext(A){const _=A.canvas,{width:I,height:B}=_,T=(I<<17)+(B<<1);A.context.resetTransform(),A.context.clearRect(0,0,I,B),this._canvasPool[T].push(A)}clear(){this._canvasPool={}}}const CanvasPool=new CanvasPoolClass,PRECISION=1e5;function getCanvasFillStyle(E,A,_,I=0){if(E.texture===Texture.WHITE&&!E.fill)return Color$1.shared.setValue(E.color).setAlpha(E.alpha??1).toHexa();if(E.fill){if(E.fill instanceof FillPattern){const B=E.fill,T=A.createPattern(B.texture.source.resource,"repeat"),R=B.transform.copyTo(Matrix.shared);return R.scale(B.texture.frame.width,B.texture.frame.height),T.setTransform(R),T}else if(E.fill instanceof FillGradient){const B=E.fill,T=B.type==="linear",R=B.textureSpace==="local";let P=1,D=1;R&&_&&(P=_.width+I,D=_.height+I);let F,L=!1;if(T){const{start:U,end:V}=B;F=A.createLinearGradient(U.x*P,U.y*D,V.x*P,V.y*D),L=Math.abs(V.x-U.x)<Math.abs((V.y-U.y)*.1)}else{const{center:U,innerRadius:V,outerCenter:K,outerRadius:J}=B;F=A.createRadialGradient(U.x*P,U.y*D,V*P,K.x*P,K.y*D,J*P)}if(L&&R&&_){const U=_.lineHeight/D;for(let V=0;V<_.lines.length;V++){const K=(V*_.lineHeight+I/2)/D;B.colorStops.forEach(J=>{const ee=K+J.offset*U;F.addColorStop(Math.floor(ee*PRECISION)/PRECISION,Color$1.shared.setValue(J.color).toHex())})}}else B.colorStops.forEach(U=>{F.addColorStop(U.offset,Color$1.shared.setValue(U.color).toHex())});return F}}else{const B=A.createPattern(E.texture.source.resource,"repeat"),T=E.matrix.copyTo(Matrix.shared);return T.scale(E.texture.frame.width,E.texture.frame.height),B.setTransform(T),B}return warn$1("FillStyle not recognised",E),"red"}const _DynamicBitmapFont=class un extends AbstractBitmapFont{constructor(A){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentMaxCharHeight=0,this._currentPageIndex=-1,this._skipKerning=!1;const _={...un.defaultOptions,...A};this._textureSize=_.textureSize,this._mipmap=_.mipmap;const I=_.style.clone();_.overrideFill&&(I._fill.color=16777215,I._fill.alpha=1,I._fill.texture=Texture.WHITE,I._fill.fill=null),this.applyFillAsTint=_.overrideFill;const B=I.fontSize;I.fontSize=this.baseMeasurementFontSize;const T=fontStringFromTextStyle(I);_.overrideSize?I._stroke&&(I._stroke.width*=this.baseRenderedFontSize/B):I.fontSize=this.baseRenderedFontSize=B,this._style=I,this._skipKerning=_.skipKerning??!1,this.resolution=_.resolution??1,this._padding=_.padding??4,_.textureStyle&&(this._textureStyle=_.textureStyle instanceof TextureStyle?_.textureStyle:new TextureStyle(_.textureStyle)),this.fontMetrics=CanvasTextMetrics.measureFont(T),this.lineHeight=I.lineHeight||this.fontMetrics.fontSize||I.fontSize}ensureCharacters(A){const _=CanvasTextMetrics.graphemeSegmenter(A).filter(ie=>!this._currentChars.includes(ie)).filter((ie,ne,ce)=>ce.indexOf(ie)===ne);if(!_.length)return;this._currentChars=[...this._currentChars,..._];let I;this._currentPageIndex===-1?I=this._nextPage():I=this.pages[this._currentPageIndex];let{canvas:B,context:T}=I.canvasAndContext,R=I.texture.source;const P=this._style;let D=this._currentX,F=this._currentY,L=this._currentMaxCharHeight;const U=this.baseRenderedFontSize/this.baseMeasurementFontSize,V=this._padding*U;let K=!1;const J=B.width/this.resolution,ee=B.height/this.resolution;for(let ie=0;ie<_.length;ie++){const ne=_[ie],ce=CanvasTextMetrics.measureText(ne,P,B,!1);ce.lineHeight=ce.height;const fe=ce.width*U,de=Math.ceil((P.fontStyle==="italic"?2:1)*fe),pe=ce.height*U,ve=de+V*2,ye=pe+V*2;if(K=!1,ne!==`
`&&ne!=="\r"&&ne!=="	"&&ne!==" "&&(K=!0,L=Math.ceil(Math.max(ye,L))),D+ve>J&&(F+=L,L=ye,D=0,F+L>ee)){R.update();const be=this._nextPage();B=be.canvasAndContext.canvas,T=be.canvasAndContext.context,R=be.texture.source,D=0,F=0,L=0}const _e=fe/U-(P.dropShadow?.distance??0)-(P._stroke?.width??0);if(this.chars[ne]={id:ne.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:_e,kerning:{}},K){this._drawGlyph(T,ce,D+V,F+V,U,P);const be=R.width*U,Te=R.height*U,ue=new Rectangle(D/be*R.width,F/Te*R.height,ve/be*R.width,ye/Te*R.height);this.chars[ne].texture=new Texture({source:R,frame:ue}),D+=Math.ceil(ve)}}R.update(),this._currentX=D,this._currentY=F,this._currentMaxCharHeight=L,this._skipKerning&&this._applyKerning(_,T)}get pageTextures(){return deprecation(v8_0_0,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(A,_){const I=this._measureCache;for(let B=0;B<A.length;B++){const T=A[B];for(let R=0;R<this._currentChars.length;R++){const P=this._currentChars[R];let D=I[T];D||(D=I[T]=_.measureText(T).width);let F=I[P];F||(F=I[P]=_.measureText(P).width);let L=_.measureText(T+P).width,U=L-(D+F);U&&(this.chars[T].kerning[P]=U),L=_.measureText(T+P).width,U=L-(D+F),U&&(this.chars[P].kerning[T]=U)}}}_nextPage(){this._currentPageIndex++;const A=this.resolution,_=CanvasPool.getOptimalCanvasAndContext(this._textureSize,this._textureSize,A);this._setupContext(_.context,this._style,A);const I=A*(this.baseRenderedFontSize/this.baseMeasurementFontSize),B=new Texture({source:new ImageSource({resource:_.canvas,resolution:I,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})});this._textureStyle&&(B.source.style=this._textureStyle);const T={canvasAndContext:_,texture:B};return this.pages[this._currentPageIndex]=T,T}_setupContext(A,_,I){_.fontSize=this.baseRenderedFontSize,A.scale(I,I),A.font=fontStringFromTextStyle(_),_.fontSize=this.baseMeasurementFontSize,A.textBaseline=_.textBaseline;const B=_._stroke,T=B?.width??0;if(B&&(A.lineWidth=T,A.lineJoin=B.join,A.miterLimit=B.miterLimit,A.strokeStyle=getCanvasFillStyle(B,A)),_._fill&&(A.fillStyle=getCanvasFillStyle(_._fill,A)),_.dropShadow){const R=_.dropShadow,P=Color$1.shared.setValue(R.color).toArray(),D=R.blur*I,F=R.distance*I;A.shadowColor=`rgba(${P[0]*255},${P[1]*255},${P[2]*255},${R.alpha})`,A.shadowBlur=D,A.shadowOffsetX=Math.cos(R.angle)*F,A.shadowOffsetY=Math.sin(R.angle)*F}else A.shadowColor="black",A.shadowBlur=0,A.shadowOffsetX=0,A.shadowOffsetY=0}_drawGlyph(A,_,I,B,T,R){const P=_.text,D=_.fontProperties,L=(R._stroke?.width??0)*T,U=I+L/2,V=B-L/2,K=D.descent*T,J=_.lineHeight*T;let ee=!1;R.stroke&&L&&(ee=!0,A.strokeText(P,U,V+J-K));const{shadowBlur:ie,shadowOffsetX:ne,shadowOffsetY:ce}=A;R._fill&&(ee&&(A.shadowBlur=0,A.shadowOffsetX=0,A.shadowOffsetY=0),A.fillText(P,U,V+J-K)),ee&&(A.shadowBlur=ie,A.shadowOffsetX=ne,A.shadowOffsetY=ce)}destroy(){super.destroy();for(let A=0;A<this.pages.length;A++){const{canvasAndContext:_,texture:I}=this.pages[A];CanvasPool.returnCanvasAndContext(_),I.destroy(!0)}this.pages=null}};_DynamicBitmapFont.defaultOptions={textureSize:512,style:new TextStyle,mipmap:!0};let DynamicBitmapFont=_DynamicBitmapFont;function getBitmapTextLayout(E,A,_,I){const B={width:0,height:0,offsetY:0,scale:A.fontSize/_.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};B.offsetY=_.baseLineOffset;let T=B.lines[0],R=null,P=!0;const D={width:0,start:0,index:0,positions:[],chars:[]},F=_.baseMeasurementFontSize/A.fontSize,L=A.letterSpacing*F,U=A.wordWrapWidth*F,V=A.lineHeight?A.lineHeight*F:_.lineHeight,K=A.wordWrap&&A.breakWords,J=ne=>{const ce=T.width;for(let fe=0;fe<D.index;fe++){const de=ne.positions[fe];T.chars.push(ne.chars[fe]),T.charPositions.push(de+ce)}T.width+=ne.width,P=!1,D.width=0,D.index=0,D.chars.length=0},ee=()=>{let ne=T.chars.length-1;if(I){let ce=T.chars[ne];for(;ce===" ";)T.width-=_.chars[ce].xAdvance,ce=T.chars[--ne]}B.width=Math.max(B.width,T.width),T={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},P=!0,B.lines.push(T),B.height+=V},ie=ne=>ne-L>U;for(let ne=0;ne<E.length+1;ne++){let ce;const fe=ne===E.length;fe||(ce=E[ne]);const de=_.chars[ce]||_.chars[" "];if(/(?:\s)/.test(ce)||ce==="\r"||ce===`
`||fe){if(!P&&A.wordWrap&&ie(T.width+D.width)?(ee(),J(D),fe||T.charPositions.push(0)):(D.start=T.width,J(D),fe||T.charPositions.push(0)),ce==="\r"||ce===`
`)T.width!==0&&ee();else if(!fe){const _e=de.xAdvance+(de.kerning[R]||0)+L;T.width+=_e,T.spaceWidth=_e,T.spacesIndex.push(T.charPositions.length),T.chars.push(ce)}}else{const ye=de.kerning[R]||0,_e=de.xAdvance+ye+L;K&&ie(T.width+D.width+_e)&&(J(D),ee()),D.positions[D.index++]=D.width+ye,D.chars.push(ce),D.width+=_e}R=ce}return ee(),A.align==="center"?alignCenter(B):A.align==="right"?alignRight(B):A.align==="justify"&&alignJustify(B),B}function alignCenter(E){for(let A=0;A<E.lines.length;A++){const _=E.lines[A],I=E.width/2-_.width/2;for(let B=0;B<_.charPositions.length;B++)_.charPositions[B]+=I}}function alignRight(E){for(let A=0;A<E.lines.length;A++){const _=E.lines[A],I=E.width-_.width;for(let B=0;B<_.charPositions.length;B++)_.charPositions[B]+=I}}function alignJustify(E){const A=E.width;for(let _=0;_<E.lines.length;_++){const I=E.lines[_];let B=0,T=I.spacesIndex[B++],R=0;const P=I.spacesIndex.length,F=(A-I.width)/P;for(let L=0;L<I.charPositions.length;L++)L===T&&(T=I.spacesIndex[B++],R+=F),I.charPositions[L]+=R}}function resolveCharacters(E){if(E==="")return[];typeof E=="string"&&(E=[E]);const A=[];for(let _=0,I=E.length;_<I;_++){const B=E[_];if(Array.isArray(B)){if(B.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${B.length}.`);if(B[0].length===0||B[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const T=B[0].charCodeAt(0),R=B[1].charCodeAt(0);if(R<T)throw new Error("[BitmapFont]: Invalid character range.");for(let P=T,D=R;P<=D;P++)A.push(String.fromCharCode(P))}else A.push(...Array.from(B))}if(A.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return A}let fontCount=0;class BitmapFontManagerClass{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1,textureStyle:null}}getFont(A,_){let I=`${_.fontFamily}-bitmap`,B=!0;if(_._fill.fill&&!_._stroke)I+=_._fill.fill.styleKey,B=!1;else if(_._stroke||_.dropShadow){let R=_.styleKey;R=R.substring(0,R.lastIndexOf("-")),I=`${R}-bitmap`,B=!1}if(!Cache.has(I)){const R=Object.create(_);R.lineHeight=0;const P=new DynamicBitmapFont({style:R,overrideFill:B,overrideSize:!0,...this.defaultOptions});fontCount++,fontCount>50&&warn$1("BitmapText",`You have dynamically created ${fontCount} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),P.once("destroy",()=>{fontCount--,Cache.remove(I)}),Cache.set(I,P)}const T=Cache.get(I);return T.ensureCharacters?.(A),T}getLayout(A,_,I=!0){const B=this.getFont(A,_),T=CanvasTextMetrics.graphemeSegmenter(A);return getBitmapTextLayout(T,_,B,I)}measureText(A,_,I=!0){return this.getLayout(A,_,I)}install(...A){let _=A[0];typeof _=="string"&&(_={name:_,style:A[1],chars:A[2]?.chars,resolution:A[2]?.resolution,padding:A[2]?.padding,skipKerning:A[2]?.skipKerning},deprecation(v8_0_0,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const I=_?.name;if(!I)throw new Error("[BitmapFontManager] Property `name` is required.");_={...this.defaultOptions,..._};const B=_.style,T=B instanceof TextStyle?B:new TextStyle(B),R=_.dynamicFill??this._canUseTintForStyle(T),P=new DynamicBitmapFont({style:T,overrideFill:R,skipKerning:_.skipKerning,padding:_.padding,resolution:_.resolution,overrideSize:!1,textureStyle:_.textureStyle}),D=resolveCharacters(_.chars);return P.ensureCharacters(D.join("")),Cache.set(`${I}-bitmap`,P),P.once("destroy",()=>Cache.remove(`${I}-bitmap`)),P}uninstall(A){const _=`${A}-bitmap`,I=Cache.get(_);I&&I.destroy()}_canUseTintForStyle(A){return!A._stroke&&(!A.dropShadow||A.dropShadow.color===0)&&!A._fill.fill&&A._fill.color===16777215}}const BitmapFontManager=new BitmapFontManagerClass;class BitmapFont extends AbstractBitmapFont{constructor(A,_){super();const{textures:I,data:B}=A;Object.keys(B.pages).forEach(T=>{const R=B.pages[parseInt(T,10)],P=I[R.id];this.pages.push({texture:P})}),Object.keys(B.chars).forEach(T=>{const R=B.chars[T],{frame:P,source:D,rotate:F}=I[R.page],L=groupD8.transformRectCoords(R,P,F,new Rectangle),U=new Texture({frame:L,orig:new Rectangle(0,0,R.width,R.height),source:D,rotate:F});this.chars[T]={id:T.codePointAt(0),xOffset:R.xOffset,yOffset:R.yOffset,xAdvance:R.xAdvance,kerning:R.kerning??{},texture:U}}),this.baseRenderedFontSize=B.fontSize,this.baseMeasurementFontSize=B.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:B.fontSize},this.baseLineOffset=B.baseLineOffset,this.lineHeight=B.lineHeight,this.fontFamily=B.fontFamily,this.distanceField=B.distanceField??{type:"none",range:0},this.url=_}destroy(){super.destroy();for(let A=0;A<this.pages.length;A++){const{texture:_}=this.pages[A];_.destroy(!0)}this.pages=null}static install(A){BitmapFontManager.install(A)}static uninstall(A){BitmapFontManager.uninstall(A)}}const bitmapFontTextParser={test(E){return typeof E=="string"&&E.startsWith("info face=")},parse(E){const A=E.match(/^[a-z]+\s+.+$/gm),_={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const U in A){const V=A[U].match(/^[a-z]+/gm)[0],K=A[U].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),J={};for(const ee in K){const ie=K[ee].split("="),ne=ie[0],ce=ie[1].replace(/"/gm,""),fe=parseFloat(ce),de=isNaN(fe)?ce:fe;J[ne]=de}_[V].push(J)}const I={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[B]=_.info,[T]=_.common,[R]=_.distanceField??[];R&&(I.distanceField={range:parseInt(R.distanceRange,10),type:R.fieldType}),I.fontSize=parseInt(B.size,10),I.fontFamily=B.face,I.lineHeight=parseInt(T.lineHeight,10);const P=_.page;for(let U=0;U<P.length;U++)I.pages.push({id:parseInt(P[U].id,10)||0,file:P[U].file});const D={};I.baseLineOffset=I.lineHeight-parseInt(T.base,10);const F=_.char;for(let U=0;U<F.length;U++){const V=F[U],K=parseInt(V.id,10);let J=V.letter??V.char??String.fromCharCode(K);J==="space"&&(J=" "),D[K]=J,I.chars[J]={id:K,page:parseInt(V.page,10)||0,x:parseInt(V.x,10),y:parseInt(V.y,10),width:parseInt(V.width,10),height:parseInt(V.height,10),xOffset:parseInt(V.xoffset,10),yOffset:parseInt(V.yoffset,10),xAdvance:parseInt(V.xadvance,10),kerning:{}}}const L=_.kerning||[];for(let U=0;U<L.length;U++){const V=parseInt(L[U].first,10),K=parseInt(L[U].second,10),J=parseInt(L[U].amount,10);I.chars[D[K]].kerning[D[V]]=J}return I}},bitmapFontXMLParser={test(E){const A=E;return typeof A!="string"&&"getElementsByTagName"in A&&A.getElementsByTagName("page").length&&A.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(E){const A={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},_=E.getElementsByTagName("info")[0],I=E.getElementsByTagName("common")[0],B=E.getElementsByTagName("distanceField")[0];B&&(A.distanceField={type:B.getAttribute("fieldType"),range:parseInt(B.getAttribute("distanceRange"),10)});const T=E.getElementsByTagName("page"),R=E.getElementsByTagName("char"),P=E.getElementsByTagName("kerning");A.fontSize=parseInt(_.getAttribute("size"),10),A.fontFamily=_.getAttribute("face"),A.lineHeight=parseInt(I.getAttribute("lineHeight"),10);for(let F=0;F<T.length;F++)A.pages.push({id:parseInt(T[F].getAttribute("id"),10)||0,file:T[F].getAttribute("file")});const D={};A.baseLineOffset=A.lineHeight-parseInt(I.getAttribute("base"),10);for(let F=0;F<R.length;F++){const L=R[F],U=parseInt(L.getAttribute("id"),10);let V=L.getAttribute("letter")??L.getAttribute("char")??String.fromCharCode(U);V==="space"&&(V=" "),D[U]=V,A.chars[V]={id:U,page:parseInt(L.getAttribute("page"),10)||0,x:parseInt(L.getAttribute("x"),10),y:parseInt(L.getAttribute("y"),10),width:parseInt(L.getAttribute("width"),10),height:parseInt(L.getAttribute("height"),10),xOffset:parseInt(L.getAttribute("xoffset"),10),yOffset:parseInt(L.getAttribute("yoffset"),10),xAdvance:parseInt(L.getAttribute("xadvance"),10),kerning:{}}}for(let F=0;F<P.length;F++){const L=parseInt(P[F].getAttribute("first"),10),U=parseInt(P[F].getAttribute("second"),10),V=parseInt(P[F].getAttribute("amount"),10);A.chars[D[U]].kerning[D[L]]=V}return A}},bitmapFontXMLStringParser={test(E){return typeof E=="string"&&E.includes("<font>")?bitmapFontXMLParser.test(DOMAdapter.get().parseXML(E)):!1},parse(E){return bitmapFontXMLParser.parse(DOMAdapter.get().parseXML(E))}},validExtensions=[".xml",".fnt"],bitmapFontCachePlugin={extension:{type:ExtensionType.CacheParser,name:"cacheBitmapFont"},test:E=>E instanceof BitmapFont,getCacheableAssets(E,A){const _={};return E.forEach(I=>{_[I]=A,_[`${I}-bitmap`]=A}),_[`${A.fontFamily}-bitmap`]=A,_}},loadBitmapFont={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Normal},name:"loadBitmapFont",id:"bitmap-font",test(E){return validExtensions.includes(path.extname(E).toLowerCase())},async testParse(E){return bitmapFontTextParser.test(E)||bitmapFontXMLStringParser.test(E)},async parse(E,A,_){const I=bitmapFontTextParser.test(E)?bitmapFontTextParser.parse(E):bitmapFontXMLStringParser.parse(E),{src:B}=A,{pages:T}=I,R=[],P=I.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let U=0;U<T.length;++U){const V=T[U].file;let K=path.join(path.dirname(B),V);K=copySearchParams(K,B),R.push({src:K,data:P})}const D=await _.load(R),F=R.map(U=>D[U.src]);return new BitmapFont({data:I,textures:F},B)},async load(E,A){return await(await DOMAdapter.get().fetch(E)).text()},async unload(E,A,_){await Promise.all(E.pages.map(I=>_.unload(I.texture.source._sourceOrigin))),E.destroy()}};class BackgroundLoader{constructor(A,_=!1){this._loader=A,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=_}add(A){A.forEach(_=>{this._assetList.push(_)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const A=[],_=Math.min(this._assetList.length,this._maxConcurrent);for(let I=0;I<_;I++)A.push(this._assetList.pop());await this._loader.load(A),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(A){this._isActive!==A&&(this._isActive=A,A&&!this._isLoading&&this._next())}}const cacheTextureArray={extension:{type:ExtensionType.CacheParser,name:"cacheTextureArray"},test:E=>Array.isArray(E)&&E.every(A=>A instanceof Texture),getCacheableAssets:(E,A)=>{const _={};return E.forEach(I=>{A.forEach((B,T)=>{_[I+(T===0?"":T+1)]=B})}),_}};async function testImageFormat(E){if("Image"in globalThis)return new Promise(A=>{const _=new Image;_.onload=()=>{A(!0)},_.onerror=()=>{A(!1)},_.src=E});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const A=await(await fetch(E)).blob();await createImageBitmap(A)}catch{return!1}return!0}return!1}const detectAvif={extension:{type:ExtensionType.DetectionParser,priority:1},test:async()=>testImageFormat("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async E=>[...E,"avif"],remove:async E=>E.filter(A=>A!=="avif")},imageFormats=["png","jpg","jpeg"],detectDefaults={extension:{type:ExtensionType.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async E=>[...E,...imageFormats],remove:async E=>E.filter(A=>!imageFormats.includes(A))},inWorker="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function testVideoFormat(E){return inWorker?!1:document.createElement("video").canPlayType(E)!==""}const detectMp4={extension:{type:ExtensionType.DetectionParser,priority:0},test:async()=>testVideoFormat("video/mp4"),add:async E=>[...E,"mp4","m4v"],remove:async E=>E.filter(A=>A!=="mp4"&&A!=="m4v")},detectOgv={extension:{type:ExtensionType.DetectionParser,priority:0},test:async()=>testVideoFormat("video/ogg"),add:async E=>[...E,"ogv"],remove:async E=>E.filter(A=>A!=="ogv")},detectWebm={extension:{type:ExtensionType.DetectionParser,priority:0},test:async()=>testVideoFormat("video/webm"),add:async E=>[...E,"webm"],remove:async E=>E.filter(A=>A!=="webm")},detectWebp={extension:{type:ExtensionType.DetectionParser,priority:0},test:async()=>testImageFormat("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async E=>[...E,"webp"],remove:async E=>E.filter(A=>A!=="webp")};class Loader{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(A,_,I)=>(this._parsersValidated=!1,A[_]=I,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(A,_){const I={promise:null,parser:null};return I.promise=(async()=>{let B=null,T=null;if((_.parser||_.loadParser)&&(T=this._parserHash[_.parser||_.loadParser],_.loadParser&&warn$1(`[Assets] "loadParser" is deprecated, use "parser" instead for ${A}`),T||warn$1(`[Assets] specified load parser "${_.parser||_.loadParser}" not found while loading ${A}`)),!T){for(let R=0;R<this.parsers.length;R++){const P=this.parsers[R];if(P.load&&P.test?.(A,_,this)){T=P;break}}if(!T)return warn$1(`[Assets] ${A} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}B=await T.load(A,_,this),I.parser=T;for(let R=0;R<this.parsers.length;R++){const P=this.parsers[R];P.parse&&P.parse&&await P.testParse?.(B,_,this)&&(B=await P.parse(B,_,this)||B,I.parser=P)}return B})(),I}async load(A,_){this._parsersValidated||this._validateParsers();let I=0;const B={},T=isSingleItem(A),R=convertToList(A,F=>({alias:[F],src:F,data:{}})),P=R.length,D=R.map(async F=>{const L=path.toAbsolute(F.src);if(!B[F.src])try{this.promiseCache[L]||(this.promiseCache[L]=this._getLoadPromiseAndParser(L,F)),B[F.src]=await this.promiseCache[L].promise,_&&_(++I/P)}catch(U){throw delete this.promiseCache[L],delete B[F.src],new Error(`[Loader.load] Failed to load ${L}.
${U}`)}});return await Promise.all(D),T?B[R[0].src]:B}async unload(A){const I=convertToList(A,B=>({alias:[B],src:B})).map(async B=>{const T=path.toAbsolute(B.src),R=this.promiseCache[T];if(R){const P=await R.promise;delete this.promiseCache[T],await R.parser?.unload?.(P,B,this)}});await Promise.all(I)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(A=>A.name||A.id).reduce((A,_)=>(!_.name&&!_.id?warn$1("[Assets] parser should have an id"):(A[_.name]||A[_.id])&&warn$1(`[Assets] parser id conflict "${_.id}"`),A[_.name]=_,_.id&&(A[_.id]=_),A),{})}}function checkDataUrl(E,A){if(Array.isArray(A)){for(const _ of A)if(E.startsWith(`data:${_}`))return!0;return!1}return E.startsWith(`data:${A}`)}function checkExtension(E,A){const _=E.split("?")[0],I=path.extname(_).toLowerCase();return Array.isArray(A)?A.includes(I):I===A}const validJSONExtension=".json",validJSONMIME="application/json",loadJson={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Low},name:"loadJson",id:"json",test(E){return checkDataUrl(E,validJSONMIME)||checkExtension(E,validJSONExtension)},async load(E){return await(await DOMAdapter.get().fetch(E)).json()}},validTXTExtension=".txt",validTXTMIME="text/plain",loadTxt={name:"loadTxt",id:"text",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Low,name:"loadTxt"},test(E){return checkDataUrl(E,validTXTMIME)||checkExtension(E,validTXTExtension)},async load(E){return await(await DOMAdapter.get().fetch(E)).text()}},validWeights=["normal","bold","100","200","300","400","500","600","700","800","900"],validFontExtensions=[".ttf",".otf",".woff",".woff2"],validFontMIMEs=["font/ttf","font/otf","font/woff","font/woff2"],CSS_IDENT_TOKEN_REGEX=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function getFontFamilyName(E){const A=path.extname(E),B=path.basename(E,A).replace(/(-|_)/g," ").toLowerCase().split(" ").map(P=>P.charAt(0).toUpperCase()+P.slice(1));let T=B.length>0;for(const P of B)if(!P.match(CSS_IDENT_TOKEN_REGEX)){T=!1;break}let R=B.join(" ");return T||(R=`"${R.replace(/[\\"]/g,"\\$&")}"`),R}const validURICharactersRegex=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function encodeURIWhenNeeded(E){return validURICharactersRegex.test(E)?E:encodeURI(E)}const loadWebFont={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Low},name:"loadWebFont",id:"web-font",test(E){return checkDataUrl(E,validFontMIMEs)||checkExtension(E,validFontExtensions)},async load(E,A){const _=DOMAdapter.get().getFontFaceSet();if(_){const I=[],B=A.data?.family??getFontFamilyName(E),T=A.data?.weights?.filter(P=>validWeights.includes(P))??["normal"],R=A.data??{};for(let P=0;P<T.length;P++){const D=T[P],F=new FontFace(B,`url(${encodeURIWhenNeeded(E)})`,{...R,weight:D});await F.load(),_.add(F),I.push(F)}return Cache.has(`${B}-and-url`)?Cache.get(`${B}-and-url`).entries.push({url:E,faces:I}):Cache.set(`${B}-and-url`,{entries:[{url:E,faces:I}]}),I.length===1?I[0]:I}return warn$1("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(E){const A=Array.isArray(E)?E:[E],_=A[0].family,I=Cache.get(`${_}-and-url`),B=I.entries.find(T=>T.faces.some(R=>A.indexOf(R)!==-1));B.faces=B.faces.filter(T=>A.indexOf(T)===-1),B.faces.length===0&&(I.entries=I.entries.filter(T=>T!==B)),A.forEach(T=>{DOMAdapter.get().getFontFaceSet().delete(T)}),I.entries.length===0&&Cache.remove(`${_}-and-url`)}};function getResolutionOfUrl(E,A=1){const _=Resolver.RETINA_PREFIX?.exec(E);return _?parseFloat(_[1]):A}function createTexture(E,A,_){E.label=_,E._sourceOrigin=_;const I=new Texture({source:E,label:_}),B=()=>{delete A.promiseCache[_],Cache.has(_)&&Cache.remove(_)};return I.source.once("destroy",()=>{A.promiseCache[_]&&(warn$1("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),B())}),I.once("destroy",()=>{E.destroyed||(warn$1("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),B())}),I}const validSVGExtension=".svg",validSVGMIME="image/svg+xml",loadSvg={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Low,name:"loadSVG"},name:"loadSVG",id:"svg",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(E){return checkDataUrl(E,validSVGMIME)||checkExtension(E,validSVGExtension)},async load(E,A,_){return A.data?.parseAsGraphicsContext??this.config.parseAsGraphicsContext?loadAsGraphics(E):loadAsTexture(E,A,_,this.config.crossOrigin)},unload(E){E.destroy(!0)}};async function loadAsTexture(E,A,_,I){const T=await(await DOMAdapter.get().fetch(E)).blob(),R=URL.createObjectURL(T),P=DOMAdapter.get().createImage();P.src=R,P.crossOrigin=I,await P.decode(),URL.revokeObjectURL(R);const D=A.data?.width??P.width,F=A.data?.height??P.height,L=A.data?.resolution||getResolutionOfUrl(E),U=DOMAdapter.get().createCanvas(D*L,F*L);U.getContext("2d").drawImage(P,0,0,D*L,F*L);const{parseAsGraphicsContext:K,...J}=A.data??{},ee=new ImageSource({resource:U,alphaMode:"premultiply-alpha-on-upload",resolution:L,...J});return createTexture(ee,_,E)}async function loadAsGraphics(E){const _=await(await DOMAdapter.get().fetch(E)).text(),I=new GraphicsContext;return I.svg(_),I}const WORKER_CODE$3=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let WORKER_URL$3=null,WorkerInstance$3=class{constructor(){WORKER_URL$3||(WORKER_URL$3=URL.createObjectURL(new Blob([WORKER_CODE$3],{type:"application/javascript"}))),this.worker=new Worker(WORKER_URL$3)}};WorkerInstance$3.revokeObjectURL=function(){WORKER_URL$3&&(URL.revokeObjectURL(WORKER_URL$3),WORKER_URL$3=null)};const WORKER_CODE$2=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let WORKER_URL$2=null,WorkerInstance$2=class{constructor(){WORKER_URL$2||(WORKER_URL$2=URL.createObjectURL(new Blob([WORKER_CODE$2],{type:"application/javascript"}))),this.worker=new Worker(WORKER_URL$2)}};WorkerInstance$2.revokeObjectURL=function(){WORKER_URL$2&&(URL.revokeObjectURL(WORKER_URL$2),WORKER_URL$2=null)};let UUID=0,MAX_WORKERS;class WorkerManagerClass{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(A=>{const{worker:_}=new WorkerInstance$3;_.addEventListener("message",I=>{_.terminate(),WorkerInstance$3.revokeObjectURL(),A(I.data)})}),this._isImageBitmapSupported)}loadImageBitmap(A,_){return this._run("loadImageBitmap",[A,_?.data?.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){MAX_WORKERS===void 0&&(MAX_WORKERS=navigator.hardwareConcurrency||4);let A=this._workerPool.pop();return!A&&this._createdWorkers<MAX_WORKERS&&(this._createdWorkers++,A=new WorkerInstance$2().worker,A.addEventListener("message",_=>{this._complete(_.data),this._returnWorker(_.target),this._next()})),A}_returnWorker(A){this._workerPool.push(A)}_complete(A){A.error!==void 0?this._resolveHash[A.uuid].reject(A.error):this._resolveHash[A.uuid].resolve(A.data),this._resolveHash[A.uuid]=null}async _run(A,_){await this._initWorkers();const I=new Promise((B,T)=>{this._queue.push({id:A,arguments:_,resolve:B,reject:T})});return this._next(),I}_next(){if(!this._queue.length)return;const A=this._getWorker();if(!A)return;const _=this._queue.pop(),I=_.id;this._resolveHash[UUID]={resolve:_.resolve,reject:_.reject},A.postMessage({data:_.arguments,uuid:UUID++,id:I})}reset(){this._workerPool.forEach(A=>A.terminate()),this._workerPool.length=0,Object.values(this._resolveHash).forEach(({reject:A})=>{A?.(new Error("WorkerManager destroyed"))}),this._resolveHash={},this._queue.length=0,this._initialized=!1,this._createdWorkers=0}}const WorkerManager=new WorkerManagerClass,validImageExtensions=[".jpeg",".jpg",".png",".webp",".avif"],validImageMIMEs=["image/jpeg","image/png","image/webp","image/avif"];async function loadImageBitmap(E,A){const _=await DOMAdapter.get().fetch(E);if(!_.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${E}: ${_.status} ${_.statusText}`);const I=await _.blob();return A?.data?.alphaMode==="premultiplied-alpha"?createImageBitmap(I,{premultiplyAlpha:"none"}):createImageBitmap(I)}const loadTextures={name:"loadTextures",id:"texture",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(E){return checkDataUrl(E,validImageMIMEs)||checkExtension(E,validImageExtensions)},async load(E,A,_){let I=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await WorkerManager.isImageBitmapSupported()?I=await WorkerManager.loadImageBitmap(E,A):I=await loadImageBitmap(E,A):I=await new Promise((T,R)=>{I=DOMAdapter.get().createImage(),I.crossOrigin=this.config.crossOrigin,I.src=E,I.complete?T(I):(I.onload=()=>{T(I)},I.onerror=R)});const B=new ImageSource({resource:I,alphaMode:"premultiply-alpha-on-upload",resolution:A.data?.resolution||getResolutionOfUrl(E),...A.data});return createTexture(B,_,E)},unload(E){E.destroy(!0)}},potentialVideoExtensions=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"];let validVideoExtensions,validVideoMIMEs;function crossOrigin(E,A,_){_===void 0&&!A.startsWith("data:")?E.crossOrigin=determineCrossOrigin(A):_!==!1&&(E.crossOrigin=typeof _=="string"?_:"anonymous")}function preloadVideo(E){return new Promise((A,_)=>{E.addEventListener("canplaythrough",I),E.addEventListener("error",B),E.load();function I(){T(),A()}function B(R){T(),_(R)}function T(){E.removeEventListener("canplaythrough",I),E.removeEventListener("error",B)}})}function determineCrossOrigin(E,A=globalThis.location){if(E.startsWith("data:"))return"";A||(A=globalThis.location);const _=new URL(E,document.baseURI);return _.hostname!==A.hostname||_.port!==A.port||_.protocol!==A.protocol?"anonymous":""}function getBrowserSupportedVideoExtensions(){const E=[],A=[];for(const _ of potentialVideoExtensions){const I=VideoSource.MIME_TYPES[_.substring(1)]||`video/${_.substring(1)}`;testVideoFormat(I)&&(E.push(_),A.includes(I)||A.push(I))}return{validVideoExtensions:E,validVideoMime:A}}const loadVideoTextures={name:"loadVideo",id:"video",extension:{type:ExtensionType.LoadParser,name:"loadVideo"},test(E){if(!validVideoExtensions||!validVideoMIMEs){const{validVideoExtensions:I,validVideoMime:B}=getBrowserSupportedVideoExtensions();validVideoExtensions=I,validVideoMIMEs=B}const A=checkDataUrl(E,validVideoMIMEs),_=checkExtension(E,validVideoExtensions);return A||_},async load(E,A,_){const I={...VideoSource.defaultOptions,resolution:A.data?.resolution||getResolutionOfUrl(E),alphaMode:A.data?.alphaMode||await detectVideoAlphaMode(),...A.data},B=document.createElement("video"),T={preload:I.autoLoad!==!1?"auto":void 0,"webkit-playsinline":I.playsinline!==!1?"":void 0,playsinline:I.playsinline!==!1?"":void 0,muted:I.muted===!0?"":void 0,loop:I.loop===!0?"":void 0,autoplay:I.autoPlay!==!1?"":void 0};Object.keys(T).forEach(D=>{const F=T[D];F!==void 0&&B.setAttribute(D,F)}),I.muted===!0&&(B.muted=!0),crossOrigin(B,E,I.crossorigin);const R=document.createElement("source");let P;if(I.mime)P=I.mime;else if(E.startsWith("data:"))P=E.slice(5,E.indexOf(";"));else if(!E.startsWith("blob:")){const D=E.split("?")[0].slice(E.lastIndexOf(".")+1).toLowerCase();P=VideoSource.MIME_TYPES[D]||`video/${D}`}return R.src=E,P&&(R.type=P),new Promise(D=>{const F=async()=>{const L=new VideoSource({...I,resource:B});B.removeEventListener("canplay",F),A.data.preload&&await preloadVideo(B),D(createTexture(L,_,E))};I.preload&&!I.autoPlay&&B.load(),B.addEventListener("canplay",F),B.appendChild(R)})},unload(E){E.destroy(!0)}},resolveTextureUrl={extension:{type:ExtensionType.ResolveParser,name:"resolveTexture"},test:loadTextures.test,parse:E=>({resolution:parseFloat(Resolver.RETINA_PREFIX.exec(E)?.[1]??"1"),format:E.split(".").pop(),src:E})},resolveJsonUrl={extension:{type:ExtensionType.ResolveParser,priority:-2,name:"resolveJson"},test:E=>Resolver.RETINA_PREFIX.test(E)&&E.endsWith(".json"),parse:resolveTextureUrl.parse};class AssetsClass{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Resolver,this.loader=new Loader,this.cache=Cache,this._backgroundLoader=new BackgroundLoader(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(A={}){if(this._initialized){warn$1("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,A.defaultSearchParams&&this.resolver.setDefaultSearchParams(A.defaultSearchParams),A.basePath&&(this.resolver.basePath=A.basePath),A.bundleIdentifier&&this.resolver.setBundleIdentifier(A.bundleIdentifier),A.manifest){let T=A.manifest;typeof T=="string"&&(T=await this.load(T)),this.resolver.addManifest(T)}const _=A.texturePreference?.resolution??1,I=typeof _=="number"?[_]:_,B=await this._detectFormats({preferredFormats:A.texturePreference?.format,skipDetections:A.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:B,resolution:I}}),A.preferences&&this.setPreferences(A.preferences)}add(A){this.resolver.add(A)}async load(A,_){this._initialized||await this.init();const I=isSingleItem(A),B=convertToList(A).map(P=>{if(typeof P!="string"){const D=this.resolver.getAlias(P);return D.some(F=>!this.resolver.hasKey(F))&&this.add(P),Array.isArray(D)?D[0]:D}return this.resolver.hasKey(P)||this.add({alias:P,src:P}),P}),T=this.resolver.resolve(B),R=await this._mapLoadToResolve(T,_);return I?R[B[0]]:R}addBundle(A,_){this.resolver.addBundle(A,_)}async loadBundle(A,_){this._initialized||await this.init();let I=!1;typeof A=="string"&&(I=!0,A=[A]);const B=this.resolver.resolveBundle(A),T={},R=Object.keys(B);let P=0,D=0;const F=()=>{_?.(++P/D)},L=R.map(U=>{const V=B[U],K=Object.values(V),J=[...new Set(K.flat())];return D+=J.length,this._mapLoadToResolve(V,F).then(ee=>{T[U]=ee})});return await Promise.all(L),I?T[A[0]]:T}async backgroundLoad(A){this._initialized||await this.init(),typeof A=="string"&&(A=[A]);const _=this.resolver.resolve(A);this._backgroundLoader.add(Object.values(_))}async backgroundLoadBundle(A){this._initialized||await this.init(),typeof A=="string"&&(A=[A]);const _=this.resolver.resolveBundle(A);Object.values(_).forEach(I=>{this._backgroundLoader.add(Object.values(I))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(A){if(typeof A=="string")return Cache.get(A);const _={};for(let I=0;I<A.length;I++)_[I]=Cache.get(A[I]);return _}async _mapLoadToResolve(A,_){const I=[...new Set(Object.values(A))];this._backgroundLoader.active=!1;const B=await this.loader.load(I,_);this._backgroundLoader.active=!0;const T={};return I.forEach(R=>{const P=B[R.src],D=[R.src];R.alias&&D.push(...R.alias),D.forEach(F=>{T[F]=P}),Cache.set(D,P)}),T}async unload(A){this._initialized||await this.init();const _=convertToList(A).map(B=>typeof B!="string"?B.src:B),I=this.resolver.resolve(_);await this._unloadFromResolved(I)}async unloadBundle(A){this._initialized||await this.init(),A=convertToList(A);const _=this.resolver.resolveBundle(A),I=Object.keys(_).map(B=>this._unloadFromResolved(_[B]));await Promise.all(I)}async _unloadFromResolved(A){const _=Object.values(A);_.forEach(I=>{Cache.remove(I.src)}),await this.loader.unload(_)}async _detectFormats(A){let _=[];A.preferredFormats&&(_=Array.isArray(A.preferredFormats)?A.preferredFormats:[A.preferredFormats]);for(const I of A.detections)A.skipDetections||await I.test()?_=await I.add(_):A.skipDetections||(_=await I.remove(_));return _=_.filter((I,B)=>_.indexOf(I)===B),_}get detections(){return this._detections}setPreferences(A){this.loader.parsers.forEach(_=>{_.config&&Object.keys(_.config).filter(I=>I in A).forEach(I=>{_.config[I]=A[I]})})}}const Assets=new AssetsClass;extensions.handleByList(ExtensionType.LoadParser,Assets.loader.parsers).handleByList(ExtensionType.ResolveParser,Assets.resolver.parsers).handleByList(ExtensionType.CacheParser,Assets.cache.parsers).handleByList(ExtensionType.DetectionParser,Assets.detections);extensions.add(cacheTextureArray,detectDefaults,detectAvif,detectWebp,detectMp4,detectOgv,detectWebm,loadJson,loadTxt,loadWebFont,loadSvg,loadTextures,loadVideoTextures,loadBitmapFont,bitmapFontCachePlugin,resolveTextureUrl,resolveJsonUrl);const assetKeyMap={loader:ExtensionType.LoadParser,resolver:ExtensionType.ResolveParser,cache:ExtensionType.CacheParser,detection:ExtensionType.DetectionParser};extensions.handle(ExtensionType.Asset,E=>{const A=E.ref;Object.entries(assetKeyMap).filter(([_])=>!!A[_]).forEach(([_,I])=>extensions.add(Object.assign(A[_],{extension:A[_].extension??I})))},E=>{const A=E.ref;Object.keys(assetKeyMap).filter(_=>!!A[_]).forEach(_=>extensions.remove(A[_]))});const detectBasis={extension:{type:ExtensionType.DetectionParser,priority:3},test:async()=>!!(await isWebGPUSupported()||isWebGLSupported()),add:async E=>[...E,"basis"],remove:async E=>E.filter(A=>A!=="basis")};class CompressedSource extends TextureSource{constructor(A){super(A),this.uploadMethodId="compressed",this.resource=A.resource,this.mipLevelCount=this.resource.length}}let supportedGLCompressedTextureFormats;function getSupportedGlCompressedTextureFormats(){if(supportedGLCompressedTextureFormats)return supportedGLCompressedTextureFormats;const A=DOMAdapter.get().createCanvas(1,1).getContext("webgl");return A?(supportedGLCompressedTextureFormats=[...A.getExtension("EXT_texture_compression_bptc")?["bc6h-rgb-ufloat","bc6h-rgb-float","bc7-rgba-unorm","bc7-rgba-unorm-srgb"]:[],...A.getExtension("WEBGL_compressed_texture_s3tc")?["bc1-rgba-unorm","bc2-rgba-unorm","bc3-rgba-unorm"]:[],...A.getExtension("WEBGL_compressed_texture_s3tc_srgb")?["bc1-rgba-unorm-srgb","bc2-rgba-unorm-srgb","bc3-rgba-unorm-srgb"]:[],...A.getExtension("EXT_texture_compression_rgtc")?["bc4-r-unorm","bc4-r-snorm","bc5-rg-unorm","bc5-rg-snorm"]:[],...A.getExtension("WEBGL_compressed_texture_etc")?["etc2-rgb8unorm","etc2-rgb8unorm-srgb","etc2-rgba8unorm","etc2-rgba8unorm-srgb","etc2-rgb8a1unorm","etc2-rgb8a1unorm-srgb","eac-r11unorm","eac-rg11unorm"]:[],...A.getExtension("WEBGL_compressed_texture_astc")?["astc-4x4-unorm","astc-4x4-unorm-srgb","astc-5x4-unorm","astc-5x4-unorm-srgb","astc-5x5-unorm","astc-5x5-unorm-srgb","astc-6x5-unorm","astc-6x5-unorm-srgb","astc-6x6-unorm","astc-6x6-unorm-srgb","astc-8x5-unorm","astc-8x5-unorm-srgb","astc-8x6-unorm","astc-8x6-unorm-srgb","astc-8x8-unorm","astc-8x8-unorm-srgb","astc-10x5-unorm","astc-10x5-unorm-srgb","astc-10x6-unorm","astc-10x6-unorm-srgb","astc-10x8-unorm","astc-10x8-unorm-srgb","astc-10x10-unorm","astc-10x10-unorm-srgb","astc-12x10-unorm","astc-12x10-unorm-srgb","astc-12x12-unorm","astc-12x12-unorm-srgb"]:[]],supportedGLCompressedTextureFormats):[]}let supportedGPUCompressedTextureFormats;async function getSupportedGPUCompressedTextureFormats(){if(supportedGPUCompressedTextureFormats)return supportedGPUCompressedTextureFormats;const E=await DOMAdapter.get().getNavigator().gpu.requestAdapter();return supportedGPUCompressedTextureFormats=[...E.features.has("texture-compression-bc")?["bc1-rgba-unorm","bc1-rgba-unorm-srgb","bc2-rgba-unorm","bc2-rgba-unorm-srgb","bc3-rgba-unorm","bc3-rgba-unorm-srgb","bc4-r-unorm","bc4-r-snorm","bc5-rg-unorm","bc5-rg-snorm","bc6h-rgb-ufloat","bc6h-rgb-float","bc7-rgba-unorm","bc7-rgba-unorm-srgb"]:[],...E.features.has("texture-compression-etc2")?["etc2-rgb8unorm","etc2-rgb8unorm-srgb","etc2-rgb8a1unorm","etc2-rgb8a1unorm-srgb","etc2-rgba8unorm","etc2-rgba8unorm-srgb","eac-r11unorm","eac-r11snorm","eac-rg11unorm","eac-rg11snorm"]:[],...E.features.has("texture-compression-astc")?["astc-4x4-unorm","astc-4x4-unorm-srgb","astc-5x4-unorm","astc-5x4-unorm-srgb","astc-5x5-unorm","astc-5x5-unorm-srgb","astc-6x5-unorm","astc-6x5-unorm-srgb","astc-6x6-unorm","astc-6x6-unorm-srgb","astc-8x5-unorm","astc-8x5-unorm-srgb","astc-8x6-unorm","astc-8x6-unorm-srgb","astc-8x8-unorm","astc-8x8-unorm-srgb","astc-10x5-unorm","astc-10x5-unorm-srgb","astc-10x6-unorm","astc-10x6-unorm-srgb","astc-10x8-unorm","astc-10x8-unorm-srgb","astc-10x10-unorm","astc-10x10-unorm-srgb","astc-12x10-unorm","astc-12x10-unorm-srgb","astc-12x12-unorm","astc-12x12-unorm-srgb"]:[]],supportedGPUCompressedTextureFormats}let supportedCompressedTextureFormats;async function getSupportedCompressedTextureFormats(){return supportedCompressedTextureFormats!==void 0||(supportedCompressedTextureFormats=await(async()=>{const E=await isWebGPUSupported(),A=isWebGLSupported();if(E&&A){const _=await getSupportedGPUCompressedTextureFormats(),I=getSupportedGlCompressedTextureFormats();return _.filter(B=>I.includes(B))}else{if(E)return await getSupportedGPUCompressedTextureFormats();if(A)return getSupportedGlCompressedTextureFormats()}return[]})()),supportedCompressedTextureFormats}const nonCompressedFormats=["r8unorm","r8snorm","r8uint","r8sint","r16uint","r16sint","r16float","rg8unorm","rg8snorm","rg8uint","rg8sint","r32uint","r32sint","r32float","rg16uint","rg16sint","rg16float","rgba8unorm","rgba8unorm-srgb","rgba8snorm","rgba8uint","rgba8sint","bgra8unorm","bgra8unorm-srgb","rgb9e5ufloat","rgb10a2unorm","rg11b10ufloat","rg32uint","rg32sint","rg32float","rgba16uint","rgba16sint","rgba16float","rgba32uint","rgba32sint","rgba32float","stencil8","depth16unorm","depth24plus","depth24plus-stencil8","depth32float","depth32float-stencil8"];let supportedTextureFormats;async function getSupportedTextureFormats(){if(supportedTextureFormats!==void 0)return supportedTextureFormats;const E=await getSupportedCompressedTextureFormats();return supportedTextureFormats=[...nonCompressedFormats,...E],supportedTextureFormats}const WORKER_CODE$1=`(function () {
    'use strict';

    function createLevelBuffers(basisTexture, basisTranscoderFormat) {
      const images = basisTexture.getNumImages();
      const levels = basisTexture.getNumLevels(0);
      const success = basisTexture.startTranscoding();
      if (!success) {
        throw new Error("startTranscoding failed");
      }
      const levelBuffers = [];
      for (let levelIndex = 0; levelIndex < levels; ++levelIndex) {
        for (let sliceIndex = 0; sliceIndex < images; ++sliceIndex) {
          const transcodeSize = basisTexture.getImageTranscodedSizeInBytes(sliceIndex, levelIndex, basisTranscoderFormat);
          const levelBuffer = new Uint8Array(transcodeSize);
          const success2 = basisTexture.transcodeImage(levelBuffer, sliceIndex, levelIndex, basisTranscoderFormat, 1, 0);
          if (!success2) {
            throw new Error("transcodeImage failed");
          }
          levelBuffers.push(levelBuffer);
        }
      }
      return levelBuffers;
    }

    const gpuFormatToBasisTranscoderFormatMap = {
      "bc3-rgba-unorm": 3,
      // cTFBC3_RGBA
      "bc7-rgba-unorm": 6,
      // cTFBC7_RGBA,
      "etc2-rgba8unorm": 1,
      // cTFETC2_RGBA,
      "astc-4x4-unorm": 10,
      // cTFASTC_4x4_RGBA,
      // Uncompressed
      rgba8unorm: 13,
      // cTFRGBA32,
      rgba4unorm: 16
      // cTFRGBA4444,
    };
    function gpuFormatToBasisTranscoderFormat(transcoderFormat) {
      const format = gpuFormatToBasisTranscoderFormatMap[transcoderFormat];
      if (format) {
        return format;
      }
      throw new Error(\`Unsupported transcoderFormat: \${transcoderFormat}\`);
    }

    const settings = {
      jsUrl: "basis/basis_transcoder.js",
      wasmUrl: "basis/basis_transcoder.wasm"
    };
    let basisTranscoderFormat;
    let basisTranscodedTextureFormat;
    let basisPromise;
    async function getBasis() {
      if (!basisPromise) {
        const absoluteJsUrl = new URL(settings.jsUrl, location.origin).href;
        const absoluteWasmUrl = new URL(settings.wasmUrl, location.origin).href;
        importScripts(absoluteJsUrl);
        basisPromise = new Promise((resolve) => {
          BASIS({
            locateFile: (_file) => absoluteWasmUrl
          }).then((module) => {
            module.initializeBasis();
            resolve(module.BasisFile);
          });
        });
      }
      return basisPromise;
    }
    async function fetchBasisTexture(url, BasisTexture) {
      const basisResponse = await fetch(url);
      if (basisResponse.ok) {
        const basisArrayBuffer = await basisResponse.arrayBuffer();
        return new BasisTexture(new Uint8Array(basisArrayBuffer));
      }
      throw new Error(\`Failed to load Basis texture: \${url}\`);
    }
    const preferredTranscodedFormat = [
      "bc7-rgba-unorm",
      "astc-4x4-unorm",
      "etc2-rgba8unorm",
      "bc3-rgba-unorm",
      "rgba8unorm"
    ];
    async function load(url) {
      const BasisTexture = await getBasis();
      const basisTexture = await fetchBasisTexture(url, BasisTexture);
      const levelBuffers = createLevelBuffers(basisTexture, basisTranscoderFormat);
      return {
        width: basisTexture.getImageWidth(0, 0),
        height: basisTexture.getImageHeight(0, 0),
        format: basisTranscodedTextureFormat,
        resource: levelBuffers,
        alphaMode: "no-premultiply-alpha"
      };
    }
    async function init(jsUrl, wasmUrl, supportedTextures) {
      if (jsUrl)
        settings.jsUrl = jsUrl;
      if (wasmUrl)
        settings.wasmUrl = wasmUrl;
      basisTranscodedTextureFormat = preferredTranscodedFormat.filter((format) => supportedTextures.includes(format))[0];
      basisTranscoderFormat = gpuFormatToBasisTranscoderFormat(basisTranscodedTextureFormat);
      await getBasis();
    }
    const messageHandlers = {
      init: async (data) => {
        const { jsUrl, wasmUrl, supportedTextures } = data;
        await init(jsUrl, wasmUrl, supportedTextures);
      },
      load: async (data) => {
        try {
          const textureOptions = await load(data.url);
          return {
            type: "load",
            url: data.url,
            success: true,
            textureOptions,
            transferables: textureOptions.resource?.map((arr) => arr.buffer)
          };
        } catch (e) {
          throw e;
        }
      }
    };
    self.onmessage = async (messageEvent) => {
      const message = messageEvent.data;
      const response = await messageHandlers[message.type](message);
      if (response) {
        self.postMessage(response, response.transferables);
      }
    };

})();
`;let WORKER_URL$1=null,WorkerInstance$1=class{constructor(){WORKER_URL$1||(WORKER_URL$1=URL.createObjectURL(new Blob([WORKER_CODE$1],{type:"application/javascript"}))),this.worker=new Worker(WORKER_URL$1)}};WorkerInstance$1.revokeObjectURL=function(){WORKER_URL$1&&(URL.revokeObjectURL(WORKER_URL$1),WORKER_URL$1=null)};const basisTranscoderUrls={jsUrl:"https://files.pixijs.download/transcoders/basis/basis_transcoder.js",wasmUrl:"https://files.pixijs.download/transcoders/basis/basis_transcoder.wasm"};function setBasisTranscoderPath(E){Object.assign(basisTranscoderUrls,E)}let basisWorker;const urlHash$1={};function getBasisWorker(E){return basisWorker||(basisWorker=new WorkerInstance$1().worker,basisWorker.onmessage=A=>{const{success:_,url:I,textureOptions:B}=A.data;_||console.warn("Failed to load Basis texture",I),urlHash$1[I](B)},basisWorker.postMessage({type:"init",jsUrl:basisTranscoderUrls.jsUrl,wasmUrl:basisTranscoderUrls.wasmUrl,supportedTextures:E})),basisWorker}function loadBasisOnWorker(E,A){const _=getBasisWorker(A);return new Promise(I=>{urlHash$1[E]=I,_.postMessage({type:"load",url:E})})}const loadBasis={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High,name:"loadBasis"},name:"loadBasis",id:"basis",test(E){return checkExtension(E,[".basis"])},async load(E,A,_){const I=await getSupportedTextureFormats(),B=await loadBasisOnWorker(E,I),T=new CompressedSource(B);return createTexture(T,_,E)},unload(E){Array.isArray(E)?E.forEach(A=>A.destroy(!0)):E.destroy(!0)}};function createLevelBuffers(E,A){const _=E.getNumImages(),I=E.getNumLevels(0);if(!E.startTranscoding())throw new Error("startTranscoding failed");const T=[];for(let R=0;R<I;++R)for(let P=0;P<_;++P){const D=E.getImageTranscodedSizeInBytes(P,R,A),F=new Uint8Array(D);if(!E.transcodeImage(F,P,R,A,1,0))throw new Error("transcodeImage failed");T.push(F)}return T}const gpuFormatToBasisTranscoderFormatMap$1={"bc3-rgba-unorm":3,"bc7-rgba-unorm":6,"etc2-rgba8unorm":1,"astc-4x4-unorm":10,rgba8unorm:13,rgba4unorm:16};function gpuFormatToBasisTranscoderFormat(E){const A=gpuFormatToBasisTranscoderFormatMap$1[E];if(A)return A;throw new Error(`Unsupported transcoderFormat: ${E}`)}const DDS_HEADER_FIELDS={MAGIC:0,SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19,PF_FLAGS:20,FOURCC:21,RGB_BITCOUNT:22,R_BIT_MASK:23,G_BIT_MASK:24,B_BIT_MASK:25,A_BIT_MASK:26},DDS_DX10_FIELDS={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4};var DXGI_FORMAT=(E=>(E[E.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",E[E.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",E[E.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",E[E.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",E[E.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",E[E.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",E[E.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",E[E.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",E[E.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",E[E.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",E[E.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",E[E.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",E[E.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",E[E.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",E[E.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",E[E.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",E[E.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",E[E.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",E[E.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",E[E.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",E[E.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",E[E.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",E[E.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",E[E.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",E[E.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",E[E.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",E[E.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",E[E.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",E[E.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",E[E.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",E[E.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",E[E.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",E[E.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",E[E.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",E[E.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",E[E.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",E[E.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",E[E.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",E[E.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",E[E.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",E[E.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",E[E.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",E[E.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",E[E.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",E[E.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",E[E.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",E[E.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",E[E.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",E[E.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",E[E.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",E[E.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",E[E.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",E[E.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",E[E.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",E[E.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",E[E.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",E[E.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",E[E.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",E[E.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",E[E.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",E[E.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",E[E.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",E[E.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",E[E.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",E[E.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",E[E.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",E[E.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",E[E.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",E[E.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",E[E.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",E[E.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",E[E.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",E[E.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",E[E.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",E[E.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",E[E.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",E[E.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",E[E.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",E[E.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",E[E.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",E[E.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",E[E.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",E[E.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",E[E.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",E[E.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",E[E.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",E[E.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",E[E.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",E[E.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",E[E.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",E[E.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",E[E.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",E[E.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",E[E.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",E[E.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",E[E.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",E[E.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",E[E.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",E[E.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",E[E.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",E[E.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",E[E.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",E[E.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",E[E.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",E[E.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",E[E.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",E[E.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",E[E.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",E[E.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",E[E.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",E[E.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",E[E.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",E[E.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",E[E.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",E[E.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",E[E.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",E[E.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",E[E.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",E[E.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",E[E.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",E[E.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",E[E.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT",E))(DXGI_FORMAT||{}),D3D10_RESOURCE_DIMENSION=(E=>(E[E.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",E[E.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",E[E.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D",E))(D3D10_RESOURCE_DIMENSION||{});function fourCCToInt32(E){return E.charCodeAt(0)+(E.charCodeAt(1)<<8)+(E.charCodeAt(2)<<16)+(E.charCodeAt(3)<<24)}var D3DFMT=(E=>(E[E.UNKNOWN=0]="UNKNOWN",E[E.R8G8B8=20]="R8G8B8",E[E.A8R8G8B8=21]="A8R8G8B8",E[E.X8R8G8B8=22]="X8R8G8B8",E[E.R5G6B5=23]="R5G6B5",E[E.X1R5G5B5=24]="X1R5G5B5",E[E.A1R5G5B5=25]="A1R5G5B5",E[E.A4R4G4B4=26]="A4R4G4B4",E[E.R3G3B2=27]="R3G3B2",E[E.A8=28]="A8",E[E.A8R3G3B2=29]="A8R3G3B2",E[E.X4R4G4B4=30]="X4R4G4B4",E[E.A2B10G10R10=31]="A2B10G10R10",E[E.A8B8G8R8=32]="A8B8G8R8",E[E.X8B8G8R8=33]="X8B8G8R8",E[E.G16R16=34]="G16R16",E[E.A2R10G10B10=35]="A2R10G10B10",E[E.A16B16G16R16=36]="A16B16G16R16",E[E.A8P8=40]="A8P8",E[E.P8=41]="P8",E[E.L8=50]="L8",E[E.A8L8=51]="A8L8",E[E.A4L4=52]="A4L4",E[E.V8U8=60]="V8U8",E[E.L6V5U5=61]="L6V5U5",E[E.X8L8V8U8=62]="X8L8V8U8",E[E.Q8W8V8U8=63]="Q8W8V8U8",E[E.V16U16=64]="V16U16",E[E.A2W10V10U10=67]="A2W10V10U10",E[E.Q16W16V16U16=110]="Q16W16V16U16",E[E.R16F=111]="R16F",E[E.G16R16F=112]="G16R16F",E[E.A16B16G16R16F=113]="A16B16G16R16F",E[E.R32F=114]="R32F",E[E.G32R32F=115]="G32R32F",E[E.A32B32G32R32F=116]="A32B32G32R32F",E[E.UYVY=fourCCToInt32("UYVY")]="UYVY",E[E.R8G8_B8G8=fourCCToInt32("RGBG")]="R8G8_B8G8",E[E.YUY2=fourCCToInt32("YUY2")]="YUY2",E[E.D3DFMT_G8R8_G8B8=fourCCToInt32("GRGB")]="D3DFMT_G8R8_G8B8",E[E.DXT1=fourCCToInt32("DXT1")]="DXT1",E[E.DXT2=fourCCToInt32("DXT2")]="DXT2",E[E.DXT3=fourCCToInt32("DXT3")]="DXT3",E[E.DXT4=fourCCToInt32("DXT4")]="DXT4",E[E.DXT5=fourCCToInt32("DXT5")]="DXT5",E[E.ATI1=fourCCToInt32("ATI1")]="ATI1",E[E.AT1N=fourCCToInt32("AT1N")]="AT1N",E[E.ATI2=fourCCToInt32("ATI2")]="ATI2",E[E.AT2N=fourCCToInt32("AT2N")]="AT2N",E[E.BC4U=fourCCToInt32("BC4U")]="BC4U",E[E.BC4S=fourCCToInt32("BC4S")]="BC4S",E[E.BC5U=fourCCToInt32("BC5U")]="BC5U",E[E.BC5S=fourCCToInt32("BC5S")]="BC5S",E[E.DX10=fourCCToInt32("DX10")]="DX10",E))(D3DFMT||{});const FOURCC_TO_TEXTURE_FORMAT={[D3DFMT.DXT1]:"bc1-rgba-unorm",[D3DFMT.DXT2]:"bc2-rgba-unorm",[D3DFMT.DXT3]:"bc2-rgba-unorm",[D3DFMT.DXT4]:"bc3-rgba-unorm",[D3DFMT.DXT5]:"bc3-rgba-unorm",[D3DFMT.ATI1]:"bc4-r-unorm",[D3DFMT.BC4U]:"bc4-r-unorm",[D3DFMT.BC4S]:"bc4-r-snorm",[D3DFMT.ATI2]:"bc5-rg-unorm",[D3DFMT.BC5U]:"bc5-rg-unorm",[D3DFMT.BC5S]:"bc5-rg-snorm",36:"rgba16uint",110:"rgba16sint",111:"r16float",112:"rg16float",113:"rgba16float",114:"r32float",115:"rg32float",116:"rgba32float"},DXGI_TO_TEXTURE_FORMAT={70:"bc1-rgba-unorm",71:"bc1-rgba-unorm",72:"bc1-rgba-unorm-srgb",73:"bc2-rgba-unorm",74:"bc2-rgba-unorm",75:"bc2-rgba-unorm-srgb",76:"bc3-rgba-unorm",77:"bc3-rgba-unorm",78:"bc3-rgba-unorm-srgb",79:"bc4-r-unorm",80:"bc4-r-unorm",81:"bc4-r-snorm",82:"bc5-rg-unorm",83:"bc5-rg-unorm",84:"bc5-rg-snorm",94:"bc6h-rgb-ufloat",95:"bc6h-rgb-ufloat",96:"bc6h-rgb-float",97:"bc7-rgba-unorm",98:"bc7-rgba-unorm",99:"bc7-rgba-unorm-srgb",28:"rgba8unorm",29:"rgba8unorm-srgb",87:"bgra8unorm",91:"bgra8unorm-srgb",41:"r32float",49:"rg8unorm",56:"r16uint",61:"r8unorm",24:"rgb10a2unorm",11:"rgba16uint",13:"rgba16sint",10:"rgba16float",54:"r16float",34:"rg16float",16:"rg32float",2:"rgba32float"},DDS={MAGIC_VALUE:542327876,MAGIC_SIZE:4,HEADER_SIZE:124,HEADER_DX10_SIZE:20,PIXEL_FORMAT_FLAGS:{ALPHAPIXELS:1,ALPHA:2,FOURCC:4,RGB:64,RGBA:65,YUV:512,LUMINANCE:131072,LUMINANCEA:131073},RESOURCE_MISC_TEXTURECUBE:4,HEADER_FIELDS:DDS_HEADER_FIELDS,HEADER_DX10_FIELDS:DDS_DX10_FIELDS,DXGI_FORMAT,D3D10_RESOURCE_DIMENSION,D3DFMT},TEXTURE_FORMAT_BLOCK_SIZE={"bc1-rgba-unorm":8,"bc1-rgba-unorm-srgb":8,"bc2-rgba-unorm":16,"bc2-rgba-unorm-srgb":16,"bc3-rgba-unorm":16,"bc3-rgba-unorm-srgb":16,"bc4-r-unorm":8,"bc4-r-snorm":8,"bc5-rg-unorm":16,"bc5-rg-snorm":16,"bc6h-rgb-ufloat":16,"bc6h-rgb-float":16,"bc7-rgba-unorm":16,"bc7-rgba-unorm-srgb":16};function parseDDS(E,A){const{format:_,fourCC:I,width:B,height:T,dataOffset:R,mipmapCount:P}=parseDDSHeader(E);if(!A.includes(_))throw new Error(`Unsupported texture format: ${I} ${_}, supported: ${A}`);if(P<=1)return{format:_,width:B,height:T,resource:[new Uint8Array(E,R)],alphaMode:"no-premultiply-alpha"};const D=getMipmapLevelBuffers(_,B,T,R,P,E);return{format:_,width:B,height:T,resource:D,alphaMode:"no-premultiply-alpha"}}function getMipmapLevelBuffers(E,A,_,I,B,T){const R=[],P=TEXTURE_FORMAT_BLOCK_SIZE[E];let D=A,F=_,L=I;for(let U=0;U<B;++U){const V=Math.ceil(Math.max(4,D)/4)*4,K=Math.ceil(Math.max(4,F)/4)*4,J=P?V/4*K/4*P:D*F*4,ee=new Uint8Array(T,L,J);R.push(ee),L+=J,D=Math.max(D>>1,1),F=Math.max(F>>1,1)}return R}function parseDDSHeader(E){const A=new Uint32Array(E,0,DDS.HEADER_SIZE/Uint32Array.BYTES_PER_ELEMENT);if(A[DDS.HEADER_FIELDS.MAGIC]!==DDS.MAGIC_VALUE)throw new Error("Invalid magic number in DDS header");const _=A[DDS.HEADER_FIELDS.HEIGHT],I=A[DDS.HEADER_FIELDS.WIDTH],B=Math.max(1,A[DDS.HEADER_FIELDS.MIPMAP_COUNT]),T=A[DDS.HEADER_FIELDS.PF_FLAGS],R=A[DDS.HEADER_FIELDS.FOURCC],P=getTextureFormat(A,T,R,E),D=DDS.MAGIC_SIZE+DDS.HEADER_SIZE+(R===DDS.D3DFMT.DX10?DDS.HEADER_DX10_SIZE:0);return{format:P,fourCC:R,width:I,height:_,dataOffset:D,mipmapCount:B}}function getTextureFormat(E,A,_,I){if(A&DDS.PIXEL_FORMAT_FLAGS.FOURCC){if(_===DDS.D3DFMT.DX10){const B=new Uint32Array(I,DDS.MAGIC_SIZE+DDS.HEADER_SIZE,DDS.HEADER_DX10_SIZE/Uint32Array.BYTES_PER_ELEMENT);if(B[DDS.HEADER_DX10_FIELDS.MISC_FLAG]===DDS.RESOURCE_MISC_TEXTURECUBE)throw new Error("DDSParser does not support cubemap textures");if(B[DDS.HEADER_DX10_FIELDS.RESOURCE_DIMENSION]===DDS.D3D10_RESOURCE_DIMENSION.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSParser does not supported 3D texture data");const P=B[DDS.HEADER_DX10_FIELDS.DXGI_FORMAT];if(P in DXGI_TO_TEXTURE_FORMAT)return DXGI_TO_TEXTURE_FORMAT[P];throw new Error(`DDSParser cannot parse texture data with DXGI format ${P}`)}if(_ in FOURCC_TO_TEXTURE_FORMAT)return FOURCC_TO_TEXTURE_FORMAT[_];throw new Error(`DDSParser cannot parse texture data with fourCC format ${_}`)}if(A&DDS.PIXEL_FORMAT_FLAGS.RGB||A&DDS.PIXEL_FORMAT_FLAGS.RGBA)return getUncompressedTextureFormat(E);throw A&DDS.PIXEL_FORMAT_FLAGS.YUV?new Error("DDSParser does not supported YUV uncompressed texture data."):A&DDS.PIXEL_FORMAT_FLAGS.LUMINANCE||A&DDS.PIXEL_FORMAT_FLAGS.LUMINANCEA?new Error("DDSParser does not support single-channel (lumninance) texture data!"):A&DDS.PIXEL_FORMAT_FLAGS.ALPHA||A&DDS.PIXEL_FORMAT_FLAGS.ALPHAPIXELS?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}function getUncompressedTextureFormat(E){const A=E[DDS.HEADER_FIELDS.RGB_BITCOUNT],_=E[DDS.HEADER_FIELDS.R_BIT_MASK],I=E[DDS.HEADER_FIELDS.G_BIT_MASK],B=E[DDS.HEADER_FIELDS.B_BIT_MASK],T=E[DDS.HEADER_FIELDS.A_BIT_MASK];switch(A){case 32:if(_===255&&I===65280&&B===16711680&&T===4278190080)return DXGI_TO_TEXTURE_FORMAT[DDS.DXGI_FORMAT.DXGI_FORMAT_R8G8B8A8_UNORM];if(_===16711680&&I===65280&&B===255&&T===4278190080)return DXGI_TO_TEXTURE_FORMAT[DDS.DXGI_FORMAT.DXGI_FORMAT_B8G8R8A8_UNORM];if(_===1072693248&&I===1047552&&B===1023&&T===3221225472)return DXGI_TO_TEXTURE_FORMAT[DDS.DXGI_FORMAT.DXGI_FORMAT_R10G10B10A2_UNORM];if(_===65535&&I===4294901760&&B===0&&T===0)return DXGI_TO_TEXTURE_FORMAT[DDS.DXGI_FORMAT.DXGI_FORMAT_R16G16_UNORM];if(_===4294967295&&I===0&&B===0&&T===0)return DXGI_TO_TEXTURE_FORMAT[DDS.DXGI_FORMAT.DXGI_FORMAT_R32_FLOAT];break;case 24:break;case 16:if(_===31744&&I===992&&B===31&&T===32768)return DXGI_TO_TEXTURE_FORMAT[DDS.DXGI_FORMAT.DXGI_FORMAT_B5G5R5A1_UNORM];if(_===63488&&I===2016&&B===31&&T===0)return DXGI_TO_TEXTURE_FORMAT[DDS.DXGI_FORMAT.DXGI_FORMAT_B5G6R5_UNORM];if(_===3840&&I===240&&B===15&&T===61440)return DXGI_TO_TEXTURE_FORMAT[DDS.DXGI_FORMAT.DXGI_FORMAT_B4G4R4A4_UNORM];if(_===255&&I===0&&B===0&&T===65280)return DXGI_TO_TEXTURE_FORMAT[DDS.DXGI_FORMAT.DXGI_FORMAT_R8G8_UNORM];if(_===65535&&I===0&&B===0&&T===0)return DXGI_TO_TEXTURE_FORMAT[DDS.DXGI_FORMAT.DXGI_FORMAT_R16_UNORM];break;case 8:if(_===255&&I===0&&B===0&&T===0)return DXGI_TO_TEXTURE_FORMAT[DDS.DXGI_FORMAT.DXGI_FORMAT_R8_UNORM];break}throw new Error(`DDSParser does not support uncompressed texture with configuration:
                bitCount = ${A}, rBitMask = ${_}, gBitMask = ${I}, aBitMask = ${T}`)}const loadDDS={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High,name:"loadDDS"},name:"loadDDS",id:"dds",test(E){return checkExtension(E,[".dds"])},async load(E,A,_){const I=await getSupportedTextureFormats(),T=await(await fetch(E)).arrayBuffer(),R=parseDDS(T,I),P=new CompressedSource(R);return createTexture(P,_,E)},unload(E){Array.isArray(E)?E.forEach(A=>A.destroy(!0)):E.destroy(!0)}};var GL_INTERNAL_FORMAT=(E=>(E[E.RGBA8_SNORM=36759]="RGBA8_SNORM",E[E.RGBA=6408]="RGBA",E[E.RGBA8UI=36220]="RGBA8UI",E[E.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",E[E.RGBA8I=36238]="RGBA8I",E[E.RGBA8=32856]="RGBA8",E[E.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",E[E.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",E[E.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",E[E.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",E[E.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",E[E.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",E[E.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",E[E.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",E[E.COMPRESSED_RED_RGTC1_EXT=36283]="COMPRESSED_RED_RGTC1_EXT",E[E.COMPRESSED_SIGNED_RED_RGTC1_EXT=36284]="COMPRESSED_SIGNED_RED_RGTC1_EXT",E[E.COMPRESSED_RED_GREEN_RGTC2_EXT=36285]="COMPRESSED_RED_GREEN_RGTC2_EXT",E[E.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT=36286]="COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT",E[E.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",E[E.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",E[E.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",E[E.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",E[E.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",E[E.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",E[E.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",E[E.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",E[E.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",E[E.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",E[E.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",E[E.COMPRESSED_RGBA_ASTC_5x4_KHR=37809]="COMPRESSED_RGBA_ASTC_5x4_KHR",E[E.COMPRESSED_RGBA_ASTC_5x5_KHR=37810]="COMPRESSED_RGBA_ASTC_5x5_KHR",E[E.COMPRESSED_RGBA_ASTC_6x5_KHR=37811]="COMPRESSED_RGBA_ASTC_6x5_KHR",E[E.COMPRESSED_RGBA_ASTC_6x6_KHR=37812]="COMPRESSED_RGBA_ASTC_6x6_KHR",E[E.COMPRESSED_RGBA_ASTC_8x5_KHR=37813]="COMPRESSED_RGBA_ASTC_8x5_KHR",E[E.COMPRESSED_RGBA_ASTC_8x6_KHR=37814]="COMPRESSED_RGBA_ASTC_8x6_KHR",E[E.COMPRESSED_RGBA_ASTC_8x8_KHR=37815]="COMPRESSED_RGBA_ASTC_8x8_KHR",E[E.COMPRESSED_RGBA_ASTC_10x5_KHR=37816]="COMPRESSED_RGBA_ASTC_10x5_KHR",E[E.COMPRESSED_RGBA_ASTC_10x6_KHR=37817]="COMPRESSED_RGBA_ASTC_10x6_KHR",E[E.COMPRESSED_RGBA_ASTC_10x8_KHR=37818]="COMPRESSED_RGBA_ASTC_10x8_KHR",E[E.COMPRESSED_RGBA_ASTC_10x10_KHR=37819]="COMPRESSED_RGBA_ASTC_10x10_KHR",E[E.COMPRESSED_RGBA_ASTC_12x10_KHR=37820]="COMPRESSED_RGBA_ASTC_12x10_KHR",E[E.COMPRESSED_RGBA_ASTC_12x12_KHR=37821]="COMPRESSED_RGBA_ASTC_12x12_KHR",E[E.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR=37840]="COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR",E[E.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR=37841]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR",E[E.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR=37842]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR",E[E.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR=37843]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR",E[E.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR=37844]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR",E[E.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR=37845]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR",E[E.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR=37846]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR",E[E.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR=37847]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR",E[E.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR=37848]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR",E[E.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR=37849]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR",E[E.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR=37850]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR",E[E.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR=37851]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR",E[E.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR=37852]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR",E[E.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR=37853]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR",E[E.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",E[E.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",E[E.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",E[E.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",E))(GL_INTERNAL_FORMAT||{});const INTERNAL_FORMAT_TO_TEXTURE_FORMATS={33776:"bc1-rgba-unorm",33777:"bc1-rgba-unorm",33778:"bc2-rgba-unorm",33779:"bc3-rgba-unorm",35916:"bc1-rgba-unorm-srgb",35917:"bc1-rgba-unorm-srgb",35918:"bc2-rgba-unorm-srgb",35919:"bc3-rgba-unorm-srgb",36283:"bc4-r-unorm",36284:"bc4-r-snorm",36285:"bc5-rg-unorm",36286:"bc5-rg-snorm",37488:"eac-r11unorm",37490:"eac-rg11snorm",37492:"etc2-rgb8unorm",37496:"etc2-rgba8unorm",37493:"etc2-rgb8unorm-srgb",37497:"etc2-rgba8unorm-srgb",37494:"etc2-rgb8a1unorm",37495:"etc2-rgb8a1unorm-srgb",37808:"astc-4x4-unorm",37840:"astc-4x4-unorm-srgb",37809:"astc-5x4-unorm",37841:"astc-5x4-unorm-srgb",37810:"astc-5x5-unorm",37842:"astc-5x5-unorm-srgb",37811:"astc-6x5-unorm",37843:"astc-6x5-unorm-srgb",37812:"astc-6x6-unorm",37844:"astc-6x6-unorm-srgb",37813:"astc-8x5-unorm",37845:"astc-8x5-unorm-srgb",37814:"astc-8x6-unorm",37846:"astc-8x6-unorm-srgb",37815:"astc-8x8-unorm",37847:"astc-8x8-unorm-srgb",37816:"astc-10x5-unorm",37848:"astc-10x5-unorm-srgb",37817:"astc-10x6-unorm",37849:"astc-10x6-unorm-srgb",37818:"astc-10x8-unorm",37850:"astc-10x8-unorm-srgb",37819:"astc-10x10-unorm",37851:"astc-10x10-unorm-srgb",37820:"astc-12x10-unorm",37852:"astc-12x10-unorm-srgb",37821:"astc-12x12-unorm",37853:"astc-12x12-unorm-srgb",36492:"bc7-rgba-unorm",36493:"bc7-rgba-unorm-srgb",36494:"bc6h-rgb-float",36495:"bc6h-rgb-ufloat",35907:"rgba8unorm-srgb",36759:"rgba8snorm",36220:"rgba8uint",36238:"rgba8sint",6408:"rgba8unorm"},FILE_IDENTIFIER=[171,75,84,88,32,49,49,187,13,10,26,10],FIELDS={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},FILE_HEADER_SIZE=64,ENDIANNESS=67305985,TYPES_TO_BYTES_PER_COMPONENT={5121:1,5123:2,5124:4,5125:4,5126:4,36193:8},FORMATS_TO_COMPONENTS={6408:4,6407:3,33319:2,6403:1,6409:1,6410:2,6406:1},TYPES_TO_BYTES_PER_PIXEL={32819:2,32820:2,33635:2},INTERNAL_FORMAT_TO_BYTES_PER_PIXEL={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,36283:.5,36284:.5,36285:1,36286:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,37808:1,37840:1,37809:.8,37841:.8,37810:.64,37842:.64,37811:.53375,37843:.53375,37812:.445,37844:.445,37813:.4,37845:.4,37814:.33375,37846:.33375,37815:.25,37847:.25,37816:.32,37848:.32,37817:.26625,37849:.26625,37818:.2,37850:.2,37819:.16,37851:.16,37820:.13375,37852:.13375,37821:.11125,37853:.11125,36492:1,36493:1,36494:1,36495:1},KTX={FILE_HEADER_SIZE,FILE_IDENTIFIER,FORMATS_TO_COMPONENTS,INTERNAL_FORMAT_TO_BYTES_PER_PIXEL,INTERNAL_FORMAT_TO_TEXTURE_FORMATS,FIELDS,TYPES_TO_BYTES_PER_COMPONENT,TYPES_TO_BYTES_PER_PIXEL,ENDIANNESS};function parseKTX(E,A){const _=new DataView(E);if(!validate$3(_))throw new Error("Invalid KTX identifier in header");const{littleEndian:I,glType:B,glFormat:T,glInternalFormat:R,pixelWidth:P,pixelHeight:D,numberOfMipmapLevels:F,offset:L}=parseKTXHeader(_),U=KTX.INTERNAL_FORMAT_TO_TEXTURE_FORMATS[R];if(!U)throw new Error(`Unknown texture format ${R}`);if(!A.includes(U))throw new Error(`Unsupported texture format: ${U}, supportedFormats: ${A}`);const V=getImagePixelByteSize(B,T,R),K=getImageBuffers(_,B,V,P,D,L,F,I);return{format:U,width:P,height:D,resource:K,alphaMode:"no-premultiply-alpha"}}function getImageBuffers(E,A,_,I,B,T,R,P){const D=I+3&-4,F=B+3&-4;let L=I*B;A===0&&(L=D*F);let U=L*_,V=I,K=B,J=D,ee=F,ie=T;const ne=new Array(R);for(let ce=0;ce<R;ce++){const fe=E.getUint32(ie,P);let de=ie+4;ne[ce]=new Uint8Array(E.buffer,de,U),de+=U,ie+=fe+4,ie=ie%4!==0?ie+4-ie%4:ie,V=V>>1||1,K=K>>1||1,J=V+4-1&-4,ee=K+4-1&-4,U=J*ee*_}return ne}function getImagePixelByteSize(E,A,_){let I=KTX.INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[_];if(E!==0&&(KTX.TYPES_TO_BYTES_PER_COMPONENT[E]?I=KTX.TYPES_TO_BYTES_PER_COMPONENT[E]*KTX.FORMATS_TO_COMPONENTS[A]:I=KTX.TYPES_TO_BYTES_PER_PIXEL[E]),I===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");return I}function parseKTXHeader(E){const A=E.getUint32(KTX.FIELDS.ENDIANNESS,!0)===KTX.ENDIANNESS,_=E.getUint32(KTX.FIELDS.GL_TYPE,A),I=E.getUint32(KTX.FIELDS.GL_FORMAT,A),B=E.getUint32(KTX.FIELDS.GL_INTERNAL_FORMAT,A),T=E.getUint32(KTX.FIELDS.PIXEL_WIDTH,A),R=E.getUint32(KTX.FIELDS.PIXEL_HEIGHT,A)||1,P=E.getUint32(KTX.FIELDS.PIXEL_DEPTH,A)||1,D=E.getUint32(KTX.FIELDS.NUMBER_OF_ARRAY_ELEMENTS,A)||1,F=E.getUint32(KTX.FIELDS.NUMBER_OF_FACES,A),L=E.getUint32(KTX.FIELDS.NUMBER_OF_MIPMAP_LEVELS,A),U=E.getUint32(KTX.FIELDS.BYTES_OF_KEY_VALUE_DATA,A);if(R===0||P!==1)throw new Error("Only 2D textures are supported");if(F!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(D!==1)throw new Error("WebGL does not support array textures");return{littleEndian:A,glType:_,glFormat:I,glInternalFormat:B,pixelWidth:T,pixelHeight:R,numberOfMipmapLevels:L,offset:KTX.FILE_HEADER_SIZE+U}}function validate$3(E){for(let A=0;A<KTX.FILE_IDENTIFIER.length;A++)if(E.getUint8(A)!==KTX.FILE_IDENTIFIER[A])return!1;return!0}const loadKTX={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High,name:"loadKTX"},name:"loadKTX",id:"ktx",test(E){return checkExtension(E,".ktx")},async load(E,A,_){const I=await getSupportedTextureFormats(),T=await(await fetch(E)).arrayBuffer(),R=parseKTX(T,I),P=new CompressedSource(R);return createTexture(P,_,E)},unload(E){Array.isArray(E)?E.forEach(A=>A.destroy(!0)):E.destroy(!0)}},WORKER_CODE=`(function () {
    'use strict';

    const converters = {
      rgb8unorm: {
        convertedFormat: "rgba8unorm",
        convertFunction: convertRGBtoRGBA
      },
      "rgb8unorm-srgb": {
        convertedFormat: "rgba8unorm-srgb",
        convertFunction: convertRGBtoRGBA
      }
    };
    function convertFormatIfRequired(textureOptions) {
      const format = textureOptions.format;
      if (converters[format]) {
        const convertFunction = converters[format].convertFunction;
        const levelBuffers = textureOptions.resource;
        for (let i = 0; i < levelBuffers.length; i++) {
          levelBuffers[i] = convertFunction(levelBuffers[i]);
        }
        textureOptions.format = converters[format].convertedFormat;
      }
    }
    function convertRGBtoRGBA(levelBuffer) {
      const pixelCount = levelBuffer.byteLength / 3;
      const levelBufferWithAlpha = new Uint32Array(pixelCount);
      for (let i = 0; i < pixelCount; ++i) {
        levelBufferWithAlpha[i] = levelBuffer[i * 3] + (levelBuffer[i * 3 + 1] << 8) + (levelBuffer[i * 3 + 2] << 16) + 4278190080;
      }
      return new Uint8Array(levelBufferWithAlpha.buffer);
    }

    function createLevelBuffersFromKTX(ktxTexture) {
      const levelBuffers = [];
      for (let i = 0; i < ktxTexture.numLevels; i++) {
        const imageData = ktxTexture.getImageData(i, 0, 0);
        const levelBuffer = new Uint8Array(imageData.byteLength);
        levelBuffer.set(imageData);
        levelBuffers.push(levelBuffer);
      }
      return levelBuffers;
    }

    const glFormatToGPUFormatMap = {
      6408: "rgba8unorm",
      32856: "bgra8unorm",
      //
      32857: "rgb10a2unorm",
      33189: "depth16unorm",
      33190: "depth24plus",
      33321: "r8unorm",
      33323: "rg8unorm",
      33325: "r16float",
      33326: "r32float",
      33327: "rg16float",
      33328: "rg32float",
      33329: "r8sint",
      33330: "r8uint",
      33331: "r16sint",
      33332: "r16uint",
      33333: "r32sint",
      33334: "r32uint",
      33335: "rg8sint",
      33336: "rg8uint",
      33337: "rg16sint",
      33338: "rg16uint",
      33339: "rg32sint",
      33340: "rg32uint",
      33778: "bc2-rgba-unorm",
      33779: "bc3-rgba-unorm",
      34836: "rgba32float",
      34842: "rgba16float",
      35056: "depth24plus-stencil8",
      35898: "rg11b10ufloat",
      35901: "rgb9e5ufloat",
      35907: "rgba8unorm-srgb",
      // bgra8unorm-srgb
      36012: "depth32float",
      36013: "depth32float-stencil8",
      36168: "stencil8",
      36208: "rgba32uint",
      36214: "rgba16uint",
      36220: "rgba8uint",
      36226: "rgba32sint",
      36232: "rgba16sint",
      36238: "rgba8sint",
      36492: "bc7-rgba-unorm",
      36756: "r8snorm",
      36757: "rg8snorm",
      36759: "rgba8snorm",
      37496: "etc2-rgba8unorm",
      37808: "astc-4x4-unorm"
    };
    function glFormatToGPUFormat(glInternalFormat) {
      const format = glFormatToGPUFormatMap[glInternalFormat];
      if (format) {
        return format;
      }
      throw new Error(\`Unsupported glInternalFormat: \${glInternalFormat}\`);
    }

    const vkFormatToGPUFormatMap = {
      23: "rgb8unorm",
      // VK_FORMAT_R8G8B8_UNORM
      37: "rgba8unorm",
      // VK_FORMAT_R8G8B8A8_UNORM
      43: "rgba8unorm-srgb"
      // VK_FORMAT_R8G8B8A8_SRGB
      // TODO add more!
    };
    function vkFormatToGPUFormat(vkFormat) {
      const format = vkFormatToGPUFormatMap[vkFormat];
      if (format) {
        return format;
      }
      throw new Error(\`Unsupported VkFormat: \${vkFormat}\`);
    }

    function getTextureFormatFromKTXTexture(ktxTexture) {
      if (ktxTexture.classId === 2) {
        return vkFormatToGPUFormat(ktxTexture.vkFormat);
      }
      return glFormatToGPUFormat(ktxTexture.glInternalformat);
    }

    const gpuFormatToBasisTranscoderFormatMap = {
      "bc3-rgba-unorm": "BC3_RGBA",
      "bc7-rgba-unorm": "BC7_M5_RGBA",
      "etc2-rgba8unorm": "ETC2_RGBA",
      "astc-4x4-unorm": "ASTC_4x4_RGBA",
      // Uncompressed
      rgba8unorm: "RGBA32",
      rg11b10ufloat: "R11F_G11F_B10F"
    };
    function gpuFormatToKTXBasisTranscoderFormat(transcoderFormat) {
      const format = gpuFormatToBasisTranscoderFormatMap[transcoderFormat];
      if (format) {
        return format;
      }
      throw new Error(\`Unsupported transcoderFormat: \${transcoderFormat}\`);
    }

    const settings = {
      jsUrl: "",
      wasmUrl: ""
    };
    let basisTranscoderFormat;
    let basisTranscodedTextureFormat;
    let ktxPromise;
    async function getKTX() {
      if (!ktxPromise) {
        const absoluteJsUrl = new URL(settings.jsUrl, location.origin).href;
        const absoluteWasmUrl = new URL(settings.wasmUrl, location.origin).href;
        importScripts(absoluteJsUrl);
        ktxPromise = new Promise((resolve) => {
          LIBKTX({
            locateFile: (_file) => absoluteWasmUrl
          }).then((libktx) => {
            resolve(libktx);
          });
        });
      }
      return ktxPromise;
    }
    async function fetchKTXTexture(url, ktx) {
      const ktx2Response = await fetch(url);
      if (ktx2Response.ok) {
        const ktx2ArrayBuffer = await ktx2Response.arrayBuffer();
        return new ktx.ktxTexture(new Uint8Array(ktx2ArrayBuffer));
      }
      throw new Error(\`Failed to load KTX(2) texture: \${url}\`);
    }
    const preferredTranscodedFormat = [
      "bc7-rgba-unorm",
      "astc-4x4-unorm",
      "etc2-rgba8unorm",
      "bc3-rgba-unorm",
      "rgba8unorm"
    ];
    async function load(url) {
      const ktx = await getKTX();
      const ktxTexture = await fetchKTXTexture(url, ktx);
      let format;
      if (ktxTexture.needsTranscoding) {
        format = basisTranscodedTextureFormat;
        const transcodeFormat = ktx.TranscodeTarget[basisTranscoderFormat];
        const result = ktxTexture.transcodeBasis(transcodeFormat, 0);
        if (result !== ktx.ErrorCode.SUCCESS) {
          throw new Error("Unable to transcode basis texture.");
        }
      } else {
        format = getTextureFormatFromKTXTexture(ktxTexture);
      }
      const levelBuffers = createLevelBuffersFromKTX(ktxTexture);
      const textureOptions = {
        width: ktxTexture.baseWidth,
        height: ktxTexture.baseHeight,
        format,
        mipLevelCount: ktxTexture.numLevels,
        resource: levelBuffers,
        alphaMode: "no-premultiply-alpha"
      };
      convertFormatIfRequired(textureOptions);
      return textureOptions;
    }
    async function init(jsUrl, wasmUrl, supportedTextures) {
      if (jsUrl)
        settings.jsUrl = jsUrl;
      if (wasmUrl)
        settings.wasmUrl = wasmUrl;
      basisTranscodedTextureFormat = preferredTranscodedFormat.filter((format) => supportedTextures.includes(format))[0];
      basisTranscoderFormat = gpuFormatToKTXBasisTranscoderFormat(basisTranscodedTextureFormat);
      await getKTX();
    }
    const messageHandlers = {
      init: async (data) => {
        const { jsUrl, wasmUrl, supportedTextures } = data;
        await init(jsUrl, wasmUrl, supportedTextures);
      },
      load: async (data) => {
        try {
          const textureOptions = await load(data.url);
          return {
            type: "load",
            url: data.url,
            success: true,
            textureOptions,
            transferables: textureOptions.resource?.map((arr) => arr.buffer)
          };
        } catch (e) {
          throw e;
        }
      }
    };
    self.onmessage = async (messageEvent) => {
      const message = messageEvent.data;
      const response = await messageHandlers[message.type]?.(message);
      if (response) {
        self.postMessage(response, response.transferables);
      }
    };

})();
`;let WORKER_URL=null;class WorkerInstance{constructor(){WORKER_URL||(WORKER_URL=URL.createObjectURL(new Blob([WORKER_CODE],{type:"application/javascript"}))),this.worker=new Worker(WORKER_URL)}}WorkerInstance.revokeObjectURL=function(){WORKER_URL&&(URL.revokeObjectURL(WORKER_URL),WORKER_URL=null)};const ktxTranscoderUrls={jsUrl:"https://files.pixijs.download/transcoders/ktx/libktx.js",wasmUrl:"https://files.pixijs.download/transcoders/ktx/libktx.wasm"};function setKTXTranscoderPath(E){Object.assign(ktxTranscoderUrls,E)}let ktxWorker;const urlHash={};function getKTX2Worker(E){return ktxWorker||(ktxWorker=new WorkerInstance().worker,ktxWorker.onmessage=A=>{const{success:_,url:I,textureOptions:B}=A.data;_||console.warn("Failed to load KTX texture",I),urlHash[I](B)},ktxWorker.postMessage({type:"init",jsUrl:ktxTranscoderUrls.jsUrl,wasmUrl:ktxTranscoderUrls.wasmUrl,supportedTextures:E})),ktxWorker}function loadKTX2onWorker(E,A){const _=getKTX2Worker(A);return new Promise(I=>{urlHash[E]=I,_.postMessage({type:"load",url:E})})}const loadKTX2={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High,name:"loadKTX2"},name:"loadKTX2",id:"ktx2",test(E){return checkExtension(E,".ktx2")},async load(E,A,_){const I=await getSupportedTextureFormats(),B=await loadKTX2onWorker(E,I),T=new CompressedSource(B);return createTexture(T,_,E)},async unload(E){Array.isArray(E)?E.forEach(A=>A.destroy(!0)):E.destroy(!0)}},converters={rgb8unorm:{convertedFormat:"rgba8unorm",convertFunction:convertRGBtoRGBA},"rgb8unorm-srgb":{convertedFormat:"rgba8unorm-srgb",convertFunction:convertRGBtoRGBA}};function convertFormatIfRequired(E){const A=E.format;if(converters[A]){const _=converters[A].convertFunction,I=E.resource;for(let B=0;B<I.length;B++)I[B]=_(I[B]);E.format=converters[A].convertedFormat}}function convertRGBtoRGBA(E){const A=E.byteLength/3,_=new Uint32Array(A);for(let I=0;I<A;++I)_[I]=E[I*3]+(E[I*3+1]<<8)+(E[I*3+2]<<16)+4278190080;return new Uint8Array(_.buffer)}function createLevelBuffersFromKTX(E){const A=[];for(let _=0;_<E.numLevels;_++){const I=E.getImageData(_,0,0),B=new Uint8Array(I.byteLength);B.set(I),A.push(B)}return A}const glFormatToGPUFormatMap={6408:"rgba8unorm",32856:"bgra8unorm",32857:"rgb10a2unorm",33189:"depth16unorm",33190:"depth24plus",33321:"r8unorm",33323:"rg8unorm",33325:"r16float",33326:"r32float",33327:"rg16float",33328:"rg32float",33329:"r8sint",33330:"r8uint",33331:"r16sint",33332:"r16uint",33333:"r32sint",33334:"r32uint",33335:"rg8sint",33336:"rg8uint",33337:"rg16sint",33338:"rg16uint",33339:"rg32sint",33340:"rg32uint",33778:"bc2-rgba-unorm",33779:"bc3-rgba-unorm",34836:"rgba32float",34842:"rgba16float",35056:"depth24plus-stencil8",35898:"rg11b10ufloat",35901:"rgb9e5ufloat",35907:"rgba8unorm-srgb",36012:"depth32float",36013:"depth32float-stencil8",36168:"stencil8",36208:"rgba32uint",36214:"rgba16uint",36220:"rgba8uint",36226:"rgba32sint",36232:"rgba16sint",36238:"rgba8sint",36492:"bc7-rgba-unorm",36756:"r8snorm",36757:"rg8snorm",36759:"rgba8snorm",37496:"etc2-rgba8unorm",37808:"astc-4x4-unorm"};function glFormatToGPUFormat(E){const A=glFormatToGPUFormatMap[E];if(A)return A;throw new Error(`Unsupported glInternalFormat: ${E}`)}const vkFormatToGPUFormatMap={23:"rgb8unorm",37:"rgba8unorm",43:"rgba8unorm-srgb"};function vkFormatToGPUFormat(E){const A=vkFormatToGPUFormatMap[E];if(A)return A;throw new Error(`Unsupported VkFormat: ${E}`)}function getTextureFormatFromKTXTexture(E){return E.classId===2?vkFormatToGPUFormat(E.vkFormat):glFormatToGPUFormat(E.glInternalformat)}const gpuFormatToBasisTranscoderFormatMap={"bc3-rgba-unorm":"BC3_RGBA","bc7-rgba-unorm":"BC7_M5_RGBA","etc2-rgba8unorm":"ETC2_RGBA","astc-4x4-unorm":"ASTC_4x4_RGBA",rgba8unorm:"RGBA32",rg11b10ufloat:"R11F_G11F_B10F"};function gpuFormatToKTXBasisTranscoderFormat(E){const A=gpuFormatToBasisTranscoderFormatMap[E];if(A)return A;throw new Error(`Unsupported transcoderFormat: ${E}`)}const validFormats=["basis","bc7","bc6h","astc","etc2","bc5","bc4","bc3","bc2","bc1","eac"],resolveCompressedTextureUrl={extension:ExtensionType.ResolveParser,test:E=>checkExtension(E,[".ktx",".ktx2",".dds"]),parse:E=>{let A;const _=E.split(".");if(_.length>2){const I=_[_.length-2];validFormats.includes(I)&&(A=I)}else A=_[_.length-1];return{resolution:parseFloat(Resolver.RETINA_PREFIX.exec(E)?.[1]??"1"),format:A,src:E}}};let compressedTextureExtensions;const detectCompressed={extension:{type:ExtensionType.DetectionParser,priority:2},test:async()=>!!(await isWebGPUSupported()||isWebGLSupported()),add:async E=>{const A=await getSupportedCompressedTextureFormats();return compressedTextureExtensions=extractExtensionsForCompressedTextureFormats(A),[...compressedTextureExtensions,...E]},remove:async E=>compressedTextureExtensions?E.filter(A=>!(A in compressedTextureExtensions)):E};function extractExtensionsForCompressedTextureFormats(E){const A=["basis"],_={};return E.forEach(I=>{const B=I.split("-")[0];B&&!_[B]&&(_[B]=!0,A.push(B))}),A.sort((I,B)=>{const T=validFormats.indexOf(I),R=validFormats.indexOf(B);return T===-1?1:R===-1?-1:T-R}),A}const tempBounds$3=new Bounds,_Culler=class{cull(A,_,I=!0){this._cullRecursive(A,_,I)}_cullRecursive(A,_,I=!0){if(A.cullable&&A.measurable&&A.includeInBuild){const B=A.cullArea??getGlobalBounds(A,I,tempBounds$3);A.culled=B.x>=_.x+_.width||B.y>=_.y+_.height||B.x+B.width<=_.x||B.y+B.height<=_.y}else A.culled=!1;if(!(!A.cullableChildren||A.culled||!A.renderable||!A.measurable||!A.includeInBuild))for(let B=0;B<A.children.length;B++)this._cullRecursive(A.children[B],_,I)}};_Culler.shared=new _Culler;let Culler=_Culler;class CullerPlugin{static init(A){this._renderRef=this.render.bind(this),this.render=()=>{const _=A?.culler?.updateTransform!==!0;Culler.shared.cull(this.stage,this.renderer.screen,_),this.renderer.render({container:this.stage})}}static destroy(){this.render=this._renderRef}}CullerPlugin.extension={priority:10,type:ExtensionType.Application,name:"culler"};class DOMContainer extends ViewContainer{constructor(A={}){const{element:_,anchor:I,...B}=A;super({label:"DOMContainer",...B}),this.renderPipeId="dom",this.batched=!1,this._anchor=new Point$1(0,0),I&&(this.anchor=I),this.element=A.element||document.createElement("div")}get anchor(){return this._anchor}set anchor(A){typeof A=="number"?this._anchor.set(A):this._anchor.copyFrom(A)}set element(A){this._element!==A&&(this._element=A,this.onViewUpdate())}get element(){return this._element}updateBounds(){const A=this._bounds,_=this._element;if(!_){A.minX=0,A.minY=0,A.maxX=0,A.maxY=0;return}const{offsetWidth:I,offsetHeight:B}=_;A.minX=0,A.maxX=I,A.minY=0,A.maxY=B}destroy(A=!1){super.destroy(A),this._element?.parentNode?.removeChild(this._element),this._element=null,this._anchor=null}}class DOMPipe{constructor(A){this._attachedDomElements=[],this._renderer=A,this._renderer.runners.postrender.add(this),this._renderer.runners.init.add(this),this._domElement=document.createElement("div"),this._domElement.style.position="absolute",this._domElement.style.top="0",this._domElement.style.left="0",this._domElement.style.pointerEvents="none",this._domElement.style.zIndex="1000"}init(){this._canvasObserver=new CanvasObserver({domElement:this._domElement,renderer:this._renderer})}addRenderable(A,_){this._attachedDomElements.includes(A)||this._attachedDomElements.push(A)}updateRenderable(A){}validateRenderable(A){return!0}postrender(){const A=this._attachedDomElements;if(A.length===0){this._domElement.remove();return}this._canvasObserver.ensureAttached();for(let _=0;_<A.length;_++){const I=A[_],B=I.element;if(!I.parent||I.globalDisplayStatus<7)B?.remove(),A.splice(_,1),_--;else{this._domElement.contains(B)||(B.style.position="absolute",B.style.pointerEvents="auto",this._domElement.appendChild(B));const T=I.worldTransform,R=I._anchor,P=I.width*R.x,D=I.height*R.y;B.style.transformOrigin=`${P}px ${D}px`,B.style.transform=`matrix(${T.a}, ${T.b}, ${T.c}, ${T.d}, ${T.tx-P}, ${T.ty-D})`,B.style.opacity=I.groupAlpha.toString()}}}destroy(){this._renderer.runners.postrender.remove(this);for(let A=0;A<this._attachedDomElements.length;A++)this._attachedDomElements[A].element?.remove();this._attachedDomElements.length=0,this._domElement.remove(),this._canvasObserver.destroy(),this._renderer=null}}DOMPipe.extension={type:[ExtensionType.WebGLPipes,ExtensionType.WebGPUPipes,ExtensionType.CanvasPipes],name:"dom"};var lib$a={},dom={},conventions={},hasRequiredConventions;function requireConventions(){if(hasRequiredConventions)return conventions;hasRequiredConventions=1;function E(T,R,P){if(P===void 0&&(P=Array.prototype),T&&typeof P.find=="function")return P.find.call(T,R);for(var D=0;D<T.length;D++)if(Object.prototype.hasOwnProperty.call(T,D)){var F=T[D];if(R.call(void 0,F,D,T))return F}}function A(T,R){return R===void 0&&(R=Object),R&&typeof R.freeze=="function"?R.freeze(T):T}function _(T,R){if(T===null||typeof T!="object")throw new TypeError("target is not an object");for(var P in R)Object.prototype.hasOwnProperty.call(R,P)&&(T[P]=R[P]);return T}var I=A({HTML:"text/html",isHTML:function(T){return T===I.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),B=A({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(T){return T===B.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return conventions.assign=_,conventions.find=E,conventions.freeze=A,conventions.MIME_TYPE=I,conventions.NAMESPACE=B,conventions}var hasRequiredDom;function requireDom(){if(hasRequiredDom)return dom;hasRequiredDom=1;var E=requireConventions(),A=E.find,_=E.NAMESPACE;function I(We){return We!==""}function B(We){return We?We.split(/[\t\n\f\r ]+/).filter(I):[]}function T(We,Ve){return We.hasOwnProperty(Ve)||(We[Ve]=!0),We}function R(We){if(!We)return[];var Ve=B(We);return Object.keys(Ve.reduce(T,{}))}function P(We){return function(Ve){return We&&We.indexOf(Ve)!==-1}}function D(We,Ve){for(var qe in We)Object.prototype.hasOwnProperty.call(We,qe)&&(Ve[qe]=We[qe])}function F(We,Ve){var qe=We.prototype;if(!(qe instanceof Ve)){let pt=function(){};pt.prototype=Ve.prototype,pt=new pt,D(qe,pt),We.prototype=qe=pt}qe.constructor!=We&&(typeof We!="function"&&console.error("unknown Class:"+We),qe.constructor=We)}var L={},U=L.ELEMENT_NODE=1,V=L.ATTRIBUTE_NODE=2,K=L.TEXT_NODE=3,J=L.CDATA_SECTION_NODE=4,ee=L.ENTITY_REFERENCE_NODE=5,ie=L.ENTITY_NODE=6,ne=L.PROCESSING_INSTRUCTION_NODE=7,ce=L.COMMENT_NODE=8,fe=L.DOCUMENT_NODE=9,de=L.DOCUMENT_TYPE_NODE=10,pe=L.DOCUMENT_FRAGMENT_NODE=11,ve=L.NOTATION_NODE=12,ye={},_e={};ye.INDEX_SIZE_ERR=(_e[1]="Index size error",1),ye.DOMSTRING_SIZE_ERR=(_e[2]="DOMString size error",2);var be=ye.HIERARCHY_REQUEST_ERR=(_e[3]="Hierarchy request error",3);ye.WRONG_DOCUMENT_ERR=(_e[4]="Wrong document",4),ye.INVALID_CHARACTER_ERR=(_e[5]="Invalid character",5),ye.NO_DATA_ALLOWED_ERR=(_e[6]="No data allowed",6),ye.NO_MODIFICATION_ALLOWED_ERR=(_e[7]="No modification allowed",7);var Te=ye.NOT_FOUND_ERR=(_e[8]="Not found",8);ye.NOT_SUPPORTED_ERR=(_e[9]="Not supported",9);var ue=ye.INUSE_ATTRIBUTE_ERR=(_e[10]="Attribute in use",10);ye.INVALID_STATE_ERR=(_e[11]="Invalid state",11),ye.SYNTAX_ERR=(_e[12]="Syntax error",12),ye.INVALID_MODIFICATION_ERR=(_e[13]="Invalid modification",13),ye.NAMESPACE_ERR=(_e[14]="Invalid namespace",14),ye.INVALID_ACCESS_ERR=(_e[15]="Invalid access",15);function O(We,Ve){if(Ve instanceof Error)var qe=Ve;else qe=this,Error.call(this,_e[We]),this.message=_e[We],Error.captureStackTrace&&Error.captureStackTrace(this,O);return qe.code=We,Ve&&(this.message=this.message+": "+Ve),qe}O.prototype=Error.prototype,D(ye,O);function z(){}z.prototype={length:0,item:function(We){return We>=0&&We<this.length?this[We]:null},toString:function(We,Ve){for(var qe=[],pt=0;pt<this.length;pt++)He(this[pt],qe,We,Ve);return qe.join("")},filter:function(We){return Array.prototype.filter.call(this,We)},indexOf:function(We){return Array.prototype.indexOf.call(this,We)}};function Y(We,Ve){this._node=We,this._refresh=Ve,te(this)}function te(We){var Ve=We._node._inc||We._node.ownerDocument._inc;if(We._inc!==Ve){var qe=We._refresh(We._node);if(De(We,"length",qe.length),!We.$$length||qe.length<We.$$length)for(var pt=qe.length;pt in We;pt++)Object.prototype.hasOwnProperty.call(We,pt)&&delete We[pt];D(qe,We),We._inc=Ve}}Y.prototype.item=function(We){return te(this),this[We]||null},F(Y,z);function oe(){}function le(We,Ve){for(var qe=We.length;qe--;)if(We[qe]===Ve)return qe}function he(We,Ve,qe,pt){if(pt?Ve[le(Ve,pt)]=qe:Ve[Ve.length++]=qe,We){qe.ownerElement=We;var At=We.ownerDocument;At&&(pt&&Se(At,We,pt),ke(At,We,qe))}}function ae(We,Ve,qe){var pt=le(Ve,qe);if(pt>=0){for(var At=Ve.length-1;pt<At;)Ve[pt]=Ve[++pt];if(Ve.length=At,We){var jt=We.ownerDocument;jt&&(Se(jt,We,qe),qe.ownerElement=null)}}else throw new O(Te,new Error(We.tagName+"@"+qe))}oe.prototype={length:0,item:z.prototype.item,getNamedItem:function(We){for(var Ve=this.length;Ve--;){var qe=this[Ve];if(qe.nodeName==We)return qe}},setNamedItem:function(We){var Ve=We.ownerElement;if(Ve&&Ve!=this._ownerElement)throw new O(ue);var qe=this.getNamedItem(We.nodeName);return he(this._ownerElement,this,We,qe),qe},setNamedItemNS:function(We){var Ve=We.ownerElement,qe;if(Ve&&Ve!=this._ownerElement)throw new O(ue);return qe=this.getNamedItemNS(We.namespaceURI,We.localName),he(this._ownerElement,this,We,qe),qe},removeNamedItem:function(We){var Ve=this.getNamedItem(We);return ae(this._ownerElement,this,Ve),Ve},removeNamedItemNS:function(We,Ve){var qe=this.getNamedItemNS(We,Ve);return ae(this._ownerElement,this,qe),qe},getNamedItemNS:function(We,Ve){for(var qe=this.length;qe--;){var pt=this[qe];if(pt.localName==Ve&&pt.namespaceURI==We)return pt}return null}};function Q(){}Q.prototype={hasFeature:function(We,Ve){return!0},createDocument:function(We,Ve,qe){var pt=new Ee;if(pt.implementation=this,pt.childNodes=new z,pt.doctype=qe||null,qe&&pt.appendChild(qe),Ve){var At=pt.createElementNS(We,Ve);pt.appendChild(At)}return pt},createDocumentType:function(We,Ve,qe){var pt=new Nt;return pt.name=We,pt.nodeName=We,pt.publicId=Ve||"",pt.systemId=qe||"",pt}};function se(){}se.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(We,Ve){return vt(this,We,Ve)},replaceChild:function(We,Ve){vt(this,We,Ve,St),Ve&&this.removeChild(Ve)},removeChild:function(We){return we(this,We)},appendChild:function(We){return this.insertBefore(We,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(We){return Rt(this.ownerDocument||this,this,We)},normalize:function(){for(var We=this.firstChild;We;){var Ve=We.nextSibling;Ve&&Ve.nodeType==K&&We.nodeType==K?(this.removeChild(Ve),We.appendData(Ve.data)):(We.normalize(),We=Ve)}},isSupported:function(We,Ve){return this.ownerDocument.implementation.hasFeature(We,Ve)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(We){for(var Ve=this;Ve;){var qe=Ve._nsMap;if(qe){for(var pt in qe)if(Object.prototype.hasOwnProperty.call(qe,pt)&&qe[pt]===We)return pt}Ve=Ve.nodeType==V?Ve.ownerDocument:Ve.parentNode}return null},lookupNamespaceURI:function(We){for(var Ve=this;Ve;){var qe=Ve._nsMap;if(qe&&Object.prototype.hasOwnProperty.call(qe,We))return qe[We];Ve=Ve.nodeType==V?Ve.ownerDocument:Ve.parentNode}return null},isDefaultNamespace:function(We){var Ve=this.lookupPrefix(We);return Ve==null}};function Ae(We){return We=="<"&&"&lt;"||We==">"&&"&gt;"||We=="&"&&"&amp;"||We=='"'&&"&quot;"||"&#"+We.charCodeAt()+";"}D(L,se),D(L,se.prototype);function ge(We,Ve){if(Ve(We))return!0;if(We=We.firstChild)do if(ge(We,Ve))return!0;while(We=We.nextSibling)}function Ee(){this.ownerDocument=this}function ke(We,Ve,qe){We&&We._inc++;var pt=qe.namespaceURI;pt===_.XMLNS&&(Ve._nsMap[qe.prefix?qe.localName:""]=qe.value)}function Se(We,Ve,qe,pt){We&&We._inc++;var At=qe.namespaceURI;At===_.XMLNS&&delete Ve._nsMap[qe.prefix?qe.localName:""]}function Ie(We,Ve,qe){if(We&&We._inc){We._inc++;var pt=Ve.childNodes;if(qe)pt[pt.length++]=qe;else{for(var At=Ve.firstChild,jt=0;At;)pt[jt++]=At,At=At.nextSibling;pt.length=jt,delete pt[pt.length]}}}function we(We,Ve){var qe=Ve.previousSibling,pt=Ve.nextSibling;return qe?qe.nextSibling=pt:We.firstChild=pt,pt?pt.previousSibling=qe:We.lastChild=qe,Ve.parentNode=null,Ve.previousSibling=null,Ve.nextSibling=null,Ie(We.ownerDocument,We),Ve}function xe(We){return We&&(We.nodeType===se.DOCUMENT_NODE||We.nodeType===se.DOCUMENT_FRAGMENT_NODE||We.nodeType===se.ELEMENT_NODE)}function Fe(We){return We&&(Oe(We)||et(We)||Ge(We)||We.nodeType===se.DOCUMENT_FRAGMENT_NODE||We.nodeType===se.COMMENT_NODE||We.nodeType===se.PROCESSING_INSTRUCTION_NODE)}function Ge(We){return We&&We.nodeType===se.DOCUMENT_TYPE_NODE}function Oe(We){return We&&We.nodeType===se.ELEMENT_NODE}function et(We){return We&&We.nodeType===se.TEXT_NODE}function Mt(We,Ve){var qe=We.childNodes||[];if(A(qe,Oe)||Ge(Ve))return!1;var pt=A(qe,Ge);return!(Ve&&pt&&qe.indexOf(pt)>qe.indexOf(Ve))}function dt(We,Ve){var qe=We.childNodes||[];function pt(jt){return Oe(jt)&&jt!==Ve}if(A(qe,pt))return!1;var At=A(qe,Ge);return!(Ve&&At&&qe.indexOf(At)>qe.indexOf(Ve))}function mt(We,Ve,qe){if(!xe(We))throw new O(be,"Unexpected parent node type "+We.nodeType);if(qe&&qe.parentNode!==We)throw new O(Te,"child not in parent");if(!Fe(Ve)||Ge(Ve)&&We.nodeType!==se.DOCUMENT_NODE)throw new O(be,"Unexpected node type "+Ve.nodeType+" for parent node type "+We.nodeType)}function Ut(We,Ve,qe){var pt=We.childNodes||[],At=Ve.childNodes||[];if(Ve.nodeType===se.DOCUMENT_FRAGMENT_NODE){var jt=At.filter(Oe);if(jt.length>1||A(At,et))throw new O(be,"More than one element or text in fragment");if(jt.length===1&&!Mt(We,qe))throw new O(be,"Element in fragment can not be inserted before doctype")}if(Oe(Ve)&&!Mt(We,qe))throw new O(be,"Only one element can be added and only after doctype");if(Ge(Ve)){if(A(pt,Ge))throw new O(be,"Only one doctype is allowed");var rr=A(pt,Oe);if(qe&&pt.indexOf(rr)<pt.indexOf(qe))throw new O(be,"Doctype can only be inserted before an element");if(!qe&&rr)throw new O(be,"Doctype can not be appended since element is present")}}function St(We,Ve,qe){var pt=We.childNodes||[],At=Ve.childNodes||[];if(Ve.nodeType===se.DOCUMENT_FRAGMENT_NODE){var jt=At.filter(Oe);if(jt.length>1||A(At,et))throw new O(be,"More than one element or text in fragment");if(jt.length===1&&!dt(We,qe))throw new O(be,"Element in fragment can not be inserted before doctype")}if(Oe(Ve)&&!dt(We,qe))throw new O(be,"Only one element can be added and only after doctype");if(Ge(Ve)){if(A(pt,function(Ne){return Ge(Ne)&&Ne!==qe}))throw new O(be,"Only one doctype is allowed");var rr=A(pt,Oe);if(qe&&pt.indexOf(rr)<pt.indexOf(qe))throw new O(be,"Doctype can only be inserted before an element")}}function vt(We,Ve,qe,pt){mt(We,Ve,qe),We.nodeType===se.DOCUMENT_NODE&&(pt||Ut)(We,Ve,qe);var At=Ve.parentNode;if(At&&At.removeChild(Ve),Ve.nodeType===pe){var jt=Ve.firstChild;if(jt==null)return Ve;var rr=Ve.lastChild}else jt=rr=Ve;var Ke=qe?qe.previousSibling:We.lastChild;jt.previousSibling=Ke,rr.nextSibling=qe,Ke?Ke.nextSibling=jt:We.firstChild=jt,qe==null?We.lastChild=rr:qe.previousSibling=rr;do jt.parentNode=We;while(jt!==rr&&(jt=jt.nextSibling));return Ie(We.ownerDocument||We,We),Ve.nodeType==pe&&(Ve.firstChild=Ve.lastChild=null),Ve}function It(We,Ve){return Ve.parentNode&&Ve.parentNode.removeChild(Ve),Ve.parentNode=We,Ve.previousSibling=We.lastChild,Ve.nextSibling=null,Ve.previousSibling?Ve.previousSibling.nextSibling=Ve:We.firstChild=Ve,We.lastChild=Ve,Ie(We.ownerDocument,We,Ve),Ve}Ee.prototype={nodeName:"#document",nodeType:fe,doctype:null,documentElement:null,_inc:1,insertBefore:function(We,Ve){if(We.nodeType==pe){for(var qe=We.firstChild;qe;){var pt=qe.nextSibling;this.insertBefore(qe,Ve),qe=pt}return We}return vt(this,We,Ve),We.ownerDocument=this,this.documentElement===null&&We.nodeType===U&&(this.documentElement=We),We},removeChild:function(We){return this.documentElement==We&&(this.documentElement=null),we(this,We)},replaceChild:function(We,Ve){vt(this,We,Ve,St),We.ownerDocument=this,Ve&&this.removeChild(Ve),Oe(We)&&(this.documentElement=We)},importNode:function(We,Ve){return Dt(this,We,Ve)},getElementById:function(We){var Ve=null;return ge(this.documentElement,function(qe){if(qe.nodeType==U&&qe.getAttribute("id")==We)return Ve=qe,!0}),Ve},getElementsByClassName:function(We){var Ve=R(We);return new Y(this,function(qe){var pt=[];return Ve.length>0&&ge(qe.documentElement,function(At){if(At!==qe&&At.nodeType===U){var jt=At.getAttribute("class");if(jt){var rr=We===jt;if(!rr){var Ke=R(jt);rr=Ve.every(P(Ke))}rr&&pt.push(At)}}}),pt})},createElement:function(We){var Ve=new yt;Ve.ownerDocument=this,Ve.nodeName=We,Ve.tagName=We,Ve.localName=We,Ve.childNodes=new z;var qe=Ve.attributes=new oe;return qe._ownerElement=Ve,Ve},createDocumentFragment:function(){var We=new Ce;return We.ownerDocument=this,We.childNodes=new z,We},createTextNode:function(We){var Ve=new ft;return Ve.ownerDocument=this,Ve.appendData(We),Ve},createComment:function(We){var Ve=new _t;return Ve.ownerDocument=this,Ve.appendData(We),Ve},createCDATASection:function(We){var Ve=new Xt;return Ve.ownerDocument=this,Ve.appendData(We),Ve},createProcessingInstruction:function(We,Ve){var qe=new Le;return qe.ownerDocument=this,qe.tagName=qe.nodeName=qe.target=We,qe.nodeValue=qe.data=Ve,qe},createAttribute:function(We){var Ve=new Tt;return Ve.ownerDocument=this,Ve.name=We,Ve.nodeName=We,Ve.localName=We,Ve.specified=!0,Ve},createEntityReference:function(We){var Ve=new ze;return Ve.ownerDocument=this,Ve.nodeName=We,Ve},createElementNS:function(We,Ve){var qe=new yt,pt=Ve.split(":"),At=qe.attributes=new oe;return qe.childNodes=new z,qe.ownerDocument=this,qe.nodeName=Ve,qe.tagName=Ve,qe.namespaceURI=We,pt.length==2?(qe.prefix=pt[0],qe.localName=pt[1]):qe.localName=Ve,At._ownerElement=qe,qe},createAttributeNS:function(We,Ve){var qe=new Tt,pt=Ve.split(":");return qe.ownerDocument=this,qe.nodeName=Ve,qe.name=Ve,qe.namespaceURI=We,qe.specified=!0,pt.length==2?(qe.prefix=pt[0],qe.localName=pt[1]):qe.localName=Ve,qe}},F(Ee,se);function yt(){this._nsMap={}}yt.prototype={nodeType:U,hasAttribute:function(We){return this.getAttributeNode(We)!=null},getAttribute:function(We){var Ve=this.getAttributeNode(We);return Ve&&Ve.value||""},getAttributeNode:function(We){return this.attributes.getNamedItem(We)},setAttribute:function(We,Ve){var qe=this.ownerDocument.createAttribute(We);qe.value=qe.nodeValue=""+Ve,this.setAttributeNode(qe)},removeAttribute:function(We){var Ve=this.getAttributeNode(We);Ve&&this.removeAttributeNode(Ve)},appendChild:function(We){return We.nodeType===pe?this.insertBefore(We,null):It(this,We)},setAttributeNode:function(We){return this.attributes.setNamedItem(We)},setAttributeNodeNS:function(We){return this.attributes.setNamedItemNS(We)},removeAttributeNode:function(We){return this.attributes.removeNamedItem(We.nodeName)},removeAttributeNS:function(We,Ve){var qe=this.getAttributeNodeNS(We,Ve);qe&&this.removeAttributeNode(qe)},hasAttributeNS:function(We,Ve){return this.getAttributeNodeNS(We,Ve)!=null},getAttributeNS:function(We,Ve){var qe=this.getAttributeNodeNS(We,Ve);return qe&&qe.value||""},setAttributeNS:function(We,Ve,qe){var pt=this.ownerDocument.createAttributeNS(We,Ve);pt.value=pt.nodeValue=""+qe,this.setAttributeNode(pt)},getAttributeNodeNS:function(We,Ve){return this.attributes.getNamedItemNS(We,Ve)},getElementsByTagName:function(We){return new Y(this,function(Ve){var qe=[];return ge(Ve,function(pt){pt!==Ve&&pt.nodeType==U&&(We==="*"||pt.tagName==We)&&qe.push(pt)}),qe})},getElementsByTagNameNS:function(We,Ve){return new Y(this,function(qe){var pt=[];return ge(qe,function(At){At!==qe&&At.nodeType===U&&(We==="*"||At.namespaceURI===We)&&(Ve==="*"||At.localName==Ve)&&pt.push(At)}),pt})}},Ee.prototype.getElementsByTagName=yt.prototype.getElementsByTagName,Ee.prototype.getElementsByTagNameNS=yt.prototype.getElementsByTagNameNS,F(yt,se);function Tt(){}Tt.prototype.nodeType=V,F(Tt,se);function Wt(){}Wt.prototype={data:"",substringData:function(We,Ve){return this.data.substring(We,We+Ve)},appendData:function(We){We=this.data+We,this.nodeValue=this.data=We,this.length=We.length},insertData:function(We,Ve){this.replaceData(We,0,Ve)},appendChild:function(We){throw new Error(_e[be])},deleteData:function(We,Ve){this.replaceData(We,Ve,"")},replaceData:function(We,Ve,qe){var pt=this.data.substring(0,We),At=this.data.substring(We+Ve);qe=pt+qe+At,this.nodeValue=this.data=qe,this.length=qe.length}},F(Wt,se);function ft(){}ft.prototype={nodeName:"#text",nodeType:K,splitText:function(We){var Ve=this.data,qe=Ve.substring(We);Ve=Ve.substring(0,We),this.data=this.nodeValue=Ve,this.length=Ve.length;var pt=this.ownerDocument.createTextNode(qe);return this.parentNode&&this.parentNode.insertBefore(pt,this.nextSibling),pt}},F(ft,Wt);function _t(){}_t.prototype={nodeName:"#comment",nodeType:ce},F(_t,Wt);function Xt(){}Xt.prototype={nodeName:"#cdata-section",nodeType:J},F(Xt,Wt);function Nt(){}Nt.prototype.nodeType=de,F(Nt,se);function qt(){}qt.prototype.nodeType=ve,F(qt,se);function nr(){}nr.prototype.nodeType=ie,F(nr,se);function ze(){}ze.prototype.nodeType=ee,F(ze,se);function Ce(){}Ce.prototype.nodeName="#document-fragment",Ce.prototype.nodeType=pe,F(Ce,se);function Le(){}Le.prototype.nodeType=ne,F(Le,se);function Ze(){}Ze.prototype.serializeToString=function(We,Ve,qe){return Je.call(We,Ve,qe)},se.prototype.toString=Je;function Je(We,Ve){var qe=[],pt=this.nodeType==9&&this.documentElement||this,At=pt.prefix,jt=pt.namespaceURI;if(jt&&At==null){var At=pt.lookupPrefix(jt);if(At==null)var rr=[{namespace:jt,prefix:null}]}return He(this,qe,We,Ve,rr),qe.join("")}function nt(We,Ve,qe){var pt=We.prefix||"",At=We.namespaceURI;if(!At||pt==="xml"&&At===_.XML||At===_.XMLNS)return!1;for(var jt=qe.length;jt--;){var rr=qe[jt];if(rr.prefix===pt)return rr.namespace!==At}return!0}function rt(We,Ve,qe){We.push(" ",Ve,'="',qe.replace(/[<>&"\t\n\r]/g,Ae),'"')}function He(We,Ve,qe,pt,At){if(At||(At=[]),pt)if(We=pt(We),We){if(typeof We=="string"){Ve.push(We);return}}else return;switch(We.nodeType){case U:var jt=We.attributes,rr=jt.length,it=We.firstChild,Ke=We.tagName;qe=_.isHTML(We.namespaceURI)||qe;var Ne=Ke;if(!qe&&!We.prefix&&We.namespaceURI){for(var Ye,st=0;st<jt.length;st++)if(jt.item(st).name==="xmlns"){Ye=jt.item(st).value;break}if(!Ye)for(var bt=At.length-1;bt>=0;bt--){var Qe=At[bt];if(Qe.prefix===""&&Qe.namespace===We.namespaceURI){Ye=Qe.namespace;break}}if(Ye!==We.namespaceURI)for(var bt=At.length-1;bt>=0;bt--){var Qe=At[bt];if(Qe.namespace===We.namespaceURI){Qe.prefix&&(Ne=Qe.prefix+":"+Ke);break}}}Ve.push("<",Ne);for(var Re=0;Re<rr;Re++){var Pe=jt.item(Re);Pe.prefix=="xmlns"?At.push({prefix:Pe.localName,namespace:Pe.value}):Pe.nodeName=="xmlns"&&At.push({prefix:"",namespace:Pe.value})}for(var Re=0;Re<rr;Re++){var Pe=jt.item(Re);if(nt(Pe,qe,At)){var Me=Pe.prefix||"",$e=Pe.namespaceURI;rt(Ve,Me?"xmlns:"+Me:"xmlns",$e),At.push({prefix:Me,namespace:$e})}He(Pe,Ve,qe,pt,At)}if(Ke===Ne&&nt(We,qe,At)){var Me=We.prefix||"",$e=We.namespaceURI;rt(Ve,Me?"xmlns:"+Me:"xmlns",$e),At.push({prefix:Me,namespace:$e})}if(it||qe&&!/^(?:meta|link|img|br|hr|input)$/i.test(Ke)){if(Ve.push(">"),qe&&/^script$/i.test(Ke))for(;it;)it.data?Ve.push(it.data):He(it,Ve,qe,pt,At.slice()),it=it.nextSibling;else for(;it;)He(it,Ve,qe,pt,At.slice()),it=it.nextSibling;Ve.push("</",Ne,">")}else Ve.push("/>");return;case fe:case pe:for(var it=We.firstChild;it;)He(it,Ve,qe,pt,At.slice()),it=it.nextSibling;return;case V:return rt(Ve,We.name,We.value);case K:return Ve.push(We.data.replace(/[<&>]/g,Ae));case J:return Ve.push("<![CDATA[",We.data,"]]>");case ce:return Ve.push("<!--",We.data,"-->");case de:var kt=We.publicId,xt=We.systemId;if(Ve.push("<!DOCTYPE ",We.name),kt)Ve.push(" PUBLIC ",kt),xt&&xt!="."&&Ve.push(" ",xt),Ve.push(">");else if(xt&&xt!=".")Ve.push(" SYSTEM ",xt,">");else{var Ot=We.internalSubset;Ot&&Ve.push(" [",Ot,"]"),Ve.push(">")}return;case ne:return Ve.push("<?",We.target," ",We.data,"?>");case ee:return Ve.push("&",We.nodeName,";");default:Ve.push("??",We.nodeName)}}function Dt(We,Ve,qe){var pt;switch(Ve.nodeType){case U:pt=Ve.cloneNode(!1),pt.ownerDocument=We;case pe:break;case V:qe=!0;break}if(pt||(pt=Ve.cloneNode(!1)),pt.ownerDocument=We,pt.parentNode=null,qe)for(var At=Ve.firstChild;At;)pt.appendChild(Dt(We,At,qe)),At=At.nextSibling;return pt}function Rt(We,Ve,qe){var pt=new Ve.constructor;for(var At in Ve)if(Object.prototype.hasOwnProperty.call(Ve,At)){var jt=Ve[At];typeof jt!="object"&&jt!=pt[At]&&(pt[At]=jt)}switch(Ve.childNodes&&(pt.childNodes=new z),pt.ownerDocument=We,pt.nodeType){case U:var rr=Ve.attributes,Ke=pt.attributes=new oe,Ne=rr.length;Ke._ownerElement=pt;for(var Ye=0;Ye<Ne;Ye++)pt.setAttributeNode(Rt(We,rr.item(Ye),!0));break;case V:qe=!0}if(qe)for(var st=Ve.firstChild;st;)pt.appendChild(Rt(We,st,qe)),st=st.nextSibling;return pt}function De(We,Ve,qe){We[Ve]=qe}try{if(Object.defineProperty){let We=function(Ve){switch(Ve.nodeType){case U:case pe:var qe=[];for(Ve=Ve.firstChild;Ve;)Ve.nodeType!==7&&Ve.nodeType!==8&&qe.push(We(Ve)),Ve=Ve.nextSibling;return qe.join("");default:return Ve.nodeValue}};Object.defineProperty(Y.prototype,"length",{get:function(){return te(this),this.$$length}}),Object.defineProperty(se.prototype,"textContent",{get:function(){return We(this)},set:function(Ve){switch(this.nodeType){case U:case pe:for(;this.firstChild;)this.removeChild(this.firstChild);(Ve||String(Ve))&&this.appendChild(this.ownerDocument.createTextNode(Ve));break;default:this.data=Ve,this.value=Ve,this.nodeValue=Ve}}}),De=function(Ve,qe,pt){Ve["$$"+qe]=pt}}}catch{}return dom.DocumentType=Nt,dom.DOMException=O,dom.DOMImplementation=Q,dom.Element=yt,dom.Node=se,dom.NodeList=z,dom.XMLSerializer=Ze,dom}var domParser={},entities={},hasRequiredEntities;function requireEntities(){return hasRequiredEntities||(hasRequiredEntities=1,(function(E){var A=requireConventions().freeze;E.XML_ENTITIES=A({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),E.HTML_ENTITIES=A({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),E.entityMap=E.HTML_ENTITIES})(entities)),entities}var sax={},hasRequiredSax;function requireSax(){if(hasRequiredSax)return sax;hasRequiredSax=1;var E=requireConventions().NAMESPACE,A=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,_=new RegExp("[\\-\\.0-9"+A.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),I=new RegExp("^"+A.source+_.source+"*(?::"+A.source+_.source+"*)?$"),B=0,T=1,R=2,P=3,D=4,F=5,L=6,U=7;function V(be,Te){this.message=be,this.locator=Te,Error.captureStackTrace&&Error.captureStackTrace(this,V)}V.prototype=new Error,V.prototype.name=V.name;function K(){}K.prototype={parse:function(be,Te,ue){var O=this.domBuilder;O.startDocument(),de(Te,Te={}),J(be,Te,ue,O,this.errorHandler),O.endDocument()}};function J(be,Te,ue,O,z){function Y(yt){if(yt>65535){yt-=65536;var Tt=55296+(yt>>10),Wt=56320+(yt&1023);return String.fromCharCode(Tt,Wt)}else return String.fromCharCode(yt)}function te(yt){var Tt=yt.slice(1,-1);return Object.hasOwnProperty.call(ue,Tt)?ue[Tt]:Tt.charAt(0)==="#"?Y(parseInt(Tt.substr(1).replace("x","0x"))):(z.error("entity not found:"+yt),yt)}function oe(yt){if(yt>Ee){var Tt=be.substring(Ee,yt).replace(/&#?\w+;/g,te);se&&le(Ee),O.characters(Tt,0,yt-Ee),Ee=yt}}function le(yt,Tt){for(;yt>=ae&&(Tt=Q.exec(be));)he=Tt.index,ae=he+Tt[0].length,se.lineNumber++;se.columnNumber=yt-he+1}for(var he=0,ae=0,Q=/.*(?:\r\n?|\n)|.*$/g,se=O.locator,Ae=[{currentNSMap:Te}],ge={},Ee=0;;){try{var ke=be.indexOf("<",Ee);if(ke<0){if(!be.substr(Ee).match(/^\s*$/)){var Se=O.doc,Ie=Se.createTextNode(be.substr(Ee));Se.appendChild(Ie),O.currentElement=Ie}return}switch(ke>Ee&&oe(ke),be.charAt(ke+1)){case"/":var mt=be.indexOf(">",ke+3),we=be.substring(ke+2,mt).replace(/[ \t\n\r]+$/g,""),xe=Ae.pop();mt<0?(we=be.substring(ke+2).replace(/[\s<].*/,""),z.error("end tag name: "+we+" is not complete:"+xe.tagName),mt=ke+1+we.length):we.match(/\s</)&&(we=we.replace(/[\s<].*/,""),z.error("end tag name: "+we+" maybe not complete"),mt=ke+1+we.length);var Fe=xe.localNSMap,Ge=xe.tagName==we,Oe=Ge||xe.tagName&&xe.tagName.toLowerCase()==we.toLowerCase();if(Oe){if(O.endElement(xe.uri,xe.localName,we),Fe)for(var et in Fe)Object.prototype.hasOwnProperty.call(Fe,et)&&O.endPrefixMapping(et);Ge||z.fatalError("end tag name: "+we+" is not match the current start tagName:"+xe.tagName)}else Ae.push(xe);mt++;break;case"?":se&&le(ke),mt=ve(be,ke,O);break;case"!":se&&le(ke),mt=pe(be,ke,O,z);break;default:se&&le(ke);var Mt=new ye,dt=Ae[Ae.length-1].currentNSMap,mt=ie(be,ke,Mt,dt,te,z),Ut=Mt.length;if(!Mt.closed&&fe(be,mt,Mt.tagName,ge)&&(Mt.closed=!0,ue.nbsp||z.warning("unclosed xml attribute")),se&&Ut){for(var St=ee(se,{}),vt=0;vt<Ut;vt++){var It=Mt[vt];le(It.offset),It.locator=ee(se,{})}O.locator=St,ne(Mt,O,dt)&&Ae.push(Mt),O.locator=se}else ne(Mt,O,dt)&&Ae.push(Mt);E.isHTML(Mt.uri)&&!Mt.closed?mt=ce(be,mt,Mt.tagName,te,O):mt++}}catch(yt){if(yt instanceof V)throw yt;z.error("element parse error: "+yt),mt=-1}mt>Ee?Ee=mt:oe(Math.max(ke,Ee)+1)}}function ee(be,Te){return Te.lineNumber=be.lineNumber,Te.columnNumber=be.columnNumber,Te}function ie(be,Te,ue,O,z,Y){function te(se,Ae,ge){ue.attributeNames.hasOwnProperty(se)&&Y.fatalError("Attribute "+se+" redefined"),ue.addValue(se,Ae.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,z),ge)}for(var oe,le,he=++Te,ae=B;;){var Q=be.charAt(he);switch(Q){case"=":if(ae===T)oe=be.slice(Te,he),ae=P;else if(ae===R)ae=P;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(ae===P||ae===T)if(ae===T&&(Y.warning('attribute value must after "="'),oe=be.slice(Te,he)),Te=he+1,he=be.indexOf(Q,Te),he>0)le=be.slice(Te,he),te(oe,le,Te-1),ae=F;else throw new Error("attribute value no end '"+Q+"' match");else if(ae==D)le=be.slice(Te,he),te(oe,le,Te),Y.warning('attribute "'+oe+'" missed start quot('+Q+")!!"),Te=he+1,ae=F;else throw new Error('attribute value must after "="');break;case"/":switch(ae){case B:ue.setTagName(be.slice(Te,he));case F:case L:case U:ae=U,ue.closed=!0;case D:case T:break;case R:ue.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return Y.error("unexpected end of input"),ae==B&&ue.setTagName(be.slice(Te,he)),he;case">":switch(ae){case B:ue.setTagName(be.slice(Te,he));case F:case L:case U:break;case D:case T:le=be.slice(Te,he),le.slice(-1)==="/"&&(ue.closed=!0,le=le.slice(0,-1));case R:ae===R&&(le=oe),ae==D?(Y.warning('attribute "'+le+'" missed quot(")!'),te(oe,le,Te)):((!E.isHTML(O[""])||!le.match(/^(?:disabled|checked|selected)$/i))&&Y.warning('attribute "'+le+'" missed value!! "'+le+'" instead!!'),te(le,le,Te));break;case P:throw new Error("attribute value missed!!")}return he;case"":Q=" ";default:if(Q<=" ")switch(ae){case B:ue.setTagName(be.slice(Te,he)),ae=L;break;case T:oe=be.slice(Te,he),ae=R;break;case D:var le=be.slice(Te,he);Y.warning('attribute "'+le+'" missed quot(")!!'),te(oe,le,Te);case F:ae=L;break}else switch(ae){case R:ue.tagName,(!E.isHTML(O[""])||!oe.match(/^(?:disabled|checked|selected)$/i))&&Y.warning('attribute "'+oe+'" missed value!! "'+oe+'" instead2!!'),te(oe,oe,Te),Te=he,ae=T;break;case F:Y.warning('attribute space is required"'+oe+'"!!');case L:ae=T,Te=he;break;case P:ae=D,Te=he;break;case U:throw new Error("elements closed character '/' and '>' must be connected to")}}he++}}function ne(be,Te,ue){for(var O=be.tagName,z=null,Q=be.length;Q--;){var Y=be[Q],te=Y.qName,oe=Y.value,se=te.indexOf(":");if(se>0)var le=Y.prefix=te.slice(0,se),he=te.slice(se+1),ae=le==="xmlns"&&he;else he=te,le=null,ae=te==="xmlns"&&"";Y.localName=he,ae!==!1&&(z==null&&(z={},de(ue,ue={})),ue[ae]=z[ae]=oe,Y.uri=E.XMLNS,Te.startPrefixMapping(ae,oe))}for(var Q=be.length;Q--;){Y=be[Q];var le=Y.prefix;le&&(le==="xml"&&(Y.uri=E.XML),le!=="xmlns"&&(Y.uri=ue[le||""]))}var se=O.indexOf(":");se>0?(le=be.prefix=O.slice(0,se),he=be.localName=O.slice(se+1)):(le=null,he=be.localName=O);var Ae=be.uri=ue[le||""];if(Te.startElement(Ae,he,O,be),be.closed){if(Te.endElement(Ae,he,O),z)for(le in z)Object.prototype.hasOwnProperty.call(z,le)&&Te.endPrefixMapping(le)}else return be.currentNSMap=ue,be.localNSMap=z,!0}function ce(be,Te,ue,O,z){if(/^(?:script|textarea)$/i.test(ue)){var Y=be.indexOf("</"+ue+">",Te),te=be.substring(Te+1,Y);if(/[&<]/.test(te))return/^script$/i.test(ue)?(z.characters(te,0,te.length),Y):(te=te.replace(/&#?\w+;/g,O),z.characters(te,0,te.length),Y)}return Te+1}function fe(be,Te,ue,O){var z=O[ue];return z==null&&(z=be.lastIndexOf("</"+ue+">"),z<Te&&(z=be.lastIndexOf("</"+ue)),O[ue]=z),z<Te}function de(be,Te){for(var ue in be)Object.prototype.hasOwnProperty.call(be,ue)&&(Te[ue]=be[ue])}function pe(be,Te,ue,O){var z=be.charAt(Te+2);switch(z){case"-":if(be.charAt(Te+3)==="-"){var Y=be.indexOf("-->",Te+4);return Y>Te?(ue.comment(be,Te+4,Y-Te-4),Y+3):(O.error("Unclosed comment"),-1)}else return-1;default:if(be.substr(Te+3,6)=="CDATA["){var Y=be.indexOf("]]>",Te+9);return ue.startCDATA(),ue.characters(be,Te+9,Y-Te-9),ue.endCDATA(),Y+3}var te=_e(be,Te),oe=te.length;if(oe>1&&/!doctype/i.test(te[0][0])){var le=te[1][0],he=!1,ae=!1;oe>3&&(/^public$/i.test(te[2][0])?(he=te[3][0],ae=oe>4&&te[4][0]):/^system$/i.test(te[2][0])&&(ae=te[3][0]));var Q=te[oe-1];return ue.startDTD(le,he,ae),ue.endDTD(),Q.index+Q[0].length}}return-1}function ve(be,Te,ue){var O=be.indexOf("?>",Te);if(O){var z=be.substring(Te,O).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return z?(z[0].length,ue.processingInstruction(z[1],z[2]),O+2):-1}return-1}function ye(){this.attributeNames={}}ye.prototype={setTagName:function(be){if(!I.test(be))throw new Error("invalid tagName:"+be);this.tagName=be},addValue:function(be,Te,ue){if(!I.test(be))throw new Error("invalid attribute:"+be);this.attributeNames[be]=this.length,this[this.length++]={qName:be,value:Te,offset:ue}},length:0,getLocalName:function(be){return this[be].localName},getLocator:function(be){return this[be].locator},getQName:function(be){return this[be].qName},getURI:function(be){return this[be].uri},getValue:function(be){return this[be].value}};function _e(be,Te){var ue,O=[],z=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(z.lastIndex=Te,z.exec(be);ue=z.exec(be);)if(O.push(ue),ue[1])return O}return sax.XMLReader=K,sax.ParseError=V,sax}var hasRequiredDomParser;function requireDomParser(){if(hasRequiredDomParser)return domParser;hasRequiredDomParser=1;var E=requireConventions(),A=requireDom(),_=requireEntities(),I=requireSax(),B=A.DOMImplementation,T=E.NAMESPACE,R=I.ParseError,P=I.XMLReader;function D(ie){return ie.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function F(ie){this.options=ie||{locator:{}}}F.prototype.parseFromString=function(ie,ne){var ce=this.options,fe=new P,de=ce.domBuilder||new U,pe=ce.errorHandler,ve=ce.locator,ye=ce.xmlns||{},_e=/\/x?html?$/.test(ne),be=_e?_.HTML_ENTITIES:_.XML_ENTITIES;ve&&de.setDocumentLocator(ve),fe.errorHandler=L(pe,de,ve),fe.domBuilder=ce.domBuilder||de,_e&&(ye[""]=T.HTML),ye.xml=ye.xml||T.XML;var Te=ce.normalizeLineEndings||D;return ie&&typeof ie=="string"?fe.parse(Te(ie),ye,be):fe.errorHandler.error("invalid doc source"),de.doc};function L(ie,ne,ce){if(!ie){if(ne instanceof U)return ne;ie=ne}var fe={},de=ie instanceof Function;ce=ce||{};function pe(ve){var ye=ie[ve];!ye&&de&&(ye=ie.length==2?function(_e){ie(ve,_e)}:ie),fe[ve]=ye&&function(_e){ye("[xmldom "+ve+"]	"+_e+K(ce))}||function(){}}return pe("warning"),pe("error"),pe("fatalError"),fe}function U(){this.cdata=!1}function V(ie,ne){ne.lineNumber=ie.lineNumber,ne.columnNumber=ie.columnNumber}U.prototype={startDocument:function(){this.doc=new B().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(ie,ne,ce,fe){var de=this.doc,pe=de.createElementNS(ie,ce||ne),ve=fe.length;ee(this,pe),this.currentElement=pe,this.locator&&V(this.locator,pe);for(var ye=0;ye<ve;ye++){var ie=fe.getURI(ye),_e=fe.getValue(ye),ce=fe.getQName(ye),be=de.createAttributeNS(ie,ce);this.locator&&V(fe.getLocator(ye),be),be.value=be.nodeValue=_e,pe.setAttributeNode(be)}},endElement:function(ie,ne,ce){var fe=this.currentElement;fe.tagName,this.currentElement=fe.parentNode},startPrefixMapping:function(ie,ne){},endPrefixMapping:function(ie){},processingInstruction:function(ie,ne){var ce=this.doc.createProcessingInstruction(ie,ne);this.locator&&V(this.locator,ce),ee(this,ce)},ignorableWhitespace:function(ie,ne,ce){},characters:function(ie,ne,ce){if(ie=J.apply(this,arguments),ie){if(this.cdata)var fe=this.doc.createCDATASection(ie);else var fe=this.doc.createTextNode(ie);this.currentElement?this.currentElement.appendChild(fe):/^\s*$/.test(ie)&&this.doc.appendChild(fe),this.locator&&V(this.locator,fe)}},skippedEntity:function(ie){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(ie){(this.locator=ie)&&(ie.lineNumber=0)},comment:function(ie,ne,ce){ie=J.apply(this,arguments);var fe=this.doc.createComment(ie);this.locator&&V(this.locator,fe),ee(this,fe)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(ie,ne,ce){var fe=this.doc.implementation;if(fe&&fe.createDocumentType){var de=fe.createDocumentType(ie,ne,ce);this.locator&&V(this.locator,de),ee(this,de),this.doc.doctype=de}},warning:function(ie){console.warn("[xmldom warning]	"+ie,K(this.locator))},error:function(ie){console.error("[xmldom error]	"+ie,K(this.locator))},fatalError:function(ie){throw new R(ie,this.locator)}};function K(ie){if(ie)return`
@`+(ie.systemId||"")+"#[line:"+ie.lineNumber+",col:"+ie.columnNumber+"]"}function J(ie,ne,ce){return typeof ie=="string"?ie.substr(ne,ce):ie.length>=ne+ce||ne?new java.lang.String(ie,ne,ce)+"":ie}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(ie){U.prototype[ie]=function(){return null}});function ee(ie,ne){ie.currentElement?ie.currentElement.appendChild(ne):ie.doc.appendChild(ne)}return domParser.__DOMHandler=U,domParser.normalizeLineEndings=D,domParser.DOMParser=F,domParser}var hasRequiredLib$a;function requireLib$a(){if(hasRequiredLib$a)return lib$a;hasRequiredLib$a=1;var E=requireDom();return lib$a.DOMImplementation=E.DOMImplementation,lib$a.XMLSerializer=E.XMLSerializer,lib$a.DOMParser=requireDomParser().DOMParser,lib$a}var libExports$3=requireLib$a();const WebWorkerAdapter={createCanvas:(E,A)=>new OffscreenCanvas(E??0,A??0),createImage:()=>new Image,getCanvasRenderingContext2D:()=>OffscreenCanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>globalThis.location.href,getFontFaceSet:()=>globalThis.fonts,fetch:(E,A)=>fetch(E,A),parseXML:E=>new libExports$3.DOMParser().parseFromString(E,"text/xml")};class EventsTickerClass{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}init(A){this.removeTickerListener(),this.events=A,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(A){this._pauseUpdate=A}addTickerListener(){this._tickerAdded||!this.domElement||(Ticker$1.system.add(this._tickerUpdate,this,UPDATE_PRIORITY.INTERACTION),this._tickerAdded=!0)}removeTickerListener(){this._tickerAdded&&(Ticker$1.system.remove(this._tickerUpdate,this),this._tickerAdded=!1)}pointerMoved(){this._didMove=!0}_update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const A=this.events._rootPointerEvent;this.events.supportsTouchEvents&&A.pointerType==="touch"||globalThis.document.dispatchEvent(this.events.supportsPointerEvents?new PointerEvent("pointermove",{clientX:A.clientX,clientY:A.clientY,pointerType:A.pointerType,pointerId:A.pointerId}):new MouseEvent("mousemove",{clientX:A.clientX,clientY:A.clientY}))}_tickerUpdate(A){this._deltaTime+=A.deltaTime,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this._update())}}const EventsTicker=new EventsTickerClass;class FederatedMouseEvent extends FederatedEvent{constructor(){super(...arguments),this.client=new Point$1,this.movement=new Point$1,this.offset=new Point$1,this.global=new Point$1,this.screen=new Point$1}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(A,_,I){return A.worldTransform.applyInverse(I||this.global,_)}getModifierState(A){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(A)}initMouseEvent(A,_,I,B,T,R,P,D,F,L,U,V,K,J,ee){throw new Error("Method not implemented.")}}class FederatedPointerEvent extends FederatedMouseEvent{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class FederatedWheelEvent extends FederatedMouseEvent{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}FederatedWheelEvent.DOM_DELTA_PIXEL=0;FederatedWheelEvent.DOM_DELTA_LINE=1;FederatedWheelEvent.DOM_DELTA_PAGE=2;const PROPAGATION_LIMIT=2048,tempHitLocation=new Point$1,tempLocalMapping=new Point$1;class EventBoundary{constructor(A){this.dispatch=new EventEmitter,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=A,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(A,_){this.mappingTable[A]||(this.mappingTable[A]=[]),this.mappingTable[A].push({fn:_,priority:0}),this.mappingTable[A].sort((I,B)=>I.priority-B.priority)}dispatchEvent(A,_){A.propagationStopped=!1,A.propagationImmediatelyStopped=!1,this.propagate(A,_),this.dispatch.emit(_||A.type,A)}mapEvent(A){if(!this.rootTarget)return;const _=this.mappingTable[A.type];if(_)for(let I=0,B=_.length;I<B;I++)_[I].fn(A);else warn$1(`[EventBoundary]: Event mapping not defined for ${A.type}`)}hitTest(A,_){EventsTicker.pauseUpdate=!0;const B=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",T=this[B](this.rootTarget,this.rootTarget.eventMode,tempHitLocation.set(A,_),this.hitTestFn,this.hitPruneFn);return T&&T[0]}propagate(A,_){if(!A.target)return;const I=A.composedPath();A.eventPhase=A.CAPTURING_PHASE;for(let B=0,T=I.length-1;B<T;B++)if(A.currentTarget=I[B],this.notifyTarget(A,_),A.propagationStopped||A.propagationImmediatelyStopped)return;if(A.eventPhase=A.AT_TARGET,A.currentTarget=A.target,this.notifyTarget(A,_),!(A.propagationStopped||A.propagationImmediatelyStopped)){A.eventPhase=A.BUBBLING_PHASE;for(let B=I.length-2;B>=0;B--)if(A.currentTarget=I[B],this.notifyTarget(A,_),A.propagationStopped||A.propagationImmediatelyStopped)return}}all(A,_,I=this._allInteractiveElements){if(I.length===0)return;A.eventPhase=A.BUBBLING_PHASE;const B=Array.isArray(_)?_:[_];for(let T=I.length-1;T>=0;T--)B.forEach(R=>{A.currentTarget=I[T],this.notifyTarget(A,R)})}propagationPath(A){const _=[A];for(let I=0;I<PROPAGATION_LIMIT&&A!==this.rootTarget&&A.parent;I++){if(!A.parent)throw new Error("Cannot find propagation path to disconnected target");_.push(A.parent),A=A.parent}return _.reverse(),_}hitTestMoveRecursive(A,_,I,B,T,R=!1){let P=!1;if(this._interactivePrune(A))return null;if((A.eventMode==="dynamic"||_==="dynamic")&&(EventsTicker.pauseUpdate=!1),A.interactiveChildren&&A.children){const L=A.children;for(let U=L.length-1;U>=0;U--){const V=L[U],K=this.hitTestMoveRecursive(V,this._isInteractive(_)?_:V.eventMode,I,B,T,R||T(A,I));if(K){if(K.length>0&&!K[K.length-1].parent)continue;const J=A.isInteractive();(K.length>0||J)&&(J&&this._allInteractiveElements.push(A),K.push(A)),this._hitElements.length===0&&(this._hitElements=K),P=!0}}}const D=this._isInteractive(_),F=A.isInteractive();return F&&F&&this._allInteractiveElements.push(A),R||this._hitElements.length>0?null:P?this._hitElements:D&&!T(A,I)&&B(A,I)?F?[A]:[]:null}hitTestRecursive(A,_,I,B,T){if(this._interactivePrune(A)||T(A,I))return null;if((A.eventMode==="dynamic"||_==="dynamic")&&(EventsTicker.pauseUpdate=!1),A.interactiveChildren&&A.children){const D=A.children,F=I;for(let L=D.length-1;L>=0;L--){const U=D[L],V=this.hitTestRecursive(U,this._isInteractive(_)?_:U.eventMode,F,B,T);if(V){if(V.length>0&&!V[V.length-1].parent)continue;const K=A.isInteractive();return(V.length>0||K)&&V.push(A),V}}}const R=this._isInteractive(_),P=A.isInteractive();return R&&B(A,I)?P?[A]:[]:null}_isInteractive(A){return A==="static"||A==="dynamic"}_interactivePrune(A){return!A||!A.visible||!A.renderable||!A.measurable||A.eventMode==="none"||A.eventMode==="passive"&&!A.interactiveChildren}hitPruneFn(A,_){if(A.hitArea&&(A.worldTransform.applyInverse(_,tempLocalMapping),!A.hitArea.contains(tempLocalMapping.x,tempLocalMapping.y)))return!0;if(A.effects&&A.effects.length)for(let I=0;I<A.effects.length;I++){const B=A.effects[I];if(B.containsPoint&&!B.containsPoint(_,this.hitTestFn))return!0}return!1}hitTestFn(A,_){return A.hitArea?!0:A?.containsPoint?(A.worldTransform.applyInverse(_,tempLocalMapping),A.containsPoint(tempLocalMapping)):!1}notifyTarget(A,_){if(!A.currentTarget.isInteractive())return;_??(_=A.type);const I=`on${_}`;A.currentTarget[I]?.(A);const B=A.eventPhase===A.CAPTURING_PHASE||A.eventPhase===A.AT_TARGET?`${_}capture`:_;this._notifyListeners(A,B),A.eventPhase===A.AT_TARGET&&this._notifyListeners(A,_)}mapPointerDown(A){if(!(A instanceof FederatedPointerEvent)){warn$1("EventBoundary cannot map a non-pointer event as a pointer event");return}const _=this.createPointerEvent(A);if(this.dispatchEvent(_,"pointerdown"),_.pointerType==="touch")this.dispatchEvent(_,"touchstart");else if(_.pointerType==="mouse"||_.pointerType==="pen"){const B=_.button===2;this.dispatchEvent(_,B?"rightdown":"mousedown")}const I=this.trackingData(A.pointerId);I.pressTargetsByButton[A.button]=_.composedPath(),this.freeEvent(_)}mapPointerMove(A){if(!(A instanceof FederatedPointerEvent)){warn$1("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const _=this.createPointerEvent(A);this._isPointerMoveEvent=!1;const I=_.pointerType==="mouse"||_.pointerType==="pen",B=this.trackingData(A.pointerId),T=this.findMountedTarget(B.overTargets);if(B.overTargets?.length>0&&T!==_.target){const D=A.type==="mousemove"?"mouseout":"pointerout",F=this.createPointerEvent(A,D,T);if(this.dispatchEvent(F,"pointerout"),I&&this.dispatchEvent(F,"mouseout"),!_.composedPath().includes(T)){const L=this.createPointerEvent(A,"pointerleave",T);for(L.eventPhase=L.AT_TARGET;L.target&&!_.composedPath().includes(L.target);)L.currentTarget=L.target,this.notifyTarget(L),I&&this.notifyTarget(L,"mouseleave"),L.target=L.target.parent;this.freeEvent(L)}this.freeEvent(F)}if(T!==_.target){const D=A.type==="mousemove"?"mouseover":"pointerover",F=this.clonePointerEvent(_,D);this.dispatchEvent(F,"pointerover"),I&&this.dispatchEvent(F,"mouseover");let L=T?.parent;for(;L&&L!==this.rootTarget.parent&&L!==_.target;)L=L.parent;if(!L||L===this.rootTarget.parent){const V=this.clonePointerEvent(_,"pointerenter");for(V.eventPhase=V.AT_TARGET;V.target&&V.target!==T&&V.target!==this.rootTarget.parent;)V.currentTarget=V.target,this.notifyTarget(V),I&&this.notifyTarget(V,"mouseenter"),V.target=V.target.parent;this.freeEvent(V)}this.freeEvent(F)}const R=[],P=this.enableGlobalMoveEvents??!0;this.moveOnAll?R.push("pointermove"):this.dispatchEvent(_,"pointermove"),P&&R.push("globalpointermove"),_.pointerType==="touch"&&(this.moveOnAll?R.splice(1,0,"touchmove"):this.dispatchEvent(_,"touchmove"),P&&R.push("globaltouchmove")),I&&(this.moveOnAll?R.splice(1,0,"mousemove"):this.dispatchEvent(_,"mousemove"),P&&R.push("globalmousemove"),this.cursor=_.target?.cursor),R.length>0&&this.all(_,R),this._allInteractiveElements.length=0,this._hitElements.length=0,B.overTargets=_.composedPath(),this.freeEvent(_)}mapPointerOver(A){if(!(A instanceof FederatedPointerEvent)){warn$1("EventBoundary cannot map a non-pointer event as a pointer event");return}const _=this.trackingData(A.pointerId),I=this.createPointerEvent(A),B=I.pointerType==="mouse"||I.pointerType==="pen";this.dispatchEvent(I,"pointerover"),B&&this.dispatchEvent(I,"mouseover"),I.pointerType==="mouse"&&(this.cursor=I.target?.cursor);const T=this.clonePointerEvent(I,"pointerenter");for(T.eventPhase=T.AT_TARGET;T.target&&T.target!==this.rootTarget.parent;)T.currentTarget=T.target,this.notifyTarget(T),B&&this.notifyTarget(T,"mouseenter"),T.target=T.target.parent;_.overTargets=I.composedPath(),this.freeEvent(I),this.freeEvent(T)}mapPointerOut(A){if(!(A instanceof FederatedPointerEvent)){warn$1("EventBoundary cannot map a non-pointer event as a pointer event");return}const _=this.trackingData(A.pointerId);if(_.overTargets){const I=A.pointerType==="mouse"||A.pointerType==="pen",B=this.findMountedTarget(_.overTargets),T=this.createPointerEvent(A,"pointerout",B);this.dispatchEvent(T),I&&this.dispatchEvent(T,"mouseout");const R=this.createPointerEvent(A,"pointerleave",B);for(R.eventPhase=R.AT_TARGET;R.target&&R.target!==this.rootTarget.parent;)R.currentTarget=R.target,this.notifyTarget(R),I&&this.notifyTarget(R,"mouseleave"),R.target=R.target.parent;_.overTargets=null,this.freeEvent(T),this.freeEvent(R)}this.cursor=null}mapPointerUp(A){if(!(A instanceof FederatedPointerEvent)){warn$1("EventBoundary cannot map a non-pointer event as a pointer event");return}const _=performance.now(),I=this.createPointerEvent(A);if(this.dispatchEvent(I,"pointerup"),I.pointerType==="touch")this.dispatchEvent(I,"touchend");else if(I.pointerType==="mouse"||I.pointerType==="pen"){const P=I.button===2;this.dispatchEvent(I,P?"rightup":"mouseup")}const B=this.trackingData(A.pointerId),T=this.findMountedTarget(B.pressTargetsByButton[A.button]);let R=T;if(T&&!I.composedPath().includes(T)){let P=T;for(;P&&!I.composedPath().includes(P);){if(I.currentTarget=P,this.notifyTarget(I,"pointerupoutside"),I.pointerType==="touch")this.notifyTarget(I,"touchendoutside");else if(I.pointerType==="mouse"||I.pointerType==="pen"){const D=I.button===2;this.notifyTarget(I,D?"rightupoutside":"mouseupoutside")}P=P.parent}delete B.pressTargetsByButton[A.button],R=P}if(R){const P=this.clonePointerEvent(I,"click");P.target=R,P.path=null,B.clicksByButton[A.button]||(B.clicksByButton[A.button]={clickCount:0,target:P.target,timeStamp:_});const D=B.clicksByButton[A.button];if(D.target===P.target&&_-D.timeStamp<200?++D.clickCount:D.clickCount=1,D.target=P.target,D.timeStamp=_,P.detail=D.clickCount,P.pointerType==="mouse"){const F=P.button===2;this.dispatchEvent(P,F?"rightclick":"click")}else P.pointerType==="touch"&&this.dispatchEvent(P,"tap");this.dispatchEvent(P,"pointertap"),this.freeEvent(P)}this.freeEvent(I)}mapPointerUpOutside(A){if(!(A instanceof FederatedPointerEvent)){warn$1("EventBoundary cannot map a non-pointer event as a pointer event");return}const _=this.trackingData(A.pointerId),I=this.findMountedTarget(_.pressTargetsByButton[A.button]),B=this.createPointerEvent(A);if(I){let T=I;for(;T;)B.currentTarget=T,this.notifyTarget(B,"pointerupoutside"),B.pointerType==="touch"?this.notifyTarget(B,"touchendoutside"):(B.pointerType==="mouse"||B.pointerType==="pen")&&this.notifyTarget(B,B.button===2?"rightupoutside":"mouseupoutside"),T=T.parent;delete _.pressTargetsByButton[A.button]}this.freeEvent(B)}mapWheel(A){if(!(A instanceof FederatedWheelEvent)){warn$1("EventBoundary cannot map a non-wheel event as a wheel event");return}const _=this.createWheelEvent(A);this.dispatchEvent(_),this.freeEvent(_)}findMountedTarget(A){if(!A)return null;let _=A[0];for(let I=1;I<A.length&&A[I].parent===_;I++)_=A[I];return _}createPointerEvent(A,_,I){const B=this.allocateEvent(FederatedPointerEvent);return this.copyPointerData(A,B),this.copyMouseData(A,B),this.copyData(A,B),B.nativeEvent=A.nativeEvent,B.originalEvent=A,B.target=I??this.hitTest(B.global.x,B.global.y)??this._hitElements[0],typeof _=="string"&&(B.type=_),B}createWheelEvent(A){const _=this.allocateEvent(FederatedWheelEvent);return this.copyWheelData(A,_),this.copyMouseData(A,_),this.copyData(A,_),_.nativeEvent=A.nativeEvent,_.originalEvent=A,_.target=this.hitTest(_.global.x,_.global.y),_}clonePointerEvent(A,_){const I=this.allocateEvent(FederatedPointerEvent);return I.nativeEvent=A.nativeEvent,I.originalEvent=A.originalEvent,this.copyPointerData(A,I),this.copyMouseData(A,I),this.copyData(A,I),I.target=A.target,I.path=A.composedPath().slice(),I.type=_??I.type,I}copyWheelData(A,_){_.deltaMode=A.deltaMode,_.deltaX=A.deltaX,_.deltaY=A.deltaY,_.deltaZ=A.deltaZ}copyPointerData(A,_){A instanceof FederatedPointerEvent&&_ instanceof FederatedPointerEvent&&(_.pointerId=A.pointerId,_.width=A.width,_.height=A.height,_.isPrimary=A.isPrimary,_.pointerType=A.pointerType,_.pressure=A.pressure,_.tangentialPressure=A.tangentialPressure,_.tiltX=A.tiltX,_.tiltY=A.tiltY,_.twist=A.twist)}copyMouseData(A,_){A instanceof FederatedMouseEvent&&_ instanceof FederatedMouseEvent&&(_.altKey=A.altKey,_.button=A.button,_.buttons=A.buttons,_.client.copyFrom(A.client),_.ctrlKey=A.ctrlKey,_.metaKey=A.metaKey,_.movement.copyFrom(A.movement),_.screen.copyFrom(A.screen),_.shiftKey=A.shiftKey,_.global.copyFrom(A.global))}copyData(A,_){_.isTrusted=A.isTrusted,_.srcElement=A.srcElement,_.timeStamp=performance.now(),_.type=A.type,_.detail=A.detail,_.view=A.view,_.which=A.which,_.layer.copyFrom(A.layer),_.page.copyFrom(A.page)}trackingData(A){return this.mappingState.trackingData[A]||(this.mappingState.trackingData[A]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[A]}allocateEvent(A){this.eventPool.has(A)||this.eventPool.set(A,[]);const _=this.eventPool.get(A).pop()||new A(this);return _.eventPhase=_.NONE,_.currentTarget=null,_.defaultPrevented=!1,_.path=null,_.target=null,_}freeEvent(A){if(A.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const _=A.constructor;this.eventPool.has(_)||this.eventPool.set(_,[]),this.eventPool.get(_).push(A)}_notifyListeners(A,_){const I=A.currentTarget._events[_];if(I)if("fn"in I)I.once&&A.currentTarget.removeListener(_,I.fn,void 0,!0),I.fn.call(I.context,A);else for(let B=0,T=I.length;B<T&&!A.propagationImmediatelyStopped;B++)I[B].once&&A.currentTarget.removeListener(_,I[B].fn,void 0,!0),I[B].fn.call(I[B].context,A)}}const MOUSE_POINTER_ID=1,TOUCH_TO_POINTER={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},_EventSystem=class Oi{constructor(A){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=A,this.rootBoundary=new EventBoundary(null),EventsTicker.init(this),this.autoPreventDefault=!0,this._eventsAdded=!1,this._rootPointerEvent=new FederatedPointerEvent(null),this._rootWheelEvent=new FederatedWheelEvent(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...Oi.defaultEventFeatures},{set:(_,I,B)=>(I==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=B),_[I]=B,!0)}),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerUp=this._onPointerUp.bind(this),this._onPointerOverOut=this._onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(A){const{canvas:_,resolution:I}=this.renderer;this.setTargetElement(_),this.resolution=I,Oi._defaultEventMode=A.eventMode??"passive",Object.assign(this.features,A.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(A){this.resolution=A}destroy(){this.setTargetElement(null),this.renderer=null,this._currentCursor=null}setCursor(A){A||(A="default");let _=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(_=!1),this._currentCursor===A)return;this._currentCursor=A;const I=this.cursorStyles[A];if(I)switch(typeof I){case"string":_&&(this.domElement.style.cursor=I);break;case"function":I(A);break;case"object":_&&Object.assign(this.domElement.style,I);break}else _&&typeof A=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,A)&&(this.domElement.style.cursor=A)}get pointer(){return this._rootPointerEvent}_onPointerDown(A){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const _=this._normalizeToPointerData(A);this.autoPreventDefault&&_[0].isNormalized&&(A.cancelable||!("cancelable"in A))&&A.preventDefault();for(let I=0,B=_.length;I<B;I++){const T=_[I],R=this._bootstrapEvent(this._rootPointerEvent,T);this.rootBoundary.mapEvent(R)}this.setCursor(this.rootBoundary.cursor)}_onPointerMove(A){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,EventsTicker.pointerMoved();const _=this._normalizeToPointerData(A);for(let I=0,B=_.length;I<B;I++){const T=this._bootstrapEvent(this._rootPointerEvent,_[I]);this.rootBoundary.mapEvent(T)}this.setCursor(this.rootBoundary.cursor)}_onPointerUp(A){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let _=A.target;A.composedPath&&A.composedPath().length>0&&(_=A.composedPath()[0]);const I=_!==this.domElement?"outside":"",B=this._normalizeToPointerData(A);for(let T=0,R=B.length;T<R;T++){const P=this._bootstrapEvent(this._rootPointerEvent,B[T]);P.type+=I,this.rootBoundary.mapEvent(P)}this.setCursor(this.rootBoundary.cursor)}_onPointerOverOut(A){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const _=this._normalizeToPointerData(A);for(let I=0,B=_.length;I<B;I++){const T=this._bootstrapEvent(this._rootPointerEvent,_[I]);this.rootBoundary.mapEvent(T)}this.setCursor(this.rootBoundary.cursor)}onWheel(A){if(!this.features.wheel)return;const _=this.normalizeWheelEvent(A);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(_)}setTargetElement(A){this._removeEvents(),this.domElement=A,EventsTicker.domElement=A,this._addEvents()}_addEvents(){if(this._eventsAdded||!this.domElement)return;EventsTicker.addTickerListener();const A=this.domElement.style;A&&(globalThis.navigator.msPointerEnabled?(A.msContentZooming="none",A.msTouchAction="none"):this.supportsPointerEvents&&(A.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this._onPointerMove,!0),this.domElement.addEventListener("pointerdown",this._onPointerDown,!0),this.domElement.addEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this._onPointerOverOut,!0),globalThis.addEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this._onPointerMove,!0),this.domElement.addEventListener("mousedown",this._onPointerDown,!0),this.domElement.addEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this._onPointerOverOut,!0),globalThis.addEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this._onPointerDown,!0),this.domElement.addEventListener("touchend",this._onPointerUp,!0),this.domElement.addEventListener("touchmove",this._onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this._eventsAdded=!0}_removeEvents(){if(!this._eventsAdded||!this.domElement)return;EventsTicker.removeTickerListener();const A=this.domElement.style;A&&(globalThis.navigator.msPointerEnabled?(A.msContentZooming="",A.msTouchAction=""):this.supportsPointerEvents&&(A.touchAction="")),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this._onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this._onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this._onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this._onPointerMove,!0),this.domElement.removeEventListener("mousedown",this._onPointerDown,!0),this.domElement.removeEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this._onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this._onPointerDown,!0),this.domElement.removeEventListener("touchend",this._onPointerUp,!0),this.domElement.removeEventListener("touchmove",this._onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this._eventsAdded=!1}mapPositionToPoint(A,_,I){const B=this.domElement.isConnected?this.domElement.getBoundingClientRect():{width:this.domElement.width,height:this.domElement.height,left:0,top:0},T=1/this.resolution;A.x=(_-B.left)*(this.domElement.width/B.width)*T,A.y=(I-B.top)*(this.domElement.height/B.height)*T}_normalizeToPointerData(A){const _=[];if(this.supportsTouchEvents&&A instanceof TouchEvent)for(let I=0,B=A.changedTouches.length;I<B;I++){const T=A.changedTouches[I];typeof T.button>"u"&&(T.button=0),typeof T.buttons>"u"&&(T.buttons=1),typeof T.isPrimary>"u"&&(T.isPrimary=A.touches.length===1&&A.type==="touchstart"),typeof T.width>"u"&&(T.width=T.radiusX||1),typeof T.height>"u"&&(T.height=T.radiusY||1),typeof T.tiltX>"u"&&(T.tiltX=0),typeof T.tiltY>"u"&&(T.tiltY=0),typeof T.pointerType>"u"&&(T.pointerType="touch"),typeof T.pointerId>"u"&&(T.pointerId=T.identifier||0),typeof T.pressure>"u"&&(T.pressure=T.force||.5),typeof T.twist>"u"&&(T.twist=0),typeof T.tangentialPressure>"u"&&(T.tangentialPressure=0),typeof T.layerX>"u"&&(T.layerX=T.offsetX=T.clientX),typeof T.layerY>"u"&&(T.layerY=T.offsetY=T.clientY),T.isNormalized=!0,T.type=A.type,_.push(T)}else if(!globalThis.MouseEvent||A instanceof MouseEvent&&(!this.supportsPointerEvents||!(A instanceof globalThis.PointerEvent))){const I=A;typeof I.isPrimary>"u"&&(I.isPrimary=!0),typeof I.width>"u"&&(I.width=1),typeof I.height>"u"&&(I.height=1),typeof I.tiltX>"u"&&(I.tiltX=0),typeof I.tiltY>"u"&&(I.tiltY=0),typeof I.pointerType>"u"&&(I.pointerType="mouse"),typeof I.pointerId>"u"&&(I.pointerId=MOUSE_POINTER_ID),typeof I.pressure>"u"&&(I.pressure=.5),typeof I.twist>"u"&&(I.twist=0),typeof I.tangentialPressure>"u"&&(I.tangentialPressure=0),I.isNormalized=!0,_.push(I)}else _.push(A);return _}normalizeWheelEvent(A){const _=this._rootWheelEvent;return this._transferMouseData(_,A),_.deltaX=A.deltaX,_.deltaY=A.deltaY,_.deltaZ=A.deltaZ,_.deltaMode=A.deltaMode,this.mapPositionToPoint(_.screen,A.clientX,A.clientY),_.global.copyFrom(_.screen),_.offset.copyFrom(_.screen),_.nativeEvent=A,_.type=A.type,_}_bootstrapEvent(A,_){return A.originalEvent=null,A.nativeEvent=_,A.pointerId=_.pointerId,A.width=_.width,A.height=_.height,A.isPrimary=_.isPrimary,A.pointerType=_.pointerType,A.pressure=_.pressure,A.tangentialPressure=_.tangentialPressure,A.tiltX=_.tiltX,A.tiltY=_.tiltY,A.twist=_.twist,this._transferMouseData(A,_),this.mapPositionToPoint(A.screen,_.clientX,_.clientY),A.global.copyFrom(A.screen),A.offset.copyFrom(A.screen),A.isTrusted=_.isTrusted,A.type==="pointerleave"&&(A.type="pointerout"),A.type.startsWith("mouse")&&(A.type=A.type.replace("mouse","pointer")),A.type.startsWith("touch")&&(A.type=TOUCH_TO_POINTER[A.type]||A.type),A}_transferMouseData(A,_){A.isTrusted=_.isTrusted,A.srcElement=_.srcElement,A.timeStamp=performance.now(),A.type=_.type,A.altKey=_.altKey,A.button=_.button,A.buttons=_.buttons,A.client.x=_.clientX,A.client.y=_.clientY,A.ctrlKey=_.ctrlKey,A.metaKey=_.metaKey,A.movement.x=_.movementX,A.movement.y=_.movementY,A.page.x=_.pageX,A.page.y=_.pageY,A.relatedTarget=null,A.shiftKey=_.shiftKey}};_EventSystem.extension={name:"events",type:[ExtensionType.WebGLSystem,ExtensionType.CanvasSystem,ExtensionType.WebGPUSystem],priority:-1};_EventSystem.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let EventSystem=_EventSystem;const FederatedContainer={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,get interactive(){return this.eventMode==="dynamic"||this.eventMode==="static"},set interactive(E){this.eventMode=E?"static":"passive"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??EventSystem.defaultEventMode},set eventMode(E){this._internalEventMode=E},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(E,A,_){const I=typeof _=="boolean"&&_||typeof _=="object"&&_.capture,B=typeof _=="object"?_.signal:void 0,T=typeof _=="object"?_.once===!0:!1,R=typeof A=="function"?void 0:A;E=I?`${E}capture`:E;const P=typeof A=="function"?A:A.handleEvent,D=this;B&&B.addEventListener("abort",()=>{D.off(E,P,R)}),T?D.once(E,P,R):D.on(E,P,R)},removeEventListener(E,A,_){const I=typeof _=="boolean"&&_||typeof _=="object"&&_.capture,B=typeof A=="function"?void 0:A;E=I?`${E}capture`:E,A=typeof A=="function"?A:A.handleEvent,this.off(E,A,B)},dispatchEvent(E){if(!(E instanceof FederatedEvent))throw new Error("Container cannot propagate events outside of the Federated Events API");return E.defaultPrevented=!1,E.path=null,E.target=this,E.manager.dispatchEvent(E),!E.defaultPrevented}};var vertex$4=`in vec2 aPosition;
out vec2 vTextureCoord;

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,fragment$6=`
in vec2 vTextureCoord;

out vec4 finalColor;

uniform float uAlpha;
uniform sampler2D uTexture;

void main()
{
    finalColor =  texture(uTexture, vTextureCoord) * uAlpha;
}
`,source$5=`struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct AlphaUniforms {
  uAlpha:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> alphaUniforms : AlphaUniforms;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {
 
    var sample = textureSample(uTexture, uSampler, uv);
    
    return sample * alphaUniforms.uAlpha;
}`;const _AlphaFilter=class ln extends Filter{constructor(A){A={...ln.defaultOptions,...A};const _=GpuProgram.from({vertex:{source:source$5,entryPoint:"mainVertex"},fragment:{source:source$5,entryPoint:"mainFragment"}}),I=GlProgram.from({vertex:vertex$4,fragment:fragment$6,name:"alpha-filter"}),{alpha:B,...T}=A,R=new UniformGroup({uAlpha:{value:B,type:"f32"}});super({...T,gpuProgram:_,glProgram:I,resources:{alphaUniforms:R}})}get alpha(){return this.resources.alphaUniforms.uniforms.uAlpha}set alpha(A){this.resources.alphaUniforms.uniforms.uAlpha=A}};_AlphaFilter.defaultOptions={alpha:1};let AlphaFilter=_AlphaFilter;const GAUSSIAN_VALUES={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},fragTemplate=["in vec2 vBlurTexCoords[%size%];","uniform sampler2D uTexture;","out vec4 finalColor;","void main(void)","{","    finalColor = vec4(0.0);","    %blur%","}"].join(`
`);function generateBlurFragSource(E){const A=GAUSSIAN_VALUES[E],_=A.length;let I=fragTemplate,B="";const T="finalColor += texture(uTexture, vBlurTexCoords[%index%]) * %value%;";let R;for(let P=0;P<E;P++){let D=T.replace("%index%",P.toString());R=P,P>=_&&(R=E-P-1),D=D.replace("%value%",A[R].toString()),B+=D,B+=`
`}return I=I.replace("%blur%",B),I=I.replace("%size%",E.toString()),I}const vertTemplate=`
    in vec2 aPosition;

    uniform float uStrength;

    out vec2 vBlurTexCoords[%size%];

    uniform vec4 uInputSize;
    uniform vec4 uOutputFrame;
    uniform vec4 uOutputTexture;

    vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;

    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

    vec2 filterTextureCoord( void )
    {
        return aPosition * (uOutputFrame.zw * uInputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        float pixelStrength = uInputSize.%dimension% * uStrength;

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function generateBlurVertSource(E,A){const _=Math.ceil(E/2);let I=vertTemplate,B="",T;A?T="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * pixelStrength, 0.0);":T="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * pixelStrength);";for(let R=0;R<E;R++){let P=T.replace("%index%",R.toString());P=P.replace("%sampleIndex%",`${R-(_-1)}.0`),B+=P,B+=`
`}return I=I.replace("%blur%",B),I=I.replace("%size%",E.toString()),I=I.replace("%dimension%",A?"z":"w"),I}function generateBlurGlProgram(E,A){const _=generateBlurVertSource(A,E),I=generateBlurFragSource(A);return GlProgram.from({vertex:_,fragment:I,name:`blur-${E?"horizontal":"vertical"}-pass-filter`})}var source$4=`

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct BlurUniforms {
  uStrength:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> blurUniforms : BlurUniforms;


struct VSOutput {
    @builtin(position) position: vec4<f32>,
    %blur-struct%
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}


@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {

  let filteredCord = filterTextureCoord(aPosition);

  let pixelStrength = gfu.uInputSize.%dimension% * blurUniforms.uStrength;

  return VSOutput(
   filterVertexPosition(aPosition),
    %blur-vertex-out%
  );
}

@fragment
fn mainFragment(
  @builtin(position) position: vec4<f32>,
  %blur-fragment-in%
) -> @location(0) vec4<f32> {

    var   finalColor = vec4(0.0);

    %blur-sampling%

    return finalColor;
}`;function generateBlurProgram(E,A){const _=GAUSSIAN_VALUES[A],I=_.length,B=[],T=[],R=[];for(let U=0;U<A;U++){B[U]=`@location(${U}) offset${U}: vec2<f32>,`,E?T[U]=`filteredCord + vec2(${U-I+1} * pixelStrength, 0.0),`:T[U]=`filteredCord + vec2(0.0, ${U-I+1} * pixelStrength),`;const V=U<I?U:A-U-1,K=_[V].toString();R[U]=`finalColor += textureSample(uTexture, uSampler, offset${U}) * ${K};`}const P=B.join(`
`),D=T.join(`
`),F=R.join(`
`),L=source$4.replace("%blur-struct%",P).replace("%blur-vertex-out%",D).replace("%blur-fragment-in%",P).replace("%blur-sampling%",F).replace("%dimension%",E?"z":"w");return GpuProgram.from({vertex:{source:L,entryPoint:"mainVertex"},fragment:{source:L,entryPoint:"mainFragment"}})}const _BlurFilterPass=class hn extends Filter{constructor(A){A={...hn.defaultOptions,...A};const _=generateBlurGlProgram(A.horizontal,A.kernelSize),I=generateBlurProgram(A.horizontal,A.kernelSize);super({glProgram:_,gpuProgram:I,resources:{blurUniforms:{uStrength:{value:0,type:"f32"}}},...A}),this.horizontal=A.horizontal,this._quality=0,this.quality=A.quality,this.blur=A.strength,this._uniforms=this.resources.blurUniforms.uniforms}apply(A,_,I,B){if(this._uniforms.uStrength=this.strength/this.passes,this.passes===1)A.applyFilter(this,_,I,B);else{const T=TexturePool.getSameSizeTexture(_);let R=_,P=T;this._state.blend=!1;const D=A.renderer.type===RendererType.WEBGPU;for(let F=0;F<this.passes-1;F++){A.applyFilter(this,R,P,F===0?!0:D);const L=P;P=R,R=L}this._state.blend=!0,A.applyFilter(this,R,I,B),TexturePool.returnTexture(T)}}get blur(){return this.strength}set blur(A){this.padding=1+Math.abs(A)*2,this.strength=A}get quality(){return this._quality}set quality(A){this._quality=A,this.passes=A}};_BlurFilterPass.defaultOptions={strength:8,quality:4,kernelSize:5};let BlurFilterPass=_BlurFilterPass;class BlurFilter extends Filter{constructor(...A){let _=A[0]??{};typeof _=="number"&&(deprecation(v8_0_0,"BlurFilter constructor params are now options object. See params: { strength, quality, resolution, kernelSize }"),_={strength:_},A[1]!==void 0&&(_.quality=A[1]),A[2]!==void 0&&(_.resolution=A[2]||"inherit"),A[3]!==void 0&&(_.kernelSize=A[3])),_={...BlurFilterPass.defaultOptions,..._};const{strength:I,strengthX:B,strengthY:T,quality:R,...P}=_;super({...P,compatibleRenderers:RendererType.BOTH,resources:{}}),this._repeatEdgePixels=!1,this.blurXFilter=new BlurFilterPass({horizontal:!0,..._}),this.blurYFilter=new BlurFilterPass({horizontal:!1,..._}),this.quality=R,this.strengthX=B??I,this.strengthY=T??I,this.repeatEdgePixels=!1}apply(A,_,I,B){const T=Math.abs(this.blurXFilter.strength),R=Math.abs(this.blurYFilter.strength);if(T&&R){const P=TexturePool.getSameSizeTexture(_);this.blurXFilter.blendMode="normal",this.blurXFilter.apply(A,_,P,!0),this.blurYFilter.blendMode=this.blendMode,this.blurYFilter.apply(A,P,I,B),TexturePool.returnTexture(P)}else R?(this.blurYFilter.blendMode=this.blendMode,this.blurYFilter.apply(A,_,I,B)):(this.blurXFilter.blendMode=this.blendMode,this.blurXFilter.apply(A,_,I,B))}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.blur),Math.abs(this.blurYFilter.blur))*2}get strength(){if(this.strengthX!==this.strengthY)throw new Error("BlurFilter's strengthX and strengthY are different");return this.strengthX}set strength(A){this.blurXFilter.blur=this.blurYFilter.blur=A,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(A){this.blurXFilter.quality=this.blurYFilter.quality=A}get strengthX(){return this.blurXFilter.blur}set strengthX(A){this.blurXFilter.blur=A,this.updatePadding()}get strengthY(){return this.blurYFilter.blur}set strengthY(A){this.blurYFilter.blur=A,this.updatePadding()}get blur(){return deprecation("8.3.0","BlurFilter.blur is deprecated, please use BlurFilter.strength instead."),this.strength}set blur(A){deprecation("8.3.0","BlurFilter.blur is deprecated, please use BlurFilter.strength instead."),this.strength=A}get blurX(){return deprecation("8.3.0","BlurFilter.blurX is deprecated, please use BlurFilter.strengthX instead."),this.strengthX}set blurX(A){deprecation("8.3.0","BlurFilter.blurX is deprecated, please use BlurFilter.strengthX instead."),this.strengthX=A}get blurY(){return deprecation("8.3.0","BlurFilter.blurY is deprecated, please use BlurFilter.strengthY instead."),this.strengthY}set blurY(A){deprecation("8.3.0","BlurFilter.blurY is deprecated, please use BlurFilter.strengthY instead."),this.strengthY=A}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(A){this._repeatEdgePixels=A,this.updatePadding()}}BlurFilter.defaultOptions={strength:8,quality:4,kernelSize:5};var fragment$5=`
in vec2 vTextureCoord;
in vec4 vColor;

out vec4 finalColor;

uniform float uColorMatrix[20];
uniform float uAlpha;

uniform sampler2D uTexture;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture(uTexture, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * 0.2);
    float diff = (randomValue - 0.5) *  0.5;

    if (uAlpha == 0.0) {
        finalColor = color;
        return;
    }

    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    vec4 result;

    result.r = (uColorMatrix[0] * color.r);
        result.r += (uColorMatrix[1] * color.g);
        result.r += (uColorMatrix[2] * color.b);
        result.r += (uColorMatrix[3] * color.a);
        result.r += uColorMatrix[4];

    result.g = (uColorMatrix[5] * color.r);
        result.g += (uColorMatrix[6] * color.g);
        result.g += (uColorMatrix[7] * color.b);
        result.g += (uColorMatrix[8] * color.a);
        result.g += uColorMatrix[9];

    result.b = (uColorMatrix[10] * color.r);
       result.b += (uColorMatrix[11] * color.g);
       result.b += (uColorMatrix[12] * color.b);
       result.b += (uColorMatrix[13] * color.a);
       result.b += uColorMatrix[14];

    result.a = (uColorMatrix[15] * color.r);
       result.a += (uColorMatrix[16] * color.g);
       result.a += (uColorMatrix[17] * color.b);
       result.a += (uColorMatrix[18] * color.a);
       result.a += uColorMatrix[19];

    vec3 rgb = mix(color.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    finalColor = vec4(rgb, result.a);
}
`,source$3=`struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct ColorMatrixUniforms {
  uColorMatrix:array<vec4<f32>, 5>,
  uAlpha:f32,
};


@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;
@group(1) @binding(0) var<uniform> colorMatrixUniforms : ColorMatrixUniforms;


struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
  };
  
fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition),
  );
}


@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
) -> @location(0) vec4<f32> {


  var c = textureSample(uTexture, uSampler, uv);
  
  if (colorMatrixUniforms.uAlpha == 0.0) {
    return c;
  }

 
    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.r /= c.a;
      c.g /= c.a;
      c.b /= c.a;
    }

    var cm = colorMatrixUniforms.uColorMatrix;


    var result = vec4<f32>(0.);

    result.r = (cm[0][0] * c.r);
    result.r += (cm[0][1] * c.g);
    result.r += (cm[0][2] * c.b);
    result.r += (cm[0][3] * c.a);
    result.r += cm[1][0];

    result.g = (cm[1][1] * c.r);
    result.g += (cm[1][2] * c.g);
    result.g += (cm[1][3] * c.b);
    result.g += (cm[2][0] * c.a);
    result.g += cm[2][1];

    result.b = (cm[2][2] * c.r);
    result.b += (cm[2][3] * c.g);
    result.b += (cm[3][0] * c.b);
    result.b += (cm[3][1] * c.a);
    result.b += cm[3][2];

    result.a = (cm[3][3] * c.r);
    result.a += (cm[4][0] * c.g);
    result.a += (cm[4][1] * c.b);
    result.a += (cm[4][2] * c.a);
    result.a += cm[4][3];

    var rgb = mix(c.rgb, result.rgb, colorMatrixUniforms.uAlpha);

    rgb.r *= result.a;
    rgb.g *= result.a;
    rgb.b *= result.a;

    return vec4(rgb, result.a);
}`;class ColorMatrixFilter extends Filter{constructor(A={}){const _=new UniformGroup({uColorMatrix:{value:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],type:"f32",size:20},uAlpha:{value:1,type:"f32"}}),I=GpuProgram.from({vertex:{source:source$3,entryPoint:"mainVertex"},fragment:{source:source$3,entryPoint:"mainFragment"}}),B=GlProgram.from({vertex:vertex$4,fragment:fragment$5,name:"color-matrix-filter"});super({...A,gpuProgram:I,glProgram:B,resources:{colorMatrixUniforms:_}}),this.alpha=1}_loadMatrix(A,_=!1){let I=A;_&&(this._multiply(I,this.matrix,A),I=this._colorMatrix(I)),this.resources.colorMatrixUniforms.uniforms.uColorMatrix=I,this.resources.colorMatrixUniforms.update()}_multiply(A,_,I){return A[0]=_[0]*I[0]+_[1]*I[5]+_[2]*I[10]+_[3]*I[15],A[1]=_[0]*I[1]+_[1]*I[6]+_[2]*I[11]+_[3]*I[16],A[2]=_[0]*I[2]+_[1]*I[7]+_[2]*I[12]+_[3]*I[17],A[3]=_[0]*I[3]+_[1]*I[8]+_[2]*I[13]+_[3]*I[18],A[4]=_[0]*I[4]+_[1]*I[9]+_[2]*I[14]+_[3]*I[19]+_[4],A[5]=_[5]*I[0]+_[6]*I[5]+_[7]*I[10]+_[8]*I[15],A[6]=_[5]*I[1]+_[6]*I[6]+_[7]*I[11]+_[8]*I[16],A[7]=_[5]*I[2]+_[6]*I[7]+_[7]*I[12]+_[8]*I[17],A[8]=_[5]*I[3]+_[6]*I[8]+_[7]*I[13]+_[8]*I[18],A[9]=_[5]*I[4]+_[6]*I[9]+_[7]*I[14]+_[8]*I[19]+_[9],A[10]=_[10]*I[0]+_[11]*I[5]+_[12]*I[10]+_[13]*I[15],A[11]=_[10]*I[1]+_[11]*I[6]+_[12]*I[11]+_[13]*I[16],A[12]=_[10]*I[2]+_[11]*I[7]+_[12]*I[12]+_[13]*I[17],A[13]=_[10]*I[3]+_[11]*I[8]+_[12]*I[13]+_[13]*I[18],A[14]=_[10]*I[4]+_[11]*I[9]+_[12]*I[14]+_[13]*I[19]+_[14],A[15]=_[15]*I[0]+_[16]*I[5]+_[17]*I[10]+_[18]*I[15],A[16]=_[15]*I[1]+_[16]*I[6]+_[17]*I[11]+_[18]*I[16],A[17]=_[15]*I[2]+_[16]*I[7]+_[17]*I[12]+_[18]*I[17],A[18]=_[15]*I[3]+_[16]*I[8]+_[17]*I[13]+_[18]*I[18],A[19]=_[15]*I[4]+_[16]*I[9]+_[17]*I[14]+_[18]*I[19]+_[19],A}_colorMatrix(A){const _=new Float32Array(A);return _[4]/=255,_[9]/=255,_[14]/=255,_[19]/=255,_}brightness(A,_){const I=[A,0,0,0,0,0,A,0,0,0,0,0,A,0,0,0,0,0,1,0];this._loadMatrix(I,_)}tint(A,_){const[I,B,T]=Color$1.shared.setValue(A).toArray(),R=[I,0,0,0,0,0,B,0,0,0,0,0,T,0,0,0,0,0,1,0];this._loadMatrix(R,_)}greyscale(A,_){const I=[A,A,A,0,0,A,A,A,0,0,A,A,A,0,0,0,0,0,1,0];this._loadMatrix(I,_)}grayscale(A,_){this.greyscale(A,_)}blackAndWhite(A){const _=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(_,A)}hue(A,_){A=(A||0)/180*Math.PI;const I=Math.cos(A),B=Math.sin(A),T=Math.sqrt,R=1/3,P=T(R),D=I+(1-I)*R,F=R*(1-I)-P*B,L=R*(1-I)+P*B,U=R*(1-I)+P*B,V=I+R*(1-I),K=R*(1-I)-P*B,J=R*(1-I)-P*B,ee=R*(1-I)+P*B,ie=I+R*(1-I),ne=[D,F,L,0,0,U,V,K,0,0,J,ee,ie,0,0,0,0,0,1,0];this._loadMatrix(ne,_)}contrast(A,_){const I=(A||0)+1,B=-.5*(I-1),T=[I,0,0,0,B,0,I,0,0,B,0,0,I,0,B,0,0,0,1,0];this._loadMatrix(T,_)}saturate(A=0,_){const I=A*2/3+1,B=(I-1)*-.5,T=[I,B,B,0,0,B,I,B,0,0,B,B,I,0,0,0,0,0,1,0];this._loadMatrix(T,_)}desaturate(){this.saturate(-1)}negative(A){const _=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(_,A)}sepia(A){const _=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(_,A)}technicolor(A){const _=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(_,A)}polaroid(A){const _=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(_,A)}toBGR(A){const _=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(_,A)}kodachrome(A){const _=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(_,A)}browni(A){const _=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(_,A)}vintage(A){const _=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(_,A)}colorTone(A,_,I,B,T){A||(A=.2),_||(_=.15),I||(I=16770432),B||(B=3375104);const R=Color$1.shared,[P,D,F]=R.setValue(I).toArray(),[L,U,V]=R.setValue(B).toArray(),K=[.3,.59,.11,0,0,P,D,F,A,0,L,U,V,_,0,P-L,D-U,F-V,0,0];this._loadMatrix(K,T)}night(A,_){A||(A=.1);const I=[A*-2,-A,0,0,0,-A,0,A,0,0,0,A,A*2,0,0,0,0,0,1,0];this._loadMatrix(I,_)}predator(A,_){const I=[11.224130630493164*A,-4.794486999511719*A,-2.8746118545532227*A,0*A,.40342438220977783*A,-3.6330697536468506*A,9.193157196044922*A,-2.951810836791992*A,0*A,-1.316135048866272*A,-3.2184197902679443*A,-4.2375030517578125*A,7.476448059082031*A,0*A,.8044459223747253*A,0,0,0,1,0];this._loadMatrix(I,_)}lsd(A){const _=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(_,A)}reset(){const A=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(A,!1)}get matrix(){return this.resources.colorMatrixUniforms.uniforms.uColorMatrix}set matrix(A){this.resources.colorMatrixUniforms.uniforms.uColorMatrix=A}get alpha(){return this.resources.colorMatrixUniforms.uniforms.uAlpha}set alpha(A){this.resources.colorMatrixUniforms.uniforms.uAlpha=A}}var fragment$4=`
in vec2 vTextureCoord;
in vec2 vFilterUv;

out vec4 finalColor;

uniform sampler2D uTexture;
uniform sampler2D uMapTexture;

uniform vec4 uInputClamp;
uniform highp vec4 uInputSize;
uniform mat2 uRotation;
uniform vec2 uScale;

void main()
{
    vec4 map = texture(uMapTexture, vFilterUv);
    
    vec2 offset = uInputSize.zw * (uRotation * (map.xy - 0.5)) * uScale; 

    finalColor = texture(uTexture, clamp(vTextureCoord + offset, uInputClamp.xy, uInputClamp.zw));
}
`,vertex$3=`in vec2 aPosition;
out vec2 vTextureCoord;
out vec2 vFilterUv;


uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

uniform mat3 uFilterMatrix;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

vec2 getFilterCoord( void )
{
  return ( uFilterMatrix * vec3( filterTextureCoord(), 1.0)  ).xy;
}


void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
    vFilterUv = getFilterCoord();
}
`,source$2=`
struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct DisplacementUniforms {
  uFilterMatrix:mat3x3<f32>,
  uScale:vec2<f32>,
  uRotation:mat2x2<f32>
};



@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> filterUniforms : DisplacementUniforms;
@group(1) @binding(1) var uMapTexture: texture_2d<f32>;
@group(1) @binding(2) var uMapSampler : sampler;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
    @location(1) filterUv : vec2<f32>,
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getFilterCoord(aPosition:vec2<f32> ) -> vec2<f32>
{
  return ( filterUniforms.uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}

fn getSize() -> vec2<f32>
{

  
  return gfu.uGlobalFrame.zw;
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition),
   getFilterCoord(aPosition)
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @location(1) filterUv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

    var map = textureSample(uMapTexture, uMapSampler, filterUv);

    var offset =  gfu.uInputSize.zw * (filterUniforms.uRotation * (map.xy - 0.5)) * filterUniforms.uScale; 
   
    return textureSample(uTexture, uSampler, clamp(uv + offset, gfu.uInputClamp.xy, gfu.uInputClamp.zw));
}`;class DisplacementFilter extends Filter{constructor(...A){let _=A[0];_ instanceof Sprite$1&&(A[1]&&deprecation(v8_0_0,"DisplacementFilter now uses options object instead of params. {sprite, scale}"),_={sprite:_,scale:A[1]});const{sprite:I,scale:B,...T}=_;let R=B??20;typeof R=="number"&&(R=new Point$1(R,R));const P=new UniformGroup({uFilterMatrix:{value:new Matrix,type:"mat3x3<f32>"},uScale:{value:R,type:"vec2<f32>"},uRotation:{value:new Float32Array([0,0,0,0]),type:"mat2x2<f32>"}}),D=GlProgram.from({vertex:vertex$3,fragment:fragment$4,name:"displacement-filter"}),F=GpuProgram.from({vertex:{source:source$2,entryPoint:"mainVertex"},fragment:{source:source$2,entryPoint:"mainFragment"}}),L=I.texture.source;super({...T,gpuProgram:F,glProgram:D,resources:{filterUniforms:P,uMapTexture:L,uMapSampler:L.style}}),this._sprite=_.sprite,this._sprite.renderable=!1}apply(A,_,I,B){const T=this.resources.filterUniforms.uniforms;A.calculateSpriteMatrix(T.uFilterMatrix,this._sprite);const R=this._sprite.worldTransform,P=Math.sqrt(R.a*R.a+R.b*R.b),D=Math.sqrt(R.c*R.c+R.d*R.d);P!==0&&D!==0&&(T.uRotation[0]=R.a/P,T.uRotation[1]=R.b/P,T.uRotation[2]=R.c/D,T.uRotation[3]=R.d/D),this.resources.uMapTexture=this._sprite.texture.source,A.applyFilter(this,_,I,B)}get scale(){return this.resources.filterUniforms.uniforms.uScale}}var fragment$3=`
in vec2 vTextureCoord;
in vec4 vColor;

out vec4 finalColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uTexture;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture(uTexture, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) *  uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    finalColor = color;
}
`,source$1=`

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct NoiseUniforms {
  uNoise:f32,
  uSeed:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> noiseUniforms : NoiseUniforms;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}

fn rand(co:vec2<f32>) -> f32
{
  return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}



@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

    var pixelPosition =  globalTextureCoord(position.xy);// / (getSize());//-  gfu.uOutputFrame.xy);
  
    
    var sample = textureSample(uTexture, uSampler, uv);
    var randomValue =  rand(pixelPosition.xy * noiseUniforms.uSeed);
    var diff = (randomValue - 0.5) * noiseUniforms.uNoise;
  
    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (sample.a > 0.0) {
      sample.r /= sample.a;
      sample.g /= sample.a;
      sample.b /= sample.a;
    }

    sample.r += diff;
    sample.g += diff;
    sample.b += diff;

    // Premultiply alpha again.
    sample.r *= sample.a;
    sample.g *= sample.a;
    sample.b *= sample.a;
    
    return sample;
}`;const _NoiseFilter=class fn extends Filter{constructor(A={}){A={...fn.defaultOptions,...A};const _=GpuProgram.from({vertex:{source:source$1,entryPoint:"mainVertex"},fragment:{source:source$1,entryPoint:"mainFragment"}}),I=GlProgram.from({vertex:vertex$4,fragment:fragment$3,name:"noise-filter"}),{noise:B,seed:T,...R}=A;super({...R,gpuProgram:_,glProgram:I,resources:{noiseUniforms:new UniformGroup({uNoise:{value:1,type:"f32"},uSeed:{value:1,type:"f32"}})}}),this.noise=B,this.seed=T??Math.random()}get noise(){return this.resources.noiseUniforms.uniforms.uNoise}set noise(A){this.resources.noiseUniforms.uniforms.uNoise=A}get seed(){return this.resources.noiseUniforms.uniforms.uSeed}set seed(A){this.resources.noiseUniforms.uniforms.uSeed=A}};_NoiseFilter.defaultOptions={noise:.5};let NoiseFilter=_NoiseFilter;class FilterPipe{constructor(A){this._renderer=A}push(A,_,I){this._renderer.renderPipes.batch.break(I),I.add({renderPipeId:"filter",canBundle:!1,action:"pushFilter",container:_,filterEffect:A})}pop(A,_,I){this._renderer.renderPipes.batch.break(I),I.add({renderPipeId:"filter",action:"popFilter",canBundle:!1})}execute(A){A.action==="pushFilter"?this._renderer.filter.push(A):A.action==="popFilter"&&this._renderer.filter.pop()}destroy(){this._renderer=null}}FilterPipe.extension={type:[ExtensionType.WebGLPipes,ExtensionType.WebGPUPipes,ExtensionType.CanvasPipes],name:"filter"};function getGlobalRenderableBounds(E,A){A.clear();const _=A.matrix;for(let I=0;I<E.length;I++){const B=E[I];B.globalDisplayStatus<7||(A.matrix=B.worldTransform,A.addBounds(B.bounds))}return A.matrix=_,A}const quadGeometry=new Geometry({attributes:{aPosition:{buffer:new Float32Array([0,0,1,0,1,1,0,1]),format:"float32x2",stride:8,offset:0}},indexBuffer:new Uint32Array([0,1,2,0,2,3])});class FilterData{constructor(){this.skip=!1,this.inputTexture=null,this.backTexture=null,this.filters=null,this.bounds=new Bounds,this.container=null,this.blendRequired=!1,this.outputRenderSurface=null,this.globalFrame={x:0,y:0,width:0,height:0}}}class FilterSystem{constructor(A){this._filterStackIndex=0,this._filterStack=[],this._filterGlobalUniforms=new UniformGroup({uInputSize:{value:new Float32Array(4),type:"vec4<f32>"},uInputPixel:{value:new Float32Array(4),type:"vec4<f32>"},uInputClamp:{value:new Float32Array(4),type:"vec4<f32>"},uOutputFrame:{value:new Float32Array(4),type:"vec4<f32>"},uGlobalFrame:{value:new Float32Array(4),type:"vec4<f32>"},uOutputTexture:{value:new Float32Array(4),type:"vec4<f32>"}}),this._globalFilterBindGroup=new BindGroup({}),this.renderer=A}get activeBackTexture(){return this._activeFilterData?.backTexture}push(A){const _=this.renderer,I=A.filterEffect.filters,B=this._pushFilterData();B.skip=!1,B.filters=I,B.container=A.container,B.outputRenderSurface=_.renderTarget.renderSurface;const T=_.renderTarget.renderTarget.colorTexture.source,R=T.resolution,P=T.antialias;if(I.length===0){B.skip=!0;return}const D=B.bounds;if(this._calculateFilterArea(A,D),this._calculateFilterBounds(B,_.renderTarget.rootViewPort,P,R,1),B.skip)return;const F=this._getPreviousFilterData(),L=this._findFilterResolution(R);let U=0,V=0;F&&(U=F.bounds.minX,V=F.bounds.minY),this._calculateGlobalFrame(B,U,V,L,T.width,T.height),this._setupFilterTextures(B,D,_,F)}generateFilteredTexture({texture:A,filters:_}){const I=this._pushFilterData();this._activeFilterData=I,I.skip=!1,I.filters=_;const B=A.source,T=B.resolution,R=B.antialias;if(_.length===0)return I.skip=!0,A;const P=I.bounds;if(P.addRect(A.frame),this._calculateFilterBounds(I,P.rectangle,R,T,0),I.skip)return A;const D=T;this._calculateGlobalFrame(I,0,0,D,B.width,B.height),I.outputRenderSurface=TexturePool.getOptimalTexture(P.width,P.height,I.resolution,I.antialias),I.backTexture=Texture.EMPTY,I.inputTexture=A,this.renderer.renderTarget.finishRenderPass(),this._applyFiltersToTexture(I,!0);const V=I.outputRenderSurface;return V.source.alphaMode="premultiplied-alpha",V}pop(){const A=this.renderer,_=this._popFilterData();_.skip||(A.globalUniforms.pop(),A.renderTarget.finishRenderPass(),this._activeFilterData=_,this._applyFiltersToTexture(_,!1),_.blendRequired&&TexturePool.returnTexture(_.backTexture),TexturePool.returnTexture(_.inputTexture))}getBackTexture(A,_,I){const B=A.colorTexture.source._resolution,T=TexturePool.getOptimalTexture(_.width,_.height,B,!1);let R=_.minX,P=_.minY;I&&(R-=I.minX,P-=I.minY),R=Math.floor(R*B),P=Math.floor(P*B);const D=Math.ceil(_.width*B),F=Math.ceil(_.height*B);return this.renderer.renderTarget.copyToTexture(A,T,{x:R,y:P},{width:D,height:F},{x:0,y:0}),T}applyFilter(A,_,I,B){const T=this.renderer,R=this._activeFilterData,D=R.outputRenderSurface===I,F=T.renderTarget.rootRenderTarget.colorTexture.source._resolution,L=this._findFilterResolution(F);let U=0,V=0;if(D){const K=this._findPreviousFilterOffset();U=K.x,V=K.y}this._updateFilterUniforms(_,I,R,U,V,L,D,B),this._setupBindGroupsAndRender(A,_,T)}calculateSpriteMatrix(A,_){const I=this._activeFilterData,B=A.set(I.inputTexture._source.width,0,0,I.inputTexture._source.height,I.bounds.minX,I.bounds.minY),T=_.worldTransform.copyTo(Matrix.shared),R=_.renderGroup||_.parentRenderGroup;return R&&R.cacheToLocalTransform&&T.prepend(R.cacheToLocalTransform),T.invert(),B.prepend(T),B.scale(1/_.texture.orig.width,1/_.texture.orig.height),B.translate(_.anchor.x,_.anchor.y),B}destroy(){}_setupBindGroupsAndRender(A,_,I){if(I.renderPipes.uniformBatch){const B=I.renderPipes.uniformBatch.getUboResource(this._filterGlobalUniforms);this._globalFilterBindGroup.setResource(B,0)}else this._globalFilterBindGroup.setResource(this._filterGlobalUniforms,0);this._globalFilterBindGroup.setResource(_.source,1),this._globalFilterBindGroup.setResource(_.source.style,2),A.groups[0]=this._globalFilterBindGroup,I.encoder.draw({geometry:quadGeometry,shader:A,state:A._state,topology:"triangle-list"}),I.type===RendererType.WEBGL&&I.renderTarget.finishRenderPass()}_setupFilterTextures(A,_,I,B){if(A.backTexture=Texture.EMPTY,A.blendRequired){I.renderTarget.finishRenderPass();const T=I.renderTarget.getRenderTarget(A.outputRenderSurface);A.backTexture=this.getBackTexture(T,_,B?.bounds)}A.inputTexture=TexturePool.getOptimalTexture(_.width,_.height,A.resolution,A.antialias),I.renderTarget.bind(A.inputTexture,!0),I.globalUniforms.push({offset:_})}_calculateGlobalFrame(A,_,I,B,T,R){const P=A.globalFrame;P.x=_*B,P.y=I*B,P.width=T*B,P.height=R*B}_updateFilterUniforms(A,_,I,B,T,R,P,D){const F=this._filterGlobalUniforms.uniforms,L=F.uOutputFrame,U=F.uInputSize,V=F.uInputPixel,K=F.uInputClamp,J=F.uGlobalFrame,ee=F.uOutputTexture;P?(L[0]=I.bounds.minX-B,L[1]=I.bounds.minY-T):(L[0]=0,L[1]=0),L[2]=A.frame.width,L[3]=A.frame.height,U[0]=A.source.width,U[1]=A.source.height,U[2]=1/U[0],U[3]=1/U[1],V[0]=A.source.pixelWidth,V[1]=A.source.pixelHeight,V[2]=1/V[0],V[3]=1/V[1],K[0]=.5*V[2],K[1]=.5*V[3],K[2]=A.frame.width*U[2]-.5*V[2],K[3]=A.frame.height*U[3]-.5*V[3];const ie=this.renderer.renderTarget.rootRenderTarget.colorTexture;J[0]=B*R,J[1]=T*R,J[2]=ie.source.width*R,J[3]=ie.source.height*R,_ instanceof Texture&&(_.source.resource=null);const ne=this.renderer.renderTarget.getRenderTarget(_);this.renderer.renderTarget.bind(_,!!D),_ instanceof Texture?(ee[0]=_.frame.width,ee[1]=_.frame.height):(ee[0]=ne.width,ee[1]=ne.height),ee[2]=ne.isRoot?-1:1,this._filterGlobalUniforms.update()}_findFilterResolution(A){let _=this._filterStackIndex-1;for(;_>0&&this._filterStack[_].skip;)--_;return _>0&&this._filterStack[_].inputTexture?this._filterStack[_].inputTexture.source._resolution:A}_findPreviousFilterOffset(){let A=0,_=0,I=this._filterStackIndex;for(;I>0;){I--;const B=this._filterStack[I];if(!B.skip){A=B.bounds.minX,_=B.bounds.minY;break}}return{x:A,y:_}}_calculateFilterArea(A,_){if(A.renderables?getGlobalRenderableBounds(A.renderables,_):A.filterEffect.filterArea?(_.clear(),_.addRect(A.filterEffect.filterArea),_.applyMatrix(A.container.worldTransform)):A.container.getFastGlobalBounds(!0,_),A.container){const B=(A.container.renderGroup||A.container.parentRenderGroup).cacheToLocalTransform;B&&_.applyMatrix(B)}}_applyFiltersToTexture(A,_){const I=A.inputTexture,B=A.bounds,T=A.filters;if(this._globalFilterBindGroup.setResource(I.source.style,2),this._globalFilterBindGroup.setResource(A.backTexture.source,3),T.length===1)T[0].apply(this,I,A.outputRenderSurface,_);else{let R=A.inputTexture;const P=TexturePool.getOptimalTexture(B.width,B.height,R.source._resolution,!1);let D=P,F=0;for(F=0;F<T.length-1;++F){T[F].apply(this,R,D,!0);const U=R;R=D,D=U}T[F].apply(this,R,A.outputRenderSurface,_),TexturePool.returnTexture(P)}}_calculateFilterBounds(A,_,I,B,T){const R=this.renderer,P=A.bounds,D=A.filters;let F=1/0,L=0,U=!0,V=!1,K=!1,J=!0;for(let ee=0;ee<D.length;ee++){const ie=D[ee];if(F=Math.min(F,ie.resolution==="inherit"?B:ie.resolution),L+=ie.padding,ie.antialias==="off"?U=!1:ie.antialias==="inherit"&&U&&(U=I),ie.clipToViewport||(J=!1),!!!(ie.compatibleRenderers&R.type)){K=!1;break}if(ie.blendRequired&&!(R.backBuffer?.useBackBuffer??!0)){warn$1("Blend filter requires backBuffer on WebGL renderer to be enabled. Set `useBackBuffer: true` in the renderer options."),K=!1;break}K=ie.enabled||K,V||(V=ie.blendRequired)}if(!K){A.skip=!0;return}if(J&&P.fitBounds(0,_.width/B,0,_.height/B),P.scale(F).ceil().scale(1/F).pad((L|0)*T),!P.isPositive){A.skip=!0;return}A.antialias=U,A.resolution=F,A.blendRequired=V}_popFilterData(){return this._filterStackIndex--,this._filterStack[this._filterStackIndex]}_getPreviousFilterData(){let A,_=this._filterStackIndex-1;for(;_>1&&(_--,A=this._filterStack[_],!!A.skip););return A}_pushFilterData(){let A=this._filterStack[this._filterStackIndex];return A||(A=this._filterStack[this._filterStackIndex]=new FilterData),this._filterStackIndex++,A}}FilterSystem.extension={type:[ExtensionType.WebGLSystem,ExtensionType.WebGPUSystem],name:"filter"};var fragment$2=`in vec2 vMaskCoord;
in vec2 vTextureCoord;

uniform sampler2D uTexture;
uniform sampler2D uMaskTexture;

uniform float uAlpha;
uniform vec4 uMaskClamp;
uniform float uInverse;

out vec4 finalColor;

void main(void)
{
    float clip = step(3.5,
        step(uMaskClamp.x, vMaskCoord.x) +
        step(uMaskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, uMaskClamp.z) +
        step(vMaskCoord.y, uMaskClamp.w));

    // TODO look into why this is needed
    float npmAlpha = uAlpha;
    vec4 original = texture(uTexture, vTextureCoord);
    vec4 masky = texture(uMaskTexture, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    float a = alphaMul * masky.r * npmAlpha * clip;

    if (uInverse == 1.0) {
        a = 1.0 - a;
    }

    finalColor = original * a;
}
`,vertex$2=`in vec2 aPosition;

out vec2 vTextureCoord;
out vec2 vMaskCoord;


uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;
uniform mat3 uFilterMatrix;

vec4 filterVertexPosition(  vec2 aPosition )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
       
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord(  vec2 aPosition )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

vec2 getFilterCoord( vec2 aPosition )
{
    return  ( uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}   

void main(void)
{
    gl_Position = filterVertexPosition(aPosition);
    vTextureCoord = filterTextureCoord(aPosition);
    vMaskCoord = getFilterCoord(aPosition);
}
`,source=`struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct MaskUniforms {
  uFilterMatrix:mat3x3<f32>,
  uMaskClamp:vec4<f32>,
  uAlpha:f32,
  uInverse:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> filterUniforms : MaskUniforms;
@group(1) @binding(1) var uMaskTexture: texture_2d<f32>;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
    @location(1) filterUv : vec2<f32>,
};

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);
}

fn getFilterCoord(aPosition:vec2<f32> ) -> vec2<f32>
{
  return ( filterUniforms.uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}

@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>,
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition),
   getFilterCoord(aPosition)
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @location(1) filterUv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

    var maskClamp = filterUniforms.uMaskClamp;
    var uAlpha = filterUniforms.uAlpha;

    var clip = step(3.5,
      step(maskClamp.x, filterUv.x) +
      step(maskClamp.y, filterUv.y) +
      step(filterUv.x, maskClamp.z) +
      step(filterUv.y, maskClamp.w));

    var mask = textureSample(uMaskTexture, uSampler, filterUv);
    var source = textureSample(uTexture, uSampler, uv);
    var alphaMul = 1.0 - uAlpha * (1.0 - mask.a);

    var a: f32 = alphaMul * mask.r * uAlpha * clip;

    if (filterUniforms.uInverse == 1.0) {
        a = 1.0 - a;
    }

    return source * a;
}
`;class MaskFilter extends Filter{constructor(A){const{sprite:_,...I}=A,B=new TextureMatrix(_.texture),T=new UniformGroup({uFilterMatrix:{value:new Matrix,type:"mat3x3<f32>"},uMaskClamp:{value:B.uClampFrame,type:"vec4<f32>"},uAlpha:{value:1,type:"f32"},uInverse:{value:A.inverse?1:0,type:"f32"}}),R=GpuProgram.from({vertex:{source,entryPoint:"mainVertex"},fragment:{source,entryPoint:"mainFragment"}}),P=GlProgram.from({vertex:vertex$2,fragment:fragment$2,name:"mask-filter"});super({...I,gpuProgram:R,glProgram:P,clipToViewport:!1,resources:{filterUniforms:T,uMaskTexture:_.texture.source}}),this.sprite=_,this._textureMatrix=B}set inverse(A){this.resources.filterUniforms.uniforms.uInverse=A?1:0}get inverse(){return this.resources.filterUniforms.uniforms.uInverse===1}apply(A,_,I,B){this._textureMatrix.texture=this.sprite.texture,A.calculateSpriteMatrix(this.resources.filterUniforms.uniforms.uFilterMatrix,this.sprite).prepend(this._textureMatrix.mapCoord),this.resources.uMaskTexture=this.sprite.texture.source,A.applyFilter(this,_,I,B)}}var hsl$1=`fn getLuminosity(c: vec3<f32>) -> f32 {
  return 0.3 * c.r + 0.59 * c.g + 0.11 * c.b;
}

fn setLuminosity(c: vec3<f32>, lum: f32) -> vec3<f32> {
  let d: f32 = lum - getLuminosity(c);
  let newColor: vec3<f32> = c.rgb + vec3<f32>(d, d, d);

  // clip back into legal range
  let newLum: f32 = getLuminosity(newColor);
  let cMin: f32 = min(newColor.r, min(newColor.g, newColor.b));
  let cMax: f32 = max(newColor.r, max(newColor.g, newColor.b));

  let t1: f32 = newLum / (newLum - cMin);
  let t2: f32 = (1.0 - newLum) / (cMax - newLum);

  let finalColor = mix(vec3<f32>(newLum, newLum, newLum), newColor, select(select(1.0, t2, cMax > 1.0), t1, cMin < 0.0));

  return finalColor;
}

fn getSaturation(c: vec3<f32>) -> f32 {
  return max(c.r, max(c.g, c.b)) - min(c.r, min(c.g, c.b));
}

// Set saturation if color components are sorted in ascending order.
fn setSaturationMinMidMax(cSorted: vec3<f32>, s: f32) -> vec3<f32> {
  var result: vec3<f32>;
  if (cSorted.z > cSorted.x) {
    let newY = (((cSorted.y - cSorted.x) * s) / (cSorted.z - cSorted.x));
    result = vec3<f32>(0.0, newY, s);
  } else {
    result = vec3<f32>(0.0, 0.0, 0.0);
  }
  return vec3<f32>(result.x, result.y, result.z);
}

fn setSaturation(c: vec3<f32>, s: f32) -> vec3<f32> {
    var result: vec3<f32> = c;

    if (c.r <= c.g && c.r <= c.b) {
        if (c.g <= c.b) {
            result = setSaturationMinMidMax(result, s);
        } else {
            var temp: vec3<f32> = vec3<f32>(result.r, result.b, result.g);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.r, temp.b, temp.g);
        }
    } else if (c.g <= c.r && c.g <= c.b) {
        if (c.r <= c.b) {
            var temp: vec3<f32> = vec3<f32>(result.g, result.r, result.b);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.g, temp.r, temp.b);
        } else {
            var temp: vec3<f32> = vec3<f32>(result.g, result.b, result.r);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.g, temp.b, temp.r);
        }
    } else {
        if (c.r <= c.g) {
            var temp: vec3<f32> = vec3<f32>(result.b, result.r, result.g);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.b, temp.r, temp.g);
        } else {
            var temp: vec3<f32> = vec3<f32>(result.b, result.g, result.r);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.b, temp.g, temp.r);
        }
    }

    return result;
}`;function pointInTriangle(E,A,_,I,B,T,R,P){const D=R-_,F=P-I,L=B-_,U=T-I,V=E-_,K=A-I,J=D*D+F*F,ee=D*L+F*U,ie=D*V+F*K,ne=L*L+U*U,ce=L*V+U*K,fe=1/(J*ne-ee*ee),de=(ne*ie-ee*ce)*fe,pe=(J*ce-ee*ie)*fe;return de>=0&&pe>=0&&de+pe<1}class Triangle{constructor(A=0,_=0,I=0,B=0,T=0,R=0){this.type="triangle",this.x=A,this.y=_,this.x2=I,this.y2=B,this.x3=T,this.y3=R}contains(A,_){const I=(this.x-this.x3)*(_-this.y3)-(this.y-this.y3)*(A-this.x3),B=(this.x2-this.x)*(_-this.y)-(this.y2-this.y)*(A-this.x);if(I<0!=B<0&&I!==0&&B!==0)return!1;const T=(this.x3-this.x2)*(_-this.y2)-(this.y3-this.y2)*(A-this.x2);return T===0||T<0==I+B<=0}strokeContains(A,_,I,B=.5){const T=I/2,R=T*T,{x:P,x2:D,x3:F,y:L,y2:U,y3:V}=this;return squaredDistanceToLineSegment(A,_,P,L,D,V)<=R||squaredDistanceToLineSegment(A,_,D,U,F,V)<=R||squaredDistanceToLineSegment(A,_,F,V,P,L)<=R}clone(){return new Triangle(this.x,this.y,this.x2,this.y2,this.x3,this.y3)}copyFrom(A){return this.x=A.x,this.y=A.y,this.x2=A.x2,this.y2=A.y2,this.x3=A.x3,this.y3=A.y3,this}copyTo(A){return A.copyFrom(this),A}getBounds(A){A||(A=new Rectangle);const _=Math.min(this.x,this.x2,this.x3),I=Math.max(this.x,this.x2,this.x3),B=Math.min(this.y,this.y2,this.y3),T=Math.max(this.y,this.y2,this.y3);return A.x=_,A.y=B,A.width=I-_,A.height=T-B,A}}const _PrepareBase=class dn{constructor(A){this._tick=()=>{this.timeout=setTimeout(this._processQueue,0)},this._processQueue=()=>{const{queue:_}=this;let I=0;for(;_.length&&I<dn.uploadsPerFrame;){const B=_.shift();this.uploadQueueItem(B),I++}_.length?Ticker$1.system.addOnce(this._tick,this,UPDATE_PRIORITY.UTILITY):this._resolve()},this.renderer=A,this.queue=[],this.resolves=[]}getQueue(){return[...this.queue]}add(A){const _=Array.isArray(A)?A:[A];for(const I of _)I instanceof Container?this._addContainer(I):this.resolveQueueItem(I,this.queue);return this}_addContainer(A){this.resolveQueueItem(A,this.queue);for(const _ of A.children)this._addContainer(_)}upload(A){return A&&this.add(A),new Promise(_=>{this.queue.length?(this.resolves.push(_),this.dedupeQueue(),Ticker$1.system.addOnce(this._tick,this,UPDATE_PRIORITY.UTILITY)):_()})}dedupeQueue(){const A=Object.create(null);let _=0;for(let I=0;I<this.queue.length;I++){const B=this.queue[I];A[B.uid]||(A[B.uid]=!0,this.queue[_++]=B)}this.queue.length=_}_resolve(){const{resolves:A}=this,_=A.slice(0);A.length=0;for(const I of _)I()}};_PrepareBase.uploadsPerFrame=4;let PrepareBase=_PrepareBase,Graphics$1=class Fi extends ViewContainer{constructor(A){A instanceof GraphicsContext&&(A={context:A});const{context:_,roundPixels:I,...B}=A||{};super({label:"Graphics",...B}),this.renderPipeId="graphics",_?this._context=_:this._context=this._ownedContext=new GraphicsContext,this._context.on("update",this.onViewUpdate,this),this.didViewUpdate=!0,this.allowChildren=!1,this.roundPixels=I??!1}set context(A){A!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=A,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(A){return this._context.containsPoint(A)}destroy(A){this._ownedContext&&!A?this._ownedContext.destroy(A):(A===!0||A?.context===!0)&&this._context.destroy(A),this._ownedContext=null,this._context=null,super.destroy(A)}_callContextMethod(A,_){return this.context[A](..._),this}setFillStyle(...A){return this._callContextMethod("setFillStyle",A)}setStrokeStyle(...A){return this._callContextMethod("setStrokeStyle",A)}fill(...A){return this._callContextMethod("fill",A)}stroke(...A){return this._callContextMethod("stroke",A)}texture(...A){return this._callContextMethod("texture",A)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...A){return this._callContextMethod("arc",A)}arcTo(...A){return this._callContextMethod("arcTo",A)}arcToSvg(...A){return this._callContextMethod("arcToSvg",A)}bezierCurveTo(...A){return this._callContextMethod("bezierCurveTo",A)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...A){return this._callContextMethod("ellipse",A)}circle(...A){return this._callContextMethod("circle",A)}path(...A){return this._callContextMethod("path",A)}lineTo(...A){return this._callContextMethod("lineTo",A)}moveTo(...A){return this._callContextMethod("moveTo",A)}quadraticCurveTo(...A){return this._callContextMethod("quadraticCurveTo",A)}rect(...A){return this._callContextMethod("rect",A)}roundRect(...A){return this._callContextMethod("roundRect",A)}poly(...A){return this._callContextMethod("poly",A)}regularPoly(...A){return this._callContextMethod("regularPoly",A)}roundPoly(...A){return this._callContextMethod("roundPoly",A)}roundShape(...A){return this._callContextMethod("roundShape",A)}filletRect(...A){return this._callContextMethod("filletRect",A)}chamferRect(...A){return this._callContextMethod("chamferRect",A)}star(...A){return this._callContextMethod("star",A)}svg(...A){return this._callContextMethod("svg",A)}restore(...A){return this._callContextMethod("restore",A)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...A){return this._callContextMethod("rotate",A)}scaleTransform(...A){return this._callContextMethod("scale",A)}setTransform(...A){return this._callContextMethod("setTransform",A)}transform(...A){return this._callContextMethod("transform",A)}translateTransform(...A){return this._callContextMethod("translate",A)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(A){this._context.fillStyle=A}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(A){this._context.strokeStyle=A}clone(A=!1){return A?new Fi(this._context.clone()):(this._ownedContext=null,new Fi(this._context))}lineStyle(A,_,I){deprecation(v8_0_0,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const B={};return A&&(B.width=A),_&&(B.color=_),I&&(B.alpha=I),this.context.strokeStyle=B,this}beginFill(A,_){deprecation(v8_0_0,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const I={};return A!==void 0&&(I.color=A),_!==void 0&&(I.alpha=_),this.context.fillStyle=I,this}endFill(){deprecation(v8_0_0,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const A=this.context.strokeStyle;return(A.width!==GraphicsContext.defaultStrokeStyle.width||A.color!==GraphicsContext.defaultStrokeStyle.color||A.alpha!==GraphicsContext.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...A){return deprecation(v8_0_0,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",A)}drawEllipse(...A){return deprecation(v8_0_0,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",A)}drawPolygon(...A){return deprecation(v8_0_0,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",A)}drawRect(...A){return deprecation(v8_0_0,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",A)}drawRoundedRect(...A){return deprecation(v8_0_0,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",A)}drawStar(...A){return deprecation(v8_0_0,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",A)}};const _MeshGeometry=class pn extends Geometry{constructor(...A){let _=A[0]??{};_ instanceof Float32Array&&(deprecation(v8_0_0,"use new MeshGeometry({ positions, uvs, indices }) instead"),_={positions:_,uvs:A[1],indices:A[2]}),_={...pn.defaultOptions,..._};const I=_.positions||new Float32Array([0,0,1,0,1,1,0,1]);let B=_.uvs;B||(_.positions?B=new Float32Array(I.length):B=new Float32Array([0,0,1,0,1,1,0,1]));const T=_.indices||new Uint32Array([0,1,2,0,2,3]),R=_.shrinkBuffersToFit,P=new Buffer({data:I,label:"attribute-mesh-positions",shrinkToFit:R,usage:BufferUsage.VERTEX|BufferUsage.COPY_DST}),D=new Buffer({data:B,label:"attribute-mesh-uvs",shrinkToFit:R,usage:BufferUsage.VERTEX|BufferUsage.COPY_DST}),F=new Buffer({data:T,label:"index-mesh-buffer",shrinkToFit:R,usage:BufferUsage.INDEX|BufferUsage.COPY_DST});super({attributes:{aPosition:{buffer:P,format:"float32x2",stride:8,offset:0},aUV:{buffer:D,format:"float32x2",stride:8,offset:0}},indexBuffer:F,topology:_.topology}),this.batchMode="auto"}get positions(){return this.attributes.aPosition.buffer.data}set positions(A){this.attributes.aPosition.buffer.data=A}get uvs(){return this.attributes.aUV.buffer.data}set uvs(A){this.attributes.aUV.buffer.data=A}get indices(){return this.indexBuffer.data}set indices(A){this.indexBuffer.data=A}};_MeshGeometry.defaultOptions={topology:"triangle-list",shrinkBuffersToFit:!1};let MeshGeometry=_MeshGeometry,Mesh$1=class extends ViewContainer{constructor(...A){let _=A[0];_ instanceof Geometry&&(deprecation(v8_0_0,"Mesh: use new Mesh({ geometry, shader }) instead"),_={geometry:_,shader:A[1]},A[3]&&(deprecation(v8_0_0,"Mesh: drawMode argument has been removed, use geometry.topology instead"),_.geometry.topology=A[3]));const{geometry:I,shader:B,texture:T,roundPixels:R,state:P,...D}=_;super({label:"Mesh",...D}),this.renderPipeId="mesh",this._shader=null,this.allowChildren=!1,this.shader=B??null,this.texture=T??B?.texture??Texture.WHITE,this.state=P??State$1.for2d(),this._geometry=I,this._geometry.on("update",this.onViewUpdate,this),this.roundPixels=R??!1}get material(){return deprecation(v8_0_0,"mesh.material property has been removed, use mesh.shader instead"),this._shader}set shader(A){this._shader!==A&&(this._shader=A,this.onViewUpdate())}get shader(){return this._shader}set geometry(A){this._geometry!==A&&(this._geometry?.off("update",this.onViewUpdate,this),A.on("update",this.onViewUpdate,this),this._geometry=A,this.onViewUpdate())}get geometry(){return this._geometry}set texture(A){A||(A=Texture.EMPTY);const _=this._texture;_!==A&&(_&&_.dynamic&&_.off("update",this.onViewUpdate,this),A.dynamic&&A.on("update",this.onViewUpdate,this),this.shader&&(this.shader.texture=A),this._texture=A,this.onViewUpdate())}get texture(){return this._texture}get batched(){return this._shader||(this.state.data&12)!==0?!1:this._geometry instanceof MeshGeometry?this._geometry.batchMode==="auto"?this._geometry.positions.length/2<=100:this._geometry.batchMode==="batch":!1}get bounds(){return this._geometry.bounds}updateBounds(){this._bounds=this._geometry.bounds}containsPoint(A){const{x:_,y:I}=A;if(!this.bounds.containsPoint(_,I))return!1;const B=this.geometry.getBuffer("aPosition").data,T=this.geometry.topology==="triangle-strip"?3:1;if(this.geometry.getIndex()){const R=this.geometry.getIndex().data,P=R.length;for(let D=0;D+2<P;D+=T){const F=R[D]*2,L=R[D+1]*2,U=R[D+2]*2;if(pointInTriangle(_,I,B[F],B[F+1],B[L],B[L+1],B[U],B[U+1]))return!0}}else{const R=B.length/2;for(let P=0;P+2<R;P+=T){const D=P*2,F=(P+1)*2,L=(P+2)*2;if(pointInTriangle(_,I,B[D],B[D+1],B[F],B[F+1],B[L],B[L+1]))return!0}}return!1}destroy(A){if(super.destroy(A),typeof A=="boolean"?A:A?.texture){const I=typeof A=="boolean"?A:A?.textureSource;this._texture.destroy(I)}this._geometry?.off("update",this.onViewUpdate,this),this._texture=null,this._geometry=null,this._shader=null,this._gpuData=null}},AnimatedSprite$1=class Ni extends Sprite$1{constructor(...A){let _=A[0];Array.isArray(A[0])&&(_={textures:A[0],autoUpdate:A[1]});const{animationSpeed:I=1,autoPlay:B=!1,autoUpdate:T=!0,loop:R=!0,onComplete:P=null,onFrameChange:D=null,onLoop:F=null,textures:L,updateAnchor:U=!1,...V}=_,[K]=L;super({...V,texture:K instanceof Texture?K:K.texture}),this._textures=null,this._durations=null,this._autoUpdate=T,this._isConnectedToTicker=!1,this.animationSpeed=I,this.loop=R,this.updateAnchor=U,this.onComplete=P,this.onFrameChange=D,this.onLoop=F,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=L,B&&this.play()}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Ticker$1.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Ticker$1.shared.add(this.update,this,UPDATE_PRIORITY.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(A){this.stop(),this.currentFrame=A}gotoAndPlay(A){this.currentFrame=A,this.play()}update(A){if(!this._playing)return;const _=A.deltaTime,I=this.animationSpeed*_,B=this.currentFrame;if(this._durations!==null){let T=this._currentTime%1*this._durations[this.currentFrame];for(T+=I/60*1e3;T<0;)this._currentTime--,T+=this._durations[this.currentFrame];const R=Math.sign(this.animationSpeed*_);for(this._currentTime=Math.floor(this._currentTime);T>=this._durations[this.currentFrame];)T-=this._durations[this.currentFrame]*R,this._currentTime+=R;this._currentTime+=T/this._durations[this.currentFrame]}else this._currentTime+=I;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):B!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<B||this.animationSpeed<0&&this.currentFrame>B)&&this.onLoop(),this._updateTexture())}_updateTexture(){const A=this.currentFrame;this._previousFrame!==A&&(this._previousFrame=A,this.texture=this._textures[A],this.updateAnchor&&this.texture.defaultAnchor&&this.anchor.copyFrom(this.texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(A=!1){if(typeof A=="boolean"?A:A?.texture){const I=typeof A=="boolean"?A:A?.textureSource;this._textures.forEach(B=>{this.texture!==B&&B.destroy(I)})}this._textures=[],this._durations=null,this.stop(),super.destroy(A),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(A){const _=[];for(let I=0;I<A.length;++I)_.push(Texture.from(A[I]));return new Ni(_)}static fromImages(A){const _=[];for(let I=0;I<A.length;++I)_.push(Texture.from(A[I]));return new Ni(_)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(A){if(A[0]instanceof Texture)this._textures=A,this._durations=null;else{this._textures=[],this._durations=[];for(let _=0;_<A.length;_++)this._textures.push(A[_].texture),this._durations.push(A[_].time)}this._previousFrame=null,this.gotoAndStop(0),this._updateTexture()}get currentFrame(){let A=Math.floor(this._currentTime)%this._textures.length;return A<0&&(A+=this._textures.length),A}set currentFrame(A){if(A<0||A>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${A}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const _=this.currentFrame;this._currentTime=A,_!==this.currentFrame&&this._updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(A){A!==this._autoUpdate&&(this._autoUpdate=A,!this._autoUpdate&&this._isConnectedToTicker?(Ticker$1.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Ticker$1.shared.add(this.update,this),this._isConnectedToTicker=!0))}},Transform$1=class{constructor({matrix:A,observer:_}={}){this.dirty=!0,this._matrix=A??new Matrix,this.observer=_,this.position=new ObservablePoint(this,0,0),this.scale=new ObservablePoint(this,1,1),this.pivot=new ObservablePoint(this,0,0),this.skew=new ObservablePoint(this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1}get matrix(){const A=this._matrix;return this.dirty&&(A.a=this._cx*this.scale.x,A.b=this._sx*this.scale.x,A.c=this._cy*this.scale.y,A.d=this._sy*this.scale.y,A.tx=this.position.x-(this.pivot.x*A.a+this.pivot.y*A.c),A.ty=this.position.y-(this.pivot.x*A.b+this.pivot.y*A.d),this.dirty=!1),A}_onUpdate(A){this.dirty=!0,A===this.skew&&this.updateSkew(),this.observer?._onUpdate(this)}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this.dirty=!0}toString(){return`[pixi.js/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}setFromMatrix(A){A.decompose(this),this.dirty=!0}get rotation(){return this._rotation}set rotation(A){this._rotation!==A&&(this._rotation=A,this._onUpdate(this.skew))}};const _TilingSprite=class Ci extends ViewContainer{constructor(...A){let _=A[0]||{};_ instanceof Texture&&(_={texture:_}),A.length>1&&(deprecation(v8_0_0,"use new TilingSprite({ texture, width:100, height:100 }) instead"),_.width=A[1],_.height=A[2]),_={...Ci.defaultOptions,..._};const{texture:I,anchor:B,tilePosition:T,tileScale:R,tileRotation:P,width:D,height:F,applyAnchorToTexture:L,roundPixels:U,...V}=_??{};super({label:"TilingSprite",...V}),this.renderPipeId="tilingSprite",this.batched=!0,this.allowChildren=!1,this._anchor=new ObservablePoint({_onUpdate:()=>{this.onViewUpdate()}}),this.applyAnchorToTexture=L,this.texture=I,this._width=D??I.width,this._height=F??I.height,this._tileTransform=new Transform$1({observer:{_onUpdate:()=>this.onViewUpdate()}}),B&&(this.anchor=B),this.tilePosition=T,this.tileScale=R,this.tileRotation=P,this.roundPixels=U??!1}static from(A,_={}){return typeof A=="string"?new Ci({texture:Cache.get(A),..._}):new Ci({texture:A,..._})}get uvRespectAnchor(){return warn$1("uvRespectAnchor is deprecated, please use applyAnchorToTexture instead"),this.applyAnchorToTexture}set uvRespectAnchor(A){warn$1("uvRespectAnchor is deprecated, please use applyAnchorToTexture instead"),this.applyAnchorToTexture=A}get clampMargin(){return this._texture.textureMatrix.clampMargin}set clampMargin(A){this._texture.textureMatrix.clampMargin=A}get anchor(){return this._anchor}set anchor(A){typeof A=="number"?this._anchor.set(A):this._anchor.copyFrom(A)}get tilePosition(){return this._tileTransform.position}set tilePosition(A){this._tileTransform.position.copyFrom(A)}get tileScale(){return this._tileTransform.scale}set tileScale(A){typeof A=="number"?this._tileTransform.scale.set(A):this._tileTransform.scale.copyFrom(A)}set tileRotation(A){this._tileTransform.rotation=A}get tileRotation(){return this._tileTransform.rotation}get tileTransform(){return this._tileTransform}set texture(A){A||(A=Texture.EMPTY);const _=this._texture;_!==A&&(_&&_.dynamic&&_.off("update",this.onViewUpdate,this),A.dynamic&&A.on("update",this.onViewUpdate,this),this._texture=A,this.onViewUpdate())}get texture(){return this._texture}set width(A){this._width=A,this.onViewUpdate()}get width(){return this._width}set height(A){this._height=A,this.onViewUpdate()}get height(){return this._height}setSize(A,_){typeof A=="object"&&(_=A.height??A.width,A=A.width),this._width=A,this._height=_??A,this.onViewUpdate()}getSize(A){return A||(A={}),A.width=this._width,A.height=this._height,A}updateBounds(){const A=this._bounds,_=this._anchor,I=this._width,B=this._height;A.minX=-_._x*I,A.maxX=A.minX+I,A.minY=-_._y*B,A.maxY=A.minY+B}containsPoint(A){const _=this._width,I=this._height,B=-_*this._anchor._x;let T=0;return A.x>=B&&A.x<=B+_&&(T=-I*this._anchor._y,A.y>=T&&A.y<=T+I)}destroy(A=!1){if(super.destroy(A),this._anchor=null,this._tileTransform=null,this._bounds=null,typeof A=="boolean"?A:A?.texture){const I=typeof A=="boolean"?A:A?.textureSource;this._texture.destroy(I)}this._texture=null}};_TilingSprite.defaultOptions={texture:Texture.EMPTY,anchor:{x:0,y:0},tilePosition:{x:0,y:0},tileScale:{x:1,y:1},tileRotation:0,applyAnchorToTexture:!1};let TilingSprite$1=_TilingSprite;class AbstractText extends ViewContainer{constructor(A,_){const{text:I,resolution:B,style:T,anchor:R,width:P,height:D,roundPixels:F,...L}=A;super({...L}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=_,this.text=I??"",this.style=T,this.resolution=B??null,this.allowChildren=!1,this._anchor=new ObservablePoint({_onUpdate:()=>{this.onViewUpdate()}}),R&&(this.anchor=R),this.roundPixels=F??!1,P!==void 0&&(this.width=P),D!==void 0&&(this.height=D)}get anchor(){return this._anchor}set anchor(A){typeof A=="number"?this._anchor.set(A):this._anchor.copyFrom(A)}set text(A){A=A.toString(),this._text!==A&&(this._text=A,this.onViewUpdate())}get text(){return this._text}set resolution(A){this._autoResolution=A===null,this._resolution=A,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(A){A||(A={}),this._style?.off("update",this.onViewUpdate,this),A instanceof this._styleClass?this._style=A:this._style=new this._styleClass(A),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(A){this._setWidth(A,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(A){this._setHeight(A,this.bounds.height)}getSize(A){return A||(A={}),A.width=Math.abs(this.scale.x)*this.bounds.width,A.height=Math.abs(this.scale.y)*this.bounds.height,A}setSize(A,_){typeof A=="object"?(_=A.height??A.width,A=A.width):_??(_=A),A!==void 0&&this._setWidth(A,this.bounds.width),_!==void 0&&this._setHeight(_,this.bounds.height)}containsPoint(A){const _=this.bounds.width,I=this.bounds.height,B=-_*this.anchor.x;let T=0;return A.x>=B&&A.x<=B+_&&(T=-I*this.anchor.y,A.y>=T&&A.y<=T+I)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}destroy(A=!1){super.destroy(A),this.owner=null,this._bounds=null,this._anchor=null,(typeof A=="boolean"?A:A?.style)&&this._style.destroy(A),this._style=null,this._text=null}}function ensureTextOptions(E,A){let _=E[0]??{};return(typeof _=="string"||E[1])&&(deprecation(v8_0_0,`use new ${A}({ text: "hi!", style }) instead`),_={text:_,style:E[1]}),_}let _internalCanvas=null,_internalContext=null;function ensureInternalCanvas(E,A){_internalCanvas||(_internalCanvas=DOMAdapter.get().createCanvas(256,128),_internalContext=_internalCanvas.getContext("2d",{willReadFrequently:!0}),_internalContext.globalCompositeOperation="copy",_internalContext.globalAlpha=1),(_internalCanvas.width<E||_internalCanvas.height<A)&&(_internalCanvas.width=nextPow2(E),_internalCanvas.height=nextPow2(A))}function checkRow(E,A,_){for(let I=0,B=4*_*A;I<A;++I,B+=4)if(E[B+3]!==0)return!1;return!0}function checkColumn(E,A,_,I,B){const T=4*A;for(let R=I,P=I*T+4*_;R<=B;++R,P+=T)if(E[P+3]!==0)return!1;return!0}function getCanvasBoundingBox(...E){let A=E[0];A.canvas||(A={canvas:E[0],resolution:E[1]});const{canvas:_}=A,I=Math.min(A.resolution??1,1),B=A.width??_.width,T=A.height??_.height;let R=A.output;if(ensureInternalCanvas(B,T),!_internalContext)throw new TypeError("Failed to get canvas 2D context");_internalContext.drawImage(_,0,0,B,T,0,0,B*I,T*I);const D=_internalContext.getImageData(0,0,B,T).data;let F=0,L=0,U=B-1,V=T-1;for(;L<T&&checkRow(D,B,L);)++L;if(L===T)return Rectangle.EMPTY;for(;checkRow(D,B,V);)--V;for(;checkColumn(D,B,F,L,V);)++F;for(;checkColumn(D,B,U,L,V);)--U;return++U,++V,_internalContext.globalCompositeOperation="source-over",_internalContext.strokeRect(F,L,U-F,V-L),_internalContext.globalCompositeOperation="copy",R??(R=new Rectangle),R.set(F/I,L/I,(U-F)/I,(V-L)/I),R}const tempRect$1=new Rectangle;class CanvasTextGeneratorClass{getCanvasAndContext(A){const{text:_,style:I,resolution:B=1}=A,T=I._getFinalPadding(),R=CanvasTextMetrics.measureText(_||" ",I),P=Math.ceil(Math.ceil(Math.max(1,R.width)+T*2)*B),D=Math.ceil(Math.ceil(Math.max(1,R.height)+T*2)*B),F=CanvasPool.getOptimalCanvasAndContext(P,D);this._renderTextToCanvas(_,I,T,B,F);const L=I.trim?getCanvasBoundingBox({canvas:F.canvas,width:P,height:D,resolution:1,output:tempRect$1}):tempRect$1.set(0,0,P,D);return{canvasAndContext:F,frame:L}}returnCanvasAndContext(A){CanvasPool.returnCanvasAndContext(A)}_renderTextToCanvas(A,_,I,B,T){const{canvas:R,context:P}=T,D=fontStringFromTextStyle(_),F=CanvasTextMetrics.measureText(A||" ",_),L=F.lines,U=F.lineHeight,V=F.lineWidths,K=F.maxLineWidth,J=F.fontProperties,ee=R.height;if(P.resetTransform(),P.scale(B,B),P.textBaseline=_.textBaseline,_._stroke?.width){const fe=_._stroke;P.lineWidth=fe.width,P.miterLimit=fe.miterLimit,P.lineJoin=fe.join,P.lineCap=fe.cap}P.font=D;let ie,ne;const ce=_.dropShadow?2:1;for(let fe=0;fe<ce;++fe){const de=_.dropShadow&&fe===0,pe=de?Math.ceil(Math.max(1,ee)+I*2):0,ve=pe*B;if(de){P.fillStyle="black",P.strokeStyle="black";const be=_.dropShadow,Te=be.color,ue=be.alpha;P.shadowColor=Color$1.shared.setValue(Te).setAlpha(ue).toRgbaString();const O=be.blur*B,z=be.distance*B;P.shadowBlur=O,P.shadowOffsetX=Math.cos(be.angle)*z,P.shadowOffsetY=Math.sin(be.angle)*z+ve}else{if(P.fillStyle=_._fill?getCanvasFillStyle(_._fill,P,F,I*2):null,_._stroke?.width){const be=_._stroke.width*.5+I*2;P.strokeStyle=getCanvasFillStyle(_._stroke,P,F,be)}P.shadowColor="black"}let ye=(U-J.fontSize)/2;U-J.fontSize<0&&(ye=0);const _e=_._stroke?.width??0;for(let be=0;be<L.length;be++)ie=_e/2,ne=_e/2+be*U+J.ascent+ye,_.align==="right"?ie+=K-V[be]:_.align==="center"&&(ie+=(K-V[be])/2),_._stroke?.width&&this._drawLetterSpacing(L[be],_,T,ie+I,ne+I-pe,!0),_._fill!==void 0&&this._drawLetterSpacing(L[be],_,T,ie+I,ne+I-pe)}}_drawLetterSpacing(A,_,I,B,T,R=!1){const{context:P}=I,D=_.letterSpacing;let F=!1;if(CanvasTextMetrics.experimentalLetterSpacingSupported&&(CanvasTextMetrics.experimentalLetterSpacing?(P.letterSpacing=`${D}px`,P.textLetterSpacing=`${D}px`,F=!0):(P.letterSpacing="0px",P.textLetterSpacing="0px")),D===0||F){R?P.strokeText(A,B,T):P.fillText(A,B,T);return}let L=B;const U=CanvasTextMetrics.graphemeSegmenter(A);let V=P.measureText(A).width,K=0;for(let J=0;J<U.length;++J){const ee=U[J];R?P.strokeText(ee,L,T):P.fillText(ee,L,T);let ie="";for(let ne=J+1;ne<U.length;++ne)ie+=U[ne];K=P.measureText(ie).width,L+=V-K+D,V=K}}}const CanvasTextGenerator=new CanvasTextGeneratorClass;let Text$1=class extends AbstractText{constructor(...A){const _=ensureTextOptions(A,"Text");super(_,TextStyle),this.renderPipeId="text",_.textureStyle&&(this.textureStyle=_.textureStyle instanceof TextureStyle?_.textureStyle:new TextureStyle(_.textureStyle))}updateBounds(){const A=this._bounds,_=this._anchor;let I=0,B=0;if(this._style.trim){const{frame:T,canvasAndContext:R}=CanvasTextGenerator.getCanvasAndContext({text:this.text,style:this._style,resolution:1});CanvasTextGenerator.returnCanvasAndContext(R),I=T.width,B=T.height}else{const T=CanvasTextMetrics.measureText(this._text,this._style);I=T.width,B=T.height}A.minX=-_._x*I,A.maxX=A.minX+I,A.minY=-_._y*B,A.maxY=A.minY+B}};class PrepareQueue extends PrepareBase{resolveQueueItem(A,_){return A instanceof Container?this.resolveContainerQueueItem(A,_):A instanceof TextureSource||A instanceof Texture?_.push(A.source):A instanceof GraphicsContext&&_.push(A),null}resolveContainerQueueItem(A,_){A instanceof Sprite$1||A instanceof TilingSprite$1||A instanceof Mesh$1?_.push(A.texture.source):A instanceof Text$1?_.push(A):A instanceof Graphics$1?_.push(A.context):A instanceof AnimatedSprite$1&&A.textures.forEach(I=>{I.source?_.push(I.source):_.push(I.texture.source)})}resolveGraphicsContextQueueItem(A){this.renderer.graphicsContext.getGpuContext(A);const{instructions:_}=A;for(const I of _)if(I.action==="texture"){const{image:B}=I.data;return B.source}else if(I.action==="fill"){const{texture:B}=I.data.style;return B.source}return null}}let BitmapText$1=class extends AbstractText{constructor(...A){var _;const I=ensureTextOptions(A,"BitmapText");I.style??(I.style=I.style||{}),(_=I.style).fill??(_.fill=16777215),super(I,TextStyle),this.renderPipeId="bitmapText"}updateBounds(){const A=this._bounds,_=this._anchor,I=BitmapFontManager.measureText(this.text,this._style),B=I.scale,T=I.offsetY*B;let R=I.width*B,P=I.height*B;const D=this._style._stroke;D&&(R+=D.width,P+=D.width),A.minX=-_._x*R,A.maxX=A.minX+R,A.minY=-_._y*(P+T),A.maxY=A.minY+P}set resolution(A){A!==null&&warn$1("[BitmapText] dynamically updating the resolution is not supported. Resolution should be managed by the BitmapFont.")}get resolution(){return this._resolution}};function textStyleToCSS(E){const A=E._stroke,_=E._fill,B=[`div { ${[`color: ${Color$1.shared.setValue(_.color).toHex()}`,`font-size: ${E.fontSize}px`,`font-family: ${E.fontFamily}`,`font-weight: ${E.fontWeight}`,`font-style: ${E.fontStyle}`,`font-variant: ${E.fontVariant}`,`letter-spacing: ${E.letterSpacing}px`,`text-align: ${E.align}`,`padding: ${E.padding}px`,`white-space: ${E.whiteSpace==="pre"&&E.wordWrap?"pre-wrap":E.whiteSpace}`,...E.lineHeight?[`line-height: ${E.lineHeight}px`]:[],...E.wordWrap?[`word-wrap: ${E.breakWords?"break-all":"break-word"}`,`max-width: ${E.wordWrapWidth}px`]:[],...A?[strokeToCSS(A)]:[],...E.dropShadow?[dropShadowToCSS(E.dropShadow)]:[],...E.cssOverrides].join(";")} }`];return tagStyleToCSS(E.tagStyles,B),B.join(" ")}function dropShadowToCSS(E){const A=Color$1.shared.setValue(E.color).setAlpha(E.alpha).toHexa(),_=Math.round(Math.cos(E.angle)*E.distance),I=Math.round(Math.sin(E.angle)*E.distance),B=`${_}px ${I}px`;return E.blur>0?`text-shadow: ${B} ${E.blur}px ${A}`:`text-shadow: ${B} ${A}`}function strokeToCSS(E){return[`-webkit-text-stroke-width: ${E.width}px`,`-webkit-text-stroke-color: ${Color$1.shared.setValue(E.color).toHex()}`,`text-stroke-width: ${E.width}px`,`text-stroke-color: ${Color$1.shared.setValue(E.color).toHex()}`,"paint-order: stroke"].join(";")}const templates={fontSize:"font-size: {{VALUE}}px",fontFamily:"font-family: {{VALUE}}",fontWeight:"font-weight: {{VALUE}}",fontStyle:"font-style: {{VALUE}}",fontVariant:"font-variant: {{VALUE}}",letterSpacing:"letter-spacing: {{VALUE}}px",align:"text-align: {{VALUE}}",padding:"padding: {{VALUE}}px",whiteSpace:"white-space: {{VALUE}}",lineHeight:"line-height: {{VALUE}}px",wordWrapWidth:"max-width: {{VALUE}}px"},transform={fill:E=>`color: ${Color$1.shared.setValue(E).toHex()}`,breakWords:E=>`word-wrap: ${E?"break-all":"break-word"}`,stroke:strokeToCSS,dropShadow:dropShadowToCSS};function tagStyleToCSS(E,A){for(const _ in E){const I=E[_],B=[];for(const T in I)transform[T]?B.push(transform[T](I[T])):templates[T]&&B.push(templates[T].replace("{{VALUE}}",I[T]));A.push(`${_} { ${B.join(";")} }`)}}class HTMLTextStyle extends TextStyle{constructor(A={}){super(A),this._cssOverrides=[],this.cssOverrides=A.cssOverrides??[],this.tagStyles=A.tagStyles??{}}set cssOverrides(A){this._cssOverrides=A instanceof Array?A:[A],this.update()}get cssOverrides(){return this._cssOverrides}update(){this._cssStyle=null,super.update()}clone(){return new HTMLTextStyle({align:this.align,breakWords:this.breakWords,dropShadow:this.dropShadow?{...this.dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,cssOverrides:this.cssOverrides,tagStyles:{...this.tagStyles}})}get cssStyle(){return this._cssStyle||(this._cssStyle=textStyleToCSS(this)),this._cssStyle}addOverride(...A){const _=A.filter(I=>!this.cssOverrides.includes(I));_.length>0&&(this.cssOverrides.push(..._),this.update())}removeOverride(...A){const _=A.filter(I=>this.cssOverrides.includes(I));_.length>0&&(this.cssOverrides=this.cssOverrides.filter(I=>!_.includes(I)),this.update())}set fill(A){typeof A!="string"&&typeof A!="number"&&warn$1("[HTMLTextStyle] only color fill is not supported by HTMLText"),super.fill=A}set stroke(A){A&&typeof A!="string"&&typeof A!="number"&&warn$1("[HTMLTextStyle] only color stroke is not supported by HTMLText"),super.stroke=A}}const nssvg="http://www.w3.org/2000/svg",nsxhtml="http://www.w3.org/1999/xhtml";class HTMLTextRenderData{constructor(){this.svgRoot=document.createElementNS(nssvg,"svg"),this.foreignObject=document.createElementNS(nssvg,"foreignObject"),this.domElement=document.createElementNS(nsxhtml,"div"),this.styleElement=document.createElementNS(nsxhtml,"style");const{foreignObject:A,svgRoot:_,styleElement:I,domElement:B}=this;A.setAttribute("width","10000"),A.setAttribute("height","10000"),A.style.overflow="hidden",_.appendChild(A),A.appendChild(I),A.appendChild(B),this.image=DOMAdapter.get().createImage()}}let tempHTMLTextRenderData;function measureHtmlText(E,A,_,I){I||(I=tempHTMLTextRenderData||(tempHTMLTextRenderData=new HTMLTextRenderData));const{domElement:B,styleElement:T,svgRoot:R}=I;B.innerHTML=`<style>${A.cssStyle};</style><div style='padding:0'>${E}</div>`,B.setAttribute("style","transform-origin: top left; display: inline-block"),_&&(T.textContent=_),document.body.appendChild(R);const P=B.getBoundingClientRect();R.remove();const D=A.padding*2;return{width:P.width-D,height:P.height-D}}let HTMLText$1=class extends AbstractText{constructor(...A){const _=ensureTextOptions(A,"HtmlText");super(_,HTMLTextStyle),this.renderPipeId="htmlText",_.textureStyle&&(this.textureStyle=_.textureStyle instanceof TextureStyle?_.textureStyle:new TextureStyle(_.textureStyle))}updateBounds(){const A=this._bounds,_=this._anchor,I=measureHtmlText(this.text,this._style),{width:B,height:T}=I;A.minX=-_._x*B,A.maxX=A.minX+B,A.minY=-_._y*T,A.maxY=A.minY+T}get text(){return this._text}set text(A){const _=this._sanitiseText(A.toString());super.text=_}_sanitiseText(A){return this._removeInvalidHtmlTags(A.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;"))}_removeInvalidHtmlTags(A){const _=/<[^>]*?(?=<|$)/g;return A.replace(_,"")}};class PrepareUpload extends PrepareQueue{uploadQueueItem(A){A instanceof TextureSource?this.uploadTextureSource(A):A instanceof Text$1?this.uploadText(A):A instanceof HTMLText$1?this.uploadHTMLText(A):A instanceof BitmapText$1?this.uploadBitmapText(A):A instanceof GraphicsContext&&this.uploadGraphicsContext(A)}uploadTextureSource(A){this.renderer.texture.initSource(A)}uploadText(A){this.renderer.renderPipes.text.initGpuText(A)}uploadBitmapText(A){this.renderer.renderPipes.bitmapText.initGpuText(A)}uploadHTMLText(A){this.renderer.renderPipes.htmlText.initGpuText(A)}uploadGraphicsContext(A){this.renderer.graphicsContext.getGpuContext(A);const{instructions:_}=A;for(const I of _)if(I.action==="texture"){const{image:B}=I.data;this.uploadTextureSource(B.source)}else if(I.action==="fill"){const{texture:B}=I.data.style;this.uploadTextureSource(B.source)}return null}}class PrepareSystem extends PrepareUpload{destroy(){clearTimeout(this.timeout),this.renderer=null,this.queue=null,this.resolves=null}}PrepareSystem.extension={type:[ExtensionType.WebGLSystem,ExtensionType.WebGPUSystem],name:"prepare"};class GlBatchAdaptor{constructor(){this._tempState=State$1.for2d(),this._didUploadHash={}}init(A){A.renderer.runners.contextChange.add(this)}contextChange(){this._didUploadHash={}}start(A,_,I){const B=A.renderer,T=this._didUploadHash[I.uid];B.shader.bind(I,T),T||(this._didUploadHash[I.uid]=!0),B.shader.updateUniformGroup(B.globalUniforms.uniformGroup),B.geometry.bind(_,I.glProgram)}execute(A,_){const I=A.renderer;this._tempState.blendMode=_.blendMode,I.state.set(this._tempState);const B=_.textures.textures;for(let T=0;T<_.textures.count;T++)I.texture.bind(B[T],T);I.geometry.draw(_.topology,_.size,_.start)}}GlBatchAdaptor.extension={type:[ExtensionType.WebGLPipesAdaptor],name:"batch"};function generateGPULayout(E){const A=[];let _=0;for(let I=0;I<E;I++)A[_]={texture:{sampleType:"float",viewDimension:"2d",multisampled:!1},binding:_,visibility:GPUShaderStage.FRAGMENT},_++,A[_]={sampler:{type:"filtering"},binding:_,visibility:GPUShaderStage.FRAGMENT},_++;return A}function generateLayout(E){const A={};let _=0;for(let I=0;I<E;I++)A[`textureSource${I+1}`]=_++,A[`textureSampler${I+1}`]=_++;return A}const tempState=State$1.for2d();class GpuBatchAdaptor{start(A,_,I){const B=A.renderer,T=B.encoder,R=I.gpuProgram;this._shader=I,this._geometry=_,T.setGeometry(_,R),tempState.blendMode="normal",B.pipeline.getPipeline(_,R,tempState);const P=B.globalUniforms.bindGroup;T.resetBindGroup(1),T.setBindGroup(0,P,R)}execute(A,_){const I=this._shader.gpuProgram,B=A.renderer,T=B.encoder;if(!_.bindGroup){const D=_.textures;_.bindGroup=getTextureBatchBindGroup(D.textures,D.count,B.limits.maxBatchableTextures)}tempState.blendMode=_.blendMode;const R=B.bindGroup.getBindGroup(_.bindGroup,I,1),P=B.pipeline.getPipeline(this._geometry,I,tempState,_.topology);_.bindGroup._touch(B.textureGC.count),T.setPipeline(P),T.renderPassEncoder.setBindGroup(1,R),T.renderPassEncoder.drawIndexed(_.size,1,_.start)}}GpuBatchAdaptor.extension={type:[ExtensionType.WebGPUPipesAdaptor],name:"batch"};const _BatcherPipe=class mn{constructor(A,_){this.state=State$1.for2d(),this._batchersByInstructionSet=Object.create(null),this._activeBatches=Object.create(null),this.renderer=A,this._adaptor=_,this._adaptor.init?.(this)}static getBatcher(A){return new this._availableBatchers[A]}buildStart(A){let _=this._batchersByInstructionSet[A.uid];_||(_=this._batchersByInstructionSet[A.uid]=Object.create(null),_.default||(_.default=new DefaultBatcher({maxTextures:this.renderer.limits.maxBatchableTextures}))),this._activeBatches=_,this._activeBatch=this._activeBatches.default;for(const I in this._activeBatches)this._activeBatches[I].begin()}addToBatch(A,_){if(this._activeBatch.name!==A.batcherName){this._activeBatch.break(_);let I=this._activeBatches[A.batcherName];I||(I=this._activeBatches[A.batcherName]=mn.getBatcher(A.batcherName),I.begin()),this._activeBatch=I}this._activeBatch.add(A)}break(A){this._activeBatch.break(A)}buildEnd(A){this._activeBatch.break(A);const _=this._activeBatches;for(const I in _){const B=_[I],T=B.geometry;T.indexBuffer.setDataWithSize(B.indexBuffer,B.indexSize,!0),T.buffers[0].setDataWithSize(B.attributeBuffer.float32View,B.attributeSize,!1)}}upload(A){const _=this._batchersByInstructionSet[A.uid];for(const I in _){const B=_[I],T=B.geometry;B.dirty&&(B.dirty=!1,T.buffers[0].update(B.attributeSize*4))}}execute(A){if(A.action==="startBatch"){const _=A.batcher,I=_.geometry,B=_.shader;this._adaptor.start(this,I,B)}this._adaptor.execute(this,A)}destroy(){this.state=null,this.renderer=null,this._adaptor=null;for(const A in this._activeBatches)this._activeBatches[A].destroy();this._activeBatches=null}};_BatcherPipe.extension={type:[ExtensionType.WebGLPipes,ExtensionType.WebGPUPipes,ExtensionType.CanvasPipes],name:"batch"};_BatcherPipe._availableBatchers=Object.create(null);let BatcherPipe=_BatcherPipe;extensions.handleByMap(ExtensionType.Batcher,BatcherPipe._availableBatchers);extensions.add(DefaultBatcher);function formatShader(E){const A=E.split(/([\n{}])/g).map(B=>B.trim()).filter(B=>B.length);let _="";return A.map(B=>{let T=_+B;return B==="{"?_+="    ":B==="}"&&(_=_.substr(0,_.length-4),T=_+B),T}).join(`
`)}const localUniformBit={name:"local-uniform-bit",vertex:{header:`

            struct LocalUniforms {
                uTransformMatrix:mat3x3<f32>,
                uColor:vec4<f32>,
                uRound:f32,
            }

            @group(1) @binding(0) var<uniform> localUniforms : LocalUniforms;
        `,main:`
            vColor *= localUniforms.uColor;
            modelMatrix *= localUniforms.uTransformMatrix;
        `,end:`
            if(localUniforms.uRound == 1)
            {
                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
            }
        `}},localUniformBitGroup2={...localUniformBit,vertex:{...localUniformBit.vertex,header:localUniformBit.vertex.header.replace("group(1)","group(2)")}},localUniformBitGl={name:"local-uniform-bit",vertex:{header:`

            uniform mat3 uTransformMatrix;
            uniform vec4 uColor;
            uniform float uRound;
        `,main:`
            vColor *= uColor;
            modelMatrix = uTransformMatrix;
        `,end:`
            if(uRound == 1.)
            {
                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
            }
        `}},textureBit={name:"texture-bit",vertex:{header:`

        struct TextureUniforms {
            uTextureMatrix:mat3x3<f32>,
        }

        @group(2) @binding(2) var<uniform> textureUniforms : TextureUniforms;
        `,main:`
            uv = (textureUniforms.uTextureMatrix * vec3(uv, 1.0)).xy;
        `},fragment:{header:`
            @group(2) @binding(0) var uTexture: texture_2d<f32>;
            @group(2) @binding(1) var uSampler: sampler;


        `,main:`
            outColor = textureSample(uTexture, uSampler, vUV);
        `}},textureBitGl={name:"texture-bit",vertex:{header:`
            uniform mat3 uTextureMatrix;
        `,main:`
            uv = (uTextureMatrix * vec3(uv, 1.0)).xy;
        `},fragment:{header:`
        uniform sampler2D uTexture;


        `,main:`
            outColor = texture(uTexture, vUV);
        `}},tempBounds$2=new Bounds;class AlphaMaskEffect extends FilterEffect{constructor(){super(),this.filters=[new MaskFilter({sprite:new Sprite$1(Texture.EMPTY),inverse:!1,resolution:"inherit",antialias:"inherit"})]}get sprite(){return this.filters[0].sprite}set sprite(A){this.filters[0].sprite=A}get inverse(){return this.filters[0].inverse}set inverse(A){this.filters[0].inverse=A}}class AlphaMaskPipe{constructor(A){this._activeMaskStage=[],this._renderer=A}push(A,_,I){const B=this._renderer;if(B.renderPipes.batch.break(I),I.add({renderPipeId:"alphaMask",action:"pushMaskBegin",mask:A,inverse:_._maskOptions.inverse,canBundle:!1,maskedContainer:_}),A.inverse=_._maskOptions.inverse,A.renderMaskToTexture){const T=A.mask;T.includeInBuild=!0,T.collectRenderables(I,B,null),T.includeInBuild=!1}B.renderPipes.batch.break(I),I.add({renderPipeId:"alphaMask",action:"pushMaskEnd",mask:A,maskedContainer:_,inverse:_._maskOptions.inverse,canBundle:!1})}pop(A,_,I){this._renderer.renderPipes.batch.break(I),I.add({renderPipeId:"alphaMask",action:"popMaskEnd",mask:A,inverse:_._maskOptions.inverse,canBundle:!1})}execute(A){const _=this._renderer,I=A.mask.renderMaskToTexture;if(A.action==="pushMaskBegin"){const B=BigPool.get(AlphaMaskEffect);if(B.inverse=A.inverse,I){A.mask.mask.measurable=!0;const T=getGlobalBounds(A.mask.mask,!0,tempBounds$2);A.mask.mask.measurable=!1,T.ceil();const R=_.renderTarget.renderTarget.colorTexture.source,P=TexturePool.getOptimalTexture(T.width,T.height,R._resolution,R.antialias);_.renderTarget.push(P,!0),_.globalUniforms.push({offset:T,worldColor:4294967295});const D=B.sprite;D.texture=P,D.worldTransform.tx=T.minX,D.worldTransform.ty=T.minY,this._activeMaskStage.push({filterEffect:B,maskedContainer:A.maskedContainer,filterTexture:P})}else B.sprite=A.mask.mask,this._activeMaskStage.push({filterEffect:B,maskedContainer:A.maskedContainer})}else if(A.action==="pushMaskEnd"){const B=this._activeMaskStage[this._activeMaskStage.length-1];I&&(_.type===RendererType.WEBGL&&_.renderTarget.finishRenderPass(),_.renderTarget.pop(),_.globalUniforms.pop()),_.filter.push({renderPipeId:"filter",action:"pushFilter",container:B.maskedContainer,filterEffect:B.filterEffect,canBundle:!1})}else if(A.action==="popMaskEnd"){_.filter.pop();const B=this._activeMaskStage.pop();I&&TexturePool.returnTexture(B.filterTexture),BigPool.return(B.filterEffect)}}destroy(){this._renderer=null,this._activeMaskStage=null}}AlphaMaskPipe.extension={type:[ExtensionType.WebGLPipes,ExtensionType.WebGPUPipes,ExtensionType.CanvasPipes],name:"alphaMask"};class ColorMaskPipe{constructor(A){this._colorStack=[],this._colorStackIndex=0,this._currentColor=0,this._renderer=A}buildStart(){this._colorStack[0]=15,this._colorStackIndex=1,this._currentColor=15}push(A,_,I){this._renderer.renderPipes.batch.break(I);const T=this._colorStack;T[this._colorStackIndex]=T[this._colorStackIndex-1]&A.mask;const R=this._colorStack[this._colorStackIndex];R!==this._currentColor&&(this._currentColor=R,I.add({renderPipeId:"colorMask",colorMask:R,canBundle:!1})),this._colorStackIndex++}pop(A,_,I){this._renderer.renderPipes.batch.break(I);const T=this._colorStack;this._colorStackIndex--;const R=T[this._colorStackIndex-1];R!==this._currentColor&&(this._currentColor=R,I.add({renderPipeId:"colorMask",colorMask:R,canBundle:!1}))}execute(A){this._renderer.colorMask.setMask(A.colorMask)}destroy(){this._colorStack=null}}ColorMaskPipe.extension={type:[ExtensionType.WebGLPipes,ExtensionType.WebGPUPipes,ExtensionType.CanvasPipes],name:"colorMask"};class ScissorMask{constructor(A){this.priority=0,this.pipe="scissorMask",this.mask=A,this.mask.renderable=!1,this.mask.measurable=!1}addBounds(A,_){addMaskBounds(this.mask,A,_)}addLocalBounds(A,_){addMaskLocalBounds(this.mask,A,_)}containsPoint(A,_){const I=this.mask;return _(I,A)}reset(){this.mask.measurable=!0,this.mask=null}destroy(){this.reset()}}class StencilMaskPipe{constructor(A){this._maskStackHash={},this._maskHash=new WeakMap,this._renderer=A}push(A,_,I){var B;const T=A,R=this._renderer;R.renderPipes.batch.break(I),R.renderPipes.blendMode.setBlendMode(T.mask,"none",I),I.add({renderPipeId:"stencilMask",action:"pushMaskBegin",mask:A,inverse:_._maskOptions.inverse,canBundle:!1});const P=T.mask;P.includeInBuild=!0,this._maskHash.has(T)||this._maskHash.set(T,{instructionsStart:0,instructionsLength:0});const D=this._maskHash.get(T);D.instructionsStart=I.instructionSize,P.collectRenderables(I,R,null),P.includeInBuild=!1,R.renderPipes.batch.break(I),I.add({renderPipeId:"stencilMask",action:"pushMaskEnd",mask:A,inverse:_._maskOptions.inverse,canBundle:!1});const F=I.instructionSize-D.instructionsStart-1;D.instructionsLength=F;const L=R.renderTarget.renderTarget.uid;(B=this._maskStackHash)[L]??(B[L]=0)}pop(A,_,I){const B=A,T=this._renderer;T.renderPipes.batch.break(I),T.renderPipes.blendMode.setBlendMode(B.mask,"none",I),I.add({renderPipeId:"stencilMask",action:"popMaskBegin",inverse:_._maskOptions.inverse,canBundle:!1});const R=this._maskHash.get(A);for(let P=0;P<R.instructionsLength;P++)I.instructions[I.instructionSize++]=I.instructions[R.instructionsStart++];I.add({renderPipeId:"stencilMask",action:"popMaskEnd",canBundle:!1})}execute(A){var _;const I=this._renderer,B=I.renderTarget.renderTarget.uid;let T=(_=this._maskStackHash)[B]??(_[B]=0);A.action==="pushMaskBegin"?(I.renderTarget.ensureDepthStencil(),I.stencil.setStencilMode(STENCIL_MODES.RENDERING_MASK_ADD,T),T++,I.colorMask.setMask(0)):A.action==="pushMaskEnd"?(A.inverse?I.stencil.setStencilMode(STENCIL_MODES.INVERSE_MASK_ACTIVE,T):I.stencil.setStencilMode(STENCIL_MODES.MASK_ACTIVE,T),I.colorMask.setMask(15)):A.action==="popMaskBegin"?(I.colorMask.setMask(0),T!==0?I.stencil.setStencilMode(STENCIL_MODES.RENDERING_MASK_REMOVE,T):(I.renderTarget.clear(null,CLEAR.STENCIL),I.stencil.setStencilMode(STENCIL_MODES.DISABLED,T)),T--):A.action==="popMaskEnd"&&(A.inverse?I.stencil.setStencilMode(STENCIL_MODES.INVERSE_MASK_ACTIVE,T):I.stencil.setStencilMode(STENCIL_MODES.MASK_ACTIVE,T),I.colorMask.setMask(15)),this._maskStackHash[B]=T}destroy(){this._renderer=null,this._maskStackHash=null,this._maskHash=null}}StencilMaskPipe.extension={type:[ExtensionType.WebGLPipes,ExtensionType.WebGPUPipes,ExtensionType.CanvasPipes],name:"stencilMask"};var BUFFER_TYPE=(E=>(E[E.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",E[E.ARRAY_BUFFER=34962]="ARRAY_BUFFER",E[E.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",E))(BUFFER_TYPE||{});class GlBuffer{constructor(A,_){this._lastBindBaseLocation=-1,this._lastBindCallId=-1,this.buffer=A||null,this.updateID=-1,this.byteLength=-1,this.type=_}}class GlBufferSystem{constructor(A){this._gpuBuffers=Object.create(null),this._boundBufferBases=Object.create(null),this._minBaseLocation=0,this._nextBindBaseIndex=this._minBaseLocation,this._bindCallId=0,this._renderer=A,this._renderer.renderableGC.addManagedHash(this,"_gpuBuffers")}destroy(){this._renderer=null,this._gl=null,this._gpuBuffers=null,this._boundBufferBases=null}contextChange(){this._gl=this._renderer.gl,this._gpuBuffers=Object.create(null),this._maxBindings=this._renderer.limits.maxUniformBindings}getGlBuffer(A){return this._gpuBuffers[A.uid]||this.createGLBuffer(A)}bind(A){const{_gl:_}=this,I=this.getGlBuffer(A);_.bindBuffer(I.type,I.buffer)}bindBufferBase(A,_){const{_gl:I}=this;this._boundBufferBases[_]!==A&&(this._boundBufferBases[_]=A,A._lastBindBaseLocation=_,I.bindBufferBase(I.UNIFORM_BUFFER,_,A.buffer))}nextBindBase(A){this._bindCallId++,this._minBaseLocation=0,A&&(this._boundBufferBases[0]=null,this._minBaseLocation=1,this._nextBindBaseIndex<1&&(this._nextBindBaseIndex=1))}freeLocationForBufferBase(A){let _=this.getLastBindBaseLocation(A);if(_>=this._minBaseLocation)return A._lastBindCallId=this._bindCallId,_;let I=0,B=this._nextBindBaseIndex;for(;I<2;){B>=this._maxBindings&&(B=this._minBaseLocation,I++);const T=this._boundBufferBases[B];if(T&&T._lastBindCallId===this._bindCallId){B++;continue}break}return _=B,this._nextBindBaseIndex=B+1,I>=2?-1:(A._lastBindCallId=this._bindCallId,this._boundBufferBases[_]=null,_)}getLastBindBaseLocation(A){const _=A._lastBindBaseLocation;return this._boundBufferBases[_]===A?_:-1}bindBufferRange(A,_,I,B){const{_gl:T}=this;I||(I=0),_||(_=0),this._boundBufferBases[_]=null,T.bindBufferRange(T.UNIFORM_BUFFER,_||0,A.buffer,I*256,B||256)}updateBuffer(A){const{_gl:_}=this,I=this.getGlBuffer(A);if(A._updateID===I.updateID)return I;I.updateID=A._updateID,_.bindBuffer(I.type,I.buffer);const B=A.data,T=A.descriptor.usage&BufferUsage.STATIC?_.STATIC_DRAW:_.DYNAMIC_DRAW;return B?I.byteLength>=B.byteLength?_.bufferSubData(I.type,0,B,0,A._updateSize/B.BYTES_PER_ELEMENT):(I.byteLength=B.byteLength,_.bufferData(I.type,B,T)):(I.byteLength=A.descriptor.size,_.bufferData(I.type,I.byteLength,T)),I}destroyAll(){const A=this._gl;for(const _ in this._gpuBuffers)A.deleteBuffer(this._gpuBuffers[_].buffer);this._gpuBuffers=Object.create(null)}onBufferDestroy(A,_){const I=this._gpuBuffers[A.uid],B=this._gl;_||B.deleteBuffer(I.buffer),this._gpuBuffers[A.uid]=null}createGLBuffer(A){const{_gl:_}=this;let I=BUFFER_TYPE.ARRAY_BUFFER;A.descriptor.usage&BufferUsage.INDEX?I=BUFFER_TYPE.ELEMENT_ARRAY_BUFFER:A.descriptor.usage&BufferUsage.UNIFORM&&(I=BUFFER_TYPE.UNIFORM_BUFFER);const B=new GlBuffer(_.createBuffer(),I);return this._gpuBuffers[A.uid]=B,A.on("destroy",this.onBufferDestroy,this),B}resetState(){this._boundBufferBases=Object.create(null)}}GlBufferSystem.extension={type:[ExtensionType.WebGLSystem],name:"buffer"};const _GlContextSystem=class gn{constructor(A){this.supports={uint32Indices:!0,uniformBufferObject:!0,vertexArrayObject:!0,srgbTextures:!0,nonPowOf2wrapping:!0,msaa:!0,nonPowOf2mipmaps:!0},this._renderer=A,this.extensions=Object.create(null),this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(A){this.gl=A,this._renderer.gl=A}init(A){A={...gn.defaultOptions,...A};let _=this.multiView=A.multiView;if(A.context&&_&&(warn$1("Renderer created with both a context and multiview enabled. Disabling multiView as both cannot work together."),_=!1),_?this.canvas=DOMAdapter.get().createCanvas(this._renderer.canvas.width,this._renderer.canvas.height):this.canvas=this._renderer.view.canvas,A.context)this.initFromContext(A.context);else{const I=this._renderer.background.alpha<1,B=A.premultipliedAlpha??!0,T=A.antialias&&!this._renderer.backBuffer.useBackBuffer;this.createContext(A.preferWebGLVersion,{alpha:I,premultipliedAlpha:B,antialias:T,stencil:!0,preserveDrawingBuffer:A.preserveDrawingBuffer,powerPreference:A.powerPreference??"default"})}}ensureCanvasSize(A){if(!this.multiView){A!==this.canvas&&warn$1("multiView is disabled, but targetCanvas is not the main canvas");return}const{canvas:_}=this;(_.width<A.width||_.height<A.height)&&(_.width=Math.max(A.width,A.width),_.height=Math.max(A.height,A.height))}initFromContext(A){this.gl=A,this.webGLVersion=A instanceof DOMAdapter.get().getWebGLRenderingContext()?1:2,this.getExtensions(),this.validateContext(A),this._renderer.runners.contextChange.emit(A);const _=this._renderer.view.canvas;_.addEventListener("webglcontextlost",this.handleContextLost,!1),_.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}createContext(A,_){let I;const B=this.canvas;if(A===2&&(I=B.getContext("webgl2",_)),!I&&(I=B.getContext("webgl",_),!I))throw new Error("This browser does not support WebGL. Try using the canvas renderer");this.gl=I,this.initFromContext(this.gl)}getExtensions(){const{gl:A}=this,_={anisotropicFiltering:A.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:A.getExtension("OES_texture_float_linear"),s3tc:A.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:A.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:A.getExtension("WEBGL_compressed_texture_etc"),etc1:A.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:A.getExtension("WEBGL_compressed_texture_pvrtc")||A.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:A.getExtension("WEBGL_compressed_texture_atc"),astc:A.getExtension("WEBGL_compressed_texture_astc"),bptc:A.getExtension("EXT_texture_compression_bptc"),rgtc:A.getExtension("EXT_texture_compression_rgtc"),loseContext:A.getExtension("WEBGL_lose_context")};if(this.webGLVersion===1)this.extensions={..._,drawBuffers:A.getExtension("WEBGL_draw_buffers"),depthTexture:A.getExtension("WEBGL_depth_texture"),vertexArrayObject:A.getExtension("OES_vertex_array_object")||A.getExtension("MOZ_OES_vertex_array_object")||A.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:A.getExtension("OES_element_index_uint"),floatTexture:A.getExtension("OES_texture_float"),floatTextureLinear:A.getExtension("OES_texture_float_linear"),textureHalfFloat:A.getExtension("OES_texture_half_float"),textureHalfFloatLinear:A.getExtension("OES_texture_half_float_linear"),vertexAttribDivisorANGLE:A.getExtension("ANGLE_instanced_arrays"),srgb:A.getExtension("EXT_sRGB")};else{this.extensions={..._,colorBufferFloat:A.getExtension("EXT_color_buffer_float")};const I=A.getExtension("WEBGL_provoking_vertex");I&&I.provokingVertexWEBGL(I.FIRST_VERTEX_CONVENTION_WEBGL)}}handleContextLost(A){A.preventDefault(),this._contextLossForced&&(this._contextLossForced=!1,setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext?.restoreContext()},0))}handleContextRestored(){this.getExtensions(),this._renderer.runners.contextChange.emit(this.gl)}destroy(){const A=this._renderer.view.canvas;this._renderer=null,A.removeEventListener("webglcontextlost",this.handleContextLost),A.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext?.loseContext()}forceContextLoss(){this.extensions.loseContext?.loseContext(),this._contextLossForced=!0}validateContext(A){const _=A.getContextAttributes();_&&!_.stencil&&warn$1("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const I=this.supports,B=this.webGLVersion===2,T=this.extensions;I.uint32Indices=B||!!T.uint32ElementIndex,I.uniformBufferObject=B,I.vertexArrayObject=B||!!T.vertexArrayObject,I.srgbTextures=B||!!T.srgb,I.nonPowOf2wrapping=B,I.nonPowOf2mipmaps=B,I.msaa=B,I.uint32Indices||warn$1("Provided WebGL context does not support 32 index buffer, large scenes may not render correctly")}};_GlContextSystem.extension={type:[ExtensionType.WebGLSystem],name:"context"};_GlContextSystem.defaultOptions={context:null,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:void 0,preferWebGLVersion:2,multiView:!1};let GlContextSystem=_GlContextSystem;function ensureAttributes(E,A){for(const _ in E.attributes){const I=E.attributes[_],B=A[_];B?(I.format??(I.format=B.format),I.offset??(I.offset=B.offset),I.instance??(I.instance=B.instance)):warn$1(`Attribute ${_} is not present in the shader, but is present in the geometry. Unable to infer attribute details.`)}ensureStartAndStride(E)}function ensureStartAndStride(E){const{buffers:A,attributes:_}=E,I={},B={};for(const T in A){const R=A[T];I[R.uid]=0,B[R.uid]=0}for(const T in _){const R=_[T];I[R.buffer.uid]+=getAttributeInfoFromFormat(R.format).stride}for(const T in _){const R=_[T];R.stride??(R.stride=I[R.buffer.uid]),R.start??(R.start=B[R.buffer.uid]),B[R.buffer.uid]+=getAttributeInfoFromFormat(R.format).stride}}var GL_FORMATS=(E=>(E[E.RGBA=6408]="RGBA",E[E.RGB=6407]="RGB",E[E.RG=33319]="RG",E[E.RED=6403]="RED",E[E.RGBA_INTEGER=36249]="RGBA_INTEGER",E[E.RGB_INTEGER=36248]="RGB_INTEGER",E[E.RG_INTEGER=33320]="RG_INTEGER",E[E.RED_INTEGER=36244]="RED_INTEGER",E[E.ALPHA=6406]="ALPHA",E[E.LUMINANCE=6409]="LUMINANCE",E[E.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",E[E.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",E[E.DEPTH_STENCIL=34041]="DEPTH_STENCIL",E))(GL_FORMATS||{}),GL_TARGETS=(E=>(E[E.TEXTURE_2D=3553]="TEXTURE_2D",E[E.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",E[E.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",E[E.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",E[E.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",E[E.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",E[E.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",E[E.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",E[E.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",E))(GL_TARGETS||{}),GL_WRAP_MODES=(E=>(E[E.CLAMP=33071]="CLAMP",E[E.REPEAT=10497]="REPEAT",E[E.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",E))(GL_WRAP_MODES||{}),GL_TYPES=(E=>(E[E.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",E[E.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",E[E.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",E[E.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",E[E.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",E[E.UNSIGNED_INT=5125]="UNSIGNED_INT",E[E.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",E[E.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",E[E.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",E[E.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",E[E.BYTE=5120]="BYTE",E[E.SHORT=5122]="SHORT",E[E.INT=5124]="INT",E[E.FLOAT=5126]="FLOAT",E[E.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",E[E.HALF_FLOAT=36193]="HALF_FLOAT",E))(GL_TYPES||{});const infoMap={uint8x2:GL_TYPES.UNSIGNED_BYTE,uint8x4:GL_TYPES.UNSIGNED_BYTE,sint8x2:GL_TYPES.BYTE,sint8x4:GL_TYPES.BYTE,unorm8x2:GL_TYPES.UNSIGNED_BYTE,unorm8x4:GL_TYPES.UNSIGNED_BYTE,snorm8x2:GL_TYPES.BYTE,snorm8x4:GL_TYPES.BYTE,uint16x2:GL_TYPES.UNSIGNED_SHORT,uint16x4:GL_TYPES.UNSIGNED_SHORT,sint16x2:GL_TYPES.SHORT,sint16x4:GL_TYPES.SHORT,unorm16x2:GL_TYPES.UNSIGNED_SHORT,unorm16x4:GL_TYPES.UNSIGNED_SHORT,snorm16x2:GL_TYPES.SHORT,snorm16x4:GL_TYPES.SHORT,float16x2:GL_TYPES.HALF_FLOAT,float16x4:GL_TYPES.HALF_FLOAT,float32:GL_TYPES.FLOAT,float32x2:GL_TYPES.FLOAT,float32x3:GL_TYPES.FLOAT,float32x4:GL_TYPES.FLOAT,uint32:GL_TYPES.UNSIGNED_INT,uint32x2:GL_TYPES.UNSIGNED_INT,uint32x3:GL_TYPES.UNSIGNED_INT,uint32x4:GL_TYPES.UNSIGNED_INT,sint32:GL_TYPES.INT,sint32x2:GL_TYPES.INT,sint32x3:GL_TYPES.INT,sint32x4:GL_TYPES.INT};function getGlTypeFromFormat(E){return infoMap[E]??infoMap.float32}const topologyToGlMap={"point-list":0,"line-list":1,"line-strip":3,"triangle-list":4,"triangle-strip":5};class GlGeometrySystem{constructor(A){this._geometryVaoHash=Object.create(null),this._renderer=A,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this._renderer.renderableGC.addManagedHash(this,"_geometryVaoHash")}contextChange(){const A=this.gl=this._renderer.gl;if(!this._renderer.context.supports.vertexArrayObject)throw new Error("[PixiJS] Vertex Array Objects are not supported on this device");const _=this._renderer.context.extensions.vertexArrayObject;_&&(A.createVertexArray=()=>_.createVertexArrayOES(),A.bindVertexArray=B=>_.bindVertexArrayOES(B),A.deleteVertexArray=B=>_.deleteVertexArrayOES(B));const I=this._renderer.context.extensions.vertexAttribDivisorANGLE;I&&(A.drawArraysInstanced=(B,T,R,P)=>{I.drawArraysInstancedANGLE(B,T,R,P)},A.drawElementsInstanced=(B,T,R,P,D)=>{I.drawElementsInstancedANGLE(B,T,R,P,D)},A.vertexAttribDivisor=(B,T)=>I.vertexAttribDivisorANGLE(B,T)),this._activeGeometry=null,this._activeVao=null,this._geometryVaoHash=Object.create(null)}bind(A,_){const I=this.gl;this._activeGeometry=A;const B=this.getVao(A,_);this._activeVao!==B&&(this._activeVao=B,I.bindVertexArray(B)),this.updateBuffers()}resetState(){this.unbind()}updateBuffers(){const A=this._activeGeometry,_=this._renderer.buffer;for(let I=0;I<A.buffers.length;I++){const B=A.buffers[I];_.updateBuffer(B)}}checkCompatibility(A,_){const I=A.attributes,B=_._attributeData;for(const T in B)if(!I[T])throw new Error(`shader and geometry incompatible, geometry missing the "${T}" attribute`)}getSignature(A,_){const I=A.attributes,B=_._attributeData,T=["g",A.uid];for(const R in I)B[R]&&T.push(R,B[R].location);return T.join("-")}getVao(A,_){return this._geometryVaoHash[A.uid]?.[_._key]||this.initGeometryVao(A,_)}initGeometryVao(A,_,I=!0){const B=this._renderer.gl,T=this._renderer.buffer;this._renderer.shader._getProgramData(_),this.checkCompatibility(A,_);const R=this.getSignature(A,_);this._geometryVaoHash[A.uid]||(this._geometryVaoHash[A.uid]=Object.create(null),A.on("destroy",this.onGeometryDestroy,this));const P=this._geometryVaoHash[A.uid];let D=P[R];if(D)return P[_._key]=D,D;ensureAttributes(A,_._attributeData);const F=A.buffers;D=B.createVertexArray(),B.bindVertexArray(D);for(let L=0;L<F.length;L++){const U=F[L];T.bind(U)}return this.activateVao(A,_),P[_._key]=D,P[R]=D,B.bindVertexArray(null),D}onGeometryDestroy(A,_){const I=this._geometryVaoHash[A.uid],B=this.gl;if(I){if(_)for(const T in I)this._activeVao!==I[T]&&this.unbind(),B.deleteVertexArray(I[T]);this._geometryVaoHash[A.uid]=null}}destroyAll(A=!1){const _=this.gl;for(const I in this._geometryVaoHash){if(A)for(const B in this._geometryVaoHash[I]){const T=this._geometryVaoHash[I];this._activeVao!==T&&this.unbind(),_.deleteVertexArray(T[B])}this._geometryVaoHash[I]=null}}activateVao(A,_){const I=this._renderer.gl,B=this._renderer.buffer,T=A.attributes;A.indexBuffer&&B.bind(A.indexBuffer);let R=null;for(const P in T){const D=T[P],F=D.buffer,L=B.getGlBuffer(F),U=_._attributeData[P];if(U){R!==L&&(B.bind(F),R=L);const V=U.location;I.enableVertexAttribArray(V);const K=getAttributeInfoFromFormat(D.format),J=getGlTypeFromFormat(D.format);if(U.format?.substring(1,4)==="int"?I.vertexAttribIPointer(V,K.size,J,D.stride,D.offset):I.vertexAttribPointer(V,K.size,J,K.normalised,D.stride,D.offset),D.instance)if(this.hasInstance){const ee=D.divisor??1;I.vertexAttribDivisor(V,ee)}else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(A,_,I,B){const{gl:T}=this._renderer,R=this._activeGeometry,P=topologyToGlMap[A||R.topology];if(B??(B=R.instanceCount),R.indexBuffer){const D=R.indexBuffer.data.BYTES_PER_ELEMENT,F=D===2?T.UNSIGNED_SHORT:T.UNSIGNED_INT;B>1?T.drawElementsInstanced(P,_||R.indexBuffer.data.length,F,(I||0)*D,B):T.drawElements(P,_||R.indexBuffer.data.length,F,(I||0)*D)}else B>1?T.drawArraysInstanced(P,I||0,_||R.getSize(),B):T.drawArrays(P,I||0,_||R.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this._renderer=null,this.gl=null,this._activeVao=null,this._activeGeometry=null}}GlGeometrySystem.extension={type:[ExtensionType.WebGLSystem],name:"geometry"};const bigTriangleGeometry=new Geometry({attributes:{aPosition:[-1,-1,3,-1,-1,3]}}),_GlBackBufferSystem=class An{constructor(A){this.useBackBuffer=!1,this._useBackBufferThisRender=!1,this._renderer=A}init(A={}){const{useBackBuffer:_,antialias:I}={...An.defaultOptions,...A};this.useBackBuffer=_,this._antialias=I,this._renderer.context.supports.msaa||(warn$1("antialiasing, is not supported on when using the back buffer"),this._antialias=!1),this._state=State$1.for2d();const B=new GlProgram({vertex:`
                attribute vec2 aPosition;
                out vec2 vUv;

                void main() {
                    gl_Position = vec4(aPosition, 0.0, 1.0);

                    vUv = (aPosition + 1.0) / 2.0;

                    // flip dem UVs
                    vUv.y = 1.0 - vUv.y;
                }`,fragment:`
                in vec2 vUv;
                out vec4 finalColor;

                uniform sampler2D uTexture;

                void main() {
                    finalColor = texture(uTexture, vUv);
                }`,name:"big-triangle"});this._bigTriangleShader=new Shader({glProgram:B,resources:{uTexture:Texture.WHITE.source}})}renderStart(A){const _=this._renderer.renderTarget.getRenderTarget(A.target);if(this._useBackBufferThisRender=this.useBackBuffer&&!!_.isRoot,this._useBackBufferThisRender){const I=this._renderer.renderTarget.getRenderTarget(A.target);this._targetTexture=I.colorTexture,A.target=this._getBackBufferTexture(I.colorTexture)}}renderEnd(){this._presentBackBuffer()}_presentBackBuffer(){const A=this._renderer;A.renderTarget.finishRenderPass(),this._useBackBufferThisRender&&(A.renderTarget.bind(this._targetTexture,!1),this._bigTriangleShader.resources.uTexture=this._backBufferTexture.source,A.encoder.draw({geometry:bigTriangleGeometry,shader:this._bigTriangleShader,state:this._state}))}_getBackBufferTexture(A){return this._backBufferTexture=this._backBufferTexture||new Texture({source:new TextureSource({width:A.width,height:A.height,resolution:A._resolution,antialias:this._antialias})}),this._backBufferTexture.source.resize(A.width,A.height,A._resolution),this._backBufferTexture}destroy(){this._backBufferTexture&&(this._backBufferTexture.destroy(),this._backBufferTexture=null)}};_GlBackBufferSystem.extension={type:[ExtensionType.WebGLSystem],name:"backBuffer",priority:1};_GlBackBufferSystem.defaultOptions={useBackBuffer:!1};let GlBackBufferSystem=_GlBackBufferSystem;class GlColorMaskSystem{constructor(A){this._colorMaskCache=15,this._renderer=A}setMask(A){this._colorMaskCache!==A&&(this._colorMaskCache=A,this._renderer.gl.colorMask(!!(A&8),!!(A&4),!!(A&2),!!(A&1)))}}GlColorMaskSystem.extension={type:[ExtensionType.WebGLSystem],name:"colorMask"};class GlEncoderSystem{constructor(A){this.commandFinished=Promise.resolve(),this._renderer=A}setGeometry(A,_){this._renderer.geometry.bind(A,_.glProgram)}finishRenderPass(){}draw(A){const _=this._renderer,{geometry:I,shader:B,state:T,skipSync:R,topology:P,size:D,start:F,instanceCount:L}=A;_.shader.bind(B,R),_.geometry.bind(I,_.shader._activeProgram),T&&_.state.set(T),_.geometry.draw(P,D,F,L??I.instanceCount)}destroy(){this._renderer=null}}GlEncoderSystem.extension={type:[ExtensionType.WebGLSystem],name:"encoder"};class GlLimitsSystem{constructor(A){this._renderer=A}contextChange(){const A=this._renderer.gl;this.maxTextures=A.getParameter(A.MAX_TEXTURE_IMAGE_UNITS),this.maxBatchableTextures=checkMaxIfStatementsInShader(this.maxTextures,A),this.maxUniformBindings=A.getParameter(A.MAX_UNIFORM_BUFFER_BINDINGS)}destroy(){}}GlLimitsSystem.extension={type:[ExtensionType.WebGLSystem],name:"limits"};class GlRenderTarget{constructor(){this.width=-1,this.height=-1,this.msaa=!1,this.msaaRenderBuffer=[]}}const GpuStencilModesToPixi=[];GpuStencilModesToPixi[STENCIL_MODES.NONE]=void 0;GpuStencilModesToPixi[STENCIL_MODES.DISABLED]={stencilWriteMask:0,stencilReadMask:0};GpuStencilModesToPixi[STENCIL_MODES.RENDERING_MASK_ADD]={stencilFront:{compare:"equal",passOp:"increment-clamp"},stencilBack:{compare:"equal",passOp:"increment-clamp"}};GpuStencilModesToPixi[STENCIL_MODES.RENDERING_MASK_REMOVE]={stencilFront:{compare:"equal",passOp:"decrement-clamp"},stencilBack:{compare:"equal",passOp:"decrement-clamp"}};GpuStencilModesToPixi[STENCIL_MODES.MASK_ACTIVE]={stencilWriteMask:0,stencilFront:{compare:"equal",passOp:"keep"},stencilBack:{compare:"equal",passOp:"keep"}};GpuStencilModesToPixi[STENCIL_MODES.INVERSE_MASK_ACTIVE]={stencilWriteMask:0,stencilFront:{compare:"not-equal",passOp:"keep"},stencilBack:{compare:"not-equal",passOp:"keep"}};class GlStencilSystem{constructor(A){this._stencilCache={enabled:!1,stencilReference:0,stencilMode:STENCIL_MODES.NONE},this._renderTargetStencilState=Object.create(null),A.renderTarget.onRenderTargetChange.add(this)}contextChange(A){this._gl=A,this._comparisonFuncMapping={always:A.ALWAYS,never:A.NEVER,equal:A.EQUAL,"not-equal":A.NOTEQUAL,less:A.LESS,"less-equal":A.LEQUAL,greater:A.GREATER,"greater-equal":A.GEQUAL},this._stencilOpsMapping={keep:A.KEEP,zero:A.ZERO,replace:A.REPLACE,invert:A.INVERT,"increment-clamp":A.INCR,"decrement-clamp":A.DECR,"increment-wrap":A.INCR_WRAP,"decrement-wrap":A.DECR_WRAP},this.resetState()}onRenderTargetChange(A){if(this._activeRenderTarget===A)return;this._activeRenderTarget=A;let _=this._renderTargetStencilState[A.uid];_||(_=this._renderTargetStencilState[A.uid]={stencilMode:STENCIL_MODES.DISABLED,stencilReference:0}),this.setStencilMode(_.stencilMode,_.stencilReference)}resetState(){this._stencilCache.enabled=!1,this._stencilCache.stencilMode=STENCIL_MODES.NONE,this._stencilCache.stencilReference=0}setStencilMode(A,_){const I=this._renderTargetStencilState[this._activeRenderTarget.uid],B=this._gl,T=GpuStencilModesToPixi[A],R=this._stencilCache;if(I.stencilMode=A,I.stencilReference=_,A===STENCIL_MODES.DISABLED){this._stencilCache.enabled&&(this._stencilCache.enabled=!1,B.disable(B.STENCIL_TEST));return}this._stencilCache.enabled||(this._stencilCache.enabled=!0,B.enable(B.STENCIL_TEST)),(A!==R.stencilMode||R.stencilReference!==_)&&(R.stencilMode=A,R.stencilReference=_,B.stencilFunc(this._comparisonFuncMapping[T.stencilBack.compare],_,255),B.stencilOp(B.KEEP,B.KEEP,this._stencilOpsMapping[T.stencilBack.passOp]))}}GlStencilSystem.extension={type:[ExtensionType.WebGLSystem],name:"stencil"};class UboSystem{constructor(A){this._syncFunctionHash=Object.create(null),this._adaptor=A,this._systemCheck()}_systemCheck(){if(!unsafeEvalSupported())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}ensureUniformGroup(A){const _=this.getUniformGroupData(A);A.buffer||(A.buffer=new Buffer({data:new Float32Array(_.layout.size/4),usage:BufferUsage.UNIFORM|BufferUsage.COPY_DST}))}getUniformGroupData(A){return this._syncFunctionHash[A._signature]||this._initUniformGroup(A)}_initUniformGroup(A){const _=A._signature;let I=this._syncFunctionHash[_];if(!I){const B=Object.keys(A.uniformStructures).map(P=>A.uniformStructures[P]),T=this._adaptor.createUboElements(B),R=this._generateUboSync(T.uboElements);I=this._syncFunctionHash[_]={layout:T,syncFunction:R}}return this._syncFunctionHash[_]}_generateUboSync(A){return this._adaptor.generateUboSync(A)}syncUniformGroup(A,_,I){const B=this.getUniformGroupData(A);A.buffer||(A.buffer=new Buffer({data:new Float32Array(B.layout.size/4),usage:BufferUsage.UNIFORM|BufferUsage.COPY_DST}));let T=null;return _||(_=A.buffer.data,T=A.buffer.dataInt32),I||(I=0),B.syncFunction(A.uniforms,_,T,I),!0}updateUniformGroup(A){if(A.isStatic&&!A._dirtyId)return!1;A._dirtyId=0;const _=this.syncUniformGroup(A);return A.buffer.update(),_}destroy(){this._syncFunctionHash=null}}const WGSL_TO_STD40_SIZE={f32:4,i32:4,"vec2<f32>":8,"vec3<f32>":12,"vec4<f32>":16,"vec2<i32>":8,"vec3<i32>":12,"vec4<i32>":16,"mat2x2<f32>":32,"mat3x3<f32>":48,"mat4x4<f32>":64};function createUboElementsSTD40(E){const A=E.map(T=>({data:T,offset:0,size:0})),_=16;let I=0,B=0;for(let T=0;T<A.length;T++){const R=A[T];if(I=WGSL_TO_STD40_SIZE[R.data.type],!I)throw new Error(`Unknown type ${R.data.type}`);R.data.size>1&&(I=Math.max(I,_)*R.data.size);const P=I===12?16:I;R.size=I;const D=B%_;D>0&&_-D<P?B+=(_-D)%16:B+=(I-D%I)%I,R.offset=B,B+=I}return B=Math.ceil(B/16)*16,{uboElements:A,size:B}}const uniformParsers=[{type:"mat3x3<f32>",test:E=>E.value.a!==void 0,ubo:`
            var matrix = uv[name].toArray(true);
            data[offset] = matrix[0];
            data[offset + 1] = matrix[1];
            data[offset + 2] = matrix[2];
            data[offset + 4] = matrix[3];
            data[offset + 5] = matrix[4];
            data[offset + 6] = matrix[5];
            data[offset + 8] = matrix[6];
            data[offset + 9] = matrix[7];
            data[offset + 10] = matrix[8];
        `,uniform:`
            gl.uniformMatrix3fv(ud[name].location, false, uv[name].toArray(true));
        `},{type:"vec4<f32>",test:E=>E.type==="vec4<f32>"&&E.size===1&&E.value.width!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.x;
            data[offset + 1] = v.y;
            data[offset + 2] = v.width;
            data[offset + 3] = v.height;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height) {
                cv[0] = v.x;
                cv[1] = v.y;
                cv[2] = v.width;
                cv[3] = v.height;
                gl.uniform4f(ud[name].location, v.x, v.y, v.width, v.height);
            }
        `},{type:"vec2<f32>",test:E=>E.type==="vec2<f32>"&&E.size===1&&E.value.x!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.x;
            data[offset + 1] = v.y;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.x || cv[1] !== v.y) {
                cv[0] = v.x;
                cv[1] = v.y;
                gl.uniform2f(ud[name].location, v.x, v.y);
            }
        `},{type:"vec4<f32>",test:E=>E.type==="vec4<f32>"&&E.size===1&&E.value.red!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.red;
            data[offset + 1] = v.green;
            data[offset + 2] = v.blue;
            data[offset + 3] = v.alpha;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha) {
                cv[0] = v.red;
                cv[1] = v.green;
                cv[2] = v.blue;
                cv[3] = v.alpha;
                gl.uniform4f(ud[name].location, v.red, v.green, v.blue, v.alpha);
            }
        `},{type:"vec3<f32>",test:E=>E.type==="vec3<f32>"&&E.size===1&&E.value.red!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.red;
            data[offset + 1] = v.green;
            data[offset + 2] = v.blue;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue) {
                cv[0] = v.red;
                cv[1] = v.green;
                cv[2] = v.blue;
                gl.uniform3f(ud[name].location, v.red, v.green, v.blue);
            }
        `}];function createUboSyncFunction(E,A,_,I){const B=[`
        var v = null;
        var v2 = null;
        var t = 0;
        var index = 0;
        var name = null;
        var arrayOffset = null;
    `];let T=0;for(let P=0;P<E.length;P++){const D=E[P],F=D.data.name;let L=!1,U=0;for(let V=0;V<uniformParsers.length;V++)if(uniformParsers[V].test(D.data)){U=D.offset/4,B.push(`name = "${F}";`,`offset += ${U-T};`,uniformParsers[V][A]||uniformParsers[V].ubo),L=!0;break}if(!L)if(D.data.size>1)U=D.offset/4,B.push(_(D,U-T));else{const V=I[D.data.type];U=D.offset/4,B.push(`
                    v = uv.${F};
                    offset += ${U-T};
                    ${V};
                `)}T=U}const R=B.join(`
`);return new Function("uv","data","dataInt32","offset",R)}function loopMatrix(E,A){return`
        for (let i = 0; i < ${E*A}; i++) {
            data[offset + (((i / ${E})|0) * 4) + (i % ${E})] = v[i];
        }
    `}const uboSyncFunctionsSTD40={f32:`
        data[offset] = v;`,i32:`
        dataInt32[offset] = v;`,"vec2<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];`,"vec3<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];`,"vec4<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];
        data[offset + 3] = v[3];`,"vec2<i32>":`
        dataInt32[offset] = v[0];
        dataInt32[offset + 1] = v[1];`,"vec3<i32>":`
        dataInt32[offset] = v[0];
        dataInt32[offset + 1] = v[1];
        dataInt32[offset + 2] = v[2];`,"vec4<i32>":`
        dataInt32[offset] = v[0];
        dataInt32[offset + 1] = v[1];
        dataInt32[offset + 2] = v[2];
        dataInt32[offset + 3] = v[3];`,"mat2x2<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 4] = v[2];
        data[offset + 5] = v[3];`,"mat3x3<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];
        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];
        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];`,"mat4x4<f32>":`
        for (let i = 0; i < 16; i++) {
            data[offset + i] = v[i];
        }`,"mat3x2<f32>":loopMatrix(3,2),"mat4x2<f32>":loopMatrix(4,2),"mat2x3<f32>":loopMatrix(2,3),"mat4x3<f32>":loopMatrix(4,3),"mat2x4<f32>":loopMatrix(2,4),"mat3x4<f32>":loopMatrix(3,4)},uboSyncFunctionsWGSL={...uboSyncFunctionsSTD40,"mat2x2<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];
        data[offset + 3] = v[3];
    `};function generateArraySyncSTD40(E,A){const _=Math.max(WGSL_TO_STD40_SIZE[E.data.type]/16,1),I=E.data.value.length/E.data.size,B=(4-I%4)%4,T=E.data.type.indexOf("i32")>=0?"dataInt32":"data";return`
        v = uv.${E.data.name};
        offset += ${A};

        arrayOffset = offset;

        t = 0;

        for(var i=0; i < ${E.data.size*_}; i++)
        {
            for(var j = 0; j < ${I}; j++)
            {
                ${T}[arrayOffset++] = v[t++];
            }
            ${B!==0?`arrayOffset += ${B};`:""}
        }
    `}function createUboSyncFunctionSTD40(E){return createUboSyncFunction(E,"uboStd40",generateArraySyncSTD40,uboSyncFunctionsSTD40)}class GlUboSystem extends UboSystem{constructor(){super({createUboElements:createUboElementsSTD40,generateUboSync:createUboSyncFunctionSTD40})}}GlUboSystem.extension={type:[ExtensionType.WebGLSystem],name:"ubo"};class GlRenderTargetAdaptor{constructor(){this._clearColorCache=[0,0,0,0],this._viewPortCache=new Rectangle}init(A,_){this._renderer=A,this._renderTargetSystem=_,A.runners.contextChange.add(this)}contextChange(){this._clearColorCache=[0,0,0,0],this._viewPortCache=new Rectangle}copyToTexture(A,_,I,B,T){const R=this._renderTargetSystem,P=this._renderer,D=R.getGpuRenderTarget(A),F=P.gl;return this.finishRenderPass(A),F.bindFramebuffer(F.FRAMEBUFFER,D.resolveTargetFramebuffer),P.texture.bind(_,0),F.copyTexSubImage2D(F.TEXTURE_2D,0,T.x,T.y,I.x,I.y,B.width,B.height),_}startRenderPass(A,_=!0,I,B){const T=this._renderTargetSystem,R=A.colorTexture,P=T.getGpuRenderTarget(A);let D=B.y;A.isRoot&&(D=R.pixelHeight-B.height),A.colorTextures.forEach(U=>{this._renderer.texture.unbind(U)});const F=this._renderer.gl;F.bindFramebuffer(F.FRAMEBUFFER,P.framebuffer);const L=this._viewPortCache;(L.x!==B.x||L.y!==D||L.width!==B.width||L.height!==B.height)&&(L.x=B.x,L.y=D,L.width=B.width,L.height=B.height,F.viewport(B.x,D,B.width,B.height)),!P.depthStencilRenderBuffer&&(A.stencil||A.depth)&&this._initStencil(P),this.clear(A,_,I)}finishRenderPass(A){const I=this._renderTargetSystem.getGpuRenderTarget(A);if(!I.msaa)return;const B=this._renderer.gl;B.bindFramebuffer(B.FRAMEBUFFER,I.resolveTargetFramebuffer),B.bindFramebuffer(B.READ_FRAMEBUFFER,I.framebuffer),B.blitFramebuffer(0,0,I.width,I.height,0,0,I.width,I.height,B.COLOR_BUFFER_BIT,B.NEAREST),B.bindFramebuffer(B.FRAMEBUFFER,I.framebuffer)}initGpuRenderTarget(A){const I=this._renderer.gl,B=new GlRenderTarget;return A.colorTexture instanceof CanvasSource?(this._renderer.context.ensureCanvasSize(A.colorTexture.resource),B.framebuffer=null,B):(this._initColor(A,B),I.bindFramebuffer(I.FRAMEBUFFER,null),B)}destroyGpuRenderTarget(A){const _=this._renderer.gl;A.framebuffer&&(_.deleteFramebuffer(A.framebuffer),A.framebuffer=null),A.resolveTargetFramebuffer&&(_.deleteFramebuffer(A.resolveTargetFramebuffer),A.resolveTargetFramebuffer=null),A.depthStencilRenderBuffer&&(_.deleteRenderbuffer(A.depthStencilRenderBuffer),A.depthStencilRenderBuffer=null),A.msaaRenderBuffer.forEach(I=>{_.deleteRenderbuffer(I)}),A.msaaRenderBuffer=null}clear(A,_,I){if(!_)return;const B=this._renderTargetSystem;typeof _=="boolean"&&(_=_?CLEAR.ALL:CLEAR.NONE);const T=this._renderer.gl;if(_&CLEAR.COLOR){I??(I=B.defaultClearColor);const R=this._clearColorCache,P=I;(R[0]!==P[0]||R[1]!==P[1]||R[2]!==P[2]||R[3]!==P[3])&&(R[0]=P[0],R[1]=P[1],R[2]=P[2],R[3]=P[3],T.clearColor(P[0],P[1],P[2],P[3]))}T.clear(_)}resizeGpuRenderTarget(A){if(A.isRoot)return;const I=this._renderTargetSystem.getGpuRenderTarget(A);this._resizeColor(A,I),(A.stencil||A.depth)&&this._resizeStencil(I)}_initColor(A,_){const I=this._renderer,B=I.gl,T=B.createFramebuffer();if(_.resolveTargetFramebuffer=T,B.bindFramebuffer(B.FRAMEBUFFER,T),_.width=A.colorTexture.source.pixelWidth,_.height=A.colorTexture.source.pixelHeight,A.colorTextures.forEach((R,P)=>{const D=R.source;D.antialias&&(I.context.supports.msaa?_.msaa=!0:warn$1("[RenderTexture] Antialiasing on textures is not supported in WebGL1")),I.texture.bindSource(D,0);const L=I.texture.getGlSource(D).texture;B.framebufferTexture2D(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0+P,3553,L,0)}),_.msaa){const R=B.createFramebuffer();_.framebuffer=R,B.bindFramebuffer(B.FRAMEBUFFER,R),A.colorTextures.forEach((P,D)=>{const F=B.createRenderbuffer();_.msaaRenderBuffer[D]=F})}else _.framebuffer=T;this._resizeColor(A,_)}_resizeColor(A,_){const I=A.colorTexture.source;if(_.width=I.pixelWidth,_.height=I.pixelHeight,A.colorTextures.forEach((B,T)=>{T!==0&&B.source.resize(I.width,I.height,I._resolution)}),_.msaa){const B=this._renderer,T=B.gl,R=_.framebuffer;T.bindFramebuffer(T.FRAMEBUFFER,R),A.colorTextures.forEach((P,D)=>{const F=P.source;B.texture.bindSource(F,0);const U=B.texture.getGlSource(F).internalFormat,V=_.msaaRenderBuffer[D];T.bindRenderbuffer(T.RENDERBUFFER,V),T.renderbufferStorageMultisample(T.RENDERBUFFER,4,U,F.pixelWidth,F.pixelHeight),T.framebufferRenderbuffer(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0+D,T.RENDERBUFFER,V)})}}_initStencil(A){if(A.framebuffer===null)return;const _=this._renderer.gl,I=_.createRenderbuffer();A.depthStencilRenderBuffer=I,_.bindRenderbuffer(_.RENDERBUFFER,I),_.framebufferRenderbuffer(_.FRAMEBUFFER,_.DEPTH_STENCIL_ATTACHMENT,_.RENDERBUFFER,I),this._resizeStencil(A)}_resizeStencil(A){const _=this._renderer.gl;_.bindRenderbuffer(_.RENDERBUFFER,A.depthStencilRenderBuffer),A.msaa?_.renderbufferStorageMultisample(_.RENDERBUFFER,4,_.DEPTH24_STENCIL8,A.width,A.height):_.renderbufferStorage(_.RENDERBUFFER,this._renderer.context.webGLVersion===2?_.DEPTH24_STENCIL8:_.DEPTH_STENCIL,A.width,A.height)}prerender(A){const _=A.colorTexture.resource;this._renderer.context.multiView&&CanvasSource.test(_)&&this._renderer.context.ensureCanvasSize(_)}postrender(A){if(this._renderer.context.multiView&&CanvasSource.test(A.colorTexture.resource)){const _=this._renderer.context.canvas,I=A.colorTexture;I.context2D.drawImage(_,0,I.pixelHeight-_.height)}}}function calculateProjection(E,A,_,I,B,T){const R=T?1:-1;return E.identity(),E.a=1/I*2,E.d=R*(1/B*2),E.tx=-1-A*E.a,E.ty=-R-_*E.d,E}const canvasCache=new Map;function getCanvasTexture(E,A){if(!canvasCache.has(E)){const _=new Texture({source:new CanvasSource({resource:E,...A})}),I=()=>{canvasCache.get(E)===_&&canvasCache.delete(E)};_.once("destroy",I),_.source.once("destroy",I),canvasCache.set(E,_)}return canvasCache.get(E)}function hasCachedCanvasTexture(E){return canvasCache.has(E)}function isRenderingToScreen(E){const A=E.colorTexture.source.resource;return globalThis.HTMLCanvasElement&&A instanceof HTMLCanvasElement&&document.body.contains(A)}const _RenderTarget=class vn{constructor(A={}){if(this.uid=uid$1("renderTarget"),this.colorTextures=[],this.dirtyId=0,this.isRoot=!1,this._size=new Float32Array(2),this._managedColorTextures=!1,A={...vn.defaultOptions,...A},this.stencil=A.stencil,this.depth=A.depth,this.isRoot=A.isRoot,typeof A.colorTextures=="number"){this._managedColorTextures=!0;for(let _=0;_<A.colorTextures;_++)this.colorTextures.push(new TextureSource({width:A.width,height:A.height,resolution:A.resolution,antialias:A.antialias}))}else{this.colorTextures=[...A.colorTextures.map(I=>I.source)];const _=this.colorTexture.source;this.resize(_.width,_.height,_._resolution)}this.colorTexture.source.on("resize",this.onSourceResize,this),(A.depthStencilTexture||this.stencil)&&(A.depthStencilTexture instanceof Texture||A.depthStencilTexture instanceof TextureSource?this.depthStencilTexture=A.depthStencilTexture.source:this.ensureDepthStencilTexture())}get size(){const A=this._size;return A[0]=this.pixelWidth,A[1]=this.pixelHeight,A}get width(){return this.colorTexture.source.width}get height(){return this.colorTexture.source.height}get pixelWidth(){return this.colorTexture.source.pixelWidth}get pixelHeight(){return this.colorTexture.source.pixelHeight}get resolution(){return this.colorTexture.source._resolution}get colorTexture(){return this.colorTextures[0]}onSourceResize(A){this.resize(A.width,A.height,A._resolution,!0)}ensureDepthStencilTexture(){this.depthStencilTexture||(this.depthStencilTexture=new TextureSource({width:this.width,height:this.height,resolution:this.resolution,format:"depth24plus-stencil8",autoGenerateMipmaps:!1,antialias:!1,mipLevelCount:1}))}resize(A,_,I=this.resolution,B=!1){this.dirtyId++,this.colorTextures.forEach((T,R)=>{B&&R===0||T.source.resize(A,_,I)}),this.depthStencilTexture&&this.depthStencilTexture.source.resize(A,_,I)}destroy(){this.colorTexture.source.off("resize",this.onSourceResize,this),this._managedColorTextures&&this.colorTextures.forEach(A=>{A.destroy()}),this.depthStencilTexture&&(this.depthStencilTexture.destroy(),delete this.depthStencilTexture)}};_RenderTarget.defaultOptions={width:0,height:0,resolution:1,colorTextures:1,stencil:!1,depth:!1,antialias:!1,isRoot:!1};let RenderTarget=_RenderTarget;class RenderTargetSystem{constructor(A){this.rootViewPort=new Rectangle,this.viewport=new Rectangle,this.onRenderTargetChange=new SystemRunner("onRenderTargetChange"),this.projectionMatrix=new Matrix,this.defaultClearColor=[0,0,0,0],this._renderSurfaceToRenderTargetHash=new Map,this._gpuRenderTargetHash=Object.create(null),this._renderTargetStack=[],this._renderer=A,A.renderableGC.addManagedHash(this,"_gpuRenderTargetHash")}finishRenderPass(){this.adaptor.finishRenderPass(this.renderTarget)}renderStart({target:A,clear:_,clearColor:I,frame:B}){this._renderTargetStack.length=0,this.push(A,_,I,B),this.rootViewPort.copyFrom(this.viewport),this.rootRenderTarget=this.renderTarget,this.renderingToScreen=isRenderingToScreen(this.rootRenderTarget),this.adaptor.prerender?.(this.rootRenderTarget)}postrender(){this.adaptor.postrender?.(this.rootRenderTarget)}bind(A,_=!0,I,B){const T=this.getRenderTarget(A),R=this.renderTarget!==T;this.renderTarget=T,this.renderSurface=A;const P=this.getGpuRenderTarget(T);(T.pixelWidth!==P.width||T.pixelHeight!==P.height)&&(this.adaptor.resizeGpuRenderTarget(T),P.width=T.pixelWidth,P.height=T.pixelHeight);const D=T.colorTexture,F=this.viewport,L=D.pixelWidth,U=D.pixelHeight;if(!B&&A instanceof Texture&&(B=A.frame),B){const V=D._resolution;F.x=B.x*V+.5|0,F.y=B.y*V+.5|0,F.width=B.width*V+.5|0,F.height=B.height*V+.5|0}else F.x=0,F.y=0,F.width=L,F.height=U;return calculateProjection(this.projectionMatrix,0,0,F.width/D.resolution,F.height/D.resolution,!T.isRoot),this.adaptor.startRenderPass(T,_,I,F),R&&this.onRenderTargetChange.emit(T),T}clear(A,_=CLEAR.ALL,I){_&&(A&&(A=this.getRenderTarget(A)),this.adaptor.clear(A||this.renderTarget,_,I,this.viewport))}contextChange(){this._gpuRenderTargetHash=Object.create(null)}push(A,_=CLEAR.ALL,I,B){const T=this.bind(A,_,I,B);return this._renderTargetStack.push({renderTarget:T,frame:B}),T}pop(){this._renderTargetStack.pop();const A=this._renderTargetStack[this._renderTargetStack.length-1];this.bind(A.renderTarget,!1,null,A.frame)}getRenderTarget(A){return A.isTexture&&(A=A.source),this._renderSurfaceToRenderTargetHash.get(A)??this._initRenderTarget(A)}copyToTexture(A,_,I,B,T){I.x<0&&(B.width+=I.x,T.x-=I.x,I.x=0),I.y<0&&(B.height+=I.y,T.y-=I.y,I.y=0);const{pixelWidth:R,pixelHeight:P}=A;return B.width=Math.min(B.width,R-I.x),B.height=Math.min(B.height,P-I.y),this.adaptor.copyToTexture(A,_,I,B,T)}ensureDepthStencil(){this.renderTarget.stencil||(this.renderTarget.stencil=!0,this.adaptor.startRenderPass(this.renderTarget,!1,null,this.viewport))}destroy(){this._renderer=null,this._renderSurfaceToRenderTargetHash.forEach((A,_)=>{A!==_&&A.destroy()}),this._renderSurfaceToRenderTargetHash.clear(),this._gpuRenderTargetHash=Object.create(null)}_initRenderTarget(A){let _=null;return CanvasSource.test(A)&&(A=getCanvasTexture(A).source),A instanceof RenderTarget?_=A:A instanceof TextureSource&&(_=new RenderTarget({colorTextures:[A]}),A.source instanceof CanvasSource&&(_.isRoot=!0),A.once("destroy",()=>{_.destroy(),this._renderSurfaceToRenderTargetHash.delete(A);const I=this._gpuRenderTargetHash[_.uid];I&&(this._gpuRenderTargetHash[_.uid]=null,this.adaptor.destroyGpuRenderTarget(I))})),this._renderSurfaceToRenderTargetHash.set(A,_),_}getGpuRenderTarget(A){return this._gpuRenderTargetHash[A.uid]||(this._gpuRenderTargetHash[A.uid]=this.adaptor.initGpuRenderTarget(A))}resetState(){this.renderTarget=null,this.renderSurface=null}}class GlRenderTargetSystem extends RenderTargetSystem{constructor(A){super(A),this.adaptor=new GlRenderTargetAdaptor,this.adaptor.init(A,this)}}GlRenderTargetSystem.extension={type:[ExtensionType.WebGLSystem],name:"renderTarget"};class BufferResource extends EventEmitter{constructor({buffer:A,offset:_,size:I}){super(),this.uid=uid$1("buffer"),this._resourceType="bufferResource",this._touched=0,this._resourceId=uid$1("resource"),this._bufferResource=!0,this.destroyed=!1,this.buffer=A,this.offset=_|0,this.size=I,this.buffer.on("change",this.onBufferChange,this)}onBufferChange(){this._resourceId=uid$1("resource"),this.emit("change",this)}destroy(A=!1){this.destroyed=!0,A&&this.buffer.destroy(),this.emit("change",this),this.buffer=null}}function generateShaderSyncCode(E,A){const _=[],I=[`
        var g = s.groups;
        var sS = r.shader;
        var p = s.glProgram;
        var ugS = r.uniformGroup;
        var resources;
    `];let B=!1,T=0;const R=A._getProgramData(E.glProgram);for(const D in E.groups){const F=E.groups[D];_.push(`
            resources = g[${D}].resources;
        `);for(const L in F.resources){const U=F.resources[L];if(U instanceof UniformGroup)if(U.ubo){const V=E._uniformBindMap[D][Number(L)];_.push(`
                        sS.bindUniformBlock(
                            resources[${L}],
                            '${V}',
                            ${E.glProgram._uniformBlockData[V].index}
                        );
                    `)}else _.push(`
                        ugS.updateUniformGroup(resources[${L}], p, sD);
                    `);else if(U instanceof BufferResource){const V=E._uniformBindMap[D][Number(L)];_.push(`
                    sS.bindUniformBlock(
                        resources[${L}],
                        '${V}',
                        ${E.glProgram._uniformBlockData[V].index}
                    );
                `)}else if(U instanceof TextureSource){const V=E._uniformBindMap[D][L],K=R.uniformData[V];K&&(B||(B=!0,I.push(`
                        var tS = r.texture;
                        `)),A._gl.uniform1i(K.location,T),_.push(`
                        tS.bind(resources[${L}], ${T});
                    `),T++)}}}const P=[...I,..._].join(`
`);return new Function("r","s","sD",P)}class IGLUniformData{}class GlProgramData{constructor(A,_){this.program=A,this.uniformData=_,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBlockBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBlockBindings=null,this.program=null}}function compileShader(E,A,_){const I=E.createShader(A);return E.shaderSource(I,_),E.compileShader(I),I}function booleanArray(E){const A=new Array(E);for(let _=0;_<A.length;_++)A[_]=!1;return A}function defaultValue(E,A){switch(E){case"float":return 0;case"vec2":return new Float32Array(2*A);case"vec3":return new Float32Array(3*A);case"vec4":return new Float32Array(4*A);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*A);case"ivec3":return new Int32Array(3*A);case"ivec4":return new Int32Array(4*A);case"uvec2":return new Uint32Array(2*A);case"uvec3":return new Uint32Array(3*A);case"uvec4":return new Uint32Array(4*A);case"bool":return!1;case"bvec2":return booleanArray(2*A);case"bvec3":return booleanArray(3*A);case"bvec4":return booleanArray(4*A);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}let GL_TABLE=null;const GL_TO_GLSL_TYPES={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"},GLSL_TO_VERTEX_TYPES={float:"float32",vec2:"float32x2",vec3:"float32x3",vec4:"float32x4",int:"sint32",ivec2:"sint32x2",ivec3:"sint32x3",ivec4:"sint32x4",uint:"uint32",uvec2:"uint32x2",uvec3:"uint32x3",uvec4:"uint32x4",bool:"uint32",bvec2:"uint32x2",bvec3:"uint32x3",bvec4:"uint32x4"};function mapType(E,A){if(!GL_TABLE){const _=Object.keys(GL_TO_GLSL_TYPES);GL_TABLE={};for(let I=0;I<_.length;++I){const B=_[I];GL_TABLE[E[B]]=GL_TO_GLSL_TYPES[B]}}return GL_TABLE[A]}function mapGlToVertexFormat(E,A){const _=mapType(E,A);return GLSL_TO_VERTEX_TYPES[_]||"float32"}function extractAttributesFromGlProgram(E,A,_=!1){const I={},B=A.getProgramParameter(E,A.ACTIVE_ATTRIBUTES);for(let R=0;R<B;R++){const P=A.getActiveAttrib(E,R);if(P.name.startsWith("gl_"))continue;const D=mapGlToVertexFormat(A,P.type);I[P.name]={location:0,format:D,stride:getAttributeInfoFromFormat(D).stride,offset:0,instance:!1,start:0}}const T=Object.keys(I);if(_){T.sort((R,P)=>R>P?1:-1);for(let R=0;R<T.length;R++)I[T[R]].location=R,A.bindAttribLocation(E,R,T[R]);A.linkProgram(E)}else for(let R=0;R<T.length;R++)I[T[R]].location=A.getAttribLocation(E,T[R]);return I}function getUboData(E,A){if(!A.ACTIVE_UNIFORM_BLOCKS)return{};const _={},I=A.getProgramParameter(E,A.ACTIVE_UNIFORM_BLOCKS);for(let B=0;B<I;B++){const T=A.getActiveUniformBlockName(E,B),R=A.getUniformBlockIndex(E,T),P=A.getActiveUniformBlockParameter(E,B,A.UNIFORM_BLOCK_DATA_SIZE);_[T]={name:T,index:R,size:P}}return _}function getUniformData(E,A){const _={},I=A.getProgramParameter(E,A.ACTIVE_UNIFORMS);for(let B=0;B<I;B++){const T=A.getActiveUniform(E,B),R=T.name.replace(/\[.*?\]$/,""),P=!!T.name.match(/\[.*?\]$/),D=mapType(A,T.type);_[R]={name:R,index:B,type:D,size:T.size,isArray:P,value:defaultValue(D,T.size)}}return _}function logPrettyShaderError(E,A){const _=E.getShaderSource(A).split(`
`).map((F,L)=>`${L}: ${F}`),I=E.getShaderInfoLog(A),B=I.split(`
`),T={},R=B.map(F=>parseFloat(F.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(F=>F&&!T[F]?(T[F]=!0,!0):!1),P=[""];R.forEach(F=>{_[F-1]=`%c${_[F-1]}%c`,P.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const D=_.join(`
`);P[0]=D,console.error(I),console.groupCollapsed("click to view full shader code"),console.warn(...P),console.groupEnd()}function logProgramError(E,A,_,I){E.getProgramParameter(A,E.LINK_STATUS)||(E.getShaderParameter(_,E.COMPILE_STATUS)||logPrettyShaderError(E,_),E.getShaderParameter(I,E.COMPILE_STATUS)||logPrettyShaderError(E,I),console.error("PixiJS Error: Could not initialize shader."),E.getProgramInfoLog(A)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",E.getProgramInfoLog(A)))}function generateProgram(E,A){const _=compileShader(E,E.VERTEX_SHADER,A.vertex),I=compileShader(E,E.FRAGMENT_SHADER,A.fragment),B=E.createProgram();E.attachShader(B,_),E.attachShader(B,I);const T=A.transformFeedbackVaryings;T&&(typeof E.transformFeedbackVaryings!="function"?warn$1("TransformFeedback is not supported but TransformFeedbackVaryings are given."):E.transformFeedbackVaryings(B,T.names,T.bufferMode==="separate"?E.SEPARATE_ATTRIBS:E.INTERLEAVED_ATTRIBS)),E.linkProgram(B),E.getProgramParameter(B,E.LINK_STATUS)||logProgramError(E,B,_,I),A._attributeData=extractAttributesFromGlProgram(B,E,!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(A.vertex)),A._uniformData=getUniformData(B,E),A._uniformBlockData=getUboData(B,E),E.deleteShader(_),E.deleteShader(I);const R={};for(const D in A._uniformData){const F=A._uniformData[D];R[D]={location:E.getUniformLocation(B,D),value:defaultValue(F.type,F.size)}}return new GlProgramData(B,R)}const defaultSyncData={textureCount:0,blockIndex:0};class GlShaderSystem{constructor(A){this._activeProgram=null,this._programDataHash=Object.create(null),this._shaderSyncFunctions=Object.create(null),this._renderer=A,this._renderer.renderableGC.addManagedHash(this,"_programDataHash")}contextChange(A){this._gl=A,this._programDataHash=Object.create(null),this._shaderSyncFunctions=Object.create(null),this._activeProgram=null}bind(A,_){if(this._setProgram(A.glProgram),_)return;defaultSyncData.textureCount=0,defaultSyncData.blockIndex=0;let I=this._shaderSyncFunctions[A.glProgram._key];I||(I=this._shaderSyncFunctions[A.glProgram._key]=this._generateShaderSync(A,this)),this._renderer.buffer.nextBindBase(!!A.glProgram.transformFeedbackVaryings),I(this._renderer,A,defaultSyncData)}updateUniformGroup(A){this._renderer.uniformGroup.updateUniformGroup(A,this._activeProgram,defaultSyncData)}bindUniformBlock(A,_,I=0){const B=this._renderer.buffer,T=this._getProgramData(this._activeProgram),R=A._bufferResource;R||this._renderer.ubo.updateUniformGroup(A);const P=A.buffer,D=B.updateBuffer(P),F=B.freeLocationForBufferBase(D);if(R){const{offset:U,size:V}=A;U===0&&V===P.data.byteLength?B.bindBufferBase(D,F):B.bindBufferRange(D,F,U)}else B.getLastBindBaseLocation(D)!==F&&B.bindBufferBase(D,F);const L=this._activeProgram._uniformBlockData[_].index;T.uniformBlockBindings[I]!==F&&(T.uniformBlockBindings[I]=F,this._renderer.gl.uniformBlockBinding(T.program,L,F))}_setProgram(A){if(this._activeProgram===A)return;this._activeProgram=A;const _=this._getProgramData(A);this._gl.useProgram(_.program)}_getProgramData(A){return this._programDataHash[A._key]||this._createProgramData(A)}_createProgramData(A){const _=A._key;return this._programDataHash[_]=generateProgram(this._gl,A),this._programDataHash[_]}destroy(){for(const A of Object.keys(this._programDataHash))this._programDataHash[A].destroy(),this._programDataHash[A]=null;this._programDataHash=null}_generateShaderSync(A,_){return generateShaderSyncCode(A,_)}resetState(){this._activeProgram=null}}GlShaderSystem.extension={type:[ExtensionType.WebGLSystem],name:"shader"};const UNIFORM_TO_SINGLE_SETTERS={f32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1f(location, v);
        }`,"vec2<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2f(location, v[0], v[1]);
        }`,"vec3<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3f(location, v[0], v[1], v[2]);
        }`,"vec4<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4f(location, v[0], v[1], v[2], v[3]);
        }`,i32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1i(location, v);
        }`,"vec2<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2i(location, v[0], v[1]);
        }`,"vec3<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3i(location, v[0], v[1], v[2]);
        }`,"vec4<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4i(location, v[0], v[1], v[2], v[3]);
        }`,u32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1ui(location, v);
        }`,"vec2<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2ui(location, v[0], v[1]);
        }`,"vec3<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3ui(location, v[0], v[1], v[2]);
        }`,"vec4<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
        }`,bool:`if (cv !== v) {
            cu.value = v;
            gl.uniform1i(location, v);
        }`,"vec2<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2i(location, v[0], v[1]);
        }`,"vec3<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3i(location, v[0], v[1], v[2]);
        }`,"vec4<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4i(location, v[0], v[1], v[2], v[3]);
        }`,"mat2x2<f32>":"gl.uniformMatrix2fv(location, false, v);","mat3x3<f32>":"gl.uniformMatrix3fv(location, false, v);","mat4x4<f32>":"gl.uniformMatrix4fv(location, false, v);"},UNIFORM_TO_ARRAY_SETTERS={f32:"gl.uniform1fv(location, v);","vec2<f32>":"gl.uniform2fv(location, v);","vec3<f32>":"gl.uniform3fv(location, v);","vec4<f32>":"gl.uniform4fv(location, v);","mat2x2<f32>":"gl.uniformMatrix2fv(location, false, v);","mat3x3<f32>":"gl.uniformMatrix3fv(location, false, v);","mat4x4<f32>":"gl.uniformMatrix4fv(location, false, v);",i32:"gl.uniform1iv(location, v);","vec2<i32>":"gl.uniform2iv(location, v);","vec3<i32>":"gl.uniform3iv(location, v);","vec4<i32>":"gl.uniform4iv(location, v);",u32:"gl.uniform1iv(location, v);","vec2<u32>":"gl.uniform2iv(location, v);","vec3<u32>":"gl.uniform3iv(location, v);","vec4<u32>":"gl.uniform4iv(location, v);",bool:"gl.uniform1iv(location, v);","vec2<bool>":"gl.uniform2iv(location, v);","vec3<bool>":"gl.uniform3iv(location, v);","vec4<bool>":"gl.uniform4iv(location, v);"};function generateUniformsSync(E,A){const _=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
        var name = null;
    `];for(const I in E.uniforms){if(!A[I]){E.uniforms[I]instanceof UniformGroup?E.uniforms[I].ubo?_.push(`
                        renderer.shader.bindUniformBlock(uv.${I}, "${I}");
                    `):_.push(`
                        renderer.shader.updateUniformGroup(uv.${I});
                    `):E.uniforms[I]instanceof BufferResource&&_.push(`
                        renderer.shader.bindBufferResource(uv.${I}, "${I}");
                    `);continue}const B=E.uniformStructures[I];let T=!1;for(let R=0;R<uniformParsers.length;R++){const P=uniformParsers[R];if(B.type===P.type&&P.test(B)){_.push(`name = "${I}";`,uniformParsers[R].uniform),T=!0;break}}if(!T){const P=(B.size===1?UNIFORM_TO_SINGLE_SETTERS:UNIFORM_TO_ARRAY_SETTERS)[B.type].replace("location",`ud["${I}"].location`);_.push(`
            cu = ud["${I}"];
            cv = cu.value;
            v = uv["${I}"];
            ${P};`)}}return new Function("ud","uv","renderer","syncData",_.join(`
`))}class GlUniformGroupSystem{constructor(A){this._cache={},this._uniformGroupSyncHash={},this._renderer=A,this.gl=null,this._cache={}}contextChange(A){this.gl=A}updateUniformGroup(A,_,I){const B=this._renderer.shader._getProgramData(_);(!A.isStatic||A._dirtyId!==B.uniformDirtyGroups[A.uid])&&(B.uniformDirtyGroups[A.uid]=A._dirtyId,this._getUniformSyncFunction(A,_)(B.uniformData,A.uniforms,this._renderer,I))}_getUniformSyncFunction(A,_){return this._uniformGroupSyncHash[A._signature]?.[_._key]||this._createUniformSyncFunction(A,_)}_createUniformSyncFunction(A,_){const I=this._uniformGroupSyncHash[A._signature]||(this._uniformGroupSyncHash[A._signature]={}),B=this._getSignature(A,_._uniformData,"u");return this._cache[B]||(this._cache[B]=this._generateUniformsSync(A,_._uniformData)),I[_._key]=this._cache[B],I[_._key]}_generateUniformsSync(A,_){return generateUniformsSync(A,_)}_getSignature(A,_,I){const B=A.uniforms,T=[`${I}-`];for(const R in B)T.push(R),_[R]&&T.push(_[R].type);return T.join("-")}destroy(){this._renderer=null,this._cache=null}}GlUniformGroupSystem.extension={type:[ExtensionType.WebGLSystem],name:"uniformGroup"};function migrateFragmentFromV7toV8(E){return E=E.replaceAll("texture2D","texture").replaceAll("gl_FragColor","finalColor").replaceAll("varying","in"),E=`
        out vec4 finalColor;
    ${E}
    `,E}const GLSL_TO_SIZE={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function mapSize(E){return GLSL_TO_SIZE[E]}function mapWebGLBlendModesToPixi(E){const A={};if(A.normal=[E.ONE,E.ONE_MINUS_SRC_ALPHA],A.add=[E.ONE,E.ONE],A.multiply=[E.DST_COLOR,E.ONE_MINUS_SRC_ALPHA,E.ONE,E.ONE_MINUS_SRC_ALPHA],A.screen=[E.ONE,E.ONE_MINUS_SRC_COLOR,E.ONE,E.ONE_MINUS_SRC_ALPHA],A.none=[0,0],A["normal-npm"]=[E.SRC_ALPHA,E.ONE_MINUS_SRC_ALPHA,E.ONE,E.ONE_MINUS_SRC_ALPHA],A["add-npm"]=[E.SRC_ALPHA,E.ONE,E.ONE,E.ONE],A["screen-npm"]=[E.SRC_ALPHA,E.ONE_MINUS_SRC_COLOR,E.ONE,E.ONE_MINUS_SRC_ALPHA],A.erase=[E.ZERO,E.ONE_MINUS_SRC_ALPHA],!(E instanceof DOMAdapter.get().getWebGLRenderingContext()))A.min=[E.ONE,E.ONE,E.ONE,E.ONE,E.MIN,E.MIN],A.max=[E.ONE,E.ONE,E.ONE,E.ONE,E.MAX,E.MAX];else{const I=E.getExtension("EXT_blend_minmax");I&&(A.min=[E.ONE,E.ONE,E.ONE,E.ONE,I.MIN_EXT,I.MIN_EXT],A.max=[E.ONE,E.ONE,E.ONE,E.ONE,I.MAX_EXT,I.MAX_EXT])}return A}const BLEND=0,OFFSET=1,CULLING=2,DEPTH_TEST=3,WINDING=4,DEPTH_MASK=5,_GlStateSystem=class Li{constructor(A){this._invertFrontFace=!1,this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode="none",this._blendEq=!1,this.map=[],this.map[BLEND]=this.setBlend,this.map[OFFSET]=this.setOffset,this.map[CULLING]=this.setCullFace,this.map[DEPTH_TEST]=this.setDepthTest,this.map[WINDING]=this.setFrontFace,this.map[DEPTH_MASK]=this.setDepthMask,this.checks=[],this.defaultState=State$1.for2d(),A.renderTarget.onRenderTargetChange.add(this)}onRenderTargetChange(A){this._invertFrontFace=!A.isRoot,this._cullFace?this.setFrontFace(this._frontFace):this._frontFaceDirty=!0}contextChange(A){this.gl=A,this.blendModesMap=mapWebGLBlendModesToPixi(A),this.resetState()}set(A){if(A||(A=this.defaultState),this.stateId!==A.data){let _=this.stateId^A.data,I=0;for(;_;)_&1&&this.map[I].call(this,!!(A.data&1<<I)),_>>=1,I++;this.stateId=A.data}for(let _=0;_<this.checks.length;_++)this.checks[_](this,A)}forceState(A){A||(A=this.defaultState);for(let _=0;_<this.map.length;_++)this.map[_].call(this,!!(A.data&1<<_));for(let _=0;_<this.checks.length;_++)this.checks[_](this,A);this.stateId=A.data}setBlend(A){this._updateCheck(Li._checkBlendMode,A),this.gl[A?"enable":"disable"](this.gl.BLEND)}setOffset(A){this._updateCheck(Li._checkPolygonOffset,A),this.gl[A?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(A){this.gl[A?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(A){this.gl.depthMask(A)}setCullFace(A){this._cullFace=A,this.gl[A?"enable":"disable"](this.gl.CULL_FACE),this._cullFace&&this._frontFaceDirty&&this.setFrontFace(this._frontFace)}setFrontFace(A){this._frontFace=A,this._frontFaceDirty=!1;const _=this._invertFrontFace?!A:A;this._glFrontFace!==_&&(this._glFrontFace=_,this.gl.frontFace(this.gl[_?"CW":"CCW"]))}setBlendMode(A){if(this.blendModesMap[A]||(A="normal"),A===this.blendMode)return;this.blendMode=A;const _=this.blendModesMap[A],I=this.gl;_.length===2?I.blendFunc(_[0],_[1]):I.blendFuncSeparate(_[0],_[1],_[2],_[3]),_.length===6?(this._blendEq=!0,I.blendEquationSeparate(_[4],_[5])):this._blendEq&&(this._blendEq=!1,I.blendEquationSeparate(I.FUNC_ADD,I.FUNC_ADD))}setPolygonOffset(A,_){this.gl.polygonOffset(A,_)}resetState(){this._glFrontFace=!1,this._frontFace=!1,this._cullFace=!1,this._frontFaceDirty=!1,this._invertFrontFace=!1,this.gl.frontFace(this.gl.CCW),this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode="",this.setBlendMode("normal")}_updateCheck(A,_){const I=this.checks.indexOf(A);_&&I===-1?this.checks.push(A):!_&&I!==-1&&this.checks.splice(I,1)}static _checkBlendMode(A,_){A.setBlendMode(_.blendMode)}static _checkPolygonOffset(A,_){A.setPolygonOffset(1,_.polygonOffset)}destroy(){this.gl=null,this.checks.length=0}};_GlStateSystem.extension={type:[ExtensionType.WebGLSystem],name:"state"};let GlStateSystem=_GlStateSystem;class GlTexture{constructor(A){this.target=GL_TARGETS.TEXTURE_2D,this.texture=A,this.width=-1,this.height=-1,this.type=GL_TYPES.UNSIGNED_BYTE,this.internalFormat=GL_FORMATS.RGBA,this.format=GL_FORMATS.RGBA,this.samplerType=0}}const glUploadBufferImageResource={id:"buffer",upload(E,A,_){A.width===E.width||A.height===E.height?_.texSubImage2D(_.TEXTURE_2D,0,0,0,E.width,E.height,A.format,A.type,E.resource):_.texImage2D(A.target,0,A.internalFormat,E.width,E.height,0,A.format,A.type,E.resource),A.width=E.width,A.height=E.height}},compressedFormatMap={"bc1-rgba-unorm":!0,"bc1-rgba-unorm-srgb":!0,"bc2-rgba-unorm":!0,"bc2-rgba-unorm-srgb":!0,"bc3-rgba-unorm":!0,"bc3-rgba-unorm-srgb":!0,"bc4-r-unorm":!0,"bc4-r-snorm":!0,"bc5-rg-unorm":!0,"bc5-rg-snorm":!0,"bc6h-rgb-ufloat":!0,"bc6h-rgb-float":!0,"bc7-rgba-unorm":!0,"bc7-rgba-unorm-srgb":!0,"etc2-rgb8unorm":!0,"etc2-rgb8unorm-srgb":!0,"etc2-rgb8a1unorm":!0,"etc2-rgb8a1unorm-srgb":!0,"etc2-rgba8unorm":!0,"etc2-rgba8unorm-srgb":!0,"eac-r11unorm":!0,"eac-r11snorm":!0,"eac-rg11unorm":!0,"eac-rg11snorm":!0,"astc-4x4-unorm":!0,"astc-4x4-unorm-srgb":!0,"astc-5x4-unorm":!0,"astc-5x4-unorm-srgb":!0,"astc-5x5-unorm":!0,"astc-5x5-unorm-srgb":!0,"astc-6x5-unorm":!0,"astc-6x5-unorm-srgb":!0,"astc-6x6-unorm":!0,"astc-6x6-unorm-srgb":!0,"astc-8x5-unorm":!0,"astc-8x5-unorm-srgb":!0,"astc-8x6-unorm":!0,"astc-8x6-unorm-srgb":!0,"astc-8x8-unorm":!0,"astc-8x8-unorm-srgb":!0,"astc-10x5-unorm":!0,"astc-10x5-unorm-srgb":!0,"astc-10x6-unorm":!0,"astc-10x6-unorm-srgb":!0,"astc-10x8-unorm":!0,"astc-10x8-unorm-srgb":!0,"astc-10x10-unorm":!0,"astc-10x10-unorm-srgb":!0,"astc-12x10-unorm":!0,"astc-12x10-unorm-srgb":!0,"astc-12x12-unorm":!0,"astc-12x12-unorm-srgb":!0},glUploadCompressedTextureResource={id:"compressed",upload(E,A,_){_.pixelStorei(_.UNPACK_ALIGNMENT,4);let I=E.pixelWidth,B=E.pixelHeight;const T=!!compressedFormatMap[E.format];for(let R=0;R<E.resource.length;R++){const P=E.resource[R];T?_.compressedTexImage2D(_.TEXTURE_2D,R,A.internalFormat,I,B,0,P):_.texImage2D(_.TEXTURE_2D,R,A.internalFormat,I,B,0,A.format,A.type,P),I=Math.max(I>>1,1),B=Math.max(B>>1,1)}}},glUploadImageResource={id:"image",upload(E,A,_,I){const B=A.width,T=A.height,R=E.pixelWidth,P=E.pixelHeight,D=E.resourceWidth,F=E.resourceHeight;D<R||F<P?((B!==R||T!==P)&&_.texImage2D(A.target,0,A.internalFormat,R,P,0,A.format,A.type,null),I===2?_.texSubImage2D(_.TEXTURE_2D,0,0,0,D,F,A.format,A.type,E.resource):_.texSubImage2D(_.TEXTURE_2D,0,0,0,A.format,A.type,E.resource)):B===R&&T===P?_.texSubImage2D(_.TEXTURE_2D,0,0,0,A.format,A.type,E.resource):I===2?_.texImage2D(A.target,0,A.internalFormat,R,P,0,A.format,A.type,E.resource):_.texImage2D(A.target,0,A.internalFormat,A.format,A.type,E.resource),A.width=R,A.height=P}},glUploadVideoResource={id:"video",upload(E,A,_,I){if(!E.isValid){_.texImage2D(A.target,0,A.internalFormat,1,1,0,A.format,A.type,null);return}glUploadImageResource.upload(E,A,_,I)}},scaleModeToGlFilter={linear:9729,nearest:9728},mipmapScaleModeToGlFilter={linear:{linear:9987,nearest:9985},nearest:{linear:9986,nearest:9984}},wrapModeToGlAddress={"clamp-to-edge":33071,repeat:10497,"mirror-repeat":33648},compareModeToGlCompare={never:512,less:513,equal:514,"less-equal":515,greater:516,"not-equal":517,"greater-equal":518,always:519};function applyStyleParams(E,A,_,I,B,T,R,P){const D=T;if(!P||E.addressModeU!=="repeat"||E.addressModeV!=="repeat"||E.addressModeW!=="repeat"){const F=wrapModeToGlAddress[R?"clamp-to-edge":E.addressModeU],L=wrapModeToGlAddress[R?"clamp-to-edge":E.addressModeV],U=wrapModeToGlAddress[R?"clamp-to-edge":E.addressModeW];A[B](D,A.TEXTURE_WRAP_S,F),A[B](D,A.TEXTURE_WRAP_T,L),A.TEXTURE_WRAP_R&&A[B](D,A.TEXTURE_WRAP_R,U)}if((!P||E.magFilter!=="linear")&&A[B](D,A.TEXTURE_MAG_FILTER,scaleModeToGlFilter[E.magFilter]),_){if(!P||E.mipmapFilter!=="linear"){const F=mipmapScaleModeToGlFilter[E.minFilter][E.mipmapFilter];A[B](D,A.TEXTURE_MIN_FILTER,F)}}else A[B](D,A.TEXTURE_MIN_FILTER,scaleModeToGlFilter[E.minFilter]);if(I&&E.maxAnisotropy>1){const F=Math.min(E.maxAnisotropy,A.getParameter(I.MAX_TEXTURE_MAX_ANISOTROPY_EXT));A[B](D,I.TEXTURE_MAX_ANISOTROPY_EXT,F)}E.compare&&A[B](D,A.TEXTURE_COMPARE_FUNC,compareModeToGlCompare[E.compare])}function mapFormatToGlFormat(E){return{r8unorm:E.RED,r8snorm:E.RED,r8uint:E.RED,r8sint:E.RED,r16uint:E.RED,r16sint:E.RED,r16float:E.RED,rg8unorm:E.RG,rg8snorm:E.RG,rg8uint:E.RG,rg8sint:E.RG,r32uint:E.RED,r32sint:E.RED,r32float:E.RED,rg16uint:E.RG,rg16sint:E.RG,rg16float:E.RG,rgba8unorm:E.RGBA,"rgba8unorm-srgb":E.RGBA,rgba8snorm:E.RGBA,rgba8uint:E.RGBA,rgba8sint:E.RGBA,bgra8unorm:E.RGBA,"bgra8unorm-srgb":E.RGBA,rgb9e5ufloat:E.RGB,rgb10a2unorm:E.RGBA,rg11b10ufloat:E.RGB,rg32uint:E.RG,rg32sint:E.RG,rg32float:E.RG,rgba16uint:E.RGBA,rgba16sint:E.RGBA,rgba16float:E.RGBA,rgba32uint:E.RGBA,rgba32sint:E.RGBA,rgba32float:E.RGBA,stencil8:E.STENCIL_INDEX8,depth16unorm:E.DEPTH_COMPONENT,depth24plus:E.DEPTH_COMPONENT,"depth24plus-stencil8":E.DEPTH_STENCIL,depth32float:E.DEPTH_COMPONENT,"depth32float-stencil8":E.DEPTH_STENCIL}}function mapFormatToGlInternalFormat(E,A){let _={},I=E.RGBA;return E instanceof DOMAdapter.get().getWebGLRenderingContext()?A.srgb&&(_={"rgba8unorm-srgb":A.srgb.SRGB8_ALPHA8_EXT,"bgra8unorm-srgb":A.srgb.SRGB8_ALPHA8_EXT}):(_={"rgba8unorm-srgb":E.SRGB8_ALPHA8,"bgra8unorm-srgb":E.SRGB8_ALPHA8},I=E.RGBA8),{r8unorm:E.R8,r8snorm:E.R8_SNORM,r8uint:E.R8UI,r8sint:E.R8I,r16uint:E.R16UI,r16sint:E.R16I,r16float:E.R16F,rg8unorm:E.RG8,rg8snorm:E.RG8_SNORM,rg8uint:E.RG8UI,rg8sint:E.RG8I,r32uint:E.R32UI,r32sint:E.R32I,r32float:E.R32F,rg16uint:E.RG16UI,rg16sint:E.RG16I,rg16float:E.RG16F,rgba8unorm:E.RGBA,..._,rgba8snorm:E.RGBA8_SNORM,rgba8uint:E.RGBA8UI,rgba8sint:E.RGBA8I,bgra8unorm:I,rgb9e5ufloat:E.RGB9_E5,rgb10a2unorm:E.RGB10_A2,rg11b10ufloat:E.R11F_G11F_B10F,rg32uint:E.RG32UI,rg32sint:E.RG32I,rg32float:E.RG32F,rgba16uint:E.RGBA16UI,rgba16sint:E.RGBA16I,rgba16float:E.RGBA16F,rgba32uint:E.RGBA32UI,rgba32sint:E.RGBA32I,rgba32float:E.RGBA32F,stencil8:E.STENCIL_INDEX8,depth16unorm:E.DEPTH_COMPONENT16,depth24plus:E.DEPTH_COMPONENT24,"depth24plus-stencil8":E.DEPTH24_STENCIL8,depth32float:E.DEPTH_COMPONENT32F,"depth32float-stencil8":E.DEPTH32F_STENCIL8,...A.s3tc?{"bc1-rgba-unorm":A.s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT,"bc2-rgba-unorm":A.s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT,"bc3-rgba-unorm":A.s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT}:{},...A.s3tc_sRGB?{"bc1-rgba-unorm-srgb":A.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,"bc2-rgba-unorm-srgb":A.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,"bc3-rgba-unorm-srgb":A.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}:{},...A.rgtc?{"bc4-r-unorm":A.rgtc.COMPRESSED_RED_RGTC1_EXT,"bc4-r-snorm":A.rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT,"bc5-rg-unorm":A.rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT,"bc5-rg-snorm":A.rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}:{},...A.bptc?{"bc6h-rgb-float":A.bptc.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,"bc6h-rgb-ufloat":A.bptc.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,"bc7-rgba-unorm":A.bptc.COMPRESSED_RGBA_BPTC_UNORM_EXT,"bc7-rgba-unorm-srgb":A.bptc.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT}:{},...A.etc?{"etc2-rgb8unorm":A.etc.COMPRESSED_RGB8_ETC2,"etc2-rgb8unorm-srgb":A.etc.COMPRESSED_SRGB8_ETC2,"etc2-rgb8a1unorm":A.etc.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,"etc2-rgb8a1unorm-srgb":A.etc.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,"etc2-rgba8unorm":A.etc.COMPRESSED_RGBA8_ETC2_EAC,"etc2-rgba8unorm-srgb":A.etc.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC,"eac-r11unorm":A.etc.COMPRESSED_R11_EAC,"eac-rg11unorm":A.etc.COMPRESSED_SIGNED_RG11_EAC}:{},...A.astc?{"astc-4x4-unorm":A.astc.COMPRESSED_RGBA_ASTC_4x4_KHR,"astc-4x4-unorm-srgb":A.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR,"astc-5x4-unorm":A.astc.COMPRESSED_RGBA_ASTC_5x4_KHR,"astc-5x4-unorm-srgb":A.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR,"astc-5x5-unorm":A.astc.COMPRESSED_RGBA_ASTC_5x5_KHR,"astc-5x5-unorm-srgb":A.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR,"astc-6x5-unorm":A.astc.COMPRESSED_RGBA_ASTC_6x5_KHR,"astc-6x5-unorm-srgb":A.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR,"astc-6x6-unorm":A.astc.COMPRESSED_RGBA_ASTC_6x6_KHR,"astc-6x6-unorm-srgb":A.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR,"astc-8x5-unorm":A.astc.COMPRESSED_RGBA_ASTC_8x5_KHR,"astc-8x5-unorm-srgb":A.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR,"astc-8x6-unorm":A.astc.COMPRESSED_RGBA_ASTC_8x6_KHR,"astc-8x6-unorm-srgb":A.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR,"astc-8x8-unorm":A.astc.COMPRESSED_RGBA_ASTC_8x8_KHR,"astc-8x8-unorm-srgb":A.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR,"astc-10x5-unorm":A.astc.COMPRESSED_RGBA_ASTC_10x5_KHR,"astc-10x5-unorm-srgb":A.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR,"astc-10x6-unorm":A.astc.COMPRESSED_RGBA_ASTC_10x6_KHR,"astc-10x6-unorm-srgb":A.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR,"astc-10x8-unorm":A.astc.COMPRESSED_RGBA_ASTC_10x8_KHR,"astc-10x8-unorm-srgb":A.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR,"astc-10x10-unorm":A.astc.COMPRESSED_RGBA_ASTC_10x10_KHR,"astc-10x10-unorm-srgb":A.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR,"astc-12x10-unorm":A.astc.COMPRESSED_RGBA_ASTC_12x10_KHR,"astc-12x10-unorm-srgb":A.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR,"astc-12x12-unorm":A.astc.COMPRESSED_RGBA_ASTC_12x12_KHR,"astc-12x12-unorm-srgb":A.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR}:{}}}function mapFormatToGlType(E){return{r8unorm:E.UNSIGNED_BYTE,r8snorm:E.BYTE,r8uint:E.UNSIGNED_BYTE,r8sint:E.BYTE,r16uint:E.UNSIGNED_SHORT,r16sint:E.SHORT,r16float:E.HALF_FLOAT,rg8unorm:E.UNSIGNED_BYTE,rg8snorm:E.BYTE,rg8uint:E.UNSIGNED_BYTE,rg8sint:E.BYTE,r32uint:E.UNSIGNED_INT,r32sint:E.INT,r32float:E.FLOAT,rg16uint:E.UNSIGNED_SHORT,rg16sint:E.SHORT,rg16float:E.HALF_FLOAT,rgba8unorm:E.UNSIGNED_BYTE,"rgba8unorm-srgb":E.UNSIGNED_BYTE,rgba8snorm:E.BYTE,rgba8uint:E.UNSIGNED_BYTE,rgba8sint:E.BYTE,bgra8unorm:E.UNSIGNED_BYTE,"bgra8unorm-srgb":E.UNSIGNED_BYTE,rgb9e5ufloat:E.UNSIGNED_INT_5_9_9_9_REV,rgb10a2unorm:E.UNSIGNED_INT_2_10_10_10_REV,rg11b10ufloat:E.UNSIGNED_INT_10F_11F_11F_REV,rg32uint:E.UNSIGNED_INT,rg32sint:E.INT,rg32float:E.FLOAT,rgba16uint:E.UNSIGNED_SHORT,rgba16sint:E.SHORT,rgba16float:E.HALF_FLOAT,rgba32uint:E.UNSIGNED_INT,rgba32sint:E.INT,rgba32float:E.FLOAT,stencil8:E.UNSIGNED_BYTE,depth16unorm:E.UNSIGNED_SHORT,depth24plus:E.UNSIGNED_INT,"depth24plus-stencil8":E.UNSIGNED_INT_24_8,depth32float:E.FLOAT,"depth32float-stencil8":E.FLOAT_32_UNSIGNED_INT_24_8_REV}}function unpremultiplyAlpha(E){E instanceof Uint8ClampedArray&&(E=new Uint8Array(E.buffer));const A=E.length;for(let _=0;_<A;_+=4){const I=E[_+3];if(I!==0){const B=255.001/I;E[_]=E[_]*B+.5,E[_+1]=E[_+1]*B+.5,E[_+2]=E[_+2]*B+.5}}}const BYTES_PER_PIXEL=4;class GlTextureSystem{constructor(A){this.managedTextures=[],this._glTextures=Object.create(null),this._glSamplers=Object.create(null),this._boundTextures=[],this._activeTextureLocation=-1,this._boundSamplers=Object.create(null),this._uploads={image:glUploadImageResource,buffer:glUploadBufferImageResource,video:glUploadVideoResource,compressed:glUploadCompressedTextureResource},this._premultiplyAlpha=!1,this._useSeparateSamplers=!1,this._renderer=A,this._renderer.renderableGC.addManagedHash(this,"_glTextures"),this._renderer.renderableGC.addManagedHash(this,"_glSamplers")}contextChange(A){this._gl=A,this._mapFormatToInternalFormat||(this._mapFormatToInternalFormat=mapFormatToGlInternalFormat(A,this._renderer.context.extensions),this._mapFormatToType=mapFormatToGlType(A),this._mapFormatToFormat=mapFormatToGlFormat(A)),this._glTextures=Object.create(null),this._glSamplers=Object.create(null),this._boundSamplers=Object.create(null),this._premultiplyAlpha=!1;for(let _=0;_<16;_++)this.bind(Texture.EMPTY,_)}initSource(A){this.bind(A)}bind(A,_=0){const I=A.source;A?(this.bindSource(I,_),this._useSeparateSamplers&&this._bindSampler(I.style,_)):(this.bindSource(null,_),this._useSeparateSamplers&&this._bindSampler(null,_))}bindSource(A,_=0){const I=this._gl;if(A._touched=this._renderer.textureGC.count,this._boundTextures[_]!==A){this._boundTextures[_]=A,this._activateLocation(_),A||(A=Texture.EMPTY.source);const B=this.getGlSource(A);I.bindTexture(B.target,B.texture)}}_bindSampler(A,_=0){const I=this._gl;if(!A){this._boundSamplers[_]=null,I.bindSampler(_,null);return}const B=this._getGlSampler(A);this._boundSamplers[_]!==B&&(this._boundSamplers[_]=B,I.bindSampler(_,B))}unbind(A){const _=A.source,I=this._boundTextures,B=this._gl;for(let T=0;T<I.length;T++)if(I[T]===_){this._activateLocation(T);const R=this.getGlSource(_);B.bindTexture(R.target,null),I[T]=null}}_activateLocation(A){this._activeTextureLocation!==A&&(this._activeTextureLocation=A,this._gl.activeTexture(this._gl.TEXTURE0+A))}_initSource(A){const _=this._gl,I=new GlTexture(_.createTexture());if(I.type=this._mapFormatToType[A.format],I.internalFormat=this._mapFormatToInternalFormat[A.format],I.format=this._mapFormatToFormat[A.format],A.autoGenerateMipmaps&&(this._renderer.context.supports.nonPowOf2mipmaps||A.isPowerOfTwo)){const B=Math.max(A.width,A.height);A.mipLevelCount=Math.floor(Math.log2(B))+1}return this._glTextures[A.uid]=I,this.managedTextures.includes(A)||(A.on("update",this.onSourceUpdate,this),A.on("resize",this.onSourceUpdate,this),A.on("styleChange",this.onStyleChange,this),A.on("destroy",this.onSourceDestroy,this),A.on("unload",this.onSourceUnload,this),A.on("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.push(A)),this.onSourceUpdate(A),this.updateStyle(A,!1),I}onStyleChange(A){this.updateStyle(A,!1)}updateStyle(A,_){const I=this._gl,B=this.getGlSource(A);I.bindTexture(I.TEXTURE_2D,B.texture),this._boundTextures[this._activeTextureLocation]=A,applyStyleParams(A.style,I,A.mipLevelCount>1,this._renderer.context.extensions.anisotropicFiltering,"texParameteri",I.TEXTURE_2D,!this._renderer.context.supports.nonPowOf2wrapping&&!A.isPowerOfTwo,_)}onSourceUnload(A){const _=this._glTextures[A.uid];_&&(this.unbind(A),this._glTextures[A.uid]=null,this._gl.deleteTexture(_.texture))}onSourceUpdate(A){const _=this._gl,I=this.getGlSource(A);_.bindTexture(_.TEXTURE_2D,I.texture),this._boundTextures[this._activeTextureLocation]=A;const B=A.alphaMode==="premultiply-alpha-on-upload";this._premultiplyAlpha!==B&&(this._premultiplyAlpha=B,_.pixelStorei(_.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B)),this._uploads[A.uploadMethodId]?this._uploads[A.uploadMethodId].upload(A,I,_,this._renderer.context.webGLVersion):_.texImage2D(_.TEXTURE_2D,0,_.RGBA,A.pixelWidth,A.pixelHeight,0,_.RGBA,_.UNSIGNED_BYTE,null),A.autoGenerateMipmaps&&A.mipLevelCount>1&&this.onUpdateMipmaps(A,!1)}onUpdateMipmaps(A,_=!0){_&&this.bindSource(A,0);const I=this.getGlSource(A);this._gl.generateMipmap(I.target)}onSourceDestroy(A){A.off("destroy",this.onSourceDestroy,this),A.off("update",this.onSourceUpdate,this),A.off("resize",this.onSourceUpdate,this),A.off("unload",this.onSourceUnload,this),A.off("styleChange",this.onStyleChange,this),A.off("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.splice(this.managedTextures.indexOf(A),1),this.onSourceUnload(A)}_initSampler(A){const _=this._gl,I=this._gl.createSampler();return this._glSamplers[A._resourceId]=I,applyStyleParams(A,_,this._boundTextures[this._activeTextureLocation].mipLevelCount>1,this._renderer.context.extensions.anisotropicFiltering,"samplerParameteri",I,!1,!0),this._glSamplers[A._resourceId]}_getGlSampler(A){return this._glSamplers[A._resourceId]||this._initSampler(A)}getGlSource(A){return this._glTextures[A.uid]||this._initSource(A)}generateCanvas(A){const{pixels:_,width:I,height:B}=this.getPixels(A),T=DOMAdapter.get().createCanvas();T.width=I,T.height=B;const R=T.getContext("2d");if(R){const P=R.createImageData(I,B);P.data.set(_),R.putImageData(P,0,0)}return T}getPixels(A){const _=A.source.resolution,I=A.frame,B=Math.max(Math.round(I.width*_),1),T=Math.max(Math.round(I.height*_),1),R=new Uint8Array(BYTES_PER_PIXEL*B*T),P=this._renderer,D=P.renderTarget.getRenderTarget(A),F=P.renderTarget.getGpuRenderTarget(D),L=P.gl;return L.bindFramebuffer(L.FRAMEBUFFER,F.resolveTargetFramebuffer),L.readPixels(Math.round(I.x*_),Math.round(I.y*_),B,T,L.RGBA,L.UNSIGNED_BYTE,R),{pixels:new Uint8ClampedArray(R.buffer),width:B,height:T}}destroy(){this.managedTextures.slice().forEach(A=>this.onSourceDestroy(A)),this.managedTextures=null,this._renderer=null}resetState(){this._activeTextureLocation=-1,this._boundTextures.fill(Texture.EMPTY.source),this._boundSamplers=Object.create(null);const A=this._gl;this._premultiplyAlpha=!1,A.pixelStorei(A.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._premultiplyAlpha)}}GlTextureSystem.extension={type:[ExtensionType.WebGLSystem],name:"texture"};class GlGraphicsAdaptor{contextChange(A){const _=new UniformGroup({uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uTransformMatrix:{value:new Matrix,type:"mat3x3<f32>"},uRound:{value:0,type:"f32"}}),I=A.limits.maxBatchableTextures,B=compileHighShaderGlProgram({name:"graphics",bits:[colorBitGl,generateTextureBatchBitGl(I),localUniformBitGl,roundPixelsBitGl]});this.shader=new Shader({glProgram:B,resources:{localUniforms:_,batchSamplers:getBatchSamplersUniformGroup(I)}})}execute(A,_){const I=_.context,B=I.customShader||this.shader,T=A.renderer,R=T.graphicsContext,{batcher:P,instructions:D}=R.getContextRenderData(I);B.groups[0]=T.globalUniforms.bindGroup,T.state.set(A.state),T.shader.bind(B),T.geometry.bind(P.geometry,B.glProgram);const F=D.instructions;for(let L=0;L<D.instructionSize;L++){const U=F[L];if(U.size){for(let V=0;V<U.textures.count;V++)T.texture.bind(U.textures.textures[V],V);T.geometry.draw(U.topology,U.size,U.start)}}}destroy(){this.shader.destroy(!0),this.shader=null}}GlGraphicsAdaptor.extension={type:[ExtensionType.WebGLPipesAdaptor],name:"graphics"};class GlMeshAdaptor{init(){const A=compileHighShaderGlProgram({name:"mesh",bits:[localUniformBitGl,textureBitGl,roundPixelsBitGl]});this._shader=new Shader({glProgram:A,resources:{uTexture:Texture.EMPTY.source,textureUniforms:{uTextureMatrix:{type:"mat3x3<f32>",value:new Matrix}}}})}execute(A,_){const I=A.renderer;let B=_._shader;if(B){if(!B.glProgram){warn$1("Mesh shader has no glProgram",_.shader);return}}else{B=this._shader;const T=_.texture,R=T.source;B.resources.uTexture=R,B.resources.uSampler=R.style,B.resources.textureUniforms.uniforms.uTextureMatrix=T.textureMatrix.mapCoord}B.groups[100]=I.globalUniforms.bindGroup,B.groups[101]=A.localUniformsBindGroup,I.encoder.draw({geometry:_._geometry,shader:B,state:_.state})}destroy(){this._shader.destroy(!0),this._shader=null}}GlMeshAdaptor.extension={type:[ExtensionType.WebGLPipesAdaptor],name:"mesh"};class CustomRenderPipe{constructor(A){this._renderer=A}updateRenderable(){}destroyRenderable(){}validateRenderable(){return!1}addRenderable(A,_){this._renderer.renderPipes.batch.break(_),_.add(A)}execute(A){A.isRenderable&&A.render(this._renderer)}destroy(){this._renderer=null}}CustomRenderPipe.extension={type:[ExtensionType.WebGLPipes,ExtensionType.WebGPUPipes,ExtensionType.CanvasPipes],name:"customRender"};class BatchableSprite{constructor(){this.batcherName="default",this.topology="triangle-list",this.attributeSize=4,this.indexSize=6,this.packAsQuad=!0,this.roundPixels=0,this._attributeStart=0,this._batcher=null,this._batch=null}get blendMode(){return this.renderable.groupBlendMode}get color(){return this.renderable.groupColorAlpha}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.bounds=null}destroy(){}}function executeInstructions(E,A){const _=E.instructionSet,I=_.instructions;for(let B=0;B<_.instructionSize;B++){const T=I[B];A[T.renderPipeId].execute(T)}}const tempMatrix$2=new Matrix;class RenderGroupPipe{constructor(A){this._renderer=A}addRenderGroup(A,_){A.isCachedAsTexture?this._addRenderableCacheAsTexture(A,_):this._addRenderableDirect(A,_)}execute(A){A.isRenderable&&(A.isCachedAsTexture?this._executeCacheAsTexture(A):this._executeDirect(A))}destroy(){this._renderer=null}_addRenderableDirect(A,_){this._renderer.renderPipes.batch.break(_),A._batchableRenderGroup&&(BigPool.return(A._batchableRenderGroup),A._batchableRenderGroup=null),_.add(A)}_addRenderableCacheAsTexture(A,_){const I=A._batchableRenderGroup??(A._batchableRenderGroup=BigPool.get(BatchableSprite));I.renderable=A.root,I.transform=A.root.relativeGroupTransform,I.texture=A.texture,I.bounds=A._textureBounds,_.add(A),this._renderer.renderPipes.batch.addToBatch(I,_)}_executeCacheAsTexture(A){if(A.textureNeedsUpdate){A.textureNeedsUpdate=!1;const _=tempMatrix$2.identity().translate(-A._textureBounds.x,-A._textureBounds.y);this._renderer.renderTarget.push(A.texture,!0,null,A.texture.frame),this._renderer.globalUniforms.push({worldTransformMatrix:_,worldColor:4294967295}),executeInstructions(A,this._renderer.renderPipes),this._renderer.renderTarget.finishRenderPass(),this._renderer.renderTarget.pop(),this._renderer.globalUniforms.pop()}A._batchableRenderGroup._batcher.updateElement(A._batchableRenderGroup),A._batchableRenderGroup._batcher.geometry.buffers[0].update()}_executeDirect(A){this._renderer.globalUniforms.push({worldTransformMatrix:A.inverseParentTextureTransform,worldColor:A.worldColorAlpha}),executeInstructions(A,this._renderer.renderPipes),this._renderer.globalUniforms.pop()}}RenderGroupPipe.extension={type:[ExtensionType.WebGLPipes,ExtensionType.WebGPUPipes,ExtensionType.CanvasPipes],name:"renderGroup"};function clearList(E,A){A||(A=0);for(let _=A;_<E.length&&E[_];_++)E[_]=null}const tempContainer=new Container,UPDATE_BLEND_COLOR_VISIBLE=UPDATE_VISIBLE|UPDATE_COLOR|UPDATE_BLEND;function updateRenderGroupTransforms(E,A=!1){updateRenderGroupTransform(E);const _=E.childrenToUpdate,I=E.updateTick++;for(const B in _){const T=Number(B),R=_[B],P=R.list,D=R.index;for(let F=0;F<D;F++){const L=P[F];L.parentRenderGroup===E&&L.relativeRenderGroupDepth===T&&updateTransformAndChildren(L,I,0)}clearList(P,D),R.index=0}if(A)for(let B=0;B<E.renderGroupChildren.length;B++)updateRenderGroupTransforms(E.renderGroupChildren[B],A)}function updateRenderGroupTransform(E){const A=E.root;let _;if(E.renderGroupParent){const I=E.renderGroupParent;E.worldTransform.appendFrom(A.relativeGroupTransform,I.worldTransform),E.worldColor=multiplyColors(A.groupColor,I.worldColor),_=A.groupAlpha*I.worldAlpha}else E.worldTransform.copyFrom(A.localTransform),E.worldColor=A.localColor,_=A.localAlpha;_=_<0?0:_>1?1:_,E.worldAlpha=_,E.worldColorAlpha=E.worldColor+((_*255|0)<<24)}function updateTransformAndChildren(E,A,_){if(A===E.updateTick)return;E.updateTick=A,E.didChange=!1;const I=E.localTransform;E.updateLocalTransform();const B=E.parent;if(B&&!B.renderGroup?(_|=E._updateFlags,E.relativeGroupTransform.appendFrom(I,B.relativeGroupTransform),_&UPDATE_BLEND_COLOR_VISIBLE&&updateColorBlendVisibility(E,B,_)):(_=E._updateFlags,E.relativeGroupTransform.copyFrom(I),_&UPDATE_BLEND_COLOR_VISIBLE&&updateColorBlendVisibility(E,tempContainer,_)),!E.renderGroup){const T=E.children,R=T.length;for(let F=0;F<R;F++)updateTransformAndChildren(T[F],A,_);const P=E.parentRenderGroup,D=E;D.renderPipeId&&!P.structureDidChange&&P.updateRenderable(D)}}function updateColorBlendVisibility(E,A,_){if(_&UPDATE_COLOR){E.groupColor=multiplyColors(E.localColor,A.groupColor);let I=E.localAlpha*A.groupAlpha;I=I<0?0:I>1?1:I,E.groupAlpha=I,E.groupColorAlpha=E.groupColor+((I*255|0)<<24)}_&UPDATE_BLEND&&(E.groupBlendMode=E.localBlendMode==="inherit"?A.groupBlendMode:E.localBlendMode),_&UPDATE_VISIBLE&&(E.globalDisplayStatus=E.localDisplayStatus&A.globalDisplayStatus),E._updateFlags=0}function validateRenderables(E,A){const{list:_,index:I}=E.childrenRenderablesToUpdate;let B=!1;for(let T=0;T<I;T++){const R=_[T];if(B=A[R.renderPipeId].validateRenderable(R),B)break}return E.structureDidChange=B,B}const tempMatrix$1=new Matrix;class RenderGroupSystem{constructor(A){this._renderer=A}render({container:A,transform:_}){const I=A.parent,B=A.renderGroup.renderGroupParent;A.parent=null,A.renderGroup.renderGroupParent=null;const T=this._renderer;let R=tempMatrix$1;_&&(R=R.copyFrom(A.renderGroup.localTransform),A.renderGroup.localTransform.copyFrom(_));const P=T.renderPipes;this._updateCachedRenderGroups(A.renderGroup,null),this._updateRenderGroups(A.renderGroup),T.globalUniforms.start({worldTransformMatrix:_?A.renderGroup.localTransform:A.renderGroup.worldTransform,worldColor:A.renderGroup.worldColorAlpha}),executeInstructions(A.renderGroup,P),P.uniformBatch&&P.uniformBatch.renderEnd(),_&&A.renderGroup.localTransform.copyFrom(R),A.parent=I,A.renderGroup.renderGroupParent=B}destroy(){this._renderer=null}_updateCachedRenderGroups(A,_){if(A.isCachedAsTexture){if(!A.updateCacheTexture)return;_=A}A._parentCacheAsTextureRenderGroup=_;for(let I=A.renderGroupChildren.length-1;I>=0;I--)this._updateCachedRenderGroups(A.renderGroupChildren[I],_);if(A.invalidateMatrices(),A.isCachedAsTexture){if(A.textureNeedsUpdate){const I=A.root.getLocalBounds();I.ceil();const B=A.texture;A.texture&&TexturePool.returnTexture(A.texture,!0);const T=this._renderer,R=A.textureOptions.resolution||T.view.resolution,P=A.textureOptions.antialias??T.view.antialias,D=A.textureOptions.scaleMode??"linear",F=TexturePool.getOptimalTexture(I.width,I.height,R,P);F._source.style=new TextureStyle({scaleMode:D}),A.texture=F,A._textureBounds||(A._textureBounds=new Bounds),A._textureBounds.copyFrom(I),B!==A.texture&&A.renderGroupParent&&(A.renderGroupParent.structureDidChange=!0)}}else A.texture&&(TexturePool.returnTexture(A.texture,!0),A.texture=null)}_updateRenderGroups(A){const _=this._renderer,I=_.renderPipes;if(A.runOnRender(_),A.instructionSet.renderPipes=I,A.structureDidChange?clearList(A.childrenRenderablesToUpdate.list,0):validateRenderables(A,I),updateRenderGroupTransforms(A),A.structureDidChange?(A.structureDidChange=!1,this._buildInstructions(A,_)):this._updateRenderables(A),A.childrenRenderablesToUpdate.index=0,_.renderPipes.batch.upload(A.instructionSet),!(A.isCachedAsTexture&&!A.textureNeedsUpdate))for(let B=0;B<A.renderGroupChildren.length;B++)this._updateRenderGroups(A.renderGroupChildren[B])}_updateRenderables(A){const{list:_,index:I}=A.childrenRenderablesToUpdate;for(let B=0;B<I;B++){const T=_[B];T.didViewUpdate&&A.updateRenderable(T)}clearList(_,I)}_buildInstructions(A,_){const I=A.root,B=A.instructionSet;B.reset();const T=_.renderPipes?_:_.batch.renderer,R=T.renderPipes;R.batch.buildStart(B),R.blendMode.buildStart(),R.colorMask.buildStart(),I.sortableChildren&&I.sortChildren(),I.collectRenderablesWithEffects(B,T,null),R.batch.buildEnd(B),R.blendMode.buildEnd(B)}}RenderGroupSystem.extension={type:[ExtensionType.WebGLSystem,ExtensionType.WebGPUSystem,ExtensionType.CanvasSystem],name:"renderGroup"};class SpritePipe{constructor(A){this._renderer=A}addRenderable(A,_){const I=this._getGpuSprite(A);A.didViewUpdate&&this._updateBatchableSprite(A,I),this._renderer.renderPipes.batch.addToBatch(I,_)}updateRenderable(A){const _=this._getGpuSprite(A);A.didViewUpdate&&this._updateBatchableSprite(A,_),_._batcher.updateElement(_)}validateRenderable(A){const _=this._getGpuSprite(A);return!_._batcher.checkAndUpdateTexture(_,A._texture)}_updateBatchableSprite(A,_){_.bounds=A.visualBounds,_.texture=A._texture}_getGpuSprite(A){return A._gpuData[this._renderer.uid]||this._initGPUSprite(A)}_initGPUSprite(A){const _=new BatchableSprite;return _.renderable=A,_.transform=A.groupTransform,_.texture=A._texture,_.bounds=A.visualBounds,_.roundPixels=this._renderer._roundPixels|A._roundPixels,A._gpuData[this._renderer.uid]=_,_}destroy(){this._renderer=null}}SpritePipe.extension={type:[ExtensionType.WebGLPipes,ExtensionType.WebGPUPipes,ExtensionType.CanvasPipes],name:"sprite"};const _BackgroundSystem=class yn{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Color$1(0),this.color=this._backgroundColor,this.alpha=1}init(A){A={...yn.defaultOptions,...A},this.clearBeforeRender=A.clearBeforeRender,this.color=A.background||A.backgroundColor||this._backgroundColor,this.alpha=A.backgroundAlpha,this._backgroundColor.setAlpha(A.backgroundAlpha)}get color(){return this._backgroundColor}set color(A){Color$1.shared.setValue(A).alpha<1&&this._backgroundColor.alpha===1&&warn$1("Cannot set a transparent background on an opaque canvas. To enable transparency, set backgroundAlpha < 1 when initializing your Application."),this._backgroundColor.setValue(A)}get alpha(){return this._backgroundColor.alpha}set alpha(A){this._backgroundColor.setAlpha(A)}get colorRgba(){return this._backgroundColor.toArray()}destroy(){}};_BackgroundSystem.extension={type:[ExtensionType.WebGLSystem,ExtensionType.WebGPUSystem,ExtensionType.CanvasSystem],name:"background",priority:0};_BackgroundSystem.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0};let BackgroundSystem=_BackgroundSystem;const BLEND_MODE_FILTERS={};extensions.handle(ExtensionType.BlendMode,E=>{if(!E.name)throw new Error("BlendMode extension must have a name property");BLEND_MODE_FILTERS[E.name]=E.ref},E=>{delete BLEND_MODE_FILTERS[E.name]});class BlendModePipe{constructor(A){this._isAdvanced=!1,this._filterHash=Object.create(null),this._renderer=A,this._renderer.runners.prerender.add(this)}prerender(){this._activeBlendMode="normal",this._isAdvanced=!1}setBlendMode(A,_,I){if(this._activeBlendMode===_){this._isAdvanced&&this._renderableList.push(A);return}this._activeBlendMode=_,this._isAdvanced&&this._endAdvancedBlendMode(I),this._isAdvanced=!!BLEND_MODE_FILTERS[_],this._isAdvanced&&(this._beginAdvancedBlendMode(I),this._renderableList.push(A))}_beginAdvancedBlendMode(A){this._renderer.renderPipes.batch.break(A);const _=this._activeBlendMode;if(!BLEND_MODE_FILTERS[_]){warn$1(`Unable to assign BlendMode: '${_}'. You may want to include: import 'pixi.js/advanced-blend-modes'`);return}let I=this._filterHash[_];I||(I=this._filterHash[_]=new FilterEffect,I.filters=[new BLEND_MODE_FILTERS[_]]);const B={renderPipeId:"filter",action:"pushFilter",renderables:[],filterEffect:I,canBundle:!1};this._renderableList=B.renderables,A.add(B)}_endAdvancedBlendMode(A){this._renderableList=null,this._renderer.renderPipes.batch.break(A),A.add({renderPipeId:"filter",action:"popFilter",canBundle:!1})}buildStart(){this._isAdvanced=!1}buildEnd(A){this._isAdvanced&&this._endAdvancedBlendMode(A)}destroy(){this._renderer=null,this._renderableList=null;for(const A in this._filterHash)this._filterHash[A].destroy();this._filterHash=null}}BlendModePipe.extension={type:[ExtensionType.WebGLPipes,ExtensionType.WebGPUPipes,ExtensionType.CanvasPipes],name:"blendMode"};const imageTypes={png:"image/png",jpg:"image/jpeg",webp:"image/webp"},_ExtractSystem=class _n{constructor(A){this._renderer=A}_normalizeOptions(A,_={}){return A instanceof Container||A instanceof Texture?{target:A,..._}:{..._,...A}}async image(A){const _=DOMAdapter.get().createImage();return _.src=await this.base64(A),_}async base64(A){A=this._normalizeOptions(A,_n.defaultImageOptions);const{format:_,quality:I}=A,B=this.canvas(A);if(B.toBlob!==void 0)return new Promise((T,R)=>{B.toBlob(P=>{if(!P){R(new Error("ICanvas.toBlob failed!"));return}const D=new FileReader;D.onload=()=>T(D.result),D.onerror=R,D.readAsDataURL(P)},imageTypes[_],I)});if(B.toDataURL!==void 0)return B.toDataURL(imageTypes[_],I);if(B.convertToBlob!==void 0){const T=await B.convertToBlob({type:imageTypes[_],quality:I});return new Promise((R,P)=>{const D=new FileReader;D.onload=()=>R(D.result),D.onerror=P,D.readAsDataURL(T)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(A){A=this._normalizeOptions(A);const _=A.target,I=this._renderer;if(_ instanceof Texture)return I.texture.generateCanvas(_);const B=I.textureGenerator.generateTexture(A),T=I.texture.generateCanvas(B);return B.destroy(!0),T}pixels(A){A=this._normalizeOptions(A);const _=A.target,I=this._renderer,B=_ instanceof Texture?_:I.textureGenerator.generateTexture(A),T=I.texture.getPixels(B);return _ instanceof Container&&B.destroy(!0),T}texture(A){return A=this._normalizeOptions(A),A.target instanceof Texture?A.target:this._renderer.textureGenerator.generateTexture(A)}download(A){A=this._normalizeOptions(A);const _=this.canvas(A),I=document.createElement("a");I.download=A.filename??"image.png",I.href=_.toDataURL("image/png"),document.body.appendChild(I),I.click(),document.body.removeChild(I)}log(A){const _=A.width??200;A=this._normalizeOptions(A);const I=this.canvas(A),B=I.toDataURL();console.log(`[Pixi Texture] ${I.width}px ${I.height}px`);const T=["font-size: 1px;",`padding: ${_}px 300px;`,`background: url(${B}) no-repeat;`,"background-size: contain;"].join(" ");console.log("%c ",T)}destroy(){this._renderer=null}};_ExtractSystem.extension={type:[ExtensionType.WebGLSystem,ExtensionType.WebGPUSystem],name:"extract"};_ExtractSystem.defaultImageOptions={format:"png",quality:1};let ExtractSystem=_ExtractSystem;class RenderTexture extends Texture{static create(A){return new RenderTexture({source:new TextureSource(A)})}resize(A,_,I){return this.source.resize(A,_,I),this}}const tempRect=new Rectangle,tempBounds$1=new Bounds,noColor=[0,0,0,0];class GenerateTextureSystem{constructor(A){this._renderer=A}generateTexture(A){A instanceof Container&&(A={target:A,frame:void 0,textureSourceOptions:{},resolution:void 0});const _=A.resolution||this._renderer.resolution,I=A.antialias||this._renderer.view.antialias,B=A.target;let T=A.clearColor;T?T=Array.isArray(T)&&T.length===4?T:Color$1.shared.setValue(T).toArray():T=noColor;const R=A.frame?.copyTo(tempRect)||getLocalBounds(B,tempBounds$1).rectangle;R.width=Math.max(R.width,1/_)|0,R.height=Math.max(R.height,1/_)|0;const P=RenderTexture.create({...A.textureSourceOptions,width:R.width,height:R.height,resolution:_,antialias:I}),D=Matrix.shared.translate(-R.x,-R.y);return this._renderer.render({container:B,transform:D,target:P,clearColor:T}),P.source.updateMipmaps(),P}destroy(){this._renderer=null}}GenerateTextureSystem.extension={type:[ExtensionType.WebGLSystem,ExtensionType.WebGPUSystem],name:"textureGenerator"};function colorToUniform(E,A,_,I){_[I++]=(E>>16&255)/255,_[I++]=(E>>8&255)/255,_[I++]=(E&255)/255,_[I++]=A}function color32BitToUniform(E,A,_){const I=(E>>24&255)/255;A[_++]=(E&255)/255*I,A[_++]=(E>>8&255)/255*I,A[_++]=(E>>16&255)/255*I,A[_++]=I}class GlobalUniformSystem{constructor(A){this._stackIndex=0,this._globalUniformDataStack=[],this._uniformsPool=[],this._activeUniforms=[],this._bindGroupPool=[],this._activeBindGroups=[],this._renderer=A}reset(){this._stackIndex=0;for(let A=0;A<this._activeUniforms.length;A++)this._uniformsPool.push(this._activeUniforms[A]);for(let A=0;A<this._activeBindGroups.length;A++)this._bindGroupPool.push(this._activeBindGroups[A]);this._activeUniforms.length=0,this._activeBindGroups.length=0}start(A){this.reset(),this.push(A)}bind({size:A,projectionMatrix:_,worldTransformMatrix:I,worldColor:B,offset:T}){const R=this._renderer.renderTarget.renderTarget,P=this._stackIndex?this._globalUniformDataStack[this._stackIndex-1]:{worldTransformMatrix:new Matrix,worldColor:4294967295,offset:new Point$1},D={projectionMatrix:_||this._renderer.renderTarget.projectionMatrix,resolution:A||R.size,worldTransformMatrix:I||P.worldTransformMatrix,worldColor:B||P.worldColor,offset:T||P.offset,bindGroup:null},F=this._uniformsPool.pop()||this._createUniforms();this._activeUniforms.push(F);const L=F.uniforms;L.uProjectionMatrix=D.projectionMatrix,L.uResolution=D.resolution,L.uWorldTransformMatrix.copyFrom(D.worldTransformMatrix),L.uWorldTransformMatrix.tx-=D.offset.x,L.uWorldTransformMatrix.ty-=D.offset.y,color32BitToUniform(D.worldColor,L.uWorldColorAlpha,0),F.update();let U;this._renderer.renderPipes.uniformBatch?U=this._renderer.renderPipes.uniformBatch.getUniformBindGroup(F,!1):(U=this._bindGroupPool.pop()||new BindGroup,this._activeBindGroups.push(U),U.setResource(F,0)),D.bindGroup=U,this._currentGlobalUniformData=D}push(A){this.bind(A),this._globalUniformDataStack[this._stackIndex++]=this._currentGlobalUniformData}pop(){this._currentGlobalUniformData=this._globalUniformDataStack[--this._stackIndex-1],this._renderer.type===RendererType.WEBGL&&this._currentGlobalUniformData.bindGroup.resources[0].update()}get bindGroup(){return this._currentGlobalUniformData.bindGroup}get globalUniformData(){return this._currentGlobalUniformData}get uniformGroup(){return this._currentGlobalUniformData.bindGroup.resources[0]}_createUniforms(){return new UniformGroup({uProjectionMatrix:{value:new Matrix,type:"mat3x3<f32>"},uWorldTransformMatrix:{value:new Matrix,type:"mat3x3<f32>"},uWorldColorAlpha:{value:new Float32Array(4),type:"vec4<f32>"},uResolution:{value:[0,0],type:"vec2<f32>"}},{isStatic:!0})}destroy(){this._renderer=null}}GlobalUniformSystem.extension={type:[ExtensionType.WebGLSystem,ExtensionType.WebGPUSystem,ExtensionType.CanvasSystem],name:"globalUniforms"};let uid=1;class SchedulerSystem{constructor(){this._tasks=[],this._offset=0}init(){Ticker$1.system.add(this._update,this)}repeat(A,_,I=!0){const B=uid++;let T=0;return I&&(this._offset+=1e3,T=this._offset),this._tasks.push({func:A,duration:_,start:performance.now(),offset:T,last:performance.now(),repeat:!0,id:B}),B}cancel(A){for(let _=0;_<this._tasks.length;_++)if(this._tasks[_].id===A){this._tasks.splice(_,1);return}}_update(){const A=performance.now();for(let _=0;_<this._tasks.length;_++){const I=this._tasks[_];if(A-I.offset-I.last>=I.duration){const B=A-I.start;I.func(B),I.last=A}}}destroy(){Ticker$1.system.remove(this._update,this),this._tasks.length=0}}SchedulerSystem.extension={type:[ExtensionType.WebGLSystem,ExtensionType.WebGPUSystem,ExtensionType.CanvasSystem],name:"scheduler",priority:0};let saidHello=!1;function sayHello(E){if(!saidHello){if(DOMAdapter.get().getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){const A=[`%c  %c  %c  %c  %c PixiJS %c v${VERSION} (${E}) http://www.pixijs.com/

`,"background: #E72264; padding:5px 0;","background: #6CA2EA; padding:5px 0;","background: #B5D33D; padding:5px 0;","background: #FED23F; padding:5px 0;","color: #FFFFFF; background: #E72264; padding:5px 0;","color: #E72264; background: #FFFFFF; padding:5px 0;"];globalThis.console.log(...A)}else globalThis.console&&globalThis.console.log(`PixiJS ${VERSION} - ${E} - http://www.pixijs.com/`);saidHello=!0}}class HelloSystem{constructor(A){this._renderer=A}init(A){if(A.hello){let _=this._renderer.name;this._renderer.type===RendererType.WEBGL&&(_+=` ${this._renderer.context.webGLVersion}`),sayHello(_)}}}HelloSystem.extension={type:[ExtensionType.WebGLSystem,ExtensionType.WebGPUSystem,ExtensionType.CanvasSystem],name:"hello",priority:-2};HelloSystem.defaultOptions={hello:!1};function cleanHash(E){let A=!1;for(const I in E)if(E[I]==null){A=!0;break}if(!A)return E;const _=Object.create(null);for(const I in E){const B=E[I];B&&(_[I]=B)}return _}function cleanArray(E){let A=0;for(let _=0;_<E.length;_++)E[_]==null?A++:E[_-A]=E[_];return E.length-=A,E}let renderableGCTick=0;const _RenderableGCSystem=class xn{constructor(A){this._managedRenderables=[],this._managedHashes=[],this._managedArrays=[],this._renderer=A}init(A){A={...xn.defaultOptions,...A},this.maxUnusedTime=A.renderableGCMaxUnusedTime,this._frequency=A.renderableGCFrequency,this.enabled=A.renderableGCActive}get enabled(){return!!this._handler}set enabled(A){this.enabled!==A&&(A?(this._handler=this._renderer.scheduler.repeat(()=>this.run(),this._frequency,!1),this._hashHandler=this._renderer.scheduler.repeat(()=>{for(const _ of this._managedHashes)_.context[_.hash]=cleanHash(_.context[_.hash])},this._frequency),this._arrayHandler=this._renderer.scheduler.repeat(()=>{for(const _ of this._managedArrays)cleanArray(_.context[_.hash])},this._frequency)):(this._renderer.scheduler.cancel(this._handler),this._renderer.scheduler.cancel(this._hashHandler),this._renderer.scheduler.cancel(this._arrayHandler)))}addManagedHash(A,_){this._managedHashes.push({context:A,hash:_})}addManagedArray(A,_){this._managedArrays.push({context:A,hash:_})}prerender({container:A}){this._now=performance.now(),A.renderGroup.gcTick=renderableGCTick++,this._updateInstructionGCTick(A.renderGroup,A.renderGroup.gcTick)}addRenderable(A){this.enabled&&(A._lastUsed===-1&&(this._managedRenderables.push(A),A.once("destroyed",this._removeRenderable,this)),A._lastUsed=this._now)}run(){const A=this._now,_=this._managedRenderables,I=this._renderer.renderPipes;let B=0;for(let T=0;T<_.length;T++){const R=_[T];if(R===null){B++;continue}const P=R.renderGroup??R.parentRenderGroup,D=P?.instructionSet?.gcTick??-1;if((P?.gcTick??0)===D&&(R._lastUsed=A),A-R._lastUsed>this.maxUnusedTime){if(!R.destroyed){const F=I;P&&(P.structureDidChange=!0),F[R.renderPipeId].destroyRenderable(R)}R._lastUsed=-1,B++,R.off("destroyed",this._removeRenderable,this)}else _[T-B]=R}_.length-=B}destroy(){this.enabled=!1,this._renderer=null,this._managedRenderables.length=0,this._managedHashes.length=0,this._managedArrays.length=0}_removeRenderable(A){const _=this._managedRenderables.indexOf(A);_>=0&&(A.off("destroyed",this._removeRenderable,this),this._managedRenderables[_]=null)}_updateInstructionGCTick(A,_){A.instructionSet.gcTick=_;for(const I of A.renderGroupChildren)this._updateInstructionGCTick(I,_)}};_RenderableGCSystem.extension={type:[ExtensionType.WebGLSystem,ExtensionType.WebGPUSystem],name:"renderableGC",priority:0};_RenderableGCSystem.defaultOptions={renderableGCActive:!0,renderableGCMaxUnusedTime:6e4,renderableGCFrequency:3e4};let RenderableGCSystem=_RenderableGCSystem;const _TextureGCSystem=class wn{constructor(A){this._renderer=A,this.count=0,this.checkCount=0}init(A){A={...wn.defaultOptions,...A},this.checkCountMax=A.textureGCCheckCountMax,this.maxIdle=A.textureGCAMaxIdle??A.textureGCMaxIdle,this.active=A.textureGCActive}postrender(){this._renderer.renderingToScreen&&(this.count++,this.active&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const A=this._renderer.texture.managedTextures;for(let _=0;_<A.length;_++){const I=A[_];I.autoGarbageCollect&&I.resource&&I._touched>-1&&this.count-I._touched>this.maxIdle&&(I._touched=-1,I.unload())}}destroy(){this._renderer=null}};_TextureGCSystem.extension={type:[ExtensionType.WebGLSystem,ExtensionType.WebGPUSystem],name:"textureGC"};_TextureGCSystem.defaultOptions={textureGCActive:!0,textureGCAMaxIdle:null,textureGCMaxIdle:3600,textureGCCheckCountMax:600};let TextureGCSystem=_TextureGCSystem;const _ViewSystem=class En{get autoDensity(){return this.texture.source.autoDensity}set autoDensity(A){this.texture.source.autoDensity=A}get resolution(){return this.texture.source._resolution}set resolution(A){this.texture.source.resize(this.texture.source.width,this.texture.source.height,A)}init(A){A={...En.defaultOptions,...A},A.view&&(deprecation(v8_0_0,"ViewSystem.view has been renamed to ViewSystem.canvas"),A.canvas=A.view),this.screen=new Rectangle(0,0,A.width,A.height),this.canvas=A.canvas||DOMAdapter.get().createCanvas(),this.antialias=!!A.antialias,this.texture=getCanvasTexture(this.canvas,A),this.renderTarget=new RenderTarget({colorTextures:[this.texture],depth:!!A.depth,isRoot:!0}),this.texture.source.transparent=A.backgroundAlpha<1,this.resolution=A.resolution}resize(A,_,I){this.texture.source.resize(A,_,I),this.screen.width=this.texture.frame.width,this.screen.height=this.texture.frame.height}destroy(A=!1){(typeof A=="boolean"?A:!!A?.removeView)&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}};_ViewSystem.extension={type:[ExtensionType.WebGLSystem,ExtensionType.WebGPUSystem,ExtensionType.CanvasSystem],name:"view",priority:0};_ViewSystem.defaultOptions={width:800,height:600,autoDensity:!1,antialias:!1};let ViewSystem=_ViewSystem;const SharedSystems=[BackgroundSystem,GlobalUniformSystem,HelloSystem,ViewSystem,RenderGroupSystem,TextureGCSystem,GenerateTextureSystem,ExtractSystem,RendererInitHook,RenderableGCSystem,SchedulerSystem],SharedRenderPipes=[BlendModePipe,BatcherPipe,SpritePipe,RenderGroupPipe,AlphaMaskPipe,StencilMaskPipe,ColorMaskPipe,CustomRenderPipe],DefaultWebGLSystems=[...SharedSystems,GlUboSystem,GlBackBufferSystem,GlContextSystem,GlLimitsSystem,GlBufferSystem,GlTextureSystem,GlRenderTargetSystem,GlGeometrySystem,GlUniformGroupSystem,GlShaderSystem,GlEncoderSystem,GlStateSystem,GlStencilSystem,GlColorMaskSystem],DefaultWebGLPipes=[...SharedRenderPipes],DefaultWebGLAdapters=[GlBatchAdaptor,GlMeshAdaptor,GlGraphicsAdaptor],systems$1=[],renderPipes$1=[],renderPipeAdaptors$1=[];extensions.handleByNamedList(ExtensionType.WebGLSystem,systems$1);extensions.handleByNamedList(ExtensionType.WebGLPipes,renderPipes$1);extensions.handleByNamedList(ExtensionType.WebGLPipesAdaptor,renderPipeAdaptors$1);extensions.add(...DefaultWebGLSystems,...DefaultWebGLPipes,...DefaultWebGLAdapters);class WebGLRenderer extends AbstractRenderer{constructor(){const A={name:"webgl",type:RendererType.WEBGL,systems:systems$1,renderPipes:renderPipes$1,renderPipeAdaptors:renderPipeAdaptors$1};super(A)}}const WebGLRenderer$1=Object.freeze(Object.defineProperty({__proto__:null,WebGLRenderer},Symbol.toStringTag,{value:"Module"}));class BindGroupSystem{constructor(A){this._hash=Object.create(null),this._renderer=A,this._renderer.renderableGC.addManagedHash(this,"_hash")}contextChange(A){this._gpu=A}getBindGroup(A,_,I){return A._updateKey(),this._hash[A._key]||this._createBindGroup(A,_,I)}_createBindGroup(A,_,I){const B=this._gpu.device,T=_.layout[I],R=[],P=this._renderer;for(const L in T){const U=A.resources[L]??A.resources[T[L]];let V;if(U._resourceType==="uniformGroup"){const K=U;P.ubo.updateUniformGroup(K);const J=K.buffer;V={buffer:P.buffer.getGPUBuffer(J),offset:0,size:J.descriptor.size}}else if(U._resourceType==="buffer"){const K=U;V={buffer:P.buffer.getGPUBuffer(K),offset:0,size:K.descriptor.size}}else if(U._resourceType==="bufferResource"){const K=U;V={buffer:P.buffer.getGPUBuffer(K.buffer),offset:K.offset,size:K.size}}else if(U._resourceType==="textureSampler"){const K=U;V=P.texture.getGpuSampler(K)}else if(U._resourceType==="textureSource"){const K=U;V=P.texture.getGpuSource(K).createView({})}R.push({binding:T[L],resource:V})}const D=P.shader.getProgramData(_).bindGroups[I],F=B.createBindGroup({layout:D,entries:R});return this._hash[A._key]=F,F}destroy(){for(const A of Object.keys(this._hash))this._hash[A]=null;this._hash=null,this._renderer=null}}BindGroupSystem.extension={type:[ExtensionType.WebGPUSystem],name:"bindGroup"};class GpuBufferSystem{constructor(A){this._gpuBuffers=Object.create(null),this._managedBuffers=[],A.renderableGC.addManagedHash(this,"_gpuBuffers")}contextChange(A){this._gpu=A}getGPUBuffer(A){return this._gpuBuffers[A.uid]||this.createGPUBuffer(A)}updateBuffer(A){const _=this._gpuBuffers[A.uid]||this.createGPUBuffer(A),I=A.data;return A._updateID&&I&&(A._updateID=0,this._gpu.device.queue.writeBuffer(_,0,I.buffer,0,(A._updateSize||I.byteLength)+3&-4)),_}destroyAll(){for(const A in this._gpuBuffers)this._gpuBuffers[A].destroy();this._gpuBuffers={}}createGPUBuffer(A){this._gpuBuffers[A.uid]||(A.on("update",this.updateBuffer,this),A.on("change",this.onBufferChange,this),A.on("destroy",this.onBufferDestroy,this),this._managedBuffers.push(A));const _=this._gpu.device.createBuffer(A.descriptor);return A._updateID=0,A.data&&(fastCopy(A.data.buffer,_.getMappedRange()),_.unmap()),this._gpuBuffers[A.uid]=_,_}onBufferChange(A){this._gpuBuffers[A.uid].destroy(),A._updateID=0,this._gpuBuffers[A.uid]=this.createGPUBuffer(A)}onBufferDestroy(A){this._managedBuffers.splice(this._managedBuffers.indexOf(A),1),this._destroyBuffer(A)}destroy(){this._managedBuffers.forEach(A=>this._destroyBuffer(A)),this._managedBuffers=null,this._gpuBuffers=null}_destroyBuffer(A){this._gpuBuffers[A.uid].destroy(),A.off("update",this.updateBuffer,this),A.off("change",this.onBufferChange,this),A.off("destroy",this.onBufferDestroy,this),this._gpuBuffers[A.uid]=null}}GpuBufferSystem.extension={type:[ExtensionType.WebGPUSystem],name:"buffer"};class UboBatch{constructor({minUniformOffsetAlignment:A}){this._minUniformOffsetAlignment=256,this.byteIndex=0,this._minUniformOffsetAlignment=A,this.data=new Float32Array(65535)}clear(){this.byteIndex=0}addEmptyGroup(A){if(A>this._minUniformOffsetAlignment/4)throw new Error(`UniformBufferBatch: array is too large: ${A*4}`);const _=this.byteIndex;let I=_+A*4;if(I=Math.ceil(I/this._minUniformOffsetAlignment)*this._minUniformOffsetAlignment,I>this.data.length*4)throw new Error("UniformBufferBatch: ubo batch got too big");return this.byteIndex=I,_}addGroup(A){const _=this.addEmptyGroup(A.length);for(let I=0;I<A.length;I++)this.data[_/4+I]=A[I];return _}destroy(){this.data=null}}class GpuColorMaskSystem{constructor(A){this._colorMaskCache=15,this._renderer=A}setMask(A){this._colorMaskCache!==A&&(this._colorMaskCache=A,this._renderer.pipeline.setColorMask(A))}destroy(){this._renderer=null,this._colorMaskCache=null}}GpuColorMaskSystem.extension={type:[ExtensionType.WebGPUSystem],name:"colorMask"};class GpuDeviceSystem{constructor(A){this._renderer=A}async init(A){return this._initPromise?this._initPromise:(this._initPromise=(A.gpu?Promise.resolve(A.gpu):this._createDeviceAndAdaptor(A)).then(_=>{this.gpu=_,this._renderer.runners.contextChange.emit(this.gpu)}),this._initPromise)}contextChange(A){this._renderer.gpu=A}async _createDeviceAndAdaptor(A){const _=await DOMAdapter.get().getNavigator().gpu.requestAdapter({powerPreference:A.powerPreference,forceFallbackAdapter:A.forceFallbackAdapter}),I=["texture-compression-bc","texture-compression-astc","texture-compression-etc2"].filter(T=>_.features.has(T)),B=await _.requestDevice({requiredFeatures:I});return{adapter:_,device:B}}destroy(){this.gpu=null,this._renderer=null}}GpuDeviceSystem.extension={type:[ExtensionType.WebGPUSystem],name:"device"};GpuDeviceSystem.defaultOptions={powerPreference:void 0,forceFallbackAdapter:!1};class GpuEncoderSystem{constructor(A){this._boundBindGroup=Object.create(null),this._boundVertexBuffer=Object.create(null),this._renderer=A}renderStart(){this.commandFinished=new Promise(A=>{this._resolveCommandFinished=A}),this.commandEncoder=this._renderer.gpu.device.createCommandEncoder()}beginRenderPass(A){this.endRenderPass(),this._clearCache(),this.renderPassEncoder=this.commandEncoder.beginRenderPass(A.descriptor)}endRenderPass(){this.renderPassEncoder&&this.renderPassEncoder.end(),this.renderPassEncoder=null}setViewport(A){this.renderPassEncoder.setViewport(A.x,A.y,A.width,A.height,0,1)}setPipelineFromGeometryProgramAndState(A,_,I,B){const T=this._renderer.pipeline.getPipeline(A,_,I,B);this.setPipeline(T)}setPipeline(A){this._boundPipeline!==A&&(this._boundPipeline=A,this.renderPassEncoder.setPipeline(A))}_setVertexBuffer(A,_){this._boundVertexBuffer[A]!==_&&(this._boundVertexBuffer[A]=_,this.renderPassEncoder.setVertexBuffer(A,this._renderer.buffer.updateBuffer(_)))}_setIndexBuffer(A){if(this._boundIndexBuffer===A)return;this._boundIndexBuffer=A;const _=A.data.BYTES_PER_ELEMENT===2?"uint16":"uint32";this.renderPassEncoder.setIndexBuffer(this._renderer.buffer.updateBuffer(A),_)}resetBindGroup(A){this._boundBindGroup[A]=null}setBindGroup(A,_,I){if(this._boundBindGroup[A]===_)return;this._boundBindGroup[A]=_,_._touch(this._renderer.textureGC.count);const B=this._renderer.bindGroup.getBindGroup(_,I,A);this.renderPassEncoder.setBindGroup(A,B)}setGeometry(A,_){const I=this._renderer.pipeline.getBufferNamesToBind(A,_);for(const B in I)this._setVertexBuffer(B,A.attributes[I[B]].buffer);A.indexBuffer&&this._setIndexBuffer(A.indexBuffer)}_setShaderBindGroups(A,_){for(const I in A.groups){const B=A.groups[I];_||this._syncBindGroup(B),this.setBindGroup(I,B,A.gpuProgram)}}_syncBindGroup(A){for(const _ in A.resources){const I=A.resources[_];I.isUniformGroup&&this._renderer.ubo.updateUniformGroup(I)}}draw(A){const{geometry:_,shader:I,state:B,topology:T,size:R,start:P,instanceCount:D,skipSync:F}=A;this.setPipelineFromGeometryProgramAndState(_,I.gpuProgram,B,T),this.setGeometry(_,I.gpuProgram),this._setShaderBindGroups(I,F),_.indexBuffer?this.renderPassEncoder.drawIndexed(R||_.indexBuffer.data.length,D??_.instanceCount,P||0):this.renderPassEncoder.draw(R||_.getSize(),D??_.instanceCount,P||0)}finishRenderPass(){this.renderPassEncoder&&(this.renderPassEncoder.end(),this.renderPassEncoder=null)}postrender(){this.finishRenderPass(),this._gpu.device.queue.submit([this.commandEncoder.finish()]),this._resolveCommandFinished(),this.commandEncoder=null}restoreRenderPass(){const A=this._renderer.renderTarget.adaptor.getDescriptor(this._renderer.renderTarget.renderTarget,!1,[0,0,0,1]);this.renderPassEncoder=this.commandEncoder.beginRenderPass(A);const _=this._boundPipeline,I={...this._boundVertexBuffer},B=this._boundIndexBuffer,T={...this._boundBindGroup};this._clearCache();const R=this._renderer.renderTarget.viewport;this.renderPassEncoder.setViewport(R.x,R.y,R.width,R.height,0,1),this.setPipeline(_);for(const P in I)this._setVertexBuffer(P,I[P]);for(const P in T)this.setBindGroup(P,T[P],null);this._setIndexBuffer(B)}_clearCache(){for(let A=0;A<16;A++)this._boundBindGroup[A]=null,this._boundVertexBuffer[A]=null;this._boundIndexBuffer=null,this._boundPipeline=null}destroy(){this._renderer=null,this._gpu=null,this._boundBindGroup=null,this._boundVertexBuffer=null,this._boundIndexBuffer=null,this._boundPipeline=null}contextChange(A){this._gpu=A}}GpuEncoderSystem.extension={type:[ExtensionType.WebGPUSystem],name:"encoder",priority:1};class GpuLimitsSystem{constructor(A){this._renderer=A}contextChange(){this.maxTextures=this._renderer.device.gpu.device.limits.maxSampledTexturesPerShaderStage,this.maxBatchableTextures=this.maxTextures}destroy(){}}GpuLimitsSystem.extension={type:[ExtensionType.WebGPUSystem],name:"limits"};class GpuStencilSystem{constructor(A){this._renderTargetStencilState=Object.create(null),this._renderer=A,A.renderTarget.onRenderTargetChange.add(this)}onRenderTargetChange(A){let _=this._renderTargetStencilState[A.uid];_||(_=this._renderTargetStencilState[A.uid]={stencilMode:STENCIL_MODES.DISABLED,stencilReference:0}),this._activeRenderTarget=A,this.setStencilMode(_.stencilMode,_.stencilReference)}setStencilMode(A,_){const I=this._renderTargetStencilState[this._activeRenderTarget.uid];I.stencilMode=A,I.stencilReference=_;const B=this._renderer;B.pipeline.setStencilMode(A),B.encoder.renderPassEncoder.setStencilReference(_)}destroy(){this._renderer.renderTarget.onRenderTargetChange.remove(this),this._renderer=null,this._activeRenderTarget=null,this._renderTargetStencilState=null}}GpuStencilSystem.extension={type:[ExtensionType.WebGPUSystem],name:"stencil"};const WGSL_ALIGN_SIZE_DATA={i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},f16:{align:2,size:2},"vec2<i32>":{align:8,size:8},"vec2<u32>":{align:8,size:8},"vec2<f32>":{align:8,size:8},"vec2<f16>":{align:4,size:4},"vec3<i32>":{align:16,size:12},"vec3<u32>":{align:16,size:12},"vec3<f32>":{align:16,size:12},"vec3<f16>":{align:8,size:6},"vec4<i32>":{align:16,size:16},"vec4<u32>":{align:16,size:16},"vec4<f32>":{align:16,size:16},"vec4<f16>":{align:8,size:8},"mat2x2<f32>":{align:8,size:16},"mat2x2<f16>":{align:4,size:8},"mat3x2<f32>":{align:8,size:24},"mat3x2<f16>":{align:4,size:12},"mat4x2<f32>":{align:8,size:32},"mat4x2<f16>":{align:4,size:16},"mat2x3<f32>":{align:16,size:32},"mat2x3<f16>":{align:8,size:16},"mat3x3<f32>":{align:16,size:48},"mat3x3<f16>":{align:8,size:24},"mat4x3<f32>":{align:16,size:64},"mat4x3<f16>":{align:8,size:32},"mat2x4<f32>":{align:16,size:32},"mat2x4<f16>":{align:8,size:16},"mat3x4<f32>":{align:16,size:48},"mat3x4<f16>":{align:8,size:24},"mat4x4<f32>":{align:16,size:64},"mat4x4<f16>":{align:8,size:32}};function createUboElementsWGSL(E){const A=E.map(I=>({data:I,offset:0,size:0}));let _=0;for(let I=0;I<A.length;I++){const B=A[I];let T=WGSL_ALIGN_SIZE_DATA[B.data.type].size;const R=WGSL_ALIGN_SIZE_DATA[B.data.type].align;if(!WGSL_ALIGN_SIZE_DATA[B.data.type])throw new Error(`[Pixi.js] WebGPU UniformBuffer: Unknown type ${B.data.type}`);B.data.size>1&&(T=Math.max(T,R)*B.data.size),_=Math.ceil(_/R)*R,B.size=T,B.offset=_,_+=T}return _=Math.ceil(_/16)*16,{uboElements:A,size:_}}function generateArraySyncWGSL(E,A){const{size:_,align:I}=WGSL_ALIGN_SIZE_DATA[E.data.type],B=(I-_)/4,T=E.data.type.indexOf("i32")>=0?"dataInt32":"data";return`
         v = uv.${E.data.name};
         ${A!==0?`offset += ${A};`:""}

         arrayOffset = offset;

         t = 0;

         for(var i=0; i < ${E.data.size*(_/4)}; i++)
         {
             for(var j = 0; j < ${_/4}; j++)
             {
                 ${T}[arrayOffset++] = v[t++];
             }
             ${B!==0?`arrayOffset += ${B};`:""}
         }
     `}function createUboSyncFunctionWGSL(E){return createUboSyncFunction(E,"uboWgsl",generateArraySyncWGSL,uboSyncFunctionsWGSL)}class GpuUboSystem extends UboSystem{constructor(){super({createUboElements:createUboElementsWGSL,generateUboSync:createUboSyncFunctionWGSL})}}GpuUboSystem.extension={type:[ExtensionType.WebGPUSystem],name:"ubo"};const minUniformOffsetAlignment=128;class GpuUniformBatchPipe{constructor(A){this._bindGroupHash=Object.create(null),this._buffers=[],this._bindGroups=[],this._bufferResources=[],this._renderer=A,this._renderer.renderableGC.addManagedHash(this,"_bindGroupHash"),this._batchBuffer=new UboBatch({minUniformOffsetAlignment});const _=256/minUniformOffsetAlignment;for(let I=0;I<_;I++){let B=BufferUsage.UNIFORM|BufferUsage.COPY_DST;I===0&&(B|=BufferUsage.COPY_SRC),this._buffers.push(new Buffer({data:this._batchBuffer.data,usage:B}))}}renderEnd(){this._uploadBindGroups(),this._resetBindGroups()}_resetBindGroups(){for(const A in this._bindGroupHash)this._bindGroupHash[A]=null;this._batchBuffer.clear()}getUniformBindGroup(A,_){if(!_&&this._bindGroupHash[A.uid])return this._bindGroupHash[A.uid];this._renderer.ubo.ensureUniformGroup(A);const I=A.buffer.data,B=this._batchBuffer.addEmptyGroup(I.length);return this._renderer.ubo.syncUniformGroup(A,this._batchBuffer.data,B/4),this._bindGroupHash[A.uid]=this._getBindGroup(B/minUniformOffsetAlignment),this._bindGroupHash[A.uid]}getUboResource(A){this._renderer.ubo.updateUniformGroup(A);const _=A.buffer.data,I=this._batchBuffer.addGroup(_);return this._getBufferResource(I/minUniformOffsetAlignment)}getArrayBindGroup(A){const _=this._batchBuffer.addGroup(A);return this._getBindGroup(_/minUniformOffsetAlignment)}getArrayBufferResource(A){const I=this._batchBuffer.addGroup(A)/minUniformOffsetAlignment;return this._getBufferResource(I)}_getBufferResource(A){if(!this._bufferResources[A]){const _=this._buffers[A%2];this._bufferResources[A]=new BufferResource({buffer:_,offset:(A/2|0)*256,size:minUniformOffsetAlignment})}return this._bufferResources[A]}_getBindGroup(A){if(!this._bindGroups[A]){const _=new BindGroup({0:this._getBufferResource(A)});this._bindGroups[A]=_}return this._bindGroups[A]}_uploadBindGroups(){const A=this._renderer.buffer,_=this._buffers[0];_.update(this._batchBuffer.byteIndex),A.updateBuffer(_);const I=this._renderer.gpu.device.createCommandEncoder();for(let B=1;B<this._buffers.length;B++){const T=this._buffers[B];I.copyBufferToBuffer(A.getGPUBuffer(_),minUniformOffsetAlignment,A.getGPUBuffer(T),0,this._batchBuffer.byteIndex)}this._renderer.gpu.device.queue.submit([I.finish()])}destroy(){for(let A=0;A<this._bindGroups.length;A++)this._bindGroups[A].destroy();this._bindGroups=null,this._bindGroupHash=null;for(let A=0;A<this._buffers.length;A++)this._buffers[A].destroy();this._buffers=null;for(let A=0;A<this._bufferResources.length;A++)this._bufferResources[A].destroy();this._bufferResources=null,this._batchBuffer.destroy(),this._bindGroupHash=null,this._renderer=null}}GpuUniformBatchPipe.extension={type:[ExtensionType.WebGPUPipes],name:"uniformBatch"};const topologyStringToId={"point-list":0,"line-list":1,"line-strip":2,"triangle-list":3,"triangle-strip":4};function getGraphicsStateKey(E,A,_,I,B){return E<<24|A<<16|_<<10|I<<5|B}function getGlobalStateKey(E,A,_,I){return _<<6|E<<3|I<<1|A}class PipelineSystem{constructor(A){this._moduleCache=Object.create(null),this._bufferLayoutsCache=Object.create(null),this._bindingNamesCache=Object.create(null),this._pipeCache=Object.create(null),this._pipeStateCaches=Object.create(null),this._colorMask=15,this._multisampleCount=1,this._renderer=A}contextChange(A){this._gpu=A,this.setStencilMode(STENCIL_MODES.DISABLED),this._updatePipeHash()}setMultisampleCount(A){this._multisampleCount!==A&&(this._multisampleCount=A,this._updatePipeHash())}setRenderTarget(A){this._multisampleCount=A.msaaSamples,this._depthStencilAttachment=A.descriptor.depthStencilAttachment?1:0,this._updatePipeHash()}setColorMask(A){this._colorMask!==A&&(this._colorMask=A,this._updatePipeHash())}setStencilMode(A){this._stencilMode!==A&&(this._stencilMode=A,this._stencilState=GpuStencilModesToPixi[A],this._updatePipeHash())}setPipeline(A,_,I,B){const T=this.getPipeline(A,_,I);B.setPipeline(T)}getPipeline(A,_,I,B){A._layoutKey||(ensureAttributes(A,_.attributeData),this._generateBufferKey(A)),B||(B=A.topology);const T=getGraphicsStateKey(A._layoutKey,_._layoutKey,I.data,I._blendModeId,topologyStringToId[B]);return this._pipeCache[T]?this._pipeCache[T]:(this._pipeCache[T]=this._createPipeline(A,_,I,B),this._pipeCache[T])}_createPipeline(A,_,I,B){const T=this._gpu.device,R=this._createVertexBufferLayouts(A,_),P=this._renderer.state.getColorTargets(I);P[0].writeMask=this._stencilMode===STENCIL_MODES.RENDERING_MASK_ADD?0:this._colorMask;const D=this._renderer.shader.getProgramData(_).pipeline,F={vertex:{module:this._getModule(_.vertex.source),entryPoint:_.vertex.entryPoint,buffers:R},fragment:{module:this._getModule(_.fragment.source),entryPoint:_.fragment.entryPoint,targets:P},primitive:{topology:B,cullMode:I.cullMode},layout:D,multisample:{count:this._multisampleCount},label:"PIXI Pipeline"};return this._depthStencilAttachment&&(F.depthStencil={...this._stencilState,format:"depth24plus-stencil8",depthWriteEnabled:I.depthTest,depthCompare:I.depthTest?"less":"always"}),T.createRenderPipeline(F)}_getModule(A){return this._moduleCache[A]||this._createModule(A)}_createModule(A){const _=this._gpu.device;return this._moduleCache[A]=_.createShaderModule({code:A}),this._moduleCache[A]}_generateBufferKey(A){const _=[];let I=0;const B=Object.keys(A.attributes).sort();for(let R=0;R<B.length;R++){const P=A.attributes[B[R]];_[I++]=P.offset,_[I++]=P.format,_[I++]=P.stride,_[I++]=P.instance}const T=_.join("|");return A._layoutKey=createIdFromString(T,"geometry"),A._layoutKey}_generateAttributeLocationsKey(A){const _=[];let I=0;const B=Object.keys(A.attributeData).sort();for(let R=0;R<B.length;R++){const P=A.attributeData[B[R]];_[I++]=P.location}const T=_.join("|");return A._attributeLocationsKey=createIdFromString(T,"programAttributes"),A._attributeLocationsKey}getBufferNamesToBind(A,_){const I=A._layoutKey<<16|_._attributeLocationsKey;if(this._bindingNamesCache[I])return this._bindingNamesCache[I];const B=this._createVertexBufferLayouts(A,_),T=Object.create(null),R=_.attributeData;for(let P=0;P<B.length;P++){const F=Object.values(B[P].attributes)[0].shaderLocation;for(const L in R)if(R[L].location===F){T[P]=L;break}}return this._bindingNamesCache[I]=T,T}_createVertexBufferLayouts(A,_){_._attributeLocationsKey||this._generateAttributeLocationsKey(_);const I=A._layoutKey<<16|_._attributeLocationsKey;if(this._bufferLayoutsCache[I])return this._bufferLayoutsCache[I];const B=[];return A.buffers.forEach(T=>{const R={arrayStride:0,stepMode:"vertex",attributes:[]},P=R.attributes;for(const D in _.attributeData){const F=A.attributes[D];(F.divisor??1)!==1&&warn$1(`Attribute ${D} has an invalid divisor value of '${F.divisor}'. WebGPU only supports a divisor value of 1`),F.buffer===T&&(R.arrayStride=F.stride,R.stepMode=F.instance?"instance":"vertex",P.push({shaderLocation:_.attributeData[D].location,offset:F.offset,format:F.format}))}P.length&&B.push(R)}),this._bufferLayoutsCache[I]=B,B}_updatePipeHash(){const A=getGlobalStateKey(this._stencilMode,this._multisampleCount,this._colorMask,this._depthStencilAttachment);this._pipeStateCaches[A]||(this._pipeStateCaches[A]=Object.create(null)),this._pipeCache=this._pipeStateCaches[A]}destroy(){this._renderer=null,this._bufferLayoutsCache=null}}PipelineSystem.extension={type:[ExtensionType.WebGPUSystem],name:"pipeline"};class GpuRenderTarget{constructor(){this.contexts=[],this.msaaTextures=[],this.msaaSamples=1}}class GpuRenderTargetAdaptor{init(A,_){this._renderer=A,this._renderTargetSystem=_}copyToTexture(A,_,I,B,T){const R=this._renderer,P=this._getGpuColorTexture(A),D=R.texture.getGpuSource(_.source);return R.encoder.commandEncoder.copyTextureToTexture({texture:P,origin:I},{texture:D,origin:T},B),_}startRenderPass(A,_=!0,I,B){const R=this._renderTargetSystem.getGpuRenderTarget(A),P=this.getDescriptor(A,_,I);R.descriptor=P,this._renderer.pipeline.setRenderTarget(R),this._renderer.encoder.beginRenderPass(R),this._renderer.encoder.setViewport(B)}finishRenderPass(){this._renderer.encoder.endRenderPass()}_getGpuColorTexture(A){const _=this._renderTargetSystem.getGpuRenderTarget(A);return _.contexts[0]?_.contexts[0].getCurrentTexture():this._renderer.texture.getGpuSource(A.colorTextures[0].source)}getDescriptor(A,_,I){typeof _=="boolean"&&(_=_?CLEAR.ALL:CLEAR.NONE);const B=this._renderTargetSystem,T=B.getGpuRenderTarget(A),R=A.colorTextures.map((F,L)=>{const U=T.contexts[L];let V,K;U?V=U.getCurrentTexture().createView():V=this._renderer.texture.getGpuSource(F).createView({mipLevelCount:1}),T.msaaTextures[L]&&(K=V,V=this._renderer.texture.getTextureView(T.msaaTextures[L]));const J=_&CLEAR.COLOR?"clear":"load";return I??(I=B.defaultClearColor),{view:V,resolveTarget:K,clearValue:I,storeOp:"store",loadOp:J}});let P;if((A.stencil||A.depth)&&!A.depthStencilTexture&&(A.ensureDepthStencilTexture(),A.depthStencilTexture.source.sampleCount=T.msaa?4:1),A.depthStencilTexture){const F=_&CLEAR.STENCIL?"clear":"load",L=_&CLEAR.DEPTH?"clear":"load";P={view:this._renderer.texture.getGpuSource(A.depthStencilTexture.source).createView(),stencilStoreOp:"store",stencilLoadOp:F,depthClearValue:1,depthLoadOp:L,depthStoreOp:"store"}}return{colorAttachments:R,depthStencilAttachment:P}}clear(A,_=!0,I,B){if(!_)return;const{gpu:T,encoder:R}=this._renderer,P=T.device;if(R.commandEncoder===null){const F=P.createCommandEncoder(),L=this.getDescriptor(A,_,I),U=F.beginRenderPass(L);U.setViewport(B.x,B.y,B.width,B.height,0,1),U.end();const V=F.finish();P.queue.submit([V])}else this.startRenderPass(A,_,I,B)}initGpuRenderTarget(A){A.isRoot=!0;const _=new GpuRenderTarget;return A.colorTextures.forEach((I,B)=>{if(I instanceof CanvasSource){const T=I.resource.getContext("webgpu"),R=I.transparent?"premultiplied":"opaque";try{T.configure({device:this._renderer.gpu.device,usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC,format:"bgra8unorm",alphaMode:R})}catch(P){console.error(P)}_.contexts[B]=T}if(_.msaa=I.source.antialias,I.source.antialias){const T=new TextureSource({width:0,height:0,sampleCount:4});_.msaaTextures[B]=T}}),_.msaa&&(_.msaaSamples=4,A.depthStencilTexture&&(A.depthStencilTexture.source.sampleCount=4)),_}destroyGpuRenderTarget(A){A.contexts.forEach(_=>{_.unconfigure()}),A.msaaTextures.forEach(_=>{_.destroy()}),A.msaaTextures.length=0,A.contexts.length=0}ensureDepthStencilTexture(A){const _=this._renderTargetSystem.getGpuRenderTarget(A);A.depthStencilTexture&&_.msaa&&(A.depthStencilTexture.source.sampleCount=4)}resizeGpuRenderTarget(A){const _=this._renderTargetSystem.getGpuRenderTarget(A);_.width=A.width,_.height=A.height,_.msaa&&A.colorTextures.forEach((I,B)=>{_.msaaTextures[B]?.resize(I.source.width,I.source.height,I.source._resolution)})}}class GpuRenderTargetSystem extends RenderTargetSystem{constructor(A){super(A),this.adaptor=new GpuRenderTargetAdaptor,this.adaptor.init(A,this)}}GpuRenderTargetSystem.extension={type:[ExtensionType.WebGPUSystem],name:"renderTarget"};class GpuShaderSystem{constructor(){this._gpuProgramData=Object.create(null)}contextChange(A){this._gpu=A}getProgramData(A){return this._gpuProgramData[A._layoutKey]||this._createGPUProgramData(A)}_createGPUProgramData(A){const _=this._gpu.device,I=A.gpuLayout.map(T=>_.createBindGroupLayout({entries:T})),B={bindGroupLayouts:I};return this._gpuProgramData[A._layoutKey]={bindGroups:I,pipeline:_.createPipelineLayout(B)},this._gpuProgramData[A._layoutKey]}destroy(){this._gpu=null,this._gpuProgramData=null}}GpuShaderSystem.extension={type:[ExtensionType.WebGPUSystem],name:"shader"};const GpuBlendModesToPixi={};GpuBlendModesToPixi.normal={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"}};GpuBlendModesToPixi.add={alpha:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one",operation:"add"}};GpuBlendModesToPixi.multiply={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"dst",dstFactor:"one-minus-src-alpha",operation:"add"}};GpuBlendModesToPixi.screen={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src",operation:"add"}};GpuBlendModesToPixi.overlay={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src",operation:"add"}};GpuBlendModesToPixi.none={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"zero",dstFactor:"zero",operation:"add"}};GpuBlendModesToPixi["normal-npm"]={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"}};GpuBlendModesToPixi["add-npm"]={alpha:{srcFactor:"one",dstFactor:"one",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one",operation:"add"}};GpuBlendModesToPixi["screen-npm"]={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one-minus-src",operation:"add"}};GpuBlendModesToPixi.erase={alpha:{srcFactor:"zero",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"zero",dstFactor:"one-minus-src",operation:"add"}};GpuBlendModesToPixi.min={alpha:{srcFactor:"one",dstFactor:"one",operation:"min"},color:{srcFactor:"one",dstFactor:"one",operation:"min"}};GpuBlendModesToPixi.max={alpha:{srcFactor:"one",dstFactor:"one",operation:"max"},color:{srcFactor:"one",dstFactor:"one",operation:"max"}};class GpuStateSystem{constructor(){this.defaultState=new State$1,this.defaultState.blend=!0}contextChange(A){this.gpu=A}getColorTargets(A){return[{format:"bgra8unorm",writeMask:0,blend:GpuBlendModesToPixi[A.blendMode]||GpuBlendModesToPixi.normal}]}destroy(){this.gpu=null}}GpuStateSystem.extension={type:[ExtensionType.WebGPUSystem],name:"state"};const gpuUploadBufferImageResource={type:"image",upload(E,A,_){const I=E.resource,B=(E.pixelWidth|0)*(E.pixelHeight|0),T=I.byteLength/B;_.device.queue.writeTexture({texture:A},I,{offset:0,rowsPerImage:E.pixelHeight,bytesPerRow:E.pixelHeight*T},{width:E.pixelWidth,height:E.pixelHeight,depthOrArrayLayers:1})}},blockDataMap={"bc1-rgba-unorm":{blockBytes:8,blockWidth:4,blockHeight:4},"bc2-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"bc3-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"bc7-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"etc1-rgb-unorm":{blockBytes:8,blockWidth:4,blockHeight:4},"etc2-rgba8unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"astc-4x4-unorm":{blockBytes:16,blockWidth:4,blockHeight:4}},defaultBlockData={blockBytes:4,blockWidth:1,blockHeight:1},gpuUploadCompressedTextureResource={type:"compressed",upload(E,A,_){let I=E.pixelWidth,B=E.pixelHeight;const T=blockDataMap[E.format]||defaultBlockData;for(let R=0;R<E.resource.length;R++){const P=E.resource[R],D=Math.ceil(I/T.blockWidth)*T.blockBytes;_.device.queue.writeTexture({texture:A,mipLevel:R},P,{offset:0,bytesPerRow:D},{width:Math.ceil(I/T.blockWidth)*T.blockWidth,height:Math.ceil(B/T.blockHeight)*T.blockHeight,depthOrArrayLayers:1}),I=Math.max(I>>1,1),B=Math.max(B>>1,1)}}},gpuUploadImageResource={type:"image",upload(E,A,_){const I=E.resource;if(!I)return;if(globalThis.HTMLImageElement&&I instanceof HTMLImageElement){const P=DOMAdapter.get().createCanvas(I.width,I.height);P.getContext("2d").drawImage(I,0,0,I.width,I.height),E.resource=P,warn$1("ImageSource: Image element passed, converting to canvas and replacing resource.")}const B=Math.min(A.width,E.resourceWidth||E.pixelWidth),T=Math.min(A.height,E.resourceHeight||E.pixelHeight),R=E.alphaMode==="premultiply-alpha-on-upload";_.device.queue.copyExternalImageToTexture({source:I},{texture:A,premultipliedAlpha:R},{width:B,height:T})}},gpuUploadVideoResource={type:"video",upload(E,A,_){gpuUploadImageResource.upload(E,A,_)}};class GpuMipmapGenerator{constructor(A){this.device=A,this.sampler=A.createSampler({minFilter:"linear"}),this.pipelines={}}_getMipmapPipeline(A){let _=this.pipelines[A];return _||(this.mipmapShaderModule||(this.mipmapShaderModule=this.device.createShaderModule({code:`
                        var<private> pos : array<vec2<f32>, 3> = array<vec2<f32>, 3>(
                        vec2<f32>(-1.0, -1.0), vec2<f32>(-1.0, 3.0), vec2<f32>(3.0, -1.0));

                        struct VertexOutput {
                        @builtin(position) position : vec4<f32>,
                        @location(0) texCoord : vec2<f32>,
                        };

                        @vertex
                        fn vertexMain(@builtin(vertex_index) vertexIndex : u32) -> VertexOutput {
                        var output : VertexOutput;
                        output.texCoord = pos[vertexIndex] * vec2<f32>(0.5, -0.5) + vec2<f32>(0.5);
                        output.position = vec4<f32>(pos[vertexIndex], 0.0, 1.0);
                        return output;
                        }

                        @group(0) @binding(0) var imgSampler : sampler;
                        @group(0) @binding(1) var img : texture_2d<f32>;

                        @fragment
                        fn fragmentMain(@location(0) texCoord : vec2<f32>) -> @location(0) vec4<f32> {
                        return textureSample(img, imgSampler, texCoord);
                        }
                    `})),_=this.device.createRenderPipeline({layout:"auto",vertex:{module:this.mipmapShaderModule,entryPoint:"vertexMain"},fragment:{module:this.mipmapShaderModule,entryPoint:"fragmentMain",targets:[{format:A}]}}),this.pipelines[A]=_),_}generateMipmap(A){const _=this._getMipmapPipeline(A.format);if(A.dimension==="3d"||A.dimension==="1d")throw new Error("Generating mipmaps for non-2d textures is currently unsupported!");let I=A;const B=A.depthOrArrayLayers||1,T=A.usage&GPUTextureUsage.RENDER_ATTACHMENT;if(!T){const D={size:{width:Math.ceil(A.width/2),height:Math.ceil(A.height/2),depthOrArrayLayers:B},format:A.format,usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC|GPUTextureUsage.RENDER_ATTACHMENT,mipLevelCount:A.mipLevelCount-1};I=this.device.createTexture(D)}const R=this.device.createCommandEncoder({}),P=_.getBindGroupLayout(0);for(let D=0;D<B;++D){let F=A.createView({baseMipLevel:0,mipLevelCount:1,dimension:"2d",baseArrayLayer:D,arrayLayerCount:1}),L=T?1:0;for(let U=1;U<A.mipLevelCount;++U){const V=I.createView({baseMipLevel:L++,mipLevelCount:1,dimension:"2d",baseArrayLayer:D,arrayLayerCount:1}),K=R.beginRenderPass({colorAttachments:[{view:V,storeOp:"store",loadOp:"clear",clearValue:{r:0,g:0,b:0,a:0}}]}),J=this.device.createBindGroup({layout:P,entries:[{binding:0,resource:this.sampler},{binding:1,resource:F}]});K.setPipeline(_),K.setBindGroup(0,J),K.draw(3,1,0,0),K.end(),F=V}}if(!T){const D={width:Math.ceil(A.width/2),height:Math.ceil(A.height/2),depthOrArrayLayers:B};for(let F=1;F<A.mipLevelCount;++F)R.copyTextureToTexture({texture:I,mipLevel:F-1},{texture:A,mipLevel:F},D),D.width=Math.ceil(D.width/2),D.height=Math.ceil(D.height/2)}return this.device.queue.submit([R.finish()]),T||I.destroy(),A}}class GpuTextureSystem{constructor(A){this.managedTextures=[],this._gpuSources=Object.create(null),this._gpuSamplers=Object.create(null),this._bindGroupHash=Object.create(null),this._textureViewHash=Object.create(null),this._uploads={image:gpuUploadImageResource,buffer:gpuUploadBufferImageResource,video:gpuUploadVideoResource,compressed:gpuUploadCompressedTextureResource},this._renderer=A,A.renderableGC.addManagedHash(this,"_gpuSources"),A.renderableGC.addManagedHash(this,"_gpuSamplers"),A.renderableGC.addManagedHash(this,"_bindGroupHash"),A.renderableGC.addManagedHash(this,"_textureViewHash")}contextChange(A){this._gpu=A}initSource(A){return this._gpuSources[A.uid]?this._gpuSources[A.uid]:this._initSource(A)}_initSource(A){if(A.autoGenerateMipmaps){const D=Math.max(A.pixelWidth,A.pixelHeight);A.mipLevelCount=Math.floor(Math.log2(D))+1}let _=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST;A.uploadMethodId!=="compressed"&&(_|=GPUTextureUsage.RENDER_ATTACHMENT,_|=GPUTextureUsage.COPY_SRC);const I=blockDataMap[A.format]||{blockWidth:1,blockHeight:1},B=Math.ceil(A.pixelWidth/I.blockWidth)*I.blockWidth,T=Math.ceil(A.pixelHeight/I.blockHeight)*I.blockHeight,R={label:A.label,size:{width:B,height:T},format:A.format,sampleCount:A.sampleCount,mipLevelCount:A.mipLevelCount,dimension:A.dimension,usage:_},P=this._gpuSources[A.uid]=this._gpu.device.createTexture(R);return this.managedTextures.includes(A)||(A.on("update",this.onSourceUpdate,this),A.on("resize",this.onSourceResize,this),A.on("destroy",this.onSourceDestroy,this),A.on("unload",this.onSourceUnload,this),A.on("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.push(A)),this.onSourceUpdate(A),P}onSourceUpdate(A){const _=this.getGpuSource(A);_&&(this._uploads[A.uploadMethodId]&&this._uploads[A.uploadMethodId].upload(A,_,this._gpu),A.autoGenerateMipmaps&&A.mipLevelCount>1&&this.onUpdateMipmaps(A))}onSourceUnload(A){const _=this._gpuSources[A.uid];_&&(this._gpuSources[A.uid]=null,_.destroy())}onUpdateMipmaps(A){this._mipmapGenerator||(this._mipmapGenerator=new GpuMipmapGenerator(this._gpu.device));const _=this.getGpuSource(A);this._mipmapGenerator.generateMipmap(_)}onSourceDestroy(A){A.off("update",this.onSourceUpdate,this),A.off("unload",this.onSourceUnload,this),A.off("destroy",this.onSourceDestroy,this),A.off("resize",this.onSourceResize,this),A.off("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.splice(this.managedTextures.indexOf(A),1),this.onSourceUnload(A)}onSourceResize(A){const _=this._gpuSources[A.uid];_?(_.width!==A.pixelWidth||_.height!==A.pixelHeight)&&(this._textureViewHash[A.uid]=null,this._bindGroupHash[A.uid]=null,this.onSourceUnload(A),this.initSource(A)):this.initSource(A)}_initSampler(A){return this._gpuSamplers[A._resourceId]=this._gpu.device.createSampler(A),this._gpuSamplers[A._resourceId]}getGpuSampler(A){return this._gpuSamplers[A._resourceId]||this._initSampler(A)}getGpuSource(A){return this._gpuSources[A.uid]||this.initSource(A)}getTextureBindGroup(A){return this._bindGroupHash[A.uid]??this._createTextureBindGroup(A)}_createTextureBindGroup(A){const _=A.source;return this._bindGroupHash[A.uid]=new BindGroup({0:_,1:_.style,2:new UniformGroup({uTextureMatrix:{type:"mat3x3<f32>",value:A.textureMatrix.mapCoord}})}),this._bindGroupHash[A.uid]}getTextureView(A){const _=A.source;return this._textureViewHash[_.uid]??this._createTextureView(_)}_createTextureView(A){return this._textureViewHash[A.uid]=this.getGpuSource(A).createView(),this._textureViewHash[A.uid]}generateCanvas(A){const _=this._renderer,I=_.gpu.device.createCommandEncoder(),B=DOMAdapter.get().createCanvas();B.width=A.source.pixelWidth,B.height=A.source.pixelHeight;const T=B.getContext("webgpu");return T.configure({device:_.gpu.device,usage:GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC,format:DOMAdapter.get().getNavigator().gpu.getPreferredCanvasFormat(),alphaMode:"premultiplied"}),I.copyTextureToTexture({texture:_.texture.getGpuSource(A.source),origin:{x:0,y:0}},{texture:T.getCurrentTexture()},{width:B.width,height:B.height}),_.gpu.device.queue.submit([I.finish()]),B}getPixels(A){const _=this.generateCanvas(A),I=CanvasPool.getOptimalCanvasAndContext(_.width,_.height),B=I.context;B.drawImage(_,0,0);const{width:T,height:R}=_,P=B.getImageData(0,0,T,R),D=new Uint8ClampedArray(P.data.buffer);return CanvasPool.returnCanvasAndContext(I),{pixels:D,width:T,height:R}}destroy(){this.managedTextures.slice().forEach(A=>this.onSourceDestroy(A)),this.managedTextures=null;for(const A of Object.keys(this._bindGroupHash)){const _=Number(A);this._bindGroupHash[_]?.destroy(),this._bindGroupHash[_]=null}this._gpu=null,this._mipmapGenerator=null,this._gpuSources=null,this._bindGroupHash=null,this._textureViewHash=null,this._gpuSamplers=null}}GpuTextureSystem.extension={type:[ExtensionType.WebGPUSystem],name:"texture"};class GpuGraphicsAdaptor{constructor(){this._maxTextures=0}contextChange(A){const _=new UniformGroup({uTransformMatrix:{value:new Matrix,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}});this._maxTextures=A.limits.maxBatchableTextures;const I=compileHighShaderGpuProgram({name:"graphics",bits:[colorBit,generateTextureBatchBit(this._maxTextures),localUniformBitGroup2,roundPixelsBit]});this.shader=new Shader({gpuProgram:I,resources:{localUniforms:_}})}execute(A,_){const I=_.context,B=I.customShader||this.shader,T=A.renderer,R=T.graphicsContext,{batcher:P,instructions:D}=R.getContextRenderData(I),F=T.encoder;F.setGeometry(P.geometry,B.gpuProgram);const L=T.globalUniforms.bindGroup;F.setBindGroup(0,L,B.gpuProgram);const U=T.renderPipes.uniformBatch.getUniformBindGroup(B.resources.localUniforms,!0);F.setBindGroup(2,U,B.gpuProgram);const V=D.instructions;let K=null;for(let J=0;J<D.instructionSize;J++){const ee=V[J];if(ee.topology!==K&&(K=ee.topology,F.setPipelineFromGeometryProgramAndState(P.geometry,B.gpuProgram,A.state,ee.topology)),B.groups[1]=ee.bindGroup,!ee.gpuBindGroup){const ie=ee.textures;ee.bindGroup=getTextureBatchBindGroup(ie.textures,ie.count,this._maxTextures),ee.gpuBindGroup=T.bindGroup.getBindGroup(ee.bindGroup,B.gpuProgram,1)}F.setBindGroup(1,ee.bindGroup,B.gpuProgram),F.renderPassEncoder.drawIndexed(ee.size,1,ee.start)}}destroy(){this.shader.destroy(!0),this.shader=null}}GpuGraphicsAdaptor.extension={type:[ExtensionType.WebGPUPipesAdaptor],name:"graphics"};class GpuMeshAdapter{init(){const A=compileHighShaderGpuProgram({name:"mesh",bits:[localUniformBit,textureBit,roundPixelsBit]});this._shader=new Shader({gpuProgram:A,resources:{uTexture:Texture.EMPTY._source,uSampler:Texture.EMPTY._source.style,textureUniforms:{uTextureMatrix:{type:"mat3x3<f32>",value:new Matrix}}}})}execute(A,_){const I=A.renderer;let B=_._shader;if(!B)B=this._shader,B.groups[2]=I.texture.getTextureBindGroup(_.texture);else if(!B.gpuProgram){warn$1("Mesh shader has no gpuProgram",_.shader);return}const T=B.gpuProgram;if(T.autoAssignGlobalUniforms&&(B.groups[0]=I.globalUniforms.bindGroup),T.autoAssignLocalUniforms){const R=A.localUniforms;B.groups[1]=I.renderPipes.uniformBatch.getUniformBindGroup(R,!0)}I.encoder.draw({geometry:_._geometry,shader:B,state:_.state})}destroy(){this._shader.destroy(!0),this._shader=null}}GpuMeshAdapter.extension={type:[ExtensionType.WebGPUPipesAdaptor],name:"mesh"};const DefaultWebGPUSystems=[...SharedSystems,GpuUboSystem,GpuEncoderSystem,GpuDeviceSystem,GpuLimitsSystem,GpuBufferSystem,GpuTextureSystem,GpuRenderTargetSystem,GpuShaderSystem,GpuStateSystem,PipelineSystem,GpuColorMaskSystem,GpuStencilSystem,BindGroupSystem],DefaultWebGPUPipes=[...SharedRenderPipes,GpuUniformBatchPipe],DefaultWebGPUAdapters=[GpuBatchAdaptor,GpuMeshAdapter,GpuGraphicsAdaptor],systems=[],renderPipes=[],renderPipeAdaptors=[];extensions.handleByNamedList(ExtensionType.WebGPUSystem,systems);extensions.handleByNamedList(ExtensionType.WebGPUPipes,renderPipes);extensions.handleByNamedList(ExtensionType.WebGPUPipesAdaptor,renderPipeAdaptors);extensions.add(...DefaultWebGPUSystems,...DefaultWebGPUPipes,...DefaultWebGPUAdapters);class WebGPURenderer extends AbstractRenderer{constructor(){const A={name:"webgpu",type:RendererType.WEBGPU,systems,renderPipes,renderPipeAdaptors};super(A)}}const WebGPURenderer$1=Object.freeze(Object.defineProperty({__proto__:null,WebGPURenderer},Symbol.toStringTag,{value:"Module"})),DEPRECATED_DRAW_MODES={POINTS:"point-list",LINES:"line-list",LINE_STRIP:"line-strip",TRIANGLES:"triangle-list",TRIANGLE_STRIP:"triangle-strip"},DRAW_MODES=new Proxy(DEPRECATED_DRAW_MODES,{get(E,A){return deprecation(v8_0_0,`DRAW_MODES.${A} is deprecated, use '${DEPRECATED_DRAW_MODES[A]}' instead`),E[A]}});var DEPRECATED_WRAP_MODES=(E=>(E.CLAMP="clamp-to-edge",E.REPEAT="repeat",E.MIRRORED_REPEAT="mirror-repeat",E))(DEPRECATED_WRAP_MODES||{});const WRAP_MODES=new Proxy(DEPRECATED_WRAP_MODES,{get(E,A){return deprecation(v8_0_0,`DRAW_MODES.${A} is deprecated, use '${DEPRECATED_WRAP_MODES[A]}' instead`),E[A]}});var DEPRECATED_SCALE_MODES=(E=>(E.NEAREST="nearest",E.LINEAR="linear",E))(DEPRECATED_SCALE_MODES||{});const SCALE_MODES=new Proxy(DEPRECATED_SCALE_MODES,{get(E,A){return deprecation(v8_0_0,`DRAW_MODES.${A} is deprecated, use '${DEPRECATED_SCALE_MODES[A]}' instead`),E[A]}});class TextureUvs{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(A,_,I){const B=_.width,T=_.height;if(I){const R=A.width/2/B,P=A.height/2/T,D=A.x/B+R,F=A.y/T+P;I=groupD8.add(I,groupD8.NW),this.x0=D+R*groupD8.uX(I),this.y0=F+P*groupD8.uY(I),I=groupD8.add(I,2),this.x1=D+R*groupD8.uX(I),this.y1=F+P*groupD8.uY(I),I=groupD8.add(I,2),this.x2=D+R*groupD8.uX(I),this.y2=F+P*groupD8.uY(I),I=groupD8.add(I,2),this.x3=D+R*groupD8.uX(I),this.y3=F+P*groupD8.uY(I)}else this.x0=A.x/B,this.y0=A.y/T,this.x1=(A.x+A.width)/B,this.y1=A.y/T,this.x2=(A.x+A.width)/B,this.y2=(A.y+A.height)/T,this.x3=A.x/B,this.y3=(A.y+A.height)/T;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[pixi.js/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}function parseFunctionBody(E){const A=E.toString(),_=A.indexOf("{"),I=A.lastIndexOf("}");if(_===-1||I===-1)throw new Error("getFunctionBody: No body found in function definition");return A.slice(_+1,I).trim()}function getFastGlobalBounds(E,A){return deprecation("8.7.0","Use container.getFastGlobalBounds() instead"),E.getFastGlobalBounds(!0,A)}class RenderContainer extends ViewContainer{constructor(A){typeof A=="function"&&(A={render:A});const{render:_,...I}=A;super({label:"RenderContainer",...I}),this.renderPipeId="customRender",this.batched=!1,_&&(this.render=_),this.containsPoint=A.containsPoint??(()=>!1),this.addBounds=A.addBounds??(()=>!1)}updateBounds(){this._bounds.clear(),this.addBounds(this._bounds)}render(A){}}function collectAllRenderables(E,A,_){deprecation("8.7.0","Please use container.collectRenderables instead.");const I=_.renderPipes?_:_.batch.renderer;return E.collectRenderables(A,I,null)}function updateLocalTransform(E,A){const _=A._scale,I=A._pivot,B=A._position,T=_._x,R=_._y,P=I._x,D=I._y;E.a=A._cx*T,E.b=A._sx*T,E.c=A._cy*R,E.d=A._sy*R,E.tx=B._x-(P*E.a+D*E.c),E.ty=B._y-(P*E.b+D*E.d)}function updateWorldTransform(E,A,_){const I=E.a,B=E.b,T=E.c,R=E.d,P=E.tx,D=E.ty,F=A.a,L=A.b,U=A.c,V=A.d;_.a=I*F+B*U,_.b=I*L+B*V,_.c=T*F+R*U,_.d=T*L+R*V,_.tx=P*F+D*U+A.tx,_.ty=P*L+D*V+A.ty}class GraphicsGpuData{constructor(){this.batches=[],this.batched=!1}destroy(){this.batches.forEach(A=>{BigPool.return(A)}),this.batches.length=0}}class GraphicsPipe{constructor(A,_){this.state=State$1.for2d(),this.renderer=A,this._adaptor=_,this.renderer.runners.contextChange.add(this)}contextChange(){this._adaptor.contextChange(this.renderer)}validateRenderable(A){const _=A.context,I=!!A._gpuData,B=this.renderer.graphicsContext.updateGpuContext(_);return!!(B.isBatchable||I!==B.isBatchable)}addRenderable(A,_){const I=this.renderer.graphicsContext.updateGpuContext(A.context);A.didViewUpdate&&this._rebuild(A),I.isBatchable?this._addToBatcher(A,_):(this.renderer.renderPipes.batch.break(_),_.add(A))}updateRenderable(A){const I=this._getGpuDataForRenderable(A).batches;for(let B=0;B<I.length;B++){const T=I[B];T._batcher.updateElement(T)}}execute(A){if(!A.isRenderable)return;const _=this.renderer,I=A.context;if(!_.graphicsContext.getGpuContext(I).batches.length)return;const T=I.customShader||this._adaptor.shader;this.state.blendMode=A.groupBlendMode;const R=T.resources.localUniforms.uniforms;R.uTransformMatrix=A.groupTransform,R.uRound=_._roundPixels|A._roundPixels,color32BitToUniform(A.groupColorAlpha,R.uColor,0),this._adaptor.execute(this,A)}_rebuild(A){const _=this._getGpuDataForRenderable(A),I=this.renderer.graphicsContext.updateGpuContext(A.context);_.destroy(),I.isBatchable&&this._updateBatchesForRenderable(A,_)}_addToBatcher(A,_){const I=this.renderer.renderPipes.batch,B=this._getGpuDataForRenderable(A).batches;for(let T=0;T<B.length;T++){const R=B[T];I.addToBatch(R,_)}}_getGpuDataForRenderable(A){return A._gpuData[this.renderer.uid]||this._initGpuDataForRenderable(A)}_initGpuDataForRenderable(A){const _=new GraphicsGpuData;return A._gpuData[this.renderer.uid]=_,_}_updateBatchesForRenderable(A,_){const I=A.context,B=this.renderer.graphicsContext.getGpuContext(I),T=this.renderer._roundPixels|A._roundPixels;_.batches=B.batches.map(R=>{const P=BigPool.get(BatchableGraphics);return R.copyTo(P),P.renderable=A,P.roundPixels=T,P})}destroy(){this.renderer=null,this._adaptor.destroy(),this._adaptor=null,this.state=null}}GraphicsPipe.extension={type:[ExtensionType.WebGLPipes,ExtensionType.WebGPUPipes,ExtensionType.CanvasPipes],name:"graphics"};const _RenderLayerClass=class Sn extends Container{constructor(A={}){A={...Sn.defaultOptions,...A},super(),this.renderLayerChildren=[],this.sortableChildren=A.sortableChildren,this.sortFunction=A.sortFunction}attach(...A){for(let _=0;_<A.length;_++){const I=A[_];if(I.parentRenderLayer){if(I.parentRenderLayer===this)continue;I.parentRenderLayer.detach(I)}this.renderLayerChildren.push(I),I.parentRenderLayer=this;const B=this.renderGroup||this.parentRenderGroup;B&&(B.structureDidChange=!0)}return A[0]}detach(...A){for(let _=0;_<A.length;_++){const I=A[_],B=this.renderLayerChildren.indexOf(I);B!==-1&&this.renderLayerChildren.splice(B,1),I.parentRenderLayer=null;const T=this.renderGroup||this.parentRenderGroup;T&&(T.structureDidChange=!0)}return A[0]}detachAll(){const A=this.renderLayerChildren;for(let _=0;_<A.length;_++)A[_].parentRenderLayer=null;this.renderLayerChildren.length=0}collectRenderables(A,_,I){const B=this.renderLayerChildren,T=B.length;this.sortableChildren&&this.sortRenderLayerChildren();for(let R=0;R<T;R++)B[R].parent||warn$1("Container must be added to both layer and scene graph. Layers only handle render order - the scene graph is required for transforms (addChild)",B[R]),B[R].collectRenderables(A,_,this)}sortRenderLayerChildren(){this.renderLayerChildren.sort(this.sortFunction)}_getGlobalBoundsRecursive(A,_,I){if(!A)return;const B=this.renderLayerChildren;for(let T=0;T<B.length;T++)B[T]._getGlobalBoundsRecursive(!0,_,this)}};_RenderLayerClass.defaultOptions={sortableChildren:!1,sortFunction:(E,A)=>E.zIndex-A.zIndex};let RenderLayerClass=_RenderLayerClass;const RenderLayer=RenderLayerClass,_PlaneGeometry=class Cn extends MeshGeometry{constructor(...A){super({});let _=A[0]??{};typeof _=="number"&&(deprecation(v8_0_0,"PlaneGeometry constructor changed please use { width, height, verticesX, verticesY } instead"),_={width:_,height:A[1],verticesX:A[2],verticesY:A[3]}),this.build(_)}build(A){A={...Cn.defaultOptions,...A},this.verticesX=this.verticesX??A.verticesX,this.verticesY=this.verticesY??A.verticesY,this.width=this.width??A.width,this.height=this.height??A.height;const _=this.verticesX*this.verticesY,I=[],B=[],T=[],R=this.verticesX-1,P=this.verticesY-1,D=this.width/R,F=this.height/P;for(let U=0;U<_;U++){const V=U%this.verticesX,K=U/this.verticesX|0;I.push(V*D,K*F),B.push(V/R,K/P)}const L=R*P;for(let U=0;U<L;U++){const V=U%R,K=U/R|0,J=K*this.verticesX+V,ee=K*this.verticesX+V+1,ie=(K+1)*this.verticesX+V,ne=(K+1)*this.verticesX+V+1;T.push(J,ee,ie,ee,ne,ie)}this.buffers[0].data=new Float32Array(I),this.buffers[1].data=new Float32Array(B),this.indexBuffer.data=new Uint32Array(T),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}};_PlaneGeometry.defaultOptions={width:100,height:100,verticesX:10,verticesY:10};let PlaneGeometry=_PlaneGeometry;function applyProjectiveTransformationToPlane(E,A,_,I){const B=_.buffers[0],T=B.data,{verticesX:R,verticesY:P}=_,D=E/(R-1),F=A/(P-1);let L=0;const U=I[0],V=I[1],K=I[2],J=I[3],ee=I[4],ie=I[5],ne=I[6],ce=I[7],fe=I[8];for(let de=0;de<T.length;de+=2){const pe=L%R*D,ve=(L/R|0)*F,ye=U*pe+V*ve+K,_e=J*pe+ee*ve+ie,be=ne*pe+ce*ve+fe;T[de]=ye/be,T[de+1]=_e/be,L++}B.update()}function computeAdjugate(E,A){const _=A[0],I=A[1],B=A[2],T=A[3],R=A[4],P=A[5],D=A[6],F=A[7],L=A[8];return E[0]=R*L-P*F,E[1]=B*F-I*L,E[2]=I*P-B*R,E[3]=P*D-T*L,E[4]=_*L-B*D,E[5]=B*T-_*P,E[6]=T*F-R*D,E[7]=I*D-_*F,E[8]=_*R-I*T,E}function multiplyMatrix3x3(E,A,_){const I=A[0],B=A[1],T=A[2],R=A[3],P=A[4],D=A[5],F=A[6],L=A[7],U=A[8],V=_[0],K=_[1],J=_[2],ee=_[3],ie=_[4],ne=_[5],ce=_[6],fe=_[7],de=_[8];return E[0]=V*I+K*R+J*F,E[1]=V*B+K*P+J*L,E[2]=V*T+K*D+J*U,E[3]=ee*I+ie*R+ne*F,E[4]=ee*B+ie*P+ne*L,E[5]=ee*T+ie*D+ne*U,E[6]=ce*I+fe*R+de*F,E[7]=ce*B+fe*P+de*L,E[8]=ce*T+fe*D+de*U,E}function multiplyMatrixAndVector(E,A,_){const I=_[0],B=_[1],T=_[2];return E[0]=A[0]*I+A[1]*B+A[2]*T,E[1]=A[3]*I+A[4]*B+A[5]*T,E[2]=A[6]*I+A[7]*B+A[8]*T,E}const tempMatrix=[0,0,0,0,0,0,0,0,0],tempVec=[0,0,0],tempVec2=[0,0,0];function generateBasisToPointsMatrix(E,A,_,I,B,T,R,P,D){const F=tempMatrix;F[0]=A,F[1]=I,F[2]=T,F[3]=_,F[4]=B,F[5]=R,F[6]=1,F[7]=1,F[8]=1;const L=computeAdjugate(E,F);tempVec2[0]=P,tempVec2[1]=D,tempVec2[2]=1;const U=multiplyMatrixAndVector(tempVec,L,tempVec2),V=E;return E[0]=U[0],E[1]=0,E[2]=0,E[3]=0,E[4]=U[1],E[5]=0,E[6]=0,E[7]=0,E[8]=U[2],multiplyMatrix3x3(E,V,F)}const tempSourceMatrix=[0,0,0,0,0,0,0,0,0],tempDestinationMatrix=[0,0,0,0,0,0,0,0,0];function compute2DProjection(E,A,_,I,B,T,R,P,D,F,L,U,V,K,J,ee,ie){const ne=generateBasisToPointsMatrix(tempSourceMatrix,A,_,T,R,F,L,K,J),ce=generateBasisToPointsMatrix(tempDestinationMatrix,I,B,P,D,U,V,ee,ie);return multiplyMatrix3x3(E,computeAdjugate(ne,ne),ce)}class PerspectivePlaneGeometry extends PlaneGeometry{constructor(A){super(A),this._projectionMatrix=[0,0,0,0,0,0,0,0,0];const{width:_,height:I}=A;this.corners=[0,0,_,0,_,I,0,I]}setCorners(A,_,I,B,T,R,P,D){const F=this.corners;F[0]=A,F[1]=_,F[2]=I,F[3]=B,F[4]=T,F[5]=R,F[6]=P,F[7]=D,this.updateProjection()}updateProjection(){const{width:A,height:_}=this,I=this.corners,B=compute2DProjection(this._projectionMatrix,0,0,I[0],I[1],A,0,I[2],I[3],A,_,I[4],I[5],0,_,I[6],I[7]);applyProjectiveTransformationToPlane(A,_,this,B)}}const _PerspectiveMesh=class In extends Mesh$1{constructor(A){A={...In.defaultOptions,...A};const{texture:_,verticesX:I,verticesY:B,...T}=A,R=new PerspectivePlaneGeometry(definedProps({width:_.width,height:_.height,verticesX:I,verticesY:B}));super(definedProps({...T,geometry:R})),this._texture=_,this.geometry.setCorners(A.x0,A.y0,A.x1,A.y1,A.x2,A.y2,A.x3,A.y3)}textureUpdated(){const A=this.geometry;if(!A)return;const{width:_,height:I}=this.texture;(A.width!==_||A.height!==I)&&(A.width=_,A.height=I,A.updateProjection())}set texture(A){this._texture!==A&&(super.texture=A,this.textureUpdated())}get texture(){return this._texture}setCorners(A,_,I,B,T,R,P,D){this.geometry.setCorners(A,_,I,B,T,R,P,D)}};_PerspectiveMesh.defaultOptions={texture:Texture.WHITE,verticesX:10,verticesY:10,x0:0,y0:0,x1:100,y1:0,x2:100,y2:100,x3:0,y3:100};let PerspectiveMesh$1=_PerspectiveMesh,MeshPlane$1=class extends Mesh$1{constructor(A){const{texture:_,verticesX:I,verticesY:B,...T}=A,R=new PlaneGeometry(definedProps({width:_.width,height:_.height,verticesX:I,verticesY:B}));super(definedProps({...T,geometry:R,texture:_})),this.texture=_,this.autoResize=!0}textureUpdated(){const A=this.geometry,{width:_,height:I}=this.texture;this.autoResize&&(A.width!==_||A.height!==I)&&(A.width=_,A.height=I,A.build({}))}set texture(A){this._texture?.off("update",this.textureUpdated,this),super.texture=A,A.on("update",this.textureUpdated,this),this.textureUpdated()}get texture(){return this._texture}destroy(A){this.texture.off("update",this.textureUpdated,this),super.destroy(A)}};const _RopeGeometry=class Bn extends MeshGeometry{constructor(A){const{width:_,points:I,textureScale:B}={...Bn.defaultOptions,...A};super({positions:new Float32Array(I.length*4),uvs:new Float32Array(I.length*4),indices:new Uint32Array((I.length-1)*6)}),this.points=I,this._width=_,this.textureScale=B,this._build()}get width(){return this._width}_build(){const A=this.points;if(!A)return;const _=this.getBuffer("aPosition"),I=this.getBuffer("aUV"),B=this.getIndex();if(A.length<1)return;_.data.length/4!==A.length&&(_.data=new Float32Array(A.length*4),I.data=new Float32Array(A.length*4),B.data=new Uint16Array((A.length-1)*6));const T=I.data,R=B.data;T[0]=0,T[1]=0,T[2]=0,T[3]=1;let P=0,D=A[0];const F=this._width*this.textureScale,L=A.length;for(let V=0;V<L;V++){const K=V*4;if(this.textureScale>0){const J=D.x-A[V].x,ee=D.y-A[V].y,ie=Math.sqrt(J*J+ee*ee);D=A[V],P+=ie/F}else P=V/(L-1);T[K]=P,T[K+1]=0,T[K+2]=P,T[K+3]=1}let U=0;for(let V=0;V<L-1;V++){const K=V*2;R[U++]=K,R[U++]=K+1,R[U++]=K+2,R[U++]=K+2,R[U++]=K+1,R[U++]=K+3}I.update(),B.update(),this.updateVertices()}updateVertices(){const A=this.points;if(A.length<1)return;let _=A[0],I,B=0,T=0;const R=this.buffers[0].data,P=A.length,D=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let F=0;F<P;F++){const L=A[F],U=F*4;F<A.length-1?I=A[F+1]:I=L,T=-(I.x-_.x),B=I.y-_.y;const V=Math.sqrt(B*B+T*T);V<1e-6?(B=0,T=0):(B/=V,T/=V,B*=D,T*=D),R[U]=L.x+B,R[U+1]=L.y+T,R[U+2]=L.x-B,R[U+3]=L.y-T,_=L}this.buffers[0].update()}update(){this.textureScale>0?this._build():this.updateVertices()}};_RopeGeometry.defaultOptions={width:200,points:[],textureScale:0};let RopeGeometry=_RopeGeometry;const _MeshRope=class Tn extends Mesh$1{constructor(A){const{texture:_,points:I,textureScale:B,...T}={...Tn.defaultOptions,...A},R=new RopeGeometry(definedProps({width:_.height,points:I,textureScale:B}));B>0&&(_.source.style.addressMode="repeat"),super(definedProps({...T,texture:_,geometry:R})),this.autoUpdate=!0,this.onRender=this._render}_render(){const A=this.geometry;(this.autoUpdate||A._width!==this.texture.height)&&(A._width=this.texture.height,A.update())}};_MeshRope.defaultOptions={textureScale:0};let MeshRope$1=_MeshRope,MeshSimple$1=class extends Mesh$1{constructor(A){const{texture:_,vertices:I,uvs:B,indices:T,topology:R,...P}=A,D=new MeshGeometry(definedProps({positions:I,uvs:B,indices:T,topology:R}));super(definedProps({...P,texture:_,geometry:D})),this.autoUpdate=!0,this.onRender=this._render}get vertices(){return this.geometry.getBuffer("aPosition").data}set vertices(A){this.geometry.getBuffer("aPosition").data=A}_render(){this.autoUpdate&&this.geometry.getBuffer("aPosition").update()}};class BatchableMesh{constructor(){this.batcherName="default",this.packAsQuad=!1,this.indexOffset=0,this.attributeOffset=0,this.roundPixels=0,this._batcher=null,this._batch=null,this._textureMatrixUpdateId=-1,this._uvUpdateId=-1}get blendMode(){return this.renderable.groupBlendMode}get topology(){return this._topology||this.geometry.topology}set topology(A){this._topology=A}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.geometry=null,this._uvUpdateId=-1,this._textureMatrixUpdateId=-1}setTexture(A){this.texture!==A&&(this.texture=A,this._textureMatrixUpdateId=-1)}get uvs(){const _=this.geometry.getBuffer("aUV"),I=_.data;let B=I;const T=this.texture.textureMatrix;return T.isSimple||(B=this._transformedUvs,(this._textureMatrixUpdateId!==T._updateID||this._uvUpdateId!==_._updateID)&&((!B||B.length<I.length)&&(B=this._transformedUvs=new Float32Array(I.length)),this._textureMatrixUpdateId=T._updateID,this._uvUpdateId=_._updateID,T.multiplyUvs(I,B))),B}get positions(){return this.geometry.positions}get indices(){return this.geometry.indices}get color(){return this.renderable.groupColorAlpha}get groupTransform(){return this.renderable.groupTransform}get attributeSize(){return this.geometry.positions.length/2}get indexSize(){return this.geometry.indices.length}}function getTextureDefaultMatrix(E,A){const{width:_,height:I}=E.frame;return A.scale(1/_,1/I),A}class MeshGpuData{destroy(){}}class MeshPipe{constructor(A,_){this.localUniforms=new UniformGroup({uTransformMatrix:{value:new Matrix,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),this.localUniformsBindGroup=new BindGroup({0:this.localUniforms}),this.renderer=A,this._adaptor=_,this._adaptor.init()}validateRenderable(A){const _=this._getMeshData(A),I=_.batched,B=A.batched;if(_.batched=B,I!==B)return!0;if(B){const T=A._geometry;if(T.indices.length!==_.indexSize||T.positions.length!==_.vertexSize)return _.indexSize=T.indices.length,_.vertexSize=T.positions.length,!0;const R=this._getBatchableMesh(A);return R.texture.uid!==A._texture.uid&&(R._textureMatrixUpdateId=-1),!R._batcher.checkAndUpdateTexture(R,A._texture)}return!1}addRenderable(A,_){const I=this.renderer.renderPipes.batch,B=this._getMeshData(A);if(A.didViewUpdate&&(B.indexSize=A._geometry.indices?.length,B.vertexSize=A._geometry.positions?.length),B.batched){const T=this._getBatchableMesh(A);T.setTexture(A._texture),T.geometry=A._geometry,I.addToBatch(T,_)}else I.break(_),_.add(A)}updateRenderable(A){if(A.batched){const _=this._getBatchableMesh(A);_.setTexture(A._texture),_.geometry=A._geometry,_._batcher.updateElement(_)}}execute(A){if(!A.isRenderable)return;A.state.blendMode=getAdjustedBlendModeBlend(A.groupBlendMode,A.texture._source);const _=this.localUniforms;_.uniforms.uTransformMatrix=A.groupTransform,_.uniforms.uRound=this.renderer._roundPixels|A._roundPixels,_.update(),color32BitToUniform(A.groupColorAlpha,_.uniforms.uColor,0),this._adaptor.execute(this,A)}_getMeshData(A){var _,I;return(_=A._gpuData)[I=this.renderer.uid]||(_[I]=new MeshGpuData),A._gpuData[this.renderer.uid].meshData||this._initMeshData(A)}_initMeshData(A){return A._gpuData[this.renderer.uid].meshData={batched:A.batched,indexSize:0,vertexSize:0},A._gpuData[this.renderer.uid].meshData}_getBatchableMesh(A){var _,I;return(_=A._gpuData)[I=this.renderer.uid]||(_[I]=new MeshGpuData),A._gpuData[this.renderer.uid].batchableMesh||this._initBatchableMesh(A)}_initBatchableMesh(A){const _=new BatchableMesh;return _.renderable=A,_.setTexture(A._texture),_.transform=A.groupTransform,_.roundPixels=this.renderer._roundPixels|A._roundPixels,A._gpuData[this.renderer.uid].batchableMesh=_,_}destroy(){this.localUniforms=null,this.localUniformsBindGroup=null,this._adaptor.destroy(),this._adaptor=null,this.renderer=null}}MeshPipe.extension={type:[ExtensionType.WebGLPipes,ExtensionType.WebGPUPipes,ExtensionType.CanvasPipes],name:"mesh"};class GlParticleContainerAdaptor{execute(A,_){const I=A.state,B=A.renderer,T=_.shader||A.defaultShader;T.resources.uTexture=_.texture._source,T.resources.uniforms=A.localUniforms;const R=B.gl,P=A.getBuffers(_);B.shader.bind(T),B.state.set(I),B.geometry.bind(P.geometry,T.glProgram);const F=P.geometry.indexBuffer.data.BYTES_PER_ELEMENT===2?R.UNSIGNED_SHORT:R.UNSIGNED_INT;R.drawElements(R.TRIANGLES,_.particleChildren.length*6,F,0)}}class GpuParticleContainerAdaptor{execute(A,_){const I=A.renderer,B=_.shader||A.defaultShader;B.groups[0]=I.renderPipes.uniformBatch.getUniformBindGroup(A.localUniforms,!0),B.groups[1]=I.texture.getTextureBindGroup(_.texture);const T=A.state,R=A.getBuffers(_);I.encoder.draw({geometry:R.geometry,shader:_.shader||A.defaultShader,state:T,size:_.particleChildren.length*6})}}function createIndicesForQuads(E,A=null){const _=E*6;if(_>65535?A||(A=new Uint32Array(_)):A||(A=new Uint16Array(_)),A.length!==_)throw new Error(`Out buffer length is incorrect, got ${A.length} and expected ${_}`);for(let I=0,B=0;I<_;I+=6,B+=4)A[I+0]=B+0,A[I+1]=B+1,A[I+2]=B+2,A[I+3]=B+0,A[I+4]=B+2,A[I+5]=B+3;return A}function generateParticleUpdateFunction(E){return{dynamicUpdate:generateUpdateFunction(E,!0),staticUpdate:generateUpdateFunction(E,!1)}}function generateUpdateFunction(E,A){const _=[];_.push(`

        var index = 0;

        for (let i = 0; i < ps.length; ++i)
        {
            const p = ps[i];

            `);let I=0;for(const T in E){const R=E[T];if(A!==R.dynamic)continue;_.push(`offset = index + ${I}`),_.push(R.code);const P=getAttributeInfoFromFormat(R.format);I+=P.stride/4}_.push(`
            index += stride * 4;
        }
    `),_.unshift(`
        var stride = ${I};
    `);const B=_.join(`
`);return new Function("ps","f32v","u32v",B)}class ParticleBuffer{constructor(A){this._size=0,this._generateParticleUpdateCache={};const _=this._size=A.size??1e3,I=A.properties;let B=0,T=0;for(const L in I){const U=I[L],V=getAttributeInfoFromFormat(U.format);U.dynamic?T+=V.stride:B+=V.stride}this._dynamicStride=T/4,this._staticStride=B/4,this.staticAttributeBuffer=new ViewableBuffer(_*4*B),this.dynamicAttributeBuffer=new ViewableBuffer(_*4*T),this.indexBuffer=createIndicesForQuads(_);const R=new Geometry;let P=0,D=0;this._staticBuffer=new Buffer({data:new Float32Array(1),label:"static-particle-buffer",shrinkToFit:!1,usage:BufferUsage.VERTEX|BufferUsage.COPY_DST}),this._dynamicBuffer=new Buffer({data:new Float32Array(1),label:"dynamic-particle-buffer",shrinkToFit:!1,usage:BufferUsage.VERTEX|BufferUsage.COPY_DST});for(const L in I){const U=I[L],V=getAttributeInfoFromFormat(U.format);U.dynamic?(R.addAttribute(U.attributeName,{buffer:this._dynamicBuffer,stride:this._dynamicStride*4,offset:P*4,format:U.format}),P+=V.size):(R.addAttribute(U.attributeName,{buffer:this._staticBuffer,stride:this._staticStride*4,offset:D*4,format:U.format}),D+=V.size)}R.addIndex(this.indexBuffer);const F=this.getParticleUpdate(I);this._dynamicUpload=F.dynamicUpdate,this._staticUpload=F.staticUpdate,this.geometry=R}getParticleUpdate(A){const _=getParticleSyncKey(A);return this._generateParticleUpdateCache[_]?this._generateParticleUpdateCache[_]:(this._generateParticleUpdateCache[_]=this.generateParticleUpdate(A),this._generateParticleUpdateCache[_])}generateParticleUpdate(A){return generateParticleUpdateFunction(A)}update(A,_){A.length>this._size&&(_=!0,this._size=Math.max(A.length,this._size*1.5|0),this.staticAttributeBuffer=new ViewableBuffer(this._size*this._staticStride*4*4),this.dynamicAttributeBuffer=new ViewableBuffer(this._size*this._dynamicStride*4*4),this.indexBuffer=createIndicesForQuads(this._size),this.geometry.indexBuffer.setDataWithSize(this.indexBuffer,this.indexBuffer.byteLength,!0));const I=this.dynamicAttributeBuffer;if(this._dynamicUpload(A,I.float32View,I.uint32View),this._dynamicBuffer.setDataWithSize(this.dynamicAttributeBuffer.float32View,A.length*this._dynamicStride*4,!0),_){const B=this.staticAttributeBuffer;this._staticUpload(A,B.float32View,B.uint32View),this._staticBuffer.setDataWithSize(B.float32View,A.length*this._staticStride*4,!0)}}destroy(){this._staticBuffer.destroy(),this._dynamicBuffer.destroy(),this.geometry.destroy()}}function getParticleSyncKey(E){const A=[];for(const _ in E){const I=E[_];A.push(_,I.code,I.dynamic?"d":"s")}return A.join("_")}var fragment$1=`varying vec2 vUV;
varying vec4 vColor;

uniform sampler2D uTexture;

void main(void){
    vec4 color = texture2D(uTexture, vUV) * vColor;
    gl_FragColor = color;
}`,vertex$1=`attribute vec2 aVertex;
attribute vec2 aUV;
attribute vec4 aColor;

attribute vec2 aPosition;
attribute float aRotation;

uniform mat3 uTranslationMatrix;
uniform float uRound;
uniform vec2 uResolution;
uniform vec4 uColor;

varying vec2 vUV;
varying vec4 vColor;

vec2 roundPixels(vec2 position, vec2 targetSize)
{       
    return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
}

void main(void){
    float cosRotation = cos(aRotation);
    float sinRotation = sin(aRotation);
    float x = aVertex.x * cosRotation - aVertex.y * sinRotation;
    float y = aVertex.x * sinRotation + aVertex.y * cosRotation;

    vec2 v = vec2(x, y);
    v = v + aPosition;

    gl_Position = vec4((uTranslationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    if(uRound == 1.0)
    {
        gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
    }

    vUV = aUV;
    vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uColor;
}
`,wgsl=`
struct ParticleUniforms {
  uProjectionMatrix:mat3x3<f32>,
  uColor:vec4<f32>,
  uResolution:vec2<f32>,
  uRoundPixels:f32,
};

@group(0) @binding(0) var<uniform> uniforms: ParticleUniforms;

@group(1) @binding(0) var uTexture: texture_2d<f32>;
@group(1) @binding(1) var uSampler : sampler;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
    @location(1) color : vec4<f32>,
  };
@vertex
fn mainVertex(
  @location(0) aVertex: vec2<f32>,
  @location(1) aPosition: vec2<f32>,
  @location(2) aUV: vec2<f32>,
  @location(3) aColor: vec4<f32>,
  @location(4) aRotation: f32,
) -> VSOutput {
  
   let v = vec2(
       aVertex.x * cos(aRotation) - aVertex.y * sin(aRotation),
       aVertex.x * sin(aRotation) + aVertex.y * cos(aRotation)
   ) + aPosition;

   let position = vec4((uniforms.uProjectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    let vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uniforms.uColor;

  return VSOutput(
   position,
   aUV,
   vColor,
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @location(1) color: vec4<f32>,
  @builtin(position) position: vec4<f32>,
) -> @location(0) vec4<f32> {

    var sample = textureSample(uTexture, uSampler, uv) * color;
   
    return sample;
}`;class ParticleShader extends Shader{constructor(){const A=GlProgram.from({vertex:vertex$1,fragment:fragment$1}),_=GpuProgram.from({fragment:{source:wgsl,entryPoint:"mainFragment"},vertex:{source:wgsl,entryPoint:"mainVertex"}});super({glProgram:A,gpuProgram:_,resources:{uTexture:Texture.WHITE.source,uSampler:new TextureStyle({}),uniforms:{uTranslationMatrix:{value:new Matrix,type:"mat3x3<f32>"},uColor:{value:new Color$1(16777215),type:"vec4<f32>"},uRound:{value:1,type:"f32"},uResolution:{value:[0,0],type:"vec2<f32>"}}}})}}class ParticleContainerPipe{constructor(A,_){this.state=State$1.for2d(),this.localUniforms=new UniformGroup({uTranslationMatrix:{value:new Matrix,type:"mat3x3<f32>"},uColor:{value:new Float32Array(4),type:"vec4<f32>"},uRound:{value:1,type:"f32"},uResolution:{value:[0,0],type:"vec2<f32>"}}),this.renderer=A,this.adaptor=_,this.defaultShader=new ParticleShader,this.state=State$1.for2d()}validateRenderable(A){return!1}addRenderable(A,_){this.renderer.renderPipes.batch.break(_),_.add(A)}getBuffers(A){return A._gpuData[this.renderer.uid]||this._initBuffer(A)}_initBuffer(A){return A._gpuData[this.renderer.uid]=new ParticleBuffer({size:A.particleChildren.length,properties:A._properties}),A._gpuData[this.renderer.uid]}updateRenderable(A){}execute(A){const _=A.particleChildren;if(_.length===0)return;const I=this.renderer,B=this.getBuffers(A);A.texture||(A.texture=_[0].texture);const T=this.state;B.update(_,A._childrenDirty),A._childrenDirty=!1,T.blendMode=getAdjustedBlendModeBlend(A.blendMode,A.texture._source);const R=this.localUniforms.uniforms,P=R.uTranslationMatrix;A.worldTransform.copyTo(P),P.prepend(I.globalUniforms.globalUniformData.projectionMatrix),R.uResolution=I.globalUniforms.globalUniformData.resolution,R.uRound=I._roundPixels|A._roundPixels,color32BitToUniform(A.groupColorAlpha,R.uColor,0),this.adaptor.execute(this,A)}destroy(){this.defaultShader&&(this.defaultShader.destroy(),this.defaultShader=null)}}class GlParticleContainerPipe extends ParticleContainerPipe{constructor(A){super(A,new GlParticleContainerAdaptor)}}GlParticleContainerPipe.extension={type:[ExtensionType.WebGLPipes],name:"particle"};class GpuParticleContainerPipe extends ParticleContainerPipe{constructor(A){super(A,new GpuParticleContainerAdaptor)}}GpuParticleContainerPipe.extension={type:[ExtensionType.WebGPUPipes],name:"particle"};const _Particle=class ji{constructor(A){if(A instanceof Texture)this.texture=A,assignWithIgnore(this,ji.defaultOptions,{});else{const _={...ji.defaultOptions,...A};assignWithIgnore(this,_,{})}}get alpha(){return this._alpha}set alpha(A){this._alpha=Math.min(Math.max(A,0),1),this._updateColor()}get tint(){return bgr2rgb(this._tint)}set tint(A){this._tint=Color$1.shared.setValue(A??16777215).toBgrNumber(),this._updateColor()}_updateColor(){this.color=this._tint+((this._alpha*255|0)<<24)}};_Particle.defaultOptions={anchorX:0,anchorY:0,x:0,y:0,scaleX:1,scaleY:1,rotation:0,tint:16777215,alpha:1};let Particle=_Particle;const particleData={vertex:{attributeName:"aVertex",format:"float32x2",code:`
            const texture = p.texture;
            const sx = p.scaleX;
            const sy = p.scaleY;
            const ax = p.anchorX;
            const ay = p.anchorY;
            const trim = texture.trim;
            const orig = texture.orig;

            if (trim)
            {
                w1 = trim.x - (ax * orig.width);
                w0 = w1 + trim.width;

                h1 = trim.y - (ay * orig.height);
                h0 = h1 + trim.height;
            }
            else
            {
                w1 = -ax * (orig.width);
                w0 = w1 + orig.width;

                h1 = -ay * (orig.height);
                h0 = h1 + orig.height;
            }

            f32v[offset] = w1 * sx;
            f32v[offset + 1] = h1 * sy;

            f32v[offset + stride] = w0 * sx;
            f32v[offset + stride + 1] = h1 * sy;

            f32v[offset + (stride * 2)] = w0 * sx;
            f32v[offset + (stride * 2) + 1] = h0 * sy;

            f32v[offset + (stride * 3)] = w1 * sx;
            f32v[offset + (stride * 3) + 1] = h0 * sy;
        `,dynamic:!1},position:{attributeName:"aPosition",format:"float32x2",code:`
            var x = p.x;
            var y = p.y;

            f32v[offset] = x;
            f32v[offset + 1] = y;

            f32v[offset + stride] = x;
            f32v[offset + stride + 1] = y;

            f32v[offset + (stride * 2)] = x;
            f32v[offset + (stride * 2) + 1] = y;

            f32v[offset + (stride * 3)] = x;
            f32v[offset + (stride * 3) + 1] = y;
        `,dynamic:!0},rotation:{attributeName:"aRotation",format:"float32",code:`
            var rotation = p.rotation;

            f32v[offset] = rotation;
            f32v[offset + stride] = rotation;
            f32v[offset + (stride * 2)] = rotation;
            f32v[offset + (stride * 3)] = rotation;
        `,dynamic:!1},uvs:{attributeName:"aUV",format:"float32x2",code:`
            var uvs = p.texture.uvs;

            f32v[offset] = uvs.x0;
            f32v[offset + 1] = uvs.y0;

            f32v[offset + stride] = uvs.x1;
            f32v[offset + stride + 1] = uvs.y1;

            f32v[offset + (stride * 2)] = uvs.x2;
            f32v[offset + (stride * 2) + 1] = uvs.y2;

            f32v[offset + (stride * 3)] = uvs.x3;
            f32v[offset + (stride * 3) + 1] = uvs.y3;
        `,dynamic:!1},color:{attributeName:"aColor",format:"unorm8x4",code:`
            const c = p.color;

            u32v[offset] = c;
            u32v[offset + stride] = c;
            u32v[offset + (stride * 2)] = c;
            u32v[offset + (stride * 3)] = c;
        `,dynamic:!1}},emptyBounds=new Bounds(0,0,0,0),_ParticleContainer=class qi extends ViewContainer{constructor(A={}){A={...qi.defaultOptions,...A,dynamicProperties:{...qi.defaultOptions.dynamicProperties,...A?.dynamicProperties}};const{dynamicProperties:_,shader:I,roundPixels:B,texture:T,particles:R,...P}=A;super({label:"ParticleContainer",...P}),this.renderPipeId="particle",this.batched=!1,this._childrenDirty=!1,this.texture=T||null,this.shader=I,this._properties={};for(const D in particleData){const F=particleData[D],L=_[D];this._properties[D]={...F,dynamic:L}}this.allowChildren=!0,this.roundPixels=B??!1,this.particleChildren=R??[]}addParticle(...A){for(let _=0;_<A.length;_++)this.particleChildren.push(A[_]);return this.onViewUpdate(),A[0]}removeParticle(...A){let _=!1;for(let I=0;I<A.length;I++){const B=this.particleChildren.indexOf(A[I]);B>-1&&(this.particleChildren.splice(B,1),_=!0)}return _&&this.onViewUpdate(),A[0]}update(){this._childrenDirty=!0}onViewUpdate(){this._childrenDirty=!0,super.onViewUpdate()}get bounds(){return emptyBounds}updateBounds(){}destroy(A=!1){if(super.destroy(A),typeof A=="boolean"?A:A?.texture){const I=typeof A=="boolean"?A:A?.textureSource,B=this.texture??this.particleChildren[0]?.texture;B&&B.destroy(I)}this.texture=null,this.shader?.destroy()}removeParticles(A,_){A??(A=0),_??(_=this.particleChildren.length);const I=this.particleChildren.splice(A,_-A);return this.onViewUpdate(),I}removeParticleAt(A){const _=this.particleChildren.splice(A,1);return this.onViewUpdate(),_[0]}addParticleAt(A,_){return this.particleChildren.splice(_,0,A),this.onViewUpdate(),A}addChild(...A){throw new Error("ParticleContainer.addChild() is not available. Please use ParticleContainer.addParticle()")}removeChild(...A){throw new Error("ParticleContainer.removeChild() is not available. Please use ParticleContainer.removeParticle()")}removeChildren(A,_){throw new Error("ParticleContainer.removeChildren() is not available. Please use ParticleContainer.removeParticles()")}removeChildAt(A){throw new Error("ParticleContainer.removeChildAt() is not available. Please use ParticleContainer.removeParticleAt()")}getChildAt(A){throw new Error("ParticleContainer.getChildAt() is not available. Please use ParticleContainer.getParticleAt()")}setChildIndex(A,_){throw new Error("ParticleContainer.setChildIndex() is not available. Please use ParticleContainer.setParticleIndex()")}getChildIndex(A){throw new Error("ParticleContainer.getChildIndex() is not available. Please use ParticleContainer.getParticleIndex()")}addChildAt(A,_){throw new Error("ParticleContainer.addChildAt() is not available. Please use ParticleContainer.addParticleAt()")}swapChildren(A,_){throw new Error("ParticleContainer.swapChildren() is not available. Please use ParticleContainer.swapParticles()")}reparentChild(...A){throw new Error("ParticleContainer.reparentChild() is not available with the particle container")}reparentChildAt(A,_){throw new Error("ParticleContainer.reparentChildAt() is not available with the particle container")}};_ParticleContainer.defaultOptions={dynamicProperties:{vertex:!1,position:!0,rotation:!1,uvs:!1,color:!1},roundPixels:!1};let ParticleContainer=_ParticleContainer;const _NineSliceGeometry=class kn extends PlaneGeometry{constructor(A={}){A={...kn.defaultOptions,...A},super({width:A.width,height:A.height,verticesX:4,verticesY:4}),this.update(A)}update(A){this.width=A.width??this.width,this.height=A.height??this.height,this._originalWidth=A.originalWidth??this._originalWidth,this._originalHeight=A.originalHeight??this._originalHeight,this._leftWidth=A.leftWidth??this._leftWidth,this._rightWidth=A.rightWidth??this._rightWidth,this._topHeight=A.topHeight??this._topHeight,this._bottomHeight=A.bottomHeight??this._bottomHeight,this._anchorX=A.anchor?.x,this._anchorY=A.anchor?.y,this.updateUvs(),this.updatePositions()}updatePositions(){const A=this.positions,{width:_,height:I,_leftWidth:B,_rightWidth:T,_topHeight:R,_bottomHeight:P,_anchorX:D,_anchorY:F}=this,L=B+T,U=_>L?1:_/L,V=R+P,K=I>V?1:I/V,J=Math.min(U,K),ee=D*_,ie=F*I;A[0]=A[8]=A[16]=A[24]=-ee,A[2]=A[10]=A[18]=A[26]=B*J-ee,A[4]=A[12]=A[20]=A[28]=_-T*J-ee,A[6]=A[14]=A[22]=A[30]=_-ee,A[1]=A[3]=A[5]=A[7]=-ie,A[9]=A[11]=A[13]=A[15]=R*J-ie,A[17]=A[19]=A[21]=A[23]=I-P*J-ie,A[25]=A[27]=A[29]=A[31]=I-ie,this.getBuffer("aPosition").update()}updateUvs(){const A=this.uvs;A[0]=A[8]=A[16]=A[24]=0,A[1]=A[3]=A[5]=A[7]=0,A[6]=A[14]=A[22]=A[30]=1,A[25]=A[27]=A[29]=A[31]=1;const _=1/this._originalWidth,I=1/this._originalHeight;A[2]=A[10]=A[18]=A[26]=_*this._leftWidth,A[9]=A[11]=A[13]=A[15]=I*this._topHeight,A[4]=A[12]=A[20]=A[28]=1-_*this._rightWidth,A[17]=A[19]=A[21]=A[23]=1-I*this._bottomHeight,this.getBuffer("aUV").update()}};_NineSliceGeometry.defaultOptions={width:100,height:100,leftWidth:10,topHeight:10,rightWidth:10,bottomHeight:10,originalWidth:100,originalHeight:100};let NineSliceGeometry=_NineSliceGeometry;const _NineSliceSprite=class Mn extends ViewContainer{constructor(A){A instanceof Texture&&(A={texture:A});const{width:_,height:I,anchor:B,leftWidth:T,rightWidth:R,topHeight:P,bottomHeight:D,texture:F,roundPixels:L,...U}=A;super({label:"NineSliceSprite",...U}),this.renderPipeId="nineSliceSprite",this.batched=!0,this._leftWidth=T??F?.defaultBorders?.left??NineSliceGeometry.defaultOptions.leftWidth,this._topHeight=P??F?.defaultBorders?.top??NineSliceGeometry.defaultOptions.topHeight,this._rightWidth=R??F?.defaultBorders?.right??NineSliceGeometry.defaultOptions.rightWidth,this._bottomHeight=D??F?.defaultBorders?.bottom??NineSliceGeometry.defaultOptions.bottomHeight,this._width=_??F.width??NineSliceGeometry.defaultOptions.width,this._height=I??F.height??NineSliceGeometry.defaultOptions.height,this.allowChildren=!1,this.texture=F??Mn.defaultOptions.texture,this.roundPixels=L??!1,this._anchor=new ObservablePoint({_onUpdate:()=>{this.onViewUpdate()}}),B?this.anchor=B:this.texture.defaultAnchor&&(this.anchor=this.texture.defaultAnchor)}get anchor(){return this._anchor}set anchor(A){typeof A=="number"?this._anchor.set(A):this._anchor.copyFrom(A)}get width(){return this._width}set width(A){this._width=A,this.onViewUpdate()}get height(){return this._height}set height(A){this._height=A,this.onViewUpdate()}setSize(A,_){typeof A=="object"&&(_=A.height??A.width,A=A.width),this._width=A,this._height=_??A,this.onViewUpdate()}getSize(A){return A||(A={}),A.width=this._width,A.height=this._height,A}get leftWidth(){return this._leftWidth}set leftWidth(A){this._leftWidth=A,this.onViewUpdate()}get topHeight(){return this._topHeight}set topHeight(A){this._topHeight=A,this.onViewUpdate()}get rightWidth(){return this._rightWidth}set rightWidth(A){this._rightWidth=A,this.onViewUpdate()}get bottomHeight(){return this._bottomHeight}set bottomHeight(A){this._bottomHeight=A,this.onViewUpdate()}get texture(){return this._texture}set texture(A){A||(A=Texture.EMPTY);const _=this._texture;_!==A&&(_&&_.dynamic&&_.off("update",this.onViewUpdate,this),A.dynamic&&A.on("update",this.onViewUpdate,this),this._texture=A,this.onViewUpdate())}get originalWidth(){return this._texture.width}get originalHeight(){return this._texture.height}destroy(A){if(super.destroy(A),typeof A=="boolean"?A:A?.texture){const I=typeof A=="boolean"?A:A?.textureSource;this._texture.destroy(I)}this._texture=null}updateBounds(){const A=this._bounds,_=this._anchor,I=this._width,B=this._height;A.minX=-_._x*I,A.maxX=A.minX+I,A.minY=-_._y*B,A.maxY=A.minY+B}};_NineSliceSprite.defaultOptions={texture:Texture.EMPTY};let NineSliceSprite$1=_NineSliceSprite;class NineSlicePlane extends NineSliceSprite$1{constructor(...A){let _=A[0];_ instanceof Texture&&(deprecation(v8_0_0,"NineSlicePlane now uses the options object {texture, leftWidth, rightWidth, topHeight, bottomHeight}"),_={texture:_,leftWidth:A[1],topHeight:A[2],rightWidth:A[3],bottomHeight:A[4]}),deprecation(v8_0_0,"NineSlicePlane is deprecated. Use NineSliceSprite instead."),super(_)}}class NineSliceSpriteGpuData extends BatchableMesh{constructor(){super(),this.geometry=new NineSliceGeometry}destroy(){this.geometry.destroy()}}class NineSliceSpritePipe{constructor(A){this._renderer=A}addRenderable(A,_){const I=this._getGpuSprite(A);A.didViewUpdate&&this._updateBatchableSprite(A,I),this._renderer.renderPipes.batch.addToBatch(I,_)}updateRenderable(A){const _=this._getGpuSprite(A);A.didViewUpdate&&this._updateBatchableSprite(A,_),_._batcher.updateElement(_)}validateRenderable(A){const _=this._getGpuSprite(A);return!_._batcher.checkAndUpdateTexture(_,A._texture)}_updateBatchableSprite(A,_){_.geometry.update(A),_.setTexture(A._texture)}_getGpuSprite(A){return A._gpuData[this._renderer.uid]||this._initGPUSprite(A)}_initGPUSprite(A){const _=A._gpuData[this._renderer.uid]=new NineSliceSpriteGpuData,I=_;return I.renderable=A,I.transform=A.groupTransform,I.texture=A._texture,I.roundPixels=this._renderer._roundPixels|A._roundPixels,A.didViewUpdate||this._updateBatchableSprite(A,I),_}destroy(){this._renderer=null}}NineSliceSpritePipe.extension={type:[ExtensionType.WebGLPipes,ExtensionType.WebGPUPipes,ExtensionType.CanvasPipes],name:"nineSliceSprite"};const tilingBit={name:"tiling-bit",vertex:{header:`
            struct TilingUniforms {
                uMapCoord:mat3x3<f32>,
                uClampFrame:vec4<f32>,
                uClampOffset:vec2<f32>,
                uTextureTransform:mat3x3<f32>,
                uSizeAnchor:vec4<f32>
            };

            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;
            @group(2) @binding(1) var uTexture: texture_2d<f32>;
            @group(2) @binding(2) var uSampler: sampler;
        `,main:`
            uv = (tilingUniforms.uTextureTransform * vec3(uv, 1.0)).xy;

            position = (position - tilingUniforms.uSizeAnchor.zw) * tilingUniforms.uSizeAnchor.xy;
        `},fragment:{header:`
            struct TilingUniforms {
                uMapCoord:mat3x3<f32>,
                uClampFrame:vec4<f32>,
                uClampOffset:vec2<f32>,
                uTextureTransform:mat3x3<f32>,
                uSizeAnchor:vec4<f32>
            };

            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;
            @group(2) @binding(1) var uTexture: texture_2d<f32>;
            @group(2) @binding(2) var uSampler: sampler;
        `,main:`

            var coord = vUV + ceil(tilingUniforms.uClampOffset - vUV);
            coord = (tilingUniforms.uMapCoord * vec3(coord, 1.0)).xy;
            var unclamped = coord;
            coord = clamp(coord, tilingUniforms.uClampFrame.xy, tilingUniforms.uClampFrame.zw);

            var bias = 0.;

            if(unclamped.x == coord.x && unclamped.y == coord.y)
            {
                bias = -32.;
            }

            outColor = textureSampleBias(uTexture, uSampler, coord, bias);
        `}},tilingBitGl={name:"tiling-bit",vertex:{header:`
            uniform mat3 uTextureTransform;
            uniform vec4 uSizeAnchor;

        `,main:`
            uv = (uTextureTransform * vec3(aUV, 1.0)).xy;

            position = (position - uSizeAnchor.zw) * uSizeAnchor.xy;
        `},fragment:{header:`
            uniform sampler2D uTexture;
            uniform mat3 uMapCoord;
            uniform vec4 uClampFrame;
            uniform vec2 uClampOffset;
        `,main:`

        vec2 coord = vUV + ceil(uClampOffset - vUV);
        coord = (uMapCoord * vec3(coord, 1.0)).xy;
        vec2 unclamped = coord;
        coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

        outColor = texture(uTexture, coord, unclamped == coord ? 0.0 : -32.0);// lod-bias very negative to force lod 0

        `}};let gpuProgram$1,glProgram$1;class TilingSpriteShader extends Shader{constructor(){gpuProgram$1??(gpuProgram$1=compileHighShaderGpuProgram({name:"tiling-sprite-shader",bits:[localUniformBit,tilingBit,roundPixelsBit]})),glProgram$1??(glProgram$1=compileHighShaderGlProgram({name:"tiling-sprite-shader",bits:[localUniformBitGl,tilingBitGl,roundPixelsBitGl]}));const A=new UniformGroup({uMapCoord:{value:new Matrix,type:"mat3x3<f32>"},uClampFrame:{value:new Float32Array([0,0,1,1]),type:"vec4<f32>"},uClampOffset:{value:new Float32Array([0,0]),type:"vec2<f32>"},uTextureTransform:{value:new Matrix,type:"mat3x3<f32>"},uSizeAnchor:{value:new Float32Array([100,100,.5,.5]),type:"vec4<f32>"}});super({glProgram:glProgram$1,gpuProgram:gpuProgram$1,resources:{localUniforms:new UniformGroup({uTransformMatrix:{value:new Matrix,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),tilingUniforms:A,uTexture:Texture.EMPTY.source,uSampler:Texture.EMPTY.source.style}})}updateUniforms(A,_,I,B,T,R){const P=this.resources.tilingUniforms,D=R.width,F=R.height,L=R.textureMatrix,U=P.uniforms.uTextureTransform;U.set(I.a*D/A,I.b*D/_,I.c*F/A,I.d*F/_,I.tx/A,I.ty/_),U.invert(),P.uniforms.uMapCoord=L.mapCoord,P.uniforms.uClampFrame=L.uClampFrame,P.uniforms.uClampOffset=L.uClampOffset,P.uniforms.uTextureTransform=U,P.uniforms.uSizeAnchor[0]=A,P.uniforms.uSizeAnchor[1]=_,P.uniforms.uSizeAnchor[2]=B,P.uniforms.uSizeAnchor[3]=T,R&&(this.resources.uTexture=R.source,this.resources.uSampler=R.source.style)}}class QuadGeometry extends MeshGeometry{constructor(){super({positions:new Float32Array([0,0,1,0,1,1,0,1]),uvs:new Float32Array([0,0,1,0,1,1,0,1]),indices:new Uint32Array([0,1,2,0,2,3])})}}function setPositions(E,A){const _=E.anchor.x,I=E.anchor.y;A[0]=-_*E.width,A[1]=-I*E.height,A[2]=(1-_)*E.width,A[3]=-I*E.height,A[4]=(1-_)*E.width,A[5]=(1-I)*E.height,A[6]=-_*E.width,A[7]=(1-I)*E.height}function applyMatrix(E,A,_,I){let B=0;const T=E.length/(A||2),R=I.a,P=I.b,D=I.c,F=I.d,L=I.tx,U=I.ty;for(_*=A;B<T;){const V=E[_],K=E[_+1];E[_]=R*V+D*K+L,E[_+1]=P*V+F*K+U,_+=A,B++}}function setUvs(E,A){const _=E.texture,I=_.frame.width,B=_.frame.height;let T=0,R=0;E.applyAnchorToTexture&&(T=E.anchor.x,R=E.anchor.y),A[0]=A[6]=-T,A[2]=A[4]=1-T,A[1]=A[3]=-R,A[5]=A[7]=1-R;const P=Matrix.shared;P.copyFrom(E._tileTransform.matrix),P.tx/=E.width,P.ty/=E.height,P.invert(),P.scale(E.width/I,E.height/B),applyMatrix(A,2,0,P)}const sharedQuad=new QuadGeometry;class TilingSpriteGpuData{constructor(){this.canBatch=!0,this.geometry=new MeshGeometry({indices:sharedQuad.indices.slice(),positions:sharedQuad.positions.slice(),uvs:sharedQuad.uvs.slice()})}destroy(){this.geometry.destroy(),this.shader?.destroy()}}class TilingSpritePipe{constructor(A){this._state=State$1.default2d,this._renderer=A}validateRenderable(A){const _=this._getTilingSpriteData(A),I=_.canBatch;this._updateCanBatch(A);const B=_.canBatch;if(B&&B===I){const{batchableMesh:T}=_;return!T._batcher.checkAndUpdateTexture(T,A.texture)}return I!==B}addRenderable(A,_){const I=this._renderer.renderPipes.batch;this._updateCanBatch(A);const B=this._getTilingSpriteData(A),{geometry:T,canBatch:R}=B;if(R){B.batchableMesh||(B.batchableMesh=new BatchableMesh);const P=B.batchableMesh;A.didViewUpdate&&(this._updateBatchableMesh(A),P.geometry=T,P.renderable=A,P.transform=A.groupTransform,P.setTexture(A._texture)),P.roundPixels=this._renderer._roundPixels|A._roundPixels,I.addToBatch(P,_)}else I.break(_),B.shader||(B.shader=new TilingSpriteShader),this.updateRenderable(A),_.add(A)}execute(A){const{shader:_}=this._getTilingSpriteData(A);_.groups[0]=this._renderer.globalUniforms.bindGroup;const I=_.resources.localUniforms.uniforms;I.uTransformMatrix=A.groupTransform,I.uRound=this._renderer._roundPixels|A._roundPixels,color32BitToUniform(A.groupColorAlpha,I.uColor,0),this._state.blendMode=getAdjustedBlendModeBlend(A.groupBlendMode,A.texture._source),this._renderer.encoder.draw({geometry:sharedQuad,shader:_,state:this._state})}updateRenderable(A){const _=this._getTilingSpriteData(A),{canBatch:I}=_;if(I){const{batchableMesh:B}=_;A.didViewUpdate&&this._updateBatchableMesh(A),B._batcher.updateElement(B)}else if(A.didViewUpdate){const{shader:B}=_;B.updateUniforms(A.width,A.height,A._tileTransform.matrix,A.anchor.x,A.anchor.y,A.texture)}}_getTilingSpriteData(A){return A._gpuData[this._renderer.uid]||this._initTilingSpriteData(A)}_initTilingSpriteData(A){const _=new TilingSpriteGpuData;return _.renderable=A,A._gpuData[this._renderer.uid]=_,_}_updateBatchableMesh(A){const _=this._getTilingSpriteData(A),{geometry:I}=_,B=A.texture.source.style;B.addressMode!=="repeat"&&(B.addressMode="repeat",B.update()),setUvs(A,I.uvs),setPositions(A,I.positions)}destroy(){this._renderer=null}_updateCanBatch(A){const _=this._getTilingSpriteData(A),I=A.texture;let B=!0;return this._renderer.type===RendererType.WEBGL&&(B=this._renderer.context.supports.nonPowOf2wrapping),_.canBatch=I.textureMatrix.isSimple&&(B||I.source.isPowerOfTwo),_.canBatch}}TilingSpritePipe.extension={type:[ExtensionType.WebGLPipes,ExtensionType.WebGPUPipes,ExtensionType.CanvasPipes],name:"tilingSprite"};const localUniformMSDFBit={name:"local-uniform-msdf-bit",vertex:{header:`
            struct LocalUniforms {
                uColor:vec4<f32>,
                uTransformMatrix:mat3x3<f32>,
                uDistance: f32,
                uRound:f32,
            }

            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;
        `,main:`
            vColor *= localUniforms.uColor;
            modelMatrix *= localUniforms.uTransformMatrix;
        `,end:`
            if(localUniforms.uRound == 1)
            {
                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
            }
        `},fragment:{header:`
            struct LocalUniforms {
                uColor:vec4<f32>,
                uTransformMatrix:mat3x3<f32>,
                uDistance: f32
            }

            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;
         `,main:`
            outColor = vec4<f32>(calculateMSDFAlpha(outColor, localUniforms.uColor, localUniforms.uDistance));
        `}},localUniformMSDFBitGl={name:"local-uniform-msdf-bit",vertex:{header:`
            uniform mat3 uTransformMatrix;
            uniform vec4 uColor;
            uniform float uRound;
        `,main:`
            vColor *= uColor;
            modelMatrix *= uTransformMatrix;
        `,end:`
            if(uRound == 1.)
            {
                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
            }
        `},fragment:{header:`
            uniform float uDistance;
         `,main:`
            outColor = vec4(calculateMSDFAlpha(outColor, vColor, uDistance));
        `}},mSDFBit={name:"msdf-bit",fragment:{header:`
            fn calculateMSDFAlpha(msdfColor:vec4<f32>, shapeColor:vec4<f32>, distance:f32) -> f32 {

                // MSDF
                var median = msdfColor.r + msdfColor.g + msdfColor.b -
                    min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -
                    max(msdfColor.r, max(msdfColor.g, msdfColor.b));

                // SDF
                median = min(median, msdfColor.a);

                var screenPxDistance = distance * (median - 0.5);
                var alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);
                if (median < 0.01) {
                    alpha = 0.0;
                } else if (median > 0.99) {
                    alpha = 1.0;
                }

                // Gamma correction for coverage-like alpha
                var luma: f32 = dot(shapeColor.rgb, vec3<f32>(0.299, 0.587, 0.114));
                var gamma: f32 = mix(1.0, 1.0 / 2.2, luma);
                var coverage: f32 = pow(shapeColor.a * alpha, gamma);

                return coverage;

            }
        `}},mSDFBitGl={name:"msdf-bit",fragment:{header:`
            float calculateMSDFAlpha(vec4 msdfColor, vec4 shapeColor, float distance) {

                // MSDF
                float median = msdfColor.r + msdfColor.g + msdfColor.b -
                                min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -
                                max(msdfColor.r, max(msdfColor.g, msdfColor.b));

                // SDF
                median = min(median, msdfColor.a);

                float screenPxDistance = distance * (median - 0.5);
                float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);

                if (median < 0.01) {
                    alpha = 0.0;
                } else if (median > 0.99) {
                    alpha = 1.0;
                }

                // Gamma correction for coverage-like alpha
                float luma = dot(shapeColor.rgb, vec3(0.299, 0.587, 0.114));
                float gamma = mix(1.0, 1.0 / 2.2, luma);
                float coverage = pow(shapeColor.a * alpha, gamma);

                return coverage;
            }
        `}};let gpuProgram,glProgram;class SdfShader extends Shader{constructor(A){const _=new UniformGroup({uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uTransformMatrix:{value:new Matrix,type:"mat3x3<f32>"},uDistance:{value:4,type:"f32"},uRound:{value:0,type:"f32"}});gpuProgram??(gpuProgram=compileHighShaderGpuProgram({name:"sdf-shader",bits:[colorBit,generateTextureBatchBit(A),localUniformMSDFBit,mSDFBit,roundPixelsBit]})),glProgram??(glProgram=compileHighShaderGlProgram({name:"sdf-shader",bits:[colorBitGl,generateTextureBatchBitGl(A),localUniformMSDFBitGl,mSDFBitGl,roundPixelsBitGl]})),super({glProgram,gpuProgram,resources:{localUniforms:_,batchSamplers:getBatchSamplersUniformGroup(A)}})}}class BitmapTextGraphics extends Graphics$1{destroy(){this.context.customShader&&this.context.customShader.destroy(),super.destroy()}}class BitmapTextPipe{constructor(A){this._renderer=A,this._renderer.renderableGC.addManagedHash(this,"_gpuBitmapText")}validateRenderable(A){const _=this._getGpuBitmapText(A);return this._renderer.renderPipes.graphics.validateRenderable(_)}addRenderable(A,_){const I=this._getGpuBitmapText(A);syncWithProxy(A,I),A._didTextUpdate&&(A._didTextUpdate=!1,this._updateContext(A,I)),this._renderer.renderPipes.graphics.addRenderable(I,_),I.context.customShader&&this._updateDistanceField(A)}updateRenderable(A){const _=this._getGpuBitmapText(A);syncWithProxy(A,_),this._renderer.renderPipes.graphics.updateRenderable(_),_.context.customShader&&this._updateDistanceField(A)}_updateContext(A,_){const{context:I}=_,B=BitmapFontManager.getFont(A.text,A._style);I.clear(),B.distanceField.type!=="none"&&(I.customShader||(I.customShader=new SdfShader(this._renderer.limits.maxBatchableTextures)));const T=CanvasTextMetrics.graphemeSegmenter(A.text),R=A._style;let P=B.baseLineOffset;const D=getBitmapTextLayout(T,R,B,!0),F=R.padding,L=D.scale;let U=D.width,V=D.height+D.offsetY;R._stroke&&(U+=R._stroke.width/L,V+=R._stroke.width/L),I.translate(-A._anchor._x*U-F,-A._anchor._y*V-F).scale(L,L);const K=B.applyFillAsTint?R._fill.color:16777215;let J=B.fontMetrics.fontSize,ee=B.lineHeight;R.lineHeight&&(J=R.fontSize/L,ee=R.lineHeight/L);let ie=(ee-J)/2;ie-B.baseLineOffset<0&&(ie=0);for(let ne=0;ne<D.lines.length;ne++){const ce=D.lines[ne];for(let fe=0;fe<ce.charPositions.length;fe++){const de=ce.chars[fe],pe=B.chars[de];if(pe?.texture){const ve=pe.texture;I.texture(ve,K||"black",Math.round(ce.charPositions[fe]+pe.xOffset),Math.round(P+pe.yOffset+ie),ve.orig.width,ve.orig.height)}}P+=ee}}_getGpuBitmapText(A){return A._gpuData[this._renderer.uid]||this.initGpuText(A)}initGpuText(A){const _=new BitmapTextGraphics;return A._gpuData[this._renderer.uid]=_,this._updateContext(A,_),_}_updateDistanceField(A){const _=this._getGpuBitmapText(A).context,I=A._style.fontFamily,B=Cache.get(`${I}-bitmap`),{a:T,b:R,c:P,d:D}=A.groupTransform,F=Math.sqrt(T*T+R*R),L=Math.sqrt(P*P+D*D),U=(Math.abs(F)+Math.abs(L))/2,V=B.baseRenderedFontSize/A._style.fontSize,K=U*B.distanceField.range*(1/V);_.customShader.resources.localUniforms.uniforms.uDistance=K}destroy(){this._renderer=null}}BitmapTextPipe.extension={type:[ExtensionType.WebGLPipes,ExtensionType.WebGPUPipes,ExtensionType.CanvasPipes],name:"bitmapText"};function syncWithProxy(E,A){A.groupTransform=E.groupTransform,A.groupColorAlpha=E.groupColorAlpha,A.groupColor=E.groupColor,A.groupBlendMode=E.groupBlendMode,A.globalDisplayStatus=E.globalDisplayStatus,A.groupTransform=E.groupTransform,A.localDisplayStatus=E.localDisplayStatus,A.groupAlpha=E.groupAlpha,A._roundPixels=E._roundPixels}function bitmapTextSplit(E){const{text:A,style:_,chars:I}=E,B=_,T=BitmapFontManager.getFont(A,B),R=CanvasTextMetrics.graphemeSegmenter(A),P=getBitmapTextLayout(R,B,T,!0),D=P.scale,F=[],L=[],U=[],V=_.lineHeight?_.lineHeight:T.lineHeight*D;let K=0;for(const J of P.lines){if(J.chars.length===0)continue;const ee=new Container({label:"line"});ee.y=K,U.push(ee);let ie=new Container({label:"word"}),ne=0;for(let ce=0;ce<J.chars.length;ce++){const fe=J.chars[ce];if(!fe||!T.chars[fe])continue;const pe=fe===" ",ve=ce===J.chars.length-1;let ye;I.length>0?(ye=I.shift(),ye.text=fe,ye.style=B,ye.label=`char-${fe}`,ye.x=J.charPositions[ce]*D-J.charPositions[ne]*D):ye=new BitmapText$1({text:fe,style:B,label:`char-${fe}`,x:J.charPositions[ce]*D-J.charPositions[ne]*D}),pe||(F.push(ye),ie.addChild(ye)),(pe||ve)&&ie.children.length>0&&(ie.x=J.charPositions[ne]*D,L.push(ie),ee.addChild(ie),ie=new Container({label:"word"}),ne=ce+1)}K+=V}return{chars:F,lines:U,words:L}}class BatchableHTMLText extends BatchableSprite{constructor(A){super(),this.generatingTexture=!1,this._renderer=A,A.runners.resolutionChange.add(this)}resolutionChange(){const A=this.renderable;A._autoResolution&&A.onViewUpdate()}destroy(){this._renderer.htmlText.returnTexturePromise(this.texturePromise),this.texturePromise=null,this._renderer=null}}function updateTextBounds(E,A){const{texture:_,bounds:I}=E,B=A._style._getFinalPadding();updateQuadBounds(I,A._anchor,_);const T=A._anchor._x*B*2,R=A._anchor._y*B*2;I.minX-=B-T,I.minY-=B-R,I.maxX-=B-T,I.maxY-=B-R}class HTMLTextPipe{constructor(A){this._renderer=A}validateRenderable(A){return A._didTextUpdate}addRenderable(A,_){const I=this._getGpuText(A);A._didTextUpdate&&(this._updateGpuText(A).catch(B=>{console.error(B)}),A._didTextUpdate=!1,updateTextBounds(I,A)),this._renderer.renderPipes.batch.addToBatch(I,_)}updateRenderable(A){const _=this._getGpuText(A);_._batcher.updateElement(_)}async _updateGpuText(A){A._didTextUpdate=!1;const _=this._getGpuText(A);if(_.generatingTexture)return;_.texturePromise&&(this._renderer.htmlText.returnTexturePromise(_.texturePromise),_.texturePromise=null),_.generatingTexture=!0,A._resolution=A._autoResolution?this._renderer.resolution:A.resolution;const I=this._renderer.htmlText.getTexturePromise(A);_.texturePromise=I,_.texture=await I;const B=A.renderGroup||A.parentRenderGroup;B&&(B.structureDidChange=!0),_.generatingTexture=!1,updateTextBounds(_,A)}_getGpuText(A){return A._gpuData[this._renderer.uid]||this.initGpuText(A)}initGpuText(A){const _=new BatchableHTMLText(this._renderer);return _.renderable=A,_.transform=A.groupTransform,_.texture=Texture.EMPTY,_.bounds={minX:0,maxX:1,minY:0,maxY:0},_.roundPixels=this._renderer._roundPixels|A._roundPixels,A._resolution=A._autoResolution?this._renderer.resolution:A.resolution,A._gpuData[this._renderer.uid]=_,_}destroy(){this._renderer=null}}HTMLTextPipe.extension={type:[ExtensionType.WebGLPipes,ExtensionType.WebGPUPipes,ExtensionType.CanvasPipes],name:"htmlText"};function isSafari(){const{userAgent:E}=DOMAdapter.get().getNavigator();return/^((?!chrome|android).)*safari/i.test(E)}const tempBounds=new Bounds;function getPo2TextureFromSource(E,A,_,I){const B=tempBounds;B.minX=0,B.minY=0,B.maxX=E.width/I|0,B.maxY=E.height/I|0;const T=TexturePool.getOptimalTexture(B.width,B.height,I,!1);return T.source.uploadMethodId="image",T.source.resource=E,T.source.alphaMode="premultiply-alpha-on-upload",T.frame.width=A/I,T.frame.height=_/I,T.source.emit("update",T.source),T.updateUvs(),T}function extractFontFamilies(E,A){const _=A.fontFamily,I=[],B={},T=/font-family:([^;"\s]+)/g,R=E.match(T);function P(D){B[D]||(I.push(D),B[D]=!0)}if(Array.isArray(_))for(let D=0;D<_.length;D++)P(_[D]);else P(_);R&&R.forEach(D=>{const F=D.split(":")[1].trim();P(F)});for(const D in A.tagStyles){const F=A.tagStyles[D].fontFamily;P(F)}return I}async function loadFontAsBase64(E){const _=await(await DOMAdapter.get().fetch(E)).blob(),I=new FileReader;return await new Promise((T,R)=>{I.onloadend=()=>T(I.result),I.onerror=R,I.readAsDataURL(_)})}async function loadFontCSS(E,A){const _=await loadFontAsBase64(A);return`@font-face {
        font-family: "${E.fontFamily}";
        font-weight: ${E.fontWeight};
        font-style: ${E.fontStyle};
        src: url('${_}');
    }`}const FontStylePromiseCache=new Map;async function getFontCss(E){const A=E.filter(_=>Cache.has(`${_}-and-url`)).map(_=>{if(!FontStylePromiseCache.has(_)){const{entries:I}=Cache.get(`${_}-and-url`),B=[];I.forEach(T=>{const R=T.url,D=T.faces.map(F=>({weight:F.weight,style:F.style}));B.push(...D.map(F=>loadFontCSS({fontWeight:F.weight,fontStyle:F.style,fontFamily:_},R)))}),FontStylePromiseCache.set(_,Promise.all(B).then(T=>T.join(`
`)))}return FontStylePromiseCache.get(_)});return(await Promise.all(A)).join(`
`)}function getSVGUrl(E,A,_,I,B){const{domElement:T,styleElement:R,svgRoot:P}=B;T.innerHTML=`<style>${A.cssStyle}</style><div style='padding:0;'>${E}</div>`,T.setAttribute("style",`transform: scale(${_});transform-origin: top left; display: inline-block`),R.textContent=I;const{width:D,height:F}=B.image;return P.setAttribute("width",D.toString()),P.setAttribute("height",F.toString()),new XMLSerializer().serializeToString(P)}function getTemporaryCanvasFromImage(E,A){const _=CanvasPool.getOptimalCanvasAndContext(E.width,E.height,A),{context:I}=_;return I.clearRect(0,0,E.width,E.height),I.drawImage(E,0,0),_}function loadSVGImage(E,A,_){return new Promise(async I=>{_&&await new Promise(B=>setTimeout(B,100)),E.onload=()=>{I()},E.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(A)}`,E.crossOrigin="anonymous"})}class HTMLTextSystem{constructor(A){this._renderer=A,this._createCanvas=A.type===RendererType.WEBGPU}getTexture(A){return this.getTexturePromise(A)}getTexturePromise(A){return this._buildTexturePromise(A)}async _buildTexturePromise(A){const{text:_,style:I,resolution:B,textureStyle:T}=A,R=BigPool.get(HTMLTextRenderData),P=extractFontFamilies(_,I),D=await getFontCss(P),F=measureHtmlText(_,I,D,R),L=Math.ceil(Math.ceil(Math.max(1,F.width)+I.padding*2)*B),U=Math.ceil(Math.ceil(Math.max(1,F.height)+I.padding*2)*B),V=R.image,K=2;V.width=(L|0)+K,V.height=(U|0)+K;const J=getSVGUrl(_,I,B,D,R);await loadSVGImage(V,J,isSafari()&&P.length>0);const ee=V;let ie;this._createCanvas&&(ie=getTemporaryCanvasFromImage(V,B));const ne=getPo2TextureFromSource(ie?ie.canvas:ee,V.width-K,V.height-K,B);return T&&(ne.source.style=T),this._createCanvas&&(this._renderer.texture.initSource(ne.source),CanvasPool.returnCanvasAndContext(ie)),BigPool.return(R),ne}returnTexturePromise(A){A.then(_=>{this._cleanUp(_)}).catch(()=>{warn$1("HTMLTextSystem: Failed to clean texture")})}_cleanUp(A){TexturePool.returnTexture(A,!0),A.source.resource=null,A.source.uploadMethodId="unknown"}destroy(){this._renderer=null}}HTMLTextSystem.extension={type:[ExtensionType.WebGLSystem,ExtensionType.WebGPUSystem,ExtensionType.CanvasSystem],name:"htmlText"};class AbstractSplitText extends Container{constructor(A){const{text:_,style:I,autoSplit:B,lineAnchor:T,wordAnchor:R,charAnchor:P,...D}=A;super(D),this._dirty=!1,this._canReuseChars=!1,this.chars=[],this.words=[],this.lines=[],this._originalText=_,this._autoSplit=B,this._lineAnchor=T,this._wordAnchor=R,this._charAnchor=P,this.style=I}split(){const A=this.splitFn();this.chars=A.chars,this.words=A.words,this.lines=A.lines,this.addChild(...this.lines),this.charAnchor=this._charAnchor,this.wordAnchor=this._wordAnchor,this.lineAnchor=this._lineAnchor,this._dirty=!1,this._canReuseChars=!0}get text(){return this._originalText}set text(A){this._originalText=A,this.lines.forEach(_=>_.destroy({children:!0})),this.lines.length=0,this.words.length=0,this.chars.length=0,this._canReuseChars=!1,this.onTextUpdate()}_setOrigin(A,_,I){let B;typeof A=="number"?B={x:A,y:A}:B={x:A.x,y:A.y},_.forEach(T=>{const R=T.getLocalBounds(),P=R.minX+R.width*B.x,D=R.minY+R.height*B.y;T.origin.set(P,D)}),this[I]=A}get lineAnchor(){return this._lineAnchor}set lineAnchor(A){this._setOrigin(A,this.lines,"_lineAnchor")}get wordAnchor(){return this._wordAnchor}set wordAnchor(A){this._setOrigin(A,this.words,"_wordAnchor")}get charAnchor(){return this._charAnchor}set charAnchor(A){this._setOrigin(A,this.chars,"_charAnchor")}get style(){return this._style}set style(A){A||(A={}),this._style=new TextStyle(A),this.words.forEach(_=>_.destroy()),this.words.length=0,this.lines.forEach(_=>_.destroy()),this.lines.length=0,this._canReuseChars=!0,this.onTextUpdate()}onTextUpdate(){this._dirty=!0,this._autoSplit&&this.split()}destroy(A){super.destroy(A),this.chars=[],this.words=[],this.lines=[],(typeof A=="boolean"?A:A?.style)&&this._style.destroy(A),this._style=null,this._originalText=""}}const _SplitBitmapText=class Ii extends AbstractSplitText{constructor(A){const _={...Ii.defaultOptions,...A};super(_)}static from(A,_){const I={...Ii.defaultOptions,..._,text:A.text,style:new TextStyle(A.style)};return new Ii({...I})}splitFn(){return bitmapTextSplit({text:this._originalText,style:this._style,chars:this._canReuseChars?this.chars:[]})}};_SplitBitmapText.defaultOptions={autoSplit:!0,lineAnchor:0,wordAnchor:0,charAnchor:0};let SplitBitmapText=_SplitBitmapText;function getAlignmentOffset(E,A,_){switch(E){case"center":return(_-A)/2;case"right":return _-A;case"left":default:return 0}}function isNewlineCharacter(E){return E==="\r"||E===`
`||E===`\r
`}function groupTextSegments(E,A,_){const I=[];let B=A.lines[0],T="",R=[],P=0;return _.wordWrap=!1,E.forEach(D=>{const F=/^\s*$/.test(D),L=isNewlineCharacter(D),U=T.length===0&&F;if(F&&!L&&U)return;L||(T+=D);const V=CanvasTextMetrics.measureText(D,_);R.push({char:D,metric:V}),T.length>=B.length&&(I.push({line:T,chars:R,width:R.reduce((K,J)=>K+J.metric.width,0)}),R=[],T="",P++,B=A.lines[P])}),I}function canvasTextSplit(E){const{text:A,style:_,chars:I}=E,B=_,T=CanvasTextMetrics.measureText(A,B),R=CanvasTextMetrics.graphemeSegmenter(A),P=groupTextSegments(R,T,B.clone()),D=B.align,F=T.lineWidths.reduce((ie,ne)=>Math.max(ie,ne),0),L=[],U=[],V=[];let K=0;const J=B.stroke?.width||0,ee=B.dropShadow?.distance||0;return P.forEach((ie,ne)=>{const ce=new Container({label:`line-${ne}`});ce.y=K,U.push(ce);const fe=T.lineWidths[ne];let de=getAlignmentOffset(D,fe,F),pe=new Container({label:"word"});pe.x=de,ie.chars.forEach((ve,ye)=>{if(ve.metric.width!==0){if(isNewlineCharacter(ve.char)){de+=ve.metric.width-J;return}if(ve.char===" ")pe.children.length>0&&(V.push(pe),ce.addChild(pe)),de+=ve.metric.width+B.letterSpacing-J,pe=new Container({label:"word"}),pe.x=de;else{let _e;I.length>0?(_e=I.shift(),_e.text=ve.char,_e.style=B,_e.setFromMatrix(Matrix.IDENTITY),_e.x=de-pe.x-ee*ye):_e=new Text$1({text:ve.char,style:B,x:de-pe.x-ee*ye}),L.push(_e),pe.addChild(_e),de+=ve.metric.width+B.letterSpacing-J}}}),pe.children.length>0&&(V.push(pe),ce.addChild(pe)),K+=T.lineHeight}),{chars:L,lines:U,words:V}}const _SplitText=class Bi extends AbstractSplitText{constructor(A){const _={...Bi.defaultOptions,...A};super(_)}static from(A,_){const I={...Bi.defaultOptions,..._,text:A.text,style:new TextStyle(A.style)};return new Bi({...I})}splitFn(){return canvasTextSplit({text:this._originalText,style:this._style,chars:this._canReuseChars?this.chars:[]})}};_SplitText.defaultOptions={autoSplit:!0,lineAnchor:0,wordAnchor:0,charAnchor:0};let SplitText=_SplitText;class BatchableText extends BatchableSprite{constructor(A){super(),this._renderer=A,A.runners.resolutionChange.add(this)}resolutionChange(){const A=this.renderable;A._autoResolution&&A.onViewUpdate()}destroy(){this._renderer.canvasText.returnTexture(this.texture),this._renderer=null}}class CanvasTextPipe{constructor(A){this._renderer=A}validateRenderable(A){return A._didTextUpdate}addRenderable(A,_){const I=this._getGpuText(A);A._didTextUpdate&&(this._updateGpuText(A),A._didTextUpdate=!1),this._renderer.renderPipes.batch.addToBatch(I,_)}updateRenderable(A){const _=this._getGpuText(A);_._batcher.updateElement(_)}_updateGpuText(A){const _=this._getGpuText(A);_.texture&&this._renderer.canvasText.returnTexture(_.texture),A._resolution=A._autoResolution?this._renderer.resolution:A.resolution,_.texture=this._renderer.canvasText.getTexture(A),updateTextBounds(_,A)}_getGpuText(A){return A._gpuData[this._renderer.uid]||this.initGpuText(A)}initGpuText(A){const _=new BatchableText(this._renderer);return _.renderable=A,_.transform=A.groupTransform,_.bounds={minX:0,maxX:1,minY:0,maxY:0},_.roundPixels=this._renderer._roundPixels|A._roundPixels,A._gpuData[this._renderer.uid]=_,_}destroy(){this._renderer=null}}CanvasTextPipe.extension={type:[ExtensionType.WebGLPipes,ExtensionType.WebGPUPipes,ExtensionType.CanvasPipes],name:"text"};class CanvasTextSystem{constructor(A){this._renderer=A}getTexture(A,_,I,B){typeof A=="string"&&(deprecation("8.0.0","CanvasTextSystem.getTexture: Use object TextOptions instead of separate arguments"),A={text:A,style:I,resolution:_}),A.style instanceof TextStyle||(A.style=new TextStyle(A.style)),A.textureStyle instanceof TextureStyle||(A.textureStyle=new TextureStyle(A.textureStyle)),typeof A.text!="string"&&(A.text=A.text.toString());const{text:T,style:R,textureStyle:P}=A,D=A.resolution??this._renderer.resolution,{frame:F,canvasAndContext:L}=CanvasTextGenerator.getCanvasAndContext({text:T,style:R,resolution:D}),U=getPo2TextureFromSource(L.canvas,F.width,F.height,D);if(P&&(U.source.style=P),R.trim&&(F.pad(R.padding),U.frame.copyFrom(F),U.frame.scale(1/D),U.updateUvs()),R.filters){const V=this._applyFilters(U,R.filters);return this.returnTexture(U),CanvasTextGenerator.returnCanvasAndContext(L),V}return this._renderer.texture.initSource(U._source),CanvasTextGenerator.returnCanvasAndContext(L),U}returnTexture(A){const _=A.source;_.resource=null,_.uploadMethodId="unknown",_.alphaMode="no-premultiply-alpha",TexturePool.returnTexture(A,!0)}renderTextToCanvas(){deprecation("8.10.0","CanvasTextSystem.renderTextToCanvas: no longer supported, use CanvasTextSystem.getTexture instead")}_applyFilters(A,_){const I=this._renderer.renderTarget.renderTarget,B=this._renderer.filter.generateFilteredTexture({texture:A,filters:_});return this._renderer.renderTarget.bind(I,!1),B}destroy(){this._renderer=null}}CanvasTextSystem.extension={type:[ExtensionType.WebGLSystem,ExtensionType.WebGPUSystem,ExtensionType.CanvasSystem],name:"canvasText"};async function logDebugTexture(E,A,_=200){const I=await A.extract.base64(E);await A.encoder.commandFinished;const B=_;console.log(`logging texture ${E.source.width}px ${E.source.height}px`);const T=["font-size: 1px;",`padding: ${B}px 300px;`,`background: url(${I}) no-repeat;`,"background-size: contain;"].join(" ");console.log("%c ",T)}const colors=["#000080","#228B22","#8B0000","#4169E1","#008080","#800000","#9400D3","#FF8C00","#556B2F","#8B008B"];let colorTick=0;function logScene(E,A=0,_={color:"#000000"}){E.renderGroup&&(_.color=colors[colorTick++]);let I="";for(let R=0;R<A;R++)I+="    ";let B=E.label;!B&&E instanceof Sprite$1&&(B=`sprite:${E.texture.label}`);let T=`%c ${I}|- ${B} (worldX:${E.worldTransform.tx}, relativeRenderX:${E.relativeGroupTransform.tx}, renderX:${E.groupTransform.tx}, localX:${E.x})`;E.renderGroup&&(T+=" (RenderGroup)"),E.filters&&(T+="(*filters)"),console.log(T,`color:${_.color}; font-weight:bold;`),A++;for(let R=0;R<E.children.length;R++){const P=E.children[R];logScene(P,A,{..._})}}function logRenderGroupScene(E,A=0,_={index:0,color:"#000000"}){let I="";for(let T=0;T<A;T++)I+="    ";const B=`%c ${I}- ${_.index}: ${E.root.label} worldX:${E.worldTransform.tx}`;console.log(B,`color:${_.color}; font-weight:bold;`),A++;for(let T=0;T<E.renderGroupChildren.length;T++){const R=E.renderGroupChildren[T];logRenderGroupScene(R,A,{..._,index:T})}}extensions.add(browserExt,webworkerExt);const index=Object.freeze(Object.defineProperty({__proto__:null,AbstractBitmapFont,AbstractRenderer,AbstractSplitText,AbstractText,AccessibilitySystem,AlphaFilter,AlphaMask,AlphaMaskPipe,AnimatedSprite:AnimatedSprite$1,Application,ApplicationInitHook,Assets,AssetsClass,BLEND_TO_NPM,BUFFER_TYPE,BackgroundLoader,BackgroundSystem,Batch,BatchGeometry,BatchTextureArray,BatchableGraphics,BatchableHTMLText,BatchableMesh,BatchableSprite,BatchableText,Batcher,BatcherPipe,BigPool,BindGroup,BindGroupSystem,BitmapFont,BitmapFontManager,BitmapText:BitmapText$1,BitmapTextGraphics,BitmapTextPipe,BlendModeFilter,BlendModePipe,BlurFilter,BlurFilterPass,Bounds,BrowserAdapter,Buffer,BufferImageSource,BufferResource,BufferUsage,CLEAR,Cache,CanvasObserver,CanvasPool,CanvasPoolClass,CanvasSource,CanvasTextGenerator,CanvasTextMetrics,CanvasTextPipe,CanvasTextSystem,Circle:Circle$1,Color:Color$1,ColorBlend,ColorBurnBlend,ColorDodgeBlend,ColorMask,ColorMaskPipe,ColorMatrixFilter,CompressedSource,Container,Culler,CullerPlugin,CustomRenderPipe,D3D10_RESOURCE_DIMENSION,D3DFMT,DATA_URI,DDS,DEG_TO_RAD,DEPRECATED_SCALE_MODES,DEPRECATED_WRAP_MODES,DOMAdapter,DOMContainer,DOMPipe,DRAW_MODES,DXGI_FORMAT,DXGI_TO_TEXTURE_FORMAT,DarkenBlend,DefaultBatcher,DefaultShader,DifferenceBlend,DisplacementFilter,DivideBlend,DynamicBitmapFont,Ellipse,EventBoundary,EventEmitter,EventSystem,EventsTicker,ExclusionBlend,ExtensionType,ExtractSystem,FOURCC_TO_TEXTURE_FORMAT,FederatedContainer,FederatedEvent,FederatedMouseEvent,FederatedPointerEvent,FederatedWheelEvent,FillGradient,FillPattern,Filter,FilterEffect,FilterPipe,FilterSystem,FontStylePromiseCache,GAUSSIAN_VALUES,GL_FORMATS,GL_INTERNAL_FORMAT,GL_TARGETS,GL_TYPES,GL_WRAP_MODES,GenerateTextureSystem,Geometry,GlBackBufferSystem,GlBatchAdaptor,GlBuffer,GlBufferSystem,GlColorMaskSystem,GlContextSystem,GlEncoderSystem,GlGeometrySystem,GlGraphicsAdaptor,GlLimitsSystem,GlMeshAdaptor,GlParticleContainerAdaptor,GlParticleContainerPipe,GlProgram,GlProgramData,GlRenderTarget,GlRenderTargetAdaptor,GlRenderTargetSystem,GlShaderSystem,GlStateSystem,GlStencilSystem,GlTexture,GlTextureSystem,GlUboSystem,GlUniformGroupSystem,GlobalUniformSystem,GpuBatchAdaptor,GpuBlendModesToPixi,GpuBufferSystem,GpuColorMaskSystem,GpuDeviceSystem,GpuEncoderSystem,GpuGraphicsAdaptor,GpuGraphicsContext,GpuLimitsSystem,GpuMeshAdapter,GpuMipmapGenerator,GpuParticleContainerAdaptor,GpuParticleContainerPipe,GpuProgram,GpuRenderTarget,GpuRenderTargetAdaptor,GpuRenderTargetSystem,GpuShaderSystem,GpuStateSystem,GpuStencilModesToPixi,GpuStencilSystem,GpuTextureSystem,GpuUboSystem,GpuUniformBatchPipe,Graphics:Graphics$1,GraphicsContext,GraphicsContextRenderData,GraphicsContextSystem,GraphicsGpuData,GraphicsPath,GraphicsPipe,HTMLText:HTMLText$1,HTMLTextPipe,HTMLTextRenderData,HTMLTextStyle,HTMLTextSystem,HardLightBlend,HardMixBlend,HelloSystem,IGLUniformData,ImageSource,InstructionSet,KTX,LightenBlend,LinearBurnBlend,LinearDodgeBlend,LinearLightBlend,Loader,LoaderParserPriority,LuminosityBlend,MaskEffectManager,MaskEffectManagerClass,MaskFilter,Matrix,Mesh:Mesh$1,MeshGeometry,MeshGpuData,MeshPipe,MeshPlane:MeshPlane$1,MeshRope:MeshRope$1,MeshSimple:MeshSimple$1,NOOP,NegationBlend,NineSliceGeometry,NineSlicePlane,NineSliceSprite:NineSliceSprite$1,NineSliceSpriteGpuData,NineSliceSpritePipe,NoiseFilter,ObservablePoint,OverlayBlend,PI_2,Particle,ParticleBuffer,ParticleContainer,ParticleContainerPipe,ParticleShader,PerspectiveMesh:PerspectiveMesh$1,PerspectivePlaneGeometry,PinLightBlend,PipelineSystem,PlaneGeometry,Point:Point$1,Polygon,Pool,PoolGroupClass,PrepareBase,PrepareQueue,PrepareSystem,PrepareUpload,QuadGeometry,RAD_TO_DEG,Rectangle,RenderContainer,RenderGroup,RenderGroupPipe,RenderGroupSystem,RenderLayer,RenderTarget,RenderTargetSystem,RenderTexture,RenderableGCSystem,RendererInitHook,RendererType,ResizePlugin,Resolver,RopeGeometry,RoundedRectangle,SCALE_MODES,STENCIL_MODES,SVGParser,SaturationBlend,SchedulerSystem,ScissorMask,SdfShader,Shader,ShaderStage,ShapePath,SharedRenderPipes,SharedSystems,SoftLightBlend,SplitBitmapText,SplitText,Sprite:Sprite$1,SpritePipe,Spritesheet,State:State$1,StencilMask,StencilMaskPipe,SubtractBlend,SystemRunner,TEXTURE_FORMAT_BLOCK_SIZE,Text:Text$1,TextStyle,Texture,TextureGCSystem,TextureMatrix,TexturePool,TexturePoolClass,TextureSource,TextureStyle,TextureUvs,Ticker:Ticker$1,TickerListener,TickerPlugin,TilingSprite:TilingSprite$1,TilingSpriteGpuData,TilingSpritePipe,TilingSpriteShader,Transform:Transform$1,Triangle,UNIFORM_TO_ARRAY_SETTERS,UNIFORM_TO_SINGLE_SETTERS,UNIFORM_TYPES_MAP,UNIFORM_TYPES_VALUES,UPDATE_BLEND,UPDATE_COLOR,UPDATE_PRIORITY,UPDATE_TRANSFORM,UPDATE_VISIBLE,UboBatch,UboSystem,UniformGroup,VERSION,VideoSource,ViewContainer,ViewSystem,ViewableBuffer,VividLightBlend,WGSL_ALIGN_SIZE_DATA,WGSL_TO_STD40_SIZE,WRAP_MODES,WebGLRenderer,WebGPURenderer,WebWorkerAdapter,WorkerManager,accessibilityTarget,addBits,addMaskBounds,addMaskLocalBounds,addProgramDefines,alphaFrag:fragment$6,alphaWgsl:source$5,applyMatrix,applyProjectiveTransformationToPlane,applyStyleParams,assignWithIgnore,autoDetectEnvironment,autoDetectRenderer,autoDetectSource,basisTranscoderUrls,bgr2rgb,bitmapFontCachePlugin,bitmapFontTextParser,bitmapFontXMLParser,bitmapFontXMLStringParser,bitmapTextSplit,blendTemplateFrag,blendTemplateVert,blendTemplateWgsl:blendTemplate,blockDataMap,blurTemplateWgsl:source$4,boundsPool,browserExt,buildAdaptiveBezier,buildAdaptiveQuadratic,buildArc,buildArcTo,buildArcToSvg,buildCircle,buildContextBatches,buildEllipse,buildLine,buildPixelLine,buildPolygon,buildRectangle,buildRoundedRectangle,buildSimpleUvs,buildTriangle,buildUvs,cacheAsTextureMixin,cacheTextureArray,calculateProjection,canvasTextSplit,checkChildrenDidChange,checkDataUrl,checkExtension,checkMaxIfStatementsInShader,childrenHelperMixin,cleanArray,cleanHash,clearList,closePointEps,collectAllRenderables,collectRenderablesMixin,color32BitToUniform,colorBit,colorBitGl,colorMatrixFilterFrag:fragment$5,colorMatrixFilterWgsl:source$3,colorToUniform,compareModeToGlCompare,compileHighShader,compileHighShaderGl,compileHighShaderGlProgram,compileHighShaderGpuProgram,compileHooks,compileInputs,compileOutputs,compileShader,compute2DProjection,convertFormatIfRequired,convertToList,copySearchParams,createIdFromString,createIndicesForQuads,createLevelBuffers,createLevelBuffersFromKTX,createStringVariations,createTexture,createUboElementsSTD40,createUboElementsWGSL,createUboSyncFunction,createUboSyncFunctionSTD40,createUboSyncFunctionWGSL,crossOrigin,cullingMixin,curveEps,defaultFilterVert:vertex$4,defaultValue,definedProps,deprecation,detectAvif,detectBasis,detectCompressed,detectDefaults,detectMp4,detectOgv,detectVideoAlphaMode,detectWebm,detectWebp,determineCrossOrigin,displacementFrag:fragment$4,displacementVert:vertex$3,displacementWgsl:source$2,earcut,effectsMixin,ensureAttributes,ensureIsBuffer,ensurePrecision,ensureTextOptions,executeInstructions,extensions,extractAttributesFromGlProgram,extractAttributesFromGpuProgram,extractFontFamilies,extractStructAndGroups,extractSvgUrlId,fastCopy,findMixin,fontStringFromTextStyle,formatShader,fragmentGPUTemplate,fragmentGlTemplate,generateArraySyncSTD40,generateArraySyncWGSL,generateBlurFragSource,generateBlurGlProgram,generateBlurProgram,generateBlurVertSource,generateGPULayout,generateGpuLayoutGroups,generateLayout,generateLayoutHash,generateParticleUpdateFunction,generateProgram,generateShaderSyncCode,generateTextStyleKey,generateTextureBatchBit,generateTextureBatchBitGl,generateTextureMatrix,generateUniformsSync,getAdjustedBlendModeBlend,getAttributeInfoFromFormat,getBatchSamplersUniformGroup,getBitmapTextLayout,getCanvasBoundingBox,getCanvasFillStyle,getCanvasTexture,getDefaultUniformValue,getFastGlobalBounds,getFastGlobalBoundsMixin,getFontCss,getFontFamilyName,getGeometryBounds,getGlTypeFromFormat,getGlobalBounds,getGlobalMixin,getGlobalRenderableBounds,getLocalBounds,getMaxFragmentPrecision,getMaxTexturesPerBatch,getOrientationOfPoints,getPo2TextureFromSource,getResolutionOfUrl,getSVGUrl,getSupportedCompressedTextureFormats,getSupportedGPUCompressedTextureFormats,getSupportedGlCompressedTextureFormats,getSupportedTextureFormats,getTemporaryCanvasFromImage,getTestContext,getTextureBatchBindGroup,getTextureDefaultMatrix,getTextureFormatFromKTXTexture,getUboData,getUniformData,getUrlExtension,glFormatToGPUFormat,glUploadBufferImageResource,glUploadCompressedTextureResource,glUploadImageResource,glUploadVideoResource,globalUniformsBit,globalUniformsBitGl,globalUniformsUBOBitGl,gpuFormatToBasisTranscoderFormat,gpuFormatToKTXBasisTranscoderFormat,gpuUploadBufferImageResource,gpuUploadCompressedTextureResource,gpuUploadImageResource,gpuUploadVideoResource,groupD8,hasCachedCanvasTexture,hslWgsl:hsl$1,hslgl,hslgpu,injectBits,insertVersion,isMobile,isPow2,isRenderingToScreen,isSafari,isSingleItem,isWebGLSupported,isWebGPUSupported,ktxTranscoderUrls,loadBasis,loadBasisOnWorker,loadBitmapFont,loadDDS,loadEnvironmentExtensions,loadFontAsBase64,loadFontCSS,loadImageBitmap,loadJson,loadKTX,loadKTX2,loadKTX2onWorker,loadSVGImage,loadSvg,loadTextures,loadTxt,loadVideoTextures,loadWebFont,localUniformBit,localUniformBitGl,localUniformBitGroup2,localUniformMSDFBit,localUniformMSDFBitGl,log2,logDebugTexture,logProgramError,logRenderGroupScene,logScene,mSDFBit,mSDFBitGl,mapFormatToGlFormat,mapFormatToGlInternalFormat,mapFormatToGlType,mapGlToVertexFormat,mapSize,mapType,mapWebGLBlendModesToPixi,maskFrag:fragment$2,maskVert:vertex$2,maskWgsl:source,matrixPool,measureHtmlText,measureMixin,migrateFragmentFromV7toV8,mipmapScaleModeToGlFilter,multiplyColors,multiplyHexColors,nextPow2,noiseFrag:fragment$3,noiseWgsl:source$1,nonCompressedFormats,normalizeExtensionPriority,onRenderMixin,parseDDS,parseFunctionBody,parseKTX,parseSVGDefinitions,parseSVGFloatAttribute,parseSVGPath,parseSVGStyle,particleData,particlesFrag:fragment$1,particlesVert:vertex$1,particlesWgsl:wgsl,path,pointInTriangle,preloadVideo,removeItems,removeStructAndGroupDuplicates,resetUids,resolveCharacters,resolveCompressedTextureUrl,resolveJsonUrl,resolveTextureUrl,resourceToTexture,roundPixelsBit,roundPixelsBitGl,roundedShapeArc,roundedShapeQuadraticCurve,sayHello,scaleModeToGlFilter,setBasisTranscoderPath,setKTXTranscoderPath,setPositions,setProgramName,setUvs,shapeBuilders,sortMixin,spritesheetAsset,squaredDistanceToLineSegment,stripVersion,styleAttributes,testImageFormat,testVideoFormat,textStyleToCSS,textureBit,textureBitGl,textureFrom,tilingBit,tilingBitGl,toFillStyle,toLocalGlobalMixin,toStrokeStyle,transformVertices,triangulateWithHoles,uboSyncFunctionsSTD40,uboSyncFunctionsWGSL,uid:uid$1,uniformParsers,unpremultiplyAlpha,unsafeEvalSupported,updateLocalTransform,updateQuadBounds,updateRenderGroupTransform,updateRenderGroupTransforms,updateTextBounds,updateTransformAndChildren,updateTransformBackwards,updateWorldTransform,v8_0_0,v8_3_4,validFormats,validateRenderables,vertexGPUTemplate,vertexGlTemplate,vkFormatToGPUFormat,warn:warn$1,webworkerExt,wrapModeToGlAddress},Symbol.toStringTag,{value:"Module"}));var loadYoga$1=(()=>{var E=import.meta.url;return(function(A){A=A||{};var _;_||(_=typeof A<"u"?A:{});var I,B;_.ready=new Promise(function(ot,ut){I=ot,B=ut});var T=Object.assign({},_),R="";typeof document<"u"&&document.currentScript&&(R=document.currentScript.src),E&&(R=E),R.indexOf("blob:")!==0?R=R.substr(0,R.replace(/[?#].*/,"").lastIndexOf("/")+1):R="";var P=_.print||console.log.bind(console),D=_.printErr||console.warn.bind(console);Object.assign(_,T),T=null;var F;_.wasmBinary&&(F=_.wasmBinary),_.noExitRuntime,typeof WebAssembly!="object"&&Y("no native wasm support detected");var L,U=!1;function V(ot,ut,Bt){Bt=ut+Bt;for(var Lt="";!(ut>=Bt);){var $t=ot[ut++];if(!$t)break;if($t&128){var Zt=ot[ut++]&63;if(($t&224)==192)Lt+=String.fromCharCode(($t&31)<<6|Zt);else{var Vt=ot[ut++]&63;$t=($t&240)==224?($t&15)<<12|Zt<<6|Vt:($t&7)<<18|Zt<<12|Vt<<6|ot[ut++]&63,65536>$t?Lt+=String.fromCharCode($t):($t-=65536,Lt+=String.fromCharCode(55296|$t>>10,56320|$t&1023))}}else Lt+=String.fromCharCode($t)}return Lt}var K,J,ee,ie,ne,ce,fe,de,pe;function ve(){var ot=L.buffer;K=ot,_.HEAP8=J=new Int8Array(ot),_.HEAP16=ie=new Int16Array(ot),_.HEAP32=ce=new Int32Array(ot),_.HEAPU8=ee=new Uint8Array(ot),_.HEAPU16=ne=new Uint16Array(ot),_.HEAPU32=fe=new Uint32Array(ot),_.HEAPF32=de=new Float32Array(ot),_.HEAPF64=pe=new Float64Array(ot)}var ye,_e=[],be=[],Te=[];function ue(){var ot=_.preRun.shift();_e.unshift(ot)}var O=0,z=null;function Y(ot){throw _.onAbort&&_.onAbort(ot),ot="Aborted("+ot+")",D(ot),U=!0,ot=new WebAssembly.RuntimeError(ot+". Build with -sASSERTIONS for more info."),B(ot),ot}function te(ot){return ot.startsWith("data:application/octet-stream;base64,")}var oe;if(oe="data:application/octet-stream;base64,AGFzbQEAAAABugM3YAF/AGACf38AYAF/AX9gA39/fwBgAn98AGACf38Bf2ADf39/AX9gBH9/f30BfWADf398AGAAAGAEf39/fwBgAX8BfGACf38BfGAFf39/f38Bf2AAAX9gA39/fwF9YAZ/f31/fX8AYAV/f39/fwBgAn9/AX1gBX9/f319AX1gAX8BfWADf35/AX5gB39/f39/f38AYAZ/f39/f38AYAR/f39/AX9gBn9/f319fQF9YAR/f31/AGADf399AX1gBn98f39/fwF/YAR/fHx/AGACf30AYAh/f39/f39/fwBgDX9/f39/f39/f39/f38AYAp/f39/f39/f39/AGAFf39/f38BfGAEfHx/fwF9YA1/fX1/f399fX9/f39/AX9gB39/f319f38AYAJ+fwF/YAN/fX0BfWABfAF8YAN/fHwAYAR/f319AGAHf39/fX19fQF9YA1/fX99f31/fX19fX1/AX9gC39/f39/f399fX19AX9gCH9/f39/f319AGAEf39+fgBgB39/f39/f38Bf2ACfH8BfGAFf398fH8AYAN/f38BfGAEf39/fABgA39/fQBgBn9/fX99fwF/ArUBHgFhAWEAHwFhAWIAAwFhAWMACQFhAWQAFgFhAWUAEQFhAWYAIAFhAWcAAAFhAWgAIQFhAWkAAwFhAWoAAAFhAWsAFwFhAWwACgFhAW0ABQFhAW4AAwFhAW8AAQFhAXAAFwFhAXEABgFhAXIAAAFhAXMAIgFhAXQACgFhAXUADQFhAXYAFgFhAXcAAgFhAXgAAwFhAXkAGAFhAXoAAgFhAUEAAQFhAUIAEQFhAUMAAQFhAUQAAAOiAqACAgMSBwcACRkDAAoRBgYKEwAPDxMBBiMTCgcHGgMUASQFJRQHAwMKCgMmAQYYDxobFAAKBw8KBwMDAgkCAAAFGwACBwIHBgIDAQMIDAABKAkHBQURACkZASoAAAIrLAIALQcHBy4HLwkFCgMCMA0xAgMJAgACAQYKAQIBBQEACQIFAQEABQAODQ0GFQIBHBUGAgkCEAAAAAUyDzMMBQYINAUCAwUODg41AgMCAgIDBgICNgIBDAwMAQsLCwsLCx0CAAIAAAABABABBQICAQMCEgMMCwEBAQEBAQsLAQICAwICAgICAgIDAgIICAEICAgEBAQEBAQEBAQABAQABAQEBAAEBAQBAQEICAEBAQEBAQEBCAgBAQEAAg4CAgUBAR4DBAcBcAHUAdQBBQcBAYACgIACBg0CfwFBkMQEC38BQQALByQIAUUCAAFGAG0BRwCwAQFIAK8BAUkAYQFKAQABSwAjAUwApgEJjQMBAEEBC9MBqwGqAaUB5QHiAZwB0AFazwHOAVlZWpsBmgGZAc0BzAHLAcoBWpgByQFZWVqbAZoBmQHIAccBxgGjAZcBpAGWAaMBvQKVAbwCxQG7Ajq6Ajq5ApQBuAI+twI+xAFqwwFqwgFqaWjBAcABvwGhAZcBtgK+AbUClgGhAbQCmAGzAjqxAjqwAr0BrwKuAq0CrAKrAqoCqAKnAqYCpQKkAqMCogKhArwBoAKfAp4CnQKcApsCmgKZApgClwKWApUClAKTApICkQKQAo8CjgKyAo0CjAKLAooCiAKHAqkChQI+hAK7AYMCggKBAoAC/gH9AfwB+QG6AfgBuQH3AfYB9QH0AfMB8gHxAYYC8AHvAbgB+wH6Ae4B7QG3AesBlQHqATrpAT7oAT7nAZQB0QE67AE+iQLmATrkAeMBOuEB4AHfAT7eAd0B3AG2AdsB2gHZAdgB1wHWAdUBtQHUAdMB0gH/AWloaWiPAZABsgGxAZEBhQGSAbQBswGRAa4BrQGsAakBqAGnAYUBCtj+A6ACMwEBfyAAQQEgABshAAJAA0AgABBhIgENAUGIxAAoAgAiAQRAIAERCQAMAQsLEAIACyABC+0BAgJ9A39DAADAfyEEAkACQAJAAkAgAkEHcSIGDgUCAQEBAAELQQMhBQwBCyAGQQFrQQJPDQEgAkHw/wNxQQR2IQcCfSACQQhxBEAgASAHEJ4BvgwBC0EAIAdB/w9xIgFrIAEgAsFBAEgbsgshAyAGQQFGBEAgAyADXA0BQwAAwH8gAyADQwAAgH9bIANDAACA/1tyIgEbIQQgAUUhBQwBCyADIANcDQBBAEECIANDAACAf1sgA0MAAID/W3IiARshBUMAAMB/IAMgARshBAsgACAFOgAEIAAgBDgCAA8LQfQNQakYQTpB+RYQCwALZwIBfQF/QwAAwH8hAgJAAkACQCABQQdxDgQCAAABAAtBxBJBqRhByQBBuhIQCwALIAFB8P8DcUEEdiEDIAFBCHEEQCAAIAMQngG+DwtBACADQf8PcSIAayAAIAHBQQBIG7IhAgsgAgt4AgF/AX0jAEEQayIEJAAgBEEIaiAAQQMgAkECR0EBdCABQf4BcUECRxsgAhAoQwAAwH8hBQJAAkACQCAELQAMQQFrDgIAAQILIAQqAgghBQwBCyAEKgIIIAOUQwrXIzyUIQULIARBEGokACAFQwAAAAAgBSAFWxsLeAIBfwF9IwBBEGsiBCQAIARBCGogAEEBIAJBAkZBAXQgAUH+AXFBAkcbIAIQKEMAAMB/IQUCQAJAAkAgBC0ADEEBaw4CAAECCyAEKgIIIQUMAQsgBCoCCCADlEMK1yM8lCEFCyAEQRBqJAAgBUMAAAAAIAUgBVsbC8wCAQV/IAAEQCAAQQRrIgEoAgAiBSEDIAEhAiAAQQhrKAIAIgAgAEF+cSIERwRAIAEgBGsiAigCBCIAIAIoAgg2AgggAigCCCAANgIEIAQgBWohAwsgASAFaiIEKAIAIgEgASAEakEEaygCAEcEQCAEKAIEIgAgBCgCCDYCCCAEKAIIIAA2AgQgASADaiEDCyACIAM2AgAgA0F8cSACakEEayADQQFyNgIAIAICfyACKAIAQQhrIgFB/wBNBEAgAUEDdkEBawwBCyABQR0gAWciAGt2QQRzIABBAnRrQe4AaiABQf8fTQ0AGkE/IAFBHiAAa3ZBAnMgAEEBdGtBxwBqIgAgAEE/TxsLIgFBBHQiAEHgMmo2AgQgAiAAQegyaiIAKAIANgIIIAAgAjYCACACKAIIIAI2AgRB6DpB6DopAwBCASABrYaENwMACwsOAEHYMigCABEJABBYAAunAQIBfQJ/IABBFGoiByACIAFBAkkiCCAEIAUQNSEGAkAgByACIAggBCAFEC0iBEMAAAAAYCADIARecQ0AIAZDAAAAAGBFBEAgAyEEDAELIAYgAyADIAZdGyEECyAAQRRqIgAgASACIAUQOCAAIAEgAhAwkiAAIAEgAiAFEDcgACABIAIQL5KSIgMgBCADIAReGyADIAQgBCAEXBsgBCAEWyADIANbcRsLvwEBA38gAC0AAEEgcUUEQAJAIAEhAwJAIAIgACIBKAIQIgAEfyAABSABEJ0BDQEgASgCEAsgASgCFCIFa0sEQCABIAMgAiABKAIkEQYAGgwCCwJAIAEoAlBBAEgNACACIQADQCAAIgRFDQEgAyAEQQFrIgBqLQAAQQpHDQALIAEgAyAEIAEoAiQRBgAgBEkNASADIARqIQMgAiAEayECIAEoAhQhBQsgBSADIAIQKxogASABKAIUIAJqNgIUCwsLCwYAIAAQIwtQAAJAAkACQAJAAkAgAg4EBAABAgMLIAAgASABQQxqEEMPCyAAIAEgAUEMaiADEEQPCyAAIAEgAUEMahBCDwsQJAALIAAgASABQQxqIAMQRQttAQF/IwBBgAJrIgUkACAEQYDABHEgAiADTHJFBEAgBSABQf8BcSACIANrIgNBgAIgA0GAAkkiARsQKhogAUUEQANAIAAgBUGAAhAmIANBgAJrIgNB/wFLDQALCyAAIAUgAxAmCyAFQYACaiQAC/ICAgJ/AX4CQCACRQ0AIAAgAToAACAAIAJqIgNBAWsgAToAACACQQNJDQAgACABOgACIAAgAToAASADQQNrIAE6AAAgA0ECayABOgAAIAJBB0kNACAAIAE6AAMgA0EEayABOgAAIAJBCUkNACAAQQAgAGtBA3EiBGoiAyABQf8BcUGBgoQIbCIBNgIAIAMgAiAEa0F8cSIEaiICQQRrIAE2AgAgBEEJSQ0AIAMgATYCCCADIAE2AgQgAkEIayABNgIAIAJBDGsgATYCACAEQRlJDQAgAyABNgIYIAMgATYCFCADIAE2AhAgAyABNgIMIAJBEGsgATYCACACQRRrIAE2AgAgAkEYayABNgIAIAJBHGsgATYCACAEIANBBHFBGHIiBGsiAkEgSQ0AIAGtQoGAgIAQfiEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkEgayICQR9LDQALCyAAC4AEAQN/IAJBgARPBEAgACABIAIQFyAADwsgACACaiEDAkAgACABc0EDcUUEQAJAIABBA3FFBEAgACECDAELIAJFBEAgACECDAELIAAhAgNAIAIgAS0AADoAACABQQFqIQEgAkEBaiICQQNxRQ0BIAIgA0kNAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgACADQQRrIgRLBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAtIAQF/IwBBEGsiBCQAIAQgAzYCDAJAIABFBEBBAEEAIAEgAiAEKAIMEHEMAQsgACgC9AMgACABIAIgBCgCDBBxCyAEQRBqJAALkwECAX0BfyMAQRBrIgYkACAGQQhqIABB6ABqIAAgAkEBdGovAWIQH0MAAMB/IQUCQAJAAkAgBi0ADEEBaw4CAAECCyAGKgIIIQUMAQsgBioCCCADlEMK1yM8lCEFCyAALQADQRB0QYCAwABxBEAgBSAAIAEgAiAEEFQiA0MAAAAAIAMgA1sbkiEFCyAGQRBqJAAgBQu1AQECfyAAKAIEQQFqIgEgACgCACICKALsAyACKALoAyICa0ECdU8EQANAIAAoAggiAUUEQCAAQQA2AgggAEIANwIADwsgACABKAIENgIAIAAgASgCCDYCBCAAIAEoAgA2AgggARAjIAAoAgRBAWoiASAAKAIAIgIoAuwDIAIoAugDIgJrQQJ1Tw0ACwsgACABNgIEIAIgAUECdGooAgAtABdBEHRBgIAwcUGAgCBGBEAgABB9CwuBAQIBfwF9IwBBEGsiAyQAIANBCGogAEEDIAJBAkdBAXQgAUH+AXFBAkcbIAIQU0MAAMB/IQQCQAJAAkAgAy0ADEEBaw4CAAECCyADKgIIIQQMAQsgAyoCCEMAAAAAlEMK1yM8lCEECyADQRBqJAAgBEMAAAAAl0MAAAAAIAQgBFsbC4EBAgF/AX0jAEEQayIDJAAgA0EIaiAAQQEgAkECRkEBdCABQf4BcUECRxsgAhBTQwAAwH8hBAJAAkACQCADLQAMQQFrDgIAAQILIAMqAgghBAwBCyADKgIIQwAAAACUQwrXIzyUIQQLIANBEGokACAEQwAAAACXQwAAAAAgBCAEWxsLeAICfQF/IAAgAkEDdGoiByoC+AMhBkMAAMB/IQUCQAJAAkAgBy0A/ANBAWsOAgABAgsgBiEFDAELIAYgA5RDCtcjPJQhBQsgAC0AF0EQdEGAgMAAcQR9IAUgAEEUaiABIAIgBBBUIgNDAAAAACADIANbG5IFIAULC1EBAX8CQCABKALoAyICIAEoAuwDRwRAIABCADcCBCAAIAE2AgAgAigCAC0AF0EQdEGAgDBxQYCAIEcNASAAEH0PCyAAQgA3AgAgAEEANgIICwvoAgECfwJAIAAgAUYNACABIAAgAmoiBGtBACACQQF0a00EQCAAIAEgAhArDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkEBayECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkEBayICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQQRrIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkEBayICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AA0AgAyABKAIANgIAIAFBBGohASADQQRqIQMgAkEEayICQQNLDQALCyACRQ0AA0AgAyABLQAAOgAAIANBAWohAyABQQFqIQEgAkEBayICDQALCyAAC5QCAgF8AX8CQCAAIAGiIgAQbCIERAAAAAAAAPA/oCAEIAREAAAAAAAAAABjGyIEIARiIgUgBJlELUMc6+I2Gj9jRXJFBEAgACAEoSEADAELIAUgBEQAAAAAAADwv6CZRC1DHOviNho/Y0VyRQRAIAAgBKFEAAAAAAAA8D+gIQAMAQsgACAEoSEAIAIEQCAARAAAAAAAAPA/oCEADAELIAMNACAAAnxEAAAAAAAAAAAgBQ0AGkQAAAAAAADwPyAERAAAAAAAAOA/ZA0AGkQAAAAAAADwP0QAAAAAAAAAACAERAAAAAAAAOC/oJlELUMc6+I2Gj9jGwugIQALIAAgAGIgASABYnIEQEMAAMB/DwsgACABo7YLkwECAX0BfyMAQRBrIgYkACAGQQhqIABB6ABqIAAgAkEBdGovAV4QH0MAAMB/IQUCQAJAAkAgBi0ADEEBaw4CAAECCyAGKgIIIQUMAQsgBioCCCADlEMK1yM8lCEFCyAALQADQRB0QYCAwABxBEAgBSAAIAEgAiAEEFQiA0MAAAAAIAMgA1sbkiEFCyAGQRBqJAAgBQtQAAJAAkACQAJAAkAgAg4EBAABAgMLIAAgASABQR5qEEMPCyAAIAEgAUEeaiADEEQPCyAAIAEgAUEeahBCDwsQJAALIAAgASABQR5qIAMQRQt+AgF/AX0jAEEQayIEJAAgBEEIaiAAQQMgAkECR0EBdCABQf4BcUECRxsgAhBQQwAAwH8hBQJAAkACQCAELQAMQQFrDgIAAQILIAQqAgghBQwBCyAEKgIIIAOUQwrXIzyUIQULIARBEGokACAFQwAAAACXQwAAAAAgBSAFWxsLfgIBfwF9IwBBEGsiBCQAIARBCGogAEEBIAJBAkZBAXQgAUH+AXFBAkcbIAIQUEMAAMB/IQUCQAJAAkAgBC0ADEEBaw4CAAECCyAEKgIIIQUMAQsgBCoCCCADlEMK1yM8lCEFCyAEQRBqJAAgBUMAAAAAl0MAAAAAIAUgBVsbC08AAkACQAJAIANB/wFxIgMOBAACAgECCyABIAEvAABB+P8DcTsAAA8LIAEgAS8AAEH4/wNxQQRyOwAADwsgACABIAJBAUECIANBAUYbEEwLNwEBfyABIAAoAgQiA0EBdWohASAAKAIAIQAgASACIANBAXEEfyABKAIAIABqKAIABSAACxEBAAtiAgJ9An8CQCAAKALkA0UNACAAQfwAaiIDIABBGmoiBC8BABAgIgIgAlwEQCADIABBGGoiBC8BABAgIgIgAlwNASADIAAvARgQIEMAAAAAXkUNAQsgAyAELwEAECAhAQsgAQtfAQN/IAEEQEEMEB4iAyABKQIENwIEIAMhAiABKAIAIgEEQCADIQQDQEEMEB4iAiABKQIENwIEIAQgAjYCACACIQQgASgCACIBDQALCyACIAAoAgA2AgAgACADNgIACwvXawMtfxx9AX4CfwJAIAAtAABBBHEEQCAAKAKgASAMRw0BCyAAKAKkASAAKAL0AygCDEcNAEEAIAAtAKgBIANGDQEaCyAAQoCAgPyLgIDAv383AoADIABCgYCAgBA3AvgCIABCgICA/IuAgMC/fzcC8AIgAEEANgKsAUEBCyErAkACQAJAAkAgACgCCARAIABBFGoiDkECQQEgBhAiIT4gDkECQQEgBhAhITwgDkEAQQEgBhAiITsgDkEAQQEgBhAhIUAgBCABIAUgAiAAKAL4AiAAQfACaiIOKgIAIAAoAvwCIAAqAvQCIAAqAoADIAAqAoQDID4gPJIiPiA7IECSIjwgACgC9AMiEBB7DQEgACgCrAEiEUUNAyAAQbABaiETA0AgBCABIAUgAiATIB1BGGxqIg4oAgggDioCACAOKAIMIA4qAgQgDioCECAOKgIUID4gPCAQEHsNAiAdQQFqIh0gEUcNAAsMAgsgCEUEQCAAKAKsASITRQ0CIABBsAFqIRADQAJAAkAgECAdQRhsIhFqIg4qAgAiPiA+XCABIAFcckUEQCA+IAGTi0MXt9E4XQ0BDAILIAEgAVsgPiA+W3INAQsCQCAQIBFqIhEqAgQiPiA+XCACIAJcckUEQCA+IAKTi0MXt9E4XQ0BDAILIAIgAlsgPiA+W3INAQsgESgCCCAERw0AIBEoAgwgBUYNAwsgEyAdQQFqIh1HDQALDAILAkAgAEHwAmoiDioCACI+ID5cIAEgAVxyRQRAID4gAZOLQxe30ThdDQEMBAsgASABWyA+ID5bcg0DCyAOQQAgACgC/AIgBUYbQQAgACgC+AIgBEYbQQACfyACIAJcIg4gACoC9AIiPiA+XHJFBEAgPiACk4tDF7fROF0MAQtBACA+ID5bDQAaIA4LGyEOCyAORSArcgRAIA4hHQwCCyAAIA4qAhA4ApQDIAAgDioCFDgCmAMgCkEMQRAgCBtqIgMgAygCAEEBajYCACAOIR0MAgtBACEdCyAGIUAgByFHIAtBAWohIiMAQaABayINJAACQAJAIARBAUYgASABW3JFBEAgDUGqCzYCICAAQQVB2CUgDUEgahAsDAELIAVBAUYgAiACW3JFBEAgDUHZCjYCECAAQQVB2CUgDUEQahAsDAELIApBAEEEIAgbaiILIAsoAgBBAWo2AgAgACAALQCIA0H8AXEgAC0AFEEDcSILIANBASADGyIsIAsbIg9BA3FyOgCIAyAAQawDaiIQIA9BAUdBA3QiC2ogAEEUaiIUQQNBAiAPQQJGGyIRIA8gQBAiIgY4AgAgECAPQQFGQQN0Ig5qIBQgESAPIEAQISIHOAIAIAAgFEEAIA8gQBAiIjw4ArADIAAgFEEAIA8gQBAhIjs4ArgDIABBvANqIhAgC2ogFCARIA8QMDgCACAOIBBqIBQgESAPEC84AgAgACAUQQAgDxAwOALAAyAAIBRBACAPEC84AsgDIAsgAEHMA2oiC2ogFCARIA8gQBA4OAIAIAsgDmogFCARIA8gQBA3OAIAIAAgFEEAIA8gQBA4OALQAyAAIBRBACAPIEAQNyI6OALYAyAGIAeSIT4gPCA7kiE8AkACQCAAKAIIIgsEQEMAAMB/IAEgPpMgBEEBRhshBkMAAMB/IAIgPJMgBUEBRhshPiAAAn0gBCAFckUEQCAAIABBAiAPIAYgQCBAECU4ApQDIABBACAPID4gRyBAECUMAQsgBEEDTyAFQQNPcg0EIA1BiAFqIAAgBiAGIAAqAswDIAAqAtQDkiAAKgK8A5IgACoCxAOSIjyTIgdDAAAAACAHQwAAAABeGyAGIAZcG0GBgAggBEEDdEH4//8HcXZB/wFxID4gPiAAKgLQAyA6kiAAKgLAA5IgACoCyAOSIjuTIgdDAAAAACAHQwAAAABeGyA+ID5cG0GBgAggBUEDdEH4//8HcXZB/wFxIAsREAAgDSoCjAEiPUMAAAAAYCANKgKIASIHQwAAAABgcUUEQCANID27OQMIIA0gB7s5AwAgAEEBQdwdIA0QLCANKgKMASIHQwAAAAAgB0MAAAAAXhshPSANKgKIASIHQwAAAAAgB0MAAAAAXhshBwsgCiAKKAIUQQFqNgIUIAogCUECdGoiCSAJKAIYQQFqNgIYIAAgAEECIA8gPCAHkiAGIARBAWtBAkkbIEAgQBAlOAKUAyAAQQAgDyA7ID2SID4gBUEBa0ECSRsgRyBAECULOAKYAwwBCwJAIAAoAuADRQRAIAAoAuwDIAAoAugDa0ECdSELDAELIA1BiAFqIAAQMgJAIA0oAogBRQRAQQAhCyANKAKMAUUNAQsgDUGAAWohEEEAIQsDQCANQQA2AoABIA0gDSkDiAE3A3ggECANKAKQARA8IA1BiAFqEC4gDSgCgAEiCQRAA0AgCSgCACEOIAkQJyAOIgkNAAsLIAtBAWohCyANQQA2AoABIA0oAowBIA0oAogBcg0ACwsgDSgCkAEiCUUNAANAIAkoAgAhDiAJECcgDiIJDQALCyALRQRAIAAgAEECIA8gBEEBa0EBSwR9IAEgPpMFIAAqAswDIAAqAtQDkiAAKgK8A5IgACoCxAOSCyBAIEAQJTgClAMgACAAQQAgDyAFQQFrQQFLBH0gAiA8kwUgACoC0AMgACoC2AOSIAAqAsADkiAAKgLIA5ILIEcgQBAlOAKYAwwBCwJAIAgNACAFQQJGIAIgPJMiBiAGW3EgBkMAAAAAX3EgBCAFckUgBEECRiABID6TIgdDAAAAAF9xcnJFDQAgACAAQQIgD0MAAAAAQwAAAAAgByAHQwAAAABdGyAHIARBAkYbIAcgB1wbIEAgQBAlOAKUAyAAIABBACAPQwAAAABDAAAAACAGIAZDAAAAAF0bIAYgBUECRhsgBiAGXBsgRyBAECU4ApgDDAELIAAQTyAAIAAtAIgDQfsBcToAiAMgABBeQQMhEyAALQAUQQJ2QQNxIQkCQAJAIA9BAkcNAAJAIAlBAmsOAgIAAQtBAiETDAELIAkhEwsgAC8AFSEnIBQgEyAPIEAQOCEGIBQgEyAPEDAhByAUIBMgDyBAEDchOyAUIBMgDxAvITpBACEQIBQgEUEAIBNBAkkbIhYgDyBAEDghPyAUIBYgDxAwIT0gFCAWIA8gQBA3IUEgFCAWIA8QLyFEIBQgFiAPIEAQYCFCIBQgFiAPEEshQyAAIA9BACABID6TIlAgBiAHkiA7IDqSkiJKID8gPZIgQSBEkpIiRiATQQFLIhkbIEAgQBB6ITsgACAPQQEgAiA8kyJRIEYgSiAZGyBHIEAQeiFFAkACQCAEIAUgGRsiHA0AIA1BiAFqIAAQMgJAAkAgDSgCiAEiDiANKAKMASIJckUNAANAIA4oAuwDIA4oAugDIg5rQQJ1IAlNDQQCQCAOIAlBAnRqKAIAIgkQeUUNACAQDQIgCRA7IgYgBlsgBotDF7fROF1xDQIgCRBAIgYgBlwEQCAJIRAMAQsgCSEQIAaLQxe30ThdDQILIA1BiAFqEC4gDSgCjAEiCSANKAKIASIOcg0ACwwBC0EAIRALIA0oApABIglFDQADQCAJKAIAIQ4gCRAnIA4iCQ0ACwsgDUGIAWogABAyIA0oAowBIQkCQCANKAKIASIORQRAQwAAAAAhPSAJRQ0BCyBFIEVcIiMgBUEAR3IhKCA7IDtcIiQgBEEAR3IhKUMAAAAAIT0DQCAOKALsAyAOKALoAyIOa0ECdSAJTQ0CIA4gCUECdGooAgAiDhB4AkAgDi8AFSAOLQAXQRB0ciIJQYCAMHFBgIAQRgRAIA4QdyAOIA4tAAAiCUEBciIOQfsBcSAOIAlBBHEbOgAADAELIAgEfyAOIA4tABRBA3EiCSAPIAkbIDsgRRB2IA4vABUgDi0AF0EQdHIFIAkLQYDgAHFBgMAARg0AIA5BFGohEQJAIA4gEEYEQCAQQQA2ApwBIBAgDDYCmAFDAAAAACEHDAELIBQtAABBAnZBA3EhCQJAAkAgD0ECRw0AQQMhEgJAIAlBAmsOAgIAAQtBAiESDAELIAkhEgsgDUGAgID+BzYCaCANQYCAgP4HNgJQIA1B+ABqIA5B/ABqIhcgDi8BHhAfIDsgRSASQQFLIh4bIT4CQAJAAkACQCANLQB8IgkOBAABAQABCwJAIBcgDi8BGBAgIgYgBlwNACAXIA4vARgQIEMAAAAAXkUNACAOKAL0Ay0ACEEBcSIJDQBDAADAf0MAAAAAIAkbIQcMAgtDAADAfyEGDAILIA0qAnghB0MAAMB/IQYCQCAJQQFrDgIBAAILIAcgPpRDCtcjPJQhBgwBCyAHIQYLIA4tABdBEHRBgIDAAHEEQCAGIBEgD0GBAiASQQN0dkEBcSA7EFQiBkMAAAAAIAYgBlsbkiEGCyAOKgL4AyEHQQAhH0EAIRgCQAJAAkAgDi0A/ANBAWsOAgEAAgsgOyAHlEMK1yM8lCEHCyAHIAdcDQAgB0MAAAAAYCEYCyAOKgKABCEHAkACQAJAIA4tAIQEQQFrDgIBAAILIEUgB5RDCtcjPJQhBwsgByAHXA0AIAdDAAAAAGAhHwsCQCAOAn0gBiAGXCIJID4gPlxyRQRAIA4qApwBIgcgB1sEQCAOKAL0Ay0AEEEBcUUNAyAOKAKYASAMRg0DCyARIBIgDyA7EDggESASIA8QMJIgESASIA8gOxA3IBEgEiAPEC+SkiIHIAYgBiAHXRsgByAGIAkbIAYgBlsgByAHW3EbDAELIBggHnEEQCARQQIgDyA7EDggEUECIA8QMJIgEUECIA8gOxA3IBFBAiAPEC+SkiIHIA4gD0EAIDsgOxAxIgYgBiAHXRsgByAGIAYgBlwbIAYgBlsgByAHW3EbDAELIB4gH0VyRQRAIBFBACAPIDsQOCARQQAgDxAwkiARQQAgDyA7EDcgEUEAIA8QL5KSIgcgDiAPQQEgRSA7EDEiBiAGIAddGyAHIAYgBiAGXBsgBiAGWyAHIAdbcRsMAQtBASEaIA1BATYCZCANQQE2AnggEUECQQEgOxAiIBFBAkEBIDsQIZIhPiARQQBBASA7ECIhPCARQQBBASA7ECEhOkMAAMB/IQdBASEVQwAAwH8hBiAYBEAgDiAPQQAgOyA7EDEhBiANQQA2AnggDSA+IAaSIgY4AmhBACEVCyA8IDqSITwgHwRAIA4gD0EBIEUgOxAxIQcgDUEANgJkIA0gPCAHkiIHOAJQQQAhGgsCQAJAAkAgAC0AF0EQdEGAgAxxQYCACEYiCSASQQJJIiBxRQRAIAkgJHINAiAGIAZcDQEMAgsgJCAGIAZbcg0CC0ECIRUgDUECNgJ4IA0gOzgCaCA7IQYLAkAgIEEBIAkbBEAgCSAjcg0CIAcgB1wNAQwCCyAjIAcgB1tyDQELQQIhGiANQQI2AmQgDSBFOAJQIEUhBwsCQCAXIA4vAXoQICI6IDpcDQACfyAVIB5yRQRAIBcgDi8BehAgIQcgDUEANgJkIA0gPCAGID6TIAeVkjgCUEEADAELIBogIHINASAXIA4vAXoQICEGIA1BADYCeCANIAYgByA8k5QgPpI4AmhBAAshGkEAIRULIA4vABZBD3EiCUUEQCAALQAVQQR2IQkLAkAgFUUgCUEFRiAeciAYIClyIAlBBEdycnINACANQQA2AnggDSA7OAJoIBcgDi8BehAgIgYgBlwNAEEAIRogFyAOLwF6ECAhBiANQQA2AmQgDSA7ID6TIAaVOAJQCyAOLwAWQQ9xIhhFBEAgAC0AFUEEdiEYCwJAICAgKHIgH3IgGEEFRnIgGkUgGEEER3JyDQAgDUEANgJkIA0gRTgCUCAXIA4vAXoQICIGIAZcDQAgFyAOLwF6ECAhBiANQQA2AnggDSAGIEUgPJOUOAJoCyAOIA9BAiA7IDsgDUH4AGogDUHoAGoQPyAOIA9BACBFIDsgDUHkAGogDUHQAGoQPyAOIA0qAmggDSoCUCAPIA0oAnggDSgCZCA7IEVBAEEFIAogIiAMED0aIA4gEkECdEH8JWooAgBBAnRqKgKUAyEGIBEgEiAPIDsQOCARIBIgDxAwkiARIBIgDyA7EDcgESASIA8QL5KSIgcgBiAGIAddGyAHIAYgBiAGXBsgBiAGWyAHIAdbcRsLIgc4ApwBCyAOIAw2ApgBCyA9IAcgESATQQEgOxAiIBEgE0EBIDsQIZKSkiE9CyANQYgBahAuIA0oAowBIgkgDSgCiAEiDnINAAsLIA0oApABIgkEQANAIAkoAgAhDiAJECcgDiIJDQALCyA7IEUgGRshByA9QwAAAACSIQYgC0ECTwRAIBQgEyAHEE0gC0EBa7OUIAaSIQYLIEIgQ5IhPiAFIAQgGRshGiBHIEAgGRshTSBAIEcgGRshSSANQdAAaiAAEDJBACAcIAYgB14iCxsgHCAcQQJGGyAcICdBgIADcSIfGyEeIBQgFiBFIDsgGRsiRBBNIU8gDSgCVCIRIA0oAlAiCXIEQEEBQQIgRCBEXCIpGyEtIAtFIBxBAUZyIS4gE0ECSSEZIABB8gBqIS8gAEH8AGohMCATQQJ0IgtB7CVqITEgC0HcJWohMiAWQQJ0Ig5B7CVqIRwgDkHcJWohICALQfwlaiEkIA5B/CVqISMgGkEARyIzIAhyITQgGkUiNSAIQQFzcSE2IBogH3JFITcgDUHwAGohOCANQYABaiEnQYECIBNBA3R2Qf8BcSEoIBpBAWtBAkkhOQNAIA1BADYCgAEgDUIANwN4AkAgACgC7AMiCyAAKALoAyIORg0AIAsgDmsiC0EASA0DIA1BiAFqIAtBAnVBACAnEEohECANKAKMASANKAJ8IA0oAngiC2siDmsgCyAOEDMhDiANIA0oAngiCzYCjAEgDSAONgJ4IA0pA5ABIVYgDSANKAJ8Ig42ApABIA0oAoABIRIgDSBWNwJ8IA0gEjYClAEgECALNgIAIAsgDkcEQCANIA4gCyAOa0EDakF8cWo2ApABCyALRQ0AIAsQJwsgFC0AACIOQQJ2QQNxIQsCQAJAIA5BA3EiDiAsIA4bIhJBAkcNAEEDIRACQCALQQJrDgICAAELQQIhEAwBCyALIRALIAAvABUhCyAUIBAgBxBNIT8CQCAJIBFyRQRAQwAAAAAhQ0EAIRFDAAAAACFCQwAAAAAhQUEAIRUMAQsgC0GAgANxISUgEEECSSEYIBBBAnQiC0HsJWohISALQdwlaiEqQQAhFUMAAAAAIUEgESEOQwAAAAAhQkMAAAAAIUNBACEXQwAAAAAhPQNAIAkoAuwDIAkoAugDIglrQQJ1IA5NDQQCQCAJIA5BAnRqKAIAIgkvABUgCS0AF0EQdHIiC0GAgDBxQYCAEEYgC0GA4ABxQYDAAEZyDQAgDUGIAWoiESAJQRRqIgsgKigCACADECggDS0AjAEhJiARIAsgISgCACADECggDS0AjAEhESAJIBs2AtwDIBUgJkEDRmohFSARQQNGIREgCyAQQQEgOxAiIUsgCyAQQQEgOxAhIU4gCSAXIAkgFxsiF0YhJiAJKgKcASE8IAsgEiAYIEkgQBA1IToCQCALIBIgGCBJIEAQLSIGQwAAAABgIAYgPF1xDQAgOkMAAAAAYEUEQCA8IQYMAQsgOiA8IDogPF4bIQYLIBEgFWohFQJAICVFQwAAAAAgPyAmGyI8IEsgTpIiOiA9IAaSkpIgB15Fcg0AIA0oAnggDSgCfEYNACAOIREMAwsgCRB5BEAgQiAJEDuSIUIgQyAJEEAgCSoCnAGUkyFDCyBBIDwgOiAGkpIiBpIhQSA9IAaSIT0gDSgCfCILIA0oAoABRwRAIAsgCTYCACANIAtBBGo2AnwMAQsgCyANKAJ4ayILQQJ1IhFBAWoiDkGAgICABE8NBSANQYgBakH/////AyALQQF1IiYgDiAOICZJGyALQfz///8HTxsgESAnEEohDiANKAKQASAJNgIAIA0gDSgCkAFBBGo2ApABIA0oAowBIA0oAnwgDSgCeCIJayILayAJIAsQMyELIA0gDSgCeCIJNgKMASANIAs2AnggDSkDkAEhViANIA0oAnwiCzYCkAEgDSgCgAEhESANIFY3AnwgDSARNgKUASAOIAk2AgAgCSALRwRAIA0gCyAJIAtrQQNqQXxxajYCkAELIAlFDQAgCRAnCyANQQA2AnAgDSANKQNQNwNoIDggDSgCWBA8IA1B0ABqEC4gDSgCcCIJBEADQCAJKAIAIQsgCRAnIAsiCQ0ACwtBACERIA1BADYCcCANKAJUIg4gDSgCUCIJcg0ACwtDAACAPyBCIEJDAACAP10bIEIgQkMAAAAAXhshPCANKAJ8IRcgDSgCeCEJAn0CQAJ9AkACQAJAIB5FDQAgFCAPQQAgQCBAEDUhBiAUIA9BACBAIEAQLSE6IBQgD0EBIEcgQBA1IT8gFCAPQQEgRyBAEC0hPSAGID8gE0EBSyILGyBKkyIGIAZbIAYgQV5xDQEgOiA9IAsbIEqTIgYgBlsgBiBBXXENASAAKAL0Ay0AFEEBcQ0AIEEgPEMAAAAAWw0DGiAAEDsiBiAGXA0CIEEgABA7QwAAAABbDQMaDAILIAchBgsgBiAGWw0CIAYhBwsgBwshBiBBjEMAAAAAIEFDAAAAAF0bIT8gBgwBCyAGIEGTIT8gBgshByA2RQRAAkAgCSAXRgRAQwAAAAAhQQwBC0MAAIA/IEMgQ0MAAIA/XRsgQyBDQwAAAABeGyE9QwAAAAAhQSAJIQ4DQCAOKAIAIgsqApwBITogC0EUaiIQIA8gGSBJIEAQNSFCAkAgECAPIBkgSSBAEC0iBkMAAAAAYCAGIDpdcQ0AIEJDAAAAAGBFBEAgOiEGDAELIEIgOiA6IEJdGyEGCwJAID9DAAAAAF0EQCAGIAsQQIyUIjpDAAAAAF4gOkMAAAAAXXJFDQEgCyATIA8gPyA9lSA6lCAGkiJCIAcgOxAlITogQiBCXCA6IDpcciA6IEJbcg0BIEEgOiAGk5IhQSALEEAgCyoCnAGUID2SIT0MAQsgP0MAAAAAXkUNACALEDsiQkMAAAAAXiBCQwAAAABdckUNACALIBMgDyA/IDyVIEKUIAaSIkMgByA7ECUhOiBDIENcIDogOlxyIDogQ1tyDQAgPCBCkyE8IEEgOiAGk5IhQQsgDkEEaiIOIBdHDQALID8gQZMiQiA9lSFLIEIgPJUhTiAALwAVQYCAA3FFIC5yISVDAAAAACFBIAkhCwNAIAsoAgAiDioCnAEhPCAOQRRqIhggDyAZIEkgQBA1IToCQCAYIA8gGSBJIEAQLSIGQwAAAABgIAYgPF1xDQAgOkMAAAAAYEUEQCA8IQYMAQsgOiA8IDogPF4bIQYLAn0gDiATIA8CfSBCQwAAAABdBEAgBiAGIA4QQIyUIjxDAAAAAFsNAhogBiA8kiA9QwAAAABbDQEaIEsgPJQgBpIMAQsgBiBCQwAAAABeRQ0BGiAGIA4QOyI8QwAAAABeIDxDAAAAAF1yRQ0BGiBOIDyUIAaSCyAHIDsQJQshQyAYIBNBASA7ECIhPCAYIBNBASA7ECEhOiAYIBZBASA7ECIhUiAYIBZBASA7ECEhUyANIEMgPCA6kiJUkiJVOAJoIA1BADYCYCBSIFOSITwCQCAOQfwAaiIQIA4vAXoQICI6IDpbBEAgECAOLwF6ECAhOiANQQA2AmQgDSA8IFUgVJMiPCA6lCA8IDqVIBkbkjgCeAwBCyAjKAIAIRACQCApDQAgDiAQQQN0aiIhKgL4AyE6QQAhEgJAAkACQCAhLQD8A0EBaw4CAQACCyBEIDqUQwrXIzyUIToLIDogOlwNACA6QwAAAABgIRILICUgNSASQQFzcXFFDQAgDi8AFkEPcSISBH8gEgUgAC0AFUEEdgtBBEcNACANQYgBaiAYICAoAgAgDxAoIA0tAIwBQQNGDQAgDUGIAWogGCAcKAIAIA8QKCANLQCMAUEDRg0AIA1BADYCZCANIEQ4AngMAQsgDkH4A2oiEiAQQQN0aiIQKgIAIToCQAJAAkACQCAQLQAEQQFrDgIBAAILIEQgOpRDCtcjPJQhOgsgOkMAAAAAYA0BCyANIC02AmQgDSBEOAJ4DAELAkACfwJAAkACQCAWQQJrDgICAAELIDwgDiAPQQAgRCA7EDGSITpBAAwCC0EBIRAgDSA8IA4gD0EBIEQgOxAxkiI6OAJ4IBNBAU0NDAwCCyA8IA4gD0EAIEQgOxAxkiE6QQALIRAgDSA6OAJ4CyANIDMgEiAQQQN0ajEABEIghkKAgICAIFFxIDogOlxyNgJkCyAOIA8gEyAHIDsgDUHgAGogDUHoAGoQPyAOIA8gFiBEIDsgDUHkAGogDUH4AGoQPyAOICMoAgBBA3RqIhAqAvgDIToCQAJAAkACQCAQLQD8A0EBaw4CAQACCyBEIDqUQwrXIzyUIToLQQEhECA6QwAAAABgDQELQQEhECAOLwAWQQ9xIhIEfyASBSAALQAVQQR2C0EERw0AIA1BiAFqIBggICgCACAPECggDS0AjAFBA0YNACANQYgBaiAYIBwoAgAgDxAoIA0tAIwBQQNGIRALIA4gDSoCaCI8IA0qAngiOiATQQFLIhIbIDogPCASGyAALQCIA0EDcSANKAJgIhggDSgCZCIhIBIbICEgGCASGyA7IEUgCCAQcSIQQQRBByAQGyAKICIgDBA9GiBBIEMgBpOSIUEgAAJ/IAAtAIgDIhBBBHFFBEBBACAOLQCIA0EEcUUNARoLQQQLIBBB+wFxcjoAiAMgC0EEaiILIBdHDQALCyA/IEGTIT8LIAAgAC0AiAMiC0H7AXFBBCA/QwAAAABdQQJ0IAtBBHFBAnYbcjoAiAMgFCATIA8gQBBgIBQgEyAPEEuSITogFCATIA8gQBB/IBQgEyAPEFKSIUsgFCATIAcQTSFCAn8CQAJ9ID9DAAAAAF5FIB5BAkdyRQRAIA1BiAFqIDAgLyAkKAIAQQF0ai8BABAfAkAgDS0AjAEEQCAUIA8gKCBJIEAQNSIGIAZbDQELQwAAAAAMAgtDAAAAACAUIA8gKCBJIEAQNSA6kyBLkyAHID+TkyI/QwAAAABeRQ0BGgsgP0MAAAAAYEUNASA/CyE8IBQtAABBBHZBB3EMAQsgPyE8IBQtAABBBHZBB3EiC0EAIAtBA2tBA08bCyELQwAAAAAhBgJAAkAgFQ0AQwAAAAAhPQJAAkACQAJAAkAgC0EBaw4FAAECBAMGCyA8QwAAAD+UIT0MBQsgPCE9DAQLIBcgCWsiC0EFSQ0CIEIgPCALQQJ1QQFrs5WSIUIMAgsgQiA8IBcgCWtBAnVBAWqzlSI9kiFCDAILIDxDAAAAP5QgFyAJa0ECdbOVIj0gPZIgQpIhQgwBC0MAAAAAIT0LIDogPZIhPSAAEHwhEgJAIAkgF0YiGARAQwAAAAAhP0MAAAAAIToMAQsgF0EEayElIDwgFbOVIU4gMigCACEhQwAAAAAhOkMAAAAAIT8gCSELA0AgDUGIAWogCygCACIOQRRqIhAgISAPECggPUMAAACAIE5DAAAAgCA8QwAAAABeGyJBIA0tAIwBQQNHG5IhPSAIBEACfwJAAkACQAJAIBNBAWsOAwECAwALQQEhFSAOQaADagwDC0EDIRUgDkGoA2oMAgtBACEVIA5BnANqDAELQQIhFSAOQaQDagshKiAOIBVBAnRqICoqAgAgPZI4ApwDCyAlKAIAIRUgDUGIAWogECAxKAIAIA8QKCA9QwAAAIAgQiAOIBVGG5JDAAAAgCBBIA0tAIwBQQNHG5IhPQJAIDRFBEAgPSAQIBNBASA7ECIgECATQQEgOxAhkiAOKgKcAZKSIT0gRCEGDAELIA4gEyA7EF0gPZIhPSASBEAgDhBOIUEgEEEAIA8gOxBBIUMgDioCmAMgEEEAQQEgOxAiIBBBAEEBIDsQIZKSIEEgQ5IiQZMiQyA/ID8gQ10bIEMgPyA/ID9cGyA/ID9bIEMgQ1txGyE/IEEgOiA6IEFdGyBBIDogOiA6XBsgOiA6WyBBIEFbcRshOgwBCyAOIBYgOxBdIkEgBiAGIEFdGyBBIAYgBiAGXBsgBiAGWyBBIEFbcRshBgsgC0EEaiILIBdHDQALCyA/IDqSIAYgEhshQQJ9IDkEQCAAIBYgDyBGIEGSIE0gQBAlIEaTDAELIEQgQSA3GyFBIEQLIT8gH0UEQCAAIBYgDyBGIEGSIE0gQBAlIEaTIUELIEsgPZIhPAJAIAhFDQAgCSELIBgNAANAIAsoAgAiFS8AFkEPcSIORQRAIAAtABVBBHYhDgsCQAJAAkACQCAOQQRrDgIAAQILIA1BiAFqIBVBFGoiECAgKAIAIA8QKEEEIQ4gDS0AjAFBA0YNASANQYgBaiAQIBwoAgAgDxAoIA0tAIwBQQNGDQEgFSAjKAIAQQN0aiIOKgL4AyE9AkACQAJAIA4tAPwDQQFrDgIBAAILIEQgPZRDCtcjPJQhPQsgPiEGID1DAAAAAGANAwsgFSAkKAIAQQJ0aioClAMhBiANIBVB/ABqIg4gFS8BehAgIjogOlsEfSAQIBZBASA7ECIgECAWQQEgOxAhkiAGIA4gFS8BehAgIjqUIAYgOpUgGRuSBSBBCzgCeCANIAYgECATQQEgOxAiIBAgE0EBIDsQIZKSOAKIASANQQA2AmggDUEANgJkIBUgDyATIAcgOyANQegAaiANQYgBahA/IBUgDyAWIEQgOyANQeQAaiANQfgAahA/IA0qAngiOiANKgKIASI9IBNBAUsiGCIOGyEGIB9BAEcgAC8AFUEPcUEER3EiECAZcSA9IDogDhsiOiA6XHIhDiAVIDogBiAPIA4gECAYcSAGIAZcciA7IEVBAUECIAogIiAMED0aID4hBgwCC0EFQQEgFC0AAEEIcRshDgsgFSAWIDsQXSEGIA1BiAFqIBVBFGoiECAgKAIAIhggDxAoID8gBpMhOgJAIA0tAIwBQQNHBEAgHCgCACESDAELIA1BiAFqIBAgHCgCACISIA8QKCANLQCMAUEDRw0AID4gOkMAAAA/lCIGQwAAAAAgBkMAAAAAXhuSIQYMAQsgDUGIAWogECASIA8QKCA+IQYgDS0AjAFBA0YNACANQYgBaiAQIBggDxAoIA0tAIwBQQNGBEAgPiA6QwAAAAAgOkMAAAAAXhuSIQYMAQsCQAJAIA5BAWsOAgIAAQsgPiA6QwAAAD+UkiEGDAELID4gOpIhBgsCfwJAAkACQAJAIBZBAWsOAwECAwALQQEhECAVQaADagwDC0EDIRAgFUGoA2oMAgtBACEQIBVBnANqDAELQQIhECAVQaQDagshDiAVIBBBAnRqIAYgTCAOKgIAkpI4ApwDIAtBBGoiCyAXRw0ACwsgCQRAIAkQJwsgPCBIIDwgSF4bIDwgSCBIIEhcGyBIIEhbIDwgPFtxGyFIIEwgT0MAAAAAIBsbIEGSkiFMIBtBAWohGyANKAJQIgkgEXINAAsLAkAgCEUNACAfRQRAIAAQfEUNAQsgACAWIA8CfSBGIESSIBpFDQAaIAAgFkECdEH8JWooAgBBA3RqIgkqAvgDIQYCQAJAAkAgCS0A/ANBAWsOAgEAAgsgTSAGlEMK1yM8lCEGCyAGQwAAAABgRQ0AIAAgD0GBAiAWQQN0dkEBcSBNIEAQMQwBCyBGIEySCyBHIEAQJSEGQwAAAAAhPCAALwAVQQ9xIQkCQAJAAkACQAJAAkACQAJAAkAgBiBGkyBMkyIGQwAAAABgRQRAQwAAAAAhQyAJQQJrDgICAQcLQwAAAAAhQyAJQQJrDgcBAAUGBAIDBgsgPiAGkiE+DAULID4gBkMAAAA/lJIhPgwECyAGIBuzIjqVITwgPiAGIDogOpKVkiE+DAMLID4gBiAbQQFqs5UiPJIhPgwCCyAbQQJJBEAMAgsgDUGIAWogABAyIAYgG0EBa7OVITwMAgsgBiAbs5UhQwsgDUGIAWogABAyIBtFDQELIBZBAnQiCUHcJWohECAJQfwlaiERIA1BOGohGCANQcgAaiEZIA1B8ABqIRUgDUGQAWohHCANQYABaiEfQQAhEgNAIA1BADYCgAEgDSANKQOIATcDeCAfIA0oApABEDwgDUEANgJwIA0gDSkDeCJWNwNoIBUgDSgCgAEiCxA8IA0oAmwhCQJAAkAgDSgCaCIOBEBDAAAAACE6QwAAAAAhP0MAAAAAIQYMAQtDAAAAACE6QwAAAAAhP0MAAAAAIQYgCUUNAQsDQCAOKALsAyAOKALoAyIOa0ECdSAJTQ0FAkAgDiAJQQJ0aigCACIJLwAVIAktABdBEHRyIhdBgIAwcUGAgBBGIBdBgOAAcUGAwABGcg0AIAkoAtwDIBJHDQIgCUEUaiEOIAkgESgCAEECdGoqApQDIj1DAAAAAGAEfyA9IA4gFkEBIDsQIiAOIBZBASA7ECGSkiI9IAYgBiA9XRsgPSAGIAYgBlwbIAYgBlsgPSA9W3EbIQYgCS0AFgUgF0EIdgtBD3EiFwR/IBcFIAAtABVBBHYLQQVHDQAgFC0AAEEIcUUNACAJEE4gDkEAIA8gOxBBkiI9ID8gPSA/XhsgPSA/ID8gP1wbID8gP1sgPSA9W3EbIj8gCSoCmAMgDkEAQQEgOxAiIA5BAEEBIDsQIZKSID2TIj0gOiA6ID1dGyA9IDogOiA6XBsgOiA6WyA9ID1bcRsiOpIiPSAGIAYgPV0bID0gBiAGIAZcGyAGIAZbID0gPVtxGyEGCyANQQA2AkggDSANKQNoNwNAIBkgDSgCcBA8IA1B6ABqEC4gDSgCSCIJBEADQCAJKAIAIQ4gCRAnIA4iCQ0ACwsgDUEANgJIIA0oAmwiCSANKAJoIg5yDQALCyANIA0pA2g3A4gBIBwgDSgCcBB1IA0gVjcDaCAVIAsQdSA+IE9DAAAAACASG5IhPiBDIAaSIT0gDSgCbCEJAkAgDSgCaCIOIA0oAogBRgRAIAkgDSgCjAFGDQELID4gP5IhQiA+ID2SIUsgPCA9kiEGA0AgDigC7AMgDigC6AMiDmtBAnUgCU0NBQJAIA4gCUECdGooAgAiCS8AFSAJLQAXQRB0ciIXQYCAMHFBgIAQRiAXQYDgAHFBgMAARnINACAJQRRqIQ4CQAJAAkACQAJAAkAgF0EIdkEPcSIXBH8gFwUgAC0AFUEEdgtBAWsOBQEDAgQABgsgFC0AAEEIcQ0ECyAOIBYgDyA7EFEhOiAJIBAoAgBBAnRqID4gOpI4ApwDDAQLIA4gFiAPIDsQYiE/AkACQAJAAkAgFkECaw4CAgABCyAJKgKUAyE6QQIhDgwCC0EBIQ4gCSoCmAMhOgJAIBYOAgIADwtBAyEODAELIAkqApQDITpBACEOCyAJIA5BAnRqIEsgP5MgOpM4ApwDDAMLAkACQAJAAkAgFkECaw4CAgABCyAJKgKUAyE/QQIhDgwCC0EBIQ4gCSoCmAMhPwJAIBYOAgIADgtBAyEODAELIAkqApQDIT9BACEOCyAJIA5BAnRqID4gPSA/k0MAAAA/lJI4ApwDDAILIA4gFiAPIDsQQSE6IAkgECgCAEECdGogPiA6kjgCnAMgCSARKAIAQQN0aiIXKgL4AyE/AkACQAJAIBctAPwDQQFrDgIBAAILIEQgP5RDCtcjPJQhPwsgP0MAAAAAYA0CCwJAAkACfSATQQFNBEAgCSoCmAMgDiAWQQEgOxAiIA4gFkEBIDsQIZKSITogBgwBCyAGITogCSoClAMgDiATQQEgOxAiIA4gE0EBIDsQIZKSCyI/ID9cIAkqApQDIkEgQVxyRQRAID8gQZOLQxe30ThdDQEMAgsgPyA/WyBBIEFbcg0BCyAJKgKYAyJBIEFcIg4gOiA6XHJFBEAgOiBBk4tDF7fROF1FDQEMAwsgOiA6Ww0AIA4NAgsgCSA/IDogD0EAQQAgOyBFQQFBAyAKICIgDBA9GgwBCyAJIEIgCRBOkyAOQQAgDyBEEFGSOAKgAwsgDUEANgI4IA0gDSkDaDcDMCAYIA0oAnAQPCANQegAahAuIA0oAjgiCQRAA0AgCSgCACEOIAkQJyAOIgkNAAsLIA1BADYCOCANKAJsIQkgDSgCaCIOIA0oAogBRw0AIAkgDSgCjAFHDQALCyANKAJwIgkEQANAIAkoAgAhDiAJECcgDiIJDQALCyALBEADQCALKAIAIQkgCxAnIAkiCw0ACwsgPCA+kiA9kiE+IBJBAWoiEiAbRw0ACwsgDSgCkAEiCUUNAANAIAkoAgAhCyAJECcgCyIJDQALCyAAQZQDaiIQIABBAiAPIFAgQCBAECU4AgAgAEGYA2oiESAAQQAgDyBRIEcgQBAlOAIAAkAgEEGBAiATQQN0dkEBcUECdGoCfQJAIB5BAUcEQCAALQAXQQNxIglBAkYgHkECR3INAQsgACATIA8gSCBJIEAQJQwBCyAeQQJHIAlBAkdyDQEgSiAAIA8gEyBIIEkgQBB0Ij4gSiAHkiIGIAYgPl4bID4gBiAGIAZcGyAGIAZbID4gPltxGyIGIAYgSl0bIEogBiAGIAZcGyAGIAZbIEogSltxGws4AgALAkAgEEGBAiAWQQN0dkEBcUECdGoCfQJAIBpBAUcEQCAaQQJHIgkgAC0AF0EDcSILQQJGcg0BCyAAIBYgDyBGIEySIE0gQBAlDAELIAkgC0ECR3INASBGIAAgDyAWIEYgTJIgTSBAEHQiByBGIESSIgYgBiAHXhsgByAGIAYgBlwbIAYgBlsgByAHW3EbIgYgBiBGXRsgRiAGIAYgBlwbIAYgBlsgRiBGW3EbCzgCAAsCQCAIRQ0AAkAgAC8AFUGAgANxQYCAAkcNACANQYgBaiAAEDIDQCANKAKMASIJIA0oAogBIgtyRQRAIA0oApABIglFDQIDQCAJKAIAIQsgCRAnIAsiCQ0ACwwCCyALKALsAyALKALoAyILa0ECdSAJTQ0DIAsgCUECdGooAgAiCS8AFUGA4ABxQYDAAEcEQCAJAn8CQAJAAkAgFkECaw4CAAECCyAJQZQDaiEOIBAqAgAgCSoCnAOTIQZBAAwCCyAJQZQDaiEOIBAqAgAgCSoCpAOTIQZBAgwBCyARKgIAIQYCQAJAIBYOAgABCgsgCUGYA2ohDiAGIAkqAqADkyEGQQEMAQsgCUGYA2ohDiAGIAkqAqgDkyEGQQMLQQJ0aiAGIA4qAgCTOAKcAwsgDUGIAWoQLgwACwALAkAgEyAWckEBcUUNACAWQQFxIRQgE0EBcSEVIA1BiAFqIAAQMgNAIA0oAowBIgkgDSgCiAEiC3JFBEAgDSgCkAEiCUUNAgNAIAkoAgAhCyAJECcgCyIJDQALDAILIAsoAuwDIAsoAugDIgtrQQJ1IAlNDQMCQCALIAlBAnRqKAIAIgkvABUgCS0AF0EQdHIiC0GAgDBxQYCAEEYgC0GA4ABxQYDAAEZyDQAgFQRAAn8CfwJAAkACQCATQQFrDgMAAQINCyAJQZgDaiEOIAlBqANqIQtBASESIBEMAwsgCUGUA2ohDkECIRIgCUGcA2oMAQsgCUGUA2ohDkEAIRIgCUGkA2oLIQsgEAshGyAJIBJBAnRqIBsqAgAgDioCAJMgCyoCAJM4ApwDCyAURQ0AAn8CfwJAAkACQCAWQQFrDgMAAQIMCyAJQZgDaiELIAlBqANqIRJBASEXIBEMAwsgCUGUA2ohCyAJQZwDaiESQQIMAQsgCUGUA2ohCyAJQaQDaiESQQALIRcgEAshDiAJIBdBAnRqIA4qAgAgCyoCAJMgEioCAJM4ApwDCyANQYgBahAuDAALAAsgAC8AFUGA4ABxICJBAUZyRQRAIAAtAABBCHFFDQELIAAgACAeIAQgE0EBSxsgDyAKICIgDEMAAAAAQwAAAAAgOyBFEH4aCyANKAJYIglFDQIDQCAJKAIAIQsgCRAnIAsiCQ0ACwwCCxACAAsgABBeCyANQaABaiQADAELECQACyAAIAM6AKgBIAAgACgC9AMoAgw2AqQBIB0NACAKIAooAggiAyAAKAKsASIOQQFqIgkgAyAJSxs2AgggDkEIRgRAIABBADYCrAFBACEOCyAIBH8gAEHwAmoFIAAgDkEBajYCrAEgACAOQRhsakGwAWoLIgMgBTYCDCADIAQ2AgggAyACOAIEIAMgATgCACADIAAqApQDOAIQIAMgACoCmAM4AhRBACEdCyAIBEAgACAAKQKUAzcCjAMgACAALQAAIgNBAXIiBEH7AXEgBCADQQRxGzoAAAsgACAMNgKgASArIB1Fcgs1AQF/IAEgACgCBCICQQF1aiEBIAAoAgAhACABIAJBAXEEfyABKAIAIABqKAIABSAACxECAAt9ACAAQRRqIgAgAUGBAiACQQN0dkH/AXEgAyAEEC0gACACQQEgBBAiIAAgAkEBIAQQIZKSIQQCQAJAAkACQCAFKAIADgMAAQADCyAGKgIAIgMgAyAEIAMgBF0bIAQgBFwbIQQMAQsgBCAEXA0BIAVBAjYCAAsgBiAEOAIACwuMAQIBfwF9IAAoAuQDRQRAQwAAAAAPCyAAQfwAaiIBIAAvARwQICICIAJbBEAgASAALwEcECAPCwJAIAAoAvQDLQAIQQFxDQAgASAALwEYECAiAiACXA0AIAEgAC8BGBAgQwAAAABdRQ0AIAEgAC8BGBAgjA8LQwAAgD9DAAAAACAAKAL0Ay0ACEEBcRsLcAIBfwF9IwBBEGsiBCQAIARBCGogACABQQJ0QdwlaigCACACEChDAADAfyEFAkACQAJAIAQtAAxBAWsOAgABAgsgBCoCCCEFDAELIAQqAgggA5RDCtcjPJQhBQsgBEEQaiQAIAVDAAAAACAFIAVbGwtHAQF/IAIvAAYiA0EHcQRAIAAgAUHoAGogAxAfDwsgAUHoAGohASACLwAOIgNBB3EEQCAAIAEgAxAfDwsgACABIAIvABAQHwtHAQF/IAIvAAIiA0EHcQRAIAAgAUHoAGogAxAfDwsgAUHoAGohASACLwAOIgNBB3EEQCAAIAEgAxAfDwsgACABIAIvABAQHwt7AAJAAkACQAJAIANBAWsOAgABAgsgAi8ACiIDQQdxRQ0BDAILIAIvAAgiA0EHcUUNAAwBCyACLwAEIgNBB3EEQAwBCyABQegAaiEBIAIvAAwiA0EHcQRAIAAgASADEB8PCyAAIAEgAi8AEBAfDwsgACABQegAaiADEB8LewACQAJAAkACQCADQQFrDgIAAQILIAIvAAgiA0EHcUUNAQwCCyACLwAKIgNBB3FFDQAMAQsgAi8AACIDQQdxBEAMAQsgAUHoAGohASACLwAMIgNBB3EEQCAAIAEgAxAfDwsgACABIAIvABAQHw8LIAAgAUHoAGogAxAfC84BAgN/An0jAEEQayIDJABBASEEIANBCGogAEH8AGoiBSAAIAFBAXRqQe4AaiIBLwEAEB8CQAJAIAMqAggiByACKgIAIgZcBEAgByAHWwRAIAItAAQhAgwCCyAGIAZcIQQLIAItAAQhAiAERQ0AIAMtAAwgAkH/AXFGDQELIAUgASAGIAIQOQNAIAAtAAAiAUEEcQ0BIAAgAUEEcjoAACAAKAIQIgEEQCAAIAERAAALIABBgICA/gc2ApwBIAAoAuQDIgANAAsLIANBEGokAAuFAQIDfwF+AkAgAEKAgICAEFQEQCAAIQUMAQsDQCABQQFrIgEgAEIKgCIFQvYBfiAAfKdBMHI6AAAgAEL/////nwFWIQIgBSEAIAINAAsLIAWnIgIEQANAIAFBAWsiASACQQpuIgNB9gFsIAJqQTByOgAAIAJBCUshBCADIQIgBA0ACwsgAQs3AQJ/QQQQHiICIAE2AgBBBBAeIgMgATYCAEHBOyAAQeI7QfooQb8BIAJB4jtB/ihBwAEgAxAHCw8AIAAgASACQQFBAhCLAQteAQF/IABBADYCDCAAIAM2AhACQCABBEAgAUGAgICABE8NASABQQJ0EB4hBAsgACAENgIAIAAgBCACQQJ0aiICNgIIIAAgBCABQQJ0ajYCDCAAIAI2AgQgAA8LEFgAC3kCAX8BfSMAQRBrIgMkACADQQhqIAAgAUECdEHcJWooAgAgAhBTQwAAwH8hBAJAAkACQCADLQAMQQFrDgIAAQILIAMqAgghBAwBCyADKgIIQwAAAACUQwrXIzyUIQQLIANBEGokACAEQwAAAACXQwAAAAAgBCAEWxsLnAoBC38jAEEQayIIJAAgASABLwAAQXhxIANyIgM7AAACQAJAAkACQAJAAkACQAJAAkACQCADQQhxBEAgA0H//wNxIgZBBHYhBCAGQT9NBH8gACAEQQJ0akEEagUgBEEEayIEIAAoAhgiACgCBCAAKAIAIgBrQQJ1Tw0CIAAgBEECdGoLIAI4AgAMCgsCfyACi0MAAABPXQRAIAKoDAELQYCAgIB4CyIEQf8PakH+H0sgBLIgAlxyRQRAIANBD3FBACAEa0GAEHIgBCACQwAAAABdG0EEdHIhAwwKCyAAIAAvAQAiC0EBajsBACALQYAgTw0DIAtBA00EQCAAIAtBAnRqIAI4AgQMCQsgACgCGCIDRQRAQRgQHiIDQgA3AgAgA0IANwIQIANCADcCCCAAIAM2AhgLAkAgAygCBCIEIAMoAghHBEAgBCACOAIAIAMgBEEEajYCBAwBCyAEIAMoAgAiB2siBEECdSIJQQFqIgZBgICAgARPDQECf0H/////AyAEQQF1IgUgBiAFIAZLGyAEQfz///8HTxsiBkUEQEEAIQUgCQwBCyAGQYCAgIAETw0GIAZBAnQQHiEFIAMoAgQgAygCACIHayIEQQJ1CyEKIAUgCUECdGoiCSACOAIAIAkgCkECdGsgByAEEDMhByADIAUgBkECdGo2AgggAyAJQQRqNgIEIAMoAgAhBCADIAc2AgAgBEUNACAEECMLIAAoAhgiBigCECIDIAYoAhQiAEEFdEcNByADQQFqQQBIDQAgA0H+////A0sNASADIABBBnQiACADQWBxQSBqIgQgACAESxsiAE8NByAAQQBODQILEAIAC0H/////ByEAIANB/////wdPDQULIAhBADYCCCAIQgA3AwAgCCAAEJ8BIAYoAgwhBCAIIAgoAgQiByAGKAIQIgBBH3FqIABBYHFqIgM2AgQgB0UEQCADQQFrIQUMAwsgA0EBayIFIAdBAWtzQR9LDQIgCCgCACEKDAMLQZUlQeEXQSJB3BcQCwALEFgACyAIKAIAIgogBUEFdkEAIANBIU8bQQJ0akEANgIACyAKIAdBA3ZB/P///wFxaiEDAkAgB0EfcSIHRQRAIABBAEwNASAAQSBtIQUgAEEfakE/TwRAIAMgBCAFQQJ0EDMaCyAAIAVBBXRrIgBBAEwNASADIAVBAnQiBWoiAyADKAIAQX9BICAAa3YiAEF/c3EgBCAFaigCACAAcXI2AgAMAQsgAEEATA0AQX8gB3QhDEEgIAdrIQkgAEEgTgRAIAxBf3MhDSADKAIAIQUDQCADIAUgDXEgBCgCACIFIAd0cjYCACADIAMoAgQgDHEgBSAJdnIiBTYCBCAEQQRqIQQgA0EEaiEDIABBP0shDiAAQSBrIQAgDg0ACyAAQQBMDQELIAMgAygCAEF/IAkgCSAAIAAgCUobIgVrdiAMcUF/c3EgBCgCAEF/QSAgAGt2cSIEIAd0cjYCACAAIAVrIgBBAEwNACADIAUgB2pBA3ZB/P///wFxaiIDIAMoAgBBf0EgIABrdkF/c3EgBCAFdnI2AgALIAYoAgwhACAGIAo2AgwgBiAIKAIEIgM2AhAgBiAIKAIINgIUIABFDQAgABAjIAYoAhAhAwsgBiADQQFqNgIQIAYoAgwgA0EDdkH8////AXFqIgAgACgCAEF+IAN3cTYCACABLwAAIQMLIANBB3EgC0EEdHJBCHIhAwsgASADOwAAIAhBEGokAAuPAQIBfwF9IwBBEGsiAyQAIANBCGogAEHoAGogAEHUAEHWACABQf4BcUECRhtqLwEAIgEgAC8BWCABQQdxGxAfQwAAwH8hBAJAAkACQCADLQAMQQFrDgIAAQILIAMqAgghBAwBCyADKgIIIAKUQwrXIzyUIQQLIANBEGokACAEQwAAAACXQwAAAAAgBCAEWxsL2AICBH8BfSMAQSBrIgMkAAJAIAAoAgwiAQRAIAAgACoClAMgACoCmAMgAREnACIFIAVbDQEgA0GqHjYCACAAQQVB2CUgAxAsECQACyADQRBqIAAQMgJAIAMoAhAiAiADKAIUIgFyRQ0AAkADQCABIAIoAuwDIAIoAugDIgJrQQJ1SQRAIAIgAUECdGooAgAiASgC3AMNAyABLwAVIAEtABdBEHRyIgJBgOAAcUGAwABHBEAgAkEIdkEPcSICBH8gAgUgAC0AFUEEdgtBBUYEQCAALQAUQQhxDQQLIAEtAABBAnENAyAEIAEgBBshBAsgA0EQahAuIAMoAhQiASADKAIQIgJyDQEMAwsLEAIACyABIQQLIAMoAhgiAQRAA0AgASgCACECIAEQIyACIgENAAsLIARFBEAgACoCmAMhBQwBCyAEEE4gBCoCoAOSIQULIANBIGokACAFC6EDAQh/AkAgACgC6AMiBSAAKALsAyIHRwRAA0AgACAFKAIAIgIoAuQDRwRAAkAgACgC9AMoAgAiAQRAIAIgACAGIAERBgAiAQ0BC0GIBBAeIgEgAigCEDYCECABIAIpAgg3AgggASACKQIANwIAIAFBFGogAkEUakHoABArGiABQgA3AoABIAFB/ABqIgNBADsBACABQgA3AogBIAFCADcCkAEgAyACQfwAahCgASABQZgBaiACQZgBakHQAhArGiABQQA2AvADIAFCADcC6AMgAigC7AMiAyACKALoAyIERwRAIAMgBGsiBEEASA0FIAEgBBAeIgM2AuwDIAEgAzYC6AMgASADIARqNgLwAyACKALoAyIEIAIoAuwDIghHBEADQCADIAQoAgA2AgAgA0EEaiEDIARBBGoiBCAIRw0ACwsgASADNgLsAwsgASACKQL0AzcC9AMgASACKAKEBDYChAQgASACKQL8AzcC/AMgAUEANgLkAwsgBSABNgIAIAEgADYC5AMLIAZBAWohBiAFQQRqIgUgB0cNAAsLDwsQAgALUAACQAJAAkACQAJAIAIOBAQAAQIDCyAAIAEgAUEwahBDDwsgACABIAFBMGogAxBEDwsgACABIAFBMGoQQg8LECQACyAAIAEgAUEwaiADEEULcAIBfwF9IwBBEGsiBCQAIARBCGogACABQQJ0QdwlaigCACACEDZDAADAfyEFAkACQAJAIAQtAAxBAWsOAgABAgsgBCoCCCEFDAELIAQqAgggA5RDCtcjPJQhBQsgBEEQaiQAIAVDAAAAACAFIAVbGwt5AgF/AX0jAEEQayIDJAAgA0EIaiAAIAFBAnRB7CVqKAIAIAIQU0MAAMB/IQQCQAJAAkAgAy0ADEEBaw4CAAECCyADKgIIIQQMAQsgAyoCCEMAAAAAlEMK1yM8lCEECyADQRBqJAAgBEMAAAAAl0MAAAAAIAQgBFsbC1QAAkACQAJAAkACQCACDgQEAAECAwsgACABIAFBwgBqEEMPCyAAIAEgAUHCAGogAxBEDwsgACABIAFBwgBqEEIPCxAkAAsgACABIAFBwgBqIAMQRQsvACAAIAJFQQF0IgIgASADEGAgACACIAEQS5IgACACIAEgAxB/IAAgAiABEFKSkgvOAQIDfwJ9IwBBEGsiAyQAQQEhBCADQQhqIABB/ABqIgUgACABQQF0akH2AGoiAS8BABAfAkACQCADKgIIIgcgAioCACIGXARAIAcgB1sEQCACLQAEIQIMAgsgBiAGXCEECyACLQAEIQIgBEUNACADLQAMIAJB/wFxRg0BCyAFIAEgBiACEDkDQCAALQAAIgFBBHENASAAIAFBBHI6AAAgACgCECIBBEAgACABEQAACyAAQYCAgP4HNgKcASAAKALkAyIADQALCyADQRBqJAALzgECA38CfSMAQRBrIgMkAEEBIQQgA0EIaiAAQfwAaiIFIAAgAUEBdGpB8gBqIgEvAQAQHwJAAkAgAyoCCCIHIAIqAgAiBlwEQCAHIAdbBEAgAi0ABCECDAILIAYgBlwhBAsgAi0ABCECIARFDQAgAy0ADCACQf8BcUYNAQsgBSABIAYgAhA5A0AgAC0AACIBQQRxDQEgACABQQRyOgAAIAAoAhAiAQRAIAAgAREAAAsgAEGAgID+BzYCnAEgACgC5AMiAA0ACwsgA0EQaiQACwoAIABBMGtBCkkLBQAQAgALBAAgAAsUACAABEAgACAAKAIAKAIEEQAACwsrAQF/IAAoAgwiAQRAIAEQIwsgACgCACIBBEAgACABNgIEIAEQIwsgABAjC4EEAQN/IwBBEGsiAyQAIABCADcCBCAAQcEgOwAVIABCADcCDCAAQoCAgICAgIACNwIYIAAgAC0AF0HgAXE6ABcgACAALQAAQeABcUEFcjoAACAAIAAtABRBgAFxOgAUIABBIGpBAEHOABAqGiAAQgA3AXIgAEGEgBA2AW4gAEEANgF6IABCADcCgAEgAEIANwKIASAAQgA3ApABIABCADcCoAEgAEKAgICAgICA4P8ANwKYASAAQQA6AKgBIABBrAFqQQBBxAEQKhogAEHwAmohBCAAQbABaiECA0AgAkKAgID8i4CAwL9/NwIQIAJCgYCAgBA3AgggAkKAgID8i4CAwL9/NwIAIAJBGGoiAiAERw0ACyAAQoCAgPyLgIDAv383AvACIABCgICA/IuAgMC/fzcCgAMgAEKBgICAEDcC+AIgAEKAgID+h4CA4P8ANwKUAyAAQoCAgP6HgIDg/wA3AowDIABBiANqIgIgAi0AAEH4AXE6AAAgAEGcA2pBAEHYABAqGiAAQQA6AIQEIABBgICA/gc2AoAEIABBADoA/AMgAEGAgID+BzYC+AMgACABNgL0AyABBEAgAS0ACEEBcQRAIAAgAC0AFEHzAXFBCHI6ABQgACAALwAVQfD/A3FBBHI7ABULIANBEGokACAADwsgA0GiGjYCACADEHIQJAALMwAgACABQQJ0QfwlaigCAEECdGoqApQDIABBFGoiACABQQEgAhAiIAAgAUEBIAIQIZKSC44DAQp/IwBB0AJrIgEkACAAKALoAyIDIAAoAuwDIgVHBEAgAUGMAmohBiABQeABaiEHIAFBIGohCCABQRxqIQkgAUEQaiEEA0AgAygCACICLQAXQRB0QYCAMHFBgIAgRgRAIAFBCGpBAEHEAhAqGiABQYCAgP4HNgIMIARBADoACCAEQgA3AgAgCUEAQcQBECoaIAghAANAIABCgICA/IuAgMC/fzcCECAAQoGAgIAQNwIIIABCgICA/IuAgMC/fzcCACAAQRhqIgAgB0cNAAsgAUKAgID8i4CAwL9/NwPwASABQoGAgIAQNwPoASABQoCAgPyLgIDAv383A+ABIAFCgICA/oeAgOD/ADcChAIgAUKAgID+h4CA4P8ANwL8ASABIAEtAPgBQfgBcToA+AEgBkEAQcAAECoaIAJBmAFqIAFBCGpBxAIQKxogAkIANwKMAyACIAItAAAiAEEBciIKQfsBcSAKIABBBHEbOgAAIAIQTyACEF4LIANBBGoiAyAFRw0ACwsgAUHQAmokAAtMAQF/QQEhAQJAIAAtAB5BB3ENACAALQAiQQdxDQAgAC0ALkEHcQ0AIAAtACpBB3ENACAALQAmQQdxDQAgAC0AKEEHcUEARyEBCyABC3YCAX8BfSMAQRBrIgQkACAEQQhqIAAgAUECdEHcJWooAgAgAhBQQwAAwH8hBQJAAkACQCAELQAMQQFrDgIAAQILIAQqAgghBQwBCyAEKgIIIAOUQwrXIzyUIQULIARBEGokACAFQwAAAACXQwAAAAAgBSAFWxsLogQCBn8CfgJ/QQghBAJAAkAgAEFHSw0AA0BBCCAEIARBCE0bIQRB6DopAwAiBwJ/QQggAEEDakF8cSAAQQhNGyIAQf8ATQRAIABBA3ZBAWsMAQsgAEEdIABnIgFrdkEEcyABQQJ0a0HuAGogAEH/H00NABpBPyAAQR4gAWt2QQJzIAFBAXRrQccAaiIBIAFBP08bCyIDrYgiCFBFBEADQCAIIAh6IgiIIQcCfiADIAinaiIDQQR0IgJB6DJqKAIAIgEgAkHgMmoiBkcEQCABIAQgABBjIgUNBSABKAIEIgUgASgCCDYCCCABKAIIIAU2AgQgASAGNgIIIAEgAkHkMmoiAigCADYCBCACIAE2AgAgASgCBCABNgIIIANBAWohAyAHQgGIDAELQeg6Qeg6KQMAQn4gA62JgzcDACAHQgGFCyIIQgBSDQALQeg6KQMAIQcLAkAgB1BFBEBBPyAHeadrIgZBBHQiAkHoMmooAgAhAQJAIAdCgICAgARUDQBB4wAhAyABIAJB4DJqIgJGDQADQCADRQ0BIAEgBCAAEGMiBQ0FIANBAWshAyABKAIIIgEgAkcNAAsgAiEBCyAAQTBqEGQNASABRQ0EIAEgBkEEdEHgMmoiAkYNBANAIAEgBCAAEGMiBQ0EIAEoAggiASACRw0ACwwECyAAQTBqEGRFDQMLQQAhBSAEIARBAWtxDQEgAEFHTQ0ACwsgBQwBC0EACwtwAgF/AX0jAEEQayIEJAAgBEEIaiAAIAFBAnRB7CVqKAIAIAIQKEMAAMB/IQUCQAJAAkAgBC0ADEEBaw4CAAECCyAEKgIIIQUMAQsgBCoCCCADlEMK1yM8lCEFCyAEQRBqJAAgBUMAAAAAIAUgBVsbC6ADAQN/IAEgAEEEaiIEakEBa0EAIAFrcSIFIAJqIAAgACgCACIBakEEa00EfyAAKAIEIgMgACgCCDYCCCAAKAIIIAM2AgQgBCAFRwRAIAAgAEEEaygCAEF+cWsiAyAFIARrIgQgAygCAGoiBTYCACAFQXxxIANqQQRrIAU2AgAgACAEaiIAIAEgBGsiATYCAAsCQCABIAJBGGpPBEAgACACakEIaiIDIAEgAmtBCGsiATYCACABQXxxIANqQQRrIAFBAXI2AgAgAwJ/IAMoAgBBCGsiAUH/AE0EQCABQQN2QQFrDAELIAFnIQQgAUEdIARrdkEEcyAEQQJ0a0HuAGogAUH/H00NABpBPyABQR4gBGt2QQJzIARBAXRrQccAaiIBIAFBP08bCyIBQQR0IgRB4DJqNgIEIAMgBEHoMmoiBCgCADYCCCAEIAM2AgAgAygCCCADNgIEQeg6Qeg6KQMAQgEgAa2GhDcDACAAIAJBCGoiATYCACABQXxxIABqQQRrIAE2AgAMAQsgACABakEEayABNgIACyAAQQRqBSADCwvmAwEFfwJ/QbAwKAIAIgEgAEEHakF4cSIDaiECAkAgA0EAIAEgAk8bDQAgAj8AQRB0SwRAIAIQFkUNAQtBsDAgAjYCACABDAELQfw7QTA2AgBBfwsiAkF/RwRAIAAgAmoiA0EQayIBQRA2AgwgAUEQNgIAAkACf0HgOigCACIABH8gACgCCAVBAAsgAkYEQCACIAJBBGsoAgBBfnFrIgRBBGsoAgAhBSAAIAM2AghBcCAEIAVBfnFrIgAgACgCAGpBBGstAABBAXFFDQEaIAAoAgQiAyAAKAIINgIIIAAoAgggAzYCBCAAIAEgAGsiATYCAAwCCyACQRA2AgwgAkEQNgIAIAIgAzYCCCACIAA2AgRB4DogAjYCAEEQCyACaiIAIAEgAGsiATYCAAsgAUF8cSAAakEEayABQQFyNgIAIAACfyAAKAIAQQhrIgFB/wBNBEAgAUEDdkEBawwBCyABQR0gAWciA2t2QQRzIANBAnRrQe4AaiABQf8fTQ0AGkE/IAFBHiADa3ZBAnMgA0EBdGtBxwBqIgEgAUE/TxsLIgFBBHQiA0HgMmo2AgQgACADQegyaiIDKAIANgIIIAMgADYCACAAKAIIIAA2AgRB6DpB6DopAwBCASABrYaENwMACyACQX9HC80BAgN/An0jAEEQayIDJABBASEEIANBCGogAEH8AGoiBSAAIAFBAXRqQSBqIgEvAQAQHwJAAkAgAyoCCCIHIAIqAgAiBlwEQCAHIAdbBEAgAi0ABCECDAILIAYgBlwhBAsgAi0ABCECIARFDQAgAy0ADCACQf8BcUYNAQsgBSABIAYgAhA5A0AgAC0AACIBQQRxDQEgACABQQRyOgAAIAAoAhAiAQRAIAAgAREAAAsgAEGAgID+BzYCnAEgACgC5AMiAA0ACwsgA0EQaiQAC0ABAX8CQEGsOy0AAEEBcQRAQag7KAIAIQIMAQtBAUGAJxAMIQJBrDtBAToAAEGoOyACNgIACyACIAAgAUEAEBMLzQECA38CfSMAQRBrIgMkAEEBIQQgA0EIaiAAQfwAaiIFIAAgAUEBdGpBMmoiAS8BABAfAkACQCADKgIIIgcgAioCACIGXARAIAcgB1sEQCACLQAEIQIMAgsgBiAGXCEECyACLQAEIQIgBEUNACADLQAMIAJB/wFxRg0BCyAFIAEgBiACEDkDQCAALQAAIgFBBHENASAAIAFBBHI6AAAgACgCECIBBEAgACABEQAACyAAQYCAgP4HNgKcASAAKALkAyIADQALCyADQRBqJAALDwAgASAAKAIAaiACOQMACw0AIAEgACgCAGorAwALCwAgAARAIAAQIwsLxwECBH8CfSMAQRBrIgIkACACQQhqIABB/ABqIgQgAEEeaiIFLwEAEB9BASEDAkACQCACKgIIIgcgASoCACIGXARAIAcgB1sEQCABLQAEIQEMAgsgBiAGXCEDCyABLQAEIQEgA0UNACACLQAMIAFB/wFxRg0BCyAEIAUgBiABEDkDQCAALQAAIgFBBHENASAAIAFBBHI6AAAgACgCECIBBEAgACABEQAACyAAQYCAgP4HNgKcASAAKALkAyIADQALCyACQRBqJAALlgMCA34CfyAAvSICQjSIp0H/D3EiBEH/D0YEQCAARAAAAAAAAPA/oiIAIACjDwsgAkIBhiIBQoCAgICAgIDw/wBYBEAgAEQAAAAAAAAAAKIgACABQoCAgICAgIDw/wBRGw8LAn4gBEUEQEEAIQQgAkIMhiIBQgBZBEADQCAEQQFrIQQgAUIBhiIBQgBZDQALCyACQQEgBGuthgwBCyACQv////////8Hg0KAgICAgICACIQLIQEgBEH/B0oEQANAAkAgAUKAgICAgICACH0iA0IAUw0AIAMiAUIAUg0AIABEAAAAAAAAAACiDwsgAUIBhiEBIARBAWsiBEH/B0oNAAtB/wchBAsCQCABQoCAgICAgIAIfSIDQgBTDQAgAyIBQgBSDQAgAEQAAAAAAAAAAKIPCyABQv////////8HWARAA0AgBEEBayEEIAFCgICAgICAgARUIQUgAUIBhiEBIAUNAAsLIAJCgICAgICAgICAf4MgAUKAgICAgICACH0gBK1CNIaEIAFBASAEa62IIARBAEobhL8LiwEBA38DQCAAQQR0IgFB5DJqIAFB4DJqIgI2AgAgAUHoMmogAjYCACAAQQFqIgBBwABHDQALQTAQZBpBmDtBBjYCAEGcO0EANgIAEJwBQZw7Qcg7KAIANgIAQcg7QZg7NgIAQcw7QcMBNgIAQdA7QQA2AgAQjwFB0DtByDsoAgA2AgBByDtBzDs2AgALjwEBAn8jAEEQayIEJAACfUMAAAAAIAAvABVBgOAAcUUNABogBEEIaiAAQRRqIgBBASACQQJGQQF0IAFB/gFxQQJHGyIFIAIQNgJAIAQtAAxFDQAgBEEIaiAAIAUgAhA2IAQtAAxBA0YNACAAIAEgAiADEIEBDAELIAAgASACIAMQgAGMCyEDIARBEGokACADC4QBAQJ/AkACQCAAKALoAyICIAAoAuwDIgNGDQADQCACKAIAIAFGDQEgAkEEaiICIANHDQALDAELIAIgA0YNACABLQAXQRB0QYCAMHFBgIAgRgRAIAAgACgC4ANBAWs2AuADCyACIAJBBGoiASADIAFrEDMaIAAgA0EEazYC7ANBAQ8LQQALCwBByDEgACABEEkLPAAgAEUEQCACQQVHQQAgAhtFBEBBuDAgAyAEEEkaDwsgAyAEEHAaDwsgACABIAIgAyAEIAAoAgQRDQAaCyYBAX8jAEEQayIBJAAgASAANgIMQbgwQdglIAAQSRogAUEQaiQAC4cDAwN/BXwCfSAAKgKgA7siBiACoCECIAAqApwDuyIHIAGgIQggACgC9AMqAhgiC0MAAAAAXARAIAAqApADuyEJIAAqAowDIQwgACAHIAu7IgFBACAALQAAQRBxIgNBBHYiBBA0OAKcAyAAIAYgAUEAIAQQNDgCoAMgASAMuyIHohBsIgYgBmIiBEUgBplELUMc6+I2Gj9jcUUEQCAEIAZEAAAAAAAA8L+gmUQtQxzr4jYaP2NFciEFCyACIAmgIQogCCAHoCEHAn8gASAJohBsIgYgBmIiBEUEQEEAIAaZRC1DHOviNho/Yw0BGgsgBCAGRAAAAAAAAPC/oJlELUMc6+I2Gj9jRXILIQQgACAHIAEgA0EARyIDIAVxIAMgBUEBc3EQNCAIIAFBACADEDSTOAKMAyAAIAogASADIARxIAMgBEEBc3EQNCACIAFBACADEDSTOAKQAwsgACgC6AMiAyAAKALsAyIARwRAA0AgAygCACAIIAIQcyADQQRqIgMgAEcNAAsLC1UBAX0gAEEUaiIAIAEgAkECSSICIAQgBRA1IQYgACABIAIgBCAFEC0iBUMAAAAAYCADIAVecQR9IAUFIAZDAAAAAGBFBEAgAw8LIAYgAyADIAZdGwsLeAEBfwJAIAAoAgAiAgRAA0AgAUUNAiACIAEoAgQ2AgQgAiABKAIINgIIIAEoAgAhASAAKAIAIQAgAigCACICDQALCyAAIAEQPA8LAkAgAEUNACAAKAIAIgFFDQAgAEEANgIAA0AgASgCACEAIAEQIyAAIgENAAsLC5kCAgZ/AX0gAEEUaiEHQQMhBCAALQAUQQJ2QQNxIQUCQAJ/AkAgAUEBIAAoAuQDGyIIQQJGBEACQCAFQQJrDgIEAAILQQIhBAwDC0ECIQRBACAFQQFLDQEaCyAECyEGIAUhBAsgACAEIAggAyACIARBAkkiBRsQbiEKIAAgBiAIIAIgAyAFGxBuIQMgAEGcA2oiAEEBIAFBAkZBAXQiCCAFG0ECdGogCiAHIAQgASACECKSOAIAIABBAyABQQJHQQF0IgkgBRtBAnRqIAogByAEIAEgAhAhkjgCACAAIAhBASAGQQF2IgQbQQJ0aiADIAcgBiABIAIQIpI4AgAgACAJQQMgBBtBAnRqIAMgByAGIAEgAhAhkjgCAAvUAgEDfyMAQdACayIBJAAgAUEIakEAQcQCECoaIAFBADoAGCABQgA3AxAgAUGAgID+BzYCDCABQRxqQQBBxAEQKhogAUHgAWohAyABQSBqIQIDQCACQoCAgPyLgIDAv383AhAgAkKBgICAEDcCCCACQoCAgPyLgIDAv383AgAgAkEYaiICIANHDQALIAFCgICA/IuAgMC/fzcD8AEgAUKBgICAEDcD6AEgAUKAgID8i4CAwL9/NwPgASABQoCAgP6HgIDg/wA3AoQCIAFCgICA/oeAgOD/ADcC/AEgASABLQD4AUH4AXE6APgBIAFBjAJqQQBBwAAQKhogAEGYAWogAUEIakHEAhArGiAAQgA3AowDIAAgAC0AAEEBcjoAACAAEE8gACgC6AMiAiAAKALsAyIARwRAA0AgAigCABB3IAJBBGoiAiAARw0ACwsgAUHQAmokAAuuAgIKfwJ9IwBBIGsiASQAIAFBgAI7AB4gAEHuAGohByAAQfgDaiEFIABB8gBqIQggAEH2AGohCSAAQfwAaiEDQQAhAANAIAFBEGogAyAJIAFBHmogBGotAAAiAkEBdCIEaiIGLwEAEB8CQAJAIAEtABRFDQAgAUEIaiADIAYvAQAQHyABIAMgBCAIai8BABAfIAEtAAwgAS0ABEcNAAJAIAEqAggiDCAMXCIKIAEqAgAiCyALXHJFBEAgDCALk4tDF7fROF0NAQwCCyAKRSALIAtbcg0BCyABQRBqIAMgBi8BABAfDAELIAFBEGogAyAEIAdqLwEAEB8LIAUgAkEDdGoiAiABLQAUOgAEIAIgASgCEDYCAEEBIQQgACECQQEhACACRQ0ACyABQSBqJAALMgACf0EAIAAvABVBgOAAcUGAwABGDQAaQQEgABA7QwAAAABcDQAaIAAQQEMAAAAAXAsLewEBfSADIASTIgMgA1sEfUMAAAAAIABBFGoiACABIAIgBSAGEDUiByAEkyAHIAdcGyIHQ///f38gACABIAIgBSAGEC0iBSAEkyAFIAVcGyIEIAMgAyAEXhsiAyADIAddGyAHIAMgAyADXBsgAyADWyAHIAdbcRsFIAMLC98FAwR/BX0BfCAJQwAAAABdIAhDAAAAAF1yBH8gDQUgBSESIAEhEyADIRQgByERIAwqAhgiFUMAAAAAXARAIAG7IBW7IhZBAEEAEDQhEyADuyAWQQBBABA0IRQgBbsgFkEAQQAQNCESIAe7IBZBAEEAEDQhEQsCf0EAIAAgBEcNABogEiATk4tDF7fROF0gEyATXCINIBIgElxyRQ0AGkEAIBIgElsNABogDQshDAJAIAIgBkcNACAUIBRcIg0gESARXHJFBEAgESAUk4tDF7fROF0hDwwBCyARIBFbDQAgDSEPC0EBIQ5BASENAkAgDA0AIAEgCpMhAQJAIABFBEAgASABXCIAIAggCFxyRQRAQQAhDCABIAiTi0MXt9E4XUUNAgwDC0EAIQwgCCAIWw0BIAANAgwBCyAAQQJGIQwgAEECRw0AIARBAUcNACABIAhgDQECQCAIIAhcIgAgASABXHJFBEAgASAIk4tDF7fROF1FDQEMAwtBACENIAEgAVsNAkEBIQ0gAA0CC0EAIQ0MAQtBACENIAggCFwiACABIAVdRXINACAMRSABIAFcIhAgBSAFXHIgBEECR3JyDQBBASENIAEgCGANAEEAIQ0gACAQcg0AIAEgCJOLQxe30ThdIQ0LAkAgDw0AIAMgC5MhAQJAAkAgAkUEQCABIAFcIgIgCSAJXHJFBEBBACEAIAEgCZOLQxe30ThdRQ0CDAQLQQAhACAJIAlbDQEgAg0DDAELIAJBAkYhACACQQJHIAZBAUdyDQAgASAJYARADAMLIAkgCVwiACABIAFcckUEQCABIAmTi0MXt9E4XUUNAgwDC0EAIQ4gASABWw0CQQEhDiAADQIMAQsgCSAJXCICIAEgB11Fcg0AIABFIAEgAVwiBCAHIAdcciAGQQJHcnINACABIAlgDQFBACEOIAIgBHINASABIAmTi0MXt9E4XSEODAELQQAhDgsgDSAOcQsL4wEBA38jAEEQayIBJAACQAJAIAAtABRBCHFFDQBBASEDIAAvABVB8AFxQdAARg0AIAEgABAyIAEoAgQhAAJAIAEoAgAiAkUEQEEAIQMgAEUNAQsDQCACKALsAyACKALoAyICa0ECdSAATQ0DIAIgAEECdGooAgAiAC8AFSAALQAXQRB0ciIAQYDgAHFBgMAARyAAQYAecUGACkZxIgMNASABEC4gASgCBCIAIAEoAgAiAnINAAsLIAEoAggiAEUNAANAIAAoAgAhAiAAECMgAiIADQALCyABQRBqJAAgAw8LEAIAC7IBAQR/AkACQCAAKAIEIgMgACgCACIEKALsAyAEKALoAyIBa0ECdUkEQCABIANBAnRqIQIDQCACKAIAIgEtABdBEHRBgIAwcUGAgCBHDQMgASgC7AMgASgC6ANGDQJBDBAeIgIgBDYCBCACIAM2AgggAiAAKAIINgIAQQAhAyAAQQA2AgQgACABNgIAIAAgAjYCCCABIQQgASgC6AMiAiABKALsA0cNAAsLEAIACyAAEC4LC4wQAgx/B30jAEEgayINJAAgDUEIaiABEDIgDSgCCCIOIA0oAgwiDHIEQCADQQEgAxshFSAAQRRqIRQgBUEBaiEWA0ACQAJAAn8CQAJAAkACQAJAIAwgDigC7AMgDigC6AMiDmtBAnVJBEAgDiAMQQJ0aigCACILLwAVIAstABdBEHRyIgxBgIAwcUGAgBBGDQgCQAJAIAxBDHZBA3EOAwEKAAoLIAkhFyAKIRogASgC9AMtABRBBHFFBEAgACoClAMgFEECQQEQMCAUQQJBARAvkpMhFyAAKgKYAyAUQQBBARAwIBRBAEEBEC+SkyEaCyALQRRqIQ8gAS0AFEECdkEDcSEQAkACfwJAIANBAkciE0UEQEEAIQ5BAyEMAkAgEEECaw4CBAACC0ECIQwMAwtBAiEMQQAgEEEBSw0BGgsgDAshDiAQIQwLIA9BAkEBIBcQIiAPQQJBASAXECGSIR0gD0EAQQEgFxAiIRwgD0EAQQEgFxAhIRsgCyoC+AMhGAJAAkACQAJAIAstAPwDQQFrDgIBAAILIBggF5RDCtcjPJQhGAsgGEMAAAAAYEUNACAdIAsgA0EAIBcgFxAxkiEYDAELIA1BGGogDyALQTJqIhAgAxBFQwAAwH8hGCANLQAcRQ0AIA1BGGogDyAQIAMQRCANLQAcRQ0AIA1BGGogDyAQIAMQRSANLQAcQQNGDQAgDUEYaiAPIBAgAxBEIA0tABxBA0YNACALQQIgAyAAKgKUAyAUQQIgAxBLIBRBAiADEFKSkyAPQQIgAyAXEFEgD0ECIAMgFxCDAZKTIBcgFxAlIRgLIBwgG5IhHCALKgKABCEZAkACQAJAIAstAIQEQQFrDgIBAAILIBkgGpRDCtcjPJQhGQsgGUMAAAAAYEUNACAcIAsgA0EBIBogFxAxkiEZDAMLIA1BGGogDyALQTJqIhAQQwJAIA0tABxFDQAgDUEYaiAPIBAQQiANLQAcRQ0AIA1BGGogDyAQEEMgDS0AHEEDRg0AIA1BGGogDyAQEEIgDS0AHEEDRg0AIAtBACADIAAqApgDIBRBACADEEsgFEEAIAMQUpKTIA9BACADIBoQUSAPQQAgAyAaEIMBkpMgGiAXECUhGQwDC0MAAMB/IRkgGCAYXA0GIAtB/ABqIhAgC0H6AGoiEi8BABAgIhsgG1sNAwwFCyALLQAAQQhxDQggCxBPIAAgCyACIAstABRBA3EiDCAVIAwbIAQgFiAGIAsqApwDIAeSIAsqAqADIAiSIAkgChB+IBFyIQxBACERIAxBAXFFDQhBASERIAsgCy0AAEEBcjoAAAwICxACAAsgGCAYXCAZIBlcRg0BIAtB/ABqIhAgC0H6AGoiEi8BABAgIhsgG1wNASAYIBhcBEAgGSAckyAQIAsvAXoQIJQgHZIhGAwCCyAZIBlbDQELIBwgGCAdkyAQIBIvAQAQIJWSIRkLIBggGFwNASAZIBlbDQMLQQAMAQtBAQshEiALIBcgGCACQQFHIAxBAklxIBdDAAAAAF5xIBJxIhAbIBkgA0ECIBIgEBsgGSAZXCAXIBpBAEEGIAQgBSAGED0aIAsqApQDIA9BAkEBIBcQIiAPQQJBASAXECGSkiEYIAsqApgDIA9BAEEBIBcQIiAPQQBBASAXECGSkiEZC0EBIRAgCyAYIBkgA0EAQQAgFyAaQQFBASAEIAUgBhA9GiAAIAEgCyADIAxBASAXIBoQggEgACABIAsgAyAOQQAgFyAaEIIBIBFBAXFFBEAgCy0AAEEBcSEQCyABLQAUIhJBAnZBA3EhDAJAAn8CQAJAAkACQAJAAkACQAJAAkACfwJAIBNFBEBBACERQQMhDiAMQQJrDgIDDQELQQIhDkEAIAxBAUsNARoLIA4LIREgEkEEcUUNBCASQQhxRQ0BIAwhDgsgASEMIA8QXw0BDAILAkAgCy0ANEEHcQ0AIAstADhBB3ENACALLQBCQQdxDQAgDCEOIAEhDCALQUBrLwEAQQdxRQ0CDAELIAwhDgsgACEMCwJ/AkACQAJAIA5BAWsOAwABAgULIAtBmANqIQ4gC0GoA2ohE0EBIRIgDEGYA2oMAgsgC0GUA2ohDiALQZwDaiETQQIhEiAMQZQDagwBCyALQZQDaiEOIAtBpANqIRNBACESIAxBlANqCyEMIAsgEkECdGogDCoCACAOKgIAkyATKgIAkzgCnAMLIBFBAXFFDQUCQAJAIBFBAnEEQCABIQwgDxBfDQEMAgsgCy0ANEEHcQ0AIAstADhBB3ENACALLQBCQQdxDQAgASEMIAtBQGsvAQBBB3FFDQELIAAhDAsgEUEBaw4DAQIDAAsQJAALIAtBmANqIREgC0GoA2ohDkEBIRMgDEGYA2oMAgsgC0GUA2ohESALQZwDaiEOQQIhEyAMQZQDagwBCyALQZQDaiERIAtBpANqIQ5BACETIAxBlANqCyEMIAsgE0ECdGogDCoCACARKgIAkyAOKgIAkzgCnAMLIAsqAqADIRsgCyoCnAMgB0MAAAAAIA8QXxuTIRcCfQJAIAstADRBB3ENACALLQA4QQdxDQAgCy0AQkEHcQ0AIAtBQGsvAQBBB3ENAEMAAAAADAELIAgLIRogCyAXOAKcAyALIBsgGpM4AqADIBAhEQsgDUEIahAuIA0oAgwiDCANKAIIIg5yDQALCyANKAIQIgwEQANAIAwoAgAhACAMECMgACIMDQALCyANQSBqJAAgEUEBcQt2AgF/AX0jAEEQayIEJAAgBEEIaiAAIAFBAnRB7CVqKAIAIAIQUEMAAMB/IQUCQAJAAkAgBC0ADEEBaw4CAAECCyAEKgIIIQUMAQsgBCoCCCADlEMK1yM8lCEFCyAEQRBqJAAgBUMAAAAAl0MAAAAAIAUgBVsbC3gCAX8BfSMAQRBrIgQkACAEQQhqIABBAyACQQJHQQF0IAFB/gFxQQJHGyACEDZDAADAfyEFAkACQAJAIAQtAAxBAWsOAgABAgsgBCoCCCEFDAELIAQqAgggA5RDCtcjPJQhBQsgBEEQaiQAIAVDAAAAACAFIAVbGwt4AgF/AX0jAEEQayIEJAAgBEEIaiAAQQEgAkECRkEBdCABQf4BcUECRxsgAhA2QwAAwH8hBQJAAkACQCAELQAMQQFrDgIAAQILIAQqAgghBQwBCyAEKgIIIAOUQwrXIzyUIQULIARBEGokACAFQwAAAAAgBSAFWxsLoA0BBH8jAEEQayIJJAAgCUEIaiACQRRqIgggA0ECRkEBdEEBIARB/gFxQQJGIgobIgsgAxA2IAYgByAKGyEHAkACQAJAAkACQAJAIAktAAxFDQAgCUEIaiAIIAsgAxA2IAktAAxBA0YNACAIIAQgAyAHEIEBIABBFGogBCADEDCSIAggBCADIAcQIpIhBkEBIQMCQAJ/AkACQAJAAkAgBA4EAgMBAAcLQQIhAwwBC0EAIQMLIAMgC0YNAgJAAkAgBA4EAgIAAQYLIABBlANqIQNBAAwCCyAAQZQDaiEDQQAMAQsgAEGYA2ohA0EBCyEAIAMqAgAgAiAAQQJ0aioClAOTIAaTIQYLIAIgBEECdEHcJWooAgBBAnRqIAY4ApwDDAULIAlBCGogCCADQQJHQQF0QQMgChsiCiADEDYCQCAJLQAMRQ0AIAlBCGogCCAKIAMQNiAJLQAMQQNGDQACfwJAAkACQCAEDgQCAgABBQsgAEGUA2ohBUEADAILIABBlANqIQVBAAwBCyAAQZgDaiEFQQELIQEgBSoCACACQZQDaiIFIAFBAnRqKgIAkyAAQRRqIAQgAxAvkyAIIAQgAyAHECGTIAggBCADIAcQgAGTIQZBASEDAkACfwJAAkACQAJAIAQOBAIDAQAHC0ECIQMMAQtBACEDCyADIAtGDQICQAJAIAQOBAICAAEGCyAAQZQDaiEDQQAMAgsgAEGUA2ohA0EADAELIABBmANqIQNBAQshACADKgIAIAUgAEECdGoqAgCTIAaTIQYLIAIgBEECdEHcJWooAgBBAnRqIAY4ApwDDAULAkACQAJAIAUEQCABLQAUQQR2QQdxIgBBBUsNCEEBIAB0IgBBMnENASAAQQlxBEAgBEECdEHcJWooAgAhACAIIAQgAyAGEEEgASAAQQJ0IgBqIgEqArwDkiEGIAAgAmogAigC9AMtABRBAnEEfSAGBSAGIAEqAswDkgs4ApwDDAkLIAEgBEECdEHsJWooAgBBAnRqIgAqArwDIAggBCADIAYQYpIhBiACKAL0Ay0AFEECcUUEQCAGIAAqAswDkiEGCwJAAkACQAJAIAQOBAEBAgAICyABKgKUAyACKgKUA5MhB0ECIQMMAgsgASoCmAMgAioCmAOTIQdBASEDAkAgBA4CAgAHC0EDIQMMAQsgASoClAMgAioClAOTIQdBACEDCyACIANBAnRqIAcgBpM4ApwDDAgLIAIvABZBD3EiBUUEQCABLQAVQQR2IQULIAVBBUYEQCABLQAUQQhxRQ0CCyABLwAVQYCAA3FBgIACRgRAIAVBAmsOAgEHAwsgBUEISw0HQQEgBXRB8wNxDQYgBUECRw0CC0EAIQACfQJ/AkACQAJAAkACfwJAAkACQCAEDgQCAgABBAsgASoClAMhB0ECIQAgAUG8A2oMAgsgASoClAMhByABQcQDagwBCyABKgKYAyEHAkACQCAEDgIAAQMLQQMhACABQcADagwBC0EBIQAgAUHIA2oLIQUgByAFKgIAkyABQbwDaiIIIABBAnRqKgIAkyIHIAIoAvQDLQAUQQJxDQUaAkAgBA4EAAIDBAELQQMhACABQdADagwECxAkAAtBASEAIAFB2ANqDAILQQIhACABQcwDagwBC0EAIQAgAUHUA2oLIQUgByAFKgIAkyABIABBAnRqKgLMA5MLIAIgBEECdCIFQfwlaigCAEECdGoqApQDIAJBFGoiACAEQQEgBhAiIAAgBEEBIAYQIZKSk0MAAAA/lCAIIAVB3CVqKAIAIgVBAnRqKgIAkiAAIAQgAyAGEEGSIQYgAiAFQQJ0aiACKAL0Ay0AFEECcQR9IAYFIAYgASAFQQJ0aioCzAOSCzgCnAMMBgsgAS8AFUGAgANxQYCAAkcNBAsgASAEQQJ0QewlaigCAEECdGoiACoCvAMgCCAEIAMgBhBikiEGIAIoAvQDLQAUQQJxRQRAIAYgACoCzAOSIQYLAkACQCAEDgQBAQMAAgsgASoClAMgAioClAOTIQdBAiEDDAMLIAEqApgDIAIqApgDkyEHQQEhAwJAIAQOAgMAAQtBAyEDDAILECQACyABKgKUAyACKgKUA5MhB0EAIQMLIAIgA0ECdGogByAGkzgCnAMMAQsgBEECdEHcJWooAgAhACAIIAQgAyAGEEEgASAAQQJ0IgBqIgEqArwDkiEGIAAgAmogAigC9AMtABRBAnEEfSAGBSAGIAEqAswDkgs4ApwDCyAJQRBqJAALcAIBfwF9IwBBEGsiBCQAIARBCGogACABQQJ0QewlaigCACACEDZDAADAfyEFAkACQAJAIAQtAAxBAWsOAgABAgsgBCoCCCEFDAELIAQqAgggA5RDCtcjPJQhBQsgBEEQaiQAIAVDAAAAACAFIAVbGwscACAAIAFBCCACpyACQiCIpyADpyADQiCIpxAVCwUAEFgACzkAIABFBEBBAA8LAn8gAUGAf3FBgL8DRiABQf8ATXJFBEBB/DtBGTYCAEF/DAELIAAgAToAAEEBCwvEAgACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCABQQlrDhIACgsMCgsCAwQFDAsMDAoLBwgJCyACIAIoAgAiAUEEajYCACAAIAEoAgA2AgAPCwALIAIgAigCACIBQQRqNgIAIAAgATIBADcDAA8LIAIgAigCACIBQQRqNgIAIAAgATMBADcDAA8LIAIgAigCACIBQQRqNgIAIAAgATAAADcDAA8LIAIgAigCACIBQQRqNgIAIAAgATEAADcDAA8LAAsgAiACKAIAQQdqQXhxIgFBCGo2AgAgACABKwMAOQMADwsgACACIAMRAQALDwsgAiACKAIAIgFBBGo2AgAgACABNAIANwMADwsgAiACKAIAIgFBBGo2AgAgACABNQIANwMADwsgAiACKAIAQQdqQXhxIgFBCGo2AgAgACABKQMANwMAC84BAgN/An0jAEEQayIDJABBASEEIANBCGogAEH8AGoiBSAAIAFBAXRqQegAaiIBLwEAEB8CQAJAIAMqAggiByACKgIAIgZcBEAgByAHWwRAIAItAAQhAgwCCyAGIAZcIQQLIAItAAQhAiAERQ0AIAMtAAwgAkH/AXFGDQELIAUgASAGIAIQOQNAIAAtAAAiAUEEcQ0BIAAgAUEEcjoAACAAKAIQIgEEQCAAIAERAAALIABBgICA/gc2ApwBIAAoAuQDIgANAAsLIANBEGokAAtdAQR/IAAoAgAhAgNAIAIsAAAiAxBXBEBBfyEEIAAgAkEBaiICNgIAIAFBzJmz5gBNBH9BfyADQTBrIgMgAUEKbCIEaiADIARB/////wdzShsFIAQLIQEMAQsLIAELrhQCEn8BfiMAQdAAayIIJAAgCCABNgJMIAhBN2ohFyAIQThqIRQCQAJAAkACQANAIAEhDSAHIA5B/////wdzSg0BIAcgDmohDgJAAkACQCANIgctAAAiCQRAA0ACQAJAIAlB/wFxIgFFBEAgByEBDAELIAFBJUcNASAHIQkDQCAJLQABQSVHBEAgCSEBDAILIAdBAWohByAJLQACIQogCUECaiIBIQkgCkElRg0ACwsgByANayIHIA5B/////wdzIhhKDQcgAARAIAAgDSAHECYLIAcNBiAIIAE2AkwgAUEBaiEHQX8hEgJAIAEsAAEiChBXRQ0AIAEtAAJBJEcNACABQQNqIQcgCkEwayESQQEhFQsgCCAHNgJMQQAhDAJAIAcsAAAiCUEgayIBQR9LBEAgByEKDAELIAchCkEBIAF0IgFBidEEcUUNAANAIAggB0EBaiIKNgJMIAEgDHIhDCAHLAABIglBIGsiAUEgTw0BIAohB0EBIAF0IgFBidEEcQ0ACwsCQCAJQSpGBEACfwJAIAosAAEiARBXRQ0AIAotAAJBJEcNACABQQJ0IARqQcABa0EKNgIAIApBA2ohCUEBIRUgCiwAAUEDdCADakGAA2soAgAMAQsgFQ0GIApBAWohCSAARQRAIAggCTYCTEEAIRVBACETDAMLIAIgAigCACIBQQRqNgIAQQAhFSABKAIACyETIAggCTYCTCATQQBODQFBACATayETIAxBgMAAciEMDAELIAhBzABqEIkBIhNBAEgNCCAIKAJMIQkLQQAhB0F/IQsCfyAJLQAAQS5HBEAgCSEBQQAMAQsgCS0AAUEqRgRAAn8CQCAJLAACIgEQV0UNACAJLQADQSRHDQAgAUECdCAEakHAAWtBCjYCACAJQQRqIQEgCSwAAkEDdCADakGAA2soAgAMAQsgFQ0GIAlBAmohAUEAIABFDQAaIAIgAigCACIKQQRqNgIAIAooAgALIQsgCCABNgJMIAtBf3NBH3YMAQsgCCAJQQFqNgJMIAhBzABqEIkBIQsgCCgCTCEBQQELIQ8DQCAHIRFBHCEKIAEiECwAACIHQfsAa0FGSQ0JIBBBAWohASAHIBFBOmxqQf8qai0AACIHQQFrQQhJDQALIAggATYCTAJAAkAgB0EbRwRAIAdFDQsgEkEATgRAIAQgEkECdGogBzYCACAIIAMgEkEDdGopAwA3A0AMAgsgAEUNCCAIQUBrIAcgAiAGEIcBDAILIBJBAE4NCgtBACEHIABFDQcLIAxB//97cSIJIAwgDEGAwABxGyEMQQAhEkGPCSEWIBQhCgJAAkACQAJ/AkACQAJAAkACfwJAAkACQAJAAkACQAJAIBAsAAAiB0FfcSAHIAdBD3FBA0YbIAcgERsiB0HYAGsOIQQUFBQUFBQUFA4UDwYODg4UBhQUFBQCBQMUFAkUARQUBAALAkAgB0HBAGsOBw4UCxQODg4ACyAHQdMARg0JDBMLIAgpA0AhGUGPCQwFC0EAIQcCQAJAAkACQAJAAkACQCARQf8BcQ4IAAECAwQaBQYaCyAIKAJAIA42AgAMGQsgCCgCQCAONgIADBgLIAgoAkAgDqw3AwAMFwsgCCgCQCAOOwEADBYLIAgoAkAgDjoAAAwVCyAIKAJAIA42AgAMFAsgCCgCQCAOrDcDAAwTC0EIIAsgC0EITRshCyAMQQhyIQxB+AAhBwsgFCENIAgpA0AiGVBFBEAgB0EgcSEQA0AgDUEBayINIBmnQQ9xQZAvai0AACAQcjoAACAZQg9WIQkgGUIEiCEZIAkNAAsLIAxBCHFFIAgpA0BQcg0DIAdBBHZBjwlqIRZBAiESDAMLIBQhByAIKQNAIhlQRQRAA0AgB0EBayIHIBmnQQdxQTByOgAAIBlCB1YhDSAZQgOIIRkgDQ0ACwsgByENIAxBCHFFDQIgCyAUIA1rIgdBAWogByALSBshCwwCCyAIKQNAIhlCAFMEQCAIQgAgGX0iGTcDQEEBIRJBjwkMAQsgDEGAEHEEQEEBIRJBkAkMAQtBkQlBjwkgDEEBcSISGwshFiAZIBQQRyENCyAPQQAgC0EASBsNDiAMQf//e3EgDCAPGyEMIAgpA0AiGUIAUiALckUEQCAUIQ1BACELDAwLIAsgGVAgFCANa2oiByAHIAtIGyELDAsLQQAhDAJ/Qf////8HIAsgC0H/////B08bIgoiEUEARyEQAkACfwJAAkAgCCgCQCIHQY4lIAcbIg0iD0EDcUUgEUVyDQADQCAPLQAAIgxFDQIgEUEBayIRQQBHIRAgD0EBaiIPQQNxRQ0BIBENAAsLIBBFDQICQCAPLQAARSARQQRJckUEQANAIA8oAgAiB0F/cyAHQYGChAhrcUGAgYKEeHENAiAPQQRqIQ8gEUEEayIRQQNLDQALCyARRQ0DC0EADAELQQELIRADQCAQRQRAIA8tAAAhDEEBIRAMAQsgDyAMRQ0CGiAPQQFqIQ8gEUEBayIRRQ0BQQAhEAwACwALQQALIgcgDWsgCiAHGyIHIA1qIQogC0EATgRAIAkhDCAHIQsMCwsgCSEMIAchCyAKLQAADQ0MCgsgCwRAIAgoAkAMAgtBACEHIABBICATQQAgDBApDAILIAhBADYCDCAIIAgpA0A+AgggCCAIQQhqIgc2AkBBfyELIAcLIQlBACEHAkADQCAJKAIAIg1FDQEgCEEEaiANEIYBIgpBAEgiDSAKIAsgB2tLckUEQCAJQQRqIQkgCyAHIApqIgdLDQEMAgsLIA0NDQtBPSEKIAdBAEgNCyAAQSAgEyAHIAwQKSAHRQRAQQAhBwwBC0EAIQogCCgCQCEJA0AgCSgCACINRQ0BIAhBBGogDRCGASINIApqIgogB0sNASAAIAhBBGogDRAmIAlBBGohCSAHIApLDQALCyAAQSAgEyAHIAxBgMAAcxApIBMgByAHIBNIGyEHDAgLIA9BACALQQBIGw0IQT0hCiAAIAgrA0AgEyALIAwgByAFERwAIgdBAE4NBwwJCyAIIAgpA0A8ADdBASELIBchDSAJIQwMBAsgBy0AASEJIAdBAWohBwwACwALIAANByAVRQ0CQQEhBwNAIAQgB0ECdGooAgAiAARAIAMgB0EDdGogACACIAYQhwFBASEOIAdBAWoiB0EKRw0BDAkLC0EBIQ4gB0EKTw0HA0AgBCAHQQJ0aigCAA0BIAdBAWoiB0EKRw0ACwwHC0EcIQoMBAsgCyAKIA1rIhAgCyAQShsiCSASQf////8Hc0oNAkE9IQogEyAJIBJqIgsgCyATSBsiByAYSg0DIABBICAHIAsgDBApIAAgFiASECYgAEEwIAcgCyAMQYCABHMQKSAAQTAgCSAQQQAQKSAAIA0gEBAmIABBICAHIAsgDEGAwABzECkMAQsLQQAhDgwDC0E9IQoLQfw7IAo2AgALQX8hDgsgCEHQAGokACAOC9kCAQR/IwBB0AFrIgUkACAFIAI2AswBIAVBoAFqIgJBAEEoECoaIAUgBSgCzAE2AsgBAkBBACABIAVByAFqIAVB0ABqIAIgAyAEEIoBQQBIBEBBfyEEDAELQQEgBiAAKAJMQQBOGyEGIAAoAgAhByAAKAJIQQBMBEAgACAHQV9xNgIACwJ/AkACQCAAKAIwRQRAIABB0AA2AjAgAEEANgIcIABCADcDECAAKAIsIQggACAFNgIsDAELIAAoAhANAQtBfyAAEJ0BDQEaCyAAIAEgBUHIAWogBUHQAGogBUGgAWogAyAEEIoBCyECIAgEQCAAQQBBACAAKAIkEQYAGiAAQQA2AjAgACAINgIsIABBADYCHCAAKAIUIQEgAEIANwMQIAJBfyABGyECCyAAIAAoAgAiACAHQSBxcjYCAEF/IAIgAEEgcRshBCAGRQ0ACyAFQdABaiQAIAQLfwIBfwF+IAC9IgNCNIinQf8PcSICQf8PRwR8IAJFBEAgASAARAAAAAAAAAAAYQR/QQAFIABEAAAAAAAA8EOiIAEQjAEhACABKAIAQUBqCzYCACAADwsgASACQf4HazYCACADQv////////+HgH+DQoCAgICAgIDwP4S/BSAACwsVACAARQRAQQAPC0H8OyAANgIAQX8LzgECA38CfSMAQRBrIgMkAEEBIQQgA0EIaiAAQfwAaiIFIAAgAUEBdGpBxABqIgEvAQAQHwJAAkAgAyoCCCIHIAIqAgAiBlwEQCAHIAdbBEAgAi0ABCECDAILIAYgBlwhBAsgAi0ABCECIARFDQAgAy0ADCACQf8BcUYNAQsgBSABIAYgAhA5A0AgAC0AACIBQQRxDQEgACABQQRyOgAAIAAoAhAiAQRAIAAgAREAAAsgAEGAgID+BzYCnAEgACgC5AMiAA0ACwsgA0EQaiQAC9EDAEHUO0GoHBAcQdU7QYoWQQFBAUEAEBtB1jtB/RJBAUGAf0H/ABAEQdc7QfYSQQFBgH9B/wAQBEHYO0H0EkEBQQBB/wEQBEHZO0GUCkECQYCAfkH//wEQBEHaO0GLCkECQQBB//8DEARB2ztBsQpBBEGAgICAeEH/////BxAEQdw7QagKQQRBAEF/EARB3TtB+BhBBEGAgICAeEH/////BxAEQd47Qe8YQQRBAEF/EARB3ztBjxBCgICAgICAgICAf0L///////////8AEIQBQeA7QY4QQgBCfxCEAUHhO0GIEEEEEA1B4jtB9BtBCBANQeM7QaQZEA5B5DtBmSIQDkHlO0EEQZcZEAhB5jtBAkGwGRAIQec7QQRBvxkQCEHoO0GPFhAaQek7QQBB1CEQAUHqO0EAQboiEAFB6ztBAUHyIRABQew7QQJB5B4QAUHtO0EDQYMfEAFB7jtBBEGrHxABQe87QQVByB8QAUHwO0EEQd8iEAFB8TtBBUH9IhABQeo7QQBBriAQAUHrO0EBQY0gEAFB7DtBAkHwIBABQe07QQNBziAQAUHuO0EEQbMhEAFB7ztBBUGRIRABQfI7QQZB7h8QAUHzO0EHQaQjEAELJQAgAEH0JjYCACAALQAEBEAgACgCCEH9DxBmCyAAKAIIEAYgAAsDAAALJQAgAEHsJzYCACAALQAEBEAgACgCCEH9DxBmCyAAKAIIEAYgAAs3AQJ/QQQQHiICIAE2AgBBBBAeIgMgATYCAEGjOyAAQeI7QfooQcEBIAJB4jtB/ihBwgEgAxAHCzcBAX8gASAAKAIEIgNBAXVqIQEgACgCACEAIAEgAiADQQFxBH8gASgCACAAaigCAAUgAAsRBQALOQEBfyABIAAoAgQiBEEBdWohASAAKAIAIQAgASACIAMgBEEBcQR/IAEoAgAgAGooAgAFIAALEQMACwkAIAEgABEAAAsHACAAEQ4ACzUBAX8gASAAKAIEIgJBAXVqIQEgACgCACEAIAEgAkEBcQR/IAEoAgAgAGooAgAFIAALEQAACzABAX8jAEEQayICJAAgAiABNgIIIAJBCGogABECACEAIAIoAggQBiACQRBqJAAgAAsMACABIAAoAgARAAALCQAgAEEBOgAEC9coAQJ/QaA7QaE7QaI7QQBBjCZBB0GPJkEAQY8mQQBB2RZBkSZBCBAFQQgQHiIAQoiAgIAQNwMAQaA7QZcbQQZBoCZBuCZBCSAAQQEQAEGkO0GlO0GmO0GgO0GMJkEKQYwmQQtBjCZBDEG4EUGRJkENEAVBBBAeIgBBDjYCAEGkO0HoFEECQcAmQcgmQQ8gAEEAEABBoDtBowxBAkHMJkHUJkEQQREQA0GgO0GAHEEDQaQnQbAnQRJBExADQbg7Qbk7Qbo7QQBBjCZBFEGPJkEAQY8mQQBB6RZBkSZBFRAFQQgQHiIAQoiAgIAQNwMAQbg7QegcQQJBuCdByCZBFiAAQQEQAEG7O0G8O0G9O0G4O0GMJkEXQYwmQRhBjCZBGUHPEUGRJkEaEAVBBBAeIgBBGzYCAEG7O0HoFEECQcAnQcgmQRwgAEEAEABBuDtBowxBAkHIJ0HUJkEdQR4QA0G4O0GAHEEDQaQnQbAnQRJBHxADQb47Qb87QcA7QQBBjCZBIEGPJkEAQY8mQQBB2hpBkSZBIRAFQb47QQFB+CdBjCZBIkEjEA9BvjtBkBtBAUH4J0GMJkEiQSMQA0G+O0HpCEECQfwnQcgmQSRBJRADQQgQHiIAQQA2AgQgAEEmNgIAQb47Qa0cQQRBkChBoChBJyAAQQAQAEEIEB4iAEEANgIEIABBKDYCAEG+O0GkEUEDQagoQbQoQSkgAEEAEABBCBAeIgBBADYCBCAAQSo2AgBBvjtByB1BA0G8KEHIKEErIABBABAAQQgQHiIAQQA2AgQgAEEsNgIAQb47QaYQQQNB0ChByChBLSAAQQAQAEEIEB4iAEEANgIEIABBLjYCAEG+O0HLHEEDQdwoQbAnQS8gAEEAEABBCBAeIgBBADYCBCAAQTA2AgBBvjtB0h1BAkHoKEHUJkExIABBABAAQQgQHiIAQQA2AgQgAEEyNgIAQb47QZcQQQJB8ChB1CZBMyAAQQAQAEHBO0GECkH4KEE0QZEmQTUQCkHiD0EAEEhB6g5BCBBIQYITQRAQSEHxFUEYEEhBgxdBIBBIQfAOQSgQSEHBOxAJQaM7Qf8aQfgoQTZBkSZBNxAKQYMXQQAQkwFB8A5BCBCTAUGjOxAJQcI7QYobQfgoQThBkSZBORAKQQQQHiIAQQg2AgBBBBAeIgFBCDYCAEHCO0GEG0HiO0H6KEE6IABB4jtB/ihBOyABEAdBBBAeIgBBADYCAEEEEB4iAUEANgIAQcI7QeUOQds7QdQmQTwgAEHbO0HIKEE9IAEQB0HCOxAJQcM7QcQ7QcU7QQBBjCZBPkGPJkEAQY8mQQBB+xtBkSZBPxAFQcM7QQFBhClBjCZBwABBwQAQD0HDO0HXDkEBQYQpQYwmQcAAQcEAEANBwztB0BpBAkGIKUHUJkHCAEHDABADQcM7QekIQQJBkClByCZBxABBxQAQA0EIEB4iAEEANgIEIABBxgA2AgBBwztB9w9BAkGQKUHIJkHHACAAQQAQAEEIEB4iAEEANgIEIABByAA2AgBBwztB6htBA0GYKUHIKEHJACAAQQAQAEEIEB4iAEEANgIEIABBygA2AgBBwztBnxtBA0GkKUHIKEHLACAAQQAQAEEIEB4iAEEANgIEIABBzAA2AgBBwztB0BRBBEGwKUHAKUHNACAAQQAQAEEIEB4iAEEANgIEIABBzgA2AgBBwztBiA1BBEGwKUHAKUHNACAAQQAQAEEIEB4iAEEANgIEIABBzwA2AgBBwztB3RNBA0GkKUHIKEHLACAAQQAQAEEIEB4iAEEANgIEIABB0AA2AgBBwztB+QtBA0GkKUHIKEHLACAAQQAQAEEIEB4iAEEANgIEIABB0QA2AgBBwztBuBBBA0GkKUHIKEHLACAAQQAQAEEIEB4iAEEANgIEIABB0gA2AgBBwztB5RpBA0GkKUHIKEHLACAAQQAQAEEIEB4iAEEANgIEIABB0wA2AgBBwztB/BRBA0GkKUHIKEHLACAAQQAQAEEIEB4iAEEANgIEIABB1AA2AgBBwztBlRNBA0GkKUHIKEHLACAAQQAQAEEIEB4iAEEANgIEIABB1QA2AgBBwztBtQpBA0GkKUHIKEHLACAAQQAQAEEIEB4iAEEANgIEIABB1gA2AgBBwztBuBVBBEGwKUHAKUHNACAAQQAQAEEIEB4iAEEANgIEIABB1wA2AgBBwztBmw1BBEGwKUHAKUHNACAAQQAQAEEIEB4iAEEANgIEIABB2AA2AgBBwztB7RNBA0GkKUHIKEHLACAAQQAQAEEIEB4iAEEANgIEIABB2QA2AgBBwztBxAlBA0GkKUHIKEHLACAAQQAQAEEIEB4iAEEANgIEIABB2gA2AgBBwztB8QhBA0GkKUHIKEHLACAAQQAQAEEIEB4iAEEANgIEIABB2wA2AgBBwztBhwlBA0HIKUH+KEHcACAAQQAQAEEIEB4iAEEANgIEIABB3QA2AgBBwztB1BBBA0HIKUH+KEHcACAAQQAQAEEIEB4iAEEANgIEIABB3gA2AgBBwztB5gxBA0HIKUH+KEHcACAAQQAQAEEIEB4iAEEANgIEIABB3wA2AgBBwztBzBNBAkGQKUHIJkHHACAAQQAQAEEIEB4iAEEANgIEIABB4AA2AgBBwztBrAlBA0HIKUH+KEHcACAAQQAQAEEIEB4iAEEANgIEIABB4QA2AgBBwztBnxZBA0HIKUH+KEHcACAAQQAQAEEIEB4iAEEANgIEIABB4gA2AgBBwztBoRdBA0HIKUH+KEHcACAAQQAQAEEIEB4iAEEANgIEIABB4wA2AgBBwztBvw1BA0HIKUH+KEHcACAAQQAQAEEIEB4iAEEANgIEIABB5AA2AgBBwztB+xNBAkGQKUHIJkHHACAAQQAQAEEIEB4iAEEANgIEIABB5QA2AgBBwztBkQ9BA0HIKUH+KEHcACAAQQAQAEEIEB4iAEEANgIEIABB5gA2AgBBwztBwQxBA0HIKUH+KEHcACAAQQAQAEEIEB4iAEEANgIEIABB5wA2AgBBwztBvhNBAkGQKUHIJkHHACAAQQAQAEEIEB4iAEEANgIEIABB6AA2AgBBwztBsxdBA0HIKUH+KEHcACAAQQAQAEEIEB4iAEEANgIEIABB6QA2AgBBwztBzw1BA0HIKUH+KEHcACAAQQAQAEEIEB4iAEEANgIEIABB6gA2AgBBwztBpQ9BA0HIKUH+KEHcACAAQQAQAEEIEB4iAEEANgIEIABB6wA2AgBBwztB0gxBA0HIKUH+KEHcACAAQQAQAEEIEB4iAEEANgIEIABB7AA2AgBBwztBiRdBA0HIKUH+KEHcACAAQQAQAEEIEB4iAEEANgIEIABB7QA2AgBBwztBrA1BA0HIKUH+KEHcACAAQQAQAEEIEB4iAEEANgIEIABB7gA2AgBBwztB9w5BA0HIKUH+KEHcACAAQQAQAEEIEB4iAEEANgIEIABB7wA2AgBBwztBrQxBA0HIKUH+KEHcACAAQQAQAEEIEB4iAEEANgIEIABB8AA2AgBBwztB/RhBA0GkKUHIKEHLACAAQQAQAEEIEB4iAEEANgIEIABB8QA2AgBBwztBshRBA0HIKUH+KEHcACAAQQAQAEEIEB4iAEEANgIEIABB8gA2AgBBwztBlBJBBEGwKUHAKUHNACAAQQAQAEEIEB4iAEEANgIEIABB8wA2AgBBwztBzhlBBEGwKUHAKUHNACAAQQAQAEEIEB4iAEEANgIEIABB9AA2AgBBwztB4g1BBEGwKUHAKUHNACAAQQAQAEEIEB4iAEEANgIEIABB9QA2AgBBwztBrRNBBEGwKUHAKUHNACAAQQAQAEEIEB4iAEEANgIEIABB9gA2AgBBwztB+gxBBEGwKUHAKUHNACAAQQAQAEEIEB4iAEEANgIEIABB9wA2AgBBwztBnhVBA0GkKUHIKEHLACAAQQAQAEEIEB4iAEEANgIEIABB+AA2AgBBwztBrxtBAkHUKUHUJkH5ACAAQQAQAEEIEB4iAEEANgIEIABB+gA2AgBBwztB3BRBA0HcKUGwJ0H7ACAAQQAQAEEIEB4iAEEANgIEIABB/AA2AgBBwztBiQxBAkHUKUHUJkH5ACAAQQAQAEEIEB4iAEEANgIEIABB/QA2AgBBwztBxhBBAkHUKUHUJkH5ACAAQQAQAEEIEB4iAEEANgIEIABB/gA2AgBBwztB8hpBAkHUKUHUJkH5ACAAQQAQAEEIEB4iAEEANgIEIABB/wA2AgBBwztBjRVBAkHUKUHUJkH5ACAAQQAQAEEIEB4iAEEANgIEIABBgAE2AgBBwztBoRNBAkHUKUHUJkH5ACAAQQAQAEEIEB4iAEEANgIEIABBgQE2AgBBwztBxwpBAkHUKUHUJkH5ACAAQQAQAEEIEB4iAEEANgIEIABBggE2AgBBwztBwhVBA0HcKUGwJ0H7ACAAQQAQAEEIEB4iAEEANgIEIABBgwE2AgBBwztB4RBBAkHoKUHUJkGEASAAQQAQAEEIEB4iAEEANgIEIABBhQE2AgBBwztBuAlBAkHwKUH6KEGGASAAQQAQAEEIEB4iAEEANgIEIABBhwE2AgBBwztBrRZBAkHwKUH6KEGGASAAQQAQAEEIEB4iAEEANgIEIABBiAE2AgBBwztBqhdBAkHoKUHUJkGEASAAQQAQAEEIEB4iAEEANgIEIABBiQE2AgBBwztBmw9BAkHoKUHUJkGEASAAQQAQAEEIEB4iAEEANgIEIABBigE2AgBBwztBvxdBAkHoKUHUJkGEASAAQQAQAEEIEB4iAEEANgIEIABBiwE2AgBBwztBsg9BAkHoKUHUJkGEASAAQQAQAEEIEB4iAEEANgIEIABBjAE2AgBBwztBlRdBAkHoKUHUJkGEASAAQQAQAEEIEB4iAEEANgIEIABBjQE2AgBBwztBhA9BAkHoKUHUJkGEASAAQQAQAEEIEB4iAEEANgIEIABBjgE2AgBBwztBihlBAkHUKUHUJkH5ACAAQQAQAEEIEB4iAEEANgIEIABBjwE2AgBBwztBwRRBAkHwKUH6KEGGASAAQQAQAEEIEB4iAEEANgIEIABBkAE2AgBBwztBnhJBA0H4KUGEKkGRASAAQQAQAEEIEB4iAEEANgIEIABBkgE2AgBBwztB0AlBAkHUKUHUJkH5ACAAQQAQAEEIEB4iAEEANgIEIABBkwE2AgBBwztB/AhBAkHUKUHUJkH5ACAAQQAQAEEIEB4iAEEANgIEIABBlAE2AgBBwztB2RlBA0HcKUGwJ0H7ACAAQQAQAEEIEB4iAEEANgIEIABBlQE2AgBBwztBtBNBA0GMKkGYKkGWASAAQQAQAEEIEB4iAEEANgIEIABBlwE2AgBBwztBhxxBBEGgKkGgKEGYASAAQQAQAEEIEB4iAEEANgIEIABBmQE2AgBBwztBnBxBA0GwKkHIKEGaASAAQQAQAEEIEB4iAEEANgIEIABBmwE2AgBBwztBmgpBAkG8KkHUJkGcASAAQQAQAEEIEB4iAEEANgIEIABBnQE2AgBBwztBmQxBAkHEKkHUJkGeASAAQQAQAEEIEB4iAEEANgIEIABBnwE2AgBBwztBkxxBA0HMKkGwJ0GgASAAQQAQAEEIEB4iAEEANgIEIABBoQE2AgBBwztBuxZBA0HYKkHIKEGiASAAQQAQAEEIEB4iAEEANgIEIABBowE2AgBBwztBvxtBAkHkKkHUJkGkASAAQQAQAEEIEB4iAEEANgIEIABBpQE2AgBBwztB0xtBA0HYKkHIKEGiASAAQQAQAEEIEB4iAEEANgIEIABBpgE2AgBBwztBqB1BA0HsKkHIKEGnASAAQQAQAEEIEB4iAEEANgIEIABBqAE2AgBBwztBph1BAkGQKUHIJkHHACAAQQAQAEEIEB4iAEEANgIEIABBqQE2AgBBwztBuR1BA0H4KkHIKEGqASAAQQAQAEEIEB4iAEEANgIEIABBqwE2AgBBwztBtx1BAkGQKUHIJkHHACAAQQAQAEEIEB4iAEEANgIEIABBrAE2AgBBwztB3whBAkGQKUHIJkHHACAAQQAQAEEIEB4iAEEANgIEIABBrQE2AgBBwztB1whBAkGEK0HUJkGuASAAQQAQAEEIEB4iAEEANgIEIABBrwE2AgBBwztB3hVBAkGQKUHIJkHHACAAQQAQAEEIEB4iAEEANgIEIABBsAE2AgBBwztB3AlBAkGEK0HUJkGuASAAQQAQAEEIEB4iAEEANgIEIABBsQE2AgBBwztB6QlBBUGQK0GkK0GyASAAQQAQAEEIEB4iAEEANgIEIABBswE2AgBBwztB5w9BAkHwKUH6KEGGASAAQQAQAEEIEB4iAEEANgIEIABBtAE2AgBBwztB0Q9BAkHwKUH6KEGGASAAQQAQAEEIEB4iAEEANgIEIABBtQE2AgBBwztBhhNBAkHwKUH6KEGGASAAQQAQAEEIEB4iAEEANgIEIABBtgE2AgBBwztB+BVBAkHwKUH6KEGGASAAQQAQAEEIEB4iAEEANgIEIABBtwE2AgBBwztByxdBAkHwKUH6KEGGASAAQQAQAEEIEB4iAEEANgIEIABBuAE2AgBBwztBvw9BAkHwKUH6KEGGASAAQQAQAEEIEB4iAEEANgIEIABBuQE2AgBBwztB+QlBAkGsK0HUJkG6ASAAQQAQAEEIEB4iAEEANgIEIABBuwE2AgBBwztBzBVBA0H4KUGEKkGRASAAQQAQAEEIEB4iAEEANgIEIABBvAE2AgBBwztBqBJBA0H4KUGEKkGRASAAQQAQAEEIEB4iAEEANgIEIABBvQE2AgBBwztB5BlBA0H4KUGEKkGRASAAQQAQAEEIEB4iAEEANgIEIABBvgE2AgBBwztBqxVBAkHUKUHUJkH5ACAAQQAQAAtZAQF/IAAgACgCSCIBQQFrIAFyNgJIIAAoAgAiAUEIcQRAIAAgAUEgcjYCAEF/DwsgAEIANwIEIAAgACgCLCIBNgIcIAAgATYCFCAAIAEgACgCMGo2AhBBAAtHAAJAIAFBA00EfyAAIAFBAnRqQQRqBSABQQRrIgEgACgCGCIAKAIEIAAoAgAiAGtBAnVPDQEgACABQQJ0agsoAgAPCxACAAs4AQF/IAFBAEgEQBACAAsgAUEBa0EFdkEBaiIBQQJ0EB4hAiAAIAE2AgggAEEANgIEIAAgAjYCAAvSBQEJfyAAIAEvAQA7AQAgACABKQIENwIEIAAgASkCDDcCDCAAIAEoAhQ2AhQCQAJAIAEoAhgiA0UNAEEYEB4iBUEANgIIIAVCADcCACADKAIEIgEgAygCACICRwRAIAEgAmsiAkEASA0CIAUgAhAeIgE2AgAgBSABIAJqNgIIIAMoAgAiAiADKAIEIgZHBEADQCABIAIoAgA2AgAgAUEEaiEBIAJBBGoiAiAGRw0ACwsgBSABNgIECyAFQgA3AgwgBUEANgIUIAMoAhAiAUUNACAFQQxqIAEQnwEgAygCDCEGIAUgBSgCECIEIAMoAhAiAkEfcWogAkFgcWoiATYCEAJAAkAgBEUEQCABQQFrIQMMAQsgAUEBayIDIARBAWtzQSBJDQELIAUoAgwgA0EFdkEAIAFBIU8bQQJ0akEANgIACyAFKAIMIARBA3ZB/P///wFxaiEBIARBH3EiA0UEQCACQQBMDQEgAkEgbSEDIAJBH2pBP08EQCABIAYgA0ECdBAzGgsgAiADQQV0ayICQQBMDQEgASADQQJ0IgNqIgEgASgCAEF/QSAgAmt2IgFBf3NxIAMgBmooAgAgAXFyNgIADAELIAJBAEwNAEF/IAN0IQhBICADayEEIAJBIE4EQCAIQX9zIQkgASgCACEHA0AgASAHIAlxIAYoAgAiByADdHI2AgAgASABKAIEIAhxIAcgBHZyIgc2AgQgBkEEaiEGIAFBBGohASACQT9LIQogAkEgayECIAoNAAsgAkEATA0BCyABIAEoAgBBfyAEIAQgAiACIARKGyIEa3YgCHFBf3NxIAYoAgBBf0EgIAJrdnEiBiADdHI2AgAgAiAEayICQQBMDQAgASADIARqQQN2Qfz///8BcWoiASABKAIAQX9BICACa3ZBf3NxIAYgBHZyNgIACyAAKAIYIQEgACAFNgIYIAEEQCABEFsLDwsQAgALvQMBB38gAARAIwBBIGsiBiQAIAAoAgAiASgC5AMiAwRAIAMgARBvGiABQQA2AuQDCyABKALsAyICIAEoAugDIgNHBEBBASACIANrQQJ1IgIgAkEBTRshBEEAIQIDQCADIAJBAnRqKAIAQQA2AuQDIAJBAWoiAiAERw0ACwsgASADNgLsAwJAIAMgAUHwA2oiAigCAEYNACAGQQhqQQBBACACEEoiAigCBCABKALsAyABKALoAyIEayIFayIDIAQgBRAzIQUgASgC6AMhBCABIAU2AugDIAIgBDYCBCABKALsAyEFIAEgAigCCDYC7AMgAiAFNgIIIAEoAvADIQcgASACKAIMNgLwAyACIAQ2AgAgAiAHNgIMIAQgBUcEQCACIAUgBCAFa0EDakF8cWo2AggLIARFDQAgBBAnIAEoAugDIQMLIAMEQCABIAM2AuwDIAMQJwsgASgClAEhAyABQQA2ApQBIAMEQCADEFsLIAEQJyAAKAIIIQEgAEEANgIIIAEEQCABIAEoAgAoAgQRAAALIAAoAgQhASAAQQA2AgQgAQRAIAEgASgCACgCBBEAAAsgBkEgaiQAIAAQIwsLtQEBAX8jAEEQayICJAACfyABBEAgASgCACEBQYgEEB4gARBcIAENARogAkH3GTYCACACEHIQJAALQZQ7LQAARQRAQfg6QQM2AgBBiDtCgICAgICAgMA/NwIAQYA7QgA3AgBBlDtBAToAAEH8OkH8Oi0AAEH+AXE6AABB9DpBADYCAEGQO0EANgIAC0GIBBAeQfQ6EFwLIQEgAEIANwIEIAAgATYCACABIAA2AgQgAkEQaiQAIAALGwEBfyAABEAgACgCACIBBEAgARAjCyAAECMLC0kBAn9BBBAeIQFBIBAeIgBBADYCHCAAQoCAgICAgIDAPzcCFCAAQgA3AgwgAEEAOgAIIABBAzYCBCAAQQA2AgAgASAANgIAIAELIAAgAkEFR0EAIAIbRQRAQbgwIAMgBBBJDwsgAyAEEHALIgEBfiABIAKtIAOtQiCGhCAEIAARFQAiBUIgiKckASAFpwuoAQEFfyAAKAJUIgMoAgAhBSADKAIEIgQgACgCFCAAKAIcIgdrIgYgBCAGSRsiBgRAIAUgByAGECsaIAMgAygCACAGaiIFNgIAIAMgAygCBCAGayIENgIECyAEIAIgAiAESxsiBARAIAUgASAEECsaIAMgAygCACAEaiIFNgIAIAMgAygCBCAEazYCBAsgBUEAOgAAIAAgACgCLCIBNgIcIAAgATYCFCACCwQAQgALBABBAAuKBQIGfgJ/IAEgASgCAEEHakF4cSIBQRBqNgIAIAAhCSABKQMAIQMgASkDCCEGIwBBIGsiCCQAAkAgBkL///////////8AgyIEQoCAgICAgMCAPH0gBEKAgICAgIDA/8MAfVQEQCAGQgSGIANCPIiEIQQgA0L//////////w+DIgNCgYCAgICAgIAIWgRAIARCgYCAgICAgIDAAHwhAgwCCyAEQoCAgICAgICAQH0hAiADQoCAgICAgICACFINASACIARCAYN8IQIMAQsgA1AgBEKAgICAgIDA//8AVCAEQoCAgICAgMD//wBRG0UEQCAGQgSGIANCPIiEQv////////8Dg0KAgICAgICA/P8AhCECDAELQoCAgICAgID4/wAhAiAEQv///////7//wwBWDQBCACECIARCMIinIgBBkfcASQ0AIAMhAiAGQv///////z+DQoCAgICAgMAAhCIFIQcCQCAAQYH3AGsiAUHAAHEEQCACIAFBQGqthiEHQgAhAgwBCyABRQ0AIAcgAa0iBIYgAkHAACABa62IhCEHIAIgBIYhAgsgCCACNwMQIAggBzcDGAJAQYH4ACAAayIAQcAAcQRAIAUgAEFAaq2IIQNCACEFDAELIABFDQAgBUHAACAAa62GIAMgAK0iAoiEIQMgBSACiCEFCyAIIAM3AwAgCCAFNwMIIAgpAwhCBIYgCCkDACIDQjyIhCECIAgpAxAgCCkDGIRCAFKtIANC//////////8Pg4QiA0KBgICAgICAgAhaBEAgAkIBfCECDAELIANCgICAgICAgIAIUg0AIAJCAYMgAnwhAgsgCEEgaiQAIAkgAiAGQoCAgICAgICAgH+DhL85AwALmRgDEn8BfAN+IwBBsARrIgwkACAMQQA2AiwCQCABvSIZQgBTBEBBASERQZkJIRMgAZoiAb0hGQwBCyAEQYAQcQRAQQEhEUGcCSETDAELQZ8JQZoJIARBAXEiERshEyARRSEVCwJAIBlCgICAgICAgPj/AINCgICAgICAgPj/AFEEQCAAQSAgAiARQQNqIgMgBEH//3txECkgACATIBEQJiAAQe0VQdweIAVBIHEiBRtB4RpB4B4gBRsgASABYhtBAxAmIABBICACIAMgBEGAwABzECkgAyACIAIgA0gbIQoMAQsgDEEQaiESAkACfwJAIAEgDEEsahCMASIBIAGgIgFEAAAAAAAAAABiBEAgDCAMKAIsIgZBAWs2AiwgBUEgciIOQeEARw0BDAMLIAVBIHIiDkHhAEYNAiAMKAIsIQlBBiADIANBAEgbDAELIAwgBkEdayIJNgIsIAFEAAAAAAAAsEGiIQFBBiADIANBAEgbCyELIAxBMGpBoAJBACAJQQBOG2oiDSEHA0AgBwJ/IAFEAAAAAAAA8EFjIAFEAAAAAAAAAABmcQRAIAGrDAELQQALIgM2AgAgB0EEaiEHIAEgA7ihRAAAAABlzc1BoiIBRAAAAAAAAAAAYg0ACwJAIAlBAEwEQCAJIQMgByEGIA0hCAwBCyANIQggCSEDA0BBHSADIANBHU4bIQMCQCAHQQRrIgYgCEkNACADrSEaQgAhGQNAIAYgGUL/////D4MgBjUCACAahnwiG0KAlOvcA4AiGUKA7JSjDH4gG3w+AgAgBkEEayIGIAhPDQALIBmnIgZFDQAgCEEEayIIIAY2AgALA0AgCCAHIgZJBEAgBkEEayIHKAIARQ0BCwsgDCAMKAIsIANrIgM2AiwgBiEHIANBAEoNAAsLIANBAEgEQCALQRlqQQluQQFqIQ8gDkHmAEYhEANAQQlBACADayIDIANBCU4bIQoCQCAGIAhNBEAgCCgCACEHDAELQYCU69wDIAp2IRRBfyAKdEF/cyEWQQAhAyAIIQcDQCAHIAMgBygCACIXIAp2ajYCACAWIBdxIBRsIQMgB0EEaiIHIAZJDQALIAgoAgAhByADRQ0AIAYgAzYCACAGQQRqIQYLIAwgDCgCLCAKaiIDNgIsIA0gCCAHRUECdGoiCCAQGyIHIA9BAnRqIAYgBiAHa0ECdSAPShshBiADQQBIDQALC0EAIQMCQCAGIAhNDQAgDSAIa0ECdUEJbCEDQQohByAIKAIAIgpBCkkNAANAIANBAWohAyAKIAdBCmwiB08NAAsLIAsgA0EAIA5B5gBHG2sgDkHnAEYgC0EAR3FrIgcgBiANa0ECdUEJbEEJa0gEQEEEQaQCIAlBAEgbIAxqIAdBgMgAaiIKQQltIg9BAnRqQdAfayEJQQohByAPQXdsIApqIgpBB0wEQANAIAdBCmwhByAKQQFqIgpBCEcNAAsLAkAgCSgCACIQIBAgB24iDyAHbCIKRiAJQQRqIhQgBkZxDQAgECAKayEQAkAgD0EBcUUEQEQAAAAAAABAQyEBIAdBgJTr3ANHIAggCU9yDQEgCUEEay0AAEEBcUUNAQtEAQAAAAAAQEMhAQtEAAAAAAAA4D9EAAAAAAAA8D9EAAAAAAAA+D8gBiAURhtEAAAAAAAA+D8gECAHQQF2IhRGGyAQIBRJGyEYAkAgFQ0AIBMtAABBLUcNACAYmiEYIAGaIQELIAkgCjYCACABIBigIAFhDQAgCSAHIApqIgM2AgAgA0GAlOvcA08EQANAIAlBADYCACAIIAlBBGsiCUsEQCAIQQRrIghBADYCAAsgCSAJKAIAQQFqIgM2AgAgA0H/k+vcA0sNAAsLIA0gCGtBAnVBCWwhA0EKIQcgCCgCACIKQQpJDQADQCADQQFqIQMgCiAHQQpsIgdPDQALCyAJQQRqIgcgBiAGIAdLGyEGCwNAIAYiByAITSIKRQRAIAdBBGsiBigCAEUNAQsLAkAgDkHnAEcEQCAEQQhxIQkMAQsgA0F/c0F/IAtBASALGyIGIANKIANBe0pxIgkbIAZqIQtBf0F+IAkbIAVqIQUgBEEIcSIJDQBBdyEGAkAgCg0AIAdBBGsoAgAiDkUNAEEKIQpBACEGIA5BCnANAANAIAYiCUEBaiEGIA4gCkEKbCIKcEUNAAsgCUF/cyEGCyAHIA1rQQJ1QQlsIQogBUFfcUHGAEYEQEEAIQkgCyAGIApqQQlrIgZBACAGQQBKGyIGIAYgC0obIQsMAQtBACEJIAsgAyAKaiAGakEJayIGQQAgBkEAShsiBiAGIAtKGyELC0F/IQogC0H9////B0H+////ByAJIAtyIhAbSg0BIAsgEEEAR2pBAWohDgJAIAVBX3EiFUHGAEYEQCADIA5B/////wdzSg0DIANBACADQQBKGyEGDAELIBIgAyADQR91IgZzIAZrrSASEEciBmtBAUwEQANAIAZBAWsiBkEwOgAAIBIgBmtBAkgNAAsLIAZBAmsiDyAFOgAAIAZBAWtBLUErIANBAEgbOgAAIBIgD2siBiAOQf////8Hc0oNAgsgBiAOaiIDIBFB/////wdzSg0BIABBICACIAMgEWoiBSAEECkgACATIBEQJiAAQTAgAiAFIARBgIAEcxApAkACQAJAIBVBxgBGBEAgDEEQaiIGQQhyIQMgBkEJciEJIA0gCCAIIA1LGyIKIQgDQCAINQIAIAkQRyEGAkAgCCAKRwRAIAYgDEEQak0NAQNAIAZBAWsiBkEwOgAAIAYgDEEQaksNAAsMAQsgBiAJRw0AIAxBMDoAGCADIQYLIAAgBiAJIAZrECYgCEEEaiIIIA1NDQALIBAEQCAAQYwlQQEQJgsgC0EATCAHIAhNcg0BA0AgCDUCACAJEEciBiAMQRBqSwRAA0AgBkEBayIGQTA6AAAgBiAMQRBqSw0ACwsgACAGQQkgCyALQQlOGxAmIAtBCWshBiAIQQRqIgggB08NAyALQQlKIQMgBiELIAMNAAsMAgsCQCALQQBIDQAgByAIQQRqIAcgCEsbIQogDEEQaiIGQQhyIQMgBkEJciENIAghBwNAIA0gBzUCACANEEciBkYEQCAMQTA6ABggAyEGCwJAIAcgCEcEQCAGIAxBEGpNDQEDQCAGQQFrIgZBMDoAACAGIAxBEGpLDQALDAELIAAgBkEBECYgBkEBaiEGIAkgC3JFDQAgAEGMJUEBECYLIAAgBiALIA0gBmsiBiAGIAtKGxAmIAsgBmshCyAHQQRqIgcgCk8NASALQQBODQALCyAAQTAgC0ESakESQQAQKSAAIA8gEiAPaxAmDAILIAshBgsgAEEwIAZBCWpBCUEAECkLIABBICACIAUgBEGAwABzECkgBSACIAIgBUgbIQoMAQsgEyAFQRp0QR91QQlxaiELAkAgA0ELSw0AQQwgA2shBkQAAAAAAAAwQCEYA0AgGEQAAAAAAAAwQKIhGCAGQQFrIgYNAAsgCy0AAEEtRgRAIBggAZogGKGgmiEBDAELIAEgGKAgGKEhAQsgEUECciEJIAVBIHEhCCASIAwoAiwiByAHQR91IgZzIAZrrSASEEciBkYEQCAMQTA6AA8gDEEPaiEGCyAGQQJrIg0gBUEPajoAACAGQQFrQS1BKyAHQQBIGzoAACAEQQhxIQYgDEEQaiEHA0AgByIFAn8gAZlEAAAAAAAA4EFjBEAgAaoMAQtBgICAgHgLIgdBkC9qLQAAIAhyOgAAIAYgA0EASnJFIAEgB7ehRAAAAAAAADBAoiIBRAAAAAAAAAAAYXEgBUEBaiIHIAxBEGprQQFHckUEQCAFQS46AAEgBUECaiEHCyABRAAAAAAAAAAAYg0AC0F/IQpB/f///wcgCSASIA1rIgVqIgZrIANIDQAgAEEgIAIgBgJ/AkAgA0UNACAHIAxBEGprIghBAmsgA04NACADQQJqDAELIAcgDEEQamsiCAsiB2oiAyAEECkgACALIAkQJiAAQTAgAiADIARBgIAEcxApIAAgDEEQaiAIECYgAEEwIAcgCGtBAEEAECkgACANIAUQJiAAQSAgAiADIARBgMAAcxApIAMgAiACIANIGyEKCyAMQbAEaiQAIAoLRgEBfyAAKAI8IQMjAEEQayIAJAAgAyABpyABQiCIpyACQf8BcSAAQQhqEBQQjQEhAiAAKQMIIQEgAEEQaiQAQn8gASACGwu+AgEHfyMAQSBrIgMkACADIAAoAhwiBDYCECAAKAIUIQUgAyACNgIcIAMgATYCGCADIAUgBGsiATYCFCABIAJqIQVBAiEGIANBEGohAQJ/A0ACQAJAAkAgACgCPCABIAYgA0EMahAYEI0BRQRAIAUgAygCDCIHRg0BIAdBAE4NAgwDCyAFQX9HDQILIAAgACgCLCIBNgIcIAAgATYCFCAAIAEgACgCMGo2AhAgAgwDCyABIAcgASgCBCIISyIJQQN0aiIEIAcgCEEAIAkbayIIIAQoAgBqNgIAIAFBDEEEIAkbaiIBIAEoAgAgCGs2AgAgBSAHayEFIAYgCWshBiAEIQEMAQsLIABBADYCHCAAQgA3AxAgACAAKAIAQSByNgIAQQAgBkECRg0AGiACIAEoAgRrCyEEIANBIGokACAECwkAIAAoAjwQGQsjAQF/Qcg7KAIAIgAEQANAIAAoAgARCQAgACgCBCIADQALCwu/AgEFfyMAQeAAayICJAAgAiAANgIAIwBBEGsiAyQAIAMgAjYCDCMAQZABayIAJAAgAEGgL0GQARArIgAgAkEQaiIFIgE2AiwgACABNgIUIABB/////wdBfiABayIEIARB/////wdPGyIENgIwIAAgASAEaiIBNgIcIAAgATYCECAAQbsTIAJBAEEAEIsBGiAEBEAgACgCFCIBIAEgACgCEEZrQQA6AAALIABBkAFqJAAgA0EQaiQAAkAgBSIAQQNxBEADQCAALQAARQ0CIABBAWoiAEEDcQ0ACwsDQCAAIgFBBGohACABKAIAIgNBf3MgA0GBgoQIa3FBgIGChHhxRQ0ACwNAIAEiAEEBaiEBIAAtAAANAAsLIAAgBWtBAWoiABBhIgEEfyABIAUgABArBUEACyEAIAJB4ABqJAAgAAvFAQICfwF8IwBBMGsiBiQAIAEoAgghBwJAQbQ7LQAAQQFxBEBBsDsoAgAhAQwBC0EFQZAnEAwhAUG0O0EBOgAAQbA7IAE2AgALIAYgBTYCKCAGIAQ4AiAgBiADNgIYIAYgAjgCEAJ/IAEgB0GXGyAGQQxqIAZBEGoQEiIIRAAAAAAAAPBBYyAIRAAAAAAAAAAAZnEEQCAIqwwBC0EACyEBIAYoAgwhAyAAIAEpAwA3AwAgACABKQMINwMIIAMQESAGQTBqJAALCQAgABCQARAjCwwAIAAoAghB6BwQZgsJACAAEJIBECMLVQECfyMAQTBrIgIkACABIAAoAgQiA0EBdWohASAAKAIAIQAgAiABIANBAXEEfyABKAIAIABqKAIABSAACxEBAEEwEB4gAkEwECshACACQTBqJAAgAAs7AQF/IAEgACgCBCIFQQF1aiEBIAAoAgAhACABIAIgAyAEIAVBAXEEfyABKAIAIABqKAIABSAACxEdAAs3AQF/IAEgACgCBCIDQQF1aiEBIAAoAgAhACABIAIgA0EBcQR/IAEoAgAgAGooAgAFIAALERIACzcBAX8gASAAKAIEIgNBAXVqIQEgACgCACEAIAEgAiADQQFxBH8gASgCACAAaigCAAUgAAsRDAALNQEBfyABIAAoAgQiAkEBdWohASAAKAIAIQAgASACQQFxBH8gASgCACAAaigCAAUgAAsRCwALYQECfyMAQRBrIgIkACABIAAoAgQiA0EBdWohASAAKAIAIQAgAiABIANBAXEEfyABKAIAIABqKAIABSAACxEBAEEQEB4iACACKQMINwMIIAAgAikDADcDACACQRBqJAAgAAtjAQJ/IwBBEGsiAyQAIAEgACgCBCIEQQF1aiEBIAAoAgAhACADIAEgAiAEQQFxBH8gASgCACAAaigCAAUgAAsRAwBBEBAeIgAgAykDCDcDCCAAIAMpAwA3AwAgA0EQaiQAIAALNwEBfyABIAAoAgQiA0EBdWohASAAKAIAIQAgASACIANBAXEEfyABKAIAIABqKAIABSAACxEEAAs5AQF/IAEgACgCBCIEQQF1aiEBIAAoAgAhACABIAIgAyAEQQFxBH8gASgCACAAaigCAAUgAAsRCAALCQAgASAAEQIACwUAQcM7Cw8AIAEgACgCAGogAjYCAAsNACABIAAoAgBqKAIACxgBAX9BEBAeIgBCADcDCCAAQQA2AgAgAAsYAQF/QRAQHiIAQgA3AwAgAEIANwMIIAALDABBMBAeQQBBMBAqCzcBAX8gASAAKAIEIgNBAXVqIQEgACgCACEAIAEgAiADQQFxBH8gASgCACAAaigCAAUgAAsRHgALBQBBvjsLIQAgACABKAIAIAEgASwAC0EASBtBuzsgAigCABAQNgIACyoBAX9BDBAeIgFBADoABCABIAAoAgA2AgggAEEANgIAIAFB2Cc2AgAgAQsFAEG7OwsFAEG4OwshACAAIAEoAgAgASABLAALQQBIG0GkOyACKAIAEBA2AgAL2AEBBH8jAEEgayIDJAAgASgCACIEQfD///8HSQRAAkACQCAEQQtPBEAgBEEPckEBaiIFEB4hBiADIAVBgICAgHhyNgIQIAMgBjYCCCADIAQ2AgwgBCAGaiEFDAELIAMgBDoAEyADQQhqIgYgBGohBSAERQ0BCyAGIAFBBGogBBArGgsgBUEAOgAAIAMgAjYCACADQRhqIANBCGogAyAAEQMAIAMoAhgQHSADKAIYIgAQBiADKAIAEAYgAywAE0EASARAIAMoAggQIwsgA0EgaiQAIAAPCxACAAsqAQF/QQwQHiIBQQA6AAQgASAAKAIANgIIIABBADYCACABQeAmNgIAIAELBQBBpDsLaQECfyMAQRBrIgYkACABIAAoAgQiB0EBdWohASAAKAIAIQAgBiABIAIgAyAEIAUgB0EBcQR/IAEoAgAgAGooAgAFIAALERAAQRAQHiIAIAYpAwg3AwggACAGKQMANwMAIAZBEGokACAACwUAQaA7Cx0AIAAoAgAiACAALQAAQfcBcUEIQQAgARtyOgAAC6oBAgJ/AX0jAEEQayICJAAgACgCACEAIAFB/wFxIgNBBkkEQAJ/AkACQAJAIANBBGsOAgABAgsgAEHUA2ogAC0AiANBA3FBAkYNAhogAEHMA2oMAgsgAEHMA2ogAC0AiANBA3FBAkYNARogAEHUA2oMAQsgACABQf8BcUECdGpBzANqCyoCACEEIAJBEGokACAEuw8LIAJB7hA2AgAgAEEFQdglIAIQLBAkAAuqAQICfwF9IwBBEGsiAiQAIAAoAgAhACABQf8BcSIDQQZJBEACfwJAAkACQCADQQRrDgIAAQILIABBxANqIAAtAIgDQQNxQQJGDQIaIABBvANqDAILIABBvANqIAAtAIgDQQNxQQJGDQEaIABBxANqDAELIAAgAUH/AXFBAnRqQbwDagsqAgAhBCACQRBqJAAgBLsPCyACQe4QNgIAIABBBUHYJSACECwQJAALqgECAn8BfSMAQRBrIgIkACAAKAIAIQAgAUH/AXEiA0EGSQRAAn8CQAJAAkAgA0EEaw4CAAECCyAAQbQDaiAALQCIA0EDcUECRg0CGiAAQawDagwCCyAAQawDaiAALQCIA0EDcUECRg0BGiAAQbQDagwBCyAAIAFB/wFxQQJ0akGsA2oLKgIAIQQgAkEQaiQAIAS7DwsgAkHuEDYCACAAQQVB2CUgAhAsECQAC08AIAAgASgCACIBKgKcA7s5AwAgACABKgKkA7s5AwggACABKgKgA7s5AxAgACABKgKoA7s5AxggACABKgKMA7s5AyAgACABKgKQA7s5AygLDAAgACgCACoCkAO7CwwAIAAoAgAqAowDuwsMACAAKAIAKgKoA7sLDAAgACgCACoCoAO7CwwAIAAoAgAqAqQDuwsMACAAKAIAKgKcA7sL6AMCBH0FfyMAQUBqIgokACAAKAIAIQAgCkEIakEAQTgQKhpB8DpB8DooAgBBAWo2AgAgABB4IAAtABRBA3EiCCADQQEgA0H/AXEbIAgbIQkgAEEUaiEIIAG2IQQgACoC+AMhBQJ9AkACQAJAIAAtAPwDQQFrDgIBAAILIAUgBJRDCtcjPJQhBQsgBUMAAAAAYEUNACAAIAlB/wFxQQAgBCAEEDEgCEECQQEgBBAiIAhBAkEBIAQQIZKSDAELIAggCUH/AXFBACAEIAQQLSIFIAVbBEBBAiELIAggCUH/AXFBACAEIAQQLQwBCyAEIARcIQsgBAshByACtiEFIAAqAoAEIQYgACAHAn0CQAJAAkAgAC0AhARBAWsOAgEAAgsgBiAFlEMK1yM8lCEGCyAGQwAAAABgRQ0AIAAgCUH/AXFBASAFIAQQMSAIQQBBASAEECIgCEEAQQEgBBAhkpIMAQsgCCAJQf8BcSIJQQEgBSAEEC0iBiAGWwRAQQIhDCAIIAlBASAFIAQQLQwBCyAFIAVcIQwgBQsgA0H/AXEgCyAMIAQgBUEBQQAgCkEIakEAQfA6KAIAED0EQCAAIAAtAIgDQQNxIAQgBRB2IABEAAAAAAAAAABEAAAAAAAAAAAQcwsgCkFAayQACw0AIAAoAgAtAABBAXELFQAgACgCACIAIAAtAABB/gFxOgAACxAAIAAoAgAtAABBBHFBAnYLegECfyMAQRBrIgEkACAAKAIAIgAoAggEQANAIAAtAAAiAkEEcUUEQCAAIAJBBHI6AAAgACgCECICBEAgACACEQAACyAAQYCAgP4HNgKcASAAKALkAyIADQELCyABQRBqJAAPCyABQYAINgIAIABBBUHYJSABECwQJAALLgEBfyAAKAIIIQEgAEEANgIIIAEEQCABIAEoAgAoAgQRAAALIAAoAgBBADYCEAsXACAAKAIEKAIIIgAgACgCACgCCBEAAAsuAQF/IAAoAgghAiAAIAE2AgggAgRAIAIgAigCACgCBBEAAAsgACgCAEEFNgIQCz4BAX8gACgCBCEBIABBADYCBCABBEAgASABKAIAKAIEEQAACyAAKAIAIgBBADYCCCAAIAAtAABB7wFxOgAAC0kBAX8jAEEQayIGJAAgBiABKAIEKAIEIgEgAiADIAQgBSABKAIAKAIIERAAIAAgBisDALY4AgAgACAGKwMItjgCBCAGQRBqJAALcwECfyMAQRBrIgIkACAAKAIEIQMgACABNgIEIAMEQCADIAMoAgAoAgQRAAALIAAoAgAiACgC6AMgACgC7ANHBEAgAkH5IzYCACAAQQVB2CUgAhAsECQACyAAQQQ2AgggACAALQAAQRByOgAAIAJBEGokAAs8AQF/AkAgACgCACIAKALsAyAAKALoAyIAa0ECdSABTQ0AIAAgAUECdGooAgAiAEUNACAAKAIEIQILIAILGQAgACgCACgC5AMiAEUEQEEADwsgACgCBAsXACAAKAIAIgAoAuwDIAAoAugDa0ECdQuOAwEDfyMAQdACayICJAACQCAAKAIAIgAoAuwDIAAoAugDRg0AIAEoAgAiAygC5AMhASAAIAMQb0UNACAAIAFGBEAgAkEIakEAQcQCECoaIAJBADoAGCACQgA3AxAgAkGAgID+BzYCDCACQRxqQQBBxAEQKhogAkHgAWohBCACQSBqIQEDQCABQoCAgPyLgIDAv383AhAgAUKBgICAEDcCCCABQoCAgPyLgIDAv383AgAgAUEYaiIBIARHDQALIAJCgICA/IuAgMC/fzcD8AEgAkKBgICAEDcD6AEgAkKAgID8i4CAwL9/NwPgASACQoCAgP6HgIDg/wA3AoQCIAJCgICA/oeAgOD/ADcC/AEgAiACLQD4AUH4AXE6APgBIAJBjAJqQQBBwAAQKhogA0GYAWogAkEIakHEAhArGiADQQA2AuQDCwNAIAAtAAAiAUEEcQ0BIAAgAUEEcjoAACAAKAIQIgEEQCAAIAERAAALIABBgICA/gc2ApwBIAAoAuQDIgANAAsLIAJB0AJqJAAL4AcBCH8jAEHQAGsiByQAIAAoAgAhAAJAAkAgASgCACIIKALkA0UEQCAAKAIIDQEgCC0AF0EQdEGAgDBxQYCAIEYEQCAAIAAoAuADQQFqNgLgAwsgACgC6AMiASACQQJ0aiEGAkAgACgC7AMiBCAAQfADaiIDKAIAIgVJBEAgBCAGRgRAIAYgCDYCACAAIAZBBGo2AuwDDAILIAQgBCICQQRrIgFLBEADQCACIAEoAgA2AgAgAkEEaiECIAFBBGoiASAESQ0ACwsgACACNgLsAyAGQQRqIgEgBEcEQCAEIAQgAWsiAUF8cWsgBiABEDMaCyAGIAg2AgAMAQsgBCABa0ECdUEBaiIEQYCAgIAETw0DAkAgB0EgakH/////AyAFIAFrIgFBAXUiBSAEIAQgBUkbIAFB/P///wdPGyACIAMQSiIDKAIIIgIgAygCDEcNACADKAIEIgEgAygCACIESwRAIAMgASABIARrQQJ1QQFqQX5tQQJ0IgRqIAEgAiABayIBEDMgAWoiAjYCCCADIAMoAgQgBGo2AgQMAQsgB0E4akEBIAIgBGtBAXUgAiAERhsiASABQQJ2IAMoAhAQSiIFKAIIIQQCfyADKAIIIgIgAygCBCIBRgRAIAQhAiABDAELIAQgAiABa2ohAgNAIAQgASgCADYCACABQQRqIQEgBEEEaiIEIAJHDQALIAMoAgghASADKAIECyEEIAMoAgAhCSADIAUoAgA2AgAgBSAJNgIAIAMgBSgCBDYCBCAFIAQ2AgQgAyACNgIIIAUgATYCCCADKAIMIQogAyAFKAIMNgIMIAUgCjYCDCABIARHBEAgBSABIAQgAWtBA2pBfHFqNgIICyAJRQ0AIAkQIyADKAIIIQILIAIgCDYCACADIAMoAghBBGo2AgggAyADKAIEIAYgACgC6AMiAWsiAmsgASACEDM2AgQgAygCCCAGIAAoAuwDIAZrIgQQMyEGIAAoAugDIQEgACADKAIENgLoAyADIAE2AgQgACgC7AMhAiAAIAQgBmo2AuwDIAMgAjYCCCAAKALwAyEEIAAgAygCDDYC8AMgAyABNgIAIAMgBDYCDCABIAJHBEAgAyACIAEgAmtBA2pBfHFqNgIICyABRQ0AIAEQIwsgCCAANgLkAwNAIAAtAAAiAUEEcUUEQCAAIAFBBHI6AAAgACgCECIBBEAgACABEQAACyAAQYCAgP4HNgKcASAAKALkAyIADQELCyAHQdAAaiQADwsgB0HEIzYCECAAQQVB2CUgB0EQahAsECQACyAHQckkNgIAIABBBUHYJSAHECwQJAALEAIACxAAIAAoAgAtAABBAnFBAXYLWQIBfwF9IwBBEGsiAiQAIAJBCGogACgCACIAQfwAaiAAIAFB/wFxQQF0ai8BaBAfQwAAwH8hAwJAAkAgAi0ADA4EAQAAAQALIAIqAgghAwsgAkEQaiQAIAMLTgEBfyMAQRBrIgMkACADQQhqIAEoAgAiAUH8AGogASACQf8BcUEBdGovAUQQHyADLQAMIQEgACADKgIIuzkDCCAAIAE2AgAgA0EQaiQAC14CAX8BfCMAQRBrIgIkACACQQhqIAAoAgAiAEH8AGogACABQf8BcUEBdGovAVYQH0QAAAAAAAD4fyEDAkACQCACLQAMDgQBAAABAAsgAioCCLshAwsgAkEQaiQAIAMLJAEBfUMAAMB/IAAoAgAiAEH8AGogAC8BehAgIgEgASABXBu7C0QBAX8jAEEQayICJAAgAkEIaiABKAIAIgFB/ABqIAEvAXgQHyACLQAMIQEgACACKgIIuzkDCCAAIAE2AgAgAkEQaiQAC0QBAX8jAEEQayICJAAgAkEIaiABKAIAIgFB/ABqIAEvAXYQHyACLQAMIQEgACACKgIIuzkDCCAAIAE2AgAgAkEQaiQAC0QBAX8jAEEQayICJAAgAkEIaiABKAIAIgFB/ABqIAEvAXQQHyACLQAMIQEgACACKgIIuzkDCCAAIAE2AgAgAkEQaiQAC0QBAX8jAEEQayICJAAgAkEIaiABKAIAIgFB/ABqIAEvAXIQHyACLQAMIQEgACACKgIIuzkDCCAAIAE2AgAgAkEQaiQAC0QBAX8jAEEQayICJAAgAkEIaiABKAIAIgFB/ABqIAEvAXAQHyACLQAMIQEgACACKgIIuzkDCCAAIAE2AgAgAkEQaiQAC0QBAX8jAEEQayICJAAgAkEIaiABKAIAIgFB/ABqIAEvAW4QHyACLQAMIQEgACACKgIIuzkDCCAAIAE2AgAgAkEQaiQAC0gCAX8BfQJ9IAAoAgAiAEH8AGoiASAALwEcECAiAiACXARAQwAAgD9DAAAAACAAKAL0Ay0ACEEBcRsMAQsgASAALwEcECALuws2AgF/AX0gACgCACIAQfwAaiIBIAAvARoQICICIAJcBEBEAAAAAAAAAAAPCyABIAAvARoQILsLRAEBfyMAQRBrIgIkACACQQhqIAEoAgAiAUH8AGogAS8BHhAfIAItAAwhASAAIAIqAgi7OQMIIAAgATYCACACQRBqJAALEAAgACgCAC0AF0ECdkEDcQsNACAAKAIALQAXQQNxC04BAX8jAEEQayIDJAAgA0EIaiABKAIAIgFB/ABqIAEgAkH/AXFBAXRqLwEgEB8gAy0ADCEBIAAgAyoCCLs5AwggACABNgIAIANBEGokAAsQACAAKAIALQAUQQR2QQdxCw0AIAAoAgAvABVBDnYLDQAgACgCAC0AFEEDcQsQACAAKAIALQAUQQJ2QQNxCw0AIAAoAgAvABZBD3ELEAAgACgCAC8AFUEEdkEPcQsNACAAKAIALwAVQQ9xC04BAX8jAEEQayIDJAAgA0EIaiABKAIAIgFB/ABqIAEgAkH/AXFBAXRqLwEyEB8gAy0ADCEBIAAgAyoCCLs5AwggACABNgIAIANBEGokAAsQACAAKAIALwAVQQx2QQNxCxAAIAAoAgAtABdBBHZBAXELgQECA38BfSMAQRBrIgMkACAAKAIAIQQCfSACtiIGIAZcBEBBACEAQwAAwH8MAQtBAEECIAZDAACAf1sgBkMAAID/W3IiBRshAEMAAMB/IAYgBRsLIQYgAyAAOgAMIAMgBjgCCCADIAMpAwg3AwAgBCABQf8BcSADEIgBIANBEGokAAt5AgF9An8jAEEQayIEJAAgACgCACEFIAQCfyACtiIDIANcBEBDAADAfyEDQQAMAQtDAADAfyADIANDAACAf1sgA0MAAID/W3IiABshAyAARQs6AAwgBCADOAIIIAQgBCkDCDcDACAFIAFB/wFxIAQQiAEgBEEQaiQAC3EBAX8CQCAAKAIAIgAtAAAiAkECcUEBdiABRg0AIAAgAkH9AXFBAkEAIAEbcjoAAANAIAAtAAAiAUEEcQ0BIAAgAUEEcjoAACAAKAIQIgEEQCAAIAERAAALIABBgICA/gc2ApwBIAAoAuQDIgANAAsLC4EBAgN/AX0jAEEQayIDJAAgACgCACEEAn0gArYiBiAGXARAQQAhAEMAAMB/DAELQQBBAiAGQwAAgH9bIAZDAACA/1tyIgUbIQBDAADAfyAGIAUbCyEGIAMgADoADCADIAY4AgggAyADKQMINwMAIAQgAUH/AXEgAxCOASADQRBqJAALeQIBfQJ/IwBBEGsiBCQAIAAoAgAhBSAEAn8gArYiAyADXARAQwAAwH8hA0EADAELQwAAwH8gAyADQwAAgH9bIANDAACA/1tyIgAbIQMgAEULOgAMIAQgAzgCCCAEIAQpAwg3AwAgBSABQf8BcSAEEI4BIARBEGokAAv5AQICfQR/IwBBEGsiBSQAIAAoAgAhAAJ/IAK2IgMgA1wEQEMAAMB/IQNBAAwBC0MAAMB/IAMgA0MAAIB/WyADQwAAgP9bciIGGyEDIAZFCyEGQQEhByAFQQhqIABB/ABqIgggACABQf8BcUEBdGpB1gBqIgEvAQAQHwJAAkAgAyAFKgIIIgRcBH8gBCAEWw0BIAMgA1wFIAcLRQ0AIAUtAAwgBkYNAQsgCCABIAMgBhA5A0AgAC0AACIBQQRxDQEgACABQQRyOgAAIAAoAhAiAQRAIAAgAREAAAsgAEGAgID+BzYCnAEgACgC5AMiAA0ACwsgBUEQaiQAC7UBAgN/An0CQCAAKAIAIgBB/ABqIgMgAEH6AGoiAi8BABAgIgYgAbYiBVsNACAFIAVbIgRFIAYgBlxxDQACQCAEIAVDAAAAAFsgBYtDAACAf1tyRXFFBEAgAiACLwEAQfj/A3E7AQAMAQsgAyACIAVBAxBMCwNAIAAtAAAiAkEEcQ0BIAAgAkEEcjoAACAAKAIQIgIEQCAAIAIRAAALIABBgICA/gc2ApwBIAAoAuQDIgANAAsLC3wCA38BfSMAQRBrIgIkACAAKAIAIQMCfSABtiIFIAVcBEBBACEAQwAAwH8MAQtBAEECIAVDAACAf1sgBUMAAID/W3IiBBshAEMAAMB/IAUgBBsLIQUgAiAAOgAMIAIgBTgCCCACIAIpAwg3AwAgA0EBIAIQVSACQRBqJAALdAIBfQJ/IwBBEGsiAyQAIAAoAgAhBCADAn8gAbYiAiACXARAQwAAwH8hAkEADAELQwAAwH8gAiACQwAAgH9bIAJDAACA/1tyIgAbIQIgAEULOgAMIAMgAjgCCCADIAMpAwg3AwAgBEEBIAMQVSADQRBqJAALfAIDfwF9IwBBEGsiAiQAIAAoAgAhAwJ9IAG2IgUgBVwEQEEAIQBDAADAfwwBC0EAQQIgBUMAAIB/WyAFQwAAgP9bciIEGyEAQwAAwH8gBSAEGwshBSACIAA6AAwgAiAFOAIIIAIgAikDCDcDACADQQAgAhBVIAJBEGokAAt0AgF9An8jAEEQayIDJAAgACgCACEEIAMCfyABtiICIAJcBEBDAADAfyECQQAMAQtDAADAfyACIAJDAACAf1sgAkMAAID/W3IiABshAiAARQs6AAwgAyACOAIIIAMgAykDCDcDACAEQQAgAxBVIANBEGokAAt8AgN/AX0jAEEQayICJAAgACgCACEDAn0gAbYiBSAFXARAQQAhAEMAAMB/DAELQQBBAiAFQwAAgH9bIAVDAACA/1tyIgQbIQBDAADAfyAFIAQbCyEFIAIgADoADCACIAU4AgggAiACKQMINwMAIANBASACEFYgAkEQaiQAC3QCAX0CfyMAQRBrIgMkACAAKAIAIQQgAwJ/IAG2IgIgAlwEQEMAAMB/IQJBAAwBC0MAAMB/IAIgAkMAAIB/WyACQwAAgP9bciIAGyECIABFCzoADCADIAI4AgggAyADKQMINwMAIARBASADEFYgA0EQaiQAC3wCA38BfSMAQRBrIgIkACAAKAIAIQMCfSABtiIFIAVcBEBBACEAQwAAwH8MAQtBAEECIAVDAACAf1sgBUMAAID/W3IiBBshAEMAAMB/IAUgBBsLIQUgAiAAOgAMIAIgBTgCCCACIAIpAwg3AwAgA0EAIAIQViACQRBqJAALdAIBfQJ/IwBBEGsiAyQAIAAoAgAhBCADAn8gAbYiAiACXARAQwAAwH8hAkEADAELQwAAwH8gAiACQwAAgH9bIAJDAACA/1tyIgAbIQIgAEULOgAMIAMgAjgCCCADIAMpAwg3AwAgBEEAIAMQViADQRBqJAALPwEBfyMAQRBrIgEkACAAKAIAIQAgAUEDOgAMIAFBgICA/gc2AgggASABKQMINwMAIABBASABEEYgAUEQaiQAC3wCA38BfSMAQRBrIgIkACAAKAIAIQMCfSABtiIFIAVcBEBBACEAQwAAwH8MAQtBAEECIAVDAACAf1sgBUMAAID/W3IiBBshAEMAAMB/IAUgBBsLIQUgAiAAOgAMIAIgBTgCCCACIAIpAwg3AwAgA0EBIAIQRiACQRBqJAALdAIBfQJ/IwBBEGsiAyQAIAAoAgAhBCADAn8gAbYiAiACXARAQwAAwH8hAkEADAELQwAAwH8gAiACQwAAgH9bIAJDAACA/1tyIgAbIQIgAEULOgAMIAMgAjgCCCADIAMpAwg3AwAgBEEBIAMQRiADQRBqJAALPwEBfyMAQRBrIgEkACAAKAIAIQAgAUEDOgAMIAFBgICA/gc2AgggASABKQMINwMAIABBACABEEYgAUEQaiQAC3wCA38BfSMAQRBrIgIkACAAKAIAIQMCfSABtiIFIAVcBEBBACEAQwAAwH8MAQtBAEECIAVDAACAf1sgBUMAAID/W3IiBBshAEMAAMB/IAUgBBsLIQUgAiAAOgAMIAIgBTgCCCACIAIpAwg3AwAgA0EAIAIQRiACQRBqJAALdAIBfQJ/IwBBEGsiAyQAIAAoAgAhBCADAn8gAbYiAiACXARAQwAAwH8hAkEADAELQwAAwH8gAiACQwAAgH9bIAJDAACA/1tyIgAbIQIgAEULOgAMIAMgAjgCCCADIAMpAwg3AwAgBEEAIAMQRiADQRBqJAALoAECA38CfQJAIAAoAgAiAEH8AGoiAyAAQRxqIgIvAQAQICIGIAG2IgVbDQAgBSAFWyIERSAGIAZccQ0AAkAgBEUEQCACIAIvAQBB+P8DcTsBAAwBCyADIAIgBUEDEEwLA0AgAC0AACICQQRxDQEgACACQQRyOgAAIAAoAhAiAgRAIAAgAhEAAAsgAEGAgID+BzYCnAEgACgC5AMiAA0ACwsLoAECA38CfQJAIAAoAgAiAEH8AGoiAyAAQRpqIgIvAQAQICIGIAG2IgVbDQAgBSAFWyIERSAGIAZccQ0AAkAgBEUEQCACIAIvAQBB+P8DcTsBAAwBCyADIAIgBUEDEEwLA0AgAC0AACICQQRxDQEgACACQQRyOgAAIAAoAhAiAgRAIAAgAhEAAAsgAEGAgID+BzYCnAEgACgC5AMiAA0ACwsLPQEBfyMAQRBrIgEkACAAKAIAIQAgAUEDOgAMIAFBgICA/gc2AgggASABKQMINwMAIAAgARBrIAFBEGokAAt6AgN/AX0jAEEQayICJAAgACgCACEDAn0gAbYiBSAFXARAQQAhAEMAAMB/DAELQQBBAiAFQwAAgH9bIAVDAACA/1tyIgQbIQBDAADAfyAFIAQbCyEFIAIgADoADCACIAU4AgggAiACKQMINwMAIAMgAhBrIAJBEGokAAtyAgF9An8jAEEQayIDJAAgACgCACEEIAMCfyABtiICIAJcBEBDAADAfyECQQAMAQtDAADAfyACIAJDAACAf1sgAkMAAID/W3IiABshAiAARQs6AAwgAyACOAIIIAMgAykDCDcDACAEIAMQayADQRBqJAALoAECA38CfQJAIAAoAgAiAEH8AGoiAyAAQRhqIgIvAQAQICIGIAG2IgVbDQAgBSAFWyIERSAGIAZccQ0AAkAgBEUEQCACIAIvAQBB+P8DcTsBAAwBCyADIAIgBUEDEEwLA0AgAC0AACICQQRxDQEgACACQQRyOgAAIAAoAhAiAgRAIAAgAhEAAAsgAEGAgID+BzYCnAEgACgC5AMiAA0ACwsLkAEBAX8CQCAAKAIAIgBBF2otAAAiAkECdkEDcSABQf8BcUYNACAAIAAvABUgAkEQdHIiAjsAFSAAIAJB///PB3EgAUEDcUESdHJBEHY6ABcDQCAALQAAIgFBBHENASAAIAFBBHI6AAAgACgCECIBBEAgACABEQAACyAAQYCAgP4HNgKcASAAKALkAyIADQALCwuNAQEBfwJAIAAoAgAiAEEXai0AACICQQNxIAFB/wFxRg0AIAAgAC8AFSACQRB0ciICOwAVIAAgAkH///MHcSABQQNxQRB0ckEQdjoAFwNAIAAtAAAiAUEEcQ0BIAAgAUEEcjoAACAAKAIQIgEEQCAAIAERAAALIABBgICA/gc2ApwBIAAoAuQDIgANAAsLC0MBAX8jAEEQayICJAAgACgCACEAIAJBAzoADCACQYCAgP4HNgIIIAIgAikDCDcDACAAIAFB/wFxIAIQZSACQRBqJAALgAECA38BfSMAQRBrIgMkACAAKAIAIQQCfSACtiIGIAZcBEBBACEAQwAAwH8MAQtBAEECIAZDAACAf1sgBkMAAID/W3IiBRshAEMAAMB/IAYgBRsLIQYgAyAAOgAMIAMgBjgCCCADIAMpAwg3AwAgBCABQf8BcSADEGUgA0EQaiQAC3gCAX0CfyMAQRBrIgQkACAAKAIAIQUgBAJ/IAK2IgMgA1wEQEMAAMB/IQNBAAwBC0MAAMB/IAMgA0MAAIB/WyADQwAAgP9bciIAGyEDIABFCzoADCAEIAM4AgggBCAEKQMINwMAIAUgAUH/AXEgBBBlIARBEGokAAt3AQF/AkAgACgCACIALQAUIgJBBHZBB3EgAUH/AXFGDQAgACACQY8BcSABQQR0QfAAcXI6ABQDQCAALQAAIgFBBHENASAAIAFBBHI6AAAgACgCECIBBEAgACABEQAACyAAQYCAgP4HNgKcASAAKALkAyIADQALCwuJAQEBfwJAIAFB/wFxIAAoAgAiAC8AFSICQQ52Rg0AIABBF2ogAiAALQAXQRB0ciICQRB2OgAAIAAgAkH//wBxIAFBDnRyOwAVA0AgAC0AACIBQQRxDQEgACABQQRyOgAAIAAoAhAiAQRAIAAgAREAAAsgAEGAgID+BzYCnAEgACgC5AMiAA0ACwsLcAEBfwJAIAAoAgAiAC0AFCICQQNxIAFB/wFxRg0AIAAgAkH8AXEgAUEDcXI6ABQDQCAALQAAIgFBBHENASAAIAFBBHI6AAAgACgCECIBBEAgACABEQAACyAAQYCAgP4HNgKcASAAKALkAyIADQALCwt2AQF/AkAgACgCACIALQAUIgJBAnZBA3EgAUH/AXFGDQAgACACQfMBcSABQQJ0QQxxcjoAFANAIAAtAAAiAUEEcQ0BIAAgAUEEcjoAACAAKAIQIgEEQCAAIAERAAALIABBgICA/gc2ApwBIAAoAuQDIgANAAsLC48BAQF/AkAgACgCACIALwAVIgJBCHZBD3EgAUH/AXFGDQAgAEEXaiACIAAtABdBEHRyIgJBEHY6AAAgACACQf/hA3EgAUEPcUEIdHI7ABUDQCAALQAAIgFBBHENASAAIAFBBHI6AAAgACgCECIBBEAgACABEQAACyAAQYCAgP4HNgKcASAAKALkAyIADQALCwuPAQEBfwJAIAFB/wFxIAAoAgAiAC8AFSAAQRdqLQAAQRB0ciICQfABcUEEdkYNACAAIAJBEHY6ABcgACACQY/+A3EgAUEEdEHwAXFyOwAVA0AgAC0AACIBQQRxDQEgACABQQRyOgAAIAAoAhAiAQRAIAAgAREAAAsgAEGAgID+BzYCnAEgACgC5AMiAA0ACwsLhwEBAX8CQCAAKAIAIgAvABUgAEEXai0AAEEQdHIiAkEPcSABQf8BcUYNACAAIAJBEHY6ABcgACACQfD/A3EgAUEPcXI7ABUDQCAALQAAIgFBBHENASAAIAFBBHI6AAAgACgCECIBBEAgACABEQAACyAAQYCAgP4HNgKcASAAKALkAyIADQALCwtDAQF/IwBBEGsiAiQAIAAoAgAhACACQQM6AAwgAkGAgID+BzYCCCACIAIpAwg3AwAgACABQf8BcSACEGcgAkEQaiQAC4ABAgN/AX0jAEEQayIDJAAgACgCACEEAn0gArYiBiAGXARAQQAhAEMAAMB/DAELQQBBAiAGQwAAgH9bIAZDAACA/1tyIgUbIQBDAADAfyAGIAUbCyEGIAMgADoADCADIAY4AgggAyADKQMINwMAIAQgAUH/AXEgAxBnIANBEGokAAt4AgF9An8jAEEQayIEJAAgACgCACEFIAQCfyACtiIDIANcBEBDAADAfyEDQQAMAQtDAADAfyADIANDAACAf1sgA0MAAID/W3IiABshAyAARQs6AAwgBCADOAIIIAQgBCkDCDcDACAFIAFB/wFxIAQQZyAEQRBqJAALjwEBAX8CQCAAKAIAIgAvABUiAkEMdkEDcSABQf8BcUYNACAAQRdqIAIgAC0AF0EQdHIiAkEQdjoAACAAIAJB/58DcSABQQNxQQx0cjsAFQNAIAAtAAAiAUEEcQ0BIAAgAUEEcjoAACAAKAIQIgEEQCAAIAERAAALIABBgICA/gc2ApwBIAAoAuQDIgANAAsLC5ABAQF/AkAgACgCACIAQRdqLQAAIgJBBHZBAXEgAUH/AXFGDQAgACAALwAVIAJBEHRyIgI7ABUgACACQf//vwdxIAFBAXFBFHRyQRB2OgAXA0AgAC0AACIBQQRxDQEgACABQQRyOgAAIAAoAhAiAQRAIAAgAREAAAsgAEGAgID+BzYCnAEgACgC5AMiAA0ACwsL9g0CCH8CfSMAQRBrIgIkAAJAAkAgASgCACIFLQAUIAAoAgAiAS0AFHNB/wBxDQAgBS8AFSAFLQAXQRB0ciABLwAVIAEtABdBEHRyc0H//z9xDQAgBUH8AGohByABQfwAaiEIAkAgAS8AGCIAQQdxRQRAIAUtABhBB3FFDQELIAggABAgIgogByAFLwAYECAiC1sNACAKIApbIAsgC1tyDQELAkAgAS8AGiIAQQdxRQRAIAUtABpBB3FFDQELIAggABAgIgogByAFLwAaECAiC1sNACAKIApbIAsgC1tyDQELAkAgAS8AHCIAQQdxRQRAIAUtABxBB3FFDQELIAggABAgIgogByAFLwAcECAiC1sNACAKIApbIAsgC1tyDQELAkAgAS8AHiIAQQdxRQRAIAUtAB5BB3FFDQELIAJBCGogCCAAEB8gAiAHIAUvAB4QH0EBIQAgAioCCCIKIAIqAgAiC1wEfyAKIApbDQIgCyALXAUgAAtFDQEgAi0ADCACLQAERw0BCyAFQSBqIQAgAUEgaiEGA0ACQCAGIANBAXRqLwAAIgRBB3FFBEAgAC0AAEEHcUUNAQsgAkEIaiAIIAQQHyACIAcgAC8AABAfQQEhBCACKgIIIgogAioCACILXAR/IAogClsNAyALIAtcBSAEC0UNAiACLQAMIAItAARHDQILIABBAmohACADQQFqIgNBCUcNAAsgBUEyaiEAIAFBMmohBkEAIQMDQAJAIAYgA0EBdGovAAAiBEEHcUUEQCAALQAAQQdxRQ0BCyACQQhqIAggBBAfIAIgByAALwAAEB9BASEEIAIqAggiCiACKgIAIgtcBH8gCiAKWw0DIAsgC1wFIAQLRQ0CIAItAAwgAi0ABEcNAgsgAEECaiEAIANBAWoiA0EJRw0ACyAFQcQAaiEAIAFBxABqIQZBACEDA0ACQCAGIANBAXRqLwAAIgRBB3FFBEAgAC0AAEEHcUUNAQsgAkEIaiAIIAQQHyACIAcgAC8AABAfQQEhBCACKgIIIgogAioCACILXAR/IAogClsNAyALIAtcBSAEC0UNAiACLQAMIAItAARHDQILIABBAmohACADQQFqIgNBCUcNAAsgBUHWAGohACABQdYAaiEGQQAhAwNAAkAgBiADQQF0ai8AACIEQQdxRQRAIAAtAABBB3FFDQELIAJBCGogCCAEEB8gAiAHIAAvAAAQH0EBIQQgAioCCCIKIAIqAgAiC1wEfyAKIApbDQMgCyALXAUgBAtFDQIgAi0ADCACLQAERw0CCyAAQQJqIQAgA0EBaiIDQQlHDQALIAVB6ABqIQAgAUHoAGohBkEAIQMDQAJAIAYgA0EBdGovAAAiBEEHcUUEQCAALQAAQQdxRQ0BCyACQQhqIAggBBAfIAIgByAALwAAEB9BASEEIAIqAggiCiACKgIAIgtcBH8gCiAKWw0DIAsgC1wFIAQLRQ0CIAItAAwgAi0ABEcNAgsgAEECaiEAIANBAWoiA0EDRw0ACyAFQe4AaiEAIAFB7gBqIQlBACEEQQAhAwNAAkAgCSADQQF0ai8AACIGQQdxRQRAIAAtAABBB3FFDQELIAJBCGogCCAGEB8gAiAHIAAvAAAQH0EBIQMgAioCCCIKIAIqAgAiC1wEfyAKIApbDQMgCyALXAUgAwtFDQIgAi0ADCACLQAERw0CCyAAQQJqIQBBASEDIAQhBkEBIQQgBkUNAAsgBUHyAGohACABQfIAaiEJQQAhBEEAIQMDQAJAIAkgA0EBdGovAAAiBkEHcUUEQCAALQAAQQdxRQ0BCyACQQhqIAggBhAfIAIgByAALwAAEB9BASEDIAIqAggiCiACKgIAIgtcBH8gCiAKWw0DIAsgC1wFIAMLRQ0CIAItAAwgAi0ABEcNAgsgAEECaiEAQQEhAyAEIQZBASEEIAZFDQALIAVB9gBqIQAgAUH2AGohCUEAIQRBACEDA0ACQCAJIANBAXRqLwAAIgZBB3FFBEAgAC0AAEEHcUUNAQsgAkEIaiAIIAYQHyACIAcgAC8AABAfQQEhAyACKgIIIgogAioCACILXAR/IAogClsNAyALIAtcBSADC0UNAiACLQAMIAItAARHDQILIABBAmohAEEBIQMgBCEGQQEhBCAGRQ0ACyABLwB6IgBBB3FFBEAgBS0AekEHcUUNAgsgCCAAECAiCiAHIAUvAHoQICILWw0BIAogClsNACALIAtcDQELIAFBFGogBUEUakHoABArGiABQfwAaiAFQfwAahCgAQNAIAEtAAAiAEEEcQ0BIAEgAEEEcjoAACABKAIQIgAEQCABIAARAAALIAFBgICA/gc2ApwBIAEoAuQDIgENAAsLIAJBEGokAAvGAwEEfyMAQaAEayICJAAgACgCBCEBIABBADYCBCABBEAgASABKAIAKAIEEQAACyAAKAIIIQEgAEEANgIIIAEEQCABIAEoAgAoAgQRAAALAkAgACgCACIAKALoAyAAKALsA0YEQCAAKALkAw0BIAAgAkEYaiAAKAL0AxBcIgEpAgA3AgAgACABKAIQNgIQIAAgASkCCDcCCCAAQRRqIAFBFGpB6AAQKxogACABKQKMATcCjAEgACABKQKEATcChAEgACABKQJ8NwJ8IAEoApQBIQQgAUEANgKUASAAKAKUASEDIAAgBDYClAEgAwRAIAMQWwsgAEGYAWogAUGYAWpB0AIQKxogACgC6AMiAwRAIAAgAzYC7AMgAxAjCyAAIAEoAugDNgLoAyAAIAEoAuwDNgLsAyAAIAEoAvADNgLwAyABQQA2AvADIAFCADcC6AMgACABKQL8AzcC/AMgACABKQL0AzcC9AMgACABKAKEBDYChAQgASgClAEhACABQQA2ApQBIAAEQCAAEFsLIAJBoARqJAAPCyACQfAcNgIQIABBBUHYJSACQRBqECwQJAALIAJB5hE2AgAgAEEFQdglIAIQLBAkAAsLAEEMEB4gABCiAQsLAEEMEB5BABCiAQsNACAAKAIALQAIQQFxCwoAIAAoAgAoAhQLGQAgAUH/AXEEQBACAAsgACgCACgCEEEBcQsYACAAKAIAIgAgAC0ACEH+AXEgAXI6AAgLJgAgASAAKAIAIgAoAhRHBEAgACABNgIUIAAgACgCDEEBajYCDAsLkgEBAn8jAEEQayICJAAgACgCACEAIAFDAAAAAGAEQCABIAAqAhhcBEAgACABOAIYIAAgACgCDEEBajYCDAsgAkEQaiQADwsgAkGIFDYCACMAQRBrIgMkACADIAI2AgwCQCAARQRAQbgwQdglIAIQSRoMAQsgAEEAQQVB2CUgAiAAKAIEEQ0AGgsgA0EQaiQAECQACz8AIAFB/wFxRQRAIAIgACgCACIAKAIQIgFBAXFHBEAgACABQX5xIAJyNgIQIAAgACgCDEEBajYCDAsPCxACAAsL4CYjAEGACAuBHk9ubHkgbGVhZiBub2RlcyB3aXRoIGN1c3RvbSBtZWFzdXJlIGZ1bmN0aW9ucyBzaG91bGQgbWFudWFsbHkgbWFyayB0aGVtc2VsdmVzIGFzIGRpcnR5AGlzRGlydHkAbWFya0RpcnR5AGRlc3Ryb3kAc2V0RGlzcGxheQBnZXREaXNwbGF5AHNldEZsZXgALSsgICAwWDB4AC0wWCswWCAwWC0weCsweCAweABzZXRGbGV4R3JvdwBnZXRGbGV4R3JvdwBzZXRPdmVyZmxvdwBnZXRPdmVyZmxvdwBoYXNOZXdMYXlvdXQAY2FsY3VsYXRlTGF5b3V0AGdldENvbXB1dGVkTGF5b3V0AHVuc2lnbmVkIHNob3J0AGdldENoaWxkQ291bnQAdW5zaWduZWQgaW50AHNldEp1c3RpZnlDb250ZW50AGdldEp1c3RpZnlDb250ZW50AGF2YWlsYWJsZUhlaWdodCBpcyBpbmRlZmluaXRlIHNvIGhlaWdodFNpemluZ01vZGUgbXVzdCBiZSBTaXppbmdNb2RlOjpNYXhDb250ZW50AGF2YWlsYWJsZVdpZHRoIGlzIGluZGVmaW5pdGUgc28gd2lkdGhTaXppbmdNb2RlIG11c3QgYmUgU2l6aW5nTW9kZTo6TWF4Q29udGVudABzZXRBbGlnbkNvbnRlbnQAZ2V0QWxpZ25Db250ZW50AGdldFBhcmVudABpbXBsZW1lbnQAc2V0TWF4SGVpZ2h0UGVyY2VudABzZXRIZWlnaHRQZXJjZW50AHNldE1pbkhlaWdodFBlcmNlbnQAc2V0RmxleEJhc2lzUGVyY2VudABzZXRHYXBQZXJjZW50AHNldFBvc2l0aW9uUGVyY2VudABzZXRNYXJnaW5QZXJjZW50AHNldE1heFdpZHRoUGVyY2VudABzZXRXaWR0aFBlcmNlbnQAc2V0TWluV2lkdGhQZXJjZW50AHNldFBhZGRpbmdQZXJjZW50AGhhbmRsZS50eXBlKCkgPT0gU3R5bGVWYWx1ZUhhbmRsZTo6VHlwZTo6UG9pbnQgfHwgaGFuZGxlLnR5cGUoKSA9PSBTdHlsZVZhbHVlSGFuZGxlOjpUeXBlOjpQZXJjZW50AGNyZWF0ZURlZmF1bHQAdW5pdAByaWdodABoZWlnaHQAc2V0TWF4SGVpZ2h0AGdldE1heEhlaWdodABzZXRIZWlnaHQAZ2V0SGVpZ2h0AHNldE1pbkhlaWdodABnZXRNaW5IZWlnaHQAZ2V0Q29tcHV0ZWRIZWlnaHQAZ2V0Q29tcHV0ZWRSaWdodABsZWZ0AGdldENvbXB1dGVkTGVmdAByZXNldABfX2Rlc3RydWN0AGZsb2F0AHVpbnQ2NF90AHVzZVdlYkRlZmF1bHRzAHNldFVzZVdlYkRlZmF1bHRzAHNldEFsaWduSXRlbXMAZ2V0QWxpZ25JdGVtcwBzZXRGbGV4QmFzaXMAZ2V0RmxleEJhc2lzAENhbm5vdCBnZXQgbGF5b3V0IHByb3BlcnRpZXMgb2YgbXVsdGktZWRnZSBzaG9ydGhhbmRzAHNldFBvaW50U2NhbGVGYWN0b3IATWVhc3VyZUNhbGxiYWNrV3JhcHBlcgBEaXJ0aWVkQ2FsbGJhY2tXcmFwcGVyAENhbm5vdCByZXNldCBhIG5vZGUgc3RpbGwgYXR0YWNoZWQgdG8gYSBvd25lcgBzZXRCb3JkZXIAZ2V0Qm9yZGVyAGdldENvbXB1dGVkQm9yZGVyAGdldE51bWJlcgBoYW5kbGUudHlwZSgpID09IFN0eWxlVmFsdWVIYW5kbGU6OlR5cGU6Ok51bWJlcgB1bnNpZ25lZCBjaGFyAHRvcABnZXRDb21wdXRlZFRvcABzZXRGbGV4V3JhcABnZXRGbGV4V3JhcABzZXRHYXAAZ2V0R2FwACVwAHNldEhlaWdodEF1dG8Ac2V0RmxleEJhc2lzQXV0bwBzZXRQb3NpdGlvbkF1dG8Ac2V0TWFyZ2luQXV0bwBzZXRXaWR0aEF1dG8AU2NhbGUgZmFjdG9yIHNob3VsZCBub3QgYmUgbGVzcyB0aGFuIHplcm8Ac2V0QXNwZWN0UmF0aW8AZ2V0QXNwZWN0UmF0aW8Ac2V0UG9zaXRpb24AZ2V0UG9zaXRpb24Abm90aWZ5T25EZXN0cnVjdGlvbgBzZXRGbGV4RGlyZWN0aW9uAGdldEZsZXhEaXJlY3Rpb24Ac2V0RGlyZWN0aW9uAGdldERpcmVjdGlvbgBzZXRNYXJnaW4AZ2V0TWFyZ2luAGdldENvbXB1dGVkTWFyZ2luAG1hcmtMYXlvdXRTZWVuAG5hbgBib3R0b20AZ2V0Q29tcHV0ZWRCb3R0b20AYm9vbABlbXNjcmlwdGVuOjp2YWwAc2V0RmxleFNocmluawBnZXRGbGV4U2hyaW5rAHNldEFsd2F5c0Zvcm1zQ29udGFpbmluZ0Jsb2NrAE1lYXN1cmVDYWxsYmFjawBEaXJ0aWVkQ2FsbGJhY2sAZ2V0TGVuZ3RoAHdpZHRoAHNldE1heFdpZHRoAGdldE1heFdpZHRoAHNldFdpZHRoAGdldFdpZHRoAHNldE1pbldpZHRoAGdldE1pbldpZHRoAGdldENvbXB1dGVkV2lkdGgAcHVzaAAvaG9tZS9ydW5uZXIvd29yay95b2dhL3lvZ2EvamF2YXNjcmlwdC8uLi95b2dhL3N0eWxlL1NtYWxsVmFsdWVCdWZmZXIuaAAvaG9tZS9ydW5uZXIvd29yay95b2dhL3lvZ2EvamF2YXNjcmlwdC8uLi95b2dhL3N0eWxlL1N0eWxlVmFsdWVQb29sLmgAdW5zaWduZWQgbG9uZwBzZXRCb3hTaXppbmcAZ2V0Qm94U2l6aW5nAHN0ZDo6d3N0cmluZwBzdGQ6OnN0cmluZwBzdGQ6OnUxNnN0cmluZwBzdGQ6OnUzMnN0cmluZwBzZXRQYWRkaW5nAGdldFBhZGRpbmcAZ2V0Q29tcHV0ZWRQYWRkaW5nAFRyaWVkIHRvIGNvbnN0cnVjdCBZR05vZGUgd2l0aCBudWxsIGNvbmZpZwBBdHRlbXB0aW5nIHRvIGNvbnN0cnVjdCBOb2RlIHdpdGggbnVsbCBjb25maWcAY3JlYXRlV2l0aENvbmZpZwBpbmYAc2V0QWxpZ25TZWxmAGdldEFsaWduU2VsZgBTaXplAHZhbHVlAFZhbHVlAGNyZWF0ZQBtZWFzdXJlAHNldFBvc2l0aW9uVHlwZQBnZXRQb3NpdGlvblR5cGUAaXNSZWZlcmVuY2VCYXNlbGluZQBzZXRJc1JlZmVyZW5jZUJhc2VsaW5lAGNvcHlTdHlsZQBkb3VibGUATm9kZQBleHRlbmQAaW5zZXJ0Q2hpbGQAZ2V0Q2hpbGQAcmVtb3ZlQ2hpbGQAdm9pZABzZXRFeHBlcmltZW50YWxGZWF0dXJlRW5hYmxlZABpc0V4cGVyaW1lbnRhbEZlYXR1cmVFbmFibGVkAGRpcnRpZWQAQ2Fubm90IHJlc2V0IGEgbm9kZSB3aGljaCBzdGlsbCBoYXMgY2hpbGRyZW4gYXR0YWNoZWQAdW5zZXRNZWFzdXJlRnVuYwB1bnNldERpcnRpZWRGdW5jAHNldEVycmF0YQBnZXRFcnJhdGEATWVhc3VyZSBmdW5jdGlvbiByZXR1cm5lZCBhbiBpbnZhbGlkIGRpbWVuc2lvbiB0byBZb2dhOiBbd2lkdGg9JWYsIGhlaWdodD0lZl0ARXhwZWN0IGN1c3RvbSBiYXNlbGluZSBmdW5jdGlvbiB0byBub3QgcmV0dXJuIE5hTgBOQU4ASU5GAGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHNob3J0PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1bnNpZ25lZCBzaG9ydD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8aW50PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1bnNpZ25lZCBpbnQ+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PGZsb2F0PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1aW50OF90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxpbnQ4X3Q+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHVpbnQxNl90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxpbnQxNl90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1aW50MzJfdD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8aW50MzJfdD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8Y2hhcj4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8dW5zaWduZWQgY2hhcj4Ac3RkOjpiYXNpY19zdHJpbmc8dW5zaWduZWQgY2hhcj4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8c2lnbmVkIGNoYXI+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PGxvbmc+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHVuc2lnbmVkIGxvbmc+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PGRvdWJsZT4AQ2hpbGQgYWxyZWFkeSBoYXMgYSBvd25lciwgaXQgbXVzdCBiZSByZW1vdmVkIGZpcnN0LgBDYW5ub3Qgc2V0IG1lYXN1cmUgZnVuY3Rpb246IE5vZGVzIHdpdGggbWVhc3VyZSBmdW5jdGlvbnMgY2Fubm90IGhhdmUgY2hpbGRyZW4uAENhbm5vdCBhZGQgY2hpbGQ6IE5vZGVzIHdpdGggbWVhc3VyZSBmdW5jdGlvbnMgY2Fubm90IGhhdmUgY2hpbGRyZW4uAChudWxsKQBpbmRleCA8IDQwOTYgJiYgIlNtYWxsVmFsdWVCdWZmZXIgY2FuIG9ubHkgaG9sZCB1cCB0byA0MDk2IGNodW5rcyIAJXMKAAEAAAADAAAAAAAAAAIAAAADAAAAAQAAAAIAAAAAAAAAAQAAAAEAQYwmCwdpaQB2AHZpAEGgJgs3ox0AAKEdAADhHQAA2x0AAOEdAADbHQAAaWlpZmlmaQDUHQAApB0AAHZpaQClHQAA6B0AAGlpaQBB4CYLCcQAAADFAAAAxgBB9CYLDsQAAADHAAAAyAAAANQdAEGQJws+ox0AAOEdAADbHQAA4R0AANsdAADoHQAA4x0AAOgdAABpaWlpAAAAANQdAAC5HQAA1B0AALsdAAC8HQAA6B0AQdgnCwnJAAAAygAAAMsAQewnCxbJAAAAzAAAAMgAAAC/HQAA1B0AAL8dAEGQKAuiA9QdAAC/HQAA2x0AANUdAAB2aWlpaQAAANQdAAC/HQAA4R0AAHZpaWYAAAAA1B0AAL8dAADbHQAAdmlpaQAAAADUHQAAvx0AANUdAADVHQAAwB0AANsdAADbHQAAwB0AANUdAADAHQAAaQBkaWkAdmlpZAAAxB0AAMQdAAC/HQAA1B0AAMQdAADUHQAAxB0AAMMdAADUHQAAxB0AANsdAADUHQAAxB0AANsdAADiHQAAdmlpaWQAAADUHQAAxB0AAOIdAADbHQAAxR0AAMIdAADFHQAA2x0AAMIdAADFHQAA4h0AAMUdAADiHQAAxR0AANsdAABkaWlpAAAAAOEdAADEHQAA2x0AAGZpaWkAAAAA1B0AAMQdAADEHQAA3B0AANQdAADEHQAAxB0AANwdAADFHQAAxB0AAMQdAADEHQAAxB0AANwdAADUHQAAxB0AANUdAADVHQAAxB0AANQdAADEHQAAoR0AANQdAADEHQAAuR0AANUdAADFHQAAAAAAANQdAADEHQAA4h0AAOIdAADbHQAAdmlpZGRpAADBHQAAxR0AQcArC0EZAAoAGRkZAAAAAAUAAAAAAAAJAAAAAAsAAAAAAAAAABkAEQoZGRkDCgcAAQAJCxgAAAkGCwAACwAGGQAAABkZGQBBkSwLIQ4AAAAAAAAAABkACg0ZGRkADQAAAgAJDgAAAAkADgAADgBByywLAQwAQdcsCxUTAAAAABMAAAAACQwAAAAAAAwAAAwAQYUtCwEQAEGRLQsVDwAAAAQPAAAAAAkQAAAAAAAQAAAQAEG/LQsBEgBByy0LHhEAAAAAEQAAAAAJEgAAAAAAEgAAEgAAGgAAABoaGgBBgi4LDhoAAAAaGhoAAAAAAAAJAEGzLgsBFABBvy4LFRcAAAAAFwAAAAAJFAAAAAAAFAAAFABB7S4LARYAQfkuCycVAAAAABUAAAAACRYAAAAAABYAABYAADAxMjM0NTY3ODlBQkNERUYAQcQvCwHSAEHsLwsI//////////8AQbAwCwkQIgEAAAAAAAUAQcQwCwHNAEHcMAsKzgAAAM8AAAD8HQBB9DALAQIAQYQxCwj//////////wBByDELAQUAQdQxCwHQAEHsMQsOzgAAANEAAAAIHgAAAAQAQYQyCwEBAEGUMgsF/////woAQdgyCwHT",!te(oe)){var le=oe;oe=_.locateFile?_.locateFile(le,R):R+le}function he(){var ot=oe;try{if(ot==oe&&F)return new Uint8Array(F);if(te(ot))try{var ut=fr(ot.slice(37)),Bt=new Uint8Array(ut.length);for(ot=0;ot<ut.length;++ot)Bt[ot]=ut.charCodeAt(ot);var Lt=Bt}catch{throw Error("Converting base64 string to bytes failed.")}else Lt=void 0;var $t=Lt;if($t)return $t;throw"both async and sync fetching of the wasm failed"}catch(Zt){Y(Zt)}}function ae(){return F||typeof fetch!="function"?Promise.resolve().then(function(){return he()}):fetch(oe,{credentials:"same-origin"}).then(function(ot){if(!ot.ok)throw"failed to load wasm binary file at '"+oe+"'";return ot.arrayBuffer()}).catch(function(){return he()})}function Q(ot){for(;0<ot.length;)ot.shift()(_)}function se(ot){if(ot===void 0)return"_unknown";ot=ot.replace(/[^a-zA-Z0-9_]/g,"$");var ut=ot.charCodeAt(0);return 48<=ut&&57>=ut?"_"+ot:ot}function Ae(ot,ut){return ot=se(ot),function(){return ut.apply(this,arguments)}}var ge=[{},{value:void 0},{value:null},{value:!0},{value:!1}],Ee=[];function ke(ot){var ut=Error,Bt=Ae(ot,function(Lt){this.name=ot,this.message=Lt,Lt=Error(Lt).stack,Lt!==void 0&&(this.stack=this.toString()+`
`+Lt.replace(/^Error(:[^\n]*)?\n/,""))});return Bt.prototype=Object.create(ut.prototype),Bt.prototype.constructor=Bt,Bt.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},Bt}var Se=void 0;function Ie(ot){throw new Se(ot)}var we=ot=>(ot||Ie("Cannot use deleted val. handle = "+ot),ge[ot].value),xe=ot=>{switch(ot){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var ut=Ee.length?Ee.pop():ge.length;return ge[ut]={ga:1,value:ot},ut}},Fe=void 0,Ge=void 0;function Oe(ot){for(var ut="";ee[ot];)ut+=Ge[ee[ot++]];return ut}var et=[];function Mt(){for(;et.length;){var ot=et.pop();ot.M.$=!1,ot.delete()}}var dt=void 0,mt={};function Ut(ot,ut){for(ut===void 0&&Ie("ptr should not be undefined");ot.R;)ut=ot.ba(ut),ot=ot.R;return ut}var St={};function vt(ot){ot=Ar(ot);var ut=Oe(ot);return zt(ot),ut}function It(ot,ut){var Bt=St[ot];return Bt===void 0&&Ie(ut+" has unknown type "+vt(ot)),Bt}function yt(){}var Tt=!1;function Wt(ot){--ot.count.value,ot.count.value===0&&(ot.T?ot.U.W(ot.T):ot.P.N.W(ot.O))}function ft(ot,ut,Bt){return ut===Bt?ot:Bt.R===void 0?null:(ot=ft(ot,ut,Bt.R),ot===null?null:Bt.na(ot))}var _t={};function Xt(ot,ut){return ut=Ut(ot,ut),mt[ut]}var Nt=void 0;function qt(ot){throw new Nt(ot)}function nr(ot,ut){return ut.P&&ut.O||qt("makeClassHandle requires ptr and ptrType"),!!ut.U!=!!ut.T&&qt("Both smartPtrType and smartPtr must be specified"),ut.count={value:1},ze(Object.create(ot,{M:{value:ut}}))}function ze(ot){return typeof FinalizationRegistry>"u"?(ze=ut=>ut,ot):(Tt=new FinalizationRegistry(ut=>{Wt(ut.M)}),ze=ut=>{var Bt=ut.M;return Bt.T&&Tt.register(ut,{M:Bt},ut),ut},yt=ut=>{Tt.unregister(ut)},ze(ot))}var Ce={};function Le(ot){for(;ot.length;){var ut=ot.pop();ot.pop()(ut)}}function Ze(ot){return this.fromWireType(ce[ot>>2])}var Je={},nt={};function rt(ot,ut,Bt){function Lt(Et){Et=Bt(Et),Et.length!==ot.length&&qt("Mismatched type converter count");for(var sr=0;sr<ot.length;++sr)Dt(ot[sr],Et[sr])}ot.forEach(function(Et){nt[Et]=ut});var $t=Array(ut.length),Zt=[],Vt=0;ut.forEach((Et,sr)=>{St.hasOwnProperty(Et)?$t[sr]=St[Et]:(Zt.push(Et),Je.hasOwnProperty(Et)||(Je[Et]=[]),Je[Et].push(()=>{$t[sr]=St[Et],++Vt,Vt===Zt.length&&Lt($t)}))}),Zt.length===0&&Lt($t)}function He(ot){switch(ot){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+ot)}}function Dt(ot,ut,Bt={}){if(!("argPackAdvance"in ut))throw new TypeError("registerType registeredInstance requires argPackAdvance");var Lt=ut.name;if(ot||Ie('type "'+Lt+'" must have a positive integer typeid pointer'),St.hasOwnProperty(ot)){if(Bt.ua)return;Ie("Cannot register type '"+Lt+"' twice")}St[ot]=ut,delete nt[ot],Je.hasOwnProperty(ot)&&(ut=Je[ot],delete Je[ot],ut.forEach($t=>$t()))}function Rt(ot){Ie(ot.M.P.N.name+" instance already deleted")}function De(){}function We(ot,ut,Bt){if(ot[ut].S===void 0){var Lt=ot[ut];ot[ut]=function(){return ot[ut].S.hasOwnProperty(arguments.length)||Ie("Function '"+Bt+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+ot[ut].S+")!"),ot[ut].S[arguments.length].apply(this,arguments)},ot[ut].S=[],ot[ut].S[Lt.Z]=Lt}}function Ve(ot,ut){_.hasOwnProperty(ot)?(Ie("Cannot register public name '"+ot+"' twice"),We(_,ot,ot),_.hasOwnProperty(void 0)&&Ie("Cannot register multiple overloads of a function with the same number of arguments (undefined)!"),_[ot].S[void 0]=ut):_[ot]=ut}function qe(ot,ut,Bt,Lt,$t,Zt,Vt,Et){this.name=ot,this.constructor=ut,this.X=Bt,this.W=Lt,this.R=$t,this.pa=Zt,this.ba=Vt,this.na=Et,this.ja=[]}function pt(ot,ut,Bt){for(;ut!==Bt;)ut.ba||Ie("Expected null or instance of "+Bt.name+", got an instance of "+ut.name),ot=ut.ba(ot),ut=ut.R;return ot}function At(ot,ut){return ut===null?(this.ea&&Ie("null is not a valid "+this.name),0):(ut.M||Ie('Cannot pass "'+$e(ut)+'" as a '+this.name),ut.M.O||Ie("Cannot pass deleted object as a pointer of type "+this.name),pt(ut.M.O,ut.M.P.N,this.N))}function jt(ot,ut){if(ut===null){if(this.ea&&Ie("null is not a valid "+this.name),this.da){var Bt=this.fa();return ot!==null&&ot.push(this.W,Bt),Bt}return 0}if(ut.M||Ie('Cannot pass "'+$e(ut)+'" as a '+this.name),ut.M.O||Ie("Cannot pass deleted object as a pointer of type "+this.name),!this.ca&&ut.M.P.ca&&Ie("Cannot convert argument of type "+(ut.M.U?ut.M.U.name:ut.M.P.name)+" to parameter type "+this.name),Bt=pt(ut.M.O,ut.M.P.N,this.N),this.da)switch(ut.M.T===void 0&&Ie("Passing raw pointer to smart pointer is illegal"),this.Ba){case 0:ut.M.U===this?Bt=ut.M.T:Ie("Cannot convert argument of type "+(ut.M.U?ut.M.U.name:ut.M.P.name)+" to parameter type "+this.name);break;case 1:Bt=ut.M.T;break;case 2:if(ut.M.U===this)Bt=ut.M.T;else{var Lt=ut.clone();Bt=this.xa(Bt,xe(function(){Lt.delete()})),ot!==null&&ot.push(this.W,Bt)}break;default:Ie("Unsupporting sharing policy")}return Bt}function rr(ot,ut){return ut===null?(this.ea&&Ie("null is not a valid "+this.name),0):(ut.M||Ie('Cannot pass "'+$e(ut)+'" as a '+this.name),ut.M.O||Ie("Cannot pass deleted object as a pointer of type "+this.name),ut.M.P.ca&&Ie("Cannot convert argument of type "+ut.M.P.name+" to parameter type "+this.name),pt(ut.M.O,ut.M.P.N,this.N))}function Ke(ot,ut,Bt,Lt){this.name=ot,this.N=ut,this.ea=Bt,this.ca=Lt,this.da=!1,this.W=this.xa=this.fa=this.ka=this.Ba=this.wa=void 0,ut.R!==void 0?this.toWireType=jt:(this.toWireType=Lt?At:rr,this.V=null)}function Ne(ot,ut){_.hasOwnProperty(ot)||qt("Replacing nonexistant public symbol"),_[ot]=ut,_[ot].Z=void 0}function Ye(ot,ut){var Bt=[];return function(){if(Bt.length=0,Object.assign(Bt,arguments),ot.includes("j")){var Lt=_["dynCall_"+ot];Lt=Bt&&Bt.length?Lt.apply(null,[ut].concat(Bt)):Lt.call(null,ut)}else Lt=ye.get(ut).apply(null,Bt);return Lt}}function st(ot,ut){ot=Oe(ot);var Bt=ot.includes("j")?Ye(ot,ut):ye.get(ut);return typeof Bt!="function"&&Ie("unknown function pointer with signature "+ot+": "+ut),Bt}var bt=void 0;function Qe(ot,ut){function Bt(Zt){$t[Zt]||St[Zt]||(nt[Zt]?nt[Zt].forEach(Bt):(Lt.push(Zt),$t[Zt]=!0))}var Lt=[],$t={};throw ut.forEach(Bt),new bt(ot+": "+Lt.map(vt).join([", "]))}function Re(ot,ut,Bt,Lt,$t){var Zt=ut.length;2>Zt&&Ie("argTypes array size mismatch! Must at least get return value and 'this' types!");var Vt=ut[1]!==null&&Bt!==null,Et=!1;for(Bt=1;Bt<ut.length;++Bt)if(ut[Bt]!==null&&ut[Bt].V===void 0){Et=!0;break}var sr=ut[0].name!=="void",cr=Zt-2,yr=Array(cr),Er=[],ct=[];return function(){if(arguments.length!==cr&&Ie("function "+ot+" called with "+arguments.length+" arguments, expected "+cr+" args!"),ct.length=0,Er.length=Vt?2:1,Er[0]=$t,Vt){var Be=ut[1].toWireType(ct,this);Er[1]=Be}for(var Ue=0;Ue<cr;++Ue)yr[Ue]=ut[Ue+2].toWireType(ct,arguments[Ue]),Er.push(yr[Ue]);if(Ue=Lt.apply(null,Er),Et)Le(ct);else for(var tt=Vt?1:2;tt<ut.length;tt++){var gt=tt===1?Be:yr[tt-2];ut[tt].V!==null&&ut[tt].V(gt)}return Be=sr?ut[0].fromWireType(Ue):void 0,Be}}function Pe(ot,ut){for(var Bt=[],Lt=0;Lt<ot;Lt++)Bt.push(fe[ut+4*Lt>>2]);return Bt}function Me(ot){4<ot&&--ge[ot].ga===0&&(ge[ot]=void 0,Ee.push(ot))}function $e(ot){if(ot===null)return"null";var ut=typeof ot;return ut==="object"||ut==="array"||ut==="function"?ot.toString():""+ot}function it(ot,ut){switch(ut){case 2:return function(Bt){return this.fromWireType(de[Bt>>2])};case 3:return function(Bt){return this.fromWireType(pe[Bt>>3])};default:throw new TypeError("Unknown float type: "+ot)}}function kt(ot,ut,Bt){switch(ut){case 0:return Bt?function(Lt){return J[Lt]}:function(Lt){return ee[Lt]};case 1:return Bt?function(Lt){return ie[Lt>>1]}:function(Lt){return ne[Lt>>1]};case 2:return Bt?function(Lt){return ce[Lt>>2]}:function(Lt){return fe[Lt>>2]};default:throw new TypeError("Unknown integer type: "+ot)}}function xt(ot,ut){for(var Bt="",Lt=0;!(Lt>=ut/2);++Lt){var $t=ie[ot+2*Lt>>1];if($t==0)break;Bt+=String.fromCharCode($t)}return Bt}function Ot(ot,ut,Bt){if(Bt===void 0&&(Bt=2147483647),2>Bt)return 0;Bt-=2;var Lt=ut;Bt=Bt<2*ot.length?Bt/2:ot.length;for(var $t=0;$t<Bt;++$t)ie[ut>>1]=ot.charCodeAt($t),ut+=2;return ie[ut>>1]=0,ut-Lt}function Jt(ot){return 2*ot.length}function tr(ot,ut){for(var Bt=0,Lt="";!(Bt>=ut/4);){var $t=ce[ot+4*Bt>>2];if($t==0)break;++Bt,65536<=$t?($t-=65536,Lt+=String.fromCharCode(55296|$t>>10,56320|$t&1023)):Lt+=String.fromCharCode($t)}return Lt}function br(ot,ut,Bt){if(Bt===void 0&&(Bt=2147483647),4>Bt)return 0;var Lt=ut;Bt=Lt+Bt-4;for(var $t=0;$t<ot.length;++$t){var Zt=ot.charCodeAt($t);if(55296<=Zt&&57343>=Zt){var Vt=ot.charCodeAt(++$t);Zt=65536+((Zt&1023)<<10)|Vt&1023}if(ce[ut>>2]=Zt,ut+=4,ut+4>Bt)break}return ce[ut>>2]=0,ut-Lt}function ar(ot){for(var ut=0,Bt=0;Bt<ot.length;++Bt){var Lt=ot.charCodeAt(Bt);55296<=Lt&&57343>=Lt&&++Bt,ut+=4}return ut}var _r={};function or(ot){var ut=_r[ot];return ut===void 0?Oe(ot):ut}var gr=[];function xr(ot){var ut=gr.length;return gr.push(ot),ut}function vr(ot,ut){for(var Bt=Array(ot),Lt=0;Lt<ot;++Lt)Bt[Lt]=It(fe[ut+4*Lt>>2],"parameter "+Lt);return Bt}var Cr=[],Sr=[null,[],[]];Se=_.BindingError=ke("BindingError"),_.count_emval_handles=function(){for(var ot=0,ut=5;ut<ge.length;++ut)ge[ut]!==void 0&&++ot;return ot},_.get_first_emval=function(){for(var ot=5;ot<ge.length;++ot)if(ge[ot]!==void 0)return ge[ot];return null},Fe=_.PureVirtualError=ke("PureVirtualError");for(var dr=Array(256),wr=0;256>wr;++wr)dr[wr]=String.fromCharCode(wr);Ge=dr,_.getInheritedInstanceCount=function(){return Object.keys(mt).length},_.getLiveInheritedInstances=function(){var ot=[],ut;for(ut in mt)mt.hasOwnProperty(ut)&&ot.push(mt[ut]);return ot},_.flushPendingDeletes=Mt,_.setDelayFunction=function(ot){dt=ot,et.length&&dt&&dt(Mt)},Nt=_.InternalError=ke("InternalError"),De.prototype.isAliasOf=function(ot){if(!(this instanceof De&&ot instanceof De))return!1;var ut=this.M.P.N,Bt=this.M.O,Lt=ot.M.P.N;for(ot=ot.M.O;ut.R;)Bt=ut.ba(Bt),ut=ut.R;for(;Lt.R;)ot=Lt.ba(ot),Lt=Lt.R;return ut===Lt&&Bt===ot},De.prototype.clone=function(){if(this.M.O||Rt(this),this.M.aa)return this.M.count.value+=1,this;var ot=ze,ut=Object,Bt=ut.create,Lt=Object.getPrototypeOf(this),$t=this.M;return ot=ot(Bt.call(ut,Lt,{M:{value:{count:$t.count,$:$t.$,aa:$t.aa,O:$t.O,P:$t.P,T:$t.T,U:$t.U}}})),ot.M.count.value+=1,ot.M.$=!1,ot},De.prototype.delete=function(){this.M.O||Rt(this),this.M.$&&!this.M.aa&&Ie("Object already scheduled for deletion"),yt(this),Wt(this.M),this.M.aa||(this.M.T=void 0,this.M.O=void 0)},De.prototype.isDeleted=function(){return!this.M.O},De.prototype.deleteLater=function(){return this.M.O||Rt(this),this.M.$&&!this.M.aa&&Ie("Object already scheduled for deletion"),et.push(this),et.length===1&&dt&&dt(Mt),this.M.$=!0,this},Ke.prototype.qa=function(ot){return this.ka&&(ot=this.ka(ot)),ot},Ke.prototype.ha=function(ot){this.W&&this.W(ot)},Ke.prototype.argPackAdvance=8,Ke.prototype.readValueFromPointer=Ze,Ke.prototype.deleteObject=function(ot){ot!==null&&ot.delete()},Ke.prototype.fromWireType=function(ot){function ut(){return this.da?nr(this.N.X,{P:this.wa,O:Bt,U:this,T:ot}):nr(this.N.X,{P:this,O:ot})}var Bt=this.qa(ot);if(!Bt)return this.ha(ot),null;var Lt=Xt(this.N,Bt);if(Lt!==void 0)return Lt.M.count.value===0?(Lt.M.O=Bt,Lt.M.T=ot,Lt.clone()):(Lt=Lt.clone(),this.ha(ot),Lt);if(Lt=this.N.pa(Bt),Lt=_t[Lt],!Lt)return ut.call(this);Lt=this.ca?Lt.la:Lt.pointerType;var $t=ft(Bt,this.N,Lt.N);return $t===null?ut.call(this):this.da?nr(Lt.N.X,{P:Lt,O:$t,U:this,T:ot}):nr(Lt.N.X,{P:Lt,O:$t})},bt=_.UnboundTypeError=ke("UnboundTypeError");var fr=typeof atob=="function"?atob:function(ot){var ut="",Bt=0;ot=ot.replace(/[^A-Za-z0-9\+\/=]/g,"");do{var Lt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(ot.charAt(Bt++)),$t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(ot.charAt(Bt++)),Zt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(ot.charAt(Bt++)),Vt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(ot.charAt(Bt++));Lt=Lt<<2|$t>>4,$t=($t&15)<<4|Zt>>2;var Et=(Zt&3)<<6|Vt;ut+=String.fromCharCode(Lt),Zt!==64&&(ut+=String.fromCharCode($t)),Vt!==64&&(ut+=String.fromCharCode(Et))}while(Bt<ot.length);return ut},hr={l:function(ot,ut,Bt,Lt){Y("Assertion failed: "+(ot?V(ee,ot):"")+", at: "+[ut?ut?V(ee,ut):"":"unknown filename",Bt,Lt?Lt?V(ee,Lt):"":"unknown function"])},q:function(ot,ut,Bt){ot=Oe(ot),ut=It(ut,"wrapper"),Bt=we(Bt);var Lt=[].slice,$t=ut.N,Zt=$t.X,Vt=$t.R.X,Et=$t.R.constructor;ot=Ae(ot,function(){$t.R.ja.forEach(function(cr){if(this[cr]===Vt[cr])throw new Fe("Pure virtual function "+cr+" must be implemented in JavaScript")}.bind(this)),Object.defineProperty(this,"__parent",{value:Zt}),this.__construct.apply(this,Lt.call(arguments))}),Zt.__construct=function(){this===Zt&&Ie("Pass correct 'this' to __construct");var cr=Et.implement.apply(void 0,[this].concat(Lt.call(arguments)));yt(cr);var yr=cr.M;cr.notifyOnDestruction(),yr.aa=!0,Object.defineProperties(this,{M:{value:yr}}),ze(this),cr=yr.O,cr=Ut($t,cr),mt.hasOwnProperty(cr)?Ie("Tried to register registered instance: "+cr):mt[cr]=this},Zt.__destruct=function(){this===Zt&&Ie("Pass correct 'this' to __destruct"),yt(this);var cr=this.M.O;cr=Ut($t,cr),mt.hasOwnProperty(cr)?delete mt[cr]:Ie("Tried to unregister unregistered instance: "+cr)},ot.prototype=Object.create(Zt);for(var sr in Bt)ot.prototype[sr]=Bt[sr];return xe(ot)},j:function(ot){var ut=Ce[ot];delete Ce[ot];var Bt=ut.fa,Lt=ut.W,$t=ut.ia,Zt=$t.map(Vt=>Vt.ta).concat($t.map(Vt=>Vt.za));rt([ot],Zt,Vt=>{var Et={};return $t.forEach((sr,cr)=>{var yr=Vt[cr],Er=sr.ra,ct=sr.sa,Be=Vt[cr+$t.length],Ue=sr.ya,tt=sr.Aa;Et[sr.oa]={read:gt=>yr.fromWireType(Er(ct,gt)),write:(gt,je)=>{var Xe=[];Ue(tt,gt,Be.toWireType(Xe,je)),Le(Xe)}}}),[{name:ut.name,fromWireType:function(sr){var cr={},yr;for(yr in Et)cr[yr]=Et[yr].read(sr);return Lt(sr),cr},toWireType:function(sr,cr){for(var yr in Et)if(!(yr in cr))throw new TypeError('Missing field:  "'+yr+'"');var Er=Bt();for(yr in Et)Et[yr].write(Er,cr[yr]);return sr!==null&&sr.push(Lt,Er),Er},argPackAdvance:8,readValueFromPointer:Ze,V:Lt}]})},v:function(){},B:function(ot,ut,Bt,Lt,$t){var Zt=He(Bt);ut=Oe(ut),Dt(ot,{name:ut,fromWireType:function(Vt){return!!Vt},toWireType:function(Vt,Et){return Et?Lt:$t},argPackAdvance:8,readValueFromPointer:function(Vt){if(Bt===1)var Et=J;else if(Bt===2)Et=ie;else if(Bt===4)Et=ce;else throw new TypeError("Unknown boolean type size: "+ut);return this.fromWireType(Et[Vt>>Zt])},V:null})},f:function(ot,ut,Bt,Lt,$t,Zt,Vt,Et,sr,cr,yr,Er,ct){yr=Oe(yr),Zt=st($t,Zt),Et&&(Et=st(Vt,Et)),cr&&(cr=st(sr,cr)),ct=st(Er,ct);var Be=se(yr);Ve(Be,function(){Qe("Cannot construct "+yr+" due to unbound types",[Lt])}),rt([ot,ut,Bt],Lt?[Lt]:[],function(Ue){if(Ue=Ue[0],Lt)var tt=Ue.N,gt=tt.X;else gt=De.prototype;Ue=Ae(Be,function(){if(Object.getPrototypeOf(this)!==je)throw new Se("Use 'new' to construct "+yr);if(Xe.Y===void 0)throw new Se(yr+" has no accessible constructor");var Ct=Xe.Y[arguments.length];if(Ct===void 0)throw new Se("Tried to invoke ctor of "+yr+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(Xe.Y).toString()+") parameters instead!");return Ct.apply(this,arguments)});var je=Object.create(gt,{constructor:{value:Ue}});Ue.prototype=je;var Xe=new qe(yr,Ue,je,ct,tt,Zt,Et,cr);tt=new Ke(yr,Xe,!0,!1),gt=new Ke(yr+"*",Xe,!1,!1);var lt=new Ke(yr+" const*",Xe,!1,!0);return _t[ot]={pointerType:gt,la:lt},Ne(Be,Ue),[tt,gt,lt]})},d:function(ot,ut,Bt,Lt,$t,Zt,Vt){var Et=Pe(Bt,Lt);ut=Oe(ut),Zt=st($t,Zt),rt([],[ot],function(sr){function cr(){Qe("Cannot call "+yr+" due to unbound types",Et)}sr=sr[0];var yr=sr.name+"."+ut;ut.startsWith("@@")&&(ut=Symbol[ut.substring(2)]);var Er=sr.N.constructor;return Er[ut]===void 0?(cr.Z=Bt-1,Er[ut]=cr):(We(Er,ut,yr),Er[ut].S[Bt-1]=cr),rt([],Et,function(ct){return ct=Re(yr,[ct[0],null].concat(ct.slice(1)),null,Zt,Vt),Er[ut].S===void 0?(ct.Z=Bt-1,Er[ut]=ct):Er[ut].S[Bt-1]=ct,[]}),[]})},p:function(ot,ut,Bt,Lt,$t,Zt){0<ut||Y();var Vt=Pe(ut,Bt);$t=st(Lt,$t),rt([],[ot],function(Et){Et=Et[0];var sr="constructor "+Et.name;if(Et.N.Y===void 0&&(Et.N.Y=[]),Et.N.Y[ut-1]!==void 0)throw new Se("Cannot register multiple constructors with identical number of parameters ("+(ut-1)+") for class '"+Et.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return Et.N.Y[ut-1]=()=>{Qe("Cannot construct "+Et.name+" due to unbound types",Vt)},rt([],Vt,function(cr){return cr.splice(1,0,null),Et.N.Y[ut-1]=Re(sr,cr,null,$t,Zt),[]}),[]})},a:function(ot,ut,Bt,Lt,$t,Zt,Vt,Et){var sr=Pe(Bt,Lt);ut=Oe(ut),Zt=st($t,Zt),rt([],[ot],function(cr){function yr(){Qe("Cannot call "+Er+" due to unbound types",sr)}cr=cr[0];var Er=cr.name+"."+ut;ut.startsWith("@@")&&(ut=Symbol[ut.substring(2)]),Et&&cr.N.ja.push(ut);var ct=cr.N.X,Be=ct[ut];return Be===void 0||Be.S===void 0&&Be.className!==cr.name&&Be.Z===Bt-2?(yr.Z=Bt-2,yr.className=cr.name,ct[ut]=yr):(We(ct,ut,Er),ct[ut].S[Bt-2]=yr),rt([],sr,function(Ue){return Ue=Re(Er,Ue,cr,Zt,Vt),ct[ut].S===void 0?(Ue.Z=Bt-2,ct[ut]=Ue):ct[ut].S[Bt-2]=Ue,[]}),[]})},A:function(ot,ut){ut=Oe(ut),Dt(ot,{name:ut,fromWireType:function(Bt){var Lt=we(Bt);return Me(Bt),Lt},toWireType:function(Bt,Lt){return xe(Lt)},argPackAdvance:8,readValueFromPointer:Ze,V:null})},n:function(ot,ut,Bt){Bt=He(Bt),ut=Oe(ut),Dt(ot,{name:ut,fromWireType:function(Lt){return Lt},toWireType:function(Lt,$t){return $t},argPackAdvance:8,readValueFromPointer:it(ut,Bt),V:null})},e:function(ot,ut,Bt,Lt,$t){ut=Oe(ut),$t===-1&&($t=4294967295),$t=He(Bt);var Zt=Et=>Et;if(Lt===0){var Vt=32-8*Bt;Zt=Et=>Et<<Vt>>>Vt}Bt=ut.includes("unsigned")?function(Et,sr){return sr>>>0}:function(Et,sr){return sr},Dt(ot,{name:ut,fromWireType:Zt,toWireType:Bt,argPackAdvance:8,readValueFromPointer:kt(ut,$t,Lt!==0),V:null})},b:function(ot,ut,Bt){function Lt(Zt){Zt>>=2;var Vt=fe;return new $t(K,Vt[Zt+1],Vt[Zt])}var $t=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][ut];Bt=Oe(Bt),Dt(ot,{name:Bt,fromWireType:Lt,argPackAdvance:8,readValueFromPointer:Lt},{ua:!0})},o:function(ot,ut){ut=Oe(ut);var Bt=ut==="std::string";Dt(ot,{name:ut,fromWireType:function(Lt){var $t=fe[Lt>>2],Zt=Lt+4;if(Bt)for(var Vt=Zt,Et=0;Et<=$t;++Et){var sr=Zt+Et;if(Et==$t||ee[sr]==0){if(Vt=Vt?V(ee,Vt,sr-Vt):"",cr===void 0)var cr=Vt;else cr+="\0",cr+=Vt;Vt=sr+1}}else{for(cr=Array($t),Et=0;Et<$t;++Et)cr[Et]=String.fromCharCode(ee[Zt+Et]);cr=cr.join("")}return zt(Lt),cr},toWireType:function(Lt,$t){$t instanceof ArrayBuffer&&($t=new Uint8Array($t));var Zt,Vt=typeof $t=="string";if(Vt||$t instanceof Uint8Array||$t instanceof Uint8ClampedArray||$t instanceof Int8Array||Ie("Cannot pass non-string to std::string"),Bt&&Vt){var Et=0;for(Zt=0;Zt<$t.length;++Zt){var sr=$t.charCodeAt(Zt);127>=sr?Et++:2047>=sr?Et+=2:55296<=sr&&57343>=sr?(Et+=4,++Zt):Et+=3}Zt=Et}else Zt=$t.length;if(Et=ur(4+Zt+1),sr=Et+4,fe[Et>>2]=Zt,Bt&&Vt){if(Vt=sr,sr=Zt+1,Zt=ee,0<sr){sr=Vt+sr-1;for(var cr=0;cr<$t.length;++cr){var yr=$t.charCodeAt(cr);if(55296<=yr&&57343>=yr){var Er=$t.charCodeAt(++cr);yr=65536+((yr&1023)<<10)|Er&1023}if(127>=yr){if(Vt>=sr)break;Zt[Vt++]=yr}else{if(2047>=yr){if(Vt+1>=sr)break;Zt[Vt++]=192|yr>>6}else{if(65535>=yr){if(Vt+2>=sr)break;Zt[Vt++]=224|yr>>12}else{if(Vt+3>=sr)break;Zt[Vt++]=240|yr>>18,Zt[Vt++]=128|yr>>12&63}Zt[Vt++]=128|yr>>6&63}Zt[Vt++]=128|yr&63}}Zt[Vt]=0}}else if(Vt)for(Vt=0;Vt<Zt;++Vt)cr=$t.charCodeAt(Vt),255<cr&&(zt(sr),Ie("String has UTF-16 code units that do not fit in 8 bits")),ee[sr+Vt]=cr;else for(Vt=0;Vt<Zt;++Vt)ee[sr+Vt]=$t[Vt];return Lt!==null&&Lt.push(zt,Et),Et},argPackAdvance:8,readValueFromPointer:Ze,V:function(Lt){zt(Lt)}})},i:function(ot,ut,Bt){if(Bt=Oe(Bt),ut===2)var Lt=xt,$t=Ot,Zt=Jt,Vt=()=>ne,Et=1;else ut===4&&(Lt=tr,$t=br,Zt=ar,Vt=()=>fe,Et=2);Dt(ot,{name:Bt,fromWireType:function(sr){for(var cr=fe[sr>>2],yr=Vt(),Er,ct=sr+4,Be=0;Be<=cr;++Be){var Ue=sr+4+Be*ut;(Be==cr||yr[Ue>>Et]==0)&&(ct=Lt(ct,Ue-ct),Er===void 0?Er=ct:(Er+="\0",Er+=ct),ct=Ue+ut)}return zt(sr),Er},toWireType:function(sr,cr){typeof cr!="string"&&Ie("Cannot pass non-string to C++ string type "+Bt);var yr=Zt(cr),Er=ur(4+yr+ut);return fe[Er>>2]=yr>>Et,$t(cr,Er+4,yr+ut),sr!==null&&sr.push(zt,Er),Er},argPackAdvance:8,readValueFromPointer:Ze,V:function(sr){zt(sr)}})},k:function(ot,ut,Bt,Lt,$t,Zt){Ce[ot]={name:Oe(ut),fa:st(Bt,Lt),W:st($t,Zt),ia:[]}},h:function(ot,ut,Bt,Lt,$t,Zt,Vt,Et,sr,cr){Ce[ot].ia.push({oa:Oe(ut),ta:Bt,ra:st(Lt,$t),sa:Zt,za:Vt,ya:st(Et,sr),Aa:cr})},C:function(ot,ut){ut=Oe(ut),Dt(ot,{va:!0,name:ut,argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},s:function(ot,ut,Bt,Lt,$t){ot=gr[ot],ut=we(ut),Bt=or(Bt);var Zt=[];return fe[Lt>>2]=xe(Zt),ot(ut,Bt,Zt,$t)},t:function(ot,ut,Bt,Lt){ot=gr[ot],ut=we(ut),Bt=or(Bt),ot(ut,Bt,null,Lt)},g:Me,m:function(ot,ut){var Bt=vr(ot,ut),Lt=Bt[0];ut=Lt.name+"_$"+Bt.slice(1).map(function(Vt){return Vt.name}).join("_")+"$";var $t=Cr[ut];if($t!==void 0)return $t;var Zt=Array(ot-1);return $t=xr((Vt,Et,sr,cr)=>{for(var yr=0,Er=0;Er<ot-1;++Er)Zt[Er]=Bt[Er+1].readValueFromPointer(cr+yr),yr+=Bt[Er+1].argPackAdvance;for(Vt=Vt[Et].apply(Vt,Zt),Er=0;Er<ot-1;++Er)Bt[Er+1].ma&&Bt[Er+1].ma(Zt[Er]);if(!Lt.va)return Lt.toWireType(sr,Vt)}),Cr[ut]=$t},D:function(ot){4<ot&&(ge[ot].ga+=1)},r:function(ot){var ut=we(ot);Le(ut),Me(ot)},c:function(){Y("")},x:function(ot,ut,Bt){ee.copyWithin(ot,ut,ut+Bt)},w:function(ot){var ut=ee.length;if(ot>>>=0,2147483648<ot)return!1;for(var Bt=1;4>=Bt;Bt*=2){var Lt=ut*(1+.2/Bt);Lt=Math.min(Lt,ot+100663296);var $t=Math;Lt=Math.max(ot,Lt),$t=$t.min.call($t,2147483648,Lt+(65536-Lt%65536)%65536);e:{try{L.grow($t-K.byteLength+65535>>>16),ve();var Zt=1;break e}catch{}Zt=void 0}if(Zt)return!0}return!1},z:function(){return 52},u:function(){return 70},y:function(ot,ut,Bt,Lt){for(var $t=0,Zt=0;Zt<Bt;Zt++){var Vt=fe[ut>>2],Et=fe[ut+4>>2];ut+=8;for(var sr=0;sr<Et;sr++){var cr=ee[Vt+sr],yr=Sr[ot];cr===0||cr===10?((ot===1?P:D)(V(yr,0)),yr.length=0):yr.push(cr)}$t+=Et}return fe[Lt>>2]=$t,0}};(function(){function ot($t){_.asm=$t.exports,L=_.asm.E,ve(),ye=_.asm.J,be.unshift(_.asm.F),O--,_.monitorRunDependencies&&_.monitorRunDependencies(O),O==0&&z&&($t=z,z=null,$t())}function ut($t){ot($t.instance)}function Bt($t){return ae().then(function(Zt){return WebAssembly.instantiate(Zt,Lt)}).then(function(Zt){return Zt}).then($t,function(Zt){D("failed to asynchronously prepare wasm: "+Zt),Y(Zt)})}var Lt={a:hr};if(O++,_.monitorRunDependencies&&_.monitorRunDependencies(O),_.instantiateWasm)try{return _.instantiateWasm(Lt,ot)}catch($t){D("Module.instantiateWasm callback failed with error: "+$t),B($t)}return(function(){return F||typeof WebAssembly.instantiateStreaming!="function"||te(oe)||typeof fetch!="function"?Bt(ut):fetch(oe,{credentials:"same-origin"}).then(function($t){return WebAssembly.instantiateStreaming($t,Lt).then(ut,function(Zt){return D("wasm streaming compile failed: "+Zt),D("falling back to ArrayBuffer instantiation"),Bt(ut)})})})().catch(B),{}})(),_.___wasm_call_ctors=function(){return(_.___wasm_call_ctors=_.asm.F).apply(null,arguments)};var Ar=_.___getTypeName=function(){return(Ar=_.___getTypeName=_.asm.G).apply(null,arguments)};_.__embind_initialize_bindings=function(){return(_.__embind_initialize_bindings=_.asm.H).apply(null,arguments)};var ur=_._malloc=function(){return(ur=_._malloc=_.asm.I).apply(null,arguments)},zt=_._free=function(){return(zt=_._free=_.asm.K).apply(null,arguments)};_.dynCall_jiji=function(){return(_.dynCall_jiji=_.asm.L).apply(null,arguments)};var Kt;z=function ot(){Kt||lr(),Kt||(z=ot)};function lr(){function ot(){if(!Kt&&(Kt=!0,_.calledRun=!0,!U)){if(Q(be),I(_),_.onRuntimeInitialized&&_.onRuntimeInitialized(),_.postRun)for(typeof _.postRun=="function"&&(_.postRun=[_.postRun]);_.postRun.length;){var ut=_.postRun.shift();Te.unshift(ut)}Q(Te)}}if(!(0<O)){if(_.preRun)for(typeof _.preRun=="function"&&(_.preRun=[_.preRun]);_.preRun.length;)ue();Q(_e),0<O||(_.setStatus?(_.setStatus("Running..."),setTimeout(function(){setTimeout(function(){_.setStatus("")},1),ot()},1)):ot())}}if(_.preInit)for(typeof _.preInit=="function"&&(_.preInit=[_.preInit]);0<_.preInit.length;)_.preInit.pop()();return lr(),A.ready})})();let Align=(function(E){return E[E.Auto=0]="Auto",E[E.FlexStart=1]="FlexStart",E[E.Center=2]="Center",E[E.FlexEnd=3]="FlexEnd",E[E.Stretch=4]="Stretch",E[E.Baseline=5]="Baseline",E[E.SpaceBetween=6]="SpaceBetween",E[E.SpaceAround=7]="SpaceAround",E[E.SpaceEvenly=8]="SpaceEvenly",E})({}),BoxSizing=(function(E){return E[E.BorderBox=0]="BorderBox",E[E.ContentBox=1]="ContentBox",E})({}),Dimension=(function(E){return E[E.Width=0]="Width",E[E.Height=1]="Height",E})({}),Direction=(function(E){return E[E.Inherit=0]="Inherit",E[E.LTR=1]="LTR",E[E.RTL=2]="RTL",E})({}),Display=(function(E){return E[E.Flex=0]="Flex",E[E.None=1]="None",E[E.Contents=2]="Contents",E})({}),Edge=(function(E){return E[E.Left=0]="Left",E[E.Top=1]="Top",E[E.Right=2]="Right",E[E.Bottom=3]="Bottom",E[E.Start=4]="Start",E[E.End=5]="End",E[E.Horizontal=6]="Horizontal",E[E.Vertical=7]="Vertical",E[E.All=8]="All",E})({}),Errata=(function(E){return E[E.None=0]="None",E[E.StretchFlexBasis=1]="StretchFlexBasis",E[E.AbsolutePositionWithoutInsetsExcludesPadding=2]="AbsolutePositionWithoutInsetsExcludesPadding",E[E.AbsolutePercentAgainstInnerSize=4]="AbsolutePercentAgainstInnerSize",E[E.All=2147483647]="All",E[E.Classic=2147483646]="Classic",E})({}),ExperimentalFeature=(function(E){return E[E.WebFlexBasis=0]="WebFlexBasis",E})({}),FlexDirection=(function(E){return E[E.Column=0]="Column",E[E.ColumnReverse=1]="ColumnReverse",E[E.Row=2]="Row",E[E.RowReverse=3]="RowReverse",E})({}),Gutter=(function(E){return E[E.Column=0]="Column",E[E.Row=1]="Row",E[E.All=2]="All",E})({}),Justify=(function(E){return E[E.FlexStart=0]="FlexStart",E[E.Center=1]="Center",E[E.FlexEnd=2]="FlexEnd",E[E.SpaceBetween=3]="SpaceBetween",E[E.SpaceAround=4]="SpaceAround",E[E.SpaceEvenly=5]="SpaceEvenly",E})({}),LogLevel=(function(E){return E[E.Error=0]="Error",E[E.Warn=1]="Warn",E[E.Info=2]="Info",E[E.Debug=3]="Debug",E[E.Verbose=4]="Verbose",E[E.Fatal=5]="Fatal",E})({}),MeasureMode=(function(E){return E[E.Undefined=0]="Undefined",E[E.Exactly=1]="Exactly",E[E.AtMost=2]="AtMost",E})({}),NodeType=(function(E){return E[E.Default=0]="Default",E[E.Text=1]="Text",E})({}),Overflow=(function(E){return E[E.Visible=0]="Visible",E[E.Hidden=1]="Hidden",E[E.Scroll=2]="Scroll",E})({}),PositionType=(function(E){return E[E.Static=0]="Static",E[E.Relative=1]="Relative",E[E.Absolute=2]="Absolute",E})({}),Unit=(function(E){return E[E.Undefined=0]="Undefined",E[E.Point=1]="Point",E[E.Percent=2]="Percent",E[E.Auto=3]="Auto",E})({}),Wrap=(function(E){return E[E.NoWrap=0]="NoWrap",E[E.Wrap=1]="Wrap",E[E.WrapReverse=2]="WrapReverse",E})({});const constants$3={ALIGN_AUTO:Align.Auto,ALIGN_FLEX_START:Align.FlexStart,ALIGN_CENTER:Align.Center,ALIGN_FLEX_END:Align.FlexEnd,ALIGN_STRETCH:Align.Stretch,ALIGN_BASELINE:Align.Baseline,ALIGN_SPACE_BETWEEN:Align.SpaceBetween,ALIGN_SPACE_AROUND:Align.SpaceAround,ALIGN_SPACE_EVENLY:Align.SpaceEvenly,BOX_SIZING_BORDER_BOX:BoxSizing.BorderBox,BOX_SIZING_CONTENT_BOX:BoxSizing.ContentBox,DIMENSION_WIDTH:Dimension.Width,DIMENSION_HEIGHT:Dimension.Height,DIRECTION_INHERIT:Direction.Inherit,DIRECTION_LTR:Direction.LTR,DIRECTION_RTL:Direction.RTL,DISPLAY_FLEX:Display.Flex,DISPLAY_NONE:Display.None,DISPLAY_CONTENTS:Display.Contents,EDGE_LEFT:Edge.Left,EDGE_TOP:Edge.Top,EDGE_RIGHT:Edge.Right,EDGE_BOTTOM:Edge.Bottom,EDGE_START:Edge.Start,EDGE_END:Edge.End,EDGE_HORIZONTAL:Edge.Horizontal,EDGE_VERTICAL:Edge.Vertical,EDGE_ALL:Edge.All,ERRATA_NONE:Errata.None,ERRATA_STRETCH_FLEX_BASIS:Errata.StretchFlexBasis,ERRATA_ABSOLUTE_POSITION_WITHOUT_INSETS_EXCLUDES_PADDING:Errata.AbsolutePositionWithoutInsetsExcludesPadding,ERRATA_ABSOLUTE_PERCENT_AGAINST_INNER_SIZE:Errata.AbsolutePercentAgainstInnerSize,ERRATA_ALL:Errata.All,ERRATA_CLASSIC:Errata.Classic,EXPERIMENTAL_FEATURE_WEB_FLEX_BASIS:ExperimentalFeature.WebFlexBasis,FLEX_DIRECTION_COLUMN:FlexDirection.Column,FLEX_DIRECTION_COLUMN_REVERSE:FlexDirection.ColumnReverse,FLEX_DIRECTION_ROW:FlexDirection.Row,FLEX_DIRECTION_ROW_REVERSE:FlexDirection.RowReverse,GUTTER_COLUMN:Gutter.Column,GUTTER_ROW:Gutter.Row,GUTTER_ALL:Gutter.All,JUSTIFY_FLEX_START:Justify.FlexStart,JUSTIFY_CENTER:Justify.Center,JUSTIFY_FLEX_END:Justify.FlexEnd,JUSTIFY_SPACE_BETWEEN:Justify.SpaceBetween,JUSTIFY_SPACE_AROUND:Justify.SpaceAround,JUSTIFY_SPACE_EVENLY:Justify.SpaceEvenly,LOG_LEVEL_ERROR:LogLevel.Error,LOG_LEVEL_WARN:LogLevel.Warn,LOG_LEVEL_INFO:LogLevel.Info,LOG_LEVEL_DEBUG:LogLevel.Debug,LOG_LEVEL_VERBOSE:LogLevel.Verbose,LOG_LEVEL_FATAL:LogLevel.Fatal,MEASURE_MODE_UNDEFINED:MeasureMode.Undefined,MEASURE_MODE_EXACTLY:MeasureMode.Exactly,MEASURE_MODE_AT_MOST:MeasureMode.AtMost,NODE_TYPE_DEFAULT:NodeType.Default,NODE_TYPE_TEXT:NodeType.Text,OVERFLOW_VISIBLE:Overflow.Visible,OVERFLOW_HIDDEN:Overflow.Hidden,OVERFLOW_SCROLL:Overflow.Scroll,POSITION_TYPE_STATIC:PositionType.Static,POSITION_TYPE_RELATIVE:PositionType.Relative,POSITION_TYPE_ABSOLUTE:PositionType.Absolute,UNIT_UNDEFINED:Unit.Undefined,UNIT_POINT:Unit.Point,UNIT_PERCENT:Unit.Percent,UNIT_AUTO:Unit.Auto,WRAP_NO_WRAP:Wrap.NoWrap,WRAP_WRAP:Wrap.Wrap,WRAP_WRAP_REVERSE:Wrap.WrapReverse};function wrapAssembly(E){function A(B,T,R){const P=B[T];B[T]=function(){for(var D=arguments.length,F=new Array(D),L=0;L<D;L++)F[L]=arguments[L];return R.call(this,P,...F)}}for(const B of["setPosition","setMargin","setFlexBasis","setWidth","setHeight","setMinWidth","setMinHeight","setMaxWidth","setMaxHeight","setPadding","setGap"]){const T={[Unit.Point]:E.Node.prototype[B],[Unit.Percent]:E.Node.prototype[`${B}Percent`],[Unit.Auto]:E.Node.prototype[`${B}Auto`]};A(E.Node.prototype,B,function(R){for(var P=arguments.length,D=new Array(P>1?P-1:0),F=1;F<P;F++)D[F-1]=arguments[F];const L=D.pop();let U,V;if(L==="auto")U=Unit.Auto,V=void 0;else if(typeof L=="object")U=L.unit,V=L.valueOf();else if(U=typeof L=="string"&&L.endsWith("%")?Unit.Percent:Unit.Point,V=parseFloat(L),L!==void 0&&!Number.isNaN(L)&&Number.isNaN(V))throw new Error(`Invalid value ${L} for ${B}`);if(!T[U])throw new Error(`Failed to execute "${B}": Unsupported unit '${L}'`);return V!==void 0?T[U].call(this,...D,V):T[U].call(this,...D)})}function _(B){return E.MeasureCallback.implement({measure:function(){const{width:T,height:R}=B(...arguments);return{width:T??NaN,height:R??NaN}}})}A(E.Node.prototype,"setMeasureFunc",function(B,T){return T?B.call(this,_(T)):this.unsetMeasureFunc()});function I(B){return E.DirtiedCallback.implement({dirtied:B})}return A(E.Node.prototype,"setDirtiedFunc",function(B,T){B.call(this,I(T))}),A(E.Config.prototype,"free",function(){E.Config.destroy(this)}),A(E.Node,"create",(B,T)=>T?E.Node.createWithConfig(T):E.Node.createDefault()),A(E.Node.prototype,"free",function(){E.Node.destroy(this)}),A(E.Node.prototype,"freeRecursive",function(){for(let B=0,T=this.getChildCount();B<T;++B)this.getChild(0).freeRecursive();this.free()}),A(E.Node.prototype,"calculateLayout",function(B){let T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN,P=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Direction.LTR;return B.call(this,T,R,P)}),{Config:E.Config,Node:E.Node,...constants$3}}async function loadYoga(){return wrapAssembly(await loadYoga$1())}let yoga;function getYoga(){return yoga}function setYoga(E){yoga=E}let yogaConfig;function setYogaConfig(E){yogaConfig=E}function getYogaConfig(){return yogaConfig}function getNumberFromStyle(E,A){return E?typeof E=="number"?E:typeof E=="string"&&E.endsWith("%")?(A??(A=1),A*(parseFloat(E)/100)):Number.isNaN(parseFloat(E))?0:parseFloat(E):0}function getTypeFromStyle(E){return typeof E=="number"?"number":E.endsWith("%")?"percentage":Number.isNaN(parseInt(E,10))?"keyword":"number"}function calculateCenterPosition(E,A,_){return(A[E]-_[E])/2}function calculateNonKeywordPosition(E,A,_,I,B){const T=A==="percentage"?I[_]-B[_]:1;return getNumberFromStyle(E)*T}function calculateWithDoubleValue(E,A,_){const[I,B]=E,T=getTypeFromStyle(I),R=getTypeFromStyle(B),P={x:void 0,y:void 0};switch(I){case"top":P.y=0;break;case"bottom":P.y=A.height-_.height;break;case"center":B==="left"||B==="right"?P.y=calculateCenterPosition("height",A,_):P.x=calculateCenterPosition("width",A,_);break;case"left":P.x=0;break;case"right":P.x=A.width-_.width;break;default:{const D=B==="top"||B==="bottom"||R!=="keyword"?"width":"height",F=D==="width"?"x":"y";P[F]=calculateNonKeywordPosition(I,T,D,A,_)}}switch(B){case"top":P.y=0;break;case"bottom":P.y=A.height-_.height;break;case"center":P.y===void 0?P.y=calculateCenterPosition("height",A,_):P.x=calculateCenterPosition("width",A,_);break;case"left":P.x=0;break;case"right":P.x=A.width-_.width;break;default:{const D=P.y===void 0?"y":"x",F=D==="y"?"height":"width";P[D]=calculateNonKeywordPosition(B,R,F,A,_)}}return P}function calculateAxisOffset(E,A,_,I){const B=E==="right"||E==="bottom",T=_==="percentage"?A*I:A;return B?-T:T}function calculateWithQuadValue(E,A,_){const[I,B,T,R]=E,P=getTypeFromStyle(I),D=getTypeFromStyle(B),F=getTypeFromStyle(T),L=getTypeFromStyle(R);if(D==="keyword"||L==="keyword")throw new Error("Invalid objectPosition value: second and fourth values must be numbers or percentages");if(P!=="keyword"||F!=="keyword")throw new Error("Invalid objectPosition value: first and third values must be keywords");const U=calculateWithDoubleValue([I,T],A,_),V={...U},K=getNumberFromStyle(B),J=getNumberFromStyle(R);return I==="left"||I==="right"?V.x=U.x+calculateAxisOffset(I,K,D,_.width):(I==="top"||I==="bottom")&&(V.y=U.y+calculateAxisOffset(I,K,D,_.height)),T==="left"||T==="right"?V.x=U.x+calculateAxisOffset(T,J,L,_.width):(T==="top"||T==="bottom")&&(V.y=U.y+calculateAxisOffset(T,J,L,_.height)),V}function calculateWithSingleValue(E,A,_){const I=E[0],B={x:void 0,y:void 0};switch(I){case"top":B.y=0,B.x=(A.width-_.width)/2;break;case"bottom":B.y=A.height-_.height,B.x=(A.width-_.width)/2;break;case"left":B.x=0,B.y=(A.height-_.height)/2;break;case"right":B.x=A.width-_.width,B.y=(A.height-_.height)/2;break;case"center":B.x=(A.width-_.width)/2,B.y=(A.height-_.height)/2;break;default:{const R=getTypeFromStyle(I)==="percentage"?A.width-_.width:1;B.x=getNumberFromStyle(I)*R,B.y=(A.height-_.height)/2}}return B}function calculatePositionSpecifier(E,A,_){if(!E)return{x:0,y:0};const I=typeof E=="string"?E.split(" "):[E];switch(I.length){case 1:return calculateWithSingleValue(I,A,_);case 2:return calculateWithDoubleValue(I,A,_);case 4:return calculateWithQuadValue(I,A,_);default:throw new Error("Invalid objectPosition value: must have 1, 2, or 4 values")}}const temp={width:0,height:0};function getPixiSize(E){const A=E.target.getLocalBounds(),_=E.target.scale;return temp.width=Math.abs(A.width*_.x),temp.height=Math.abs(A.height*_.y),temp}function nearlyEqual(E,A,_=.49){return Math.abs(E-A)<_}function debounce(E,A=0,_={}){let I,B;const T=_.maxWait?_.maxWait:A;let R,P,D,F=0;const L=!!_.leading,U="maxWait"in _,V=_.trailing??!0,K=A!==0&&typeof globalThis.requestAnimationFrame=="function";if(typeof E!="function")throw new TypeError("Expected a function");function J(Te){const ue=I,O=B;return I=B=void 0,F=Te,R=E.apply(O,ue),R}function ee(Te,ue){return K?(typeof P=="number"&&globalThis.cancelAnimationFrame(P),globalThis.requestAnimationFrame(Te)):setTimeout(Te,ue)}function ie(Te){if(K){globalThis.cancelAnimationFrame(Te);return}clearTimeout(Te)}function ne(Te){return F=Te,P=ee(de,A),L?J(Te):R}function ce(Te){const ue=Te-(D||0),O=Te-F,z=A-ue;return U?Math.min(z,T-O):z}function fe(Te){const ue=Te-(D||0),O=Te-F;return D===void 0||ue>=A||ue<0||U&&O>=T}function de(){const Te=Date.now();if(fe(Te))return pe(Te);P=ee(de,ce(Te))}function pe(Te){return P=void 0,V&&I?J(Te):(I=B=void 0,R)}function ve(){P!==void 0&&ie(P),F=0,I=D=B=P=void 0}function ye(){return P===void 0?R:pe(Date.now())}function _e(){return P!==void 0}function be(...Te){const ue=Date.now(),O=fe(ue);if(I=Te,B=this,D=ue,O){if(P===void 0)return ne(D);if(U)return P=ee(de,A),J(D)}return P===void 0&&(P=ee(de,A)),R}return be.cancel=ve,be.flush=ye,be.pending=_e,be}function throttle(E,A,_={}){const I=_.leading??!0,B=_.trailing??!0;if(typeof E!="function")throw new TypeError("Expected a function");return debounce(E,A,{leading:I,trailing:B,maxWait:A})}var __defProp$6=Object.defineProperty,__defNormalProp$6=(E,A,_)=>A in E?__defProp$6(E,A,{enumerable:!0,configurable:!0,writable:!0,value:_}):E[A]=_,__publicField$6=(E,A,_)=>__defNormalProp$6(E,typeof A!="symbol"?A+"":A,_);class LayoutSystem{constructor(){__publicField$6(this,"autoUpdate",!0),__publicField$6(this,"_debugEnabled",!1),__publicField$6(this,"_debugRenderer",null),__publicField$6(this,"_throttledUpdateSize"),__publicField$6(this,"_throttle",100),__publicField$6(this,"_modificationCount",50)}async init(A){setYoga(await loadYoga()),setYogaConfig(getYoga().Config.create());const{layout:_}=A??{},{autoUpdate:I,enableDebug:B,throttle:T,debugModificationCount:R}=_??{};B&&this.enableDebug(!0),I!==void 0&&(this.autoUpdate=I),this._throttle=T??this._throttle,this._throttledUpdateSize=throttle(P=>this._updateSize(P),this._throttle,{leading:!0,trailing:!0}),this._modificationCount=R??this._modificationCount}async enableDebug(A=!this._debugEnabled){if(this._debugEnabled=A,!this._debugRenderer){const _=await __vitePreload(()=>import("./DebugRenderer-C64prx4R.js"),[],import.meta.url);this._debugRenderer=new _.DebugRenderer}this._debugEnabled||this._debugRenderer.reset()}update(A){this._debugEnabled&&this._debugRenderer&&(this._debugRenderer.reset(),A.addChild(this._debugRenderer.holder)),this._throttle===0?this._updateSize(A):this._throttledUpdateSize(A),this.updateLayout(A)}prerender({container:A}){this.autoUpdate&&this.update(A)}_updateSize(A){const _=A._layout;if(_){const I=_.style;if(I.width==="intrinsic"||I.height==="intrinsic"){const B=getPixiSize(_);if(I.width==="intrinsic"){const T=_.yoga.getWidth().value;nearlyEqual(T,B.width)||(_.yoga.setWidth(B.width),_.invalidateRoot())}if(I.height==="intrinsic"){const T=_.yoga.getHeight().value;nearlyEqual(T,B.height)||(_.yoga.setHeight(B.height),_.invalidateRoot())}}if(!A.visible){_._onChildRemoved();return}}for(let I=0;I<A.children.length;I++)this._updateSize(A.children[I])}updateLayout(A){var _,I,B,T;const R=A._layout;if(A.visible){if(R){const P=R.yoga,D=R.style,F=(_=A.parent)==null?void 0:_.isOverflowContainer;if(!((I=A.parent)==null?void 0:I._layout)&&!F&&R._isDirty&&(R._isDirty=!1,P.calculateLayout(D.width,D.height,P.getDirection()??Direction.LTR)),P.hasNewLayout()||R._forceUpdate){P.markLayoutSeen(),R._forceUpdate=!1,R._computedLayout=P.getComputedLayout();const U=calculatePositionSpecifier(D.transformOrigin,R._computedLayout,{width:0,height:0});R._computedPixiLayout={...A.computeLayoutData(R._computedLayout),originX:U.x,originY:U.y},A.emit("layout",R),(B=A.onLayout)==null||B.call(A,R),A._onUpdate()}this._debugEnabled&&(R._styles.custom.debug||R._modificationCount>this._modificationCount&&R._styles.custom.debugHeat!==!1)&&((T=this._debugRenderer)==null||T.render(R))}for(let P=0;P<A.children.length;P++)this.updateLayout(A.children[P])}}destroy(){!this._debugEnabled&&this._debugRenderer&&this._debugRenderer.destroy()}}__publicField$6(LayoutSystem,"extension",{type:[ExtensionType.WebGLSystem,ExtensionType.WebGPUSystem],name:"layout"});const ALIGN_CONTENT_MAP={"flex-start":Align.FlexStart,"flex-end":Align.FlexEnd,center:Align.Center,stretch:Align.Stretch,"space-between":Align.SpaceBetween,"space-around":Align.SpaceAround,"space-evenly":Align.SpaceEvenly},ALIGN_ITEMS_MAP={"flex-start":Align.FlexStart,"flex-end":Align.FlexEnd,center:Align.Center,stretch:Align.Stretch,baseline:Align.Baseline},BOX_SIZING_MAP={"border-box":BoxSizing.BorderBox,"content-box":BoxSizing.ContentBox},DIRECTION_MAP={ltr:Direction.LTR,rtl:Direction.RTL},DISPLAY_MAP={none:Display.None,flex:Display.Flex,contents:Display.Contents},FLEX_DIRECTION_MAP={row:FlexDirection.Row,column:FlexDirection.Column,"row-reverse":FlexDirection.RowReverse,"column-reverse":FlexDirection.ColumnReverse},FLEX_WRAP_MAP={wrap:Wrap.Wrap,nowrap:Wrap.NoWrap,"wrap-reverse":Wrap.WrapReverse},JUSTIFY_CONTENT_MAP={"flex-start":Justify.FlexStart,"flex-end":Justify.FlexEnd,center:Justify.Center,"space-between":Justify.SpaceBetween,"space-around":Justify.SpaceAround,"space-evenly":Justify.SpaceEvenly},OVERFLOW_MAP={visible:Overflow.Visible,hidden:Overflow.Hidden,scroll:Overflow.Scroll},POSITION_MAP={absolute:PositionType.Absolute,relative:PositionType.Relative,static:PositionType.Static},styleSetters={alignContent:(E,A)=>E.setAlignContent(alignContent(A)),alignItems:(E,A)=>E.setAlignItems(alignItems(A)),alignSelf:(E,A)=>E.setAlignSelf(alignItems(A)),aspectRatio:(E,A)=>E.setAspectRatio(A),borderBottomWidth:(E,A)=>E.setBorder(Edge.Bottom,A),borderEndWidth:(E,A)=>E.setBorder(Edge.End,A),borderLeftWidth:(E,A)=>E.setBorder(Edge.Left,A),borderRightWidth:(E,A)=>E.setBorder(Edge.Right,A),borderStartWidth:(E,A)=>E.setBorder(Edge.Start,A),borderTopWidth:(E,A)=>E.setBorder(Edge.Top,A),borderWidth:(E,A)=>E.setBorder(Edge.All,A),borderInlineWidth:(E,A)=>E.setBorder(Edge.Horizontal,A),borderBlockWidth:(E,A)=>E.setBorder(Edge.Vertical,A),bottom:(E,A)=>E.setPosition(Edge.Bottom,A),boxSizing:(E,A)=>E.setBoxSizing(boxSizing(A)),direction:(E,A)=>E.setDirection(direction(A)),display:(E,A)=>E.setDisplay(display(A)),end:(E,A)=>E.setPosition(Edge.End,A),flex:(E,A)=>E.setFlex(A),flexBasis:(E,A)=>E.setFlexBasis(A),flexDirection:(E,A)=>E.setFlexDirection(flexDirection(A)),rowGap:(E,A)=>E.setGap(Gutter.Row,A),gap:(E,A)=>E.setGap(Gutter.All,A),columnGap:(E,A)=>E.setGap(Gutter.Column,A),flexGrow:(E,A)=>E.setFlexGrow(A),flexShrink:(E,A)=>E.setFlexShrink(A),flexWrap:(E,A)=>E.setFlexWrap(flexWrap(A)),height:(E,A)=>E.setHeight(A),justifyContent:(E,A)=>E.setJustifyContent(justifyContent(A)),left:(E,A)=>E.setPosition(Edge.Left,A),margin:(E,A)=>E.setMargin(Edge.All,A),marginBottom:(E,A)=>E.setMargin(Edge.Bottom,A),marginEnd:(E,A)=>E.setMargin(Edge.End,A),marginLeft:(E,A)=>E.setMargin(Edge.Left,A),marginRight:(E,A)=>E.setMargin(Edge.Right,A),marginStart:(E,A)=>E.setMargin(Edge.Start,A),marginTop:(E,A)=>E.setMargin(Edge.Top,A),marginInline:(E,A)=>E.setMargin(Edge.Horizontal,A),marginBlock:(E,A)=>E.setMargin(Edge.Vertical,A),maxHeight:(E,A)=>E.setMaxHeight(A),maxWidth:(E,A)=>E.setMaxWidth(A),minHeight:(E,A)=>E.setMinHeight(A),minWidth:(E,A)=>E.setMinWidth(A),overflow:(E,A)=>E.setOverflow(overflow(A)),padding:(E,A)=>E.setPadding(Edge.All,A),paddingBottom:(E,A)=>E.setPadding(Edge.Bottom,A),paddingEnd:(E,A)=>E.setPadding(Edge.End,A),paddingLeft:(E,A)=>E.setPadding(Edge.Left,A),paddingRight:(E,A)=>E.setPadding(Edge.Right,A),paddingStart:(E,A)=>E.setPadding(Edge.Start,A),paddingTop:(E,A)=>E.setPadding(Edge.Top,A),paddingInline:(E,A)=>E.setPadding(Edge.Horizontal,A),paddingBlock:(E,A)=>E.setPadding(Edge.Vertical,A),position:(E,A)=>E.setPositionType(position(A)),right:(E,A)=>E.setPosition(Edge.Right,A),start:(E,A)=>E.setPosition(Edge.Start,A),top:(E,A)=>E.setPosition(Edge.Top,A),insetInline:(E,A)=>E.setPosition(Edge.Horizontal,A),insetBlock:(E,A)=>E.setPosition(Edge.Vertical,A),inset:(E,A)=>E.setPosition(Edge.All,A),width:(E,A)=>E.setWidth(A)};function alignContent(E){if(E in ALIGN_CONTENT_MAP)return ALIGN_CONTENT_MAP[E];throw new Error(`"${E}" is not a valid value for alignContent`)}function alignItems(E){if(E in ALIGN_ITEMS_MAP)return ALIGN_ITEMS_MAP[E];throw new Error(`"${E}" is not a valid value for alignItems`)}function boxSizing(E){if(E in BOX_SIZING_MAP)return BOX_SIZING_MAP[E];throw new Error(`"${E}" is not a valid value for boxSizing`)}function direction(E){if(E in DIRECTION_MAP)return DIRECTION_MAP[E];throw new Error(`"${E}" is not a valid value for direction`)}function display(E){if(E in DISPLAY_MAP)return DISPLAY_MAP[E];throw new Error(`"${E}" is not a valid value for display`)}function flexDirection(E){if(E in FLEX_DIRECTION_MAP)return FLEX_DIRECTION_MAP[E];throw new Error(`"${E}" is not a valid value for flexDirection`)}function flexWrap(E){if(E in FLEX_WRAP_MAP)return FLEX_WRAP_MAP[E];throw new Error(`"${E}" is not a valid value for flexWrap`)}function justifyContent(E){if(E in JUSTIFY_CONTENT_MAP)return JUSTIFY_CONTENT_MAP[E];throw new Error(`"${E}" is not a valid value for justifyContent`)}function overflow(E){if(E in OVERFLOW_MAP)return OVERFLOW_MAP[E];throw new Error(`"${E}" is not a valid value for overflow`)}function position(E){if(E in POSITION_MAP)return POSITION_MAP[E];throw new Error(`"${E}" is not a valid value for position`)}function applyStyle(E,A={}){for(const[_,I]of Object.entries(A))try{const B=styleSetters[_];B&&B(E,I)}catch{}if(A.width!==void 0){const _=A.left!==void 0&&A.right!==void 0?"auto":A.width;E.setWidth(_)}if(A.height!==void 0){const _=A.top!==void 0&&A.bottom!==void 0?"auto":A.height;E.setHeight(_)}}function formatStyles(E,A){let I={...E._styles.custom,...A};I={...{...Layout.defaultStyle.shared,...E.target instanceof ViewContainer||I.isLeaf||Layout.defaultStyle.shared.isLeaf?Layout.defaultStyle.leaf:Layout.defaultStyle.container},...I};const T={...I},R=I.width==="intrinsic",P=I.height==="intrinsic";if(R||P){const{width:D,height:F}=getPixiSize(E);R&&(T.width=D),P&&(T.height=F)}return{custom:I,yoga:T}}function onChildAdded(E,A){var _;let I=A.layout,B=-1;if(!I&&A.isOverflowContainer&&(I=(_=A.parent)==null?void 0:_.layout,B=A.children.indexOf(E.target),A=A.parent),I){const T=E.yoga.getParent();if(T&&T.removeChild(E.yoga),A.children.indexOf(E.target)===A.children.length-1&&B===-1){I.yoga.insertChild(E.yoga,I.yoga.getChildCount());return}for(let R=0;R<A.children.length;R++){const P=A.children[R];if(P.layout&&P.visible&&B++,P===E.target)break}if(B===-1)return;I.yoga.insertChild(E.yoga,B)}}function onChildRemoved(E){const A=E.yoga.getParent();A&&A.removeChild(E.yoga)}var __defProp$5=Object.defineProperty,__defNormalProp$5=(E,A,_)=>A in E?__defProp$5(E,A,{enumerable:!0,configurable:!0,writable:!0,value:_}):E[A]=_,__publicField$5=(E,A,_)=>__defNormalProp$5(E,typeof A!="symbol"?A+"":A,_);class Layout{constructor({target:A}){__publicField$5(this,"yoga"),__publicField$5(this,"target"),__publicField$5(this,"_isDirty",!1),__publicField$5(this,"_computedPixiLayout",{x:0,y:0,offsetX:0,offsetY:0,scaleX:1,scaleY:1,originX:0,originY:0}),__publicField$5(this,"_computedLayout",{left:0,right:0,top:0,bottom:0,width:0,height:0}),__publicField$5(this,"_styles",{custom:{},yoga:{}}),__publicField$5(this,"_modificationCount",0),__publicField$5(this,"_forceUpdate",!1),__publicField$5(this,"hasParent",!1),__publicField$5(this,"_trackedStyleKeys",["borderRadius","borderColor","backgroundColor","objectFit","objectPosition","transformOrigin","isLeaf"]),this.target=A,this.yoga=getYoga().Node.create(getYogaConfig()),A.on("added",this._onChildAdded,this),A.on("removed",this._onChildRemoved,this),A.on("destroyed",this.destroy,this)}get style(){return this._styles.custom}get computedLayout(){return this._computedLayout}get computedPixiLayout(){return this._computedPixiLayout}get realX(){return this.target.localTransform.tx}get realY(){return this.target.localTransform.ty}get realScaleX(){return this.target.localTransform.a}get realScaleY(){return this.target.localTransform.d}setStyle(A){const _=formatStyles(this,A),I=JSON.stringify(this._styles.custom)!==JSON.stringify(_.custom),B=JSON.stringify(this._styles.yoga)!==JSON.stringify(_.yoga),T=I||B,R=this._trackedStyleKeys.some(P=>_.custom[P]!==this._styles.custom[P]);this._styles=_,R&&(this._forceUpdate=!0),T&&(applyStyle(this.yoga,this._styles.yoga),this.target._onUpdate(),this.invalidateRoot())}invalidateRoot(){const A=this.getRoot();A._layout._isDirty=!0,A._onUpdate(),this._modificationCount++}forceUpdate(){this._forceUpdate=!0}getRoot(){var A,_;let I=this.target;for(;(A=I.parent)!=null&&A._layout||(_=I.parent)!=null&&_.isOverflowContainer;)I=I.parent,I.isOverflowContainer&&(I=I.parent);return I}_onChildAdded(A){this.hasParent||(this.hasParent=!0,this.invalidateRoot(),onChildAdded(this,A))}_onChildRemoved(){this.hasParent&&(this.hasParent=!1,this.invalidateRoot(),onChildRemoved(this))}destroy(){this.invalidateRoot(),this.yoga.free(),this.target.off("added",this._onChildAdded,this),this.target.off("removed",this._onChildRemoved,this),this._styles=null,this._computedPixiLayout=null,this._computedLayout=null,this.target=null,this.hasParent=!1}}__publicField$5(Layout,"defaultStyle",{leaf:{width:"intrinsic",height:"intrinsic"},container:{width:"auto",height:"auto"},shared:{transformOrigin:"50%",objectPosition:"center",flexShrink:1,flexDirection:"row",alignContent:"stretch",flexWrap:"nowrap",overflow:"visible"}});function calculateObjectFit(E,A,_){let I=1,B=1;switch(E){case"fill":I=A.width/_.width,B=A.height/_.height;break;case"contain":{const T=Math.min(A.width/_.width,A.height/_.height);I=T,B=T;break}case"cover":{const T=Math.max(A.width/_.width,A.height/_.height);I=T,B=T;break}case"none":I=1,B=1;break;case"scale-down":{const T=Math.min(1,A.width/_.width,A.height/_.height);I=T,B=T;break}}return{offsetScaleX:I,offsetScaleY:B}}function baseComputeLayoutData(E,A,_,I){const B=E.getLocalBounds(),T=E.layout.style.objectFit||_;let{offsetScaleX:R,offsetScaleY:P}=calculateObjectFit(T,A,B);const D={width:B.width*R,height:B.height*P};let{x:F,y:L}=calculatePositionSpecifier(E.layout.style.objectPosition,A,D);I?(F+=B.width*R*I._x,L+=B.height*P*I._y):(F-=B.minX*R,L-=B.minY*P);const U=E.layout.style.applySizeDirectly;return(U===!0||U==null&&(E instanceof TilingSprite$1||E instanceof NineSliceSprite$1))&&(E.width=B.width*R,E.height=B.height*P,R=1,P=1),{x:A.left,y:A.top,offsetX:F,offsetY:L,scaleX:R,scaleY:P}}const visibility=Object.getOwnPropertyDescriptor(Container.prototype,"visible"),mixin$2={_layout:null,get layout(){return this._layout??null},set layout(E){if(E=E===!0?{}:E,!E){this._layout&&(this._layout.destroy(),this._layout=null,this.updateLocalTransform=Container.prototype.updateLocalTransform,Object.defineProperty(Container.prototype,"visible",visibility));return}if(!this._layout){this._layout=new Layout({target:this}),Object.defineProperty(Container.prototype,"visible",{...visibility,set(A){visibility.set.call(this,A),this.layout&&(A&&this.parent?this.layout._onChildAdded(this.parent):this.layout._onChildRemoved())}});for(const A of this.children)A.layout&&A.visible&&(A.layout._onChildRemoved(),A.layout._onChildAdded(this));this.parent&&this.visible&&this._layout._onChildAdded(this.parent)}this._layout.setStyle(E),this.updateLocalTransform=this.updateLocalTransformWithLayout,this._onUpdate()},updateLocalTransformWithLayout(){const E=this._didContainerChangeTick;if(this._didLocalTransformChangeId===E)return;this._didLocalTransformChangeId=E;const A=this._layout,{x:_,y:I,offsetX:B,offsetY:T,scaleX:R,scaleY:P,originX:D,originY:F}=A._computedPixiLayout,L=this.localTransform,{rotation:U,skew:V,scale:K,position:J}=this,ee=U+V._y,ie=U-V._x,ne=Math.cos(ee)*K._x,ce=Math.sin(ee)*K._x,fe=-Math.sin(ie)*K._y,de=Math.cos(ie)*K._y,pe=J._x+_-D*ne-F*fe,ve=J._y+I-D*ce-F*de;L.a=ne*R,L.b=ce*R,L.c=fe*P,L.d=de*P,L.tx=pe+(B*ne+T*fe)+D,L.ty=ve+(B*ce+T*de)+F},computeLayoutData(E){const A=this._layout,{isLeaf:_}=A._styles.custom;return _?baseComputeLayoutData(this,E,"fill"):{x:E.left,y:E.top,offsetX:0,offsetY:0,scaleX:1,scaleY:1}}};extensions.mixin(Container,mixin$2);const tempScale=new Point$1(0,0),mixin$1={computeLayoutData(E){const A=this._style;tempScale.copyFrom(this.scale),this.scale=1,A.wordWrap&&(A.wordWrapWidth=E.width);let _=this.getLocalBounds();const I=this.layout.style.objectFit||"scale-down",{offsetScaleX:B,offsetScaleY:T}=calculateObjectFit(I,E,_);A.wordWrap&&(A.wordWrapWidth=E.width/Math.min(1,Math.max(B,T))),_=this.getLocalBounds();const R={width:_.width*B,height:_.height*T};let{x:P,y:D}=calculatePositionSpecifier(this.layout.style.objectPosition,E,R);return P+=_.width*B*this.anchor._x,D+=_.height*T*this.anchor._y,this.layout.style.applySizeDirectly===!0&&(this.width=_.width*B,this.height=_.height*T),this.scale.copyFrom(tempScale),{x:E.left,y:E.top,offsetX:P,offsetY:D,scaleX:B,scaleY:T}}};extensions.mixin(AbstractText,mixin$1);const text=Object.getOwnPropertyDescriptor(AbstractText.prototype,"text");Object.defineProperty(AbstractText.prototype,"text",{...text,set(E){var A;const _=text.get.call(this);text.set.call(this,E),_!==E&&((A=this.layout)==null||A.forceUpdate())}});const mixin={computeLayoutData(E){return baseComputeLayoutData(this,E,"fill",this._anchor)}};extensions.mixin(ViewContainer,mixin);extensions.add(LayoutSystem);const _map=new Map,provide=(E,A)=>(_map.set(E,A),A),inject=E=>_map.get(E);let Context$1=class{_map=new Map;parent;provide(A,_){return this._map.set(A,_),_}consume(A){return this._map.get(A)??this.parent?.consume(A)}hook(A){this.parent=A}};class ScopedClass{context=new Context$1;hook(A){return this.context.hook(A),this}}async function i$2(E){var A;const _={importPixi:!1,...E};_.app&&(_.renderer=_.app.renderer,_.stage=_.app.stage),_.importPixi&&!_.pixi&&(_.pixi=await __vitePreload(()=>Promise.resolve().then(()=>index),void 0,import.meta.url)),window.__PIXI_DEVTOOLS__={...window.__PIXI_DEVTOOLS__||{},app:_.app,stage:_.stage,renderer:_.renderer,extensions:[...((A=window.__PIXI_DEVTOOLS__)==null?void 0:A.extensions)||[],..._.extensions||[]],plugins:{}}}class State{sidebar="CLOSED";_maps=new Map([["sidebar",new Set]]);on(A,_){this._maps.get(A)?.add(_)}toggleSidebar(A){const _=inject("game"),I=inject("ui/app"),B=inject("ui/sidepanel"),T=inject("ui/sidepanel/timing");if(!(!_||!B||!I||!T)){switch(A&&(this.sidebar=A==="CLOSED"?"OPENED":"CLOSED"),this.sidebar){case"OPENED":{this.sidebar="CLOSED";break}case"CLOSED":{this.sidebar="OPENED";break}}for(const R of this._maps.get("sidebar")??[])R(this.sidebar)}}}var Easing$1=Object.freeze({Linear:Object.freeze({None:function(E){return E},In:function(E){return E},Out:function(E){return E},InOut:function(E){return E}}),Quadratic:Object.freeze({In:function(E){return E*E},Out:function(E){return E*(2-E)},InOut:function(E){return(E*=2)<1?.5*E*E:-.5*(--E*(E-2)-1)}}),Cubic:Object.freeze({In:function(E){return E*E*E},Out:function(E){return--E*E*E+1},InOut:function(E){return(E*=2)<1?.5*E*E*E:.5*((E-=2)*E*E+2)}}),Quartic:Object.freeze({In:function(E){return E*E*E*E},Out:function(E){return 1- --E*E*E*E},InOut:function(E){return(E*=2)<1?.5*E*E*E*E:-.5*((E-=2)*E*E*E-2)}}),Quintic:Object.freeze({In:function(E){return E*E*E*E*E},Out:function(E){return--E*E*E*E*E+1},InOut:function(E){return(E*=2)<1?.5*E*E*E*E*E:.5*((E-=2)*E*E*E*E+2)}}),Sinusoidal:Object.freeze({In:function(E){return 1-Math.sin((1-E)*Math.PI/2)},Out:function(E){return Math.sin(E*Math.PI/2)},InOut:function(E){return .5*(1-Math.sin(Math.PI*(.5-E)))}}),Exponential:Object.freeze({In:function(E){return E===0?0:Math.pow(1024,E-1)},Out:function(E){return E===1?1:1-Math.pow(2,-10*E)},InOut:function(E){return E===0?0:E===1?1:(E*=2)<1?.5*Math.pow(1024,E-1):.5*(-Math.pow(2,-10*(E-1))+2)}}),Circular:Object.freeze({In:function(E){return 1-Math.sqrt(1-E*E)},Out:function(E){return Math.sqrt(1- --E*E)},InOut:function(E){return(E*=2)<1?-.5*(Math.sqrt(1-E*E)-1):.5*(Math.sqrt(1-(E-=2)*E)+1)}}),Elastic:Object.freeze({In:function(E){return E===0?0:E===1?1:-Math.pow(2,10*(E-1))*Math.sin((E-1.1)*5*Math.PI)},Out:function(E){return E===0?0:E===1?1:Math.pow(2,-10*E)*Math.sin((E-.1)*5*Math.PI)+1},InOut:function(E){return E===0?0:E===1?1:(E*=2,E<1?-.5*Math.pow(2,10*(E-1))*Math.sin((E-1.1)*5*Math.PI):.5*Math.pow(2,-10*(E-1))*Math.sin((E-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(E){var A=1.70158;return E===1?1:E*E*((A+1)*E-A)},Out:function(E){var A=1.70158;return E===0?0:--E*E*((A+1)*E+A)+1},InOut:function(E){var A=2.5949095;return(E*=2)<1?.5*(E*E*((A+1)*E-A)):.5*((E-=2)*E*((A+1)*E+A)+2)}}),Bounce:Object.freeze({In:function(E){return 1-Easing$1.Bounce.Out(1-E)},Out:function(E){return E<1/2.75?7.5625*E*E:E<2/2.75?7.5625*(E-=1.5/2.75)*E+.75:E<2.5/2.75?7.5625*(E-=2.25/2.75)*E+.9375:7.5625*(E-=2.625/2.75)*E+.984375},InOut:function(E){return E<.5?Easing$1.Bounce.In(E*2)*.5:Easing$1.Bounce.Out(E*2-1)*.5+.5}}),generatePow:function(E){return E===void 0&&(E=4),E=E<Number.EPSILON?Number.EPSILON:E,E=E>1e4?1e4:E,{In:function(A){return Math.pow(A,E)},Out:function(A){return 1-Math.pow(1-A,E)},InOut:function(A){return A<.5?Math.pow(A*2,E)/2:(1-Math.pow(2-A*2,E))/2+.5}}}}),now$1=function(){return performance.now()},Group=(function(){function E(){for(var A=[],_=0;_<arguments.length;_++)A[_]=arguments[_];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,A)}return E.prototype.getAll=function(){var A=this;return Object.keys(this._tweens).map(function(_){return A._tweens[_]})},E.prototype.removeAll=function(){this._tweens={}},E.prototype.add=function(){for(var A,_=[],I=0;I<arguments.length;I++)_[I]=arguments[I];for(var B=0,T=_;B<T.length;B++){var R=T[B];(A=R._group)===null||A===void 0||A.remove(R),R._group=this,this._tweens[R.getId()]=R,this._tweensAddedDuringUpdate[R.getId()]=R}},E.prototype.remove=function(){for(var A=[],_=0;_<arguments.length;_++)A[_]=arguments[_];for(var I=0,B=A;I<B.length;I++){var T=B[I];T._group=void 0,delete this._tweens[T.getId()],delete this._tweensAddedDuringUpdate[T.getId()]}},E.prototype.allStopped=function(){return this.getAll().every(function(A){return!A.isPlaying()})},E.prototype.update=function(A,_){A===void 0&&(A=now$1()),_===void 0&&(_=!0);var I=Object.keys(this._tweens);if(I.length!==0)for(;I.length>0;){this._tweensAddedDuringUpdate={};for(var B=0;B<I.length;B++){var T=this._tweens[I[B]],R=!_;T&&T.update(A,R)===!1&&!_&&this.remove(T)}I=Object.keys(this._tweensAddedDuringUpdate)}},E})(),Interpolation={Linear:function(E,A){var _=E.length-1,I=_*A,B=Math.floor(I),T=Interpolation.Utils.Linear;return A<0?T(E[0],E[1],I):A>1?T(E[_],E[_-1],_-I):T(E[B],E[B+1>_?_:B+1],I-B)},Utils:{Linear:function(E,A,_){return(A-E)*_+E}}},Sequence=(function(){function E(){}return E.nextId=function(){return E._nextId++},E._nextId=0,E})(),mainGroup=new Group,Tween=(function(){function E(A,_){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Easing$1.Linear.None,this._interpolationFunction=Interpolation.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=Sequence.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=A,typeof _=="object"?(this._group=_,_.add(this)):_===!0&&(this._group=mainGroup,mainGroup.add(this))}return E.prototype.getId=function(){return this._id},E.prototype.isPlaying=function(){return this._isPlaying},E.prototype.isPaused=function(){return this._isPaused},E.prototype.getDuration=function(){return this._duration},E.prototype.to=function(A,_){if(_===void 0&&(_=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=A,this._propertiesAreSetUp=!1,this._duration=_<0?0:_,this},E.prototype.duration=function(A){return A===void 0&&(A=1e3),this._duration=A<0?0:A,this},E.prototype.dynamic=function(A){return A===void 0&&(A=!1),this._isDynamic=A,this},E.prototype.start=function(A,_){if(A===void 0&&(A=now$1()),_===void 0&&(_=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var I in this._valuesStartRepeat)this._swapEndStartRepeatValues(I),this._valuesStart[I]=this._valuesStartRepeat[I]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=A,this._startTime+=this._delayTime,!this._propertiesAreSetUp||_){if(this._propertiesAreSetUp=!0,!this._isDynamic){var B={};for(var T in this._valuesEnd)B[T]=this._valuesEnd[T];this._valuesEnd=B}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,_)}return this},E.prototype.startFromCurrentValues=function(A){return this.start(A,!0)},E.prototype._setupProperties=function(A,_,I,B,T){for(var R in I){var P=A[R],D=Array.isArray(P),F=D?"array":typeof P,L=!D&&Array.isArray(I[R]);if(!(F==="undefined"||F==="function")){if(L){var U=I[R];if(U.length===0)continue;for(var V=[P],K=0,J=U.length;K<J;K+=1){var ee=this._handleRelativeValue(P,U[K]);if(isNaN(ee)){L=!1,console.warn("Found invalid interpolation list. Skipping.");break}V.push(ee)}L&&(I[R]=V)}if((F==="object"||D)&&P&&!L){_[R]=D?[]:{};var ie=P;for(var ne in ie)_[R][ne]=ie[ne];B[R]=D?[]:{};var U=I[R];if(!this._isDynamic){var ce={};for(var ne in U)ce[ne]=U[ne];I[R]=U=ce}this._setupProperties(ie,_[R],U,B[R],T)}else(typeof _[R]>"u"||T)&&(_[R]=P),D||(_[R]*=1),L?B[R]=I[R].slice().reverse():B[R]=_[R]||0}}},E.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},E.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},E.prototype.pause=function(A){return A===void 0&&(A=now$1()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=A,this)},E.prototype.resume=function(A){return A===void 0&&(A=now$1()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=A-this._pauseStart,this._pauseStart=0,this)},E.prototype.stopChainedTweens=function(){for(var A=0,_=this._chainedTweens.length;A<_;A++)this._chainedTweens[A].stop();return this},E.prototype.group=function(A){return A?(A.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},E.prototype.remove=function(){var A;return(A=this._group)===null||A===void 0||A.remove(this),this},E.prototype.delay=function(A){return A===void 0&&(A=0),this._delayTime=A,this},E.prototype.repeat=function(A){return A===void 0&&(A=0),this._initialRepeat=A,this._repeat=A,this},E.prototype.repeatDelay=function(A){return this._repeatDelayTime=A,this},E.prototype.yoyo=function(A){return A===void 0&&(A=!1),this._yoyo=A,this},E.prototype.easing=function(A){return A===void 0&&(A=Easing$1.Linear.None),this._easingFunction=A,this},E.prototype.interpolation=function(A){return A===void 0&&(A=Interpolation.Linear),this._interpolationFunction=A,this},E.prototype.chain=function(){for(var A=[],_=0;_<arguments.length;_++)A[_]=arguments[_];return this._chainedTweens=A,this},E.prototype.onStart=function(A){return this._onStartCallback=A,this},E.prototype.onEveryStart=function(A){return this._onEveryStartCallback=A,this},E.prototype.onUpdate=function(A){return this._onUpdateCallback=A,this},E.prototype.onRepeat=function(A){return this._onRepeatCallback=A,this},E.prototype.onComplete=function(A){return this._onCompleteCallback=A,this},E.prototype.onStop=function(A){return this._onStopCallback=A,this},E.prototype.update=function(A,_){var I=this,B;if(A===void 0&&(A=now$1()),_===void 0&&(_=E.autoStartOnUpdate),this._isPaused)return!0;var T;if(!this._goToEnd&&!this._isPlaying)if(_)this.start(A,!0);else return!1;if(this._goToEnd=!1,A<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var R=A-this._startTime,P=this._duration+((B=this._repeatDelayTime)!==null&&B!==void 0?B:this._delayTime),D=this._duration+this._repeat*P,F=function(){if(I._duration===0||R>D)return 1;var ee=Math.trunc(R/P),ie=R-ee*P,ne=Math.min(ie/I._duration,1);return ne===0&&R===I._duration?1:ne},L=F(),U=this._easingFunction(L);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,U),this._onUpdateCallback&&this._onUpdateCallback(this._object,L),this._duration===0||R>=this._duration)if(this._repeat>0){var V=Math.min(Math.trunc((R-this._duration)/P)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=V);for(T in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[T]=="string"&&(this._valuesStartRepeat[T]=this._valuesStartRepeat[T]+parseFloat(this._valuesEnd[T])),this._yoyo&&this._swapEndStartRepeatValues(T),this._valuesStart[T]=this._valuesStartRepeat[T];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=P*V,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var K=0,J=this._chainedTweens.length;K<J;K++)this._chainedTweens[K].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},E.prototype._updateProperties=function(A,_,I,B){for(var T in I)if(_[T]!==void 0){var R=_[T]||0,P=I[T],D=Array.isArray(A[T]),F=Array.isArray(P),L=!D&&F;L?A[T]=this._interpolationFunction(P,B):typeof P=="object"&&P?this._updateProperties(A[T],R,P,B):(P=this._handleRelativeValue(R,P),typeof P=="number"&&(A[T]=R+(P-R)*B))}},E.prototype._handleRelativeValue=function(A,_){return typeof _!="string"?_:_.charAt(0)==="+"||_.charAt(0)==="-"?A+parseFloat(_):parseFloat(_)},E.prototype._swapEndStartRepeatValues=function(A){var _=this._valuesStartRepeat[A],I=this._valuesEnd[A];typeof I=="string"?this._valuesStartRepeat[A]=this._valuesStartRepeat[A]+parseFloat(I):this._valuesStartRepeat[A]=this._valuesEnd[A],this._valuesEnd[A]=_},E.autoStartOnUpdate=!1,E})();Sequence.nextId;var TWEEN=mainGroup;TWEEN.getAll.bind(TWEEN);TWEEN.removeAll.bind(TWEEN);TWEEN.add.bind(TWEEN);TWEEN.remove.bind(TWEEN);TWEEN.update.bind(TWEEN);var src,hasRequiredSrc;function requireSrc(){if(hasRequiredSrc)return src;hasRequiredSrc=1;var E=4,A=.001,_=1e-7,I=10,B=11,T=1/(B-1),R=typeof Float32Array=="function";function P(ee,ie){return 1-3*ie+3*ee}function D(ee,ie){return 3*ie-6*ee}function F(ee){return 3*ee}function L(ee,ie,ne){return((P(ie,ne)*ee+D(ie,ne))*ee+F(ie))*ee}function U(ee,ie,ne){return 3*P(ie,ne)*ee*ee+2*D(ie,ne)*ee+F(ie)}function V(ee,ie,ne,ce,fe){var de,pe,ve=0;do pe=ie+(ne-ie)/2,de=L(pe,ce,fe)-ee,de>0?ne=pe:ie=pe;while(Math.abs(de)>_&&++ve<I);return pe}function K(ee,ie,ne,ce){for(var fe=0;fe<E;++fe){var de=U(ie,ne,ce);if(de===0)return ie;var pe=L(ie,ne,ce)-ee;ie-=pe/de}return ie}function J(ee){return ee}return src=function(ie,ne,ce,fe){if(!(0<=ie&&ie<=1&&0<=ce&&ce<=1))throw new Error("bezier x values must be in [0, 1] range");if(ie===ne&&ce===fe)return J;for(var de=R?new Float32Array(B):new Array(B),pe=0;pe<B;++pe)de[pe]=L(pe*T,ie,ce);function ve(ye){for(var _e=0,be=1,Te=B-1;be!==Te&&de[be]<=ye;++be)_e+=T;--be;var ue=(ye-de[be])/(de[be+1]-de[be]),O=_e+ue*T,z=U(O,ie,ce);return z>=A?K(ye,O,ie,ce):z===0?O:V(ye,_e,_e+T,ie,ce)}return function(_e){return _e===0?0:_e===1?1:L(ve(_e),ne,fe)}},src}var srcExports=requireSrc();const bezier=getDefaultExportFromCjs$1(srcExports),tweenGroup=new Group,defaultEasing=bezier(0,.4,0,1);class AnimationController{animations=new Map;addAnimation(A,_,I,B,T=200,R,P,D){this.animations.get(A)?.stop();const F=new Tween({value:_}).easing(R??defaultEasing).to({value:I},T).onUpdate(({value:L})=>{B(L)}).onComplete(()=>{this.animations.delete(A),tweenGroup.remove(F),P?.()}).onStop(()=>{this.animations.delete(A),tweenGroup.remove(F),D?.()}).start();return this.animations.set(A,F),tweenGroup.add(F),F}}const frameData={fps:0,deltaMS:0};class FPSSystem{static extension={type:[ExtensionType.WebGLSystem,ExtensionType.WebGPUSystem],name:"fps"};_renderer;_renderStart=0;_lastFrame=0;_fpsQueue=[];_msQueue=[];constructor(A){this._renderer=A}init(){this._renderer.runners.prerender.add(this),this._renderer.runners.postrender.add(this)}destroy(){this._renderer.runners.prerender.remove(this),this._renderer.runners.postrender.remove(this)}prerender(){this._renderStart=performance.now();const A=1e3/(this._renderStart-this._lastFrame);for(this._fpsQueue.push(A);this._fpsQueue.length>100;)this._fpsQueue.shift();frameData.fps=this._fpsQueue.reduce((_,I,B)=>_+I*((B+1)/this._fpsQueue.length),0)/((1/this._fpsQueue.length+1)*(this._fpsQueue.length/2)),this._lastFrame=this._renderStart}postrender(){const A=performance.now()-this._renderStart;for(this._msQueue.push(A);this._msQueue.length>100;)this._msQueue.shift();frameData.deltaMS=this._msQueue.reduce((T,R,P)=>T+R*((P+1)/this._msQueue.length),0)/((1/this._msQueue.length+1)*(this._msQueue.length/2)),inject("game").update();const I=inject("ui/main/viewer/gameplays/fps");I&&(I.text=`${Math.round(frameData.fps)} fps`);const B=inject("ui/main/viewer/gameplays/frametime");B&&(B.text=`${frameData.deltaMS.toFixed(2)} ms`)}}extensions.add(FPSSystem);const version$3="15.1.22",createExtendedExponentialRampToValueAutomationEvent=(E,A,_)=>({endTime:A,insertTime:_,type:"exponentialRampToValue",value:E}),createExtendedLinearRampToValueAutomationEvent=(E,A,_)=>({endTime:A,insertTime:_,type:"linearRampToValue",value:E}),createSetValueAutomationEvent=(E,A)=>({startTime:A,type:"setValue",value:E}),createSetValueCurveAutomationEvent=(E,A,_)=>({duration:_,startTime:A,type:"setValueCurve",values:E}),getTargetValueAtTime=(E,A,{startTime:_,target:I,timeConstant:B})=>I+(A-I)*Math.exp((_-E)/B),isExponentialRampToValueAutomationEvent=E=>E.type==="exponentialRampToValue",isLinearRampToValueAutomationEvent=E=>E.type==="linearRampToValue",isAnyRampToValueAutomationEvent=E=>isExponentialRampToValueAutomationEvent(E)||isLinearRampToValueAutomationEvent(E),isSetValueAutomationEvent=E=>E.type==="setValue",isSetValueCurveAutomationEvent=E=>E.type==="setValueCurve",getValueOfAutomationEventAtIndexAtTime=(E,A,_,I)=>{const B=E[A];return B===void 0?I:isAnyRampToValueAutomationEvent(B)||isSetValueAutomationEvent(B)?B.value:isSetValueCurveAutomationEvent(B)?B.values[B.values.length-1]:getTargetValueAtTime(_,getValueOfAutomationEventAtIndexAtTime(E,A-1,B.startTime,I),B)},getEndTimeAndValueOfPreviousAutomationEvent=(E,A,_,I,B)=>_===void 0?[I.insertTime,B]:isAnyRampToValueAutomationEvent(_)?[_.endTime,_.value]:isSetValueAutomationEvent(_)?[_.startTime,_.value]:isSetValueCurveAutomationEvent(_)?[_.startTime+_.duration,_.values[_.values.length-1]]:[_.startTime,getValueOfAutomationEventAtIndexAtTime(E,A-1,_.startTime,B)],isCancelAndHoldAutomationEvent=E=>E.type==="cancelAndHold",isCancelScheduledValuesAutomationEvent=E=>E.type==="cancelScheduledValues",getEventTime=E=>isCancelAndHoldAutomationEvent(E)||isCancelScheduledValuesAutomationEvent(E)?E.cancelTime:isExponentialRampToValueAutomationEvent(E)||isLinearRampToValueAutomationEvent(E)?E.endTime:E.startTime,getExponentialRampValueAtTime=(E,A,_,{endTime:I,value:B})=>_===B?B:0<_&&0<B||_<0&&B<0?_*(B/_)**((E-A)/(I-A)):0,getLinearRampValueAtTime=(E,A,_,{endTime:I,value:B})=>_+(E-A)/(I-A)*(B-_),interpolateValue=(E,A)=>{const _=Math.floor(A),I=Math.ceil(A);return _===I?E[_]:(1-(A-_))*E[_]+(1-(I-A))*E[I]},getValueCurveValueAtTime=(E,{duration:A,startTime:_,values:I})=>{const B=(E-_)/A*(I.length-1);return interpolateValue(I,B)},isSetTargetAutomationEvent=E=>E.type==="setTarget";class AutomationEventList{constructor(A){this._automationEvents=[],this._currenTime=0,this._defaultValue=A}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(A){const _=getEventTime(A);if(isCancelAndHoldAutomationEvent(A)||isCancelScheduledValuesAutomationEvent(A)){const I=this._automationEvents.findIndex(T=>isCancelScheduledValuesAutomationEvent(A)&&isSetValueCurveAutomationEvent(T)?T.startTime+T.duration>=_:getEventTime(T)>=_),B=this._automationEvents[I];if(I!==-1&&(this._automationEvents=this._automationEvents.slice(0,I)),isCancelAndHoldAutomationEvent(A)){const T=this._automationEvents[this._automationEvents.length-1];if(B!==void 0&&isAnyRampToValueAutomationEvent(B)){if(T!==void 0&&isSetTargetAutomationEvent(T))throw new Error("The internal list is malformed.");const R=T===void 0?B.insertTime:isSetValueCurveAutomationEvent(T)?T.startTime+T.duration:getEventTime(T),P=T===void 0?this._defaultValue:isSetValueCurveAutomationEvent(T)?T.values[T.values.length-1]:T.value,D=isExponentialRampToValueAutomationEvent(B)?getExponentialRampValueAtTime(_,R,P,B):getLinearRampValueAtTime(_,R,P,B),F=isExponentialRampToValueAutomationEvent(B)?createExtendedExponentialRampToValueAutomationEvent(D,_,this._currenTime):createExtendedLinearRampToValueAutomationEvent(D,_,this._currenTime);this._automationEvents.push(F)}if(T!==void 0&&isSetTargetAutomationEvent(T)&&this._automationEvents.push(createSetValueAutomationEvent(this.getValue(_),_)),T!==void 0&&isSetValueCurveAutomationEvent(T)&&T.startTime+T.duration>_){const R=_-T.startTime,P=(T.values.length-1)/T.duration,D=Math.max(2,1+Math.ceil(R*P)),F=R/(D-1)*P,L=T.values.slice(0,D);if(F<1)for(let U=1;U<D;U+=1){const V=F*U%1;L[U]=T.values[U-1]*(1-V)+T.values[U]*V}this._automationEvents[this._automationEvents.length-1]=createSetValueCurveAutomationEvent(L,T.startTime,R)}}}else{const I=this._automationEvents.findIndex(R=>getEventTime(R)>_),B=I===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[I-1];if(B!==void 0&&isSetValueCurveAutomationEvent(B)&&getEventTime(B)+B.duration>_)return!1;const T=isExponentialRampToValueAutomationEvent(A)?createExtendedExponentialRampToValueAutomationEvent(A.value,A.endTime,this._currenTime):isLinearRampToValueAutomationEvent(A)?createExtendedLinearRampToValueAutomationEvent(A.value,_,this._currenTime):A;if(I===-1)this._automationEvents.push(T);else{if(isSetValueCurveAutomationEvent(A)&&_+A.duration>getEventTime(this._automationEvents[I]))return!1;this._automationEvents.splice(I,0,T)}}return!0}flush(A){const _=this._automationEvents.findIndex(I=>getEventTime(I)>A);if(_>1){const I=this._automationEvents.slice(_-1),B=I[0];isSetTargetAutomationEvent(B)&&I.unshift(createSetValueAutomationEvent(getValueOfAutomationEventAtIndexAtTime(this._automationEvents,_-2,B.startTime,this._defaultValue),B.startTime)),this._automationEvents=I}}getValue(A){if(this._automationEvents.length===0)return this._defaultValue;const _=this._automationEvents.findIndex(R=>getEventTime(R)>A),I=this._automationEvents[_],B=(_===-1?this._automationEvents.length:_)-1,T=this._automationEvents[B];if(T!==void 0&&isSetTargetAutomationEvent(T)&&(I===void 0||!isAnyRampToValueAutomationEvent(I)||I.insertTime>A))return getTargetValueAtTime(A,getValueOfAutomationEventAtIndexAtTime(this._automationEvents,B-1,T.startTime,this._defaultValue),T);if(T!==void 0&&isSetValueAutomationEvent(T)&&(I===void 0||!isAnyRampToValueAutomationEvent(I)))return T.value;if(T!==void 0&&isSetValueCurveAutomationEvent(T)&&(I===void 0||!isAnyRampToValueAutomationEvent(I)||T.startTime+T.duration>A))return A<T.startTime+T.duration?getValueCurveValueAtTime(A,T):T.values[T.values.length-1];if(T!==void 0&&isAnyRampToValueAutomationEvent(T)&&(I===void 0||!isAnyRampToValueAutomationEvent(I)))return T.value;if(I!==void 0&&isExponentialRampToValueAutomationEvent(I)){const[R,P]=getEndTimeAndValueOfPreviousAutomationEvent(this._automationEvents,B,T,I,this._defaultValue);return getExponentialRampValueAtTime(A,R,P,I)}if(I!==void 0&&isLinearRampToValueAutomationEvent(I)){const[R,P]=getEndTimeAndValueOfPreviousAutomationEvent(this._automationEvents,B,T,I,this._defaultValue);return getLinearRampValueAtTime(A,R,P,I)}return this._defaultValue}}const createCancelAndHoldAutomationEvent=E=>({cancelTime:E,type:"cancelAndHold"}),createCancelScheduledValuesAutomationEvent=E=>({cancelTime:E,type:"cancelScheduledValues"}),createExponentialRampToValueAutomationEvent=(E,A)=>({endTime:A,type:"exponentialRampToValue",value:E}),createLinearRampToValueAutomationEvent=(E,A)=>({endTime:A,type:"linearRampToValue",value:E}),createSetTargetAutomationEvent=(E,A,_)=>({startTime:A,target:E,timeConstant:_,type:"setTarget"}),createAbortError=()=>new DOMException("","AbortError"),createAddActiveInputConnectionToAudioNode=E=>(A,_,[I,B,T],R)=>{E(A[B],[_,I,T],P=>P[0]===_&&P[1]===I,R)},createAddAudioNodeConnections=E=>(A,_,I)=>{const B=[];for(let T=0;T<I.numberOfInputs;T+=1)B.push(new Set);E.set(A,{activeInputs:B,outputs:new Set,passiveInputs:new WeakMap,renderer:_})},createAddAudioParamConnections=E=>(A,_)=>{E.set(A,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:_})},ACTIVE_AUDIO_NODE_STORE=new WeakSet,AUDIO_NODE_CONNECTIONS_STORE=new WeakMap,AUDIO_NODE_STORE=new WeakMap,AUDIO_PARAM_CONNECTIONS_STORE=new WeakMap,AUDIO_PARAM_STORE=new WeakMap,CONTEXT_STORE=new WeakMap,EVENT_LISTENERS=new WeakMap,CYCLE_COUNTERS=new WeakMap,NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS=new WeakMap,NODE_TO_PROCESSOR_MAPS=new WeakMap,handler={construct(){return handler}},isConstructible=E=>{try{const A=new Proxy(E,handler);new A}catch{return!1}return!0},IMPORT_STATEMENT_REGEX=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,splitImportStatements=(E,A)=>{const _=[];let I=E.replace(/^[\s]+/,""),B=I.match(IMPORT_STATEMENT_REGEX);for(;B!==null;){const T=B[1].slice(1,-1),R=B[0].replace(/([\s]+)?;?$/,"").replace(T,new URL(T,A).toString());_.push(R),I=I.slice(B[0].length).replace(/^[\s]+/,""),B=I.match(IMPORT_STATEMENT_REGEX)}return[_.join(";"),I]},verifyParameterDescriptors=E=>{if(E!==void 0&&!Array.isArray(E))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},verifyProcessorCtor=E=>{if(!isConstructible(E))throw new TypeError("The given value for processorCtor should be a constructor.");if(E.prototype===null||typeof E.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},createAddAudioWorkletModule=(E,A,_,I,B,T,R,P,D,F,L,U,V)=>{let K=0;return(J,ee,ie={credentials:"omit"})=>{const ne=L.get(J);if(ne!==void 0&&ne.has(ee))return Promise.resolve();const ce=F.get(J);if(ce!==void 0){const pe=ce.get(ee);if(pe!==void 0)return pe}const fe=T(J),de=fe.audioWorklet===void 0?B(ee).then(([pe,ve])=>{const[ye,_e]=splitImportStatements(pe,ve),be=`${ye};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${_e}
})})(window,'_AWGS')`;return _(be)}).then(()=>{const pe=V._AWGS.pop();if(pe===void 0)throw new SyntaxError;I(fe.currentTime,fe.sampleRate,()=>pe(class{},void 0,(ve,ye)=>{if(ve.trim()==="")throw A();const _e=NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.get(fe);if(_e!==void 0){if(_e.has(ve))throw A();verifyProcessorCtor(ye),verifyParameterDescriptors(ye.parameterDescriptors),_e.set(ve,ye)}else verifyProcessorCtor(ye),verifyParameterDescriptors(ye.parameterDescriptors),NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.set(fe,new Map([[ve,ye]]))},fe.sampleRate,void 0,void 0))}):Promise.all([B(ee),Promise.resolve(E(U,U))]).then(([[pe,ve],ye])=>{const _e=K+1;K=_e;const[be,Te]=splitImportStatements(pe,ve),Y=`${be};((AudioWorkletProcessor,registerProcessor)=>{${Te}
})(${ye?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${ye?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${ye?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${_e}',class extends AudioWorkletProcessor{process(){return !1}})`,te=new Blob([Y],{type:"application/javascript; charset=utf-8"}),oe=URL.createObjectURL(te);return fe.audioWorklet.addModule(oe,ie).then(()=>{if(P(fe))return fe;const le=R(fe);return le.audioWorklet.addModule(oe,ie).then(()=>le)}).then(le=>{if(D===null)throw new SyntaxError;try{new D(le,`__sac${_e}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(oe))});return ce===void 0?F.set(J,new Map([[ee,de]])):ce.set(ee,de),de.then(()=>{const pe=L.get(J);pe===void 0?L.set(J,new Set([ee])):pe.add(ee)}).finally(()=>{const pe=F.get(J);pe!==void 0&&pe.delete(ee)}),de}},getValueForKey=(E,A)=>{const _=E.get(A);if(_===void 0)throw new Error("A value with the given key could not be found.");return _},pickElementFromSet=(E,A)=>{const _=Array.from(E).filter(A);if(_.length>1)throw Error("More than one element was found.");if(_.length===0)throw Error("No element was found.");const[I]=_;return E.delete(I),I},deletePassiveInputConnectionToAudioNode=(E,A,_,I)=>{const B=getValueForKey(E,A),T=pickElementFromSet(B,R=>R[0]===_&&R[1]===I);return B.size===0&&E.delete(A),T},getEventListenersOfAudioNode=E=>getValueForKey(EVENT_LISTENERS,E),setInternalStateToActive=E=>{if(ACTIVE_AUDIO_NODE_STORE.has(E))throw new Error("The AudioNode is already stored.");ACTIVE_AUDIO_NODE_STORE.add(E),getEventListenersOfAudioNode(E).forEach(A=>A(!0))},isAudioWorkletNode=E=>"port"in E,setInternalStateToPassive=E=>{if(!ACTIVE_AUDIO_NODE_STORE.has(E))throw new Error("The AudioNode is not stored.");ACTIVE_AUDIO_NODE_STORE.delete(E),getEventListenersOfAudioNode(E).forEach(A=>A(!1))},setInternalStateToPassiveWhenNecessary=(E,A)=>{!isAudioWorkletNode(E)&&A.every(_=>_.size===0)&&setInternalStateToPassive(E)},createAddConnectionToAudioNode=(E,A,_,I,B,T,R,P,D,F,L,U,V)=>{const K=new WeakMap;return(J,ee,ie,ne,ce)=>{const{activeInputs:fe,passiveInputs:de}=T(ee),{outputs:pe}=T(J),ve=P(J),ye=_e=>{const be=D(ee),Te=D(J);if(_e){const ue=deletePassiveInputConnectionToAudioNode(de,J,ie,ne);E(fe,J,ue,!1),!ce&&!U(J)&&_(Te,be,ie,ne),V(ee)&&setInternalStateToActive(ee)}else{const ue=I(fe,J,ie,ne);A(de,ne,ue,!1),!ce&&!U(J)&&B(Te,be,ie,ne);const O=R(ee);if(O===0)L(ee)&&setInternalStateToPassiveWhenNecessary(ee,fe);else{const z=K.get(ee);z!==void 0&&clearTimeout(z),K.set(ee,setTimeout(()=>{L(ee)&&setInternalStateToPassiveWhenNecessary(ee,fe)},O*1e3))}}};return F(pe,[ee,ie,ne],_e=>_e[0]===ee&&_e[1]===ie&&_e[2]===ne,!0)?(ve.add(ye),L(J)?E(fe,J,[ie,ne,ye],!0):A(de,ne,[J,ie,ye],!0),!0):!1}},createAddPassiveInputConnectionToAudioNode=E=>(A,_,[I,B,T],R)=>{const P=A.get(I);P===void 0?A.set(I,new Set([[B,_,T]])):E(P,[B,_,T],D=>D[0]===B&&D[1]===_,R)},createAddSilentConnection=E=>(A,_)=>{const I=E(A,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});_.connect(I).connect(A.destination);const B=()=>{_.removeEventListener("ended",B),_.disconnect(I),I.disconnect()};_.addEventListener("ended",B)},createAddUnrenderedAudioWorkletNode=E=>(A,_)=>{E(A).add(_)},DEFAULT_OPTIONS$j={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},createAnalyserNodeConstructor=(E,A,_,I,B,T)=>class extends E{constructor(P,D){const F=B(P),L={...DEFAULT_OPTIONS$j,...D},U=I(F,L),V=T(F)?A():null;super(P,!1,U,V),this._nativeAnalyserNode=U}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(P){this._nativeAnalyserNode.fftSize=P}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(P){const D=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=P,!(P>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=D,_()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(P){const D=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=P,!(this._nativeAnalyserNode.maxDecibels>P))throw this._nativeAnalyserNode.minDecibels=D,_()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(P){this._nativeAnalyserNode.smoothingTimeConstant=P}getByteFrequencyData(P){this._nativeAnalyserNode.getByteFrequencyData(P)}getByteTimeDomainData(P){this._nativeAnalyserNode.getByteTimeDomainData(P)}getFloatFrequencyData(P){this._nativeAnalyserNode.getFloatFrequencyData(P)}getFloatTimeDomainData(P){this._nativeAnalyserNode.getFloatTimeDomainData(P)}},isOwnedByContext=(E,A)=>E.context===A,createAnalyserNodeRendererFactory=(E,A,_)=>()=>{const I=new WeakMap,B=async(T,R)=>{let P=A(T);if(!isOwnedByContext(P,R)){const F={channelCount:P.channelCount,channelCountMode:P.channelCountMode,channelInterpretation:P.channelInterpretation,fftSize:P.fftSize,maxDecibels:P.maxDecibels,minDecibels:P.minDecibels,smoothingTimeConstant:P.smoothingTimeConstant};P=E(R,F)}return I.set(R,P),await _(T,R,P),P};return{render(T,R){const P=I.get(R);return P!==void 0?Promise.resolve(P):B(T,R)}}},testAudioBufferCopyChannelMethodsOutOfBoundsSupport=E=>{try{E.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},createIndexSizeError=()=>new DOMException("","IndexSizeError"),wrapAudioBufferGetChannelDataMethod=E=>{E.getChannelData=(A=>_=>{try{return A.call(E,_)}catch(I){throw I.code===12?createIndexSizeError():I}})(E.getChannelData)},DEFAULT_OPTIONS$i={numberOfChannels:1},createAudioBufferConstructor=(E,A,_,I,B,T,R,P)=>{let D=null;return class Rn{constructor(L){if(B===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:U,numberOfChannels:V,sampleRate:K}={...DEFAULT_OPTIONS$i,...L};D===null&&(D=new B(1,1,44100));const J=I!==null&&A(T,T)?new I({length:U,numberOfChannels:V,sampleRate:K}):D.createBuffer(V,U,K);if(J.numberOfChannels===0)throw _();return typeof J.copyFromChannel!="function"?(R(J),wrapAudioBufferGetChannelDataMethod(J)):A(testAudioBufferCopyChannelMethodsOutOfBoundsSupport,()=>testAudioBufferCopyChannelMethodsOutOfBoundsSupport(J))||P(J),E.add(J),J}static[Symbol.hasInstance](L){return L!==null&&typeof L=="object"&&Object.getPrototypeOf(L)===Rn.prototype||E.has(L)}}},MOST_NEGATIVE_SINGLE_FLOAT=-34028234663852886e22,MOST_POSITIVE_SINGLE_FLOAT=-MOST_NEGATIVE_SINGLE_FLOAT,isActiveAudioNode=E=>ACTIVE_AUDIO_NODE_STORE.has(E),DEFAULT_OPTIONS$h={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},createAudioBufferSourceNodeConstructor=(E,A,_,I,B,T,R,P)=>class extends E{constructor(F,L){const U=T(F),V={...DEFAULT_OPTIONS$h,...L},K=B(U,V),J=R(U),ee=J?A():null;super(F,!1,K,ee),this._audioBufferSourceNodeRenderer=ee,this._isBufferNullified=!1,this._isBufferSet=V.buffer!==null,this._nativeAudioBufferSourceNode=K,this._onended=null,this._playbackRate=_(this,J,K.playbackRate,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(F){if(this._nativeAudioBufferSourceNode.buffer=F,F!==null){if(this._isBufferSet)throw I();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(F){this._nativeAudioBufferSourceNode.loop=F}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(F){this._nativeAudioBufferSourceNode.loopEnd=F}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(F){this._nativeAudioBufferSourceNode.loopStart=F}get onended(){return this._onended}set onended(F){const L=typeof F=="function"?P(this,F):null;this._nativeAudioBufferSourceNode.onended=L;const U=this._nativeAudioBufferSourceNode.onended;this._onended=U!==null&&U===L?F:U}get playbackRate(){return this._playbackRate}start(F=0,L=0,U){if(this._nativeAudioBufferSourceNode.start(F,L,U),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=U===void 0?[F,L]:[F,L,U]),this.context.state!=="closed"){setInternalStateToActive(this);const V=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",V),isActiveAudioNode(this)&&setInternalStateToPassive(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",V)}}stop(F=0){this._nativeAudioBufferSourceNode.stop(F),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=F)}},createAudioBufferSourceNodeRendererFactory=(E,A,_,I,B)=>()=>{const T=new WeakMap;let R=null,P=null;const D=async(F,L)=>{let U=_(F);const V=isOwnedByContext(U,L);if(!V){const K={buffer:U.buffer,channelCount:U.channelCount,channelCountMode:U.channelCountMode,channelInterpretation:U.channelInterpretation,loop:U.loop,loopEnd:U.loopEnd,loopStart:U.loopStart,playbackRate:U.playbackRate.value};U=A(L,K),R!==null&&U.start(...R),P!==null&&U.stop(P)}return T.set(L,U),V?await E(L,F.playbackRate,U.playbackRate):await I(L,F.playbackRate,U.playbackRate),await B(F,L,U),U};return{set start(F){R=F},set stop(F){P=F},render(F,L){const U=T.get(L);return U!==void 0?Promise.resolve(U):D(F,L)}}},isAudioBufferSourceNode=E=>"playbackRate"in E,isBiquadFilterNode=E=>"frequency"in E&&"gain"in E,isConstantSourceNode=E=>"offset"in E,isGainNode=E=>!("frequency"in E)&&"gain"in E,isOscillatorNode=E=>"detune"in E&&"frequency"in E&&!("gain"in E),isStereoPannerNode=E=>"pan"in E,getAudioNodeConnections=E=>getValueForKey(AUDIO_NODE_CONNECTIONS_STORE,E),getAudioParamConnections=E=>getValueForKey(AUDIO_PARAM_CONNECTIONS_STORE,E),deactivateActiveAudioNodeInputConnections=(E,A)=>{const{activeInputs:_}=getAudioNodeConnections(E);_.forEach(B=>B.forEach(([T])=>{A.includes(E)||deactivateActiveAudioNodeInputConnections(T,[...A,E])}));const I=isAudioBufferSourceNode(E)?[E.playbackRate]:isAudioWorkletNode(E)?Array.from(E.parameters.values()):isBiquadFilterNode(E)?[E.Q,E.detune,E.frequency,E.gain]:isConstantSourceNode(E)?[E.offset]:isGainNode(E)?[E.gain]:isOscillatorNode(E)?[E.detune,E.frequency]:isStereoPannerNode(E)?[E.pan]:[];for(const B of I){const T=getAudioParamConnections(B);T!==void 0&&T.activeInputs.forEach(([R])=>deactivateActiveAudioNodeInputConnections(R,A))}isActiveAudioNode(E)&&setInternalStateToPassive(E)},deactivateAudioGraph=E=>{deactivateActiveAudioNodeInputConnections(E.destination,[])},isValidLatencyHint=E=>E===void 0||typeof E=="number"||typeof E=="string"&&(E==="balanced"||E==="interactive"||E==="playback"),createAudioContextConstructor=(E,A,_,I,B,T,R,P,D)=>class extends E{constructor(L={}){if(D===null)throw new Error("Missing the native AudioContext constructor.");let U;try{U=new D(L)}catch(J){throw J.code===12&&J.message==="sampleRate is not in range"?_():J}if(U===null)throw I();if(!isValidLatencyHint(L.latencyHint))throw new TypeError(`The provided value '${L.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(L.sampleRate!==void 0&&U.sampleRate!==L.sampleRate)throw _();super(U,2);const{latencyHint:V}=L,{sampleRate:K}=U;if(this._baseLatency=typeof U.baseLatency=="number"?U.baseLatency:V==="balanced"?512/K:V==="interactive"||V===void 0?256/K:V==="playback"?1024/K:Math.max(2,Math.min(128,Math.round(V*K/128)))*128/K,this._nativeAudioContext=U,D.name==="webkitAudioContext"?(this._nativeGainNode=U.createGain(),this._nativeOscillatorNode=U.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(U.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,U.state==="running"){this._state="suspended";const J=()=>{this._state==="suspended"&&(this._state=null),U.removeEventListener("statechange",J)};U.addEventListener("statechange",J)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw A()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),deactivateAudioGraph(this)}))}createMediaElementSource(L){return new B(this,{mediaElement:L})}createMediaStreamDestination(){return new T(this)}createMediaStreamSource(L){return new R(this,{mediaStream:L})}createMediaStreamTrackSource(L){return new P(this,{mediaStreamTrack:L})}resume(){return this._state==="suspended"?new Promise((L,U)=>{const V=()=>{this._nativeAudioContext.removeEventListener("statechange",V),this._nativeAudioContext.state==="running"?L():this.resume().then(L,U)};this._nativeAudioContext.addEventListener("statechange",V)}):this._nativeAudioContext.resume().catch(L=>{throw L===void 0||L.code===15?A():L})}suspend(){return this._nativeAudioContext.suspend().catch(L=>{throw L===void 0?A():L})}},createAudioDestinationNodeConstructor=(E,A,_,I,B,T,R,P)=>class extends E{constructor(F,L){const U=T(F),V=R(U),K=B(U,L,V),J=V?A(P):null;super(F,!1,K,J),this._isNodeOfNativeOfflineAudioContext=V,this._nativeAudioDestinationNode=K}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(F){if(this._isNodeOfNativeOfflineAudioContext)throw I();if(F>this._nativeAudioDestinationNode.maxChannelCount)throw _();this._nativeAudioDestinationNode.channelCount=F}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(F){if(this._isNodeOfNativeOfflineAudioContext)throw I();this._nativeAudioDestinationNode.channelCountMode=F}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},createAudioDestinationNodeRenderer=E=>{const A=new WeakMap,_=async(I,B)=>{const T=B.destination;return A.set(B,T),await E(I,B,T),T};return{render(I,B){const T=A.get(B);return T!==void 0?Promise.resolve(T):_(I,B)}}},createAudioListenerFactory=(E,A,_,I,B,T,R,P)=>(D,F)=>{const L=F.listener,U=()=>{const pe=new Float32Array(1),ve=A(F,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),ye=R(F);let _e=!1,be=[0,0,-1,0,1,0],Te=[0,0,0];const ue=()=>{if(_e)return;_e=!0;const te=I(F,256,9,0);te.onaudioprocess=({inputBuffer:oe})=>{const le=[T(oe,pe,0),T(oe,pe,1),T(oe,pe,2),T(oe,pe,3),T(oe,pe,4),T(oe,pe,5)];le.some((ae,Q)=>ae!==be[Q])&&(L.setOrientation(...le),be=le);const he=[T(oe,pe,6),T(oe,pe,7),T(oe,pe,8)];he.some((ae,Q)=>ae!==Te[Q])&&(L.setPosition(...he),Te=he)},ve.connect(te)},O=te=>oe=>{oe!==be[te]&&(be[te]=oe,L.setOrientation(...be))},z=te=>oe=>{oe!==Te[te]&&(Te[te]=oe,L.setPosition(...Te))},Y=(te,oe,le)=>{const he=_(F,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:oe});he.connect(ve,0,te),he.start(),Object.defineProperty(he.offset,"defaultValue",{get(){return oe}});const ae=E({context:D},ye,he.offset,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT);return P(ae,"value",Q=>()=>Q.call(ae),Q=>se=>{try{Q.call(ae,se)}catch(Ae){if(Ae.code!==9)throw Ae}ue(),ye&&le(se)}),ae.cancelAndHoldAtTime=(Q=>ye?()=>{throw B()}:(...se)=>{const Ae=Q.apply(ae,se);return ue(),Ae})(ae.cancelAndHoldAtTime),ae.cancelScheduledValues=(Q=>ye?()=>{throw B()}:(...se)=>{const Ae=Q.apply(ae,se);return ue(),Ae})(ae.cancelScheduledValues),ae.exponentialRampToValueAtTime=(Q=>ye?()=>{throw B()}:(...se)=>{const Ae=Q.apply(ae,se);return ue(),Ae})(ae.exponentialRampToValueAtTime),ae.linearRampToValueAtTime=(Q=>ye?()=>{throw B()}:(...se)=>{const Ae=Q.apply(ae,se);return ue(),Ae})(ae.linearRampToValueAtTime),ae.setTargetAtTime=(Q=>ye?()=>{throw B()}:(...se)=>{const Ae=Q.apply(ae,se);return ue(),Ae})(ae.setTargetAtTime),ae.setValueAtTime=(Q=>ye?()=>{throw B()}:(...se)=>{const Ae=Q.apply(ae,se);return ue(),Ae})(ae.setValueAtTime),ae.setValueCurveAtTime=(Q=>ye?()=>{throw B()}:(...se)=>{const Ae=Q.apply(ae,se);return ue(),Ae})(ae.setValueCurveAtTime),ae};return{forwardX:Y(0,0,O(0)),forwardY:Y(1,0,O(1)),forwardZ:Y(2,-1,O(2)),positionX:Y(6,0,z(0)),positionY:Y(7,0,z(1)),positionZ:Y(8,0,z(2)),upX:Y(3,0,O(3)),upY:Y(4,1,O(4)),upZ:Y(5,0,O(5))}},{forwardX:V,forwardY:K,forwardZ:J,positionX:ee,positionY:ie,positionZ:ne,upX:ce,upY:fe,upZ:de}=L.forwardX===void 0?U():L;return{get forwardX(){return V},get forwardY(){return K},get forwardZ(){return J},get positionX(){return ee},get positionY(){return ie},get positionZ(){return ne},get upX(){return ce},get upY(){return fe},get upZ(){return de}}},isAudioNode$1=E=>"context"in E,isAudioNodeOutputConnection=E=>isAudioNode$1(E[0]),insertElementInSet=(E,A,_,I)=>{for(const B of E)if(_(B)){if(I)return!1;throw Error("The set contains at least one similar element.")}return E.add(A),!0},addActiveInputConnectionToAudioParam=(E,A,[_,I],B)=>{insertElementInSet(E,[A,_,I],T=>T[0]===A&&T[1]===_,B)},addPassiveInputConnectionToAudioParam=(E,[A,_,I],B)=>{const T=E.get(A);T===void 0?E.set(A,new Set([[_,I]])):insertElementInSet(T,[_,I],R=>R[0]===_,B)},isNativeAudioNodeFaker=E=>"inputs"in E,connectNativeAudioNodeToNativeAudioNode=(E,A,_,I)=>{if(isNativeAudioNodeFaker(A)){const B=A.inputs[I];return E.connect(B,_,0),[B,_,0]}return E.connect(A,_,I),[A,_,I]},deleteActiveInputConnection=(E,A,_)=>{for(const I of E)if(I[0]===A&&I[1]===_)return E.delete(I),I;return null},deleteActiveInputConnectionToAudioParam=(E,A,_)=>pickElementFromSet(E,I=>I[0]===A&&I[1]===_),deleteEventListenerOfAudioNode=(E,A)=>{if(!getEventListenersOfAudioNode(E).delete(A))throw new Error("Missing the expected event listener.")},deletePassiveInputConnectionToAudioParam=(E,A,_)=>{const I=getValueForKey(E,A),B=pickElementFromSet(I,T=>T[0]===_);return I.size===0&&E.delete(A),B},disconnectNativeAudioNodeFromNativeAudioNode=(E,A,_,I)=>{isNativeAudioNodeFaker(A)?E.disconnect(A.inputs[I],_,0):E.disconnect(A,_,I)},getNativeAudioNode=E=>getValueForKey(AUDIO_NODE_STORE,E),getNativeAudioParam=E=>getValueForKey(AUDIO_PARAM_STORE,E),isPartOfACycle=E=>CYCLE_COUNTERS.has(E),isPassiveAudioNode=E=>!ACTIVE_AUDIO_NODE_STORE.has(E),testAudioNodeDisconnectMethodSupport=(E,A)=>new Promise(_=>{if(A!==null)_(!0);else{const I=E.createScriptProcessor(256,1,1),B=E.createGain(),T=E.createBuffer(1,2,44100),R=T.getChannelData(0);R[0]=1,R[1]=1;const P=E.createBufferSource();P.buffer=T,P.loop=!0,P.connect(I).connect(E.destination),P.connect(B),P.disconnect(B),I.onaudioprocess=D=>{const F=D.inputBuffer.getChannelData(0);Array.prototype.some.call(F,L=>L===1)?_(!0):_(!1),P.stop(),I.onaudioprocess=null,P.disconnect(I),I.disconnect(E.destination)},P.start()}}),visitEachAudioNodeOnce=(E,A)=>{const _=new Map;for(const I of E)for(const B of I){const T=_.get(B);_.set(B,T===void 0?1:T+1)}_.forEach((I,B)=>A(B,I))},isNativeAudioNode$1=E=>"context"in E,wrapAudioNodeDisconnectMethod=E=>{const A=new Map;E.connect=(_=>(I,B=0,T=0)=>{const R=isNativeAudioNode$1(I)?_(I,B,T):_(I,B),P=A.get(I);return P===void 0?A.set(I,[{input:T,output:B}]):P.every(D=>D.input!==T||D.output!==B)&&P.push({input:T,output:B}),R})(E.connect.bind(E)),E.disconnect=(_=>(I,B,T)=>{if(_.apply(E),I===void 0)A.clear();else if(typeof I=="number")for(const[R,P]of A){const D=P.filter(F=>F.output!==I);D.length===0?A.delete(R):A.set(R,D)}else if(A.has(I))if(B===void 0)A.delete(I);else{const R=A.get(I);if(R!==void 0){const P=R.filter(D=>D.output!==B&&(D.input!==T||T===void 0));P.length===0?A.delete(I):A.set(I,P)}}for(const[R,P]of A)P.forEach(D=>{isNativeAudioNode$1(R)?E.connect(R,D.output,D.input):E.connect(R,D.output)})})(E.disconnect)},addConnectionToAudioParamOfAudioContext=(E,A,_,I)=>{const{activeInputs:B,passiveInputs:T}=getAudioParamConnections(A),{outputs:R}=getAudioNodeConnections(E),P=getEventListenersOfAudioNode(E),D=F=>{const L=getNativeAudioNode(E),U=getNativeAudioParam(A);if(F){const V=deletePassiveInputConnectionToAudioParam(T,E,_);addActiveInputConnectionToAudioParam(B,E,V,!1),!I&&!isPartOfACycle(E)&&L.connect(U,_)}else{const V=deleteActiveInputConnectionToAudioParam(B,E,_);addPassiveInputConnectionToAudioParam(T,V,!1),!I&&!isPartOfACycle(E)&&L.disconnect(U,_)}};return insertElementInSet(R,[A,_],F=>F[0]===A&&F[1]===_,!0)?(P.add(D),isActiveAudioNode(E)?addActiveInputConnectionToAudioParam(B,E,[_,D],!0):addPassiveInputConnectionToAudioParam(T,[E,_,D],!0),!0):!1},deleteInputConnectionOfAudioNode=(E,A,_,I)=>{const{activeInputs:B,passiveInputs:T}=getAudioNodeConnections(A),R=deleteActiveInputConnection(B[I],E,_);return R===null?[deletePassiveInputConnectionToAudioNode(T,E,_,I)[2],!1]:[R[2],!0]},deleteInputConnectionOfAudioParam=(E,A,_)=>{const{activeInputs:I,passiveInputs:B}=getAudioParamConnections(A),T=deleteActiveInputConnection(I,E,_);return T===null?[deletePassiveInputConnectionToAudioParam(B,E,_)[1],!1]:[T[2],!0]},deleteInputsOfAudioNode=(E,A,_,I,B)=>{const[T,R]=deleteInputConnectionOfAudioNode(E,_,I,B);if(T!==null&&(deleteEventListenerOfAudioNode(E,T),R&&!A&&!isPartOfACycle(E)&&disconnectNativeAudioNodeFromNativeAudioNode(getNativeAudioNode(E),getNativeAudioNode(_),I,B)),isActiveAudioNode(_)){const{activeInputs:P}=getAudioNodeConnections(_);setInternalStateToPassiveWhenNecessary(_,P)}},deleteInputsOfAudioParam=(E,A,_,I)=>{const[B,T]=deleteInputConnectionOfAudioParam(E,_,I);B!==null&&(deleteEventListenerOfAudioNode(E,B),T&&!A&&!isPartOfACycle(E)&&getNativeAudioNode(E).disconnect(getNativeAudioParam(_),I))},deleteAnyConnection=(E,A)=>{const _=getAudioNodeConnections(E),I=[];for(const B of _.outputs)isAudioNodeOutputConnection(B)?deleteInputsOfAudioNode(E,A,...B):deleteInputsOfAudioParam(E,A,...B),I.push(B[0]);return _.outputs.clear(),I},deleteConnectionAtOutput=(E,A,_)=>{const I=getAudioNodeConnections(E),B=[];for(const T of I.outputs)T[1]===_&&(isAudioNodeOutputConnection(T)?deleteInputsOfAudioNode(E,A,...T):deleteInputsOfAudioParam(E,A,...T),B.push(T[0]),I.outputs.delete(T));return B},deleteConnectionToDestination=(E,A,_,I,B)=>{const T=getAudioNodeConnections(E);return Array.from(T.outputs).filter(R=>R[0]===_&&(I===void 0||R[1]===I)&&(B===void 0||R[2]===B)).map(R=>(isAudioNodeOutputConnection(R)?deleteInputsOfAudioNode(E,A,...R):deleteInputsOfAudioParam(E,A,...R),T.outputs.delete(R),R[0]))},createAudioNodeConstructor=(E,A,_,I,B,T,R,P,D,F,L,U,V,K,J,ee)=>class extends F{constructor(ne,ce,fe,de){super(fe),this._context=ne,this._nativeAudioNode=fe;const pe=L(ne);U(pe)&&_(testAudioNodeDisconnectMethodSupport,()=>testAudioNodeDisconnectMethodSupport(pe,ee))!==!0&&wrapAudioNodeDisconnectMethod(fe),AUDIO_NODE_STORE.set(this,fe),EVENT_LISTENERS.set(this,new Set),ne.state!=="closed"&&ce&&setInternalStateToActive(this),E(this,de,fe)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(ne){this._nativeAudioNode.channelCount=ne}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(ne){this._nativeAudioNode.channelCountMode=ne}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(ne){this._nativeAudioNode.channelInterpretation=ne}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(ne,ce=0,fe=0){if(ce<0||ce>=this._nativeAudioNode.numberOfOutputs)throw B();const de=L(this._context),pe=J(de);if(V(ne)||K(ne))throw T();if(isAudioNode$1(ne)){const _e=getNativeAudioNode(ne);try{const Te=connectNativeAudioNodeToNativeAudioNode(this._nativeAudioNode,_e,ce,fe),ue=isPassiveAudioNode(this);(pe||ue)&&this._nativeAudioNode.disconnect(...Te),this.context.state!=="closed"&&!ue&&isPassiveAudioNode(ne)&&setInternalStateToActive(ne)}catch(Te){throw Te.code===12?T():Te}if(A(this,ne,ce,fe,pe)){const Te=D([this],ne);visitEachAudioNodeOnce(Te,I(pe))}return ne}const ve=getNativeAudioParam(ne);if(ve.name==="playbackRate"&&ve.maxValue===1024)throw R();try{this._nativeAudioNode.connect(ve,ce),(pe||isPassiveAudioNode(this))&&this._nativeAudioNode.disconnect(ve,ce)}catch(_e){throw _e.code===12?T():_e}if(addConnectionToAudioParamOfAudioContext(this,ne,ce,pe)){const _e=D([this],ne);visitEachAudioNodeOnce(_e,I(pe))}}disconnect(ne,ce,fe){let de;const pe=L(this._context),ve=J(pe);if(ne===void 0)de=deleteAnyConnection(this,ve);else if(typeof ne=="number"){if(ne<0||ne>=this.numberOfOutputs)throw B();de=deleteConnectionAtOutput(this,ve,ne)}else{if(ce!==void 0&&(ce<0||ce>=this.numberOfOutputs)||isAudioNode$1(ne)&&fe!==void 0&&(fe<0||fe>=ne.numberOfInputs))throw B();if(de=deleteConnectionToDestination(this,ve,ne,ce,fe),de.length===0)throw T()}for(const ye of de){const _e=D([this],ye);visitEachAudioNodeOnce(_e,P)}}},createAudioParamFactory=(E,A,_,I,B,T,R,P,D,F,L,U,V)=>(K,J,ee,ie=null,ne=null)=>{const ce=ee.value,fe=new AutomationEventList(ce),de=J?I(fe):null,pe={get defaultValue(){return ce},get maxValue(){return ie===null?ee.maxValue:ie},get minValue(){return ne===null?ee.minValue:ne},get value(){return ee.value},set value(ve){ee.value=ve,pe.setValueAtTime(ve,K.context.currentTime)},cancelAndHoldAtTime(ve){if(typeof ee.cancelAndHoldAtTime=="function")de===null&&fe.flush(K.context.currentTime),fe.add(B(ve)),ee.cancelAndHoldAtTime(ve);else{const ye=Array.from(fe).pop();de===null&&fe.flush(K.context.currentTime),fe.add(B(ve));const _e=Array.from(fe).pop();ee.cancelScheduledValues(ve),ye!==_e&&_e!==void 0&&(_e.type==="exponentialRampToValue"?ee.exponentialRampToValueAtTime(_e.value,_e.endTime):_e.type==="linearRampToValue"?ee.linearRampToValueAtTime(_e.value,_e.endTime):_e.type==="setValue"?ee.setValueAtTime(_e.value,_e.startTime):_e.type==="setValueCurve"&&ee.setValueCurveAtTime(_e.values,_e.startTime,_e.duration))}return pe},cancelScheduledValues(ve){return de===null&&fe.flush(K.context.currentTime),fe.add(T(ve)),ee.cancelScheduledValues(ve),pe},exponentialRampToValueAtTime(ve,ye){if(ve===0)throw new RangeError;if(!Number.isFinite(ye)||ye<0)throw new RangeError;const _e=K.context.currentTime;return de===null&&fe.flush(_e),Array.from(fe).length===0&&(fe.add(F(ce,_e)),ee.setValueAtTime(ce,_e)),fe.add(R(ve,ye)),ee.exponentialRampToValueAtTime(ve,ye),pe},linearRampToValueAtTime(ve,ye){const _e=K.context.currentTime;return de===null&&fe.flush(_e),Array.from(fe).length===0&&(fe.add(F(ce,_e)),ee.setValueAtTime(ce,_e)),fe.add(P(ve,ye)),ee.linearRampToValueAtTime(ve,ye),pe},setTargetAtTime(ve,ye,_e){return de===null&&fe.flush(K.context.currentTime),fe.add(D(ve,ye,_e)),ee.setTargetAtTime(ve,ye,_e),pe},setValueAtTime(ve,ye){return de===null&&fe.flush(K.context.currentTime),fe.add(F(ve,ye)),ee.setValueAtTime(ve,ye),pe},setValueCurveAtTime(ve,ye,_e){const be=ve instanceof Float32Array?ve:new Float32Array(ve);if(U!==null&&U.name==="webkitAudioContext"){const Te=ye+_e,ue=K.context.sampleRate,O=Math.ceil(ye*ue),z=Math.floor(Te*ue),Y=z-O,te=new Float32Array(Y);for(let le=0;le<Y;le+=1){const he=(be.length-1)/_e*((O+le)/ue-ye),ae=Math.floor(he),Q=Math.ceil(he);te[le]=ae===Q?be[ae]:(1-(he-ae))*be[ae]+(1-(Q-he))*be[Q]}de===null&&fe.flush(K.context.currentTime),fe.add(L(te,ye,_e)),ee.setValueCurveAtTime(te,ye,_e);const oe=z/ue;oe<Te&&V(pe,te[te.length-1],oe),V(pe,be[be.length-1],Te)}else de===null&&fe.flush(K.context.currentTime),fe.add(L(be,ye,_e)),ee.setValueCurveAtTime(be,ye,_e);return pe}};return _.set(pe,ee),A.set(pe,K),E(pe,de),pe},createAudioParamRenderer=E=>({replay(A){for(const _ of E)if(_.type==="exponentialRampToValue"){const{endTime:I,value:B}=_;A.exponentialRampToValueAtTime(B,I)}else if(_.type==="linearRampToValue"){const{endTime:I,value:B}=_;A.linearRampToValueAtTime(B,I)}else if(_.type==="setTarget"){const{startTime:I,target:B,timeConstant:T}=_;A.setTargetAtTime(B,I,T)}else if(_.type==="setValue"){const{startTime:I,value:B}=_;A.setValueAtTime(B,I)}else if(_.type==="setValueCurve"){const{duration:I,startTime:B,values:T}=_;A.setValueCurveAtTime(T,B,I)}else throw new Error("Can't apply an unknown automation.")}});class ReadOnlyMap{constructor(A){this._map=new Map(A)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(A,_=null){return this._map.forEach((I,B)=>A.call(_,I,B,this))}get(A){return this._map.get(A)}has(A){return this._map.has(A)}keys(){return this._map.keys()}values(){return this._map.values()}}const DEFAULT_OPTIONS$g={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},createAudioWorkletNodeConstructor=(E,A,_,I,B,T,R,P,D,F,L,U,V,K)=>class extends A{constructor(ee,ie,ne){var ce;const fe=P(ee),de=D(fe),pe=L({...DEFAULT_OPTIONS$g,...ne});V(pe);const ve=NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.get(fe),ye=ve?.get(ie),_e=de||fe.state!=="closed"?fe:(ce=R(fe))!==null&&ce!==void 0?ce:fe,be=B(_e,de?null:ee.baseLatency,F,ie,ye,pe),Te=de?I(ie,pe,ye):null;super(ee,!0,be,Te);const ue=[];be.parameters.forEach((z,Y)=>{const te=_(this,de,z);ue.push([Y,te])}),this._nativeAudioWorkletNode=be,this._onprocessorerror=null,this._parameters=new ReadOnlyMap(ue),de&&E(fe,this);const{activeInputs:O}=T(this);U(be,O)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(ee){const ie=typeof ee=="function"?K(this,ee):null;this._nativeAudioWorkletNode.onprocessorerror=ie;const ne=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=ne!==null&&ne===ie?ee:ne}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function copyFromChannel(E,A,_,I,B){if(typeof E.copyFromChannel=="function")A[_].byteLength===0&&(A[_]=new Float32Array(128)),E.copyFromChannel(A[_],I,B);else{const T=E.getChannelData(I);if(A[_].byteLength===0)A[_]=T.slice(B,B+128);else{const R=new Float32Array(T.buffer,B*Float32Array.BYTES_PER_ELEMENT,128);A[_].set(R)}}}const copyToChannel=(E,A,_,I,B)=>{typeof E.copyToChannel=="function"?A[_].byteLength!==0&&E.copyToChannel(A[_],I,B):A[_].byteLength!==0&&E.getChannelData(I).set(A[_],B)},createNestedArrays=(E,A)=>{const _=[];for(let I=0;I<E;I+=1){const B=[],T=typeof A=="number"?A:A[I];for(let R=0;R<T;R+=1)B.push(new Float32Array(128));_.push(B)}return _},getAudioWorkletProcessor=(E,A)=>{const _=getValueForKey(NODE_TO_PROCESSOR_MAPS,E),I=getNativeAudioNode(A);return getValueForKey(_,I)},processBuffer=async(E,A,_,I,B,T,R)=>{const P=A===null?Math.ceil(E.context.length/128)*128:A.length,D=I.channelCount*I.numberOfInputs,F=B.reduce((ie,ne)=>ie+ne,0),L=F===0?null:_.createBuffer(F,P,_.sampleRate);if(T===void 0)throw new Error("Missing the processor constructor.");const U=getAudioNodeConnections(E),V=await getAudioWorkletProcessor(_,E),K=createNestedArrays(I.numberOfInputs,I.channelCount),J=createNestedArrays(I.numberOfOutputs,B),ee=Array.from(E.parameters.keys()).reduce((ie,ne)=>({...ie,[ne]:new Float32Array(128)}),{});for(let ie=0;ie<P;ie+=128){if(I.numberOfInputs>0&&A!==null)for(let ne=0;ne<I.numberOfInputs;ne+=1)for(let ce=0;ce<I.channelCount;ce+=1)copyFromChannel(A,K[ne],ce,ce,ie);T.parameterDescriptors!==void 0&&A!==null&&T.parameterDescriptors.forEach(({name:ne},ce)=>{copyFromChannel(A,ee,ne,D+ce,ie)});for(let ne=0;ne<I.numberOfInputs;ne+=1)for(let ce=0;ce<B[ne];ce+=1)J[ne][ce].byteLength===0&&(J[ne][ce]=new Float32Array(128));try{const ne=K.map((fe,de)=>U.activeInputs[de].size===0?[]:fe),ce=R(ie/_.sampleRate,_.sampleRate,()=>V.process(ne,J,ee));if(L!==null)for(let fe=0,de=0;fe<I.numberOfOutputs;fe+=1){for(let pe=0;pe<B[fe];pe+=1)copyToChannel(L,J[fe],pe,de+pe,ie);de+=B[fe]}if(!ce)break}catch(ne){E.dispatchEvent(new ErrorEvent("processorerror",{colno:ne.colno,filename:ne.filename,lineno:ne.lineno,message:ne.message}));break}}return L},createAudioWorkletNodeRendererFactory=(E,A,_,I,B,T,R,P,D,F,L,U,V,K,J,ee)=>(ie,ne,ce)=>{const fe=new WeakMap;let de=null;const pe=async(ve,ye)=>{let _e=L(ve),be=null;const Te=isOwnedByContext(_e,ye),ue=Array.isArray(ne.outputChannelCount)?ne.outputChannelCount:Array.from(ne.outputChannelCount);if(U===null){const O=ue.reduce((oe,le)=>oe+le,0),z=B(ye,{channelCount:Math.max(1,O),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,O)}),Y=[];for(let oe=0;oe<ve.numberOfOutputs;oe+=1)Y.push(I(ye,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:ue[oe]}));const te=R(ye,{channelCount:ne.channelCount,channelCountMode:ne.channelCountMode,channelInterpretation:ne.channelInterpretation,gain:1});te.connect=A.bind(null,Y),te.disconnect=D.bind(null,Y),be=[z,Y,te]}else Te||(_e=new U(ye,ie));if(fe.set(ye,be===null?_e:be[2]),be!==null){if(de===null){if(ce===void 0)throw new Error("Missing the processor constructor.");if(V===null)throw new Error("Missing the native OfflineAudioContext constructor.");const le=ve.channelCount*ve.numberOfInputs,he=ce.parameterDescriptors===void 0?0:ce.parameterDescriptors.length,ae=le+he;de=processBuffer(ve,ae===0?null:await(async()=>{const se=new V(ae,Math.ceil(ve.context.length/128)*128,ye.sampleRate),Ae=[],ge=[];for(let Se=0;Se<ne.numberOfInputs;Se+=1)Ae.push(R(se,{channelCount:ne.channelCount,channelCountMode:ne.channelCountMode,channelInterpretation:ne.channelInterpretation,gain:1})),ge.push(B(se,{channelCount:ne.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:ne.channelCount}));const Ee=await Promise.all(Array.from(ve.parameters.values()).map(async Se=>{const Ie=T(se,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Se.value});return await K(se,Se,Ie.offset),Ie})),ke=I(se,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,le+he)});for(let Se=0;Se<ne.numberOfInputs;Se+=1){Ae[Se].connect(ge[Se]);for(let Ie=0;Ie<ne.channelCount;Ie+=1)ge[Se].connect(ke,Ie,Se*ne.channelCount+Ie)}for(const[Se,Ie]of Ee.entries())Ie.connect(ke,0,le+Se),Ie.start(0);return ke.connect(se.destination),await Promise.all(Ae.map(Se=>J(ve,se,Se))),ee(se)})(),ye,ne,ue,ce,F)}const O=await de,z=_(ye,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[Y,te,oe]=be;O!==null&&(z.buffer=O,z.start(0)),z.connect(Y);for(let le=0,he=0;le<ve.numberOfOutputs;le+=1){const ae=te[le];for(let Q=0;Q<ue[le];Q+=1)Y.connect(ae,he+Q,Q);he+=ue[le]}return oe}if(Te)for(const[O,z]of ve.parameters.entries())await E(ye,z,_e.parameters.get(O));else for(const[O,z]of ve.parameters.entries())await K(ye,z,_e.parameters.get(O));return await J(ve,ye,_e),_e};return{render(ve,ye){P(ye,ve);const _e=fe.get(ye);return _e!==void 0?Promise.resolve(_e):pe(ve,ye)}}},createBaseAudioContextConstructor=(E,A,_,I,B,T,R,P,D,F,L,U,V,K,J,ee,ie,ne,ce,fe)=>class extends J{constructor(pe,ve){super(pe,ve),this._nativeContext=pe,this._audioWorklet=E===void 0?void 0:{addModule:(ye,_e)=>E(this,ye,_e)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new A(this)}createBiquadFilter(){return new B(this)}createBuffer(pe,ve,ye){return new _({length:ve,numberOfChannels:pe,sampleRate:ye})}createBufferSource(){return new I(this)}createChannelMerger(pe=6){return new T(this,{numberOfInputs:pe})}createChannelSplitter(pe=6){return new R(this,{numberOfOutputs:pe})}createConstantSource(){return new P(this)}createConvolver(){return new D(this)}createDelay(pe=1){return new L(this,{maxDelayTime:pe})}createDynamicsCompressor(){return new U(this)}createGain(){return new V(this)}createIIRFilter(pe,ve){return new K(this,{feedback:ve,feedforward:pe})}createOscillator(){return new ee(this)}createPanner(){return new ie(this)}createPeriodicWave(pe,ve,ye={disableNormalization:!1}){return new ne(this,{...ye,imag:ve,real:pe})}createStereoPanner(){return new ce(this)}createWaveShaper(){return new fe(this)}decodeAudioData(pe,ve,ye){return F(this._nativeContext,pe).then(_e=>(typeof ve=="function"&&ve(_e),_e),_e=>{throw typeof ye=="function"&&ye(_e),_e})}},DEFAULT_OPTIONS$f={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},createBiquadFilterNodeConstructor=(E,A,_,I,B,T,R,P)=>class extends E{constructor(F,L){const U=T(F),V={...DEFAULT_OPTIONS$f,...L},K=B(U,V),J=R(U),ee=J?_():null;super(F,!1,K,ee),this._Q=A(this,J,K.Q,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._detune=A(this,J,K.detune,1200*Math.log2(MOST_POSITIVE_SINGLE_FLOAT),-1200*Math.log2(MOST_POSITIVE_SINGLE_FLOAT)),this._frequency=A(this,J,K.frequency,F.sampleRate/2,0),this._gain=A(this,J,K.gain,40*Math.log10(MOST_POSITIVE_SINGLE_FLOAT),MOST_NEGATIVE_SINGLE_FLOAT),this._nativeBiquadFilterNode=K,P(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(F){this._nativeBiquadFilterNode.type=F}getFrequencyResponse(F,L,U){try{this._nativeBiquadFilterNode.getFrequencyResponse(F,L,U)}catch(V){throw V.code===11?I():V}if(F.length!==L.length||L.length!==U.length)throw I()}},createBiquadFilterNodeRendererFactory=(E,A,_,I,B)=>()=>{const T=new WeakMap,R=async(P,D)=>{let F=_(P);const L=isOwnedByContext(F,D);if(!L){const U={Q:F.Q.value,channelCount:F.channelCount,channelCountMode:F.channelCountMode,channelInterpretation:F.channelInterpretation,detune:F.detune.value,frequency:F.frequency.value,gain:F.gain.value,type:F.type};F=A(D,U)}return T.set(D,F),L?(await E(D,P.Q,F.Q),await E(D,P.detune,F.detune),await E(D,P.frequency,F.frequency),await E(D,P.gain,F.gain)):(await I(D,P.Q,F.Q),await I(D,P.detune,F.detune),await I(D,P.frequency,F.frequency),await I(D,P.gain,F.gain)),await B(P,D,F),F};return{render(P,D){const F=T.get(D);return F!==void 0?Promise.resolve(F):R(P,D)}}},createCacheTestResult=(E,A)=>(_,I)=>{const B=A.get(_);if(B!==void 0)return B;const T=E.get(_);if(T!==void 0)return T;try{const R=I();return R instanceof Promise?(E.set(_,R),R.catch(()=>!1).then(P=>(E.delete(_),A.set(_,P),P))):(A.set(_,R),R)}catch{return A.set(_,!1),!1}},DEFAULT_OPTIONS$e={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},createChannelMergerNodeConstructor=(E,A,_,I,B)=>class extends E{constructor(R,P){const D=I(R),F={...DEFAULT_OPTIONS$e,...P},L=_(D,F),U=B(D)?A():null;super(R,!1,L,U)}},createChannelMergerNodeRendererFactory=(E,A,_)=>()=>{const I=new WeakMap,B=async(T,R)=>{let P=A(T);if(!isOwnedByContext(P,R)){const F={channelCount:P.channelCount,channelCountMode:P.channelCountMode,channelInterpretation:P.channelInterpretation,numberOfInputs:P.numberOfInputs};P=E(R,F)}return I.set(R,P),await _(T,R,P),P};return{render(T,R){const P=I.get(R);return P!==void 0?Promise.resolve(P):B(T,R)}}},DEFAULT_OPTIONS$d={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},createChannelSplitterNodeConstructor=(E,A,_,I,B,T)=>class extends E{constructor(P,D){const F=I(P),L=T({...DEFAULT_OPTIONS$d,...D}),U=_(F,L),V=B(F)?A():null;super(P,!1,U,V)}},createChannelSplitterNodeRendererFactory=(E,A,_)=>()=>{const I=new WeakMap,B=async(T,R)=>{let P=A(T);if(!isOwnedByContext(P,R)){const F={channelCount:P.channelCount,channelCountMode:P.channelCountMode,channelInterpretation:P.channelInterpretation,numberOfOutputs:P.numberOfOutputs};P=E(R,F)}return I.set(R,P),await _(T,R,P),P};return{render(T,R){const P=I.get(R);return P!==void 0?Promise.resolve(P):B(T,R)}}},createConnectAudioParam=E=>(A,_,I)=>E(_,A,I),createConnectMultipleOutputs=E=>(A,_,I=0,B=0)=>{const T=A[I];if(T===void 0)throw E();return isNativeAudioNode$1(_)?T.connect(_,0,B):T.connect(_,0)},createConnectedNativeAudioBufferSourceNodeFactory=E=>(A,_)=>{const I=E(A,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),B=A.createBuffer(1,2,44100);return I.buffer=B,I.loop=!0,I.connect(_),I.start(),()=>{I.stop(),I.disconnect(_)}},DEFAULT_OPTIONS$c={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},createConstantSourceNodeConstructor=(E,A,_,I,B,T,R)=>class extends E{constructor(D,F){const L=B(D),U={...DEFAULT_OPTIONS$c,...F},V=I(L,U),K=T(L),J=K?_():null;super(D,!1,V,J),this._constantSourceNodeRenderer=J,this._nativeConstantSourceNode=V,this._offset=A(this,K,V.offset,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(D){const F=typeof D=="function"?R(this,D):null;this._nativeConstantSourceNode.onended=F;const L=this._nativeConstantSourceNode.onended;this._onended=L!==null&&L===F?D:L}start(D=0){if(this._nativeConstantSourceNode.start(D),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=D),this.context.state!=="closed"){setInternalStateToActive(this);const F=()=>{this._nativeConstantSourceNode.removeEventListener("ended",F),isActiveAudioNode(this)&&setInternalStateToPassive(this)};this._nativeConstantSourceNode.addEventListener("ended",F)}}stop(D=0){this._nativeConstantSourceNode.stop(D),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=D)}},createConstantSourceNodeRendererFactory=(E,A,_,I,B)=>()=>{const T=new WeakMap;let R=null,P=null;const D=async(F,L)=>{let U=_(F);const V=isOwnedByContext(U,L);if(!V){const K={channelCount:U.channelCount,channelCountMode:U.channelCountMode,channelInterpretation:U.channelInterpretation,offset:U.offset.value};U=A(L,K),R!==null&&U.start(R),P!==null&&U.stop(P)}return T.set(L,U),V?await E(L,F.offset,U.offset):await I(L,F.offset,U.offset),await B(F,L,U),U};return{set start(F){R=F},set stop(F){P=F},render(F,L){const U=T.get(L);return U!==void 0?Promise.resolve(U):D(F,L)}}},createConvertNumberToUnsignedLong=E=>A=>(E[0]=A,E[0]),DEFAULT_OPTIONS$b={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},createConvolverNodeConstructor=(E,A,_,I,B,T)=>class extends E{constructor(P,D){const F=I(P),L={...DEFAULT_OPTIONS$b,...D},U=_(F,L),K=B(F)?A():null;super(P,!1,U,K),this._isBufferNullified=!1,this._nativeConvolverNode=U,L.buffer!==null&&T(this,L.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(P){if(this._nativeConvolverNode.buffer=P,P===null&&this._nativeConvolverNode.buffer!==null){const D=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=D.createBuffer(1,1,D.sampleRate),this._isBufferNullified=!0,T(this,0)}else this._isBufferNullified=!1,T(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(P){this._nativeConvolverNode.normalize=P}},createConvolverNodeRendererFactory=(E,A,_)=>()=>{const I=new WeakMap,B=async(T,R)=>{let P=A(T);if(!isOwnedByContext(P,R)){const F={buffer:P.buffer,channelCount:P.channelCount,channelCountMode:P.channelCountMode,channelInterpretation:P.channelInterpretation,disableNormalization:!P.normalize};P=E(R,F)}return I.set(R,P),isNativeAudioNodeFaker(P)?await _(T,R,P.inputs[0]):await _(T,R,P),P};return{render(T,R){const P=I.get(R);return P!==void 0?Promise.resolve(P):B(T,R)}}},createCreateNativeOfflineAudioContext=(E,A)=>(_,I,B)=>{if(A===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new A(_,I,B)}catch(T){throw T.name==="SyntaxError"?E():T}},createDataCloneError=()=>new DOMException("","DataCloneError"),detachArrayBuffer=E=>{const{port1:A,port2:_}=new MessageChannel;return new Promise(I=>{const B=()=>{_.onmessage=null,A.close(),_.close(),I()};_.onmessage=()=>B();try{A.postMessage(E,[E])}catch{}finally{B()}})},createDecodeAudioData=(E,A,_,I,B,T,R,P,D,F,L)=>(U,V)=>{const K=R(U)?U:T(U);if(B.has(V)){const J=_();return Promise.reject(J)}try{B.add(V)}catch{}return A(D,()=>D(K))?K.decodeAudioData(V).then(J=>(detachArrayBuffer(V).catch(()=>{}),A(P,()=>P(J))||L(J),E.add(J),J)):new Promise((J,ee)=>{const ie=async()=>{try{await detachArrayBuffer(V)}catch{}},ne=ce=>{ee(ce),ie()};try{K.decodeAudioData(V,ce=>{typeof ce.copyFromChannel!="function"&&(F(ce),wrapAudioBufferGetChannelDataMethod(ce)),E.add(ce),ie().then(()=>J(ce))},ce=>{ne(ce===null?I():ce)})}catch(ce){ne(ce)}})},createDecrementCycleCounter=(E,A,_,I,B,T,R,P)=>(D,F)=>{const L=A.get(D);if(L===void 0)throw new Error("Missing the expected cycle count.");const U=T(D.context),V=P(U);if(L===F){if(A.delete(D),!V&&R(D)){const K=I(D),{outputs:J}=_(D);for(const ee of J)if(isAudioNodeOutputConnection(ee)){const ie=I(ee[0]);E(K,ie,ee[1],ee[2])}else{const ie=B(ee[0]);K.connect(ie,ee[1])}}}else A.set(D,L-F)},DEFAULT_OPTIONS$a={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},createDelayNodeConstructor=(E,A,_,I,B,T,R)=>class extends E{constructor(D,F){const L=B(D),U={...DEFAULT_OPTIONS$a,...F},V=I(L,U),K=T(L),J=K?_(U.maxDelayTime):null;super(D,!1,V,J),this._delayTime=A(this,K,V.delayTime),R(this,U.maxDelayTime)}get delayTime(){return this._delayTime}},createDelayNodeRendererFactory=(E,A,_,I,B)=>T=>{const R=new WeakMap,P=async(D,F)=>{let L=_(D);const U=isOwnedByContext(L,F);if(!U){const V={channelCount:L.channelCount,channelCountMode:L.channelCountMode,channelInterpretation:L.channelInterpretation,delayTime:L.delayTime.value,maxDelayTime:T};L=A(F,V)}return R.set(F,L),U?await E(F,D.delayTime,L.delayTime):await I(F,D.delayTime,L.delayTime),await B(D,F,L),L};return{render(D,F){const L=R.get(F);return L!==void 0?Promise.resolve(L):P(D,F)}}},createDeleteActiveInputConnectionToAudioNode=E=>(A,_,I,B)=>E(A[B],T=>T[0]===_&&T[1]===I),createDeleteUnrenderedAudioWorkletNode=E=>(A,_)=>{E(A).delete(_)},isDelayNode=E=>"delayTime"in E,createDetectCycles=(E,A,_)=>function I(B,T){const R=isAudioNode$1(T)?T:_(E,T);if(isDelayNode(R))return[];if(B[0]===R)return[B];if(B.includes(R))return[];const{outputs:P}=A(R);return Array.from(P).map(D=>I([...B,R],D[0])).reduce((D,F)=>D.concat(F),[])},getOutputAudioNodeAtIndex=(E,A,_)=>{const I=A[_];if(I===void 0)throw E();return I},createDisconnectMultipleOutputs=E=>(A,_=void 0,I=void 0,B=0)=>_===void 0?A.forEach(T=>T.disconnect()):typeof _=="number"?getOutputAudioNodeAtIndex(E,A,_).disconnect():isNativeAudioNode$1(_)?I===void 0?A.forEach(T=>T.disconnect(_)):B===void 0?getOutputAudioNodeAtIndex(E,A,I).disconnect(_,0):getOutputAudioNodeAtIndex(E,A,I).disconnect(_,0,B):I===void 0?A.forEach(T=>T.disconnect(_)):getOutputAudioNodeAtIndex(E,A,I).disconnect(_,0),DEFAULT_OPTIONS$9={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},createDynamicsCompressorNodeConstructor=(E,A,_,I,B,T,R,P)=>class extends E{constructor(F,L){const U=T(F),V={...DEFAULT_OPTIONS$9,...L},K=I(U,V),J=R(U),ee=J?_():null;super(F,!1,K,ee),this._attack=A(this,J,K.attack),this._knee=A(this,J,K.knee),this._nativeDynamicsCompressorNode=K,this._ratio=A(this,J,K.ratio),this._release=A(this,J,K.release),this._threshold=A(this,J,K.threshold),P(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(F){const L=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=F,F>2)throw this._nativeDynamicsCompressorNode.channelCount=L,B()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(F){const L=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=F,F==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=L,B()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},createDynamicsCompressorNodeRendererFactory=(E,A,_,I,B)=>()=>{const T=new WeakMap,R=async(P,D)=>{let F=_(P);const L=isOwnedByContext(F,D);if(!L){const U={attack:F.attack.value,channelCount:F.channelCount,channelCountMode:F.channelCountMode,channelInterpretation:F.channelInterpretation,knee:F.knee.value,ratio:F.ratio.value,release:F.release.value,threshold:F.threshold.value};F=A(D,U)}return T.set(D,F),L?(await E(D,P.attack,F.attack),await E(D,P.knee,F.knee),await E(D,P.ratio,F.ratio),await E(D,P.release,F.release),await E(D,P.threshold,F.threshold)):(await I(D,P.attack,F.attack),await I(D,P.knee,F.knee),await I(D,P.ratio,F.ratio),await I(D,P.release,F.release),await I(D,P.threshold,F.threshold)),await B(P,D,F),F};return{render(P,D){const F=T.get(D);return F!==void 0?Promise.resolve(F):R(P,D)}}},createEncodingError=()=>new DOMException("","EncodingError"),createEvaluateSource=E=>A=>new Promise((_,I)=>{if(E===null){I(new SyntaxError);return}const B=E.document.head;if(B===null)I(new SyntaxError);else{const T=E.document.createElement("script"),R=new Blob([A],{type:"application/javascript"}),P=URL.createObjectURL(R),D=E.onerror,F=()=>{E.onerror=D,URL.revokeObjectURL(P)};E.onerror=(L,U,V,K,J)=>{if(U===P||U===E.location.href&&V===1&&K===1)return F(),I(J),!1;if(D!==null)return D(L,U,V,K,J)},T.onerror=()=>{F(),I(new SyntaxError)},T.onload=()=>{F(),_()},T.src=P,T.type="module",B.appendChild(T)}}),createEventTargetConstructor=E=>class{constructor(_){this._nativeEventTarget=_,this._listeners=new WeakMap}addEventListener(_,I,B){if(I!==null){let T=this._listeners.get(I);T===void 0&&(T=E(this,I),typeof I=="function"&&this._listeners.set(I,T)),this._nativeEventTarget.addEventListener(_,T,B)}}dispatchEvent(_){return this._nativeEventTarget.dispatchEvent(_)}removeEventListener(_,I,B){const T=I===null?void 0:this._listeners.get(I);this._nativeEventTarget.removeEventListener(_,T===void 0?null:T,B)}},createExposeCurrentFrameAndCurrentTime=E=>(A,_,I)=>{Object.defineProperties(E,{currentFrame:{configurable:!0,get(){return Math.round(A*_)}},currentTime:{configurable:!0,get(){return A}}});try{return I()}finally{E!==null&&(delete E.currentFrame,delete E.currentTime)}},createFetchSource=E=>async A=>{try{const _=await fetch(A);if(_.ok)return[await _.text(),_.url]}catch{}throw E()},DEFAULT_OPTIONS$8={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},createGainNodeConstructor=(E,A,_,I,B,T)=>class extends E{constructor(P,D){const F=B(P),L={...DEFAULT_OPTIONS$8,...D},U=I(F,L),V=T(F),K=V?_():null;super(P,!1,U,K),this._gain=A(this,V,U.gain,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT)}get gain(){return this._gain}},createGainNodeRendererFactory=(E,A,_,I,B)=>()=>{const T=new WeakMap,R=async(P,D)=>{let F=_(P);const L=isOwnedByContext(F,D);if(!L){const U={channelCount:F.channelCount,channelCountMode:F.channelCountMode,channelInterpretation:F.channelInterpretation,gain:F.gain.value};F=A(D,U)}return T.set(D,F),L?await E(D,P.gain,F.gain):await I(D,P.gain,F.gain),await B(P,D,F),F};return{render(P,D){const F=T.get(D);return F!==void 0?Promise.resolve(F):R(P,D)}}},createGetActiveAudioWorkletNodeInputs=(E,A)=>_=>A(E,_),createGetAudioNodeRenderer=E=>A=>{const _=E(A);if(_.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return _.renderer},createGetAudioNodeTailTime=E=>A=>{var _;return(_=E.get(A))!==null&&_!==void 0?_:0},createGetAudioParamRenderer=E=>A=>{const _=E(A);if(_.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return _.renderer},createGetBackupOfflineAudioContext=E=>A=>E.get(A),createInvalidStateError=()=>new DOMException("","InvalidStateError"),createGetNativeContext=E=>A=>{const _=E.get(A);if(_===void 0)throw createInvalidStateError();return _},createGetOrCreateBackupOfflineAudioContext=(E,A)=>_=>{let I=E.get(_);if(I!==void 0)return I;if(A===null)throw new Error("Missing the native OfflineAudioContext constructor.");return I=new A(1,1,44100),E.set(_,I),I},createGetUnrenderedAudioWorkletNodes=E=>A=>{const _=E.get(A);if(_===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return _},createInvalidAccessError=()=>new DOMException("","InvalidAccessError"),wrapIIRFilterNodeGetFrequencyResponseMethod=E=>{E.getFrequencyResponse=(A=>(_,I,B)=>{if(_.length!==I.length||I.length!==B.length)throw createInvalidAccessError();return A.call(E,_,I,B)})(E.getFrequencyResponse)},DEFAULT_OPTIONS$7={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},createIIRFilterNodeConstructor=(E,A,_,I,B,T)=>class extends E{constructor(P,D){const F=I(P),L=B(F),U={...DEFAULT_OPTIONS$7,...D},V=A(F,L?null:P.baseLatency,U),K=L?_(U.feedback,U.feedforward):null;super(P,!1,V,K),wrapIIRFilterNodeGetFrequencyResponseMethod(V),this._nativeIIRFilterNode=V,T(this,1)}getFrequencyResponse(P,D,F){return this._nativeIIRFilterNode.getFrequencyResponse(P,D,F)}},filterBuffer=(E,A,_,I,B,T,R,P,D,F,L)=>{const U=F.length;let V=P;for(let K=0;K<U;K+=1){let J=_[0]*F[K];for(let ee=1;ee<B;ee+=1){const ie=V-ee&D-1;J+=_[ee]*T[ie],J-=E[ee]*R[ie]}for(let ee=B;ee<I;ee+=1)J+=_[ee]*T[V-ee&D-1];for(let ee=B;ee<A;ee+=1)J-=E[ee]*R[V-ee&D-1];T[V]=F[K],R[V]=J,V=V+1&D-1,L[K]=J}return V},filterFullBuffer=(E,A,_,I)=>{const B=_ instanceof Float64Array?_:new Float64Array(_),T=I instanceof Float64Array?I:new Float64Array(I),R=B.length,P=T.length,D=Math.min(R,P);if(B[0]!==1){for(let J=0;J<R;J+=1)T[J]/=B[0];for(let J=1;J<P;J+=1)B[J]/=B[0]}const F=32,L=new Float32Array(F),U=new Float32Array(F),V=A.createBuffer(E.numberOfChannels,E.length,E.sampleRate),K=E.numberOfChannels;for(let J=0;J<K;J+=1){const ee=E.getChannelData(J),ie=V.getChannelData(J);L.fill(0),U.fill(0),filterBuffer(B,R,T,P,D,L,U,0,F,ee,ie)}return V},createIIRFilterNodeRendererFactory=(E,A,_,I,B)=>(T,R)=>{const P=new WeakMap;let D=null;const F=async(L,U)=>{let V=null,K=A(L);const J=isOwnedByContext(K,U);if(U.createIIRFilter===void 0?V=E(U,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):J||(K=U.createIIRFilter(R,T)),P.set(U,V===null?K:V),V!==null){if(D===null){if(_===null)throw new Error("Missing the native OfflineAudioContext constructor.");const ie=new _(L.context.destination.channelCount,L.context.length,U.sampleRate);D=(async()=>{await I(L,ie,ie.destination);const ne=await B(ie);return filterFullBuffer(ne,U,T,R)})()}const ee=await D;return V.buffer=ee,V.start(0),V}return await I(L,U,K),K};return{render(L,U){const V=P.get(U);return V!==void 0?Promise.resolve(V):F(L,U)}}},createIncrementCycleCounterFactory=(E,A,_,I,B,T)=>R=>(P,D)=>{const F=E.get(P);if(F===void 0){if(!R&&T(P)){const L=I(P),{outputs:U}=_(P);for(const V of U)if(isAudioNodeOutputConnection(V)){const K=I(V[0]);A(L,K,V[1],V[2])}else{const K=B(V[0]);L.disconnect(K,V[1])}}E.set(P,D)}else E.set(P,F+D)},createIsAnyAudioContext=(E,A)=>_=>{const I=E.get(_);return A(I)||A(_)},createIsAnyAudioNode=(E,A)=>_=>E.has(_)||A(_),createIsAnyAudioParam=(E,A)=>_=>E.has(_)||A(_),createIsAnyOfflineAudioContext=(E,A)=>_=>{const I=E.get(_);return A(I)||A(_)},createIsNativeAudioContext=E=>A=>E!==null&&A instanceof E,createIsNativeAudioNode=E=>A=>E!==null&&typeof E.AudioNode=="function"&&A instanceof E.AudioNode,createIsNativeAudioParam=E=>A=>E!==null&&typeof E.AudioParam=="function"&&A instanceof E.AudioParam,createIsNativeContext=(E,A)=>_=>E(_)||A(_),createIsNativeOfflineAudioContext=E=>A=>E!==null&&A instanceof E,createIsSecureContext=E=>E!==null&&E.isSecureContext,createMediaElementAudioSourceNodeConstructor=(E,A,_,I)=>class extends E{constructor(T,R){const P=_(T),D=A(P,R);if(I(P))throw TypeError();super(T,!0,D,null),this._nativeMediaElementAudioSourceNode=D}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},DEFAULT_OPTIONS$6={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},createMediaStreamAudioDestinationNodeConstructor=(E,A,_,I)=>class extends E{constructor(T,R){const P=_(T);if(I(P))throw new TypeError;const D={...DEFAULT_OPTIONS$6,...R},F=A(P,D);super(T,!1,F,null),this._nativeMediaStreamAudioDestinationNode=F}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},createMediaStreamAudioSourceNodeConstructor=(E,A,_,I)=>class extends E{constructor(T,R){const P=_(T),D=A(P,R);if(I(P))throw new TypeError;super(T,!0,D,null),this._nativeMediaStreamAudioSourceNode=D}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},createMediaStreamTrackAudioSourceNodeConstructor=(E,A,_)=>class extends E{constructor(B,T){const R=_(B),P=A(R,T);super(B,!0,P,null)}},createMinimalBaseAudioContextConstructor=(E,A,_,I,B,T)=>class extends _{constructor(P,D){super(P),this._nativeContext=P,CONTEXT_STORE.set(this,P),I(P)&&B.set(P,new Set),this._destination=new E(this,D),this._listener=A(this,P),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(P){const D=typeof P=="function"?T(this,P):null;this._nativeContext.onstatechange=D;const F=this._nativeContext.onstatechange;this._onstatechange=F!==null&&F===D?P:F}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},testPromiseSupport=E=>{const A=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const _=E.decodeAudioData(A.buffer,()=>{});return _===void 0?!1:(_.catch(()=>{}),!0)}catch{}return!1},createMonitorConnections=(E,A)=>(_,I,B)=>{const T=new Set;return _.connect=(R=>(P,D=0,F=0)=>{const L=T.size===0;if(A(P))return R.call(_,P,D,F),E(T,[P,D,F],U=>U[0]===P&&U[1]===D&&U[2]===F,!0),L&&I(),P;R.call(_,P,D),E(T,[P,D],U=>U[0]===P&&U[1]===D,!0),L&&I()})(_.connect),_.disconnect=(R=>(P,D,F)=>{const L=T.size>0;if(P===void 0)R.apply(_),T.clear();else if(typeof P=="number"){R.call(_,P);for(const V of T)V[1]===P&&T.delete(V)}else{A(P)?R.call(_,P,D,F):R.call(_,P,D);for(const V of T)V[0]===P&&(D===void 0||V[1]===D)&&(F===void 0||V[2]===F)&&T.delete(V)}const U=T.size===0;L&&U&&B()})(_.disconnect),_},assignNativeAudioNodeOption=(E,A,_)=>{const I=A[_];I!==void 0&&I!==E[_]&&(E[_]=I)},assignNativeAudioNodeOptions=(E,A)=>{assignNativeAudioNodeOption(E,A,"channelCount"),assignNativeAudioNodeOption(E,A,"channelCountMode"),assignNativeAudioNodeOption(E,A,"channelInterpretation")},testAnalyserNodeGetFloatTimeDomainDataMethodSupport=E=>typeof E.getFloatTimeDomainData=="function",wrapAnalyserNodeGetFloatTimeDomainDataMethod=E=>{E.getFloatTimeDomainData=A=>{const _=new Uint8Array(A.length);E.getByteTimeDomainData(_);const I=Math.max(_.length,E.fftSize);for(let B=0;B<I;B+=1)A[B]=(_[B]-128)*.0078125;return A}},createNativeAnalyserNodeFactory=(E,A)=>(_,I)=>{const B=_.createAnalyser();if(assignNativeAudioNodeOptions(B,I),!(I.maxDecibels>I.minDecibels))throw A();return assignNativeAudioNodeOption(B,I,"fftSize"),assignNativeAudioNodeOption(B,I,"maxDecibels"),assignNativeAudioNodeOption(B,I,"minDecibels"),assignNativeAudioNodeOption(B,I,"smoothingTimeConstant"),E(testAnalyserNodeGetFloatTimeDomainDataMethodSupport,()=>testAnalyserNodeGetFloatTimeDomainDataMethodSupport(B))||wrapAnalyserNodeGetFloatTimeDomainDataMethod(B),B},createNativeAudioBufferConstructor=E=>E===null?null:E.hasOwnProperty("AudioBuffer")?E.AudioBuffer:null,assignNativeAudioNodeAudioParamValue=(E,A,_)=>{const I=A[_];I!==void 0&&I!==E[_].value&&(E[_].value=I)},wrapAudioBufferSourceNodeStartMethodConsecutiveCalls=E=>{E.start=(A=>{let _=!1;return(I=0,B=0,T)=>{if(_)throw createInvalidStateError();A.call(E,I,B,T),_=!0}})(E.start)},wrapAudioScheduledSourceNodeStartMethodNegativeParameters=E=>{E.start=(A=>(_=0,I=0,B)=>{if(typeof B=="number"&&B<0||I<0||_<0)throw new RangeError("The parameters can't be negative.");A.call(E,_,I,B)})(E.start)},wrapAudioScheduledSourceNodeStopMethodNegativeParameters=E=>{E.stop=(A=>(_=0)=>{if(_<0)throw new RangeError("The parameter can't be negative.");A.call(E,_)})(E.stop)},createNativeAudioBufferSourceNodeFactory=(E,A,_,I,B,T,R,P,D,F,L)=>(U,V)=>{const K=U.createBufferSource();return assignNativeAudioNodeOptions(K,V),assignNativeAudioNodeAudioParamValue(K,V,"playbackRate"),assignNativeAudioNodeOption(K,V,"buffer"),assignNativeAudioNodeOption(K,V,"loop"),assignNativeAudioNodeOption(K,V,"loopEnd"),assignNativeAudioNodeOption(K,V,"loopStart"),A(_,()=>_(U))||wrapAudioBufferSourceNodeStartMethodConsecutiveCalls(K),A(I,()=>I(U))||D(K),A(B,()=>B(U))||F(K,U),A(T,()=>T(U))||wrapAudioScheduledSourceNodeStartMethodNegativeParameters(K),A(R,()=>R(U))||L(K,U),A(P,()=>P(U))||wrapAudioScheduledSourceNodeStopMethodNegativeParameters(K),E(U,K),K},createNativeAudioContextConstructor=E=>E===null?null:E.hasOwnProperty("AudioContext")?E.AudioContext:E.hasOwnProperty("webkitAudioContext")?E.webkitAudioContext:null,createNativeAudioDestinationNodeFactory=(E,A)=>(_,I,B)=>{const T=_.destination;if(T.channelCount!==I)try{T.channelCount=I}catch{}B&&T.channelCountMode!=="explicit"&&(T.channelCountMode="explicit"),T.maxChannelCount===0&&Object.defineProperty(T,"maxChannelCount",{value:I});const R=E(_,{channelCount:I,channelCountMode:T.channelCountMode,channelInterpretation:T.channelInterpretation,gain:1});return A(R,"channelCount",P=>()=>P.call(R),P=>D=>{P.call(R,D);try{T.channelCount=D}catch(F){if(D>T.maxChannelCount)throw F}}),A(R,"channelCountMode",P=>()=>P.call(R),P=>D=>{P.call(R,D),T.channelCountMode=D}),A(R,"channelInterpretation",P=>()=>P.call(R),P=>D=>{P.call(R,D),T.channelInterpretation=D}),Object.defineProperty(R,"maxChannelCount",{get:()=>T.maxChannelCount}),R.connect(T),R},createNativeAudioWorkletNodeConstructor=E=>E===null?null:E.hasOwnProperty("AudioWorkletNode")?E.AudioWorkletNode:null,testClonabilityOfAudioWorkletNodeOptions=E=>{const{port1:A}=new MessageChannel;try{A.postMessage(E)}finally{A.close()}},createNativeAudioWorkletNodeFactory=(E,A,_,I,B)=>(T,R,P,D,F,L)=>{if(P!==null)try{const U=new P(T,D,L),V=new Map;let K=null;if(Object.defineProperties(U,{channelCount:{get:()=>L.channelCount,set:()=>{throw E()}},channelCountMode:{get:()=>"explicit",set:()=>{throw E()}},onprocessorerror:{get:()=>K,set:J=>{typeof K=="function"&&U.removeEventListener("processorerror",K),K=typeof J=="function"?J:null,typeof K=="function"&&U.addEventListener("processorerror",K)}}}),U.addEventListener=(J=>(...ee)=>{if(ee[0]==="processorerror"){const ie=typeof ee[1]=="function"?ee[1]:typeof ee[1]=="object"&&ee[1]!==null&&typeof ee[1].handleEvent=="function"?ee[1].handleEvent:null;if(ie!==null){const ne=V.get(ee[1]);ne!==void 0?ee[1]=ne:(ee[1]=ce=>{ce.type==="error"?(Object.defineProperties(ce,{type:{value:"processorerror"}}),ie(ce)):ie(new ErrorEvent(ee[0],{...ce}))},V.set(ie,ee[1]))}}return J.call(U,"error",ee[1],ee[2]),J.call(U,...ee)})(U.addEventListener),U.removeEventListener=(J=>(...ee)=>{if(ee[0]==="processorerror"){const ie=V.get(ee[1]);ie!==void 0&&(V.delete(ee[1]),ee[1]=ie)}return J.call(U,"error",ee[1],ee[2]),J.call(U,ee[0],ee[1],ee[2])})(U.removeEventListener),L.numberOfOutputs!==0){const J=_(T,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return U.connect(J).connect(T.destination),B(U,()=>J.disconnect(),()=>J.connect(T.destination))}return U}catch(U){throw U.code===11?I():U}if(F===void 0)throw I();return testClonabilityOfAudioWorkletNodeOptions(L),A(T,R,F,L)},computeBufferSize=(E,A)=>E===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(E*A))))),cloneAudioWorkletNodeOptions=E=>new Promise((A,_)=>{const{port1:I,port2:B}=new MessageChannel;I.onmessage=({data:T})=>{I.close(),B.close(),A(T)},I.onmessageerror=({data:T})=>{I.close(),B.close(),_(T)},B.postMessage(E)}),createAudioWorkletProcessorPromise=async(E,A)=>{const _=await cloneAudioWorkletNodeOptions(A);return new E(_)},createAudioWorkletProcessor=(E,A,_,I)=>{let B=NODE_TO_PROCESSOR_MAPS.get(E);B===void 0&&(B=new WeakMap,NODE_TO_PROCESSOR_MAPS.set(E,B));const T=createAudioWorkletProcessorPromise(_,I);return B.set(A,T),T},createNativeAudioWorkletNodeFakerFactory=(E,A,_,I,B,T,R,P,D,F,L,U,V)=>(K,J,ee,ie)=>{if(ie.numberOfInputs===0&&ie.numberOfOutputs===0)throw D();const ne=Array.isArray(ie.outputChannelCount)?ie.outputChannelCount:Array.from(ie.outputChannelCount);if(ne.some(dt=>dt<1))throw D();if(ne.length!==ie.numberOfOutputs)throw A();if(ie.channelCountMode!=="explicit")throw D();const ce=ie.channelCount*ie.numberOfInputs,fe=ne.reduce((dt,mt)=>dt+mt,0),de=ee.parameterDescriptors===void 0?0:ee.parameterDescriptors.length;if(ce+de>6||fe>6)throw D();const pe=new MessageChannel,ve=[],ye=[];for(let dt=0;dt<ie.numberOfInputs;dt+=1)ve.push(R(K,{channelCount:ie.channelCount,channelCountMode:ie.channelCountMode,channelInterpretation:ie.channelInterpretation,gain:1})),ye.push(B(K,{channelCount:ie.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:ie.channelCount}));const _e=[];if(ee.parameterDescriptors!==void 0)for(const{defaultValue:dt,maxValue:mt,minValue:Ut,name:St}of ee.parameterDescriptors){const vt=T(K,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ie.parameterData[St]!==void 0?ie.parameterData[St]:dt===void 0?0:dt});Object.defineProperties(vt.offset,{defaultValue:{get:()=>dt===void 0?0:dt},maxValue:{get:()=>mt===void 0?MOST_POSITIVE_SINGLE_FLOAT:mt},minValue:{get:()=>Ut===void 0?MOST_NEGATIVE_SINGLE_FLOAT:Ut}}),_e.push(vt)}const be=I(K,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,ce+de)}),Te=computeBufferSize(J,K.sampleRate),ue=P(K,Te,ce+de,Math.max(1,fe)),O=B(K,{channelCount:Math.max(1,fe),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,fe)}),z=[];for(let dt=0;dt<ie.numberOfOutputs;dt+=1)z.push(I(K,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:ne[dt]}));for(let dt=0;dt<ie.numberOfInputs;dt+=1){ve[dt].connect(ye[dt]);for(let mt=0;mt<ie.channelCount;mt+=1)ye[dt].connect(be,mt,dt*ie.channelCount+mt)}const Y=new ReadOnlyMap(ee.parameterDescriptors===void 0?[]:ee.parameterDescriptors.map(({name:dt},mt)=>{const Ut=_e[mt];return Ut.connect(be,0,ce+mt),Ut.start(0),[dt,Ut.offset]}));be.connect(ue);let te=ie.channelInterpretation,oe=null;const le=ie.numberOfOutputs===0?[ue]:z,he={get bufferSize(){return Te},get channelCount(){return ie.channelCount},set channelCount(dt){throw _()},get channelCountMode(){return ie.channelCountMode},set channelCountMode(dt){throw _()},get channelInterpretation(){return te},set channelInterpretation(dt){for(const mt of ve)mt.channelInterpretation=dt;te=dt},get context(){return ue.context},get inputs(){return ve},get numberOfInputs(){return ie.numberOfInputs},get numberOfOutputs(){return ie.numberOfOutputs},get onprocessorerror(){return oe},set onprocessorerror(dt){typeof oe=="function"&&he.removeEventListener("processorerror",oe),oe=typeof dt=="function"?dt:null,typeof oe=="function"&&he.addEventListener("processorerror",oe)},get parameters(){return Y},get port(){return pe.port2},addEventListener(...dt){return ue.addEventListener(dt[0],dt[1],dt[2])},connect:E.bind(null,le),disconnect:F.bind(null,le),dispatchEvent(...dt){return ue.dispatchEvent(dt[0])},removeEventListener(...dt){return ue.removeEventListener(dt[0],dt[1],dt[2])}},ae=new Map;pe.port1.addEventListener=(dt=>(...mt)=>{if(mt[0]==="message"){const Ut=typeof mt[1]=="function"?mt[1]:typeof mt[1]=="object"&&mt[1]!==null&&typeof mt[1].handleEvent=="function"?mt[1].handleEvent:null;if(Ut!==null){const St=ae.get(mt[1]);St!==void 0?mt[1]=St:(mt[1]=vt=>{L(K.currentTime,K.sampleRate,()=>Ut(vt))},ae.set(Ut,mt[1]))}}return dt.call(pe.port1,mt[0],mt[1],mt[2])})(pe.port1.addEventListener),pe.port1.removeEventListener=(dt=>(...mt)=>{if(mt[0]==="message"){const Ut=ae.get(mt[1]);Ut!==void 0&&(ae.delete(mt[1]),mt[1]=Ut)}return dt.call(pe.port1,mt[0],mt[1],mt[2])})(pe.port1.removeEventListener);let Q=null;Object.defineProperty(pe.port1,"onmessage",{get:()=>Q,set:dt=>{typeof Q=="function"&&pe.port1.removeEventListener("message",Q),Q=typeof dt=="function"?dt:null,typeof Q=="function"&&(pe.port1.addEventListener("message",Q),pe.port1.start())}}),ee.prototype.port=pe.port1;let se=null;createAudioWorkletProcessor(K,he,ee,ie).then(dt=>se=dt);const ge=createNestedArrays(ie.numberOfInputs,ie.channelCount),Ee=createNestedArrays(ie.numberOfOutputs,ne),ke=ee.parameterDescriptors===void 0?[]:ee.parameterDescriptors.reduce((dt,{name:mt})=>({...dt,[mt]:new Float32Array(128)}),{});let Se=!0;const Ie=()=>{ie.numberOfOutputs>0&&ue.disconnect(O);for(let dt=0,mt=0;dt<ie.numberOfOutputs;dt+=1){const Ut=z[dt];for(let St=0;St<ne[dt];St+=1)O.disconnect(Ut,mt+St,St);mt+=ne[dt]}},we=new Map;ue.onaudioprocess=({inputBuffer:dt,outputBuffer:mt})=>{if(se!==null){const Ut=U(he);for(let St=0;St<Te;St+=128){for(let vt=0;vt<ie.numberOfInputs;vt+=1)for(let It=0;It<ie.channelCount;It+=1)copyFromChannel(dt,ge[vt],It,It,St);ee.parameterDescriptors!==void 0&&ee.parameterDescriptors.forEach(({name:vt},It)=>{copyFromChannel(dt,ke,vt,ce+It,St)});for(let vt=0;vt<ie.numberOfInputs;vt+=1)for(let It=0;It<ne[vt];It+=1)Ee[vt][It].byteLength===0&&(Ee[vt][It]=new Float32Array(128));try{const vt=ge.map((yt,Tt)=>{if(Ut[Tt].size>0)return we.set(Tt,Te/128),yt;const ft=we.get(Tt);return ft===void 0?[]:(yt.every(_t=>_t.every(Xt=>Xt===0))&&(ft===1?we.delete(Tt):we.set(Tt,ft-1)),yt)});Se=L(K.currentTime+St/K.sampleRate,K.sampleRate,()=>se.process(vt,Ee,ke));for(let yt=0,Tt=0;yt<ie.numberOfOutputs;yt+=1){for(let Wt=0;Wt<ne[yt];Wt+=1)copyToChannel(mt,Ee[yt],Wt,Tt+Wt,St);Tt+=ne[yt]}}catch(vt){Se=!1,he.dispatchEvent(new ErrorEvent("processorerror",{colno:vt.colno,filename:vt.filename,lineno:vt.lineno,message:vt.message}))}if(!Se){for(let vt=0;vt<ie.numberOfInputs;vt+=1){ve[vt].disconnect(ye[vt]);for(let It=0;It<ie.channelCount;It+=1)ye[St].disconnect(be,It,vt*ie.channelCount+It)}if(ee.parameterDescriptors!==void 0){const vt=ee.parameterDescriptors.length;for(let It=0;It<vt;It+=1){const yt=_e[It];yt.disconnect(be,0,ce+It),yt.stop()}}be.disconnect(ue),ue.onaudioprocess=null,xe?Ie():Oe();break}}}};let xe=!1;const Fe=R(K,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Ge=()=>ue.connect(Fe).connect(K.destination),Oe=()=>{ue.disconnect(Fe),Fe.disconnect()},et=()=>{if(Se){Oe(),ie.numberOfOutputs>0&&ue.connect(O);for(let dt=0,mt=0;dt<ie.numberOfOutputs;dt+=1){const Ut=z[dt];for(let St=0;St<ne[dt];St+=1)O.connect(Ut,mt+St,St);mt+=ne[dt]}}xe=!0},Mt=()=>{Se&&(Ge(),Ie()),xe=!1};return Ge(),V(he,et,Mt)},createNativeBiquadFilterNode=(E,A)=>{const _=E.createBiquadFilter();return assignNativeAudioNodeOptions(_,A),assignNativeAudioNodeAudioParamValue(_,A,"Q"),assignNativeAudioNodeAudioParamValue(_,A,"detune"),assignNativeAudioNodeAudioParamValue(_,A,"frequency"),assignNativeAudioNodeAudioParamValue(_,A,"gain"),assignNativeAudioNodeOption(_,A,"type"),_},createNativeChannelMergerNodeFactory=(E,A)=>(_,I)=>{const B=_.createChannelMerger(I.numberOfInputs);return E!==null&&E.name==="webkitAudioContext"&&A(_,B),assignNativeAudioNodeOptions(B,I),B},wrapChannelSplitterNode=E=>{const A=E.numberOfOutputs;Object.defineProperty(E,"channelCount",{get:()=>A,set:_=>{if(_!==A)throw createInvalidStateError()}}),Object.defineProperty(E,"channelCountMode",{get:()=>"explicit",set:_=>{if(_!=="explicit")throw createInvalidStateError()}}),Object.defineProperty(E,"channelInterpretation",{get:()=>"discrete",set:_=>{if(_!=="discrete")throw createInvalidStateError()}})},createNativeChannelSplitterNode=(E,A)=>{const _=E.createChannelSplitter(A.numberOfOutputs);return assignNativeAudioNodeOptions(_,A),wrapChannelSplitterNode(_),_},createNativeConstantSourceNodeFactory=(E,A,_,I,B)=>(T,R)=>{if(T.createConstantSource===void 0)return _(T,R);const P=T.createConstantSource();return assignNativeAudioNodeOptions(P,R),assignNativeAudioNodeAudioParamValue(P,R,"offset"),A(I,()=>I(T))||wrapAudioScheduledSourceNodeStartMethodNegativeParameters(P),A(B,()=>B(T))||wrapAudioScheduledSourceNodeStopMethodNegativeParameters(P),E(T,P),P},interceptConnections=(E,A)=>(E.connect=A.connect.bind(A),E.disconnect=A.disconnect.bind(A),E),createNativeConstantSourceNodeFakerFactory=(E,A,_,I)=>(B,{offset:T,...R})=>{const P=B.createBuffer(1,2,44100),D=A(B,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),F=_(B,{...R,gain:T}),L=P.getChannelData(0);L[0]=1,L[1]=1,D.buffer=P,D.loop=!0;const U={get bufferSize(){},get channelCount(){return F.channelCount},set channelCount(J){F.channelCount=J},get channelCountMode(){return F.channelCountMode},set channelCountMode(J){F.channelCountMode=J},get channelInterpretation(){return F.channelInterpretation},set channelInterpretation(J){F.channelInterpretation=J},get context(){return F.context},get inputs(){return[]},get numberOfInputs(){return D.numberOfInputs},get numberOfOutputs(){return F.numberOfOutputs},get offset(){return F.gain},get onended(){return D.onended},set onended(J){D.onended=J},addEventListener(...J){return D.addEventListener(J[0],J[1],J[2])},dispatchEvent(...J){return D.dispatchEvent(J[0])},removeEventListener(...J){return D.removeEventListener(J[0],J[1],J[2])},start(J=0){D.start.call(D,J)},stop(J=0){D.stop.call(D,J)}},V=()=>D.connect(F),K=()=>D.disconnect(F);return E(B,D),I(interceptConnections(U,F),V,K)},createNativeConvolverNodeFactory=(E,A)=>(_,I)=>{const B=_.createConvolver();if(assignNativeAudioNodeOptions(B,I),I.disableNormalization===B.normalize&&(B.normalize=!I.disableNormalization),assignNativeAudioNodeOption(B,I,"buffer"),I.channelCount>2||(A(B,"channelCount",T=>()=>T.call(B),T=>R=>{if(R>2)throw E();return T.call(B,R)}),I.channelCountMode==="max"))throw E();return A(B,"channelCountMode",T=>()=>T.call(B),T=>R=>{if(R==="max")throw E();return T.call(B,R)}),B},createNativeDelayNode=(E,A)=>{const _=E.createDelay(A.maxDelayTime);return assignNativeAudioNodeOptions(_,A),assignNativeAudioNodeAudioParamValue(_,A,"delayTime"),_},createNativeDynamicsCompressorNodeFactory=E=>(A,_)=>{const I=A.createDynamicsCompressor();if(assignNativeAudioNodeOptions(I,_),_.channelCount>2||_.channelCountMode==="max")throw E();return assignNativeAudioNodeAudioParamValue(I,_,"attack"),assignNativeAudioNodeAudioParamValue(I,_,"knee"),assignNativeAudioNodeAudioParamValue(I,_,"ratio"),assignNativeAudioNodeAudioParamValue(I,_,"release"),assignNativeAudioNodeAudioParamValue(I,_,"threshold"),I},createNativeGainNode=(E,A)=>{const _=E.createGain();return assignNativeAudioNodeOptions(_,A),assignNativeAudioNodeAudioParamValue(_,A,"gain"),_},createNativeIIRFilterNodeFactory=E=>(A,_,I)=>{if(A.createIIRFilter===void 0)return E(A,_,I);const B=A.createIIRFilter(I.feedforward,I.feedback);return assignNativeAudioNodeOptions(B,I),B};function divide(E,A){const _=A[0]*A[0]+A[1]*A[1];return[(E[0]*A[0]+E[1]*A[1])/_,(E[1]*A[0]-E[0]*A[1])/_]}function multiply(E,A){return[E[0]*A[0]-E[1]*A[1],E[0]*A[1]+E[1]*A[0]]}function evaluatePolynomial(E,A){let _=[0,0];for(let I=E.length-1;I>=0;I-=1)_=multiply(_,A),_[0]+=E[I];return _}const createNativeIIRFilterNodeFakerFactory=(E,A,_,I)=>(B,T,{channelCount:R,channelCountMode:P,channelInterpretation:D,feedback:F,feedforward:L})=>{const U=computeBufferSize(T,B.sampleRate),V=F instanceof Float64Array?F:new Float64Array(F),K=L instanceof Float64Array?L:new Float64Array(L),J=V.length,ee=K.length,ie=Math.min(J,ee);if(J===0||J>20)throw I();if(V[0]===0)throw A();if(ee===0||ee>20)throw I();if(K[0]===0)throw A();if(V[0]!==1){for(let _e=0;_e<ee;_e+=1)K[_e]/=V[0];for(let _e=1;_e<J;_e+=1)V[_e]/=V[0]}const ne=_(B,U,R,R);ne.channelCount=R,ne.channelCountMode=P,ne.channelInterpretation=D;const ce=32,fe=[],de=[],pe=[];for(let _e=0;_e<R;_e+=1){fe.push(0);const be=new Float32Array(ce),Te=new Float32Array(ce);be.fill(0),Te.fill(0),de.push(be),pe.push(Te)}ne.onaudioprocess=_e=>{const be=_e.inputBuffer,Te=_e.outputBuffer,ue=be.numberOfChannels;for(let O=0;O<ue;O+=1){const z=be.getChannelData(O),Y=Te.getChannelData(O);fe[O]=filterBuffer(V,J,K,ee,ie,de[O],pe[O],fe[O],ce,z,Y)}};const ve=B.sampleRate/2;return interceptConnections({get bufferSize(){return U},get channelCount(){return ne.channelCount},set channelCount(_e){ne.channelCount=_e},get channelCountMode(){return ne.channelCountMode},set channelCountMode(_e){ne.channelCountMode=_e},get channelInterpretation(){return ne.channelInterpretation},set channelInterpretation(_e){ne.channelInterpretation=_e},get context(){return ne.context},get inputs(){return[ne]},get numberOfInputs(){return ne.numberOfInputs},get numberOfOutputs(){return ne.numberOfOutputs},addEventListener(..._e){return ne.addEventListener(_e[0],_e[1],_e[2])},dispatchEvent(..._e){return ne.dispatchEvent(_e[0])},getFrequencyResponse(_e,be,Te){if(_e.length!==be.length||be.length!==Te.length)throw E();const ue=_e.length;for(let O=0;O<ue;O+=1){const z=-Math.PI*(_e[O]/ve),Y=[Math.cos(z),Math.sin(z)],te=evaluatePolynomial(K,Y),oe=evaluatePolynomial(V,Y),le=divide(te,oe);be[O]=Math.sqrt(le[0]*le[0]+le[1]*le[1]),Te[O]=Math.atan2(le[1],le[0])}},removeEventListener(..._e){return ne.removeEventListener(_e[0],_e[1],_e[2])}},ne)},createNativeMediaElementAudioSourceNode=(E,A)=>E.createMediaElementSource(A.mediaElement),createNativeMediaStreamAudioDestinationNode=(E,A)=>{const _=E.createMediaStreamDestination();return assignNativeAudioNodeOptions(_,A),_.numberOfOutputs===1&&Object.defineProperty(_,"numberOfOutputs",{get:()=>0}),_},createNativeMediaStreamAudioSourceNode=(E,{mediaStream:A})=>{const _=A.getAudioTracks();_.sort((T,R)=>T.id<R.id?-1:T.id>R.id?1:0);const I=_.slice(0,1),B=E.createMediaStreamSource(new MediaStream(I));return Object.defineProperty(B,"mediaStream",{value:A}),B},createNativeMediaStreamTrackAudioSourceNodeFactory=(E,A)=>(_,{mediaStreamTrack:I})=>{if(typeof _.createMediaStreamTrackSource=="function")return _.createMediaStreamTrackSource(I);const B=new MediaStream([I]),T=_.createMediaStreamSource(B);if(I.kind!=="audio")throw E();if(A(_))throw new TypeError;return T},createNativeOfflineAudioContextConstructor=E=>E===null?null:E.hasOwnProperty("OfflineAudioContext")?E.OfflineAudioContext:E.hasOwnProperty("webkitOfflineAudioContext")?E.webkitOfflineAudioContext:null,createNativeOscillatorNodeFactory=(E,A,_,I,B,T)=>(R,P)=>{const D=R.createOscillator();return assignNativeAudioNodeOptions(D,P),assignNativeAudioNodeAudioParamValue(D,P,"detune"),assignNativeAudioNodeAudioParamValue(D,P,"frequency"),P.periodicWave!==void 0?D.setPeriodicWave(P.periodicWave):assignNativeAudioNodeOption(D,P,"type"),A(_,()=>_(R))||wrapAudioScheduledSourceNodeStartMethodNegativeParameters(D),A(I,()=>I(R))||T(D,R),A(B,()=>B(R))||wrapAudioScheduledSourceNodeStopMethodNegativeParameters(D),E(R,D),D},createNativePannerNodeFactory=E=>(A,_)=>{const I=A.createPanner();return I.orientationX===void 0?E(A,_):(assignNativeAudioNodeOptions(I,_),assignNativeAudioNodeAudioParamValue(I,_,"orientationX"),assignNativeAudioNodeAudioParamValue(I,_,"orientationY"),assignNativeAudioNodeAudioParamValue(I,_,"orientationZ"),assignNativeAudioNodeAudioParamValue(I,_,"positionX"),assignNativeAudioNodeAudioParamValue(I,_,"positionY"),assignNativeAudioNodeAudioParamValue(I,_,"positionZ"),assignNativeAudioNodeOption(I,_,"coneInnerAngle"),assignNativeAudioNodeOption(I,_,"coneOuterAngle"),assignNativeAudioNodeOption(I,_,"coneOuterGain"),assignNativeAudioNodeOption(I,_,"distanceModel"),assignNativeAudioNodeOption(I,_,"maxDistance"),assignNativeAudioNodeOption(I,_,"panningModel"),assignNativeAudioNodeOption(I,_,"refDistance"),assignNativeAudioNodeOption(I,_,"rolloffFactor"),I)},createNativePannerNodeFakerFactory=(E,A,_,I,B,T,R,P,D,F)=>(L,{coneInnerAngle:U,coneOuterAngle:V,coneOuterGain:K,distanceModel:J,maxDistance:ee,orientationX:ie,orientationY:ne,orientationZ:ce,panningModel:fe,positionX:de,positionY:pe,positionZ:ve,refDistance:ye,rolloffFactor:_e,...be})=>{const Te=L.createPanner();if(be.channelCount>2||be.channelCountMode==="max")throw R();assignNativeAudioNodeOptions(Te,be);const ue={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},O=_(L,{...ue,channelInterpretation:"speakers",numberOfInputs:6}),z=I(L,{...be,gain:1}),Y=I(L,{...ue,gain:1}),te=I(L,{...ue,gain:0}),oe=I(L,{...ue,gain:0}),le=I(L,{...ue,gain:0}),he=I(L,{...ue,gain:0}),ae=I(L,{...ue,gain:0}),Q=B(L,256,6,1),se=T(L,{...ue,curve:new Float32Array([1,1]),oversample:"none"});let Ae=[ie,ne,ce],ge=[de,pe,ve];const Ee=new Float32Array(1);Q.onaudioprocess=({inputBuffer:we})=>{const xe=[D(we,Ee,0),D(we,Ee,1),D(we,Ee,2)];xe.some((Ge,Oe)=>Ge!==Ae[Oe])&&(Te.setOrientation(...xe),Ae=xe);const Fe=[D(we,Ee,3),D(we,Ee,4),D(we,Ee,5)];Fe.some((Ge,Oe)=>Ge!==ge[Oe])&&(Te.setPosition(...Fe),ge=Fe)},Object.defineProperty(te.gain,"defaultValue",{get:()=>0}),Object.defineProperty(oe.gain,"defaultValue",{get:()=>0}),Object.defineProperty(le.gain,"defaultValue",{get:()=>0}),Object.defineProperty(he.gain,"defaultValue",{get:()=>0}),Object.defineProperty(ae.gain,"defaultValue",{get:()=>0});const ke={get bufferSize(){},get channelCount(){return Te.channelCount},set channelCount(we){if(we>2)throw R();z.channelCount=we,Te.channelCount=we},get channelCountMode(){return Te.channelCountMode},set channelCountMode(we){if(we==="max")throw R();z.channelCountMode=we,Te.channelCountMode=we},get channelInterpretation(){return Te.channelInterpretation},set channelInterpretation(we){z.channelInterpretation=we,Te.channelInterpretation=we},get coneInnerAngle(){return Te.coneInnerAngle},set coneInnerAngle(we){Te.coneInnerAngle=we},get coneOuterAngle(){return Te.coneOuterAngle},set coneOuterAngle(we){Te.coneOuterAngle=we},get coneOuterGain(){return Te.coneOuterGain},set coneOuterGain(we){if(we<0||we>1)throw A();Te.coneOuterGain=we},get context(){return Te.context},get distanceModel(){return Te.distanceModel},set distanceModel(we){Te.distanceModel=we},get inputs(){return[z]},get maxDistance(){return Te.maxDistance},set maxDistance(we){if(we<0)throw new RangeError;Te.maxDistance=we},get numberOfInputs(){return Te.numberOfInputs},get numberOfOutputs(){return Te.numberOfOutputs},get orientationX(){return Y.gain},get orientationY(){return te.gain},get orientationZ(){return oe.gain},get panningModel(){return Te.panningModel},set panningModel(we){Te.panningModel=we},get positionX(){return le.gain},get positionY(){return he.gain},get positionZ(){return ae.gain},get refDistance(){return Te.refDistance},set refDistance(we){if(we<0)throw new RangeError;Te.refDistance=we},get rolloffFactor(){return Te.rolloffFactor},set rolloffFactor(we){if(we<0)throw new RangeError;Te.rolloffFactor=we},addEventListener(...we){return z.addEventListener(we[0],we[1],we[2])},dispatchEvent(...we){return z.dispatchEvent(we[0])},removeEventListener(...we){return z.removeEventListener(we[0],we[1],we[2])}};U!==ke.coneInnerAngle&&(ke.coneInnerAngle=U),V!==ke.coneOuterAngle&&(ke.coneOuterAngle=V),K!==ke.coneOuterGain&&(ke.coneOuterGain=K),J!==ke.distanceModel&&(ke.distanceModel=J),ee!==ke.maxDistance&&(ke.maxDistance=ee),ie!==ke.orientationX.value&&(ke.orientationX.value=ie),ne!==ke.orientationY.value&&(ke.orientationY.value=ne),ce!==ke.orientationZ.value&&(ke.orientationZ.value=ce),fe!==ke.panningModel&&(ke.panningModel=fe),de!==ke.positionX.value&&(ke.positionX.value=de),pe!==ke.positionY.value&&(ke.positionY.value=pe),ve!==ke.positionZ.value&&(ke.positionZ.value=ve),ye!==ke.refDistance&&(ke.refDistance=ye),_e!==ke.rolloffFactor&&(ke.rolloffFactor=_e),(Ae[0]!==1||Ae[1]!==0||Ae[2]!==0)&&Te.setOrientation(...Ae),(ge[0]!==0||ge[1]!==0||ge[2]!==0)&&Te.setPosition(...ge);const Se=()=>{z.connect(Te),E(z,se,0,0),se.connect(Y).connect(O,0,0),se.connect(te).connect(O,0,1),se.connect(oe).connect(O,0,2),se.connect(le).connect(O,0,3),se.connect(he).connect(O,0,4),se.connect(ae).connect(O,0,5),O.connect(Q).connect(L.destination)},Ie=()=>{z.disconnect(Te),P(z,se,0,0),se.disconnect(Y),Y.disconnect(O),se.disconnect(te),te.disconnect(O),se.disconnect(oe),oe.disconnect(O),se.disconnect(le),le.disconnect(O),se.disconnect(he),he.disconnect(O),se.disconnect(ae),ae.disconnect(O),O.disconnect(Q),Q.disconnect(L.destination)};return F(interceptConnections(ke,Te),Se,Ie)},createNativePeriodicWaveFactory=E=>(A,{disableNormalization:_,imag:I,real:B})=>{const T=I instanceof Float32Array?I:new Float32Array(I),R=B instanceof Float32Array?B:new Float32Array(B),P=A.createPeriodicWave(R,T,{disableNormalization:_});if(Array.from(I).length<2)throw E();return P},createNativeScriptProcessorNode=(E,A,_,I)=>E.createScriptProcessor(A,_,I),createNativeStereoPannerNodeFactory=(E,A)=>(_,I)=>{const B=I.channelCountMode;if(B==="clamped-max")throw A();if(_.createStereoPanner===void 0)return E(_,I);const T=_.createStereoPanner();return assignNativeAudioNodeOptions(T,I),assignNativeAudioNodeAudioParamValue(T,I,"pan"),Object.defineProperty(T,"channelCountMode",{get:()=>B,set:R=>{if(R!==B)throw A()}}),T},createNativeStereoPannerNodeFakerFactory=(E,A,_,I,B,T)=>{const P=new Float32Array([1,1]),D=Math.PI/2,F={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},L={...F,oversample:"none"},U=(J,ee,ie,ne)=>{const ce=new Float32Array(16385),fe=new Float32Array(16385);for(let be=0;be<16385;be+=1){const Te=be/16384*D;ce[be]=Math.cos(Te),fe[be]=Math.sin(Te)}const de=_(J,{...F,gain:0}),pe=I(J,{...L,curve:ce}),ve=I(J,{...L,curve:P}),ye=_(J,{...F,gain:0}),_e=I(J,{...L,curve:fe});return{connectGraph(){ee.connect(de),ee.connect(ve.inputs===void 0?ve:ve.inputs[0]),ee.connect(ye),ve.connect(ie),ie.connect(pe.inputs===void 0?pe:pe.inputs[0]),ie.connect(_e.inputs===void 0?_e:_e.inputs[0]),pe.connect(de.gain),_e.connect(ye.gain),de.connect(ne,0,0),ye.connect(ne,0,1)},disconnectGraph(){ee.disconnect(de),ee.disconnect(ve.inputs===void 0?ve:ve.inputs[0]),ee.disconnect(ye),ve.disconnect(ie),ie.disconnect(pe.inputs===void 0?pe:pe.inputs[0]),ie.disconnect(_e.inputs===void 0?_e:_e.inputs[0]),pe.disconnect(de.gain),_e.disconnect(ye.gain),de.disconnect(ne,0,0),ye.disconnect(ne,0,1)}}},V=(J,ee,ie,ne)=>{const ce=new Float32Array(16385),fe=new Float32Array(16385),de=new Float32Array(16385),pe=new Float32Array(16385),ve=Math.floor(16385/2);for(let le=0;le<16385;le+=1)if(le>ve){const he=(le-ve)/(16384-ve)*D;ce[le]=Math.cos(he),fe[le]=Math.sin(he),de[le]=0,pe[le]=1}else{const he=le/(16384-ve)*D;ce[le]=1,fe[le]=0,de[le]=Math.cos(he),pe[le]=Math.sin(he)}const ye=A(J,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),_e=_(J,{...F,gain:0}),be=I(J,{...L,curve:ce}),Te=_(J,{...F,gain:0}),ue=I(J,{...L,curve:fe}),O=I(J,{...L,curve:P}),z=_(J,{...F,gain:0}),Y=I(J,{...L,curve:de}),te=_(J,{...F,gain:0}),oe=I(J,{...L,curve:pe});return{connectGraph(){ee.connect(ye),ee.connect(O.inputs===void 0?O:O.inputs[0]),ye.connect(_e,0),ye.connect(Te,0),ye.connect(z,1),ye.connect(te,1),O.connect(ie),ie.connect(be.inputs===void 0?be:be.inputs[0]),ie.connect(ue.inputs===void 0?ue:ue.inputs[0]),ie.connect(Y.inputs===void 0?Y:Y.inputs[0]),ie.connect(oe.inputs===void 0?oe:oe.inputs[0]),be.connect(_e.gain),ue.connect(Te.gain),Y.connect(z.gain),oe.connect(te.gain),_e.connect(ne,0,0),z.connect(ne,0,0),Te.connect(ne,0,1),te.connect(ne,0,1)},disconnectGraph(){ee.disconnect(ye),ee.disconnect(O.inputs===void 0?O:O.inputs[0]),ye.disconnect(_e,0),ye.disconnect(Te,0),ye.disconnect(z,1),ye.disconnect(te,1),O.disconnect(ie),ie.disconnect(be.inputs===void 0?be:be.inputs[0]),ie.disconnect(ue.inputs===void 0?ue:ue.inputs[0]),ie.disconnect(Y.inputs===void 0?Y:Y.inputs[0]),ie.disconnect(oe.inputs===void 0?oe:oe.inputs[0]),be.disconnect(_e.gain),ue.disconnect(Te.gain),Y.disconnect(z.gain),oe.disconnect(te.gain),_e.disconnect(ne,0,0),z.disconnect(ne,0,0),Te.disconnect(ne,0,1),te.disconnect(ne,0,1)}}},K=(J,ee,ie,ne,ce)=>{if(ee===1)return U(J,ie,ne,ce);if(ee===2)return V(J,ie,ne,ce);throw B()};return(J,{channelCount:ee,channelCountMode:ie,pan:ne,...ce})=>{if(ie==="max")throw B();const fe=E(J,{...ce,channelCount:1,channelCountMode:ie,numberOfInputs:2}),de=_(J,{...ce,channelCount:ee,channelCountMode:ie,gain:1}),pe=_(J,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:ne});let{connectGraph:ve,disconnectGraph:ye}=K(J,ee,de,pe,fe);Object.defineProperty(pe.gain,"defaultValue",{get:()=>0}),Object.defineProperty(pe.gain,"maxValue",{get:()=>1}),Object.defineProperty(pe.gain,"minValue",{get:()=>-1});const _e={get bufferSize(){},get channelCount(){return de.channelCount},set channelCount(O){de.channelCount!==O&&(be&&ye(),{connectGraph:ve,disconnectGraph:ye}=K(J,O,de,pe,fe),be&&ve()),de.channelCount=O},get channelCountMode(){return de.channelCountMode},set channelCountMode(O){if(O==="clamped-max"||O==="max")throw B();de.channelCountMode=O},get channelInterpretation(){return de.channelInterpretation},set channelInterpretation(O){de.channelInterpretation=O},get context(){return de.context},get inputs(){return[de]},get numberOfInputs(){return de.numberOfInputs},get numberOfOutputs(){return de.numberOfOutputs},get pan(){return pe.gain},addEventListener(...O){return de.addEventListener(O[0],O[1],O[2])},dispatchEvent(...O){return de.dispatchEvent(O[0])},removeEventListener(...O){return de.removeEventListener(O[0],O[1],O[2])}};let be=!1;const Te=()=>{ve(),be=!0},ue=()=>{ye(),be=!1};return T(interceptConnections(_e,fe),Te,ue)}},createNativeWaveShaperNodeFactory=(E,A,_,I,B,T,R)=>(P,D)=>{const F=P.createWaveShaper();if(T!==null&&T.name==="webkitAudioContext"&&P.createGain().gain.automationRate===void 0)return _(P,D);assignNativeAudioNodeOptions(F,D);const L=D.curve===null||D.curve instanceof Float32Array?D.curve:new Float32Array(D.curve);if(L!==null&&L.length<2)throw A();assignNativeAudioNodeOption(F,{curve:L},"curve"),assignNativeAudioNodeOption(F,D,"oversample");let U=null,V=!1;return R(F,"curve",ee=>()=>ee.call(F),ee=>ie=>(ee.call(F,ie),V&&(I(ie)&&U===null?U=E(P,F):!I(ie)&&U!==null&&(U(),U=null)),ie)),B(F,()=>{V=!0,I(F.curve)&&(U=E(P,F))},()=>{V=!1,U!==null&&(U(),U=null)})},createNativeWaveShaperNodeFakerFactory=(E,A,_,I,B)=>(T,{curve:R,oversample:P,...D})=>{const F=T.createWaveShaper(),L=T.createWaveShaper();assignNativeAudioNodeOptions(F,D),assignNativeAudioNodeOptions(L,D);const U=_(T,{...D,gain:1}),V=_(T,{...D,gain:-1}),K=_(T,{...D,gain:1}),J=_(T,{...D,gain:-1});let ee=null,ie=!1,ne=null;const ce={get bufferSize(){},get channelCount(){return F.channelCount},set channelCount(pe){U.channelCount=pe,V.channelCount=pe,F.channelCount=pe,K.channelCount=pe,L.channelCount=pe,J.channelCount=pe},get channelCountMode(){return F.channelCountMode},set channelCountMode(pe){U.channelCountMode=pe,V.channelCountMode=pe,F.channelCountMode=pe,K.channelCountMode=pe,L.channelCountMode=pe,J.channelCountMode=pe},get channelInterpretation(){return F.channelInterpretation},set channelInterpretation(pe){U.channelInterpretation=pe,V.channelInterpretation=pe,F.channelInterpretation=pe,K.channelInterpretation=pe,L.channelInterpretation=pe,J.channelInterpretation=pe},get context(){return F.context},get curve(){return ne},set curve(pe){if(pe!==null&&pe.length<2)throw A();if(pe===null)F.curve=pe,L.curve=pe;else{const ve=pe.length,ye=new Float32Array(ve+2-ve%2),_e=new Float32Array(ve+2-ve%2);ye[0]=pe[0],_e[0]=-pe[ve-1];const be=Math.ceil((ve+1)/2),Te=(ve+1)/2-1;for(let ue=1;ue<be;ue+=1){const O=ue/be*Te,z=Math.floor(O),Y=Math.ceil(O);ye[ue]=z===Y?pe[z]:(1-(O-z))*pe[z]+(1-(Y-O))*pe[Y],_e[ue]=z===Y?-pe[ve-1-z]:-((1-(O-z))*pe[ve-1-z])-(1-(Y-O))*pe[ve-1-Y]}ye[be]=ve%2===1?pe[be-1]:(pe[be-2]+pe[be-1])/2,F.curve=ye,L.curve=_e}ne=pe,ie&&(I(ne)&&ee===null?ee=E(T,U):ee!==null&&(ee(),ee=null))},get inputs(){return[U]},get numberOfInputs(){return F.numberOfInputs},get numberOfOutputs(){return F.numberOfOutputs},get oversample(){return F.oversample},set oversample(pe){F.oversample=pe,L.oversample=pe},addEventListener(...pe){return U.addEventListener(pe[0],pe[1],pe[2])},dispatchEvent(...pe){return U.dispatchEvent(pe[0])},removeEventListener(...pe){return U.removeEventListener(pe[0],pe[1],pe[2])}};R!==null&&(ce.curve=R instanceof Float32Array?R:new Float32Array(R)),P!==ce.oversample&&(ce.oversample=P);const fe=()=>{U.connect(F).connect(K),U.connect(V).connect(L).connect(J).connect(K),ie=!0,I(ne)&&(ee=E(T,U))},de=()=>{U.disconnect(F),F.disconnect(K),U.disconnect(V),V.disconnect(L),L.disconnect(J),J.disconnect(K),ie=!1,ee!==null&&(ee(),ee=null)};return B(interceptConnections(ce,K),fe,de)},createNotSupportedError=()=>new DOMException("","NotSupportedError"),DEFAULT_OPTIONS$5={numberOfChannels:1},createOfflineAudioContextConstructor=(E,A,_,I,B)=>class extends E{constructor(R,P,D){let F;if(typeof R=="number"&&P!==void 0&&D!==void 0)F={length:P,numberOfChannels:R,sampleRate:D};else if(typeof R=="object")F=R;else throw new Error("The given parameters are not valid.");const{length:L,numberOfChannels:U,sampleRate:V}={...DEFAULT_OPTIONS$5,...F},K=I(U,L,V);A(testPromiseSupport,()=>testPromiseSupport(K))||K.addEventListener("statechange",(()=>{let J=0;const ee=ie=>{this._state==="running"&&(J>0?(K.removeEventListener("statechange",ee),ie.stopImmediatePropagation(),this._waitForThePromiseToSettle(ie)):J+=1)};return ee})()),super(K,U),this._length=L,this._nativeOfflineAudioContext=K,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(_()):(this._state="running",B(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,deactivateAudioGraph(this)}))}_waitForThePromiseToSettle(R){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(R):setTimeout(()=>this._waitForThePromiseToSettle(R))}},DEFAULT_OPTIONS$4={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},createOscillatorNodeConstructor=(E,A,_,I,B,T,R)=>class extends E{constructor(D,F){const L=B(D),U={...DEFAULT_OPTIONS$4,...F},V=_(L,U),K=T(L),J=K?I():null,ee=D.sampleRate/2;super(D,!1,V,J),this._detune=A(this,K,V.detune,153600,-153600),this._frequency=A(this,K,V.frequency,ee,-ee),this._nativeOscillatorNode=V,this._onended=null,this._oscillatorNodeRenderer=J,this._oscillatorNodeRenderer!==null&&U.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=U.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(D){const F=typeof D=="function"?R(this,D):null;this._nativeOscillatorNode.onended=F;const L=this._nativeOscillatorNode.onended;this._onended=L!==null&&L===F?D:L}get type(){return this._nativeOscillatorNode.type}set type(D){this._nativeOscillatorNode.type=D,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(D){this._nativeOscillatorNode.setPeriodicWave(D),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=D)}start(D=0){if(this._nativeOscillatorNode.start(D),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=D),this.context.state!=="closed"){setInternalStateToActive(this);const F=()=>{this._nativeOscillatorNode.removeEventListener("ended",F),isActiveAudioNode(this)&&setInternalStateToPassive(this)};this._nativeOscillatorNode.addEventListener("ended",F)}}stop(D=0){this._nativeOscillatorNode.stop(D),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=D)}},createOscillatorNodeRendererFactory=(E,A,_,I,B)=>()=>{const T=new WeakMap;let R=null,P=null,D=null;const F=async(L,U)=>{let V=_(L);const K=isOwnedByContext(V,U);if(!K){const J={channelCount:V.channelCount,channelCountMode:V.channelCountMode,channelInterpretation:V.channelInterpretation,detune:V.detune.value,frequency:V.frequency.value,periodicWave:R===null?void 0:R,type:V.type};V=A(U,J),P!==null&&V.start(P),D!==null&&V.stop(D)}return T.set(U,V),K?(await E(U,L.detune,V.detune),await E(U,L.frequency,V.frequency)):(await I(U,L.detune,V.detune),await I(U,L.frequency,V.frequency)),await B(L,U,V),V};return{set periodicWave(L){R=L},set start(L){P=L},set stop(L){D=L},render(L,U){const V=T.get(U);return V!==void 0?Promise.resolve(V):F(L,U)}}},DEFAULT_OPTIONS$3={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},createPannerNodeConstructor=(E,A,_,I,B,T,R)=>class extends E{constructor(D,F){const L=B(D),U={...DEFAULT_OPTIONS$3,...F},V=_(L,U),K=T(L),J=K?I():null;super(D,!1,V,J),this._nativePannerNode=V,this._orientationX=A(this,K,V.orientationX,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._orientationY=A(this,K,V.orientationY,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._orientationZ=A(this,K,V.orientationZ,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._positionX=A(this,K,V.positionX,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._positionY=A(this,K,V.positionY,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._positionZ=A(this,K,V.positionZ,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),R(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(D){this._nativePannerNode.coneInnerAngle=D}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(D){this._nativePannerNode.coneOuterAngle=D}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(D){this._nativePannerNode.coneOuterGain=D}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(D){this._nativePannerNode.distanceModel=D}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(D){this._nativePannerNode.maxDistance=D}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(D){this._nativePannerNode.panningModel=D}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(D){this._nativePannerNode.refDistance=D}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(D){this._nativePannerNode.rolloffFactor=D}},createPannerNodeRendererFactory=(E,A,_,I,B,T,R,P,D,F)=>()=>{const L=new WeakMap;let U=null;const V=async(K,J)=>{let ee=null,ie=T(K);const ne={channelCount:ie.channelCount,channelCountMode:ie.channelCountMode,channelInterpretation:ie.channelInterpretation},ce={...ne,coneInnerAngle:ie.coneInnerAngle,coneOuterAngle:ie.coneOuterAngle,coneOuterGain:ie.coneOuterGain,distanceModel:ie.distanceModel,maxDistance:ie.maxDistance,panningModel:ie.panningModel,refDistance:ie.refDistance,rolloffFactor:ie.rolloffFactor},fe=isOwnedByContext(ie,J);if("bufferSize"in ie)ee=I(J,{...ne,gain:1});else if(!fe){const de={...ce,orientationX:ie.orientationX.value,orientationY:ie.orientationY.value,orientationZ:ie.orientationZ.value,positionX:ie.positionX.value,positionY:ie.positionY.value,positionZ:ie.positionZ.value};ie=B(J,de)}if(L.set(J,ee===null?ie:ee),ee!==null){if(U===null){if(R===null)throw new Error("Missing the native OfflineAudioContext constructor.");const ue=new R(6,K.context.length,J.sampleRate),O=A(ue,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});O.connect(ue.destination),U=(async()=>{const z=await Promise.all([K.orientationX,K.orientationY,K.orientationZ,K.positionX,K.positionY,K.positionZ].map(async(Y,te)=>{const oe=_(ue,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:te===0?1:0});return await P(ue,Y,oe.offset),oe}));for(let Y=0;Y<6;Y+=1)z[Y].connect(O,0,Y),z[Y].start(0);return F(ue)})()}const de=await U,pe=I(J,{...ne,gain:1});await D(K,J,pe);const ve=[];for(let ue=0;ue<de.numberOfChannels;ue+=1)ve.push(de.getChannelData(ue));let ye=[ve[0][0],ve[1][0],ve[2][0]],_e=[ve[3][0],ve[4][0],ve[5][0]],be=I(J,{...ne,gain:1}),Te=B(J,{...ce,orientationX:ye[0],orientationY:ye[1],orientationZ:ye[2],positionX:_e[0],positionY:_e[1],positionZ:_e[2]});pe.connect(be).connect(Te.inputs[0]),Te.connect(ee);for(let ue=128;ue<de.length;ue+=128){const O=[ve[0][ue],ve[1][ue],ve[2][ue]],z=[ve[3][ue],ve[4][ue],ve[5][ue]];if(O.some((Y,te)=>Y!==ye[te])||z.some((Y,te)=>Y!==_e[te])){ye=O,_e=z;const Y=ue/J.sampleRate;be.gain.setValueAtTime(0,Y),be=I(J,{...ne,gain:0}),Te=B(J,{...ce,orientationX:ye[0],orientationY:ye[1],orientationZ:ye[2],positionX:_e[0],positionY:_e[1],positionZ:_e[2]}),be.gain.setValueAtTime(1,Y),pe.connect(be).connect(Te.inputs[0]),Te.connect(ee)}}return ee}return fe?(await E(J,K.orientationX,ie.orientationX),await E(J,K.orientationY,ie.orientationY),await E(J,K.orientationZ,ie.orientationZ),await E(J,K.positionX,ie.positionX),await E(J,K.positionY,ie.positionY),await E(J,K.positionZ,ie.positionZ)):(await P(J,K.orientationX,ie.orientationX),await P(J,K.orientationY,ie.orientationY),await P(J,K.orientationZ,ie.orientationZ),await P(J,K.positionX,ie.positionX),await P(J,K.positionY,ie.positionY),await P(J,K.positionZ,ie.positionZ)),isNativeAudioNodeFaker(ie)?await D(K,J,ie.inputs[0]):await D(K,J,ie),ie};return{render(K,J){const ee=L.get(J);return ee!==void 0?Promise.resolve(ee):V(K,J)}}},DEFAULT_OPTIONS$2={disableNormalization:!1},createPeriodicWaveConstructor=(E,A,_,I)=>class Pn{constructor(T,R){const P=A(T),D=I({...DEFAULT_OPTIONS$2,...R}),F=E(P,D);return _.add(F),F}static[Symbol.hasInstance](T){return T!==null&&typeof T=="object"&&Object.getPrototypeOf(T)===Pn.prototype||_.has(T)}},createRenderAutomation=(E,A)=>(_,I,B)=>(E(I).replay(B),A(I,_,B)),createRenderInputsOfAudioNode=(E,A,_)=>async(I,B,T)=>{const R=E(I);await Promise.all(R.activeInputs.map((P,D)=>Array.from(P).map(async([F,L])=>{const V=await A(F).render(F,B),K=I.context.destination;!_(F)&&(I!==K||!_(I))&&V.connect(T,L,D)})).reduce((P,D)=>[...P,...D],[]))},createRenderInputsOfAudioParam=(E,A,_)=>async(I,B,T)=>{const R=A(I);await Promise.all(Array.from(R.activeInputs).map(async([P,D])=>{const L=await E(P).render(P,B);_(P)||L.connect(T,D)}))},createRenderNativeOfflineAudioContext=(E,A,_,I)=>B=>E(testPromiseSupport,()=>testPromiseSupport(B))?Promise.resolve(E(I,I)).then(T=>{if(!T){const R=_(B,512,0,1);B.oncomplete=()=>{R.onaudioprocess=null,R.disconnect()},R.onaudioprocess=()=>B.currentTime,R.connect(B.destination)}return B.startRendering()}):new Promise(T=>{const R=A(B,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});B.oncomplete=P=>{R.disconnect(),T(P.renderedBuffer)},R.connect(B.destination),B.startRendering()}),createSetActiveAudioWorkletNodeInputs=E=>(A,_)=>{E.set(A,_)},createSetAudioNodeTailTime=E=>(A,_)=>E.set(A,_),createStartRendering=(E,A,_,I,B,T,R,P)=>(D,F)=>_(D).render(D,F).then(()=>Promise.all(Array.from(I(F)).map(L=>_(L).render(L,F)))).then(()=>B(F)).then(L=>(typeof L.copyFromChannel!="function"?(R(L),wrapAudioBufferGetChannelDataMethod(L)):A(T,()=>T(L))||P(L),E.add(L),L)),DEFAULT_OPTIONS$1={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},createStereoPannerNodeConstructor=(E,A,_,I,B,T)=>class extends E{constructor(P,D){const F=B(P),L={...DEFAULT_OPTIONS$1,...D},U=_(F,L),V=T(F),K=V?I():null;super(P,!1,U,K),this._pan=A(this,V,U.pan)}get pan(){return this._pan}},createStereoPannerNodeRendererFactory=(E,A,_,I,B)=>()=>{const T=new WeakMap,R=async(P,D)=>{let F=_(P);const L=isOwnedByContext(F,D);if(!L){const U={channelCount:F.channelCount,channelCountMode:F.channelCountMode,channelInterpretation:F.channelInterpretation,pan:F.pan.value};F=A(D,U)}return T.set(D,F),L?await E(D,P.pan,F.pan):await I(D,P.pan,F.pan),isNativeAudioNodeFaker(F)?await B(P,D,F.inputs[0]):await B(P,D,F),F};return{render(P,D){const F=T.get(D);return F!==void 0?Promise.resolve(F):R(P,D)}}},createTestAudioBufferConstructorSupport=E=>()=>{if(E===null)return!1;try{new E({length:1,sampleRate:44100})}catch{return!1}return!0},createTestAudioWorkletProcessorPostMessageSupport=(E,A)=>async()=>{if(E===null)return!0;if(A===null)return!1;const _=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),I=new A(1,128,44100),B=URL.createObjectURL(_);let T=!1,R=!1;try{await I.audioWorklet.addModule(B);const P=new E(I,"a",{numberOfOutputs:0}),D=I.createOscillator();P.port.onmessage=()=>T=!0,P.onprocessorerror=()=>R=!0,D.connect(P),D.start(0),await I.startRendering(),await new Promise(F=>setTimeout(F))}catch{}finally{URL.revokeObjectURL(B)}return T&&!R},createTestOfflineAudioContextCurrentTimeSupport=(E,A)=>()=>{if(A===null)return Promise.resolve(!1);const _=new A(1,1,44100),I=E(_,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(B=>{_.oncomplete=()=>{I.disconnect(),B(_.currentTime!==0)},_.startRendering()})},createUnknownError=()=>new DOMException("","UnknownError"),DEFAULT_OPTIONS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},createWaveShaperNodeConstructor=(E,A,_,I,B,T,R)=>class extends E{constructor(D,F){const L=B(D),U={...DEFAULT_OPTIONS,...F},V=_(L,U),J=T(L)?I():null;super(D,!0,V,J),this._isCurveNullified=!1,this._nativeWaveShaperNode=V,R(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(D){if(D===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(D.length<2)throw A();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=D}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(D){this._nativeWaveShaperNode.oversample=D}},createWaveShaperNodeRendererFactory=(E,A,_)=>()=>{const I=new WeakMap,B=async(T,R)=>{let P=A(T);if(!isOwnedByContext(P,R)){const F={channelCount:P.channelCount,channelCountMode:P.channelCountMode,channelInterpretation:P.channelInterpretation,curve:P.curve,oversample:P.oversample};P=E(R,F)}return I.set(R,P),isNativeAudioNodeFaker(P)?await _(T,R,P.inputs[0]):await _(T,R,P),P};return{render(T,R){const P=I.get(R);return P!==void 0?Promise.resolve(P):B(T,R)}}},createWindow=()=>typeof window>"u"?null:window,createWrapAudioBufferCopyChannelMethods=(E,A)=>_=>{_.copyFromChannel=(I,B,T=0)=>{const R=E(T),P=E(B);if(P>=_.numberOfChannels)throw A();const D=_.length,F=_.getChannelData(P),L=I.length;for(let U=R<0?-R:0;U+R<D&&U<L;U+=1)I[U]=F[U+R]},_.copyToChannel=(I,B,T=0)=>{const R=E(T),P=E(B);if(P>=_.numberOfChannels)throw A();const D=_.length,F=_.getChannelData(P),L=I.length;for(let U=R<0?-R:0;U+R<D&&U<L;U+=1)F[U+R]=I[U]}},createWrapAudioBufferCopyChannelMethodsOutOfBounds=E=>A=>{A.copyFromChannel=(_=>(I,B,T=0)=>{const R=E(T),P=E(B);if(R<A.length)return _.call(A,I,P,R)})(A.copyFromChannel),A.copyToChannel=(_=>(I,B,T=0)=>{const R=E(T),P=E(B);if(R<A.length)return _.call(A,I,P,R)})(A.copyToChannel)},createWrapAudioBufferSourceNodeStopMethodNullifiedBuffer=E=>(A,_)=>{const I=_.createBuffer(1,1,44100);A.buffer===null&&(A.buffer=I),E(A,"buffer",B=>()=>{const T=B.call(A);return T===I?null:T},B=>T=>B.call(A,T===null?I:T))},createWrapChannelMergerNode=(E,A)=>(_,I)=>{I.channelCount=1,I.channelCountMode="explicit",Object.defineProperty(I,"channelCount",{get:()=>1,set:()=>{throw E()}}),Object.defineProperty(I,"channelCountMode",{get:()=>"explicit",set:()=>{throw E()}});const B=_.createBufferSource();A(I,()=>{const P=I.numberOfInputs;for(let D=0;D<P;D+=1)B.connect(I,0,D)},()=>B.disconnect(I))},getFirstSample=(E,A,_)=>E.copyFromChannel===void 0?E.getChannelData(_)[0]:(E.copyFromChannel(A,_),A[0]),isDCCurve=E=>{if(E===null)return!1;const A=E.length;return A%2!==0?E[Math.floor(A/2)]!==0:E[A/2-1]+E[A/2]!==0},overwriteAccessors=(E,A,_,I)=>{let B=E;for(;!B.hasOwnProperty(A);)B=Object.getPrototypeOf(B);const{get:T,set:R}=Object.getOwnPropertyDescriptor(B,A);Object.defineProperty(E,A,{get:_(T),set:I(R)})},sanitizeAudioWorkletNodeOptions=E=>({...E,outputChannelCount:E.outputChannelCount!==void 0?E.outputChannelCount:E.numberOfInputs===1&&E.numberOfOutputs===1?[E.channelCount]:Array.from({length:E.numberOfOutputs},()=>1)}),sanitizeChannelSplitterOptions=E=>({...E,channelCount:E.numberOfOutputs}),sanitizePeriodicWaveOptions=E=>{const{imag:A,real:_}=E;return A===void 0?_===void 0?{...E,imag:[0,0],real:[0,0]}:{...E,imag:Array.from(_,()=>0),real:_}:_===void 0?{...E,imag:A,real:Array.from(A,()=>0)}:{...E,imag:A,real:_}},setValueAtTimeUntilPossible=(E,A,_)=>{try{E.setValueAtTime(A,_)}catch(I){if(I.code!==9)throw I;setValueAtTimeUntilPossible(E,A,_+1e-7)}},testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport=E=>{const A=E.createBufferSource();A.start();try{A.start()}catch{return!0}return!1},testAudioBufferSourceNodeStartMethodOffsetClampingSupport=E=>{const A=E.createBufferSource(),_=E.createBuffer(1,1,44100);A.buffer=_;try{A.start(0,1)}catch{return!1}return!0},testAudioBufferSourceNodeStopMethodNullifiedBufferSupport=E=>{const A=E.createBufferSource();A.start();try{A.stop()}catch{return!1}return!0},testAudioScheduledSourceNodeStartMethodNegativeParametersSupport=E=>{const A=E.createOscillator();try{A.start(-1)}catch(_){return _ instanceof RangeError}return!1},testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport=E=>{const A=E.createBuffer(1,1,44100),_=E.createBufferSource();_.buffer=A,_.start(),_.stop();try{return _.stop(),!0}catch{return!1}},testAudioScheduledSourceNodeStopMethodNegativeParametersSupport=E=>{const A=E.createOscillator();try{A.stop(-1)}catch(_){return _ instanceof RangeError}return!1},testAudioWorkletNodeOptionsClonability=E=>{const{port1:A,port2:_}=new MessageChannel;try{A.postMessage(E)}finally{A.close(),_.close()}},wrapAudioBufferSourceNodeStartMethodOffsetClamping=E=>{E.start=(A=>(_=0,I=0,B)=>{const T=E.buffer,R=T===null?I:Math.min(T.duration,I);T!==null&&R>T.duration-.5/E.context.sampleRate?A.call(E,_,0,0):A.call(E,_,R,B)})(E.start)},wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls=(E,A)=>{const _=A.createGain();E.connect(_);const I=(B=>()=>{B.call(E,_),E.removeEventListener("ended",I)})(E.disconnect);E.addEventListener("ended",I),interceptConnections(E,_),E.stop=(B=>{let T=!1;return(R=0)=>{if(T)try{B.call(E,R)}catch{_.gain.setValueAtTime(0,R)}else B.call(E,R),T=!0}})(E.stop)},wrapEventListener=(E,A)=>_=>{const I={value:E};return Object.defineProperties(_,{currentTarget:I,target:I}),typeof A=="function"?A.call(E,_):A.handleEvent.call(E,_)},addActiveInputConnectionToAudioNode=createAddActiveInputConnectionToAudioNode(insertElementInSet),addPassiveInputConnectionToAudioNode=createAddPassiveInputConnectionToAudioNode(insertElementInSet),deleteActiveInputConnectionToAudioNode=createDeleteActiveInputConnectionToAudioNode(pickElementFromSet),audioNodeTailTimeStore=new WeakMap,getAudioNodeTailTime=createGetAudioNodeTailTime(audioNodeTailTimeStore),cacheTestResult=createCacheTestResult(new Map,new WeakMap),window$1=createWindow(),createNativeAnalyserNode=createNativeAnalyserNodeFactory(cacheTestResult,createIndexSizeError),getAudioNodeRenderer=createGetAudioNodeRenderer(getAudioNodeConnections),renderInputsOfAudioNode=createRenderInputsOfAudioNode(getAudioNodeConnections,getAudioNodeRenderer,isPartOfACycle),createAnalyserNodeRenderer=createAnalyserNodeRendererFactory(createNativeAnalyserNode,getNativeAudioNode,renderInputsOfAudioNode),getNativeContext=createGetNativeContext(CONTEXT_STORE),nativeOfflineAudioContextConstructor=createNativeOfflineAudioContextConstructor(window$1),isNativeOfflineAudioContext=createIsNativeOfflineAudioContext(nativeOfflineAudioContextConstructor),audioParamAudioNodeStore=new WeakMap,eventTargetConstructor=createEventTargetConstructor(wrapEventListener),nativeAudioContextConstructor=createNativeAudioContextConstructor(window$1),isNativeAudioContext=createIsNativeAudioContext(nativeAudioContextConstructor),isNativeAudioNode=createIsNativeAudioNode(window$1),isNativeAudioParam=createIsNativeAudioParam(window$1),nativeAudioWorkletNodeConstructor=createNativeAudioWorkletNodeConstructor(window$1),audioNodeConstructor=createAudioNodeConstructor(createAddAudioNodeConnections(AUDIO_NODE_CONNECTIONS_STORE),createAddConnectionToAudioNode(addActiveInputConnectionToAudioNode,addPassiveInputConnectionToAudioNode,connectNativeAudioNodeToNativeAudioNode,deleteActiveInputConnectionToAudioNode,disconnectNativeAudioNodeFromNativeAudioNode,getAudioNodeConnections,getAudioNodeTailTime,getEventListenersOfAudioNode,getNativeAudioNode,insertElementInSet,isActiveAudioNode,isPartOfACycle,isPassiveAudioNode),cacheTestResult,createIncrementCycleCounterFactory(CYCLE_COUNTERS,disconnectNativeAudioNodeFromNativeAudioNode,getAudioNodeConnections,getNativeAudioNode,getNativeAudioParam,isActiveAudioNode),createIndexSizeError,createInvalidAccessError,createNotSupportedError,createDecrementCycleCounter(connectNativeAudioNodeToNativeAudioNode,CYCLE_COUNTERS,getAudioNodeConnections,getNativeAudioNode,getNativeAudioParam,getNativeContext,isActiveAudioNode,isNativeOfflineAudioContext),createDetectCycles(audioParamAudioNodeStore,getAudioNodeConnections,getValueForKey),eventTargetConstructor,getNativeContext,isNativeAudioContext,isNativeAudioNode,isNativeAudioParam,isNativeOfflineAudioContext,nativeAudioWorkletNodeConstructor),analyserNodeConstructor=createAnalyserNodeConstructor(audioNodeConstructor,createAnalyserNodeRenderer,createIndexSizeError,createNativeAnalyserNode,getNativeContext,isNativeOfflineAudioContext),audioBufferStore=new WeakSet,nativeAudioBufferConstructor=createNativeAudioBufferConstructor(window$1),convertNumberToUnsignedLong=createConvertNumberToUnsignedLong(new Uint32Array(1)),wrapAudioBufferCopyChannelMethods=createWrapAudioBufferCopyChannelMethods(convertNumberToUnsignedLong,createIndexSizeError),wrapAudioBufferCopyChannelMethodsOutOfBounds=createWrapAudioBufferCopyChannelMethodsOutOfBounds(convertNumberToUnsignedLong),audioBufferConstructor=createAudioBufferConstructor(audioBufferStore,cacheTestResult,createNotSupportedError,nativeAudioBufferConstructor,nativeOfflineAudioContextConstructor,createTestAudioBufferConstructorSupport(nativeAudioBufferConstructor),wrapAudioBufferCopyChannelMethods,wrapAudioBufferCopyChannelMethodsOutOfBounds),addSilentConnection=createAddSilentConnection(createNativeGainNode),renderInputsOfAudioParam=createRenderInputsOfAudioParam(getAudioNodeRenderer,getAudioParamConnections,isPartOfACycle),connectAudioParam=createConnectAudioParam(renderInputsOfAudioParam),createNativeAudioBufferSourceNode=createNativeAudioBufferSourceNodeFactory(addSilentConnection,cacheTestResult,testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport,testAudioBufferSourceNodeStartMethodOffsetClampingSupport,testAudioBufferSourceNodeStopMethodNullifiedBufferSupport,testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport,testAudioScheduledSourceNodeStopMethodNegativeParametersSupport,wrapAudioBufferSourceNodeStartMethodOffsetClamping,createWrapAudioBufferSourceNodeStopMethodNullifiedBuffer(overwriteAccessors),wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls),renderAutomation=createRenderAutomation(createGetAudioParamRenderer(getAudioParamConnections),renderInputsOfAudioParam),createAudioBufferSourceNodeRenderer=createAudioBufferSourceNodeRendererFactory(connectAudioParam,createNativeAudioBufferSourceNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),createAudioParam=createAudioParamFactory(createAddAudioParamConnections(AUDIO_PARAM_CONNECTIONS_STORE),audioParamAudioNodeStore,AUDIO_PARAM_STORE,createAudioParamRenderer,createCancelAndHoldAutomationEvent,createCancelScheduledValuesAutomationEvent,createExponentialRampToValueAutomationEvent,createLinearRampToValueAutomationEvent,createSetTargetAutomationEvent,createSetValueAutomationEvent,createSetValueCurveAutomationEvent,nativeAudioContextConstructor,setValueAtTimeUntilPossible),audioBufferSourceNodeConstructor=createAudioBufferSourceNodeConstructor(audioNodeConstructor,createAudioBufferSourceNodeRenderer,createAudioParam,createInvalidStateError,createNativeAudioBufferSourceNode,getNativeContext,isNativeOfflineAudioContext,wrapEventListener),audioDestinationNodeConstructor=createAudioDestinationNodeConstructor(audioNodeConstructor,createAudioDestinationNodeRenderer,createIndexSizeError,createInvalidStateError,createNativeAudioDestinationNodeFactory(createNativeGainNode,overwriteAccessors),getNativeContext,isNativeOfflineAudioContext,renderInputsOfAudioNode),createBiquadFilterNodeRenderer=createBiquadFilterNodeRendererFactory(connectAudioParam,createNativeBiquadFilterNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),setAudioNodeTailTime=createSetAudioNodeTailTime(audioNodeTailTimeStore),biquadFilterNodeConstructor=createBiquadFilterNodeConstructor(audioNodeConstructor,createAudioParam,createBiquadFilterNodeRenderer,createInvalidAccessError,createNativeBiquadFilterNode,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),monitorConnections=createMonitorConnections(insertElementInSet,isNativeAudioNode),wrapChannelMergerNode=createWrapChannelMergerNode(createInvalidStateError,monitorConnections),createNativeChannelMergerNode=createNativeChannelMergerNodeFactory(nativeAudioContextConstructor,wrapChannelMergerNode),createChannelMergerNodeRenderer=createChannelMergerNodeRendererFactory(createNativeChannelMergerNode,getNativeAudioNode,renderInputsOfAudioNode),channelMergerNodeConstructor=createChannelMergerNodeConstructor(audioNodeConstructor,createChannelMergerNodeRenderer,createNativeChannelMergerNode,getNativeContext,isNativeOfflineAudioContext),createChannelSplitterNodeRenderer=createChannelSplitterNodeRendererFactory(createNativeChannelSplitterNode,getNativeAudioNode,renderInputsOfAudioNode),channelSplitterNodeConstructor=createChannelSplitterNodeConstructor(audioNodeConstructor,createChannelSplitterNodeRenderer,createNativeChannelSplitterNode,getNativeContext,isNativeOfflineAudioContext,sanitizeChannelSplitterOptions),createNativeConstantSourceNodeFaker=createNativeConstantSourceNodeFakerFactory(addSilentConnection,createNativeAudioBufferSourceNode,createNativeGainNode,monitorConnections),createNativeConstantSourceNode=createNativeConstantSourceNodeFactory(addSilentConnection,cacheTestResult,createNativeConstantSourceNodeFaker,testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,testAudioScheduledSourceNodeStopMethodNegativeParametersSupport),createConstantSourceNodeRenderer=createConstantSourceNodeRendererFactory(connectAudioParam,createNativeConstantSourceNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),constantSourceNodeConstructor=createConstantSourceNodeConstructor(audioNodeConstructor,createAudioParam,createConstantSourceNodeRenderer,createNativeConstantSourceNode,getNativeContext,isNativeOfflineAudioContext,wrapEventListener),createNativeConvolverNode=createNativeConvolverNodeFactory(createNotSupportedError,overwriteAccessors),createConvolverNodeRenderer=createConvolverNodeRendererFactory(createNativeConvolverNode,getNativeAudioNode,renderInputsOfAudioNode),convolverNodeConstructor=createConvolverNodeConstructor(audioNodeConstructor,createConvolverNodeRenderer,createNativeConvolverNode,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createDelayNodeRenderer=createDelayNodeRendererFactory(connectAudioParam,createNativeDelayNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),delayNodeConstructor=createDelayNodeConstructor(audioNodeConstructor,createAudioParam,createDelayNodeRenderer,createNativeDelayNode,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createNativeDynamicsCompressorNode=createNativeDynamicsCompressorNodeFactory(createNotSupportedError),createDynamicsCompressorNodeRenderer=createDynamicsCompressorNodeRendererFactory(connectAudioParam,createNativeDynamicsCompressorNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),dynamicsCompressorNodeConstructor=createDynamicsCompressorNodeConstructor(audioNodeConstructor,createAudioParam,createDynamicsCompressorNodeRenderer,createNativeDynamicsCompressorNode,createNotSupportedError,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createGainNodeRenderer=createGainNodeRendererFactory(connectAudioParam,createNativeGainNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),gainNodeConstructor=createGainNodeConstructor(audioNodeConstructor,createAudioParam,createGainNodeRenderer,createNativeGainNode,getNativeContext,isNativeOfflineAudioContext),createNativeIIRFilterNodeFaker=createNativeIIRFilterNodeFakerFactory(createInvalidAccessError,createInvalidStateError,createNativeScriptProcessorNode,createNotSupportedError),renderNativeOfflineAudioContext=createRenderNativeOfflineAudioContext(cacheTestResult,createNativeGainNode,createNativeScriptProcessorNode,createTestOfflineAudioContextCurrentTimeSupport(createNativeGainNode,nativeOfflineAudioContextConstructor)),createIIRFilterNodeRenderer=createIIRFilterNodeRendererFactory(createNativeAudioBufferSourceNode,getNativeAudioNode,nativeOfflineAudioContextConstructor,renderInputsOfAudioNode,renderNativeOfflineAudioContext),createNativeIIRFilterNode=createNativeIIRFilterNodeFactory(createNativeIIRFilterNodeFaker),iIRFilterNodeConstructor=createIIRFilterNodeConstructor(audioNodeConstructor,createNativeIIRFilterNode,createIIRFilterNodeRenderer,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createAudioListener=createAudioListenerFactory(createAudioParam,createNativeChannelMergerNode,createNativeConstantSourceNode,createNativeScriptProcessorNode,createNotSupportedError,getFirstSample,isNativeOfflineAudioContext,overwriteAccessors),unrenderedAudioWorkletNodeStore=new WeakMap,minimalBaseAudioContextConstructor=createMinimalBaseAudioContextConstructor(audioDestinationNodeConstructor,createAudioListener,eventTargetConstructor,isNativeOfflineAudioContext,unrenderedAudioWorkletNodeStore,wrapEventListener),createNativeOscillatorNode=createNativeOscillatorNodeFactory(addSilentConnection,cacheTestResult,testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport,testAudioScheduledSourceNodeStopMethodNegativeParametersSupport,wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls),createOscillatorNodeRenderer=createOscillatorNodeRendererFactory(connectAudioParam,createNativeOscillatorNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),oscillatorNodeConstructor=createOscillatorNodeConstructor(audioNodeConstructor,createAudioParam,createNativeOscillatorNode,createOscillatorNodeRenderer,getNativeContext,isNativeOfflineAudioContext,wrapEventListener),createConnectedNativeAudioBufferSourceNode=createConnectedNativeAudioBufferSourceNodeFactory(createNativeAudioBufferSourceNode),createNativeWaveShaperNodeFaker=createNativeWaveShaperNodeFakerFactory(createConnectedNativeAudioBufferSourceNode,createInvalidStateError,createNativeGainNode,isDCCurve,monitorConnections),createNativeWaveShaperNode=createNativeWaveShaperNodeFactory(createConnectedNativeAudioBufferSourceNode,createInvalidStateError,createNativeWaveShaperNodeFaker,isDCCurve,monitorConnections,nativeAudioContextConstructor,overwriteAccessors),createNativePannerNodeFaker=createNativePannerNodeFakerFactory(connectNativeAudioNodeToNativeAudioNode,createInvalidStateError,createNativeChannelMergerNode,createNativeGainNode,createNativeScriptProcessorNode,createNativeWaveShaperNode,createNotSupportedError,disconnectNativeAudioNodeFromNativeAudioNode,getFirstSample,monitorConnections),createNativePannerNode=createNativePannerNodeFactory(createNativePannerNodeFaker),createPannerNodeRenderer=createPannerNodeRendererFactory(connectAudioParam,createNativeChannelMergerNode,createNativeConstantSourceNode,createNativeGainNode,createNativePannerNode,getNativeAudioNode,nativeOfflineAudioContextConstructor,renderAutomation,renderInputsOfAudioNode,renderNativeOfflineAudioContext),pannerNodeConstructor=createPannerNodeConstructor(audioNodeConstructor,createAudioParam,createNativePannerNode,createPannerNodeRenderer,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createNativePeriodicWave=createNativePeriodicWaveFactory(createIndexSizeError),periodicWaveConstructor=createPeriodicWaveConstructor(createNativePeriodicWave,getNativeContext,new WeakSet,sanitizePeriodicWaveOptions),nativeStereoPannerNodeFakerFactory=createNativeStereoPannerNodeFakerFactory(createNativeChannelMergerNode,createNativeChannelSplitterNode,createNativeGainNode,createNativeWaveShaperNode,createNotSupportedError,monitorConnections),createNativeStereoPannerNode=createNativeStereoPannerNodeFactory(nativeStereoPannerNodeFakerFactory,createNotSupportedError),createStereoPannerNodeRenderer=createStereoPannerNodeRendererFactory(connectAudioParam,createNativeStereoPannerNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),stereoPannerNodeConstructor=createStereoPannerNodeConstructor(audioNodeConstructor,createAudioParam,createNativeStereoPannerNode,createStereoPannerNodeRenderer,getNativeContext,isNativeOfflineAudioContext),createWaveShaperNodeRenderer=createWaveShaperNodeRendererFactory(createNativeWaveShaperNode,getNativeAudioNode,renderInputsOfAudioNode),waveShaperNodeConstructor=createWaveShaperNodeConstructor(audioNodeConstructor,createInvalidStateError,createNativeWaveShaperNode,createWaveShaperNodeRenderer,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),isSecureContext=createIsSecureContext(window$1),exposeCurrentFrameAndCurrentTime=createExposeCurrentFrameAndCurrentTime(window$1),backupOfflineAudioContextStore=new WeakMap,getOrCreateBackupOfflineAudioContext=createGetOrCreateBackupOfflineAudioContext(backupOfflineAudioContextStore,nativeOfflineAudioContextConstructor),addAudioWorkletModule=isSecureContext?createAddAudioWorkletModule(cacheTestResult,createNotSupportedError,createEvaluateSource(window$1),exposeCurrentFrameAndCurrentTime,createFetchSource(createAbortError),getNativeContext,getOrCreateBackupOfflineAudioContext,isNativeOfflineAudioContext,nativeAudioWorkletNodeConstructor,new WeakMap,new WeakMap,createTestAudioWorkletProcessorPostMessageSupport(nativeAudioWorkletNodeConstructor,nativeOfflineAudioContextConstructor),window$1):void 0,isNativeContext=createIsNativeContext(isNativeAudioContext,isNativeOfflineAudioContext),decodeAudioData=createDecodeAudioData(audioBufferStore,cacheTestResult,createDataCloneError,createEncodingError,new WeakSet,getNativeContext,isNativeContext,testAudioBufferCopyChannelMethodsOutOfBoundsSupport,testPromiseSupport,wrapAudioBufferCopyChannelMethods,wrapAudioBufferCopyChannelMethodsOutOfBounds),baseAudioContextConstructor=createBaseAudioContextConstructor(addAudioWorkletModule,analyserNodeConstructor,audioBufferConstructor,audioBufferSourceNodeConstructor,biquadFilterNodeConstructor,channelMergerNodeConstructor,channelSplitterNodeConstructor,constantSourceNodeConstructor,convolverNodeConstructor,decodeAudioData,delayNodeConstructor,dynamicsCompressorNodeConstructor,gainNodeConstructor,iIRFilterNodeConstructor,minimalBaseAudioContextConstructor,oscillatorNodeConstructor,pannerNodeConstructor,periodicWaveConstructor,stereoPannerNodeConstructor,waveShaperNodeConstructor),mediaElementAudioSourceNodeConstructor=createMediaElementAudioSourceNodeConstructor(audioNodeConstructor,createNativeMediaElementAudioSourceNode,getNativeContext,isNativeOfflineAudioContext),mediaStreamAudioDestinationNodeConstructor=createMediaStreamAudioDestinationNodeConstructor(audioNodeConstructor,createNativeMediaStreamAudioDestinationNode,getNativeContext,isNativeOfflineAudioContext),mediaStreamAudioSourceNodeConstructor=createMediaStreamAudioSourceNodeConstructor(audioNodeConstructor,createNativeMediaStreamAudioSourceNode,getNativeContext,isNativeOfflineAudioContext),createNativeMediaStreamTrackAudioSourceNode=createNativeMediaStreamTrackAudioSourceNodeFactory(createInvalidStateError,isNativeOfflineAudioContext),mediaStreamTrackAudioSourceNodeConstructor=createMediaStreamTrackAudioSourceNodeConstructor(audioNodeConstructor,createNativeMediaStreamTrackAudioSourceNode,getNativeContext),audioContextConstructor=createAudioContextConstructor(baseAudioContextConstructor,createInvalidStateError,createNotSupportedError,createUnknownError,mediaElementAudioSourceNodeConstructor,mediaStreamAudioDestinationNodeConstructor,mediaStreamAudioSourceNodeConstructor,mediaStreamTrackAudioSourceNodeConstructor,nativeAudioContextConstructor),getUnrenderedAudioWorkletNodes=createGetUnrenderedAudioWorkletNodes(unrenderedAudioWorkletNodeStore),addUnrenderedAudioWorkletNode=createAddUnrenderedAudioWorkletNode(getUnrenderedAudioWorkletNodes),connectMultipleOutputs=createConnectMultipleOutputs(createIndexSizeError),deleteUnrenderedAudioWorkletNode=createDeleteUnrenderedAudioWorkletNode(getUnrenderedAudioWorkletNodes),disconnectMultipleOutputs=createDisconnectMultipleOutputs(createIndexSizeError),activeAudioWorkletNodeInputsStore=new WeakMap,getActiveAudioWorkletNodeInputs=createGetActiveAudioWorkletNodeInputs(activeAudioWorkletNodeInputsStore,getValueForKey),createNativeAudioWorkletNodeFaker=createNativeAudioWorkletNodeFakerFactory(connectMultipleOutputs,createIndexSizeError,createInvalidStateError,createNativeChannelMergerNode,createNativeChannelSplitterNode,createNativeConstantSourceNode,createNativeGainNode,createNativeScriptProcessorNode,createNotSupportedError,disconnectMultipleOutputs,exposeCurrentFrameAndCurrentTime,getActiveAudioWorkletNodeInputs,monitorConnections),createNativeAudioWorkletNode=createNativeAudioWorkletNodeFactory(createInvalidStateError,createNativeAudioWorkletNodeFaker,createNativeGainNode,createNotSupportedError,monitorConnections),createAudioWorkletNodeRenderer=createAudioWorkletNodeRendererFactory(connectAudioParam,connectMultipleOutputs,createNativeAudioBufferSourceNode,createNativeChannelMergerNode,createNativeChannelSplitterNode,createNativeConstantSourceNode,createNativeGainNode,deleteUnrenderedAudioWorkletNode,disconnectMultipleOutputs,exposeCurrentFrameAndCurrentTime,getNativeAudioNode,nativeAudioWorkletNodeConstructor,nativeOfflineAudioContextConstructor,renderAutomation,renderInputsOfAudioNode,renderNativeOfflineAudioContext),getBackupOfflineAudioContext=createGetBackupOfflineAudioContext(backupOfflineAudioContextStore),setActiveAudioWorkletNodeInputs=createSetActiveAudioWorkletNodeInputs(activeAudioWorkletNodeInputsStore),audioWorkletNodeConstructor=isSecureContext?createAudioWorkletNodeConstructor(addUnrenderedAudioWorkletNode,audioNodeConstructor,createAudioParam,createAudioWorkletNodeRenderer,createNativeAudioWorkletNode,getAudioNodeConnections,getBackupOfflineAudioContext,getNativeContext,isNativeOfflineAudioContext,nativeAudioWorkletNodeConstructor,sanitizeAudioWorkletNodeOptions,setActiveAudioWorkletNodeInputs,testAudioWorkletNodeOptionsClonability,wrapEventListener):void 0,createNativeOfflineAudioContext=createCreateNativeOfflineAudioContext(createNotSupportedError,nativeOfflineAudioContextConstructor),startRendering=createStartRendering(audioBufferStore,cacheTestResult,getAudioNodeRenderer,getUnrenderedAudioWorkletNodes,renderNativeOfflineAudioContext,testAudioBufferCopyChannelMethodsOutOfBoundsSupport,wrapAudioBufferCopyChannelMethods,wrapAudioBufferCopyChannelMethodsOutOfBounds),offlineAudioContextConstructor=createOfflineAudioContextConstructor(baseAudioContextConstructor,cacheTestResult,createInvalidStateError,createNativeOfflineAudioContext,startRendering),isAnyAudioContext=createIsAnyAudioContext(CONTEXT_STORE,isNativeAudioContext),isAnyAudioNode=createIsAnyAudioNode(AUDIO_NODE_STORE,isNativeAudioNode),isAnyAudioParam=createIsAnyAudioParam(AUDIO_PARAM_STORE,isNativeAudioParam),isAnyOfflineAudioContext=createIsAnyOfflineAudioContext(CONTEXT_STORE,isNativeOfflineAudioContext);function isUndef(E){return E===void 0}function isDefined(E){return E!==void 0}function isFunction(E){return typeof E=="function"}function isNumber(E){return typeof E=="number"}function isObject$1(E){return Object.prototype.toString.call(E)==="[object Object]"&&E.constructor===Object}function isBoolean(E){return typeof E=="boolean"}function isArray(E){return Array.isArray(E)}function isString(E){return typeof E=="string"}function isNote(E){return isString(E)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(E)}function assert$1(E,A){if(!E)throw new Error(A)}function assertRange(E,A,_=1/0){if(!(A<=E&&E<=_))throw new RangeError(`Value must be within [${A}, ${_}], got: ${E}`)}function assertContextRunning(E){!E.isOffline&&E.state!=="running"&&warn('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let isInsideScheduledCallback=!1,printedScheduledWarning=!1;function enterScheduledCallback(E){isInsideScheduledCallback=E}function assertUsedScheduleTime(E){isUndef(E)&&isInsideScheduledCallback&&!printedScheduledWarning&&(printedScheduledWarning=!0,warn("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let defaultLogger=console;function log(...E){defaultLogger.log(...E)}function warn(...E){defaultLogger.warn(...E)}function createAudioContext(E){return new audioContextConstructor(E)}function createOfflineAudioContext(E,A,_){return new offlineAudioContextConstructor(E,A,_)}const theWindow=typeof self=="object"?self:null,hasAudioContext=theWindow&&(theWindow.hasOwnProperty("AudioContext")||theWindow.hasOwnProperty("webkitAudioContext"));function createAudioWorkletNode(E,A,_){return assert$1(isDefined(audioWorkletNodeConstructor),"AudioWorkletNode only works in a secure context (https or localhost)"),new(E instanceof theWindow?.BaseAudioContext?theWindow?.AudioWorkletNode:audioWorkletNodeConstructor)(E,A,_)}function __decorate(E,A,_,I){var B=arguments.length,T=B<3?A:I===null?I=Object.getOwnPropertyDescriptor(A,_):I,R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(E,A,_,I);else for(var P=E.length-1;P>=0;P--)(R=E[P])&&(T=(B<3?R(T):B>3?R(A,_,T):R(A,_))||T);return B>3&&T&&Object.defineProperty(A,_,T),T}function __awaiter(E,A,_,I){function B(T){return T instanceof _?T:new _(function(R){R(T)})}return new(_||(_=Promise))(function(T,R){function P(L){try{F(I.next(L))}catch(U){R(U)}}function D(L){try{F(I.throw(L))}catch(U){R(U)}}function F(L){L.done?T(L.value):B(L.value).then(P,D)}F((I=I.apply(E,A||[])).next())})}typeof SuppressedError=="function"&&SuppressedError;class Ticker{constructor(A,_,I,B){this._callback=A,this._type=_,this._minimumUpdateInterval=Math.max(128/(B||44100),.001),this.updateInterval=I,this._createClock()}_createWorker(){const A=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),_=URL.createObjectURL(A),I=new Worker(_);I.onmessage=this._callback.bind(this),this._worker=I}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(A){var _;this._updateInterval=Math.max(A,this._minimumUpdateInterval),this._type==="worker"&&((_=this._worker)===null||_===void 0||_.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(A){this._disposeClock(),this._type=A,this._createClock()}dispose(){this._disposeClock()}}function isAudioParam(E){return isAnyAudioParam(E)}function isAudioNode(E){return isAnyAudioNode(E)}function isOfflineAudioContext(E){return isAnyOfflineAudioContext(E)}function isAudioContext(E){return isAnyAudioContext(E)}function isAudioBuffer(E){return E instanceof audioBufferConstructor}function noCopy(E,A){return E==="value"||isAudioParam(A)||isAudioNode(A)||isAudioBuffer(A)}function deepMerge$1(E,...A){if(!A.length)return E;const _=A.shift();if(isObject$1(E)&&isObject$1(_))for(const I in _)noCopy(I,_[I])?E[I]=_[I]:isObject$1(_[I])?(E[I]||Object.assign(E,{[I]:{}}),deepMerge$1(E[I],_[I])):Object.assign(E,{[I]:_[I]});return deepMerge$1(E,...A)}function deepEquals(E,A){return E.length===A.length&&E.every((_,I)=>A[I]===_)}function optionsFromArguments(E,A,_=[],I){const B={},T=Array.from(A);if(isObject$1(T[0])&&I&&!Reflect.has(T[0],I)&&(Object.keys(T[0]).some(P=>Reflect.has(E,P))||(deepMerge$1(B,{[I]:T[0]}),_.splice(_.indexOf(I),1),T.shift())),T.length===1&&isObject$1(T[0]))deepMerge$1(B,T[0]);else for(let R=0;R<_.length;R++)isDefined(T[R])&&(B[_[R]]=T[R]);return deepMerge$1(E,B)}function getDefaultsFromInstance(E){return E.constructor.getDefaults()}function defaultArg(E,A){return isUndef(E)?A:E}function omitFromObject(E,A){return A.forEach(_=>{Reflect.has(E,_)&&delete E[_]}),E}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2024 Yotam Mann
 */class Tone{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...A){(this.debug||theWindow&&this.toString()===theWindow.TONE_DEBUG_CLASS)&&log(this,...A)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}Tone.version=version$3;const EPSILON=1e-6;function GT(E,A){return E>A+EPSILON}function GTE(E,A){return GT(E,A)||EQ(E,A)}function LT(E,A){return E+EPSILON<A}function EQ(E,A){return Math.abs(E-A)<EPSILON}function clamp$1(E,A,_){return Math.max(Math.min(E,_),A)}let Timeline$1=class Dn extends Tone{constructor(){super(),this.name="Timeline",this._timeline=[];const A=optionsFromArguments(Dn.getDefaults(),arguments,["memory"]);this.memory=A.memory,this.increasing=A.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(A){if(assert$1(Reflect.has(A,"time"),"Timeline: events must have a time attribute"),A.time=A.time.valueOf(),this.increasing&&this.length){const _=this._timeline[this.length-1];assert$1(GTE(A.time,_.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(A)}else{const _=this._search(A.time);this._timeline.splice(_+1,0,A)}if(this.length>this.memory){const _=this.length-this.memory;this._timeline.splice(0,_)}return this}remove(A){const _=this._timeline.indexOf(A);return _!==-1&&this._timeline.splice(_,1),this}get(A,_="time"){const I=this._search(A,_);return I!==-1?this._timeline[I]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(A,_="time"){const I=this._search(A,_);return I+1<this._timeline.length?this._timeline[I+1]:null}getBefore(A){const _=this._timeline.length;if(_>0&&this._timeline[_-1].time<A)return this._timeline[_-1];const I=this._search(A);return I-1>=0?this._timeline[I-1]:null}cancel(A){if(this._timeline.length>1){let _=this._search(A);if(_>=0)if(EQ(this._timeline[_].time,A)){for(let I=_;I>=0&&EQ(this._timeline[I].time,A);I--)_=I;this._timeline=this._timeline.slice(0,_)}else this._timeline=this._timeline.slice(0,_+1);else this._timeline=[]}else this._timeline.length===1&&GTE(this._timeline[0].time,A)&&(this._timeline=[]);return this}cancelBefore(A){const _=this._search(A);return _>=0&&(this._timeline=this._timeline.slice(_+1)),this}previousEvent(A){const _=this._timeline.indexOf(A);return _>0?this._timeline[_-1]:null}_search(A,_="time"){if(this._timeline.length===0)return-1;let I=0;const B=this._timeline.length;let T=B;if(B>0&&this._timeline[B-1][_]<=A)return B-1;for(;I<T;){let R=Math.floor(I+(T-I)/2);const P=this._timeline[R],D=this._timeline[R+1];if(EQ(P[_],A)){for(let F=R;F<this._timeline.length;F++){const L=this._timeline[F];if(EQ(L[_],A))R=F;else break}return R}else{if(LT(P[_],A)&&GT(D[_],A))return R;GT(P[_],A)?T=R:I=R+1}}return-1}_iterate(A,_=0,I=this._timeline.length-1){this._timeline.slice(_,I+1).forEach(A)}forEach(A){return this._iterate(A),this}forEachBefore(A,_){const I=this._search(A);return I!==-1&&this._iterate(_,0,I),this}forEachAfter(A,_){const I=this._search(A);return this._iterate(_,I+1),this}forEachBetween(A,_,I){let B=this._search(A),T=this._search(_);return B!==-1&&T!==-1?(this._timeline[B].time!==A&&(B+=1),this._timeline[T].time===_&&(T-=1),this._iterate(I,B,T)):B===-1&&this._iterate(I,0,T),this}forEachFrom(A,_){let I=this._search(A);for(;I>=0&&this._timeline[I].time>=A;)I--;return this._iterate(_,I+1),this}forEachAtTime(A,_){const I=this._search(A);if(I!==-1&&EQ(this._timeline[I].time,A)){let B=I;for(let T=I;T>=0&&EQ(this._timeline[T].time,A);T--)B=T;this._iterate(T=>{_(T)},B,I)}return this}dispose(){return super.dispose(),this._timeline=[],this}};const notifyNewContext=[];function onContextInit(E){notifyNewContext.push(E)}function initializeContext(E){notifyNewContext.forEach(A=>A(E))}const notifyCloseContext=[];function onContextClose(E){notifyCloseContext.push(E)}function closeContext(E){notifyCloseContext.forEach(A=>A(E))}class Emitter extends Tone{constructor(){super(...arguments),this.name="Emitter"}on(A,_){return A.split(/\W+/).forEach(B=>{isUndef(this._events)&&(this._events={}),this._events.hasOwnProperty(B)||(this._events[B]=[]),this._events[B].push(_)}),this}once(A,_){const I=(...B)=>{_(...B),this.off(A,I)};return this.on(A,I),this}off(A,_){return A.split(/\W+/).forEach(B=>{if(isUndef(this._events)&&(this._events={}),this._events.hasOwnProperty(B))if(isUndef(_))this._events[B]=[];else{const T=this._events[B];for(let R=T.length-1;R>=0;R--)T[R]===_&&T.splice(R,1)}}),this}emit(A,..._){if(this._events&&this._events.hasOwnProperty(A)){const I=this._events[A].slice(0);for(let B=0,T=I.length;B<T;B++)I[B].apply(this,_)}return this}static mixin(A){["on","once","off","emit"].forEach(_=>{const I=Object.getOwnPropertyDescriptor(Emitter.prototype,_);Object.defineProperty(A.prototype,_,I)})}dispose(){return super.dispose(),this._events=void 0,this}}class BaseContext extends Emitter{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Context extends BaseContext{constructor(){var A,_;super(),this.name="Context",this._constants=new Map,this._timeouts=new Timeline$1,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const I=optionsFromArguments(Context.getDefaults(),arguments,["context"]);I.context?(this._context=I.context,this._latencyHint=((A=arguments[0])===null||A===void 0?void 0:A.latencyHint)||""):(this._context=createAudioContext({latencyHint:I.latencyHint}),this._latencyHint=I.latencyHint),this._ticker=new Ticker(this.emit.bind(this,"tick"),I.clockSource,I.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((_=arguments[0])===null||_===void 0)&&_.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=I.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(initializeContext(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(A,_,I){return this._context.createBuffer(A,_,I)}createChannelMerger(A){return this._context.createChannelMerger(A)}createChannelSplitter(A){return this._context.createChannelSplitter(A)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(A){return this._context.createDelay(A)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(A,_){return this._context.createIIRFilter(A,_)}createPanner(){return this._context.createPanner()}createPeriodicWave(A,_,I){return this._context.createPeriodicWave(A,_,I)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(A){return assert$1(isAudioContext(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(A)}createMediaElementSource(A){return assert$1(isAudioContext(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(A)}createMediaStreamDestination(){return assert$1(isAudioContext(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(A){return this._context.decodeAudioData(A)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(A){assert$1(!this._initialized,"The listener cannot be set after initialization."),this._listener=A}get transport(){return this.initialize(),this._transport}set transport(A){assert$1(!this._initialized,"The transport cannot be set after initialization."),this._transport=A}get draw(){return this.initialize(),this._draw}set draw(A){assert$1(!this._initialized,"Draw cannot be set after initialization."),this._draw=A}get destination(){return this.initialize(),this._destination}set destination(A){assert$1(!this._initialized,"The destination cannot be set after initialization."),this._destination=A}createAudioWorkletNode(A,_){return createAudioWorkletNode(this.rawContext,A,_)}addAudioWorkletModule(A){return __awaiter(this,void 0,void 0,function*(){assert$1(isDefined(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(A)),yield this._workletPromise})}workletsAreReady(){return __awaiter(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(A){this._ticker.updateInterval=A}get clockSource(){return this._ticker.type}set clockSource(A){this._ticker.type=A}get lookAhead(){return this._lookAhead}set lookAhead(A){this._lookAhead=A,this.updateInterval=A?A/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return isAudioContext(this._context)?this._context.resume():Promise.resolve()}close(){return __awaiter(this,void 0,void 0,function*(){isAudioContext(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&closeContext(this)})}getConstant(A){if(this._constants.has(A))return this._constants.get(A);{const _=this._context.createBuffer(1,128,this._context.sampleRate),I=_.getChannelData(0);for(let T=0;T<I.length;T++)I[T]=A;const B=this._context.createBufferSource();return B.channelCount=1,B.channelCountMode="explicit",B.buffer=_,B.loop=!0,B.start(0),this._constants.set(A,B),B}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(A=>this._constants[A].disconnect()),this.close(),this}_timeoutLoop(){const A=this.now();this._timeouts.forEachBefore(A,_=>{_.callback(),this._timeouts.remove(_)})}setTimeout(A,_){this._timeoutIds++;const I=this.now();return this._timeouts.add({callback:A,id:this._timeoutIds,time:I+_}),this._timeoutIds}clearTimeout(A){return this._timeouts.forEach(_=>{_.id===A&&this._timeouts.remove(_)}),this}clearInterval(A){return this.clearTimeout(A)}setInterval(A,_){const I=++this._timeoutIds,B=()=>{const T=this.now();this._timeouts.add({callback:()=>{A(),B()},id:I,time:T+_})};return B(),I}}class DummyContext extends BaseContext{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(A,_,I){return{}}createChannelMerger(A){return{}}createChannelSplitter(A){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(A){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(A,_){return{}}createPanner(){return{}}createPeriodicWave(A,_,I){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(A){return{}}createMediaElementSource(A){return{}}createMediaStreamDestination(){return{}}decodeAudioData(A){return Promise.resolve({})}createAudioWorkletNode(A,_){return{}}get rawContext(){return{}}addAudioWorkletModule(A){return __awaiter(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(A,_){return 0}clearTimeout(A){return this}setInterval(A,_){return 0}clearInterval(A){return this}getConstant(A){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(A){}get destination(){return{}}set destination(A){}now(){return 0}immediate(){return 0}}function readOnly(E,A){isArray(A)?A.forEach(_=>readOnly(E,_)):Object.defineProperty(E,A,{enumerable:!0,writable:!1})}function writable(E,A){isArray(A)?A.forEach(_=>writable(E,_)):Object.defineProperty(E,A,{writable:!0})}const noOp=()=>{};class ToneAudioBuffer extends Tone{constructor(){super(),this.name="ToneAudioBuffer",this.onload=noOp;const A=optionsFromArguments(ToneAudioBuffer.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=A.reverse,this.onload=A.onload,isString(A.url)?this.load(A.url).catch(A.onerror):A.url&&this.set(A.url)}static getDefaults(){return{onerror:noOp,onload:noOp,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:getContext().sampleRate}set(A){return A instanceof ToneAudioBuffer?A.loaded?this._buffer=A.get():A.onload=()=>{this.set(A),this.onload(this)}:this._buffer=A,this._reversed&&this._reverse(),this}get(){return this._buffer}load(A){return __awaiter(this,void 0,void 0,function*(){const _=ToneAudioBuffer.load(A).then(I=>{this.set(I),this.onload(this)});ToneAudioBuffer.downloads.push(_);try{yield _}finally{const I=ToneAudioBuffer.downloads.indexOf(_);ToneAudioBuffer.downloads.splice(I,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(A){const _=isArray(A)&&A[0].length>0,I=_?A.length:1,B=_?A[0].length:A.length,T=getContext(),R=T.createBuffer(I,B,T.sampleRate),P=!_&&I===1?[A]:A;for(let D=0;D<I;D++)R.copyToChannel(P[D],D);return this._buffer=R,this}toMono(A){if(isNumber(A))this.fromArray(this.toArray(A));else{let _=new Float32Array(this.length);const I=this.numberOfChannels;for(let B=0;B<I;B++){const T=this.toArray(B);for(let R=0;R<T.length;R++)_[R]+=T[R]}_=_.map(B=>B/I),this.fromArray(_)}return this}toArray(A){if(isNumber(A))return this.getChannelData(A);if(this.numberOfChannels===1)return this.toArray(0);{const _=[];for(let I=0;I<this.numberOfChannels;I++)_[I]=this.getChannelData(I);return _}}getChannelData(A){return this._buffer?this._buffer.getChannelData(A):new Float32Array(0)}slice(A,_=this.duration){assert$1(this.loaded,"Buffer is not loaded");const I=Math.floor(A*this.sampleRate),B=Math.floor(_*this.sampleRate);assert$1(I<B,"The start time must be less than the end time");const T=B-I,R=getContext().createBuffer(this.numberOfChannels,T,this.sampleRate);for(let P=0;P<this.numberOfChannels;P++)R.copyToChannel(this.getChannelData(P).subarray(I,B),P);return new ToneAudioBuffer(R)}_reverse(){if(this.loaded)for(let A=0;A<this.numberOfChannels;A++)this.getChannelData(A).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(A){this._reversed!==A&&(this._reversed=A,this._reverse())}static fromArray(A){return new ToneAudioBuffer().fromArray(A)}static fromUrl(A){return __awaiter(this,void 0,void 0,function*(){return yield new ToneAudioBuffer().load(A)})}static load(A){return __awaiter(this,void 0,void 0,function*(){const _=ToneAudioBuffer.baseUrl===""||ToneAudioBuffer.baseUrl.endsWith("/")?ToneAudioBuffer.baseUrl:ToneAudioBuffer.baseUrl+"/",I=yield fetch(_+A);if(!I.ok)throw new Error(`could not load url: ${A}`);const B=yield I.arrayBuffer();return yield getContext().decodeAudioData(B)})}static supportsType(A){const _=A.split("."),I=_[_.length-1];return document.createElement("audio").canPlayType("audio/"+I)!==""}static loaded(){return __awaiter(this,void 0,void 0,function*(){for(yield Promise.resolve();ToneAudioBuffer.downloads.length;)yield ToneAudioBuffer.downloads[0]})}}ToneAudioBuffer.baseUrl="";ToneAudioBuffer.downloads=[];class OfflineContext extends Context{constructor(){super({clockSource:"offline",context:isOfflineAudioContext(arguments[0])?arguments[0]:createOfflineAudioContext(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:isOfflineAudioContext(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=isOfflineAudioContext(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(A){return __awaiter(this,void 0,void 0,function*(){let _=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,_++;const I=Math.floor(this.sampleRate/128);A&&_%I===0&&(yield new Promise(B=>setTimeout(B,1)))}})}render(){return __awaiter(this,arguments,void 0,function*(A=!0){yield this.workletsAreReady(),yield this._renderClock(A);const _=yield this._context.startRendering();return new ToneAudioBuffer(_)})}close(){return Promise.resolve()}}const dummyContext=new DummyContext;let globalContext=dummyContext;function getContext(){return globalContext===dummyContext&&hasAudioContext&&setContext(new Context),globalContext}function setContext(E,A=!1){A&&globalContext.dispose(),isAudioContext(E)?globalContext=new Context(E):isOfflineAudioContext(E)?globalContext=new OfflineContext(E):globalContext=E}if(theWindow&&!theWindow.TONE_SILENCE_LOGGING){const A=` * Tone.js v${version$3} * `;console.log(`%c${A}`,"background: #000; color: #fff")}function dbToGain(E){return Math.pow(10,E/20)}function gainToDb(E){return 20*(Math.log(E)/Math.LN10)}function intervalToFrequencyRatio(E){return Math.pow(2,E/12)}let A4=440;function getA4(){return A4}function setA4(E){A4=E}function ftom(E){return Math.round(ftomf(E))}function ftomf(E){return 69+12*Math.log2(E/A4)}function mtof(E){return A4*Math.pow(2,(E-69)/12)}class TimeBaseClass extends Tone{constructor(A,_,I){super(),this.defaultUnits="s",this._val=_,this._units=I,this.context=A,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:A=>this._frequencyToUnits(parseFloat(A)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:A=>this._ticksToUnits(parseInt(A,10)),regexp:/^(\d+)i$/i},m:{method:A=>this._beatsToUnits(parseInt(A,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(A,_)=>{const I=parseInt(A,10),B=_==="."?1.5:1;return I===1?this._beatsToUnits(this._getTimeSignature())*B:this._beatsToUnits(4/I)*B},regexp:/^(\d+)n(\.?)$/i},number:{method:A=>this._expressions[this.defaultUnits].method.call(this,A),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:A=>this._secondsToUnits(parseFloat(A)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:A=>parseInt(A,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:A=>{const _=parseInt(A,10);return this._beatsToUnits(8/(Math.floor(_)*3))},regexp:/^(\d+)t$/i},tr:{method:(A,_,I)=>{let B=0;return A&&A!=="0"&&(B+=this._beatsToUnits(this._getTimeSignature()*parseFloat(A))),_&&_!=="0"&&(B+=this._beatsToUnits(parseFloat(_))),I&&I!=="0"&&(B+=this._beatsToUnits(parseFloat(I)/4)),B},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof TimeBaseClass&&this.fromType(this._val),isUndef(this._val))return this._noArg();if(isString(this._val)&&isUndef(this._units)){for(const A in this._expressions)if(this._expressions[A].regexp.test(this._val.trim())){this._units=A;break}}else if(isObject$1(this._val)){let A=0;for(const _ in this._val)if(isDefined(this._val[_])){const I=this._val[_],B=new this.constructor(this.context,_).valueOf()*I;A+=B}return A}if(isDefined(this._units)){const A=this._expressions[this._units],_=this._val.toString().trim().match(A.regexp);return _?A.method.apply(this,_.slice(1)):A.method.call(this,this._val)}else return isString(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(A){return 1/A}_beatsToUnits(A){return 60/this._getBpm()*A}_secondsToUnits(A){return A}_ticksToUnits(A){return A*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(A){switch(this._units=void 0,this.defaultUnits){case"s":this._val=A.toSeconds();break;case"i":this._val=A.toTicks();break;case"hz":this._val=A.toFrequency();break;case"midi":this._val=A.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class TimeClass extends TimeBaseClass{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:A=>this._now()+new this.constructor(this.context,A).valueOf(),regexp:/^\+(.+)/},quantize:{method:A=>{const _=new TimeClass(this.context,A).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(_))},regexp:/^@(.+)/}})}quantize(A,_=1){const I=new this.constructor(this.context,A).valueOf(),B=this.valueOf(),P=Math.round(B/I)*I-B;return B+P*_}toNotation(){const A=this.toSeconds(),_=["1m"];for(let T=1;T<9;T++){const R=Math.pow(2,T);_.push(R+"n."),_.push(R+"n"),_.push(R+"t")}_.push("0");let I=_[0],B=new TimeClass(this.context,_[0]).toSeconds();return _.forEach(T=>{const R=new TimeClass(this.context,T).toSeconds();Math.abs(R-A)<Math.abs(B-A)&&(I=T,B=R)}),I}toBarsBeatsSixteenths(){const A=this._beatsToUnits(1);let _=this.valueOf()/A;_=parseFloat(_.toFixed(4));const I=Math.floor(_/this._getTimeSignature());let B=_%1*4;_=Math.floor(_)%this._getTimeSignature();const T=B.toString();return T.length>3&&(B=parseFloat(parseFloat(T).toFixed(3))),[I,_,B].join(":")}toTicks(){const A=this._beatsToUnits(1);return this.valueOf()/A*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return ftom(this.toFrequency())}_now(){return this.context.now()}}class FrequencyClass extends TimeClass{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return getA4()}static set A4(A){setA4(A)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(A){return this.defaultUnits==="midi"?A:FrequencyClass.mtof(A)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(A,_){const B=noteToScaleIndex[A.toLowerCase()]+(parseInt(_,10)+1)*12;return this.defaultUnits==="midi"?B:FrequencyClass.mtof(B)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(A,_,I){let B=1;return A&&A!=="0"&&(B*=this._beatsToUnits(this._getTimeSignature()*parseFloat(A))),_&&_!=="0"&&(B*=this._beatsToUnits(parseFloat(_))),I&&I!=="0"&&(B*=this._beatsToUnits(parseFloat(I)/4)),B}}})}transpose(A){return new FrequencyClass(this.context,this.valueOf()*intervalToFrequencyRatio(A))}harmonize(A){return A.map(_=>this.transpose(_))}toMidi(){return ftom(this.valueOf())}toNote(){const A=this.toFrequency(),_=Math.log2(A/FrequencyClass.A4);let I=Math.round(12*_)+57;const B=Math.floor(I/12);return B<0&&(I+=-12*B),scaleIndexToNote[I%12]+B.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const A=this._beatsToUnits(1),_=this.valueOf()/A;return Math.floor(_*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(A){return A}_ticksToUnits(A){return 1/(A*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(A){return 1/super._beatsToUnits(A)}_secondsToUnits(A){return 1/A}static mtof(A){return mtof(A)}static ftom(A){return ftom(A)}}const noteToScaleIndex={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},scaleIndexToNote=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class TransportTimeClass extends TimeClass{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class ToneWithContext extends Tone{constructor(){super();const A=optionsFromArguments(ToneWithContext.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=A.context}static getDefaults(){return{context:getContext()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(A){return assertUsedScheduleTime(A),new TimeClass(this.context,A).toSeconds()}toFrequency(A){return new FrequencyClass(this.context,A).toFrequency()}toTicks(A){return new TransportTimeClass(this.context,A).toTicks()}_getPartialProperties(A){const _=this.get();return Object.keys(_).forEach(I=>{isUndef(A[I])&&delete _[I]}),_}get(){const A=getDefaultsFromInstance(this);return Object.keys(A).forEach(_=>{if(Reflect.has(this,_)){const I=this[_];isDefined(I)&&isDefined(I.value)&&isDefined(I.setValueAtTime)?A[_]=I.value:I instanceof ToneWithContext?A[_]=I._getPartialProperties(A[_]):isArray(I)||isNumber(I)||isString(I)||isBoolean(I)?A[_]=I:delete A[_]}}),A}set(A){return Object.keys(A).forEach(_=>{Reflect.has(this,_)&&isDefined(this[_])&&(this[_]&&isDefined(this[_].value)&&isDefined(this[_].setValueAtTime)?this[_].value!==A[_]&&(this[_].value=A[_]):this[_]instanceof ToneWithContext?this[_].set(A[_]):this[_]=A[_])}),this}}class StateTimeline extends Timeline$1{constructor(A="stopped"){super(),this.name="StateTimeline",this._initial=A,this.setStateAtTime(this._initial,0)}getValueAtTime(A){const _=this.get(A);return _!==null?_.state:this._initial}setStateAtTime(A,_,I){return assertRange(_,0),this.add(Object.assign({},I,{state:A,time:_})),this}getLastState(A,_){const I=this._search(_);for(let B=I;B>=0;B--){const T=this._timeline[B];if(T.state===A)return T}}getNextState(A,_){const I=this._search(_);if(I!==-1)for(let B=I;B<this._timeline.length;B++){const T=this._timeline[B];if(T.state===A)return T}}}class Param extends ToneWithContext{constructor(){const A=optionsFromArguments(Param.getDefaults(),arguments,["param","units","convert"]);for(super(A),this.name="Param",this.overridden=!1,this._minOutput=1e-7,assert$1(isDefined(A.param)&&(isAudioParam(A.param)||A.param instanceof Param),"param must be an AudioParam");!isAudioParam(A.param);)A.param=A.param._param;this._swappable=isDefined(A.swappable)?A.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=A.param,this.input.connect(this._param)):this._param=this.input=A.param,this._events=new Timeline$1(1e3),this._initialValue=this._param.defaultValue,this.units=A.units,this.convert=A.convert,this._minValue=A.minValue,this._maxValue=A.maxValue,isDefined(A.value)&&A.value!==this._toType(this._initialValue)&&this.setValueAtTime(A.value,0)}static getDefaults(){return Object.assign(ToneWithContext.getDefaults(),{convert:!0,units:"number"})}get value(){const A=this.now();return this.getValueAtTime(A)}set value(A){this.cancelScheduledValues(this.now()),this.setValueAtTime(A,this.now())}get minValue(){return isDefined(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return isDefined(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(A,_){return this.units===_}_assertRange(A){return isDefined(this.maxValue)&&isDefined(this.minValue)&&assertRange(A,this._fromType(this.minValue),this._fromType(this.maxValue)),A}_fromType(A){return this.convert&&!this.overridden?this._is(A,"time")?this.toSeconds(A):this._is(A,"decibels")?dbToGain(A):this._is(A,"frequency")?this.toFrequency(A):A:this.overridden?0:A}_toType(A){return this.convert&&this.units==="decibels"?gainToDb(A):A}setValueAtTime(A,_){const I=this.toSeconds(_),B=this._fromType(A);return assert$1(isFinite(B)&&isFinite(I),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(A)}, ${JSON.stringify(_)}`),this._assertRange(B),this.log(this.units,"setValueAtTime",A,I),this._events.add({time:I,type:"setValueAtTime",value:B}),this._param.setValueAtTime(B,I),this}getValueAtTime(A){const _=Math.max(this.toSeconds(A),0),I=this._events.getAfter(_),B=this._events.get(_);let T=this._initialValue;if(B===null)T=this._initialValue;else if(B.type==="setTargetAtTime"&&(I===null||I.type==="setValueAtTime")){const R=this._events.getBefore(B.time);let P;R===null?P=this._initialValue:P=R.value,B.type==="setTargetAtTime"&&(T=this._exponentialApproach(B.time,P,B.value,B.constant,_))}else if(I===null)T=B.value;else if(I.type==="linearRampToValueAtTime"||I.type==="exponentialRampToValueAtTime"){let R=B.value;if(B.type==="setTargetAtTime"){const P=this._events.getBefore(B.time);P===null?R=this._initialValue:R=P.value}I.type==="linearRampToValueAtTime"?T=this._linearInterpolate(B.time,R,I.time,I.value,_):T=this._exponentialInterpolate(B.time,R,I.time,I.value,_)}else T=B.value;return this._toType(T)}setRampPoint(A){A=this.toSeconds(A);let _=this.getValueAtTime(A);return this.cancelAndHoldAtTime(A),this._fromType(_)===0&&(_=this._toType(this._minOutput)),this.setValueAtTime(_,A),this}linearRampToValueAtTime(A,_){const I=this._fromType(A),B=this.toSeconds(_);return assert$1(isFinite(I)&&isFinite(B),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(A)}, ${JSON.stringify(_)}`),this._assertRange(I),this._events.add({time:B,type:"linearRampToValueAtTime",value:I}),this.log(this.units,"linearRampToValueAtTime",A,B),this._param.linearRampToValueAtTime(I,B),this}exponentialRampToValueAtTime(A,_){let I=this._fromType(A);I=EQ(I,0)?this._minOutput:I,this._assertRange(I);const B=this.toSeconds(_);return assert$1(isFinite(I)&&isFinite(B),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(A)}, ${JSON.stringify(_)}`),this._events.add({time:B,type:"exponentialRampToValueAtTime",value:I}),this.log(this.units,"exponentialRampToValueAtTime",A,B),this._param.exponentialRampToValueAtTime(I,B),this}exponentialRampTo(A,_,I){return I=this.toSeconds(I),this.setRampPoint(I),this.exponentialRampToValueAtTime(A,I+this.toSeconds(_)),this}linearRampTo(A,_,I){return I=this.toSeconds(I),this.setRampPoint(I),this.linearRampToValueAtTime(A,I+this.toSeconds(_)),this}targetRampTo(A,_,I){return I=this.toSeconds(I),this.setRampPoint(I),this.exponentialApproachValueAtTime(A,I,_),this}exponentialApproachValueAtTime(A,_,I){_=this.toSeconds(_),I=this.toSeconds(I);const B=Math.log(I+1)/Math.log(200);return this.setTargetAtTime(A,_,B),this.cancelAndHoldAtTime(_+I*.9),this.linearRampToValueAtTime(A,_+I),this}setTargetAtTime(A,_,I){const B=this._fromType(A);assert$1(isFinite(I)&&I>0,"timeConstant must be a number greater than 0");const T=this.toSeconds(_);return this._assertRange(B),assert$1(isFinite(B)&&isFinite(T),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(A)}, ${JSON.stringify(_)}`),this._events.add({constant:I,time:T,type:"setTargetAtTime",value:B}),this.log(this.units,"setTargetAtTime",A,T,I),this._param.setTargetAtTime(B,T,I),this}setValueCurveAtTime(A,_,I,B=1){I=this.toSeconds(I),_=this.toSeconds(_);const T=this._fromType(A[0])*B;this.setValueAtTime(this._toType(T),_);const R=I/(A.length-1);for(let P=1;P<A.length;P++){const D=this._fromType(A[P])*B;this.linearRampToValueAtTime(this._toType(D),_+P*R)}return this}cancelScheduledValues(A){const _=this.toSeconds(A);return assert$1(isFinite(_),`Invalid argument to cancelScheduledValues: ${JSON.stringify(A)}`),this._events.cancel(_),this._param.cancelScheduledValues(_),this.log(this.units,"cancelScheduledValues",_),this}cancelAndHoldAtTime(A){const _=this.toSeconds(A),I=this._fromType(this.getValueAtTime(_));assert$1(isFinite(_),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(A)}`),this.log(this.units,"cancelAndHoldAtTime",_,"value="+I);const B=this._events.get(_),T=this._events.getAfter(_);return B&&EQ(B.time,_)?T?(this._param.cancelScheduledValues(T.time),this._events.cancel(T.time)):(this._param.cancelAndHoldAtTime(_),this._events.cancel(_+this.sampleTime)):T&&(this._param.cancelScheduledValues(T.time),this._events.cancel(T.time),T.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(I),_):T.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(I),_)),this._events.add({time:_,type:"setValueAtTime",value:I}),this._param.setValueAtTime(I,_),this}rampTo(A,_=.1,I){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(A,_,I):this.linearRampTo(A,_,I),this}apply(A){const _=this.context.currentTime;A.setValueAtTime(this.getValueAtTime(_),_);const I=this._events.get(_);if(I&&I.type==="setTargetAtTime"){const B=this._events.getAfter(I.time),T=B?B.time:_+2,R=(T-_)/10;for(let P=_;P<T;P+=R)A.linearRampToValueAtTime(this.getValueAtTime(P),P)}return this._events.forEachAfter(this.context.currentTime,B=>{B.type==="cancelScheduledValues"?A.cancelScheduledValues(B.time):B.type==="setTargetAtTime"?A.setTargetAtTime(B.value,B.time,B.constant):A[B.type](B.value,B.time)}),this}setParam(A){assert$1(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const _=this.input;return _.disconnect(this._param),this.apply(A),this._param=A,_.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(A,_,I,B,T){return I+(_-I)*Math.exp(-(T-A)/B)}_linearInterpolate(A,_,I,B,T){return _+(B-_)*((T-A)/(I-A))}_exponentialInterpolate(A,_,I,B,T){return _*Math.pow(B/_,(T-A)/(I-A))}}class ToneAudioNode extends ToneWithContext{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return isDefined(this.input)?isAudioParam(this.input)||this.input instanceof Param?1:this.input.numberOfInputs:0}get numberOfOutputs(){return isDefined(this.output)?this.output.numberOfOutputs:0}_isAudioNode(A){return isDefined(A)&&(A instanceof ToneAudioNode||isAudioNode(A))}_getInternalNodes(){const A=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&A.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&A.push(this.output),A}_setChannelProperties(A){this._getInternalNodes().forEach(I=>{I.channelCount=A.channelCount,I.channelCountMode=A.channelCountMode,I.channelInterpretation=A.channelInterpretation})}_getChannelProperties(){const A=this._getInternalNodes();assert$1(A.length>0,"ToneAudioNode does not have any internal nodes");const _=A[0];return{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(A){const _=this._getChannelProperties();this._setChannelProperties(Object.assign(_,{channelCount:A}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(A){const _=this._getChannelProperties();this._setChannelProperties(Object.assign(_,{channelCountMode:A}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(A){const _=this._getChannelProperties();this._setChannelProperties(Object.assign(_,{channelInterpretation:A}))}connect(A,_=0,I=0){return connect(this,A,_,I),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return warn("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(A,_=0,I=0){return disconnect(this,A,_,I),this}chain(...A){return connectSeries(this,...A),this}fan(...A){return A.forEach(_=>this.connect(_)),this}dispose(){return super.dispose(),isDefined(this.input)&&(this.input instanceof ToneAudioNode?this.input.dispose():isAudioNode(this.input)&&this.input.disconnect()),isDefined(this.output)&&(this.output instanceof ToneAudioNode?this.output.dispose():isAudioNode(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function connectSeries(...E){const A=E.shift();E.reduce((_,I)=>(_ instanceof ToneAudioNode?_.connect(I):isAudioNode(_)&&connect(_,I),I),A)}function connect(E,A,_=0,I=0){for(assert$1(isDefined(E),"Cannot connect from undefined node"),assert$1(isDefined(A),"Cannot connect to undefined node"),(A instanceof ToneAudioNode||isAudioNode(A))&&assert$1(A.numberOfInputs>0,"Cannot connect to node with no inputs"),assert$1(E.numberOfOutputs>0,"Cannot connect from node with no outputs");A instanceof ToneAudioNode||A instanceof Param;)isDefined(A.input)&&(A=A.input);for(;E instanceof ToneAudioNode;)isDefined(E.output)&&(E=E.output);isAudioParam(A)?E.connect(A,_):E.connect(A,_,I)}function disconnect(E,A,_=0,I=0){if(isDefined(A))for(;A instanceof ToneAudioNode;)A=A.input;for(;!isAudioNode(E);)isDefined(E.output)&&(E=E.output);isAudioParam(A)?E.disconnect(A,_):isAudioNode(A)?E.disconnect(A,_,I):E.disconnect()}class Gain extends ToneAudioNode{constructor(){const A=optionsFromArguments(Gain.getDefaults(),arguments,["gain","units"]);super(A),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new Param({context:this.context,convert:A.convert,param:this._gainNode.gain,units:A.units,value:A.gain,minValue:A.minValue,maxValue:A.maxValue}),readOnly(this,"gain")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class OneShotSource extends ToneAudioNode{constructor(A){super(A),this.onended=noOp,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Gain({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(_){const I=this.toSeconds(_);return this._startTime!==-1&&I>=this._startTime&&(this._stopTime===-1||I<=this._stopTime)?"started":"stopped"},this._fadeIn=A.fadeIn,this._fadeOut=A.fadeOut,this._curve=A.curve,this.onended=A.onended}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:noOp})}_startGain(A,_=1){assert$1(this._startTime===-1,"Source cannot be started more than once");const I=this.toSeconds(this._fadeIn);return this._startTime=A+I,this._startTime=Math.max(this._startTime,this.context.currentTime),I>0?(this._gainNode.gain.setValueAtTime(0,A),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(_,A+I):this._gainNode.gain.exponentialApproachValueAtTime(_,A,I)):this._gainNode.gain.setValueAtTime(_,A),this}stop(A){return this.log("stop",A),this._stopGain(this.toSeconds(A)),this}_stopGain(A){assert$1(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const _=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(A)+_,this._stopTime=Math.max(this._stopTime,this.now()),_>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,_,A):this._gainNode.gain.targetRampTo(0,_,A):(this._gainNode.gain.cancelAndHoldAtTime(A),this._gainNode.gain.setValueAtTime(0,A)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const I=this._curve==="exponential"?_*2:0;this._stopSource(this.now()+I),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==noOp&&(this.onended(this),this.onended=noOp,!this.context.isOffline)){const A=()=>this.dispose();typeof requestIdleCallback<"u"?requestIdleCallback(A):setTimeout(A,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),assert$1(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=noOp,this}}class ToneConstantSource extends OneShotSource{constructor(){const A=optionsFromArguments(ToneConstantSource.getDefaults(),arguments,["offset"]);super(A),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),connect(this._source,this._gainNode),this.offset=new Param({context:this.context,convert:A.convert,param:this._source.offset,units:A.units,value:A.offset,minValue:A.minValue,maxValue:A.maxValue})}static getDefaults(){return Object.assign(OneShotSource.getDefaults(),{convert:!0,offset:1,units:"number"})}start(A){const _=this.toSeconds(A);return this.log("start",_),this._startGain(_),this._source.start(_),this}_stopSource(A){this._source.stop(A)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Signal extends ToneAudioNode{constructor(){const A=optionsFromArguments(Signal.getDefaults(),arguments,["value","units"]);super(A),this.name="Signal",this.override=!0,this.output=this._constantSource=new ToneConstantSource({context:this.context,convert:A.convert,offset:A.value,units:A.units,minValue:A.minValue,maxValue:A.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{convert:!0,units:"number",value:0})}connect(A,_=0,I=0){return connectSignal(this,A,_,I),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(A,_){return this._param.setValueAtTime(A,_),this}getValueAtTime(A){return this._param.getValueAtTime(A)}setRampPoint(A){return this._param.setRampPoint(A),this}linearRampToValueAtTime(A,_){return this._param.linearRampToValueAtTime(A,_),this}exponentialRampToValueAtTime(A,_){return this._param.exponentialRampToValueAtTime(A,_),this}exponentialRampTo(A,_,I){return this._param.exponentialRampTo(A,_,I),this}linearRampTo(A,_,I){return this._param.linearRampTo(A,_,I),this}targetRampTo(A,_,I){return this._param.targetRampTo(A,_,I),this}exponentialApproachValueAtTime(A,_,I){return this._param.exponentialApproachValueAtTime(A,_,I),this}setTargetAtTime(A,_,I){return this._param.setTargetAtTime(A,_,I),this}setValueCurveAtTime(A,_,I,B){return this._param.setValueCurveAtTime(A,_,I,B),this}cancelScheduledValues(A){return this._param.cancelScheduledValues(A),this}cancelAndHoldAtTime(A){return this._param.cancelAndHoldAtTime(A),this}rampTo(A,_,I){return this._param.rampTo(A,_,I),this}get value(){return this._param.value}set value(A){this._param.value=A}get convert(){return this._param.convert}set convert(A){this._param.convert=A}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(A){this._param.overridden=A}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(A){return this._param.apply(A),this}}function connectSignal(E,A,_,I){(A instanceof Param||isAudioParam(A)||A instanceof Signal&&A.override)&&(A.cancelScheduledValues(0),A.setValueAtTime(0,0),A instanceof Signal&&(A.overridden=!0)),connect(E,A,_,I)}class TickParam extends Param{constructor(){const A=optionsFromArguments(TickParam.getDefaults(),arguments,["value"]);super(A),this.name="TickParam",this._events=new Timeline$1(1/0),this._multiplier=1,this._multiplier=A.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(A.value)}),this.setValueAtTime(A.value,0)}static getDefaults(){return Object.assign(Param.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(A,_,I){_=this.toSeconds(_),this.setRampPoint(_);const B=this._fromType(A),T=this._events.get(_),R=Math.round(Math.max(1/I,1));for(let P=0;P<=R;P++){const D=I*P+_,F=this._exponentialApproach(T.time,T.value,B,I,D);this.linearRampToValueAtTime(this._toType(F),D)}return this}setValueAtTime(A,_){const I=this.toSeconds(_);super.setValueAtTime(A,_);const B=this._events.get(I),T=this._events.previousEvent(B),R=this._getTicksUntilEvent(T,I);return B.ticks=Math.max(R,0),this}linearRampToValueAtTime(A,_){const I=this.toSeconds(_);super.linearRampToValueAtTime(A,_);const B=this._events.get(I),T=this._events.previousEvent(B),R=this._getTicksUntilEvent(T,I);return B.ticks=Math.max(R,0),this}exponentialRampToValueAtTime(A,_){_=this.toSeconds(_);const I=this._fromType(A),B=this._events.get(_),T=Math.round(Math.max((_-B.time)*10,1)),R=(_-B.time)/T;for(let P=0;P<=T;P++){const D=R*P+B.time,F=this._exponentialInterpolate(B.time,B.value,_,I,D);this.linearRampToValueAtTime(this._toType(F),D)}return this}_getTicksUntilEvent(A,_){if(A===null)A={ticks:0,time:0,type:"setValueAtTime",value:0};else if(isUndef(A.ticks)){const R=this._events.previousEvent(A);A.ticks=this._getTicksUntilEvent(R,A.time)}const I=this._fromType(this.getValueAtTime(A.time));let B=this._fromType(this.getValueAtTime(_));const T=this._events.get(_);return T&&T.time===_&&T.type==="setValueAtTime"&&(B=this._fromType(this.getValueAtTime(_-this.sampleTime))),.5*(_-A.time)*(I+B)+A.ticks}getTicksAtTime(A){const _=this.toSeconds(A),I=this._events.get(_);return Math.max(this._getTicksUntilEvent(I,_),0)}getDurationOfTicks(A,_){const I=this.toSeconds(_),B=this.getTicksAtTime(_);return this.getTimeOfTick(B+A)-I}getTimeOfTick(A){const _=this._events.get(A,"ticks"),I=this._events.getAfter(A,"ticks");if(_&&_.ticks===A)return _.time;if(_&&I&&I.type==="linearRampToValueAtTime"&&_.value!==I.value){const B=this._fromType(this.getValueAtTime(_.time)),R=(this._fromType(this.getValueAtTime(I.time))-B)/(I.time-_.time),P=Math.sqrt(Math.pow(B,2)-2*R*(_.ticks-A)),D=(-B+P)/R,F=(-B-P)/R;return(D>0?D:F)+_.time}else return _?_.value===0?1/0:_.time+(A-_.ticks)/_.value:A/this._initialValue}ticksToTime(A,_){return this.getDurationOfTicks(A,_)}timeToTicks(A,_){const I=this.toSeconds(_),B=this.toSeconds(A),T=this.getTicksAtTime(I);return this.getTicksAtTime(I+B)-T}_fromType(A){return this.units==="bpm"&&this.multiplier?1/(60/A/this.multiplier):super._fromType(A)}_toType(A){return this.units==="bpm"&&this.multiplier?A/this.multiplier*60:super._toType(A)}get multiplier(){return this._multiplier}set multiplier(A){const _=this.value;this._multiplier=A,this.cancelScheduledValues(0),this.setValueAtTime(_,0)}}class TickSignal extends Signal{constructor(){const A=optionsFromArguments(TickSignal.getDefaults(),arguments,["value"]);super(A),this.name="TickSignal",this.input=this._param=new TickParam({context:this.context,convert:A.convert,multiplier:A.multiplier,param:this._constantSource.offset,units:A.units,value:A.value})}static getDefaults(){return Object.assign(Signal.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(A,_){return this._param.ticksToTime(A,_)}timeToTicks(A,_){return this._param.timeToTicks(A,_)}getTimeOfTick(A){return this._param.getTimeOfTick(A)}getDurationOfTicks(A,_){return this._param.getDurationOfTicks(A,_)}getTicksAtTime(A){return this._param.getTicksAtTime(A)}get multiplier(){return this._param.multiplier}set multiplier(A){this._param.multiplier=A}dispose(){return super.dispose(),this._param.dispose(),this}}class TickSource extends ToneWithContext{constructor(){const A=optionsFromArguments(TickSource.getDefaults(),arguments,["frequency"]);super(A),this.name="TickSource",this._state=new StateTimeline,this._tickOffset=new Timeline$1,this._ticksAtTime=new Timeline$1,this._secondsAtTime=new Timeline$1,this.frequency=new TickSignal({context:this.context,units:A.units,value:A.frequency}),readOnly(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},ToneWithContext.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(A,_){const I=this.toSeconds(A);return this._state.getValueAtTime(I)!=="started"&&(this._state.setStateAtTime("started",I),isDefined(_)&&this.setTicksAtTime(_,I),this._ticksAtTime.cancel(I),this._secondsAtTime.cancel(I)),this}stop(A){const _=this.toSeconds(A);if(this._state.getValueAtTime(_)==="stopped"){const I=this._state.get(_);I&&I.time>0&&(this._tickOffset.cancel(I.time),this._state.cancel(I.time))}return this._state.cancel(_),this._state.setStateAtTime("stopped",_),this.setTicksAtTime(0,_),this._ticksAtTime.cancel(_),this._secondsAtTime.cancel(_),this}pause(A){const _=this.toSeconds(A);return this._state.getValueAtTime(_)==="started"&&(this._state.setStateAtTime("paused",_),this._ticksAtTime.cancel(_),this._secondsAtTime.cancel(_)),this}cancel(A){return A=this.toSeconds(A),this._state.cancel(A),this._tickOffset.cancel(A),this._ticksAtTime.cancel(A),this._secondsAtTime.cancel(A),this}getTicksAtTime(A){const _=this.toSeconds(A),I=this._state.getLastState("stopped",_),B=this._ticksAtTime.get(_),T={state:"paused",time:_};this._state.add(T);let R=B||I,P=B?B.ticks:0,D=null;return this._state.forEachBetween(R.time,_+this.sampleTime,F=>{let L=R.time;const U=this._tickOffset.get(F.time);U&&U.time>=R.time&&(P=U.ticks,L=U.time),R.state==="started"&&F.state!=="started"&&(P+=this.frequency.getTicksAtTime(F.time)-this.frequency.getTicksAtTime(L),F.time!==T.time&&(D={state:F.state,time:F.time,ticks:P})),R=F}),this._state.remove(T),D&&this._ticksAtTime.add(D),P}get ticks(){return this.getTicksAtTime(this.now())}set ticks(A){this.setTicksAtTime(A,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(A){const _=this.now(),I=this.frequency.timeToTicks(A,_);this.setTicksAtTime(I,_)}getSecondsAtTime(A){A=this.toSeconds(A);const _=this._state.getLastState("stopped",A),I={state:"paused",time:A};this._state.add(I);const B=this._secondsAtTime.get(A);let T=B||_,R=B?B.seconds:0,P=null;return this._state.forEachBetween(T.time,A+this.sampleTime,D=>{let F=T.time;const L=this._tickOffset.get(D.time);L&&L.time>=T.time&&(R=L.seconds,F=L.time),T.state==="started"&&D.state!=="started"&&(R+=D.time-F,D.time!==I.time&&(P={state:D.state,time:D.time,seconds:R})),T=D}),this._state.remove(I),P&&this._secondsAtTime.add(P),R}setTicksAtTime(A,_){return _=this.toSeconds(_),this._tickOffset.cancel(_),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(A,_),ticks:A,time:_}),this._ticksAtTime.cancel(_),this._secondsAtTime.cancel(_),this}getStateAtTime(A){return A=this.toSeconds(A),this._state.getValueAtTime(A)}getTimeOfTick(A,_=this.now()){const I=this._tickOffset.get(_),B=this._state.get(_),T=Math.max(I.time,B.time),R=this.frequency.getTicksAtTime(T)+A-I.ticks;return this.frequency.getTimeOfTick(R)}forEachTickBetween(A,_,I){let B=this._state.get(A);this._state.forEachBetween(A,_,R=>{B&&B.state==="started"&&R.state!=="started"&&this.forEachTickBetween(Math.max(B.time,A),R.time-this.sampleTime,I),B=R});let T=null;if(B&&B.state==="started"){const R=Math.max(B.time,A),P=this.frequency.getTicksAtTime(R),D=this.frequency.getTicksAtTime(B.time),F=P-D;let L=Math.ceil(F)-F;L=EQ(L,1)?0:L;let U=this.frequency.getTimeOfTick(P+L);for(;U<_;){try{I(U,Math.round(this.getTicksAtTime(U)))}catch(V){T=V;break}U+=this.frequency.getDurationOfTicks(1,U)}}if(T)throw T;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class Clock extends ToneWithContext{constructor(){const A=optionsFromArguments(Clock.getDefaults(),arguments,["callback","frequency"]);super(A),this.name="Clock",this.callback=noOp,this._lastUpdate=0,this._state=new StateTimeline("stopped"),this._boundLoop=this._loop.bind(this),this.callback=A.callback,this._tickSource=new TickSource({context:this.context,frequency:A.frequency,units:A.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,readOnly(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(ToneWithContext.getDefaults(),{callback:noOp,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(A,_){assertContextRunning(this.context);const I=this.toSeconds(A);return this.log("start",I),this._state.getValueAtTime(I)!=="started"&&(this._state.setStateAtTime("started",I),this._tickSource.start(I,_),I<this._lastUpdate&&this.emit("start",I,_)),this}stop(A){const _=this.toSeconds(A);return this.log("stop",_),this._state.cancel(_),this._state.setStateAtTime("stopped",_),this._tickSource.stop(_),_<this._lastUpdate&&this.emit("stop",_),this}pause(A){const _=this.toSeconds(A);return this._state.getValueAtTime(_)==="started"&&(this._state.setStateAtTime("paused",_),this._tickSource.pause(_),_<this._lastUpdate&&this.emit("pause",_)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(A){this._tickSource.ticks=A}get seconds(){return this._tickSource.seconds}set seconds(A){this._tickSource.seconds=A}getSecondsAtTime(A){return this._tickSource.getSecondsAtTime(A)}setTicksAtTime(A,_){return this._tickSource.setTicksAtTime(A,_),this}getTimeOfTick(A,_=this.now()){return this._tickSource.getTimeOfTick(A,_)}getTicksAtTime(A){return this._tickSource.getTicksAtTime(A)}nextTickTime(A,_){const I=this.toSeconds(_),B=this.getTicksAtTime(I);return this._tickSource.getTimeOfTick(B+A,I)}_loop(){const A=this._lastUpdate,_=this.now();this._lastUpdate=_,this.log("loop",A,_),A!==_&&(this._state.forEachBetween(A,_,I=>{switch(I.state){case"started":const B=this._tickSource.getTicksAtTime(I.time);this.emit("start",I.time,B);break;case"stopped":I.time!==0&&this.emit("stop",I.time);break;case"paused":this.emit("pause",I.time);break}}),this._tickSource.forEachTickBetween(A,_,(I,B)=>{this.callback(I,B)}))}getStateAtTime(A){const _=this.toSeconds(A);return this._state.getValueAtTime(_)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Emitter.mixin(Clock);class Volume extends ToneAudioNode{constructor(){const A=optionsFromArguments(Volume.getDefaults(),arguments,["volume"]);super(A),this.name="Volume",this.input=this.output=new Gain({context:this.context,gain:A.volume,units:"decibels"}),this.volume=this.output.gain,readOnly(this,"volume"),this._unmutedVolume=A.volume,this.mute=A.mute}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(A){!this.mute&&A?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!A&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class DestinationClass extends ToneAudioNode{constructor(){const A=optionsFromArguments(DestinationClass.getDefaults(),arguments);super(A),this.name="Destination",this.input=new Volume({context:this.context}),this.output=new Gain({context:this.context}),this.volume=this.input.volume,connectSeries(this.input,this.output,this.context.rawContext.destination),this.mute=A.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(A){this.input.mute=A}chain(...A){return this.input.disconnect(),A.unshift(this.input),A.push(this.output),connectSeries(...A),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}onContextInit(E=>{E.destination=new DestinationClass({context:E})});onContextClose(E=>{E.destination.dispose()});class ListenerClass extends ToneAudioNode{constructor(){super(...arguments),this.name="Listener",this.positionX=new Param({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Param({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Param({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Param({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Param({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Param({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Param({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Param({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Param({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}onContextInit(E=>{E.listener=new ListenerClass({context:E})});onContextClose(E=>{E.listener.dispose()});class ToneAudioBuffers extends Tone{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const A=optionsFromArguments(ToneAudioBuffers.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=A.baseUrl,Object.keys(A.urls).forEach(_=>{this._loadingCount++;const I=A.urls[_];this.add(_,I,this._bufferLoaded.bind(this,A.onload),A.onerror)})}static getDefaults(){return{baseUrl:"",onerror:noOp,onload:noOp,urls:{}}}has(A){return this._buffers.has(A.toString())}get(A){return assert$1(this.has(A),`ToneAudioBuffers has no buffer named: ${A}`),this._buffers.get(A.toString())}_bufferLoaded(A){this._loadingCount--,this._loadingCount===0&&A&&A()}get loaded(){return Array.from(this._buffers).every(([A,_])=>_.loaded)}add(A,_,I=noOp,B=noOp){return isString(_)?(this.baseUrl&&_.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(A.toString(),new ToneAudioBuffer(this.baseUrl+_,I,B))):this._buffers.set(A.toString(),new ToneAudioBuffer(_,I,B)),this}dispose(){return super.dispose(),this._buffers.forEach(A=>A.dispose()),this._buffers.clear(),this}}class TicksClass extends TransportTimeClass{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(A){return this._getPPQ()*A}_secondsToUnits(A){return Math.floor(A/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(A){return A}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class DrawClass extends ToneWithContext{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Timeline$1,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(A,_){return this._events.add({callback:A,time:this.toSeconds(_)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(A){return this._events.cancel(this.toSeconds(A)),this}_drawLoop(){const A=this.context.currentTime;this._events.forEachBefore(A+this.anticipation,_=>{A-_.time<=this.expiration&&_.callback(),this._events.remove(_)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}onContextInit(E=>{E.draw=new DrawClass({context:E})});onContextClose(E=>{E.draw.dispose()});class IntervalTimeline extends Tone{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(A){assert$1(isDefined(A.time),"Events must have a time property"),assert$1(isDefined(A.duration),"Events must have a duration parameter"),A.time=A.time.valueOf();let _=new IntervalNode(A.time,A.time+A.duration,A);for(this._root===null?this._root=_:this._root.insert(_),this._length++;_!==null;)_.updateHeight(),_.updateMax(),this._rebalance(_),_=_.parent;return this}remove(A){if(this._root!==null){const _=[];this._root.search(A.time,_);for(const I of _)if(I.event===A){this._removeNode(I),this._length--;break}}return this}get length(){return this._length}cancel(A){return this.forEachFrom(A,_=>this.remove(_)),this}_setRoot(A){this._root=A,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(A,_){A.parent!==null?(A.isLeftChild()?A.parent.left=_:A.parent.right=_,this._rebalance(A.parent)):this._setRoot(_)}_removeNode(A){if(A.left===null&&A.right===null)this._replaceNodeInParent(A,null);else if(A.right===null)this._replaceNodeInParent(A,A.left);else if(A.left===null)this._replaceNodeInParent(A,A.right);else{const _=A.getBalance();let I,B=null;if(_>0)if(A.left.right===null)I=A.left,I.right=A.right,B=I;else{for(I=A.left.right;I.right!==null;)I=I.right;I.parent&&(I.parent.right=I.left,B=I.parent,I.left=A.left,I.right=A.right)}else if(A.right.left===null)I=A.right,I.left=A.left,B=I;else{for(I=A.right.left;I.left!==null;)I=I.left;I.parent&&(I.parent.left=I.right,B=I.parent,I.left=A.left,I.right=A.right)}A.parent!==null?A.isLeftChild()?A.parent.left=I:A.parent.right=I:this._setRoot(I),B&&this._rebalance(B)}A.dispose()}_rotateLeft(A){const _=A.parent,I=A.isLeftChild(),B=A.right;B&&(A.right=B.left,B.left=A),_!==null?I?_.left=B:_.right=B:this._setRoot(B)}_rotateRight(A){const _=A.parent,I=A.isLeftChild(),B=A.left;B&&(A.left=B.right,B.right=A),_!==null?I?_.left=B:_.right=B:this._setRoot(B)}_rebalance(A){const _=A.getBalance();_>1&&A.left?A.left.getBalance()<0?this._rotateLeft(A.left):this._rotateRight(A):_<-1&&A.right&&(A.right.getBalance()>0?this._rotateRight(A.right):this._rotateLeft(A))}get(A){if(this._root!==null){const _=[];if(this._root.search(A,_),_.length>0){let I=_[0];for(let B=1;B<_.length;B++)_[B].low>I.low&&(I=_[B]);return I.event}}return null}forEach(A){if(this._root!==null){const _=[];this._root.traverse(I=>_.push(I)),_.forEach(I=>{I.event&&A(I.event)})}return this}forEachAtTime(A,_){if(this._root!==null){const I=[];this._root.search(A,I),I.forEach(B=>{B.event&&_(B.event)})}return this}forEachFrom(A,_){if(this._root!==null){const I=[];this._root.searchAfter(A,I),I.forEach(B=>{B.event&&_(B.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(A=>A.dispose()),this._root=null,this}}class IntervalNode{constructor(A,_,I){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=I,this.low=A,this.high=_,this.max=this.high}insert(A){A.low<=this.low?this.left===null?this.left=A:this.left.insert(A):this.right===null?this.right=A:this.right.insert(A)}search(A,_){A>this.max||(this.left!==null&&this.left.search(A,_),this.low<=A&&this.high>A&&_.push(this),!(this.low>A)&&this.right!==null&&this.right.search(A,_))}searchAfter(A,_){this.low>=A&&(_.push(this),this.left!==null&&this.left.searchAfter(A,_)),this.right!==null&&this.right.searchAfter(A,_)}traverse(A){A(this),this.left!==null&&this.left.traverse(A),this.right!==null&&this.right.traverse(A)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let A=0;return this.left!==null&&this.right!==null?A=this.left.height-this.right.height:this.left!==null?A=this.left.height+1:this.right!==null&&(A=-(this.right.height+1)),A}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(A){this._left=A,A!==null&&(A.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(A){this._right=A,A!==null&&(A.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class TimelineValue extends Tone{constructor(A){super(),this.name="TimelineValue",this._timeline=new Timeline$1({memory:10}),this._initialValue=A}set(A,_){return this._timeline.add({value:A,time:_}),this}get(A){const _=this._timeline.get(A);return _?_.value:this._initialValue}}class SignalOperator extends ToneAudioNode{constructor(){super(optionsFromArguments(SignalOperator.getDefaults(),arguments,["context"]))}connect(A,_=0,I=0){return connectSignal(this,A,_,I),this}}class WaveShaper extends SignalOperator{constructor(){const A=optionsFromArguments(WaveShaper.getDefaults(),arguments,["mapping","length"]);super(A),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,isArray(A.mapping)||A.mapping instanceof Float32Array?this.curve=Float32Array.from(A.mapping):isFunction(A.mapping)&&this.setMap(A.mapping,A.length)}static getDefaults(){return Object.assign(Signal.getDefaults(),{length:1024})}setMap(A,_=1024){const I=new Float32Array(_);for(let B=0,T=_;B<T;B++){const R=B/(T-1)*2-1;I[B]=A(R,B)}return this.curve=I,this}get curve(){return this._shaper.curve}set curve(A){this._shaper.curve=A}get oversample(){return this._shaper.oversample}set oversample(A){const _=["none","2x","4x"].some(I=>I.includes(A));assert$1(_,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=A}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Pow extends SignalOperator{constructor(){const A=optionsFromArguments(Pow.getDefaults(),arguments,["value"]);super(A),this.name="Pow",this._exponentScaler=this.input=this.output=new WaveShaper({context:this.context,mapping:this._expFunc(A.value),length:8192}),this._exponent=A.value}static getDefaults(){return Object.assign(SignalOperator.getDefaults(),{value:1})}_expFunc(A){return _=>Math.pow(Math.abs(_),A)}get value(){return this._exponent}set value(A){this._exponent=A,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class TransportEvent{constructor(A,_){this.id=TransportEvent._eventId++,this._remainderTime=0;const I=Object.assign(TransportEvent.getDefaults(),_);this.transport=A,this.callback=I.callback,this._once=I.once,this.time=Math.floor(I.time),this._remainderTime=I.time-this.time}static getDefaults(){return{callback:noOp,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(A){if(this.callback){const _=this.transport.bpm.getDurationOfTicks(1,A);this.callback(A+this._remainderTime*_),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}TransportEvent._eventId=0;class TransportRepeatEvent extends TransportEvent{constructor(A,_){super(A,_),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const I=Object.assign(TransportRepeatEvent.getDefaults(),_);this.duration=I.duration,this._interval=I.interval,this._nextTick=I.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},TransportEvent.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(A){this._createEvents(A),super.invoke(A)}_createEvent(){return LT(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new TicksClass(this.context,this._nextTick).toSeconds()):-1}_createEvents(A){LT(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new TicksClass(this.context,this._nextTick).toSeconds()))}_restart(A){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const _=this.transport.getTicksAtTime(A);GT(_,this.time)&&(this._nextTick=this.floatTime+Math.ceil((_-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class TransportClass extends ToneWithContext{constructor(){const A=optionsFromArguments(TransportClass.getDefaults(),arguments);super(A),this.name="Transport",this._loop=new TimelineValue(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Timeline$1,this._repeatedEvents=new IntervalTimeline,this._syncedSignals=[],this._swingAmount=0,this._ppq=A.ppq,this._clock=new Clock({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=A.ppq,this.bpm.setValueAtTime(A.bpm,0),readOnly(this,"bpm"),this._timeSignature=A.timeSignature,this._swingTicks=A.ppq/2}static getDefaults(){return Object.assign(ToneWithContext.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(A,_){if(this._loop.get(A)&&_>=this._loopEnd&&(this.emit("loopEnd",A),this._clock.setTicksAtTime(this._loopStart,A),_=this._loopStart,this.emit("loopStart",A,this._clock.getSecondsAtTime(A)),this.emit("loop",A)),this._swingAmount>0&&_%this._ppq!==0&&_%(this._swingTicks*2)!==0){const I=_%(this._swingTicks*2)/(this._swingTicks*2),B=Math.sin(I*Math.PI)*this._swingAmount;A+=new TicksClass(this.context,this._swingTicks*2/3).toSeconds()*B}enterScheduledCallback(!0),this._timeline.forEachAtTime(_,I=>I.invoke(A)),enterScheduledCallback(!1)}schedule(A,_){const I=new TransportEvent(this,{callback:A,time:new TransportTimeClass(this.context,_).toTicks()});return this._addEvent(I,this._timeline)}scheduleRepeat(A,_,I,B=1/0){const T=new TransportRepeatEvent(this,{callback:A,duration:new TimeClass(this.context,B).toTicks(),interval:new TimeClass(this.context,_).toTicks(),time:new TransportTimeClass(this.context,I).toTicks()});return this._addEvent(T,this._repeatedEvents)}scheduleOnce(A,_){const I=new TransportEvent(this,{callback:A,once:!0,time:new TransportTimeClass(this.context,_).toTicks()});return this._addEvent(I,this._timeline)}clear(A){if(this._scheduledEvents.hasOwnProperty(A)){const _=this._scheduledEvents[A.toString()];_.timeline.remove(_.event),_.event.dispose(),delete this._scheduledEvents[A.toString()]}return this}_addEvent(A,_){return this._scheduledEvents[A.id.toString()]={event:A,timeline:_},_.add(A),A.id}cancel(A=0){const _=this.toTicks(A);return this._timeline.forEachFrom(_,I=>this.clear(I.id)),this._repeatedEvents.forEachFrom(_,I=>this.clear(I.id)),this}_bindClockEvents(){this._clock.on("start",(A,_)=>{_=new TicksClass(this.context,_).toSeconds(),this.emit("start",A,_)}),this._clock.on("stop",A=>{this.emit("stop",A)}),this._clock.on("pause",A=>{this.emit("pause",A)})}get state(){return this._clock.getStateAtTime(this.now())}start(A,_){this.context.resume();let I;return isDefined(_)&&(I=this.toTicks(_)),this._clock.start(A,I),this}stop(A){return this._clock.stop(A),this}pause(A){return this._clock.pause(A),this}toggle(A){return A=this.toSeconds(A),this._clock.getStateAtTime(A)!=="started"?this.start(A):this.stop(A),this}get timeSignature(){return this._timeSignature}set timeSignature(A){isArray(A)&&(A=A[0]/A[1]*4),this._timeSignature=A}get loopStart(){return new TimeClass(this.context,this._loopStart,"i").toSeconds()}set loopStart(A){this._loopStart=this.toTicks(A)}get loopEnd(){return new TimeClass(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(A){this._loopEnd=this.toTicks(A)}get loop(){return this._loop.get(this.now())}set loop(A){this._loop.set(A,this.now())}setLoopPoints(A,_){return this.loopStart=A,this.loopEnd=_,this}get swing(){return this._swingAmount}set swing(A){this._swingAmount=A}get swingSubdivision(){return new TicksClass(this.context,this._swingTicks).toNotation()}set swingSubdivision(A){this._swingTicks=this.toTicks(A)}get position(){const A=this.now(),_=this._clock.getTicksAtTime(A);return new TicksClass(this.context,_).toBarsBeatsSixteenths()}set position(A){const _=this.toTicks(A);this.ticks=_}get seconds(){return this._clock.seconds}set seconds(A){const _=this.now(),I=this._clock.frequency.timeToTicks(A,_);this.ticks=I}get progress(){if(this.loop){const A=this.now();return(this._clock.getTicksAtTime(A)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(A){if(this._clock.ticks!==A){const _=this.now();if(this.state==="started"){const I=this._clock.getTicksAtTime(_),B=this._clock.frequency.getDurationOfTicks(Math.ceil(I)-I,_),T=_+B;this.emit("stop",T),this._clock.setTicksAtTime(A,T),this.emit("start",T,this._clock.getSecondsAtTime(T))}else this.emit("ticks",_),this._clock.setTicksAtTime(A,_)}}getTicksAtTime(A){return this._clock.getTicksAtTime(A)}getSecondsAtTime(A){return this._clock.getSecondsAtTime(A)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(A){this._clock.frequency.multiplier=A}nextSubdivision(A){if(A=this.toTicks(A),this.state!=="started")return 0;{const _=this.now(),I=this.getTicksAtTime(_),B=A-I%A;return this._clock.nextTickTime(B,_)}}syncSignal(A,_){const I=this.now();let B=this.bpm,T=1/(60/B.getValueAtTime(I)/this.PPQ),R=[];if(A.units==="time"){const D=.015625/T,F=new Gain(D),L=new Pow(-1),U=new Gain(D);B.chain(F,L,U),B=U,T=1/T,R=[F,L,U]}_||(A.getValueAtTime(I)!==0?_=A.getValueAtTime(I)/T:_=0);const P=new Gain(_);return B.connect(P),P.connect(A._param),R.push(P),this._syncedSignals.push({initial:A.value,nodes:R,signal:A}),A.value=0,this}unsyncSignal(A){for(let _=this._syncedSignals.length-1;_>=0;_--){const I=this._syncedSignals[_];I.signal===A&&(I.nodes.forEach(B=>B.dispose()),I.signal.value=I.initial,this._syncedSignals.splice(_,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),writable(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Emitter.mixin(TransportClass);onContextInit(E=>{E.transport=new TransportClass({context:E})});onContextClose(E=>{E.transport.dispose()});class Source extends ToneAudioNode{constructor(A){super(A),this.input=void 0,this._state=new StateTimeline("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=noOp,this._syncedStop=noOp,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Volume({context:this.context,mute:A.mute,volume:A.volume}),this.volume=this._volume.volume,readOnly(this,"volume"),this.onstop=A.onstop}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,onstop:noOp,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(A){this._volume.mute=A}_clampToCurrentTime(A){return this._synced?A:Math.max(A,this.context.currentTime)}start(A,_,I){let B=isUndef(A)&&this._synced?this.context.transport.seconds:this.toSeconds(A);if(B=this._clampToCurrentTime(B),!this._synced&&this._state.getValueAtTime(B)==="started")assert$1(GT(B,this._state.get(B).time),"Start time must be strictly greater than previous start time"),this._state.cancel(B),this._state.setStateAtTime("started",B),this.log("restart",B),this.restart(B,_,I);else if(this.log("start",B),this._state.setStateAtTime("started",B),this._synced){const T=this._state.get(B);T&&(T.offset=this.toSeconds(defaultArg(_,0)),T.duration=I?this.toSeconds(I):void 0);const R=this.context.transport.schedule(P=>{this._start(P,_,I)},B);this._scheduled.push(R),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>B&&this._syncedStart(this.now(),this.context.transport.seconds)}else assertContextRunning(this.context),this._start(B,_,I);return this}stop(A){let _=isUndef(A)&&this._synced?this.context.transport.seconds:this.toSeconds(A);if(_=this._clampToCurrentTime(_),this._state.getValueAtTime(_)==="started"||isDefined(this._state.getNextState("started",_))){if(this.log("stop",_),!this._synced)this._stop(_);else{const I=this.context.transport.schedule(this._stop.bind(this),_);this._scheduled.push(I)}this._state.cancel(_),this._state.setStateAtTime("stopped",_)}return this}restart(A,_,I){return A=this.toSeconds(A),this._state.getValueAtTime(A)==="started"&&(this._state.cancel(A),this._restart(A,_,I)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(A,_)=>{if(GT(_,0)){const I=this._state.get(_);if(I&&I.state==="started"&&I.time!==_){const B=_-this.toSeconds(I.time);let T;I.duration&&(T=this.toSeconds(I.duration)-B),this._start(A,this.toSeconds(I.offset)+B,T)}}},this._syncedStop=A=>{const _=this.context.transport.getSecondsAtTime(Math.max(A-this.sampleTime,0));this._state.getValueAtTime(_)==="started"&&this._stop(A)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(A=>this.context.transport.clear(A)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=noOp,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class ToneBufferSource extends OneShotSource{constructor(){const A=optionsFromArguments(ToneBufferSource.getDefaults(),arguments,["url","onload"]);super(A),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,connect(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Param({context:this.context,param:this._source.playbackRate,units:"positive",value:A.playbackRate}),this.loop=A.loop,this.loopStart=A.loopStart,this.loopEnd=A.loopEnd,this._buffer=new ToneAudioBuffer(A.url,A.onload,A.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(OneShotSource.getDefaults(),{url:new ToneAudioBuffer,loop:!1,loopEnd:0,loopStart:0,onload:noOp,onerror:noOp,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(A){this._fadeIn=A}get fadeOut(){return this._fadeOut}set fadeOut(A){this._fadeOut=A}get curve(){return this._curve}set curve(A){this._curve=A}start(A,_,I,B=1){assert$1(this.buffer.loaded,"buffer is either not set or not loaded");const T=this.toSeconds(A);this._startGain(T,B),this.loop?_=defaultArg(_,this.loopStart):_=defaultArg(_,0);let R=Math.max(this.toSeconds(_),0);if(this.loop){const P=this.toSeconds(this.loopEnd)||this.buffer.duration,D=this.toSeconds(this.loopStart),F=P-D;GTE(R,P)&&(R=(R-D)%F+D),EQ(R,this.buffer.duration)&&(R=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,LT(R,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(T,R)),isDefined(I)){let P=this.toSeconds(I);P=Math.max(P,0),this.stop(T+P)}return this}_stopSource(A){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(A)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(A){this._source.loopStart=this.toSeconds(A)}get loopEnd(){return this._source.loopEnd}set loopEnd(A){this._source.loopEnd=this.toSeconds(A)}get buffer(){return this._buffer}set buffer(A){this._buffer.set(A)}get loop(){return this._source.loop}set loop(A){this._source.loop=A,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function generateWaveform(E,A){return __awaiter(this,void 0,void 0,function*(){const _=A/E.context.sampleRate,I=new OfflineContext(1,_,E.context.sampleRate);return new E.constructor(Object.assign(E.get(),{frequency:2/_,detune:0,context:I})).toDestination().start(0),(yield I.render()).getChannelData(0)})}class ToneOscillatorNode extends OneShotSource{constructor(){const A=optionsFromArguments(ToneOscillatorNode.getDefaults(),arguments,["frequency","type"]);super(A),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],connect(this._oscillator,this._gainNode),this.type=A.type,this.frequency=new Param({context:this.context,param:this._oscillator.frequency,units:"frequency",value:A.frequency}),this.detune=new Param({context:this.context,param:this._oscillator.detune,units:"cents",value:A.detune}),readOnly(this,["frequency","detune"])}static getDefaults(){return Object.assign(OneShotSource.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(A){const _=this.toSeconds(A);return this.log("start",_),this._startGain(_),this._oscillator.start(_),this}_stopSource(A){this._oscillator.stop(A)}setPeriodicWave(A){return this._oscillator.setPeriodicWave(A),this}get type(){return this._oscillator.type}set type(A){this._oscillator.type=A}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Oscillator extends Source{constructor(){const A=optionsFromArguments(Oscillator.getDefaults(),arguments,["frequency","type"]);super(A),this.name="Oscillator",this._oscillator=null,this.frequency=new Signal({context:this.context,units:"frequency",value:A.frequency}),readOnly(this,"frequency"),this.detune=new Signal({context:this.context,units:"cents",value:A.detune}),readOnly(this,"detune"),this._partials=A.partials,this._partialCount=A.partialCount,this._type=A.type,A.partialCount&&A.type!=="custom"&&(this._type=this.baseType+A.partialCount.toString()),this.phase=A.phase}static getDefaults(){return Object.assign(Source.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(A){const _=this.toSeconds(A),I=new ToneOscillatorNode({context:this.context,onended:()=>this.onstop(this)});this._oscillator=I,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(_)}_stop(A){const _=this.toSeconds(A);this._oscillator&&this._oscillator.stop(_)}_restart(A){const _=this.toSeconds(A);return this.log("restart",_),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(_),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return Oscillator._periodicWaveCache.find(_=>_.phase===this._phase&&deepEquals(_.partials,this._partials));{const A=Oscillator._periodicWaveCache.find(_=>_.type===this._type&&_.phase===this._phase);return this._partialCount=A?A.partialCount:this._partialCount,A}}get type(){return this._type}set type(A){this._type=A;const _=["sine","square","sawtooth","triangle"].indexOf(A)!==-1;if(this._phase===0&&_)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=A);else{const I=this._getCachedPeriodicWave();if(isDefined(I)){const{partials:B,wave:T}=I;this._wave=T,this._partials=B,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[B,T]=this._getRealImaginary(A,this._phase),R=this.context.createPeriodicWave(B,T);this._wave=R,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),Oscillator._periodicWaveCache.push({imag:T,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:B,type:this._type,wave:this._wave}),Oscillator._periodicWaveCache.length>100&&Oscillator._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(A){this.partialCount&&this._type!=="custom"&&A!=="custom"?this.type=A+this.partialCount:this.type=A}get partialCount(){return this._partialCount}set partialCount(A){assertRange(A,0);let _=this._type;const I=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(I&&(_=I[1]),this._type!=="custom")A===0?this.type=_:this.type=_+A.toString();else{const B=new Float32Array(A);this._partials.forEach((T,R)=>B[R]=T),this._partials=Array.from(B),this.type=this._type}}_getRealImaginary(A,_){let B=2048;const T=new Float32Array(B),R=new Float32Array(B);let P=1;if(A==="custom"){if(P=this._partials.length+1,this._partialCount=this._partials.length,B=P,this._partials.length===0)return[T,R]}else{const D=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(A);D?(P=parseInt(D[2],10)+1,this._partialCount=parseInt(D[2],10),A=D[1],P=Math.max(P,2),B=P):this._partialCount=0,this._partials=[]}for(let D=1;D<B;++D){const F=2/(D*Math.PI);let L;switch(A){case"sine":L=D<=P?1:0,this._partials[D-1]=L;break;case"square":L=D&1?2*F:0,this._partials[D-1]=L;break;case"sawtooth":L=F*(D&1?1:-1),this._partials[D-1]=L;break;case"triangle":D&1?L=2*(F*F)*(D-1>>1&1?-1:1):L=0,this._partials[D-1]=L;break;case"custom":L=this._partials[D-1];break;default:throw new TypeError("Oscillator: invalid type: "+A)}L!==0?(T[D]=-L*Math.sin(_*D),R[D]=L*Math.cos(_*D)):(T[D]=0,R[D]=0)}return[T,R]}_inverseFFT(A,_,I){let B=0;const T=A.length;for(let R=0;R<T;R++)B+=A[R]*Math.cos(R*I)+_[R]*Math.sin(R*I);return B}getInitialValue(){const[A,_]=this._getRealImaginary(this._type,0);let I=0;const B=Math.PI*2,T=32;for(let R=0;R<T;R++)I=Math.max(this._inverseFFT(A,_,R/T*B),I);return clamp$1(-this._inverseFFT(A,_,this._phase)/I,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(A){this._partials=A,this._partialCount=this._partials.length,A.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(A){this._phase=A*Math.PI/180,this.type=this._type}asArray(){return __awaiter(this,arguments,void 0,function*(A=1024){return generateWaveform(this,A)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Oscillator._periodicWaveCache=[];class AudioToGain extends SignalOperator{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new WaveShaper({context:this.context,mapping:A=>(A+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Multiply extends Signal{constructor(){const A=optionsFromArguments(Multiply.getDefaults(),arguments,["value"]);super(A),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new Gain({context:this.context,minValue:A.minValue,maxValue:A.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(A.value,0)}static getDefaults(){return Object.assign(Signal.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class AMOscillator extends Source{constructor(){const A=optionsFromArguments(AMOscillator.getDefaults(),arguments,["frequency","type","modulationType"]);super(A),this.name="AMOscillator",this._modulationScale=new AudioToGain({context:this.context}),this._modulationNode=new Gain({context:this.context}),this._carrier=new Oscillator({context:this.context,detune:A.detune,frequency:A.frequency,onstop:()=>this.onstop(this),phase:A.phase,type:A.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Oscillator({context:this.context,phase:A.phase,type:A.modulationType}),this.harmonicity=new Multiply({context:this.context,units:"positive",value:A.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),readOnly(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Oscillator.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(A){this._modulator.start(A),this._carrier.start(A)}_stop(A){this._modulator.stop(A),this._carrier.stop(A)}_restart(A){this._modulator.restart(A),this._carrier.restart(A)}get type(){return this._carrier.type}set type(A){this._carrier.type=A}get baseType(){return this._carrier.baseType}set baseType(A){this._carrier.baseType=A}get partialCount(){return this._carrier.partialCount}set partialCount(A){this._carrier.partialCount=A}get modulationType(){return this._modulator.type}set modulationType(A){this._modulator.type=A}get phase(){return this._carrier.phase}set phase(A){this._carrier.phase=A,this._modulator.phase=A}get partials(){return this._carrier.partials}set partials(A){this._carrier.partials=A}asArray(){return __awaiter(this,arguments,void 0,function*(A=1024){return generateWaveform(this,A)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class FMOscillator extends Source{constructor(){const A=optionsFromArguments(FMOscillator.getDefaults(),arguments,["frequency","type","modulationType"]);super(A),this.name="FMOscillator",this._modulationNode=new Gain({context:this.context,gain:0}),this._carrier=new Oscillator({context:this.context,detune:A.detune,frequency:0,onstop:()=>this.onstop(this),phase:A.phase,type:A.type}),this.detune=this._carrier.detune,this.frequency=new Signal({context:this.context,units:"frequency",value:A.frequency}),this._modulator=new Oscillator({context:this.context,phase:A.phase,type:A.modulationType}),this.harmonicity=new Multiply({context:this.context,units:"positive",value:A.harmonicity}),this.modulationIndex=new Multiply({context:this.context,units:"positive",value:A.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),readOnly(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Oscillator.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(A){this._modulator.start(A),this._carrier.start(A)}_stop(A){this._modulator.stop(A),this._carrier.stop(A)}_restart(A){return this._modulator.restart(A),this._carrier.restart(A),this}get type(){return this._carrier.type}set type(A){this._carrier.type=A}get baseType(){return this._carrier.baseType}set baseType(A){this._carrier.baseType=A}get partialCount(){return this._carrier.partialCount}set partialCount(A){this._carrier.partialCount=A}get modulationType(){return this._modulator.type}set modulationType(A){this._modulator.type=A}get phase(){return this._carrier.phase}set phase(A){this._carrier.phase=A,this._modulator.phase=A}get partials(){return this._carrier.partials}set partials(A){this._carrier.partials=A}asArray(){return __awaiter(this,arguments,void 0,function*(A=1024){return generateWaveform(this,A)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class PulseOscillator extends Source{constructor(){const A=optionsFromArguments(PulseOscillator.getDefaults(),arguments,["frequency","width"]);super(A),this.name="PulseOscillator",this._widthGate=new Gain({context:this.context,gain:0}),this._thresh=new WaveShaper({context:this.context,mapping:_=>_<=0?-1:1}),this.width=new Signal({context:this.context,units:"audioRange",value:A.width}),this._triangle=new Oscillator({context:this.context,detune:A.detune,frequency:A.frequency,onstop:()=>this.onstop(this),phase:A.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),readOnly(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Source.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(A){A=this.toSeconds(A),this._triangle.start(A),this._widthGate.gain.setValueAtTime(1,A)}_stop(A){A=this.toSeconds(A),this._triangle.stop(A),this._widthGate.gain.cancelScheduledValues(A),this._widthGate.gain.setValueAtTime(0,A)}_restart(A){this._triangle.restart(A),this._widthGate.gain.cancelScheduledValues(A),this._widthGate.gain.setValueAtTime(1,A)}get phase(){return this._triangle.phase}set phase(A){this._triangle.phase=A}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(A){this._triangle.type=A}asArray(){return __awaiter(this,arguments,void 0,function*(A=1024){return generateWaveform(this,A)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class FatOscillator extends Source{constructor(){const A=optionsFromArguments(FatOscillator.getDefaults(),arguments,["frequency","type","spread"]);super(A),this.name="FatOscillator",this._oscillators=[],this.frequency=new Signal({context:this.context,units:"frequency",value:A.frequency}),this.detune=new Signal({context:this.context,units:"cents",value:A.detune}),this._spread=A.spread,this._type=A.type,this._phase=A.phase,this._partials=A.partials,this._partialCount=A.partialCount,this.count=A.count,readOnly(this,["frequency","detune"])}static getDefaults(){return Object.assign(Oscillator.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(A){A=this.toSeconds(A),this._forEach(_=>_.start(A))}_stop(A){A=this.toSeconds(A),this._forEach(_=>_.stop(A))}_restart(A){this._forEach(_=>_.restart(A))}_forEach(A){for(let _=0;_<this._oscillators.length;_++)A(this._oscillators[_],_)}get type(){return this._type}set type(A){this._type=A,this._forEach(_=>_.type=A)}get spread(){return this._spread}set spread(A){if(this._spread=A,this._oscillators.length>1){const _=-A/2,I=A/(this._oscillators.length-1);this._forEach((B,T)=>B.detune.value=_+I*T)}}get count(){return this._oscillators.length}set count(A){if(assertRange(A,1),this._oscillators.length!==A){this._forEach(_=>_.dispose()),this._oscillators=[];for(let _=0;_<A;_++){const I=new Oscillator({context:this.context,volume:-6-A*1.1,type:this._type,phase:this._phase+_/A*360,partialCount:this._partialCount,onstop:_===0?()=>this.onstop(this):noOp});this.type==="custom"&&(I.partials=this._partials),this.frequency.connect(I.frequency),this.detune.connect(I.detune),I.detune.overridden=!1,I.connect(this.output),this._oscillators[_]=I}this.spread=this._spread,this.state==="started"&&this._forEach(_=>_.start())}}get phase(){return this._phase}set phase(A){this._phase=A,this._forEach((_,I)=>_.phase=this._phase+I/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(A){this._forEach(_=>_.baseType=A),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(A){this._partials=A,this._partialCount=this._partials.length,A.length&&(this._type="custom",this._forEach(_=>_.partials=A))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(A){this._partialCount=A,this._forEach(_=>_.partialCount=A),this._type=this._oscillators[0].type}asArray(){return __awaiter(this,arguments,void 0,function*(A=1024){return generateWaveform(this,A)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(A=>A.dispose()),this}}class PWMOscillator extends Source{constructor(){const A=optionsFromArguments(PWMOscillator.getDefaults(),arguments,["frequency","modulationFrequency"]);super(A),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Multiply({context:this.context,value:2}),this._pulse=new PulseOscillator({context:this.context,frequency:A.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Oscillator({context:this.context,detune:A.detune,frequency:A.frequency,onstop:()=>this.onstop(this),phase:A.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),readOnly(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Source.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(A){A=this.toSeconds(A),this._modulator.start(A),this._pulse.start(A)}_stop(A){A=this.toSeconds(A),this._modulator.stop(A),this._pulse.stop(A)}_restart(A){this._modulator.restart(A),this._pulse.restart(A)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(A){this._modulator.phase=A}asArray(){return __awaiter(this,arguments,void 0,function*(A=1024){return generateWaveform(this,A)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const OmniOscillatorSourceMap={am:AMOscillator,fat:FatOscillator,fm:FMOscillator,oscillator:Oscillator,pulse:PulseOscillator,pwm:PWMOscillator};class OmniOscillator extends Source{constructor(){const A=optionsFromArguments(OmniOscillator.getDefaults(),arguments,["frequency","type"]);super(A),this.name="OmniOscillator",this.frequency=new Signal({context:this.context,units:"frequency",value:A.frequency}),this.detune=new Signal({context:this.context,units:"cents",value:A.detune}),readOnly(this,["frequency","detune"]),this.set(A)}static getDefaults(){return Object.assign(Oscillator.getDefaults(),FMOscillator.getDefaults(),AMOscillator.getDefaults(),FatOscillator.getDefaults(),PulseOscillator.getDefaults(),PWMOscillator.getDefaults())}_start(A){this._oscillator.start(A)}_stop(A){this._oscillator.stop(A)}_restart(A){return this._oscillator.restart(A),this}get type(){let A="";return["am","fm","fat"].some(_=>this._sourceType===_)&&(A=this._sourceType),A+this._oscillator.type}set type(A){A.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=A.substr(2)):A.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=A.substr(2)):A.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=A.substr(3)):A==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):A==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=A)}get partials(){return this._oscillator.partials}set partials(A){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=A)}get partialCount(){return this._oscillator.partialCount}set partialCount(A){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=A)}set(A){return Reflect.has(A,"type")&&A.type&&(this.type=A.type),super.set(A),this}_createNewOscillator(A){if(A!==this._sourceType){this._sourceType=A;const _=OmniOscillatorSourceMap[A],I=this.now();if(this._oscillator){const B=this._oscillator;B.stop(I),this.context.setTimeout(()=>B.dispose(),this.blockTime)}this._oscillator=new _({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(I)}}get phase(){return this._oscillator.phase}set phase(A){this._oscillator.phase=A}get sourceType(){return this._sourceType}set sourceType(A){let _="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(_=this._oscillator.type),A==="fm"?this.type="fm"+_:A==="am"?this.type="am"+_:A==="fat"?this.type="fat"+_:A==="oscillator"?this.type=_:A==="pulse"?this.type="pulse":A==="pwm"&&(this.type="pwm")}_getOscType(A,_){return A instanceof OmniOscillatorSourceMap[_]}get baseType(){return this._oscillator.baseType}set baseType(A){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&A!=="pulse"&&A!=="pwm"&&(this._oscillator.baseType=A)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(A){this._getOscType(this._oscillator,"fat")&&isNumber(A)&&(this._oscillator.count=A)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(A){this._getOscType(this._oscillator,"fat")&&isNumber(A)&&(this._oscillator.spread=A)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(A){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&isString(A)&&(this._oscillator.modulationType=A)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return __awaiter(this,arguments,void 0,function*(A=1024){return generateWaveform(this,A)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function range$1(E,A=1/0){const _=new WeakMap;return function(I,B){Reflect.defineProperty(I,B,{configurable:!0,enumerable:!0,get:function(){return _.get(this)},set:function(T){assertRange(T,E,A),_.set(this,T)}})}}function timeRange(E,A=1/0){const _=new WeakMap;return function(I,B){Reflect.defineProperty(I,B,{configurable:!0,enumerable:!0,get:function(){return _.get(this)},set:function(T){assertRange(this.toSeconds(T),E,A),_.set(this,T)}})}}class Player extends Source{constructor(){const A=optionsFromArguments(Player.getDefaults(),arguments,["url","onload"]);super(A),this.name="Player",this._activeSources=new Set,this._buffer=new ToneAudioBuffer({onload:this._onload.bind(this,A.onload),onerror:A.onerror,reverse:A.reverse,url:A.url}),this.autostart=A.autostart,this._loop=A.loop,this._loopStart=A.loopStart,this._loopEnd=A.loopEnd,this._playbackRate=A.playbackRate,this.fadeIn=A.fadeIn,this.fadeOut=A.fadeOut}static getDefaults(){return Object.assign(Source.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:noOp,onerror:noOp,playbackRate:1,reverse:!1})}load(A){return __awaiter(this,void 0,void 0,function*(){return yield this._buffer.load(A),this._onload(),this})}_onload(A=noOp){A(),this.autostart&&this.start()}_onSourceEnd(A){this.onstop(this),this._activeSources.delete(A),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(A,_,I){return super.start(A,_,I),this}_start(A,_,I){this._loop?_=defaultArg(_,this._loopStart):_=defaultArg(_,0);const B=this.toSeconds(_),T=I;I=defaultArg(I,Math.max(this._buffer.duration-B,0));let R=this.toSeconds(I);R=R/this._playbackRate,A=this.toSeconds(A);const P=new ToneBufferSource({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(A+R),this._state.setStateAtTime("stopped",A+R,{implicitEnd:!0})),this._activeSources.add(P),this._loop&&isUndef(T)?P.start(A,B):P.start(A,B,R-this.toSeconds(this.fadeOut))}_stop(A){const _=this.toSeconds(A);this._activeSources.forEach(I=>I.stop(_))}restart(A,_,I){return super.restart(A,_,I),this}_restart(A,_,I){var B;(B=[...this._activeSources].pop())===null||B===void 0||B.stop(A),this._start(A,_,I)}seek(A,_){const I=this.toSeconds(_);if(this._state.getValueAtTime(I)==="started"){const B=this.toSeconds(A);this._stop(I),this._start(I,B)}return this}setLoopPoints(A,_){return this.loopStart=A,this.loopEnd=_,this}get loopStart(){return this._loopStart}set loopStart(A){this._loopStart=A,this.buffer.loaded&&assertRange(this.toSeconds(A),0,this.buffer.duration),this._activeSources.forEach(_=>{_.loopStart=A})}get loopEnd(){return this._loopEnd}set loopEnd(A){this._loopEnd=A,this.buffer.loaded&&assertRange(this.toSeconds(A),0,this.buffer.duration),this._activeSources.forEach(_=>{_.loopEnd=A})}get buffer(){return this._buffer}set buffer(A){this._buffer.set(A)}get loop(){return this._loop}set loop(A){if(this._loop!==A&&(this._loop=A,this._activeSources.forEach(_=>{_.loop=A}),A)){const _=this._state.getNextState("stopped",this.now());_&&this._state.cancel(_.time)}}get playbackRate(){return this._playbackRate}set playbackRate(A){this._playbackRate=A;const _=this.now(),I=this._state.getNextState("stopped",_);I&&I.implicitEnd&&(this._state.cancel(I.time),this._activeSources.forEach(B=>B.cancelStop())),this._activeSources.forEach(B=>{B.playbackRate.setValueAtTime(A,_)})}get reverse(){return this._buffer.reverse}set reverse(A){this._buffer.reverse=A}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(A=>A.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}__decorate([timeRange(0)],Player.prototype,"fadeIn",void 0);__decorate([timeRange(0)],Player.prototype,"fadeOut",void 0);class GrainPlayer extends Source{constructor(){const A=optionsFromArguments(GrainPlayer.getDefaults(),arguments,["url","onload"]);super(A),this.name="GrainPlayer",this._loopStart=0,this._loopEnd=0,this._activeSources=[],this.buffer=new ToneAudioBuffer({onload:A.onload,onerror:A.onerror,reverse:A.reverse,url:A.url}),this._clock=new Clock({context:this.context,callback:this._tick.bind(this),frequency:1/A.grainSize}),this._playbackRate=A.playbackRate,this._grainSize=A.grainSize,this._overlap=A.overlap,this.detune=A.detune,this.overlap=A.overlap,this.loop=A.loop,this.playbackRate=A.playbackRate,this.grainSize=A.grainSize,this.loopStart=A.loopStart,this.loopEnd=A.loopEnd,this.reverse=A.reverse,this._clock.on("stop",this._onstop.bind(this))}static getDefaults(){return Object.assign(Source.getDefaults(),{onload:noOp,onerror:noOp,overlap:.1,grainSize:.2,playbackRate:1,detune:0,loop:!1,loopStart:0,loopEnd:0,reverse:!1})}_start(A,_,I){_=defaultArg(_,0),_=this.toSeconds(_),A=this.toSeconds(A);const B=1/this._clock.frequency.getValueAtTime(A);this._clock.start(A,_/B),I&&this.stop(A+this.toSeconds(I))}restart(A,_,I){return super.restart(A,_,I),this}_restart(A,_,I){this._stop(A),this._start(A,_,I)}_stop(A){this._clock.stop(A)}_onstop(A){this._activeSources.forEach(_=>{_.fadeOut=0,_.stop(A)}),this.onstop(this)}_tick(A){const _=this._clock.getTicksAtTime(A),I=_*this._grainSize;if(this.log("offset",I),!this.loop&&I>this.buffer.duration){this.stop(A);return}const B=I<this._overlap?0:this._overlap,T=new ToneBufferSource({context:this.context,url:this.buffer,fadeIn:B,fadeOut:this._overlap,loop:this.loop,loopStart:this._loopStart,loopEnd:this._loopEnd,playbackRate:intervalToFrequencyRatio(this.detune/100)}).connect(this.output);T.start(A,this._grainSize*_),T.stop(A+this._grainSize/this.playbackRate),this._activeSources.push(T),T.onended=()=>{const R=this._activeSources.indexOf(T);R!==-1&&this._activeSources.splice(R,1)}}get playbackRate(){return this._playbackRate}set playbackRate(A){assertRange(A,.001),this._playbackRate=A,this.grainSize=this._grainSize}get loopStart(){return this._loopStart}set loopStart(A){this.buffer.loaded&&assertRange(this.toSeconds(A),0,this.buffer.duration),this._loopStart=this.toSeconds(A)}get loopEnd(){return this._loopEnd}set loopEnd(A){this.buffer.loaded&&assertRange(this.toSeconds(A),0,this.buffer.duration),this._loopEnd=this.toSeconds(A)}get reverse(){return this.buffer.reverse}set reverse(A){this.buffer.reverse=A}get grainSize(){return this._grainSize}set grainSize(A){this._grainSize=this.toSeconds(A),this._clock.frequency.setValueAtTime(this._playbackRate/this._grainSize,this.now())}get overlap(){return this._overlap}set overlap(A){const _=this.toSeconds(A);assertRange(_,0),this._overlap=_}get loaded(){return this.buffer.loaded}dispose(){return super.dispose(),this.buffer.dispose(),this._clock.dispose(),this._activeSources.forEach(A=>A.dispose()),this}}class Envelope extends ToneAudioNode{constructor(){const A=optionsFromArguments(Envelope.getDefaults(),arguments,["attack","decay","sustain","release"]);super(A),this.name="Envelope",this._sig=new Signal({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=A.attack,this.decay=A.decay,this.sustain=A.sustain,this.release=A.release,this.attackCurve=A.attackCurve,this.releaseCurve=A.releaseCurve,this.decayCurve=A.decayCurve}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(A,_){if(isString(A))return A;{let I;for(I in EnvelopeCurves)if(EnvelopeCurves[I][_]===A)return I;return A}}_setCurve(A,_,I){if(isString(I)&&Reflect.has(EnvelopeCurves,I)){const B=EnvelopeCurves[I];isObject$1(B)?A!=="_decayCurve"&&(this[A]=B[_]):this[A]=B}else if(isArray(I)&&A!=="_decayCurve")this[A]=I;else throw new Error("Envelope: invalid curve: "+I)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(A){this._setCurve("_attackCurve","In",A)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(A){this._setCurve("_releaseCurve","Out",A)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(A){this._setCurve("_decayCurve","Out",A)}triggerAttack(A,_=1){this.log("triggerAttack",A,_),A=this.toSeconds(A);let B=this.toSeconds(this.attack);const T=this.toSeconds(this.decay),R=this.getValueAtTime(A);if(R>0){const P=1/B;B=(1-R)/P}if(B<this.sampleTime)this._sig.cancelScheduledValues(A),this._sig.setValueAtTime(_,A);else if(this._attackCurve==="linear")this._sig.linearRampTo(_,B,A);else if(this._attackCurve==="exponential")this._sig.targetRampTo(_,B,A);else{this._sig.cancelAndHoldAtTime(A);let P=this._attackCurve;for(let D=1;D<P.length;D++)if(P[D-1]<=R&&R<=P[D]){P=this._attackCurve.slice(D),P[0]=R;break}this._sig.setValueCurveAtTime(P,A,B,_)}if(T&&this.sustain<1){const P=_*this.sustain,D=A+B;this.log("decay",D),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(P,T+D):this._sig.exponentialApproachValueAtTime(P,D,T)}return this}triggerRelease(A){this.log("triggerRelease",A),A=this.toSeconds(A);const _=this.getValueAtTime(A);if(_>0){const I=this.toSeconds(this.release);I<this.sampleTime?this._sig.setValueAtTime(0,A):this._releaseCurve==="linear"?this._sig.linearRampTo(0,I,A):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,I,A):(assert$1(isArray(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(A),this._sig.setValueCurveAtTime(this._releaseCurve,A,I,_))}return this}getValueAtTime(A){return this._sig.getValueAtTime(A)}triggerAttackRelease(A,_,I=1){return _=this.toSeconds(_),this.triggerAttack(_,I),this.triggerRelease(_+this.toSeconds(A)),this}cancel(A){return this._sig.cancelScheduledValues(this.toSeconds(A)),this}connect(A,_=0,I=0){return connectSignal(this,A,_,I),this}asArray(){return __awaiter(this,arguments,void 0,function*(A=1024){const _=A/this.context.sampleRate,I=new OfflineContext(1,_,this.context.sampleRate),B=this.toSeconds(this.attack)+this.toSeconds(this.decay),T=B+this.toSeconds(this.release),R=T*.1,P=T+R,D=new this.constructor(Object.assign(this.get(),{attack:_*this.toSeconds(this.attack)/P,decay:_*this.toSeconds(this.decay)/P,release:_*this.toSeconds(this.release)/P,context:I}));return D._sig.toDestination(),D.triggerAttackRelease(_*(B+R)/P,0),(yield I.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}__decorate([timeRange(0)],Envelope.prototype,"attack",void 0);__decorate([timeRange(0)],Envelope.prototype,"decay",void 0);__decorate([range$1(0,1)],Envelope.prototype,"sustain",void 0);__decorate([timeRange(0)],Envelope.prototype,"release",void 0);const EnvelopeCurves=(()=>{let A,_;const I=[];for(A=0;A<128;A++)I[A]=Math.sin(A/127*(Math.PI/2));const B=[],T=6.4;for(A=0;A<127;A++){_=A/127;const V=Math.sin(_*(Math.PI*2)*T-Math.PI/2)+1;B[A]=V/10+_*.83}B[127]=1;const R=[],P=5;for(A=0;A<128;A++)R[A]=Math.ceil(A/127*P)/P;const D=[];for(A=0;A<128;A++)_=A/127,D[A]=.5*(1-Math.cos(Math.PI*_));const F=[];for(A=0;A<128;A++){_=A/127;const V=Math.pow(_,3)*4+.2,K=Math.cos(V*Math.PI*2*_);F[A]=Math.abs(K*(1-_))}function L(V){const K=new Array(V.length);for(let J=0;J<V.length;J++)K[J]=1-V[J];return K}function U(V){return V.slice(0).reverse()}return{bounce:{In:L(F),Out:F},cosine:{In:I,Out:U(I)},exponential:"exponential",linear:"linear",ripple:{In:B,Out:L(B)},sine:{In:D,Out:L(D)},step:{In:R,Out:L(R)}}})();class Instrument extends ToneAudioNode{constructor(){const A=optionsFromArguments(Instrument.getDefaults(),arguments);super(A),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=_=>this._original_triggerRelease(_),this._volume=this.output=new Volume({context:this.context,volume:A.volume}),this.volume=this._volume.volume,readOnly(this,"volume")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let A=!1;return this._synced||(this._synced=!0,A=!0),A}_syncMethod(A,_){const I=this["_original_"+A]=this[A];this[A]=(...B)=>{const T=B[_],R=this.context.transport.schedule(P=>{B[_]=P,I.apply(this,B)},T);this._scheduledEvents.push(R)}}unsync(){return this._scheduledEvents.forEach(A=>this.context.transport.clear(A)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(A,_,I,B){const T=this.toSeconds(I),R=this.toSeconds(_);return this.triggerAttack(A,T,B),this.triggerRelease(T+R),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Monophonic extends Instrument{constructor(){const A=optionsFromArguments(Monophonic.getDefaults(),arguments);super(A),this.portamento=A.portamento,this.onsilence=A.onsilence}static getDefaults(){return Object.assign(Instrument.getDefaults(),{detune:0,onsilence:noOp,portamento:0})}triggerAttack(A,_,I=1){this.log("triggerAttack",A,_,I);const B=this.toSeconds(_);return this._triggerEnvelopeAttack(B,I),this.setNote(A,B),this}triggerRelease(A){this.log("triggerRelease",A);const _=this.toSeconds(A);return this._triggerEnvelopeRelease(_),this}setNote(A,_){const I=this.toSeconds(_),B=A instanceof FrequencyClass?A.toFrequency():A;if(this.portamento>0&&this.getLevelAtTime(I)>.05){const T=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(B,T,I)}else this.frequency.setValueAtTime(B,I);return this}}__decorate([timeRange(0)],Monophonic.prototype,"portamento",void 0);class AmplitudeEnvelope extends Envelope{constructor(){super(optionsFromArguments(AmplitudeEnvelope.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Gain({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Synth extends Monophonic{constructor(){const A=optionsFromArguments(Synth.getDefaults(),arguments);super(A),this.name="Synth",this.oscillator=new OmniOscillator(Object.assign({context:this.context,detune:A.detune,onstop:()=>this.onsilence(this)},A.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new AmplitudeEnvelope(Object.assign({context:this.context},A.envelope)),this.oscillator.chain(this.envelope,this.output),readOnly(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Monophonic.getDefaults(),{envelope:Object.assign(omitFromObject(Envelope.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(omitFromObject(OmniOscillator.getDefaults(),[...Object.keys(Source.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(A,_){if(this.envelope.triggerAttack(A,_),this.oscillator.start(A),this.envelope.sustain===0){const I=this.toSeconds(this.envelope.attack),B=this.toSeconds(this.envelope.decay);this.oscillator.stop(A+I+B)}}_triggerEnvelopeRelease(A){this.envelope.triggerRelease(A),this.oscillator.stop(A+this.toSeconds(this.envelope.release))}getLevelAtTime(A){return A=this.toSeconds(A),this.envelope.getValueAtTime(A)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class MembraneSynth extends Synth{constructor(){const A=optionsFromArguments(MembraneSynth.getDefaults(),arguments);super(A),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=A.pitchDecay,this.octaves=A.octaves,readOnly(this,["oscillator","envelope"])}static getDefaults(){return deepMerge$1(Monophonic.getDefaults(),Synth.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(A,_){const I=this.toSeconds(_),B=this.toFrequency(A instanceof FrequencyClass?A.toFrequency():A),T=B*this.octaves;return this.oscillator.frequency.setValueAtTime(T,I),this.oscillator.frequency.exponentialRampToValueAtTime(B,I+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}__decorate([range$1(0)],MembraneSynth.prototype,"octaves",void 0);__decorate([timeRange(0)],MembraneSynth.prototype,"pitchDecay",void 0);const workletContext=new Set;function addToWorklet(E){workletContext.add(E)}function registerProcessor(E,A){const _=`registerProcessor("${E}", ${A})`;workletContext.add(_)}const toneAudioWorkletProcessor=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;addToWorklet(toneAudioWorkletProcessor);const singleIOProcess=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;addToWorklet(singleIOProcess);const delayLine=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;addToWorklet(delayLine);const workletName$1="feedback-comb-filter",feedbackCombFilter=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;registerProcessor(workletName$1,feedbackCombFilter);class Sampler extends Instrument{constructor(){const A=optionsFromArguments(Sampler.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(A),this.name="Sampler",this._activeSources=new Map;const _={};Object.keys(A.urls).forEach(I=>{const B=parseInt(I,10);if(assert$1(isNote(I)||isNumber(B)&&isFinite(B),`url key is neither a note or midi pitch: ${I}`),isNote(I)){const T=new FrequencyClass(this.context,I).toMidi();_[T]=A.urls[I]}else isNumber(B)&&isFinite(B)&&(_[B]=A.urls[B])}),this._buffers=new ToneAudioBuffers({urls:_,onload:A.onload,baseUrl:A.baseUrl,onerror:A.onerror}),this.attack=A.attack,this.release=A.release,this.curve=A.curve,this._buffers.loaded&&Promise.resolve().then(A.onload)}static getDefaults(){return Object.assign(Instrument.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:noOp,onerror:noOp,release:.1,urls:{}})}_findClosest(A){let I=0;for(;I<96;){if(this._buffers.has(A+I))return-I;if(this._buffers.has(A-I))return I;I++}throw new Error(`No available buffers for note: ${A}`)}triggerAttack(A,_,I=1){return this.log("triggerAttack",A,_,I),Array.isArray(A)||(A=[A]),A.forEach(B=>{const T=ftomf(new FrequencyClass(this.context,B).toFrequency()),R=Math.round(T),P=T-R,D=this._findClosest(R),F=R-D,L=this._buffers.get(F),U=intervalToFrequencyRatio(D+P),V=new ToneBufferSource({url:L,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:U}).connect(this.output);V.start(_,0,L.duration/U,I),isArray(this._activeSources.get(R))||this._activeSources.set(R,[]),this._activeSources.get(R).push(V),V.onended=()=>{if(this._activeSources&&this._activeSources.has(R)){const K=this._activeSources.get(R),J=K.indexOf(V);J!==-1&&K.splice(J,1)}}}),this}triggerRelease(A,_){return this.log("triggerRelease",A,_),Array.isArray(A)||(A=[A]),A.forEach(I=>{const B=new FrequencyClass(this.context,I).toMidi();if(this._activeSources.has(B)&&this._activeSources.get(B).length){const T=this._activeSources.get(B);_=this.toSeconds(_),T.forEach(R=>{R.stop(_)}),this._activeSources.set(B,[])}}),this}releaseAll(A){const _=this.toSeconds(A);return this._activeSources.forEach(I=>{for(;I.length;)I.shift().stop(_)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(A,_,I,B=1){const T=this.toSeconds(I);return this.triggerAttack(A,T,B),isArray(_)?(assert$1(isArray(A),"notes must be an array when duration is array"),A.forEach((R,P)=>{const D=_[Math.min(P,_.length-1)];this.triggerRelease(R,T+this.toSeconds(D))})):this.triggerRelease(A,T+this.toSeconds(_)),this}add(A,_,I){if(assert$1(isNote(A)||isFinite(A),`note must be a pitch or midi: ${A}`),isNote(A)){const B=new FrequencyClass(this.context,A).toMidi();this._buffers.add(B,_,I)}else this._buffers.add(A,_,I);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(A=>{A.forEach(_=>_.dispose())}),this._activeSources.clear(),this}}__decorate([timeRange(0)],Sampler.prototype,"attack",void 0);__decorate([timeRange(0)],Sampler.prototype,"release",void 0);class Panner extends ToneAudioNode{constructor(){const A=optionsFromArguments(Panner.getDefaults(),arguments,["pan"]);super(A),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new Param({context:this.context,param:this._panner.pan,value:A.pan,minValue:-1,maxValue:1}),this._panner.channelCount=A.channelCount,this._panner.channelCountMode="explicit",readOnly(this,"pan")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const workletName="bit-crusher",bitCrusherWorklet=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;registerProcessor(workletName,bitCrusherWorklet);class Solo extends ToneAudioNode{constructor(){const A=optionsFromArguments(Solo.getDefaults(),arguments,["solo"]);super(A),this.name="Solo",this.input=this.output=new Gain({context:this.context}),Solo._allSolos.has(this.context)||Solo._allSolos.set(this.context,new Set),Solo._allSolos.get(this.context).add(this),this.solo=A.solo}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(A){A?this._addSolo():this._removeSolo(),Solo._allSolos.get(this.context).forEach(_=>_._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){Solo._soloed.has(this.context)||Solo._soloed.set(this.context,new Set),Solo._soloed.get(this.context).add(this)}_removeSolo(){Solo._soloed.has(this.context)&&Solo._soloed.get(this.context).delete(this)}_isSoloed(){return Solo._soloed.has(this.context)&&Solo._soloed.get(this.context).has(this)}_noSolos(){return!Solo._soloed.has(this.context)||Solo._soloed.has(this.context)&&Solo._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),Solo._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Solo._allSolos=new Map;Solo._soloed=new Map;class PanVol extends ToneAudioNode{constructor(){const A=optionsFromArguments(PanVol.getDefaults(),arguments,["pan","volume"]);super(A),this.name="PanVol",this._panner=this.input=new Panner({context:this.context,pan:A.pan,channelCount:A.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Volume({context:this.context,volume:A.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=A.mute,readOnly(this,["pan","volume"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(A){this._volume.mute=A}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class Channel extends ToneAudioNode{constructor(){const A=optionsFromArguments(Channel.getDefaults(),arguments,["volume","pan"]);super(A),this.name="Channel",this._solo=this.input=new Solo({solo:A.solo,context:this.context}),this._panVol=this.output=new PanVol({context:this.context,pan:A.pan,volume:A.volume,mute:A.mute,channelCount:A.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),readOnly(this,["pan","volume"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(A){this._solo.solo=A}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(A){this._panVol.mute=A}_getBus(A){return Channel.buses.has(A)||Channel.buses.set(A,new Gain({context:this.context})),Channel.buses.get(A)}send(A,_=0){const I=this._getBus(A),B=new Gain({context:this.context,units:"decibels",gain:_});return this.connect(B),B.connect(I),B}receive(A){return this._getBus(A).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}Channel.buses=new Map;getContext().transport;function getTransport(){return getContext().transport}getContext().destination;getContext().destination;getContext().listener;getContext().draw;getContext();function loaded(){return ToneAudioBuffer.loaded()}function t$1(E,A,_,I){return new(_||(_=Promise))((function(B,T){function R(F){try{D(I.next(F))}catch(L){T(L)}}function P(F){try{D(I.throw(F))}catch(L){T(L)}}function D(F){var L;F.done?B(F.value):(L=F.value,L instanceof _?L:new _((function(U){U(L)}))).then(R,P)}D((I=I.apply(E,A||[])).next())}))}let e$2=class{constructor(){this.listeners={}}on(A,_,I){if(this.listeners[A]||(this.listeners[A]=new Set),this.listeners[A].add(_),I?.once){const B=()=>{this.un(A,B),this.un(A,_)};return this.on(A,B),B}return()=>this.un(A,_)}un(A,_){var I;(I=this.listeners[A])===null||I===void 0||I.delete(_)}once(A,_){return this.on(A,_,{once:!0})}unAll(){this.listeners={}}emit(A,..._){this.listeners[A]&&this.listeners[A].forEach((I=>I(..._)))}};const i$1={decode:function(E,A){return t$1(this,void 0,void 0,(function*(){const _=new AudioContext({sampleRate:A});return _.decodeAudioData(E).finally((()=>_.close()))}))},createBuffer:function(E,A){return typeof E[0]=="number"&&(E=[E]),(function(_){const I=_[0];if(I.some((B=>B>1||B<-1))){const B=I.length;let T=0;for(let R=0;R<B;R++){const P=Math.abs(I[R]);P>T&&(T=P)}for(const R of _)for(let P=0;P<B;P++)R[P]/=T}})(E),{duration:A,length:E[0].length,sampleRate:E[0].length/A,numberOfChannels:E.length,getChannelData:_=>E?.[_],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function s$1(E,A){const _=A.xmlns?document.createElementNS(A.xmlns,E):document.createElement(E);for(const[I,B]of Object.entries(A))if(I==="children"&&B)for(const[T,R]of Object.entries(B))R instanceof Node?_.appendChild(R):typeof R=="string"?_.appendChild(document.createTextNode(R)):_.appendChild(s$1(T,R));else I==="style"?Object.assign(_.style,B):I==="textContent"?_.textContent=B:_.setAttribute(I,B.toString());return _}function n$1(E,A,_){const I=s$1(E,A||{});return _?.appendChild(I),I}var r$1=Object.freeze({__proto__:null,createElement:n$1,default:n$1});const o$1={fetchBlob:function(E,A,_){return t$1(this,void 0,void 0,(function*(){const I=yield fetch(E,_);if(I.status>=400)throw new Error(`Failed to fetch ${E}: ${I.status} (${I.statusText})`);return(function(B,T){t$1(this,void 0,void 0,(function*(){if(!B.body||!B.headers)return;const R=B.body.getReader(),P=Number(B.headers.get("Content-Length"))||0;let D=0;const F=U=>t$1(this,void 0,void 0,(function*(){D+=U?.length||0;const V=Math.round(D/P*100);T(V)})),L=()=>t$1(this,void 0,void 0,(function*(){let U;try{U=yield R.read()}catch{return}U.done||(F(U.value),yield L())}));L()}))})(I.clone(),A),I.blob()}))}};let a$1=class extends e$2{constructor(A){super(),this.isExternalMedia=!1,A.media?(this.media=A.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),A.mediaControls&&(this.media.controls=!0),A.autoplay&&(this.media.autoplay=!0),A.playbackRate!=null&&this.onMediaEvent("canplay",(()=>{A.playbackRate!=null&&(this.media.playbackRate=A.playbackRate)}),{once:!0})}onMediaEvent(A,_,I){return this.media.addEventListener(A,_,I),()=>this.media.removeEventListener(A,_,I)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const A=this.getSrc();A.startsWith("blob:")&&URL.revokeObjectURL(A)}canPlayType(A){return this.media.canPlayType(A)!==""}setSrc(A,_){const I=this.getSrc();if(A&&I===A)return;this.revokeSrc();const B=_ instanceof Blob&&(this.canPlayType(_.type)||!A)?URL.createObjectURL(_):A;if(I&&this.media.removeAttribute("src"),B||A)try{this.media.src=B}catch{this.media.src=A}}destroy(){this.isExternalMedia||(this.media.pause(),this.media.remove(),this.revokeSrc(),this.media.removeAttribute("src"),this.media.load())}setMediaElement(A){this.media=A}play(){return t$1(this,void 0,void 0,(function*(){try{return yield this.media.play()}catch(A){if(A instanceof DOMException&&A.name==="AbortError")return;throw A}}))}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(A){this.media.currentTime=Math.max(0,Math.min(A,this.getDuration()))}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(A){this.media.volume=A}getMuted(){return this.media.muted}setMuted(A){this.media.muted=A}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(A,_){_!=null&&(this.media.preservesPitch=_),this.media.playbackRate=A}getMediaElement(){return this.media}setSinkId(A){return this.media.setSinkId(A)}},h$1=class Ui extends e$2{constructor(A,_){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.subscriptions=[],this.options=A;const I=this.parentFromOptionsContainer(A.container);this.parent=I;const[B,T]=this.initHtml();I.appendChild(B),this.container=B,this.scrollContainer=T.querySelector(".scroll"),this.wrapper=T.querySelector(".wrapper"),this.canvasWrapper=T.querySelector(".canvases"),this.progressWrapper=T.querySelector(".progress"),this.cursor=T.querySelector(".cursor"),_&&T.appendChild(_),this.initEvents()}parentFromOptionsContainer(A){let _;if(typeof A=="string"?_=document.querySelector(A):A instanceof HTMLElement&&(_=A),!_)throw new Error("Container not found");return _}initEvents(){const A=_=>{const I=this.wrapper.getBoundingClientRect(),B=_.clientX-I.left,T=_.clientY-I.top;return[B/I.width,T/I.height]};if(this.wrapper.addEventListener("click",(_=>{const[I,B]=A(_);this.emit("click",I,B)})),this.wrapper.addEventListener("dblclick",(_=>{const[I,B]=A(_);this.emit("dblclick",I,B)})),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",(()=>{const{scrollLeft:_,scrollWidth:I,clientWidth:B}=this.scrollContainer,T=_/I,R=(_+B)/I;this.emit("scroll",T,R,_,_+B)})),typeof ResizeObserver=="function"){const _=this.createDelay(100);this.resizeObserver=new ResizeObserver((()=>{_().then((()=>this.onContainerResize())).catch((()=>{}))})),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const A=this.parent.clientWidth;A===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=A,this.reRender())}initDrag(){this.subscriptions.push((function(A,_,I,B,T=3,R=0,P=100){if(!A)return()=>{};const D=matchMedia("(pointer: coarse)").matches;let F=()=>{};const L=U=>{if(U.button!==R)return;U.preventDefault(),U.stopPropagation();let V=U.clientX,K=U.clientY,J=!1;const ee=Date.now(),ie=pe=>{if(pe.preventDefault(),pe.stopPropagation(),D&&Date.now()-ee<P)return;const ve=pe.clientX,ye=pe.clientY,_e=ve-V,be=ye-K;if(J||Math.abs(_e)>T||Math.abs(be)>T){const Te=A.getBoundingClientRect(),{left:ue,top:O}=Te;J||(I?.(V-ue,K-O),J=!0),_(_e,be,ve-ue,ye-O),V=ve,K=ye}},ne=pe=>{if(J){const ve=pe.clientX,ye=pe.clientY,_e=A.getBoundingClientRect(),{left:be,top:Te}=_e;B?.(ve-be,ye-Te)}F()},ce=pe=>{pe.relatedTarget&&pe.relatedTarget!==document.documentElement||ne(pe)},fe=pe=>{J&&(pe.stopPropagation(),pe.preventDefault())},de=pe=>{J&&pe.preventDefault()};document.addEventListener("pointermove",ie),document.addEventListener("pointerup",ne),document.addEventListener("pointerout",ce),document.addEventListener("pointercancel",ce),document.addEventListener("touchmove",de,{passive:!1}),document.addEventListener("click",fe,{capture:!0}),F=()=>{document.removeEventListener("pointermove",ie),document.removeEventListener("pointerup",ne),document.removeEventListener("pointerout",ce),document.removeEventListener("pointercancel",ce),document.removeEventListener("touchmove",de),setTimeout((()=>{document.removeEventListener("click",fe,{capture:!0})}),10)}};return A.addEventListener("pointerdown",L),()=>{F(),A.removeEventListener("pointerdown",L)}})(this.wrapper,((A,_,I)=>{this.emit("drag",Math.max(0,Math.min(1,I/this.wrapper.getBoundingClientRect().width)))}),(A=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,A/this.wrapper.getBoundingClientRect().width)))}),(A=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,A/this.wrapper.getBoundingClientRect().width)))})))}getHeight(A,_){var I;const B=((I=this.audioData)===null||I===void 0?void 0:I.numberOfChannels)||1;if(A==null)return 128;if(!isNaN(Number(A)))return Number(A);if(A==="auto"){const T=this.parent.clientHeight||128;return _?.every((R=>!R.overlay))?T/B:T}return 128}initHtml(){const A=document.createElement("div"),_=A.attachShadow({mode:"open"}),I=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return _.innerHTML=`
      <style${I?` nonce="${I}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[A,_]}setOptions(A){if(this.options.container!==A.container){const _=this.parentFromOptionsContainer(A.container);_.appendChild(this.container),this.parent=_}A.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=A,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(A){this.scrollContainer.scrollLeft=A}setScrollPercentage(A){const{scrollWidth:_}=this.scrollContainer,I=_*A;this.setScroll(I)}destroy(){var A,_;this.subscriptions.forEach((I=>I())),this.container.remove(),(A=this.resizeObserver)===null||A===void 0||A.disconnect(),(_=this.unsubscribeOnScroll)===null||_===void 0||_.forEach((I=>I())),this.unsubscribeOnScroll=[]}createDelay(A=10){let _,I;const B=()=>{_&&clearTimeout(_),I&&I()};return this.timeouts.push(B),()=>new Promise(((T,R)=>{B(),I=R,_=setTimeout((()=>{_=void 0,I=void 0,T()}),A)}))}convertColorValues(A){if(!Array.isArray(A))return A||"";if(A.length<2)return A[0]||"";const _=document.createElement("canvas"),I=_.getContext("2d"),B=_.height*(window.devicePixelRatio||1),T=I.createLinearGradient(0,0,0,B),R=1/(A.length-1);return A.forEach(((P,D)=>{const F=D*R;T.addColorStop(F,P)})),T}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(A,_,I,B){const T=A[0],R=A[1]||A[0],P=T.length,{width:D,height:F}=I.canvas,L=F/2,U=this.getPixelRatio(),V=_.barWidth?_.barWidth*U:1,K=_.barGap?_.barGap*U:_.barWidth?V/2:0,J=_.barRadius||0,ee=D/(V+K)/P,ie=J&&"roundRect"in I?"roundRect":"rect";I.beginPath();let ne=0,ce=0,fe=0;for(let de=0;de<=P;de++){const pe=Math.round(de*ee);if(pe>ne){const _e=Math.round(ce*L*B),be=_e+Math.round(fe*L*B)||1;let Te=L-_e;_.barAlign==="top"?Te=0:_.barAlign==="bottom"&&(Te=F-be),I[ie](ne*(V+K),Te,V,be,J),ne=pe,ce=0,fe=0}const ve=Math.abs(T[de]||0),ye=Math.abs(R[de]||0);ve>ce&&(ce=ve),ye>fe&&(fe=ye)}I.fill(),I.closePath()}renderLineWaveform(A,_,I,B){const T=R=>{const P=A[R]||A[0],D=P.length,{height:F}=I.canvas,L=F/2,U=I.canvas.width/D;I.moveTo(0,L);let V=0,K=0;for(let J=0;J<=D;J++){const ee=Math.round(J*U);if(ee>V){const ne=L+(Math.round(K*L*B)||1)*(R===0?-1:1);I.lineTo(V,ne),V=ee,K=0}const ie=Math.abs(P[J]||0);ie>K&&(K=ie)}I.lineTo(V,L)};I.beginPath(),T(0),T(1),I.fill(),I.closePath()}renderWaveform(A,_,I){if(I.fillStyle=this.convertColorValues(_.waveColor),_.renderFunction)return void _.renderFunction(A,I);let B=_.barHeight||1;if(_.normalize){const T=Array.from(A[0]).reduce(((R,P)=>Math.max(R,Math.abs(P))),0);B=T?1/T:1}_.barWidth||_.barGap||_.barAlign?this.renderBarWaveform(A,_,I,B):this.renderLineWaveform(A,_,I,B)}renderSingleCanvas(A,_,I,B,T,R,P){const D=this.getPixelRatio(),F=document.createElement("canvas");F.width=Math.round(I*D),F.height=Math.round(B*D),F.style.width=`${I}px`,F.style.height=`${B}px`,F.style.left=`${Math.round(T)}px`,R.appendChild(F);const L=F.getContext("2d");if(this.renderWaveform(A,_,L),F.width>0&&F.height>0){const U=F.cloneNode(),V=U.getContext("2d");V.drawImage(F,0,0),V.globalCompositeOperation="source-in",V.fillStyle=this.convertColorValues(_.progressColor),V.fillRect(0,0,F.width,F.height),P.appendChild(U)}}renderMultiCanvas(A,_,I,B,T,R){const P=this.getPixelRatio(),{clientWidth:D}=this.scrollContainer,F=I/P;let L=Math.min(Ui.MAX_CANVAS_WIDTH,D,F),U={};if(_.barWidth||_.barGap){const ie=_.barWidth||.5,ne=ie+(_.barGap||ie/2);L%ne!=0&&(L=Math.floor(L/ne)*ne)}if(L===0)return;const V=ie=>{if(ie<0||ie>=K||U[ie])return;U[ie]=!0;const ne=ie*L;let ce=Math.min(F-ne,L);if(_.barWidth||_.barGap){const de=_.barWidth||.5,pe=de+(_.barGap||de/2);ce=Math.floor(ce/pe)*pe}if(ce<=0)return;const fe=A.map((de=>{const pe=Math.floor(ne/F*de.length),ve=Math.floor((ne+ce)/F*de.length);return de.slice(pe,ve)}));this.renderSingleCanvas(fe,_,ce,B,ne,T,R)},K=Math.ceil(F/L);if(!this.isScrollable){for(let ie=0;ie<K;ie++)V(ie);return}const J=this.scrollContainer.scrollLeft/F,ee=Math.floor(J*K);if(V(ee-1),V(ee),V(ee+1),K>1){const ie=this.on("scroll",(()=>{const{scrollLeft:ne}=this.scrollContainer,ce=Math.floor(ne/F*K);Object.keys(U).length>Ui.MAX_NODES&&(T.innerHTML="",R.innerHTML="",U={}),V(ce-1),V(ce),V(ce+1)}));this.unsubscribeOnScroll.push(ie)}}renderChannel(A,_,I,B){var{overlay:T}=_,R=(function(L,U){var V={};for(var K in L)Object.prototype.hasOwnProperty.call(L,K)&&U.indexOf(K)<0&&(V[K]=L[K]);if(L!=null&&typeof Object.getOwnPropertySymbols=="function"){var J=0;for(K=Object.getOwnPropertySymbols(L);J<K.length;J++)U.indexOf(K[J])<0&&Object.prototype.propertyIsEnumerable.call(L,K[J])&&(V[K[J]]=L[K[J]])}return V})(_,["overlay"]);const P=document.createElement("div"),D=this.getHeight(R.height,R.splitChannels);P.style.height=`${D}px`,T&&B>0&&(P.style.marginTop=`-${D}px`),this.canvasWrapper.style.minHeight=`${D}px`,this.canvasWrapper.appendChild(P);const F=P.cloneNode();this.progressWrapper.appendChild(F),this.renderMultiCanvas(A,R,I,D,P,F)}render(A){return t$1(this,void 0,void 0,(function*(){var _;this.timeouts.forEach((D=>D())),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const I=this.getPixelRatio(),B=this.scrollContainer.clientWidth,T=Math.ceil(A.duration*(this.options.minPxPerSec||0));this.isScrollable=T>B;const R=this.options.fillParent&&!this.isScrollable,P=(R?B:T)*I;if(this.wrapper.style.width=R?"100%":`${T}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=A,this.emit("render"),this.options.splitChannels)for(let D=0;D<A.numberOfChannels;D++){const F=Object.assign(Object.assign({},this.options),(_=this.options.splitChannels)===null||_===void 0?void 0:_[D]);this.renderChannel([A.getChannelData(D)],F,P,D)}else{const D=[A.getChannelData(0)];A.numberOfChannels>1&&D.push(A.getChannelData(1)),this.renderChannel(D,this.options,P,0)}Promise.resolve().then((()=>this.emit("rendered")))}))}reRender(){if(this.unsubscribeOnScroll.forEach((I=>I())),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:A}=this.scrollContainer,{right:_}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&A!==this.scrollContainer.scrollWidth){const{right:I}=this.progressWrapper.getBoundingClientRect();let B=I-_;B*=2,B=B<0?Math.floor(B):Math.ceil(B),B/=2,this.scrollContainer.scrollLeft+=B}}zoom(A){this.options.minPxPerSec=A,this.reRender()}scrollIntoView(A,_=!1){const{scrollLeft:I,scrollWidth:B,clientWidth:T}=this.scrollContainer,R=A*B,P=I,D=I+T,F=T/2;if(this.isDragging)R+30>D?this.scrollContainer.scrollLeft+=30:R-30<P&&(this.scrollContainer.scrollLeft-=30);else{(R<P||R>D)&&(this.scrollContainer.scrollLeft=R-(this.options.autoCenter?F:0));const L=R-I-F;_&&this.options.autoCenter&&L>0&&(this.scrollContainer.scrollLeft+=Math.min(L,10))}{const L=this.scrollContainer.scrollLeft,U=L/B,V=(L+T)/B;this.emit("scroll",U,V,L,L+T)}}renderProgress(A,_){if(isNaN(A))return;const I=100*A;this.canvasWrapper.style.clipPath=`polygon(${I}% 0%, 100% 0%, 100% 100%, ${I}% 100%)`,this.progressWrapper.style.width=`${I}%`,this.cursor.style.left=`${I}%`,this.cursor.style.transform=this.options.cursorWidth?`translateX(-${A*this.options.cursorWidth}px)`:"",this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(A,_)}exportImage(A,_,I){return t$1(this,void 0,void 0,(function*(){const B=this.canvasWrapper.querySelectorAll("canvas");if(!B.length)throw new Error("No waveform data");if(I==="dataURL"){const T=Array.from(B).map((R=>R.toDataURL(A,_)));return Promise.resolve(T)}return Promise.all(Array.from(B).map((T=>new Promise(((R,P)=>{T.toBlob((D=>{D?R(D):P(new Error("Could not export image"))}),A,_)})))))}))}};h$1.MAX_CANVAS_WIDTH=8e3,h$1.MAX_NODES=10;let l$1=class extends e$2{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",(()=>{requestAnimationFrame((()=>{this.emit("tick")}))})),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}},d$1=class extends e$2{constructor(A=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=A,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return t$1(this,void 0,void 0,(function*(){}))}get src(){return this.currentSrc}set src(A){if(this.currentSrc=A,this._duration=void 0,!A)return this.buffer=null,void this.emit("emptied");fetch(A).then((_=>{if(_.status>=400)throw new Error(`Failed to fetch ${A}: ${_.status} (${_.statusText})`);return _.arrayBuffer()})).then((_=>this.currentSrc!==A?null:this.audioContext.decodeAudioData(_))).then((_=>{this.currentSrc===A&&(this.buffer=_,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())}))}_play(){var A;if(!this.paused)return;this.paused=!1,(A=this.bufferNode)===null||A===void 0||A.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let _=this.playedDuration*this._playbackRate;(_>=this.duration||_<0)&&(_=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,_),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var A;this.paused=!0,(A=this.bufferNode)===null||A===void 0||A.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return t$1(this,void 0,void 0,(function*(){this.paused&&(this._play(),this.emit("play"))}))}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(A){const _=A-this.currentTime,I=this.bufferNode;I?.stop(this.audioContext.currentTime+_),I?.addEventListener("ended",(()=>{I===this.bufferNode&&(this.bufferNode=null,this.pause())}),{once:!0})}setSinkId(A){return t$1(this,void 0,void 0,(function*(){return this.audioContext.setSinkId(A)}))}get playbackRate(){return this._playbackRate}set playbackRate(A){this._playbackRate=A,this.bufferNode&&(this.bufferNode.playbackRate.value=A)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(A){const _=!this.paused;_&&this._pause(),this.playedDuration=A/this._playbackRate,_&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var A,_;return(A=this._duration)!==null&&A!==void 0?A:((_=this.buffer)===null||_===void 0?void 0:_.duration)||0}set duration(A){this._duration=A}get volume(){return this.gainNode.gain.value}set volume(A){this.gainNode.gain.value=A,this.emit("volumechange")}get muted(){return this._muted}set muted(A){this._muted!==A&&(this._muted=A,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(A){return/^(audio|video)\//.test(A)}getGainNode(){return this.gainNode}getChannelData(){const A=[];if(!this.buffer)return A;const _=this.buffer.numberOfChannels;for(let I=0;I<_;I++)A.push(this.buffer.getChannelData(I));return A}removeAttribute(A){switch(A){case"src":this.src="";break;case"playbackRate":this.playbackRate=0;break;case"currentTime":this.currentTime=0;break;case"duration":this.duration=0;break;case"volume":this.volume=0;break;case"muted":this.muted=!1}}};const c$1={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};let u$1=class On extends a$1{static create(A){return new On(A)}constructor(A){const _=A.media||(A.backend==="WebAudio"?new d$1:void 0);super({media:_,mediaControls:A.mediaControls,autoplay:A.autoplay,playbackRate:A.audioRate}),this.plugins=[],this.decodedData=null,this.stopAtPosition=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},c$1,A),this.timer=new l$1;const I=_?void 0:this.getMediaElement();this.renderer=new h$1(this.options,I),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const B=this.options.url||this.getSrc()||"";Promise.resolve().then((()=>{this.emit("init");const{peaks:T,duration:R}=this.options;(B||T&&R)&&this.load(B,T,R).catch((()=>null))}))}updateProgress(A=this.getCurrentTime()){return this.renderer.renderProgress(A/this.getDuration(),this.isPlaying()),A}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",(()=>{if(!this.isSeeking()){const A=this.updateProgress();this.emit("timeupdate",A),this.emit("audioprocess",A),this.stopAtPosition!=null&&this.isPlaying()&&A>=this.stopAtPosition&&this.pause()}})))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",(()=>{const A=this.updateProgress();this.emit("timeupdate",A)})),this.onMediaEvent("play",(()=>{this.emit("play"),this.timer.start()})),this.onMediaEvent("pause",(()=>{this.emit("pause"),this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent("emptied",(()=>{this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent("ended",(()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish"),this.stopAtPosition=null})),this.onMediaEvent("seeking",(()=>{this.emit("seeking",this.getCurrentTime())})),this.onMediaEvent("error",(()=>{var A;this.emit("error",(A=this.getMediaElement().error)!==null&&A!==void 0?A:new Error("Media error")),this.stopAtPosition=null})))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",((A,_)=>{this.options.interact&&(this.seekTo(A),this.emit("interaction",A*this.getDuration()),this.emit("click",A,_))})),this.renderer.on("dblclick",((A,_)=>{this.emit("dblclick",A,_)})),this.renderer.on("scroll",((A,_,I,B)=>{const T=this.getDuration();this.emit("scroll",A*T,_*T,I,B)})),this.renderer.on("render",(()=>{this.emit("redraw")})),this.renderer.on("rendered",(()=>{this.emit("redrawcomplete")})),this.renderer.on("dragstart",(A=>{this.emit("dragstart",A)})),this.renderer.on("dragend",(A=>{this.emit("dragend",A)})));{let A;this.subscriptions.push(this.renderer.on("drag",(_=>{if(!this.options.interact)return;let I;this.renderer.renderProgress(_),clearTimeout(A),this.isPlaying()?I=0:this.options.dragToSeek===!0?I=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(I=this.options.dragToSeek.debounceTime),A=setTimeout((()=>{this.seekTo(_)}),I),this.emit("interaction",_*this.getDuration()),this.emit("drag",_)})))}}initPlugins(){var A;!((A=this.options.plugins)===null||A===void 0)&&A.length&&this.options.plugins.forEach((_=>{this.registerPlugin(_)}))}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach((A=>A())),this.mediaSubscriptions=[]}setOptions(A){this.options=Object.assign({},this.options,A),A.duration&&!A.peaks&&(this.decodedData=i$1.createBuffer(this.exportPeaks(),A.duration)),A.peaks&&A.duration&&(this.decodedData=i$1.createBuffer(A.peaks,A.duration)),this.renderer.setOptions(this.options),A.audioRate&&this.setPlaybackRate(A.audioRate),A.mediaControls!=null&&(this.getMediaElement().controls=A.mediaControls)}registerPlugin(A){if(this.plugins.includes(A))return A;A._init(this),this.plugins.push(A);const _=A.once("destroy",(()=>{this.plugins=this.plugins.filter((I=>I!==A)),this.subscriptions=this.subscriptions.filter((I=>I!==_))}));return this.subscriptions.push(_),A}unregisterPlugin(A){this.plugins=this.plugins.filter((_=>_!==A)),A.destroy()}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(A){return this.renderer.setScroll(A)}setScrollTime(A){const _=A/this.getDuration();this.renderer.setScrollPercentage(_)}getActivePlugins(){return this.plugins}loadAudio(A,_,I,B){return t$1(this,void 0,void 0,(function*(){var T;if(this.emit("load",A),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,this.stopAtPosition=null,!_&&!I){const P=this.options.fetchParams||{};window.AbortController&&!P.signal&&(this.abortController=new AbortController,P.signal=(T=this.abortController)===null||T===void 0?void 0:T.signal);const D=L=>this.emit("loading",L);_=yield o$1.fetchBlob(A,D,P);const F=this.options.blobMimeType;F&&(_=new Blob([_],{type:F}))}this.setSrc(A,_);const R=yield new Promise((P=>{const D=B||this.getDuration();D?P(D):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",(()=>P(this.getDuration())),{once:!0}))}));if(!A&&!_){const P=this.getMediaElement();P instanceof d$1&&(P.duration=R)}if(I)this.decodedData=i$1.createBuffer(I,R||0);else if(_){const P=yield _.arrayBuffer();this.decodedData=yield i$1.decode(P,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())}))}load(A,_,I){return t$1(this,void 0,void 0,(function*(){try{return yield this.loadAudio(A,void 0,_,I)}catch(B){throw this.emit("error",B),B}}))}loadBlob(A,_,I){return t$1(this,void 0,void 0,(function*(){try{return yield this.loadAudio("",A,_,I)}catch(B){throw this.emit("error",B),B}}))}zoom(A){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(A),this.emit("zoom",A)}getDecodedData(){return this.decodedData}exportPeaks({channels:A=2,maxLength:_=8e3,precision:I=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const B=Math.min(A,this.decodedData.numberOfChannels),T=[];for(let R=0;R<B;R++){const P=this.decodedData.getChannelData(R),D=[],F=P.length/_;for(let L=0;L<_;L++){const U=P.slice(Math.floor(L*F),Math.ceil((L+1)*F));let V=0;for(let K=0;K<U.length;K++){const J=U[K];Math.abs(J)>Math.abs(V)&&(V=J)}D.push(Math.round(V*I)/I)}T.push(D)}return T}getDuration(){let A=super.getDuration()||0;return A!==0&&A!==1/0||!this.decodedData||(A=this.decodedData.duration),A}toggleInteraction(A){this.options.interact=A}setTime(A){this.stopAtPosition=null,super.setTime(A),this.updateProgress(A),this.emit("timeupdate",A)}seekTo(A){const _=this.getDuration()*A;this.setTime(_)}play(A,_){const I=Object.create(null,{play:{get:()=>super.play}});return t$1(this,void 0,void 0,(function*(){A!=null&&this.setTime(A);const B=yield I.play.call(this);return _!=null&&(this.media instanceof d$1?this.media.stopAt(_):this.stopAtPosition=_),B}))}playPause(){return t$1(this,void 0,void 0,(function*(){return this.isPlaying()?this.pause():this.play()}))}stop(){this.pause(),this.setTime(0)}skip(A){this.setTime(this.getCurrentTime()+A)}empty(){this.load("",[[0]],.001)}setMediaElement(A){this.unsubscribePlayerEvents(),super.setMediaElement(A),this.initPlayerEvents()}exportImage(){return t$1(this,arguments,void 0,(function*(A="image/png",_=1,I="dataURL"){return this.renderer.exportImage(A,_,I)}))}destroy(){var A;this.emit("destroy"),(A=this.abortController)===null||A===void 0||A.abort(),this.plugins.forEach((_=>_.destroy())),this.subscriptions.forEach((_=>_())),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}};u$1.BasePlugin=class extends e$2{constructor(E){super(),this.subscriptions=[],this.isDestroyed=!1,this.options=E}onInit(){}_init(E){this.isDestroyed&&(this.subscriptions=[],this.isDestroyed=!1),this.wavesurfer=E,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach((E=>E())),this.subscriptions=[],this.isDestroyed=!0,this.wavesurfer=void 0}},u$1.dom=r$1;function getDefaultExportFromCjs(E){return E&&E.__esModule&&Object.prototype.hasOwnProperty.call(E,"default")?E.default:E}var browser$f={exports:{}},process=browser$f.exports={},cachedSetTimeout,cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?cachedSetTimeout=setTimeout:cachedSetTimeout=defaultSetTimout}catch{cachedSetTimeout=defaultSetTimout}try{typeof clearTimeout=="function"?cachedClearTimeout=clearTimeout:cachedClearTimeout=defaultClearTimeout}catch{cachedClearTimeout=defaultClearTimeout}})();function runTimeout(E){if(cachedSetTimeout===setTimeout)return setTimeout(E,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(E,0);try{return cachedSetTimeout(E,0)}catch{try{return cachedSetTimeout.call(null,E,0)}catch{return cachedSetTimeout.call(this,E,0)}}}function runClearTimeout(E){if(cachedClearTimeout===clearTimeout)return clearTimeout(E);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(E);try{return cachedClearTimeout(E)}catch{try{return cachedClearTimeout.call(null,E)}catch{return cachedClearTimeout.call(this,E)}}}var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){!draining||!currentQueue||(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var E=runTimeout(cleanUpNextTick);draining=!0;for(var A=queue.length;A;){for(currentQueue=queue,queue=[];++queueIndex<A;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,A=queue.length}currentQueue=null,draining=!1,runClearTimeout(E)}}process.nextTick=function(E){var A=new Array(arguments.length-1);if(arguments.length>1)for(var _=1;_<arguments.length;_++)A[_-1]=arguments[_];queue.push(new Item(E,A)),queue.length===1&&!draining&&runTimeout(drainQueue)};function Item(E,A){this.fun=E,this.array=A}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=!0;process.env={};process.argv=[];process.version="";process.versions={};function noop$1(){}process.on=noop$1;process.addListener=noop$1;process.once=noop$1;process.off=noop$1;process.removeListener=noop$1;process.removeAllListeners=noop$1;process.emit=noop$1;process.prependListener=noop$1;process.prependOnceListener=noop$1;process.listeners=function(E){return[]};process.binding=function(E){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(E){throw new Error("process.chdir is not supported")};process.umask=function(){return 0};var browserExports=browser$f.exports;const process$1=getDefaultExportFromCjs(browserExports);function e$1(E,A,_,I){return new(_||(_=Promise))((function(B,T){function R(F){try{D(I.next(F))}catch(L){T(L)}}function P(F){try{D(I.throw(F))}catch(L){T(L)}}function D(F){var L;F.done?B(F.value):(L=F.value,L instanceof _?L:new _((function(U){U(L)}))).then(R,P)}D((I=I.apply(E,[])).next())}))}const t=1e3*Math.log(10)/107.939;function s(E){return 2595*Math.log10(1+E/700)}function i(E){return 700*(Math.pow(10,E/2595)-1)}function r(E){return Math.log10(Math.max(1,E))}function n(E){return Math.pow(10,E)}function a(E){let A=26.81*E/(1960+E)-.53;return A<2&&(A+=.15*(2-A)),A>20.1&&(A+=.22*(A-20.1)),A}function l(E){return E<2&&(E=(E-.3)/.85),E>20.1&&(E=(E+4.422)/1.22),(E+.53)/(26.28-E)*1960}function o(E){return t*Math.log10(1+.00437*E)}function h(E){return(Math.pow(10,E/t)-1)/.00437}function c(E,A){switch(A){case"mel":return s(E);case"logarithmic":return r(E);case"bark":return a(E);case"erb":return o(E);default:return E}}function d(E,A,_,I,B){const T=I(0),R=I(_/2),P=Array.from({length:E},(()=>Array(A/2+1).fill(0))),D=_/A;for(let F=0;F<E;F++){const L=B(T+F/E*(R-T)),U=Math.floor(L/D),V=U*D,K=(L-V)/((U+1)*D-V);P[F][U]=1-K,P[F][U+1]=K}return P}function u(E,A){const _=A.length,I=Float32Array.from({length:_},(()=>0));for(let B=0;B<_;B++)for(let T=0;T<E.length;T++)I[B]+=E[T]*A[B][T];return I}const p={gray:()=>{const E=[];for(let A=0;A<256;A++){const _=(255-A)/256;E.push([_,_,_,1])}return E},igray:()=>{const E=[];for(let A=0;A<256;A++){const _=A/256;E.push([_,_,_,1])}return E},roseus:()=>[[.004528,.004341,.004307,1],[.005625,.006156,.00601,1],[.006628,.008293,.008161,1],[.007551,.010738,.01079,1],[.008382,.013482,.013941,1],[.009111,.01652,.017662,1],[.009727,.019846,.022009,1],[.010223,.023452,.027035,1],[.010593,.027331,.032799,1],[.010833,.031475,.039361,1],[.010941,.035875,.046415,1],[.010918,.04052,.053597,1],[.010768,.045158,.060914,1],[.010492,.049708,.068367,1],[.010098,.054171,.075954,1],[.009594,.058549,.083672,1],[.008989,.06284,.091521,1],[.008297,.067046,.099499,1],[.00753,.071165,.107603,1],[.006704,.075196,.11583,1],[.005838,.07914,.124178,1],[.004949,.082994,.132643,1],[.004062,.086758,.141223,1],[.003198,.09043,.149913,1],[.002382,.09401,.158711,1],[.001643,.097494,.167612,1],[.001009,.100883,.176612,1],[514e-6,.104174,.185704,1],[187e-6,.107366,.194886,1],[66e-6,.110457,.204151,1],[186e-6,.113445,.213496,1],[587e-6,.116329,.222914,1],[.001309,.119106,.232397,1],[.002394,.121776,.241942,1],[.003886,.124336,.251542,1],[.005831,.126784,.261189,1],[.008276,.12912,.270876,1],[.011268,.131342,.280598,1],[.014859,.133447,.290345,1],[.0191,.135435,.300111,1],[.024043,.137305,.309888,1],[.029742,.139054,.319669,1],[.036252,.140683,.329441,1],[.043507,.142189,.339203,1],[.050922,.143571,.348942,1],[.058432,.144831,.358649,1],[.066041,.145965,.368319,1],[.073744,.146974,.377938,1],[.081541,.147858,.387501,1],[.089431,.148616,.396998,1],[.097411,.149248,.406419,1],[.105479,.149754,.415755,1],[.113634,.150134,.424998,1],[.121873,.150389,.434139,1],[.130192,.150521,.443167,1],[.138591,.150528,.452075,1],[.147065,.150413,.460852,1],[.155614,.150175,.469493,1],[.164232,.149818,.477985,1],[.172917,.149343,.486322,1],[.181666,.148751,.494494,1],[.190476,.148046,.502493,1],[.199344,.147229,.510313,1],[.208267,.146302,.517944,1],[.217242,.145267,.52538,1],[.226264,.144131,.532613,1],[.235331,.142894,.539635,1],[.24444,.141559,.546442,1],[.253587,.140131,.553026,1],[.262769,.138615,.559381,1],[.271981,.137016,.5655,1],[.281222,.135335,.571381,1],[.290487,.133581,.577017,1],[.299774,.131757,.582404,1],[.30908,.129867,.587538,1],[.318399,.12792,.592415,1],[.32773,.125921,.597032,1],[.337069,.123877,.601385,1],[.346413,.121793,.605474,1],[.355758,.119678,.609295,1],[.365102,.11754,.612846,1],[.374443,.115386,.616127,1],[.383774,.113226,.619138,1],[.393096,.111066,.621876,1],[.402404,.108918,.624343,1],[.411694,.106794,.62654,1],[.420967,.104698,.628466,1],[.430217,.102645,.630123,1],[.439442,.100647,.631513,1],[.448637,.098717,.632638,1],[.457805,.096861,.633499,1],[.46694,.095095,.6341,1],[.47604,.093433,.634443,1],[.485102,.091885,.634532,1],[.494125,.090466,.63437,1],[.503104,.08919,.633962,1],[.512041,.088067,.633311,1],[.520931,.087108,.63242,1],[.529773,.086329,.631297,1],[.538564,.085738,.629944,1],[.547302,.085346,.628367,1],[.555986,.085162,.626572,1],[.564615,.08519,.624563,1],[.573187,.085439,.622345,1],[.581698,.085913,.619926,1],[.590149,.086615,.617311,1],[.598538,.087543,.614503,1],[.606862,.0887,.611511,1],[.61512,.090084,.608343,1],[.623312,.09169,.605001,1],[.631438,.093511,.601489,1],[.639492,.095546,.597821,1],[.647476,.097787,.593999,1],[.655389,.100226,.590028,1],[.66323,.102856,.585914,1],[.670995,.105669,.581667,1],[.678686,.108658,.577291,1],[.686302,.111813,.57279,1],[.69384,.115129,.568175,1],[.7013,.118597,.563449,1],[.708682,.122209,.558616,1],[.715984,.125959,.553687,1],[.723206,.12984,.548666,1],[.730346,.133846,.543558,1],[.737406,.13797,.538366,1],[.744382,.142209,.533101,1],[.751274,.146556,.527767,1],[.758082,.151008,.522369,1],[.764805,.155559,.516912,1],[.771443,.160206,.511402,1],[.777995,.164946,.505845,1],[.784459,.169774,.500246,1],[.790836,.174689,.494607,1],[.797125,.179688,.488935,1],[.803325,.184767,.483238,1],[.809435,.189925,.477518,1],[.815455,.19516,.471781,1],[.821384,.200471,.466028,1],[.827222,.205854,.460267,1],[.832968,.211308,.454505,1],[.838621,.216834,.448738,1],[.844181,.222428,.442979,1],[.849647,.22809,.43723,1],[.855019,.233819,.431491,1],[.860295,.239613,.425771,1],[.865475,.245471,.420074,1],[.870558,.251393,.414403,1],[.875545,.25738,.408759,1],[.880433,.263427,.403152,1],[.885223,.269535,.397585,1],[.889913,.275705,.392058,1],[.894503,.281934,.386578,1],[.898993,.288222,.381152,1],[.903381,.294569,.375781,1],[.907667,.300974,.370469,1],[.911849,.307435,.365223,1],[.915928,.313953,.360048,1],[.919902,.320527,.354948,1],[.923771,.327155,.349928,1],[.927533,.333838,.344994,1],[.931188,.340576,.340149,1],[.934736,.347366,.335403,1],[.938175,.354207,.330762,1],[.941504,.361101,.326229,1],[.944723,.368045,.321814,1],[.947831,.375039,.317523,1],[.950826,.382083,.313364,1],[.953709,.389175,.309345,1],[.956478,.396314,.305477,1],[.959133,.403499,.301766,1],[.961671,.410731,.298221,1],[.964093,.418008,.294853,1],[.966399,.425327,.291676,1],[.968586,.43269,.288696,1],[.970654,.440095,.285926,1],[.972603,.44754,.28338,1],[.974431,.455025,.281067,1],[.976139,.462547,.279003,1],[.977725,.470107,.277198,1],[.979188,.477703,.275666,1],[.980529,.485332,.274422,1],[.981747,.492995,.273476,1],[.98284,.50069,.272842,1],[.983808,.508415,.272532,1],[.984653,.516168,.27256,1],[.985373,.523948,.272937,1],[.985966,.531754,.273673,1],[.986436,.539582,.274779,1],[.98678,.547434,.276264,1],[.986998,.555305,.278135,1],[.987091,.563195,.280401,1],[.987061,.5711,.283066,1],[.986907,.579019,.286137,1],[.986629,.58695,.289615,1],[.986229,.594891,.293503,1],[.985709,.602839,.297802,1],[.985069,.610792,.302512,1],[.98431,.618748,.307632,1],[.983435,.626704,.313159,1],[.982445,.634657,.319089,1],[.981341,.642606,.32542,1],[.98013,.650546,.332144,1],[.978812,.658475,.339257,1],[.977392,.666391,.346753,1],[.97587,.67429,.354625,1],[.974252,.68217,.362865,1],[.972545,.690026,.371466,1],[.97075,.697856,.380419,1],[.968873,.705658,.389718,1],[.966921,.713426,.399353,1],[.964901,.721157,.409313,1],[.962815,.728851,.419594,1],[.960677,.7365,.430181,1],[.95849,.744103,.44107,1],[.956263,.751656,.452248,1],[.954009,.759153,.463702,1],[.951732,.766595,.475429,1],[.949445,.773974,.487414,1],[.947158,.781289,.499647,1],[.944885,.788535,.512116,1],[.942634,.795709,.524811,1],[.940423,.802807,.537717,1],[.938261,.809825,.550825,1],[.936163,.81676,.564121,1],[.934146,.823608,.577591,1],[.932224,.830366,.59122,1],[.930412,.837031,.604997,1],[.928727,.843599,.618904,1],[.927187,.850066,.632926,1],[.925809,.856432,.647047,1],[.92461,.862691,.661249,1],[.923607,.868843,.675517,1],[.92282,.874884,.689832,1],[.922265,.880812,.704174,1],[.921962,.886626,.718523,1],[.92193,.892323,.732859,1],[.922183,.897903,.747163,1],[.922741,.903364,.76141,1],[.92362,.908706,.77558,1],[.924837,.913928,.789648,1],[.926405,.919031,.80359,1],[.92834,.924015,.817381,1],[.930655,.928881,.830995,1],[.93336,.933631,.844405,1],[.936466,.938267,.857583,1],[.939982,.942791,.870499,1],[.943914,.947207,.883122,1],[.948267,.951519,.895421,1],[.953044,.955732,.907359,1],[.958246,.959852,.918901,1],[.963869,.963887,.930004,1],[.969909,.967845,.940623,1],[.976355,.971737,.950704,1],[.983195,.97558,.960181,1],[.990402,.979395,.968966,1],[.99793,.983217,.97692,1]]};function m(E){return E>=1e3?(E/1e3).toFixed(1):Math.round(E).toString()}function f(E){return E>=1e3?"kHz":"Hz"}function b(E,A,_,I,B){const T=c(_,B);return(function(R,P){switch(P){case"mel":return i(R);case"logarithmic":return n(R);case"bark":return l(R);case"erb":return h(R);default:return R}})(T+E/A*(c(I,B)-T),B)}function w(E,A,_,I){switch(this.bufferSize=E,this.sampleRate=A,this.bandwidth=2/E*(A/2),this.sinTable=new Float32Array(E),this.cosTable=new Float32Array(E),this.windowValues=new Float32Array(E),this.reverseTable=new Uint32Array(E),this.peakBand=0,this.peak=0,_){case"bartlett":for(let R=0;R<E;R++)this.windowValues[R]=2/(E-1)*((E-1)/2-Math.abs(R-(E-1)/2));break;case"bartlettHann":for(let R=0;R<E;R++)this.windowValues[R]=.62-.48*Math.abs(R/(E-1)-.5)-.38*Math.cos(2*Math.PI*R/(E-1));break;case"blackman":I=I||.16;for(let R=0;R<E;R++)this.windowValues[R]=(1-I)/2-.5*Math.cos(2*Math.PI*R/(E-1))+I/2*Math.cos(4*Math.PI*R/(E-1));break;case"cosine":for(let R=0;R<E;R++)this.windowValues[R]=Math.cos(Math.PI*R/(E-1)-Math.PI/2);break;case"gauss":I=I||.25;for(let R=0;R<E;R++)this.windowValues[R]=Math.pow(Math.E,-.5*Math.pow((R-(E-1)/2)/(I*(E-1)/2),2));break;case"hamming":for(let R=0;R<E;R++)this.windowValues[R]=.54-.46*Math.cos(2*Math.PI*R/(E-1));break;case"hann":case void 0:for(let R=0;R<E;R++)this.windowValues[R]=.5*(1-Math.cos(2*Math.PI*R/(E-1)));break;case"lanczoz":for(let R=0;R<E;R++)this.windowValues[R]=Math.sin(Math.PI*(2*R/(E-1)-1))/(Math.PI*(2*R/(E-1)-1));break;case"rectangular":for(let R=0;R<E;R++)this.windowValues[R]=1;break;case"triangular":for(let R=0;R<E;R++)this.windowValues[R]=2/E*(E/2-Math.abs(R-(E-1)/2));break;default:throw Error("No such window function '"+_+"'")}let B=1,T=E>>1;for(;B<E;){for(let R=0;R<B;R++)this.reverseTable[R+B]=this.reverseTable[R]+T;B<<=1,T>>=1}for(let R=0;R<E;R++)this.sinTable[R]=Math.sin(-Math.PI/R),this.cosTable[R]=Math.cos(-Math.PI/R);this.calculateSpectrum=function(R){const P=this.bufferSize,D=this.cosTable,F=this.sinTable,L=this.reverseTable,U=new Float32Array(P),V=new Float32Array(P),K=2/this.bufferSize,J=Math.sqrt,ee=new Float32Array(P/2);let ie,ne,ce;const fe=Math.floor(Math.log(P)/Math.LN2);if(Math.pow(2,fe)!==P)throw"Invalid buffer size, must be a power of 2.";if(P!==R.length)throw"Supplied buffer is not the same size as defined FFT. FFT Size: "+P+" Buffer Size: "+R.length;let de,pe,ve,ye,_e,be,Te,ue,O=1;for(let z=0;z<P;z++)U[z]=R[L[z]]*this.windowValues[L[z]],V[z]=0;for(;O<P;){de=D[O],pe=F[O],ve=1,ye=0;for(let z=0;z<O;z++){let Y=z;for(;Y<P;)_e=Y+O,be=ve*U[_e]-ye*V[_e],Te=ve*V[_e]+ye*U[_e],U[_e]=U[Y]-be,V[_e]=V[Y]-Te,U[Y]+=be,V[Y]+=Te,Y+=O<<1;ue=ve,ve=ue*de-ye*pe,ye=ue*pe+ye*de}O<<=1}for(let z=0,Y=P/2;z<Y;z++)ie=U[z],ne=V[z],ce=K*J(ie*ie+ne*ne),ce>this.peak&&(this.peakBand=z,this.peak=ce),ee[z]=ce;return ee}}class y{constructor(){this.listeners={}}on(A,_,I){if(this.listeners[A]||(this.listeners[A]=new Set),this.listeners[A].add(_),I?.once){const B=()=>{this.un(A,B),this.un(A,_)};return this.on(A,B),B}return()=>this.un(A,_)}un(A,_){var I;(I=this.listeners[A])===null||I===void 0||I.delete(_)}once(A,_){return this.on(A,_,{once:!0})}unAll(){this.listeners={}}emit(A,..._){this.listeners[A]&&this.listeners[A].forEach((I=>I(..._)))}}class v extends y{constructor(A){super(),this.subscriptions=[],this.isDestroyed=!1,this.options=A}onInit(){}_init(A){this.isDestroyed&&(this.subscriptions=[],this.isDestroyed=!1),this.wavesurfer=A,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach((A=>A())),this.subscriptions=[],this.isDestroyed=!0,this.wavesurfer=void 0}}function g(E,A){const _=A.xmlns?document.createElementNS(A.xmlns,E):document.createElement(E);for(const[I,B]of Object.entries(A))if(I==="children"&&B)for(const[T,R]of Object.entries(B))R instanceof Node?_.appendChild(R):typeof R=="string"?_.appendChild(document.createTextNode(R)):_.appendChild(g(T,R));else I==="style"?Object.assign(_.style,B):I==="textContent"?_.textContent=B:_.setAttribute(I,B.toString());return _}function M(E,A,_){const I=g(E,A||{});return _?.appendChild(I),I}var W=null;try{var Z=typeof module<"u"&&typeof module.require=="function"&&module.require("worker_threads")||typeof __non_webpack_require__=="function"&&__non_webpack_require__("worker_threads")||typeof require=="function"&&require("worker_threads");W=Z.Worker}catch{}function x(E,A,_){var I=(function(R){return Buffer$1.from(R,"base64").toString("utf8")})(E),B=I.indexOf(`
`,10)+1,T=I.substring(B)+"";return function(R){return new W(T,Object.assign({},R,{eval:!0}))}}function S(E,A,_){var I=(function(P){return atob(P)})(E),B=I.indexOf(`
`,10)+1,T=I.substring(B)+"",R=new Blob([T],{type:"application/javascript"});return URL.createObjectURL(R)}var G=Object.prototype.toString.call(typeof process$1<"u"?process$1:0)==="[object process]";function X(E,A,_){return G?x(E):(function(I){var B;return function(T){return B=B||S(I),new Worker(B,T)}})(E)}var k=X("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Y29uc3QgdD0xZTMqTWF0aC5sb2coMTApLzEwNy45Mzk7ZnVuY3Rpb24gZSh0KXtyZXR1cm4gMjU5NSpNYXRoLmxvZzEwKDErdC83MDApfWZ1bmN0aW9uIGEodCl7cmV0dXJuIDcwMCooTWF0aC5wb3coMTAsdC8yNTk1KS0xKX1mdW5jdGlvbiByKHQpe3JldHVybiBNYXRoLmxvZzEwKE1hdGgubWF4KDEsdCkpfWZ1bmN0aW9uIHModCl7cmV0dXJuIE1hdGgucG93KDEwLHQpfWZ1bmN0aW9uIG4odCl7bGV0IGU9MjYuODEqdC8oMTk2MCt0KS0uNTM7cmV0dXJuIGU8MiYmKGUrPS4xNSooMi1lKSksZT4yMC4xJiYoZSs9LjIyKihlLTIwLjEpKSxlfWZ1bmN0aW9uIG8odCl7cmV0dXJuIHQ8MiYmKHQ9KHQtLjMpLy44NSksdD4yMC4xJiYodD0odCs0LjQyMikvMS4yMiksKHQrLjUzKS8oMjYuMjgtdCkqMTk2MH1mdW5jdGlvbiBsKGUpe3JldHVybiB0Kk1hdGgubG9nMTAoMSsuMDA0MzcqZSl9ZnVuY3Rpb24gaShlKXtyZXR1cm4oTWF0aC5wb3coMTAsZS90KS0xKS8uMDA0Mzd9ZnVuY3Rpb24gaCh0LGUsYSxyLHMpe2NvbnN0IG49cigwKSxvPXIoYS8yKSxsPUFycmF5LmZyb20oe2xlbmd0aDp0fSwoKCk9PkFycmF5KGUvMisxKS5maWxsKDApKSksaT1hL2U7Zm9yKGxldCBlPTA7ZTx0O2UrKyl7Y29uc3QgYT1zKG4rZS90KihvLW4pKSxyPU1hdGguZmxvb3IoYS9pKSxoPXIqaSxjPShhLWgpLygocisxKSppLWgpO2xbZV1bcl09MS1jLGxbZV1bcisxXT1jfXJldHVybiBsfWZ1bmN0aW9uIGModCxlKXtjb25zdCBhPWUubGVuZ3RoLHI9RmxvYXQzMkFycmF5LmZyb20oe2xlbmd0aDphfSwoKCk9PjApKTtmb3IobGV0IHM9MDtzPGE7cysrKWZvcihsZXQgYT0wO2E8dC5sZW5ndGg7YSsrKXJbc10rPXRbYV0qZVtzXVthXTtyZXR1cm4gcn1mdW5jdGlvbiB1KHQsZSxhLHIpe3N3aXRjaCh0aGlzLmJ1ZmZlclNpemU9dCx0aGlzLnNhbXBsZVJhdGU9ZSx0aGlzLmJhbmR3aWR0aD0yL3QqKGUvMiksdGhpcy5zaW5UYWJsZT1uZXcgRmxvYXQzMkFycmF5KHQpLHRoaXMuY29zVGFibGU9bmV3IEZsb2F0MzJBcnJheSh0KSx0aGlzLndpbmRvd1ZhbHVlcz1uZXcgRmxvYXQzMkFycmF5KHQpLHRoaXMucmV2ZXJzZVRhYmxlPW5ldyBVaW50MzJBcnJheSh0KSx0aGlzLnBlYWtCYW5kPTAsdGhpcy5wZWFrPTAsYSl7Y2FzZSJiYXJ0bGV0dCI6Zm9yKGxldCBlPTA7ZTx0O2UrKyl0aGlzLndpbmRvd1ZhbHVlc1tlXT0yLyh0LTEpKigodC0xKS8yLU1hdGguYWJzKGUtKHQtMSkvMikpO2JyZWFrO2Nhc2UiYmFydGxldHRIYW5uIjpmb3IobGV0IGU9MDtlPHQ7ZSsrKXRoaXMud2luZG93VmFsdWVzW2VdPS42Mi0uNDgqTWF0aC5hYnMoZS8odC0xKS0uNSktLjM4Kk1hdGguY29zKDIqTWF0aC5QSSplLyh0LTEpKTticmVhaztjYXNlImJsYWNrbWFuIjpyPXJ8fC4xNjtmb3IobGV0IGU9MDtlPHQ7ZSsrKXRoaXMud2luZG93VmFsdWVzW2VdPSgxLXIpLzItLjUqTWF0aC5jb3MoMipNYXRoLlBJKmUvKHQtMSkpK3IvMipNYXRoLmNvcyg0Kk1hdGguUEkqZS8odC0xKSk7YnJlYWs7Y2FzZSJjb3NpbmUiOmZvcihsZXQgZT0wO2U8dDtlKyspdGhpcy53aW5kb3dWYWx1ZXNbZV09TWF0aC5jb3MoTWF0aC5QSSplLyh0LTEpLU1hdGguUEkvMik7YnJlYWs7Y2FzZSJnYXVzcyI6cj1yfHwuMjU7Zm9yKGxldCBlPTA7ZTx0O2UrKyl0aGlzLndpbmRvd1ZhbHVlc1tlXT1NYXRoLnBvdyhNYXRoLkUsLS41Kk1hdGgucG93KChlLSh0LTEpLzIpLyhyKih0LTEpLzIpLDIpKTticmVhaztjYXNlImhhbW1pbmciOmZvcihsZXQgZT0wO2U8dDtlKyspdGhpcy53aW5kb3dWYWx1ZXNbZV09LjU0LS40NipNYXRoLmNvcygyKk1hdGguUEkqZS8odC0xKSk7YnJlYWs7Y2FzZSJoYW5uIjpjYXNlIHZvaWQgMDpmb3IobGV0IGU9MDtlPHQ7ZSsrKXRoaXMud2luZG93VmFsdWVzW2VdPS41KigxLU1hdGguY29zKDIqTWF0aC5QSSplLyh0LTEpKSk7YnJlYWs7Y2FzZSJsYW5jem96Ijpmb3IobGV0IGU9MDtlPHQ7ZSsrKXRoaXMud2luZG93VmFsdWVzW2VdPU1hdGguc2luKE1hdGguUEkqKDIqZS8odC0xKS0xKSkvKE1hdGguUEkqKDIqZS8odC0xKS0xKSk7YnJlYWs7Y2FzZSJyZWN0YW5ndWxhciI6Zm9yKGxldCBlPTA7ZTx0O2UrKyl0aGlzLndpbmRvd1ZhbHVlc1tlXT0xO2JyZWFrO2Nhc2UidHJpYW5ndWxhciI6Zm9yKGxldCBlPTA7ZTx0O2UrKyl0aGlzLndpbmRvd1ZhbHVlc1tlXT0yL3QqKHQvMi1NYXRoLmFicyhlLSh0LTEpLzIpKTticmVhaztkZWZhdWx0OnRocm93IEVycm9yKCJObyBzdWNoIHdpbmRvdyBmdW5jdGlvbiAnIithKyInIil9bGV0IHM9MSxuPXQ+PjE7Zm9yKDtzPHQ7KXtmb3IobGV0IHQ9MDt0PHM7dCsrKXRoaXMucmV2ZXJzZVRhYmxlW3Qrc109dGhpcy5yZXZlcnNlVGFibGVbdF0rbjtzPDw9MSxuPj49MX1mb3IobGV0IGU9MDtlPHQ7ZSsrKXRoaXMuc2luVGFibGVbZV09TWF0aC5zaW4oLU1hdGguUEkvZSksdGhpcy5jb3NUYWJsZVtlXT1NYXRoLmNvcygtTWF0aC5QSS9lKTt0aGlzLmNhbGN1bGF0ZVNwZWN0cnVtPWZ1bmN0aW9uKHQpe2NvbnN0IGU9dGhpcy5idWZmZXJTaXplLGE9dGhpcy5jb3NUYWJsZSxyPXRoaXMuc2luVGFibGUscz10aGlzLnJldmVyc2VUYWJsZSxuPW5ldyBGbG9hdDMyQXJyYXkoZSksbz1uZXcgRmxvYXQzMkFycmF5KGUpLGw9Mi90aGlzLmJ1ZmZlclNpemUsaT1NYXRoLnNxcnQsaD1uZXcgRmxvYXQzMkFycmF5KGUvMik7bGV0IGMsdSxmO2NvbnN0IE09TWF0aC5mbG9vcihNYXRoLmxvZyhlKS9NYXRoLkxOMik7aWYoTWF0aC5wb3coMixNKSE9PWUpdGhyb3ciSW52YWxpZCBidWZmZXIgc2l6ZSwgbXVzdCBiZSBhIHBvd2VyIG9mIDIuIjtpZihlIT09dC5sZW5ndGgpdGhyb3ciU3VwcGxpZWQgYnVmZmVyIGlzIG5vdCB0aGUgc2FtZSBzaXplIGFzIGRlZmluZWQgRkZULiBGRlQgU2l6ZTogIitlKyIgQnVmZmVyIFNpemU6ICIrdC5sZW5ndGg7bGV0IHcsYixkLHAsZyxtLGsseSxUPTE7Zm9yKGxldCBhPTA7YTxlO2ErKyluW2FdPXRbc1thXV0qdGhpcy53aW5kb3dWYWx1ZXNbc1thXV0sb1thXT0wO2Zvcig7VDxlOyl7dz1hW1RdLGI9cltUXSxkPTEscD0wO2ZvcihsZXQgdD0wO3Q8VDt0Kyspe2xldCBhPXQ7Zm9yKDthPGU7KWc9YStULG09ZCpuW2ddLXAqb1tnXSxrPWQqb1tnXStwKm5bZ10sbltnXT1uW2FdLW0sb1tnXT1vW2FdLWssblthXSs9bSxvW2FdKz1rLGErPVQ8PDE7eT1kLGQ9eSp3LXAqYixwPXkqYitwKnd9VDw8PTF9Zm9yKGxldCB0PTAsYT1lLzI7dDxhO3QrKyljPW5bdF0sdT1vW3RdLGY9bCppKGMqYyt1KnUpLGY+dGhpcy5wZWFrJiYodGhpcy5wZWFrQmFuZD10LHRoaXMucGVhaz1mKSxoW3RdPWY7cmV0dXJuIGh9fWxldCBmPW51bGw7c2VsZi5vbm1lc3NhZ2U9ZnVuY3Rpb24odCl7Y29uc3R7dHlwZTpNLGlkOncsYXVkaW9EYXRhOmIsb3B0aW9uczpkfT10LmRhdGE7aWYoImNhbGN1bGF0ZUZyZXF1ZW5jaWVzIj09PU0pdHJ5e2NvbnN0IHQ9ZnVuY3Rpb24odCxNKXtjb25zdHtzdGFydFRpbWU6dyxlbmRUaW1lOmIsc2FtcGxlUmF0ZTpkLGZmdFNhbXBsZXM6cCx3aW5kb3dGdW5jOmcsYWxwaGE6bSxub3ZlcmxhcDprLHNjYWxlOnksZ2FpbkRCOlQscmFuZ2VEQjpGLHNwbGl0Q2hhbm5lbHM6SX09TSxWPU1hdGguZmxvb3IodypkKSxBPU1hdGguZmxvb3IoYipkKSxQPUk/dC5sZW5ndGg6MTtmJiZmLmJ1ZmZlclNpemU9PT1wfHwoZj1uZXcgdShwLGQsZyxtfHwuMTYpKTtjb25zdCBTPWZ1bmN0aW9uKHQsYyx1LGYpe3N3aXRjaCh0KXtjYXNlIm1lbCI6cmV0dXJuIGgoYyx1LGYsZSxhKTtjYXNlImxvZ2FyaXRobWljIjpyZXR1cm4gaChjLHUsZixyLHMpO2Nhc2UiYmFyayI6cmV0dXJuIGgoYyx1LGYsbixvKTtjYXNlImVyYiI6cmV0dXJuIGgoYyx1LGYsbCxpKTtkZWZhdWx0OnJldHVybiBudWxsfX0oeSxwLzIscCxkKTtsZXQgej1rfHxNYXRoLm1heCgwLE1hdGgucm91bmQoLjUqcCkpO2NvbnN0IHY9LjUqcDt6PU1hdGgubWluKHosdik7Y29uc3QgQj1NYXRoLm1heCg2NCwuMjUqcCkscT1NYXRoLm1heChCLHAteikseD1bXTtmb3IobGV0IGU9MDtlPFA7ZSsrKXtjb25zdCBhPXRbZV0scj1bXTtmb3IobGV0IHQ9Vjt0K3A8QTt0Kz1xKXtjb25zdCBlPWEuc2xpY2UodCx0K3ApO2xldCBzPWYuY2FsY3VsYXRlU3BlY3RydW0oZSk7UyYmKHM9YyhzLFMpKTtjb25zdCBuPW5ldyBVaW50OEFycmF5KHMubGVuZ3RoKSxvPVQrRjtmb3IobGV0IHQ9MDt0PHMubGVuZ3RoO3QrKyl7Y29uc3QgZT1zW3RdPjFlLTEyP3NbdF06MWUtMTIsYT0yMCpNYXRoLmxvZzEwKGUpO25bdF09YTwtbz8wOmE+LVQ/MjU1Ok1hdGgucm91bmQoKGErVCkvRioyNTUpfXIucHVzaChuKX14LnB1c2gocil9cmV0dXJuIHh9KGIsZCksTT17dHlwZToiZnJlcXVlbmNpZXNSZXN1bHQiLGlkOncscmVzdWx0OnR9O3NlbGYucG9zdE1lc3NhZ2UoTSl9Y2F0Y2godCl7Y29uc3QgZT17dHlwZToiZnJlcXVlbmNpZXNSZXN1bHQiLGlkOncsZXJyb3I6dCBpbnN0YW5jZW9mIEVycm9yP3QubWVzc2FnZTpTdHJpbmcodCl9O3NlbGYucG9zdE1lc3NhZ2UoZSl9fX0oKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3BlY3Ryb2dyYW0td29ya2VyLmpzLm1hcAoK");class C extends v{static create(A){return new C(A||{})}constructor(A){var _,I;if(super(A),this.canvases=[],this.useWebWorker=!1,this.worker=null,this.workerPromises=new Map,this.cachedFrequencies=null,this.cachedResampledData=null,this.cachedBuffer=null,this.cachedWidth=0,this.renderTimeout=null,this.isRendering=!1,this.lastZoomLevel=0,this.renderThrottleMs=50,this.zoomThreshold=.05,this.drawnCanvases={},this.pendingBitmaps=new Set,this.isScrollable=!1,this.scrollUnsubscribe=null,this.frequenciesDataUrl=A.frequenciesDataUrl,this.frequenciesDataUrl&&!A.sampleRate)throw new Error("sampleRate option is required when using frequenciesDataUrl");this.container=typeof A.container=="string"?document.querySelector(A.container):A.container,this.useWebWorker=A.useWebWorker===!0,this.colorMap=(function(B="roseus"){if(B&&typeof B!="string"){if(B.length<256)throw new Error("Colormap must contain 256 elements");for(let R=0;R<B.length;R++)if(B[R].length!==4)throw new Error("ColorMap entries must contain 4 values");return B}const T=p[B];if(!T)throw Error("No such colormap '"+B+"'");return T()})(A.colorMap),this.fftSamples=A.fftSamples||512,this.height=A.height||200,this.noverlap=A.noverlap||null,this.windowFunc=A.windowFunc||"hann",this.alpha=A.alpha,this.frequencyMin=A.frequencyMin||0,this.frequencyMax=A.frequencyMax||0,this.gainDB=(_=A.gainDB)!==null&&_!==void 0?_:20,this.rangeDB=(I=A.rangeDB)!==null&&I!==void 0?I:80,this.scale=A.scale||"mel",this.numMelFilters=this.fftSamples/2,this.numLogFilters=this.fftSamples/2,this.numBarkFilters=this.fftSamples/2,this.numErbFilters=this.fftSamples/2,A.maxCanvasWidth&&(C.MAX_CANVAS_WIDTH=A.maxCanvasWidth),this.renderThrottleMs=50,this.zoomThreshold=.05,this.createWrapper(),this.createCanvas(),this.useWebWorker&&this.initializeWorker()}initializeWorker(){if(typeof window<"u"&&typeof Worker<"u")try{this.worker=new k,this.worker.onmessage=A=>{const{type:_,id:I,result:B,error:T}=A.data;if(_==="frequenciesResult"){const R=this.workerPromises.get(I);R&&(this.workerPromises.delete(I),T?R.reject(new Error(T)):R.resolve(B))}},this.worker.onerror=A=>{console.warn("Spectrogram worker error, falling back to main thread:",A),this.worker=null}}catch(A){console.warn("Failed to initialize worker, falling back to main thread:",A),this.worker=null}else console.warn("Worker not available in this environment, using main thread calculation")}onInit(){this.wrapper||this.createWrapper(),this.canvasContainer||this.createCanvas(),this.container=this.wavesurfer.getWrapper(),this.container.appendChild(this.wrapper),this.wavesurfer.options.fillParent&&Object.assign(this.wrapper.style,{width:"100%",overflowX:"hidden",overflowY:"hidden"}),this.subscriptions.push(this.wavesurfer.on("redraw",(()=>this.throttledRender()))),this.wavesurfer.getDecodedData()&&setTimeout((()=>{this.throttledRender()}),0)}destroy(){this.unAll(),this.wavesurfer&&(typeof this._onReady=="function"&&this.wavesurfer.un("ready",this._onReady),typeof this._onRender=="function"&&this.wavesurfer.un("redraw",this._onRender)),this.renderTimeout&&(clearTimeout(this.renderTimeout),this.renderTimeout=null),this.scrollUnsubscribe&&(this.scrollUnsubscribe(),this.scrollUnsubscribe=null),this.pendingBitmaps.clear(),this.worker&&(this.worker.terminate(),this.worker=null),this.cachedFrequencies=null,this.cachedResampledData=null,this.cachedBuffer=null,this.clearCanvases(),this.canvasContainer&&(this.canvasContainer.remove(),this.canvasContainer=null),this.wrapper&&(this.wrapper.remove(),this.wrapper=null),this.labelsEl&&(this.labelsEl.remove(),this.labelsEl=null),this.container=null,this.isRendering=!1,this.lastZoomLevel=0,this.wavesurfer=null,this.util=null,this.options=null,super.destroy()}loadFrequenciesData(A){return e$1(this,void 0,void 0,(function*(){const _=yield fetch(A);if(!_.ok)throw new Error("Unable to fetch frequencies data");const I=yield _.json();this.drawSpectrogram(I)}))}getFrequenciesData(){return e$1(this,void 0,void 0,(function*(){var A;const _=(A=this.wavesurfer)===null||A===void 0?void 0:A.getDecodedData();if(!_)return null;if(this.cachedBuffer===_&&this.cachedFrequencies)return this.cachedFrequencies;{const I=yield this.getFrequencies(_);return this.cachedFrequencies=I,this.cachedBuffer=_,I}}))}clearCache(){this.cachedFrequencies=null,this.cachedResampledData=null,this.cachedBuffer=null,this.cachedWidth=0,this.lastZoomLevel=0}createWrapper(){var A,_;this.wrapper=M("div",{style:{display:"block",position:"relative",userSelect:"none"}}),this.options.labels&&(this.labelsEl=M("canvas",{part:"spec-labels",style:{position:"absolute",zIndex:9,width:"55px",height:"100%"}},this.wrapper)),this._onWrapperClick=(A=this.wrapper,_=this.emit.bind(this),I=>{const B=A.getBoundingClientRect(),T=I.clientX-B.left,R=B.width;_("click",T/R)}),this.wrapper.addEventListener("click",this._onWrapperClick)}createCanvas(){this.canvasContainer=M("div",{style:{position:"absolute",left:0,top:0,width:"100%",height:"100%",zIndex:4}},this.wrapper)}createSingleCanvas(A,_,I){const B=M("canvas",{style:{position:"absolute",left:`${Math.round(I)}px`,top:"0",width:`${A}px`,height:`${_}px`,zIndex:4}});return B.width=Math.round(A),B.height=Math.round(_),this.canvasContainer.appendChild(B),B}clearCanvases(){this.canvases.forEach((A=>A.remove())),this.canvases=[],this.drawnCanvases={}}clearExcessCanvases(){Object.keys(this.drawnCanvases).length>C.MAX_NODES&&this.clearCanvases()}throttledRender(){var A;if(this.renderTimeout&&clearTimeout(this.renderTimeout),this.isRendering)return;const _=((A=this.wavesurfer)===null||A===void 0?void 0:A.options.minPxPerSec)||0;Math.abs(_-this.lastZoomLevel)/Math.max(_,this.lastZoomLevel,1)<this.zoomThreshold&&this.cachedFrequencies?this.renderTimeout=window.setTimeout((()=>{this.fastRender()}),this.renderThrottleMs):this.renderTimeout=window.setTimeout((()=>{this.render()}),this.renderThrottleMs)}render(){return e$1(this,void 0,void 0,(function*(){var A,_;if(!this.isRendering){this.isRendering=!0;try{this.frequenciesDataUrl?yield this.loadFrequenciesData(this.frequenciesDataUrl):!((A=this.wavesurfer)===null||A===void 0)&&A.getDecodedData()&&(yield this.getFrequenciesData(),this.drawSpectrogram(this.cachedFrequencies)),this.lastZoomLevel=((_=this.wavesurfer)===null||_===void 0?void 0:_.options.minPxPerSec)||0}finally{this.isRendering=!1}}}))}fastRender(){var A;if(!this.isRendering&&this.cachedFrequencies){this.isRendering=!0;try{this.drawSpectrogram(this.cachedFrequencies),this.lastZoomLevel=((A=this.wavesurfer)===null||A===void 0?void 0:A.options.minPxPerSec)||0}finally{this.isRendering=!1}}}drawSpectrogram(A){var _,I,B;isNaN(A[0][0])||(A=[A]),this.clearCanvases();const T=this.height*A.length;this.wrapper.style.height=T+"px";const R=this.getWidth(),P=Math.min(C.MAX_CANVAS_WIDTH,R);if(R===0||T===0)return;const D=Math.ceil(R/P);let F;const L=((_=A[0])===null||_===void 0?void 0:_.length)||0;R!==L?this.cachedResampledData&&this.cachedWidth===R?F=this.cachedResampledData:(F=this.efficientResample(A,R),this.cachedResampledData=F,this.cachedWidth=R):F=A;const U=!((I=this.buffer)===null||I===void 0)&&I.sampleRate?this.buffer.sampleRate/2:(this.options.sampleRate||0)/2,V=this.frequencyMin,K=this.frequencyMax,J=K>U,ee=J?this.colorMap[this.colorMap.length-1]:null,ie=ne=>{if(ne<0||ne>=D||this.drawnCanvases[ne])return;this.drawnCanvases[ne]=!0;const ce=ne*P,fe=Math.min(P,R-ce);if(fe<=0)return;const de=this.createSingleCanvas(fe,T,ce);this.canvases.push(de);const pe=de.getContext("2d");if(pe){J&&ee&&(pe.fillStyle=`rgba(${255*ee[0]}, ${255*ee[1]}, ${255*ee[2]}, ${ee[3]})`,pe.fillRect(0,0,fe,T));for(let ve=0;ve<F.length;ve++)this.drawSpectrogramSegment(F[ve],pe,fe,this.height,ve*this.height,ce,R,U,V,K)}};if(this.isScrollable=R>this.getWrapperWidth(),this.scrollUnsubscribe&&(this.scrollUnsubscribe(),this.scrollUnsubscribe=null),!this.isScrollable||D<=3)for(let ne=0;ne<D;ne++)ie(ne);else{const ne=()=>{var pe;const ve=(pe=this.wavesurfer)===null||pe===void 0?void 0:pe.getWrapper();if(!ve)return;const ye=ve.scrollLeft||0,_e=ve.clientWidth||0,be=Math.max(0,ye-.5*_e),Te=Math.min(R,ye+1.5*_e),ue=Math.floor(be/R*D),O=Math.min(Math.ceil(Te/R*D),D-1);Object.keys(this.drawnCanvases).length>C.MAX_NODES&&this.clearExcessCanvases();for(let z=ue;z<=O;z++)ie(z)};ne();let ce=null;const fe=()=>{ce&&clearTimeout(ce),ce=window.setTimeout(ne,16)},de=(B=this.wavesurfer)===null||B===void 0?void 0:B.getWrapper();de&&(de.addEventListener("scroll",fe,{passive:!0}),this.scrollUnsubscribe=()=>{de.removeEventListener("scroll",fe),ce&&clearTimeout(ce)})}this.options.labels&&this.loadLabels(this.options.labelsBackground,"12px","12px","",this.options.labelsColor,this.options.labelsHzColor||this.options.labelsColor,"center","#specLabels",A.length),this.emit("ready")}drawSpectrogramSegment(A,_,I,B,T,R,P,D,F,L){const U=A[0].length,V=Math.floor(R/P*A.length),K=Math.min(Math.ceil((R+I)/P*A.length),A.length),J=A.slice(V,K);if(J.length===0)return;const ee=J.length,ie=new ImageData(ee,U),ne=ie.data;this.fillImageDataQuality(ne,J,ee,U);const ce=c(F,this.scale)/c(D,this.scale),fe=c(L,this.scale)/c(D,this.scale),de=Math.min(1,fe),pe=createImageBitmap(ie,0,Math.round(U*(1-de)),ee,Math.round(U*(de-ce)));this.pendingBitmaps.add(pe),pe.then((ve=>{if(this.pendingBitmaps.delete(pe),_.canvas.parentNode){const ye=B*de/fe,_e=T+B*(1-de/fe);_.drawImage(ve,0,_e,I,ye),"close"in ve&&ve.close()}})).catch((ve=>{this.pendingBitmaps.delete(pe)}))}getWidth(){return this.wavesurfer.getWrapper().offsetWidth}getWrapperWidth(){var A,_;return((_=(A=this.wavesurfer)===null||A===void 0?void 0:A.getWrapper())===null||_===void 0?void 0:_.clientWidth)||0}calculateFrequenciesWithWorker(A){return e$1(this,void 0,void 0,(function*(){var _,I;if(!this.worker)throw new Error("Worker not available");const B=this.fftSamples,T=((_=this.options.splitChannels)!==null&&_!==void 0?_:!((I=this.wavesurfer)===null||I===void 0)&&I.options.splitChannels)?A.numberOfChannels:1;let R=this.noverlap;if(!R){const L=this.getWidth(),U=A.length/L;R=Math.max(0,Math.round(B-U))}const P=[];for(let L=0;L<T;L++)P.push(A.getChannelData(L));const D=`${Date.now()}_${Math.random()}`,F=new Promise(((L,U)=>{this.workerPromises.set(D,{resolve:L,reject:U}),setTimeout((()=>{this.workerPromises.has(D)&&(this.workerPromises.delete(D),U(new Error("Worker timeout")))}),3e4)}));return this.worker.postMessage({type:"calculateFrequencies",id:D,audioData:P,options:{startTime:0,endTime:A.duration,sampleRate:A.sampleRate,fftSamples:this.fftSamples,windowFunc:this.windowFunc,alpha:this.alpha,noverlap:R,scale:this.scale,gainDB:this.gainDB,rangeDB:this.rangeDB,splitChannels:this.options.splitChannels||!1}}),F}))}getFrequencies(A){return e$1(this,void 0,void 0,(function*(){var _,I;if(this.frequencyMax=this.frequencyMax||A.sampleRate/2,this.buffer=A,!A)return[];if(this.useWebWorker&&this.worker)try{return yield this.calculateFrequenciesWithWorker(A)}catch(ie){console.warn("Worker calculation failed, falling back to main thread:",ie)}const B=this.fftSamples,T=((_=this.options.splitChannels)!==null&&_!==void 0?_:!((I=this.wavesurfer)===null||I===void 0)&&I.options.splitChannels)?A.numberOfChannels:1,R=A.sampleRate,P=[];let D=this.noverlap;if(!D){const ie=this.getWidth(),ne=A.length/ie;D=Math.max(0,Math.round(B-ne))}let F=D||Math.max(0,Math.round(.5*B));const L=.5*B;F=Math.min(F,L);const U=Math.max(64,.25*B),V=Math.max(U,B-F),K=new w(B,R,this.windowFunc,this.alpha),J=this.fftSamples/2,ee=(function(ie,ne,ce,fe){switch(ie){case"mel":return d(ne,ce,fe,s,i);case"logarithmic":return d(ne,ce,fe,r,n);case"bark":return d(ne,ce,fe,a,l);case"erb":return d(ne,ce,fe,o,h);default:return null}})(this.scale,J,this.fftSamples,R);for(let ie=0;ie<T;ie++){const ne=A.getChannelData(ie),ce=[];for(let fe=0;fe+B<ne.length;fe+=V){const de=ne.slice(fe,fe+B);let pe=K.calculateSpectrum(de);ee&&(pe=u(pe,ee));const ve=new Uint8Array(pe.length),ye=this.gainDB+this.rangeDB;for(let _e=0;_e<pe.length;_e++){const be=pe[_e]>1e-12?pe[_e]:1e-12,Te=20*Math.log10(be);Te<-ye?ve[_e]=0:Te>-this.gainDB?ve[_e]=255:ve[_e]=Math.round((Te+this.gainDB)/this.rangeDB*255)}ce.push(ve)}P.push(ce)}return P}))}loadLabels(A,_,I,B,T,R,P,D,F){A=A||"rgba(68,68,68,0)",_=_||"12px",I=I||"12px",B=B||"Helvetica",T=T||"#fff",R=R||"#fff",P=P||"center";const L=this.height||512,U=L/256*5;this.frequencyMin,this.frequencyMax;const V=this.labelsEl.getContext("2d"),K=window.devicePixelRatio;if(this.labelsEl.height=this.height*F*K,this.labelsEl.width=55*K,V.scale(K,K),V)for(let J=0;J<F;J++){let ee;for(V.fillStyle=A,V.fillRect(0,J*L,55,(1+J)*L),V.fill(),ee=0;ee<=U;ee++){V.textAlign=P,V.textBaseline="middle";const ie=b(ee,U,this.frequencyMin,this.frequencyMax,this.scale),ne=m(ie),ce=f(ie),fe=16;let de=(1+J)*L-ee/U*L;de=Math.min(Math.max(de,J*L+10),(1+J)*L-10),V.fillStyle=R,V.font=I+" "+B,V.fillText(ce,fe+24,de),V.fillStyle=T,V.font=_+" "+B,V.fillText(ne,fe,de)}}}efficientResample(A,_){return A.map((I=>this.resampleChannel(I,_)))}resampleChannel(A,_){var I;const B=A.length,T=((I=A[0])===null||I===void 0?void 0:I.length)||0;if(B===_||_===0)return A;const R=B/_,P=new Array(_);if(R>=1)for(let D=0;D<_;D++){const F=Math.floor(D*R),L=Math.min(Math.ceil((D+1)*R),B),U=L-F,V=new Uint8Array(T);if(U===1)V.set(A[F]);else for(let K=0;K<T;K++){let J=0;for(let ee=F;ee<L;ee++)J+=A[ee][K];V[K]=Math.round(J/U)}P[D]=V}else for(let D=0;D<_;D++){const F=D*R,L=Math.floor(F),U=Math.min(L+1,B-1),V=F-L,K=new Uint8Array(T);if(V===0||L===U)K.set(A[L]);else{const J=A[L],ee=A[U],ie=1-V;for(let ne=0;ne<T;ne++)K[ne]=Math.round(J[ne]*ie+ee[ne]*V)}P[D]=K}return P}fillImageDataQuality(A,_,I,B){const T=this.colorMap;for(let R=0;R<I;R++){const P=_[R];for(let D=0;D<B;D++){const F=T[P[D]],L=4*((B-D-1)*I+R);A[L]=255*F[0],A[L+1]=255*F[1],A[L+2]=255*F[2],A[L+3]=255*F[3]}}}}C.MAX_CANVAS_WIDTH=3e4,C.MAX_NODES=10;class SpectrogramProcessor{waveSurfer;constructor(){const A=u$1.create({container:"#a",sampleRate:44100,width:400}),_=C.create({labels:!1,splitChannels:!1,scale:"linear",frequencyMax:22050,frequencyMin:0,fftSamples:512,gainDB:0,useWebWorker:!0,maxCanvasWidth:2e3,height:400});A.registerPlugin(_),_.on("ready",()=>{const I=document.querySelector("#a > div")?.shadowRoot?.querySelector(".wrapper > div:last-child canvas");I&&(console.log("Spectrogram Ready"),setTimeout(()=>{I.toBlob(async B=>{if(!B)return;const T=URL.createObjectURL(B),R=await Assets.load({src:T,parser:"texture"}),P=inject("ui/sidepanel/modding/spectrogram");P&&P.setTexture(R)})},2e3))}),this.waveSurfer=A}initSpectrogram(A){this.waveSurfer.load(A)}}class Audio extends ScopedClass{constructor(A){super(),this.audioContext=A,this.localGainNode=A.createGain(),this.localGainNode.gain.value=inject("config/audio")?.musicVolume??.8,inject("config/audio")?.onChange("musicVolume",_=>{this.localGainNode.gain.value=_}),setContext(A),this.lookahead=.1,this.spectrogramProcessor=new SpectrogramProcessor}localGainNode;previousTimestamp=0;_currentTime=0;startTime=0;player;normalPlayer;grainPlayer;state="STOPPED";init=!1;spectrogramProcessor;get playbackRate(){return this.context.consume("beatmapset")?.playbackRate??1}get currentTime(){if(this.state==="STOPPED")return this._currentTime;const A=performance.now()-this.previousTimestamp-(this.audioContext.currentTime*1e3-this.startTime);return A>20&&(this.pause(),this.play(),console.warn(`Audio desynced: ${A.toFixed(2)}ms`)),this._currentTime+(performance.now()-this.previousTimestamp)*this.playbackRate>this.duration?(this.state==="PLAYING"&&(this.context.consume("beatmapset")?.toggle(),this.context.consume("beatmapset")?.seek(0)),this.duration):this._currentTime+(performance.now()-this.previousTimestamp)*this.playbackRate}set currentTime(A){if(!this.player)throw new Error("You haven't initiated audio yet!");const _=this.state;_==="PLAYING"&&this.pause(),this._currentTime=A>this.player.buffer.duration*1e3||A<0?0:A,getTransport().seconds=this._currentTime/1e3/this.playbackRate+this.lookahead,_==="PLAYING"&&this.play()}async createBufferNode(A){const _=URL.createObjectURL(A);this.spectrogramProcessor.initSpectrogram(_),this.grainPlayer=new GrainPlayer(_),this.normalPlayer=new Player(_),this.player=this.normalPlayer,this.player.sync().start(0),await loaded(),getTransport().seconds=this.lookahead,this.init=!0}_lookahead=.1;get lookahead(){return this._lookahead}set lookahead(A){this._lookahead=A,getContext().lookAhead=A}toggle(){if(this.state==="PLAYING"){this.pause();return}const A=this.context.consume("beatmapset")?.playbackRate??1;if(this.player=A!==1?this.grainPlayer:this.normalPlayer,this.grainPlayer){const _=6e4/(this.context.consume("beatmapset")?.master?.data.bpm??120)/2/1e3;this.grainPlayer.playbackRate=A,this.grainPlayer.grainSize=_,this.grainPlayer.overlap=_/16}if(this.state==="STOPPED"){this.play();return}}play(){if(this.state==="PLAYING")throw new Error("You cannot start an already started audio!");if(!this.player)throw new Error("You haven't initiated audio yet!");this.state="PLAYING",getTransport().seconds=this._currentTime/1e3/this.playbackRate+this.lookahead,this.startTime=this.audioContext.currentTime*1e3,this.player?.unsync(),this.player?.sync().start(0),getTransport().start(void 0),connect(this.player,this.localGainNode),this.localGainNode.connect(this.context.consume("masterGainNode")),this.previousTimestamp=performance.now()}pause(){if(this.state==="STOPPED")throw new Error("You cannot stop an already stopped audio!");if(!this.player)throw new Error("You haven't initiated audio yet!");this.state="STOPPED",getTransport().pause(),this._currentTime+=(performance.now()-this.previousTimestamp)*this.playbackRate,disconnect(this.player,this.localGainNode),this.localGainNode.disconnect()}get duration(){return(this.player?.buffer.duration??0)*1e3}}var lib$9={},errors$3={},parsingError={},hasRequiredParsingError;function requireParsingError(){if(hasRequiredParsingError)return parsingError;hasRequiredParsingError=1,Object.defineProperty(parsingError,"__esModule",{value:!0}),parsingError.ParsingError=void 0;class E extends Error{constructor(_,I){super(`Unsupported type of line: [${I}] "${_}"`),this.line=_,this.lineNumber=I}}return parsingError.ParsingError=E,parsingError}var protoError={},hasRequiredProtoError;function requireProtoError(){if(hasRequiredProtoError)return protoError;hasRequiredProtoError=1,Object.defineProperty(protoError,"__esModule",{value:!0}),protoError.ProtoError=void 0;class E extends Error{constructor(_){super(`Unsupported section name "__proto__": [${_}]"`),this.lineNumber=_}}return protoError.ProtoError=E,protoError}var errorsSymbol={},hasRequiredErrorsSymbol;function requireErrorsSymbol(){return hasRequiredErrorsSymbol||(hasRequiredErrorsSymbol=1,Object.defineProperty(errorsSymbol,"__esModule",{value:!0}),errorsSymbol.$Errors=void 0,errorsSymbol.$Errors=Symbol("Errors of parsing")),errorsSymbol}var hasRequiredErrors$3;function requireErrors$3(){return hasRequiredErrors$3||(hasRequiredErrors$3=1,(function(E){var A=errors$3&&errors$3.__createBinding||(Object.create?(function(I,B,T,R){R===void 0&&(R=T);var P=Object.getOwnPropertyDescriptor(B,T);(!P||("get"in P?!B.__esModule:P.writable||P.configurable))&&(P={enumerable:!0,get:function(){return B[T]}}),Object.defineProperty(I,R,P)}):(function(I,B,T,R){R===void 0&&(R=T),I[R]=B[T]})),_=errors$3&&errors$3.__exportStar||function(I,B){for(var T in I)T!=="default"&&!Object.prototype.hasOwnProperty.call(B,T)&&A(B,I,T)};Object.defineProperty(E,"__esModule",{value:!0}),_(requireParsingError(),E),_(requireProtoError(),E),_(requireErrorsSymbol(),E)})(errors$3)),errors$3}var parse$2={},autoType={},hasRequiredAutoType;function requireAutoType(){if(hasRequiredAutoType)return autoType;hasRequiredAutoType=1,Object.defineProperty(autoType,"__esModule",{value:!0}),autoType.autoType=void 0;function E(A){if(A==="")return;const _=A.toLowerCase();return _==="true"||_==="false"?_==="true":!Number.isNaN(Number(A))||_==="nan"?Number(A):_==="null"?null:A}return autoType.autoType=E,autoType}var proto={},hasRequiredProto;function requireProto(){return hasRequiredProto||(hasRequiredProto=1,Object.defineProperty(proto,"__esModule",{value:!0}),proto.$Proto=void 0,proto.$Proto=Symbol("__proto__")),proto}var hasRequiredParse$1;function requireParse$1(){return hasRequiredParse$1||(hasRequiredParse$1=1,(function(E){Object.defineProperty(E,"__esModule",{value:!0}),E.decode=E.parse=E.KeyMergeStrategies=void 0;const A=requireErrors$3(),_=requireAutoType(),I=requireProto();E.KeyMergeStrategies={OVERRIDE:"override",JOIN_TO_ARRAY:"join-to-array"};const B=/\[(.*)]$/;function T(R,P){const{delimiter:D="=",comment:F=";",nothrow:L=!1,autoTyping:U=!0,dataSections:V=[],protoSymbol:K=!1,keyMergeStrategy:J=E.KeyMergeStrategies.OVERRIDE}=Object.assign({},P);let ee;typeof U=="function"?ee=U:ee=U?_.autoType:be=>be;const ie=J===E.KeyMergeStrategies.OVERRIDE,ne=!ie&&J===E.KeyMergeStrategies.JOIN_TO_ARRAY,ce=!ie&&!ne&&typeof J=="function",fe=R.split(/\r?\n/g);let de=0,pe="",ve=!1;const ye={},_e=Array.isArray(F)?F:[F];for(const be of fe){de+=1;const Te=be.trim();if(Te.length===0||_e.some(O=>Te.startsWith(O)))continue;if(Te[0]==="["){const O=Te.match(B);if(O){if(pe=O[1].trim(),pe==="__proto__")if(K)pe=I.$Proto;else throw new A.ProtoError(de);ve=V.includes(pe),pe in ye||(ye[pe]=ve?[]:Object.create(null));continue}}else if(ve){ye[pe].push(be);continue}else if(Te.includes(D)){const O=Te.indexOf(D),z=Te.slice(0,O).trim(),Y=Te.slice(O+1).trim(),te=ee(Y,pe,z),oe=pe!==""?ye[pe]:ye;if(ie)oe[z]=te;else if(ne)if(z in oe){const le=oe[z];Array.isArray(le)?le.push(te):oe[z]=[le,te]}else oe[z]=te;else ce&&J(oe,z,te);continue}const ue=new A.ParsingError(Te,de);if(L)A.$Errors in ye?ye[A.$Errors].push(ue):ye[A.$Errors]=[ue];else throw ue}return ye}E.parse=T,E.decode=T})(parse$2)),parse$2}var stringify$1={},hasRequiredStringify$2;function requireStringify$2(){if(hasRequiredStringify$2)return stringify$1;hasRequiredStringify$2=1,Object.defineProperty(stringify$1,"__esModule",{value:!0}),stringify$1.encode=stringify$1.stringify=void 0;function E(A,_){const{delimiter:I="=",blankLine:B=!0,spaceBefore:T=!1,spaceAfter:R=!1,skipUndefined:P=!1}=Object.assign({},_),D=[],F=(V,K)=>{let J=V;return T&&(J+=" "),J+=I,R&&(J+=" "),J+=K,J};let L=null,U=0;for(const V of Object.keys(A)){for(;!L||L.length!==U;){let K;L?(K=L[U],U+=1):K=V;const J=L?A[V][K]:A[K],ee=typeof J;if(["boolean","string","number"].includes(ee)){if(D.push(F(K,J.toString())),!L)break}else if(typeof J=="object"){if(L)throw new Error("too much nesting");if(B&&D.push(""),D.push(`[${V}]`),Array.isArray(J)){D.push(...J);break}else L=Object.keys(J)}else typeof J>"u"&&!P&&D.push(F(K,""))}L=null,U=0}return D.join(`
`)}return stringify$1.stringify=E,stringify$1.encode=E,stringify$1}var iniValue={},hasRequiredIniValue;function requireIniValue(){return hasRequiredIniValue||(hasRequiredIniValue=1,Object.defineProperty(iniValue,"__esModule",{value:!0})),iniValue}var iniObjectDataSection={},hasRequiredIniObjectDataSection;function requireIniObjectDataSection(){return hasRequiredIniObjectDataSection||(hasRequiredIniObjectDataSection=1,Object.defineProperty(iniObjectDataSection,"__esModule",{value:!0})),iniObjectDataSection}var customTyping={},hasRequiredCustomTyping;function requireCustomTyping(){return hasRequiredCustomTyping||(hasRequiredCustomTyping=1,Object.defineProperty(customTyping,"__esModule",{value:!0})),customTyping}var iniObject={},hasRequiredIniObject;function requireIniObject(){return hasRequiredIniObject||(hasRequiredIniObject=1,Object.defineProperty(iniObject,"__esModule",{value:!0}),requireErrors$3(),requireProto()),iniObject}var iniObjectSection={},hasRequiredIniObjectSection;function requireIniObjectSection(){return hasRequiredIniObjectSection||(hasRequiredIniObjectSection=1,Object.defineProperty(iniObjectSection,"__esModule",{value:!0})),iniObjectSection}var hasRequiredLib$9;function requireLib$9(){return hasRequiredLib$9||(hasRequiredLib$9=1,(function(E){var A=lib$9&&lib$9.__createBinding||(Object.create?(function(I,B,T,R){R===void 0&&(R=T);var P=Object.getOwnPropertyDescriptor(B,T);(!P||("get"in P?!B.__esModule:P.writable||P.configurable))&&(P={enumerable:!0,get:function(){return B[T]}}),Object.defineProperty(I,R,P)}):(function(I,B,T,R){R===void 0&&(R=T),I[R]=B[T]})),_=lib$9&&lib$9.__exportStar||function(I,B){for(var T in I)T!=="default"&&!Object.prototype.hasOwnProperty.call(B,T)&&A(B,I,T)};Object.defineProperty(E,"__esModule",{value:!0}),_(requireErrors$3(),E),_(requireParse$1(),E),_(requireStringify$2(),E),_(requireProto(),E),_(requireIniValue(),E),_(requireIniObjectDataSection(),E),_(requireCustomTyping(),E),_(requireIniObject(),E),_(requireIniObjectSection(),E)})(lib$9)),lib$9}var libExports$2=requireLib$9();const sanitizeINI=E=>E.split(`
`).filter(A=>/(^\[.*\])|(^(\s|\t)*[a-zA-Z0-9]+\s*:.*)/g.test(A)).join(`
`).replaceAll(/((\/\/)|(;)|(==)).*/g,""),BLANK_TEXTURE=new Texture;class Skin{constructor(A,_){this.resources=A,this.metadata=_}config={General:{Name:"Skin",Version:"latest",HitCircleOverlayAboveNumber:1,SliderBallFlip:1},Colours:{Combo1:"255,192,0",Combo2:"0,202,0",Combo3:"18,124,255",Combo4:"242,24,57",SliderBorder:"255,255,255"},Fonts:{HitCirclePrefix:"default",HitCircleOverlap:-2}};textures=new Map;animatedTextures=new Map;hitsounds=new Map;colorsLength=4;async init(){await this.loadConfig(),await Promise.all([this.loadTextures(),this.loadHitsounds()])}async loadConfig(){const A=await this.resources?.get("skin.ini")?.text();if(!A)return;const _=libExports$2.parse(sanitizeINI(A),{comment:["//","--",";","=="],delimiter:":"});this.config={General:{...this.config.General,..._.General},Colours:{...this.config.Colours,..._.Colours},Fonts:{...this.config.Fonts,..._.Fonts}},this.colorsLength=Object.keys(this.config.Colours).filter(I=>/Combo[1-8]/g.test(I)).length}async loadTextures(){const _=["approachcircle",...[...Array(10)].map((B,T)=>`${this.config.Fonts.HitCirclePrefix}-${T}`),"cursor","cursortrail","timelinehitcircle","followpoint","hit300","hit100","hit50","hit0","hitcircle","hitcircleoverlay","hitcircleflash","hitcircleglow","hitcircleselect","sliderb","sliderb-nd","sliderb-spec","sliderstartcircle","sliderstartcircleoverlay","sliderendcircle","sliderendcircleoverlay","sliderfollowcircle","sliderscorepoint","spinner-approachcircle","spinner-bottom","reversearrow","repeat-edge-piece"],I=["followpoint","hit300","hit100","hit50","hit0","sliderb","sliderfollowcircle"];await Promise.all([..._.map(async B=>{const T=this.resources?.get(`${B}@2x.png`)??this.resources?.get(`${B}.png`),R=this.resources?.has(`${B}@2x.png`);if(T)try{const P=await Assets.load({src:`${URL.createObjectURL(T)}`,parser:"texture"});P.source.resolution=R?2:1,P.update();const D=B.split("/").at(-1),F=D?/default-[0-9]+/g.test(D):!1;this.textures.set(F?D:B,P)}catch{return}}),...I.map(async B=>{const T=B==="sliderb"?new RegExp(`^${B}[0-9]+`):new RegExp(`^${B}-[0-9]+`),R=new Set(this.resources?.keys().filter(F=>T.test(F)).map(F=>F.replaceAll("@2x","").replaceAll(".png",""))),P=(await Promise.all([...R].map(async F=>{const L=this.resources?.get(`${F}@2x.png`)??this.resources?.get(`${F}.png`),U=this.resources?.has(`${F}@2x.png`)??!1;if(!L)return null;const V=await Assets.load({src:`${URL.createObjectURL(L)}`,parser:"texture"});return V.source.resolution=U?2:1,V.update(),[F,V]}))).filter(F=>F!==null);if(P.length===0)return;const D=P.toSorted((F,L)=>B==="sliderb"?+(F[0].replaceAll("sliderb","")??0)-+(L[0].replaceAll("sliderb","")??0):+(F[0].split("-").at(-1)??0)-+(L[0].split("-").at(-1)??0));this.animatedTextures.set(B,D.map(([F,L])=>L))})])}async loadHitsounds(){const A=new AudioContext,_=["drum","normal","soft"].map(I=>["hitclap","hitfinish","hitnormal","hitwhistle","sliderslide","slidertick","sliderwhistle"].map(B=>`${I}-${B}`)).reduce((I,B)=>(I.push(...B),I),[]);await Promise.all(_.map(async I=>{let B=this.resources?.get(`${I}.wav`);if(B||(B=this.resources?.get(`${I}.ogg`)),!B)return;let T;try{T=await A.decodeAudioData(await B.arrayBuffer())}catch{T=A.createBuffer(1,1,A.sampleRate);return}this.hitsounds.set(I,T)}))}getTexture(A,_){return inject("config/skinning")?.disableBeatmapSkin||this.config.General.Argon?this.textures.get(A)??inject("skinManager")?.defaultSkin?.textures.get(A):_?.textures.get(A)??this.textures.get(A)??inject("skinManager")?.defaultSkin?.textures.get(A)}getAnimatedTexture(A,_){const I=inject("config/skinning")?.disableBeatmapSkin,B=_?.textures.get(A),T=_?.animatedTextures.get(A)??(B?[B]:void 0),R=this.textures.get(A),P=this?.animatedTextures.get(A)??(R?[R]:void 0),D=inject("skinManager")?.defaultSkin?.textures.get(A),F=inject("skinManager")?.defaultSkin?.animatedTextures.get(A)??(D?[D]:void 0);return I||this.config.General.Argon?P??F??[BLANK_TEXTURE]:T??P??F??[BLANK_TEXTURE]}getHitsound(A){return this.hitsounds.get(A)}}const Reverse=(E,A)=>1-E(1-A),ToInOut=(E,A)=>.5*(A<.5?E(2*A):2-E(2-2*A)),Step=E=>E>=1?1:0,Linear=E=>E,QuadIn=E=>E*E,QuadOut=E=>Reverse(QuadIn,E),QuadInOut=E=>ToInOut(QuadIn,E),CubicIn=E=>E*E*E,CubicOut=E=>Reverse(CubicIn,E),CubicInOut=E=>ToInOut(CubicIn,E),QuartIn=E=>E*E*E*E,QuartOut=E=>Reverse(QuartIn,E),QuartInOut=E=>ToInOut(QuartIn,E),QuintIn=E=>E*E*E*E*E,QuintOut=E=>Reverse(QuintIn,E),QuintInOut=E=>ToInOut(QuintIn,E),SineIn=E=>1-Math.cos(E*(Math.PI/2)),SineOut=E=>Reverse(SineIn,E),SineInOut=E=>ToInOut(SineIn,E),ExpoIn=E=>2**(10*(E-1)),ExpoOut=E=>Reverse(ExpoIn,E),ExpoInOut=E=>ToInOut(ExpoIn,E),CircIn=E=>1-Math.sqrt(1-E*E),CircOut=E=>Reverse(CircIn,E),CircInOut=E=>ToInOut(CircIn,E),BackIn=E=>E*E*((1.70158+1)*E-1.70158),BackOut=E=>Reverse(BackIn,E),BackInOut=E=>ToInOut(BackIn,E),BounceOut=E=>E<1/2.75?7.5625*E*E:E<2/2.75?7.5625*(E-=1.5/2.75)*E+.75:E<2.5/2.75?7.5625*(E-=2.25/2.75)*E+.9375:7.5625*(E-=2.625/2.75)*E+.984375,BounceIn=E=>Reverse(BounceOut,E),BounceInOut=E=>ToInOut(BounceIn,E),ElasticOut=E=>2**(-10*E)*Math.sin((E-.075)*(2*Math.PI)/.3)+1,ElasticOutHalf=E=>2**(-10*E)*Math.sin((.5*E-.075)*(2*Math.PI)/.3)+1,ElasticOutQuarter=E=>2**(-10*E)*Math.sin((.25*E-.075)*(2*Math.PI)/.3)+1,ElasticIn=E=>Reverse(ElasticOut,E),ElasticInOut=E=>Reverse(ElasticIn,E),Easings={Step,None:Linear,In:QuadIn,Out:QuadOut,InOut:QuadInOut,InQuad:QuadIn,OutQuad:QuadOut,InOutQuad:QuadInOut,InCubic:CubicIn,OutCubic:CubicOut,InOutCubic:CubicInOut,InQuart:QuartIn,OutQuart:QuartOut,InOutQuart:QuartInOut,InQuint:QuintIn,OutQuint:QuintOut,InOutQuint:QuintInOut,InSine:SineIn,OutSine:SineOut,InOutSine:SineInOut,InExpo:ExpoIn,OutExpo:ExpoOut,InOutExpo:ExpoInOut,InCirc:CircIn,OutCirc:CircOut,InOutCirc:CircInOut,InElastic:ElasticIn,OutElastic:ElasticOut,InOutElastic:ElasticInOut,OutElasticHalf:ElasticOutHalf,OutElasticQuarter:ElasticOutQuarter,InBack:BackIn,OutBack:BackOut,InOutBack:BackInOut,InBounce:BounceIn,OutBounce:BounceOut,InOutBounce:BounceInOut},EasingsMap=[Linear,SineOut,SineIn,QuadIn,QuadOut,QuadInOut,CubicIn,CubicOut,CubicInOut,QuartIn,QuartOut,QuartInOut,QuintIn,QuintOut,QuintInOut,SineIn,SineOut,SineInOut,ExpoIn,ExpoOut,ExpoInOut,CircIn,CircOut,CircInOut,ElasticIn,ElasticOut,ElasticOutHalf,ElasticOutQuarter,ElasticInOut,BackIn,BackOut,BackInOut,BounceIn,BounceOut,BounceInOut];function ascending$1(E,A){return E==null||A==null?NaN:E<A?-1:E>A?1:E>=A?0:NaN}function descending(E,A){return E==null||A==null?NaN:A<E?-1:A>E?1:A>=E?0:NaN}function bisector(E){let A,_,I;E.length!==2?(A=ascending$1,_=(P,D)=>ascending$1(E(P),D),I=(P,D)=>E(P)-D):(A=E===ascending$1||E===descending?E:zero$1,_=E,I=E);function B(P,D,F=0,L=P.length){if(F<L){if(A(D,D)!==0)return L;do{const U=F+L>>>1;_(P[U],D)<0?F=U+1:L=U}while(F<L)}return F}function T(P,D,F=0,L=P.length){if(F<L){if(A(D,D)!==0)return L;do{const U=F+L>>>1;_(P[U],D)<=0?F=U+1:L=U}while(F<L)}return F}function R(P,D,F=0,L=P.length){const U=B(P,D,F,L-1);return U>F&&I(P[U-1],D)>-I(P[U],D)?U-1:U}return{left:B,center:R,right:T}}function zero$1(){return 0}function number$1(E){return E===null?NaN:+E}const ascendingBisect=bisector(ascending$1),bisectRight=ascendingBisect.right;bisector(number$1).center;const e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickSpec(E,A,_){const I=(A-E)/Math.max(0,_),B=Math.floor(Math.log10(I)),T=I/Math.pow(10,B),R=T>=e10?10:T>=e5?5:T>=e2?2:1;let P,D,F;return B<0?(F=Math.pow(10,-B)/R,P=Math.round(E*F),D=Math.round(A*F),P/F<E&&++P,D/F>A&&--D,F=-F):(F=Math.pow(10,B)*R,P=Math.round(E/F),D=Math.round(A/F),P*F<E&&++P,D*F>A&&--D),D<P&&.5<=_&&_<2?tickSpec(E,A,_*2):[P,D,F]}function ticks(E,A,_){if(A=+A,E=+E,_=+_,!(_>0))return[];if(E===A)return[E];const I=A<E,[B,T,R]=I?tickSpec(A,E,_):tickSpec(E,A,_);if(!(T>=B))return[];const P=T-B+1,D=new Array(P);if(I)if(R<0)for(let F=0;F<P;++F)D[F]=(T-F)/-R;else for(let F=0;F<P;++F)D[F]=(T-F)*R;else if(R<0)for(let F=0;F<P;++F)D[F]=(B+F)/-R;else for(let F=0;F<P;++F)D[F]=(B+F)*R;return D}function tickIncrement(E,A,_){return A=+A,E=+E,_=+_,tickSpec(E,A,_)[2]}function tickStep(E,A,_){A=+A,E=+E,_=+_;const I=A<E,B=I?tickIncrement(A,E,_):tickIncrement(E,A,_);return(I?-1:1)*(B<0?1/-B:B)}var noop={value:()=>{}};function dispatch(){for(var E=0,A=arguments.length,_={},I;E<A;++E){if(!(I=arguments[E]+"")||I in _||/[\s.]/.test(I))throw new Error("illegal type: "+I);_[I]=[]}return new Dispatch(_)}function Dispatch(E){this._=E}function parseTypenames$1(E,A){return E.trim().split(/^|\s+/).map(function(_){var I="",B=_.indexOf(".");if(B>=0&&(I=_.slice(B+1),_=_.slice(0,B)),_&&!A.hasOwnProperty(_))throw new Error("unknown type: "+_);return{type:_,name:I}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(E,A){var _=this._,I=parseTypenames$1(E+"",_),B,T=-1,R=I.length;if(arguments.length<2){for(;++T<R;)if((B=(E=I[T]).type)&&(B=get$2(_[B],E.name)))return B;return}if(A!=null&&typeof A!="function")throw new Error("invalid callback: "+A);for(;++T<R;)if(B=(E=I[T]).type)_[B]=set$1(_[B],E.name,A);else if(A==null)for(B in _)_[B]=set$1(_[B],E.name,null);return this},copy:function(){var E={},A=this._;for(var _ in A)E[_]=A[_].slice();return new Dispatch(E)},call:function(E,A){if((B=arguments.length-2)>0)for(var _=new Array(B),I=0,B,T;I<B;++I)_[I]=arguments[I+2];if(!this._.hasOwnProperty(E))throw new Error("unknown type: "+E);for(T=this._[E],I=0,B=T.length;I<B;++I)T[I].value.apply(A,_)},apply:function(E,A,_){if(!this._.hasOwnProperty(E))throw new Error("unknown type: "+E);for(var I=this._[E],B=0,T=I.length;B<T;++B)I[B].value.apply(A,_)}};function get$2(E,A){for(var _=0,I=E.length,B;_<I;++_)if((B=E[_]).name===A)return B.value}function set$1(E,A,_){for(var I=0,B=E.length;I<B;++I)if(E[I].name===A){E[I]=noop,E=E.slice(0,I).concat(E.slice(I+1));break}return _!=null&&E.push({name:A,value:_}),E}var xhtml="http://www.w3.org/1999/xhtml";const namespaces={svg:"http://www.w3.org/2000/svg",xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(E){var A=E+="",_=A.indexOf(":");return _>=0&&(A=E.slice(0,_))!=="xmlns"&&(E=E.slice(_+1)),namespaces.hasOwnProperty(A)?{space:namespaces[A],local:E}:E}function creatorInherit(E){return function(){var A=this.ownerDocument,_=this.namespaceURI;return _===xhtml&&A.documentElement.namespaceURI===xhtml?A.createElement(E):A.createElementNS(_,E)}}function creatorFixed(E){return function(){return this.ownerDocument.createElementNS(E.space,E.local)}}function creator(E){var A=namespace(E);return(A.local?creatorFixed:creatorInherit)(A)}function none(){}function selector(E){return E==null?none:function(){return this.querySelector(E)}}function selection_select(E){typeof E!="function"&&(E=selector(E));for(var A=this._groups,_=A.length,I=new Array(_),B=0;B<_;++B)for(var T=A[B],R=T.length,P=I[B]=new Array(R),D,F,L=0;L<R;++L)(D=T[L])&&(F=E.call(D,D.__data__,L,T))&&("__data__"in D&&(F.__data__=D.__data__),P[L]=F);return new Selection$1(I,this._parents)}function array(E){return E==null?[]:Array.isArray(E)?E:Array.from(E)}function empty$2(){return[]}function selectorAll(E){return E==null?empty$2:function(){return this.querySelectorAll(E)}}function arrayAll(E){return function(){return array(E.apply(this,arguments))}}function selection_selectAll(E){typeof E=="function"?E=arrayAll(E):E=selectorAll(E);for(var A=this._groups,_=A.length,I=[],B=[],T=0;T<_;++T)for(var R=A[T],P=R.length,D,F=0;F<P;++F)(D=R[F])&&(I.push(E.call(D,D.__data__,F,R)),B.push(D));return new Selection$1(I,B)}function matcher(E){return function(){return this.matches(E)}}function childMatcher(E){return function(A){return A.matches(E)}}var find=Array.prototype.find;function childFind(E){return function(){return find.call(this.children,E)}}function childFirst(){return this.firstElementChild}function selection_selectChild(E){return this.select(E==null?childFirst:childFind(typeof E=="function"?E:childMatcher(E)))}var filter$1=Array.prototype.filter;function children(){return Array.from(this.children)}function childrenFilter(E){return function(){return filter$1.call(this.children,E)}}function selection_selectChildren(E){return this.selectAll(E==null?children:childrenFilter(typeof E=="function"?E:childMatcher(E)))}function selection_filter(E){typeof E!="function"&&(E=matcher(E));for(var A=this._groups,_=A.length,I=new Array(_),B=0;B<_;++B)for(var T=A[B],R=T.length,P=I[B]=[],D,F=0;F<R;++F)(D=T[F])&&E.call(D,D.__data__,F,T)&&P.push(D);return new Selection$1(I,this._parents)}function sparse(E){return new Array(E.length)}function selection_enter(){return new Selection$1(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(E,A){this.ownerDocument=E.ownerDocument,this.namespaceURI=E.namespaceURI,this._next=null,this._parent=E,this.__data__=A}EnterNode.prototype={constructor:EnterNode,appendChild:function(E){return this._parent.insertBefore(E,this._next)},insertBefore:function(E,A){return this._parent.insertBefore(E,A)},querySelector:function(E){return this._parent.querySelector(E)},querySelectorAll:function(E){return this._parent.querySelectorAll(E)}};function constant$1(E){return function(){return E}}function bindIndex(E,A,_,I,B,T){for(var R=0,P,D=A.length,F=T.length;R<F;++R)(P=A[R])?(P.__data__=T[R],I[R]=P):_[R]=new EnterNode(E,T[R]);for(;R<D;++R)(P=A[R])&&(B[R]=P)}function bindKey(E,A,_,I,B,T,R){var P,D,F=new Map,L=A.length,U=T.length,V=new Array(L),K;for(P=0;P<L;++P)(D=A[P])&&(V[P]=K=R.call(D,D.__data__,P,A)+"",F.has(K)?B[P]=D:F.set(K,D));for(P=0;P<U;++P)K=R.call(E,T[P],P,T)+"",(D=F.get(K))?(I[P]=D,D.__data__=T[P],F.delete(K)):_[P]=new EnterNode(E,T[P]);for(P=0;P<L;++P)(D=A[P])&&F.get(V[P])===D&&(B[P]=D)}function datum(E){return E.__data__}function selection_data(E,A){if(!arguments.length)return Array.from(this,datum);var _=A?bindKey:bindIndex,I=this._parents,B=this._groups;typeof E!="function"&&(E=constant$1(E));for(var T=B.length,R=new Array(T),P=new Array(T),D=new Array(T),F=0;F<T;++F){var L=I[F],U=B[F],V=U.length,K=arraylike(E.call(L,L&&L.__data__,F,I)),J=K.length,ee=P[F]=new Array(J),ie=R[F]=new Array(J),ne=D[F]=new Array(V);_(L,U,ee,ie,ne,K,A);for(var ce=0,fe=0,de,pe;ce<J;++ce)if(de=ee[ce]){for(ce>=fe&&(fe=ce+1);!(pe=ie[fe])&&++fe<J;);de._next=pe||null}}return R=new Selection$1(R,I),R._enter=P,R._exit=D,R}function arraylike(E){return typeof E=="object"&&"length"in E?E:Array.from(E)}function selection_exit(){return new Selection$1(this._exit||this._groups.map(sparse),this._parents)}function selection_join(E,A,_){var I=this.enter(),B=this,T=this.exit();return typeof E=="function"?(I=E(I),I&&(I=I.selection())):I=I.append(E+""),A!=null&&(B=A(B),B&&(B=B.selection())),_==null?T.remove():_(T),I&&B?I.merge(B).order():B}function selection_merge(E){for(var A=E.selection?E.selection():E,_=this._groups,I=A._groups,B=_.length,T=I.length,R=Math.min(B,T),P=new Array(B),D=0;D<R;++D)for(var F=_[D],L=I[D],U=F.length,V=P[D]=new Array(U),K,J=0;J<U;++J)(K=F[J]||L[J])&&(V[J]=K);for(;D<B;++D)P[D]=_[D];return new Selection$1(P,this._parents)}function selection_order(){for(var E=this._groups,A=-1,_=E.length;++A<_;)for(var I=E[A],B=I.length-1,T=I[B],R;--B>=0;)(R=I[B])&&(T&&R.compareDocumentPosition(T)^4&&T.parentNode.insertBefore(R,T),T=R);return this}function selection_sort(E){E||(E=ascending);function A(U,V){return U&&V?E(U.__data__,V.__data__):!U-!V}for(var _=this._groups,I=_.length,B=new Array(I),T=0;T<I;++T){for(var R=_[T],P=R.length,D=B[T]=new Array(P),F,L=0;L<P;++L)(F=R[L])&&(D[L]=F);D.sort(A)}return new Selection$1(B,this._parents).order()}function ascending(E,A){return E<A?-1:E>A?1:E>=A?0:NaN}function selection_call(){var E=arguments[0];return arguments[0]=this,E.apply(null,arguments),this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var E=this._groups,A=0,_=E.length;A<_;++A)for(var I=E[A],B=0,T=I.length;B<T;++B){var R=I[B];if(R)return R}return null}function selection_size(){let E=0;for(const A of this)++E;return E}function selection_empty(){return!this.node()}function selection_each(E){for(var A=this._groups,_=0,I=A.length;_<I;++_)for(var B=A[_],T=0,R=B.length,P;T<R;++T)(P=B[T])&&E.call(P,P.__data__,T,B);return this}function attrRemove$1(E){return function(){this.removeAttribute(E)}}function attrRemoveNS$1(E){return function(){this.removeAttributeNS(E.space,E.local)}}function attrConstant$1(E,A){return function(){this.setAttribute(E,A)}}function attrConstantNS$1(E,A){return function(){this.setAttributeNS(E.space,E.local,A)}}function attrFunction$1(E,A){return function(){var _=A.apply(this,arguments);_==null?this.removeAttribute(E):this.setAttribute(E,_)}}function attrFunctionNS$1(E,A){return function(){var _=A.apply(this,arguments);_==null?this.removeAttributeNS(E.space,E.local):this.setAttributeNS(E.space,E.local,_)}}function selection_attr(E,A){var _=namespace(E);if(arguments.length<2){var I=this.node();return _.local?I.getAttributeNS(_.space,_.local):I.getAttribute(_)}return this.each((A==null?_.local?attrRemoveNS$1:attrRemove$1:typeof A=="function"?_.local?attrFunctionNS$1:attrFunction$1:_.local?attrConstantNS$1:attrConstant$1)(_,A))}function defaultView(E){return E.ownerDocument&&E.ownerDocument.defaultView||E.document&&E||E.defaultView}function styleRemove$1(E){return function(){this.style.removeProperty(E)}}function styleConstant$1(E,A,_){return function(){this.style.setProperty(E,A,_)}}function styleFunction$1(E,A,_){return function(){var I=A.apply(this,arguments);I==null?this.style.removeProperty(E):this.style.setProperty(E,I,_)}}function selection_style(E,A,_){return arguments.length>1?this.each((A==null?styleRemove$1:typeof A=="function"?styleFunction$1:styleConstant$1)(E,A,_??"")):styleValue(this.node(),E)}function styleValue(E,A){return E.style.getPropertyValue(A)||defaultView(E).getComputedStyle(E,null).getPropertyValue(A)}function propertyRemove(E){return function(){delete this[E]}}function propertyConstant(E,A){return function(){this[E]=A}}function propertyFunction(E,A){return function(){var _=A.apply(this,arguments);_==null?delete this[E]:this[E]=_}}function selection_property(E,A){return arguments.length>1?this.each((A==null?propertyRemove:typeof A=="function"?propertyFunction:propertyConstant)(E,A)):this.node()[E]}function classArray(E){return E.trim().split(/^|\s+/)}function classList(E){return E.classList||new ClassList(E)}function ClassList(E){this._node=E,this._names=classArray(E.getAttribute("class")||"")}ClassList.prototype={add:function(E){var A=this._names.indexOf(E);A<0&&(this._names.push(E),this._node.setAttribute("class",this._names.join(" ")))},remove:function(E){var A=this._names.indexOf(E);A>=0&&(this._names.splice(A,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(E){return this._names.indexOf(E)>=0}};function classedAdd(E,A){for(var _=classList(E),I=-1,B=A.length;++I<B;)_.add(A[I])}function classedRemove(E,A){for(var _=classList(E),I=-1,B=A.length;++I<B;)_.remove(A[I])}function classedTrue(E){return function(){classedAdd(this,E)}}function classedFalse(E){return function(){classedRemove(this,E)}}function classedFunction(E,A){return function(){(A.apply(this,arguments)?classedAdd:classedRemove)(this,E)}}function selection_classed(E,A){var _=classArray(E+"");if(arguments.length<2){for(var I=classList(this.node()),B=-1,T=_.length;++B<T;)if(!I.contains(_[B]))return!1;return!0}return this.each((typeof A=="function"?classedFunction:A?classedTrue:classedFalse)(_,A))}function textRemove(){this.textContent=""}function textConstant$1(E){return function(){this.textContent=E}}function textFunction$1(E){return function(){var A=E.apply(this,arguments);this.textContent=A??""}}function selection_text(E){return arguments.length?this.each(E==null?textRemove:(typeof E=="function"?textFunction$1:textConstant$1)(E)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(E){return function(){this.innerHTML=E}}function htmlFunction(E){return function(){var A=E.apply(this,arguments);this.innerHTML=A??""}}function selection_html(E){return arguments.length?this.each(E==null?htmlRemove:(typeof E=="function"?htmlFunction:htmlConstant)(E)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(E){var A=typeof E=="function"?E:creator(E);return this.select(function(){return this.appendChild(A.apply(this,arguments))})}function constantNull(){return null}function selection_insert(E,A){var _=typeof E=="function"?E:creator(E),I=A==null?constantNull:typeof A=="function"?A:selector(A);return this.select(function(){return this.insertBefore(_.apply(this,arguments),I.apply(this,arguments)||null)})}function remove(){var E=this.parentNode;E&&E.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var E=this.cloneNode(!1),A=this.parentNode;return A?A.insertBefore(E,this.nextSibling):E}function selection_cloneDeep(){var E=this.cloneNode(!0),A=this.parentNode;return A?A.insertBefore(E,this.nextSibling):E}function selection_clone(E){return this.select(E?selection_cloneDeep:selection_cloneShallow)}function selection_datum(E){return arguments.length?this.property("__data__",E):this.node().__data__}function contextListener(E){return function(A){E.call(this,A,this.__data__)}}function parseTypenames(E){return E.trim().split(/^|\s+/).map(function(A){var _="",I=A.indexOf(".");return I>=0&&(_=A.slice(I+1),A=A.slice(0,I)),{type:A,name:_}})}function onRemove(E){return function(){var A=this.__on;if(A){for(var _=0,I=-1,B=A.length,T;_<B;++_)T=A[_],(!E.type||T.type===E.type)&&T.name===E.name?this.removeEventListener(T.type,T.listener,T.options):A[++I]=T;++I?A.length=I:delete this.__on}}}function onAdd(E,A,_){return function(){var I=this.__on,B,T=contextListener(A);if(I){for(var R=0,P=I.length;R<P;++R)if((B=I[R]).type===E.type&&B.name===E.name){this.removeEventListener(B.type,B.listener,B.options),this.addEventListener(B.type,B.listener=T,B.options=_),B.value=A;return}}this.addEventListener(E.type,T,_),B={type:E.type,name:E.name,value:A,listener:T,options:_},I?I.push(B):this.__on=[B]}}function selection_on(E,A,_){var I=parseTypenames(E+""),B,T=I.length,R;if(arguments.length<2){var P=this.node().__on;if(P){for(var D=0,F=P.length,L;D<F;++D)for(B=0,L=P[D];B<T;++B)if((R=I[B]).type===L.type&&R.name===L.name)return L.value}return}for(P=A?onAdd:onRemove,B=0;B<T;++B)this.each(P(I[B],A,_));return this}function dispatchEvent(E,A,_){var I=defaultView(E),B=I.CustomEvent;typeof B=="function"?B=new B(A,_):(B=I.document.createEvent("Event"),_?(B.initEvent(A,_.bubbles,_.cancelable),B.detail=_.detail):B.initEvent(A,!1,!1)),E.dispatchEvent(B)}function dispatchConstant(E,A){return function(){return dispatchEvent(this,E,A)}}function dispatchFunction(E,A){return function(){return dispatchEvent(this,E,A.apply(this,arguments))}}function selection_dispatch(E,A){return this.each((typeof A=="function"?dispatchFunction:dispatchConstant)(E,A))}function*selection_iterator(){for(var E=this._groups,A=0,_=E.length;A<_;++A)for(var I=E[A],B=0,T=I.length,R;B<T;++B)(R=I[B])&&(yield R)}var root=[null];function Selection$1(E,A){this._groups=E,this._parents=A}function selection(){return new Selection$1([[document.documentElement]],root)}function selection_selection(){return this}Selection$1.prototype=selection.prototype={constructor:Selection$1,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch,[Symbol.iterator]:selection_iterator};function define(E,A,_){E.prototype=A.prototype=_,_.constructor=E}function extend$1(E,A){var _=Object.create(E.prototype);for(var I in A)_[I]=A[I];return _}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color,{copy(E){return Object.assign(new this.constructor,this,E)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(E){var A,_;return E=(E+"").trim().toLowerCase(),(A=reHex.exec(E))?(_=A[1].length,A=parseInt(A[1],16),_===6?rgbn(A):_===3?new Rgb(A>>8&15|A>>4&240,A>>4&15|A&240,(A&15)<<4|A&15,1):_===8?rgba(A>>24&255,A>>16&255,A>>8&255,(A&255)/255):_===4?rgba(A>>12&15|A>>8&240,A>>8&15|A>>4&240,A>>4&15|A&240,((A&15)<<4|A&15)/255):null):(A=reRgbInteger.exec(E))?new Rgb(A[1],A[2],A[3],1):(A=reRgbPercent.exec(E))?new Rgb(A[1]*255/100,A[2]*255/100,A[3]*255/100,1):(A=reRgbaInteger.exec(E))?rgba(A[1],A[2],A[3],A[4]):(A=reRgbaPercent.exec(E))?rgba(A[1]*255/100,A[2]*255/100,A[3]*255/100,A[4]):(A=reHslPercent.exec(E))?hsla(A[1],A[2]/100,A[3]/100,1):(A=reHslaPercent.exec(E))?hsla(A[1],A[2]/100,A[3]/100,A[4]):named.hasOwnProperty(E)?rgbn(named[E]):E==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(E){return new Rgb(E>>16&255,E>>8&255,E&255,1)}function rgba(E,A,_,I){return I<=0&&(E=A=_=NaN),new Rgb(E,A,_,I)}function rgbConvert(E){return E instanceof Color||(E=color(E)),E?(E=E.rgb(),new Rgb(E.r,E.g,E.b,E.opacity)):new Rgb}function rgb(E,A,_,I){return arguments.length===1?rgbConvert(E):new Rgb(E,A,_,I??1)}function Rgb(E,A,_,I){this.r=+E,this.g=+A,this.b=+_,this.opacity=+I}define(Rgb,rgb,extend$1(Color,{brighter(E){return E=E==null?brighter:Math.pow(brighter,E),new Rgb(this.r*E,this.g*E,this.b*E,this.opacity)},darker(E){return E=E==null?darker:Math.pow(darker,E),new Rgb(this.r*E,this.g*E,this.b*E,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const E=clampa(this.opacity);return`${E===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${E===1?")":`, ${E})`}`}function clampa(E){return isNaN(E)?1:Math.max(0,Math.min(1,E))}function clampi(E){return Math.max(0,Math.min(255,Math.round(E)||0))}function hex(E){return E=clampi(E),(E<16?"0":"")+E.toString(16)}function hsla(E,A,_,I){return I<=0?E=A=_=NaN:_<=0||_>=1?E=A=NaN:A<=0&&(E=NaN),new Hsl(E,A,_,I)}function hslConvert(E){if(E instanceof Hsl)return new Hsl(E.h,E.s,E.l,E.opacity);if(E instanceof Color||(E=color(E)),!E)return new Hsl;if(E instanceof Hsl)return E;E=E.rgb();var A=E.r/255,_=E.g/255,I=E.b/255,B=Math.min(A,_,I),T=Math.max(A,_,I),R=NaN,P=T-B,D=(T+B)/2;return P?(A===T?R=(_-I)/P+(_<I)*6:_===T?R=(I-A)/P+2:R=(A-_)/P+4,P/=D<.5?T+B:2-T-B,R*=60):P=D>0&&D<1?0:R,new Hsl(R,P,D,E.opacity)}function hsl(E,A,_,I){return arguments.length===1?hslConvert(E):new Hsl(E,A,_,I??1)}function Hsl(E,A,_,I){this.h=+E,this.s=+A,this.l=+_,this.opacity=+I}define(Hsl,hsl,extend$1(Color,{brighter(E){return E=E==null?brighter:Math.pow(brighter,E),new Hsl(this.h,this.s,this.l*E,this.opacity)},darker(E){return E=E==null?darker:Math.pow(darker,E),new Hsl(this.h,this.s,this.l*E,this.opacity)},rgb(){var E=this.h%360+(this.h<0)*360,A=isNaN(E)||isNaN(this.s)?0:this.s,_=this.l,I=_+(_<.5?_:1-_)*A,B=2*_-I;return new Rgb(hsl2rgb(E>=240?E-240:E+120,B,I),hsl2rgb(E,B,I),hsl2rgb(E<120?E+240:E-120,B,I),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const E=clampa(this.opacity);return`${E===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${E===1?")":`, ${E})`}`}}));function clamph(E){return E=(E||0)%360,E<0?E+360:E}function clampt(E){return Math.max(0,Math.min(1,E||0))}function hsl2rgb(E,A,_){return(E<60?A+(_-A)*E/60:E<180?_:E<240?A+(_-A)*(240-E)/60:A)*255}const constant=E=>()=>E;function linear$2(E,A){return function(_){return E+_*A}}function exponential(E,A,_){return E=Math.pow(E,_),A=Math.pow(A,_)-E,_=1/_,function(I){return Math.pow(E+I*A,_)}}function gamma(E){return(E=+E)==1?nogamma:function(A,_){return _-A?exponential(A,_,E):constant(isNaN(A)?_:A)}}function nogamma(E,A){var _=A-E;return _?linear$2(E,_):constant(isNaN(E)?A:E)}const interpolateRgb=(function E(A){var _=gamma(A);function I(B,T){var R=_((B=rgb(B)).r,(T=rgb(T)).r),P=_(B.g,T.g),D=_(B.b,T.b),F=nogamma(B.opacity,T.opacity);return function(L){return B.r=R(L),B.g=P(L),B.b=D(L),B.opacity=F(L),B+""}}return I.gamma=E,I})(1);function numberArray(E,A){A||(A=[]);var _=E?Math.min(A.length,E.length):0,I=A.slice(),B;return function(T){for(B=0;B<_;++B)I[B]=E[B]*(1-T)+A[B]*T;return I}}function isNumberArray(E){return ArrayBuffer.isView(E)&&!(E instanceof DataView)}function genericArray(E,A){var _=A?A.length:0,I=E?Math.min(_,E.length):0,B=new Array(I),T=new Array(_),R;for(R=0;R<I;++R)B[R]=interpolate$1(E[R],A[R]);for(;R<_;++R)T[R]=A[R];return function(P){for(R=0;R<I;++R)T[R]=B[R](P);return T}}function date(E,A){var _=new Date;return E=+E,A=+A,function(I){return _.setTime(E*(1-I)+A*I),_}}function interpolateNumber(E,A){return E=+E,A=+A,function(_){return E*(1-_)+A*_}}function object(E,A){var _={},I={},B;(E===null||typeof E!="object")&&(E={}),(A===null||typeof A!="object")&&(A={});for(B in A)B in E?_[B]=interpolate$1(E[B],A[B]):I[B]=A[B];return function(T){for(B in _)I[B]=_[B](T);return I}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(E){return function(){return E}}function one(E){return function(A){return E(A)+""}}function interpolateString(E,A){var _=reA.lastIndex=reB.lastIndex=0,I,B,T,R=-1,P=[],D=[];for(E=E+"",A=A+"";(I=reA.exec(E))&&(B=reB.exec(A));)(T=B.index)>_&&(T=A.slice(_,T),P[R]?P[R]+=T:P[++R]=T),(I=I[0])===(B=B[0])?P[R]?P[R]+=B:P[++R]=B:(P[++R]=null,D.push({i:R,x:interpolateNumber(I,B)})),_=reB.lastIndex;return _<A.length&&(T=A.slice(_),P[R]?P[R]+=T:P[++R]=T),P.length<2?D[0]?one(D[0].x):zero(A):(A=D.length,function(F){for(var L=0,U;L<A;++L)P[(U=D[L]).i]=U.x(F);return P.join("")})}function interpolate$1(E,A){var _=typeof A,I;return A==null||_==="boolean"?constant(A):(_==="number"?interpolateNumber:_==="string"?(I=color(A))?(A=I,interpolateRgb):interpolateString:A instanceof color?interpolateRgb:A instanceof Date?date:isNumberArray(A)?numberArray:Array.isArray(A)?genericArray:typeof A.valueOf!="function"&&typeof A.toString!="function"||isNaN(A)?object:interpolateNumber)(E,A)}function interpolateRound(E,A){return E=+E,A=+A,function(_){return Math.round(E*(1-_)+A*_)}}var degrees=180/Math.PI,identity$3={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(E,A,_,I,B,T){var R,P,D;return(R=Math.sqrt(E*E+A*A))&&(E/=R,A/=R),(D=E*_+A*I)&&(_-=E*D,I-=A*D),(P=Math.sqrt(_*_+I*I))&&(_/=P,I/=P,D/=P),E*I<A*_&&(E=-E,A=-A,D=-D,R=-R),{translateX:B,translateY:T,rotate:Math.atan2(A,E)*degrees,skewX:Math.atan(D)*degrees,scaleX:R,scaleY:P}}var svgNode;function parseCss(E){const A=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(E+"");return A.isIdentity?identity$3:decompose(A.a,A.b,A.c,A.d,A.e,A.f)}function parseSvg(E){return E==null||(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",E),!(E=svgNode.transform.baseVal.consolidate()))?identity$3:(E=E.matrix,decompose(E.a,E.b,E.c,E.d,E.e,E.f))}function interpolateTransform(E,A,_,I){function B(F){return F.length?F.pop()+" ":""}function T(F,L,U,V,K,J){if(F!==U||L!==V){var ee=K.push("translate(",null,A,null,_);J.push({i:ee-4,x:interpolateNumber(F,U)},{i:ee-2,x:interpolateNumber(L,V)})}else(U||V)&&K.push("translate("+U+A+V+_)}function R(F,L,U,V){F!==L?(F-L>180?L+=360:L-F>180&&(F+=360),V.push({i:U.push(B(U)+"rotate(",null,I)-2,x:interpolateNumber(F,L)})):L&&U.push(B(U)+"rotate("+L+I)}function P(F,L,U,V){F!==L?V.push({i:U.push(B(U)+"skewX(",null,I)-2,x:interpolateNumber(F,L)}):L&&U.push(B(U)+"skewX("+L+I)}function D(F,L,U,V,K,J){if(F!==U||L!==V){var ee=K.push(B(K)+"scale(",null,",",null,")");J.push({i:ee-4,x:interpolateNumber(F,U)},{i:ee-2,x:interpolateNumber(L,V)})}else(U!==1||V!==1)&&K.push(B(K)+"scale("+U+","+V+")")}return function(F,L){var U=[],V=[];return F=E(F),L=E(L),T(F.translateX,F.translateY,L.translateX,L.translateY,U,V),R(F.rotate,L.rotate,U,V),P(F.skewX,L.skewX,U,V),D(F.scaleX,F.scaleY,L.scaleX,L.scaleY,U,V),F=L=null,function(K){for(var J=-1,ee=V.length,ie;++J<ee;)U[(ie=V[J]).i]=ie.x(K);return U.join("")}}}var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")"),frame=0,timeout$2=0,interval=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance=="object"&&performance.now?performance:Date,setFrame=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(E){setTimeout(E,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function(E,A,_){if(typeof E!="function")throw new TypeError("callback is not a function");_=(_==null?now():+_)+(A==null?0:+A),!this._next&&taskTail!==this&&(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=E,this._time=_,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};function timer(E,A,_){var I=new Timer;return I.restart(E,A,_),I}function timerFlush(){now(),++frame;for(var E=taskHead,A;E;)(A=clockNow-E._time)>=0&&E._call.call(void 0,A),E=E._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout$2=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var E=clock.now(),A=E-clockLast;A>pokeDelay&&(clockSkew-=A,clockLast=E)}function nap(){for(var E,A=taskHead,_,I=1/0;A;)A._call?(I>A._time&&(I=A._time),E=A,A=A._next):(_=A._next,A._next=null,A=E?E._next=_:taskHead=_);taskTail=E,sleep(I)}function sleep(E){if(!frame){timeout$2&&(timeout$2=clearTimeout(timeout$2));var A=E-clockNow;A>24?(E<1/0&&(timeout$2=setTimeout(wake,E-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame=1,setFrame(wake))}}function timeout$1(E,A,_){var I=new Timer;return A=A==null?0:+A,I.restart(B=>{I.stop(),E(B+A)},A,_),I}var emptyOn=dispatch("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;function schedule(E,A,_,I,B,T){var R=E.__transition;if(!R)E.__transition={};else if(_ in R)return;create(E,_,{name:A,index:I,group:B,on:emptyOn,tween:emptyTween,time:T.time,delay:T.delay,duration:T.duration,ease:T.ease,timer:null,state:CREATED})}function init(E,A){var _=get$1(E,A);if(_.state>CREATED)throw new Error("too late; already scheduled");return _}function set(E,A){var _=get$1(E,A);if(_.state>STARTED)throw new Error("too late; already running");return _}function get$1(E,A){var _=E.__transition;if(!_||!(_=_[A]))throw new Error("transition not found");return _}function create(E,A,_){var I=E.__transition,B;I[A]=_,_.timer=timer(T,0,_.time);function T(F){_.state=SCHEDULED,_.timer.restart(R,_.delay,_.time),_.delay<=F&&R(F-_.delay)}function R(F){var L,U,V,K;if(_.state!==SCHEDULED)return D();for(L in I)if(K=I[L],K.name===_.name){if(K.state===STARTED)return timeout$1(R);K.state===RUNNING?(K.state=ENDED,K.timer.stop(),K.on.call("interrupt",E,E.__data__,K.index,K.group),delete I[L]):+L<A&&(K.state=ENDED,K.timer.stop(),K.on.call("cancel",E,E.__data__,K.index,K.group),delete I[L])}if(timeout$1(function(){_.state===STARTED&&(_.state=RUNNING,_.timer.restart(P,_.delay,_.time),P(F))}),_.state=STARTING,_.on.call("start",E,E.__data__,_.index,_.group),_.state===STARTING){for(_.state=STARTED,B=new Array(V=_.tween.length),L=0,U=-1;L<V;++L)(K=_.tween[L].value.call(E,E.__data__,_.index,_.group))&&(B[++U]=K);B.length=U+1}}function P(F){for(var L=F<_.duration?_.ease.call(null,F/_.duration):(_.timer.restart(D),_.state=ENDING,1),U=-1,V=B.length;++U<V;)B[U].call(E,L);_.state===ENDING&&(_.on.call("end",E,E.__data__,_.index,_.group),D())}function D(){_.state=ENDED,_.timer.stop(),delete I[A];for(var F in I)return;delete E.__transition}}function interrupt(E,A){var _=E.__transition,I,B,T=!0,R;if(_){A=A==null?null:A+"";for(R in _){if((I=_[R]).name!==A){T=!1;continue}B=I.state>STARTING&&I.state<ENDING,I.state=ENDED,I.timer.stop(),I.on.call(B?"interrupt":"cancel",E,E.__data__,I.index,I.group),delete _[R]}T&&delete E.__transition}}function selection_interrupt(E){return this.each(function(){interrupt(this,E)})}function tweenRemove(E,A){var _,I;return function(){var B=set(this,E),T=B.tween;if(T!==_){I=_=T;for(var R=0,P=I.length;R<P;++R)if(I[R].name===A){I=I.slice(),I.splice(R,1);break}}B.tween=I}}function tweenFunction(E,A,_){var I,B;if(typeof _!="function")throw new Error;return function(){var T=set(this,E),R=T.tween;if(R!==I){B=(I=R).slice();for(var P={name:A,value:_},D=0,F=B.length;D<F;++D)if(B[D].name===A){B[D]=P;break}D===F&&B.push(P)}T.tween=B}}function transition_tween(E,A){var _=this._id;if(E+="",arguments.length<2){for(var I=get$1(this.node(),_).tween,B=0,T=I.length,R;B<T;++B)if((R=I[B]).name===E)return R.value;return null}return this.each((A==null?tweenRemove:tweenFunction)(_,E,A))}function tweenValue(E,A,_){var I=E._id;return E.each(function(){var B=set(this,I);(B.value||(B.value={}))[A]=_.apply(this,arguments)}),function(B){return get$1(B,I).value[A]}}function interpolate(E,A){var _;return(typeof A=="number"?interpolateNumber:A instanceof color?interpolateRgb:(_=color(A))?(A=_,interpolateRgb):interpolateString)(E,A)}function attrRemove(E){return function(){this.removeAttribute(E)}}function attrRemoveNS(E){return function(){this.removeAttributeNS(E.space,E.local)}}function attrConstant(E,A,_){var I,B=_+"",T;return function(){var R=this.getAttribute(E);return R===B?null:R===I?T:T=A(I=R,_)}}function attrConstantNS(E,A,_){var I,B=_+"",T;return function(){var R=this.getAttributeNS(E.space,E.local);return R===B?null:R===I?T:T=A(I=R,_)}}function attrFunction(E,A,_){var I,B,T;return function(){var R,P=_(this),D;return P==null?void this.removeAttribute(E):(R=this.getAttribute(E),D=P+"",R===D?null:R===I&&D===B?T:(B=D,T=A(I=R,P)))}}function attrFunctionNS(E,A,_){var I,B,T;return function(){var R,P=_(this),D;return P==null?void this.removeAttributeNS(E.space,E.local):(R=this.getAttributeNS(E.space,E.local),D=P+"",R===D?null:R===I&&D===B?T:(B=D,T=A(I=R,P)))}}function transition_attr(E,A){var _=namespace(E),I=_==="transform"?interpolateTransformSvg:interpolate;return this.attrTween(E,typeof A=="function"?(_.local?attrFunctionNS:attrFunction)(_,I,tweenValue(this,"attr."+E,A)):A==null?(_.local?attrRemoveNS:attrRemove)(_):(_.local?attrConstantNS:attrConstant)(_,I,A))}function attrInterpolate(E,A){return function(_){this.setAttribute(E,A.call(this,_))}}function attrInterpolateNS(E,A){return function(_){this.setAttributeNS(E.space,E.local,A.call(this,_))}}function attrTweenNS(E,A){var _,I;function B(){var T=A.apply(this,arguments);return T!==I&&(_=(I=T)&&attrInterpolateNS(E,T)),_}return B._value=A,B}function attrTween(E,A){var _,I;function B(){var T=A.apply(this,arguments);return T!==I&&(_=(I=T)&&attrInterpolate(E,T)),_}return B._value=A,B}function transition_attrTween(E,A){var _="attr."+E;if(arguments.length<2)return(_=this.tween(_))&&_._value;if(A==null)return this.tween(_,null);if(typeof A!="function")throw new Error;var I=namespace(E);return this.tween(_,(I.local?attrTweenNS:attrTween)(I,A))}function delayFunction(E,A){return function(){init(this,E).delay=+A.apply(this,arguments)}}function delayConstant(E,A){return A=+A,function(){init(this,E).delay=A}}function transition_delay(E){var A=this._id;return arguments.length?this.each((typeof E=="function"?delayFunction:delayConstant)(A,E)):get$1(this.node(),A).delay}function durationFunction(E,A){return function(){set(this,E).duration=+A.apply(this,arguments)}}function durationConstant(E,A){return A=+A,function(){set(this,E).duration=A}}function transition_duration(E){var A=this._id;return arguments.length?this.each((typeof E=="function"?durationFunction:durationConstant)(A,E)):get$1(this.node(),A).duration}function easeConstant(E,A){if(typeof A!="function")throw new Error;return function(){set(this,E).ease=A}}function transition_ease(E){var A=this._id;return arguments.length?this.each(easeConstant(A,E)):get$1(this.node(),A).ease}function easeVarying(E,A){return function(){var _=A.apply(this,arguments);if(typeof _!="function")throw new Error;set(this,E).ease=_}}function transition_easeVarying(E){if(typeof E!="function")throw new Error;return this.each(easeVarying(this._id,E))}function transition_filter(E){typeof E!="function"&&(E=matcher(E));for(var A=this._groups,_=A.length,I=new Array(_),B=0;B<_;++B)for(var T=A[B],R=T.length,P=I[B]=[],D,F=0;F<R;++F)(D=T[F])&&E.call(D,D.__data__,F,T)&&P.push(D);return new Transition(I,this._parents,this._name,this._id)}function transition_merge(E){if(E._id!==this._id)throw new Error;for(var A=this._groups,_=E._groups,I=A.length,B=_.length,T=Math.min(I,B),R=new Array(I),P=0;P<T;++P)for(var D=A[P],F=_[P],L=D.length,U=R[P]=new Array(L),V,K=0;K<L;++K)(V=D[K]||F[K])&&(U[K]=V);for(;P<I;++P)R[P]=A[P];return new Transition(R,this._parents,this._name,this._id)}function start(E){return(E+"").trim().split(/^|\s+/).every(function(A){var _=A.indexOf(".");return _>=0&&(A=A.slice(0,_)),!A||A==="start"})}function onFunction(E,A,_){var I,B,T=start(A)?init:set;return function(){var R=T(this,E),P=R.on;P!==I&&(B=(I=P).copy()).on(A,_),R.on=B}}function transition_on(E,A){var _=this._id;return arguments.length<2?get$1(this.node(),_).on.on(E):this.each(onFunction(_,E,A))}function removeFunction(E){return function(){var A=this.parentNode;for(var _ in this.__transition)if(+_!==E)return;A&&A.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}function transition_select(E){var A=this._name,_=this._id;typeof E!="function"&&(E=selector(E));for(var I=this._groups,B=I.length,T=new Array(B),R=0;R<B;++R)for(var P=I[R],D=P.length,F=T[R]=new Array(D),L,U,V=0;V<D;++V)(L=P[V])&&(U=E.call(L,L.__data__,V,P))&&("__data__"in L&&(U.__data__=L.__data__),F[V]=U,schedule(F[V],A,_,V,F,get$1(L,_)));return new Transition(T,this._parents,A,_)}function transition_selectAll(E){var A=this._name,_=this._id;typeof E!="function"&&(E=selectorAll(E));for(var I=this._groups,B=I.length,T=[],R=[],P=0;P<B;++P)for(var D=I[P],F=D.length,L,U=0;U<F;++U)if(L=D[U]){for(var V=E.call(L,L.__data__,U,D),K,J=get$1(L,_),ee=0,ie=V.length;ee<ie;++ee)(K=V[ee])&&schedule(K,A,_,ee,V,J);T.push(V),R.push(L)}return new Transition(T,R,A,_)}var Selection=selection.prototype.constructor;function transition_selection(){return new Selection(this._groups,this._parents)}function styleNull(E,A){var _,I,B;return function(){var T=styleValue(this,E),R=(this.style.removeProperty(E),styleValue(this,E));return T===R?null:T===_&&R===I?B:B=A(_=T,I=R)}}function styleRemove(E){return function(){this.style.removeProperty(E)}}function styleConstant(E,A,_){var I,B=_+"",T;return function(){var R=styleValue(this,E);return R===B?null:R===I?T:T=A(I=R,_)}}function styleFunction(E,A,_){var I,B,T;return function(){var R=styleValue(this,E),P=_(this),D=P+"";return P==null&&(D=P=(this.style.removeProperty(E),styleValue(this,E))),R===D?null:R===I&&D===B?T:(B=D,T=A(I=R,P))}}function styleMaybeRemove(E,A){var _,I,B,T="style."+A,R="end."+T,P;return function(){var D=set(this,E),F=D.on,L=D.value[T]==null?P||(P=styleRemove(A)):void 0;(F!==_||B!==L)&&(I=(_=F).copy()).on(R,B=L),D.on=I}}function transition_style(E,A,_){var I=(E+="")=="transform"?interpolateTransformCss:interpolate;return A==null?this.styleTween(E,styleNull(E,I)).on("end.style."+E,styleRemove(E)):typeof A=="function"?this.styleTween(E,styleFunction(E,I,tweenValue(this,"style."+E,A))).each(styleMaybeRemove(this._id,E)):this.styleTween(E,styleConstant(E,I,A),_).on("end.style."+E,null)}function styleInterpolate(E,A,_){return function(I){this.style.setProperty(E,A.call(this,I),_)}}function styleTween(E,A,_){var I,B;function T(){var R=A.apply(this,arguments);return R!==B&&(I=(B=R)&&styleInterpolate(E,R,_)),I}return T._value=A,T}function transition_styleTween(E,A,_){var I="style."+(E+="");if(arguments.length<2)return(I=this.tween(I))&&I._value;if(A==null)return this.tween(I,null);if(typeof A!="function")throw new Error;return this.tween(I,styleTween(E,A,_??""))}function textConstant(E){return function(){this.textContent=E}}function textFunction(E){return function(){var A=E(this);this.textContent=A??""}}function transition_text(E){return this.tween("text",typeof E=="function"?textFunction(tweenValue(this,"text",E)):textConstant(E==null?"":E+""))}function textInterpolate(E){return function(A){this.textContent=E.call(this,A)}}function textTween(E){var A,_;function I(){var B=E.apply(this,arguments);return B!==_&&(A=(_=B)&&textInterpolate(B)),A}return I._value=E,I}function transition_textTween(E){var A="text";if(arguments.length<1)return(A=this.tween(A))&&A._value;if(E==null)return this.tween(A,null);if(typeof E!="function")throw new Error;return this.tween(A,textTween(E))}function transition_transition(){for(var E=this._name,A=this._id,_=newId(),I=this._groups,B=I.length,T=0;T<B;++T)for(var R=I[T],P=R.length,D,F=0;F<P;++F)if(D=R[F]){var L=get$1(D,A);schedule(D,E,_,F,R,{time:L.time+L.delay+L.duration,delay:0,duration:L.duration,ease:L.ease})}return new Transition(I,this._parents,E,_)}function transition_end(){var E,A,_=this,I=_._id,B=_.size();return new Promise(function(T,R){var P={value:R},D={value:function(){--B===0&&T()}};_.each(function(){var F=set(this,I),L=F.on;L!==E&&(A=(E=L).copy(),A._.cancel.push(P),A._.interrupt.push(P),A._.end.push(D)),F.on=A}),B===0&&T()})}var id=0;function Transition(E,A,_,I){this._groups=E,this._parents=A,this._name=_,this._id=I}function newId(){return++id}var selection_prototype=selection.prototype;Transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,textTween:transition_textTween,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease,easeVarying:transition_easeVarying,end:transition_end,[Symbol.iterator]:selection_prototype[Symbol.iterator]};function cubicInOut(E){return((E*=2)<=1?E*E*E:(E-=2)*E*E+2)/2}var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit(E,A){for(var _;!(_=E.__transition)||!(_=_[A]);)if(!(E=E.parentNode))throw new Error(`transition ${A} not found`);return _}function selection_transition(E){var A,_;E instanceof Transition?(A=E._id,E=E._name):(A=newId(),(_=defaultTiming).time=now(),E=E==null?null:E+"");for(var I=this._groups,B=I.length,T=0;T<B;++T)for(var R=I[T],P=R.length,D,F=0;F<P;++F)(D=R[F])&&schedule(D,E,A,F,R,_||inherit(D,A));return new Transition(I,this._parents,E,A)}selection.prototype.interrupt=selection_interrupt;selection.prototype.transition=selection_transition;function formatDecimal(E){return Math.abs(E=Math.round(E))>=1e21?E.toLocaleString("en").replace(/,/g,""):E.toString(10)}function formatDecimalParts(E,A){if((_=(E=A?E.toExponential(A-1):E.toExponential()).indexOf("e"))<0)return null;var _,I=E.slice(0,_);return[I.length>1?I[0]+I.slice(2):I,+E.slice(_+1)]}function exponent(E){return E=formatDecimalParts(Math.abs(E)),E?E[1]:NaN}function formatGroup(E,A){return function(_,I){for(var B=_.length,T=[],R=0,P=E[0],D=0;B>0&&P>0&&(D+P+1>I&&(P=Math.max(1,I-D)),T.push(_.substring(B-=P,B+P)),!((D+=P+1)>I));)P=E[R=(R+1)%E.length];return T.reverse().join(A)}}function formatNumerals(E){return function(A){return A.replace(/[0-9]/g,function(_){return E[+_]})}}var re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(E){if(!(A=re.exec(E)))throw new Error("invalid format: "+E);var A;return new FormatSpecifier({fill:A[1],align:A[2],sign:A[3],symbol:A[4],zero:A[5],width:A[6],comma:A[7],precision:A[8]&&A[8].slice(1),trim:A[9],type:A[10]})}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(E){this.fill=E.fill===void 0?" ":E.fill+"",this.align=E.align===void 0?">":E.align+"",this.sign=E.sign===void 0?"-":E.sign+"",this.symbol=E.symbol===void 0?"":E.symbol+"",this.zero=!!E.zero,this.width=E.width===void 0?void 0:+E.width,this.comma=!!E.comma,this.precision=E.precision===void 0?void 0:+E.precision,this.trim=!!E.trim,this.type=E.type===void 0?"":E.type+""}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function formatTrim(E){e:for(var A=E.length,_=1,I=-1,B;_<A;++_)switch(E[_]){case".":I=B=_;break;case"0":I===0&&(I=_),B=_;break;default:if(!+E[_])break e;I>0&&(I=0);break}return I>0?E.slice(0,I)+E.slice(B+1):E}var prefixExponent;function formatPrefixAuto(E,A){var _=formatDecimalParts(E,A);if(!_)return E+"";var I=_[0],B=_[1],T=B-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(B/3)))*3)+1,R=I.length;return T===R?I:T>R?I+new Array(T-R+1).join("0"):T>0?I.slice(0,T)+"."+I.slice(T):"0."+new Array(1-T).join("0")+formatDecimalParts(E,Math.max(0,A+T-1))[0]}function formatRounded(E,A){var _=formatDecimalParts(E,A);if(!_)return E+"";var I=_[0],B=_[1];return B<0?"0."+new Array(-B).join("0")+I:I.length>B+1?I.slice(0,B+1)+"."+I.slice(B+1):I+new Array(B-I.length+2).join("0")}const formatTypes={"%":(E,A)=>(E*100).toFixed(A),b:E=>Math.round(E).toString(2),c:E=>E+"",d:formatDecimal,e:(E,A)=>E.toExponential(A),f:(E,A)=>E.toFixed(A),g:(E,A)=>E.toPrecision(A),o:E=>Math.round(E).toString(8),p:(E,A)=>formatRounded(E*100,A),r:formatRounded,s:formatPrefixAuto,X:E=>Math.round(E).toString(16).toUpperCase(),x:E=>Math.round(E).toString(16)};function identity$2(E){return E}var map$1=Array.prototype.map,prefixes=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function formatLocale(E){var A=E.grouping===void 0||E.thousands===void 0?identity$2:formatGroup(map$1.call(E.grouping,Number),E.thousands+""),_=E.currency===void 0?"":E.currency[0]+"",I=E.currency===void 0?"":E.currency[1]+"",B=E.decimal===void 0?".":E.decimal+"",T=E.numerals===void 0?identity$2:formatNumerals(map$1.call(E.numerals,String)),R=E.percent===void 0?"%":E.percent+"",P=E.minus===void 0?"":E.minus+"",D=E.nan===void 0?"NaN":E.nan+"";function F(U){U=formatSpecifier(U);var V=U.fill,K=U.align,J=U.sign,ee=U.symbol,ie=U.zero,ne=U.width,ce=U.comma,fe=U.precision,de=U.trim,pe=U.type;pe==="n"?(ce=!0,pe="g"):formatTypes[pe]||(fe===void 0&&(fe=12),de=!0,pe="g"),(ie||V==="0"&&K==="=")&&(ie=!0,V="0",K="=");var ve=ee==="$"?_:ee==="#"&&/[boxX]/.test(pe)?"0"+pe.toLowerCase():"",ye=ee==="$"?I:/[%p]/.test(pe)?R:"",_e=formatTypes[pe],be=/[defgprs%]/.test(pe);fe=fe===void 0?6:/[gprs]/.test(pe)?Math.max(1,Math.min(21,fe)):Math.max(0,Math.min(20,fe));function Te(ue){var O=ve,z=ye,Y,te,oe;if(pe==="c")z=_e(ue)+z,ue="";else{ue=+ue;var le=ue<0||1/ue<0;if(ue=isNaN(ue)?D:_e(Math.abs(ue),fe),de&&(ue=formatTrim(ue)),le&&+ue==0&&J!=="+"&&(le=!1),O=(le?J==="("?J:P:J==="-"||J==="("?"":J)+O,z=(pe==="s"?prefixes[8+prefixExponent/3]:"")+z+(le&&J==="("?")":""),be){for(Y=-1,te=ue.length;++Y<te;)if(oe=ue.charCodeAt(Y),48>oe||oe>57){z=(oe===46?B+ue.slice(Y+1):ue.slice(Y))+z,ue=ue.slice(0,Y);break}}}ce&&!ie&&(ue=A(ue,1/0));var he=O.length+ue.length+z.length,ae=he<ne?new Array(ne-he+1).join(V):"";switch(ce&&ie&&(ue=A(ae+ue,ae.length?ne-z.length:1/0),ae=""),K){case"<":ue=O+ue+z+ae;break;case"=":ue=O+ae+ue+z;break;case"^":ue=ae.slice(0,he=ae.length>>1)+O+ue+z+ae.slice(he);break;default:ue=ae+O+ue+z;break}return T(ue)}return Te.toString=function(){return U+""},Te}function L(U,V){var K=F((U=formatSpecifier(U),U.type="f",U)),J=Math.max(-8,Math.min(8,Math.floor(exponent(V)/3)))*3,ee=Math.pow(10,-J),ie=prefixes[8+J/3];return function(ne){return K(ee*ne)+ie}}return{format:F,formatPrefix:L}}var locale,format$2,formatPrefix;defaultLocale({thousands:",",grouping:[3],currency:["$",""]});function defaultLocale(E){return locale=formatLocale(E),format$2=locale.format,formatPrefix=locale.formatPrefix,locale}function precisionFixed(E){return Math.max(0,-exponent(Math.abs(E)))}function precisionPrefix(E,A){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent(A)/3)))*3-exponent(Math.abs(E)))}function precisionRound(E,A){return E=Math.abs(E),A=Math.abs(A)-E,Math.max(0,exponent(A)-exponent(E))+1}function initRange(E,A){switch(arguments.length){case 0:break;case 1:this.range(E);break;default:this.range(A).domain(E);break}return this}function constants$2(E){return function(){return E}}function number(E){return+E}var unit=[0,1];function identity$1(E){return E}function normalize(E,A){return(A-=E=+E)?function(_){return(_-E)/A}:constants$2(isNaN(A)?NaN:.5)}function clamper(E,A){var _;return E>A&&(_=E,E=A,A=_),function(I){return Math.max(E,Math.min(A,I))}}function bimap(E,A,_){var I=E[0],B=E[1],T=A[0],R=A[1];return B<I?(I=normalize(B,I),T=_(R,T)):(I=normalize(I,B),T=_(T,R)),function(P){return T(I(P))}}function polymap(E,A,_){var I=Math.min(E.length,A.length)-1,B=new Array(I),T=new Array(I),R=-1;for(E[I]<E[0]&&(E=E.slice().reverse(),A=A.slice().reverse());++R<I;)B[R]=normalize(E[R],E[R+1]),T[R]=_(A[R],A[R+1]);return function(P){var D=bisectRight(E,P,1,I)-1;return T[D](B[D](P))}}function copy(E,A){return A.domain(E.domain()).range(E.range()).interpolate(E.interpolate()).clamp(E.clamp()).unknown(E.unknown())}function transformer(){var E=unit,A=unit,_=interpolate$1,I,B,T,R=identity$1,P,D,F;function L(){var V=Math.min(E.length,A.length);return R!==identity$1&&(R=clamper(E[0],E[V-1])),P=V>2?polymap:bimap,D=F=null,U}function U(V){return V==null||isNaN(V=+V)?T:(D||(D=P(E.map(I),A,_)))(I(R(V)))}return U.invert=function(V){return R(B((F||(F=P(A,E.map(I),interpolateNumber)))(V)))},U.domain=function(V){return arguments.length?(E=Array.from(V,number),L()):E.slice()},U.range=function(V){return arguments.length?(A=Array.from(V),L()):A.slice()},U.rangeRound=function(V){return A=Array.from(V),_=interpolateRound,L()},U.clamp=function(V){return arguments.length?(R=V?!0:identity$1,L()):R!==identity$1},U.interpolate=function(V){return arguments.length?(_=V,L()):_},U.unknown=function(V){return arguments.length?(T=V,U):T},function(V,K){return I=V,B=K,L()}}function continuous(){return transformer()(identity$1,identity$1)}function tickFormat(E,A,_,I){var B=tickStep(E,A,_),T;switch(I=formatSpecifier(I??",f"),I.type){case"s":{var R=Math.max(Math.abs(E),Math.abs(A));return I.precision==null&&!isNaN(T=precisionPrefix(B,R))&&(I.precision=T),formatPrefix(I,R)}case"":case"e":case"g":case"p":case"r":{I.precision==null&&!isNaN(T=precisionRound(B,Math.max(Math.abs(E),Math.abs(A))))&&(I.precision=T-(I.type==="e"));break}case"f":case"%":{I.precision==null&&!isNaN(T=precisionFixed(B))&&(I.precision=T-(I.type==="%")*2);break}}return format$2(I)}function linearish(E){var A=E.domain;return E.ticks=function(_){var I=A();return ticks(I[0],I[I.length-1],_??10)},E.tickFormat=function(_,I){var B=A();return tickFormat(B[0],B[B.length-1],_??10,I)},E.nice=function(_){_==null&&(_=10);var I=A(),B=0,T=I.length-1,R=I[B],P=I[T],D,F,L=10;for(P<R&&(F=R,R=P,P=F,F=B,B=T,T=F);L-- >0;){if(F=tickIncrement(R,P,_),F===D)return I[B]=R,I[T]=P,A(I);if(F>0)R=Math.floor(R/F)*F,P=Math.ceil(P/F)*F;else if(F<0)R=Math.ceil(R*F)/F,P=Math.floor(P*F)/F;else break;D=F}return E},E}function linear$1(){var E=continuous();return E.copy=function(){return copy(E,linear$1())},initRange.apply(E,arguments),linearish(E)}function Transform(E,A,_){this.k=E,this.x=A,this.y=_}Transform.prototype={constructor:Transform,scale:function(E){return E===1?this:new Transform(this.k*E,this.x,this.y)},translate:function(E,A){return E===0&A===0?this:new Transform(this.k,this.x+this.k*E,this.y+this.k*A)},apply:function(E){return[E[0]*this.k+this.x,E[1]*this.k+this.y]},applyX:function(E){return E*this.k+this.x},applyY:function(E){return E*this.k+this.y},invert:function(E){return[(E[0]-this.x)/this.k,(E[1]-this.y)/this.k]},invertX:function(E){return(E-this.x)/this.k},invertY:function(E){return(E-this.y)/this.k},rescaleX:function(E){return E.copy().domain(E.range().map(this.invertX,this).map(E.invert,E))},rescaleY:function(E){return E.copy().domain(E.range().map(this.invertY,this).map(E.invert,E))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Transform.prototype;class Histogram{constructor(A,_){this.pixels=A,this.opts=_;const{sigBits:I}=_,B=(de,pe,ve)=>(de<<2*I)+(pe<<I)+ve;this.getColorIndex=B;const T=8-I,R=1<<3*I,P=new Uint32Array(R);let D,F,L,U,V,K,J,ee,ie,ne;D=L=V=0,F=U=K=Number.MAX_VALUE;const ce=A.length/4;let fe=0;for(;fe<ce;){const de=fe*4;if(fe++,J=A[de+0],ee=A[de+1],ie=A[de+2],ne=A[de+3],ne===0)continue;J=J>>T,ee=ee>>T,ie=ie>>T;const pe=B(J,ee,ie);P[pe]===void 0&&(P[pe]=0),P[pe]+=1,J>D&&(D=J),J<F&&(F=J),ee>L&&(L=ee),ee<U&&(U=ee),ie>V&&(V=ie),ie<K&&(K=ie)}this._colorCount=P.reduce((de,pe)=>pe>0?de+1:de,0),this.hist=P,this.rmax=D,this.rmin=F,this.gmax=L,this.gmin=U,this.bmax=V,this.bmin=K}get colorCount(){return this._colorCount}}class ImageBase{scaleDown(A){const _=this.getWidth(),I=this.getHeight();let B=1;if(A.maxDimension>0){const T=Math.max(_,I);T>A.maxDimension&&(B=A.maxDimension/T)}else B=1/A.quality;B<1&&this.resize(_*B,I*B,B)}}function applyFilters(E,A){var _;if(A.length>0){const I=E.data,B=I.length/4;let T,R,P,D,F;for(let L=0;L<B;L++){T=L*4,R=I[T+0],P=I[T+1],D=I[T+2],F=I[T+3];for(let U=0;U<A.length;U++)if(!((_=A[U])!=null&&_.call(A,R,P,D,F))){I[T+3]=0;break}}}return E}function isRelativeUrl(E){const A=new URL(E,location.href);return A.protocol===location.protocol&&A.host===location.host&&A.port===location.port}function isSameOrigin(E,A){const _=new URL(E),I=new URL(A);return _.protocol===I.protocol&&_.hostname===I.hostname&&_.port===I.port}class BrowserImage extends ImageBase{_getCanvas(){if(!this._canvas)throw new Error("Canvas is not initialized");return this._canvas}_getContext(){if(!this._context)throw new Error("Context is not initialized");return this._context}_getWidth(){if(!this._width)throw new Error("Width is not initialized");return this._width}_getHeight(){if(!this._height)throw new Error("Height is not initialized");return this._height}_initCanvas(){const A=this.image;if(!A)throw new Error("Image is not initialized");const _=this._canvas=document.createElement("canvas"),I=_.getContext("2d");if(!I)throw new ReferenceError("Failed to create canvas context");this._context=I,_.className="@vibrant/canvas",_.style.display="none",this._width=_.width=A.width,this._height=_.height=A.height,I.drawImage(A,0,0),document.body.appendChild(_)}load(A){let _,I;if(typeof A=="string")_=document.createElement("img"),I=A,!isRelativeUrl(I)&&!isSameOrigin(window.location.href,I)&&(_.crossOrigin="anonymous"),_.src=I;else if(A instanceof HTMLImageElement)_=A,I=A.src;else return Promise.reject(new Error("Cannot load buffer as an image in browser"));return this.image=_,new Promise((B,T)=>{const R=()=>{this._initCanvas(),B(this)};_.complete?R():(_.onload=R,_.onerror=P=>T(new Error(`Fail to load image: ${I}`)))})}clear(){this._getContext().clearRect(0,0,this._getWidth(),this._getHeight())}update(A){this._getContext().putImageData(A,0,0)}getWidth(){return this._getWidth()}getHeight(){return this._getHeight()}resize(A,_,I){if(!this.image)throw new Error("Image is not initialized");this._width=this._getCanvas().width=A,this._height=this._getCanvas().height=_,this._getContext().scale(I,I),this._getContext().drawImage(this.image,0,0)}getPixelCount(){return this._getWidth()*this._getHeight()}getImageData(){return this._getContext().getImageData(0,0,this._getWidth(),this._getHeight())}remove(){this._canvas&&this._canvas.parentNode&&this._canvas.parentNode.removeChild(this._canvas)}}function assignDeep(E,...A){return A.forEach(_=>{if(_){for(const I in _)if(_.hasOwnProperty(I)){const B=_[I];Array.isArray(B)?E[I]=B.slice(0):typeof B=="object"?(E[I]||(E[I]={}),assignDeep(E[I],B)):E[I]=B}}}),E}function buildProcessOptions(E,A){const{colorCount:_,quantizer:I,generators:B,filters:T}=E,R={colorCount:_},P=typeof I=="string"?{name:I,options:{}}:I;return P.options=assignDeep({},R,P.options),assignDeep({},{quantizer:P,generators:B,filters:T},A)}class Builder{constructor(A,_={}){this._src=A,this._opts=assignDeep({},Vibrant.DefaultOpts,_)}maxColorCount(A){return this._opts.colorCount=A,this}maxDimension(A){return this._opts.maxDimension=A,this}addFilter(A){return this._opts.filters?this._opts.filters.push(A):this._opts.filters=[A],this}removeFilter(A){if(this._opts.filters){const _=this._opts.filters.indexOf(A);_>0&&this._opts.filters.splice(_)}return this}clearFilters(){return this._opts.filters=[],this}quality(A){return this._opts.quality=A,this}useImageClass(A){return this._opts.ImageClass=A,this}useGenerator(A,_){return this._opts.generators||(this._opts.generators=[]),this._opts.generators.push(_?{name:A,options:_}:A),this}useQuantizer(A,_){return this._opts.quantizer=_?{name:A,options:_}:A,this}build(){return new Vibrant(this._src,this._opts)}getPalette(){return this.build().getPalette()}}class Stage{constructor(A){this.pipeline=A,this._map={}}names(){return Object.keys(this._map)}has(A){return!!this._map[A]}get(A){return this._map[A]}register(A,_){return this._map[A]=_,this.pipeline}}class BasicPipeline{constructor(){this.filter=new Stage(this),this.quantizer=new Stage(this),this.generator=new Stage(this)}_buildProcessTasks({filters:A,quantizer:_,generators:I}){return I.length===1&&I[0]==="*"&&(I=this.generator.names()),{filters:A.map(T=>B(this.filter,T)),quantizer:B(this.quantizer,_),generators:I.map(T=>B(this.generator,T))};function B(T,R){let P,D;return typeof R=="string"?P=R:(P=R.name,D=R.options),{name:P,fn:T.get(P),options:D}}}async process(A,_){const{filters:I,quantizer:B,generators:T}=this._buildProcessTasks(_),R=await this._filterColors(I,A),P=await this._generateColors(B,R),D=await this._generatePalettes(T,P);return{colors:P,palettes:D}}_filterColors(A,_){return Promise.resolve(applyFilters(_,A.map(({fn:I})=>I)))}_generateColors(A,_){return Promise.resolve(A.fn(_.data,A.options))}async _generatePalettes(A,_){const I=await Promise.all(A.map(({fn:B,options:T})=>Promise.resolve(B(_,T))));return Promise.resolve(I.reduce((B,T,R)=>(B[A[R].name]=T,B),{}))}}function rgbToHex(E,A,_){return"#"+((1<<24)+(E<<16)+(A<<8)+_).toString(16).slice(1,7)}function rgbToHsl(E,A,_){E/=255,A/=255,_/=255;const I=Math.max(E,A,_),B=Math.min(E,A,_);let T=0,R=0;const P=(I+B)/2;if(I!==B){const D=I-B;switch(R=P>.5?D/(2-I-B):D/(I+B),I){case E:T=(A-_)/D+(A<_?6:0);break;case A:T=(_-E)/D+2;break;case _:T=(E-A)/D+4;break}T/=6}return[T,R,P]}function hslToRgb(E,A,_){let I,B,T;function R(P,D,F){return F<0&&(F+=1),F>1&&(F-=1),F<1/6?P+(D-P)*6*F:F<1/2?D:F<2/3?P+(D-P)*(2/3-F)*6:P}if(A===0)I=B=T=_;else{const P=_<.5?_*(1+A):_+A-_*A,D=2*_-P;I=R(D,P,E+1/3),B=R(D,P,E),T=R(D,P,E-1/3)}return[I*255,B*255,T*255]}class Swatch{static applyFilters(A,_){return _.length>0?A.filter(({r:I,g:B,b:T})=>{var R;for(let P=0;P<_.length;P++)if(!((R=_[P])!=null&&R.call(_,I,B,T,255)))return!1;return!0}):A}static clone(A){return new Swatch(A._rgb,A._population)}get r(){return this._rgb[0]}get g(){return this._rgb[1]}get b(){return this._rgb[2]}get rgb(){return this._rgb}get hsl(){if(!this._hsl){const[A,_,I]=this._rgb;this._hsl=rgbToHsl(A,_,I)}return this._hsl}get hex(){if(!this._hex){const[A,_,I]=this._rgb;this._hex=rgbToHex(A,_,I)}return this._hex}get population(){return this._population}toJSON(){return{rgb:this.rgb,population:this.population}}getYiq(){if(!this._yiq){const A=this._rgb;this._yiq=(A[0]*299+A[1]*587+A[2]*114)/1e3}return this._yiq}get titleTextColor(){return this._titleTextColor||(this._titleTextColor=this.getYiq()<200?"#fff":"#000"),this._titleTextColor}get bodyTextColor(){return this._bodyTextColor||(this._bodyTextColor=this.getYiq()<150?"#fff":"#000"),this._bodyTextColor}constructor(A,_){this._rgb=A,this._population=_}}const _Vibrant=class Qi{constructor(A,_){this._src=A,this.opts=assignDeep({},Qi.DefaultOpts,_)}static use(A){this._pipeline=A}static from(A){return new Builder(A)}get result(){return this._result}_process(A,_){A.scaleDown(this.opts);const I=buildProcessOptions(this.opts,_);return Qi._pipeline.process(A.getImageData(),I)}async getPalette(){const A=new this.opts.ImageClass;try{const _=await A.load(this._src),I=await this._process(_,{generators:["default"]});this._result=I;const B=I.palettes.default;if(!B)throw new Error("Something went wrong and a palette was not found, please file a bug against our GitHub repo: https://github.com/vibrant-Colors/node-vibrant/");return A.remove(),B}catch(_){return A.remove(),Promise.reject(_)}}async getPalettes(){const A=new this.opts.ImageClass;try{const _=await A.load(this._src),I=await this._process(_,{generators:["*"]});this._result=I;const B=I.palettes;return A.remove(),B}catch(_){return A.remove(),Promise.reject(_)}}};_Vibrant.DefaultOpts={colorCount:64,quality:5,filters:[]};let Vibrant=_Vibrant;Vibrant.DefaultOpts.quantizer="mmcq";Vibrant.DefaultOpts.generators=["default"];Vibrant.DefaultOpts.filters=["default"];Vibrant.DefaultOpts.ImageClass=BrowserImage;const SIGBITS=5,RSHIFT=8-SIGBITS;class VBox{constructor(A,_,I,B,T,R,P){this.histogram=P,this._volume=-1,this._avg=null,this._count=-1,this.dimension={r1:A,r2:_,g1:I,g2:B,b1:T,b2:R}}static build(A){const _=new Histogram(A,{sigBits:SIGBITS}),{rmin:I,rmax:B,gmin:T,gmax:R,bmin:P,bmax:D}=_;return new VBox(I,B,T,R,P,D,_)}invalidate(){this._volume=this._count=-1,this._avg=null}volume(){if(this._volume<0){const{r1:A,r2:_,g1:I,g2:B,b1:T,b2:R}=this.dimension;this._volume=(_-A+1)*(B-I+1)*(R-T+1)}return this._volume}count(){if(this._count<0){const{hist:A,getColorIndex:_}=this.histogram,{r1:I,r2:B,g1:T,g2:R,b1:P,b2:D}=this.dimension;let F=0;for(let L=I;L<=B;L++)for(let U=T;U<=R;U++)for(let V=P;V<=D;V++){const K=_(L,U,V);A[K]&&(F+=A[K])}this._count=F}return this._count}clone(){const{histogram:A}=this,{r1:_,r2:I,g1:B,g2:T,b1:R,b2:P}=this.dimension;return new VBox(_,I,B,T,R,P,A)}avg(){if(!this._avg){const{hist:A,getColorIndex:_}=this.histogram,{r1:I,r2:B,g1:T,g2:R,b1:P,b2:D}=this.dimension;let F=0;const L=1<<8-SIGBITS;let U,V,K;U=V=K=0;for(let J=I;J<=B;J++)for(let ee=T;ee<=R;ee++)for(let ie=P;ie<=D;ie++){const ne=_(J,ee,ie),ce=A[ne];ce&&(F+=ce,U+=ce*(J+.5)*L,V+=ce*(ee+.5)*L,K+=ce*(ie+.5)*L)}F?this._avg=[~~(U/F),~~(V/F),~~(K/F)]:this._avg=[~~(L*(I+B+1)/2),~~(L*(T+R+1)/2),~~(L*(P+D+1)/2)]}return this._avg}contains(A){let[_,I,B]=A;const{r1:T,r2:R,g1:P,g2:D,b1:F,b2:L}=this.dimension;return _>>=RSHIFT,I>>=RSHIFT,B>>=RSHIFT,_>=T&&_<=R&&I>=P&&I<=D&&B>=F&&B<=L}split(){const{hist:A,getColorIndex:_}=this.histogram,{r1:I,r2:B,g1:T,g2:R,b1:P,b2:D}=this.dimension,F=this.count();if(!F)return[];if(F===1)return[this.clone()];const L=B-I+1,U=R-T+1,V=D-P+1,K=Math.max(L,U,V);let J=null,ee,ie;ee=ie=0;let ne=null;if(K===L){ne="r",J=new Uint32Array(B+1);for(let ve=I;ve<=B;ve++){ee=0;for(let ye=T;ye<=R;ye++)for(let _e=P;_e<=D;_e++){const be=_(ve,ye,_e);A[be]&&(ee+=A[be])}ie+=ee,J[ve]=ie}}else if(K===U){ne="g",J=new Uint32Array(R+1);for(let ve=T;ve<=R;ve++){ee=0;for(let ye=I;ye<=B;ye++)for(let _e=P;_e<=D;_e++){const be=_(ye,ve,_e);A[be]&&(ee+=A[be])}ie+=ee,J[ve]=ie}}else{ne="b",J=new Uint32Array(D+1);for(let ve=P;ve<=D;ve++){ee=0;for(let ye=I;ye<=B;ye++)for(let _e=T;_e<=R;_e++){const be=_(ye,_e,ve);A[be]&&(ee+=A[be])}ie+=ee,J[ve]=ie}}let ce=-1;const fe=new Uint32Array(J.length);for(let ve=0;ve<J.length;ve++){const ye=J[ve];ye&&(ce<0&&ye>ie/2&&(ce=ve),fe[ve]=ie-ye)}const de=this;function pe(ve){const ye=ve+"1",_e=ve+"2",be=de.dimension[ye];let Te=de.dimension[_e];const ue=de.clone(),O=de.clone(),z=ce-be,Y=Te-ce;for(z<=Y?(Te=Math.min(Te-1,~~(ce+Y/2)),Te=Math.max(0,Te)):(Te=Math.max(be,~~(ce-1-z/2)),Te=Math.min(de.dimension[_e],Te));!J[Te];)Te++;let te=fe[Te];for(;!te&&J[Te-1];)te=fe[--Te];return ue.dimension[_e]=Te,O.dimension[ye]=Te+1,[ue,O]}return pe(ne)}}class PQueue{_sort(){this._sorted||(this.contents.sort(this._comparator),this._sorted=!0)}constructor(A){this._comparator=A,this.contents=[],this._sorted=!1}push(A){this.contents.push(A),this._sorted=!1}peek(A){return this._sort(),A=typeof A=="number"?A:this.contents.length-1,this.contents[A]}pop(){return this._sort(),this.contents.pop()}size(){return this.contents.length}map(A){return this._sort(),this.contents.map(A)}}const fractByPopulations=.75;function _splitBoxes(E,A){let _=E.size();for(;E.size()<A;){const I=E.pop();if(I&&I.count()>0){const[B,T]=I.split();if(!B||(E.push(B),T&&T.count()>0&&E.push(T),E.size()===_))break;_=E.size()}else break}}const MMCQ=(E,A)=>{if(E.length===0||A.colorCount<2||A.colorCount>256)throw new Error("Wrong MMCQ parameters");const _=VBox.build(E);_.histogram.colorCount;const I=new PQueue((T,R)=>T.count()-R.count());I.push(_),_splitBoxes(I,fractByPopulations*A.colorCount);const B=new PQueue((T,R)=>T.count()*T.volume()-R.count()*R.volume());return B.contents=I.contents,_splitBoxes(B,A.colorCount-B.size()),generateSwatches(B)};function generateSwatches(E){const A=[];for(;E.size();){const _=E.pop(),I=_.avg();A.push(new Swatch(I,_.count()))}return A}const DefaultOpts={targetDarkLuma:.26,maxDarkLuma:.45,minLightLuma:.55,targetLightLuma:.74,minNormalLuma:.3,targetNormalLuma:.5,maxNormalLuma:.7,targetMutesSaturation:.3,maxMutesSaturation:.4,targetVibrantSaturation:1,minVibrantSaturation:.35,weightSaturation:3,weightLuma:6.5,weightPopulation:.5};function _findMaxPopulation(E){let A=0;return E.forEach(_=>{A=Math.max(A,_.population)}),A}function _isAlreadySelected(E,A){return E.Vibrant===A||E.DarkVibrant===A||E.LightVibrant===A||E.Muted===A||E.DarkMuted===A||E.LightMuted===A}function _createComparisonValue(E,A,_,I,B,T,R){function P(...F){let L=0,U=0;for(let V=0;V<F.length;V+=2){const K=F[V],J=F[V+1];!K||!J||(L+=K*J,U+=J)}return L/U}function D(F,L){return 1-Math.abs(F-L)}return P(D(E,A),R.weightSaturation,D(_,I),R.weightLuma,B/T,R.weightPopulation)}function _findColorVariation(E,A,_,I,B,T,R,P,D,F){let L=null,U=0;return A.forEach(V=>{const[,K,J]=V.hsl;if(K>=P&&K<=D&&J>=B&&J<=T&&!_isAlreadySelected(E,V)){const ee=_createComparisonValue(K,R,J,I,V.population,_,F);(L===null||ee>U)&&(L=V,U=ee)}}),L}function _generateVariationColors(E,A,_){const I={Vibrant:null,DarkVibrant:null,LightVibrant:null,Muted:null,DarkMuted:null,LightMuted:null};return I.Vibrant=_findColorVariation(I,E,A,_.targetNormalLuma,_.minNormalLuma,_.maxNormalLuma,_.targetVibrantSaturation,_.minVibrantSaturation,1,_),I.LightVibrant=_findColorVariation(I,E,A,_.targetLightLuma,_.minLightLuma,1,_.targetVibrantSaturation,_.minVibrantSaturation,1,_),I.DarkVibrant=_findColorVariation(I,E,A,_.targetDarkLuma,0,_.maxDarkLuma,_.targetVibrantSaturation,_.minVibrantSaturation,1,_),I.Muted=_findColorVariation(I,E,A,_.targetNormalLuma,_.minNormalLuma,_.maxNormalLuma,_.targetMutesSaturation,0,_.maxMutesSaturation,_),I.LightMuted=_findColorVariation(I,E,A,_.targetLightLuma,_.minLightLuma,1,_.targetMutesSaturation,0,_.maxMutesSaturation,_),I.DarkMuted=_findColorVariation(I,E,A,_.targetDarkLuma,0,_.maxDarkLuma,_.targetMutesSaturation,0,_.maxMutesSaturation,_),I}function _generateEmptySwatches(E,A,_){if(!E.Vibrant&&!E.DarkVibrant&&!E.LightVibrant){if(!E.DarkVibrant&&E.DarkMuted){let[I,B,T]=E.DarkMuted.hsl;T=_.targetDarkLuma,E.DarkVibrant=new Swatch(hslToRgb(I,B,T),0)}if(!E.LightVibrant&&E.LightMuted){let[I,B,T]=E.LightMuted.hsl;T=_.targetDarkLuma,E.DarkVibrant=new Swatch(hslToRgb(I,B,T),0)}}if(!E.Vibrant&&E.DarkVibrant){let[I,B,T]=E.DarkVibrant.hsl;T=_.targetNormalLuma,E.Vibrant=new Swatch(hslToRgb(I,B,T),0)}else if(!E.Vibrant&&E.LightVibrant){let[I,B,T]=E.LightVibrant.hsl;T=_.targetNormalLuma,E.Vibrant=new Swatch(hslToRgb(I,B,T),0)}if(!E.DarkVibrant&&E.Vibrant){let[I,B,T]=E.Vibrant.hsl;T=_.targetDarkLuma,E.DarkVibrant=new Swatch(hslToRgb(I,B,T),0)}if(!E.LightVibrant&&E.Vibrant){let[I,B,T]=E.Vibrant.hsl;T=_.targetLightLuma,E.LightVibrant=new Swatch(hslToRgb(I,B,T),0)}if(!E.Muted&&E.Vibrant){let[I,B,T]=E.Vibrant.hsl;T=_.targetMutesSaturation,E.Muted=new Swatch(hslToRgb(I,B,T),0)}if(!E.DarkMuted&&E.DarkVibrant){let[I,B,T]=E.DarkVibrant.hsl;T=_.targetMutesSaturation,E.DarkMuted=new Swatch(hslToRgb(I,B,T),0)}if(!E.LightMuted&&E.LightVibrant){let[I,B,T]=E.LightVibrant.hsl;T=_.targetMutesSaturation,E.LightMuted=new Swatch(hslToRgb(I,B,T),0)}}const DefaultGenerator=(E,A)=>{A=Object.assign({},DefaultOpts,A);const _=_findMaxPopulation(E),I=_generateVariationColors(E,_,A);return _generateEmptySwatches(I,_,A),I},pipeline=new BasicPipeline().filter.register("default",(E,A,_,I)=>I>=125&&!(E>250&&A>250&&_>250)).quantizer.register("mmcq",MMCQ).generator.register("default",DefaultGenerator);Vibrant.use(pipeline);function lighten(E,A){const _=A*.5,I=[];return I[0]=Math.min(1,E[0]*(1+.5*_)+1*_),I[1]=Math.min(1,E[1]*(1+.5*_)+1*_),I[2]=Math.min(1,E[2]*(1+.5*_)+1*_),I}function darken(E,A){const _=Math.max(1,1+A),I=[];return I[0]=Math.min(1,E[0]/_),I[1]=Math.min(1,E[1]/_),I[2]=Math.min(1,E[2]/_),I}function binarySearch(E,A,_){let I=0,B=A.length-1,T=I+Math.floor((B-I)/2);for(;B>=I;){T=I+Math.floor((B-I)/2);const R=_(A[T],E);if(R===0)return T;R>0&&(B=T-1),R<0&&(I=T+1)}return T}function millisecondsToMinutesString(E){const A=Math.floor(E/6e4)%100,_=Math.floor(E%6e4/1e3)%60,I=Math.floor(E%1e3);return`${A.toString().padStart(2,"0")}:${_.toString().padStart(2,"0")}:${I.toString().padStart(3,"0")}`}function gcd(E,A){let[_,I]=[E,A];for(_<I&&([_,I]=[I,_]);_%I!==0;)[_,I]=[I,_%I];return I}const difficultyColourSpectrum=linear$1().domain([.1,1.25,2,2.5,3.3,4.2,4.9,5.8,6.7,7.7,9]).clamp(!0).range(["#4290FB","#4FC0FF","#4FFFD5","#7CFF4F","#F6F05C","#FF8068","#FF4E6F","#C645B8","#6563DE","#18158E","#000000"]).interpolate(interpolateRgb.gamma(2.2));function getDiffColour(E){return E<.1?"#AAAAAA":E>=9?"#000000":rgb(difficultyColourSpectrum(E)).formatHex()}async function loadColorPalette(E){const _=await new Vibrant(E).getPalette();let I={};const B=_.DarkMuted??_.Muted;if(B){const P=(.299*B.rgb[0]+.587*B.rgb[1]+.114*B.rgb[2])/255;let D=color(B.hex);if(D){if(P<.1){const F=.1/P,L=-Math.log(F)/Math.log(.7);D=D.brighter(L)}I={...I,crust:Number.parseInt(D.darker(3).formatHex().slice(1),16),mantle:Number.parseInt(D.darker(2).formatHex().slice(1),16),base:Number.parseInt(D.darker(1).formatHex().slice(1),16),surface0:Number.parseInt(D.darker(.5).formatHex().slice(1),16),surface1:Number.parseInt(D.formatHex().slice(1),16),surface2:Number.parseInt(D.brighter(.5).formatHex().slice(1),16),overlay0:Number.parseInt(D.brighter(1).formatHex().slice(1),16),overlay1:Number.parseInt(D.brighter(1.5).formatHex().slice(1),16),overlay2:Number.parseInt(D.brighter(2).formatHex().slice(1),16)}}}const T=_.LightMuted??_.Muted;if(T){const P=color(T.hex);P&&(I={...I,subtext0:Number.parseInt(P.formatHex().slice(1),16),subtext1:Number.parseInt(P.brighter(.5).formatHex().slice(1),16),text:Number.parseInt(P.brighter(1).formatHex().slice(1),16)})}const R=inject("config/color");R&&(R.color=I)}const Clamp=(E,A=0,_=1)=>Math.min(_,Math.max(A,E)),difficultyRange=(E,A,_,I)=>E>5?_+(I-_)*(E-5)/5:E<5?_-(_-A)*(5-E)/5:_,closestPointTo=(E,A,_)=>{const I=_.subtract(A),T=E.subtract(A).dot(I);if(T<=0)return A;const R=I.dot(I);if(R<=T)return _;const P=T/R;return A.add(I.scale(P))};var MessageType=(E=>(E.Init="init",E.Load="load",E.Seek="seek",E.Frame="frame",E.Play="play",E.Stop="stop",E))(MessageType||{});function WorkerWrapper$1(E){return new Worker(""+new URL("Worker-DSrTENwz.js",import.meta.url).href,{name:E?.name})}class Video{worker=new WorkerWrapper$1;constructor(){this.worker.postMessage({type:MessageType.Init,data:window.location.origin}),this.worker.addEventListener("message",A=>{switch(A.data.type){case MessageType.Frame:{if(!inject("config/background")?.video){A.data.data.close();break}inject("ui/main/viewer/background")?.updateFrame(A.data.data);break}}}),inject("config/background")?.onChange("video",A=>{const _=inject("beatmapset")?.context.consume("audio");_&&(A||this.stop(_.currentTime),A&&_.state==="PLAYING"&&this.play(_.currentTime))})}async load(A,_){this.worker.postMessage({type:MessageType.Load,data:A,offset:_})}seek(A){this.worker.postMessage({type:MessageType.Seek,data:A})}play(A){this.worker.postMessage({type:MessageType.Play,data:A,playbackRate:inject("beatmapset")?.playbackRate??1})}stop(A){this.worker.postMessage({type:MessageType.Stop,data:A})}destroy(){this.worker.terminate()}}const extraMode=`<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_1_34)">
<rect x="1" y="1" width="18" height="18" rx="9" stroke="white" stroke-width="2"/>
<rect x="5" y="5" width="10" height="10" rx="5" fill="white"/>
</g>
<defs>
<clipPath id="clip0_1_34">
<rect width="20" height="20" fill="white"/>
</clipPath>
</defs>
</svg>
`;var md5$4={exports:{}};function commonjsRequire(E){throw new Error('Could not dynamically require "'+E+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var core$1={exports:{}},cryptoBrowserify={},browser$e={exports:{}},safeBuffer$1={exports:{}},dist$1={},hasRequiredDist$1;function requireDist$1(){return hasRequiredDist$1||(hasRequiredDist$1=1,(function(E){Object.defineProperties(E,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var A={},_={};_.byteLength=L,_.toByteArray=V,_.fromByteArray=ee;for(var I=[],B=[],T=typeof Uint8Array<"u"?Uint8Array:Array,R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",P=0,D=R.length;P<D;++P)I[P]=R[P],B[R.charCodeAt(P)]=P;B[45]=62,B[95]=63;function F(ce){var fe=ce.length;if(fe%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var de=ce.indexOf("=");de===-1&&(de=fe);var pe=de===fe?0:4-de%4;return[de,pe]}function L(ce){var fe=F(ce),de=fe[0],pe=fe[1];return(de+pe)*3/4-pe}function U(ce,fe,de){return(fe+de)*3/4-de}function V(ce){var fe,de=F(ce),pe=de[0],ve=de[1],ye=new T(U(ce,pe,ve)),_e=0,be=ve>0?pe-4:pe,Te;for(Te=0;Te<be;Te+=4)fe=B[ce.charCodeAt(Te)]<<18|B[ce.charCodeAt(Te+1)]<<12|B[ce.charCodeAt(Te+2)]<<6|B[ce.charCodeAt(Te+3)],ye[_e++]=fe>>16&255,ye[_e++]=fe>>8&255,ye[_e++]=fe&255;return ve===2&&(fe=B[ce.charCodeAt(Te)]<<2|B[ce.charCodeAt(Te+1)]>>4,ye[_e++]=fe&255),ve===1&&(fe=B[ce.charCodeAt(Te)]<<10|B[ce.charCodeAt(Te+1)]<<4|B[ce.charCodeAt(Te+2)]>>2,ye[_e++]=fe>>8&255,ye[_e++]=fe&255),ye}function K(ce){return I[ce>>18&63]+I[ce>>12&63]+I[ce>>6&63]+I[ce&63]}function J(ce,fe,de){for(var pe,ve=[],ye=fe;ye<de;ye+=3)pe=(ce[ye]<<16&16711680)+(ce[ye+1]<<8&65280)+(ce[ye+2]&255),ve.push(K(pe));return ve.join("")}function ee(ce){for(var fe,de=ce.length,pe=de%3,ve=[],ye=16383,_e=0,be=de-pe;_e<be;_e+=ye)ve.push(J(ce,_e,_e+ye>be?be:_e+ye));return pe===1?(fe=ce[de-1],ve.push(I[fe>>2]+I[fe<<4&63]+"==")):pe===2&&(fe=(ce[de-2]<<8)+ce[de-1],ve.push(I[fe>>10]+I[fe>>4&63]+I[fe<<2&63]+"=")),ve.join("")}var ie={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ie.read=function(ce,fe,de,pe,ve){var ye,_e,be=ve*8-pe-1,Te=(1<<be)-1,ue=Te>>1,O=-7,z=de?ve-1:0,Y=de?-1:1,te=ce[fe+z];for(z+=Y,ye=te&(1<<-O)-1,te>>=-O,O+=be;O>0;ye=ye*256+ce[fe+z],z+=Y,O-=8);for(_e=ye&(1<<-O)-1,ye>>=-O,O+=pe;O>0;_e=_e*256+ce[fe+z],z+=Y,O-=8);if(ye===0)ye=1-ue;else{if(ye===Te)return _e?NaN:(te?-1:1)*(1/0);_e=_e+Math.pow(2,pe),ye=ye-ue}return(te?-1:1)*_e*Math.pow(2,ye-pe)},ie.write=function(ce,fe,de,pe,ve,ye){var _e,be,Te,ue=ye*8-ve-1,O=(1<<ue)-1,z=O>>1,Y=ve===23?Math.pow(2,-24)-Math.pow(2,-77):0,te=pe?0:ye-1,oe=pe?1:-1,le=fe<0||fe===0&&1/fe<0?1:0;for(fe=Math.abs(fe),isNaN(fe)||fe===1/0?(be=isNaN(fe)?1:0,_e=O):(_e=Math.floor(Math.log(fe)/Math.LN2),fe*(Te=Math.pow(2,-_e))<1&&(_e--,Te*=2),_e+z>=1?fe+=Y/Te:fe+=Y*Math.pow(2,1-z),fe*Te>=2&&(_e++,Te/=2),_e+z>=O?(be=0,_e=O):_e+z>=1?(be=(fe*Te-1)*Math.pow(2,ve),_e=_e+z):(be=fe*Math.pow(2,z-1)*Math.pow(2,ve),_e=0));ve>=8;ce[de+te]=be&255,te+=oe,be/=256,ve-=8);for(_e=_e<<ve|be,ue+=ve;ue>0;ce[de+te]=_e&255,te+=oe,_e/=256,ue-=8);ce[de+te-oe]|=le*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(ce){const fe=_,de=ie,pe=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;ce.Buffer=O,ce.SlowBuffer=ge,ce.INSPECT_MAX_BYTES=50;const ve=2147483647;ce.kMaxLength=ve;const{Uint8Array:ye,ArrayBuffer:_e,SharedArrayBuffer:be}=globalThis;O.TYPED_ARRAY_SUPPORT=Te(),!O.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Te(){try{const Ke=new ye(1),Ne={foo:function(){return 42}};return Object.setPrototypeOf(Ne,ye.prototype),Object.setPrototypeOf(Ke,Ne),Ke.foo()===42}catch{return!1}}Object.defineProperty(O.prototype,"parent",{enumerable:!0,get:function(){if(O.isBuffer(this))return this.buffer}}),Object.defineProperty(O.prototype,"offset",{enumerable:!0,get:function(){if(O.isBuffer(this))return this.byteOffset}});function ue(Ke){if(Ke>ve)throw new RangeError('The value "'+Ke+'" is invalid for option "size"');const Ne=new ye(Ke);return Object.setPrototypeOf(Ne,O.prototype),Ne}function O(Ke,Ne,Ye){if(typeof Ke=="number"){if(typeof Ne=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return oe(Ke)}return z(Ke,Ne,Ye)}O.poolSize=8192;function z(Ke,Ne,Ye){if(typeof Ke=="string")return le(Ke,Ne);if(_e.isView(Ke))return ae(Ke);if(Ke==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ke);if(qe(Ke,_e)||Ke&&qe(Ke.buffer,_e)||typeof be<"u"&&(qe(Ke,be)||Ke&&qe(Ke.buffer,be)))return Q(Ke,Ne,Ye);if(typeof Ke=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const st=Ke.valueOf&&Ke.valueOf();if(st!=null&&st!==Ke)return O.from(st,Ne,Ye);const bt=se(Ke);if(bt)return bt;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Ke[Symbol.toPrimitive]=="function")return O.from(Ke[Symbol.toPrimitive]("string"),Ne,Ye);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ke)}O.from=function(Ke,Ne,Ye){return z(Ke,Ne,Ye)},Object.setPrototypeOf(O.prototype,ye.prototype),Object.setPrototypeOf(O,ye);function Y(Ke){if(typeof Ke!="number")throw new TypeError('"size" argument must be of type number');if(Ke<0)throw new RangeError('The value "'+Ke+'" is invalid for option "size"')}function te(Ke,Ne,Ye){return Y(Ke),Ke<=0?ue(Ke):Ne!==void 0?typeof Ye=="string"?ue(Ke).fill(Ne,Ye):ue(Ke).fill(Ne):ue(Ke)}O.alloc=function(Ke,Ne,Ye){return te(Ke,Ne,Ye)};function oe(Ke){return Y(Ke),ue(Ke<0?0:Ae(Ke)|0)}O.allocUnsafe=function(Ke){return oe(Ke)},O.allocUnsafeSlow=function(Ke){return oe(Ke)};function le(Ke,Ne){if((typeof Ne!="string"||Ne==="")&&(Ne="utf8"),!O.isEncoding(Ne))throw new TypeError("Unknown encoding: "+Ne);const Ye=Ee(Ke,Ne)|0;let st=ue(Ye);const bt=st.write(Ke,Ne);return bt!==Ye&&(st=st.slice(0,bt)),st}function he(Ke){const Ne=Ke.length<0?0:Ae(Ke.length)|0,Ye=ue(Ne);for(let st=0;st<Ne;st+=1)Ye[st]=Ke[st]&255;return Ye}function ae(Ke){if(qe(Ke,ye)){const Ne=new ye(Ke);return Q(Ne.buffer,Ne.byteOffset,Ne.byteLength)}return he(Ke)}function Q(Ke,Ne,Ye){if(Ne<0||Ke.byteLength<Ne)throw new RangeError('"offset" is outside of buffer bounds');if(Ke.byteLength<Ne+(Ye||0))throw new RangeError('"length" is outside of buffer bounds');let st;return Ne===void 0&&Ye===void 0?st=new ye(Ke):Ye===void 0?st=new ye(Ke,Ne):st=new ye(Ke,Ne,Ye),Object.setPrototypeOf(st,O.prototype),st}function se(Ke){if(O.isBuffer(Ke)){const Ne=Ae(Ke.length)|0,Ye=ue(Ne);return Ye.length===0||Ke.copy(Ye,0,0,Ne),Ye}if(Ke.length!==void 0)return typeof Ke.length!="number"||pt(Ke.length)?ue(0):he(Ke);if(Ke.type==="Buffer"&&Array.isArray(Ke.data))return he(Ke.data)}function Ae(Ke){if(Ke>=ve)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+ve.toString(16)+" bytes");return Ke|0}function ge(Ke){return+Ke!=Ke&&(Ke=0),O.alloc(+Ke)}O.isBuffer=function(Ne){return Ne!=null&&Ne._isBuffer===!0&&Ne!==O.prototype},O.compare=function(Ne,Ye){if(qe(Ne,ye)&&(Ne=O.from(Ne,Ne.offset,Ne.byteLength)),qe(Ye,ye)&&(Ye=O.from(Ye,Ye.offset,Ye.byteLength)),!O.isBuffer(Ne)||!O.isBuffer(Ye))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Ne===Ye)return 0;let st=Ne.length,bt=Ye.length;for(let Qe=0,Re=Math.min(st,bt);Qe<Re;++Qe)if(Ne[Qe]!==Ye[Qe]){st=Ne[Qe],bt=Ye[Qe];break}return st<bt?-1:bt<st?1:0},O.isEncoding=function(Ne){switch(String(Ne).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},O.concat=function(Ne,Ye){if(!Array.isArray(Ne))throw new TypeError('"list" argument must be an Array of Buffers');if(Ne.length===0)return O.alloc(0);let st;if(Ye===void 0)for(Ye=0,st=0;st<Ne.length;++st)Ye+=Ne[st].length;const bt=O.allocUnsafe(Ye);let Qe=0;for(st=0;st<Ne.length;++st){let Re=Ne[st];if(qe(Re,ye))Qe+Re.length>bt.length?(O.isBuffer(Re)||(Re=O.from(Re)),Re.copy(bt,Qe)):ye.prototype.set.call(bt,Re,Qe);else if(O.isBuffer(Re))Re.copy(bt,Qe);else throw new TypeError('"list" argument must be an Array of Buffers');Qe+=Re.length}return bt};function Ee(Ke,Ne){if(O.isBuffer(Ke))return Ke.length;if(_e.isView(Ke)||qe(Ke,_e))return Ke.byteLength;if(typeof Ke!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Ke);const Ye=Ke.length,st=arguments.length>2&&arguments[2]===!0;if(!st&&Ye===0)return 0;let bt=!1;for(;;)switch(Ne){case"ascii":case"latin1":case"binary":return Ye;case"utf8":case"utf-8":return Dt(Ke).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ye*2;case"hex":return Ye>>>1;case"base64":return We(Ke).length;default:if(bt)return st?-1:Dt(Ke).length;Ne=(""+Ne).toLowerCase(),bt=!0}}O.byteLength=Ee;function ke(Ke,Ne,Ye){let st=!1;if((Ne===void 0||Ne<0)&&(Ne=0),Ne>this.length||((Ye===void 0||Ye>this.length)&&(Ye=this.length),Ye<=0)||(Ye>>>=0,Ne>>>=0,Ye<=Ne))return"";for(Ke||(Ke="utf8");;)switch(Ke){case"hex":return It(this,Ne,Ye);case"utf8":case"utf-8":return dt(this,Ne,Ye);case"ascii":return St(this,Ne,Ye);case"latin1":case"binary":return vt(this,Ne,Ye);case"base64":return Mt(this,Ne,Ye);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return yt(this,Ne,Ye);default:if(st)throw new TypeError("Unknown encoding: "+Ke);Ke=(Ke+"").toLowerCase(),st=!0}}O.prototype._isBuffer=!0;function Se(Ke,Ne,Ye){const st=Ke[Ne];Ke[Ne]=Ke[Ye],Ke[Ye]=st}O.prototype.swap16=function(){const Ne=this.length;if(Ne%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let Ye=0;Ye<Ne;Ye+=2)Se(this,Ye,Ye+1);return this},O.prototype.swap32=function(){const Ne=this.length;if(Ne%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let Ye=0;Ye<Ne;Ye+=4)Se(this,Ye,Ye+3),Se(this,Ye+1,Ye+2);return this},O.prototype.swap64=function(){const Ne=this.length;if(Ne%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let Ye=0;Ye<Ne;Ye+=8)Se(this,Ye,Ye+7),Se(this,Ye+1,Ye+6),Se(this,Ye+2,Ye+5),Se(this,Ye+3,Ye+4);return this},O.prototype.toString=function(){const Ne=this.length;return Ne===0?"":arguments.length===0?dt(this,0,Ne):ke.apply(this,arguments)},O.prototype.toLocaleString=O.prototype.toString,O.prototype.equals=function(Ne){if(!O.isBuffer(Ne))throw new TypeError("Argument must be a Buffer");return this===Ne?!0:O.compare(this,Ne)===0},O.prototype.inspect=function(){let Ne="";const Ye=ce.INSPECT_MAX_BYTES;return Ne=this.toString("hex",0,Ye).replace(/(.{2})/g,"$1 ").trim(),this.length>Ye&&(Ne+=" ... "),"<Buffer "+Ne+">"},pe&&(O.prototype[pe]=O.prototype.inspect),O.prototype.compare=function(Ne,Ye,st,bt,Qe){if(qe(Ne,ye)&&(Ne=O.from(Ne,Ne.offset,Ne.byteLength)),!O.isBuffer(Ne))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Ne);if(Ye===void 0&&(Ye=0),st===void 0&&(st=Ne?Ne.length:0),bt===void 0&&(bt=0),Qe===void 0&&(Qe=this.length),Ye<0||st>Ne.length||bt<0||Qe>this.length)throw new RangeError("out of range index");if(bt>=Qe&&Ye>=st)return 0;if(bt>=Qe)return-1;if(Ye>=st)return 1;if(Ye>>>=0,st>>>=0,bt>>>=0,Qe>>>=0,this===Ne)return 0;let Re=Qe-bt,Pe=st-Ye;const Me=Math.min(Re,Pe),$e=this.slice(bt,Qe),it=Ne.slice(Ye,st);for(let kt=0;kt<Me;++kt)if($e[kt]!==it[kt]){Re=$e[kt],Pe=it[kt];break}return Re<Pe?-1:Pe<Re?1:0};function Ie(Ke,Ne,Ye,st,bt){if(Ke.length===0)return-1;if(typeof Ye=="string"?(st=Ye,Ye=0):Ye>2147483647?Ye=2147483647:Ye<-2147483648&&(Ye=-2147483648),Ye=+Ye,pt(Ye)&&(Ye=bt?0:Ke.length-1),Ye<0&&(Ye=Ke.length+Ye),Ye>=Ke.length){if(bt)return-1;Ye=Ke.length-1}else if(Ye<0)if(bt)Ye=0;else return-1;if(typeof Ne=="string"&&(Ne=O.from(Ne,st)),O.isBuffer(Ne))return Ne.length===0?-1:we(Ke,Ne,Ye,st,bt);if(typeof Ne=="number")return Ne=Ne&255,typeof ye.prototype.indexOf=="function"?bt?ye.prototype.indexOf.call(Ke,Ne,Ye):ye.prototype.lastIndexOf.call(Ke,Ne,Ye):we(Ke,[Ne],Ye,st,bt);throw new TypeError("val must be string, number or Buffer")}function we(Ke,Ne,Ye,st,bt){let Qe=1,Re=Ke.length,Pe=Ne.length;if(st!==void 0&&(st=String(st).toLowerCase(),st==="ucs2"||st==="ucs-2"||st==="utf16le"||st==="utf-16le")){if(Ke.length<2||Ne.length<2)return-1;Qe=2,Re/=2,Pe/=2,Ye/=2}function Me(it,kt){return Qe===1?it[kt]:it.readUInt16BE(kt*Qe)}let $e;if(bt){let it=-1;for($e=Ye;$e<Re;$e++)if(Me(Ke,$e)===Me(Ne,it===-1?0:$e-it)){if(it===-1&&(it=$e),$e-it+1===Pe)return it*Qe}else it!==-1&&($e-=$e-it),it=-1}else for(Ye+Pe>Re&&(Ye=Re-Pe),$e=Ye;$e>=0;$e--){let it=!0;for(let kt=0;kt<Pe;kt++)if(Me(Ke,$e+kt)!==Me(Ne,kt)){it=!1;break}if(it)return $e}return-1}O.prototype.includes=function(Ne,Ye,st){return this.indexOf(Ne,Ye,st)!==-1},O.prototype.indexOf=function(Ne,Ye,st){return Ie(this,Ne,Ye,st,!0)},O.prototype.lastIndexOf=function(Ne,Ye,st){return Ie(this,Ne,Ye,st,!1)};function xe(Ke,Ne,Ye,st){Ye=Number(Ye)||0;const bt=Ke.length-Ye;st?(st=Number(st),st>bt&&(st=bt)):st=bt;const Qe=Ne.length;st>Qe/2&&(st=Qe/2);let Re;for(Re=0;Re<st;++Re){const Pe=parseInt(Ne.substr(Re*2,2),16);if(pt(Pe))return Re;Ke[Ye+Re]=Pe}return Re}function Fe(Ke,Ne,Ye,st){return Ve(Dt(Ne,Ke.length-Ye),Ke,Ye,st)}function Ge(Ke,Ne,Ye,st){return Ve(Rt(Ne),Ke,Ye,st)}function Oe(Ke,Ne,Ye,st){return Ve(We(Ne),Ke,Ye,st)}function et(Ke,Ne,Ye,st){return Ve(De(Ne,Ke.length-Ye),Ke,Ye,st)}O.prototype.write=function(Ne,Ye,st,bt){if(Ye===void 0)bt="utf8",st=this.length,Ye=0;else if(st===void 0&&typeof Ye=="string")bt=Ye,st=this.length,Ye=0;else if(isFinite(Ye))Ye=Ye>>>0,isFinite(st)?(st=st>>>0,bt===void 0&&(bt="utf8")):(bt=st,st=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Qe=this.length-Ye;if((st===void 0||st>Qe)&&(st=Qe),Ne.length>0&&(st<0||Ye<0)||Ye>this.length)throw new RangeError("Attempt to write outside buffer bounds");bt||(bt="utf8");let Re=!1;for(;;)switch(bt){case"hex":return xe(this,Ne,Ye,st);case"utf8":case"utf-8":return Fe(this,Ne,Ye,st);case"ascii":case"latin1":case"binary":return Ge(this,Ne,Ye,st);case"base64":return Oe(this,Ne,Ye,st);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return et(this,Ne,Ye,st);default:if(Re)throw new TypeError("Unknown encoding: "+bt);bt=(""+bt).toLowerCase(),Re=!0}},O.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Mt(Ke,Ne,Ye){return Ne===0&&Ye===Ke.length?fe.fromByteArray(Ke):fe.fromByteArray(Ke.slice(Ne,Ye))}function dt(Ke,Ne,Ye){Ye=Math.min(Ke.length,Ye);const st=[];let bt=Ne;for(;bt<Ye;){const Qe=Ke[bt];let Re=null,Pe=Qe>239?4:Qe>223?3:Qe>191?2:1;if(bt+Pe<=Ye){let Me,$e,it,kt;switch(Pe){case 1:Qe<128&&(Re=Qe);break;case 2:Me=Ke[bt+1],(Me&192)===128&&(kt=(Qe&31)<<6|Me&63,kt>127&&(Re=kt));break;case 3:Me=Ke[bt+1],$e=Ke[bt+2],(Me&192)===128&&($e&192)===128&&(kt=(Qe&15)<<12|(Me&63)<<6|$e&63,kt>2047&&(kt<55296||kt>57343)&&(Re=kt));break;case 4:Me=Ke[bt+1],$e=Ke[bt+2],it=Ke[bt+3],(Me&192)===128&&($e&192)===128&&(it&192)===128&&(kt=(Qe&15)<<18|(Me&63)<<12|($e&63)<<6|it&63,kt>65535&&kt<1114112&&(Re=kt))}}Re===null?(Re=65533,Pe=1):Re>65535&&(Re-=65536,st.push(Re>>>10&1023|55296),Re=56320|Re&1023),st.push(Re),bt+=Pe}return Ut(st)}const mt=4096;function Ut(Ke){const Ne=Ke.length;if(Ne<=mt)return String.fromCharCode.apply(String,Ke);let Ye="",st=0;for(;st<Ne;)Ye+=String.fromCharCode.apply(String,Ke.slice(st,st+=mt));return Ye}function St(Ke,Ne,Ye){let st="";Ye=Math.min(Ke.length,Ye);for(let bt=Ne;bt<Ye;++bt)st+=String.fromCharCode(Ke[bt]&127);return st}function vt(Ke,Ne,Ye){let st="";Ye=Math.min(Ke.length,Ye);for(let bt=Ne;bt<Ye;++bt)st+=String.fromCharCode(Ke[bt]);return st}function It(Ke,Ne,Ye){const st=Ke.length;(!Ne||Ne<0)&&(Ne=0),(!Ye||Ye<0||Ye>st)&&(Ye=st);let bt="";for(let Qe=Ne;Qe<Ye;++Qe)bt+=At[Ke[Qe]];return bt}function yt(Ke,Ne,Ye){const st=Ke.slice(Ne,Ye);let bt="";for(let Qe=0;Qe<st.length-1;Qe+=2)bt+=String.fromCharCode(st[Qe]+st[Qe+1]*256);return bt}O.prototype.slice=function(Ne,Ye){const st=this.length;Ne=~~Ne,Ye=Ye===void 0?st:~~Ye,Ne<0?(Ne+=st,Ne<0&&(Ne=0)):Ne>st&&(Ne=st),Ye<0?(Ye+=st,Ye<0&&(Ye=0)):Ye>st&&(Ye=st),Ye<Ne&&(Ye=Ne);const bt=this.subarray(Ne,Ye);return Object.setPrototypeOf(bt,O.prototype),bt};function Tt(Ke,Ne,Ye){if(Ke%1!==0||Ke<0)throw new RangeError("offset is not uint");if(Ke+Ne>Ye)throw new RangeError("Trying to access beyond buffer length")}O.prototype.readUintLE=O.prototype.readUIntLE=function(Ne,Ye,st){Ne=Ne>>>0,Ye=Ye>>>0,st||Tt(Ne,Ye,this.length);let bt=this[Ne],Qe=1,Re=0;for(;++Re<Ye&&(Qe*=256);)bt+=this[Ne+Re]*Qe;return bt},O.prototype.readUintBE=O.prototype.readUIntBE=function(Ne,Ye,st){Ne=Ne>>>0,Ye=Ye>>>0,st||Tt(Ne,Ye,this.length);let bt=this[Ne+--Ye],Qe=1;for(;Ye>0&&(Qe*=256);)bt+=this[Ne+--Ye]*Qe;return bt},O.prototype.readUint8=O.prototype.readUInt8=function(Ne,Ye){return Ne=Ne>>>0,Ye||Tt(Ne,1,this.length),this[Ne]},O.prototype.readUint16LE=O.prototype.readUInt16LE=function(Ne,Ye){return Ne=Ne>>>0,Ye||Tt(Ne,2,this.length),this[Ne]|this[Ne+1]<<8},O.prototype.readUint16BE=O.prototype.readUInt16BE=function(Ne,Ye){return Ne=Ne>>>0,Ye||Tt(Ne,2,this.length),this[Ne]<<8|this[Ne+1]},O.prototype.readUint32LE=O.prototype.readUInt32LE=function(Ne,Ye){return Ne=Ne>>>0,Ye||Tt(Ne,4,this.length),(this[Ne]|this[Ne+1]<<8|this[Ne+2]<<16)+this[Ne+3]*16777216},O.prototype.readUint32BE=O.prototype.readUInt32BE=function(Ne,Ye){return Ne=Ne>>>0,Ye||Tt(Ne,4,this.length),this[Ne]*16777216+(this[Ne+1]<<16|this[Ne+2]<<8|this[Ne+3])},O.prototype.readBigUInt64LE=jt(function(Ne){Ne=Ne>>>0,Je(Ne,"offset");const Ye=this[Ne],st=this[Ne+7];(Ye===void 0||st===void 0)&&nt(Ne,this.length-8);const bt=Ye+this[++Ne]*2**8+this[++Ne]*2**16+this[++Ne]*2**24,Qe=this[++Ne]+this[++Ne]*2**8+this[++Ne]*2**16+st*2**24;return BigInt(bt)+(BigInt(Qe)<<BigInt(32))}),O.prototype.readBigUInt64BE=jt(function(Ne){Ne=Ne>>>0,Je(Ne,"offset");const Ye=this[Ne],st=this[Ne+7];(Ye===void 0||st===void 0)&&nt(Ne,this.length-8);const bt=Ye*2**24+this[++Ne]*2**16+this[++Ne]*2**8+this[++Ne],Qe=this[++Ne]*2**24+this[++Ne]*2**16+this[++Ne]*2**8+st;return(BigInt(bt)<<BigInt(32))+BigInt(Qe)}),O.prototype.readIntLE=function(Ne,Ye,st){Ne=Ne>>>0,Ye=Ye>>>0,st||Tt(Ne,Ye,this.length);let bt=this[Ne],Qe=1,Re=0;for(;++Re<Ye&&(Qe*=256);)bt+=this[Ne+Re]*Qe;return Qe*=128,bt>=Qe&&(bt-=Math.pow(2,8*Ye)),bt},O.prototype.readIntBE=function(Ne,Ye,st){Ne=Ne>>>0,Ye=Ye>>>0,st||Tt(Ne,Ye,this.length);let bt=Ye,Qe=1,Re=this[Ne+--bt];for(;bt>0&&(Qe*=256);)Re+=this[Ne+--bt]*Qe;return Qe*=128,Re>=Qe&&(Re-=Math.pow(2,8*Ye)),Re},O.prototype.readInt8=function(Ne,Ye){return Ne=Ne>>>0,Ye||Tt(Ne,1,this.length),this[Ne]&128?(255-this[Ne]+1)*-1:this[Ne]},O.prototype.readInt16LE=function(Ne,Ye){Ne=Ne>>>0,Ye||Tt(Ne,2,this.length);const st=this[Ne]|this[Ne+1]<<8;return st&32768?st|4294901760:st},O.prototype.readInt16BE=function(Ne,Ye){Ne=Ne>>>0,Ye||Tt(Ne,2,this.length);const st=this[Ne+1]|this[Ne]<<8;return st&32768?st|4294901760:st},O.prototype.readInt32LE=function(Ne,Ye){return Ne=Ne>>>0,Ye||Tt(Ne,4,this.length),this[Ne]|this[Ne+1]<<8|this[Ne+2]<<16|this[Ne+3]<<24},O.prototype.readInt32BE=function(Ne,Ye){return Ne=Ne>>>0,Ye||Tt(Ne,4,this.length),this[Ne]<<24|this[Ne+1]<<16|this[Ne+2]<<8|this[Ne+3]},O.prototype.readBigInt64LE=jt(function(Ne){Ne=Ne>>>0,Je(Ne,"offset");const Ye=this[Ne],st=this[Ne+7];(Ye===void 0||st===void 0)&&nt(Ne,this.length-8);const bt=this[Ne+4]+this[Ne+5]*2**8+this[Ne+6]*2**16+(st<<24);return(BigInt(bt)<<BigInt(32))+BigInt(Ye+this[++Ne]*2**8+this[++Ne]*2**16+this[++Ne]*2**24)}),O.prototype.readBigInt64BE=jt(function(Ne){Ne=Ne>>>0,Je(Ne,"offset");const Ye=this[Ne],st=this[Ne+7];(Ye===void 0||st===void 0)&&nt(Ne,this.length-8);const bt=(Ye<<24)+this[++Ne]*2**16+this[++Ne]*2**8+this[++Ne];return(BigInt(bt)<<BigInt(32))+BigInt(this[++Ne]*2**24+this[++Ne]*2**16+this[++Ne]*2**8+st)}),O.prototype.readFloatLE=function(Ne,Ye){return Ne=Ne>>>0,Ye||Tt(Ne,4,this.length),de.read(this,Ne,!0,23,4)},O.prototype.readFloatBE=function(Ne,Ye){return Ne=Ne>>>0,Ye||Tt(Ne,4,this.length),de.read(this,Ne,!1,23,4)},O.prototype.readDoubleLE=function(Ne,Ye){return Ne=Ne>>>0,Ye||Tt(Ne,8,this.length),de.read(this,Ne,!0,52,8)},O.prototype.readDoubleBE=function(Ne,Ye){return Ne=Ne>>>0,Ye||Tt(Ne,8,this.length),de.read(this,Ne,!1,52,8)};function Wt(Ke,Ne,Ye,st,bt,Qe){if(!O.isBuffer(Ke))throw new TypeError('"buffer" argument must be a Buffer instance');if(Ne>bt||Ne<Qe)throw new RangeError('"value" argument is out of bounds');if(Ye+st>Ke.length)throw new RangeError("Index out of range")}O.prototype.writeUintLE=O.prototype.writeUIntLE=function(Ne,Ye,st,bt){if(Ne=+Ne,Ye=Ye>>>0,st=st>>>0,!bt){const Pe=Math.pow(2,8*st)-1;Wt(this,Ne,Ye,st,Pe,0)}let Qe=1,Re=0;for(this[Ye]=Ne&255;++Re<st&&(Qe*=256);)this[Ye+Re]=Ne/Qe&255;return Ye+st},O.prototype.writeUintBE=O.prototype.writeUIntBE=function(Ne,Ye,st,bt){if(Ne=+Ne,Ye=Ye>>>0,st=st>>>0,!bt){const Pe=Math.pow(2,8*st)-1;Wt(this,Ne,Ye,st,Pe,0)}let Qe=st-1,Re=1;for(this[Ye+Qe]=Ne&255;--Qe>=0&&(Re*=256);)this[Ye+Qe]=Ne/Re&255;return Ye+st},O.prototype.writeUint8=O.prototype.writeUInt8=function(Ne,Ye,st){return Ne=+Ne,Ye=Ye>>>0,st||Wt(this,Ne,Ye,1,255,0),this[Ye]=Ne&255,Ye+1},O.prototype.writeUint16LE=O.prototype.writeUInt16LE=function(Ne,Ye,st){return Ne=+Ne,Ye=Ye>>>0,st||Wt(this,Ne,Ye,2,65535,0),this[Ye]=Ne&255,this[Ye+1]=Ne>>>8,Ye+2},O.prototype.writeUint16BE=O.prototype.writeUInt16BE=function(Ne,Ye,st){return Ne=+Ne,Ye=Ye>>>0,st||Wt(this,Ne,Ye,2,65535,0),this[Ye]=Ne>>>8,this[Ye+1]=Ne&255,Ye+2},O.prototype.writeUint32LE=O.prototype.writeUInt32LE=function(Ne,Ye,st){return Ne=+Ne,Ye=Ye>>>0,st||Wt(this,Ne,Ye,4,4294967295,0),this[Ye+3]=Ne>>>24,this[Ye+2]=Ne>>>16,this[Ye+1]=Ne>>>8,this[Ye]=Ne&255,Ye+4},O.prototype.writeUint32BE=O.prototype.writeUInt32BE=function(Ne,Ye,st){return Ne=+Ne,Ye=Ye>>>0,st||Wt(this,Ne,Ye,4,4294967295,0),this[Ye]=Ne>>>24,this[Ye+1]=Ne>>>16,this[Ye+2]=Ne>>>8,this[Ye+3]=Ne&255,Ye+4};function ft(Ke,Ne,Ye,st,bt){Ze(Ne,st,bt,Ke,Ye,7);let Qe=Number(Ne&BigInt(4294967295));Ke[Ye++]=Qe,Qe=Qe>>8,Ke[Ye++]=Qe,Qe=Qe>>8,Ke[Ye++]=Qe,Qe=Qe>>8,Ke[Ye++]=Qe;let Re=Number(Ne>>BigInt(32)&BigInt(4294967295));return Ke[Ye++]=Re,Re=Re>>8,Ke[Ye++]=Re,Re=Re>>8,Ke[Ye++]=Re,Re=Re>>8,Ke[Ye++]=Re,Ye}function _t(Ke,Ne,Ye,st,bt){Ze(Ne,st,bt,Ke,Ye,7);let Qe=Number(Ne&BigInt(4294967295));Ke[Ye+7]=Qe,Qe=Qe>>8,Ke[Ye+6]=Qe,Qe=Qe>>8,Ke[Ye+5]=Qe,Qe=Qe>>8,Ke[Ye+4]=Qe;let Re=Number(Ne>>BigInt(32)&BigInt(4294967295));return Ke[Ye+3]=Re,Re=Re>>8,Ke[Ye+2]=Re,Re=Re>>8,Ke[Ye+1]=Re,Re=Re>>8,Ke[Ye]=Re,Ye+8}O.prototype.writeBigUInt64LE=jt(function(Ne,Ye=0){return ft(this,Ne,Ye,BigInt(0),BigInt("0xffffffffffffffff"))}),O.prototype.writeBigUInt64BE=jt(function(Ne,Ye=0){return _t(this,Ne,Ye,BigInt(0),BigInt("0xffffffffffffffff"))}),O.prototype.writeIntLE=function(Ne,Ye,st,bt){if(Ne=+Ne,Ye=Ye>>>0,!bt){const Me=Math.pow(2,8*st-1);Wt(this,Ne,Ye,st,Me-1,-Me)}let Qe=0,Re=1,Pe=0;for(this[Ye]=Ne&255;++Qe<st&&(Re*=256);)Ne<0&&Pe===0&&this[Ye+Qe-1]!==0&&(Pe=1),this[Ye+Qe]=(Ne/Re>>0)-Pe&255;return Ye+st},O.prototype.writeIntBE=function(Ne,Ye,st,bt){if(Ne=+Ne,Ye=Ye>>>0,!bt){const Me=Math.pow(2,8*st-1);Wt(this,Ne,Ye,st,Me-1,-Me)}let Qe=st-1,Re=1,Pe=0;for(this[Ye+Qe]=Ne&255;--Qe>=0&&(Re*=256);)Ne<0&&Pe===0&&this[Ye+Qe+1]!==0&&(Pe=1),this[Ye+Qe]=(Ne/Re>>0)-Pe&255;return Ye+st},O.prototype.writeInt8=function(Ne,Ye,st){return Ne=+Ne,Ye=Ye>>>0,st||Wt(this,Ne,Ye,1,127,-128),Ne<0&&(Ne=255+Ne+1),this[Ye]=Ne&255,Ye+1},O.prototype.writeInt16LE=function(Ne,Ye,st){return Ne=+Ne,Ye=Ye>>>0,st||Wt(this,Ne,Ye,2,32767,-32768),this[Ye]=Ne&255,this[Ye+1]=Ne>>>8,Ye+2},O.prototype.writeInt16BE=function(Ne,Ye,st){return Ne=+Ne,Ye=Ye>>>0,st||Wt(this,Ne,Ye,2,32767,-32768),this[Ye]=Ne>>>8,this[Ye+1]=Ne&255,Ye+2},O.prototype.writeInt32LE=function(Ne,Ye,st){return Ne=+Ne,Ye=Ye>>>0,st||Wt(this,Ne,Ye,4,2147483647,-2147483648),this[Ye]=Ne&255,this[Ye+1]=Ne>>>8,this[Ye+2]=Ne>>>16,this[Ye+3]=Ne>>>24,Ye+4},O.prototype.writeInt32BE=function(Ne,Ye,st){return Ne=+Ne,Ye=Ye>>>0,st||Wt(this,Ne,Ye,4,2147483647,-2147483648),Ne<0&&(Ne=4294967295+Ne+1),this[Ye]=Ne>>>24,this[Ye+1]=Ne>>>16,this[Ye+2]=Ne>>>8,this[Ye+3]=Ne&255,Ye+4},O.prototype.writeBigInt64LE=jt(function(Ne,Ye=0){return ft(this,Ne,Ye,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),O.prototype.writeBigInt64BE=jt(function(Ne,Ye=0){return _t(this,Ne,Ye,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Xt(Ke,Ne,Ye,st,bt,Qe){if(Ye+st>Ke.length)throw new RangeError("Index out of range");if(Ye<0)throw new RangeError("Index out of range")}function Nt(Ke,Ne,Ye,st,bt){return Ne=+Ne,Ye=Ye>>>0,bt||Xt(Ke,Ne,Ye,4),de.write(Ke,Ne,Ye,st,23,4),Ye+4}O.prototype.writeFloatLE=function(Ne,Ye,st){return Nt(this,Ne,Ye,!0,st)},O.prototype.writeFloatBE=function(Ne,Ye,st){return Nt(this,Ne,Ye,!1,st)};function qt(Ke,Ne,Ye,st,bt){return Ne=+Ne,Ye=Ye>>>0,bt||Xt(Ke,Ne,Ye,8),de.write(Ke,Ne,Ye,st,52,8),Ye+8}O.prototype.writeDoubleLE=function(Ne,Ye,st){return qt(this,Ne,Ye,!0,st)},O.prototype.writeDoubleBE=function(Ne,Ye,st){return qt(this,Ne,Ye,!1,st)},O.prototype.copy=function(Ne,Ye,st,bt){if(!O.isBuffer(Ne))throw new TypeError("argument should be a Buffer");if(st||(st=0),!bt&&bt!==0&&(bt=this.length),Ye>=Ne.length&&(Ye=Ne.length),Ye||(Ye=0),bt>0&&bt<st&&(bt=st),bt===st||Ne.length===0||this.length===0)return 0;if(Ye<0)throw new RangeError("targetStart out of bounds");if(st<0||st>=this.length)throw new RangeError("Index out of range");if(bt<0)throw new RangeError("sourceEnd out of bounds");bt>this.length&&(bt=this.length),Ne.length-Ye<bt-st&&(bt=Ne.length-Ye+st);const Qe=bt-st;return this===Ne&&typeof ye.prototype.copyWithin=="function"?this.copyWithin(Ye,st,bt):ye.prototype.set.call(Ne,this.subarray(st,bt),Ye),Qe},O.prototype.fill=function(Ne,Ye,st,bt){if(typeof Ne=="string"){if(typeof Ye=="string"?(bt=Ye,Ye=0,st=this.length):typeof st=="string"&&(bt=st,st=this.length),bt!==void 0&&typeof bt!="string")throw new TypeError("encoding must be a string");if(typeof bt=="string"&&!O.isEncoding(bt))throw new TypeError("Unknown encoding: "+bt);if(Ne.length===1){const Re=Ne.charCodeAt(0);(bt==="utf8"&&Re<128||bt==="latin1")&&(Ne=Re)}}else typeof Ne=="number"?Ne=Ne&255:typeof Ne=="boolean"&&(Ne=Number(Ne));if(Ye<0||this.length<Ye||this.length<st)throw new RangeError("Out of range index");if(st<=Ye)return this;Ye=Ye>>>0,st=st===void 0?this.length:st>>>0,Ne||(Ne=0);let Qe;if(typeof Ne=="number")for(Qe=Ye;Qe<st;++Qe)this[Qe]=Ne;else{const Re=O.isBuffer(Ne)?Ne:O.from(Ne,bt),Pe=Re.length;if(Pe===0)throw new TypeError('The value "'+Ne+'" is invalid for argument "value"');for(Qe=0;Qe<st-Ye;++Qe)this[Qe+Ye]=Re[Qe%Pe]}return this};const nr={};function ze(Ke,Ne,Ye){nr[Ke]=class extends Ye{constructor(){super(),Object.defineProperty(this,"message",{value:Ne.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Ke}]`,this.stack,delete this.name}get code(){return Ke}set code(bt){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:bt,writable:!0})}toString(){return`${this.name} [${Ke}]: ${this.message}`}}}ze("ERR_BUFFER_OUT_OF_BOUNDS",function(Ke){return Ke?`${Ke} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ze("ERR_INVALID_ARG_TYPE",function(Ke,Ne){return`The "${Ke}" argument must be of type number. Received type ${typeof Ne}`},TypeError),ze("ERR_OUT_OF_RANGE",function(Ke,Ne,Ye){let st=`The value of "${Ke}" is out of range.`,bt=Ye;return Number.isInteger(Ye)&&Math.abs(Ye)>2**32?bt=Ce(String(Ye)):typeof Ye=="bigint"&&(bt=String(Ye),(Ye>BigInt(2)**BigInt(32)||Ye<-(BigInt(2)**BigInt(32)))&&(bt=Ce(bt)),bt+="n"),st+=` It must be ${Ne}. Received ${bt}`,st},RangeError);function Ce(Ke){let Ne="",Ye=Ke.length;const st=Ke[0]==="-"?1:0;for(;Ye>=st+4;Ye-=3)Ne=`_${Ke.slice(Ye-3,Ye)}${Ne}`;return`${Ke.slice(0,Ye)}${Ne}`}function Le(Ke,Ne,Ye){Je(Ne,"offset"),(Ke[Ne]===void 0||Ke[Ne+Ye]===void 0)&&nt(Ne,Ke.length-(Ye+1))}function Ze(Ke,Ne,Ye,st,bt,Qe){if(Ke>Ye||Ke<Ne){const Re=typeof Ne=="bigint"?"n":"";let Pe;throw Ne===0||Ne===BigInt(0)?Pe=`>= 0${Re} and < 2${Re} ** ${(Qe+1)*8}${Re}`:Pe=`>= -(2${Re} ** ${(Qe+1)*8-1}${Re}) and < 2 ** ${(Qe+1)*8-1}${Re}`,new nr.ERR_OUT_OF_RANGE("value",Pe,Ke)}Le(st,bt,Qe)}function Je(Ke,Ne){if(typeof Ke!="number")throw new nr.ERR_INVALID_ARG_TYPE(Ne,"number",Ke)}function nt(Ke,Ne,Ye){throw Math.floor(Ke)!==Ke?(Je(Ke,Ye),new nr.ERR_OUT_OF_RANGE("offset","an integer",Ke)):Ne<0?new nr.ERR_BUFFER_OUT_OF_BOUNDS:new nr.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${Ne}`,Ke)}const rt=/[^+/0-9A-Za-z-_]/g;function He(Ke){if(Ke=Ke.split("=")[0],Ke=Ke.trim().replace(rt,""),Ke.length<2)return"";for(;Ke.length%4!==0;)Ke=Ke+"=";return Ke}function Dt(Ke,Ne){Ne=Ne||1/0;let Ye;const st=Ke.length;let bt=null;const Qe=[];for(let Re=0;Re<st;++Re){if(Ye=Ke.charCodeAt(Re),Ye>55295&&Ye<57344){if(!bt){if(Ye>56319){(Ne-=3)>-1&&Qe.push(239,191,189);continue}else if(Re+1===st){(Ne-=3)>-1&&Qe.push(239,191,189);continue}bt=Ye;continue}if(Ye<56320){(Ne-=3)>-1&&Qe.push(239,191,189),bt=Ye;continue}Ye=(bt-55296<<10|Ye-56320)+65536}else bt&&(Ne-=3)>-1&&Qe.push(239,191,189);if(bt=null,Ye<128){if((Ne-=1)<0)break;Qe.push(Ye)}else if(Ye<2048){if((Ne-=2)<0)break;Qe.push(Ye>>6|192,Ye&63|128)}else if(Ye<65536){if((Ne-=3)<0)break;Qe.push(Ye>>12|224,Ye>>6&63|128,Ye&63|128)}else if(Ye<1114112){if((Ne-=4)<0)break;Qe.push(Ye>>18|240,Ye>>12&63|128,Ye>>6&63|128,Ye&63|128)}else throw new Error("Invalid code point")}return Qe}function Rt(Ke){const Ne=[];for(let Ye=0;Ye<Ke.length;++Ye)Ne.push(Ke.charCodeAt(Ye)&255);return Ne}function De(Ke,Ne){let Ye,st,bt;const Qe=[];for(let Re=0;Re<Ke.length&&!((Ne-=2)<0);++Re)Ye=Ke.charCodeAt(Re),st=Ye>>8,bt=Ye%256,Qe.push(bt),Qe.push(st);return Qe}function We(Ke){return fe.toByteArray(He(Ke))}function Ve(Ke,Ne,Ye,st){let bt;for(bt=0;bt<st&&!(bt+Ye>=Ne.length||bt>=Ke.length);++bt)Ne[bt+Ye]=Ke[bt];return bt}function qe(Ke,Ne){return Ke instanceof Ne||Ke!=null&&Ke.constructor!=null&&Ke.constructor.name!=null&&Ke.constructor.name===Ne.name}function pt(Ke){return Ke!==Ke}const At=(function(){const Ke="0123456789abcdef",Ne=new Array(256);for(let Ye=0;Ye<16;++Ye){const st=Ye*16;for(let bt=0;bt<16;++bt)Ne[st+bt]=Ke[Ye]+Ke[bt]}return Ne})();function jt(Ke){return typeof BigInt>"u"?rr:Ke}function rr(){throw new Error("BigInt not supported")}})(A);const ne=A.Buffer;E.Blob=A.Blob,E.BlobOptions=A.BlobOptions,E.Buffer=A.Buffer,E.File=A.File,E.FileOptions=A.FileOptions,E.INSPECT_MAX_BYTES=A.INSPECT_MAX_BYTES,E.SlowBuffer=A.SlowBuffer,E.TranscodeEncoding=A.TranscodeEncoding,E.atob=A.atob,E.btoa=A.btoa,E.constants=A.constants,E.default=ne,E.isAscii=A.isAscii,E.isUtf8=A.isUtf8,E.kMaxLength=A.kMaxLength,E.kStringMaxLength=A.kStringMaxLength,E.resolveObjectURL=A.resolveObjectURL,E.transcode=A.transcode})(dist$1)),dist$1}/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var hasRequiredSafeBuffer$1;function requireSafeBuffer$1(){return hasRequiredSafeBuffer$1||(hasRequiredSafeBuffer$1=1,(function(E,A){var _=requireDist$1(),I=_.Buffer;function B(R,P){for(var D in R)P[D]=R[D]}I.from&&I.alloc&&I.allocUnsafe&&I.allocUnsafeSlow?E.exports=_:(B(_,A),A.Buffer=T);function T(R,P,D){return I(R,P,D)}T.prototype=Object.create(I.prototype),B(I,T),T.from=function(R,P,D){if(typeof R=="number")throw new TypeError("Argument must not be a number");return I(R,P,D)},T.alloc=function(R,P,D){if(typeof R!="number")throw new TypeError("Argument must be a number");var F=I(R);return P!==void 0?typeof D=="string"?F.fill(P,D):F.fill(P):F.fill(0),F},T.allocUnsafe=function(R){if(typeof R!="number")throw new TypeError("Argument must be a number");return I(R)},T.allocUnsafeSlow=function(R){if(typeof R!="number")throw new TypeError("Argument must be a number");return _.SlowBuffer(R)}})(safeBuffer$1,safeBuffer$1.exports)),safeBuffer$1.exports}var hasRequiredBrowser$e;function requireBrowser$e(){if(hasRequiredBrowser$e)return browser$e.exports;hasRequiredBrowser$e=1;var E=65536,A=4294967295;function _(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var I=requireSafeBuffer$1().Buffer,B=commonjsGlobal.crypto||commonjsGlobal.msCrypto;B&&B.getRandomValues?browser$e.exports=T:browser$e.exports=_;function T(R,P){if(R>A)throw new RangeError("requested too many random bytes");var D=I.allocUnsafe(R);if(R>0)if(R>E)for(var F=0;F<R;F+=E)B.getRandomValues(D.slice(F,F+E));else B.getRandomValues(D);return typeof P=="function"?process$1.nextTick(function(){P(null,D)}):D}return browser$e.exports}var inherits_browser={exports:{}},hasRequiredInherits_browser;function requireInherits_browser(){return hasRequiredInherits_browser||(hasRequiredInherits_browser=1,typeof Object.create=="function"?inherits_browser.exports=function(A,_){_&&(A.super_=_,A.prototype=Object.create(_.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(A,_){if(_){A.super_=_;var I=function(){};I.prototype=_.prototype,A.prototype=new I,A.prototype.constructor=A}}),inherits_browser.exports}var events={exports:{}},hasRequiredEvents;function requireEvents(){if(hasRequiredEvents)return events.exports;hasRequiredEvents=1;var E=typeof Reflect=="object"?Reflect:null,A=E&&typeof E.apply=="function"?E.apply:function(pe,ve,ye){return Function.prototype.apply.call(pe,ve,ye)},_;E&&typeof E.ownKeys=="function"?_=E.ownKeys:Object.getOwnPropertySymbols?_=function(pe){return Object.getOwnPropertyNames(pe).concat(Object.getOwnPropertySymbols(pe))}:_=function(pe){return Object.getOwnPropertyNames(pe)};function I(de){console&&console.warn&&console.warn(de)}var B=Number.isNaN||function(pe){return pe!==pe};function T(){T.init.call(this)}events.exports=T,events.exports.once=ne,T.EventEmitter=T,T.prototype._events=void 0,T.prototype._eventsCount=0,T.prototype._maxListeners=void 0;var R=10;function P(de){if(typeof de!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof de)}Object.defineProperty(T,"defaultMaxListeners",{enumerable:!0,get:function(){return R},set:function(de){if(typeof de!="number"||de<0||B(de))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+de+".");R=de}}),T.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},T.prototype.setMaxListeners=function(pe){if(typeof pe!="number"||pe<0||B(pe))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+pe+".");return this._maxListeners=pe,this};function D(de){return de._maxListeners===void 0?T.defaultMaxListeners:de._maxListeners}T.prototype.getMaxListeners=function(){return D(this)},T.prototype.emit=function(pe){for(var ve=[],ye=1;ye<arguments.length;ye++)ve.push(arguments[ye]);var _e=pe==="error",be=this._events;if(be!==void 0)_e=_e&&be.error===void 0;else if(!_e)return!1;if(_e){var Te;if(ve.length>0&&(Te=ve[0]),Te instanceof Error)throw Te;var ue=new Error("Unhandled error."+(Te?" ("+Te.message+")":""));throw ue.context=Te,ue}var O=be[pe];if(O===void 0)return!1;if(typeof O=="function")A(O,this,ve);else for(var z=O.length,Y=J(O,z),ye=0;ye<z;++ye)A(Y[ye],this,ve);return!0};function F(de,pe,ve,ye){var _e,be,Te;if(P(ve),be=de._events,be===void 0?(be=de._events=Object.create(null),de._eventsCount=0):(be.newListener!==void 0&&(de.emit("newListener",pe,ve.listener?ve.listener:ve),be=de._events),Te=be[pe]),Te===void 0)Te=be[pe]=ve,++de._eventsCount;else if(typeof Te=="function"?Te=be[pe]=ye?[ve,Te]:[Te,ve]:ye?Te.unshift(ve):Te.push(ve),_e=D(de),_e>0&&Te.length>_e&&!Te.warned){Te.warned=!0;var ue=new Error("Possible EventEmitter memory leak detected. "+Te.length+" "+String(pe)+" listeners added. Use emitter.setMaxListeners() to increase limit");ue.name="MaxListenersExceededWarning",ue.emitter=de,ue.type=pe,ue.count=Te.length,I(ue)}return de}T.prototype.addListener=function(pe,ve){return F(this,pe,ve,!1)},T.prototype.on=T.prototype.addListener,T.prototype.prependListener=function(pe,ve){return F(this,pe,ve,!0)};function L(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function U(de,pe,ve){var ye={fired:!1,wrapFn:void 0,target:de,type:pe,listener:ve},_e=L.bind(ye);return _e.listener=ve,ye.wrapFn=_e,_e}T.prototype.once=function(pe,ve){return P(ve),this.on(pe,U(this,pe,ve)),this},T.prototype.prependOnceListener=function(pe,ve){return P(ve),this.prependListener(pe,U(this,pe,ve)),this},T.prototype.removeListener=function(pe,ve){var ye,_e,be,Te,ue;if(P(ve),_e=this._events,_e===void 0)return this;if(ye=_e[pe],ye===void 0)return this;if(ye===ve||ye.listener===ve)--this._eventsCount===0?this._events=Object.create(null):(delete _e[pe],_e.removeListener&&this.emit("removeListener",pe,ye.listener||ve));else if(typeof ye!="function"){for(be=-1,Te=ye.length-1;Te>=0;Te--)if(ye[Te]===ve||ye[Te].listener===ve){ue=ye[Te].listener,be=Te;break}if(be<0)return this;be===0?ye.shift():ee(ye,be),ye.length===1&&(_e[pe]=ye[0]),_e.removeListener!==void 0&&this.emit("removeListener",pe,ue||ve)}return this},T.prototype.off=T.prototype.removeListener,T.prototype.removeAllListeners=function(pe){var ve,ye,_e;if(ye=this._events,ye===void 0)return this;if(ye.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):ye[pe]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete ye[pe]),this;if(arguments.length===0){var be=Object.keys(ye),Te;for(_e=0;_e<be.length;++_e)Te=be[_e],Te!=="removeListener"&&this.removeAllListeners(Te);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(ve=ye[pe],typeof ve=="function")this.removeListener(pe,ve);else if(ve!==void 0)for(_e=ve.length-1;_e>=0;_e--)this.removeListener(pe,ve[_e]);return this};function V(de,pe,ve){var ye=de._events;if(ye===void 0)return[];var _e=ye[pe];return _e===void 0?[]:typeof _e=="function"?ve?[_e.listener||_e]:[_e]:ve?ie(_e):J(_e,_e.length)}T.prototype.listeners=function(pe){return V(this,pe,!0)},T.prototype.rawListeners=function(pe){return V(this,pe,!1)},T.listenerCount=function(de,pe){return typeof de.listenerCount=="function"?de.listenerCount(pe):K.call(de,pe)},T.prototype.listenerCount=K;function K(de){var pe=this._events;if(pe!==void 0){var ve=pe[de];if(typeof ve=="function")return 1;if(ve!==void 0)return ve.length}return 0}T.prototype.eventNames=function(){return this._eventsCount>0?_(this._events):[]};function J(de,pe){for(var ve=new Array(pe),ye=0;ye<pe;++ye)ve[ye]=de[ye];return ve}function ee(de,pe){for(;pe+1<de.length;pe++)de[pe]=de[pe+1];de.pop()}function ie(de){for(var pe=new Array(de.length),ve=0;ve<pe.length;++ve)pe[ve]=de[ve].listener||de[ve];return pe}function ne(de,pe){return new Promise(function(ve,ye){function _e(Te){de.removeListener(pe,be),ye(Te)}function be(){typeof de.removeListener=="function"&&de.removeListener("error",_e),ve([].slice.call(arguments))}fe(de,pe,be,{once:!0}),pe!=="error"&&ce(de,_e,{once:!0})})}function ce(de,pe,ve){typeof de.on=="function"&&fe(de,"error",pe,ve)}function fe(de,pe,ve,ye){if(typeof de.on=="function")ye.once?de.once(pe,ve):de.on(pe,ve);else if(typeof de.addEventListener=="function")de.addEventListener(pe,function _e(be){ye.once&&de.removeEventListener(pe,_e),ve(be)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof de)}return events.exports}var streamBrowser$1,hasRequiredStreamBrowser$1;function requireStreamBrowser$1(){return hasRequiredStreamBrowser$1||(hasRequiredStreamBrowser$1=1,streamBrowser$1=requireEvents().EventEmitter),streamBrowser$1}var util$3={},types$1={},shams$1,hasRequiredShams$1;function requireShams$1(){return hasRequiredShams$1||(hasRequiredShams$1=1,shams$1=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var A={},_=Symbol("test"),I=Object(_);if(typeof _=="string"||Object.prototype.toString.call(_)!=="[object Symbol]"||Object.prototype.toString.call(I)!=="[object Symbol]")return!1;var B=42;A[_]=B;for(var T in A)return!1;if(typeof Object.keys=="function"&&Object.keys(A).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(A).length!==0)return!1;var R=Object.getOwnPropertySymbols(A);if(R.length!==1||R[0]!==_||!Object.prototype.propertyIsEnumerable.call(A,_))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var P=Object.getOwnPropertyDescriptor(A,_);if(P.value!==B||P.enumerable!==!0)return!1}return!0}),shams$1}var shams,hasRequiredShams;function requireShams(){if(hasRequiredShams)return shams;hasRequiredShams=1;var E=requireShams$1();return shams=function(){return E()&&!!Symbol.toStringTag},shams}var esObjectAtoms,hasRequiredEsObjectAtoms;function requireEsObjectAtoms(){return hasRequiredEsObjectAtoms||(hasRequiredEsObjectAtoms=1,esObjectAtoms=Object),esObjectAtoms}var esErrors,hasRequiredEsErrors;function requireEsErrors(){return hasRequiredEsErrors||(hasRequiredEsErrors=1,esErrors=Error),esErrors}var _eval,hasRequired_eval;function require_eval(){return hasRequired_eval||(hasRequired_eval=1,_eval=EvalError),_eval}var range,hasRequiredRange;function requireRange(){return hasRequiredRange||(hasRequiredRange=1,range=RangeError),range}var ref$1,hasRequiredRef$1;function requireRef$1(){return hasRequiredRef$1||(hasRequiredRef$1=1,ref$1=ReferenceError),ref$1}var syntax,hasRequiredSyntax;function requireSyntax(){return hasRequiredSyntax||(hasRequiredSyntax=1,syntax=SyntaxError),syntax}var type$j,hasRequiredType;function requireType(){return hasRequiredType||(hasRequiredType=1,type$j=TypeError),type$j}var uri,hasRequiredUri;function requireUri(){return hasRequiredUri||(hasRequiredUri=1,uri=URIError),uri}var abs,hasRequiredAbs;function requireAbs(){return hasRequiredAbs||(hasRequiredAbs=1,abs=Math.abs),abs}var floor,hasRequiredFloor;function requireFloor(){return hasRequiredFloor||(hasRequiredFloor=1,floor=Math.floor),floor}var max,hasRequiredMax;function requireMax(){return hasRequiredMax||(hasRequiredMax=1,max=Math.max),max}var min,hasRequiredMin;function requireMin(){return hasRequiredMin||(hasRequiredMin=1,min=Math.min),min}var pow,hasRequiredPow;function requirePow(){return hasRequiredPow||(hasRequiredPow=1,pow=Math.pow),pow}var round,hasRequiredRound;function requireRound(){return hasRequiredRound||(hasRequiredRound=1,round=Math.round),round}var _isNaN,hasRequired_isNaN;function require_isNaN(){return hasRequired_isNaN||(hasRequired_isNaN=1,_isNaN=Number.isNaN||function(A){return A!==A}),_isNaN}var sign$1,hasRequiredSign$1;function requireSign$1(){if(hasRequiredSign$1)return sign$1;hasRequiredSign$1=1;var E=require_isNaN();return sign$1=function(_){return E(_)||_===0?_:_<0?-1:1},sign$1}var gOPD,hasRequiredGOPD;function requireGOPD(){return hasRequiredGOPD||(hasRequiredGOPD=1,gOPD=Object.getOwnPropertyDescriptor),gOPD}var gopd,hasRequiredGopd;function requireGopd(){if(hasRequiredGopd)return gopd;hasRequiredGopd=1;var E=requireGOPD();if(E)try{E([],"length")}catch{E=null}return gopd=E,gopd}var esDefineProperty,hasRequiredEsDefineProperty;function requireEsDefineProperty(){if(hasRequiredEsDefineProperty)return esDefineProperty;hasRequiredEsDefineProperty=1;var E=Object.defineProperty||!1;if(E)try{E({},"a",{value:1})}catch{E=!1}return esDefineProperty=E,esDefineProperty}var hasSymbols,hasRequiredHasSymbols;function requireHasSymbols(){if(hasRequiredHasSymbols)return hasSymbols;hasRequiredHasSymbols=1;var E=typeof Symbol<"u"&&Symbol,A=requireShams$1();return hasSymbols=function(){return typeof E!="function"||typeof Symbol!="function"||typeof E("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:A()},hasSymbols}var Reflect_getPrototypeOf,hasRequiredReflect_getPrototypeOf;function requireReflect_getPrototypeOf(){return hasRequiredReflect_getPrototypeOf||(hasRequiredReflect_getPrototypeOf=1,Reflect_getPrototypeOf=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),Reflect_getPrototypeOf}var Object_getPrototypeOf,hasRequiredObject_getPrototypeOf;function requireObject_getPrototypeOf(){if(hasRequiredObject_getPrototypeOf)return Object_getPrototypeOf;hasRequiredObject_getPrototypeOf=1;var E=requireEsObjectAtoms();return Object_getPrototypeOf=E.getPrototypeOf||null,Object_getPrototypeOf}var implementation$4,hasRequiredImplementation$4;function requireImplementation$4(){if(hasRequiredImplementation$4)return implementation$4;hasRequiredImplementation$4=1;var E="Function.prototype.bind called on incompatible ",A=Object.prototype.toString,_=Math.max,I="[object Function]",B=function(D,F){for(var L=[],U=0;U<D.length;U+=1)L[U]=D[U];for(var V=0;V<F.length;V+=1)L[V+D.length]=F[V];return L},T=function(D,F){for(var L=[],U=F,V=0;U<D.length;U+=1,V+=1)L[V]=D[U];return L},R=function(P,D){for(var F="",L=0;L<P.length;L+=1)F+=P[L],L+1<P.length&&(F+=D);return F};return implementation$4=function(D){var F=this;if(typeof F!="function"||A.apply(F)!==I)throw new TypeError(E+F);for(var L=T(arguments,1),U,V=function(){if(this instanceof U){var ne=F.apply(this,B(L,arguments));return Object(ne)===ne?ne:this}return F.apply(D,B(L,arguments))},K=_(0,F.length-L.length),J=[],ee=0;ee<K;ee++)J[ee]="$"+ee;if(U=Function("binder","return function ("+R(J,",")+"){ return binder.apply(this,arguments); }")(V),F.prototype){var ie=function(){};ie.prototype=F.prototype,U.prototype=new ie,ie.prototype=null}return U},implementation$4}var functionBind,hasRequiredFunctionBind;function requireFunctionBind(){if(hasRequiredFunctionBind)return functionBind;hasRequiredFunctionBind=1;var E=requireImplementation$4();return functionBind=Function.prototype.bind||E,functionBind}var functionCall,hasRequiredFunctionCall;function requireFunctionCall(){return hasRequiredFunctionCall||(hasRequiredFunctionCall=1,functionCall=Function.prototype.call),functionCall}var functionApply,hasRequiredFunctionApply;function requireFunctionApply(){return hasRequiredFunctionApply||(hasRequiredFunctionApply=1,functionApply=Function.prototype.apply),functionApply}var reflectApply,hasRequiredReflectApply;function requireReflectApply(){return hasRequiredReflectApply||(hasRequiredReflectApply=1,reflectApply=typeof Reflect<"u"&&Reflect&&Reflect.apply),reflectApply}var actualApply,hasRequiredActualApply;function requireActualApply(){if(hasRequiredActualApply)return actualApply;hasRequiredActualApply=1;var E=requireFunctionBind(),A=requireFunctionApply(),_=requireFunctionCall(),I=requireReflectApply();return actualApply=I||E.call(_,A),actualApply}var callBindApplyHelpers,hasRequiredCallBindApplyHelpers;function requireCallBindApplyHelpers(){if(hasRequiredCallBindApplyHelpers)return callBindApplyHelpers;hasRequiredCallBindApplyHelpers=1;var E=requireFunctionBind(),A=requireType(),_=requireFunctionCall(),I=requireActualApply();return callBindApplyHelpers=function(T){if(T.length<1||typeof T[0]!="function")throw new A("a function is required");return I(E,_,T)},callBindApplyHelpers}var get,hasRequiredGet;function requireGet(){if(hasRequiredGet)return get;hasRequiredGet=1;var E=requireCallBindApplyHelpers(),A=requireGopd(),_;try{_=[].__proto__===Array.prototype}catch(R){if(!R||typeof R!="object"||!("code"in R)||R.code!=="ERR_PROTO_ACCESS")throw R}var I=!!_&&A&&A(Object.prototype,"__proto__"),B=Object,T=B.getPrototypeOf;return get=I&&typeof I.get=="function"?E([I.get]):typeof T=="function"?function(P){return T(P==null?P:B(P))}:!1,get}var getProto,hasRequiredGetProto;function requireGetProto(){if(hasRequiredGetProto)return getProto;hasRequiredGetProto=1;var E=requireReflect_getPrototypeOf(),A=requireObject_getPrototypeOf(),_=requireGet();return getProto=E?function(B){return E(B)}:A?function(B){if(!B||typeof B!="object"&&typeof B!="function")throw new TypeError("getProto: not an object");return A(B)}:_?function(B){return _(B)}:null,getProto}var hasown,hasRequiredHasown;function requireHasown(){if(hasRequiredHasown)return hasown;hasRequiredHasown=1;var E=Function.prototype.call,A=Object.prototype.hasOwnProperty,_=requireFunctionBind();return hasown=_.call(E,A),hasown}var getIntrinsic,hasRequiredGetIntrinsic;function requireGetIntrinsic(){if(hasRequiredGetIntrinsic)return getIntrinsic;hasRequiredGetIntrinsic=1;var E,A=requireEsObjectAtoms(),_=requireEsErrors(),I=require_eval(),B=requireRange(),T=requireRef$1(),R=requireSyntax(),P=requireType(),D=requireUri(),F=requireAbs(),L=requireFloor(),U=requireMax(),V=requireMin(),K=requirePow(),J=requireRound(),ee=requireSign$1(),ie=Function,ne=function(xe){try{return ie('"use strict"; return ('+xe+").constructor;")()}catch{}},ce=requireGopd(),fe=requireEsDefineProperty(),de=function(){throw new P},pe=ce?(function(){try{return arguments.callee,de}catch{try{return ce(arguments,"callee").get}catch{return de}}})():de,ve=requireHasSymbols()(),ye=requireGetProto(),_e=requireObject_getPrototypeOf(),be=requireReflect_getPrototypeOf(),Te=requireFunctionApply(),ue=requireFunctionCall(),O={},z=typeof Uint8Array>"u"||!ye?E:ye(Uint8Array),Y={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?E:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?E:ArrayBuffer,"%ArrayIteratorPrototype%":ve&&ye?ye([][Symbol.iterator]()):E,"%AsyncFromSyncIteratorPrototype%":E,"%AsyncFunction%":O,"%AsyncGenerator%":O,"%AsyncGeneratorFunction%":O,"%AsyncIteratorPrototype%":O,"%Atomics%":typeof Atomics>"u"?E:Atomics,"%BigInt%":typeof BigInt>"u"?E:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?E:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?E:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?E:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":_,"%eval%":eval,"%EvalError%":I,"%Float16Array%":typeof Float16Array>"u"?E:Float16Array,"%Float32Array%":typeof Float32Array>"u"?E:Float32Array,"%Float64Array%":typeof Float64Array>"u"?E:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?E:FinalizationRegistry,"%Function%":ie,"%GeneratorFunction%":O,"%Int8Array%":typeof Int8Array>"u"?E:Int8Array,"%Int16Array%":typeof Int16Array>"u"?E:Int16Array,"%Int32Array%":typeof Int32Array>"u"?E:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ve&&ye?ye(ye([][Symbol.iterator]())):E,"%JSON%":typeof JSON=="object"?JSON:E,"%Map%":typeof Map>"u"?E:Map,"%MapIteratorPrototype%":typeof Map>"u"||!ve||!ye?E:ye(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":A,"%Object.getOwnPropertyDescriptor%":ce,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?E:Promise,"%Proxy%":typeof Proxy>"u"?E:Proxy,"%RangeError%":B,"%ReferenceError%":T,"%Reflect%":typeof Reflect>"u"?E:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?E:Set,"%SetIteratorPrototype%":typeof Set>"u"||!ve||!ye?E:ye(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?E:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ve&&ye?ye(""[Symbol.iterator]()):E,"%Symbol%":ve?Symbol:E,"%SyntaxError%":R,"%ThrowTypeError%":pe,"%TypedArray%":z,"%TypeError%":P,"%Uint8Array%":typeof Uint8Array>"u"?E:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?E:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?E:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?E:Uint32Array,"%URIError%":D,"%WeakMap%":typeof WeakMap>"u"?E:WeakMap,"%WeakRef%":typeof WeakRef>"u"?E:WeakRef,"%WeakSet%":typeof WeakSet>"u"?E:WeakSet,"%Function.prototype.call%":ue,"%Function.prototype.apply%":Te,"%Object.defineProperty%":fe,"%Object.getPrototypeOf%":_e,"%Math.abs%":F,"%Math.floor%":L,"%Math.max%":U,"%Math.min%":V,"%Math.pow%":K,"%Math.round%":J,"%Math.sign%":ee,"%Reflect.getPrototypeOf%":be};if(ye)try{null.error}catch(xe){var te=ye(ye(xe));Y["%Error.prototype%"]=te}var oe=function xe(Fe){var Ge;if(Fe==="%AsyncFunction%")Ge=ne("async function () {}");else if(Fe==="%GeneratorFunction%")Ge=ne("function* () {}");else if(Fe==="%AsyncGeneratorFunction%")Ge=ne("async function* () {}");else if(Fe==="%AsyncGenerator%"){var Oe=xe("%AsyncGeneratorFunction%");Oe&&(Ge=Oe.prototype)}else if(Fe==="%AsyncIteratorPrototype%"){var et=xe("%AsyncGenerator%");et&&ye&&(Ge=ye(et.prototype))}return Y[Fe]=Ge,Ge},le={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},he=requireFunctionBind(),ae=requireHasown(),Q=he.call(ue,Array.prototype.concat),se=he.call(Te,Array.prototype.splice),Ae=he.call(ue,String.prototype.replace),ge=he.call(ue,String.prototype.slice),Ee=he.call(ue,RegExp.prototype.exec),ke=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Se=/\\(\\)?/g,Ie=function(Fe){var Ge=ge(Fe,0,1),Oe=ge(Fe,-1);if(Ge==="%"&&Oe!=="%")throw new R("invalid intrinsic syntax, expected closing `%`");if(Oe==="%"&&Ge!=="%")throw new R("invalid intrinsic syntax, expected opening `%`");var et=[];return Ae(Fe,ke,function(Mt,dt,mt,Ut){et[et.length]=mt?Ae(Ut,Se,"$1"):dt||Mt}),et},we=function(Fe,Ge){var Oe=Fe,et;if(ae(le,Oe)&&(et=le[Oe],Oe="%"+et[0]+"%"),ae(Y,Oe)){var Mt=Y[Oe];if(Mt===O&&(Mt=oe(Oe)),typeof Mt>"u"&&!Ge)throw new P("intrinsic "+Fe+" exists, but is not available. Please file an issue!");return{alias:et,name:Oe,value:Mt}}throw new R("intrinsic "+Fe+" does not exist!")};return getIntrinsic=function(Fe,Ge){if(typeof Fe!="string"||Fe.length===0)throw new P("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Ge!="boolean")throw new P('"allowMissing" argument must be a boolean');if(Ee(/^%?[^%]*%?$/,Fe)===null)throw new R("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Oe=Ie(Fe),et=Oe.length>0?Oe[0]:"",Mt=we("%"+et+"%",Ge),dt=Mt.name,mt=Mt.value,Ut=!1,St=Mt.alias;St&&(et=St[0],se(Oe,Q([0,1],St)));for(var vt=1,It=!0;vt<Oe.length;vt+=1){var yt=Oe[vt],Tt=ge(yt,0,1),Wt=ge(yt,-1);if((Tt==='"'||Tt==="'"||Tt==="`"||Wt==='"'||Wt==="'"||Wt==="`")&&Tt!==Wt)throw new R("property names with quotes must have matching quotes");if((yt==="constructor"||!It)&&(Ut=!0),et+="."+yt,dt="%"+et+"%",ae(Y,dt))mt=Y[dt];else if(mt!=null){if(!(yt in mt)){if(!Ge)throw new P("base intrinsic for "+Fe+" exists, but the property is not available.");return}if(ce&&vt+1>=Oe.length){var ft=ce(mt,yt);It=!!ft,It&&"get"in ft&&!("originalValue"in ft.get)?mt=ft.get:mt=mt[yt]}else It=ae(mt,yt),mt=mt[yt];It&&!Ut&&(Y[dt]=mt)}}return mt},getIntrinsic}var callBound$1,hasRequiredCallBound$1;function requireCallBound$1(){if(hasRequiredCallBound$1)return callBound$1;hasRequiredCallBound$1=1;var E=requireGetIntrinsic(),A=requireCallBindApplyHelpers(),_=A([E("%String.prototype.indexOf%")]);return callBound$1=function(B,T){var R=E(B,!!T);return typeof R=="function"&&_(B,".prototype.")>-1?A([R]):R},callBound$1}var isArguments$1,hasRequiredIsArguments$1;function requireIsArguments$1(){if(hasRequiredIsArguments$1)return isArguments$1;hasRequiredIsArguments$1=1;var E=requireShams()(),A=requireCallBound$1(),_=A("Object.prototype.toString"),I=function(P){return E&&P&&typeof P=="object"&&Symbol.toStringTag in P?!1:_(P)==="[object Arguments]"},B=function(P){return I(P)?!0:P!==null&&typeof P=="object"&&"length"in P&&typeof P.length=="number"&&P.length>=0&&_(P)!=="[object Array]"&&"callee"in P&&_(P.callee)==="[object Function]"},T=(function(){return I(arguments)})();return I.isLegacyArguments=B,isArguments$1=T?I:B,isArguments$1}var isRegex,hasRequiredIsRegex;function requireIsRegex(){if(hasRequiredIsRegex)return isRegex;hasRequiredIsRegex=1;var E=requireCallBound$1(),A=requireShams()(),_=requireHasown(),I=requireGopd(),B;if(A){var T=E("RegExp.prototype.exec"),R={},P=function(){throw R},D={toString:P,valueOf:P};typeof Symbol.toPrimitive=="symbol"&&(D[Symbol.toPrimitive]=P),B=function(V){if(!V||typeof V!="object")return!1;var K=I(V,"lastIndex"),J=K&&_(K,"value");if(!J)return!1;try{T(V,D)}catch(ee){return ee===R}}}else{var F=E("Object.prototype.toString"),L="[object RegExp]";B=function(V){return!V||typeof V!="object"&&typeof V!="function"?!1:F(V)===L}}return isRegex=B,isRegex}var safeRegexTest,hasRequiredSafeRegexTest;function requireSafeRegexTest(){if(hasRequiredSafeRegexTest)return safeRegexTest;hasRequiredSafeRegexTest=1;var E=requireCallBound$1(),A=requireIsRegex(),_=E("RegExp.prototype.exec"),I=requireType();return safeRegexTest=function(T){if(!A(T))throw new I("`regex` must be a RegExp");return function(P){return _(T,P)!==null}},safeRegexTest}var isGeneratorFunction,hasRequiredIsGeneratorFunction;function requireIsGeneratorFunction(){if(hasRequiredIsGeneratorFunction)return isGeneratorFunction;hasRequiredIsGeneratorFunction=1;var E=requireCallBound$1(),A=requireSafeRegexTest(),_=A(/^\s*(?:function)?\*/),I=requireShams()(),B=requireGetProto(),T=E("Object.prototype.toString"),R=E("Function.prototype.toString"),P=function(){if(!I)return!1;try{return Function("return function*() {}")()}catch{}},D;return isGeneratorFunction=function(L){if(typeof L!="function")return!1;if(_(R(L)))return!0;if(!I){var U=T(L);return U==="[object GeneratorFunction]"}if(!B)return!1;if(typeof D>"u"){var V=P();D=V?B(V):!1}return B(L)===D},isGeneratorFunction}var isCallable,hasRequiredIsCallable;function requireIsCallable(){if(hasRequiredIsCallable)return isCallable;hasRequiredIsCallable=1;var E=Function.prototype.toString,A=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,_,I;if(typeof A=="function"&&typeof Object.defineProperty=="function")try{_=Object.defineProperty({},"length",{get:function(){throw I}}),I={},A(function(){throw 42},null,_)}catch(ce){ce!==I&&(A=null)}else A=null;var B=/^\s*class\b/,T=function(fe){try{var de=E.call(fe);return B.test(de)}catch{return!1}},R=function(fe){try{return T(fe)?!1:(E.call(fe),!0)}catch{return!1}},P=Object.prototype.toString,D="[object Object]",F="[object Function]",L="[object GeneratorFunction]",U="[object HTMLAllCollection]",V="[object HTML document.all class]",K="[object HTMLCollection]",J=typeof Symbol=="function"&&!!Symbol.toStringTag,ee=!(0 in[,]),ie=function(){return!1};if(typeof document=="object"){var ne=document.all;P.call(ne)===P.call(document.all)&&(ie=function(fe){if((ee||!fe)&&(typeof fe>"u"||typeof fe=="object"))try{var de=P.call(fe);return(de===U||de===V||de===K||de===D)&&fe("")==null}catch{}return!1})}return isCallable=A?function(fe){if(ie(fe))return!0;if(!fe||typeof fe!="function"&&typeof fe!="object")return!1;try{A(fe,null,_)}catch(de){if(de!==I)return!1}return!T(fe)&&R(fe)}:function(fe){if(ie(fe))return!0;if(!fe||typeof fe!="function"&&typeof fe!="object")return!1;if(J)return R(fe);if(T(fe))return!1;var de=P.call(fe);return de!==F&&de!==L&&!/^\[object HTML/.test(de)?!1:R(fe)},isCallable}var forEach,hasRequiredForEach;function requireForEach(){if(hasRequiredForEach)return forEach;hasRequiredForEach=1;var E=requireIsCallable(),A=Object.prototype.toString,_=Object.prototype.hasOwnProperty,I=function(D,F,L){for(var U=0,V=D.length;U<V;U++)_.call(D,U)&&(L==null?F(D[U],U,D):F.call(L,D[U],U,D))},B=function(D,F,L){for(var U=0,V=D.length;U<V;U++)L==null?F(D.charAt(U),U,D):F.call(L,D.charAt(U),U,D)},T=function(D,F,L){for(var U in D)_.call(D,U)&&(L==null?F(D[U],U,D):F.call(L,D[U],U,D))};function R(P){return A.call(P)==="[object Array]"}return forEach=function(D,F,L){if(!E(F))throw new TypeError("iterator must be a function");var U;arguments.length>=3&&(U=L),R(D)?I(D,F,U):typeof D=="string"?B(D,F,U):T(D,F,U)},forEach}var possibleTypedArrayNames,hasRequiredPossibleTypedArrayNames;function requirePossibleTypedArrayNames(){return hasRequiredPossibleTypedArrayNames||(hasRequiredPossibleTypedArrayNames=1,possibleTypedArrayNames=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),possibleTypedArrayNames}var availableTypedArrays,hasRequiredAvailableTypedArrays;function requireAvailableTypedArrays(){if(hasRequiredAvailableTypedArrays)return availableTypedArrays;hasRequiredAvailableTypedArrays=1;var E=requirePossibleTypedArrayNames(),A=typeof globalThis>"u"?commonjsGlobal:globalThis;return availableTypedArrays=function(){for(var I=[],B=0;B<E.length;B++)typeof A[E[B]]=="function"&&(I[I.length]=E[B]);return I},availableTypedArrays}var callBind={exports:{}},defineDataProperty,hasRequiredDefineDataProperty;function requireDefineDataProperty(){if(hasRequiredDefineDataProperty)return defineDataProperty;hasRequiredDefineDataProperty=1;var E=requireEsDefineProperty(),A=requireSyntax(),_=requireType(),I=requireGopd();return defineDataProperty=function(T,R,P){if(!T||typeof T!="object"&&typeof T!="function")throw new _("`obj` must be an object or a function`");if(typeof R!="string"&&typeof R!="symbol")throw new _("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new _("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new _("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new _("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new _("`loose`, if provided, must be a boolean");var D=arguments.length>3?arguments[3]:null,F=arguments.length>4?arguments[4]:null,L=arguments.length>5?arguments[5]:null,U=arguments.length>6?arguments[6]:!1,V=!!I&&I(T,R);if(E)E(T,R,{configurable:L===null&&V?V.configurable:!L,enumerable:D===null&&V?V.enumerable:!D,value:P,writable:F===null&&V?V.writable:!F});else if(U||!D&&!F&&!L)T[R]=P;else throw new A("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},defineDataProperty}var hasPropertyDescriptors_1,hasRequiredHasPropertyDescriptors;function requireHasPropertyDescriptors(){if(hasRequiredHasPropertyDescriptors)return hasPropertyDescriptors_1;hasRequiredHasPropertyDescriptors=1;var E=requireEsDefineProperty(),A=function(){return!!E};return A.hasArrayLengthDefineBug=function(){if(!E)return null;try{return E([],"length",{value:1}).length!==1}catch{return!0}},hasPropertyDescriptors_1=A,hasPropertyDescriptors_1}var setFunctionLength,hasRequiredSetFunctionLength;function requireSetFunctionLength(){if(hasRequiredSetFunctionLength)return setFunctionLength;hasRequiredSetFunctionLength=1;var E=requireGetIntrinsic(),A=requireDefineDataProperty(),_=requireHasPropertyDescriptors()(),I=requireGopd(),B=requireType(),T=E("%Math.floor%");return setFunctionLength=function(P,D){if(typeof P!="function")throw new B("`fn` is not a function");if(typeof D!="number"||D<0||D>4294967295||T(D)!==D)throw new B("`length` must be a positive 32-bit integer");var F=arguments.length>2&&!!arguments[2],L=!0,U=!0;if("length"in P&&I){var V=I(P,"length");V&&!V.configurable&&(L=!1),V&&!V.writable&&(U=!1)}return(L||U||!F)&&(_?A(P,"length",D,!0,!0):A(P,"length",D)),P},setFunctionLength}var applyBind,hasRequiredApplyBind;function requireApplyBind(){if(hasRequiredApplyBind)return applyBind;hasRequiredApplyBind=1;var E=requireFunctionBind(),A=requireFunctionApply(),_=requireActualApply();return applyBind=function(){return _(E,A,arguments)},applyBind}var hasRequiredCallBind;function requireCallBind(){return hasRequiredCallBind||(hasRequiredCallBind=1,(function(E){var A=requireSetFunctionLength(),_=requireEsDefineProperty(),I=requireCallBindApplyHelpers(),B=requireApplyBind();E.exports=function(R){var P=I(arguments),D=R.length-(arguments.length-1);return A(P,1+(D>0?D:0),!0)},_?_(E.exports,"apply",{value:B}):E.exports.apply=B})(callBind)),callBind.exports}var whichTypedArray,hasRequiredWhichTypedArray;function requireWhichTypedArray(){if(hasRequiredWhichTypedArray)return whichTypedArray;hasRequiredWhichTypedArray=1;var E=requireForEach(),A=requireAvailableTypedArrays(),_=requireCallBind(),I=requireCallBound$1(),B=requireGopd(),T=requireGetProto(),R=I("Object.prototype.toString"),P=requireShams()(),D=typeof globalThis>"u"?commonjsGlobal:globalThis,F=A(),L=I("String.prototype.slice"),U=I("Array.prototype.indexOf",!0)||function(ie,ne){for(var ce=0;ce<ie.length;ce+=1)if(ie[ce]===ne)return ce;return-1},V={__proto__:null};P&&B&&T?E(F,function(ee){var ie=new D[ee];if(Symbol.toStringTag in ie&&T){var ne=T(ie),ce=B(ne,Symbol.toStringTag);if(!ce&&ne){var fe=T(ne);ce=B(fe,Symbol.toStringTag)}V["$"+ee]=_(ce.get)}}):E(F,function(ee){var ie=new D[ee],ne=ie.slice||ie.set;ne&&(V["$"+ee]=_(ne))});var K=function(ie){var ne=!1;return E(V,function(ce,fe){if(!ne)try{"$"+ce(ie)===fe&&(ne=L(fe,1))}catch{}}),ne},J=function(ie){var ne=!1;return E(V,function(ce,fe){if(!ne)try{ce(ie),ne=L(fe,1)}catch{}}),ne};return whichTypedArray=function(ie){if(!ie||typeof ie!="object")return!1;if(!P){var ne=L(R(ie),8,-1);return U(F,ne)>-1?ne:ne!=="Object"?!1:J(ie)}return B?K(ie):null},whichTypedArray}var isTypedArray,hasRequiredIsTypedArray;function requireIsTypedArray(){if(hasRequiredIsTypedArray)return isTypedArray;hasRequiredIsTypedArray=1;var E=requireWhichTypedArray();return isTypedArray=function(_){return!!E(_)},isTypedArray}var hasRequiredTypes$1;function requireTypes$1(){return hasRequiredTypes$1||(hasRequiredTypes$1=1,(function(E){var A=requireIsArguments$1(),_=requireIsGeneratorFunction(),I=requireWhichTypedArray(),B=requireIsTypedArray();function T(vt){return vt.call.bind(vt)}var R=typeof BigInt<"u",P=typeof Symbol<"u",D=T(Object.prototype.toString),F=T(Number.prototype.valueOf),L=T(String.prototype.valueOf),U=T(Boolean.prototype.valueOf);if(R)var V=T(BigInt.prototype.valueOf);if(P)var K=T(Symbol.prototype.valueOf);function J(vt,It){if(typeof vt!="object")return!1;try{return It(vt),!0}catch{return!1}}E.isArgumentsObject=A,E.isGeneratorFunction=_,E.isTypedArray=B;function ee(vt){return typeof Promise<"u"&&vt instanceof Promise||vt!==null&&typeof vt=="object"&&typeof vt.then=="function"&&typeof vt.catch=="function"}E.isPromise=ee;function ie(vt){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(vt):B(vt)||ge(vt)}E.isArrayBufferView=ie;function ne(vt){return I(vt)==="Uint8Array"}E.isUint8Array=ne;function ce(vt){return I(vt)==="Uint8ClampedArray"}E.isUint8ClampedArray=ce;function fe(vt){return I(vt)==="Uint16Array"}E.isUint16Array=fe;function de(vt){return I(vt)==="Uint32Array"}E.isUint32Array=de;function pe(vt){return I(vt)==="Int8Array"}E.isInt8Array=pe;function ve(vt){return I(vt)==="Int16Array"}E.isInt16Array=ve;function ye(vt){return I(vt)==="Int32Array"}E.isInt32Array=ye;function _e(vt){return I(vt)==="Float32Array"}E.isFloat32Array=_e;function be(vt){return I(vt)==="Float64Array"}E.isFloat64Array=be;function Te(vt){return I(vt)==="BigInt64Array"}E.isBigInt64Array=Te;function ue(vt){return I(vt)==="BigUint64Array"}E.isBigUint64Array=ue;function O(vt){return D(vt)==="[object Map]"}O.working=typeof Map<"u"&&O(new Map);function z(vt){return typeof Map>"u"?!1:O.working?O(vt):vt instanceof Map}E.isMap=z;function Y(vt){return D(vt)==="[object Set]"}Y.working=typeof Set<"u"&&Y(new Set);function te(vt){return typeof Set>"u"?!1:Y.working?Y(vt):vt instanceof Set}E.isSet=te;function oe(vt){return D(vt)==="[object WeakMap]"}oe.working=typeof WeakMap<"u"&&oe(new WeakMap);function le(vt){return typeof WeakMap>"u"?!1:oe.working?oe(vt):vt instanceof WeakMap}E.isWeakMap=le;function he(vt){return D(vt)==="[object WeakSet]"}he.working=typeof WeakSet<"u"&&he(new WeakSet);function ae(vt){return he(vt)}E.isWeakSet=ae;function Q(vt){return D(vt)==="[object ArrayBuffer]"}Q.working=typeof ArrayBuffer<"u"&&Q(new ArrayBuffer);function se(vt){return typeof ArrayBuffer>"u"?!1:Q.working?Q(vt):vt instanceof ArrayBuffer}E.isArrayBuffer=se;function Ae(vt){return D(vt)==="[object DataView]"}Ae.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&Ae(new DataView(new ArrayBuffer(1),0,1));function ge(vt){return typeof DataView>"u"?!1:Ae.working?Ae(vt):vt instanceof DataView}E.isDataView=ge;var Ee=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function ke(vt){return D(vt)==="[object SharedArrayBuffer]"}function Se(vt){return typeof Ee>"u"?!1:(typeof ke.working>"u"&&(ke.working=ke(new Ee)),ke.working?ke(vt):vt instanceof Ee)}E.isSharedArrayBuffer=Se;function Ie(vt){return D(vt)==="[object AsyncFunction]"}E.isAsyncFunction=Ie;function we(vt){return D(vt)==="[object Map Iterator]"}E.isMapIterator=we;function xe(vt){return D(vt)==="[object Set Iterator]"}E.isSetIterator=xe;function Fe(vt){return D(vt)==="[object Generator]"}E.isGeneratorObject=Fe;function Ge(vt){return D(vt)==="[object WebAssembly.Module]"}E.isWebAssemblyCompiledModule=Ge;function Oe(vt){return J(vt,F)}E.isNumberObject=Oe;function et(vt){return J(vt,L)}E.isStringObject=et;function Mt(vt){return J(vt,U)}E.isBooleanObject=Mt;function dt(vt){return R&&J(vt,V)}E.isBigIntObject=dt;function mt(vt){return P&&J(vt,K)}E.isSymbolObject=mt;function Ut(vt){return Oe(vt)||et(vt)||Mt(vt)||dt(vt)||mt(vt)}E.isBoxedPrimitive=Ut;function St(vt){return typeof Uint8Array<"u"&&(se(vt)||Se(vt))}E.isAnyArrayBuffer=St,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(vt){Object.defineProperty(E,vt,{enumerable:!1,value:function(){throw new Error(vt+" is not supported in userland")}})})})(types$1)),types$1}var isBufferBrowser,hasRequiredIsBufferBrowser;function requireIsBufferBrowser(){return hasRequiredIsBufferBrowser||(hasRequiredIsBufferBrowser=1,isBufferBrowser=function(A){return A&&typeof A=="object"&&typeof A.copy=="function"&&typeof A.fill=="function"&&typeof A.readUInt8=="function"}),isBufferBrowser}var hasRequiredUtil$3;function requireUtil$3(){return hasRequiredUtil$3||(hasRequiredUtil$3=1,(function(E){var A={},_=Object.getOwnPropertyDescriptors||function(Ee){for(var ke=Object.keys(Ee),Se={},Ie=0;Ie<ke.length;Ie++)Se[ke[Ie]]=Object.getOwnPropertyDescriptor(Ee,ke[Ie]);return Se},I=/%[sdj%]/g;E.format=function(ge){if(!ve(ge)){for(var Ee=[],ke=0;ke<arguments.length;ke++)Ee.push(P(arguments[ke]));return Ee.join(" ")}for(var ke=1,Se=arguments,Ie=Se.length,we=String(ge).replace(I,function(Fe){if(Fe==="%%")return"%";if(ke>=Ie)return Fe;switch(Fe){case"%s":return String(Se[ke++]);case"%d":return Number(Se[ke++]);case"%j":try{return JSON.stringify(Se[ke++])}catch{return"[Circular]"}default:return Fe}}),xe=Se[ke];ke<Ie;xe=Se[++ke])fe(xe)||!Te(xe)?we+=" "+xe:we+=" "+P(xe);return we},E.deprecate=function(ge,Ee){if(typeof process$1<"u"&&process$1.noDeprecation===!0)return ge;if(typeof process$1>"u")return function(){return E.deprecate(ge,Ee).apply(this,arguments)};var ke=!1;function Se(){if(!ke){if(process$1.throwDeprecation)throw new Error(Ee);process$1.traceDeprecation?console.trace(Ee):console.error(Ee),ke=!0}return ge.apply(this,arguments)}return Se};var B={},T=/^$/;if(A.NODE_DEBUG){var R=A.NODE_DEBUG;R=R.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),T=new RegExp("^"+R+"$","i")}E.debuglog=function(ge){if(ge=ge.toUpperCase(),!B[ge])if(T.test(ge)){var Ee=process$1.pid;B[ge]=function(){var ke=E.format.apply(E,arguments);console.error("%s %d: %s",ge,Ee,ke)}}else B[ge]=function(){};return B[ge]};function P(ge,Ee){var ke={seen:[],stylize:F};return arguments.length>=3&&(ke.depth=arguments[2]),arguments.length>=4&&(ke.colors=arguments[3]),ce(Ee)?ke.showHidden=Ee:Ee&&E._extend(ke,Ee),_e(ke.showHidden)&&(ke.showHidden=!1),_e(ke.depth)&&(ke.depth=2),_e(ke.colors)&&(ke.colors=!1),_e(ke.customInspect)&&(ke.customInspect=!0),ke.colors&&(ke.stylize=D),U(ke,ge,ke.depth)}E.inspect=P,P.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},P.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function D(ge,Ee){var ke=P.styles[Ee];return ke?"\x1B["+P.colors[ke][0]+"m"+ge+"\x1B["+P.colors[ke][1]+"m":ge}function F(ge,Ee){return ge}function L(ge){var Ee={};return ge.forEach(function(ke,Se){Ee[ke]=!0}),Ee}function U(ge,Ee,ke){if(ge.customInspect&&Ee&&z(Ee.inspect)&&Ee.inspect!==E.inspect&&!(Ee.constructor&&Ee.constructor.prototype===Ee)){var Se=Ee.inspect(ke,ge);return ve(Se)||(Se=U(ge,Se,ke)),Se}var Ie=V(ge,Ee);if(Ie)return Ie;var we=Object.keys(Ee),xe=L(we);if(ge.showHidden&&(we=Object.getOwnPropertyNames(Ee)),O(Ee)&&(we.indexOf("message")>=0||we.indexOf("description")>=0))return K(Ee);if(we.length===0){if(z(Ee)){var Fe=Ee.name?": "+Ee.name:"";return ge.stylize("[Function"+Fe+"]","special")}if(be(Ee))return ge.stylize(RegExp.prototype.toString.call(Ee),"regexp");if(ue(Ee))return ge.stylize(Date.prototype.toString.call(Ee),"date");if(O(Ee))return K(Ee)}var Ge="",Oe=!1,et=["{","}"];if(ne(Ee)&&(Oe=!0,et=["[","]"]),z(Ee)){var Mt=Ee.name?": "+Ee.name:"";Ge=" [Function"+Mt+"]"}if(be(Ee)&&(Ge=" "+RegExp.prototype.toString.call(Ee)),ue(Ee)&&(Ge=" "+Date.prototype.toUTCString.call(Ee)),O(Ee)&&(Ge=" "+K(Ee)),we.length===0&&(!Oe||Ee.length==0))return et[0]+Ge+et[1];if(ke<0)return be(Ee)?ge.stylize(RegExp.prototype.toString.call(Ee),"regexp"):ge.stylize("[Object]","special");ge.seen.push(Ee);var dt;return Oe?dt=J(ge,Ee,ke,xe,we):dt=we.map(function(mt){return ee(ge,Ee,ke,xe,mt,Oe)}),ge.seen.pop(),ie(dt,Ge,et)}function V(ge,Ee){if(_e(Ee))return ge.stylize("undefined","undefined");if(ve(Ee)){var ke="'"+JSON.stringify(Ee).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ge.stylize(ke,"string")}if(pe(Ee))return ge.stylize(""+Ee,"number");if(ce(Ee))return ge.stylize(""+Ee,"boolean");if(fe(Ee))return ge.stylize("null","null")}function K(ge){return"["+Error.prototype.toString.call(ge)+"]"}function J(ge,Ee,ke,Se,Ie){for(var we=[],xe=0,Fe=Ee.length;xe<Fe;++xe)ae(Ee,String(xe))?we.push(ee(ge,Ee,ke,Se,String(xe),!0)):we.push("");return Ie.forEach(function(Ge){Ge.match(/^\d+$/)||we.push(ee(ge,Ee,ke,Se,Ge,!0))}),we}function ee(ge,Ee,ke,Se,Ie,we){var xe,Fe,Ge;if(Ge=Object.getOwnPropertyDescriptor(Ee,Ie)||{value:Ee[Ie]},Ge.get?Ge.set?Fe=ge.stylize("[Getter/Setter]","special"):Fe=ge.stylize("[Getter]","special"):Ge.set&&(Fe=ge.stylize("[Setter]","special")),ae(Se,Ie)||(xe="["+Ie+"]"),Fe||(ge.seen.indexOf(Ge.value)<0?(fe(ke)?Fe=U(ge,Ge.value,null):Fe=U(ge,Ge.value,ke-1),Fe.indexOf(`
`)>-1&&(we?Fe=Fe.split(`
`).map(function(Oe){return"  "+Oe}).join(`
`).slice(2):Fe=`
`+Fe.split(`
`).map(function(Oe){return"   "+Oe}).join(`
`))):Fe=ge.stylize("[Circular]","special")),_e(xe)){if(we&&Ie.match(/^\d+$/))return Fe;xe=JSON.stringify(""+Ie),xe.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(xe=xe.slice(1,-1),xe=ge.stylize(xe,"name")):(xe=xe.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),xe=ge.stylize(xe,"string"))}return xe+": "+Fe}function ie(ge,Ee,ke){var Se=ge.reduce(function(Ie,we){return we.indexOf(`
`)>=0,Ie+we.replace(/\u001b\[\d\d?m/g,"").length+1},0);return Se>60?ke[0]+(Ee===""?"":Ee+`
 `)+" "+ge.join(`,
  `)+" "+ke[1]:ke[0]+Ee+" "+ge.join(", ")+" "+ke[1]}E.types=requireTypes$1();function ne(ge){return Array.isArray(ge)}E.isArray=ne;function ce(ge){return typeof ge=="boolean"}E.isBoolean=ce;function fe(ge){return ge===null}E.isNull=fe;function de(ge){return ge==null}E.isNullOrUndefined=de;function pe(ge){return typeof ge=="number"}E.isNumber=pe;function ve(ge){return typeof ge=="string"}E.isString=ve;function ye(ge){return typeof ge=="symbol"}E.isSymbol=ye;function _e(ge){return ge===void 0}E.isUndefined=_e;function be(ge){return Te(ge)&&te(ge)==="[object RegExp]"}E.isRegExp=be,E.types.isRegExp=be;function Te(ge){return typeof ge=="object"&&ge!==null}E.isObject=Te;function ue(ge){return Te(ge)&&te(ge)==="[object Date]"}E.isDate=ue,E.types.isDate=ue;function O(ge){return Te(ge)&&(te(ge)==="[object Error]"||ge instanceof Error)}E.isError=O,E.types.isNativeError=O;function z(ge){return typeof ge=="function"}E.isFunction=z;function Y(ge){return ge===null||typeof ge=="boolean"||typeof ge=="number"||typeof ge=="string"||typeof ge=="symbol"||typeof ge>"u"}E.isPrimitive=Y,E.isBuffer=requireIsBufferBrowser();function te(ge){return Object.prototype.toString.call(ge)}function oe(ge){return ge<10?"0"+ge.toString(10):ge.toString(10)}var le=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function he(){var ge=new Date,Ee=[oe(ge.getHours()),oe(ge.getMinutes()),oe(ge.getSeconds())].join(":");return[ge.getDate(),le[ge.getMonth()],Ee].join(" ")}E.log=function(){console.log("%s - %s",he(),E.format.apply(E,arguments))},E.inherits=requireInherits_browser(),E._extend=function(ge,Ee){if(!Ee||!Te(Ee))return ge;for(var ke=Object.keys(Ee),Se=ke.length;Se--;)ge[ke[Se]]=Ee[ke[Se]];return ge};function ae(ge,Ee){return Object.prototype.hasOwnProperty.call(ge,Ee)}var Q=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;E.promisify=function(Ee){if(typeof Ee!="function")throw new TypeError('The "original" argument must be of type Function');if(Q&&Ee[Q]){var ke=Ee[Q];if(typeof ke!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(ke,Q,{value:ke,enumerable:!1,writable:!1,configurable:!0}),ke}function ke(){for(var Se,Ie,we=new Promise(function(Ge,Oe){Se=Ge,Ie=Oe}),xe=[],Fe=0;Fe<arguments.length;Fe++)xe.push(arguments[Fe]);xe.push(function(Ge,Oe){Ge?Ie(Ge):Se(Oe)});try{Ee.apply(this,xe)}catch(Ge){Ie(Ge)}return we}return Object.setPrototypeOf(ke,Object.getPrototypeOf(Ee)),Q&&Object.defineProperty(ke,Q,{value:ke,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(ke,_(Ee))},E.promisify.custom=Q;function se(ge,Ee){if(!ge){var ke=new Error("Promise was rejected with a falsy value");ke.reason=ge,ge=ke}return Ee(ge)}function Ae(ge){if(typeof ge!="function")throw new TypeError('The "original" argument must be of type Function');function Ee(){for(var ke=[],Se=0;Se<arguments.length;Se++)ke.push(arguments[Se]);var Ie=ke.pop();if(typeof Ie!="function")throw new TypeError("The last argument must be of type Function");var we=this,xe=function(){return Ie.apply(we,arguments)};ge.apply(this,ke).then(function(Fe){process$1.nextTick(xe.bind(null,null,Fe))},function(Fe){process$1.nextTick(se.bind(null,Fe,xe))})}return Object.setPrototypeOf(Ee,Object.getPrototypeOf(ge)),Object.defineProperties(Ee,_(ge)),Ee}E.callbackify=Ae})(util$3)),util$3}var buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;function E(J,ee){var ie=Object.keys(J);if(Object.getOwnPropertySymbols){var ne=Object.getOwnPropertySymbols(J);ee&&(ne=ne.filter(function(ce){return Object.getOwnPropertyDescriptor(J,ce).enumerable})),ie.push.apply(ie,ne)}return ie}function A(J){for(var ee=1;ee<arguments.length;ee++){var ie=arguments[ee]!=null?arguments[ee]:{};ee%2?E(Object(ie),!0).forEach(function(ne){_(J,ne,ie[ne])}):Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(ie)):E(Object(ie)).forEach(function(ne){Object.defineProperty(J,ne,Object.getOwnPropertyDescriptor(ie,ne))})}return J}function _(J,ee,ie){return ee=R(ee),ee in J?Object.defineProperty(J,ee,{value:ie,enumerable:!0,configurable:!0,writable:!0}):J[ee]=ie,J}function I(J,ee){if(!(J instanceof ee))throw new TypeError("Cannot call a class as a function")}function B(J,ee){for(var ie=0;ie<ee.length;ie++){var ne=ee[ie];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(J,R(ne.key),ne)}}function T(J,ee,ie){return ee&&B(J.prototype,ee),Object.defineProperty(J,"prototype",{writable:!1}),J}function R(J){var ee=P(J,"string");return typeof ee=="symbol"?ee:String(ee)}function P(J,ee){if(typeof J!="object"||J===null)return J;var ie=J[Symbol.toPrimitive];if(ie!==void 0){var ne=ie.call(J,ee);if(typeof ne!="object")return ne;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(J)}var D=requireDist$1(),F=D.Buffer,L=requireUtil$3(),U=L.inspect,V=U&&U.custom||"inspect";function K(J,ee,ie){F.prototype.copy.call(J,ee,ie)}return buffer_list=(function(){function J(){I(this,J),this.head=null,this.tail=null,this.length=0}return T(J,[{key:"push",value:function(ie){var ne={data:ie,next:null};this.length>0?this.tail.next=ne:this.head=ne,this.tail=ne,++this.length}},{key:"unshift",value:function(ie){var ne={data:ie,next:this.head};this.length===0&&(this.tail=ne),this.head=ne,++this.length}},{key:"shift",value:function(){if(this.length!==0){var ie=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,ie}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(ie){if(this.length===0)return"";for(var ne=this.head,ce=""+ne.data;ne=ne.next;)ce+=ie+ne.data;return ce}},{key:"concat",value:function(ie){if(this.length===0)return F.alloc(0);for(var ne=F.allocUnsafe(ie>>>0),ce=this.head,fe=0;ce;)K(ce.data,ne,fe),fe+=ce.data.length,ce=ce.next;return ne}},{key:"consume",value:function(ie,ne){var ce;return ie<this.head.data.length?(ce=this.head.data.slice(0,ie),this.head.data=this.head.data.slice(ie)):ie===this.head.data.length?ce=this.shift():ce=ne?this._getString(ie):this._getBuffer(ie),ce}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(ie){var ne=this.head,ce=1,fe=ne.data;for(ie-=fe.length;ne=ne.next;){var de=ne.data,pe=ie>de.length?de.length:ie;if(pe===de.length?fe+=de:fe+=de.slice(0,ie),ie-=pe,ie===0){pe===de.length?(++ce,ne.next?this.head=ne.next:this.head=this.tail=null):(this.head=ne,ne.data=de.slice(pe));break}++ce}return this.length-=ce,fe}},{key:"_getBuffer",value:function(ie){var ne=F.allocUnsafe(ie),ce=this.head,fe=1;for(ce.data.copy(ne),ie-=ce.data.length;ce=ce.next;){var de=ce.data,pe=ie>de.length?de.length:ie;if(de.copy(ne,ne.length-ie,0,pe),ie-=pe,ie===0){pe===de.length?(++fe,ce.next?this.head=ce.next:this.head=this.tail=null):(this.head=ce,ce.data=de.slice(pe));break}++fe}return this.length-=fe,ne}},{key:V,value:function(ie,ne){return U(this,A(A({},ne),{},{depth:0,customInspect:!1}))}}]),J})(),buffer_list}var destroy_1$1,hasRequiredDestroy$1;function requireDestroy$1(){if(hasRequiredDestroy$1)return destroy_1$1;hasRequiredDestroy$1=1;function E(R,P){var D=this,F=this._readableState&&this._readableState.destroyed,L=this._writableState&&this._writableState.destroyed;return F||L?(P?P(R):R&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process$1.nextTick(B,this,R)):process$1.nextTick(B,this,R)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(R||null,function(U){!P&&U?D._writableState?D._writableState.errorEmitted?process$1.nextTick(_,D):(D._writableState.errorEmitted=!0,process$1.nextTick(A,D,U)):process$1.nextTick(A,D,U):P?(process$1.nextTick(_,D),P(U)):process$1.nextTick(_,D)}),this)}function A(R,P){B(R,P),_(R)}function _(R){R._writableState&&!R._writableState.emitClose||R._readableState&&!R._readableState.emitClose||R.emit("close")}function I(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function B(R,P){R.emit("error",P)}function T(R,P){var D=R._readableState,F=R._writableState;D&&D.autoDestroy||F&&F.autoDestroy?R.destroy(P):R.emit("error",P)}return destroy_1$1={destroy:E,undestroy:I,errorOrDestroy:T},destroy_1$1}var errorsBrowser={},hasRequiredErrorsBrowser;function requireErrorsBrowser(){if(hasRequiredErrorsBrowser)return errorsBrowser;hasRequiredErrorsBrowser=1;function E(P,D){P.prototype=Object.create(D.prototype),P.prototype.constructor=P,P.__proto__=D}var A={};function _(P,D,F){F||(F=Error);function L(V,K,J){return typeof D=="string"?D:D(V,K,J)}var U=(function(V){E(K,V);function K(J,ee,ie){return V.call(this,L(J,ee,ie))||this}return K})(F);U.prototype.name=F.name,U.prototype.code=P,A[P]=U}function I(P,D){if(Array.isArray(P)){var F=P.length;return P=P.map(function(L){return String(L)}),F>2?"one of ".concat(D," ").concat(P.slice(0,F-1).join(", "),", or ")+P[F-1]:F===2?"one of ".concat(D," ").concat(P[0]," or ").concat(P[1]):"of ".concat(D," ").concat(P[0])}else return"of ".concat(D," ").concat(String(P))}function B(P,D,F){return P.substr(0,D.length)===D}function T(P,D,F){return(F===void 0||F>P.length)&&(F=P.length),P.substring(F-D.length,F)===D}function R(P,D,F){return typeof F!="number"&&(F=0),F+D.length>P.length?!1:P.indexOf(D,F)!==-1}return _("ERR_INVALID_OPT_VALUE",function(P,D){return'The value "'+D+'" is invalid for option "'+P+'"'},TypeError),_("ERR_INVALID_ARG_TYPE",function(P,D,F){var L;typeof D=="string"&&B(D,"not ")?(L="must not be",D=D.replace(/^not /,"")):L="must be";var U;if(T(P," argument"))U="The ".concat(P," ").concat(L," ").concat(I(D,"type"));else{var V=R(P,".")?"property":"argument";U='The "'.concat(P,'" ').concat(V," ").concat(L," ").concat(I(D,"type"))}return U+=". Received type ".concat(typeof F),U},TypeError),_("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),_("ERR_METHOD_NOT_IMPLEMENTED",function(P){return"The "+P+" method is not implemented"}),_("ERR_STREAM_PREMATURE_CLOSE","Premature close"),_("ERR_STREAM_DESTROYED",function(P){return"Cannot call "+P+" after a stream was destroyed"}),_("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),_("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),_("ERR_STREAM_WRITE_AFTER_END","write after end"),_("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),_("ERR_UNKNOWN_ENCODING",function(P){return"Unknown encoding: "+P},TypeError),_("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),errorsBrowser.codes=A,errorsBrowser}var state,hasRequiredState;function requireState(){if(hasRequiredState)return state;hasRequiredState=1;var E=requireErrorsBrowser().codes.ERR_INVALID_OPT_VALUE;function A(I,B,T){return I.highWaterMark!=null?I.highWaterMark:B?I[T]:null}function _(I,B,T,R){var P=A(B,R,T);if(P!=null){if(!(isFinite(P)&&Math.floor(P)===P)||P<0){var D=R?T:"highWaterMark";throw new E(D,P)}return Math.floor(P)}return I.objectMode?16:16*1024}return state={getHighWaterMark:_},state}var browser$d,hasRequiredBrowser$d;function requireBrowser$d(){if(hasRequiredBrowser$d)return browser$d;hasRequiredBrowser$d=1,browser$d=E;function E(_,I){if(A("noDeprecation"))return _;var B=!1;function T(){if(!B){if(A("throwDeprecation"))throw new Error(I);A("traceDeprecation")?console.trace(I):console.warn(I),B=!0}return _.apply(this,arguments)}return T}function A(_){try{if(!commonjsGlobal.localStorage)return!1}catch{return!1}var I=commonjsGlobal.localStorage[_];return I==null?!1:String(I).toLowerCase()==="true"}return browser$d}var _stream_writable$1,hasRequired_stream_writable$1;function require_stream_writable$1(){if(hasRequired_stream_writable$1)return _stream_writable$1;hasRequired_stream_writable$1=1,_stream_writable$1=_e;function E(Se){var Ie=this;this.next=null,this.entry=null,this.finish=function(){ke(Ie,Se)}}var A;_e.WritableState=ve;var _={deprecate:requireBrowser$d()},I=requireStreamBrowser$1(),B=requireDist$1().Buffer,T=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function R(Se){return B.from(Se)}function P(Se){return B.isBuffer(Se)||Se instanceof T}var D=requireDestroy$1(),F=requireState(),L=F.getHighWaterMark,U=requireErrorsBrowser().codes,V=U.ERR_INVALID_ARG_TYPE,K=U.ERR_METHOD_NOT_IMPLEMENTED,J=U.ERR_MULTIPLE_CALLBACK,ee=U.ERR_STREAM_CANNOT_PIPE,ie=U.ERR_STREAM_DESTROYED,ne=U.ERR_STREAM_NULL_VALUES,ce=U.ERR_STREAM_WRITE_AFTER_END,fe=U.ERR_UNKNOWN_ENCODING,de=D.errorOrDestroy;requireInherits_browser()(_e,I);function pe(){}function ve(Se,Ie,we){A=A||require_stream_duplex$1(),Se=Se||{},typeof we!="boolean"&&(we=Ie instanceof A),this.objectMode=!!Se.objectMode,we&&(this.objectMode=this.objectMode||!!Se.writableObjectMode),this.highWaterMark=L(this,Se,"writableHighWaterMark",we),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var xe=Se.decodeStrings===!1;this.decodeStrings=!xe,this.defaultEncoding=Se.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Fe){oe(Ie,Fe)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=Se.emitClose!==!1,this.autoDestroy=!!Se.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new E(this)}ve.prototype.getBuffer=function(){for(var Ie=this.bufferedRequest,we=[];Ie;)we.push(Ie),Ie=Ie.next;return we},(function(){try{Object.defineProperty(ve.prototype,"buffer",{get:_.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var ye;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(ye=Function.prototype[Symbol.hasInstance],Object.defineProperty(_e,Symbol.hasInstance,{value:function(Ie){return ye.call(this,Ie)?!0:this!==_e?!1:Ie&&Ie._writableState instanceof ve}})):ye=function(Ie){return Ie instanceof this};function _e(Se){A=A||require_stream_duplex$1();var Ie=this instanceof A;if(!Ie&&!ye.call(_e,this))return new _e(Se);this._writableState=new ve(Se,this,Ie),this.writable=!0,Se&&(typeof Se.write=="function"&&(this._write=Se.write),typeof Se.writev=="function"&&(this._writev=Se.writev),typeof Se.destroy=="function"&&(this._destroy=Se.destroy),typeof Se.final=="function"&&(this._final=Se.final)),I.call(this)}_e.prototype.pipe=function(){de(this,new ee)};function be(Se,Ie){var we=new ce;de(Se,we),process$1.nextTick(Ie,we)}function Te(Se,Ie,we,xe){var Fe;return we===null?Fe=new ne:typeof we!="string"&&!Ie.objectMode&&(Fe=new V("chunk",["string","Buffer"],we)),Fe?(de(Se,Fe),process$1.nextTick(xe,Fe),!1):!0}_e.prototype.write=function(Se,Ie,we){var xe=this._writableState,Fe=!1,Ge=!xe.objectMode&&P(Se);return Ge&&!B.isBuffer(Se)&&(Se=R(Se)),typeof Ie=="function"&&(we=Ie,Ie=null),Ge?Ie="buffer":Ie||(Ie=xe.defaultEncoding),typeof we!="function"&&(we=pe),xe.ending?be(this,we):(Ge||Te(this,xe,Se,we))&&(xe.pendingcb++,Fe=O(this,xe,Ge,Se,Ie,we)),Fe},_e.prototype.cork=function(){this._writableState.corked++},_e.prototype.uncork=function(){var Se=this._writableState;Se.corked&&(Se.corked--,!Se.writing&&!Se.corked&&!Se.bufferProcessing&&Se.bufferedRequest&&ae(this,Se))},_e.prototype.setDefaultEncoding=function(Ie){if(typeof Ie=="string"&&(Ie=Ie.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Ie+"").toLowerCase())>-1))throw new fe(Ie);return this._writableState.defaultEncoding=Ie,this},Object.defineProperty(_e.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function ue(Se,Ie,we){return!Se.objectMode&&Se.decodeStrings!==!1&&typeof Ie=="string"&&(Ie=B.from(Ie,we)),Ie}Object.defineProperty(_e.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function O(Se,Ie,we,xe,Fe,Ge){if(!we){var Oe=ue(Ie,xe,Fe);xe!==Oe&&(we=!0,Fe="buffer",xe=Oe)}var et=Ie.objectMode?1:xe.length;Ie.length+=et;var Mt=Ie.length<Ie.highWaterMark;if(Mt||(Ie.needDrain=!0),Ie.writing||Ie.corked){var dt=Ie.lastBufferedRequest;Ie.lastBufferedRequest={chunk:xe,encoding:Fe,isBuf:we,callback:Ge,next:null},dt?dt.next=Ie.lastBufferedRequest:Ie.bufferedRequest=Ie.lastBufferedRequest,Ie.bufferedRequestCount+=1}else z(Se,Ie,!1,et,xe,Fe,Ge);return Mt}function z(Se,Ie,we,xe,Fe,Ge,Oe){Ie.writelen=xe,Ie.writecb=Oe,Ie.writing=!0,Ie.sync=!0,Ie.destroyed?Ie.onwrite(new ie("write")):we?Se._writev(Fe,Ie.onwrite):Se._write(Fe,Ge,Ie.onwrite),Ie.sync=!1}function Y(Se,Ie,we,xe,Fe){--Ie.pendingcb,we?(process$1.nextTick(Fe,xe),process$1.nextTick(ge,Se,Ie),Se._writableState.errorEmitted=!0,de(Se,xe)):(Fe(xe),Se._writableState.errorEmitted=!0,de(Se,xe),ge(Se,Ie))}function te(Se){Se.writing=!1,Se.writecb=null,Se.length-=Se.writelen,Se.writelen=0}function oe(Se,Ie){var we=Se._writableState,xe=we.sync,Fe=we.writecb;if(typeof Fe!="function")throw new J;if(te(we),Ie)Y(Se,we,xe,Ie,Fe);else{var Ge=Q(we)||Se.destroyed;!Ge&&!we.corked&&!we.bufferProcessing&&we.bufferedRequest&&ae(Se,we),xe?process$1.nextTick(le,Se,we,Ge,Fe):le(Se,we,Ge,Fe)}}function le(Se,Ie,we,xe){we||he(Se,Ie),Ie.pendingcb--,xe(),ge(Se,Ie)}function he(Se,Ie){Ie.length===0&&Ie.needDrain&&(Ie.needDrain=!1,Se.emit("drain"))}function ae(Se,Ie){Ie.bufferProcessing=!0;var we=Ie.bufferedRequest;if(Se._writev&&we&&we.next){var xe=Ie.bufferedRequestCount,Fe=new Array(xe),Ge=Ie.corkedRequestsFree;Ge.entry=we;for(var Oe=0,et=!0;we;)Fe[Oe]=we,we.isBuf||(et=!1),we=we.next,Oe+=1;Fe.allBuffers=et,z(Se,Ie,!0,Ie.length,Fe,"",Ge.finish),Ie.pendingcb++,Ie.lastBufferedRequest=null,Ge.next?(Ie.corkedRequestsFree=Ge.next,Ge.next=null):Ie.corkedRequestsFree=new E(Ie),Ie.bufferedRequestCount=0}else{for(;we;){var Mt=we.chunk,dt=we.encoding,mt=we.callback,Ut=Ie.objectMode?1:Mt.length;if(z(Se,Ie,!1,Ut,Mt,dt,mt),we=we.next,Ie.bufferedRequestCount--,Ie.writing)break}we===null&&(Ie.lastBufferedRequest=null)}Ie.bufferedRequest=we,Ie.bufferProcessing=!1}_e.prototype._write=function(Se,Ie,we){we(new K("_write()"))},_e.prototype._writev=null,_e.prototype.end=function(Se,Ie,we){var xe=this._writableState;return typeof Se=="function"?(we=Se,Se=null,Ie=null):typeof Ie=="function"&&(we=Ie,Ie=null),Se!=null&&this.write(Se,Ie),xe.corked&&(xe.corked=1,this.uncork()),xe.ending||Ee(this,xe,we),this},Object.defineProperty(_e.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Q(Se){return Se.ending&&Se.length===0&&Se.bufferedRequest===null&&!Se.finished&&!Se.writing}function se(Se,Ie){Se._final(function(we){Ie.pendingcb--,we&&de(Se,we),Ie.prefinished=!0,Se.emit("prefinish"),ge(Se,Ie)})}function Ae(Se,Ie){!Ie.prefinished&&!Ie.finalCalled&&(typeof Se._final=="function"&&!Ie.destroyed?(Ie.pendingcb++,Ie.finalCalled=!0,process$1.nextTick(se,Se,Ie)):(Ie.prefinished=!0,Se.emit("prefinish")))}function ge(Se,Ie){var we=Q(Ie);if(we&&(Ae(Se,Ie),Ie.pendingcb===0&&(Ie.finished=!0,Se.emit("finish"),Ie.autoDestroy))){var xe=Se._readableState;(!xe||xe.autoDestroy&&xe.endEmitted)&&Se.destroy()}return we}function Ee(Se,Ie,we){Ie.ending=!0,ge(Se,Ie),we&&(Ie.finished?process$1.nextTick(we):Se.once("finish",we)),Ie.ended=!0,Se.writable=!1}function ke(Se,Ie,we){var xe=Se.entry;for(Se.entry=null;xe;){var Fe=xe.callback;Ie.pendingcb--,Fe(we),xe=xe.next}Ie.corkedRequestsFree.next=Se}return Object.defineProperty(_e.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(Ie){this._writableState&&(this._writableState.destroyed=Ie)}}),_e.prototype.destroy=D.destroy,_e.prototype._undestroy=D.undestroy,_e.prototype._destroy=function(Se,Ie){Ie(Se)},_stream_writable$1}var _stream_duplex$1,hasRequired_stream_duplex$1;function require_stream_duplex$1(){if(hasRequired_stream_duplex$1)return _stream_duplex$1;hasRequired_stream_duplex$1=1;var E=Object.keys||function(F){var L=[];for(var U in F)L.push(U);return L};_stream_duplex$1=R;var A=require_stream_readable$1(),_=require_stream_writable$1();requireInherits_browser()(R,A);for(var I=E(_.prototype),B=0;B<I.length;B++){var T=I[B];R.prototype[T]||(R.prototype[T]=_.prototype[T])}function R(F){if(!(this instanceof R))return new R(F);A.call(this,F),_.call(this,F),this.allowHalfOpen=!0,F&&(F.readable===!1&&(this.readable=!1),F.writable===!1&&(this.writable=!1),F.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",P)))}Object.defineProperty(R.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(R.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(R.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function P(){this._writableState.ended||process$1.nextTick(D,this)}function D(F){F.end()}return Object.defineProperty(R.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(L){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=L,this._writableState.destroyed=L)}}),_stream_duplex$1}var string_decoder={},hasRequiredString_decoder;function requireString_decoder(){if(hasRequiredString_decoder)return string_decoder;hasRequiredString_decoder=1;var E=requireSafeBuffer$1().Buffer,A=E.isEncoding||function(ne){switch(ne=""+ne,ne&&ne.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function _(ne){if(!ne)return"utf8";for(var ce;;)switch(ne){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return ne;default:if(ce)return;ne=(""+ne).toLowerCase(),ce=!0}}function I(ne){var ce=_(ne);if(typeof ce!="string"&&(E.isEncoding===A||!A(ne)))throw new Error("Unknown encoding: "+ne);return ce||ne}string_decoder.StringDecoder=B;function B(ne){this.encoding=I(ne);var ce;switch(this.encoding){case"utf16le":this.text=U,this.end=V,ce=4;break;case"utf8":this.fillLast=D,ce=4;break;case"base64":this.text=K,this.end=J,ce=3;break;default:this.write=ee,this.end=ie;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=E.allocUnsafe(ce)}B.prototype.write=function(ne){if(ne.length===0)return"";var ce,fe;if(this.lastNeed){if(ce=this.fillLast(ne),ce===void 0)return"";fe=this.lastNeed,this.lastNeed=0}else fe=0;return fe<ne.length?ce?ce+this.text(ne,fe):this.text(ne,fe):ce||""},B.prototype.end=L,B.prototype.text=F,B.prototype.fillLast=function(ne){if(this.lastNeed<=ne.length)return ne.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);ne.copy(this.lastChar,this.lastTotal-this.lastNeed,0,ne.length),this.lastNeed-=ne.length};function T(ne){return ne<=127?0:ne>>5===6?2:ne>>4===14?3:ne>>3===30?4:ne>>6===2?-1:-2}function R(ne,ce,fe){var de=ce.length-1;if(de<fe)return 0;var pe=T(ce[de]);return pe>=0?(pe>0&&(ne.lastNeed=pe-1),pe):--de<fe||pe===-2?0:(pe=T(ce[de]),pe>=0?(pe>0&&(ne.lastNeed=pe-2),pe):--de<fe||pe===-2?0:(pe=T(ce[de]),pe>=0?(pe>0&&(pe===2?pe=0:ne.lastNeed=pe-3),pe):0))}function P(ne,ce,fe){if((ce[0]&192)!==128)return ne.lastNeed=0,"";if(ne.lastNeed>1&&ce.length>1){if((ce[1]&192)!==128)return ne.lastNeed=1,"";if(ne.lastNeed>2&&ce.length>2&&(ce[2]&192)!==128)return ne.lastNeed=2,""}}function D(ne){var ce=this.lastTotal-this.lastNeed,fe=P(this,ne);if(fe!==void 0)return fe;if(this.lastNeed<=ne.length)return ne.copy(this.lastChar,ce,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);ne.copy(this.lastChar,ce,0,ne.length),this.lastNeed-=ne.length}function F(ne,ce){var fe=R(this,ne,ce);if(!this.lastNeed)return ne.toString("utf8",ce);this.lastTotal=fe;var de=ne.length-(fe-this.lastNeed);return ne.copy(this.lastChar,0,de),ne.toString("utf8",ce,de)}function L(ne){var ce=ne&&ne.length?this.write(ne):"";return this.lastNeed?ce+"":ce}function U(ne,ce){if((ne.length-ce)%2===0){var fe=ne.toString("utf16le",ce);if(fe){var de=fe.charCodeAt(fe.length-1);if(de>=55296&&de<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=ne[ne.length-2],this.lastChar[1]=ne[ne.length-1],fe.slice(0,-1)}return fe}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=ne[ne.length-1],ne.toString("utf16le",ce,ne.length-1)}function V(ne){var ce=ne&&ne.length?this.write(ne):"";if(this.lastNeed){var fe=this.lastTotal-this.lastNeed;return ce+this.lastChar.toString("utf16le",0,fe)}return ce}function K(ne,ce){var fe=(ne.length-ce)%3;return fe===0?ne.toString("base64",ce):(this.lastNeed=3-fe,this.lastTotal=3,fe===1?this.lastChar[0]=ne[ne.length-1]:(this.lastChar[0]=ne[ne.length-2],this.lastChar[1]=ne[ne.length-1]),ne.toString("base64",ce,ne.length-fe))}function J(ne){var ce=ne&&ne.length?this.write(ne):"";return this.lastNeed?ce+this.lastChar.toString("base64",0,3-this.lastNeed):ce}function ee(ne){return ne.toString(this.encoding)}function ie(ne){return ne&&ne.length?this.write(ne):""}return string_decoder}var endOfStream,hasRequiredEndOfStream;function requireEndOfStream(){if(hasRequiredEndOfStream)return endOfStream;hasRequiredEndOfStream=1;var E=requireErrorsBrowser().codes.ERR_STREAM_PREMATURE_CLOSE;function A(T){var R=!1;return function(){if(!R){R=!0;for(var P=arguments.length,D=new Array(P),F=0;F<P;F++)D[F]=arguments[F];T.apply(this,D)}}}function _(){}function I(T){return T.setHeader&&typeof T.abort=="function"}function B(T,R,P){if(typeof R=="function")return B(T,null,R);R||(R={}),P=A(P||_);var D=R.readable||R.readable!==!1&&T.readable,F=R.writable||R.writable!==!1&&T.writable,L=function(){T.writable||V()},U=T._writableState&&T._writableState.finished,V=function(){F=!1,U=!0,D||P.call(T)},K=T._readableState&&T._readableState.endEmitted,J=function(){D=!1,K=!0,F||P.call(T)},ee=function(fe){P.call(T,fe)},ie=function(){var fe;if(D&&!K)return(!T._readableState||!T._readableState.ended)&&(fe=new E),P.call(T,fe);if(F&&!U)return(!T._writableState||!T._writableState.ended)&&(fe=new E),P.call(T,fe)},ne=function(){T.req.on("finish",V)};return I(T)?(T.on("complete",V),T.on("abort",ie),T.req?ne():T.on("request",ne)):F&&!T._writableState&&(T.on("end",L),T.on("close",L)),T.on("end",J),T.on("finish",V),R.error!==!1&&T.on("error",ee),T.on("close",ie),function(){T.removeListener("complete",V),T.removeListener("abort",ie),T.removeListener("request",ne),T.req&&T.req.removeListener("finish",V),T.removeListener("end",L),T.removeListener("close",L),T.removeListener("finish",V),T.removeListener("end",J),T.removeListener("error",ee),T.removeListener("close",ie)}}return endOfStream=B,endOfStream}var async_iterator,hasRequiredAsync_iterator;function requireAsync_iterator(){if(hasRequiredAsync_iterator)return async_iterator;hasRequiredAsync_iterator=1;var E;function A(fe,de,pe){return de=_(de),de in fe?Object.defineProperty(fe,de,{value:pe,enumerable:!0,configurable:!0,writable:!0}):fe[de]=pe,fe}function _(fe){var de=I(fe,"string");return typeof de=="symbol"?de:String(de)}function I(fe,de){if(typeof fe!="object"||fe===null)return fe;var pe=fe[Symbol.toPrimitive];if(pe!==void 0){var ve=pe.call(fe,de);if(typeof ve!="object")return ve;throw new TypeError("@@toPrimitive must return a primitive value.")}return(de==="string"?String:Number)(fe)}var B=requireEndOfStream(),T=Symbol("lastResolve"),R=Symbol("lastReject"),P=Symbol("error"),D=Symbol("ended"),F=Symbol("lastPromise"),L=Symbol("handlePromise"),U=Symbol("stream");function V(fe,de){return{value:fe,done:de}}function K(fe){var de=fe[T];if(de!==null){var pe=fe[U].read();pe!==null&&(fe[F]=null,fe[T]=null,fe[R]=null,de(V(pe,!1)))}}function J(fe){process$1.nextTick(K,fe)}function ee(fe,de){return function(pe,ve){fe.then(function(){if(de[D]){pe(V(void 0,!0));return}de[L](pe,ve)},ve)}}var ie=Object.getPrototypeOf(function(){}),ne=Object.setPrototypeOf((E={get stream(){return this[U]},next:function(){var de=this,pe=this[P];if(pe!==null)return Promise.reject(pe);if(this[D])return Promise.resolve(V(void 0,!0));if(this[U].destroyed)return new Promise(function(be,Te){process$1.nextTick(function(){de[P]?Te(de[P]):be(V(void 0,!0))})});var ve=this[F],ye;if(ve)ye=new Promise(ee(ve,this));else{var _e=this[U].read();if(_e!==null)return Promise.resolve(V(_e,!1));ye=new Promise(this[L])}return this[F]=ye,ye}},A(E,Symbol.asyncIterator,function(){return this}),A(E,"return",function(){var de=this;return new Promise(function(pe,ve){de[U].destroy(null,function(ye){if(ye){ve(ye);return}pe(V(void 0,!0))})})}),E),ie),ce=function(de){var pe,ve=Object.create(ne,(pe={},A(pe,U,{value:de,writable:!0}),A(pe,T,{value:null,writable:!0}),A(pe,R,{value:null,writable:!0}),A(pe,P,{value:null,writable:!0}),A(pe,D,{value:de._readableState.endEmitted,writable:!0}),A(pe,L,{value:function(_e,be){var Te=ve[U].read();Te?(ve[F]=null,ve[T]=null,ve[R]=null,_e(V(Te,!1))):(ve[T]=_e,ve[R]=be)},writable:!0}),pe));return ve[F]=null,B(de,function(ye){if(ye&&ye.code!=="ERR_STREAM_PREMATURE_CLOSE"){var _e=ve[R];_e!==null&&(ve[F]=null,ve[T]=null,ve[R]=null,_e(ye)),ve[P]=ye;return}var be=ve[T];be!==null&&(ve[F]=null,ve[T]=null,ve[R]=null,be(V(void 0,!0))),ve[D]=!0}),de.on("readable",J.bind(null,ve)),ve};return async_iterator=ce,async_iterator}var fromBrowser,hasRequiredFromBrowser;function requireFromBrowser(){return hasRequiredFromBrowser||(hasRequiredFromBrowser=1,fromBrowser=function(){throw new Error("Readable.from is not available in the browser")}),fromBrowser}var _stream_readable$1,hasRequired_stream_readable$1;function require_stream_readable$1(){if(hasRequired_stream_readable$1)return _stream_readable$1;hasRequired_stream_readable$1=1,_stream_readable$1=be;var E;be.ReadableState=_e,requireEvents().EventEmitter;var A=function(Oe,et){return Oe.listeners(et).length},_=requireStreamBrowser$1(),I=requireDist$1().Buffer,B=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function T(Ge){return I.from(Ge)}function R(Ge){return I.isBuffer(Ge)||Ge instanceof B}var P=requireUtil$3(),D;P&&P.debuglog?D=P.debuglog("stream"):D=function(){};var F=requireBuffer_list(),L=requireDestroy$1(),U=requireState(),V=U.getHighWaterMark,K=requireErrorsBrowser().codes,J=K.ERR_INVALID_ARG_TYPE,ee=K.ERR_STREAM_PUSH_AFTER_EOF,ie=K.ERR_METHOD_NOT_IMPLEMENTED,ne=K.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,ce,fe,de;requireInherits_browser()(be,_);var pe=L.errorOrDestroy,ve=["error","close","destroy","pause","resume"];function ye(Ge,Oe,et){if(typeof Ge.prependListener=="function")return Ge.prependListener(Oe,et);!Ge._events||!Ge._events[Oe]?Ge.on(Oe,et):Array.isArray(Ge._events[Oe])?Ge._events[Oe].unshift(et):Ge._events[Oe]=[et,Ge._events[Oe]]}function _e(Ge,Oe,et){E=E||require_stream_duplex$1(),Ge=Ge||{},typeof et!="boolean"&&(et=Oe instanceof E),this.objectMode=!!Ge.objectMode,et&&(this.objectMode=this.objectMode||!!Ge.readableObjectMode),this.highWaterMark=V(this,Ge,"readableHighWaterMark",et),this.buffer=new F,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Ge.emitClose!==!1,this.autoDestroy=!!Ge.autoDestroy,this.destroyed=!1,this.defaultEncoding=Ge.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Ge.encoding&&(ce||(ce=requireString_decoder().StringDecoder),this.decoder=new ce(Ge.encoding),this.encoding=Ge.encoding)}function be(Ge){if(E=E||require_stream_duplex$1(),!(this instanceof be))return new be(Ge);var Oe=this instanceof E;this._readableState=new _e(Ge,this,Oe),this.readable=!0,Ge&&(typeof Ge.read=="function"&&(this._read=Ge.read),typeof Ge.destroy=="function"&&(this._destroy=Ge.destroy)),_.call(this)}Object.defineProperty(be.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(Oe){this._readableState&&(this._readableState.destroyed=Oe)}}),be.prototype.destroy=L.destroy,be.prototype._undestroy=L.undestroy,be.prototype._destroy=function(Ge,Oe){Oe(Ge)},be.prototype.push=function(Ge,Oe){var et=this._readableState,Mt;return et.objectMode?Mt=!0:typeof Ge=="string"&&(Oe=Oe||et.defaultEncoding,Oe!==et.encoding&&(Ge=I.from(Ge,Oe),Oe=""),Mt=!0),Te(this,Ge,Oe,!1,Mt)},be.prototype.unshift=function(Ge){return Te(this,Ge,null,!0,!1)};function Te(Ge,Oe,et,Mt,dt){D("readableAddChunk",Oe);var mt=Ge._readableState;if(Oe===null)mt.reading=!1,oe(Ge,mt);else{var Ut;if(dt||(Ut=O(mt,Oe)),Ut)pe(Ge,Ut);else if(mt.objectMode||Oe&&Oe.length>0)if(typeof Oe!="string"&&!mt.objectMode&&Object.getPrototypeOf(Oe)!==I.prototype&&(Oe=T(Oe)),Mt)mt.endEmitted?pe(Ge,new ne):ue(Ge,mt,Oe,!0);else if(mt.ended)pe(Ge,new ee);else{if(mt.destroyed)return!1;mt.reading=!1,mt.decoder&&!et?(Oe=mt.decoder.write(Oe),mt.objectMode||Oe.length!==0?ue(Ge,mt,Oe,!1):ae(Ge,mt)):ue(Ge,mt,Oe,!1)}else Mt||(mt.reading=!1,ae(Ge,mt))}return!mt.ended&&(mt.length<mt.highWaterMark||mt.length===0)}function ue(Ge,Oe,et,Mt){Oe.flowing&&Oe.length===0&&!Oe.sync?(Oe.awaitDrain=0,Ge.emit("data",et)):(Oe.length+=Oe.objectMode?1:et.length,Mt?Oe.buffer.unshift(et):Oe.buffer.push(et),Oe.needReadable&&le(Ge)),ae(Ge,Oe)}function O(Ge,Oe){var et;return!R(Oe)&&typeof Oe!="string"&&Oe!==void 0&&!Ge.objectMode&&(et=new J("chunk",["string","Buffer","Uint8Array"],Oe)),et}be.prototype.isPaused=function(){return this._readableState.flowing===!1},be.prototype.setEncoding=function(Ge){ce||(ce=requireString_decoder().StringDecoder);var Oe=new ce(Ge);this._readableState.decoder=Oe,this._readableState.encoding=this._readableState.decoder.encoding;for(var et=this._readableState.buffer.head,Mt="";et!==null;)Mt+=Oe.write(et.data),et=et.next;return this._readableState.buffer.clear(),Mt!==""&&this._readableState.buffer.push(Mt),this._readableState.length=Mt.length,this};var z=1073741824;function Y(Ge){return Ge>=z?Ge=z:(Ge--,Ge|=Ge>>>1,Ge|=Ge>>>2,Ge|=Ge>>>4,Ge|=Ge>>>8,Ge|=Ge>>>16,Ge++),Ge}function te(Ge,Oe){return Ge<=0||Oe.length===0&&Oe.ended?0:Oe.objectMode?1:Ge!==Ge?Oe.flowing&&Oe.length?Oe.buffer.head.data.length:Oe.length:(Ge>Oe.highWaterMark&&(Oe.highWaterMark=Y(Ge)),Ge<=Oe.length?Ge:Oe.ended?Oe.length:(Oe.needReadable=!0,0))}be.prototype.read=function(Ge){D("read",Ge),Ge=parseInt(Ge,10);var Oe=this._readableState,et=Ge;if(Ge!==0&&(Oe.emittedReadable=!1),Ge===0&&Oe.needReadable&&((Oe.highWaterMark!==0?Oe.length>=Oe.highWaterMark:Oe.length>0)||Oe.ended))return D("read: emitReadable",Oe.length,Oe.ended),Oe.length===0&&Oe.ended?we(this):le(this),null;if(Ge=te(Ge,Oe),Ge===0&&Oe.ended)return Oe.length===0&&we(this),null;var Mt=Oe.needReadable;D("need readable",Mt),(Oe.length===0||Oe.length-Ge<Oe.highWaterMark)&&(Mt=!0,D("length less than watermark",Mt)),Oe.ended||Oe.reading?(Mt=!1,D("reading or ended",Mt)):Mt&&(D("do read"),Oe.reading=!0,Oe.sync=!0,Oe.length===0&&(Oe.needReadable=!0),this._read(Oe.highWaterMark),Oe.sync=!1,Oe.reading||(Ge=te(et,Oe)));var dt;return Ge>0?dt=Ie(Ge,Oe):dt=null,dt===null?(Oe.needReadable=Oe.length<=Oe.highWaterMark,Ge=0):(Oe.length-=Ge,Oe.awaitDrain=0),Oe.length===0&&(Oe.ended||(Oe.needReadable=!0),et!==Ge&&Oe.ended&&we(this)),dt!==null&&this.emit("data",dt),dt};function oe(Ge,Oe){if(D("onEofChunk"),!Oe.ended){if(Oe.decoder){var et=Oe.decoder.end();et&&et.length&&(Oe.buffer.push(et),Oe.length+=Oe.objectMode?1:et.length)}Oe.ended=!0,Oe.sync?le(Ge):(Oe.needReadable=!1,Oe.emittedReadable||(Oe.emittedReadable=!0,he(Ge)))}}function le(Ge){var Oe=Ge._readableState;D("emitReadable",Oe.needReadable,Oe.emittedReadable),Oe.needReadable=!1,Oe.emittedReadable||(D("emitReadable",Oe.flowing),Oe.emittedReadable=!0,process$1.nextTick(he,Ge))}function he(Ge){var Oe=Ge._readableState;D("emitReadable_",Oe.destroyed,Oe.length,Oe.ended),!Oe.destroyed&&(Oe.length||Oe.ended)&&(Ge.emit("readable"),Oe.emittedReadable=!1),Oe.needReadable=!Oe.flowing&&!Oe.ended&&Oe.length<=Oe.highWaterMark,Se(Ge)}function ae(Ge,Oe){Oe.readingMore||(Oe.readingMore=!0,process$1.nextTick(Q,Ge,Oe))}function Q(Ge,Oe){for(;!Oe.reading&&!Oe.ended&&(Oe.length<Oe.highWaterMark||Oe.flowing&&Oe.length===0);){var et=Oe.length;if(D("maybeReadMore read 0"),Ge.read(0),et===Oe.length)break}Oe.readingMore=!1}be.prototype._read=function(Ge){pe(this,new ie("_read()"))},be.prototype.pipe=function(Ge,Oe){var et=this,Mt=this._readableState;switch(Mt.pipesCount){case 0:Mt.pipes=Ge;break;case 1:Mt.pipes=[Mt.pipes,Ge];break;default:Mt.pipes.push(Ge);break}Mt.pipesCount+=1,D("pipe count=%d opts=%j",Mt.pipesCount,Oe);var dt=(!Oe||Oe.end!==!1)&&Ge!==process$1.stdout&&Ge!==process$1.stderr,mt=dt?St:Xt;Mt.endEmitted?process$1.nextTick(mt):et.once("end",mt),Ge.on("unpipe",Ut);function Ut(Nt,qt){D("onunpipe"),Nt===et&&qt&&qt.hasUnpiped===!1&&(qt.hasUnpiped=!0,yt())}function St(){D("onend"),Ge.end()}var vt=se(et);Ge.on("drain",vt);var It=!1;function yt(){D("cleanup"),Ge.removeListener("close",ft),Ge.removeListener("finish",_t),Ge.removeListener("drain",vt),Ge.removeListener("error",Wt),Ge.removeListener("unpipe",Ut),et.removeListener("end",St),et.removeListener("end",Xt),et.removeListener("data",Tt),It=!0,Mt.awaitDrain&&(!Ge._writableState||Ge._writableState.needDrain)&&vt()}et.on("data",Tt);function Tt(Nt){D("ondata");var qt=Ge.write(Nt);D("dest.write",qt),qt===!1&&((Mt.pipesCount===1&&Mt.pipes===Ge||Mt.pipesCount>1&&Fe(Mt.pipes,Ge)!==-1)&&!It&&(D("false write response, pause",Mt.awaitDrain),Mt.awaitDrain++),et.pause())}function Wt(Nt){D("onerror",Nt),Xt(),Ge.removeListener("error",Wt),A(Ge,"error")===0&&pe(Ge,Nt)}ye(Ge,"error",Wt);function ft(){Ge.removeListener("finish",_t),Xt()}Ge.once("close",ft);function _t(){D("onfinish"),Ge.removeListener("close",ft),Xt()}Ge.once("finish",_t);function Xt(){D("unpipe"),et.unpipe(Ge)}return Ge.emit("pipe",et),Mt.flowing||(D("pipe resume"),et.resume()),Ge};function se(Ge){return function(){var et=Ge._readableState;D("pipeOnDrain",et.awaitDrain),et.awaitDrain&&et.awaitDrain--,et.awaitDrain===0&&A(Ge,"data")&&(et.flowing=!0,Se(Ge))}}be.prototype.unpipe=function(Ge){var Oe=this._readableState,et={hasUnpiped:!1};if(Oe.pipesCount===0)return this;if(Oe.pipesCount===1)return Ge&&Ge!==Oe.pipes?this:(Ge||(Ge=Oe.pipes),Oe.pipes=null,Oe.pipesCount=0,Oe.flowing=!1,Ge&&Ge.emit("unpipe",this,et),this);if(!Ge){var Mt=Oe.pipes,dt=Oe.pipesCount;Oe.pipes=null,Oe.pipesCount=0,Oe.flowing=!1;for(var mt=0;mt<dt;mt++)Mt[mt].emit("unpipe",this,{hasUnpiped:!1});return this}var Ut=Fe(Oe.pipes,Ge);return Ut===-1?this:(Oe.pipes.splice(Ut,1),Oe.pipesCount-=1,Oe.pipesCount===1&&(Oe.pipes=Oe.pipes[0]),Ge.emit("unpipe",this,et),this)},be.prototype.on=function(Ge,Oe){var et=_.prototype.on.call(this,Ge,Oe),Mt=this._readableState;return Ge==="data"?(Mt.readableListening=this.listenerCount("readable")>0,Mt.flowing!==!1&&this.resume()):Ge==="readable"&&!Mt.endEmitted&&!Mt.readableListening&&(Mt.readableListening=Mt.needReadable=!0,Mt.flowing=!1,Mt.emittedReadable=!1,D("on readable",Mt.length,Mt.reading),Mt.length?le(this):Mt.reading||process$1.nextTick(ge,this)),et},be.prototype.addListener=be.prototype.on,be.prototype.removeListener=function(Ge,Oe){var et=_.prototype.removeListener.call(this,Ge,Oe);return Ge==="readable"&&process$1.nextTick(Ae,this),et},be.prototype.removeAllListeners=function(Ge){var Oe=_.prototype.removeAllListeners.apply(this,arguments);return(Ge==="readable"||Ge===void 0)&&process$1.nextTick(Ae,this),Oe};function Ae(Ge){var Oe=Ge._readableState;Oe.readableListening=Ge.listenerCount("readable")>0,Oe.resumeScheduled&&!Oe.paused?Oe.flowing=!0:Ge.listenerCount("data")>0&&Ge.resume()}function ge(Ge){D("readable nexttick read 0"),Ge.read(0)}be.prototype.resume=function(){var Ge=this._readableState;return Ge.flowing||(D("resume"),Ge.flowing=!Ge.readableListening,Ee(this,Ge)),Ge.paused=!1,this};function Ee(Ge,Oe){Oe.resumeScheduled||(Oe.resumeScheduled=!0,process$1.nextTick(ke,Ge,Oe))}function ke(Ge,Oe){D("resume",Oe.reading),Oe.reading||Ge.read(0),Oe.resumeScheduled=!1,Ge.emit("resume"),Se(Ge),Oe.flowing&&!Oe.reading&&Ge.read(0)}be.prototype.pause=function(){return D("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(D("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function Se(Ge){var Oe=Ge._readableState;for(D("flow",Oe.flowing);Oe.flowing&&Ge.read()!==null;);}be.prototype.wrap=function(Ge){var Oe=this,et=this._readableState,Mt=!1;Ge.on("end",function(){if(D("wrapped end"),et.decoder&&!et.ended){var Ut=et.decoder.end();Ut&&Ut.length&&Oe.push(Ut)}Oe.push(null)}),Ge.on("data",function(Ut){if(D("wrapped data"),et.decoder&&(Ut=et.decoder.write(Ut)),!(et.objectMode&&Ut==null)&&!(!et.objectMode&&(!Ut||!Ut.length))){var St=Oe.push(Ut);St||(Mt=!0,Ge.pause())}});for(var dt in Ge)this[dt]===void 0&&typeof Ge[dt]=="function"&&(this[dt]=(function(St){return function(){return Ge[St].apply(Ge,arguments)}})(dt));for(var mt=0;mt<ve.length;mt++)Ge.on(ve[mt],this.emit.bind(this,ve[mt]));return this._read=function(Ut){D("wrapped _read",Ut),Mt&&(Mt=!1,Ge.resume())},this},typeof Symbol=="function"&&(be.prototype[Symbol.asyncIterator]=function(){return fe===void 0&&(fe=requireAsync_iterator()),fe(this)}),Object.defineProperty(be.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(be.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(be.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Oe){this._readableState&&(this._readableState.flowing=Oe)}}),be._fromList=Ie,Object.defineProperty(be.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function Ie(Ge,Oe){if(Oe.length===0)return null;var et;return Oe.objectMode?et=Oe.buffer.shift():!Ge||Ge>=Oe.length?(Oe.decoder?et=Oe.buffer.join(""):Oe.buffer.length===1?et=Oe.buffer.first():et=Oe.buffer.concat(Oe.length),Oe.buffer.clear()):et=Oe.buffer.consume(Ge,Oe.decoder),et}function we(Ge){var Oe=Ge._readableState;D("endReadable",Oe.endEmitted),Oe.endEmitted||(Oe.ended=!0,process$1.nextTick(xe,Oe,Ge))}function xe(Ge,Oe){if(D("endReadableNT",Ge.endEmitted,Ge.length),!Ge.endEmitted&&Ge.length===0&&(Ge.endEmitted=!0,Oe.readable=!1,Oe.emit("end"),Ge.autoDestroy)){var et=Oe._writableState;(!et||et.autoDestroy&&et.finished)&&Oe.destroy()}}typeof Symbol=="function"&&(be.from=function(Ge,Oe){return de===void 0&&(de=requireFromBrowser()),de(be,Ge,Oe)});function Fe(Ge,Oe){for(var et=0,Mt=Ge.length;et<Mt;et++)if(Ge[et]===Oe)return et;return-1}return _stream_readable$1}var _stream_transform$1,hasRequired_stream_transform$1;function require_stream_transform$1(){if(hasRequired_stream_transform$1)return _stream_transform$1;hasRequired_stream_transform$1=1,_stream_transform$1=P;var E=requireErrorsBrowser().codes,A=E.ERR_METHOD_NOT_IMPLEMENTED,_=E.ERR_MULTIPLE_CALLBACK,I=E.ERR_TRANSFORM_ALREADY_TRANSFORMING,B=E.ERR_TRANSFORM_WITH_LENGTH_0,T=require_stream_duplex$1();requireInherits_browser()(P,T);function R(L,U){var V=this._transformState;V.transforming=!1;var K=V.writecb;if(K===null)return this.emit("error",new _);V.writechunk=null,V.writecb=null,U!=null&&this.push(U),K(L);var J=this._readableState;J.reading=!1,(J.needReadable||J.length<J.highWaterMark)&&this._read(J.highWaterMark)}function P(L){if(!(this instanceof P))return new P(L);T.call(this,L),this._transformState={afterTransform:R.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,L&&(typeof L.transform=="function"&&(this._transform=L.transform),typeof L.flush=="function"&&(this._flush=L.flush)),this.on("prefinish",D)}function D(){var L=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(U,V){F(L,U,V)}):F(this,null,null)}P.prototype.push=function(L,U){return this._transformState.needTransform=!1,T.prototype.push.call(this,L,U)},P.prototype._transform=function(L,U,V){V(new A("_transform()"))},P.prototype._write=function(L,U,V){var K=this._transformState;if(K.writecb=V,K.writechunk=L,K.writeencoding=U,!K.transforming){var J=this._readableState;(K.needTransform||J.needReadable||J.length<J.highWaterMark)&&this._read(J.highWaterMark)}},P.prototype._read=function(L){var U=this._transformState;U.writechunk!==null&&!U.transforming?(U.transforming=!0,this._transform(U.writechunk,U.writeencoding,U.afterTransform)):U.needTransform=!0},P.prototype._destroy=function(L,U){T.prototype._destroy.call(this,L,function(V){U(V)})};function F(L,U,V){if(U)return L.emit("error",U);if(V!=null&&L.push(V),L._writableState.length)throw new B;if(L._transformState.transforming)throw new I;return L.push(null)}return _stream_transform$1}var _stream_passthrough$1,hasRequired_stream_passthrough$1;function require_stream_passthrough$1(){if(hasRequired_stream_passthrough$1)return _stream_passthrough$1;hasRequired_stream_passthrough$1=1,_stream_passthrough$1=A;var E=require_stream_transform$1();requireInherits_browser()(A,E);function A(_){if(!(this instanceof A))return new A(_);E.call(this,_)}return A.prototype._transform=function(_,I,B){B(null,_)},_stream_passthrough$1}var pipeline_1,hasRequiredPipeline;function requirePipeline(){if(hasRequiredPipeline)return pipeline_1;hasRequiredPipeline=1;var E;function A(V){var K=!1;return function(){K||(K=!0,V.apply(void 0,arguments))}}var _=requireErrorsBrowser().codes,I=_.ERR_MISSING_ARGS,B=_.ERR_STREAM_DESTROYED;function T(V){if(V)throw V}function R(V){return V.setHeader&&typeof V.abort=="function"}function P(V,K,J,ee){ee=A(ee);var ie=!1;V.on("close",function(){ie=!0}),E===void 0&&(E=requireEndOfStream()),E(V,{readable:K,writable:J},function(ce){if(ce)return ee(ce);ie=!0,ee()});var ne=!1;return function(ce){if(!ie&&!ne){if(ne=!0,R(V))return V.abort();if(typeof V.destroy=="function")return V.destroy();ee(ce||new B("pipe"))}}}function D(V){V()}function F(V,K){return V.pipe(K)}function L(V){return!V.length||typeof V[V.length-1]!="function"?T:V.pop()}function U(){for(var V=arguments.length,K=new Array(V),J=0;J<V;J++)K[J]=arguments[J];var ee=L(K);if(Array.isArray(K[0])&&(K=K[0]),K.length<2)throw new I("streams");var ie,ne=K.map(function(ce,fe){var de=fe<K.length-1,pe=fe>0;return P(ce,de,pe,function(ve){ie||(ie=ve),ve&&ne.forEach(D),!de&&(ne.forEach(D),ee(ie))})});return K.reduce(F)}return pipeline_1=U,pipeline_1}var streamBrowserify,hasRequiredStreamBrowserify;function requireStreamBrowserify(){if(hasRequiredStreamBrowserify)return streamBrowserify;hasRequiredStreamBrowserify=1,streamBrowserify=_;var E=requireEvents().EventEmitter,A=requireInherits_browser();A(_,E),_.Readable=require_stream_readable$1(),_.Writable=require_stream_writable$1(),_.Duplex=require_stream_duplex$1(),_.Transform=require_stream_transform$1(),_.PassThrough=require_stream_passthrough$1(),_.finished=requireEndOfStream(),_.pipeline=requirePipeline(),_.Stream=_;function _(){E.call(this)}return _.prototype.pipe=function(I,B){var T=this;function R(K){I.writable&&I.write(K)===!1&&T.pause&&T.pause()}T.on("data",R);function P(){T.readable&&T.resume&&T.resume()}I.on("drain",P),!I._isStdio&&(!B||B.end!==!1)&&(T.on("end",F),T.on("close",L));var D=!1;function F(){D||(D=!0,I.end())}function L(){D||(D=!0,typeof I.destroy=="function"&&I.destroy())}function U(K){if(V(),E.listenerCount(this,"error")===0)throw K}T.on("error",U),I.on("error",U);function V(){T.removeListener("data",R),I.removeListener("drain",P),T.removeListener("end",F),T.removeListener("close",L),T.removeListener("error",U),I.removeListener("error",U),T.removeListener("end",V),T.removeListener("close",V),I.removeListener("close",V)}return T.on("end",V),T.on("close",V),I.on("close",V),I.emit("pipe",T),I},streamBrowserify}var hashBase$1,hasRequiredHashBase$1;function requireHashBase$1(){if(hasRequiredHashBase$1)return hashBase$1;hasRequiredHashBase$1=1;var E=requireSafeBuffer$1().Buffer,A=requireStreamBrowserify().Transform,_=requireInherits_browser();function I(P){A.call(this),this._block=E.allocUnsafe(P),this._blockSize=P,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}_(I,A),I.prototype._transform=function(P,D,F){var L=null;try{this.update(P,D)}catch(U){L=U}F(L)},I.prototype._flush=function(P){var D=null;try{this.push(this.digest())}catch(F){D=F}P(D)};var B=typeof Uint8Array<"u",T=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&ArrayBuffer.isView&&(E.prototype instanceof Uint8Array||E.TYPED_ARRAY_SUPPORT);function R(P,D){if(P instanceof E)return P;if(typeof P=="string")return E.from(P,D);if(T&&ArrayBuffer.isView(P)){if(P.byteLength===0)return E.alloc(0);var F=E.from(P.buffer,P.byteOffset,P.byteLength);if(F.byteLength===P.byteLength)return F}if(B&&P instanceof Uint8Array||E.isBuffer(P)&&P.constructor&&typeof P.constructor.isBuffer=="function"&&P.constructor.isBuffer(P))return E.from(P);throw new TypeError('The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView.')}return I.prototype.update=function(P,D){if(this._finalized)throw new Error("Digest already called");P=R(P,D);for(var F=this._block,L=0;this._blockOffset+P.length-L>=this._blockSize;){for(var U=this._blockOffset;U<this._blockSize;)F[U++]=P[L++];this._update(),this._blockOffset=0}for(;L<P.length;)F[this._blockOffset++]=P[L++];for(var V=0,K=P.length*8;K>0;++V)this._length[V]+=K,K=this._length[V]/4294967296|0,K>0&&(this._length[V]-=4294967296*K);return this},I.prototype._update=function(){throw new Error("_update is not implemented")},I.prototype.digest=function(P){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var D=this._digest();P!==void 0&&(D=D.toString(P)),this._block.fill(0),this._blockOffset=0;for(var F=0;F<4;++F)this._length[F]=0;return D},I.prototype._digest=function(){throw new Error("_digest is not implemented")},hashBase$1=I,hashBase$1}var md5_js,hasRequiredMd5_js;function requireMd5_js(){if(hasRequiredMd5_js)return md5_js;hasRequiredMd5_js=1;var E=requireInherits_browser(),A=requireHashBase$1(),_=requireSafeBuffer$1().Buffer,I=new Array(16);function B(){A.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}E(B,A),B.prototype._update=function(){for(var L=I,U=0;U<16;++U)L[U]=this._block.readInt32LE(U*4);var V=this._a,K=this._b,J=this._c,ee=this._d;V=R(V,K,J,ee,L[0],3614090360,7),ee=R(ee,V,K,J,L[1],3905402710,12),J=R(J,ee,V,K,L[2],606105819,17),K=R(K,J,ee,V,L[3],3250441966,22),V=R(V,K,J,ee,L[4],4118548399,7),ee=R(ee,V,K,J,L[5],1200080426,12),J=R(J,ee,V,K,L[6],2821735955,17),K=R(K,J,ee,V,L[7],4249261313,22),V=R(V,K,J,ee,L[8],1770035416,7),ee=R(ee,V,K,J,L[9],2336552879,12),J=R(J,ee,V,K,L[10],4294925233,17),K=R(K,J,ee,V,L[11],2304563134,22),V=R(V,K,J,ee,L[12],1804603682,7),ee=R(ee,V,K,J,L[13],4254626195,12),J=R(J,ee,V,K,L[14],2792965006,17),K=R(K,J,ee,V,L[15],1236535329,22),V=P(V,K,J,ee,L[1],4129170786,5),ee=P(ee,V,K,J,L[6],3225465664,9),J=P(J,ee,V,K,L[11],643717713,14),K=P(K,J,ee,V,L[0],3921069994,20),V=P(V,K,J,ee,L[5],3593408605,5),ee=P(ee,V,K,J,L[10],38016083,9),J=P(J,ee,V,K,L[15],3634488961,14),K=P(K,J,ee,V,L[4],3889429448,20),V=P(V,K,J,ee,L[9],568446438,5),ee=P(ee,V,K,J,L[14],3275163606,9),J=P(J,ee,V,K,L[3],4107603335,14),K=P(K,J,ee,V,L[8],1163531501,20),V=P(V,K,J,ee,L[13],2850285829,5),ee=P(ee,V,K,J,L[2],4243563512,9),J=P(J,ee,V,K,L[7],1735328473,14),K=P(K,J,ee,V,L[12],2368359562,20),V=D(V,K,J,ee,L[5],4294588738,4),ee=D(ee,V,K,J,L[8],2272392833,11),J=D(J,ee,V,K,L[11],1839030562,16),K=D(K,J,ee,V,L[14],4259657740,23),V=D(V,K,J,ee,L[1],2763975236,4),ee=D(ee,V,K,J,L[4],1272893353,11),J=D(J,ee,V,K,L[7],4139469664,16),K=D(K,J,ee,V,L[10],3200236656,23),V=D(V,K,J,ee,L[13],681279174,4),ee=D(ee,V,K,J,L[0],3936430074,11),J=D(J,ee,V,K,L[3],3572445317,16),K=D(K,J,ee,V,L[6],76029189,23),V=D(V,K,J,ee,L[9],3654602809,4),ee=D(ee,V,K,J,L[12],3873151461,11),J=D(J,ee,V,K,L[15],530742520,16),K=D(K,J,ee,V,L[2],3299628645,23),V=F(V,K,J,ee,L[0],4096336452,6),ee=F(ee,V,K,J,L[7],1126891415,10),J=F(J,ee,V,K,L[14],2878612391,15),K=F(K,J,ee,V,L[5],4237533241,21),V=F(V,K,J,ee,L[12],1700485571,6),ee=F(ee,V,K,J,L[3],2399980690,10),J=F(J,ee,V,K,L[10],4293915773,15),K=F(K,J,ee,V,L[1],2240044497,21),V=F(V,K,J,ee,L[8],1873313359,6),ee=F(ee,V,K,J,L[15],4264355552,10),J=F(J,ee,V,K,L[6],2734768916,15),K=F(K,J,ee,V,L[13],1309151649,21),V=F(V,K,J,ee,L[4],4149444226,6),ee=F(ee,V,K,J,L[11],3174756917,10),J=F(J,ee,V,K,L[2],718787259,15),K=F(K,J,ee,V,L[9],3951481745,21),this._a=this._a+V|0,this._b=this._b+K|0,this._c=this._c+J|0,this._d=this._d+ee|0},B.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var L=_.allocUnsafe(16);return L.writeInt32LE(this._a,0),L.writeInt32LE(this._b,4),L.writeInt32LE(this._c,8),L.writeInt32LE(this._d,12),L};function T(L,U){return L<<U|L>>>32-U}function R(L,U,V,K,J,ee,ie){return T(L+(U&V|~U&K)+J+ee|0,ie)+U|0}function P(L,U,V,K,J,ee,ie){return T(L+(U&K|V&~K)+J+ee|0,ie)+U|0}function D(L,U,V,K,J,ee,ie){return T(L+(U^V^K)+J+ee|0,ie)+U|0}function F(L,U,V,K,J,ee,ie){return T(L+(V^(U|~K))+J+ee|0,ie)+U|0}return md5_js=B,md5_js}var ripemd160$1,hasRequiredRipemd160$1;function requireRipemd160$1(){if(hasRequiredRipemd160$1)return ripemd160$1;hasRequiredRipemd160$1=1;var E=requireDist$1().Buffer,A=requireInherits_browser(),_=requireHashBase$1(),I=new Array(16),B=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],T=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],R=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],P=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],D=[0,1518500249,1859775393,2400959708,2840853838],F=[1352829926,1548603684,1836072691,2053994217,0];function L(){_.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}A(L,_),L.prototype._update=function(){for(var ne=I,ce=0;ce<16;++ce)ne[ce]=this._block.readInt32LE(ce*4);for(var fe=this._a|0,de=this._b|0,pe=this._c|0,ve=this._d|0,ye=this._e|0,_e=this._a|0,be=this._b|0,Te=this._c|0,ue=this._d|0,O=this._e|0,z=0;z<80;z+=1){var Y,te;z<16?(Y=V(fe,de,pe,ve,ye,ne[B[z]],D[0],R[z]),te=ie(_e,be,Te,ue,O,ne[T[z]],F[0],P[z])):z<32?(Y=K(fe,de,pe,ve,ye,ne[B[z]],D[1],R[z]),te=ee(_e,be,Te,ue,O,ne[T[z]],F[1],P[z])):z<48?(Y=J(fe,de,pe,ve,ye,ne[B[z]],D[2],R[z]),te=J(_e,be,Te,ue,O,ne[T[z]],F[2],P[z])):z<64?(Y=ee(fe,de,pe,ve,ye,ne[B[z]],D[3],R[z]),te=K(_e,be,Te,ue,O,ne[T[z]],F[3],P[z])):(Y=ie(fe,de,pe,ve,ye,ne[B[z]],D[4],R[z]),te=V(_e,be,Te,ue,O,ne[T[z]],F[4],P[z])),fe=ye,ye=ve,ve=U(pe,10),pe=de,de=Y,_e=O,O=ue,ue=U(Te,10),Te=be,be=te}var oe=this._b+pe+ue|0;this._b=this._c+ve+O|0,this._c=this._d+ye+_e|0,this._d=this._e+fe+be|0,this._e=this._a+de+Te|0,this._a=oe},L.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var ne=E.alloc?E.alloc(20):new E(20);return ne.writeInt32LE(this._a,0),ne.writeInt32LE(this._b,4),ne.writeInt32LE(this._c,8),ne.writeInt32LE(this._d,12),ne.writeInt32LE(this._e,16),ne};function U(ne,ce){return ne<<ce|ne>>>32-ce}function V(ne,ce,fe,de,pe,ve,ye,_e){return U(ne+(ce^fe^de)+ve+ye|0,_e)+pe|0}function K(ne,ce,fe,de,pe,ve,ye,_e){return U(ne+(ce&fe|~ce&de)+ve+ye|0,_e)+pe|0}function J(ne,ce,fe,de,pe,ve,ye,_e){return U(ne+((ce|~fe)^de)+ve+ye|0,_e)+pe|0}function ee(ne,ce,fe,de,pe,ve,ye,_e){return U(ne+(ce&de|fe&~de)+ve+ye|0,_e)+pe|0}function ie(ne,ce,fe,de,pe,ve,ye,_e){return U(ne+(ce^(fe|~de))+ve+ye|0,_e)+pe|0}return ripemd160$1=L,ripemd160$1}var sha_js={exports:{}},isarray$1,hasRequiredIsarray$1;function requireIsarray$1(){if(hasRequiredIsarray$1)return isarray$1;hasRequiredIsarray$1=1;var E={}.toString;return isarray$1=Array.isArray||function(A){return E.call(A)=="[object Array]"},isarray$1}var typedArrayBuffer,hasRequiredTypedArrayBuffer;function requireTypedArrayBuffer(){if(hasRequiredTypedArrayBuffer)return typedArrayBuffer;hasRequiredTypedArrayBuffer=1;var E=requireType(),A=requireCallBound$1(),_=A("TypedArray.prototype.buffer",!0),I=requireIsTypedArray();return typedArrayBuffer=_||function(T){if(!I(T))throw new E("Not a Typed Array");return T.buffer},typedArrayBuffer}var toBuffer,hasRequiredToBuffer$1;function requireToBuffer$1(){if(hasRequiredToBuffer$1)return toBuffer;hasRequiredToBuffer$1=1;var E=requireSafeBuffer$1().Buffer,A=requireIsarray$1(),_=requireTypedArrayBuffer(),I=ArrayBuffer.isView||function(D){try{return _(D),!0}catch{return!1}},B=typeof Uint8Array<"u",T=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",R=T&&(E.prototype instanceof Uint8Array||E.TYPED_ARRAY_SUPPORT);return toBuffer=function(D,F){if(D instanceof E)return D;if(typeof D=="string")return E.from(D,F);if(T&&I(D)){if(D.byteLength===0)return E.alloc(0);if(R){var L=E.from(D.buffer,D.byteOffset,D.byteLength);if(L.byteLength===D.byteLength)return L}var U=D instanceof Uint8Array?D:new Uint8Array(D.buffer,D.byteOffset,D.byteLength),V=E.from(U);if(V.length===D.byteLength)return V}if(B&&D instanceof Uint8Array)return E.from(D);var K=A(D);if(K)for(var J=0;J<D.length;J+=1){var ee=D[J];if(typeof ee!="number"||ee<0||ee>255||~~ee!==ee)throw new RangeError("Array items must be numbers in the range 0-255.")}if(K||E.isBuffer(D)&&D.constructor&&typeof D.constructor.isBuffer=="function"&&D.constructor.isBuffer(D))return E.from(D);throw new TypeError('The "data" argument must be a string, an Array, a Buffer, a Uint8Array, or a DataView.')},toBuffer}var hash$2,hasRequiredHash$1;function requireHash$1(){if(hasRequiredHash$1)return hash$2;hasRequiredHash$1=1;var E=requireSafeBuffer$1().Buffer,A=requireToBuffer$1();function _(I,B){this._block=E.alloc(I),this._finalSize=B,this._blockSize=I,this._len=0}return _.prototype.update=function(I,B){I=A(I,B||"utf8");for(var T=this._block,R=this._blockSize,P=I.length,D=this._len,F=0;F<P;){for(var L=D%R,U=Math.min(P-F,R-L),V=0;V<U;V++)T[L+V]=I[F+V];D+=U,F+=U,D%R===0&&this._update(T)}return this._len+=P,this},_.prototype.digest=function(I){var B=this._len%this._blockSize;this._block[B]=128,this._block.fill(0,B+1),B>=this._finalSize&&(this._update(this._block),this._block.fill(0));var T=this._len*8;if(T<=4294967295)this._block.writeUInt32BE(T,this._blockSize-4);else{var R=(T&4294967295)>>>0,P=(T-R)/4294967296;this._block.writeUInt32BE(P,this._blockSize-8),this._block.writeUInt32BE(R,this._blockSize-4)}this._update(this._block);var D=this._hash();return I?D.toString(I):D},_.prototype._update=function(){throw new Error("_update must be implemented by subclass")},hash$2=_,hash$2}var sha$1,hasRequiredSha$1;function requireSha$1(){if(hasRequiredSha$1)return sha$1;hasRequiredSha$1=1;var E=requireInherits_browser(),A=requireHash$1(),_=requireSafeBuffer$1().Buffer,I=[1518500249,1859775393,-1894007588,-899497514],B=new Array(80);function T(){this.init(),this._w=B,A.call(this,64,56)}E(T,A),T.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function R(F){return F<<5|F>>>27}function P(F){return F<<30|F>>>2}function D(F,L,U,V){return F===0?L&U|~L&V:F===2?L&U|L&V|U&V:L^U^V}return T.prototype._update=function(F){for(var L=this._w,U=this._a|0,V=this._b|0,K=this._c|0,J=this._d|0,ee=this._e|0,ie=0;ie<16;++ie)L[ie]=F.readInt32BE(ie*4);for(;ie<80;++ie)L[ie]=L[ie-3]^L[ie-8]^L[ie-14]^L[ie-16];for(var ne=0;ne<80;++ne){var ce=~~(ne/20),fe=R(U)+D(ce,V,K,J)+ee+L[ne]+I[ce]|0;ee=J,J=K,K=P(V),V=U,U=fe}this._a=U+this._a|0,this._b=V+this._b|0,this._c=K+this._c|0,this._d=J+this._d|0,this._e=ee+this._e|0},T.prototype._hash=function(){var F=_.allocUnsafe(20);return F.writeInt32BE(this._a|0,0),F.writeInt32BE(this._b|0,4),F.writeInt32BE(this._c|0,8),F.writeInt32BE(this._d|0,12),F.writeInt32BE(this._e|0,16),F},sha$1=T,sha$1}var sha1,hasRequiredSha1;function requireSha1(){if(hasRequiredSha1)return sha1;hasRequiredSha1=1;var E=requireInherits_browser(),A=requireHash$1(),_=requireSafeBuffer$1().Buffer,I=[1518500249,1859775393,-1894007588,-899497514],B=new Array(80);function T(){this.init(),this._w=B,A.call(this,64,56)}E(T,A),T.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function R(L){return L<<1|L>>>31}function P(L){return L<<5|L>>>27}function D(L){return L<<30|L>>>2}function F(L,U,V,K){return L===0?U&V|~U&K:L===2?U&V|U&K|V&K:U^V^K}return T.prototype._update=function(L){for(var U=this._w,V=this._a|0,K=this._b|0,J=this._c|0,ee=this._d|0,ie=this._e|0,ne=0;ne<16;++ne)U[ne]=L.readInt32BE(ne*4);for(;ne<80;++ne)U[ne]=R(U[ne-3]^U[ne-8]^U[ne-14]^U[ne-16]);for(var ce=0;ce<80;++ce){var fe=~~(ce/20),de=P(V)+F(fe,K,J,ee)+ie+U[ce]+I[fe]|0;ie=ee,ee=J,J=D(K),K=V,V=de}this._a=V+this._a|0,this._b=K+this._b|0,this._c=J+this._c|0,this._d=ee+this._d|0,this._e=ie+this._e|0},T.prototype._hash=function(){var L=_.allocUnsafe(20);return L.writeInt32BE(this._a|0,0),L.writeInt32BE(this._b|0,4),L.writeInt32BE(this._c|0,8),L.writeInt32BE(this._d|0,12),L.writeInt32BE(this._e|0,16),L},sha1=T,sha1}var sha256$1,hasRequiredSha256;function requireSha256(){if(hasRequiredSha256)return sha256$1;hasRequiredSha256=1;var E=requireInherits_browser(),A=requireHash$1(),_=requireSafeBuffer$1().Buffer,I=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],B=new Array(64);function T(){this.init(),this._w=B,A.call(this,64,56)}E(T,A),T.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function R(V,K,J){return J^V&(K^J)}function P(V,K,J){return V&K|J&(V|K)}function D(V){return(V>>>2|V<<30)^(V>>>13|V<<19)^(V>>>22|V<<10)}function F(V){return(V>>>6|V<<26)^(V>>>11|V<<21)^(V>>>25|V<<7)}function L(V){return(V>>>7|V<<25)^(V>>>18|V<<14)^V>>>3}function U(V){return(V>>>17|V<<15)^(V>>>19|V<<13)^V>>>10}return T.prototype._update=function(V){for(var K=this._w,J=this._a|0,ee=this._b|0,ie=this._c|0,ne=this._d|0,ce=this._e|0,fe=this._f|0,de=this._g|0,pe=this._h|0,ve=0;ve<16;++ve)K[ve]=V.readInt32BE(ve*4);for(;ve<64;++ve)K[ve]=U(K[ve-2])+K[ve-7]+L(K[ve-15])+K[ve-16]|0;for(var ye=0;ye<64;++ye){var _e=pe+F(ce)+R(ce,fe,de)+I[ye]+K[ye]|0,be=D(J)+P(J,ee,ie)|0;pe=de,de=fe,fe=ce,ce=ne+_e|0,ne=ie,ie=ee,ee=J,J=_e+be|0}this._a=J+this._a|0,this._b=ee+this._b|0,this._c=ie+this._c|0,this._d=ne+this._d|0,this._e=ce+this._e|0,this._f=fe+this._f|0,this._g=de+this._g|0,this._h=pe+this._h|0},T.prototype._hash=function(){var V=_.allocUnsafe(32);return V.writeInt32BE(this._a,0),V.writeInt32BE(this._b,4),V.writeInt32BE(this._c,8),V.writeInt32BE(this._d,12),V.writeInt32BE(this._e,16),V.writeInt32BE(this._f,20),V.writeInt32BE(this._g,24),V.writeInt32BE(this._h,28),V},sha256$1=T,sha256$1}var sha224$1,hasRequiredSha224;function requireSha224(){if(hasRequiredSha224)return sha224$1;hasRequiredSha224=1;var E=requireInherits_browser(),A=requireSha256(),_=requireHash$1(),I=requireSafeBuffer$1().Buffer,B=new Array(64);function T(){this.init(),this._w=B,_.call(this,64,56)}return E(T,A),T.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},T.prototype._hash=function(){var R=I.allocUnsafe(28);return R.writeInt32BE(this._a,0),R.writeInt32BE(this._b,4),R.writeInt32BE(this._c,8),R.writeInt32BE(this._d,12),R.writeInt32BE(this._e,16),R.writeInt32BE(this._f,20),R.writeInt32BE(this._g,24),R},sha224$1=T,sha224$1}var sha512$1,hasRequiredSha512;function requireSha512(){if(hasRequiredSha512)return sha512$1;hasRequiredSha512=1;var E=requireInherits_browser(),A=requireHash$1(),_=requireSafeBuffer$1().Buffer,I=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],B=new Array(160);function T(){this.init(),this._w=B,A.call(this,128,112)}E(T,A),T.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function R(ee,ie,ne){return ne^ee&(ie^ne)}function P(ee,ie,ne){return ee&ie|ne&(ee|ie)}function D(ee,ie){return(ee>>>28|ie<<4)^(ie>>>2|ee<<30)^(ie>>>7|ee<<25)}function F(ee,ie){return(ee>>>14|ie<<18)^(ee>>>18|ie<<14)^(ie>>>9|ee<<23)}function L(ee,ie){return(ee>>>1|ie<<31)^(ee>>>8|ie<<24)^ee>>>7}function U(ee,ie){return(ee>>>1|ie<<31)^(ee>>>8|ie<<24)^(ee>>>7|ie<<25)}function V(ee,ie){return(ee>>>19|ie<<13)^(ie>>>29|ee<<3)^ee>>>6}function K(ee,ie){return(ee>>>19|ie<<13)^(ie>>>29|ee<<3)^(ee>>>6|ie<<26)}function J(ee,ie){return ee>>>0<ie>>>0?1:0}return T.prototype._update=function(ee){for(var ie=this._w,ne=this._ah|0,ce=this._bh|0,fe=this._ch|0,de=this._dh|0,pe=this._eh|0,ve=this._fh|0,ye=this._gh|0,_e=this._hh|0,be=this._al|0,Te=this._bl|0,ue=this._cl|0,O=this._dl|0,z=this._el|0,Y=this._fl|0,te=this._gl|0,oe=this._hl|0,le=0;le<32;le+=2)ie[le]=ee.readInt32BE(le*4),ie[le+1]=ee.readInt32BE(le*4+4);for(;le<160;le+=2){var he=ie[le-30],ae=ie[le-30+1],Q=L(he,ae),se=U(ae,he);he=ie[le-4],ae=ie[le-4+1];var Ae=V(he,ae),ge=K(ae,he),Ee=ie[le-14],ke=ie[le-14+1],Se=ie[le-32],Ie=ie[le-32+1],we=se+ke|0,xe=Q+Ee+J(we,se)|0;we=we+ge|0,xe=xe+Ae+J(we,ge)|0,we=we+Ie|0,xe=xe+Se+J(we,Ie)|0,ie[le]=xe,ie[le+1]=we}for(var Fe=0;Fe<160;Fe+=2){xe=ie[Fe],we=ie[Fe+1];var Ge=P(ne,ce,fe),Oe=P(be,Te,ue),et=D(ne,be),Mt=D(be,ne),dt=F(pe,z),mt=F(z,pe),Ut=I[Fe],St=I[Fe+1],vt=R(pe,ve,ye),It=R(z,Y,te),yt=oe+mt|0,Tt=_e+dt+J(yt,oe)|0;yt=yt+It|0,Tt=Tt+vt+J(yt,It)|0,yt=yt+St|0,Tt=Tt+Ut+J(yt,St)|0,yt=yt+we|0,Tt=Tt+xe+J(yt,we)|0;var Wt=Mt+Oe|0,ft=et+Ge+J(Wt,Mt)|0;_e=ye,oe=te,ye=ve,te=Y,ve=pe,Y=z,z=O+yt|0,pe=de+Tt+J(z,O)|0,de=fe,O=ue,fe=ce,ue=Te,ce=ne,Te=be,be=yt+Wt|0,ne=Tt+ft+J(be,yt)|0}this._al=this._al+be|0,this._bl=this._bl+Te|0,this._cl=this._cl+ue|0,this._dl=this._dl+O|0,this._el=this._el+z|0,this._fl=this._fl+Y|0,this._gl=this._gl+te|0,this._hl=this._hl+oe|0,this._ah=this._ah+ne+J(this._al,be)|0,this._bh=this._bh+ce+J(this._bl,Te)|0,this._ch=this._ch+fe+J(this._cl,ue)|0,this._dh=this._dh+de+J(this._dl,O)|0,this._eh=this._eh+pe+J(this._el,z)|0,this._fh=this._fh+ve+J(this._fl,Y)|0,this._gh=this._gh+ye+J(this._gl,te)|0,this._hh=this._hh+_e+J(this._hl,oe)|0},T.prototype._hash=function(){var ee=_.allocUnsafe(64);function ie(ne,ce,fe){ee.writeInt32BE(ne,fe),ee.writeInt32BE(ce,fe+4)}return ie(this._ah,this._al,0),ie(this._bh,this._bl,8),ie(this._ch,this._cl,16),ie(this._dh,this._dl,24),ie(this._eh,this._el,32),ie(this._fh,this._fl,40),ie(this._gh,this._gl,48),ie(this._hh,this._hl,56),ee},sha512$1=T,sha512$1}var sha384$1,hasRequiredSha384;function requireSha384(){if(hasRequiredSha384)return sha384$1;hasRequiredSha384=1;var E=requireInherits_browser(),A=requireSha512(),_=requireHash$1(),I=requireSafeBuffer$1().Buffer,B=new Array(160);function T(){this.init(),this._w=B,_.call(this,128,112)}return E(T,A),T.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},T.prototype._hash=function(){var R=I.allocUnsafe(48);function P(D,F,L){R.writeInt32BE(D,L),R.writeInt32BE(F,L+4)}return P(this._ah,this._al,0),P(this._bh,this._bl,8),P(this._ch,this._cl,16),P(this._dh,this._dl,24),P(this._eh,this._el,32),P(this._fh,this._fl,40),R},sha384$1=T,sha384$1}var hasRequiredSha_js;function requireSha_js(){return hasRequiredSha_js||(hasRequiredSha_js=1,(function(E){E.exports=function(_){var I=_.toLowerCase(),B=E.exports[I];if(!B)throw new Error(I+" is not supported (we accept pull requests)");return new B},E.exports.sha=requireSha$1(),E.exports.sha1=requireSha1(),E.exports.sha224=requireSha224(),E.exports.sha256=requireSha256(),E.exports.sha384=requireSha384(),E.exports.sha512=requireSha512()})(sha_js)),sha_js.exports}var cipherBase,hasRequiredCipherBase;function requireCipherBase(){if(hasRequiredCipherBase)return cipherBase;hasRequiredCipherBase=1;var E=requireSafeBuffer$1().Buffer,A=requireStreamBrowserify().Transform,_=requireString_decoder().StringDecoder,I=requireInherits_browser();function B(D){A.call(this),this.hashMode=typeof D=="string",this.hashMode?this[D]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}I(B,A);var T=typeof Uint8Array<"u",R=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&ArrayBuffer.isView&&(E.prototype instanceof Uint8Array||E.TYPED_ARRAY_SUPPORT);function P(D,F){if(D instanceof E)return D;if(typeof D=="string")return E.from(D,F);if(R&&ArrayBuffer.isView(D)){if(D.byteLength===0)return E.alloc(0);var L=E.from(D.buffer,D.byteOffset,D.byteLength);if(L.byteLength===D.byteLength)return L}if(T&&D instanceof Uint8Array||E.isBuffer(D)&&D.constructor&&typeof D.constructor.isBuffer=="function"&&D.constructor.isBuffer(D))return E.from(D);throw new TypeError('The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView.')}return B.prototype.update=function(D,F,L){var U=P(D,F),V=this._update(U);return this.hashMode?this:(L&&(V=this._toString(V,L)),V)},B.prototype.setAutoPadding=function(){},B.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},B.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},B.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},B.prototype._transform=function(D,F,L){var U;try{this.hashMode?this._update(D):this.push(this._update(D))}catch(V){U=V}finally{L(U)}},B.prototype._flush=function(D){var F;try{this.push(this.__final())}catch(L){F=L}D(F)},B.prototype._finalOrDigest=function(D){var F=this.__final()||E.alloc(0);return D&&(F=this._toString(F,D,!0)),F},B.prototype._toString=function(D,F,L){if(this._decoder||(this._decoder=new _(F),this._encoding=F),this._encoding!==F)throw new Error("cant switch encodings");var U=this._decoder.write(D);return L&&(U+=this._decoder.end()),U},cipherBase=B,cipherBase}var browser$c,hasRequiredBrowser$c;function requireBrowser$c(){if(hasRequiredBrowser$c)return browser$c;hasRequiredBrowser$c=1;var E=requireInherits_browser(),A=requireMd5_js(),_=requireRipemd160$1(),I=requireSha_js(),B=requireCipherBase();function T(R){B.call(this,"digest"),this._hash=R}return E(T,B),T.prototype._update=function(R){this._hash.update(R)},T.prototype._final=function(){return this._hash.digest()},browser$c=function(P){return P=P.toLowerCase(),P==="md5"?new A:P==="rmd160"||P==="ripemd160"?new _:new T(I(P))},browser$c}var legacy,hasRequiredLegacy;function requireLegacy(){if(hasRequiredLegacy)return legacy;hasRequiredLegacy=1;var E=requireInherits_browser(),A=requireSafeBuffer$1().Buffer,_=requireCipherBase(),I=A.alloc(128),B=64;function T(R,P){_.call(this,"digest"),typeof P=="string"&&(P=A.from(P)),this._alg=R,this._key=P,P.length>B?P=R(P):P.length<B&&(P=A.concat([P,I],B));for(var D=this._ipad=A.allocUnsafe(B),F=this._opad=A.allocUnsafe(B),L=0;L<B;L++)D[L]=P[L]^54,F[L]=P[L]^92;this._hash=[D]}return E(T,_),T.prototype._update=function(R){this._hash.push(R)},T.prototype._final=function(){var R=this._alg(A.concat(this._hash));return this._alg(A.concat([this._opad,R]))},legacy=T,legacy}var md5$3,hasRequiredMd5$2;function requireMd5$2(){if(hasRequiredMd5$2)return md5$3;hasRequiredMd5$2=1;var E=requireMd5_js();return md5$3=function(A){return new E().update(A).digest()},md5$3}var browser$b,hasRequiredBrowser$b;function requireBrowser$b(){if(hasRequiredBrowser$b)return browser$b;hasRequiredBrowser$b=1;var E=requireInherits_browser(),A=requireLegacy(),_=requireCipherBase(),I=requireSafeBuffer$1().Buffer,B=requireMd5$2(),T=requireRipemd160$1(),R=requireSha_js(),P=I.alloc(128);function D(F,L){_.call(this,"digest"),typeof L=="string"&&(L=I.from(L));var U=F==="sha512"||F==="sha384"?128:64;if(this._alg=F,this._key=L,L.length>U){var V=F==="rmd160"?new T:R(F);L=V.update(L).digest()}else L.length<U&&(L=I.concat([L,P],U));for(var K=this._ipad=I.allocUnsafe(U),J=this._opad=I.allocUnsafe(U),ee=0;ee<U;ee++)K[ee]=L[ee]^54,J[ee]=L[ee]^92;this._hash=F==="rmd160"?new T:R(F),this._hash.update(K)}return E(D,_),D.prototype._update=function(F){this._hash.update(F)},D.prototype._final=function(){var F=this._hash.digest(),L=this._alg==="rmd160"?new T:R(this._alg);return L.update(this._opad).update(F).digest()},browser$b=function(L,U){return L=L.toLowerCase(),L==="rmd160"||L==="ripemd160"?new D("rmd160",U):L==="md5"?new A(B,U):new D(L,U)},browser$b}const sha224WithRSAEncryption={sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption={sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption={sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption={sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},sha256={sign:"ecdsa",hash:"sha256",id:""},sha224={sign:"ecdsa",hash:"sha224",id:""},sha384={sign:"ecdsa",hash:"sha384",id:""},sha512={sign:"ecdsa",hash:"sha512",id:""},DSA={sign:"dsa",hash:"sha1",id:""},ripemd160WithRSA={sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption={sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},require$$6$1={sha224WithRSAEncryption,"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption,"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption,"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption,"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256,sha224,sha384,sha512,"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA,"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA,"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption,"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}};var algos,hasRequiredAlgos;function requireAlgos(){return hasRequiredAlgos||(hasRequiredAlgos=1,algos=require$$6$1),algos}var browser$a={},precondition,hasRequiredPrecondition;function requirePrecondition(){if(hasRequiredPrecondition)return precondition;hasRequiredPrecondition=1;var E=Math.pow(2,30)-1;return precondition=function(A,_){if(typeof A!="number")throw new TypeError("Iterations not a number");if(A<0)throw new TypeError("Bad iterations");if(typeof _!="number")throw new TypeError("Key length not a number");if(_<0||_>E||_!==_)throw new TypeError("Bad key length")},precondition}var defaultEncoding_1,hasRequiredDefaultEncoding;function requireDefaultEncoding(){if(hasRequiredDefaultEncoding)return defaultEncoding_1;hasRequiredDefaultEncoding=1;var E;if(commonjsGlobal.process&&commonjsGlobal.process.browser)E="utf-8";else if(commonjsGlobal.process&&commonjsGlobal.process.version){var A=parseInt(process$1.version.split(".")[0].slice(1),10);E=A>=6?"utf-8":"binary"}else E="utf-8";return defaultEncoding_1=E,defaultEncoding_1}var makeHash,hasRequiredMakeHash;function requireMakeHash(){if(hasRequiredMakeHash)return makeHash;hasRequiredMakeHash=1;var E=4,A=new Buffer$1(E);A.fill(0);var _=8,I=16;function B(T){if(T.length%E!==0){var R=T.length+(E-T.length%E);T=Buffer$1.concat([T,A],R)}for(var P=new Array(T.length>>>2),D=0,F=0;D<T.length;D+=E,F++)P[F]=T.readInt32LE(D);return P}return makeHash=function(R,P){var D=P(B(R),R.length*_);R=new Buffer$1(I);for(var F=0;F<D.length;F++)R.writeInt32LE(D[F],F<<2,!0);return R},makeHash}var md5$2,hasRequiredMd5$1;function requireMd5$1(){if(hasRequiredMd5$1)return md5$2;hasRequiredMd5$1=1;var E=requireMakeHash();function A(F,L){F[L>>5]|=128<<L%32,F[(L+64>>>9<<4)+14]=L;for(var U=1732584193,V=-271733879,K=-1732584194,J=271733878,ee=0;ee<F.length;ee+=16){var ie=U,ne=V,ce=K,fe=J;U=I(U,V,K,J,F[ee+0],7,-680876936),J=I(J,U,V,K,F[ee+1],12,-389564586),K=I(K,J,U,V,F[ee+2],17,606105819),V=I(V,K,J,U,F[ee+3],22,-1044525330),U=I(U,V,K,J,F[ee+4],7,-176418897),J=I(J,U,V,K,F[ee+5],12,1200080426),K=I(K,J,U,V,F[ee+6],17,-1473231341),V=I(V,K,J,U,F[ee+7],22,-45705983),U=I(U,V,K,J,F[ee+8],7,1770035416),J=I(J,U,V,K,F[ee+9],12,-1958414417),K=I(K,J,U,V,F[ee+10],17,-42063),V=I(V,K,J,U,F[ee+11],22,-1990404162),U=I(U,V,K,J,F[ee+12],7,1804603682),J=I(J,U,V,K,F[ee+13],12,-40341101),K=I(K,J,U,V,F[ee+14],17,-1502002290),V=I(V,K,J,U,F[ee+15],22,1236535329),U=B(U,V,K,J,F[ee+1],5,-165796510),J=B(J,U,V,K,F[ee+6],9,-1069501632),K=B(K,J,U,V,F[ee+11],14,643717713),V=B(V,K,J,U,F[ee+0],20,-373897302),U=B(U,V,K,J,F[ee+5],5,-701558691),J=B(J,U,V,K,F[ee+10],9,38016083),K=B(K,J,U,V,F[ee+15],14,-660478335),V=B(V,K,J,U,F[ee+4],20,-405537848),U=B(U,V,K,J,F[ee+9],5,568446438),J=B(J,U,V,K,F[ee+14],9,-1019803690),K=B(K,J,U,V,F[ee+3],14,-187363961),V=B(V,K,J,U,F[ee+8],20,1163531501),U=B(U,V,K,J,F[ee+13],5,-1444681467),J=B(J,U,V,K,F[ee+2],9,-51403784),K=B(K,J,U,V,F[ee+7],14,1735328473),V=B(V,K,J,U,F[ee+12],20,-1926607734),U=T(U,V,K,J,F[ee+5],4,-378558),J=T(J,U,V,K,F[ee+8],11,-2022574463),K=T(K,J,U,V,F[ee+11],16,1839030562),V=T(V,K,J,U,F[ee+14],23,-35309556),U=T(U,V,K,J,F[ee+1],4,-1530992060),J=T(J,U,V,K,F[ee+4],11,1272893353),K=T(K,J,U,V,F[ee+7],16,-155497632),V=T(V,K,J,U,F[ee+10],23,-1094730640),U=T(U,V,K,J,F[ee+13],4,681279174),J=T(J,U,V,K,F[ee+0],11,-358537222),K=T(K,J,U,V,F[ee+3],16,-722521979),V=T(V,K,J,U,F[ee+6],23,76029189),U=T(U,V,K,J,F[ee+9],4,-640364487),J=T(J,U,V,K,F[ee+12],11,-421815835),K=T(K,J,U,V,F[ee+15],16,530742520),V=T(V,K,J,U,F[ee+2],23,-995338651),U=R(U,V,K,J,F[ee+0],6,-198630844),J=R(J,U,V,K,F[ee+7],10,1126891415),K=R(K,J,U,V,F[ee+14],15,-1416354905),V=R(V,K,J,U,F[ee+5],21,-57434055),U=R(U,V,K,J,F[ee+12],6,1700485571),J=R(J,U,V,K,F[ee+3],10,-1894986606),K=R(K,J,U,V,F[ee+10],15,-1051523),V=R(V,K,J,U,F[ee+1],21,-2054922799),U=R(U,V,K,J,F[ee+8],6,1873313359),J=R(J,U,V,K,F[ee+15],10,-30611744),K=R(K,J,U,V,F[ee+6],15,-1560198380),V=R(V,K,J,U,F[ee+13],21,1309151649),U=R(U,V,K,J,F[ee+4],6,-145523070),J=R(J,U,V,K,F[ee+11],10,-1120210379),K=R(K,J,U,V,F[ee+2],15,718787259),V=R(V,K,J,U,F[ee+9],21,-343485551),U=P(U,ie),V=P(V,ne),K=P(K,ce),J=P(J,fe)}return[U,V,K,J]}function _(F,L,U,V,K,J){return P(D(P(P(L,F),P(V,J)),K),U)}function I(F,L,U,V,K,J,ee){return _(L&U|~L&V,F,L,K,J,ee)}function B(F,L,U,V,K,J,ee){return _(L&V|U&~V,F,L,K,J,ee)}function T(F,L,U,V,K,J,ee){return _(L^U^V,F,L,K,J,ee)}function R(F,L,U,V,K,J,ee){return _(U^(L|~V),F,L,K,J,ee)}function P(F,L){var U=(F&65535)+(L&65535),V=(F>>16)+(L>>16)+(U>>16);return V<<16|U&65535}function D(F,L){return F<<L|F>>>32-L}return md5$2=function(L){return E(L,A)},md5$2}var hashBase,hasRequiredHashBase;function requireHashBase(){if(hasRequiredHashBase)return hashBase;hasRequiredHashBase=1;var E=requireStreamBrowserify().Transform,A=requireInherits_browser();function _(I){E.call(this),this._block=new Buffer$1(I),this._blockSize=I,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}return A(_,E),_.prototype._transform=function(I,B,T){var R=null;try{B!=="buffer"&&(I=new Buffer$1(I,B)),this.update(I)}catch(P){R=P}T(R)},_.prototype._flush=function(I){var B=null;try{this.push(this._digest())}catch(T){B=T}I(B)},_.prototype.update=function(I,B){if(!Buffer$1.isBuffer(I)&&typeof I!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");Buffer$1.isBuffer(I)||(I=new Buffer$1(I,B||"binary"));for(var T=this._block,R=0;this._blockOffset+I.length-R>=this._blockSize;){for(var P=this._blockOffset;P<this._blockSize;)T[P++]=I[R++];this._update(),this._blockOffset=0}for(;R<I.length;)T[this._blockOffset++]=I[R++];for(var D=0,F=I.length*8;F>0;++D)this._length[D]+=F,F=this._length[D]/4294967296|0,F>0&&(this._length[D]-=4294967296*F);return this},_.prototype._update=function(I){throw new Error("_update is not implemented")},_.prototype.digest=function(I){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var B=this._digest();return I!==void 0&&(B=B.toString(I)),B},_.prototype._digest=function(){throw new Error("_digest is not implemented")},hashBase=_,hashBase}var ripemd160,hasRequiredRipemd160;function requireRipemd160(){if(hasRequiredRipemd160)return ripemd160;hasRequiredRipemd160=1;var E=requireInherits_browser(),A=requireHashBase();function _(){A.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}E(_,A),_.prototype._update=function(){for(var F=new Array(16),L=0;L<16;++L)F[L]=this._block.readInt32LE(L*4);var U=this._a,V=this._b,K=this._c,J=this._d,ee=this._e;U=B(U,V,K,J,ee,F[0],0,11),K=I(K,10),ee=B(ee,U,V,K,J,F[1],0,14),V=I(V,10),J=B(J,ee,U,V,K,F[2],0,15),U=I(U,10),K=B(K,J,ee,U,V,F[3],0,12),ee=I(ee,10),V=B(V,K,J,ee,U,F[4],0,5),J=I(J,10),U=B(U,V,K,J,ee,F[5],0,8),K=I(K,10),ee=B(ee,U,V,K,J,F[6],0,7),V=I(V,10),J=B(J,ee,U,V,K,F[7],0,9),U=I(U,10),K=B(K,J,ee,U,V,F[8],0,11),ee=I(ee,10),V=B(V,K,J,ee,U,F[9],0,13),J=I(J,10),U=B(U,V,K,J,ee,F[10],0,14),K=I(K,10),ee=B(ee,U,V,K,J,F[11],0,15),V=I(V,10),J=B(J,ee,U,V,K,F[12],0,6),U=I(U,10),K=B(K,J,ee,U,V,F[13],0,7),ee=I(ee,10),V=B(V,K,J,ee,U,F[14],0,9),J=I(J,10),U=B(U,V,K,J,ee,F[15],0,8),K=I(K,10),ee=T(ee,U,V,K,J,F[7],1518500249,7),V=I(V,10),J=T(J,ee,U,V,K,F[4],1518500249,6),U=I(U,10),K=T(K,J,ee,U,V,F[13],1518500249,8),ee=I(ee,10),V=T(V,K,J,ee,U,F[1],1518500249,13),J=I(J,10),U=T(U,V,K,J,ee,F[10],1518500249,11),K=I(K,10),ee=T(ee,U,V,K,J,F[6],1518500249,9),V=I(V,10),J=T(J,ee,U,V,K,F[15],1518500249,7),U=I(U,10),K=T(K,J,ee,U,V,F[3],1518500249,15),ee=I(ee,10),V=T(V,K,J,ee,U,F[12],1518500249,7),J=I(J,10),U=T(U,V,K,J,ee,F[0],1518500249,12),K=I(K,10),ee=T(ee,U,V,K,J,F[9],1518500249,15),V=I(V,10),J=T(J,ee,U,V,K,F[5],1518500249,9),U=I(U,10),K=T(K,J,ee,U,V,F[2],1518500249,11),ee=I(ee,10),V=T(V,K,J,ee,U,F[14],1518500249,7),J=I(J,10),U=T(U,V,K,J,ee,F[11],1518500249,13),K=I(K,10),ee=T(ee,U,V,K,J,F[8],1518500249,12),V=I(V,10),J=R(J,ee,U,V,K,F[3],1859775393,11),U=I(U,10),K=R(K,J,ee,U,V,F[10],1859775393,13),ee=I(ee,10),V=R(V,K,J,ee,U,F[14],1859775393,6),J=I(J,10),U=R(U,V,K,J,ee,F[4],1859775393,7),K=I(K,10),ee=R(ee,U,V,K,J,F[9],1859775393,14),V=I(V,10),J=R(J,ee,U,V,K,F[15],1859775393,9),U=I(U,10),K=R(K,J,ee,U,V,F[8],1859775393,13),ee=I(ee,10),V=R(V,K,J,ee,U,F[1],1859775393,15),J=I(J,10),U=R(U,V,K,J,ee,F[2],1859775393,14),K=I(K,10),ee=R(ee,U,V,K,J,F[7],1859775393,8),V=I(V,10),J=R(J,ee,U,V,K,F[0],1859775393,13),U=I(U,10),K=R(K,J,ee,U,V,F[6],1859775393,6),ee=I(ee,10),V=R(V,K,J,ee,U,F[13],1859775393,5),J=I(J,10),U=R(U,V,K,J,ee,F[11],1859775393,12),K=I(K,10),ee=R(ee,U,V,K,J,F[5],1859775393,7),V=I(V,10),J=R(J,ee,U,V,K,F[12],1859775393,5),U=I(U,10),K=P(K,J,ee,U,V,F[1],2400959708,11),ee=I(ee,10),V=P(V,K,J,ee,U,F[9],2400959708,12),J=I(J,10),U=P(U,V,K,J,ee,F[11],2400959708,14),K=I(K,10),ee=P(ee,U,V,K,J,F[10],2400959708,15),V=I(V,10),J=P(J,ee,U,V,K,F[0],2400959708,14),U=I(U,10),K=P(K,J,ee,U,V,F[8],2400959708,15),ee=I(ee,10),V=P(V,K,J,ee,U,F[12],2400959708,9),J=I(J,10),U=P(U,V,K,J,ee,F[4],2400959708,8),K=I(K,10),ee=P(ee,U,V,K,J,F[13],2400959708,9),V=I(V,10),J=P(J,ee,U,V,K,F[3],2400959708,14),U=I(U,10),K=P(K,J,ee,U,V,F[7],2400959708,5),ee=I(ee,10),V=P(V,K,J,ee,U,F[15],2400959708,6),J=I(J,10),U=P(U,V,K,J,ee,F[14],2400959708,8),K=I(K,10),ee=P(ee,U,V,K,J,F[5],2400959708,6),V=I(V,10),J=P(J,ee,U,V,K,F[6],2400959708,5),U=I(U,10),K=P(K,J,ee,U,V,F[2],2400959708,12),ee=I(ee,10),V=D(V,K,J,ee,U,F[4],2840853838,9),J=I(J,10),U=D(U,V,K,J,ee,F[0],2840853838,15),K=I(K,10),ee=D(ee,U,V,K,J,F[5],2840853838,5),V=I(V,10),J=D(J,ee,U,V,K,F[9],2840853838,11),U=I(U,10),K=D(K,J,ee,U,V,F[7],2840853838,6),ee=I(ee,10),V=D(V,K,J,ee,U,F[12],2840853838,8),J=I(J,10),U=D(U,V,K,J,ee,F[2],2840853838,13),K=I(K,10),ee=D(ee,U,V,K,J,F[10],2840853838,12),V=I(V,10),J=D(J,ee,U,V,K,F[14],2840853838,5),U=I(U,10),K=D(K,J,ee,U,V,F[1],2840853838,12),ee=I(ee,10),V=D(V,K,J,ee,U,F[3],2840853838,13),J=I(J,10),U=D(U,V,K,J,ee,F[8],2840853838,14),K=I(K,10),ee=D(ee,U,V,K,J,F[11],2840853838,11),V=I(V,10),J=D(J,ee,U,V,K,F[6],2840853838,8),U=I(U,10),K=D(K,J,ee,U,V,F[15],2840853838,5),ee=I(ee,10),V=D(V,K,J,ee,U,F[13],2840853838,6),J=I(J,10);var ie=this._a,ne=this._b,ce=this._c,fe=this._d,de=this._e;ie=D(ie,ne,ce,fe,de,F[5],1352829926,8),ce=I(ce,10),de=D(de,ie,ne,ce,fe,F[14],1352829926,9),ne=I(ne,10),fe=D(fe,de,ie,ne,ce,F[7],1352829926,9),ie=I(ie,10),ce=D(ce,fe,de,ie,ne,F[0],1352829926,11),de=I(de,10),ne=D(ne,ce,fe,de,ie,F[9],1352829926,13),fe=I(fe,10),ie=D(ie,ne,ce,fe,de,F[2],1352829926,15),ce=I(ce,10),de=D(de,ie,ne,ce,fe,F[11],1352829926,15),ne=I(ne,10),fe=D(fe,de,ie,ne,ce,F[4],1352829926,5),ie=I(ie,10),ce=D(ce,fe,de,ie,ne,F[13],1352829926,7),de=I(de,10),ne=D(ne,ce,fe,de,ie,F[6],1352829926,7),fe=I(fe,10),ie=D(ie,ne,ce,fe,de,F[15],1352829926,8),ce=I(ce,10),de=D(de,ie,ne,ce,fe,F[8],1352829926,11),ne=I(ne,10),fe=D(fe,de,ie,ne,ce,F[1],1352829926,14),ie=I(ie,10),ce=D(ce,fe,de,ie,ne,F[10],1352829926,14),de=I(de,10),ne=D(ne,ce,fe,de,ie,F[3],1352829926,12),fe=I(fe,10),ie=D(ie,ne,ce,fe,de,F[12],1352829926,6),ce=I(ce,10),de=P(de,ie,ne,ce,fe,F[6],1548603684,9),ne=I(ne,10),fe=P(fe,de,ie,ne,ce,F[11],1548603684,13),ie=I(ie,10),ce=P(ce,fe,de,ie,ne,F[3],1548603684,15),de=I(de,10),ne=P(ne,ce,fe,de,ie,F[7],1548603684,7),fe=I(fe,10),ie=P(ie,ne,ce,fe,de,F[0],1548603684,12),ce=I(ce,10),de=P(de,ie,ne,ce,fe,F[13],1548603684,8),ne=I(ne,10),fe=P(fe,de,ie,ne,ce,F[5],1548603684,9),ie=I(ie,10),ce=P(ce,fe,de,ie,ne,F[10],1548603684,11),de=I(de,10),ne=P(ne,ce,fe,de,ie,F[14],1548603684,7),fe=I(fe,10),ie=P(ie,ne,ce,fe,de,F[15],1548603684,7),ce=I(ce,10),de=P(de,ie,ne,ce,fe,F[8],1548603684,12),ne=I(ne,10),fe=P(fe,de,ie,ne,ce,F[12],1548603684,7),ie=I(ie,10),ce=P(ce,fe,de,ie,ne,F[4],1548603684,6),de=I(de,10),ne=P(ne,ce,fe,de,ie,F[9],1548603684,15),fe=I(fe,10),ie=P(ie,ne,ce,fe,de,F[1],1548603684,13),ce=I(ce,10),de=P(de,ie,ne,ce,fe,F[2],1548603684,11),ne=I(ne,10),fe=R(fe,de,ie,ne,ce,F[15],1836072691,9),ie=I(ie,10),ce=R(ce,fe,de,ie,ne,F[5],1836072691,7),de=I(de,10),ne=R(ne,ce,fe,de,ie,F[1],1836072691,15),fe=I(fe,10),ie=R(ie,ne,ce,fe,de,F[3],1836072691,11),ce=I(ce,10),de=R(de,ie,ne,ce,fe,F[7],1836072691,8),ne=I(ne,10),fe=R(fe,de,ie,ne,ce,F[14],1836072691,6),ie=I(ie,10),ce=R(ce,fe,de,ie,ne,F[6],1836072691,6),de=I(de,10),ne=R(ne,ce,fe,de,ie,F[9],1836072691,14),fe=I(fe,10),ie=R(ie,ne,ce,fe,de,F[11],1836072691,12),ce=I(ce,10),de=R(de,ie,ne,ce,fe,F[8],1836072691,13),ne=I(ne,10),fe=R(fe,de,ie,ne,ce,F[12],1836072691,5),ie=I(ie,10),ce=R(ce,fe,de,ie,ne,F[2],1836072691,14),de=I(de,10),ne=R(ne,ce,fe,de,ie,F[10],1836072691,13),fe=I(fe,10),ie=R(ie,ne,ce,fe,de,F[0],1836072691,13),ce=I(ce,10),de=R(de,ie,ne,ce,fe,F[4],1836072691,7),ne=I(ne,10),fe=R(fe,de,ie,ne,ce,F[13],1836072691,5),ie=I(ie,10),ce=T(ce,fe,de,ie,ne,F[8],2053994217,15),de=I(de,10),ne=T(ne,ce,fe,de,ie,F[6],2053994217,5),fe=I(fe,10),ie=T(ie,ne,ce,fe,de,F[4],2053994217,8),ce=I(ce,10),de=T(de,ie,ne,ce,fe,F[1],2053994217,11),ne=I(ne,10),fe=T(fe,de,ie,ne,ce,F[3],2053994217,14),ie=I(ie,10),ce=T(ce,fe,de,ie,ne,F[11],2053994217,14),de=I(de,10),ne=T(ne,ce,fe,de,ie,F[15],2053994217,6),fe=I(fe,10),ie=T(ie,ne,ce,fe,de,F[0],2053994217,14),ce=I(ce,10),de=T(de,ie,ne,ce,fe,F[5],2053994217,6),ne=I(ne,10),fe=T(fe,de,ie,ne,ce,F[12],2053994217,9),ie=I(ie,10),ce=T(ce,fe,de,ie,ne,F[2],2053994217,12),de=I(de,10),ne=T(ne,ce,fe,de,ie,F[13],2053994217,9),fe=I(fe,10),ie=T(ie,ne,ce,fe,de,F[9],2053994217,12),ce=I(ce,10),de=T(de,ie,ne,ce,fe,F[7],2053994217,5),ne=I(ne,10),fe=T(fe,de,ie,ne,ce,F[10],2053994217,15),ie=I(ie,10),ce=T(ce,fe,de,ie,ne,F[14],2053994217,8),de=I(de,10),ne=B(ne,ce,fe,de,ie,F[12],0,8),fe=I(fe,10),ie=B(ie,ne,ce,fe,de,F[15],0,5),ce=I(ce,10),de=B(de,ie,ne,ce,fe,F[10],0,12),ne=I(ne,10),fe=B(fe,de,ie,ne,ce,F[4],0,9),ie=I(ie,10),ce=B(ce,fe,de,ie,ne,F[1],0,12),de=I(de,10),ne=B(ne,ce,fe,de,ie,F[5],0,5),fe=I(fe,10),ie=B(ie,ne,ce,fe,de,F[8],0,14),ce=I(ce,10),de=B(de,ie,ne,ce,fe,F[7],0,6),ne=I(ne,10),fe=B(fe,de,ie,ne,ce,F[6],0,8),ie=I(ie,10),ce=B(ce,fe,de,ie,ne,F[2],0,13),de=I(de,10),ne=B(ne,ce,fe,de,ie,F[13],0,6),fe=I(fe,10),ie=B(ie,ne,ce,fe,de,F[14],0,5),ce=I(ce,10),de=B(de,ie,ne,ce,fe,F[0],0,15),ne=I(ne,10),fe=B(fe,de,ie,ne,ce,F[3],0,13),ie=I(ie,10),ce=B(ce,fe,de,ie,ne,F[9],0,11),de=I(de,10),ne=B(ne,ce,fe,de,ie,F[11],0,11),fe=I(fe,10);var pe=this._b+K+fe|0;this._b=this._c+J+de|0,this._c=this._d+ee+ie|0,this._d=this._e+U+ne|0,this._e=this._a+V+ce|0,this._a=pe},_.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var F=new Buffer$1(20);return F.writeInt32LE(this._a,0),F.writeInt32LE(this._b,4),F.writeInt32LE(this._c,8),F.writeInt32LE(this._d,12),F.writeInt32LE(this._e,16),F};function I(F,L){return F<<L|F>>>32-L}function B(F,L,U,V,K,J,ee,ie){return I(F+(L^U^V)+J+ee|0,ie)+K|0}function T(F,L,U,V,K,J,ee,ie){return I(F+(L&U|~L&V)+J+ee|0,ie)+K|0}function R(F,L,U,V,K,J,ee,ie){return I(F+((L|~U)^V)+J+ee|0,ie)+K|0}function P(F,L,U,V,K,J,ee,ie){return I(F+(L&V|U&~V)+J+ee|0,ie)+K|0}function D(F,L,U,V,K,J,ee,ie){return I(F+(L^(U|~V))+J+ee|0,ie)+K|0}return ripemd160=_,ripemd160}var toBuffer_1,hasRequiredToBuffer;function requireToBuffer(){if(hasRequiredToBuffer)return toBuffer_1;hasRequiredToBuffer=1;var E=requireSafeBuffer$1().Buffer,A=requireToBuffer$1(),_=typeof Uint8Array<"u",I=_&&typeof ArrayBuffer<"u",B=I&&ArrayBuffer.isView;return toBuffer_1=function(T,R,P){if(typeof T=="string"||E.isBuffer(T)||_&&T instanceof Uint8Array||B&&B(T))return A(T,R);throw new TypeError(P+" must be a string, a Buffer, a Uint8Array, or a DataView")},toBuffer_1}var syncBrowser,hasRequiredSyncBrowser;function requireSyncBrowser(){if(hasRequiredSyncBrowser)return syncBrowser;hasRequiredSyncBrowser=1;var E=requireMd5$1(),A=requireRipemd160(),_=requireSha_js(),I=requireSafeBuffer$1().Buffer,B=requirePrecondition(),T=requireDefaultEncoding(),R=requireToBuffer(),P=I.alloc(128),D={__proto__:null,md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,"sha512-256":32,ripemd160:20,rmd160:20},F={__proto__:null,"sha-1":"sha1","sha-224":"sha224","sha-256":"sha256","sha-384":"sha384","sha-512":"sha512","ripemd-160":"ripemd160"};function L(J){return new A().update(J).digest()}function U(J){function ee(ie){return _(J).update(ie).digest()}return J==="rmd160"||J==="ripemd160"?L:J==="md5"?E:ee}function V(J,ee,ie){var ne=U(J),ce=J==="sha512"||J==="sha384"?128:64;ee.length>ce?ee=ne(ee):ee.length<ce&&(ee=I.concat([ee,P],ce));for(var fe=I.allocUnsafe(ce+D[J]),de=I.allocUnsafe(ce+D[J]),pe=0;pe<ce;pe++)fe[pe]=ee[pe]^54,de[pe]=ee[pe]^92;var ve=I.allocUnsafe(ce+ie+4);fe.copy(ve,0,0,ce),this.ipad1=ve,this.ipad2=fe,this.opad=de,this.alg=J,this.blocksize=ce,this.hash=ne,this.size=D[J]}V.prototype.run=function(J,ee){J.copy(ee,this.blocksize);var ie=this.hash(ee);return ie.copy(this.opad,this.blocksize),this.hash(this.opad)};function K(J,ee,ie,ne,ce){B(ie,ne),J=R(J,T,"Password"),ee=R(ee,T,"Salt");var fe=(ce||"sha1").toLowerCase(),de=F[fe]||fe,pe=D[de];if(typeof pe!="number"||!pe)throw new TypeError("Digest algorithm not supported: "+ce);var ve=new V(de,J,ee.length),ye=I.allocUnsafe(ne),_e=I.allocUnsafe(ee.length+4);ee.copy(_e,0,0,ee.length);for(var be=0,Te=pe,ue=Math.ceil(ne/Te),O=1;O<=ue;O++){_e.writeUInt32BE(O,ee.length);for(var z=ve.run(_e,ve.ipad1),Y=z,te=1;te<ie;te++){Y=ve.run(Y,ve.ipad2);for(var oe=0;oe<Te;oe++)z[oe]^=Y[oe]}z.copy(ye,be),be+=Te}return ye}return syncBrowser=K,syncBrowser}var async$1,hasRequiredAsync$1;function requireAsync$1(){if(hasRequiredAsync$1)return async$1;hasRequiredAsync$1=1;var E=requireSafeBuffer$1().Buffer,A=requirePrecondition(),_=requireDefaultEncoding(),I=requireSyncBrowser(),B=requireToBuffer(),T,R=commonjsGlobal.crypto&&commonjsGlobal.crypto.subtle,P={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},D=[],F;function L(){return F||(commonjsGlobal.process&&commonjsGlobal.process.nextTick?F=commonjsGlobal.process.nextTick:commonjsGlobal.queueMicrotask?F=commonjsGlobal.queueMicrotask:commonjsGlobal.setImmediate?F=commonjsGlobal.setImmediate:F=commonjsGlobal.setTimeout,F)}function U(J,ee,ie,ne,ce){return R.importKey("raw",J,{name:"PBKDF2"},!1,["deriveBits"]).then(function(fe){return R.deriveBits({name:"PBKDF2",salt:ee,iterations:ie,hash:{name:ce}},fe,ne<<3)}).then(function(fe){return E.from(fe)})}function V(J){if(commonjsGlobal.process&&!commonjsGlobal.process.browser||!R||!R.importKey||!R.deriveBits)return Promise.resolve(!1);if(D[J]!==void 0)return D[J];T=T||E.alloc(8);var ee=U(T,T,10,128,J).then(function(){return!0},function(){return!1});return D[J]=ee,ee}function K(J,ee){J.then(function(ie){L()(function(){ee(null,ie)})},function(ie){L()(function(){ee(ie)})})}return async$1=function(J,ee,ie,ne,ce,fe){typeof ce=="function"&&(fe=ce,ce=void 0),ce=ce||"sha1";var de=P[ce.toLowerCase()];if(!de||typeof commonjsGlobal.Promise!="function"){L()(function(){var pe;try{pe=I(J,ee,ie,ne,ce)}catch(ve){fe(ve);return}fe(null,pe)});return}if(A(ie,ne),J=B(J,_,"Password"),ee=B(ee,_,"Salt"),typeof fe!="function")throw new Error("No callback provided to pbkdf2");K(V(de).then(function(pe){return pe?U(J,ee,ie,ne,de):I(J,ee,ie,ne,ce)}),fe)},async$1}var hasRequiredBrowser$a;function requireBrowser$a(){return hasRequiredBrowser$a||(hasRequiredBrowser$a=1,browser$a.pbkdf2=requireAsync$1(),browser$a.pbkdf2Sync=requireSyncBrowser()),browser$a}var browser$9={},des$1={},utils$6={},hasRequiredUtils$6;function requireUtils$6(){if(hasRequiredUtils$6)return utils$6;hasRequiredUtils$6=1,utils$6.readUInt32BE=function(B,T){var R=B[0+T]<<24|B[1+T]<<16|B[2+T]<<8|B[3+T];return R>>>0},utils$6.writeUInt32BE=function(B,T,R){B[0+R]=T>>>24,B[1+R]=T>>>16&255,B[2+R]=T>>>8&255,B[3+R]=T&255},utils$6.ip=function(B,T,R,P){for(var D=0,F=0,L=6;L>=0;L-=2){for(var U=0;U<=24;U+=8)D<<=1,D|=T>>>U+L&1;for(var U=0;U<=24;U+=8)D<<=1,D|=B>>>U+L&1}for(var L=6;L>=0;L-=2){for(var U=1;U<=25;U+=8)F<<=1,F|=T>>>U+L&1;for(var U=1;U<=25;U+=8)F<<=1,F|=B>>>U+L&1}R[P+0]=D>>>0,R[P+1]=F>>>0},utils$6.rip=function(B,T,R,P){for(var D=0,F=0,L=0;L<4;L++)for(var U=24;U>=0;U-=8)D<<=1,D|=T>>>U+L&1,D<<=1,D|=B>>>U+L&1;for(var L=4;L<8;L++)for(var U=24;U>=0;U-=8)F<<=1,F|=T>>>U+L&1,F<<=1,F|=B>>>U+L&1;R[P+0]=D>>>0,R[P+1]=F>>>0},utils$6.pc1=function(B,T,R,P){for(var D=0,F=0,L=7;L>=5;L--){for(var U=0;U<=24;U+=8)D<<=1,D|=T>>U+L&1;for(var U=0;U<=24;U+=8)D<<=1,D|=B>>U+L&1}for(var U=0;U<=24;U+=8)D<<=1,D|=T>>U+L&1;for(var L=1;L<=3;L++){for(var U=0;U<=24;U+=8)F<<=1,F|=T>>U+L&1;for(var U=0;U<=24;U+=8)F<<=1,F|=B>>U+L&1}for(var U=0;U<=24;U+=8)F<<=1,F|=B>>U+L&1;R[P+0]=D>>>0,R[P+1]=F>>>0},utils$6.r28shl=function(B,T){return B<<T&268435455|B>>>28-T};var E=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];utils$6.pc2=function(B,T,R,P){for(var D=0,F=0,L=E.length>>>1,U=0;U<L;U++)D<<=1,D|=B>>>E[U]&1;for(var U=L;U<E.length;U++)F<<=1,F|=T>>>E[U]&1;R[P+0]=D>>>0,R[P+1]=F>>>0},utils$6.expand=function(B,T,R){var P=0,D=0;P=(B&1)<<5|B>>>27;for(var F=23;F>=15;F-=4)P<<=6,P|=B>>>F&63;for(var F=11;F>=3;F-=4)D|=B>>>F&63,D<<=6;D|=(B&31)<<1|B>>>31,T[R+0]=P>>>0,T[R+1]=D>>>0};var A=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];utils$6.substitute=function(B,T){for(var R=0,P=0;P<4;P++){var D=B>>>18-P*6&63,F=A[P*64+D];R<<=4,R|=F}for(var P=0;P<4;P++){var D=T>>>18-P*6&63,F=A[256+P*64+D];R<<=4,R|=F}return R>>>0};var _=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];return utils$6.permute=function(B){for(var T=0,R=0;R<_.length;R++)T<<=1,T|=B>>>_[R]&1;return T>>>0},utils$6.padSplit=function(B,T,R){for(var P=B.toString(2);P.length<T;)P="0"+P;for(var D=[],F=0;F<T;F+=R)D.push(P.slice(F,F+R));return D.join(" ")},utils$6}var minimalisticAssert,hasRequiredMinimalisticAssert;function requireMinimalisticAssert(){if(hasRequiredMinimalisticAssert)return minimalisticAssert;hasRequiredMinimalisticAssert=1,minimalisticAssert=E;function E(A,_){if(!A)throw new Error(_||"Assertion failed")}return E.equal=function(_,I,B){if(_!=I)throw new Error(B||"Assertion failed: "+_+" != "+I)},minimalisticAssert}var cipher$1,hasRequiredCipher;function requireCipher(){if(hasRequiredCipher)return cipher$1;hasRequiredCipher=1;var E=requireMinimalisticAssert();function A(_){this.options=_,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=_.padding!==!1}return cipher$1=A,A.prototype._init=function(){},A.prototype.update=function(I){return I.length===0?[]:this.type==="decrypt"?this._updateDecrypt(I):this._updateEncrypt(I)},A.prototype._buffer=function(I,B){for(var T=Math.min(this.buffer.length-this.bufferOff,I.length-B),R=0;R<T;R++)this.buffer[this.bufferOff+R]=I[B+R];return this.bufferOff+=T,T},A.prototype._flushBuffer=function(I,B){return this._update(this.buffer,0,I,B),this.bufferOff=0,this.blockSize},A.prototype._updateEncrypt=function(I){var B=0,T=0,R=(this.bufferOff+I.length)/this.blockSize|0,P=new Array(R*this.blockSize);this.bufferOff!==0&&(B+=this._buffer(I,B),this.bufferOff===this.buffer.length&&(T+=this._flushBuffer(P,T)));for(var D=I.length-(I.length-B)%this.blockSize;B<D;B+=this.blockSize)this._update(I,B,P,T),T+=this.blockSize;for(;B<I.length;B++,this.bufferOff++)this.buffer[this.bufferOff]=I[B];return P},A.prototype._updateDecrypt=function(I){for(var B=0,T=0,R=Math.ceil((this.bufferOff+I.length)/this.blockSize)-1,P=new Array(R*this.blockSize);R>0;R--)B+=this._buffer(I,B),T+=this._flushBuffer(P,T);return B+=this._buffer(I,B),P},A.prototype.final=function(I){var B;I&&(B=this.update(I));var T;return this.type==="encrypt"?T=this._finalEncrypt():T=this._finalDecrypt(),B?B.concat(T):T},A.prototype._pad=function(I,B){if(B===0)return!1;for(;B<I.length;)I[B++]=0;return!0},A.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var I=new Array(this.blockSize);return this._update(this.buffer,0,I,0),I},A.prototype._unpad=function(I){return I},A.prototype._finalDecrypt=function(){E.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var I=new Array(this.blockSize);return this._flushBuffer(I,0),this._unpad(I)},cipher$1}var des,hasRequiredDes$1;function requireDes$1(){if(hasRequiredDes$1)return des;hasRequiredDes$1=1;var E=requireMinimalisticAssert(),A=requireInherits_browser(),_=requireUtils$6(),I=requireCipher();function B(){this.tmp=new Array(2),this.keys=null}function T(P){I.call(this,P);var D=new B;this._desState=D,this.deriveKeys(D,P.key)}A(T,I),des=T,T.create=function(D){return new T(D)};var R=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];return T.prototype.deriveKeys=function(D,F){D.keys=new Array(32),E.equal(F.length,this.blockSize,"Invalid key length");var L=_.readUInt32BE(F,0),U=_.readUInt32BE(F,4);_.pc1(L,U,D.tmp,0),L=D.tmp[0],U=D.tmp[1];for(var V=0;V<D.keys.length;V+=2){var K=R[V>>>1];L=_.r28shl(L,K),U=_.r28shl(U,K),_.pc2(L,U,D.keys,V)}},T.prototype._update=function(D,F,L,U){var V=this._desState,K=_.readUInt32BE(D,F),J=_.readUInt32BE(D,F+4);_.ip(K,J,V.tmp,0),K=V.tmp[0],J=V.tmp[1],this.type==="encrypt"?this._encrypt(V,K,J,V.tmp,0):this._decrypt(V,K,J,V.tmp,0),K=V.tmp[0],J=V.tmp[1],_.writeUInt32BE(L,K,U),_.writeUInt32BE(L,J,U+4)},T.prototype._pad=function(D,F){if(this.padding===!1)return!1;for(var L=D.length-F,U=F;U<D.length;U++)D[U]=L;return!0},T.prototype._unpad=function(D){if(this.padding===!1)return D;for(var F=D[D.length-1],L=D.length-F;L<D.length;L++)E.equal(D[L],F);return D.slice(0,D.length-F)},T.prototype._encrypt=function(D,F,L,U,V){for(var K=F,J=L,ee=0;ee<D.keys.length;ee+=2){var ie=D.keys[ee],ne=D.keys[ee+1];_.expand(J,D.tmp,0),ie^=D.tmp[0],ne^=D.tmp[1];var ce=_.substitute(ie,ne),fe=_.permute(ce),de=J;J=(K^fe)>>>0,K=de}_.rip(J,K,U,V)},T.prototype._decrypt=function(D,F,L,U,V){for(var K=L,J=F,ee=D.keys.length-2;ee>=0;ee-=2){var ie=D.keys[ee],ne=D.keys[ee+1];_.expand(K,D.tmp,0),ie^=D.tmp[0],ne^=D.tmp[1];var ce=_.substitute(ie,ne),fe=_.permute(ce),de=K;K=(J^fe)>>>0,J=de}_.rip(K,J,U,V)},des}var cbc$1={},hasRequiredCbc$1;function requireCbc$1(){if(hasRequiredCbc$1)return cbc$1;hasRequiredCbc$1=1;var E=requireMinimalisticAssert(),A=requireInherits_browser(),_={};function I(T){E.equal(T.length,8,"Invalid IV length"),this.iv=new Array(8);for(var R=0;R<this.iv.length;R++)this.iv[R]=T[R]}function B(T){function R(L){T.call(this,L),this._cbcInit()}A(R,T);for(var P=Object.keys(_),D=0;D<P.length;D++){var F=P[D];R.prototype[F]=_[F]}return R.create=function(U){return new R(U)},R}return cbc$1.instantiate=B,_._cbcInit=function(){var R=new I(this.options.iv);this._cbcState=R},_._update=function(R,P,D,F){var L=this._cbcState,U=this.constructor.super_.prototype,V=L.iv;if(this.type==="encrypt"){for(var K=0;K<this.blockSize;K++)V[K]^=R[P+K];U._update.call(this,V,0,D,F);for(var K=0;K<this.blockSize;K++)V[K]=D[F+K]}else{U._update.call(this,R,P,D,F);for(var K=0;K<this.blockSize;K++)D[F+K]^=V[K];for(var K=0;K<this.blockSize;K++)V[K]=R[P+K]}},cbc$1}var ede,hasRequiredEde;function requireEde(){if(hasRequiredEde)return ede;hasRequiredEde=1;var E=requireMinimalisticAssert(),A=requireInherits_browser(),_=requireCipher(),I=requireDes$1();function B(R,P){E.equal(P.length,24,"Invalid key length");var D=P.slice(0,8),F=P.slice(8,16),L=P.slice(16,24);R==="encrypt"?this.ciphers=[I.create({type:"encrypt",key:D}),I.create({type:"decrypt",key:F}),I.create({type:"encrypt",key:L})]:this.ciphers=[I.create({type:"decrypt",key:L}),I.create({type:"encrypt",key:F}),I.create({type:"decrypt",key:D})]}function T(R){_.call(this,R);var P=new B(this.type,this.options.key);this._edeState=P}return A(T,_),ede=T,T.create=function(P){return new T(P)},T.prototype._update=function(P,D,F,L){var U=this._edeState;U.ciphers[0]._update(P,D,F,L),U.ciphers[1]._update(F,L,F,L),U.ciphers[2]._update(F,L,F,L)},T.prototype._pad=I.prototype._pad,T.prototype._unpad=I.prototype._unpad,ede}var hasRequiredDes;function requireDes(){return hasRequiredDes||(hasRequiredDes=1,des$1.utils=requireUtils$6(),des$1.Cipher=requireCipher(),des$1.DES=requireDes$1(),des$1.CBC=requireCbc$1(),des$1.EDE=requireEde()),des$1}var browserifyDes,hasRequiredBrowserifyDes;function requireBrowserifyDes(){if(hasRequiredBrowserifyDes)return browserifyDes;hasRequiredBrowserifyDes=1;var E=requireCipherBase(),A=requireDes(),_=requireInherits_browser(),I=requireSafeBuffer$1().Buffer,B={"des-ede3-cbc":A.CBC.instantiate(A.EDE),"des-ede3":A.EDE,"des-ede-cbc":A.CBC.instantiate(A.EDE),"des-ede":A.EDE,"des-cbc":A.CBC.instantiate(A.DES),"des-ecb":A.DES};B.des=B["des-cbc"],B.des3=B["des-ede3-cbc"],browserifyDes=T,_(T,E);function T(R){E.call(this);var P=R.mode.toLowerCase(),D=B[P],F;R.decrypt?F="decrypt":F="encrypt";var L=R.key;I.isBuffer(L)||(L=I.from(L)),(P==="des-ede"||P==="des-ede-cbc")&&(L=I.concat([L,L.slice(0,8)]));var U=R.iv;I.isBuffer(U)||(U=I.from(U)),this._des=D.create({key:L,iv:U,type:F})}return T.prototype._update=function(R){return I.from(this._des.update(R))},T.prototype._final=function(){return I.from(this._des.final())},browserifyDes}var browser$8={},encrypter={},ecb={},hasRequiredEcb;function requireEcb(){return hasRequiredEcb||(hasRequiredEcb=1,ecb.encrypt=function(E,A){return E._cipher.encryptBlock(A)},ecb.decrypt=function(E,A){return E._cipher.decryptBlock(A)}),ecb}var cbc={},bufferXor,hasRequiredBufferXor;function requireBufferXor(){return hasRequiredBufferXor||(hasRequiredBufferXor=1,bufferXor=function(A,_){for(var I=Math.min(A.length,_.length),B=new Buffer$1(I),T=0;T<I;++T)B[T]=A[T]^_[T];return B}),bufferXor}var hasRequiredCbc;function requireCbc(){if(hasRequiredCbc)return cbc;hasRequiredCbc=1;var E=requireBufferXor();return cbc.encrypt=function(A,_){var I=E(_,A._prev);return A._prev=A._cipher.encryptBlock(I),A._prev},cbc.decrypt=function(A,_){var I=A._prev;A._prev=_;var B=A._cipher.decryptBlock(_);return E(B,I)},cbc}var cfb={},hasRequiredCfb;function requireCfb(){if(hasRequiredCfb)return cfb;hasRequiredCfb=1;var E=requireSafeBuffer$1().Buffer,A=requireBufferXor();function _(I,B,T){var R=B.length,P=A(B,I._cache);return I._cache=I._cache.slice(R),I._prev=E.concat([I._prev,T?B:P]),P}return cfb.encrypt=function(I,B,T){for(var R=E.allocUnsafe(0),P;B.length;)if(I._cache.length===0&&(I._cache=I._cipher.encryptBlock(I._prev),I._prev=E.allocUnsafe(0)),I._cache.length<=B.length)P=I._cache.length,R=E.concat([R,_(I,B.slice(0,P),T)]),B=B.slice(P);else{R=E.concat([R,_(I,B,T)]);break}return R},cfb}var cfb8={},hasRequiredCfb8;function requireCfb8(){if(hasRequiredCfb8)return cfb8;hasRequiredCfb8=1;var E=requireSafeBuffer$1().Buffer;function A(_,I,B){var T=_._cipher.encryptBlock(_._prev),R=T[0]^I;return _._prev=E.concat([_._prev.slice(1),E.from([B?I:R])]),R}return cfb8.encrypt=function(_,I,B){for(var T=I.length,R=E.allocUnsafe(T),P=-1;++P<T;)R[P]=A(_,I[P],B);return R},cfb8}var cfb1={},hasRequiredCfb1;function requireCfb1(){if(hasRequiredCfb1)return cfb1;hasRequiredCfb1=1;var E=requireSafeBuffer$1().Buffer;function A(I,B,T){for(var R,P=-1,D=8,F=0,L,U;++P<D;)R=I._cipher.encryptBlock(I._prev),L=B&1<<7-P?128:0,U=R[0]^L,F+=(U&128)>>P%8,I._prev=_(I._prev,T?L:U);return F}function _(I,B){var T=I.length,R=-1,P=E.allocUnsafe(I.length);for(I=E.concat([I,E.from([B])]);++R<T;)P[R]=I[R]<<1|I[R+1]>>7;return P}return cfb1.encrypt=function(I,B,T){for(var R=B.length,P=E.allocUnsafe(R),D=-1;++D<R;)P[D]=A(I,B[D],T);return P},cfb1}var ofb={},hasRequiredOfb;function requireOfb(){if(hasRequiredOfb)return ofb;hasRequiredOfb=1;var E=requireBufferXor();function A(_){return _._prev=_._cipher.encryptBlock(_._prev),_._prev}return ofb.encrypt=function(_,I){for(;_._cache.length<I.length;)_._cache=Buffer$1.concat([_._cache,A(_)]);var B=_._cache.slice(0,I.length);return _._cache=_._cache.slice(I.length),E(I,B)},ofb}var ctr={},incr32_1,hasRequiredIncr32;function requireIncr32(){if(hasRequiredIncr32)return incr32_1;hasRequiredIncr32=1;function E(A){for(var _=A.length,I;_--;)if(I=A.readUInt8(_),I===255)A.writeUInt8(0,_);else{I++,A.writeUInt8(I,_);break}}return incr32_1=E,incr32_1}var hasRequiredCtr;function requireCtr(){if(hasRequiredCtr)return ctr;hasRequiredCtr=1;var E=requireBufferXor(),A=requireSafeBuffer$1().Buffer,_=requireIncr32();function I(T){var R=T._cipher.encryptBlockRaw(T._prev);return _(T._prev),R}var B=16;return ctr.encrypt=function(T,R){var P=Math.ceil(R.length/B),D=T._cache.length;T._cache=A.concat([T._cache,A.allocUnsafe(P*B)]);for(var F=0;F<P;F++){var L=I(T),U=D+F*B;T._cache.writeUInt32BE(L[0],U+0),T._cache.writeUInt32BE(L[1],U+4),T._cache.writeUInt32BE(L[2],U+8),T._cache.writeUInt32BE(L[3],U+12)}var V=T._cache.slice(0,R.length);return T._cache=T._cache.slice(R.length),E(R,V)},ctr}const aes128={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},require$$2$2={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128,aes192,aes256,"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}};var modes_1,hasRequiredModes$1;function requireModes$1(){if(hasRequiredModes$1)return modes_1;hasRequiredModes$1=1;var E={ECB:requireEcb(),CBC:requireCbc(),CFB:requireCfb(),CFB8:requireCfb8(),CFB1:requireCfb1(),OFB:requireOfb(),CTR:requireCtr(),GCM:requireCtr()},A=require$$2$2;for(var _ in A)A[_].module=E[A[_].mode];return modes_1=A,modes_1}var aes={},hasRequiredAes;function requireAes(){if(hasRequiredAes)return aes;hasRequiredAes=1;var E=requireSafeBuffer$1().Buffer;function A(P){E.isBuffer(P)||(P=E.from(P));for(var D=P.length/4|0,F=new Array(D),L=0;L<D;L++)F[L]=P.readUInt32BE(L*4);return F}function _(P){for(var D=0;D<P.length;P++)P[D]=0}function I(P,D,F,L,U){for(var V=F[0],K=F[1],J=F[2],ee=F[3],ie=P[0]^D[0],ne=P[1]^D[1],ce=P[2]^D[2],fe=P[3]^D[3],de,pe,ve,ye,_e=4,be=1;be<U;be++)de=V[ie>>>24]^K[ne>>>16&255]^J[ce>>>8&255]^ee[fe&255]^D[_e++],pe=V[ne>>>24]^K[ce>>>16&255]^J[fe>>>8&255]^ee[ie&255]^D[_e++],ve=V[ce>>>24]^K[fe>>>16&255]^J[ie>>>8&255]^ee[ne&255]^D[_e++],ye=V[fe>>>24]^K[ie>>>16&255]^J[ne>>>8&255]^ee[ce&255]^D[_e++],ie=de,ne=pe,ce=ve,fe=ye;return de=(L[ie>>>24]<<24|L[ne>>>16&255]<<16|L[ce>>>8&255]<<8|L[fe&255])^D[_e++],pe=(L[ne>>>24]<<24|L[ce>>>16&255]<<16|L[fe>>>8&255]<<8|L[ie&255])^D[_e++],ve=(L[ce>>>24]<<24|L[fe>>>16&255]<<16|L[ie>>>8&255]<<8|L[ne&255])^D[_e++],ye=(L[fe>>>24]<<24|L[ie>>>16&255]<<16|L[ne>>>8&255]<<8|L[ce&255])^D[_e++],de=de>>>0,pe=pe>>>0,ve=ve>>>0,ye=ye>>>0,[de,pe,ve,ye]}var B=[0,1,2,4,8,16,32,64,128,27,54],T=(function(){for(var P=new Array(256),D=0;D<256;D++)D<128?P[D]=D<<1:P[D]=D<<1^283;for(var F=[],L=[],U=[[],[],[],[]],V=[[],[],[],[]],K=0,J=0,ee=0;ee<256;++ee){var ie=J^J<<1^J<<2^J<<3^J<<4;ie=ie>>>8^ie&255^99,F[K]=ie,L[ie]=K;var ne=P[K],ce=P[ne],fe=P[ce],de=P[ie]*257^ie*16843008;U[0][K]=de<<24|de>>>8,U[1][K]=de<<16|de>>>16,U[2][K]=de<<8|de>>>24,U[3][K]=de,de=fe*16843009^ce*65537^ne*257^K*16843008,V[0][ie]=de<<24|de>>>8,V[1][ie]=de<<16|de>>>16,V[2][ie]=de<<8|de>>>24,V[3][ie]=de,K===0?K=J=1:(K=ne^P[P[P[fe^ne]]],J^=P[P[J]])}return{SBOX:F,INV_SBOX:L,SUB_MIX:U,INV_SUB_MIX:V}})();function R(P){this._key=A(P),this._reset()}return R.blockSize=16,R.keySize=256/8,R.prototype.blockSize=R.blockSize,R.prototype.keySize=R.keySize,R.prototype._reset=function(){for(var P=this._key,D=P.length,F=D+6,L=(F+1)*4,U=[],V=0;V<D;V++)U[V]=P[V];for(V=D;V<L;V++){var K=U[V-1];V%D===0?(K=K<<8|K>>>24,K=T.SBOX[K>>>24]<<24|T.SBOX[K>>>16&255]<<16|T.SBOX[K>>>8&255]<<8|T.SBOX[K&255],K^=B[V/D|0]<<24):D>6&&V%D===4&&(K=T.SBOX[K>>>24]<<24|T.SBOX[K>>>16&255]<<16|T.SBOX[K>>>8&255]<<8|T.SBOX[K&255]),U[V]=U[V-D]^K}for(var J=[],ee=0;ee<L;ee++){var ie=L-ee,ne=U[ie-(ee%4?0:4)];ee<4||ie<=4?J[ee]=ne:J[ee]=T.INV_SUB_MIX[0][T.SBOX[ne>>>24]]^T.INV_SUB_MIX[1][T.SBOX[ne>>>16&255]]^T.INV_SUB_MIX[2][T.SBOX[ne>>>8&255]]^T.INV_SUB_MIX[3][T.SBOX[ne&255]]}this._nRounds=F,this._keySchedule=U,this._invKeySchedule=J},R.prototype.encryptBlockRaw=function(P){return P=A(P),I(P,this._keySchedule,T.SUB_MIX,T.SBOX,this._nRounds)},R.prototype.encryptBlock=function(P){var D=this.encryptBlockRaw(P),F=E.allocUnsafe(16);return F.writeUInt32BE(D[0],0),F.writeUInt32BE(D[1],4),F.writeUInt32BE(D[2],8),F.writeUInt32BE(D[3],12),F},R.prototype.decryptBlock=function(P){P=A(P);var D=P[1];P[1]=P[3],P[3]=D;var F=I(P,this._invKeySchedule,T.INV_SUB_MIX,T.INV_SBOX,this._nRounds),L=E.allocUnsafe(16);return L.writeUInt32BE(F[0],0),L.writeUInt32BE(F[3],4),L.writeUInt32BE(F[2],8),L.writeUInt32BE(F[1],12),L},R.prototype.scrub=function(){_(this._keySchedule),_(this._invKeySchedule),_(this._key)},aes.AES=R,aes}var ghash,hasRequiredGhash;function requireGhash(){if(hasRequiredGhash)return ghash;hasRequiredGhash=1;var E=requireSafeBuffer$1().Buffer,A=E.alloc(16,0);function _(T){return[T.readUInt32BE(0),T.readUInt32BE(4),T.readUInt32BE(8),T.readUInt32BE(12)]}function I(T){var R=E.allocUnsafe(16);return R.writeUInt32BE(T[0]>>>0,0),R.writeUInt32BE(T[1]>>>0,4),R.writeUInt32BE(T[2]>>>0,8),R.writeUInt32BE(T[3]>>>0,12),R}function B(T){this.h=T,this.state=E.alloc(16,0),this.cache=E.allocUnsafe(0)}return B.prototype.ghash=function(T){for(var R=-1;++R<T.length;)this.state[R]^=T[R];this._multiply()},B.prototype._multiply=function(){for(var T=_(this.h),R=[0,0,0,0],P,D,F,L=-1;++L<128;){for(D=(this.state[~~(L/8)]&1<<7-L%8)!==0,D&&(R[0]^=T[0],R[1]^=T[1],R[2]^=T[2],R[3]^=T[3]),F=(T[3]&1)!==0,P=3;P>0;P--)T[P]=T[P]>>>1|(T[P-1]&1)<<31;T[0]=T[0]>>>1,F&&(T[0]=T[0]^225<<24)}this.state=I(R)},B.prototype.update=function(T){this.cache=E.concat([this.cache,T]);for(var R;this.cache.length>=16;)R=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(R)},B.prototype.final=function(T,R){return this.cache.length&&this.ghash(E.concat([this.cache,A],16)),this.ghash(I([0,T,0,R])),this.state},ghash=B,ghash}var authCipher,hasRequiredAuthCipher;function requireAuthCipher(){if(hasRequiredAuthCipher)return authCipher;hasRequiredAuthCipher=1;var E=requireAes(),A=requireSafeBuffer$1().Buffer,_=requireCipherBase(),I=requireInherits_browser(),B=requireGhash(),T=requireBufferXor(),R=requireIncr32();function P(L,U){var V=0;L.length!==U.length&&V++;for(var K=Math.min(L.length,U.length),J=0;J<K;++J)V+=L[J]^U[J];return V}function D(L,U,V){if(U.length===12)return L._finID=A.concat([U,A.from([0,0,0,1])]),A.concat([U,A.from([0,0,0,2])]);var K=new B(V),J=U.length,ee=J%16;K.update(U),ee&&(ee=16-ee,K.update(A.alloc(ee,0))),K.update(A.alloc(8,0));var ie=J*8,ne=A.alloc(8);ne.writeUIntBE(ie,0,8),K.update(ne),L._finID=K.state;var ce=A.from(L._finID);return R(ce),ce}function F(L,U,V,K){_.call(this);var J=A.alloc(4,0);this._cipher=new E.AES(U);var ee=this._cipher.encryptBlock(J);this._ghash=new B(ee),V=D(this,V,ee),this._prev=A.from(V),this._cache=A.allocUnsafe(0),this._secCache=A.allocUnsafe(0),this._decrypt=K,this._alen=0,this._len=0,this._mode=L,this._authTag=null,this._called=!1}return I(F,_),F.prototype._update=function(L){if(!this._called&&this._alen){var U=16-this._alen%16;U<16&&(U=A.alloc(U,0),this._ghash.update(U))}this._called=!0;var V=this._mode.encrypt(this,L);return this._decrypt?this._ghash.update(L):this._ghash.update(V),this._len+=L.length,V},F.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var L=T(this._ghash.final(this._alen*8,this._len*8),this._cipher.encryptBlock(this._finID));if(this._decrypt&&P(L,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=L,this._cipher.scrub()},F.prototype.getAuthTag=function(){if(this._decrypt||!A.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},F.prototype.setAuthTag=function(U){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=U},F.prototype.setAAD=function(U){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(U),this._alen+=U.length},authCipher=F,authCipher}var streamCipher,hasRequiredStreamCipher;function requireStreamCipher(){if(hasRequiredStreamCipher)return streamCipher;hasRequiredStreamCipher=1;var E=requireAes(),A=requireSafeBuffer$1().Buffer,_=requireCipherBase(),I=requireInherits_browser();function B(T,R,P,D){_.call(this),this._cipher=new E.AES(R),this._prev=A.from(P),this._cache=A.allocUnsafe(0),this._secCache=A.allocUnsafe(0),this._decrypt=D,this._mode=T}return I(B,_),B.prototype._update=function(T){return this._mode.encrypt(this,T,this._decrypt)},B.prototype._final=function(){this._cipher.scrub()},streamCipher=B,streamCipher}var evp_bytestokey,hasRequiredEvp_bytestokey;function requireEvp_bytestokey(){if(hasRequiredEvp_bytestokey)return evp_bytestokey;hasRequiredEvp_bytestokey=1;var E=requireSafeBuffer$1().Buffer,A=requireMd5_js();function _(I,B,T,R){if(E.isBuffer(I)||(I=E.from(I,"binary")),B&&(E.isBuffer(B)||(B=E.from(B,"binary")),B.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var P=T/8,D=E.alloc(P),F=E.alloc(R||0),L=E.alloc(0);P>0||R>0;){var U=new A;U.update(L),U.update(I),B&&U.update(B),L=U.digest();var V=0;if(P>0){var K=D.length-P;V=Math.min(P,L.length),L.copy(D,K,0,V),P-=V}if(V<L.length&&R>0){var J=F.length-R,ee=Math.min(R,L.length-V);L.copy(F,J,V,V+ee),R-=ee}}return L.fill(0),{key:D,iv:F}}return evp_bytestokey=_,evp_bytestokey}var hasRequiredEncrypter;function requireEncrypter(){if(hasRequiredEncrypter)return encrypter;hasRequiredEncrypter=1;var E=requireModes$1(),A=requireAuthCipher(),_=requireSafeBuffer$1().Buffer,I=requireStreamCipher(),B=requireCipherBase(),T=requireAes(),R=requireEvp_bytestokey(),P=requireInherits_browser();function D(K,J,ee){B.call(this),this._cache=new L,this._cipher=new T.AES(J),this._prev=_.from(ee),this._mode=K,this._autopadding=!0}P(D,B),D.prototype._update=function(K){this._cache.add(K);for(var J,ee,ie=[];J=this._cache.get();)ee=this._mode.encrypt(this,J),ie.push(ee);return _.concat(ie)};var F=_.alloc(16,16);D.prototype._final=function(){var K=this._cache.flush();if(this._autopadding)return K=this._mode.encrypt(this,K),this._cipher.scrub(),K;if(!K.equals(F))throw this._cipher.scrub(),new Error("data not multiple of block length")},D.prototype.setAutoPadding=function(K){return this._autopadding=!!K,this};function L(){this.cache=_.allocUnsafe(0)}L.prototype.add=function(K){this.cache=_.concat([this.cache,K])},L.prototype.get=function(){if(this.cache.length>15){var K=this.cache.slice(0,16);return this.cache=this.cache.slice(16),K}return null},L.prototype.flush=function(){for(var K=16-this.cache.length,J=_.allocUnsafe(K),ee=-1;++ee<K;)J.writeUInt8(K,ee);return _.concat([this.cache,J])};function U(K,J,ee){var ie=E[K.toLowerCase()];if(!ie)throw new TypeError("invalid suite type");if(typeof J=="string"&&(J=_.from(J)),J.length!==ie.key/8)throw new TypeError("invalid key length "+J.length);if(typeof ee=="string"&&(ee=_.from(ee)),ie.mode!=="GCM"&&ee.length!==ie.iv)throw new TypeError("invalid iv length "+ee.length);return ie.type==="stream"?new I(ie.module,J,ee):ie.type==="auth"?new A(ie.module,J,ee):new D(ie.module,J,ee)}function V(K,J){var ee=E[K.toLowerCase()];if(!ee)throw new TypeError("invalid suite type");var ie=R(J,!1,ee.key,ee.iv);return U(K,ie.key,ie.iv)}return encrypter.createCipheriv=U,encrypter.createCipher=V,encrypter}var decrypter={},hasRequiredDecrypter;function requireDecrypter(){if(hasRequiredDecrypter)return decrypter;hasRequiredDecrypter=1;var E=requireAuthCipher(),A=requireSafeBuffer$1().Buffer,_=requireModes$1(),I=requireStreamCipher(),B=requireCipherBase(),T=requireAes(),R=requireEvp_bytestokey(),P=requireInherits_browser();function D(K,J,ee){B.call(this),this._cache=new F,this._last=void 0,this._cipher=new T.AES(J),this._prev=A.from(ee),this._mode=K,this._autopadding=!0}P(D,B),D.prototype._update=function(K){this._cache.add(K);for(var J,ee,ie=[];J=this._cache.get(this._autopadding);)ee=this._mode.decrypt(this,J),ie.push(ee);return A.concat(ie)},D.prototype._final=function(){var K=this._cache.flush();if(this._autopadding)return L(this._mode.decrypt(this,K));if(K)throw new Error("data not multiple of block length")},D.prototype.setAutoPadding=function(K){return this._autopadding=!!K,this};function F(){this.cache=A.allocUnsafe(0)}F.prototype.add=function(K){this.cache=A.concat([this.cache,K])},F.prototype.get=function(K){var J;if(K){if(this.cache.length>16)return J=this.cache.slice(0,16),this.cache=this.cache.slice(16),J}else if(this.cache.length>=16)return J=this.cache.slice(0,16),this.cache=this.cache.slice(16),J;return null},F.prototype.flush=function(){if(this.cache.length)return this.cache};function L(K){var J=K[15];if(J<1||J>16)throw new Error("unable to decrypt data");for(var ee=-1;++ee<J;)if(K[ee+(16-J)]!==J)throw new Error("unable to decrypt data");if(J!==16)return K.slice(0,16-J)}function U(K,J,ee){var ie=_[K.toLowerCase()];if(!ie)throw new TypeError("invalid suite type");if(typeof ee=="string"&&(ee=A.from(ee)),ie.mode!=="GCM"&&ee.length!==ie.iv)throw new TypeError("invalid iv length "+ee.length);if(typeof J=="string"&&(J=A.from(J)),J.length!==ie.key/8)throw new TypeError("invalid key length "+J.length);return ie.type==="stream"?new I(ie.module,J,ee,!0):ie.type==="auth"?new E(ie.module,J,ee,!0):new D(ie.module,J,ee)}function V(K,J){var ee=_[K.toLowerCase()];if(!ee)throw new TypeError("invalid suite type");var ie=R(J,!1,ee.key,ee.iv);return U(K,ie.key,ie.iv)}return decrypter.createDecipher=V,decrypter.createDecipheriv=U,decrypter}var hasRequiredBrowser$9;function requireBrowser$9(){if(hasRequiredBrowser$9)return browser$8;hasRequiredBrowser$9=1;var E=requireEncrypter(),A=requireDecrypter(),_=require$$2$2;function I(){return Object.keys(_)}return browser$8.createCipher=browser$8.Cipher=E.createCipher,browser$8.createCipheriv=browser$8.Cipheriv=E.createCipheriv,browser$8.createDecipher=browser$8.Decipher=A.createDecipher,browser$8.createDecipheriv=browser$8.Decipheriv=A.createDecipheriv,browser$8.listCiphers=browser$8.getCiphers=I,browser$8}var modes={},hasRequiredModes;function requireModes(){return hasRequiredModes||(hasRequiredModes=1,(function(E){E["des-ecb"]={key:8,iv:0},E["des-cbc"]=E.des={key:8,iv:8},E["des-ede3-cbc"]=E.des3={key:24,iv:8},E["des-ede3"]={key:24,iv:0},E["des-ede-cbc"]={key:16,iv:8},E["des-ede"]={key:16,iv:0}})(modes)),modes}var hasRequiredBrowser$8;function requireBrowser$8(){if(hasRequiredBrowser$8)return browser$9;hasRequiredBrowser$8=1;var E=requireBrowserifyDes(),A=requireBrowser$9(),_=requireModes$1(),I=requireModes(),B=requireEvp_bytestokey();function T(L,U){L=L.toLowerCase();var V,K;if(_[L])V=_[L].key,K=_[L].iv;else if(I[L])V=I[L].key*8,K=I[L].iv;else throw new TypeError("invalid suite type");var J=B(U,!1,V,K);return P(L,J.key,J.iv)}function R(L,U){L=L.toLowerCase();var V,K;if(_[L])V=_[L].key,K=_[L].iv;else if(I[L])V=I[L].key*8,K=I[L].iv;else throw new TypeError("invalid suite type");var J=B(U,!1,V,K);return D(L,J.key,J.iv)}function P(L,U,V){if(L=L.toLowerCase(),_[L])return A.createCipheriv(L,U,V);if(I[L])return new E({key:U,iv:V,mode:L});throw new TypeError("invalid suite type")}function D(L,U,V){if(L=L.toLowerCase(),_[L])return A.createDecipheriv(L,U,V);if(I[L])return new E({key:U,iv:V,mode:L,decrypt:!0});throw new TypeError("invalid suite type")}function F(){return Object.keys(I).concat(A.getCiphers())}return browser$9.createCipher=browser$9.Cipher=T,browser$9.createCipheriv=browser$9.Cipheriv=P,browser$9.createDecipher=browser$9.Decipher=R,browser$9.createDecipheriv=browser$9.Decipheriv=D,browser$9.listCiphers=browser$9.getCiphers=F,browser$9}var browser$7={},bn$d={exports:{}},bn$c=bn$d.exports,hasRequiredBn$6;function requireBn$6(){return hasRequiredBn$6||(hasRequiredBn$6=1,(function(E){(function(A,_){function I(ue,O){if(!ue)throw new Error(O||"Assertion failed")}function B(ue,O){ue.super_=O;var z=function(){};z.prototype=O.prototype,ue.prototype=new z,ue.prototype.constructor=ue}function T(ue,O,z){if(T.isBN(ue))return ue;this.negative=0,this.words=null,this.length=0,this.red=null,ue!==null&&((O==="le"||O==="be")&&(z=O,O=10),this._init(ue||0,O||10,z||"be"))}typeof A=="object"?A.exports=T:_.BN=T,T.BN=T,T.wordSize=26;var R;try{typeof window<"u"&&typeof window.Buffer<"u"?R=window.Buffer:R=requireDist$1().Buffer}catch{}T.isBN=function(O){return O instanceof T?!0:O!==null&&typeof O=="object"&&O.constructor.wordSize===T.wordSize&&Array.isArray(O.words)},T.max=function(O,z){return O.cmp(z)>0?O:z},T.min=function(O,z){return O.cmp(z)<0?O:z},T.prototype._init=function(O,z,Y){if(typeof O=="number")return this._initNumber(O,z,Y);if(typeof O=="object")return this._initArray(O,z,Y);z==="hex"&&(z=16),I(z===(z|0)&&z>=2&&z<=36),O=O.toString().replace(/\s+/g,"");var te=0;O[0]==="-"&&(te++,this.negative=1),te<O.length&&(z===16?this._parseHex(O,te,Y):(this._parseBase(O,z,te),Y==="le"&&this._initArray(this.toArray(),z,Y)))},T.prototype._initNumber=function(O,z,Y){O<0&&(this.negative=1,O=-O),O<67108864?(this.words=[O&67108863],this.length=1):O<4503599627370496?(this.words=[O&67108863,O/67108864&67108863],this.length=2):(I(O<9007199254740992),this.words=[O&67108863,O/67108864&67108863,1],this.length=3),Y==="le"&&this._initArray(this.toArray(),z,Y)},T.prototype._initArray=function(O,z,Y){if(I(typeof O.length=="number"),O.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(O.length/3),this.words=new Array(this.length);for(var te=0;te<this.length;te++)this.words[te]=0;var oe,le,he=0;if(Y==="be")for(te=O.length-1,oe=0;te>=0;te-=3)le=O[te]|O[te-1]<<8|O[te-2]<<16,this.words[oe]|=le<<he&67108863,this.words[oe+1]=le>>>26-he&67108863,he+=24,he>=26&&(he-=26,oe++);else if(Y==="le")for(te=0,oe=0;te<O.length;te+=3)le=O[te]|O[te+1]<<8|O[te+2]<<16,this.words[oe]|=le<<he&67108863,this.words[oe+1]=le>>>26-he&67108863,he+=24,he>=26&&(he-=26,oe++);return this.strip()};function P(ue,O){var z=ue.charCodeAt(O);return z>=65&&z<=70?z-55:z>=97&&z<=102?z-87:z-48&15}function D(ue,O,z){var Y=P(ue,z);return z-1>=O&&(Y|=P(ue,z-1)<<4),Y}T.prototype._parseHex=function(O,z,Y){this.length=Math.ceil((O.length-z)/6),this.words=new Array(this.length);for(var te=0;te<this.length;te++)this.words[te]=0;var oe=0,le=0,he;if(Y==="be")for(te=O.length-1;te>=z;te-=2)he=D(O,z,te)<<oe,this.words[le]|=he&67108863,oe>=18?(oe-=18,le+=1,this.words[le]|=he>>>26):oe+=8;else{var ae=O.length-z;for(te=ae%2===0?z+1:z;te<O.length;te+=2)he=D(O,z,te)<<oe,this.words[le]|=he&67108863,oe>=18?(oe-=18,le+=1,this.words[le]|=he>>>26):oe+=8}this.strip()};function F(ue,O,z,Y){for(var te=0,oe=Math.min(ue.length,z),le=O;le<oe;le++){var he=ue.charCodeAt(le)-48;te*=Y,he>=49?te+=he-49+10:he>=17?te+=he-17+10:te+=he}return te}T.prototype._parseBase=function(O,z,Y){this.words=[0],this.length=1;for(var te=0,oe=1;oe<=67108863;oe*=z)te++;te--,oe=oe/z|0;for(var le=O.length-Y,he=le%te,ae=Math.min(le,le-he)+Y,Q=0,se=Y;se<ae;se+=te)Q=F(O,se,se+te,z),this.imuln(oe),this.words[0]+Q<67108864?this.words[0]+=Q:this._iaddn(Q);if(he!==0){var Ae=1;for(Q=F(O,se,O.length,z),se=0;se<he;se++)Ae*=z;this.imuln(Ae),this.words[0]+Q<67108864?this.words[0]+=Q:this._iaddn(Q)}this.strip()},T.prototype.copy=function(O){O.words=new Array(this.length);for(var z=0;z<this.length;z++)O.words[z]=this.words[z];O.length=this.length,O.negative=this.negative,O.red=this.red},T.prototype.clone=function(){var O=new T(null);return this.copy(O),O},T.prototype._expand=function(O){for(;this.length<O;)this.words[this.length++]=0;return this},T.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},T.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},T.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var L=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],U=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],V=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];T.prototype.toString=function(O,z){O=O||10,z=z|0||1;var Y;if(O===16||O==="hex"){Y="";for(var te=0,oe=0,le=0;le<this.length;le++){var he=this.words[le],ae=((he<<te|oe)&16777215).toString(16);oe=he>>>24-te&16777215,te+=2,te>=26&&(te-=26,le--),oe!==0||le!==this.length-1?Y=L[6-ae.length]+ae+Y:Y=ae+Y}for(oe!==0&&(Y=oe.toString(16)+Y);Y.length%z!==0;)Y="0"+Y;return this.negative!==0&&(Y="-"+Y),Y}if(O===(O|0)&&O>=2&&O<=36){var Q=U[O],se=V[O];Y="";var Ae=this.clone();for(Ae.negative=0;!Ae.isZero();){var ge=Ae.modn(se).toString(O);Ae=Ae.idivn(se),Ae.isZero()?Y=ge+Y:Y=L[Q-ge.length]+ge+Y}for(this.isZero()&&(Y="0"+Y);Y.length%z!==0;)Y="0"+Y;return this.negative!==0&&(Y="-"+Y),Y}I(!1,"Base should be between 2 and 36")},T.prototype.toNumber=function(){var O=this.words[0];return this.length===2?O+=this.words[1]*67108864:this.length===3&&this.words[2]===1?O+=4503599627370496+this.words[1]*67108864:this.length>2&&I(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-O:O},T.prototype.toJSON=function(){return this.toString(16)},T.prototype.toBuffer=function(O,z){return I(typeof R<"u"),this.toArrayLike(R,O,z)},T.prototype.toArray=function(O,z){return this.toArrayLike(Array,O,z)},T.prototype.toArrayLike=function(O,z,Y){var te=this.byteLength(),oe=Y||Math.max(1,te);I(te<=oe,"byte array longer than desired length"),I(oe>0,"Requested array length <= 0"),this.strip();var le=z==="le",he=new O(oe),ae,Q,se=this.clone();if(le){for(Q=0;!se.isZero();Q++)ae=se.andln(255),se.iushrn(8),he[Q]=ae;for(;Q<oe;Q++)he[Q]=0}else{for(Q=0;Q<oe-te;Q++)he[Q]=0;for(Q=0;!se.isZero();Q++)ae=se.andln(255),se.iushrn(8),he[oe-Q-1]=ae}return he},Math.clz32?T.prototype._countBits=function(O){return 32-Math.clz32(O)}:T.prototype._countBits=function(O){var z=O,Y=0;return z>=4096&&(Y+=13,z>>>=13),z>=64&&(Y+=7,z>>>=7),z>=8&&(Y+=4,z>>>=4),z>=2&&(Y+=2,z>>>=2),Y+z},T.prototype._zeroBits=function(O){if(O===0)return 26;var z=O,Y=0;return(z&8191)===0&&(Y+=13,z>>>=13),(z&127)===0&&(Y+=7,z>>>=7),(z&15)===0&&(Y+=4,z>>>=4),(z&3)===0&&(Y+=2,z>>>=2),(z&1)===0&&Y++,Y},T.prototype.bitLength=function(){var O=this.words[this.length-1],z=this._countBits(O);return(this.length-1)*26+z};function K(ue){for(var O=new Array(ue.bitLength()),z=0;z<O.length;z++){var Y=z/26|0,te=z%26;O[z]=(ue.words[Y]&1<<te)>>>te}return O}T.prototype.zeroBits=function(){if(this.isZero())return 0;for(var O=0,z=0;z<this.length;z++){var Y=this._zeroBits(this.words[z]);if(O+=Y,Y!==26)break}return O},T.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},T.prototype.toTwos=function(O){return this.negative!==0?this.abs().inotn(O).iaddn(1):this.clone()},T.prototype.fromTwos=function(O){return this.testn(O-1)?this.notn(O).iaddn(1).ineg():this.clone()},T.prototype.isNeg=function(){return this.negative!==0},T.prototype.neg=function(){return this.clone().ineg()},T.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},T.prototype.iuor=function(O){for(;this.length<O.length;)this.words[this.length++]=0;for(var z=0;z<O.length;z++)this.words[z]=this.words[z]|O.words[z];return this.strip()},T.prototype.ior=function(O){return I((this.negative|O.negative)===0),this.iuor(O)},T.prototype.or=function(O){return this.length>O.length?this.clone().ior(O):O.clone().ior(this)},T.prototype.uor=function(O){return this.length>O.length?this.clone().iuor(O):O.clone().iuor(this)},T.prototype.iuand=function(O){var z;this.length>O.length?z=O:z=this;for(var Y=0;Y<z.length;Y++)this.words[Y]=this.words[Y]&O.words[Y];return this.length=z.length,this.strip()},T.prototype.iand=function(O){return I((this.negative|O.negative)===0),this.iuand(O)},T.prototype.and=function(O){return this.length>O.length?this.clone().iand(O):O.clone().iand(this)},T.prototype.uand=function(O){return this.length>O.length?this.clone().iuand(O):O.clone().iuand(this)},T.prototype.iuxor=function(O){var z,Y;this.length>O.length?(z=this,Y=O):(z=O,Y=this);for(var te=0;te<Y.length;te++)this.words[te]=z.words[te]^Y.words[te];if(this!==z)for(;te<z.length;te++)this.words[te]=z.words[te];return this.length=z.length,this.strip()},T.prototype.ixor=function(O){return I((this.negative|O.negative)===0),this.iuxor(O)},T.prototype.xor=function(O){return this.length>O.length?this.clone().ixor(O):O.clone().ixor(this)},T.prototype.uxor=function(O){return this.length>O.length?this.clone().iuxor(O):O.clone().iuxor(this)},T.prototype.inotn=function(O){I(typeof O=="number"&&O>=0);var z=Math.ceil(O/26)|0,Y=O%26;this._expand(z),Y>0&&z--;for(var te=0;te<z;te++)this.words[te]=~this.words[te]&67108863;return Y>0&&(this.words[te]=~this.words[te]&67108863>>26-Y),this.strip()},T.prototype.notn=function(O){return this.clone().inotn(O)},T.prototype.setn=function(O,z){I(typeof O=="number"&&O>=0);var Y=O/26|0,te=O%26;return this._expand(Y+1),z?this.words[Y]=this.words[Y]|1<<te:this.words[Y]=this.words[Y]&~(1<<te),this.strip()},T.prototype.iadd=function(O){var z;if(this.negative!==0&&O.negative===0)return this.negative=0,z=this.isub(O),this.negative^=1,this._normSign();if(this.negative===0&&O.negative!==0)return O.negative=0,z=this.isub(O),O.negative=1,z._normSign();var Y,te;this.length>O.length?(Y=this,te=O):(Y=O,te=this);for(var oe=0,le=0;le<te.length;le++)z=(Y.words[le]|0)+(te.words[le]|0)+oe,this.words[le]=z&67108863,oe=z>>>26;for(;oe!==0&&le<Y.length;le++)z=(Y.words[le]|0)+oe,this.words[le]=z&67108863,oe=z>>>26;if(this.length=Y.length,oe!==0)this.words[this.length]=oe,this.length++;else if(Y!==this)for(;le<Y.length;le++)this.words[le]=Y.words[le];return this},T.prototype.add=function(O){var z;return O.negative!==0&&this.negative===0?(O.negative=0,z=this.sub(O),O.negative^=1,z):O.negative===0&&this.negative!==0?(this.negative=0,z=O.sub(this),this.negative=1,z):this.length>O.length?this.clone().iadd(O):O.clone().iadd(this)},T.prototype.isub=function(O){if(O.negative!==0){O.negative=0;var z=this.iadd(O);return O.negative=1,z._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(O),this.negative=1,this._normSign();var Y=this.cmp(O);if(Y===0)return this.negative=0,this.length=1,this.words[0]=0,this;var te,oe;Y>0?(te=this,oe=O):(te=O,oe=this);for(var le=0,he=0;he<oe.length;he++)z=(te.words[he]|0)-(oe.words[he]|0)+le,le=z>>26,this.words[he]=z&67108863;for(;le!==0&&he<te.length;he++)z=(te.words[he]|0)+le,le=z>>26,this.words[he]=z&67108863;if(le===0&&he<te.length&&te!==this)for(;he<te.length;he++)this.words[he]=te.words[he];return this.length=Math.max(this.length,he),te!==this&&(this.negative=1),this.strip()},T.prototype.sub=function(O){return this.clone().isub(O)};function J(ue,O,z){z.negative=O.negative^ue.negative;var Y=ue.length+O.length|0;z.length=Y,Y=Y-1|0;var te=ue.words[0]|0,oe=O.words[0]|0,le=te*oe,he=le&67108863,ae=le/67108864|0;z.words[0]=he;for(var Q=1;Q<Y;Q++){for(var se=ae>>>26,Ae=ae&67108863,ge=Math.min(Q,O.length-1),Ee=Math.max(0,Q-ue.length+1);Ee<=ge;Ee++){var ke=Q-Ee|0;te=ue.words[ke]|0,oe=O.words[Ee]|0,le=te*oe+Ae,se+=le/67108864|0,Ae=le&67108863}z.words[Q]=Ae|0,ae=se|0}return ae!==0?z.words[Q]=ae|0:z.length--,z.strip()}var ee=function(O,z,Y){var te=O.words,oe=z.words,le=Y.words,he=0,ae,Q,se,Ae=te[0]|0,ge=Ae&8191,Ee=Ae>>>13,ke=te[1]|0,Se=ke&8191,Ie=ke>>>13,we=te[2]|0,xe=we&8191,Fe=we>>>13,Ge=te[3]|0,Oe=Ge&8191,et=Ge>>>13,Mt=te[4]|0,dt=Mt&8191,mt=Mt>>>13,Ut=te[5]|0,St=Ut&8191,vt=Ut>>>13,It=te[6]|0,yt=It&8191,Tt=It>>>13,Wt=te[7]|0,ft=Wt&8191,_t=Wt>>>13,Xt=te[8]|0,Nt=Xt&8191,qt=Xt>>>13,nr=te[9]|0,ze=nr&8191,Ce=nr>>>13,Le=oe[0]|0,Ze=Le&8191,Je=Le>>>13,nt=oe[1]|0,rt=nt&8191,He=nt>>>13,Dt=oe[2]|0,Rt=Dt&8191,De=Dt>>>13,We=oe[3]|0,Ve=We&8191,qe=We>>>13,pt=oe[4]|0,At=pt&8191,jt=pt>>>13,rr=oe[5]|0,Ke=rr&8191,Ne=rr>>>13,Ye=oe[6]|0,st=Ye&8191,bt=Ye>>>13,Qe=oe[7]|0,Re=Qe&8191,Pe=Qe>>>13,Me=oe[8]|0,$e=Me&8191,it=Me>>>13,kt=oe[9]|0,xt=kt&8191,Ot=kt>>>13;Y.negative=O.negative^z.negative,Y.length=19,ae=Math.imul(ge,Ze),Q=Math.imul(ge,Je),Q=Q+Math.imul(Ee,Ze)|0,se=Math.imul(Ee,Je);var Jt=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,ae=Math.imul(Se,Ze),Q=Math.imul(Se,Je),Q=Q+Math.imul(Ie,Ze)|0,se=Math.imul(Ie,Je),ae=ae+Math.imul(ge,rt)|0,Q=Q+Math.imul(ge,He)|0,Q=Q+Math.imul(Ee,rt)|0,se=se+Math.imul(Ee,He)|0;var tr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(tr>>>26)|0,tr&=67108863,ae=Math.imul(xe,Ze),Q=Math.imul(xe,Je),Q=Q+Math.imul(Fe,Ze)|0,se=Math.imul(Fe,Je),ae=ae+Math.imul(Se,rt)|0,Q=Q+Math.imul(Se,He)|0,Q=Q+Math.imul(Ie,rt)|0,se=se+Math.imul(Ie,He)|0,ae=ae+Math.imul(ge,Rt)|0,Q=Q+Math.imul(ge,De)|0,Q=Q+Math.imul(Ee,Rt)|0,se=se+Math.imul(Ee,De)|0;var br=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(br>>>26)|0,br&=67108863,ae=Math.imul(Oe,Ze),Q=Math.imul(Oe,Je),Q=Q+Math.imul(et,Ze)|0,se=Math.imul(et,Je),ae=ae+Math.imul(xe,rt)|0,Q=Q+Math.imul(xe,He)|0,Q=Q+Math.imul(Fe,rt)|0,se=se+Math.imul(Fe,He)|0,ae=ae+Math.imul(Se,Rt)|0,Q=Q+Math.imul(Se,De)|0,Q=Q+Math.imul(Ie,Rt)|0,se=se+Math.imul(Ie,De)|0,ae=ae+Math.imul(ge,Ve)|0,Q=Q+Math.imul(ge,qe)|0,Q=Q+Math.imul(Ee,Ve)|0,se=se+Math.imul(Ee,qe)|0;var ar=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(ar>>>26)|0,ar&=67108863,ae=Math.imul(dt,Ze),Q=Math.imul(dt,Je),Q=Q+Math.imul(mt,Ze)|0,se=Math.imul(mt,Je),ae=ae+Math.imul(Oe,rt)|0,Q=Q+Math.imul(Oe,He)|0,Q=Q+Math.imul(et,rt)|0,se=se+Math.imul(et,He)|0,ae=ae+Math.imul(xe,Rt)|0,Q=Q+Math.imul(xe,De)|0,Q=Q+Math.imul(Fe,Rt)|0,se=se+Math.imul(Fe,De)|0,ae=ae+Math.imul(Se,Ve)|0,Q=Q+Math.imul(Se,qe)|0,Q=Q+Math.imul(Ie,Ve)|0,se=se+Math.imul(Ie,qe)|0,ae=ae+Math.imul(ge,At)|0,Q=Q+Math.imul(ge,jt)|0,Q=Q+Math.imul(Ee,At)|0,se=se+Math.imul(Ee,jt)|0;var _r=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(_r>>>26)|0,_r&=67108863,ae=Math.imul(St,Ze),Q=Math.imul(St,Je),Q=Q+Math.imul(vt,Ze)|0,se=Math.imul(vt,Je),ae=ae+Math.imul(dt,rt)|0,Q=Q+Math.imul(dt,He)|0,Q=Q+Math.imul(mt,rt)|0,se=se+Math.imul(mt,He)|0,ae=ae+Math.imul(Oe,Rt)|0,Q=Q+Math.imul(Oe,De)|0,Q=Q+Math.imul(et,Rt)|0,se=se+Math.imul(et,De)|0,ae=ae+Math.imul(xe,Ve)|0,Q=Q+Math.imul(xe,qe)|0,Q=Q+Math.imul(Fe,Ve)|0,se=se+Math.imul(Fe,qe)|0,ae=ae+Math.imul(Se,At)|0,Q=Q+Math.imul(Se,jt)|0,Q=Q+Math.imul(Ie,At)|0,se=se+Math.imul(Ie,jt)|0,ae=ae+Math.imul(ge,Ke)|0,Q=Q+Math.imul(ge,Ne)|0,Q=Q+Math.imul(Ee,Ke)|0,se=se+Math.imul(Ee,Ne)|0;var or=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(or>>>26)|0,or&=67108863,ae=Math.imul(yt,Ze),Q=Math.imul(yt,Je),Q=Q+Math.imul(Tt,Ze)|0,se=Math.imul(Tt,Je),ae=ae+Math.imul(St,rt)|0,Q=Q+Math.imul(St,He)|0,Q=Q+Math.imul(vt,rt)|0,se=se+Math.imul(vt,He)|0,ae=ae+Math.imul(dt,Rt)|0,Q=Q+Math.imul(dt,De)|0,Q=Q+Math.imul(mt,Rt)|0,se=se+Math.imul(mt,De)|0,ae=ae+Math.imul(Oe,Ve)|0,Q=Q+Math.imul(Oe,qe)|0,Q=Q+Math.imul(et,Ve)|0,se=se+Math.imul(et,qe)|0,ae=ae+Math.imul(xe,At)|0,Q=Q+Math.imul(xe,jt)|0,Q=Q+Math.imul(Fe,At)|0,se=se+Math.imul(Fe,jt)|0,ae=ae+Math.imul(Se,Ke)|0,Q=Q+Math.imul(Se,Ne)|0,Q=Q+Math.imul(Ie,Ke)|0,se=se+Math.imul(Ie,Ne)|0,ae=ae+Math.imul(ge,st)|0,Q=Q+Math.imul(ge,bt)|0,Q=Q+Math.imul(Ee,st)|0,se=se+Math.imul(Ee,bt)|0;var gr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(gr>>>26)|0,gr&=67108863,ae=Math.imul(ft,Ze),Q=Math.imul(ft,Je),Q=Q+Math.imul(_t,Ze)|0,se=Math.imul(_t,Je),ae=ae+Math.imul(yt,rt)|0,Q=Q+Math.imul(yt,He)|0,Q=Q+Math.imul(Tt,rt)|0,se=se+Math.imul(Tt,He)|0,ae=ae+Math.imul(St,Rt)|0,Q=Q+Math.imul(St,De)|0,Q=Q+Math.imul(vt,Rt)|0,se=se+Math.imul(vt,De)|0,ae=ae+Math.imul(dt,Ve)|0,Q=Q+Math.imul(dt,qe)|0,Q=Q+Math.imul(mt,Ve)|0,se=se+Math.imul(mt,qe)|0,ae=ae+Math.imul(Oe,At)|0,Q=Q+Math.imul(Oe,jt)|0,Q=Q+Math.imul(et,At)|0,se=se+Math.imul(et,jt)|0,ae=ae+Math.imul(xe,Ke)|0,Q=Q+Math.imul(xe,Ne)|0,Q=Q+Math.imul(Fe,Ke)|0,se=se+Math.imul(Fe,Ne)|0,ae=ae+Math.imul(Se,st)|0,Q=Q+Math.imul(Se,bt)|0,Q=Q+Math.imul(Ie,st)|0,se=se+Math.imul(Ie,bt)|0,ae=ae+Math.imul(ge,Re)|0,Q=Q+Math.imul(ge,Pe)|0,Q=Q+Math.imul(Ee,Re)|0,se=se+Math.imul(Ee,Pe)|0;var xr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(xr>>>26)|0,xr&=67108863,ae=Math.imul(Nt,Ze),Q=Math.imul(Nt,Je),Q=Q+Math.imul(qt,Ze)|0,se=Math.imul(qt,Je),ae=ae+Math.imul(ft,rt)|0,Q=Q+Math.imul(ft,He)|0,Q=Q+Math.imul(_t,rt)|0,se=se+Math.imul(_t,He)|0,ae=ae+Math.imul(yt,Rt)|0,Q=Q+Math.imul(yt,De)|0,Q=Q+Math.imul(Tt,Rt)|0,se=se+Math.imul(Tt,De)|0,ae=ae+Math.imul(St,Ve)|0,Q=Q+Math.imul(St,qe)|0,Q=Q+Math.imul(vt,Ve)|0,se=se+Math.imul(vt,qe)|0,ae=ae+Math.imul(dt,At)|0,Q=Q+Math.imul(dt,jt)|0,Q=Q+Math.imul(mt,At)|0,se=se+Math.imul(mt,jt)|0,ae=ae+Math.imul(Oe,Ke)|0,Q=Q+Math.imul(Oe,Ne)|0,Q=Q+Math.imul(et,Ke)|0,se=se+Math.imul(et,Ne)|0,ae=ae+Math.imul(xe,st)|0,Q=Q+Math.imul(xe,bt)|0,Q=Q+Math.imul(Fe,st)|0,se=se+Math.imul(Fe,bt)|0,ae=ae+Math.imul(Se,Re)|0,Q=Q+Math.imul(Se,Pe)|0,Q=Q+Math.imul(Ie,Re)|0,se=se+Math.imul(Ie,Pe)|0,ae=ae+Math.imul(ge,$e)|0,Q=Q+Math.imul(ge,it)|0,Q=Q+Math.imul(Ee,$e)|0,se=se+Math.imul(Ee,it)|0;var vr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(vr>>>26)|0,vr&=67108863,ae=Math.imul(ze,Ze),Q=Math.imul(ze,Je),Q=Q+Math.imul(Ce,Ze)|0,se=Math.imul(Ce,Je),ae=ae+Math.imul(Nt,rt)|0,Q=Q+Math.imul(Nt,He)|0,Q=Q+Math.imul(qt,rt)|0,se=se+Math.imul(qt,He)|0,ae=ae+Math.imul(ft,Rt)|0,Q=Q+Math.imul(ft,De)|0,Q=Q+Math.imul(_t,Rt)|0,se=se+Math.imul(_t,De)|0,ae=ae+Math.imul(yt,Ve)|0,Q=Q+Math.imul(yt,qe)|0,Q=Q+Math.imul(Tt,Ve)|0,se=se+Math.imul(Tt,qe)|0,ae=ae+Math.imul(St,At)|0,Q=Q+Math.imul(St,jt)|0,Q=Q+Math.imul(vt,At)|0,se=se+Math.imul(vt,jt)|0,ae=ae+Math.imul(dt,Ke)|0,Q=Q+Math.imul(dt,Ne)|0,Q=Q+Math.imul(mt,Ke)|0,se=se+Math.imul(mt,Ne)|0,ae=ae+Math.imul(Oe,st)|0,Q=Q+Math.imul(Oe,bt)|0,Q=Q+Math.imul(et,st)|0,se=se+Math.imul(et,bt)|0,ae=ae+Math.imul(xe,Re)|0,Q=Q+Math.imul(xe,Pe)|0,Q=Q+Math.imul(Fe,Re)|0,se=se+Math.imul(Fe,Pe)|0,ae=ae+Math.imul(Se,$e)|0,Q=Q+Math.imul(Se,it)|0,Q=Q+Math.imul(Ie,$e)|0,se=se+Math.imul(Ie,it)|0,ae=ae+Math.imul(ge,xt)|0,Q=Q+Math.imul(ge,Ot)|0,Q=Q+Math.imul(Ee,xt)|0,se=se+Math.imul(Ee,Ot)|0;var Cr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,ae=Math.imul(ze,rt),Q=Math.imul(ze,He),Q=Q+Math.imul(Ce,rt)|0,se=Math.imul(Ce,He),ae=ae+Math.imul(Nt,Rt)|0,Q=Q+Math.imul(Nt,De)|0,Q=Q+Math.imul(qt,Rt)|0,se=se+Math.imul(qt,De)|0,ae=ae+Math.imul(ft,Ve)|0,Q=Q+Math.imul(ft,qe)|0,Q=Q+Math.imul(_t,Ve)|0,se=se+Math.imul(_t,qe)|0,ae=ae+Math.imul(yt,At)|0,Q=Q+Math.imul(yt,jt)|0,Q=Q+Math.imul(Tt,At)|0,se=se+Math.imul(Tt,jt)|0,ae=ae+Math.imul(St,Ke)|0,Q=Q+Math.imul(St,Ne)|0,Q=Q+Math.imul(vt,Ke)|0,se=se+Math.imul(vt,Ne)|0,ae=ae+Math.imul(dt,st)|0,Q=Q+Math.imul(dt,bt)|0,Q=Q+Math.imul(mt,st)|0,se=se+Math.imul(mt,bt)|0,ae=ae+Math.imul(Oe,Re)|0,Q=Q+Math.imul(Oe,Pe)|0,Q=Q+Math.imul(et,Re)|0,se=se+Math.imul(et,Pe)|0,ae=ae+Math.imul(xe,$e)|0,Q=Q+Math.imul(xe,it)|0,Q=Q+Math.imul(Fe,$e)|0,se=se+Math.imul(Fe,it)|0,ae=ae+Math.imul(Se,xt)|0,Q=Q+Math.imul(Se,Ot)|0,Q=Q+Math.imul(Ie,xt)|0,se=se+Math.imul(Ie,Ot)|0;var Sr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(Sr>>>26)|0,Sr&=67108863,ae=Math.imul(ze,Rt),Q=Math.imul(ze,De),Q=Q+Math.imul(Ce,Rt)|0,se=Math.imul(Ce,De),ae=ae+Math.imul(Nt,Ve)|0,Q=Q+Math.imul(Nt,qe)|0,Q=Q+Math.imul(qt,Ve)|0,se=se+Math.imul(qt,qe)|0,ae=ae+Math.imul(ft,At)|0,Q=Q+Math.imul(ft,jt)|0,Q=Q+Math.imul(_t,At)|0,se=se+Math.imul(_t,jt)|0,ae=ae+Math.imul(yt,Ke)|0,Q=Q+Math.imul(yt,Ne)|0,Q=Q+Math.imul(Tt,Ke)|0,se=se+Math.imul(Tt,Ne)|0,ae=ae+Math.imul(St,st)|0,Q=Q+Math.imul(St,bt)|0,Q=Q+Math.imul(vt,st)|0,se=se+Math.imul(vt,bt)|0,ae=ae+Math.imul(dt,Re)|0,Q=Q+Math.imul(dt,Pe)|0,Q=Q+Math.imul(mt,Re)|0,se=se+Math.imul(mt,Pe)|0,ae=ae+Math.imul(Oe,$e)|0,Q=Q+Math.imul(Oe,it)|0,Q=Q+Math.imul(et,$e)|0,se=se+Math.imul(et,it)|0,ae=ae+Math.imul(xe,xt)|0,Q=Q+Math.imul(xe,Ot)|0,Q=Q+Math.imul(Fe,xt)|0,se=se+Math.imul(Fe,Ot)|0;var dr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(dr>>>26)|0,dr&=67108863,ae=Math.imul(ze,Ve),Q=Math.imul(ze,qe),Q=Q+Math.imul(Ce,Ve)|0,se=Math.imul(Ce,qe),ae=ae+Math.imul(Nt,At)|0,Q=Q+Math.imul(Nt,jt)|0,Q=Q+Math.imul(qt,At)|0,se=se+Math.imul(qt,jt)|0,ae=ae+Math.imul(ft,Ke)|0,Q=Q+Math.imul(ft,Ne)|0,Q=Q+Math.imul(_t,Ke)|0,se=se+Math.imul(_t,Ne)|0,ae=ae+Math.imul(yt,st)|0,Q=Q+Math.imul(yt,bt)|0,Q=Q+Math.imul(Tt,st)|0,se=se+Math.imul(Tt,bt)|0,ae=ae+Math.imul(St,Re)|0,Q=Q+Math.imul(St,Pe)|0,Q=Q+Math.imul(vt,Re)|0,se=se+Math.imul(vt,Pe)|0,ae=ae+Math.imul(dt,$e)|0,Q=Q+Math.imul(dt,it)|0,Q=Q+Math.imul(mt,$e)|0,se=se+Math.imul(mt,it)|0,ae=ae+Math.imul(Oe,xt)|0,Q=Q+Math.imul(Oe,Ot)|0,Q=Q+Math.imul(et,xt)|0,se=se+Math.imul(et,Ot)|0;var wr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(wr>>>26)|0,wr&=67108863,ae=Math.imul(ze,At),Q=Math.imul(ze,jt),Q=Q+Math.imul(Ce,At)|0,se=Math.imul(Ce,jt),ae=ae+Math.imul(Nt,Ke)|0,Q=Q+Math.imul(Nt,Ne)|0,Q=Q+Math.imul(qt,Ke)|0,se=se+Math.imul(qt,Ne)|0,ae=ae+Math.imul(ft,st)|0,Q=Q+Math.imul(ft,bt)|0,Q=Q+Math.imul(_t,st)|0,se=se+Math.imul(_t,bt)|0,ae=ae+Math.imul(yt,Re)|0,Q=Q+Math.imul(yt,Pe)|0,Q=Q+Math.imul(Tt,Re)|0,se=se+Math.imul(Tt,Pe)|0,ae=ae+Math.imul(St,$e)|0,Q=Q+Math.imul(St,it)|0,Q=Q+Math.imul(vt,$e)|0,se=se+Math.imul(vt,it)|0,ae=ae+Math.imul(dt,xt)|0,Q=Q+Math.imul(dt,Ot)|0,Q=Q+Math.imul(mt,xt)|0,se=se+Math.imul(mt,Ot)|0;var fr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(fr>>>26)|0,fr&=67108863,ae=Math.imul(ze,Ke),Q=Math.imul(ze,Ne),Q=Q+Math.imul(Ce,Ke)|0,se=Math.imul(Ce,Ne),ae=ae+Math.imul(Nt,st)|0,Q=Q+Math.imul(Nt,bt)|0,Q=Q+Math.imul(qt,st)|0,se=se+Math.imul(qt,bt)|0,ae=ae+Math.imul(ft,Re)|0,Q=Q+Math.imul(ft,Pe)|0,Q=Q+Math.imul(_t,Re)|0,se=se+Math.imul(_t,Pe)|0,ae=ae+Math.imul(yt,$e)|0,Q=Q+Math.imul(yt,it)|0,Q=Q+Math.imul(Tt,$e)|0,se=se+Math.imul(Tt,it)|0,ae=ae+Math.imul(St,xt)|0,Q=Q+Math.imul(St,Ot)|0,Q=Q+Math.imul(vt,xt)|0,se=se+Math.imul(vt,Ot)|0;var hr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(hr>>>26)|0,hr&=67108863,ae=Math.imul(ze,st),Q=Math.imul(ze,bt),Q=Q+Math.imul(Ce,st)|0,se=Math.imul(Ce,bt),ae=ae+Math.imul(Nt,Re)|0,Q=Q+Math.imul(Nt,Pe)|0,Q=Q+Math.imul(qt,Re)|0,se=se+Math.imul(qt,Pe)|0,ae=ae+Math.imul(ft,$e)|0,Q=Q+Math.imul(ft,it)|0,Q=Q+Math.imul(_t,$e)|0,se=se+Math.imul(_t,it)|0,ae=ae+Math.imul(yt,xt)|0,Q=Q+Math.imul(yt,Ot)|0,Q=Q+Math.imul(Tt,xt)|0,se=se+Math.imul(Tt,Ot)|0;var Ar=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,ae=Math.imul(ze,Re),Q=Math.imul(ze,Pe),Q=Q+Math.imul(Ce,Re)|0,se=Math.imul(Ce,Pe),ae=ae+Math.imul(Nt,$e)|0,Q=Q+Math.imul(Nt,it)|0,Q=Q+Math.imul(qt,$e)|0,se=se+Math.imul(qt,it)|0,ae=ae+Math.imul(ft,xt)|0,Q=Q+Math.imul(ft,Ot)|0,Q=Q+Math.imul(_t,xt)|0,se=se+Math.imul(_t,Ot)|0;var ur=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(ur>>>26)|0,ur&=67108863,ae=Math.imul(ze,$e),Q=Math.imul(ze,it),Q=Q+Math.imul(Ce,$e)|0,se=Math.imul(Ce,it),ae=ae+Math.imul(Nt,xt)|0,Q=Q+Math.imul(Nt,Ot)|0,Q=Q+Math.imul(qt,xt)|0,se=se+Math.imul(qt,Ot)|0;var zt=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(zt>>>26)|0,zt&=67108863,ae=Math.imul(ze,xt),Q=Math.imul(ze,Ot),Q=Q+Math.imul(Ce,xt)|0,se=Math.imul(Ce,Ot);var Kt=(he+ae|0)+((Q&8191)<<13)|0;return he=(se+(Q>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,le[0]=Jt,le[1]=tr,le[2]=br,le[3]=ar,le[4]=_r,le[5]=or,le[6]=gr,le[7]=xr,le[8]=vr,le[9]=Cr,le[10]=Sr,le[11]=dr,le[12]=wr,le[13]=fr,le[14]=hr,le[15]=Ar,le[16]=ur,le[17]=zt,le[18]=Kt,he!==0&&(le[19]=he,Y.length++),Y};Math.imul||(ee=J);function ie(ue,O,z){z.negative=O.negative^ue.negative,z.length=ue.length+O.length;for(var Y=0,te=0,oe=0;oe<z.length-1;oe++){var le=te;te=0;for(var he=Y&67108863,ae=Math.min(oe,O.length-1),Q=Math.max(0,oe-ue.length+1);Q<=ae;Q++){var se=oe-Q,Ae=ue.words[se]|0,ge=O.words[Q]|0,Ee=Ae*ge,ke=Ee&67108863;le=le+(Ee/67108864|0)|0,ke=ke+he|0,he=ke&67108863,le=le+(ke>>>26)|0,te+=le>>>26,le&=67108863}z.words[oe]=he,Y=le,le=te}return Y!==0?z.words[oe]=Y:z.length--,z.strip()}function ne(ue,O,z){var Y=new ce;return Y.mulp(ue,O,z)}T.prototype.mulTo=function(O,z){var Y,te=this.length+O.length;return this.length===10&&O.length===10?Y=ee(this,O,z):te<63?Y=J(this,O,z):te<1024?Y=ie(this,O,z):Y=ne(this,O,z),Y};function ce(ue,O){this.x=ue,this.y=O}ce.prototype.makeRBT=function(O){for(var z=new Array(O),Y=T.prototype._countBits(O)-1,te=0;te<O;te++)z[te]=this.revBin(te,Y,O);return z},ce.prototype.revBin=function(O,z,Y){if(O===0||O===Y-1)return O;for(var te=0,oe=0;oe<z;oe++)te|=(O&1)<<z-oe-1,O>>=1;return te},ce.prototype.permute=function(O,z,Y,te,oe,le){for(var he=0;he<le;he++)te[he]=z[O[he]],oe[he]=Y[O[he]]},ce.prototype.transform=function(O,z,Y,te,oe,le){this.permute(le,O,z,Y,te,oe);for(var he=1;he<oe;he<<=1)for(var ae=he<<1,Q=Math.cos(2*Math.PI/ae),se=Math.sin(2*Math.PI/ae),Ae=0;Ae<oe;Ae+=ae)for(var ge=Q,Ee=se,ke=0;ke<he;ke++){var Se=Y[Ae+ke],Ie=te[Ae+ke],we=Y[Ae+ke+he],xe=te[Ae+ke+he],Fe=ge*we-Ee*xe;xe=ge*xe+Ee*we,we=Fe,Y[Ae+ke]=Se+we,te[Ae+ke]=Ie+xe,Y[Ae+ke+he]=Se-we,te[Ae+ke+he]=Ie-xe,ke!==ae&&(Fe=Q*ge-se*Ee,Ee=Q*Ee+se*ge,ge=Fe)}},ce.prototype.guessLen13b=function(O,z){var Y=Math.max(z,O)|1,te=Y&1,oe=0;for(Y=Y/2|0;Y;Y=Y>>>1)oe++;return 1<<oe+1+te},ce.prototype.conjugate=function(O,z,Y){if(!(Y<=1))for(var te=0;te<Y/2;te++){var oe=O[te];O[te]=O[Y-te-1],O[Y-te-1]=oe,oe=z[te],z[te]=-z[Y-te-1],z[Y-te-1]=-oe}},ce.prototype.normalize13b=function(O,z){for(var Y=0,te=0;te<z/2;te++){var oe=Math.round(O[2*te+1]/z)*8192+Math.round(O[2*te]/z)+Y;O[te]=oe&67108863,oe<67108864?Y=0:Y=oe/67108864|0}return O},ce.prototype.convert13b=function(O,z,Y,te){for(var oe=0,le=0;le<z;le++)oe=oe+(O[le]|0),Y[2*le]=oe&8191,oe=oe>>>13,Y[2*le+1]=oe&8191,oe=oe>>>13;for(le=2*z;le<te;++le)Y[le]=0;I(oe===0),I((oe&-8192)===0)},ce.prototype.stub=function(O){for(var z=new Array(O),Y=0;Y<O;Y++)z[Y]=0;return z},ce.prototype.mulp=function(O,z,Y){var te=2*this.guessLen13b(O.length,z.length),oe=this.makeRBT(te),le=this.stub(te),he=new Array(te),ae=new Array(te),Q=new Array(te),se=new Array(te),Ae=new Array(te),ge=new Array(te),Ee=Y.words;Ee.length=te,this.convert13b(O.words,O.length,he,te),this.convert13b(z.words,z.length,se,te),this.transform(he,le,ae,Q,te,oe),this.transform(se,le,Ae,ge,te,oe);for(var ke=0;ke<te;ke++){var Se=ae[ke]*Ae[ke]-Q[ke]*ge[ke];Q[ke]=ae[ke]*ge[ke]+Q[ke]*Ae[ke],ae[ke]=Se}return this.conjugate(ae,Q,te),this.transform(ae,Q,Ee,le,te,oe),this.conjugate(Ee,le,te),this.normalize13b(Ee,te),Y.negative=O.negative^z.negative,Y.length=O.length+z.length,Y.strip()},T.prototype.mul=function(O){var z=new T(null);return z.words=new Array(this.length+O.length),this.mulTo(O,z)},T.prototype.mulf=function(O){var z=new T(null);return z.words=new Array(this.length+O.length),ne(this,O,z)},T.prototype.imul=function(O){return this.clone().mulTo(O,this)},T.prototype.imuln=function(O){I(typeof O=="number"),I(O<67108864);for(var z=0,Y=0;Y<this.length;Y++){var te=(this.words[Y]|0)*O,oe=(te&67108863)+(z&67108863);z>>=26,z+=te/67108864|0,z+=oe>>>26,this.words[Y]=oe&67108863}return z!==0&&(this.words[Y]=z,this.length++),this.length=O===0?1:this.length,this},T.prototype.muln=function(O){return this.clone().imuln(O)},T.prototype.sqr=function(){return this.mul(this)},T.prototype.isqr=function(){return this.imul(this.clone())},T.prototype.pow=function(O){var z=K(O);if(z.length===0)return new T(1);for(var Y=this,te=0;te<z.length&&z[te]===0;te++,Y=Y.sqr());if(++te<z.length)for(var oe=Y.sqr();te<z.length;te++,oe=oe.sqr())z[te]!==0&&(Y=Y.mul(oe));return Y},T.prototype.iushln=function(O){I(typeof O=="number"&&O>=0);var z=O%26,Y=(O-z)/26,te=67108863>>>26-z<<26-z,oe;if(z!==0){var le=0;for(oe=0;oe<this.length;oe++){var he=this.words[oe]&te,ae=(this.words[oe]|0)-he<<z;this.words[oe]=ae|le,le=he>>>26-z}le&&(this.words[oe]=le,this.length++)}if(Y!==0){for(oe=this.length-1;oe>=0;oe--)this.words[oe+Y]=this.words[oe];for(oe=0;oe<Y;oe++)this.words[oe]=0;this.length+=Y}return this.strip()},T.prototype.ishln=function(O){return I(this.negative===0),this.iushln(O)},T.prototype.iushrn=function(O,z,Y){I(typeof O=="number"&&O>=0);var te;z?te=(z-z%26)/26:te=0;var oe=O%26,le=Math.min((O-oe)/26,this.length),he=67108863^67108863>>>oe<<oe,ae=Y;if(te-=le,te=Math.max(0,te),ae){for(var Q=0;Q<le;Q++)ae.words[Q]=this.words[Q];ae.length=le}if(le!==0)if(this.length>le)for(this.length-=le,Q=0;Q<this.length;Q++)this.words[Q]=this.words[Q+le];else this.words[0]=0,this.length=1;var se=0;for(Q=this.length-1;Q>=0&&(se!==0||Q>=te);Q--){var Ae=this.words[Q]|0;this.words[Q]=se<<26-oe|Ae>>>oe,se=Ae&he}return ae&&se!==0&&(ae.words[ae.length++]=se),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},T.prototype.ishrn=function(O,z,Y){return I(this.negative===0),this.iushrn(O,z,Y)},T.prototype.shln=function(O){return this.clone().ishln(O)},T.prototype.ushln=function(O){return this.clone().iushln(O)},T.prototype.shrn=function(O){return this.clone().ishrn(O)},T.prototype.ushrn=function(O){return this.clone().iushrn(O)},T.prototype.testn=function(O){I(typeof O=="number"&&O>=0);var z=O%26,Y=(O-z)/26,te=1<<z;if(this.length<=Y)return!1;var oe=this.words[Y];return!!(oe&te)},T.prototype.imaskn=function(O){I(typeof O=="number"&&O>=0);var z=O%26,Y=(O-z)/26;if(I(this.negative===0,"imaskn works only with positive numbers"),this.length<=Y)return this;if(z!==0&&Y++,this.length=Math.min(Y,this.length),z!==0){var te=67108863^67108863>>>z<<z;this.words[this.length-1]&=te}return this.strip()},T.prototype.maskn=function(O){return this.clone().imaskn(O)},T.prototype.iaddn=function(O){return I(typeof O=="number"),I(O<67108864),O<0?this.isubn(-O):this.negative!==0?this.length===1&&(this.words[0]|0)<O?(this.words[0]=O-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(O),this.negative=1,this):this._iaddn(O)},T.prototype._iaddn=function(O){this.words[0]+=O;for(var z=0;z<this.length&&this.words[z]>=67108864;z++)this.words[z]-=67108864,z===this.length-1?this.words[z+1]=1:this.words[z+1]++;return this.length=Math.max(this.length,z+1),this},T.prototype.isubn=function(O){if(I(typeof O=="number"),I(O<67108864),O<0)return this.iaddn(-O);if(this.negative!==0)return this.negative=0,this.iaddn(O),this.negative=1,this;if(this.words[0]-=O,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var z=0;z<this.length&&this.words[z]<0;z++)this.words[z]+=67108864,this.words[z+1]-=1;return this.strip()},T.prototype.addn=function(O){return this.clone().iaddn(O)},T.prototype.subn=function(O){return this.clone().isubn(O)},T.prototype.iabs=function(){return this.negative=0,this},T.prototype.abs=function(){return this.clone().iabs()},T.prototype._ishlnsubmul=function(O,z,Y){var te=O.length+Y,oe;this._expand(te);var le,he=0;for(oe=0;oe<O.length;oe++){le=(this.words[oe+Y]|0)+he;var ae=(O.words[oe]|0)*z;le-=ae&67108863,he=(le>>26)-(ae/67108864|0),this.words[oe+Y]=le&67108863}for(;oe<this.length-Y;oe++)le=(this.words[oe+Y]|0)+he,he=le>>26,this.words[oe+Y]=le&67108863;if(he===0)return this.strip();for(I(he===-1),he=0,oe=0;oe<this.length;oe++)le=-(this.words[oe]|0)+he,he=le>>26,this.words[oe]=le&67108863;return this.negative=1,this.strip()},T.prototype._wordDiv=function(O,z){var Y=this.length-O.length,te=this.clone(),oe=O,le=oe.words[oe.length-1]|0,he=this._countBits(le);Y=26-he,Y!==0&&(oe=oe.ushln(Y),te.iushln(Y),le=oe.words[oe.length-1]|0);var ae=te.length-oe.length,Q;if(z!=="mod"){Q=new T(null),Q.length=ae+1,Q.words=new Array(Q.length);for(var se=0;se<Q.length;se++)Q.words[se]=0}var Ae=te.clone()._ishlnsubmul(oe,1,ae);Ae.negative===0&&(te=Ae,Q&&(Q.words[ae]=1));for(var ge=ae-1;ge>=0;ge--){var Ee=(te.words[oe.length+ge]|0)*67108864+(te.words[oe.length+ge-1]|0);for(Ee=Math.min(Ee/le|0,67108863),te._ishlnsubmul(oe,Ee,ge);te.negative!==0;)Ee--,te.negative=0,te._ishlnsubmul(oe,1,ge),te.isZero()||(te.negative^=1);Q&&(Q.words[ge]=Ee)}return Q&&Q.strip(),te.strip(),z!=="div"&&Y!==0&&te.iushrn(Y),{div:Q||null,mod:te}},T.prototype.divmod=function(O,z,Y){if(I(!O.isZero()),this.isZero())return{div:new T(0),mod:new T(0)};var te,oe,le;return this.negative!==0&&O.negative===0?(le=this.neg().divmod(O,z),z!=="mod"&&(te=le.div.neg()),z!=="div"&&(oe=le.mod.neg(),Y&&oe.negative!==0&&oe.iadd(O)),{div:te,mod:oe}):this.negative===0&&O.negative!==0?(le=this.divmod(O.neg(),z),z!=="mod"&&(te=le.div.neg()),{div:te,mod:le.mod}):(this.negative&O.negative)!==0?(le=this.neg().divmod(O.neg(),z),z!=="div"&&(oe=le.mod.neg(),Y&&oe.negative!==0&&oe.isub(O)),{div:le.div,mod:oe}):O.length>this.length||this.cmp(O)<0?{div:new T(0),mod:this}:O.length===1?z==="div"?{div:this.divn(O.words[0]),mod:null}:z==="mod"?{div:null,mod:new T(this.modn(O.words[0]))}:{div:this.divn(O.words[0]),mod:new T(this.modn(O.words[0]))}:this._wordDiv(O,z)},T.prototype.div=function(O){return this.divmod(O,"div",!1).div},T.prototype.mod=function(O){return this.divmod(O,"mod",!1).mod},T.prototype.umod=function(O){return this.divmod(O,"mod",!0).mod},T.prototype.divRound=function(O){var z=this.divmod(O);if(z.mod.isZero())return z.div;var Y=z.div.negative!==0?z.mod.isub(O):z.mod,te=O.ushrn(1),oe=O.andln(1),le=Y.cmp(te);return le<0||oe===1&&le===0?z.div:z.div.negative!==0?z.div.isubn(1):z.div.iaddn(1)},T.prototype.modn=function(O){I(O<=67108863);for(var z=(1<<26)%O,Y=0,te=this.length-1;te>=0;te--)Y=(z*Y+(this.words[te]|0))%O;return Y},T.prototype.idivn=function(O){I(O<=67108863);for(var z=0,Y=this.length-1;Y>=0;Y--){var te=(this.words[Y]|0)+z*67108864;this.words[Y]=te/O|0,z=te%O}return this.strip()},T.prototype.divn=function(O){return this.clone().idivn(O)},T.prototype.egcd=function(O){I(O.negative===0),I(!O.isZero());var z=this,Y=O.clone();z.negative!==0?z=z.umod(O):z=z.clone();for(var te=new T(1),oe=new T(0),le=new T(0),he=new T(1),ae=0;z.isEven()&&Y.isEven();)z.iushrn(1),Y.iushrn(1),++ae;for(var Q=Y.clone(),se=z.clone();!z.isZero();){for(var Ae=0,ge=1;(z.words[0]&ge)===0&&Ae<26;++Ae,ge<<=1);if(Ae>0)for(z.iushrn(Ae);Ae-- >0;)(te.isOdd()||oe.isOdd())&&(te.iadd(Q),oe.isub(se)),te.iushrn(1),oe.iushrn(1);for(var Ee=0,ke=1;(Y.words[0]&ke)===0&&Ee<26;++Ee,ke<<=1);if(Ee>0)for(Y.iushrn(Ee);Ee-- >0;)(le.isOdd()||he.isOdd())&&(le.iadd(Q),he.isub(se)),le.iushrn(1),he.iushrn(1);z.cmp(Y)>=0?(z.isub(Y),te.isub(le),oe.isub(he)):(Y.isub(z),le.isub(te),he.isub(oe))}return{a:le,b:he,gcd:Y.iushln(ae)}},T.prototype._invmp=function(O){I(O.negative===0),I(!O.isZero());var z=this,Y=O.clone();z.negative!==0?z=z.umod(O):z=z.clone();for(var te=new T(1),oe=new T(0),le=Y.clone();z.cmpn(1)>0&&Y.cmpn(1)>0;){for(var he=0,ae=1;(z.words[0]&ae)===0&&he<26;++he,ae<<=1);if(he>0)for(z.iushrn(he);he-- >0;)te.isOdd()&&te.iadd(le),te.iushrn(1);for(var Q=0,se=1;(Y.words[0]&se)===0&&Q<26;++Q,se<<=1);if(Q>0)for(Y.iushrn(Q);Q-- >0;)oe.isOdd()&&oe.iadd(le),oe.iushrn(1);z.cmp(Y)>=0?(z.isub(Y),te.isub(oe)):(Y.isub(z),oe.isub(te))}var Ae;return z.cmpn(1)===0?Ae=te:Ae=oe,Ae.cmpn(0)<0&&Ae.iadd(O),Ae},T.prototype.gcd=function(O){if(this.isZero())return O.abs();if(O.isZero())return this.abs();var z=this.clone(),Y=O.clone();z.negative=0,Y.negative=0;for(var te=0;z.isEven()&&Y.isEven();te++)z.iushrn(1),Y.iushrn(1);do{for(;z.isEven();)z.iushrn(1);for(;Y.isEven();)Y.iushrn(1);var oe=z.cmp(Y);if(oe<0){var le=z;z=Y,Y=le}else if(oe===0||Y.cmpn(1)===0)break;z.isub(Y)}while(!0);return Y.iushln(te)},T.prototype.invm=function(O){return this.egcd(O).a.umod(O)},T.prototype.isEven=function(){return(this.words[0]&1)===0},T.prototype.isOdd=function(){return(this.words[0]&1)===1},T.prototype.andln=function(O){return this.words[0]&O},T.prototype.bincn=function(O){I(typeof O=="number");var z=O%26,Y=(O-z)/26,te=1<<z;if(this.length<=Y)return this._expand(Y+1),this.words[Y]|=te,this;for(var oe=te,le=Y;oe!==0&&le<this.length;le++){var he=this.words[le]|0;he+=oe,oe=he>>>26,he&=67108863,this.words[le]=he}return oe!==0&&(this.words[le]=oe,this.length++),this},T.prototype.isZero=function(){return this.length===1&&this.words[0]===0},T.prototype.cmpn=function(O){var z=O<0;if(this.negative!==0&&!z)return-1;if(this.negative===0&&z)return 1;this.strip();var Y;if(this.length>1)Y=1;else{z&&(O=-O),I(O<=67108863,"Number is too big");var te=this.words[0]|0;Y=te===O?0:te<O?-1:1}return this.negative!==0?-Y|0:Y},T.prototype.cmp=function(O){if(this.negative!==0&&O.negative===0)return-1;if(this.negative===0&&O.negative!==0)return 1;var z=this.ucmp(O);return this.negative!==0?-z|0:z},T.prototype.ucmp=function(O){if(this.length>O.length)return 1;if(this.length<O.length)return-1;for(var z=0,Y=this.length-1;Y>=0;Y--){var te=this.words[Y]|0,oe=O.words[Y]|0;if(te!==oe){te<oe?z=-1:te>oe&&(z=1);break}}return z},T.prototype.gtn=function(O){return this.cmpn(O)===1},T.prototype.gt=function(O){return this.cmp(O)===1},T.prototype.gten=function(O){return this.cmpn(O)>=0},T.prototype.gte=function(O){return this.cmp(O)>=0},T.prototype.ltn=function(O){return this.cmpn(O)===-1},T.prototype.lt=function(O){return this.cmp(O)===-1},T.prototype.lten=function(O){return this.cmpn(O)<=0},T.prototype.lte=function(O){return this.cmp(O)<=0},T.prototype.eqn=function(O){return this.cmpn(O)===0},T.prototype.eq=function(O){return this.cmp(O)===0},T.red=function(O){return new be(O)},T.prototype.toRed=function(O){return I(!this.red,"Already a number in reduction context"),I(this.negative===0,"red works only with positives"),O.convertTo(this)._forceRed(O)},T.prototype.fromRed=function(){return I(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},T.prototype._forceRed=function(O){return this.red=O,this},T.prototype.forceRed=function(O){return I(!this.red,"Already a number in reduction context"),this._forceRed(O)},T.prototype.redAdd=function(O){return I(this.red,"redAdd works only with red numbers"),this.red.add(this,O)},T.prototype.redIAdd=function(O){return I(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,O)},T.prototype.redSub=function(O){return I(this.red,"redSub works only with red numbers"),this.red.sub(this,O)},T.prototype.redISub=function(O){return I(this.red,"redISub works only with red numbers"),this.red.isub(this,O)},T.prototype.redShl=function(O){return I(this.red,"redShl works only with red numbers"),this.red.shl(this,O)},T.prototype.redMul=function(O){return I(this.red,"redMul works only with red numbers"),this.red._verify2(this,O),this.red.mul(this,O)},T.prototype.redIMul=function(O){return I(this.red,"redMul works only with red numbers"),this.red._verify2(this,O),this.red.imul(this,O)},T.prototype.redSqr=function(){return I(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},T.prototype.redISqr=function(){return I(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},T.prototype.redSqrt=function(){return I(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},T.prototype.redInvm=function(){return I(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},T.prototype.redNeg=function(){return I(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},T.prototype.redPow=function(O){return I(this.red&&!O.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,O)};var fe={k256:null,p224:null,p192:null,p25519:null};function de(ue,O){this.name=ue,this.p=new T(O,16),this.n=this.p.bitLength(),this.k=new T(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}de.prototype._tmp=function(){var O=new T(null);return O.words=new Array(Math.ceil(this.n/13)),O},de.prototype.ireduce=function(O){var z=O,Y;do this.split(z,this.tmp),z=this.imulK(z),z=z.iadd(this.tmp),Y=z.bitLength();while(Y>this.n);var te=Y<this.n?-1:z.ucmp(this.p);return te===0?(z.words[0]=0,z.length=1):te>0?z.isub(this.p):z.strip!==void 0?z.strip():z._strip(),z},de.prototype.split=function(O,z){O.iushrn(this.n,0,z)},de.prototype.imulK=function(O){return O.imul(this.k)};function pe(){de.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}B(pe,de),pe.prototype.split=function(O,z){for(var Y=4194303,te=Math.min(O.length,9),oe=0;oe<te;oe++)z.words[oe]=O.words[oe];if(z.length=te,O.length<=9){O.words[0]=0,O.length=1;return}var le=O.words[9];for(z.words[z.length++]=le&Y,oe=10;oe<O.length;oe++){var he=O.words[oe]|0;O.words[oe-10]=(he&Y)<<4|le>>>22,le=he}le>>>=22,O.words[oe-10]=le,le===0&&O.length>10?O.length-=10:O.length-=9},pe.prototype.imulK=function(O){O.words[O.length]=0,O.words[O.length+1]=0,O.length+=2;for(var z=0,Y=0;Y<O.length;Y++){var te=O.words[Y]|0;z+=te*977,O.words[Y]=z&67108863,z=te*64+(z/67108864|0)}return O.words[O.length-1]===0&&(O.length--,O.words[O.length-1]===0&&O.length--),O};function ve(){de.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}B(ve,de);function ye(){de.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}B(ye,de);function _e(){de.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}B(_e,de),_e.prototype.imulK=function(O){for(var z=0,Y=0;Y<O.length;Y++){var te=(O.words[Y]|0)*19+z,oe=te&67108863;te>>>=26,O.words[Y]=oe,z=te}return z!==0&&(O.words[O.length++]=z),O},T._prime=function(O){if(fe[O])return fe[O];var z;if(O==="k256")z=new pe;else if(O==="p224")z=new ve;else if(O==="p192")z=new ye;else if(O==="p25519")z=new _e;else throw new Error("Unknown prime "+O);return fe[O]=z,z};function be(ue){if(typeof ue=="string"){var O=T._prime(ue);this.m=O.p,this.prime=O}else I(ue.gtn(1),"modulus must be greater than 1"),this.m=ue,this.prime=null}be.prototype._verify1=function(O){I(O.negative===0,"red works only with positives"),I(O.red,"red works only with red numbers")},be.prototype._verify2=function(O,z){I((O.negative|z.negative)===0,"red works only with positives"),I(O.red&&O.red===z.red,"red works only with red numbers")},be.prototype.imod=function(O){return this.prime?this.prime.ireduce(O)._forceRed(this):O.umod(this.m)._forceRed(this)},be.prototype.neg=function(O){return O.isZero()?O.clone():this.m.sub(O)._forceRed(this)},be.prototype.add=function(O,z){this._verify2(O,z);var Y=O.add(z);return Y.cmp(this.m)>=0&&Y.isub(this.m),Y._forceRed(this)},be.prototype.iadd=function(O,z){this._verify2(O,z);var Y=O.iadd(z);return Y.cmp(this.m)>=0&&Y.isub(this.m),Y},be.prototype.sub=function(O,z){this._verify2(O,z);var Y=O.sub(z);return Y.cmpn(0)<0&&Y.iadd(this.m),Y._forceRed(this)},be.prototype.isub=function(O,z){this._verify2(O,z);var Y=O.isub(z);return Y.cmpn(0)<0&&Y.iadd(this.m),Y},be.prototype.shl=function(O,z){return this._verify1(O),this.imod(O.ushln(z))},be.prototype.imul=function(O,z){return this._verify2(O,z),this.imod(O.imul(z))},be.prototype.mul=function(O,z){return this._verify2(O,z),this.imod(O.mul(z))},be.prototype.isqr=function(O){return this.imul(O,O.clone())},be.prototype.sqr=function(O){return this.mul(O,O)},be.prototype.sqrt=function(O){if(O.isZero())return O.clone();var z=this.m.andln(3);if(I(z%2===1),z===3){var Y=this.m.add(new T(1)).iushrn(2);return this.pow(O,Y)}for(var te=this.m.subn(1),oe=0;!te.isZero()&&te.andln(1)===0;)oe++,te.iushrn(1);I(!te.isZero());var le=new T(1).toRed(this),he=le.redNeg(),ae=this.m.subn(1).iushrn(1),Q=this.m.bitLength();for(Q=new T(2*Q*Q).toRed(this);this.pow(Q,ae).cmp(he)!==0;)Q.redIAdd(he);for(var se=this.pow(Q,te),Ae=this.pow(O,te.addn(1).iushrn(1)),ge=this.pow(O,te),Ee=oe;ge.cmp(le)!==0;){for(var ke=ge,Se=0;ke.cmp(le)!==0;Se++)ke=ke.redSqr();I(Se<Ee);var Ie=this.pow(se,new T(1).iushln(Ee-Se-1));Ae=Ae.redMul(Ie),se=Ie.redSqr(),ge=ge.redMul(se),Ee=Se}return Ae},be.prototype.invm=function(O){var z=O._invmp(this.m);return z.negative!==0?(z.negative=0,this.imod(z).redNeg()):this.imod(z)},be.prototype.pow=function(O,z){if(z.isZero())return new T(1).toRed(this);if(z.cmpn(1)===0)return O.clone();var Y=4,te=new Array(1<<Y);te[0]=new T(1).toRed(this),te[1]=O;for(var oe=2;oe<te.length;oe++)te[oe]=this.mul(te[oe-1],O);var le=te[0],he=0,ae=0,Q=z.bitLength()%26;for(Q===0&&(Q=26),oe=z.length-1;oe>=0;oe--){for(var se=z.words[oe],Ae=Q-1;Ae>=0;Ae--){var ge=se>>Ae&1;if(le!==te[0]&&(le=this.sqr(le)),ge===0&&he===0){ae=0;continue}he<<=1,he|=ge,ae++,!(ae!==Y&&(oe!==0||Ae!==0))&&(le=this.mul(le,te[he]),ae=0,he=0)}Q=26}return le},be.prototype.convertTo=function(O){var z=O.umod(this.m);return z===O?z.clone():z},be.prototype.convertFrom=function(O){var z=O.clone();return z.red=null,z},T.mont=function(O){return new Te(O)};function Te(ue){be.call(this,ue),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new T(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}B(Te,be),Te.prototype.convertTo=function(O){return this.imod(O.ushln(this.shift))},Te.prototype.convertFrom=function(O){var z=this.imod(O.mul(this.rinv));return z.red=null,z},Te.prototype.imul=function(O,z){if(O.isZero()||z.isZero())return O.words[0]=0,O.length=1,O;var Y=O.imul(z),te=Y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),oe=Y.isub(te).iushrn(this.shift),le=oe;return oe.cmp(this.m)>=0?le=oe.isub(this.m):oe.cmpn(0)<0&&(le=oe.iadd(this.m)),le._forceRed(this)},Te.prototype.mul=function(O,z){if(O.isZero()||z.isZero())return new T(0)._forceRed(this);var Y=O.mul(z),te=Y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),oe=Y.isub(te).iushrn(this.shift),le=oe;return oe.cmp(this.m)>=0?le=oe.isub(this.m):oe.cmpn(0)<0&&(le=oe.iadd(this.m)),le._forceRed(this)},Te.prototype.invm=function(O){var z=this.imod(O._invmp(this.m).mul(this.r2));return z._forceRed(this)}})(E,bn$c)})(bn$d)),bn$d.exports}var bn$b={exports:{}},bn$a=bn$b.exports,hasRequiredBn$5;function requireBn$5(){return hasRequiredBn$5||(hasRequiredBn$5=1,(function(E){(function(A,_){function I(ue,O){if(!ue)throw new Error(O||"Assertion failed")}function B(ue,O){ue.super_=O;var z=function(){};z.prototype=O.prototype,ue.prototype=new z,ue.prototype.constructor=ue}function T(ue,O,z){if(T.isBN(ue))return ue;this.negative=0,this.words=null,this.length=0,this.red=null,ue!==null&&((O==="le"||O==="be")&&(z=O,O=10),this._init(ue||0,O||10,z||"be"))}typeof A=="object"?A.exports=T:_.BN=T,T.BN=T,T.wordSize=26;var R;try{typeof window<"u"&&typeof window.Buffer<"u"?R=window.Buffer:R=requireDist$1().Buffer}catch{}T.isBN=function(O){return O instanceof T?!0:O!==null&&typeof O=="object"&&O.constructor.wordSize===T.wordSize&&Array.isArray(O.words)},T.max=function(O,z){return O.cmp(z)>0?O:z},T.min=function(O,z){return O.cmp(z)<0?O:z},T.prototype._init=function(O,z,Y){if(typeof O=="number")return this._initNumber(O,z,Y);if(typeof O=="object")return this._initArray(O,z,Y);z==="hex"&&(z=16),I(z===(z|0)&&z>=2&&z<=36),O=O.toString().replace(/\s+/g,"");var te=0;O[0]==="-"&&(te++,this.negative=1),te<O.length&&(z===16?this._parseHex(O,te,Y):(this._parseBase(O,z,te),Y==="le"&&this._initArray(this.toArray(),z,Y)))},T.prototype._initNumber=function(O,z,Y){O<0&&(this.negative=1,O=-O),O<67108864?(this.words=[O&67108863],this.length=1):O<4503599627370496?(this.words=[O&67108863,O/67108864&67108863],this.length=2):(I(O<9007199254740992),this.words=[O&67108863,O/67108864&67108863,1],this.length=3),Y==="le"&&this._initArray(this.toArray(),z,Y)},T.prototype._initArray=function(O,z,Y){if(I(typeof O.length=="number"),O.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(O.length/3),this.words=new Array(this.length);for(var te=0;te<this.length;te++)this.words[te]=0;var oe,le,he=0;if(Y==="be")for(te=O.length-1,oe=0;te>=0;te-=3)le=O[te]|O[te-1]<<8|O[te-2]<<16,this.words[oe]|=le<<he&67108863,this.words[oe+1]=le>>>26-he&67108863,he+=24,he>=26&&(he-=26,oe++);else if(Y==="le")for(te=0,oe=0;te<O.length;te+=3)le=O[te]|O[te+1]<<8|O[te+2]<<16,this.words[oe]|=le<<he&67108863,this.words[oe+1]=le>>>26-he&67108863,he+=24,he>=26&&(he-=26,oe++);return this.strip()};function P(ue,O){var z=ue.charCodeAt(O);return z>=65&&z<=70?z-55:z>=97&&z<=102?z-87:z-48&15}function D(ue,O,z){var Y=P(ue,z);return z-1>=O&&(Y|=P(ue,z-1)<<4),Y}T.prototype._parseHex=function(O,z,Y){this.length=Math.ceil((O.length-z)/6),this.words=new Array(this.length);for(var te=0;te<this.length;te++)this.words[te]=0;var oe=0,le=0,he;if(Y==="be")for(te=O.length-1;te>=z;te-=2)he=D(O,z,te)<<oe,this.words[le]|=he&67108863,oe>=18?(oe-=18,le+=1,this.words[le]|=he>>>26):oe+=8;else{var ae=O.length-z;for(te=ae%2===0?z+1:z;te<O.length;te+=2)he=D(O,z,te)<<oe,this.words[le]|=he&67108863,oe>=18?(oe-=18,le+=1,this.words[le]|=he>>>26):oe+=8}this.strip()};function F(ue,O,z,Y){for(var te=0,oe=Math.min(ue.length,z),le=O;le<oe;le++){var he=ue.charCodeAt(le)-48;te*=Y,he>=49?te+=he-49+10:he>=17?te+=he-17+10:te+=he}return te}T.prototype._parseBase=function(O,z,Y){this.words=[0],this.length=1;for(var te=0,oe=1;oe<=67108863;oe*=z)te++;te--,oe=oe/z|0;for(var le=O.length-Y,he=le%te,ae=Math.min(le,le-he)+Y,Q=0,se=Y;se<ae;se+=te)Q=F(O,se,se+te,z),this.imuln(oe),this.words[0]+Q<67108864?this.words[0]+=Q:this._iaddn(Q);if(he!==0){var Ae=1;for(Q=F(O,se,O.length,z),se=0;se<he;se++)Ae*=z;this.imuln(Ae),this.words[0]+Q<67108864?this.words[0]+=Q:this._iaddn(Q)}this.strip()},T.prototype.copy=function(O){O.words=new Array(this.length);for(var z=0;z<this.length;z++)O.words[z]=this.words[z];O.length=this.length,O.negative=this.negative,O.red=this.red},T.prototype.clone=function(){var O=new T(null);return this.copy(O),O},T.prototype._expand=function(O){for(;this.length<O;)this.words[this.length++]=0;return this},T.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},T.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},T.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var L=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],U=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],V=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];T.prototype.toString=function(O,z){O=O||10,z=z|0||1;var Y;if(O===16||O==="hex"){Y="";for(var te=0,oe=0,le=0;le<this.length;le++){var he=this.words[le],ae=((he<<te|oe)&16777215).toString(16);oe=he>>>24-te&16777215,te+=2,te>=26&&(te-=26,le--),oe!==0||le!==this.length-1?Y=L[6-ae.length]+ae+Y:Y=ae+Y}for(oe!==0&&(Y=oe.toString(16)+Y);Y.length%z!==0;)Y="0"+Y;return this.negative!==0&&(Y="-"+Y),Y}if(O===(O|0)&&O>=2&&O<=36){var Q=U[O],se=V[O];Y="";var Ae=this.clone();for(Ae.negative=0;!Ae.isZero();){var ge=Ae.modn(se).toString(O);Ae=Ae.idivn(se),Ae.isZero()?Y=ge+Y:Y=L[Q-ge.length]+ge+Y}for(this.isZero()&&(Y="0"+Y);Y.length%z!==0;)Y="0"+Y;return this.negative!==0&&(Y="-"+Y),Y}I(!1,"Base should be between 2 and 36")},T.prototype.toNumber=function(){var O=this.words[0];return this.length===2?O+=this.words[1]*67108864:this.length===3&&this.words[2]===1?O+=4503599627370496+this.words[1]*67108864:this.length>2&&I(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-O:O},T.prototype.toJSON=function(){return this.toString(16)},T.prototype.toBuffer=function(O,z){return I(typeof R<"u"),this.toArrayLike(R,O,z)},T.prototype.toArray=function(O,z){return this.toArrayLike(Array,O,z)},T.prototype.toArrayLike=function(O,z,Y){var te=this.byteLength(),oe=Y||Math.max(1,te);I(te<=oe,"byte array longer than desired length"),I(oe>0,"Requested array length <= 0"),this.strip();var le=z==="le",he=new O(oe),ae,Q,se=this.clone();if(le){for(Q=0;!se.isZero();Q++)ae=se.andln(255),se.iushrn(8),he[Q]=ae;for(;Q<oe;Q++)he[Q]=0}else{for(Q=0;Q<oe-te;Q++)he[Q]=0;for(Q=0;!se.isZero();Q++)ae=se.andln(255),se.iushrn(8),he[oe-Q-1]=ae}return he},Math.clz32?T.prototype._countBits=function(O){return 32-Math.clz32(O)}:T.prototype._countBits=function(O){var z=O,Y=0;return z>=4096&&(Y+=13,z>>>=13),z>=64&&(Y+=7,z>>>=7),z>=8&&(Y+=4,z>>>=4),z>=2&&(Y+=2,z>>>=2),Y+z},T.prototype._zeroBits=function(O){if(O===0)return 26;var z=O,Y=0;return(z&8191)===0&&(Y+=13,z>>>=13),(z&127)===0&&(Y+=7,z>>>=7),(z&15)===0&&(Y+=4,z>>>=4),(z&3)===0&&(Y+=2,z>>>=2),(z&1)===0&&Y++,Y},T.prototype.bitLength=function(){var O=this.words[this.length-1],z=this._countBits(O);return(this.length-1)*26+z};function K(ue){for(var O=new Array(ue.bitLength()),z=0;z<O.length;z++){var Y=z/26|0,te=z%26;O[z]=(ue.words[Y]&1<<te)>>>te}return O}T.prototype.zeroBits=function(){if(this.isZero())return 0;for(var O=0,z=0;z<this.length;z++){var Y=this._zeroBits(this.words[z]);if(O+=Y,Y!==26)break}return O},T.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},T.prototype.toTwos=function(O){return this.negative!==0?this.abs().inotn(O).iaddn(1):this.clone()},T.prototype.fromTwos=function(O){return this.testn(O-1)?this.notn(O).iaddn(1).ineg():this.clone()},T.prototype.isNeg=function(){return this.negative!==0},T.prototype.neg=function(){return this.clone().ineg()},T.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},T.prototype.iuor=function(O){for(;this.length<O.length;)this.words[this.length++]=0;for(var z=0;z<O.length;z++)this.words[z]=this.words[z]|O.words[z];return this.strip()},T.prototype.ior=function(O){return I((this.negative|O.negative)===0),this.iuor(O)},T.prototype.or=function(O){return this.length>O.length?this.clone().ior(O):O.clone().ior(this)},T.prototype.uor=function(O){return this.length>O.length?this.clone().iuor(O):O.clone().iuor(this)},T.prototype.iuand=function(O){var z;this.length>O.length?z=O:z=this;for(var Y=0;Y<z.length;Y++)this.words[Y]=this.words[Y]&O.words[Y];return this.length=z.length,this.strip()},T.prototype.iand=function(O){return I((this.negative|O.negative)===0),this.iuand(O)},T.prototype.and=function(O){return this.length>O.length?this.clone().iand(O):O.clone().iand(this)},T.prototype.uand=function(O){return this.length>O.length?this.clone().iuand(O):O.clone().iuand(this)},T.prototype.iuxor=function(O){var z,Y;this.length>O.length?(z=this,Y=O):(z=O,Y=this);for(var te=0;te<Y.length;te++)this.words[te]=z.words[te]^Y.words[te];if(this!==z)for(;te<z.length;te++)this.words[te]=z.words[te];return this.length=z.length,this.strip()},T.prototype.ixor=function(O){return I((this.negative|O.negative)===0),this.iuxor(O)},T.prototype.xor=function(O){return this.length>O.length?this.clone().ixor(O):O.clone().ixor(this)},T.prototype.uxor=function(O){return this.length>O.length?this.clone().iuxor(O):O.clone().iuxor(this)},T.prototype.inotn=function(O){I(typeof O=="number"&&O>=0);var z=Math.ceil(O/26)|0,Y=O%26;this._expand(z),Y>0&&z--;for(var te=0;te<z;te++)this.words[te]=~this.words[te]&67108863;return Y>0&&(this.words[te]=~this.words[te]&67108863>>26-Y),this.strip()},T.prototype.notn=function(O){return this.clone().inotn(O)},T.prototype.setn=function(O,z){I(typeof O=="number"&&O>=0);var Y=O/26|0,te=O%26;return this._expand(Y+1),z?this.words[Y]=this.words[Y]|1<<te:this.words[Y]=this.words[Y]&~(1<<te),this.strip()},T.prototype.iadd=function(O){var z;if(this.negative!==0&&O.negative===0)return this.negative=0,z=this.isub(O),this.negative^=1,this._normSign();if(this.negative===0&&O.negative!==0)return O.negative=0,z=this.isub(O),O.negative=1,z._normSign();var Y,te;this.length>O.length?(Y=this,te=O):(Y=O,te=this);for(var oe=0,le=0;le<te.length;le++)z=(Y.words[le]|0)+(te.words[le]|0)+oe,this.words[le]=z&67108863,oe=z>>>26;for(;oe!==0&&le<Y.length;le++)z=(Y.words[le]|0)+oe,this.words[le]=z&67108863,oe=z>>>26;if(this.length=Y.length,oe!==0)this.words[this.length]=oe,this.length++;else if(Y!==this)for(;le<Y.length;le++)this.words[le]=Y.words[le];return this},T.prototype.add=function(O){var z;return O.negative!==0&&this.negative===0?(O.negative=0,z=this.sub(O),O.negative^=1,z):O.negative===0&&this.negative!==0?(this.negative=0,z=O.sub(this),this.negative=1,z):this.length>O.length?this.clone().iadd(O):O.clone().iadd(this)},T.prototype.isub=function(O){if(O.negative!==0){O.negative=0;var z=this.iadd(O);return O.negative=1,z._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(O),this.negative=1,this._normSign();var Y=this.cmp(O);if(Y===0)return this.negative=0,this.length=1,this.words[0]=0,this;var te,oe;Y>0?(te=this,oe=O):(te=O,oe=this);for(var le=0,he=0;he<oe.length;he++)z=(te.words[he]|0)-(oe.words[he]|0)+le,le=z>>26,this.words[he]=z&67108863;for(;le!==0&&he<te.length;he++)z=(te.words[he]|0)+le,le=z>>26,this.words[he]=z&67108863;if(le===0&&he<te.length&&te!==this)for(;he<te.length;he++)this.words[he]=te.words[he];return this.length=Math.max(this.length,he),te!==this&&(this.negative=1),this.strip()},T.prototype.sub=function(O){return this.clone().isub(O)};function J(ue,O,z){z.negative=O.negative^ue.negative;var Y=ue.length+O.length|0;z.length=Y,Y=Y-1|0;var te=ue.words[0]|0,oe=O.words[0]|0,le=te*oe,he=le&67108863,ae=le/67108864|0;z.words[0]=he;for(var Q=1;Q<Y;Q++){for(var se=ae>>>26,Ae=ae&67108863,ge=Math.min(Q,O.length-1),Ee=Math.max(0,Q-ue.length+1);Ee<=ge;Ee++){var ke=Q-Ee|0;te=ue.words[ke]|0,oe=O.words[Ee]|0,le=te*oe+Ae,se+=le/67108864|0,Ae=le&67108863}z.words[Q]=Ae|0,ae=se|0}return ae!==0?z.words[Q]=ae|0:z.length--,z.strip()}var ee=function(O,z,Y){var te=O.words,oe=z.words,le=Y.words,he=0,ae,Q,se,Ae=te[0]|0,ge=Ae&8191,Ee=Ae>>>13,ke=te[1]|0,Se=ke&8191,Ie=ke>>>13,we=te[2]|0,xe=we&8191,Fe=we>>>13,Ge=te[3]|0,Oe=Ge&8191,et=Ge>>>13,Mt=te[4]|0,dt=Mt&8191,mt=Mt>>>13,Ut=te[5]|0,St=Ut&8191,vt=Ut>>>13,It=te[6]|0,yt=It&8191,Tt=It>>>13,Wt=te[7]|0,ft=Wt&8191,_t=Wt>>>13,Xt=te[8]|0,Nt=Xt&8191,qt=Xt>>>13,nr=te[9]|0,ze=nr&8191,Ce=nr>>>13,Le=oe[0]|0,Ze=Le&8191,Je=Le>>>13,nt=oe[1]|0,rt=nt&8191,He=nt>>>13,Dt=oe[2]|0,Rt=Dt&8191,De=Dt>>>13,We=oe[3]|0,Ve=We&8191,qe=We>>>13,pt=oe[4]|0,At=pt&8191,jt=pt>>>13,rr=oe[5]|0,Ke=rr&8191,Ne=rr>>>13,Ye=oe[6]|0,st=Ye&8191,bt=Ye>>>13,Qe=oe[7]|0,Re=Qe&8191,Pe=Qe>>>13,Me=oe[8]|0,$e=Me&8191,it=Me>>>13,kt=oe[9]|0,xt=kt&8191,Ot=kt>>>13;Y.negative=O.negative^z.negative,Y.length=19,ae=Math.imul(ge,Ze),Q=Math.imul(ge,Je),Q=Q+Math.imul(Ee,Ze)|0,se=Math.imul(Ee,Je);var Jt=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,ae=Math.imul(Se,Ze),Q=Math.imul(Se,Je),Q=Q+Math.imul(Ie,Ze)|0,se=Math.imul(Ie,Je),ae=ae+Math.imul(ge,rt)|0,Q=Q+Math.imul(ge,He)|0,Q=Q+Math.imul(Ee,rt)|0,se=se+Math.imul(Ee,He)|0;var tr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(tr>>>26)|0,tr&=67108863,ae=Math.imul(xe,Ze),Q=Math.imul(xe,Je),Q=Q+Math.imul(Fe,Ze)|0,se=Math.imul(Fe,Je),ae=ae+Math.imul(Se,rt)|0,Q=Q+Math.imul(Se,He)|0,Q=Q+Math.imul(Ie,rt)|0,se=se+Math.imul(Ie,He)|0,ae=ae+Math.imul(ge,Rt)|0,Q=Q+Math.imul(ge,De)|0,Q=Q+Math.imul(Ee,Rt)|0,se=se+Math.imul(Ee,De)|0;var br=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(br>>>26)|0,br&=67108863,ae=Math.imul(Oe,Ze),Q=Math.imul(Oe,Je),Q=Q+Math.imul(et,Ze)|0,se=Math.imul(et,Je),ae=ae+Math.imul(xe,rt)|0,Q=Q+Math.imul(xe,He)|0,Q=Q+Math.imul(Fe,rt)|0,se=se+Math.imul(Fe,He)|0,ae=ae+Math.imul(Se,Rt)|0,Q=Q+Math.imul(Se,De)|0,Q=Q+Math.imul(Ie,Rt)|0,se=se+Math.imul(Ie,De)|0,ae=ae+Math.imul(ge,Ve)|0,Q=Q+Math.imul(ge,qe)|0,Q=Q+Math.imul(Ee,Ve)|0,se=se+Math.imul(Ee,qe)|0;var ar=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(ar>>>26)|0,ar&=67108863,ae=Math.imul(dt,Ze),Q=Math.imul(dt,Je),Q=Q+Math.imul(mt,Ze)|0,se=Math.imul(mt,Je),ae=ae+Math.imul(Oe,rt)|0,Q=Q+Math.imul(Oe,He)|0,Q=Q+Math.imul(et,rt)|0,se=se+Math.imul(et,He)|0,ae=ae+Math.imul(xe,Rt)|0,Q=Q+Math.imul(xe,De)|0,Q=Q+Math.imul(Fe,Rt)|0,se=se+Math.imul(Fe,De)|0,ae=ae+Math.imul(Se,Ve)|0,Q=Q+Math.imul(Se,qe)|0,Q=Q+Math.imul(Ie,Ve)|0,se=se+Math.imul(Ie,qe)|0,ae=ae+Math.imul(ge,At)|0,Q=Q+Math.imul(ge,jt)|0,Q=Q+Math.imul(Ee,At)|0,se=se+Math.imul(Ee,jt)|0;var _r=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(_r>>>26)|0,_r&=67108863,ae=Math.imul(St,Ze),Q=Math.imul(St,Je),Q=Q+Math.imul(vt,Ze)|0,se=Math.imul(vt,Je),ae=ae+Math.imul(dt,rt)|0,Q=Q+Math.imul(dt,He)|0,Q=Q+Math.imul(mt,rt)|0,se=se+Math.imul(mt,He)|0,ae=ae+Math.imul(Oe,Rt)|0,Q=Q+Math.imul(Oe,De)|0,Q=Q+Math.imul(et,Rt)|0,se=se+Math.imul(et,De)|0,ae=ae+Math.imul(xe,Ve)|0,Q=Q+Math.imul(xe,qe)|0,Q=Q+Math.imul(Fe,Ve)|0,se=se+Math.imul(Fe,qe)|0,ae=ae+Math.imul(Se,At)|0,Q=Q+Math.imul(Se,jt)|0,Q=Q+Math.imul(Ie,At)|0,se=se+Math.imul(Ie,jt)|0,ae=ae+Math.imul(ge,Ke)|0,Q=Q+Math.imul(ge,Ne)|0,Q=Q+Math.imul(Ee,Ke)|0,se=se+Math.imul(Ee,Ne)|0;var or=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(or>>>26)|0,or&=67108863,ae=Math.imul(yt,Ze),Q=Math.imul(yt,Je),Q=Q+Math.imul(Tt,Ze)|0,se=Math.imul(Tt,Je),ae=ae+Math.imul(St,rt)|0,Q=Q+Math.imul(St,He)|0,Q=Q+Math.imul(vt,rt)|0,se=se+Math.imul(vt,He)|0,ae=ae+Math.imul(dt,Rt)|0,Q=Q+Math.imul(dt,De)|0,Q=Q+Math.imul(mt,Rt)|0,se=se+Math.imul(mt,De)|0,ae=ae+Math.imul(Oe,Ve)|0,Q=Q+Math.imul(Oe,qe)|0,Q=Q+Math.imul(et,Ve)|0,se=se+Math.imul(et,qe)|0,ae=ae+Math.imul(xe,At)|0,Q=Q+Math.imul(xe,jt)|0,Q=Q+Math.imul(Fe,At)|0,se=se+Math.imul(Fe,jt)|0,ae=ae+Math.imul(Se,Ke)|0,Q=Q+Math.imul(Se,Ne)|0,Q=Q+Math.imul(Ie,Ke)|0,se=se+Math.imul(Ie,Ne)|0,ae=ae+Math.imul(ge,st)|0,Q=Q+Math.imul(ge,bt)|0,Q=Q+Math.imul(Ee,st)|0,se=se+Math.imul(Ee,bt)|0;var gr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(gr>>>26)|0,gr&=67108863,ae=Math.imul(ft,Ze),Q=Math.imul(ft,Je),Q=Q+Math.imul(_t,Ze)|0,se=Math.imul(_t,Je),ae=ae+Math.imul(yt,rt)|0,Q=Q+Math.imul(yt,He)|0,Q=Q+Math.imul(Tt,rt)|0,se=se+Math.imul(Tt,He)|0,ae=ae+Math.imul(St,Rt)|0,Q=Q+Math.imul(St,De)|0,Q=Q+Math.imul(vt,Rt)|0,se=se+Math.imul(vt,De)|0,ae=ae+Math.imul(dt,Ve)|0,Q=Q+Math.imul(dt,qe)|0,Q=Q+Math.imul(mt,Ve)|0,se=se+Math.imul(mt,qe)|0,ae=ae+Math.imul(Oe,At)|0,Q=Q+Math.imul(Oe,jt)|0,Q=Q+Math.imul(et,At)|0,se=se+Math.imul(et,jt)|0,ae=ae+Math.imul(xe,Ke)|0,Q=Q+Math.imul(xe,Ne)|0,Q=Q+Math.imul(Fe,Ke)|0,se=se+Math.imul(Fe,Ne)|0,ae=ae+Math.imul(Se,st)|0,Q=Q+Math.imul(Se,bt)|0,Q=Q+Math.imul(Ie,st)|0,se=se+Math.imul(Ie,bt)|0,ae=ae+Math.imul(ge,Re)|0,Q=Q+Math.imul(ge,Pe)|0,Q=Q+Math.imul(Ee,Re)|0,se=se+Math.imul(Ee,Pe)|0;var xr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(xr>>>26)|0,xr&=67108863,ae=Math.imul(Nt,Ze),Q=Math.imul(Nt,Je),Q=Q+Math.imul(qt,Ze)|0,se=Math.imul(qt,Je),ae=ae+Math.imul(ft,rt)|0,Q=Q+Math.imul(ft,He)|0,Q=Q+Math.imul(_t,rt)|0,se=se+Math.imul(_t,He)|0,ae=ae+Math.imul(yt,Rt)|0,Q=Q+Math.imul(yt,De)|0,Q=Q+Math.imul(Tt,Rt)|0,se=se+Math.imul(Tt,De)|0,ae=ae+Math.imul(St,Ve)|0,Q=Q+Math.imul(St,qe)|0,Q=Q+Math.imul(vt,Ve)|0,se=se+Math.imul(vt,qe)|0,ae=ae+Math.imul(dt,At)|0,Q=Q+Math.imul(dt,jt)|0,Q=Q+Math.imul(mt,At)|0,se=se+Math.imul(mt,jt)|0,ae=ae+Math.imul(Oe,Ke)|0,Q=Q+Math.imul(Oe,Ne)|0,Q=Q+Math.imul(et,Ke)|0,se=se+Math.imul(et,Ne)|0,ae=ae+Math.imul(xe,st)|0,Q=Q+Math.imul(xe,bt)|0,Q=Q+Math.imul(Fe,st)|0,se=se+Math.imul(Fe,bt)|0,ae=ae+Math.imul(Se,Re)|0,Q=Q+Math.imul(Se,Pe)|0,Q=Q+Math.imul(Ie,Re)|0,se=se+Math.imul(Ie,Pe)|0,ae=ae+Math.imul(ge,$e)|0,Q=Q+Math.imul(ge,it)|0,Q=Q+Math.imul(Ee,$e)|0,se=se+Math.imul(Ee,it)|0;var vr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(vr>>>26)|0,vr&=67108863,ae=Math.imul(ze,Ze),Q=Math.imul(ze,Je),Q=Q+Math.imul(Ce,Ze)|0,se=Math.imul(Ce,Je),ae=ae+Math.imul(Nt,rt)|0,Q=Q+Math.imul(Nt,He)|0,Q=Q+Math.imul(qt,rt)|0,se=se+Math.imul(qt,He)|0,ae=ae+Math.imul(ft,Rt)|0,Q=Q+Math.imul(ft,De)|0,Q=Q+Math.imul(_t,Rt)|0,se=se+Math.imul(_t,De)|0,ae=ae+Math.imul(yt,Ve)|0,Q=Q+Math.imul(yt,qe)|0,Q=Q+Math.imul(Tt,Ve)|0,se=se+Math.imul(Tt,qe)|0,ae=ae+Math.imul(St,At)|0,Q=Q+Math.imul(St,jt)|0,Q=Q+Math.imul(vt,At)|0,se=se+Math.imul(vt,jt)|0,ae=ae+Math.imul(dt,Ke)|0,Q=Q+Math.imul(dt,Ne)|0,Q=Q+Math.imul(mt,Ke)|0,se=se+Math.imul(mt,Ne)|0,ae=ae+Math.imul(Oe,st)|0,Q=Q+Math.imul(Oe,bt)|0,Q=Q+Math.imul(et,st)|0,se=se+Math.imul(et,bt)|0,ae=ae+Math.imul(xe,Re)|0,Q=Q+Math.imul(xe,Pe)|0,Q=Q+Math.imul(Fe,Re)|0,se=se+Math.imul(Fe,Pe)|0,ae=ae+Math.imul(Se,$e)|0,Q=Q+Math.imul(Se,it)|0,Q=Q+Math.imul(Ie,$e)|0,se=se+Math.imul(Ie,it)|0,ae=ae+Math.imul(ge,xt)|0,Q=Q+Math.imul(ge,Ot)|0,Q=Q+Math.imul(Ee,xt)|0,se=se+Math.imul(Ee,Ot)|0;var Cr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,ae=Math.imul(ze,rt),Q=Math.imul(ze,He),Q=Q+Math.imul(Ce,rt)|0,se=Math.imul(Ce,He),ae=ae+Math.imul(Nt,Rt)|0,Q=Q+Math.imul(Nt,De)|0,Q=Q+Math.imul(qt,Rt)|0,se=se+Math.imul(qt,De)|0,ae=ae+Math.imul(ft,Ve)|0,Q=Q+Math.imul(ft,qe)|0,Q=Q+Math.imul(_t,Ve)|0,se=se+Math.imul(_t,qe)|0,ae=ae+Math.imul(yt,At)|0,Q=Q+Math.imul(yt,jt)|0,Q=Q+Math.imul(Tt,At)|0,se=se+Math.imul(Tt,jt)|0,ae=ae+Math.imul(St,Ke)|0,Q=Q+Math.imul(St,Ne)|0,Q=Q+Math.imul(vt,Ke)|0,se=se+Math.imul(vt,Ne)|0,ae=ae+Math.imul(dt,st)|0,Q=Q+Math.imul(dt,bt)|0,Q=Q+Math.imul(mt,st)|0,se=se+Math.imul(mt,bt)|0,ae=ae+Math.imul(Oe,Re)|0,Q=Q+Math.imul(Oe,Pe)|0,Q=Q+Math.imul(et,Re)|0,se=se+Math.imul(et,Pe)|0,ae=ae+Math.imul(xe,$e)|0,Q=Q+Math.imul(xe,it)|0,Q=Q+Math.imul(Fe,$e)|0,se=se+Math.imul(Fe,it)|0,ae=ae+Math.imul(Se,xt)|0,Q=Q+Math.imul(Se,Ot)|0,Q=Q+Math.imul(Ie,xt)|0,se=se+Math.imul(Ie,Ot)|0;var Sr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(Sr>>>26)|0,Sr&=67108863,ae=Math.imul(ze,Rt),Q=Math.imul(ze,De),Q=Q+Math.imul(Ce,Rt)|0,se=Math.imul(Ce,De),ae=ae+Math.imul(Nt,Ve)|0,Q=Q+Math.imul(Nt,qe)|0,Q=Q+Math.imul(qt,Ve)|0,se=se+Math.imul(qt,qe)|0,ae=ae+Math.imul(ft,At)|0,Q=Q+Math.imul(ft,jt)|0,Q=Q+Math.imul(_t,At)|0,se=se+Math.imul(_t,jt)|0,ae=ae+Math.imul(yt,Ke)|0,Q=Q+Math.imul(yt,Ne)|0,Q=Q+Math.imul(Tt,Ke)|0,se=se+Math.imul(Tt,Ne)|0,ae=ae+Math.imul(St,st)|0,Q=Q+Math.imul(St,bt)|0,Q=Q+Math.imul(vt,st)|0,se=se+Math.imul(vt,bt)|0,ae=ae+Math.imul(dt,Re)|0,Q=Q+Math.imul(dt,Pe)|0,Q=Q+Math.imul(mt,Re)|0,se=se+Math.imul(mt,Pe)|0,ae=ae+Math.imul(Oe,$e)|0,Q=Q+Math.imul(Oe,it)|0,Q=Q+Math.imul(et,$e)|0,se=se+Math.imul(et,it)|0,ae=ae+Math.imul(xe,xt)|0,Q=Q+Math.imul(xe,Ot)|0,Q=Q+Math.imul(Fe,xt)|0,se=se+Math.imul(Fe,Ot)|0;var dr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(dr>>>26)|0,dr&=67108863,ae=Math.imul(ze,Ve),Q=Math.imul(ze,qe),Q=Q+Math.imul(Ce,Ve)|0,se=Math.imul(Ce,qe),ae=ae+Math.imul(Nt,At)|0,Q=Q+Math.imul(Nt,jt)|0,Q=Q+Math.imul(qt,At)|0,se=se+Math.imul(qt,jt)|0,ae=ae+Math.imul(ft,Ke)|0,Q=Q+Math.imul(ft,Ne)|0,Q=Q+Math.imul(_t,Ke)|0,se=se+Math.imul(_t,Ne)|0,ae=ae+Math.imul(yt,st)|0,Q=Q+Math.imul(yt,bt)|0,Q=Q+Math.imul(Tt,st)|0,se=se+Math.imul(Tt,bt)|0,ae=ae+Math.imul(St,Re)|0,Q=Q+Math.imul(St,Pe)|0,Q=Q+Math.imul(vt,Re)|0,se=se+Math.imul(vt,Pe)|0,ae=ae+Math.imul(dt,$e)|0,Q=Q+Math.imul(dt,it)|0,Q=Q+Math.imul(mt,$e)|0,se=se+Math.imul(mt,it)|0,ae=ae+Math.imul(Oe,xt)|0,Q=Q+Math.imul(Oe,Ot)|0,Q=Q+Math.imul(et,xt)|0,se=se+Math.imul(et,Ot)|0;var wr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(wr>>>26)|0,wr&=67108863,ae=Math.imul(ze,At),Q=Math.imul(ze,jt),Q=Q+Math.imul(Ce,At)|0,se=Math.imul(Ce,jt),ae=ae+Math.imul(Nt,Ke)|0,Q=Q+Math.imul(Nt,Ne)|0,Q=Q+Math.imul(qt,Ke)|0,se=se+Math.imul(qt,Ne)|0,ae=ae+Math.imul(ft,st)|0,Q=Q+Math.imul(ft,bt)|0,Q=Q+Math.imul(_t,st)|0,se=se+Math.imul(_t,bt)|0,ae=ae+Math.imul(yt,Re)|0,Q=Q+Math.imul(yt,Pe)|0,Q=Q+Math.imul(Tt,Re)|0,se=se+Math.imul(Tt,Pe)|0,ae=ae+Math.imul(St,$e)|0,Q=Q+Math.imul(St,it)|0,Q=Q+Math.imul(vt,$e)|0,se=se+Math.imul(vt,it)|0,ae=ae+Math.imul(dt,xt)|0,Q=Q+Math.imul(dt,Ot)|0,Q=Q+Math.imul(mt,xt)|0,se=se+Math.imul(mt,Ot)|0;var fr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(fr>>>26)|0,fr&=67108863,ae=Math.imul(ze,Ke),Q=Math.imul(ze,Ne),Q=Q+Math.imul(Ce,Ke)|0,se=Math.imul(Ce,Ne),ae=ae+Math.imul(Nt,st)|0,Q=Q+Math.imul(Nt,bt)|0,Q=Q+Math.imul(qt,st)|0,se=se+Math.imul(qt,bt)|0,ae=ae+Math.imul(ft,Re)|0,Q=Q+Math.imul(ft,Pe)|0,Q=Q+Math.imul(_t,Re)|0,se=se+Math.imul(_t,Pe)|0,ae=ae+Math.imul(yt,$e)|0,Q=Q+Math.imul(yt,it)|0,Q=Q+Math.imul(Tt,$e)|0,se=se+Math.imul(Tt,it)|0,ae=ae+Math.imul(St,xt)|0,Q=Q+Math.imul(St,Ot)|0,Q=Q+Math.imul(vt,xt)|0,se=se+Math.imul(vt,Ot)|0;var hr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(hr>>>26)|0,hr&=67108863,ae=Math.imul(ze,st),Q=Math.imul(ze,bt),Q=Q+Math.imul(Ce,st)|0,se=Math.imul(Ce,bt),ae=ae+Math.imul(Nt,Re)|0,Q=Q+Math.imul(Nt,Pe)|0,Q=Q+Math.imul(qt,Re)|0,se=se+Math.imul(qt,Pe)|0,ae=ae+Math.imul(ft,$e)|0,Q=Q+Math.imul(ft,it)|0,Q=Q+Math.imul(_t,$e)|0,se=se+Math.imul(_t,it)|0,ae=ae+Math.imul(yt,xt)|0,Q=Q+Math.imul(yt,Ot)|0,Q=Q+Math.imul(Tt,xt)|0,se=se+Math.imul(Tt,Ot)|0;var Ar=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,ae=Math.imul(ze,Re),Q=Math.imul(ze,Pe),Q=Q+Math.imul(Ce,Re)|0,se=Math.imul(Ce,Pe),ae=ae+Math.imul(Nt,$e)|0,Q=Q+Math.imul(Nt,it)|0,Q=Q+Math.imul(qt,$e)|0,se=se+Math.imul(qt,it)|0,ae=ae+Math.imul(ft,xt)|0,Q=Q+Math.imul(ft,Ot)|0,Q=Q+Math.imul(_t,xt)|0,se=se+Math.imul(_t,Ot)|0;var ur=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(ur>>>26)|0,ur&=67108863,ae=Math.imul(ze,$e),Q=Math.imul(ze,it),Q=Q+Math.imul(Ce,$e)|0,se=Math.imul(Ce,it),ae=ae+Math.imul(Nt,xt)|0,Q=Q+Math.imul(Nt,Ot)|0,Q=Q+Math.imul(qt,xt)|0,se=se+Math.imul(qt,Ot)|0;var zt=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(zt>>>26)|0,zt&=67108863,ae=Math.imul(ze,xt),Q=Math.imul(ze,Ot),Q=Q+Math.imul(Ce,xt)|0,se=Math.imul(Ce,Ot);var Kt=(he+ae|0)+((Q&8191)<<13)|0;return he=(se+(Q>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,le[0]=Jt,le[1]=tr,le[2]=br,le[3]=ar,le[4]=_r,le[5]=or,le[6]=gr,le[7]=xr,le[8]=vr,le[9]=Cr,le[10]=Sr,le[11]=dr,le[12]=wr,le[13]=fr,le[14]=hr,le[15]=Ar,le[16]=ur,le[17]=zt,le[18]=Kt,he!==0&&(le[19]=he,Y.length++),Y};Math.imul||(ee=J);function ie(ue,O,z){z.negative=O.negative^ue.negative,z.length=ue.length+O.length;for(var Y=0,te=0,oe=0;oe<z.length-1;oe++){var le=te;te=0;for(var he=Y&67108863,ae=Math.min(oe,O.length-1),Q=Math.max(0,oe-ue.length+1);Q<=ae;Q++){var se=oe-Q,Ae=ue.words[se]|0,ge=O.words[Q]|0,Ee=Ae*ge,ke=Ee&67108863;le=le+(Ee/67108864|0)|0,ke=ke+he|0,he=ke&67108863,le=le+(ke>>>26)|0,te+=le>>>26,le&=67108863}z.words[oe]=he,Y=le,le=te}return Y!==0?z.words[oe]=Y:z.length--,z.strip()}function ne(ue,O,z){var Y=new ce;return Y.mulp(ue,O,z)}T.prototype.mulTo=function(O,z){var Y,te=this.length+O.length;return this.length===10&&O.length===10?Y=ee(this,O,z):te<63?Y=J(this,O,z):te<1024?Y=ie(this,O,z):Y=ne(this,O,z),Y};function ce(ue,O){this.x=ue,this.y=O}ce.prototype.makeRBT=function(O){for(var z=new Array(O),Y=T.prototype._countBits(O)-1,te=0;te<O;te++)z[te]=this.revBin(te,Y,O);return z},ce.prototype.revBin=function(O,z,Y){if(O===0||O===Y-1)return O;for(var te=0,oe=0;oe<z;oe++)te|=(O&1)<<z-oe-1,O>>=1;return te},ce.prototype.permute=function(O,z,Y,te,oe,le){for(var he=0;he<le;he++)te[he]=z[O[he]],oe[he]=Y[O[he]]},ce.prototype.transform=function(O,z,Y,te,oe,le){this.permute(le,O,z,Y,te,oe);for(var he=1;he<oe;he<<=1)for(var ae=he<<1,Q=Math.cos(2*Math.PI/ae),se=Math.sin(2*Math.PI/ae),Ae=0;Ae<oe;Ae+=ae)for(var ge=Q,Ee=se,ke=0;ke<he;ke++){var Se=Y[Ae+ke],Ie=te[Ae+ke],we=Y[Ae+ke+he],xe=te[Ae+ke+he],Fe=ge*we-Ee*xe;xe=ge*xe+Ee*we,we=Fe,Y[Ae+ke]=Se+we,te[Ae+ke]=Ie+xe,Y[Ae+ke+he]=Se-we,te[Ae+ke+he]=Ie-xe,ke!==ae&&(Fe=Q*ge-se*Ee,Ee=Q*Ee+se*ge,ge=Fe)}},ce.prototype.guessLen13b=function(O,z){var Y=Math.max(z,O)|1,te=Y&1,oe=0;for(Y=Y/2|0;Y;Y=Y>>>1)oe++;return 1<<oe+1+te},ce.prototype.conjugate=function(O,z,Y){if(!(Y<=1))for(var te=0;te<Y/2;te++){var oe=O[te];O[te]=O[Y-te-1],O[Y-te-1]=oe,oe=z[te],z[te]=-z[Y-te-1],z[Y-te-1]=-oe}},ce.prototype.normalize13b=function(O,z){for(var Y=0,te=0;te<z/2;te++){var oe=Math.round(O[2*te+1]/z)*8192+Math.round(O[2*te]/z)+Y;O[te]=oe&67108863,oe<67108864?Y=0:Y=oe/67108864|0}return O},ce.prototype.convert13b=function(O,z,Y,te){for(var oe=0,le=0;le<z;le++)oe=oe+(O[le]|0),Y[2*le]=oe&8191,oe=oe>>>13,Y[2*le+1]=oe&8191,oe=oe>>>13;for(le=2*z;le<te;++le)Y[le]=0;I(oe===0),I((oe&-8192)===0)},ce.prototype.stub=function(O){for(var z=new Array(O),Y=0;Y<O;Y++)z[Y]=0;return z},ce.prototype.mulp=function(O,z,Y){var te=2*this.guessLen13b(O.length,z.length),oe=this.makeRBT(te),le=this.stub(te),he=new Array(te),ae=new Array(te),Q=new Array(te),se=new Array(te),Ae=new Array(te),ge=new Array(te),Ee=Y.words;Ee.length=te,this.convert13b(O.words,O.length,he,te),this.convert13b(z.words,z.length,se,te),this.transform(he,le,ae,Q,te,oe),this.transform(se,le,Ae,ge,te,oe);for(var ke=0;ke<te;ke++){var Se=ae[ke]*Ae[ke]-Q[ke]*ge[ke];Q[ke]=ae[ke]*ge[ke]+Q[ke]*Ae[ke],ae[ke]=Se}return this.conjugate(ae,Q,te),this.transform(ae,Q,Ee,le,te,oe),this.conjugate(Ee,le,te),this.normalize13b(Ee,te),Y.negative=O.negative^z.negative,Y.length=O.length+z.length,Y.strip()},T.prototype.mul=function(O){var z=new T(null);return z.words=new Array(this.length+O.length),this.mulTo(O,z)},T.prototype.mulf=function(O){var z=new T(null);return z.words=new Array(this.length+O.length),ne(this,O,z)},T.prototype.imul=function(O){return this.clone().mulTo(O,this)},T.prototype.imuln=function(O){I(typeof O=="number"),I(O<67108864);for(var z=0,Y=0;Y<this.length;Y++){var te=(this.words[Y]|0)*O,oe=(te&67108863)+(z&67108863);z>>=26,z+=te/67108864|0,z+=oe>>>26,this.words[Y]=oe&67108863}return z!==0&&(this.words[Y]=z,this.length++),this.length=O===0?1:this.length,this},T.prototype.muln=function(O){return this.clone().imuln(O)},T.prototype.sqr=function(){return this.mul(this)},T.prototype.isqr=function(){return this.imul(this.clone())},T.prototype.pow=function(O){var z=K(O);if(z.length===0)return new T(1);for(var Y=this,te=0;te<z.length&&z[te]===0;te++,Y=Y.sqr());if(++te<z.length)for(var oe=Y.sqr();te<z.length;te++,oe=oe.sqr())z[te]!==0&&(Y=Y.mul(oe));return Y},T.prototype.iushln=function(O){I(typeof O=="number"&&O>=0);var z=O%26,Y=(O-z)/26,te=67108863>>>26-z<<26-z,oe;if(z!==0){var le=0;for(oe=0;oe<this.length;oe++){var he=this.words[oe]&te,ae=(this.words[oe]|0)-he<<z;this.words[oe]=ae|le,le=he>>>26-z}le&&(this.words[oe]=le,this.length++)}if(Y!==0){for(oe=this.length-1;oe>=0;oe--)this.words[oe+Y]=this.words[oe];for(oe=0;oe<Y;oe++)this.words[oe]=0;this.length+=Y}return this.strip()},T.prototype.ishln=function(O){return I(this.negative===0),this.iushln(O)},T.prototype.iushrn=function(O,z,Y){I(typeof O=="number"&&O>=0);var te;z?te=(z-z%26)/26:te=0;var oe=O%26,le=Math.min((O-oe)/26,this.length),he=67108863^67108863>>>oe<<oe,ae=Y;if(te-=le,te=Math.max(0,te),ae){for(var Q=0;Q<le;Q++)ae.words[Q]=this.words[Q];ae.length=le}if(le!==0)if(this.length>le)for(this.length-=le,Q=0;Q<this.length;Q++)this.words[Q]=this.words[Q+le];else this.words[0]=0,this.length=1;var se=0;for(Q=this.length-1;Q>=0&&(se!==0||Q>=te);Q--){var Ae=this.words[Q]|0;this.words[Q]=se<<26-oe|Ae>>>oe,se=Ae&he}return ae&&se!==0&&(ae.words[ae.length++]=se),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},T.prototype.ishrn=function(O,z,Y){return I(this.negative===0),this.iushrn(O,z,Y)},T.prototype.shln=function(O){return this.clone().ishln(O)},T.prototype.ushln=function(O){return this.clone().iushln(O)},T.prototype.shrn=function(O){return this.clone().ishrn(O)},T.prototype.ushrn=function(O){return this.clone().iushrn(O)},T.prototype.testn=function(O){I(typeof O=="number"&&O>=0);var z=O%26,Y=(O-z)/26,te=1<<z;if(this.length<=Y)return!1;var oe=this.words[Y];return!!(oe&te)},T.prototype.imaskn=function(O){I(typeof O=="number"&&O>=0);var z=O%26,Y=(O-z)/26;if(I(this.negative===0,"imaskn works only with positive numbers"),this.length<=Y)return this;if(z!==0&&Y++,this.length=Math.min(Y,this.length),z!==0){var te=67108863^67108863>>>z<<z;this.words[this.length-1]&=te}return this.strip()},T.prototype.maskn=function(O){return this.clone().imaskn(O)},T.prototype.iaddn=function(O){return I(typeof O=="number"),I(O<67108864),O<0?this.isubn(-O):this.negative!==0?this.length===1&&(this.words[0]|0)<O?(this.words[0]=O-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(O),this.negative=1,this):this._iaddn(O)},T.prototype._iaddn=function(O){this.words[0]+=O;for(var z=0;z<this.length&&this.words[z]>=67108864;z++)this.words[z]-=67108864,z===this.length-1?this.words[z+1]=1:this.words[z+1]++;return this.length=Math.max(this.length,z+1),this},T.prototype.isubn=function(O){if(I(typeof O=="number"),I(O<67108864),O<0)return this.iaddn(-O);if(this.negative!==0)return this.negative=0,this.iaddn(O),this.negative=1,this;if(this.words[0]-=O,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var z=0;z<this.length&&this.words[z]<0;z++)this.words[z]+=67108864,this.words[z+1]-=1;return this.strip()},T.prototype.addn=function(O){return this.clone().iaddn(O)},T.prototype.subn=function(O){return this.clone().isubn(O)},T.prototype.iabs=function(){return this.negative=0,this},T.prototype.abs=function(){return this.clone().iabs()},T.prototype._ishlnsubmul=function(O,z,Y){var te=O.length+Y,oe;this._expand(te);var le,he=0;for(oe=0;oe<O.length;oe++){le=(this.words[oe+Y]|0)+he;var ae=(O.words[oe]|0)*z;le-=ae&67108863,he=(le>>26)-(ae/67108864|0),this.words[oe+Y]=le&67108863}for(;oe<this.length-Y;oe++)le=(this.words[oe+Y]|0)+he,he=le>>26,this.words[oe+Y]=le&67108863;if(he===0)return this.strip();for(I(he===-1),he=0,oe=0;oe<this.length;oe++)le=-(this.words[oe]|0)+he,he=le>>26,this.words[oe]=le&67108863;return this.negative=1,this.strip()},T.prototype._wordDiv=function(O,z){var Y=this.length-O.length,te=this.clone(),oe=O,le=oe.words[oe.length-1]|0,he=this._countBits(le);Y=26-he,Y!==0&&(oe=oe.ushln(Y),te.iushln(Y),le=oe.words[oe.length-1]|0);var ae=te.length-oe.length,Q;if(z!=="mod"){Q=new T(null),Q.length=ae+1,Q.words=new Array(Q.length);for(var se=0;se<Q.length;se++)Q.words[se]=0}var Ae=te.clone()._ishlnsubmul(oe,1,ae);Ae.negative===0&&(te=Ae,Q&&(Q.words[ae]=1));for(var ge=ae-1;ge>=0;ge--){var Ee=(te.words[oe.length+ge]|0)*67108864+(te.words[oe.length+ge-1]|0);for(Ee=Math.min(Ee/le|0,67108863),te._ishlnsubmul(oe,Ee,ge);te.negative!==0;)Ee--,te.negative=0,te._ishlnsubmul(oe,1,ge),te.isZero()||(te.negative^=1);Q&&(Q.words[ge]=Ee)}return Q&&Q.strip(),te.strip(),z!=="div"&&Y!==0&&te.iushrn(Y),{div:Q||null,mod:te}},T.prototype.divmod=function(O,z,Y){if(I(!O.isZero()),this.isZero())return{div:new T(0),mod:new T(0)};var te,oe,le;return this.negative!==0&&O.negative===0?(le=this.neg().divmod(O,z),z!=="mod"&&(te=le.div.neg()),z!=="div"&&(oe=le.mod.neg(),Y&&oe.negative!==0&&oe.iadd(O)),{div:te,mod:oe}):this.negative===0&&O.negative!==0?(le=this.divmod(O.neg(),z),z!=="mod"&&(te=le.div.neg()),{div:te,mod:le.mod}):(this.negative&O.negative)!==0?(le=this.neg().divmod(O.neg(),z),z!=="div"&&(oe=le.mod.neg(),Y&&oe.negative!==0&&oe.isub(O)),{div:le.div,mod:oe}):O.length>this.length||this.cmp(O)<0?{div:new T(0),mod:this}:O.length===1?z==="div"?{div:this.divn(O.words[0]),mod:null}:z==="mod"?{div:null,mod:new T(this.modn(O.words[0]))}:{div:this.divn(O.words[0]),mod:new T(this.modn(O.words[0]))}:this._wordDiv(O,z)},T.prototype.div=function(O){return this.divmod(O,"div",!1).div},T.prototype.mod=function(O){return this.divmod(O,"mod",!1).mod},T.prototype.umod=function(O){return this.divmod(O,"mod",!0).mod},T.prototype.divRound=function(O){var z=this.divmod(O);if(z.mod.isZero())return z.div;var Y=z.div.negative!==0?z.mod.isub(O):z.mod,te=O.ushrn(1),oe=O.andln(1),le=Y.cmp(te);return le<0||oe===1&&le===0?z.div:z.div.negative!==0?z.div.isubn(1):z.div.iaddn(1)},T.prototype.modn=function(O){I(O<=67108863);for(var z=(1<<26)%O,Y=0,te=this.length-1;te>=0;te--)Y=(z*Y+(this.words[te]|0))%O;return Y},T.prototype.idivn=function(O){I(O<=67108863);for(var z=0,Y=this.length-1;Y>=0;Y--){var te=(this.words[Y]|0)+z*67108864;this.words[Y]=te/O|0,z=te%O}return this.strip()},T.prototype.divn=function(O){return this.clone().idivn(O)},T.prototype.egcd=function(O){I(O.negative===0),I(!O.isZero());var z=this,Y=O.clone();z.negative!==0?z=z.umod(O):z=z.clone();for(var te=new T(1),oe=new T(0),le=new T(0),he=new T(1),ae=0;z.isEven()&&Y.isEven();)z.iushrn(1),Y.iushrn(1),++ae;for(var Q=Y.clone(),se=z.clone();!z.isZero();){for(var Ae=0,ge=1;(z.words[0]&ge)===0&&Ae<26;++Ae,ge<<=1);if(Ae>0)for(z.iushrn(Ae);Ae-- >0;)(te.isOdd()||oe.isOdd())&&(te.iadd(Q),oe.isub(se)),te.iushrn(1),oe.iushrn(1);for(var Ee=0,ke=1;(Y.words[0]&ke)===0&&Ee<26;++Ee,ke<<=1);if(Ee>0)for(Y.iushrn(Ee);Ee-- >0;)(le.isOdd()||he.isOdd())&&(le.iadd(Q),he.isub(se)),le.iushrn(1),he.iushrn(1);z.cmp(Y)>=0?(z.isub(Y),te.isub(le),oe.isub(he)):(Y.isub(z),le.isub(te),he.isub(oe))}return{a:le,b:he,gcd:Y.iushln(ae)}},T.prototype._invmp=function(O){I(O.negative===0),I(!O.isZero());var z=this,Y=O.clone();z.negative!==0?z=z.umod(O):z=z.clone();for(var te=new T(1),oe=new T(0),le=Y.clone();z.cmpn(1)>0&&Y.cmpn(1)>0;){for(var he=0,ae=1;(z.words[0]&ae)===0&&he<26;++he,ae<<=1);if(he>0)for(z.iushrn(he);he-- >0;)te.isOdd()&&te.iadd(le),te.iushrn(1);for(var Q=0,se=1;(Y.words[0]&se)===0&&Q<26;++Q,se<<=1);if(Q>0)for(Y.iushrn(Q);Q-- >0;)oe.isOdd()&&oe.iadd(le),oe.iushrn(1);z.cmp(Y)>=0?(z.isub(Y),te.isub(oe)):(Y.isub(z),oe.isub(te))}var Ae;return z.cmpn(1)===0?Ae=te:Ae=oe,Ae.cmpn(0)<0&&Ae.iadd(O),Ae},T.prototype.gcd=function(O){if(this.isZero())return O.abs();if(O.isZero())return this.abs();var z=this.clone(),Y=O.clone();z.negative=0,Y.negative=0;for(var te=0;z.isEven()&&Y.isEven();te++)z.iushrn(1),Y.iushrn(1);do{for(;z.isEven();)z.iushrn(1);for(;Y.isEven();)Y.iushrn(1);var oe=z.cmp(Y);if(oe<0){var le=z;z=Y,Y=le}else if(oe===0||Y.cmpn(1)===0)break;z.isub(Y)}while(!0);return Y.iushln(te)},T.prototype.invm=function(O){return this.egcd(O).a.umod(O)},T.prototype.isEven=function(){return(this.words[0]&1)===0},T.prototype.isOdd=function(){return(this.words[0]&1)===1},T.prototype.andln=function(O){return this.words[0]&O},T.prototype.bincn=function(O){I(typeof O=="number");var z=O%26,Y=(O-z)/26,te=1<<z;if(this.length<=Y)return this._expand(Y+1),this.words[Y]|=te,this;for(var oe=te,le=Y;oe!==0&&le<this.length;le++){var he=this.words[le]|0;he+=oe,oe=he>>>26,he&=67108863,this.words[le]=he}return oe!==0&&(this.words[le]=oe,this.length++),this},T.prototype.isZero=function(){return this.length===1&&this.words[0]===0},T.prototype.cmpn=function(O){var z=O<0;if(this.negative!==0&&!z)return-1;if(this.negative===0&&z)return 1;this.strip();var Y;if(this.length>1)Y=1;else{z&&(O=-O),I(O<=67108863,"Number is too big");var te=this.words[0]|0;Y=te===O?0:te<O?-1:1}return this.negative!==0?-Y|0:Y},T.prototype.cmp=function(O){if(this.negative!==0&&O.negative===0)return-1;if(this.negative===0&&O.negative!==0)return 1;var z=this.ucmp(O);return this.negative!==0?-z|0:z},T.prototype.ucmp=function(O){if(this.length>O.length)return 1;if(this.length<O.length)return-1;for(var z=0,Y=this.length-1;Y>=0;Y--){var te=this.words[Y]|0,oe=O.words[Y]|0;if(te!==oe){te<oe?z=-1:te>oe&&(z=1);break}}return z},T.prototype.gtn=function(O){return this.cmpn(O)===1},T.prototype.gt=function(O){return this.cmp(O)===1},T.prototype.gten=function(O){return this.cmpn(O)>=0},T.prototype.gte=function(O){return this.cmp(O)>=0},T.prototype.ltn=function(O){return this.cmpn(O)===-1},T.prototype.lt=function(O){return this.cmp(O)===-1},T.prototype.lten=function(O){return this.cmpn(O)<=0},T.prototype.lte=function(O){return this.cmp(O)<=0},T.prototype.eqn=function(O){return this.cmpn(O)===0},T.prototype.eq=function(O){return this.cmp(O)===0},T.red=function(O){return new be(O)},T.prototype.toRed=function(O){return I(!this.red,"Already a number in reduction context"),I(this.negative===0,"red works only with positives"),O.convertTo(this)._forceRed(O)},T.prototype.fromRed=function(){return I(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},T.prototype._forceRed=function(O){return this.red=O,this},T.prototype.forceRed=function(O){return I(!this.red,"Already a number in reduction context"),this._forceRed(O)},T.prototype.redAdd=function(O){return I(this.red,"redAdd works only with red numbers"),this.red.add(this,O)},T.prototype.redIAdd=function(O){return I(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,O)},T.prototype.redSub=function(O){return I(this.red,"redSub works only with red numbers"),this.red.sub(this,O)},T.prototype.redISub=function(O){return I(this.red,"redISub works only with red numbers"),this.red.isub(this,O)},T.prototype.redShl=function(O){return I(this.red,"redShl works only with red numbers"),this.red.shl(this,O)},T.prototype.redMul=function(O){return I(this.red,"redMul works only with red numbers"),this.red._verify2(this,O),this.red.mul(this,O)},T.prototype.redIMul=function(O){return I(this.red,"redMul works only with red numbers"),this.red._verify2(this,O),this.red.imul(this,O)},T.prototype.redSqr=function(){return I(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},T.prototype.redISqr=function(){return I(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},T.prototype.redSqrt=function(){return I(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},T.prototype.redInvm=function(){return I(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},T.prototype.redNeg=function(){return I(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},T.prototype.redPow=function(O){return I(this.red&&!O.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,O)};var fe={k256:null,p224:null,p192:null,p25519:null};function de(ue,O){this.name=ue,this.p=new T(O,16),this.n=this.p.bitLength(),this.k=new T(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}de.prototype._tmp=function(){var O=new T(null);return O.words=new Array(Math.ceil(this.n/13)),O},de.prototype.ireduce=function(O){var z=O,Y;do this.split(z,this.tmp),z=this.imulK(z),z=z.iadd(this.tmp),Y=z.bitLength();while(Y>this.n);var te=Y<this.n?-1:z.ucmp(this.p);return te===0?(z.words[0]=0,z.length=1):te>0?z.isub(this.p):z.strip!==void 0?z.strip():z._strip(),z},de.prototype.split=function(O,z){O.iushrn(this.n,0,z)},de.prototype.imulK=function(O){return O.imul(this.k)};function pe(){de.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}B(pe,de),pe.prototype.split=function(O,z){for(var Y=4194303,te=Math.min(O.length,9),oe=0;oe<te;oe++)z.words[oe]=O.words[oe];if(z.length=te,O.length<=9){O.words[0]=0,O.length=1;return}var le=O.words[9];for(z.words[z.length++]=le&Y,oe=10;oe<O.length;oe++){var he=O.words[oe]|0;O.words[oe-10]=(he&Y)<<4|le>>>22,le=he}le>>>=22,O.words[oe-10]=le,le===0&&O.length>10?O.length-=10:O.length-=9},pe.prototype.imulK=function(O){O.words[O.length]=0,O.words[O.length+1]=0,O.length+=2;for(var z=0,Y=0;Y<O.length;Y++){var te=O.words[Y]|0;z+=te*977,O.words[Y]=z&67108863,z=te*64+(z/67108864|0)}return O.words[O.length-1]===0&&(O.length--,O.words[O.length-1]===0&&O.length--),O};function ve(){de.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}B(ve,de);function ye(){de.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}B(ye,de);function _e(){de.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}B(_e,de),_e.prototype.imulK=function(O){for(var z=0,Y=0;Y<O.length;Y++){var te=(O.words[Y]|0)*19+z,oe=te&67108863;te>>>=26,O.words[Y]=oe,z=te}return z!==0&&(O.words[O.length++]=z),O},T._prime=function(O){if(fe[O])return fe[O];var z;if(O==="k256")z=new pe;else if(O==="p224")z=new ve;else if(O==="p192")z=new ye;else if(O==="p25519")z=new _e;else throw new Error("Unknown prime "+O);return fe[O]=z,z};function be(ue){if(typeof ue=="string"){var O=T._prime(ue);this.m=O.p,this.prime=O}else I(ue.gtn(1),"modulus must be greater than 1"),this.m=ue,this.prime=null}be.prototype._verify1=function(O){I(O.negative===0,"red works only with positives"),I(O.red,"red works only with red numbers")},be.prototype._verify2=function(O,z){I((O.negative|z.negative)===0,"red works only with positives"),I(O.red&&O.red===z.red,"red works only with red numbers")},be.prototype.imod=function(O){return this.prime?this.prime.ireduce(O)._forceRed(this):O.umod(this.m)._forceRed(this)},be.prototype.neg=function(O){return O.isZero()?O.clone():this.m.sub(O)._forceRed(this)},be.prototype.add=function(O,z){this._verify2(O,z);var Y=O.add(z);return Y.cmp(this.m)>=0&&Y.isub(this.m),Y._forceRed(this)},be.prototype.iadd=function(O,z){this._verify2(O,z);var Y=O.iadd(z);return Y.cmp(this.m)>=0&&Y.isub(this.m),Y},be.prototype.sub=function(O,z){this._verify2(O,z);var Y=O.sub(z);return Y.cmpn(0)<0&&Y.iadd(this.m),Y._forceRed(this)},be.prototype.isub=function(O,z){this._verify2(O,z);var Y=O.isub(z);return Y.cmpn(0)<0&&Y.iadd(this.m),Y},be.prototype.shl=function(O,z){return this._verify1(O),this.imod(O.ushln(z))},be.prototype.imul=function(O,z){return this._verify2(O,z),this.imod(O.imul(z))},be.prototype.mul=function(O,z){return this._verify2(O,z),this.imod(O.mul(z))},be.prototype.isqr=function(O){return this.imul(O,O.clone())},be.prototype.sqr=function(O){return this.mul(O,O)},be.prototype.sqrt=function(O){if(O.isZero())return O.clone();var z=this.m.andln(3);if(I(z%2===1),z===3){var Y=this.m.add(new T(1)).iushrn(2);return this.pow(O,Y)}for(var te=this.m.subn(1),oe=0;!te.isZero()&&te.andln(1)===0;)oe++,te.iushrn(1);I(!te.isZero());var le=new T(1).toRed(this),he=le.redNeg(),ae=this.m.subn(1).iushrn(1),Q=this.m.bitLength();for(Q=new T(2*Q*Q).toRed(this);this.pow(Q,ae).cmp(he)!==0;)Q.redIAdd(he);for(var se=this.pow(Q,te),Ae=this.pow(O,te.addn(1).iushrn(1)),ge=this.pow(O,te),Ee=oe;ge.cmp(le)!==0;){for(var ke=ge,Se=0;ke.cmp(le)!==0;Se++)ke=ke.redSqr();I(Se<Ee);var Ie=this.pow(se,new T(1).iushln(Ee-Se-1));Ae=Ae.redMul(Ie),se=Ie.redSqr(),ge=ge.redMul(se),Ee=Se}return Ae},be.prototype.invm=function(O){var z=O._invmp(this.m);return z.negative!==0?(z.negative=0,this.imod(z).redNeg()):this.imod(z)},be.prototype.pow=function(O,z){if(z.isZero())return new T(1).toRed(this);if(z.cmpn(1)===0)return O.clone();var Y=4,te=new Array(1<<Y);te[0]=new T(1).toRed(this),te[1]=O;for(var oe=2;oe<te.length;oe++)te[oe]=this.mul(te[oe-1],O);var le=te[0],he=0,ae=0,Q=z.bitLength()%26;for(Q===0&&(Q=26),oe=z.length-1;oe>=0;oe--){for(var se=z.words[oe],Ae=Q-1;Ae>=0;Ae--){var ge=se>>Ae&1;if(le!==te[0]&&(le=this.sqr(le)),ge===0&&he===0){ae=0;continue}he<<=1,he|=ge,ae++,!(ae!==Y&&(oe!==0||Ae!==0))&&(le=this.mul(le,te[he]),ae=0,he=0)}Q=26}return le},be.prototype.convertTo=function(O){var z=O.umod(this.m);return z===O?z.clone():z},be.prototype.convertFrom=function(O){var z=O.clone();return z.red=null,z},T.mont=function(O){return new Te(O)};function Te(ue){be.call(this,ue),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new T(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}B(Te,be),Te.prototype.convertTo=function(O){return this.imod(O.ushln(this.shift))},Te.prototype.convertFrom=function(O){var z=this.imod(O.mul(this.rinv));return z.red=null,z},Te.prototype.imul=function(O,z){if(O.isZero()||z.isZero())return O.words[0]=0,O.length=1,O;var Y=O.imul(z),te=Y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),oe=Y.isub(te).iushrn(this.shift),le=oe;return oe.cmp(this.m)>=0?le=oe.isub(this.m):oe.cmpn(0)<0&&(le=oe.iadd(this.m)),le._forceRed(this)},Te.prototype.mul=function(O,z){if(O.isZero()||z.isZero())return new T(0)._forceRed(this);var Y=O.mul(z),te=Y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),oe=Y.isub(te).iushrn(this.shift),le=oe;return oe.cmp(this.m)>=0?le=oe.isub(this.m):oe.cmpn(0)<0&&(le=oe.iadd(this.m)),le._forceRed(this)},Te.prototype.invm=function(O){var z=this.imod(O._invmp(this.m).mul(this.r2));return z._forceRed(this)}})(E,bn$a)})(bn$b)),bn$b.exports}var brorand={exports:{}},hasRequiredBrorand;function requireBrorand(){if(hasRequiredBrorand)return brorand.exports;hasRequiredBrorand=1;var E;brorand.exports=function(B){return E||(E=new A(null)),E.generate(B)};function A(I){this.rand=I}if(brorand.exports.Rand=A,A.prototype.generate=function(B){return this._rand(B)},A.prototype._rand=function(B){if(this.rand.getBytes)return this.rand.getBytes(B);for(var T=new Uint8Array(B),R=0;R<T.length;R++)T[R]=this.rand.getByte();return T},typeof self=="object")self.crypto&&self.crypto.getRandomValues?A.prototype._rand=function(B){var T=new Uint8Array(B);return self.crypto.getRandomValues(T),T}:self.msCrypto&&self.msCrypto.getRandomValues?A.prototype._rand=function(B){var T=new Uint8Array(B);return self.msCrypto.getRandomValues(T),T}:typeof window=="object"&&(A.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var _=requireCryptoBrowserify();if(typeof _.randomBytes!="function")throw new Error("Not supported");A.prototype._rand=function(B){return _.randomBytes(B)}}catch{}return brorand.exports}var mr,hasRequiredMr;function requireMr(){if(hasRequiredMr)return mr;hasRequiredMr=1;var E=requireBn$5(),A=requireBrorand();function _(I){this.rand=I||new A.Rand}return mr=_,_.create=function(B){return new _(B)},_.prototype._randbelow=function(B){var T=B.bitLength(),R=Math.ceil(T/8);do var P=new E(this.rand.generate(R));while(P.cmp(B)>=0);return P},_.prototype._randrange=function(B,T){var R=T.sub(B);return B.add(this._randbelow(R))},_.prototype.test=function(B,T,R){var P=B.bitLength(),D=E.mont(B),F=new E(1).toRed(D);T||(T=Math.max(1,P/48|0));for(var L=B.subn(1),U=0;!L.testn(U);U++);for(var V=B.shrn(U),K=L.toRed(D),J=!0;T>0;T--){var ee=this._randrange(new E(2),L);R&&R(ee);var ie=ee.toRed(D).redPow(V);if(!(ie.cmp(F)===0||ie.cmp(K)===0)){for(var ne=1;ne<U;ne++){if(ie=ie.redSqr(),ie.cmp(F)===0)return!1;if(ie.cmp(K)===0)break}if(ne===U)return!1}}return J},_.prototype.getDivisor=function(B,T){var R=B.bitLength(),P=E.mont(B),D=new E(1).toRed(P);T||(T=Math.max(1,R/48|0));for(var F=B.subn(1),L=0;!F.testn(L);L++);for(var U=B.shrn(L),V=F.toRed(P);T>0;T--){var K=this._randrange(new E(2),F),J=B.gcd(K);if(J.cmpn(1)!==0)return J;var ee=K.toRed(P).redPow(U);if(!(ee.cmp(D)===0||ee.cmp(V)===0)){for(var ie=1;ie<L;ie++){if(ee=ee.redSqr(),ee.cmp(D)===0)return ee.fromRed().subn(1).gcd(B);if(ee.cmp(V)===0)break}if(ie===L)return ee=ee.redSqr(),ee.fromRed().subn(1).gcd(B)}}return!1},mr}var generatePrime,hasRequiredGeneratePrime;function requireGeneratePrime(){if(hasRequiredGeneratePrime)return generatePrime;hasRequiredGeneratePrime=1;var E=requireBrowser$e();generatePrime=ie,ie.simpleSieve=J,ie.fermatTest=ee;var A=requireBn$6(),_=new A(24),I=requireMr(),B=new I,T=new A(1),R=new A(2),P=new A(5);new A(16),new A(8);var D=new A(10),F=new A(3);new A(7);var L=new A(11),U=new A(4);new A(12);var V=null;function K(){if(V!==null)return V;var ne=1048576,ce=[];ce[0]=2;for(var fe=1,de=3;de<ne;de+=2){for(var pe=Math.ceil(Math.sqrt(de)),ve=0;ve<fe&&ce[ve]<=pe&&de%ce[ve]!==0;ve++);fe!==ve&&ce[ve]<=pe||(ce[fe++]=de)}return V=ce,ce}function J(ne){for(var ce=K(),fe=0;fe<ce.length;fe++)if(ne.modn(ce[fe])===0)return ne.cmpn(ce[fe])===0;return!0}function ee(ne){var ce=A.mont(ne);return R.toRed(ce).redPow(ne.subn(1)).fromRed().cmpn(1)===0}function ie(ne,ce){if(ne<16)return ce===2||ce===5?new A([140,123]):new A([140,39]);ce=new A(ce);for(var fe,de;;){for(fe=new A(E(Math.ceil(ne/8)));fe.bitLength()>ne;)fe.ishrn(1);if(fe.isEven()&&fe.iadd(T),fe.testn(1)||fe.iadd(R),ce.cmp(R)){if(!ce.cmp(P))for(;fe.mod(D).cmp(F);)fe.iadd(U)}else for(;fe.mod(_).cmp(L);)fe.iadd(U);if(de=fe.shrn(1),J(de)&&J(fe)&&ee(de)&&ee(fe)&&B.test(de)&&B.test(fe))return fe}}return generatePrime}const modp1={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"},require$$1$4={modp1,modp2,modp5,modp14,modp15,modp16,modp17,modp18};var dh,hasRequiredDh;function requireDh(){if(hasRequiredDh)return dh;hasRequiredDh=1;var E=requireBn$6(),A=requireMr(),_=new A,I=new E(24),B=new E(11),T=new E(10),R=new E(3),P=new E(7),D=requireGeneratePrime(),F=requireBrowser$e();dh=J;function L(ie,ne){return ne=ne||"utf8",Buffer$1.isBuffer(ie)||(ie=new Buffer$1(ie,ne)),this._pub=new E(ie),this}function U(ie,ne){return ne=ne||"utf8",Buffer$1.isBuffer(ie)||(ie=new Buffer$1(ie,ne)),this._priv=new E(ie),this}var V={};function K(ie,ne){var ce=ne.toString("hex"),fe=[ce,ie.toString(16)].join("_");if(fe in V)return V[fe];var de=0;if(ie.isEven()||!D.simpleSieve||!D.fermatTest(ie)||!_.test(ie))return de+=1,ce==="02"||ce==="05"?de+=8:de+=4,V[fe]=de,de;_.test(ie.shrn(1))||(de+=2);var pe;switch(ce){case"02":ie.mod(I).cmp(B)&&(de+=8);break;case"05":pe=ie.mod(T),pe.cmp(R)&&pe.cmp(P)&&(de+=8);break;default:de+=4}return V[fe]=de,de}function J(ie,ne,ce){this.setGenerator(ne),this.__prime=new E(ie),this._prime=E.mont(this.__prime),this._primeLen=ie.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,ce?(this.setPublicKey=L,this.setPrivateKey=U):this._primeCode=8}Object.defineProperty(J.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=K(this.__prime,this.__gen)),this._primeCode}}),J.prototype.generateKeys=function(){return this._priv||(this._priv=new E(F(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},J.prototype.computeSecret=function(ie){ie=new E(ie),ie=ie.toRed(this._prime);var ne=ie.redPow(this._priv).fromRed(),ce=new Buffer$1(ne.toArray()),fe=this.getPrime();if(ce.length<fe.length){var de=new Buffer$1(fe.length-ce.length);de.fill(0),ce=Buffer$1.concat([de,ce])}return ce},J.prototype.getPublicKey=function(ne){return ee(this._pub,ne)},J.prototype.getPrivateKey=function(ne){return ee(this._priv,ne)},J.prototype.getPrime=function(ie){return ee(this.__prime,ie)},J.prototype.getGenerator=function(ie){return ee(this._gen,ie)},J.prototype.setGenerator=function(ie,ne){return ne=ne||"utf8",Buffer$1.isBuffer(ie)||(ie=new Buffer$1(ie,ne)),this.__gen=ie,this._gen=new E(ie),this};function ee(ie,ne){var ce=new Buffer$1(ie.toArray());return ne?ce.toString(ne):ce}return dh}var hasRequiredBrowser$7;function requireBrowser$7(){if(hasRequiredBrowser$7)return browser$7;hasRequiredBrowser$7=1;var E=requireGeneratePrime(),A=require$$1$4,_=requireDh();function I(R){var P=new Buffer$1(A[R].prime,"hex"),D=new Buffer$1(A[R].gen,"hex");return new _(P,D)}var B={binary:!0,hex:!0,base64:!0};function T(R,P,D,F){return Buffer$1.isBuffer(P)||B[P]===void 0?T(R,"binary",P,D):(P=P||"binary",F=F||"binary",D=D||new Buffer$1([2]),Buffer$1.isBuffer(D)||(D=new Buffer$1(D,F)),typeof R=="number"?new _(E(R,D),D,!0):(Buffer$1.isBuffer(R)||(R=new Buffer$1(R,P)),new _(R,D,!0)))}return browser$7.DiffieHellmanGroup=browser$7.createDiffieHellmanGroup=browser$7.getDiffieHellman=I,browser$7.createDiffieHellman=browser$7.DiffieHellman=T,browser$7}var readableBrowser$1={exports:{}},processNextickArgs={exports:{}},hasRequiredProcessNextickArgs;function requireProcessNextickArgs(){if(hasRequiredProcessNextickArgs)return processNextickArgs.exports;hasRequiredProcessNextickArgs=1,typeof process$1>"u"||!process$1.version||process$1.version.indexOf("v0.")===0||process$1.version.indexOf("v1.")===0&&process$1.version.indexOf("v1.8.")!==0?processNextickArgs.exports={nextTick:E}:processNextickArgs.exports=process$1;function E(A,_,I,B){if(typeof A!="function")throw new TypeError('"callback" argument must be a function');var T=arguments.length,R,P;switch(T){case 0:case 1:return process$1.nextTick(A);case 2:return process$1.nextTick(function(){A.call(null,_)});case 3:return process$1.nextTick(function(){A.call(null,_,I)});case 4:return process$1.nextTick(function(){A.call(null,_,I,B)});default:for(R=new Array(T-1),P=0;P<R.length;)R[P++]=arguments[P];return process$1.nextTick(function(){A.apply(null,R)})}}return processNextickArgs.exports}var isarray,hasRequiredIsarray;function requireIsarray(){if(hasRequiredIsarray)return isarray;hasRequiredIsarray=1;var E={}.toString;return isarray=Array.isArray||function(A){return E.call(A)=="[object Array]"},isarray}var streamBrowser,hasRequiredStreamBrowser;function requireStreamBrowser(){return hasRequiredStreamBrowser||(hasRequiredStreamBrowser=1,streamBrowser=requireEvents().EventEmitter),streamBrowser}var safeBuffer={exports:{}},hasRequiredSafeBuffer;function requireSafeBuffer(){return hasRequiredSafeBuffer||(hasRequiredSafeBuffer=1,(function(E,A){var _=requireDist$1(),I=_.Buffer;function B(R,P){for(var D in R)P[D]=R[D]}I.from&&I.alloc&&I.allocUnsafe&&I.allocUnsafeSlow?E.exports=_:(B(_,A),A.Buffer=T);function T(R,P,D){return I(R,P,D)}B(I,T),T.from=function(R,P,D){if(typeof R=="number")throw new TypeError("Argument must not be a number");return I(R,P,D)},T.alloc=function(R,P,D){if(typeof R!="number")throw new TypeError("Argument must be a number");var F=I(R);return P!==void 0?typeof D=="string"?F.fill(P,D):F.fill(P):F.fill(0),F},T.allocUnsafe=function(R){if(typeof R!="number")throw new TypeError("Argument must be a number");return I(R)},T.allocUnsafeSlow=function(R){if(typeof R!="number")throw new TypeError("Argument must be a number");return _.SlowBuffer(R)}})(safeBuffer,safeBuffer.exports)),safeBuffer.exports}var util$2={},hasRequiredUtil$2;function requireUtil$2(){if(hasRequiredUtil$2)return util$2;hasRequiredUtil$2=1;function E(ee){return Array.isArray?Array.isArray(ee):J(ee)==="[object Array]"}util$2.isArray=E;function A(ee){return typeof ee=="boolean"}util$2.isBoolean=A;function _(ee){return ee===null}util$2.isNull=_;function I(ee){return ee==null}util$2.isNullOrUndefined=I;function B(ee){return typeof ee=="number"}util$2.isNumber=B;function T(ee){return typeof ee=="string"}util$2.isString=T;function R(ee){return typeof ee=="symbol"}util$2.isSymbol=R;function P(ee){return ee===void 0}util$2.isUndefined=P;function D(ee){return J(ee)==="[object RegExp]"}util$2.isRegExp=D;function F(ee){return typeof ee=="object"&&ee!==null}util$2.isObject=F;function L(ee){return J(ee)==="[object Date]"}util$2.isDate=L;function U(ee){return J(ee)==="[object Error]"||ee instanceof Error}util$2.isError=U;function V(ee){return typeof ee=="function"}util$2.isFunction=V;function K(ee){return ee===null||typeof ee=="boolean"||typeof ee=="number"||typeof ee=="string"||typeof ee=="symbol"||typeof ee>"u"}util$2.isPrimitive=K,util$2.isBuffer=requireDist$1().Buffer.isBuffer;function J(ee){return Object.prototype.toString.call(ee)}return util$2}var BufferList={exports:{}},hasRequiredBufferList;function requireBufferList(){return hasRequiredBufferList||(hasRequiredBufferList=1,(function(E){function A(T,R){if(!(T instanceof R))throw new TypeError("Cannot call a class as a function")}var _=requireSafeBuffer().Buffer,I=requireUtil$3();function B(T,R,P){T.copy(R,P)}E.exports=(function(){function T(){A(this,T),this.head=null,this.tail=null,this.length=0}return T.prototype.push=function(P){var D={data:P,next:null};this.length>0?this.tail.next=D:this.head=D,this.tail=D,++this.length},T.prototype.unshift=function(P){var D={data:P,next:this.head};this.length===0&&(this.tail=D),this.head=D,++this.length},T.prototype.shift=function(){if(this.length!==0){var P=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,P}},T.prototype.clear=function(){this.head=this.tail=null,this.length=0},T.prototype.join=function(P){if(this.length===0)return"";for(var D=this.head,F=""+D.data;D=D.next;)F+=P+D.data;return F},T.prototype.concat=function(P){if(this.length===0)return _.alloc(0);for(var D=_.allocUnsafe(P>>>0),F=this.head,L=0;F;)B(F.data,D,L),L+=F.data.length,F=F.next;return D},T})(),I&&I.inspect&&I.inspect.custom&&(E.exports.prototype[I.inspect.custom]=function(){var T=I.inspect({length:this.length});return this.constructor.name+" "+T})})(BufferList)),BufferList.exports}var destroy_1,hasRequiredDestroy;function requireDestroy(){if(hasRequiredDestroy)return destroy_1;hasRequiredDestroy=1;var E=requireProcessNextickArgs();function A(B,T){var R=this,P=this._readableState&&this._readableState.destroyed,D=this._writableState&&this._writableState.destroyed;return P||D?(T?T(B):B&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,E.nextTick(I,this,B)):E.nextTick(I,this,B)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(B||null,function(F){!T&&F?R._writableState?R._writableState.errorEmitted||(R._writableState.errorEmitted=!0,E.nextTick(I,R,F)):E.nextTick(I,R,F):T&&T(F)}),this)}function _(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function I(B,T){B.emit("error",T)}return destroy_1={destroy:A,undestroy:_},destroy_1}var _stream_writable,hasRequired_stream_writable;function require_stream_writable(){if(hasRequired_stream_writable)return _stream_writable;hasRequired_stream_writable=1;var E=requireProcessNextickArgs();_stream_writable=ee;function A(le){var he=this;this.next=null,this.entry=null,this.finish=function(){oe(he,le)}}var _=!process$1.browser&&["v0.10","v0.9."].indexOf(process$1.version.slice(0,5))>-1?setImmediate:E.nextTick,I;ee.WritableState=K;var B=Object.create(requireUtil$2());B.inherits=requireInherits_browser();var T={deprecate:requireBrowser$d()},R=requireStreamBrowser(),P=requireSafeBuffer().Buffer,D=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function F(le){return P.from(le)}function L(le){return P.isBuffer(le)||le instanceof D}var U=requireDestroy();B.inherits(ee,R);function V(){}function K(le,he){I=I||require_stream_duplex(),le=le||{};var ae=he instanceof I;this.objectMode=!!le.objectMode,ae&&(this.objectMode=this.objectMode||!!le.writableObjectMode);var Q=le.highWaterMark,se=le.writableHighWaterMark,Ae=this.objectMode?16:16*1024;Q||Q===0?this.highWaterMark=Q:ae&&(se||se===0)?this.highWaterMark=se:this.highWaterMark=Ae,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var ge=le.decodeStrings===!1;this.decodeStrings=!ge,this.defaultEncoding=le.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Ee){ye(he,Ee)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new A(this)}K.prototype.getBuffer=function(){for(var he=this.bufferedRequest,ae=[];he;)ae.push(he),he=he.next;return ae},(function(){try{Object.defineProperty(K.prototype,"buffer",{get:T.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var J;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(J=Function.prototype[Symbol.hasInstance],Object.defineProperty(ee,Symbol.hasInstance,{value:function(le){return J.call(this,le)?!0:this!==ee?!1:le&&le._writableState instanceof K}})):J=function(le){return le instanceof this};function ee(le){if(I=I||require_stream_duplex(),!J.call(ee,this)&&!(this instanceof I))return new ee(le);this._writableState=new K(le,this),this.writable=!0,le&&(typeof le.write=="function"&&(this._write=le.write),typeof le.writev=="function"&&(this._writev=le.writev),typeof le.destroy=="function"&&(this._destroy=le.destroy),typeof le.final=="function"&&(this._final=le.final)),R.call(this)}ee.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function ie(le,he){var ae=new Error("write after end");le.emit("error",ae),E.nextTick(he,ae)}function ne(le,he,ae,Q){var se=!0,Ae=!1;return ae===null?Ae=new TypeError("May not write null values to stream"):typeof ae!="string"&&ae!==void 0&&!he.objectMode&&(Ae=new TypeError("Invalid non-string/buffer chunk")),Ae&&(le.emit("error",Ae),E.nextTick(Q,Ae),se=!1),se}ee.prototype.write=function(le,he,ae){var Q=this._writableState,se=!1,Ae=!Q.objectMode&&L(le);return Ae&&!P.isBuffer(le)&&(le=F(le)),typeof he=="function"&&(ae=he,he=null),Ae?he="buffer":he||(he=Q.defaultEncoding),typeof ae!="function"&&(ae=V),Q.ended?ie(this,ae):(Ae||ne(this,Q,le,ae))&&(Q.pendingcb++,se=fe(this,Q,Ae,le,he,ae)),se},ee.prototype.cork=function(){var le=this._writableState;le.corked++},ee.prototype.uncork=function(){var le=this._writableState;le.corked&&(le.corked--,!le.writing&&!le.corked&&!le.bufferProcessing&&le.bufferedRequest&&Te(this,le))},ee.prototype.setDefaultEncoding=function(he){if(typeof he=="string"&&(he=he.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((he+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+he);return this._writableState.defaultEncoding=he,this};function ce(le,he,ae){return!le.objectMode&&le.decodeStrings!==!1&&typeof he=="string"&&(he=P.from(he,ae)),he}Object.defineProperty(ee.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function fe(le,he,ae,Q,se,Ae){if(!ae){var ge=ce(he,Q,se);Q!==ge&&(ae=!0,se="buffer",Q=ge)}var Ee=he.objectMode?1:Q.length;he.length+=Ee;var ke=he.length<he.highWaterMark;if(ke||(he.needDrain=!0),he.writing||he.corked){var Se=he.lastBufferedRequest;he.lastBufferedRequest={chunk:Q,encoding:se,isBuf:ae,callback:Ae,next:null},Se?Se.next=he.lastBufferedRequest:he.bufferedRequest=he.lastBufferedRequest,he.bufferedRequestCount+=1}else de(le,he,!1,Ee,Q,se,Ae);return ke}function de(le,he,ae,Q,se,Ae,ge){he.writelen=Q,he.writecb=ge,he.writing=!0,he.sync=!0,ae?le._writev(se,he.onwrite):le._write(se,Ae,he.onwrite),he.sync=!1}function pe(le,he,ae,Q,se){--he.pendingcb,ae?(E.nextTick(se,Q),E.nextTick(Y,le,he),le._writableState.errorEmitted=!0,le.emit("error",Q)):(se(Q),le._writableState.errorEmitted=!0,le.emit("error",Q),Y(le,he))}function ve(le){le.writing=!1,le.writecb=null,le.length-=le.writelen,le.writelen=0}function ye(le,he){var ae=le._writableState,Q=ae.sync,se=ae.writecb;if(ve(ae),he)pe(le,ae,Q,he,se);else{var Ae=ue(ae);!Ae&&!ae.corked&&!ae.bufferProcessing&&ae.bufferedRequest&&Te(le,ae),Q?_(_e,le,ae,Ae,se):_e(le,ae,Ae,se)}}function _e(le,he,ae,Q){ae||be(le,he),he.pendingcb--,Q(),Y(le,he)}function be(le,he){he.length===0&&he.needDrain&&(he.needDrain=!1,le.emit("drain"))}function Te(le,he){he.bufferProcessing=!0;var ae=he.bufferedRequest;if(le._writev&&ae&&ae.next){var Q=he.bufferedRequestCount,se=new Array(Q),Ae=he.corkedRequestsFree;Ae.entry=ae;for(var ge=0,Ee=!0;ae;)se[ge]=ae,ae.isBuf||(Ee=!1),ae=ae.next,ge+=1;se.allBuffers=Ee,de(le,he,!0,he.length,se,"",Ae.finish),he.pendingcb++,he.lastBufferedRequest=null,Ae.next?(he.corkedRequestsFree=Ae.next,Ae.next=null):he.corkedRequestsFree=new A(he),he.bufferedRequestCount=0}else{for(;ae;){var ke=ae.chunk,Se=ae.encoding,Ie=ae.callback,we=he.objectMode?1:ke.length;if(de(le,he,!1,we,ke,Se,Ie),ae=ae.next,he.bufferedRequestCount--,he.writing)break}ae===null&&(he.lastBufferedRequest=null)}he.bufferedRequest=ae,he.bufferProcessing=!1}ee.prototype._write=function(le,he,ae){ae(new Error("_write() is not implemented"))},ee.prototype._writev=null,ee.prototype.end=function(le,he,ae){var Q=this._writableState;typeof le=="function"?(ae=le,le=null,he=null):typeof he=="function"&&(ae=he,he=null),le!=null&&this.write(le,he),Q.corked&&(Q.corked=1,this.uncork()),Q.ending||te(this,Q,ae)};function ue(le){return le.ending&&le.length===0&&le.bufferedRequest===null&&!le.finished&&!le.writing}function O(le,he){le._final(function(ae){he.pendingcb--,ae&&le.emit("error",ae),he.prefinished=!0,le.emit("prefinish"),Y(le,he)})}function z(le,he){!he.prefinished&&!he.finalCalled&&(typeof le._final=="function"?(he.pendingcb++,he.finalCalled=!0,E.nextTick(O,le,he)):(he.prefinished=!0,le.emit("prefinish")))}function Y(le,he){var ae=ue(he);return ae&&(z(le,he),he.pendingcb===0&&(he.finished=!0,le.emit("finish"))),ae}function te(le,he,ae){he.ending=!0,Y(le,he),ae&&(he.finished?E.nextTick(ae):le.once("finish",ae)),he.ended=!0,le.writable=!1}function oe(le,he,ae){var Q=le.entry;for(le.entry=null;Q;){var se=Q.callback;he.pendingcb--,se(ae),Q=Q.next}he.corkedRequestsFree.next=le}return Object.defineProperty(ee.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(le){this._writableState&&(this._writableState.destroyed=le)}}),ee.prototype.destroy=U.destroy,ee.prototype._undestroy=U.undestroy,ee.prototype._destroy=function(le,he){this.end(),he(le)},_stream_writable}var _stream_duplex,hasRequired_stream_duplex;function require_stream_duplex(){if(hasRequired_stream_duplex)return _stream_duplex;hasRequired_stream_duplex=1;var E=requireProcessNextickArgs(),A=Object.keys||function(U){var V=[];for(var K in U)V.push(K);return V};_stream_duplex=D;var _=Object.create(requireUtil$2());_.inherits=requireInherits_browser();var I=require_stream_readable(),B=require_stream_writable();_.inherits(D,I);for(var T=A(B.prototype),R=0;R<T.length;R++){var P=T[R];D.prototype[P]||(D.prototype[P]=B.prototype[P])}function D(U){if(!(this instanceof D))return new D(U);I.call(this,U),B.call(this,U),U&&U.readable===!1&&(this.readable=!1),U&&U.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,U&&U.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",F)}Object.defineProperty(D.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function F(){this.allowHalfOpen||this._writableState.ended||E.nextTick(L,this)}function L(U){U.end()}return Object.defineProperty(D.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(U){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=U,this._writableState.destroyed=U)}}),D.prototype._destroy=function(U,V){this.push(null),this.end(),E.nextTick(V,U)},_stream_duplex}var _stream_readable,hasRequired_stream_readable;function require_stream_readable(){if(hasRequired_stream_readable)return _stream_readable;hasRequired_stream_readable=1;var E=requireProcessNextickArgs();_stream_readable=ce;var A=requireIsarray(),_;ce.ReadableState=ne,requireEvents().EventEmitter;var I=function(Ie,we){return Ie.listeners(we).length},B=requireStreamBrowser(),T=requireSafeBuffer().Buffer,R=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function P(Ie){return T.from(Ie)}function D(Ie){return T.isBuffer(Ie)||Ie instanceof R}var F=Object.create(requireUtil$2());F.inherits=requireInherits_browser();var L=requireUtil$3(),U=void 0;L&&L.debuglog?U=L.debuglog("stream"):U=function(){};var V=requireBufferList(),K=requireDestroy(),J;F.inherits(ce,B);var ee=["error","close","destroy","pause","resume"];function ie(Ie,we,xe){if(typeof Ie.prependListener=="function")return Ie.prependListener(we,xe);!Ie._events||!Ie._events[we]?Ie.on(we,xe):A(Ie._events[we])?Ie._events[we].unshift(xe):Ie._events[we]=[xe,Ie._events[we]]}function ne(Ie,we){_=_||require_stream_duplex(),Ie=Ie||{};var xe=we instanceof _;this.objectMode=!!Ie.objectMode,xe&&(this.objectMode=this.objectMode||!!Ie.readableObjectMode);var Fe=Ie.highWaterMark,Ge=Ie.readableHighWaterMark,Oe=this.objectMode?16:16*1024;Fe||Fe===0?this.highWaterMark=Fe:xe&&(Ge||Ge===0)?this.highWaterMark=Ge:this.highWaterMark=Oe,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new V,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=Ie.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Ie.encoding&&(J||(J=requireString_decoder().StringDecoder),this.decoder=new J(Ie.encoding),this.encoding=Ie.encoding)}function ce(Ie){if(_=_||require_stream_duplex(),!(this instanceof ce))return new ce(Ie);this._readableState=new ne(Ie,this),this.readable=!0,Ie&&(typeof Ie.read=="function"&&(this._read=Ie.read),typeof Ie.destroy=="function"&&(this._destroy=Ie.destroy)),B.call(this)}Object.defineProperty(ce.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(Ie){this._readableState&&(this._readableState.destroyed=Ie)}}),ce.prototype.destroy=K.destroy,ce.prototype._undestroy=K.undestroy,ce.prototype._destroy=function(Ie,we){this.push(null),we(Ie)},ce.prototype.push=function(Ie,we){var xe=this._readableState,Fe;return xe.objectMode?Fe=!0:typeof Ie=="string"&&(we=we||xe.defaultEncoding,we!==xe.encoding&&(Ie=T.from(Ie,we),we=""),Fe=!0),fe(this,Ie,we,!1,Fe)},ce.prototype.unshift=function(Ie){return fe(this,Ie,null,!0,!1)};function fe(Ie,we,xe,Fe,Ge){var Oe=Ie._readableState;if(we===null)Oe.reading=!1,Te(Ie,Oe);else{var et;Ge||(et=pe(Oe,we)),et?Ie.emit("error",et):Oe.objectMode||we&&we.length>0?(typeof we!="string"&&!Oe.objectMode&&Object.getPrototypeOf(we)!==T.prototype&&(we=P(we)),Fe?Oe.endEmitted?Ie.emit("error",new Error("stream.unshift() after end event")):de(Ie,Oe,we,!0):Oe.ended?Ie.emit("error",new Error("stream.push() after EOF")):(Oe.reading=!1,Oe.decoder&&!xe?(we=Oe.decoder.write(we),Oe.objectMode||we.length!==0?de(Ie,Oe,we,!1):z(Ie,Oe)):de(Ie,Oe,we,!1))):Fe||(Oe.reading=!1)}return ve(Oe)}function de(Ie,we,xe,Fe){we.flowing&&we.length===0&&!we.sync?(Ie.emit("data",xe),Ie.read(0)):(we.length+=we.objectMode?1:xe.length,Fe?we.buffer.unshift(xe):we.buffer.push(xe),we.needReadable&&ue(Ie)),z(Ie,we)}function pe(Ie,we){var xe;return!D(we)&&typeof we!="string"&&we!==void 0&&!Ie.objectMode&&(xe=new TypeError("Invalid non-string/buffer chunk")),xe}function ve(Ie){return!Ie.ended&&(Ie.needReadable||Ie.length<Ie.highWaterMark||Ie.length===0)}ce.prototype.isPaused=function(){return this._readableState.flowing===!1},ce.prototype.setEncoding=function(Ie){return J||(J=requireString_decoder().StringDecoder),this._readableState.decoder=new J(Ie),this._readableState.encoding=Ie,this};var ye=8388608;function _e(Ie){return Ie>=ye?Ie=ye:(Ie--,Ie|=Ie>>>1,Ie|=Ie>>>2,Ie|=Ie>>>4,Ie|=Ie>>>8,Ie|=Ie>>>16,Ie++),Ie}function be(Ie,we){return Ie<=0||we.length===0&&we.ended?0:we.objectMode?1:Ie!==Ie?we.flowing&&we.length?we.buffer.head.data.length:we.length:(Ie>we.highWaterMark&&(we.highWaterMark=_e(Ie)),Ie<=we.length?Ie:we.ended?we.length:(we.needReadable=!0,0))}ce.prototype.read=function(Ie){U("read",Ie),Ie=parseInt(Ie,10);var we=this._readableState,xe=Ie;if(Ie!==0&&(we.emittedReadable=!1),Ie===0&&we.needReadable&&(we.length>=we.highWaterMark||we.ended))return U("read: emitReadable",we.length,we.ended),we.length===0&&we.ended?Ee(this):ue(this),null;if(Ie=be(Ie,we),Ie===0&&we.ended)return we.length===0&&Ee(this),null;var Fe=we.needReadable;U("need readable",Fe),(we.length===0||we.length-Ie<we.highWaterMark)&&(Fe=!0,U("length less than watermark",Fe)),we.ended||we.reading?(Fe=!1,U("reading or ended",Fe)):Fe&&(U("do read"),we.reading=!0,we.sync=!0,we.length===0&&(we.needReadable=!0),this._read(we.highWaterMark),we.sync=!1,we.reading||(Ie=be(xe,we)));var Ge;return Ie>0?Ge=Q(Ie,we):Ge=null,Ge===null?(we.needReadable=!0,Ie=0):we.length-=Ie,we.length===0&&(we.ended||(we.needReadable=!0),xe!==Ie&&we.ended&&Ee(this)),Ge!==null&&this.emit("data",Ge),Ge};function Te(Ie,we){if(!we.ended){if(we.decoder){var xe=we.decoder.end();xe&&xe.length&&(we.buffer.push(xe),we.length+=we.objectMode?1:xe.length)}we.ended=!0,ue(Ie)}}function ue(Ie){var we=Ie._readableState;we.needReadable=!1,we.emittedReadable||(U("emitReadable",we.flowing),we.emittedReadable=!0,we.sync?E.nextTick(O,Ie):O(Ie))}function O(Ie){U("emit readable"),Ie.emit("readable"),ae(Ie)}function z(Ie,we){we.readingMore||(we.readingMore=!0,E.nextTick(Y,Ie,we))}function Y(Ie,we){for(var xe=we.length;!we.reading&&!we.flowing&&!we.ended&&we.length<we.highWaterMark&&(U("maybeReadMore read 0"),Ie.read(0),xe!==we.length);)xe=we.length;we.readingMore=!1}ce.prototype._read=function(Ie){this.emit("error",new Error("_read() is not implemented"))},ce.prototype.pipe=function(Ie,we){var xe=this,Fe=this._readableState;switch(Fe.pipesCount){case 0:Fe.pipes=Ie;break;case 1:Fe.pipes=[Fe.pipes,Ie];break;default:Fe.pipes.push(Ie);break}Fe.pipesCount+=1,U("pipe count=%d opts=%j",Fe.pipesCount,we);var Ge=(!we||we.end!==!1)&&Ie!==process$1.stdout&&Ie!==process$1.stderr,Oe=Ge?Mt:Wt;Fe.endEmitted?E.nextTick(Oe):xe.once("end",Oe),Ie.on("unpipe",et);function et(ft,_t){U("onunpipe"),ft===xe&&_t&&_t.hasUnpiped===!1&&(_t.hasUnpiped=!0,Ut())}function Mt(){U("onend"),Ie.end()}var dt=te(xe);Ie.on("drain",dt);var mt=!1;function Ut(){U("cleanup"),Ie.removeListener("close",yt),Ie.removeListener("finish",Tt),Ie.removeListener("drain",dt),Ie.removeListener("error",It),Ie.removeListener("unpipe",et),xe.removeListener("end",Mt),xe.removeListener("end",Wt),xe.removeListener("data",vt),mt=!0,Fe.awaitDrain&&(!Ie._writableState||Ie._writableState.needDrain)&&dt()}var St=!1;xe.on("data",vt);function vt(ft){U("ondata"),St=!1;var _t=Ie.write(ft);_t===!1&&!St&&((Fe.pipesCount===1&&Fe.pipes===Ie||Fe.pipesCount>1&&Se(Fe.pipes,Ie)!==-1)&&!mt&&(U("false write response, pause",Fe.awaitDrain),Fe.awaitDrain++,St=!0),xe.pause())}function It(ft){U("onerror",ft),Wt(),Ie.removeListener("error",It),I(Ie,"error")===0&&Ie.emit("error",ft)}ie(Ie,"error",It);function yt(){Ie.removeListener("finish",Tt),Wt()}Ie.once("close",yt);function Tt(){U("onfinish"),Ie.removeListener("close",yt),Wt()}Ie.once("finish",Tt);function Wt(){U("unpipe"),xe.unpipe(Ie)}return Ie.emit("pipe",xe),Fe.flowing||(U("pipe resume"),xe.resume()),Ie};function te(Ie){return function(){var we=Ie._readableState;U("pipeOnDrain",we.awaitDrain),we.awaitDrain&&we.awaitDrain--,we.awaitDrain===0&&I(Ie,"data")&&(we.flowing=!0,ae(Ie))}}ce.prototype.unpipe=function(Ie){var we=this._readableState,xe={hasUnpiped:!1};if(we.pipesCount===0)return this;if(we.pipesCount===1)return Ie&&Ie!==we.pipes?this:(Ie||(Ie=we.pipes),we.pipes=null,we.pipesCount=0,we.flowing=!1,Ie&&Ie.emit("unpipe",this,xe),this);if(!Ie){var Fe=we.pipes,Ge=we.pipesCount;we.pipes=null,we.pipesCount=0,we.flowing=!1;for(var Oe=0;Oe<Ge;Oe++)Fe[Oe].emit("unpipe",this,{hasUnpiped:!1});return this}var et=Se(we.pipes,Ie);return et===-1?this:(we.pipes.splice(et,1),we.pipesCount-=1,we.pipesCount===1&&(we.pipes=we.pipes[0]),Ie.emit("unpipe",this,xe),this)},ce.prototype.on=function(Ie,we){var xe=B.prototype.on.call(this,Ie,we);if(Ie==="data")this._readableState.flowing!==!1&&this.resume();else if(Ie==="readable"){var Fe=this._readableState;!Fe.endEmitted&&!Fe.readableListening&&(Fe.readableListening=Fe.needReadable=!0,Fe.emittedReadable=!1,Fe.reading?Fe.length&&ue(this):E.nextTick(oe,this))}return xe},ce.prototype.addListener=ce.prototype.on;function oe(Ie){U("readable nexttick read 0"),Ie.read(0)}ce.prototype.resume=function(){var Ie=this._readableState;return Ie.flowing||(U("resume"),Ie.flowing=!0,le(this,Ie)),this};function le(Ie,we){we.resumeScheduled||(we.resumeScheduled=!0,E.nextTick(he,Ie,we))}function he(Ie,we){we.reading||(U("resume read 0"),Ie.read(0)),we.resumeScheduled=!1,we.awaitDrain=0,Ie.emit("resume"),ae(Ie),we.flowing&&!we.reading&&Ie.read(0)}ce.prototype.pause=function(){return U("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(U("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function ae(Ie){var we=Ie._readableState;for(U("flow",we.flowing);we.flowing&&Ie.read()!==null;);}ce.prototype.wrap=function(Ie){var we=this,xe=this._readableState,Fe=!1;Ie.on("end",function(){if(U("wrapped end"),xe.decoder&&!xe.ended){var et=xe.decoder.end();et&&et.length&&we.push(et)}we.push(null)}),Ie.on("data",function(et){if(U("wrapped data"),xe.decoder&&(et=xe.decoder.write(et)),!(xe.objectMode&&et==null)&&!(!xe.objectMode&&(!et||!et.length))){var Mt=we.push(et);Mt||(Fe=!0,Ie.pause())}});for(var Ge in Ie)this[Ge]===void 0&&typeof Ie[Ge]=="function"&&(this[Ge]=(function(et){return function(){return Ie[et].apply(Ie,arguments)}})(Ge));for(var Oe=0;Oe<ee.length;Oe++)Ie.on(ee[Oe],this.emit.bind(this,ee[Oe]));return this._read=function(et){U("wrapped _read",et),Fe&&(Fe=!1,Ie.resume())},this},Object.defineProperty(ce.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),ce._fromList=Q;function Q(Ie,we){if(we.length===0)return null;var xe;return we.objectMode?xe=we.buffer.shift():!Ie||Ie>=we.length?(we.decoder?xe=we.buffer.join(""):we.buffer.length===1?xe=we.buffer.head.data:xe=we.buffer.concat(we.length),we.buffer.clear()):xe=se(Ie,we.buffer,we.decoder),xe}function se(Ie,we,xe){var Fe;return Ie<we.head.data.length?(Fe=we.head.data.slice(0,Ie),we.head.data=we.head.data.slice(Ie)):Ie===we.head.data.length?Fe=we.shift():Fe=xe?Ae(Ie,we):ge(Ie,we),Fe}function Ae(Ie,we){var xe=we.head,Fe=1,Ge=xe.data;for(Ie-=Ge.length;xe=xe.next;){var Oe=xe.data,et=Ie>Oe.length?Oe.length:Ie;if(et===Oe.length?Ge+=Oe:Ge+=Oe.slice(0,Ie),Ie-=et,Ie===0){et===Oe.length?(++Fe,xe.next?we.head=xe.next:we.head=we.tail=null):(we.head=xe,xe.data=Oe.slice(et));break}++Fe}return we.length-=Fe,Ge}function ge(Ie,we){var xe=T.allocUnsafe(Ie),Fe=we.head,Ge=1;for(Fe.data.copy(xe),Ie-=Fe.data.length;Fe=Fe.next;){var Oe=Fe.data,et=Ie>Oe.length?Oe.length:Ie;if(Oe.copy(xe,xe.length-Ie,0,et),Ie-=et,Ie===0){et===Oe.length?(++Ge,Fe.next?we.head=Fe.next:we.head=we.tail=null):(we.head=Fe,Fe.data=Oe.slice(et));break}++Ge}return we.length-=Ge,xe}function Ee(Ie){var we=Ie._readableState;if(we.length>0)throw new Error('"endReadable()" called on non-empty stream');we.endEmitted||(we.ended=!0,E.nextTick(ke,we,Ie))}function ke(Ie,we){!Ie.endEmitted&&Ie.length===0&&(Ie.endEmitted=!0,we.readable=!1,we.emit("end"))}function Se(Ie,we){for(var xe=0,Fe=Ie.length;xe<Fe;xe++)if(Ie[xe]===we)return xe;return-1}return _stream_readable}var _stream_transform,hasRequired_stream_transform;function require_stream_transform(){if(hasRequired_stream_transform)return _stream_transform;hasRequired_stream_transform=1,_stream_transform=I;var E=require_stream_duplex(),A=Object.create(requireUtil$2());A.inherits=requireInherits_browser(),A.inherits(I,E);function _(R,P){var D=this._transformState;D.transforming=!1;var F=D.writecb;if(!F)return this.emit("error",new Error("write callback called multiple times"));D.writechunk=null,D.writecb=null,P!=null&&this.push(P),F(R);var L=this._readableState;L.reading=!1,(L.needReadable||L.length<L.highWaterMark)&&this._read(L.highWaterMark)}function I(R){if(!(this instanceof I))return new I(R);E.call(this,R),this._transformState={afterTransform:_.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,R&&(typeof R.transform=="function"&&(this._transform=R.transform),typeof R.flush=="function"&&(this._flush=R.flush)),this.on("prefinish",B)}function B(){var R=this;typeof this._flush=="function"?this._flush(function(P,D){T(R,P,D)}):T(this,null,null)}I.prototype.push=function(R,P){return this._transformState.needTransform=!1,E.prototype.push.call(this,R,P)},I.prototype._transform=function(R,P,D){throw new Error("_transform() is not implemented")},I.prototype._write=function(R,P,D){var F=this._transformState;if(F.writecb=D,F.writechunk=R,F.writeencoding=P,!F.transforming){var L=this._readableState;(F.needTransform||L.needReadable||L.length<L.highWaterMark)&&this._read(L.highWaterMark)}},I.prototype._read=function(R){var P=this._transformState;P.writechunk!==null&&P.writecb&&!P.transforming?(P.transforming=!0,this._transform(P.writechunk,P.writeencoding,P.afterTransform)):P.needTransform=!0},I.prototype._destroy=function(R,P){var D=this;E.prototype._destroy.call(this,R,function(F){P(F),D.emit("close")})};function T(R,P,D){if(P)return R.emit("error",P);if(D!=null&&R.push(D),R._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(R._transformState.transforming)throw new Error("Calling transform done when still transforming");return R.push(null)}return _stream_transform}var _stream_passthrough,hasRequired_stream_passthrough;function require_stream_passthrough(){if(hasRequired_stream_passthrough)return _stream_passthrough;hasRequired_stream_passthrough=1,_stream_passthrough=_;var E=require_stream_transform(),A=Object.create(requireUtil$2());A.inherits=requireInherits_browser(),A.inherits(_,E);function _(I){if(!(this instanceof _))return new _(I);E.call(this,I)}return _.prototype._transform=function(I,B,T){T(null,I)},_stream_passthrough}var hasRequiredReadableBrowser$1;function requireReadableBrowser$1(){return hasRequiredReadableBrowser$1||(hasRequiredReadableBrowser$1=1,(function(E,A){A=E.exports=require_stream_readable(),A.Stream=A,A.Readable=A,A.Writable=require_stream_writable(),A.Duplex=require_stream_duplex(),A.Transform=require_stream_transform(),A.PassThrough=require_stream_passthrough()})(readableBrowser$1,readableBrowser$1.exports)),readableBrowser$1.exports}var sign={exports:{}},bn$9={exports:{}},bn$8=bn$9.exports,hasRequiredBn$4;function requireBn$4(){return hasRequiredBn$4||(hasRequiredBn$4=1,(function(E){(function(A,_){function I(z,Y){if(!z)throw new Error(Y||"Assertion failed")}function B(z,Y){z.super_=Y;var te=function(){};te.prototype=Y.prototype,z.prototype=new te,z.prototype.constructor=z}function T(z,Y,te){if(T.isBN(z))return z;this.negative=0,this.words=null,this.length=0,this.red=null,z!==null&&((Y==="le"||Y==="be")&&(te=Y,Y=10),this._init(z||0,Y||10,te||"be"))}typeof A=="object"?A.exports=T:_.BN=T,T.BN=T,T.wordSize=26;var R;try{typeof window<"u"&&typeof window.Buffer<"u"?R=window.Buffer:R=requireDist$1().Buffer}catch{}T.isBN=function(Y){return Y instanceof T?!0:Y!==null&&typeof Y=="object"&&Y.constructor.wordSize===T.wordSize&&Array.isArray(Y.words)},T.max=function(Y,te){return Y.cmp(te)>0?Y:te},T.min=function(Y,te){return Y.cmp(te)<0?Y:te},T.prototype._init=function(Y,te,oe){if(typeof Y=="number")return this._initNumber(Y,te,oe);if(typeof Y=="object")return this._initArray(Y,te,oe);te==="hex"&&(te=16),I(te===(te|0)&&te>=2&&te<=36),Y=Y.toString().replace(/\s+/g,"");var le=0;Y[0]==="-"&&(le++,this.negative=1),le<Y.length&&(te===16?this._parseHex(Y,le,oe):(this._parseBase(Y,te,le),oe==="le"&&this._initArray(this.toArray(),te,oe)))},T.prototype._initNumber=function(Y,te,oe){Y<0&&(this.negative=1,Y=-Y),Y<67108864?(this.words=[Y&67108863],this.length=1):Y<4503599627370496?(this.words=[Y&67108863,Y/67108864&67108863],this.length=2):(I(Y<9007199254740992),this.words=[Y&67108863,Y/67108864&67108863,1],this.length=3),oe==="le"&&this._initArray(this.toArray(),te,oe)},T.prototype._initArray=function(Y,te,oe){if(I(typeof Y.length=="number"),Y.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(Y.length/3),this.words=new Array(this.length);for(var le=0;le<this.length;le++)this.words[le]=0;var he,ae,Q=0;if(oe==="be")for(le=Y.length-1,he=0;le>=0;le-=3)ae=Y[le]|Y[le-1]<<8|Y[le-2]<<16,this.words[he]|=ae<<Q&67108863,this.words[he+1]=ae>>>26-Q&67108863,Q+=24,Q>=26&&(Q-=26,he++);else if(oe==="le")for(le=0,he=0;le<Y.length;le+=3)ae=Y[le]|Y[le+1]<<8|Y[le+2]<<16,this.words[he]|=ae<<Q&67108863,this.words[he+1]=ae>>>26-Q&67108863,Q+=24,Q>=26&&(Q-=26,he++);return this._strip()};function P(z,Y){var te=z.charCodeAt(Y);if(te>=48&&te<=57)return te-48;if(te>=65&&te<=70)return te-55;if(te>=97&&te<=102)return te-87;I(!1,"Invalid character in "+z)}function D(z,Y,te){var oe=P(z,te);return te-1>=Y&&(oe|=P(z,te-1)<<4),oe}T.prototype._parseHex=function(Y,te,oe){this.length=Math.ceil((Y.length-te)/6),this.words=new Array(this.length);for(var le=0;le<this.length;le++)this.words[le]=0;var he=0,ae=0,Q;if(oe==="be")for(le=Y.length-1;le>=te;le-=2)Q=D(Y,te,le)<<he,this.words[ae]|=Q&67108863,he>=18?(he-=18,ae+=1,this.words[ae]|=Q>>>26):he+=8;else{var se=Y.length-te;for(le=se%2===0?te+1:te;le<Y.length;le+=2)Q=D(Y,te,le)<<he,this.words[ae]|=Q&67108863,he>=18?(he-=18,ae+=1,this.words[ae]|=Q>>>26):he+=8}this._strip()};function F(z,Y,te,oe){for(var le=0,he=0,ae=Math.min(z.length,te),Q=Y;Q<ae;Q++){var se=z.charCodeAt(Q)-48;le*=oe,se>=49?he=se-49+10:se>=17?he=se-17+10:he=se,I(se>=0&&he<oe,"Invalid character"),le+=he}return le}T.prototype._parseBase=function(Y,te,oe){this.words=[0],this.length=1;for(var le=0,he=1;he<=67108863;he*=te)le++;le--,he=he/te|0;for(var ae=Y.length-oe,Q=ae%le,se=Math.min(ae,ae-Q)+oe,Ae=0,ge=oe;ge<se;ge+=le)Ae=F(Y,ge,ge+le,te),this.imuln(he),this.words[0]+Ae<67108864?this.words[0]+=Ae:this._iaddn(Ae);if(Q!==0){var Ee=1;for(Ae=F(Y,ge,Y.length,te),ge=0;ge<Q;ge++)Ee*=te;this.imuln(Ee),this.words[0]+Ae<67108864?this.words[0]+=Ae:this._iaddn(Ae)}this._strip()},T.prototype.copy=function(Y){Y.words=new Array(this.length);for(var te=0;te<this.length;te++)Y.words[te]=this.words[te];Y.length=this.length,Y.negative=this.negative,Y.red=this.red};function L(z,Y){z.words=Y.words,z.length=Y.length,z.negative=Y.negative,z.red=Y.red}if(T.prototype._move=function(Y){L(Y,this)},T.prototype.clone=function(){var Y=new T(null);return this.copy(Y),Y},T.prototype._expand=function(Y){for(;this.length<Y;)this.words[this.length++]=0;return this},T.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},T.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{T.prototype[Symbol.for("nodejs.util.inspect.custom")]=U}catch{T.prototype.inspect=U}else T.prototype.inspect=U;function U(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var V=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],K=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],J=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];T.prototype.toString=function(Y,te){Y=Y||10,te=te|0||1;var oe;if(Y===16||Y==="hex"){oe="";for(var le=0,he=0,ae=0;ae<this.length;ae++){var Q=this.words[ae],se=((Q<<le|he)&16777215).toString(16);he=Q>>>24-le&16777215,le+=2,le>=26&&(le-=26,ae--),he!==0||ae!==this.length-1?oe=V[6-se.length]+se+oe:oe=se+oe}for(he!==0&&(oe=he.toString(16)+oe);oe.length%te!==0;)oe="0"+oe;return this.negative!==0&&(oe="-"+oe),oe}if(Y===(Y|0)&&Y>=2&&Y<=36){var Ae=K[Y],ge=J[Y];oe="";var Ee=this.clone();for(Ee.negative=0;!Ee.isZero();){var ke=Ee.modrn(ge).toString(Y);Ee=Ee.idivn(ge),Ee.isZero()?oe=ke+oe:oe=V[Ae-ke.length]+ke+oe}for(this.isZero()&&(oe="0"+oe);oe.length%te!==0;)oe="0"+oe;return this.negative!==0&&(oe="-"+oe),oe}I(!1,"Base should be between 2 and 36")},T.prototype.toNumber=function(){var Y=this.words[0];return this.length===2?Y+=this.words[1]*67108864:this.length===3&&this.words[2]===1?Y+=4503599627370496+this.words[1]*67108864:this.length>2&&I(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-Y:Y},T.prototype.toJSON=function(){return this.toString(16,2)},R&&(T.prototype.toBuffer=function(Y,te){return this.toArrayLike(R,Y,te)}),T.prototype.toArray=function(Y,te){return this.toArrayLike(Array,Y,te)};var ee=function(Y,te){return Y.allocUnsafe?Y.allocUnsafe(te):new Y(te)};T.prototype.toArrayLike=function(Y,te,oe){this._strip();var le=this.byteLength(),he=oe||Math.max(1,le);I(le<=he,"byte array longer than desired length"),I(he>0,"Requested array length <= 0");var ae=ee(Y,he),Q=te==="le"?"LE":"BE";return this["_toArrayLike"+Q](ae,le),ae},T.prototype._toArrayLikeLE=function(Y,te){for(var oe=0,le=0,he=0,ae=0;he<this.length;he++){var Q=this.words[he]<<ae|le;Y[oe++]=Q&255,oe<Y.length&&(Y[oe++]=Q>>8&255),oe<Y.length&&(Y[oe++]=Q>>16&255),ae===6?(oe<Y.length&&(Y[oe++]=Q>>24&255),le=0,ae=0):(le=Q>>>24,ae+=2)}if(oe<Y.length)for(Y[oe++]=le;oe<Y.length;)Y[oe++]=0},T.prototype._toArrayLikeBE=function(Y,te){for(var oe=Y.length-1,le=0,he=0,ae=0;he<this.length;he++){var Q=this.words[he]<<ae|le;Y[oe--]=Q&255,oe>=0&&(Y[oe--]=Q>>8&255),oe>=0&&(Y[oe--]=Q>>16&255),ae===6?(oe>=0&&(Y[oe--]=Q>>24&255),le=0,ae=0):(le=Q>>>24,ae+=2)}if(oe>=0)for(Y[oe--]=le;oe>=0;)Y[oe--]=0},Math.clz32?T.prototype._countBits=function(Y){return 32-Math.clz32(Y)}:T.prototype._countBits=function(Y){var te=Y,oe=0;return te>=4096&&(oe+=13,te>>>=13),te>=64&&(oe+=7,te>>>=7),te>=8&&(oe+=4,te>>>=4),te>=2&&(oe+=2,te>>>=2),oe+te},T.prototype._zeroBits=function(Y){if(Y===0)return 26;var te=Y,oe=0;return(te&8191)===0&&(oe+=13,te>>>=13),(te&127)===0&&(oe+=7,te>>>=7),(te&15)===0&&(oe+=4,te>>>=4),(te&3)===0&&(oe+=2,te>>>=2),(te&1)===0&&oe++,oe},T.prototype.bitLength=function(){var Y=this.words[this.length-1],te=this._countBits(Y);return(this.length-1)*26+te};function ie(z){for(var Y=new Array(z.bitLength()),te=0;te<Y.length;te++){var oe=te/26|0,le=te%26;Y[te]=z.words[oe]>>>le&1}return Y}T.prototype.zeroBits=function(){if(this.isZero())return 0;for(var Y=0,te=0;te<this.length;te++){var oe=this._zeroBits(this.words[te]);if(Y+=oe,oe!==26)break}return Y},T.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},T.prototype.toTwos=function(Y){return this.negative!==0?this.abs().inotn(Y).iaddn(1):this.clone()},T.prototype.fromTwos=function(Y){return this.testn(Y-1)?this.notn(Y).iaddn(1).ineg():this.clone()},T.prototype.isNeg=function(){return this.negative!==0},T.prototype.neg=function(){return this.clone().ineg()},T.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},T.prototype.iuor=function(Y){for(;this.length<Y.length;)this.words[this.length++]=0;for(var te=0;te<Y.length;te++)this.words[te]=this.words[te]|Y.words[te];return this._strip()},T.prototype.ior=function(Y){return I((this.negative|Y.negative)===0),this.iuor(Y)},T.prototype.or=function(Y){return this.length>Y.length?this.clone().ior(Y):Y.clone().ior(this)},T.prototype.uor=function(Y){return this.length>Y.length?this.clone().iuor(Y):Y.clone().iuor(this)},T.prototype.iuand=function(Y){var te;this.length>Y.length?te=Y:te=this;for(var oe=0;oe<te.length;oe++)this.words[oe]=this.words[oe]&Y.words[oe];return this.length=te.length,this._strip()},T.prototype.iand=function(Y){return I((this.negative|Y.negative)===0),this.iuand(Y)},T.prototype.and=function(Y){return this.length>Y.length?this.clone().iand(Y):Y.clone().iand(this)},T.prototype.uand=function(Y){return this.length>Y.length?this.clone().iuand(Y):Y.clone().iuand(this)},T.prototype.iuxor=function(Y){var te,oe;this.length>Y.length?(te=this,oe=Y):(te=Y,oe=this);for(var le=0;le<oe.length;le++)this.words[le]=te.words[le]^oe.words[le];if(this!==te)for(;le<te.length;le++)this.words[le]=te.words[le];return this.length=te.length,this._strip()},T.prototype.ixor=function(Y){return I((this.negative|Y.negative)===0),this.iuxor(Y)},T.prototype.xor=function(Y){return this.length>Y.length?this.clone().ixor(Y):Y.clone().ixor(this)},T.prototype.uxor=function(Y){return this.length>Y.length?this.clone().iuxor(Y):Y.clone().iuxor(this)},T.prototype.inotn=function(Y){I(typeof Y=="number"&&Y>=0);var te=Math.ceil(Y/26)|0,oe=Y%26;this._expand(te),oe>0&&te--;for(var le=0;le<te;le++)this.words[le]=~this.words[le]&67108863;return oe>0&&(this.words[le]=~this.words[le]&67108863>>26-oe),this._strip()},T.prototype.notn=function(Y){return this.clone().inotn(Y)},T.prototype.setn=function(Y,te){I(typeof Y=="number"&&Y>=0);var oe=Y/26|0,le=Y%26;return this._expand(oe+1),te?this.words[oe]=this.words[oe]|1<<le:this.words[oe]=this.words[oe]&~(1<<le),this._strip()},T.prototype.iadd=function(Y){var te;if(this.negative!==0&&Y.negative===0)return this.negative=0,te=this.isub(Y),this.negative^=1,this._normSign();if(this.negative===0&&Y.negative!==0)return Y.negative=0,te=this.isub(Y),Y.negative=1,te._normSign();var oe,le;this.length>Y.length?(oe=this,le=Y):(oe=Y,le=this);for(var he=0,ae=0;ae<le.length;ae++)te=(oe.words[ae]|0)+(le.words[ae]|0)+he,this.words[ae]=te&67108863,he=te>>>26;for(;he!==0&&ae<oe.length;ae++)te=(oe.words[ae]|0)+he,this.words[ae]=te&67108863,he=te>>>26;if(this.length=oe.length,he!==0)this.words[this.length]=he,this.length++;else if(oe!==this)for(;ae<oe.length;ae++)this.words[ae]=oe.words[ae];return this},T.prototype.add=function(Y){var te;return Y.negative!==0&&this.negative===0?(Y.negative=0,te=this.sub(Y),Y.negative^=1,te):Y.negative===0&&this.negative!==0?(this.negative=0,te=Y.sub(this),this.negative=1,te):this.length>Y.length?this.clone().iadd(Y):Y.clone().iadd(this)},T.prototype.isub=function(Y){if(Y.negative!==0){Y.negative=0;var te=this.iadd(Y);return Y.negative=1,te._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(Y),this.negative=1,this._normSign();var oe=this.cmp(Y);if(oe===0)return this.negative=0,this.length=1,this.words[0]=0,this;var le,he;oe>0?(le=this,he=Y):(le=Y,he=this);for(var ae=0,Q=0;Q<he.length;Q++)te=(le.words[Q]|0)-(he.words[Q]|0)+ae,ae=te>>26,this.words[Q]=te&67108863;for(;ae!==0&&Q<le.length;Q++)te=(le.words[Q]|0)+ae,ae=te>>26,this.words[Q]=te&67108863;if(ae===0&&Q<le.length&&le!==this)for(;Q<le.length;Q++)this.words[Q]=le.words[Q];return this.length=Math.max(this.length,Q),le!==this&&(this.negative=1),this._strip()},T.prototype.sub=function(Y){return this.clone().isub(Y)};function ne(z,Y,te){te.negative=Y.negative^z.negative;var oe=z.length+Y.length|0;te.length=oe,oe=oe-1|0;var le=z.words[0]|0,he=Y.words[0]|0,ae=le*he,Q=ae&67108863,se=ae/67108864|0;te.words[0]=Q;for(var Ae=1;Ae<oe;Ae++){for(var ge=se>>>26,Ee=se&67108863,ke=Math.min(Ae,Y.length-1),Se=Math.max(0,Ae-z.length+1);Se<=ke;Se++){var Ie=Ae-Se|0;le=z.words[Ie]|0,he=Y.words[Se]|0,ae=le*he+Ee,ge+=ae/67108864|0,Ee=ae&67108863}te.words[Ae]=Ee|0,se=ge|0}return se!==0?te.words[Ae]=se|0:te.length--,te._strip()}var ce=function(Y,te,oe){var le=Y.words,he=te.words,ae=oe.words,Q=0,se,Ae,ge,Ee=le[0]|0,ke=Ee&8191,Se=Ee>>>13,Ie=le[1]|0,we=Ie&8191,xe=Ie>>>13,Fe=le[2]|0,Ge=Fe&8191,Oe=Fe>>>13,et=le[3]|0,Mt=et&8191,dt=et>>>13,mt=le[4]|0,Ut=mt&8191,St=mt>>>13,vt=le[5]|0,It=vt&8191,yt=vt>>>13,Tt=le[6]|0,Wt=Tt&8191,ft=Tt>>>13,_t=le[7]|0,Xt=_t&8191,Nt=_t>>>13,qt=le[8]|0,nr=qt&8191,ze=qt>>>13,Ce=le[9]|0,Le=Ce&8191,Ze=Ce>>>13,Je=he[0]|0,nt=Je&8191,rt=Je>>>13,He=he[1]|0,Dt=He&8191,Rt=He>>>13,De=he[2]|0,We=De&8191,Ve=De>>>13,qe=he[3]|0,pt=qe&8191,At=qe>>>13,jt=he[4]|0,rr=jt&8191,Ke=jt>>>13,Ne=he[5]|0,Ye=Ne&8191,st=Ne>>>13,bt=he[6]|0,Qe=bt&8191,Re=bt>>>13,Pe=he[7]|0,Me=Pe&8191,$e=Pe>>>13,it=he[8]|0,kt=it&8191,xt=it>>>13,Ot=he[9]|0,Jt=Ot&8191,tr=Ot>>>13;oe.negative=Y.negative^te.negative,oe.length=19,se=Math.imul(ke,nt),Ae=Math.imul(ke,rt),Ae=Ae+Math.imul(Se,nt)|0,ge=Math.imul(Se,rt);var br=(Q+se|0)+((Ae&8191)<<13)|0;Q=(ge+(Ae>>>13)|0)+(br>>>26)|0,br&=67108863,se=Math.imul(we,nt),Ae=Math.imul(we,rt),Ae=Ae+Math.imul(xe,nt)|0,ge=Math.imul(xe,rt),se=se+Math.imul(ke,Dt)|0,Ae=Ae+Math.imul(ke,Rt)|0,Ae=Ae+Math.imul(Se,Dt)|0,ge=ge+Math.imul(Se,Rt)|0;var ar=(Q+se|0)+((Ae&8191)<<13)|0;Q=(ge+(Ae>>>13)|0)+(ar>>>26)|0,ar&=67108863,se=Math.imul(Ge,nt),Ae=Math.imul(Ge,rt),Ae=Ae+Math.imul(Oe,nt)|0,ge=Math.imul(Oe,rt),se=se+Math.imul(we,Dt)|0,Ae=Ae+Math.imul(we,Rt)|0,Ae=Ae+Math.imul(xe,Dt)|0,ge=ge+Math.imul(xe,Rt)|0,se=se+Math.imul(ke,We)|0,Ae=Ae+Math.imul(ke,Ve)|0,Ae=Ae+Math.imul(Se,We)|0,ge=ge+Math.imul(Se,Ve)|0;var _r=(Q+se|0)+((Ae&8191)<<13)|0;Q=(ge+(Ae>>>13)|0)+(_r>>>26)|0,_r&=67108863,se=Math.imul(Mt,nt),Ae=Math.imul(Mt,rt),Ae=Ae+Math.imul(dt,nt)|0,ge=Math.imul(dt,rt),se=se+Math.imul(Ge,Dt)|0,Ae=Ae+Math.imul(Ge,Rt)|0,Ae=Ae+Math.imul(Oe,Dt)|0,ge=ge+Math.imul(Oe,Rt)|0,se=se+Math.imul(we,We)|0,Ae=Ae+Math.imul(we,Ve)|0,Ae=Ae+Math.imul(xe,We)|0,ge=ge+Math.imul(xe,Ve)|0,se=se+Math.imul(ke,pt)|0,Ae=Ae+Math.imul(ke,At)|0,Ae=Ae+Math.imul(Se,pt)|0,ge=ge+Math.imul(Se,At)|0;var or=(Q+se|0)+((Ae&8191)<<13)|0;Q=(ge+(Ae>>>13)|0)+(or>>>26)|0,or&=67108863,se=Math.imul(Ut,nt),Ae=Math.imul(Ut,rt),Ae=Ae+Math.imul(St,nt)|0,ge=Math.imul(St,rt),se=se+Math.imul(Mt,Dt)|0,Ae=Ae+Math.imul(Mt,Rt)|0,Ae=Ae+Math.imul(dt,Dt)|0,ge=ge+Math.imul(dt,Rt)|0,se=se+Math.imul(Ge,We)|0,Ae=Ae+Math.imul(Ge,Ve)|0,Ae=Ae+Math.imul(Oe,We)|0,ge=ge+Math.imul(Oe,Ve)|0,se=se+Math.imul(we,pt)|0,Ae=Ae+Math.imul(we,At)|0,Ae=Ae+Math.imul(xe,pt)|0,ge=ge+Math.imul(xe,At)|0,se=se+Math.imul(ke,rr)|0,Ae=Ae+Math.imul(ke,Ke)|0,Ae=Ae+Math.imul(Se,rr)|0,ge=ge+Math.imul(Se,Ke)|0;var gr=(Q+se|0)+((Ae&8191)<<13)|0;Q=(ge+(Ae>>>13)|0)+(gr>>>26)|0,gr&=67108863,se=Math.imul(It,nt),Ae=Math.imul(It,rt),Ae=Ae+Math.imul(yt,nt)|0,ge=Math.imul(yt,rt),se=se+Math.imul(Ut,Dt)|0,Ae=Ae+Math.imul(Ut,Rt)|0,Ae=Ae+Math.imul(St,Dt)|0,ge=ge+Math.imul(St,Rt)|0,se=se+Math.imul(Mt,We)|0,Ae=Ae+Math.imul(Mt,Ve)|0,Ae=Ae+Math.imul(dt,We)|0,ge=ge+Math.imul(dt,Ve)|0,se=se+Math.imul(Ge,pt)|0,Ae=Ae+Math.imul(Ge,At)|0,Ae=Ae+Math.imul(Oe,pt)|0,ge=ge+Math.imul(Oe,At)|0,se=se+Math.imul(we,rr)|0,Ae=Ae+Math.imul(we,Ke)|0,Ae=Ae+Math.imul(xe,rr)|0,ge=ge+Math.imul(xe,Ke)|0,se=se+Math.imul(ke,Ye)|0,Ae=Ae+Math.imul(ke,st)|0,Ae=Ae+Math.imul(Se,Ye)|0,ge=ge+Math.imul(Se,st)|0;var xr=(Q+se|0)+((Ae&8191)<<13)|0;Q=(ge+(Ae>>>13)|0)+(xr>>>26)|0,xr&=67108863,se=Math.imul(Wt,nt),Ae=Math.imul(Wt,rt),Ae=Ae+Math.imul(ft,nt)|0,ge=Math.imul(ft,rt),se=se+Math.imul(It,Dt)|0,Ae=Ae+Math.imul(It,Rt)|0,Ae=Ae+Math.imul(yt,Dt)|0,ge=ge+Math.imul(yt,Rt)|0,se=se+Math.imul(Ut,We)|0,Ae=Ae+Math.imul(Ut,Ve)|0,Ae=Ae+Math.imul(St,We)|0,ge=ge+Math.imul(St,Ve)|0,se=se+Math.imul(Mt,pt)|0,Ae=Ae+Math.imul(Mt,At)|0,Ae=Ae+Math.imul(dt,pt)|0,ge=ge+Math.imul(dt,At)|0,se=se+Math.imul(Ge,rr)|0,Ae=Ae+Math.imul(Ge,Ke)|0,Ae=Ae+Math.imul(Oe,rr)|0,ge=ge+Math.imul(Oe,Ke)|0,se=se+Math.imul(we,Ye)|0,Ae=Ae+Math.imul(we,st)|0,Ae=Ae+Math.imul(xe,Ye)|0,ge=ge+Math.imul(xe,st)|0,se=se+Math.imul(ke,Qe)|0,Ae=Ae+Math.imul(ke,Re)|0,Ae=Ae+Math.imul(Se,Qe)|0,ge=ge+Math.imul(Se,Re)|0;var vr=(Q+se|0)+((Ae&8191)<<13)|0;Q=(ge+(Ae>>>13)|0)+(vr>>>26)|0,vr&=67108863,se=Math.imul(Xt,nt),Ae=Math.imul(Xt,rt),Ae=Ae+Math.imul(Nt,nt)|0,ge=Math.imul(Nt,rt),se=se+Math.imul(Wt,Dt)|0,Ae=Ae+Math.imul(Wt,Rt)|0,Ae=Ae+Math.imul(ft,Dt)|0,ge=ge+Math.imul(ft,Rt)|0,se=se+Math.imul(It,We)|0,Ae=Ae+Math.imul(It,Ve)|0,Ae=Ae+Math.imul(yt,We)|0,ge=ge+Math.imul(yt,Ve)|0,se=se+Math.imul(Ut,pt)|0,Ae=Ae+Math.imul(Ut,At)|0,Ae=Ae+Math.imul(St,pt)|0,ge=ge+Math.imul(St,At)|0,se=se+Math.imul(Mt,rr)|0,Ae=Ae+Math.imul(Mt,Ke)|0,Ae=Ae+Math.imul(dt,rr)|0,ge=ge+Math.imul(dt,Ke)|0,se=se+Math.imul(Ge,Ye)|0,Ae=Ae+Math.imul(Ge,st)|0,Ae=Ae+Math.imul(Oe,Ye)|0,ge=ge+Math.imul(Oe,st)|0,se=se+Math.imul(we,Qe)|0,Ae=Ae+Math.imul(we,Re)|0,Ae=Ae+Math.imul(xe,Qe)|0,ge=ge+Math.imul(xe,Re)|0,se=se+Math.imul(ke,Me)|0,Ae=Ae+Math.imul(ke,$e)|0,Ae=Ae+Math.imul(Se,Me)|0,ge=ge+Math.imul(Se,$e)|0;var Cr=(Q+se|0)+((Ae&8191)<<13)|0;Q=(ge+(Ae>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,se=Math.imul(nr,nt),Ae=Math.imul(nr,rt),Ae=Ae+Math.imul(ze,nt)|0,ge=Math.imul(ze,rt),se=se+Math.imul(Xt,Dt)|0,Ae=Ae+Math.imul(Xt,Rt)|0,Ae=Ae+Math.imul(Nt,Dt)|0,ge=ge+Math.imul(Nt,Rt)|0,se=se+Math.imul(Wt,We)|0,Ae=Ae+Math.imul(Wt,Ve)|0,Ae=Ae+Math.imul(ft,We)|0,ge=ge+Math.imul(ft,Ve)|0,se=se+Math.imul(It,pt)|0,Ae=Ae+Math.imul(It,At)|0,Ae=Ae+Math.imul(yt,pt)|0,ge=ge+Math.imul(yt,At)|0,se=se+Math.imul(Ut,rr)|0,Ae=Ae+Math.imul(Ut,Ke)|0,Ae=Ae+Math.imul(St,rr)|0,ge=ge+Math.imul(St,Ke)|0,se=se+Math.imul(Mt,Ye)|0,Ae=Ae+Math.imul(Mt,st)|0,Ae=Ae+Math.imul(dt,Ye)|0,ge=ge+Math.imul(dt,st)|0,se=se+Math.imul(Ge,Qe)|0,Ae=Ae+Math.imul(Ge,Re)|0,Ae=Ae+Math.imul(Oe,Qe)|0,ge=ge+Math.imul(Oe,Re)|0,se=se+Math.imul(we,Me)|0,Ae=Ae+Math.imul(we,$e)|0,Ae=Ae+Math.imul(xe,Me)|0,ge=ge+Math.imul(xe,$e)|0,se=se+Math.imul(ke,kt)|0,Ae=Ae+Math.imul(ke,xt)|0,Ae=Ae+Math.imul(Se,kt)|0,ge=ge+Math.imul(Se,xt)|0;var Sr=(Q+se|0)+((Ae&8191)<<13)|0;Q=(ge+(Ae>>>13)|0)+(Sr>>>26)|0,Sr&=67108863,se=Math.imul(Le,nt),Ae=Math.imul(Le,rt),Ae=Ae+Math.imul(Ze,nt)|0,ge=Math.imul(Ze,rt),se=se+Math.imul(nr,Dt)|0,Ae=Ae+Math.imul(nr,Rt)|0,Ae=Ae+Math.imul(ze,Dt)|0,ge=ge+Math.imul(ze,Rt)|0,se=se+Math.imul(Xt,We)|0,Ae=Ae+Math.imul(Xt,Ve)|0,Ae=Ae+Math.imul(Nt,We)|0,ge=ge+Math.imul(Nt,Ve)|0,se=se+Math.imul(Wt,pt)|0,Ae=Ae+Math.imul(Wt,At)|0,Ae=Ae+Math.imul(ft,pt)|0,ge=ge+Math.imul(ft,At)|0,se=se+Math.imul(It,rr)|0,Ae=Ae+Math.imul(It,Ke)|0,Ae=Ae+Math.imul(yt,rr)|0,ge=ge+Math.imul(yt,Ke)|0,se=se+Math.imul(Ut,Ye)|0,Ae=Ae+Math.imul(Ut,st)|0,Ae=Ae+Math.imul(St,Ye)|0,ge=ge+Math.imul(St,st)|0,se=se+Math.imul(Mt,Qe)|0,Ae=Ae+Math.imul(Mt,Re)|0,Ae=Ae+Math.imul(dt,Qe)|0,ge=ge+Math.imul(dt,Re)|0,se=se+Math.imul(Ge,Me)|0,Ae=Ae+Math.imul(Ge,$e)|0,Ae=Ae+Math.imul(Oe,Me)|0,ge=ge+Math.imul(Oe,$e)|0,se=se+Math.imul(we,kt)|0,Ae=Ae+Math.imul(we,xt)|0,Ae=Ae+Math.imul(xe,kt)|0,ge=ge+Math.imul(xe,xt)|0,se=se+Math.imul(ke,Jt)|0,Ae=Ae+Math.imul(ke,tr)|0,Ae=Ae+Math.imul(Se,Jt)|0,ge=ge+Math.imul(Se,tr)|0;var dr=(Q+se|0)+((Ae&8191)<<13)|0;Q=(ge+(Ae>>>13)|0)+(dr>>>26)|0,dr&=67108863,se=Math.imul(Le,Dt),Ae=Math.imul(Le,Rt),Ae=Ae+Math.imul(Ze,Dt)|0,ge=Math.imul(Ze,Rt),se=se+Math.imul(nr,We)|0,Ae=Ae+Math.imul(nr,Ve)|0,Ae=Ae+Math.imul(ze,We)|0,ge=ge+Math.imul(ze,Ve)|0,se=se+Math.imul(Xt,pt)|0,Ae=Ae+Math.imul(Xt,At)|0,Ae=Ae+Math.imul(Nt,pt)|0,ge=ge+Math.imul(Nt,At)|0,se=se+Math.imul(Wt,rr)|0,Ae=Ae+Math.imul(Wt,Ke)|0,Ae=Ae+Math.imul(ft,rr)|0,ge=ge+Math.imul(ft,Ke)|0,se=se+Math.imul(It,Ye)|0,Ae=Ae+Math.imul(It,st)|0,Ae=Ae+Math.imul(yt,Ye)|0,ge=ge+Math.imul(yt,st)|0,se=se+Math.imul(Ut,Qe)|0,Ae=Ae+Math.imul(Ut,Re)|0,Ae=Ae+Math.imul(St,Qe)|0,ge=ge+Math.imul(St,Re)|0,se=se+Math.imul(Mt,Me)|0,Ae=Ae+Math.imul(Mt,$e)|0,Ae=Ae+Math.imul(dt,Me)|0,ge=ge+Math.imul(dt,$e)|0,se=se+Math.imul(Ge,kt)|0,Ae=Ae+Math.imul(Ge,xt)|0,Ae=Ae+Math.imul(Oe,kt)|0,ge=ge+Math.imul(Oe,xt)|0,se=se+Math.imul(we,Jt)|0,Ae=Ae+Math.imul(we,tr)|0,Ae=Ae+Math.imul(xe,Jt)|0,ge=ge+Math.imul(xe,tr)|0;var wr=(Q+se|0)+((Ae&8191)<<13)|0;Q=(ge+(Ae>>>13)|0)+(wr>>>26)|0,wr&=67108863,se=Math.imul(Le,We),Ae=Math.imul(Le,Ve),Ae=Ae+Math.imul(Ze,We)|0,ge=Math.imul(Ze,Ve),se=se+Math.imul(nr,pt)|0,Ae=Ae+Math.imul(nr,At)|0,Ae=Ae+Math.imul(ze,pt)|0,ge=ge+Math.imul(ze,At)|0,se=se+Math.imul(Xt,rr)|0,Ae=Ae+Math.imul(Xt,Ke)|0,Ae=Ae+Math.imul(Nt,rr)|0,ge=ge+Math.imul(Nt,Ke)|0,se=se+Math.imul(Wt,Ye)|0,Ae=Ae+Math.imul(Wt,st)|0,Ae=Ae+Math.imul(ft,Ye)|0,ge=ge+Math.imul(ft,st)|0,se=se+Math.imul(It,Qe)|0,Ae=Ae+Math.imul(It,Re)|0,Ae=Ae+Math.imul(yt,Qe)|0,ge=ge+Math.imul(yt,Re)|0,se=se+Math.imul(Ut,Me)|0,Ae=Ae+Math.imul(Ut,$e)|0,Ae=Ae+Math.imul(St,Me)|0,ge=ge+Math.imul(St,$e)|0,se=se+Math.imul(Mt,kt)|0,Ae=Ae+Math.imul(Mt,xt)|0,Ae=Ae+Math.imul(dt,kt)|0,ge=ge+Math.imul(dt,xt)|0,se=se+Math.imul(Ge,Jt)|0,Ae=Ae+Math.imul(Ge,tr)|0,Ae=Ae+Math.imul(Oe,Jt)|0,ge=ge+Math.imul(Oe,tr)|0;var fr=(Q+se|0)+((Ae&8191)<<13)|0;Q=(ge+(Ae>>>13)|0)+(fr>>>26)|0,fr&=67108863,se=Math.imul(Le,pt),Ae=Math.imul(Le,At),Ae=Ae+Math.imul(Ze,pt)|0,ge=Math.imul(Ze,At),se=se+Math.imul(nr,rr)|0,Ae=Ae+Math.imul(nr,Ke)|0,Ae=Ae+Math.imul(ze,rr)|0,ge=ge+Math.imul(ze,Ke)|0,se=se+Math.imul(Xt,Ye)|0,Ae=Ae+Math.imul(Xt,st)|0,Ae=Ae+Math.imul(Nt,Ye)|0,ge=ge+Math.imul(Nt,st)|0,se=se+Math.imul(Wt,Qe)|0,Ae=Ae+Math.imul(Wt,Re)|0,Ae=Ae+Math.imul(ft,Qe)|0,ge=ge+Math.imul(ft,Re)|0,se=se+Math.imul(It,Me)|0,Ae=Ae+Math.imul(It,$e)|0,Ae=Ae+Math.imul(yt,Me)|0,ge=ge+Math.imul(yt,$e)|0,se=se+Math.imul(Ut,kt)|0,Ae=Ae+Math.imul(Ut,xt)|0,Ae=Ae+Math.imul(St,kt)|0,ge=ge+Math.imul(St,xt)|0,se=se+Math.imul(Mt,Jt)|0,Ae=Ae+Math.imul(Mt,tr)|0,Ae=Ae+Math.imul(dt,Jt)|0,ge=ge+Math.imul(dt,tr)|0;var hr=(Q+se|0)+((Ae&8191)<<13)|0;Q=(ge+(Ae>>>13)|0)+(hr>>>26)|0,hr&=67108863,se=Math.imul(Le,rr),Ae=Math.imul(Le,Ke),Ae=Ae+Math.imul(Ze,rr)|0,ge=Math.imul(Ze,Ke),se=se+Math.imul(nr,Ye)|0,Ae=Ae+Math.imul(nr,st)|0,Ae=Ae+Math.imul(ze,Ye)|0,ge=ge+Math.imul(ze,st)|0,se=se+Math.imul(Xt,Qe)|0,Ae=Ae+Math.imul(Xt,Re)|0,Ae=Ae+Math.imul(Nt,Qe)|0,ge=ge+Math.imul(Nt,Re)|0,se=se+Math.imul(Wt,Me)|0,Ae=Ae+Math.imul(Wt,$e)|0,Ae=Ae+Math.imul(ft,Me)|0,ge=ge+Math.imul(ft,$e)|0,se=se+Math.imul(It,kt)|0,Ae=Ae+Math.imul(It,xt)|0,Ae=Ae+Math.imul(yt,kt)|0,ge=ge+Math.imul(yt,xt)|0,se=se+Math.imul(Ut,Jt)|0,Ae=Ae+Math.imul(Ut,tr)|0,Ae=Ae+Math.imul(St,Jt)|0,ge=ge+Math.imul(St,tr)|0;var Ar=(Q+se|0)+((Ae&8191)<<13)|0;Q=(ge+(Ae>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,se=Math.imul(Le,Ye),Ae=Math.imul(Le,st),Ae=Ae+Math.imul(Ze,Ye)|0,ge=Math.imul(Ze,st),se=se+Math.imul(nr,Qe)|0,Ae=Ae+Math.imul(nr,Re)|0,Ae=Ae+Math.imul(ze,Qe)|0,ge=ge+Math.imul(ze,Re)|0,se=se+Math.imul(Xt,Me)|0,Ae=Ae+Math.imul(Xt,$e)|0,Ae=Ae+Math.imul(Nt,Me)|0,ge=ge+Math.imul(Nt,$e)|0,se=se+Math.imul(Wt,kt)|0,Ae=Ae+Math.imul(Wt,xt)|0,Ae=Ae+Math.imul(ft,kt)|0,ge=ge+Math.imul(ft,xt)|0,se=se+Math.imul(It,Jt)|0,Ae=Ae+Math.imul(It,tr)|0,Ae=Ae+Math.imul(yt,Jt)|0,ge=ge+Math.imul(yt,tr)|0;var ur=(Q+se|0)+((Ae&8191)<<13)|0;Q=(ge+(Ae>>>13)|0)+(ur>>>26)|0,ur&=67108863,se=Math.imul(Le,Qe),Ae=Math.imul(Le,Re),Ae=Ae+Math.imul(Ze,Qe)|0,ge=Math.imul(Ze,Re),se=se+Math.imul(nr,Me)|0,Ae=Ae+Math.imul(nr,$e)|0,Ae=Ae+Math.imul(ze,Me)|0,ge=ge+Math.imul(ze,$e)|0,se=se+Math.imul(Xt,kt)|0,Ae=Ae+Math.imul(Xt,xt)|0,Ae=Ae+Math.imul(Nt,kt)|0,ge=ge+Math.imul(Nt,xt)|0,se=se+Math.imul(Wt,Jt)|0,Ae=Ae+Math.imul(Wt,tr)|0,Ae=Ae+Math.imul(ft,Jt)|0,ge=ge+Math.imul(ft,tr)|0;var zt=(Q+se|0)+((Ae&8191)<<13)|0;Q=(ge+(Ae>>>13)|0)+(zt>>>26)|0,zt&=67108863,se=Math.imul(Le,Me),Ae=Math.imul(Le,$e),Ae=Ae+Math.imul(Ze,Me)|0,ge=Math.imul(Ze,$e),se=se+Math.imul(nr,kt)|0,Ae=Ae+Math.imul(nr,xt)|0,Ae=Ae+Math.imul(ze,kt)|0,ge=ge+Math.imul(ze,xt)|0,se=se+Math.imul(Xt,Jt)|0,Ae=Ae+Math.imul(Xt,tr)|0,Ae=Ae+Math.imul(Nt,Jt)|0,ge=ge+Math.imul(Nt,tr)|0;var Kt=(Q+se|0)+((Ae&8191)<<13)|0;Q=(ge+(Ae>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,se=Math.imul(Le,kt),Ae=Math.imul(Le,xt),Ae=Ae+Math.imul(Ze,kt)|0,ge=Math.imul(Ze,xt),se=se+Math.imul(nr,Jt)|0,Ae=Ae+Math.imul(nr,tr)|0,Ae=Ae+Math.imul(ze,Jt)|0,ge=ge+Math.imul(ze,tr)|0;var lr=(Q+se|0)+((Ae&8191)<<13)|0;Q=(ge+(Ae>>>13)|0)+(lr>>>26)|0,lr&=67108863,se=Math.imul(Le,Jt),Ae=Math.imul(Le,tr),Ae=Ae+Math.imul(Ze,Jt)|0,ge=Math.imul(Ze,tr);var ot=(Q+se|0)+((Ae&8191)<<13)|0;return Q=(ge+(Ae>>>13)|0)+(ot>>>26)|0,ot&=67108863,ae[0]=br,ae[1]=ar,ae[2]=_r,ae[3]=or,ae[4]=gr,ae[5]=xr,ae[6]=vr,ae[7]=Cr,ae[8]=Sr,ae[9]=dr,ae[10]=wr,ae[11]=fr,ae[12]=hr,ae[13]=Ar,ae[14]=ur,ae[15]=zt,ae[16]=Kt,ae[17]=lr,ae[18]=ot,Q!==0&&(ae[19]=Q,oe.length++),oe};Math.imul||(ce=ne);function fe(z,Y,te){te.negative=Y.negative^z.negative,te.length=z.length+Y.length;for(var oe=0,le=0,he=0;he<te.length-1;he++){var ae=le;le=0;for(var Q=oe&67108863,se=Math.min(he,Y.length-1),Ae=Math.max(0,he-z.length+1);Ae<=se;Ae++){var ge=he-Ae,Ee=z.words[ge]|0,ke=Y.words[Ae]|0,Se=Ee*ke,Ie=Se&67108863;ae=ae+(Se/67108864|0)|0,Ie=Ie+Q|0,Q=Ie&67108863,ae=ae+(Ie>>>26)|0,le+=ae>>>26,ae&=67108863}te.words[he]=Q,oe=ae,ae=le}return oe!==0?te.words[he]=oe:te.length--,te._strip()}function de(z,Y,te){return fe(z,Y,te)}T.prototype.mulTo=function(Y,te){var oe,le=this.length+Y.length;return this.length===10&&Y.length===10?oe=ce(this,Y,te):le<63?oe=ne(this,Y,te):le<1024?oe=fe(this,Y,te):oe=de(this,Y,te),oe},T.prototype.mul=function(Y){var te=new T(null);return te.words=new Array(this.length+Y.length),this.mulTo(Y,te)},T.prototype.mulf=function(Y){var te=new T(null);return te.words=new Array(this.length+Y.length),de(this,Y,te)},T.prototype.imul=function(Y){return this.clone().mulTo(Y,this)},T.prototype.imuln=function(Y){var te=Y<0;te&&(Y=-Y),I(typeof Y=="number"),I(Y<67108864);for(var oe=0,le=0;le<this.length;le++){var he=(this.words[le]|0)*Y,ae=(he&67108863)+(oe&67108863);oe>>=26,oe+=he/67108864|0,oe+=ae>>>26,this.words[le]=ae&67108863}return oe!==0&&(this.words[le]=oe,this.length++),this.length=Y===0?1:this.length,te?this.ineg():this},T.prototype.muln=function(Y){return this.clone().imuln(Y)},T.prototype.sqr=function(){return this.mul(this)},T.prototype.isqr=function(){return this.imul(this.clone())},T.prototype.pow=function(Y){var te=ie(Y);if(te.length===0)return new T(1);for(var oe=this,le=0;le<te.length&&te[le]===0;le++,oe=oe.sqr());if(++le<te.length)for(var he=oe.sqr();le<te.length;le++,he=he.sqr())te[le]!==0&&(oe=oe.mul(he));return oe},T.prototype.iushln=function(Y){I(typeof Y=="number"&&Y>=0);var te=Y%26,oe=(Y-te)/26,le=67108863>>>26-te<<26-te,he;if(te!==0){var ae=0;for(he=0;he<this.length;he++){var Q=this.words[he]&le,se=(this.words[he]|0)-Q<<te;this.words[he]=se|ae,ae=Q>>>26-te}ae&&(this.words[he]=ae,this.length++)}if(oe!==0){for(he=this.length-1;he>=0;he--)this.words[he+oe]=this.words[he];for(he=0;he<oe;he++)this.words[he]=0;this.length+=oe}return this._strip()},T.prototype.ishln=function(Y){return I(this.negative===0),this.iushln(Y)},T.prototype.iushrn=function(Y,te,oe){I(typeof Y=="number"&&Y>=0);var le;te?le=(te-te%26)/26:le=0;var he=Y%26,ae=Math.min((Y-he)/26,this.length),Q=67108863^67108863>>>he<<he,se=oe;if(le-=ae,le=Math.max(0,le),se){for(var Ae=0;Ae<ae;Ae++)se.words[Ae]=this.words[Ae];se.length=ae}if(ae!==0)if(this.length>ae)for(this.length-=ae,Ae=0;Ae<this.length;Ae++)this.words[Ae]=this.words[Ae+ae];else this.words[0]=0,this.length=1;var ge=0;for(Ae=this.length-1;Ae>=0&&(ge!==0||Ae>=le);Ae--){var Ee=this.words[Ae]|0;this.words[Ae]=ge<<26-he|Ee>>>he,ge=Ee&Q}return se&&ge!==0&&(se.words[se.length++]=ge),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},T.prototype.ishrn=function(Y,te,oe){return I(this.negative===0),this.iushrn(Y,te,oe)},T.prototype.shln=function(Y){return this.clone().ishln(Y)},T.prototype.ushln=function(Y){return this.clone().iushln(Y)},T.prototype.shrn=function(Y){return this.clone().ishrn(Y)},T.prototype.ushrn=function(Y){return this.clone().iushrn(Y)},T.prototype.testn=function(Y){I(typeof Y=="number"&&Y>=0);var te=Y%26,oe=(Y-te)/26,le=1<<te;if(this.length<=oe)return!1;var he=this.words[oe];return!!(he&le)},T.prototype.imaskn=function(Y){I(typeof Y=="number"&&Y>=0);var te=Y%26,oe=(Y-te)/26;if(I(this.negative===0,"imaskn works only with positive numbers"),this.length<=oe)return this;if(te!==0&&oe++,this.length=Math.min(oe,this.length),te!==0){var le=67108863^67108863>>>te<<te;this.words[this.length-1]&=le}return this._strip()},T.prototype.maskn=function(Y){return this.clone().imaskn(Y)},T.prototype.iaddn=function(Y){return I(typeof Y=="number"),I(Y<67108864),Y<0?this.isubn(-Y):this.negative!==0?this.length===1&&(this.words[0]|0)<=Y?(this.words[0]=Y-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(Y),this.negative=1,this):this._iaddn(Y)},T.prototype._iaddn=function(Y){this.words[0]+=Y;for(var te=0;te<this.length&&this.words[te]>=67108864;te++)this.words[te]-=67108864,te===this.length-1?this.words[te+1]=1:this.words[te+1]++;return this.length=Math.max(this.length,te+1),this},T.prototype.isubn=function(Y){if(I(typeof Y=="number"),I(Y<67108864),Y<0)return this.iaddn(-Y);if(this.negative!==0)return this.negative=0,this.iaddn(Y),this.negative=1,this;if(this.words[0]-=Y,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var te=0;te<this.length&&this.words[te]<0;te++)this.words[te]+=67108864,this.words[te+1]-=1;return this._strip()},T.prototype.addn=function(Y){return this.clone().iaddn(Y)},T.prototype.subn=function(Y){return this.clone().isubn(Y)},T.prototype.iabs=function(){return this.negative=0,this},T.prototype.abs=function(){return this.clone().iabs()},T.prototype._ishlnsubmul=function(Y,te,oe){var le=Y.length+oe,he;this._expand(le);var ae,Q=0;for(he=0;he<Y.length;he++){ae=(this.words[he+oe]|0)+Q;var se=(Y.words[he]|0)*te;ae-=se&67108863,Q=(ae>>26)-(se/67108864|0),this.words[he+oe]=ae&67108863}for(;he<this.length-oe;he++)ae=(this.words[he+oe]|0)+Q,Q=ae>>26,this.words[he+oe]=ae&67108863;if(Q===0)return this._strip();for(I(Q===-1),Q=0,he=0;he<this.length;he++)ae=-(this.words[he]|0)+Q,Q=ae>>26,this.words[he]=ae&67108863;return this.negative=1,this._strip()},T.prototype._wordDiv=function(Y,te){var oe=this.length-Y.length,le=this.clone(),he=Y,ae=he.words[he.length-1]|0,Q=this._countBits(ae);oe=26-Q,oe!==0&&(he=he.ushln(oe),le.iushln(oe),ae=he.words[he.length-1]|0);var se=le.length-he.length,Ae;if(te!=="mod"){Ae=new T(null),Ae.length=se+1,Ae.words=new Array(Ae.length);for(var ge=0;ge<Ae.length;ge++)Ae.words[ge]=0}var Ee=le.clone()._ishlnsubmul(he,1,se);Ee.negative===0&&(le=Ee,Ae&&(Ae.words[se]=1));for(var ke=se-1;ke>=0;ke--){var Se=(le.words[he.length+ke]|0)*67108864+(le.words[he.length+ke-1]|0);for(Se=Math.min(Se/ae|0,67108863),le._ishlnsubmul(he,Se,ke);le.negative!==0;)Se--,le.negative=0,le._ishlnsubmul(he,1,ke),le.isZero()||(le.negative^=1);Ae&&(Ae.words[ke]=Se)}return Ae&&Ae._strip(),le._strip(),te!=="div"&&oe!==0&&le.iushrn(oe),{div:Ae||null,mod:le}},T.prototype.divmod=function(Y,te,oe){if(I(!Y.isZero()),this.isZero())return{div:new T(0),mod:new T(0)};var le,he,ae;return this.negative!==0&&Y.negative===0?(ae=this.neg().divmod(Y,te),te!=="mod"&&(le=ae.div.neg()),te!=="div"&&(he=ae.mod.neg(),oe&&he.negative!==0&&he.iadd(Y)),{div:le,mod:he}):this.negative===0&&Y.negative!==0?(ae=this.divmod(Y.neg(),te),te!=="mod"&&(le=ae.div.neg()),{div:le,mod:ae.mod}):(this.negative&Y.negative)!==0?(ae=this.neg().divmod(Y.neg(),te),te!=="div"&&(he=ae.mod.neg(),oe&&he.negative!==0&&he.isub(Y)),{div:ae.div,mod:he}):Y.length>this.length||this.cmp(Y)<0?{div:new T(0),mod:this}:Y.length===1?te==="div"?{div:this.divn(Y.words[0]),mod:null}:te==="mod"?{div:null,mod:new T(this.modrn(Y.words[0]))}:{div:this.divn(Y.words[0]),mod:new T(this.modrn(Y.words[0]))}:this._wordDiv(Y,te)},T.prototype.div=function(Y){return this.divmod(Y,"div",!1).div},T.prototype.mod=function(Y){return this.divmod(Y,"mod",!1).mod},T.prototype.umod=function(Y){return this.divmod(Y,"mod",!0).mod},T.prototype.divRound=function(Y){var te=this.divmod(Y);if(te.mod.isZero())return te.div;var oe=te.div.negative!==0?te.mod.isub(Y):te.mod,le=Y.ushrn(1),he=Y.andln(1),ae=oe.cmp(le);return ae<0||he===1&&ae===0?te.div:te.div.negative!==0?te.div.isubn(1):te.div.iaddn(1)},T.prototype.modrn=function(Y){var te=Y<0;te&&(Y=-Y),I(Y<=67108863);for(var oe=(1<<26)%Y,le=0,he=this.length-1;he>=0;he--)le=(oe*le+(this.words[he]|0))%Y;return te?-le:le},T.prototype.modn=function(Y){return this.modrn(Y)},T.prototype.idivn=function(Y){var te=Y<0;te&&(Y=-Y),I(Y<=67108863);for(var oe=0,le=this.length-1;le>=0;le--){var he=(this.words[le]|0)+oe*67108864;this.words[le]=he/Y|0,oe=he%Y}return this._strip(),te?this.ineg():this},T.prototype.divn=function(Y){return this.clone().idivn(Y)},T.prototype.egcd=function(Y){I(Y.negative===0),I(!Y.isZero());var te=this,oe=Y.clone();te.negative!==0?te=te.umod(Y):te=te.clone();for(var le=new T(1),he=new T(0),ae=new T(0),Q=new T(1),se=0;te.isEven()&&oe.isEven();)te.iushrn(1),oe.iushrn(1),++se;for(var Ae=oe.clone(),ge=te.clone();!te.isZero();){for(var Ee=0,ke=1;(te.words[0]&ke)===0&&Ee<26;++Ee,ke<<=1);if(Ee>0)for(te.iushrn(Ee);Ee-- >0;)(le.isOdd()||he.isOdd())&&(le.iadd(Ae),he.isub(ge)),le.iushrn(1),he.iushrn(1);for(var Se=0,Ie=1;(oe.words[0]&Ie)===0&&Se<26;++Se,Ie<<=1);if(Se>0)for(oe.iushrn(Se);Se-- >0;)(ae.isOdd()||Q.isOdd())&&(ae.iadd(Ae),Q.isub(ge)),ae.iushrn(1),Q.iushrn(1);te.cmp(oe)>=0?(te.isub(oe),le.isub(ae),he.isub(Q)):(oe.isub(te),ae.isub(le),Q.isub(he))}return{a:ae,b:Q,gcd:oe.iushln(se)}},T.prototype._invmp=function(Y){I(Y.negative===0),I(!Y.isZero());var te=this,oe=Y.clone();te.negative!==0?te=te.umod(Y):te=te.clone();for(var le=new T(1),he=new T(0),ae=oe.clone();te.cmpn(1)>0&&oe.cmpn(1)>0;){for(var Q=0,se=1;(te.words[0]&se)===0&&Q<26;++Q,se<<=1);if(Q>0)for(te.iushrn(Q);Q-- >0;)le.isOdd()&&le.iadd(ae),le.iushrn(1);for(var Ae=0,ge=1;(oe.words[0]&ge)===0&&Ae<26;++Ae,ge<<=1);if(Ae>0)for(oe.iushrn(Ae);Ae-- >0;)he.isOdd()&&he.iadd(ae),he.iushrn(1);te.cmp(oe)>=0?(te.isub(oe),le.isub(he)):(oe.isub(te),he.isub(le))}var Ee;return te.cmpn(1)===0?Ee=le:Ee=he,Ee.cmpn(0)<0&&Ee.iadd(Y),Ee},T.prototype.gcd=function(Y){if(this.isZero())return Y.abs();if(Y.isZero())return this.abs();var te=this.clone(),oe=Y.clone();te.negative=0,oe.negative=0;for(var le=0;te.isEven()&&oe.isEven();le++)te.iushrn(1),oe.iushrn(1);do{for(;te.isEven();)te.iushrn(1);for(;oe.isEven();)oe.iushrn(1);var he=te.cmp(oe);if(he<0){var ae=te;te=oe,oe=ae}else if(he===0||oe.cmpn(1)===0)break;te.isub(oe)}while(!0);return oe.iushln(le)},T.prototype.invm=function(Y){return this.egcd(Y).a.umod(Y)},T.prototype.isEven=function(){return(this.words[0]&1)===0},T.prototype.isOdd=function(){return(this.words[0]&1)===1},T.prototype.andln=function(Y){return this.words[0]&Y},T.prototype.bincn=function(Y){I(typeof Y=="number");var te=Y%26,oe=(Y-te)/26,le=1<<te;if(this.length<=oe)return this._expand(oe+1),this.words[oe]|=le,this;for(var he=le,ae=oe;he!==0&&ae<this.length;ae++){var Q=this.words[ae]|0;Q+=he,he=Q>>>26,Q&=67108863,this.words[ae]=Q}return he!==0&&(this.words[ae]=he,this.length++),this},T.prototype.isZero=function(){return this.length===1&&this.words[0]===0},T.prototype.cmpn=function(Y){var te=Y<0;if(this.negative!==0&&!te)return-1;if(this.negative===0&&te)return 1;this._strip();var oe;if(this.length>1)oe=1;else{te&&(Y=-Y),I(Y<=67108863,"Number is too big");var le=this.words[0]|0;oe=le===Y?0:le<Y?-1:1}return this.negative!==0?-oe|0:oe},T.prototype.cmp=function(Y){if(this.negative!==0&&Y.negative===0)return-1;if(this.negative===0&&Y.negative!==0)return 1;var te=this.ucmp(Y);return this.negative!==0?-te|0:te},T.prototype.ucmp=function(Y){if(this.length>Y.length)return 1;if(this.length<Y.length)return-1;for(var te=0,oe=this.length-1;oe>=0;oe--){var le=this.words[oe]|0,he=Y.words[oe]|0;if(le!==he){le<he?te=-1:le>he&&(te=1);break}}return te},T.prototype.gtn=function(Y){return this.cmpn(Y)===1},T.prototype.gt=function(Y){return this.cmp(Y)===1},T.prototype.gten=function(Y){return this.cmpn(Y)>=0},T.prototype.gte=function(Y){return this.cmp(Y)>=0},T.prototype.ltn=function(Y){return this.cmpn(Y)===-1},T.prototype.lt=function(Y){return this.cmp(Y)===-1},T.prototype.lten=function(Y){return this.cmpn(Y)<=0},T.prototype.lte=function(Y){return this.cmp(Y)<=0},T.prototype.eqn=function(Y){return this.cmpn(Y)===0},T.prototype.eq=function(Y){return this.cmp(Y)===0},T.red=function(Y){return new ue(Y)},T.prototype.toRed=function(Y){return I(!this.red,"Already a number in reduction context"),I(this.negative===0,"red works only with positives"),Y.convertTo(this)._forceRed(Y)},T.prototype.fromRed=function(){return I(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},T.prototype._forceRed=function(Y){return this.red=Y,this},T.prototype.forceRed=function(Y){return I(!this.red,"Already a number in reduction context"),this._forceRed(Y)},T.prototype.redAdd=function(Y){return I(this.red,"redAdd works only with red numbers"),this.red.add(this,Y)},T.prototype.redIAdd=function(Y){return I(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,Y)},T.prototype.redSub=function(Y){return I(this.red,"redSub works only with red numbers"),this.red.sub(this,Y)},T.prototype.redISub=function(Y){return I(this.red,"redISub works only with red numbers"),this.red.isub(this,Y)},T.prototype.redShl=function(Y){return I(this.red,"redShl works only with red numbers"),this.red.shl(this,Y)},T.prototype.redMul=function(Y){return I(this.red,"redMul works only with red numbers"),this.red._verify2(this,Y),this.red.mul(this,Y)},T.prototype.redIMul=function(Y){return I(this.red,"redMul works only with red numbers"),this.red._verify2(this,Y),this.red.imul(this,Y)},T.prototype.redSqr=function(){return I(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},T.prototype.redISqr=function(){return I(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},T.prototype.redSqrt=function(){return I(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},T.prototype.redInvm=function(){return I(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},T.prototype.redNeg=function(){return I(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},T.prototype.redPow=function(Y){return I(this.red&&!Y.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,Y)};var pe={k256:null,p224:null,p192:null,p25519:null};function ve(z,Y){this.name=z,this.p=new T(Y,16),this.n=this.p.bitLength(),this.k=new T(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}ve.prototype._tmp=function(){var Y=new T(null);return Y.words=new Array(Math.ceil(this.n/13)),Y},ve.prototype.ireduce=function(Y){var te=Y,oe;do this.split(te,this.tmp),te=this.imulK(te),te=te.iadd(this.tmp),oe=te.bitLength();while(oe>this.n);var le=oe<this.n?-1:te.ucmp(this.p);return le===0?(te.words[0]=0,te.length=1):le>0?te.isub(this.p):te.strip!==void 0?te.strip():te._strip(),te},ve.prototype.split=function(Y,te){Y.iushrn(this.n,0,te)},ve.prototype.imulK=function(Y){return Y.imul(this.k)};function ye(){ve.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}B(ye,ve),ye.prototype.split=function(Y,te){for(var oe=4194303,le=Math.min(Y.length,9),he=0;he<le;he++)te.words[he]=Y.words[he];if(te.length=le,Y.length<=9){Y.words[0]=0,Y.length=1;return}var ae=Y.words[9];for(te.words[te.length++]=ae&oe,he=10;he<Y.length;he++){var Q=Y.words[he]|0;Y.words[he-10]=(Q&oe)<<4|ae>>>22,ae=Q}ae>>>=22,Y.words[he-10]=ae,ae===0&&Y.length>10?Y.length-=10:Y.length-=9},ye.prototype.imulK=function(Y){Y.words[Y.length]=0,Y.words[Y.length+1]=0,Y.length+=2;for(var te=0,oe=0;oe<Y.length;oe++){var le=Y.words[oe]|0;te+=le*977,Y.words[oe]=te&67108863,te=le*64+(te/67108864|0)}return Y.words[Y.length-1]===0&&(Y.length--,Y.words[Y.length-1]===0&&Y.length--),Y};function _e(){ve.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}B(_e,ve);function be(){ve.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}B(be,ve);function Te(){ve.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}B(Te,ve),Te.prototype.imulK=function(Y){for(var te=0,oe=0;oe<Y.length;oe++){var le=(Y.words[oe]|0)*19+te,he=le&67108863;le>>>=26,Y.words[oe]=he,te=le}return te!==0&&(Y.words[Y.length++]=te),Y},T._prime=function(Y){if(pe[Y])return pe[Y];var te;if(Y==="k256")te=new ye;else if(Y==="p224")te=new _e;else if(Y==="p192")te=new be;else if(Y==="p25519")te=new Te;else throw new Error("Unknown prime "+Y);return pe[Y]=te,te};function ue(z){if(typeof z=="string"){var Y=T._prime(z);this.m=Y.p,this.prime=Y}else I(z.gtn(1),"modulus must be greater than 1"),this.m=z,this.prime=null}ue.prototype._verify1=function(Y){I(Y.negative===0,"red works only with positives"),I(Y.red,"red works only with red numbers")},ue.prototype._verify2=function(Y,te){I((Y.negative|te.negative)===0,"red works only with positives"),I(Y.red&&Y.red===te.red,"red works only with red numbers")},ue.prototype.imod=function(Y){return this.prime?this.prime.ireduce(Y)._forceRed(this):(L(Y,Y.umod(this.m)._forceRed(this)),Y)},ue.prototype.neg=function(Y){return Y.isZero()?Y.clone():this.m.sub(Y)._forceRed(this)},ue.prototype.add=function(Y,te){this._verify2(Y,te);var oe=Y.add(te);return oe.cmp(this.m)>=0&&oe.isub(this.m),oe._forceRed(this)},ue.prototype.iadd=function(Y,te){this._verify2(Y,te);var oe=Y.iadd(te);return oe.cmp(this.m)>=0&&oe.isub(this.m),oe},ue.prototype.sub=function(Y,te){this._verify2(Y,te);var oe=Y.sub(te);return oe.cmpn(0)<0&&oe.iadd(this.m),oe._forceRed(this)},ue.prototype.isub=function(Y,te){this._verify2(Y,te);var oe=Y.isub(te);return oe.cmpn(0)<0&&oe.iadd(this.m),oe},ue.prototype.shl=function(Y,te){return this._verify1(Y),this.imod(Y.ushln(te))},ue.prototype.imul=function(Y,te){return this._verify2(Y,te),this.imod(Y.imul(te))},ue.prototype.mul=function(Y,te){return this._verify2(Y,te),this.imod(Y.mul(te))},ue.prototype.isqr=function(Y){return this.imul(Y,Y.clone())},ue.prototype.sqr=function(Y){return this.mul(Y,Y)},ue.prototype.sqrt=function(Y){if(Y.isZero())return Y.clone();var te=this.m.andln(3);if(I(te%2===1),te===3){var oe=this.m.add(new T(1)).iushrn(2);return this.pow(Y,oe)}for(var le=this.m.subn(1),he=0;!le.isZero()&&le.andln(1)===0;)he++,le.iushrn(1);I(!le.isZero());var ae=new T(1).toRed(this),Q=ae.redNeg(),se=this.m.subn(1).iushrn(1),Ae=this.m.bitLength();for(Ae=new T(2*Ae*Ae).toRed(this);this.pow(Ae,se).cmp(Q)!==0;)Ae.redIAdd(Q);for(var ge=this.pow(Ae,le),Ee=this.pow(Y,le.addn(1).iushrn(1)),ke=this.pow(Y,le),Se=he;ke.cmp(ae)!==0;){for(var Ie=ke,we=0;Ie.cmp(ae)!==0;we++)Ie=Ie.redSqr();I(we<Se);var xe=this.pow(ge,new T(1).iushln(Se-we-1));Ee=Ee.redMul(xe),ge=xe.redSqr(),ke=ke.redMul(ge),Se=we}return Ee},ue.prototype.invm=function(Y){var te=Y._invmp(this.m);return te.negative!==0?(te.negative=0,this.imod(te).redNeg()):this.imod(te)},ue.prototype.pow=function(Y,te){if(te.isZero())return new T(1).toRed(this);if(te.cmpn(1)===0)return Y.clone();var oe=4,le=new Array(1<<oe);le[0]=new T(1).toRed(this),le[1]=Y;for(var he=2;he<le.length;he++)le[he]=this.mul(le[he-1],Y);var ae=le[0],Q=0,se=0,Ae=te.bitLength()%26;for(Ae===0&&(Ae=26),he=te.length-1;he>=0;he--){for(var ge=te.words[he],Ee=Ae-1;Ee>=0;Ee--){var ke=ge>>Ee&1;if(ae!==le[0]&&(ae=this.sqr(ae)),ke===0&&Q===0){se=0;continue}Q<<=1,Q|=ke,se++,!(se!==oe&&(he!==0||Ee!==0))&&(ae=this.mul(ae,le[Q]),se=0,Q=0)}Ae=26}return ae},ue.prototype.convertTo=function(Y){var te=Y.umod(this.m);return te===Y?te.clone():te},ue.prototype.convertFrom=function(Y){var te=Y.clone();return te.red=null,te},T.mont=function(Y){return new O(Y)};function O(z){ue.call(this,z),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new T(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}B(O,ue),O.prototype.convertTo=function(Y){return this.imod(Y.ushln(this.shift))},O.prototype.convertFrom=function(Y){var te=this.imod(Y.mul(this.rinv));return te.red=null,te},O.prototype.imul=function(Y,te){if(Y.isZero()||te.isZero())return Y.words[0]=0,Y.length=1,Y;var oe=Y.imul(te),le=oe.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),he=oe.isub(le).iushrn(this.shift),ae=he;return he.cmp(this.m)>=0?ae=he.isub(this.m):he.cmpn(0)<0&&(ae=he.iadd(this.m)),ae._forceRed(this)},O.prototype.mul=function(Y,te){if(Y.isZero()||te.isZero())return new T(0)._forceRed(this);var oe=Y.mul(te),le=oe.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),he=oe.isub(le).iushrn(this.shift),ae=he;return he.cmp(this.m)>=0?ae=he.isub(this.m):he.cmpn(0)<0&&(ae=he.iadd(this.m)),ae._forceRed(this)},O.prototype.invm=function(Y){var te=this.imod(Y._invmp(this.m).mul(this.r2));return te._forceRed(this)}})(E,bn$8)})(bn$9)),bn$9.exports}var browserifyRsa,hasRequiredBrowserifyRsa;function requireBrowserifyRsa(){if(hasRequiredBrowserifyRsa)return browserifyRsa;hasRequiredBrowserifyRsa=1;var E=requireBn$4(),A=requireBrowser$e(),_=requireSafeBuffer$1().Buffer;function I(R){var P=R.modulus.byteLength(),D;do D=new E(A(P));while(D.cmp(R.modulus)>=0||!D.umod(R.prime1)||!D.umod(R.prime2));return D}function B(R){var P=I(R),D=P.toRed(E.mont(R.modulus)).redPow(new E(R.publicExponent)).fromRed();return{blinder:D,unblinder:P.invm(R.modulus)}}function T(R,P){var D=B(P),F=P.modulus.byteLength(),L=new E(R).mul(D.blinder).umod(P.modulus),U=L.toRed(E.mont(P.prime1)),V=L.toRed(E.mont(P.prime2)),K=P.coefficient,J=P.prime1,ee=P.prime2,ie=U.redPow(P.exponent1).fromRed(),ne=V.redPow(P.exponent2).fromRed(),ce=ie.isub(ne).imul(K).umod(J).imul(ee);return ne.iadd(ce).imul(D.unblinder).umod(P.modulus).toArrayLike(_,"be",F)}return T.getr=I,browserifyRsa=T,browserifyRsa}var elliptic={};const version$2="6.6.1",require$$0$4={version:version$2};var utils$5={},bn$7={exports:{}},bn$6=bn$7.exports,hasRequiredBn$3;function requireBn$3(){return hasRequiredBn$3||(hasRequiredBn$3=1,(function(E){(function(A,_){function I(ue,O){if(!ue)throw new Error(O||"Assertion failed")}function B(ue,O){ue.super_=O;var z=function(){};z.prototype=O.prototype,ue.prototype=new z,ue.prototype.constructor=ue}function T(ue,O,z){if(T.isBN(ue))return ue;this.negative=0,this.words=null,this.length=0,this.red=null,ue!==null&&((O==="le"||O==="be")&&(z=O,O=10),this._init(ue||0,O||10,z||"be"))}typeof A=="object"?A.exports=T:_.BN=T,T.BN=T,T.wordSize=26;var R;try{typeof window<"u"&&typeof window.Buffer<"u"?R=window.Buffer:R=requireDist$1().Buffer}catch{}T.isBN=function(O){return O instanceof T?!0:O!==null&&typeof O=="object"&&O.constructor.wordSize===T.wordSize&&Array.isArray(O.words)},T.max=function(O,z){return O.cmp(z)>0?O:z},T.min=function(O,z){return O.cmp(z)<0?O:z},T.prototype._init=function(O,z,Y){if(typeof O=="number")return this._initNumber(O,z,Y);if(typeof O=="object")return this._initArray(O,z,Y);z==="hex"&&(z=16),I(z===(z|0)&&z>=2&&z<=36),O=O.toString().replace(/\s+/g,"");var te=0;O[0]==="-"&&(te++,this.negative=1),te<O.length&&(z===16?this._parseHex(O,te,Y):(this._parseBase(O,z,te),Y==="le"&&this._initArray(this.toArray(),z,Y)))},T.prototype._initNumber=function(O,z,Y){O<0&&(this.negative=1,O=-O),O<67108864?(this.words=[O&67108863],this.length=1):O<4503599627370496?(this.words=[O&67108863,O/67108864&67108863],this.length=2):(I(O<9007199254740992),this.words=[O&67108863,O/67108864&67108863,1],this.length=3),Y==="le"&&this._initArray(this.toArray(),z,Y)},T.prototype._initArray=function(O,z,Y){if(I(typeof O.length=="number"),O.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(O.length/3),this.words=new Array(this.length);for(var te=0;te<this.length;te++)this.words[te]=0;var oe,le,he=0;if(Y==="be")for(te=O.length-1,oe=0;te>=0;te-=3)le=O[te]|O[te-1]<<8|O[te-2]<<16,this.words[oe]|=le<<he&67108863,this.words[oe+1]=le>>>26-he&67108863,he+=24,he>=26&&(he-=26,oe++);else if(Y==="le")for(te=0,oe=0;te<O.length;te+=3)le=O[te]|O[te+1]<<8|O[te+2]<<16,this.words[oe]|=le<<he&67108863,this.words[oe+1]=le>>>26-he&67108863,he+=24,he>=26&&(he-=26,oe++);return this.strip()};function P(ue,O){var z=ue.charCodeAt(O);return z>=65&&z<=70?z-55:z>=97&&z<=102?z-87:z-48&15}function D(ue,O,z){var Y=P(ue,z);return z-1>=O&&(Y|=P(ue,z-1)<<4),Y}T.prototype._parseHex=function(O,z,Y){this.length=Math.ceil((O.length-z)/6),this.words=new Array(this.length);for(var te=0;te<this.length;te++)this.words[te]=0;var oe=0,le=0,he;if(Y==="be")for(te=O.length-1;te>=z;te-=2)he=D(O,z,te)<<oe,this.words[le]|=he&67108863,oe>=18?(oe-=18,le+=1,this.words[le]|=he>>>26):oe+=8;else{var ae=O.length-z;for(te=ae%2===0?z+1:z;te<O.length;te+=2)he=D(O,z,te)<<oe,this.words[le]|=he&67108863,oe>=18?(oe-=18,le+=1,this.words[le]|=he>>>26):oe+=8}this.strip()};function F(ue,O,z,Y){for(var te=0,oe=Math.min(ue.length,z),le=O;le<oe;le++){var he=ue.charCodeAt(le)-48;te*=Y,he>=49?te+=he-49+10:he>=17?te+=he-17+10:te+=he}return te}T.prototype._parseBase=function(O,z,Y){this.words=[0],this.length=1;for(var te=0,oe=1;oe<=67108863;oe*=z)te++;te--,oe=oe/z|0;for(var le=O.length-Y,he=le%te,ae=Math.min(le,le-he)+Y,Q=0,se=Y;se<ae;se+=te)Q=F(O,se,se+te,z),this.imuln(oe),this.words[0]+Q<67108864?this.words[0]+=Q:this._iaddn(Q);if(he!==0){var Ae=1;for(Q=F(O,se,O.length,z),se=0;se<he;se++)Ae*=z;this.imuln(Ae),this.words[0]+Q<67108864?this.words[0]+=Q:this._iaddn(Q)}this.strip()},T.prototype.copy=function(O){O.words=new Array(this.length);for(var z=0;z<this.length;z++)O.words[z]=this.words[z];O.length=this.length,O.negative=this.negative,O.red=this.red},T.prototype.clone=function(){var O=new T(null);return this.copy(O),O},T.prototype._expand=function(O){for(;this.length<O;)this.words[this.length++]=0;return this},T.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},T.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},T.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var L=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],U=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],V=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];T.prototype.toString=function(O,z){O=O||10,z=z|0||1;var Y;if(O===16||O==="hex"){Y="";for(var te=0,oe=0,le=0;le<this.length;le++){var he=this.words[le],ae=((he<<te|oe)&16777215).toString(16);oe=he>>>24-te&16777215,te+=2,te>=26&&(te-=26,le--),oe!==0||le!==this.length-1?Y=L[6-ae.length]+ae+Y:Y=ae+Y}for(oe!==0&&(Y=oe.toString(16)+Y);Y.length%z!==0;)Y="0"+Y;return this.negative!==0&&(Y="-"+Y),Y}if(O===(O|0)&&O>=2&&O<=36){var Q=U[O],se=V[O];Y="";var Ae=this.clone();for(Ae.negative=0;!Ae.isZero();){var ge=Ae.modn(se).toString(O);Ae=Ae.idivn(se),Ae.isZero()?Y=ge+Y:Y=L[Q-ge.length]+ge+Y}for(this.isZero()&&(Y="0"+Y);Y.length%z!==0;)Y="0"+Y;return this.negative!==0&&(Y="-"+Y),Y}I(!1,"Base should be between 2 and 36")},T.prototype.toNumber=function(){var O=this.words[0];return this.length===2?O+=this.words[1]*67108864:this.length===3&&this.words[2]===1?O+=4503599627370496+this.words[1]*67108864:this.length>2&&I(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-O:O},T.prototype.toJSON=function(){return this.toString(16)},T.prototype.toBuffer=function(O,z){return I(typeof R<"u"),this.toArrayLike(R,O,z)},T.prototype.toArray=function(O,z){return this.toArrayLike(Array,O,z)},T.prototype.toArrayLike=function(O,z,Y){var te=this.byteLength(),oe=Y||Math.max(1,te);I(te<=oe,"byte array longer than desired length"),I(oe>0,"Requested array length <= 0"),this.strip();var le=z==="le",he=new O(oe),ae,Q,se=this.clone();if(le){for(Q=0;!se.isZero();Q++)ae=se.andln(255),se.iushrn(8),he[Q]=ae;for(;Q<oe;Q++)he[Q]=0}else{for(Q=0;Q<oe-te;Q++)he[Q]=0;for(Q=0;!se.isZero();Q++)ae=se.andln(255),se.iushrn(8),he[oe-Q-1]=ae}return he},Math.clz32?T.prototype._countBits=function(O){return 32-Math.clz32(O)}:T.prototype._countBits=function(O){var z=O,Y=0;return z>=4096&&(Y+=13,z>>>=13),z>=64&&(Y+=7,z>>>=7),z>=8&&(Y+=4,z>>>=4),z>=2&&(Y+=2,z>>>=2),Y+z},T.prototype._zeroBits=function(O){if(O===0)return 26;var z=O,Y=0;return(z&8191)===0&&(Y+=13,z>>>=13),(z&127)===0&&(Y+=7,z>>>=7),(z&15)===0&&(Y+=4,z>>>=4),(z&3)===0&&(Y+=2,z>>>=2),(z&1)===0&&Y++,Y},T.prototype.bitLength=function(){var O=this.words[this.length-1],z=this._countBits(O);return(this.length-1)*26+z};function K(ue){for(var O=new Array(ue.bitLength()),z=0;z<O.length;z++){var Y=z/26|0,te=z%26;O[z]=(ue.words[Y]&1<<te)>>>te}return O}T.prototype.zeroBits=function(){if(this.isZero())return 0;for(var O=0,z=0;z<this.length;z++){var Y=this._zeroBits(this.words[z]);if(O+=Y,Y!==26)break}return O},T.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},T.prototype.toTwos=function(O){return this.negative!==0?this.abs().inotn(O).iaddn(1):this.clone()},T.prototype.fromTwos=function(O){return this.testn(O-1)?this.notn(O).iaddn(1).ineg():this.clone()},T.prototype.isNeg=function(){return this.negative!==0},T.prototype.neg=function(){return this.clone().ineg()},T.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},T.prototype.iuor=function(O){for(;this.length<O.length;)this.words[this.length++]=0;for(var z=0;z<O.length;z++)this.words[z]=this.words[z]|O.words[z];return this.strip()},T.prototype.ior=function(O){return I((this.negative|O.negative)===0),this.iuor(O)},T.prototype.or=function(O){return this.length>O.length?this.clone().ior(O):O.clone().ior(this)},T.prototype.uor=function(O){return this.length>O.length?this.clone().iuor(O):O.clone().iuor(this)},T.prototype.iuand=function(O){var z;this.length>O.length?z=O:z=this;for(var Y=0;Y<z.length;Y++)this.words[Y]=this.words[Y]&O.words[Y];return this.length=z.length,this.strip()},T.prototype.iand=function(O){return I((this.negative|O.negative)===0),this.iuand(O)},T.prototype.and=function(O){return this.length>O.length?this.clone().iand(O):O.clone().iand(this)},T.prototype.uand=function(O){return this.length>O.length?this.clone().iuand(O):O.clone().iuand(this)},T.prototype.iuxor=function(O){var z,Y;this.length>O.length?(z=this,Y=O):(z=O,Y=this);for(var te=0;te<Y.length;te++)this.words[te]=z.words[te]^Y.words[te];if(this!==z)for(;te<z.length;te++)this.words[te]=z.words[te];return this.length=z.length,this.strip()},T.prototype.ixor=function(O){return I((this.negative|O.negative)===0),this.iuxor(O)},T.prototype.xor=function(O){return this.length>O.length?this.clone().ixor(O):O.clone().ixor(this)},T.prototype.uxor=function(O){return this.length>O.length?this.clone().iuxor(O):O.clone().iuxor(this)},T.prototype.inotn=function(O){I(typeof O=="number"&&O>=0);var z=Math.ceil(O/26)|0,Y=O%26;this._expand(z),Y>0&&z--;for(var te=0;te<z;te++)this.words[te]=~this.words[te]&67108863;return Y>0&&(this.words[te]=~this.words[te]&67108863>>26-Y),this.strip()},T.prototype.notn=function(O){return this.clone().inotn(O)},T.prototype.setn=function(O,z){I(typeof O=="number"&&O>=0);var Y=O/26|0,te=O%26;return this._expand(Y+1),z?this.words[Y]=this.words[Y]|1<<te:this.words[Y]=this.words[Y]&~(1<<te),this.strip()},T.prototype.iadd=function(O){var z;if(this.negative!==0&&O.negative===0)return this.negative=0,z=this.isub(O),this.negative^=1,this._normSign();if(this.negative===0&&O.negative!==0)return O.negative=0,z=this.isub(O),O.negative=1,z._normSign();var Y,te;this.length>O.length?(Y=this,te=O):(Y=O,te=this);for(var oe=0,le=0;le<te.length;le++)z=(Y.words[le]|0)+(te.words[le]|0)+oe,this.words[le]=z&67108863,oe=z>>>26;for(;oe!==0&&le<Y.length;le++)z=(Y.words[le]|0)+oe,this.words[le]=z&67108863,oe=z>>>26;if(this.length=Y.length,oe!==0)this.words[this.length]=oe,this.length++;else if(Y!==this)for(;le<Y.length;le++)this.words[le]=Y.words[le];return this},T.prototype.add=function(O){var z;return O.negative!==0&&this.negative===0?(O.negative=0,z=this.sub(O),O.negative^=1,z):O.negative===0&&this.negative!==0?(this.negative=0,z=O.sub(this),this.negative=1,z):this.length>O.length?this.clone().iadd(O):O.clone().iadd(this)},T.prototype.isub=function(O){if(O.negative!==0){O.negative=0;var z=this.iadd(O);return O.negative=1,z._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(O),this.negative=1,this._normSign();var Y=this.cmp(O);if(Y===0)return this.negative=0,this.length=1,this.words[0]=0,this;var te,oe;Y>0?(te=this,oe=O):(te=O,oe=this);for(var le=0,he=0;he<oe.length;he++)z=(te.words[he]|0)-(oe.words[he]|0)+le,le=z>>26,this.words[he]=z&67108863;for(;le!==0&&he<te.length;he++)z=(te.words[he]|0)+le,le=z>>26,this.words[he]=z&67108863;if(le===0&&he<te.length&&te!==this)for(;he<te.length;he++)this.words[he]=te.words[he];return this.length=Math.max(this.length,he),te!==this&&(this.negative=1),this.strip()},T.prototype.sub=function(O){return this.clone().isub(O)};function J(ue,O,z){z.negative=O.negative^ue.negative;var Y=ue.length+O.length|0;z.length=Y,Y=Y-1|0;var te=ue.words[0]|0,oe=O.words[0]|0,le=te*oe,he=le&67108863,ae=le/67108864|0;z.words[0]=he;for(var Q=1;Q<Y;Q++){for(var se=ae>>>26,Ae=ae&67108863,ge=Math.min(Q,O.length-1),Ee=Math.max(0,Q-ue.length+1);Ee<=ge;Ee++){var ke=Q-Ee|0;te=ue.words[ke]|0,oe=O.words[Ee]|0,le=te*oe+Ae,se+=le/67108864|0,Ae=le&67108863}z.words[Q]=Ae|0,ae=se|0}return ae!==0?z.words[Q]=ae|0:z.length--,z.strip()}var ee=function(O,z,Y){var te=O.words,oe=z.words,le=Y.words,he=0,ae,Q,se,Ae=te[0]|0,ge=Ae&8191,Ee=Ae>>>13,ke=te[1]|0,Se=ke&8191,Ie=ke>>>13,we=te[2]|0,xe=we&8191,Fe=we>>>13,Ge=te[3]|0,Oe=Ge&8191,et=Ge>>>13,Mt=te[4]|0,dt=Mt&8191,mt=Mt>>>13,Ut=te[5]|0,St=Ut&8191,vt=Ut>>>13,It=te[6]|0,yt=It&8191,Tt=It>>>13,Wt=te[7]|0,ft=Wt&8191,_t=Wt>>>13,Xt=te[8]|0,Nt=Xt&8191,qt=Xt>>>13,nr=te[9]|0,ze=nr&8191,Ce=nr>>>13,Le=oe[0]|0,Ze=Le&8191,Je=Le>>>13,nt=oe[1]|0,rt=nt&8191,He=nt>>>13,Dt=oe[2]|0,Rt=Dt&8191,De=Dt>>>13,We=oe[3]|0,Ve=We&8191,qe=We>>>13,pt=oe[4]|0,At=pt&8191,jt=pt>>>13,rr=oe[5]|0,Ke=rr&8191,Ne=rr>>>13,Ye=oe[6]|0,st=Ye&8191,bt=Ye>>>13,Qe=oe[7]|0,Re=Qe&8191,Pe=Qe>>>13,Me=oe[8]|0,$e=Me&8191,it=Me>>>13,kt=oe[9]|0,xt=kt&8191,Ot=kt>>>13;Y.negative=O.negative^z.negative,Y.length=19,ae=Math.imul(ge,Ze),Q=Math.imul(ge,Je),Q=Q+Math.imul(Ee,Ze)|0,se=Math.imul(Ee,Je);var Jt=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,ae=Math.imul(Se,Ze),Q=Math.imul(Se,Je),Q=Q+Math.imul(Ie,Ze)|0,se=Math.imul(Ie,Je),ae=ae+Math.imul(ge,rt)|0,Q=Q+Math.imul(ge,He)|0,Q=Q+Math.imul(Ee,rt)|0,se=se+Math.imul(Ee,He)|0;var tr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(tr>>>26)|0,tr&=67108863,ae=Math.imul(xe,Ze),Q=Math.imul(xe,Je),Q=Q+Math.imul(Fe,Ze)|0,se=Math.imul(Fe,Je),ae=ae+Math.imul(Se,rt)|0,Q=Q+Math.imul(Se,He)|0,Q=Q+Math.imul(Ie,rt)|0,se=se+Math.imul(Ie,He)|0,ae=ae+Math.imul(ge,Rt)|0,Q=Q+Math.imul(ge,De)|0,Q=Q+Math.imul(Ee,Rt)|0,se=se+Math.imul(Ee,De)|0;var br=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(br>>>26)|0,br&=67108863,ae=Math.imul(Oe,Ze),Q=Math.imul(Oe,Je),Q=Q+Math.imul(et,Ze)|0,se=Math.imul(et,Je),ae=ae+Math.imul(xe,rt)|0,Q=Q+Math.imul(xe,He)|0,Q=Q+Math.imul(Fe,rt)|0,se=se+Math.imul(Fe,He)|0,ae=ae+Math.imul(Se,Rt)|0,Q=Q+Math.imul(Se,De)|0,Q=Q+Math.imul(Ie,Rt)|0,se=se+Math.imul(Ie,De)|0,ae=ae+Math.imul(ge,Ve)|0,Q=Q+Math.imul(ge,qe)|0,Q=Q+Math.imul(Ee,Ve)|0,se=se+Math.imul(Ee,qe)|0;var ar=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(ar>>>26)|0,ar&=67108863,ae=Math.imul(dt,Ze),Q=Math.imul(dt,Je),Q=Q+Math.imul(mt,Ze)|0,se=Math.imul(mt,Je),ae=ae+Math.imul(Oe,rt)|0,Q=Q+Math.imul(Oe,He)|0,Q=Q+Math.imul(et,rt)|0,se=se+Math.imul(et,He)|0,ae=ae+Math.imul(xe,Rt)|0,Q=Q+Math.imul(xe,De)|0,Q=Q+Math.imul(Fe,Rt)|0,se=se+Math.imul(Fe,De)|0,ae=ae+Math.imul(Se,Ve)|0,Q=Q+Math.imul(Se,qe)|0,Q=Q+Math.imul(Ie,Ve)|0,se=se+Math.imul(Ie,qe)|0,ae=ae+Math.imul(ge,At)|0,Q=Q+Math.imul(ge,jt)|0,Q=Q+Math.imul(Ee,At)|0,se=se+Math.imul(Ee,jt)|0;var _r=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(_r>>>26)|0,_r&=67108863,ae=Math.imul(St,Ze),Q=Math.imul(St,Je),Q=Q+Math.imul(vt,Ze)|0,se=Math.imul(vt,Je),ae=ae+Math.imul(dt,rt)|0,Q=Q+Math.imul(dt,He)|0,Q=Q+Math.imul(mt,rt)|0,se=se+Math.imul(mt,He)|0,ae=ae+Math.imul(Oe,Rt)|0,Q=Q+Math.imul(Oe,De)|0,Q=Q+Math.imul(et,Rt)|0,se=se+Math.imul(et,De)|0,ae=ae+Math.imul(xe,Ve)|0,Q=Q+Math.imul(xe,qe)|0,Q=Q+Math.imul(Fe,Ve)|0,se=se+Math.imul(Fe,qe)|0,ae=ae+Math.imul(Se,At)|0,Q=Q+Math.imul(Se,jt)|0,Q=Q+Math.imul(Ie,At)|0,se=se+Math.imul(Ie,jt)|0,ae=ae+Math.imul(ge,Ke)|0,Q=Q+Math.imul(ge,Ne)|0,Q=Q+Math.imul(Ee,Ke)|0,se=se+Math.imul(Ee,Ne)|0;var or=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(or>>>26)|0,or&=67108863,ae=Math.imul(yt,Ze),Q=Math.imul(yt,Je),Q=Q+Math.imul(Tt,Ze)|0,se=Math.imul(Tt,Je),ae=ae+Math.imul(St,rt)|0,Q=Q+Math.imul(St,He)|0,Q=Q+Math.imul(vt,rt)|0,se=se+Math.imul(vt,He)|0,ae=ae+Math.imul(dt,Rt)|0,Q=Q+Math.imul(dt,De)|0,Q=Q+Math.imul(mt,Rt)|0,se=se+Math.imul(mt,De)|0,ae=ae+Math.imul(Oe,Ve)|0,Q=Q+Math.imul(Oe,qe)|0,Q=Q+Math.imul(et,Ve)|0,se=se+Math.imul(et,qe)|0,ae=ae+Math.imul(xe,At)|0,Q=Q+Math.imul(xe,jt)|0,Q=Q+Math.imul(Fe,At)|0,se=se+Math.imul(Fe,jt)|0,ae=ae+Math.imul(Se,Ke)|0,Q=Q+Math.imul(Se,Ne)|0,Q=Q+Math.imul(Ie,Ke)|0,se=se+Math.imul(Ie,Ne)|0,ae=ae+Math.imul(ge,st)|0,Q=Q+Math.imul(ge,bt)|0,Q=Q+Math.imul(Ee,st)|0,se=se+Math.imul(Ee,bt)|0;var gr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(gr>>>26)|0,gr&=67108863,ae=Math.imul(ft,Ze),Q=Math.imul(ft,Je),Q=Q+Math.imul(_t,Ze)|0,se=Math.imul(_t,Je),ae=ae+Math.imul(yt,rt)|0,Q=Q+Math.imul(yt,He)|0,Q=Q+Math.imul(Tt,rt)|0,se=se+Math.imul(Tt,He)|0,ae=ae+Math.imul(St,Rt)|0,Q=Q+Math.imul(St,De)|0,Q=Q+Math.imul(vt,Rt)|0,se=se+Math.imul(vt,De)|0,ae=ae+Math.imul(dt,Ve)|0,Q=Q+Math.imul(dt,qe)|0,Q=Q+Math.imul(mt,Ve)|0,se=se+Math.imul(mt,qe)|0,ae=ae+Math.imul(Oe,At)|0,Q=Q+Math.imul(Oe,jt)|0,Q=Q+Math.imul(et,At)|0,se=se+Math.imul(et,jt)|0,ae=ae+Math.imul(xe,Ke)|0,Q=Q+Math.imul(xe,Ne)|0,Q=Q+Math.imul(Fe,Ke)|0,se=se+Math.imul(Fe,Ne)|0,ae=ae+Math.imul(Se,st)|0,Q=Q+Math.imul(Se,bt)|0,Q=Q+Math.imul(Ie,st)|0,se=se+Math.imul(Ie,bt)|0,ae=ae+Math.imul(ge,Re)|0,Q=Q+Math.imul(ge,Pe)|0,Q=Q+Math.imul(Ee,Re)|0,se=se+Math.imul(Ee,Pe)|0;var xr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(xr>>>26)|0,xr&=67108863,ae=Math.imul(Nt,Ze),Q=Math.imul(Nt,Je),Q=Q+Math.imul(qt,Ze)|0,se=Math.imul(qt,Je),ae=ae+Math.imul(ft,rt)|0,Q=Q+Math.imul(ft,He)|0,Q=Q+Math.imul(_t,rt)|0,se=se+Math.imul(_t,He)|0,ae=ae+Math.imul(yt,Rt)|0,Q=Q+Math.imul(yt,De)|0,Q=Q+Math.imul(Tt,Rt)|0,se=se+Math.imul(Tt,De)|0,ae=ae+Math.imul(St,Ve)|0,Q=Q+Math.imul(St,qe)|0,Q=Q+Math.imul(vt,Ve)|0,se=se+Math.imul(vt,qe)|0,ae=ae+Math.imul(dt,At)|0,Q=Q+Math.imul(dt,jt)|0,Q=Q+Math.imul(mt,At)|0,se=se+Math.imul(mt,jt)|0,ae=ae+Math.imul(Oe,Ke)|0,Q=Q+Math.imul(Oe,Ne)|0,Q=Q+Math.imul(et,Ke)|0,se=se+Math.imul(et,Ne)|0,ae=ae+Math.imul(xe,st)|0,Q=Q+Math.imul(xe,bt)|0,Q=Q+Math.imul(Fe,st)|0,se=se+Math.imul(Fe,bt)|0,ae=ae+Math.imul(Se,Re)|0,Q=Q+Math.imul(Se,Pe)|0,Q=Q+Math.imul(Ie,Re)|0,se=se+Math.imul(Ie,Pe)|0,ae=ae+Math.imul(ge,$e)|0,Q=Q+Math.imul(ge,it)|0,Q=Q+Math.imul(Ee,$e)|0,se=se+Math.imul(Ee,it)|0;var vr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(vr>>>26)|0,vr&=67108863,ae=Math.imul(ze,Ze),Q=Math.imul(ze,Je),Q=Q+Math.imul(Ce,Ze)|0,se=Math.imul(Ce,Je),ae=ae+Math.imul(Nt,rt)|0,Q=Q+Math.imul(Nt,He)|0,Q=Q+Math.imul(qt,rt)|0,se=se+Math.imul(qt,He)|0,ae=ae+Math.imul(ft,Rt)|0,Q=Q+Math.imul(ft,De)|0,Q=Q+Math.imul(_t,Rt)|0,se=se+Math.imul(_t,De)|0,ae=ae+Math.imul(yt,Ve)|0,Q=Q+Math.imul(yt,qe)|0,Q=Q+Math.imul(Tt,Ve)|0,se=se+Math.imul(Tt,qe)|0,ae=ae+Math.imul(St,At)|0,Q=Q+Math.imul(St,jt)|0,Q=Q+Math.imul(vt,At)|0,se=se+Math.imul(vt,jt)|0,ae=ae+Math.imul(dt,Ke)|0,Q=Q+Math.imul(dt,Ne)|0,Q=Q+Math.imul(mt,Ke)|0,se=se+Math.imul(mt,Ne)|0,ae=ae+Math.imul(Oe,st)|0,Q=Q+Math.imul(Oe,bt)|0,Q=Q+Math.imul(et,st)|0,se=se+Math.imul(et,bt)|0,ae=ae+Math.imul(xe,Re)|0,Q=Q+Math.imul(xe,Pe)|0,Q=Q+Math.imul(Fe,Re)|0,se=se+Math.imul(Fe,Pe)|0,ae=ae+Math.imul(Se,$e)|0,Q=Q+Math.imul(Se,it)|0,Q=Q+Math.imul(Ie,$e)|0,se=se+Math.imul(Ie,it)|0,ae=ae+Math.imul(ge,xt)|0,Q=Q+Math.imul(ge,Ot)|0,Q=Q+Math.imul(Ee,xt)|0,se=se+Math.imul(Ee,Ot)|0;var Cr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,ae=Math.imul(ze,rt),Q=Math.imul(ze,He),Q=Q+Math.imul(Ce,rt)|0,se=Math.imul(Ce,He),ae=ae+Math.imul(Nt,Rt)|0,Q=Q+Math.imul(Nt,De)|0,Q=Q+Math.imul(qt,Rt)|0,se=se+Math.imul(qt,De)|0,ae=ae+Math.imul(ft,Ve)|0,Q=Q+Math.imul(ft,qe)|0,Q=Q+Math.imul(_t,Ve)|0,se=se+Math.imul(_t,qe)|0,ae=ae+Math.imul(yt,At)|0,Q=Q+Math.imul(yt,jt)|0,Q=Q+Math.imul(Tt,At)|0,se=se+Math.imul(Tt,jt)|0,ae=ae+Math.imul(St,Ke)|0,Q=Q+Math.imul(St,Ne)|0,Q=Q+Math.imul(vt,Ke)|0,se=se+Math.imul(vt,Ne)|0,ae=ae+Math.imul(dt,st)|0,Q=Q+Math.imul(dt,bt)|0,Q=Q+Math.imul(mt,st)|0,se=se+Math.imul(mt,bt)|0,ae=ae+Math.imul(Oe,Re)|0,Q=Q+Math.imul(Oe,Pe)|0,Q=Q+Math.imul(et,Re)|0,se=se+Math.imul(et,Pe)|0,ae=ae+Math.imul(xe,$e)|0,Q=Q+Math.imul(xe,it)|0,Q=Q+Math.imul(Fe,$e)|0,se=se+Math.imul(Fe,it)|0,ae=ae+Math.imul(Se,xt)|0,Q=Q+Math.imul(Se,Ot)|0,Q=Q+Math.imul(Ie,xt)|0,se=se+Math.imul(Ie,Ot)|0;var Sr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(Sr>>>26)|0,Sr&=67108863,ae=Math.imul(ze,Rt),Q=Math.imul(ze,De),Q=Q+Math.imul(Ce,Rt)|0,se=Math.imul(Ce,De),ae=ae+Math.imul(Nt,Ve)|0,Q=Q+Math.imul(Nt,qe)|0,Q=Q+Math.imul(qt,Ve)|0,se=se+Math.imul(qt,qe)|0,ae=ae+Math.imul(ft,At)|0,Q=Q+Math.imul(ft,jt)|0,Q=Q+Math.imul(_t,At)|0,se=se+Math.imul(_t,jt)|0,ae=ae+Math.imul(yt,Ke)|0,Q=Q+Math.imul(yt,Ne)|0,Q=Q+Math.imul(Tt,Ke)|0,se=se+Math.imul(Tt,Ne)|0,ae=ae+Math.imul(St,st)|0,Q=Q+Math.imul(St,bt)|0,Q=Q+Math.imul(vt,st)|0,se=se+Math.imul(vt,bt)|0,ae=ae+Math.imul(dt,Re)|0,Q=Q+Math.imul(dt,Pe)|0,Q=Q+Math.imul(mt,Re)|0,se=se+Math.imul(mt,Pe)|0,ae=ae+Math.imul(Oe,$e)|0,Q=Q+Math.imul(Oe,it)|0,Q=Q+Math.imul(et,$e)|0,se=se+Math.imul(et,it)|0,ae=ae+Math.imul(xe,xt)|0,Q=Q+Math.imul(xe,Ot)|0,Q=Q+Math.imul(Fe,xt)|0,se=se+Math.imul(Fe,Ot)|0;var dr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(dr>>>26)|0,dr&=67108863,ae=Math.imul(ze,Ve),Q=Math.imul(ze,qe),Q=Q+Math.imul(Ce,Ve)|0,se=Math.imul(Ce,qe),ae=ae+Math.imul(Nt,At)|0,Q=Q+Math.imul(Nt,jt)|0,Q=Q+Math.imul(qt,At)|0,se=se+Math.imul(qt,jt)|0,ae=ae+Math.imul(ft,Ke)|0,Q=Q+Math.imul(ft,Ne)|0,Q=Q+Math.imul(_t,Ke)|0,se=se+Math.imul(_t,Ne)|0,ae=ae+Math.imul(yt,st)|0,Q=Q+Math.imul(yt,bt)|0,Q=Q+Math.imul(Tt,st)|0,se=se+Math.imul(Tt,bt)|0,ae=ae+Math.imul(St,Re)|0,Q=Q+Math.imul(St,Pe)|0,Q=Q+Math.imul(vt,Re)|0,se=se+Math.imul(vt,Pe)|0,ae=ae+Math.imul(dt,$e)|0,Q=Q+Math.imul(dt,it)|0,Q=Q+Math.imul(mt,$e)|0,se=se+Math.imul(mt,it)|0,ae=ae+Math.imul(Oe,xt)|0,Q=Q+Math.imul(Oe,Ot)|0,Q=Q+Math.imul(et,xt)|0,se=se+Math.imul(et,Ot)|0;var wr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(wr>>>26)|0,wr&=67108863,ae=Math.imul(ze,At),Q=Math.imul(ze,jt),Q=Q+Math.imul(Ce,At)|0,se=Math.imul(Ce,jt),ae=ae+Math.imul(Nt,Ke)|0,Q=Q+Math.imul(Nt,Ne)|0,Q=Q+Math.imul(qt,Ke)|0,se=se+Math.imul(qt,Ne)|0,ae=ae+Math.imul(ft,st)|0,Q=Q+Math.imul(ft,bt)|0,Q=Q+Math.imul(_t,st)|0,se=se+Math.imul(_t,bt)|0,ae=ae+Math.imul(yt,Re)|0,Q=Q+Math.imul(yt,Pe)|0,Q=Q+Math.imul(Tt,Re)|0,se=se+Math.imul(Tt,Pe)|0,ae=ae+Math.imul(St,$e)|0,Q=Q+Math.imul(St,it)|0,Q=Q+Math.imul(vt,$e)|0,se=se+Math.imul(vt,it)|0,ae=ae+Math.imul(dt,xt)|0,Q=Q+Math.imul(dt,Ot)|0,Q=Q+Math.imul(mt,xt)|0,se=se+Math.imul(mt,Ot)|0;var fr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(fr>>>26)|0,fr&=67108863,ae=Math.imul(ze,Ke),Q=Math.imul(ze,Ne),Q=Q+Math.imul(Ce,Ke)|0,se=Math.imul(Ce,Ne),ae=ae+Math.imul(Nt,st)|0,Q=Q+Math.imul(Nt,bt)|0,Q=Q+Math.imul(qt,st)|0,se=se+Math.imul(qt,bt)|0,ae=ae+Math.imul(ft,Re)|0,Q=Q+Math.imul(ft,Pe)|0,Q=Q+Math.imul(_t,Re)|0,se=se+Math.imul(_t,Pe)|0,ae=ae+Math.imul(yt,$e)|0,Q=Q+Math.imul(yt,it)|0,Q=Q+Math.imul(Tt,$e)|0,se=se+Math.imul(Tt,it)|0,ae=ae+Math.imul(St,xt)|0,Q=Q+Math.imul(St,Ot)|0,Q=Q+Math.imul(vt,xt)|0,se=se+Math.imul(vt,Ot)|0;var hr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(hr>>>26)|0,hr&=67108863,ae=Math.imul(ze,st),Q=Math.imul(ze,bt),Q=Q+Math.imul(Ce,st)|0,se=Math.imul(Ce,bt),ae=ae+Math.imul(Nt,Re)|0,Q=Q+Math.imul(Nt,Pe)|0,Q=Q+Math.imul(qt,Re)|0,se=se+Math.imul(qt,Pe)|0,ae=ae+Math.imul(ft,$e)|0,Q=Q+Math.imul(ft,it)|0,Q=Q+Math.imul(_t,$e)|0,se=se+Math.imul(_t,it)|0,ae=ae+Math.imul(yt,xt)|0,Q=Q+Math.imul(yt,Ot)|0,Q=Q+Math.imul(Tt,xt)|0,se=se+Math.imul(Tt,Ot)|0;var Ar=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,ae=Math.imul(ze,Re),Q=Math.imul(ze,Pe),Q=Q+Math.imul(Ce,Re)|0,se=Math.imul(Ce,Pe),ae=ae+Math.imul(Nt,$e)|0,Q=Q+Math.imul(Nt,it)|0,Q=Q+Math.imul(qt,$e)|0,se=se+Math.imul(qt,it)|0,ae=ae+Math.imul(ft,xt)|0,Q=Q+Math.imul(ft,Ot)|0,Q=Q+Math.imul(_t,xt)|0,se=se+Math.imul(_t,Ot)|0;var ur=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(ur>>>26)|0,ur&=67108863,ae=Math.imul(ze,$e),Q=Math.imul(ze,it),Q=Q+Math.imul(Ce,$e)|0,se=Math.imul(Ce,it),ae=ae+Math.imul(Nt,xt)|0,Q=Q+Math.imul(Nt,Ot)|0,Q=Q+Math.imul(qt,xt)|0,se=se+Math.imul(qt,Ot)|0;var zt=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(zt>>>26)|0,zt&=67108863,ae=Math.imul(ze,xt),Q=Math.imul(ze,Ot),Q=Q+Math.imul(Ce,xt)|0,se=Math.imul(Ce,Ot);var Kt=(he+ae|0)+((Q&8191)<<13)|0;return he=(se+(Q>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,le[0]=Jt,le[1]=tr,le[2]=br,le[3]=ar,le[4]=_r,le[5]=or,le[6]=gr,le[7]=xr,le[8]=vr,le[9]=Cr,le[10]=Sr,le[11]=dr,le[12]=wr,le[13]=fr,le[14]=hr,le[15]=Ar,le[16]=ur,le[17]=zt,le[18]=Kt,he!==0&&(le[19]=he,Y.length++),Y};Math.imul||(ee=J);function ie(ue,O,z){z.negative=O.negative^ue.negative,z.length=ue.length+O.length;for(var Y=0,te=0,oe=0;oe<z.length-1;oe++){var le=te;te=0;for(var he=Y&67108863,ae=Math.min(oe,O.length-1),Q=Math.max(0,oe-ue.length+1);Q<=ae;Q++){var se=oe-Q,Ae=ue.words[se]|0,ge=O.words[Q]|0,Ee=Ae*ge,ke=Ee&67108863;le=le+(Ee/67108864|0)|0,ke=ke+he|0,he=ke&67108863,le=le+(ke>>>26)|0,te+=le>>>26,le&=67108863}z.words[oe]=he,Y=le,le=te}return Y!==0?z.words[oe]=Y:z.length--,z.strip()}function ne(ue,O,z){var Y=new ce;return Y.mulp(ue,O,z)}T.prototype.mulTo=function(O,z){var Y,te=this.length+O.length;return this.length===10&&O.length===10?Y=ee(this,O,z):te<63?Y=J(this,O,z):te<1024?Y=ie(this,O,z):Y=ne(this,O,z),Y};function ce(ue,O){this.x=ue,this.y=O}ce.prototype.makeRBT=function(O){for(var z=new Array(O),Y=T.prototype._countBits(O)-1,te=0;te<O;te++)z[te]=this.revBin(te,Y,O);return z},ce.prototype.revBin=function(O,z,Y){if(O===0||O===Y-1)return O;for(var te=0,oe=0;oe<z;oe++)te|=(O&1)<<z-oe-1,O>>=1;return te},ce.prototype.permute=function(O,z,Y,te,oe,le){for(var he=0;he<le;he++)te[he]=z[O[he]],oe[he]=Y[O[he]]},ce.prototype.transform=function(O,z,Y,te,oe,le){this.permute(le,O,z,Y,te,oe);for(var he=1;he<oe;he<<=1)for(var ae=he<<1,Q=Math.cos(2*Math.PI/ae),se=Math.sin(2*Math.PI/ae),Ae=0;Ae<oe;Ae+=ae)for(var ge=Q,Ee=se,ke=0;ke<he;ke++){var Se=Y[Ae+ke],Ie=te[Ae+ke],we=Y[Ae+ke+he],xe=te[Ae+ke+he],Fe=ge*we-Ee*xe;xe=ge*xe+Ee*we,we=Fe,Y[Ae+ke]=Se+we,te[Ae+ke]=Ie+xe,Y[Ae+ke+he]=Se-we,te[Ae+ke+he]=Ie-xe,ke!==ae&&(Fe=Q*ge-se*Ee,Ee=Q*Ee+se*ge,ge=Fe)}},ce.prototype.guessLen13b=function(O,z){var Y=Math.max(z,O)|1,te=Y&1,oe=0;for(Y=Y/2|0;Y;Y=Y>>>1)oe++;return 1<<oe+1+te},ce.prototype.conjugate=function(O,z,Y){if(!(Y<=1))for(var te=0;te<Y/2;te++){var oe=O[te];O[te]=O[Y-te-1],O[Y-te-1]=oe,oe=z[te],z[te]=-z[Y-te-1],z[Y-te-1]=-oe}},ce.prototype.normalize13b=function(O,z){for(var Y=0,te=0;te<z/2;te++){var oe=Math.round(O[2*te+1]/z)*8192+Math.round(O[2*te]/z)+Y;O[te]=oe&67108863,oe<67108864?Y=0:Y=oe/67108864|0}return O},ce.prototype.convert13b=function(O,z,Y,te){for(var oe=0,le=0;le<z;le++)oe=oe+(O[le]|0),Y[2*le]=oe&8191,oe=oe>>>13,Y[2*le+1]=oe&8191,oe=oe>>>13;for(le=2*z;le<te;++le)Y[le]=0;I(oe===0),I((oe&-8192)===0)},ce.prototype.stub=function(O){for(var z=new Array(O),Y=0;Y<O;Y++)z[Y]=0;return z},ce.prototype.mulp=function(O,z,Y){var te=2*this.guessLen13b(O.length,z.length),oe=this.makeRBT(te),le=this.stub(te),he=new Array(te),ae=new Array(te),Q=new Array(te),se=new Array(te),Ae=new Array(te),ge=new Array(te),Ee=Y.words;Ee.length=te,this.convert13b(O.words,O.length,he,te),this.convert13b(z.words,z.length,se,te),this.transform(he,le,ae,Q,te,oe),this.transform(se,le,Ae,ge,te,oe);for(var ke=0;ke<te;ke++){var Se=ae[ke]*Ae[ke]-Q[ke]*ge[ke];Q[ke]=ae[ke]*ge[ke]+Q[ke]*Ae[ke],ae[ke]=Se}return this.conjugate(ae,Q,te),this.transform(ae,Q,Ee,le,te,oe),this.conjugate(Ee,le,te),this.normalize13b(Ee,te),Y.negative=O.negative^z.negative,Y.length=O.length+z.length,Y.strip()},T.prototype.mul=function(O){var z=new T(null);return z.words=new Array(this.length+O.length),this.mulTo(O,z)},T.prototype.mulf=function(O){var z=new T(null);return z.words=new Array(this.length+O.length),ne(this,O,z)},T.prototype.imul=function(O){return this.clone().mulTo(O,this)},T.prototype.imuln=function(O){I(typeof O=="number"),I(O<67108864);for(var z=0,Y=0;Y<this.length;Y++){var te=(this.words[Y]|0)*O,oe=(te&67108863)+(z&67108863);z>>=26,z+=te/67108864|0,z+=oe>>>26,this.words[Y]=oe&67108863}return z!==0&&(this.words[Y]=z,this.length++),this.length=O===0?1:this.length,this},T.prototype.muln=function(O){return this.clone().imuln(O)},T.prototype.sqr=function(){return this.mul(this)},T.prototype.isqr=function(){return this.imul(this.clone())},T.prototype.pow=function(O){var z=K(O);if(z.length===0)return new T(1);for(var Y=this,te=0;te<z.length&&z[te]===0;te++,Y=Y.sqr());if(++te<z.length)for(var oe=Y.sqr();te<z.length;te++,oe=oe.sqr())z[te]!==0&&(Y=Y.mul(oe));return Y},T.prototype.iushln=function(O){I(typeof O=="number"&&O>=0);var z=O%26,Y=(O-z)/26,te=67108863>>>26-z<<26-z,oe;if(z!==0){var le=0;for(oe=0;oe<this.length;oe++){var he=this.words[oe]&te,ae=(this.words[oe]|0)-he<<z;this.words[oe]=ae|le,le=he>>>26-z}le&&(this.words[oe]=le,this.length++)}if(Y!==0){for(oe=this.length-1;oe>=0;oe--)this.words[oe+Y]=this.words[oe];for(oe=0;oe<Y;oe++)this.words[oe]=0;this.length+=Y}return this.strip()},T.prototype.ishln=function(O){return I(this.negative===0),this.iushln(O)},T.prototype.iushrn=function(O,z,Y){I(typeof O=="number"&&O>=0);var te;z?te=(z-z%26)/26:te=0;var oe=O%26,le=Math.min((O-oe)/26,this.length),he=67108863^67108863>>>oe<<oe,ae=Y;if(te-=le,te=Math.max(0,te),ae){for(var Q=0;Q<le;Q++)ae.words[Q]=this.words[Q];ae.length=le}if(le!==0)if(this.length>le)for(this.length-=le,Q=0;Q<this.length;Q++)this.words[Q]=this.words[Q+le];else this.words[0]=0,this.length=1;var se=0;for(Q=this.length-1;Q>=0&&(se!==0||Q>=te);Q--){var Ae=this.words[Q]|0;this.words[Q]=se<<26-oe|Ae>>>oe,se=Ae&he}return ae&&se!==0&&(ae.words[ae.length++]=se),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},T.prototype.ishrn=function(O,z,Y){return I(this.negative===0),this.iushrn(O,z,Y)},T.prototype.shln=function(O){return this.clone().ishln(O)},T.prototype.ushln=function(O){return this.clone().iushln(O)},T.prototype.shrn=function(O){return this.clone().ishrn(O)},T.prototype.ushrn=function(O){return this.clone().iushrn(O)},T.prototype.testn=function(O){I(typeof O=="number"&&O>=0);var z=O%26,Y=(O-z)/26,te=1<<z;if(this.length<=Y)return!1;var oe=this.words[Y];return!!(oe&te)},T.prototype.imaskn=function(O){I(typeof O=="number"&&O>=0);var z=O%26,Y=(O-z)/26;if(I(this.negative===0,"imaskn works only with positive numbers"),this.length<=Y)return this;if(z!==0&&Y++,this.length=Math.min(Y,this.length),z!==0){var te=67108863^67108863>>>z<<z;this.words[this.length-1]&=te}return this.strip()},T.prototype.maskn=function(O){return this.clone().imaskn(O)},T.prototype.iaddn=function(O){return I(typeof O=="number"),I(O<67108864),O<0?this.isubn(-O):this.negative!==0?this.length===1&&(this.words[0]|0)<O?(this.words[0]=O-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(O),this.negative=1,this):this._iaddn(O)},T.prototype._iaddn=function(O){this.words[0]+=O;for(var z=0;z<this.length&&this.words[z]>=67108864;z++)this.words[z]-=67108864,z===this.length-1?this.words[z+1]=1:this.words[z+1]++;return this.length=Math.max(this.length,z+1),this},T.prototype.isubn=function(O){if(I(typeof O=="number"),I(O<67108864),O<0)return this.iaddn(-O);if(this.negative!==0)return this.negative=0,this.iaddn(O),this.negative=1,this;if(this.words[0]-=O,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var z=0;z<this.length&&this.words[z]<0;z++)this.words[z]+=67108864,this.words[z+1]-=1;return this.strip()},T.prototype.addn=function(O){return this.clone().iaddn(O)},T.prototype.subn=function(O){return this.clone().isubn(O)},T.prototype.iabs=function(){return this.negative=0,this},T.prototype.abs=function(){return this.clone().iabs()},T.prototype._ishlnsubmul=function(O,z,Y){var te=O.length+Y,oe;this._expand(te);var le,he=0;for(oe=0;oe<O.length;oe++){le=(this.words[oe+Y]|0)+he;var ae=(O.words[oe]|0)*z;le-=ae&67108863,he=(le>>26)-(ae/67108864|0),this.words[oe+Y]=le&67108863}for(;oe<this.length-Y;oe++)le=(this.words[oe+Y]|0)+he,he=le>>26,this.words[oe+Y]=le&67108863;if(he===0)return this.strip();for(I(he===-1),he=0,oe=0;oe<this.length;oe++)le=-(this.words[oe]|0)+he,he=le>>26,this.words[oe]=le&67108863;return this.negative=1,this.strip()},T.prototype._wordDiv=function(O,z){var Y=this.length-O.length,te=this.clone(),oe=O,le=oe.words[oe.length-1]|0,he=this._countBits(le);Y=26-he,Y!==0&&(oe=oe.ushln(Y),te.iushln(Y),le=oe.words[oe.length-1]|0);var ae=te.length-oe.length,Q;if(z!=="mod"){Q=new T(null),Q.length=ae+1,Q.words=new Array(Q.length);for(var se=0;se<Q.length;se++)Q.words[se]=0}var Ae=te.clone()._ishlnsubmul(oe,1,ae);Ae.negative===0&&(te=Ae,Q&&(Q.words[ae]=1));for(var ge=ae-1;ge>=0;ge--){var Ee=(te.words[oe.length+ge]|0)*67108864+(te.words[oe.length+ge-1]|0);for(Ee=Math.min(Ee/le|0,67108863),te._ishlnsubmul(oe,Ee,ge);te.negative!==0;)Ee--,te.negative=0,te._ishlnsubmul(oe,1,ge),te.isZero()||(te.negative^=1);Q&&(Q.words[ge]=Ee)}return Q&&Q.strip(),te.strip(),z!=="div"&&Y!==0&&te.iushrn(Y),{div:Q||null,mod:te}},T.prototype.divmod=function(O,z,Y){if(I(!O.isZero()),this.isZero())return{div:new T(0),mod:new T(0)};var te,oe,le;return this.negative!==0&&O.negative===0?(le=this.neg().divmod(O,z),z!=="mod"&&(te=le.div.neg()),z!=="div"&&(oe=le.mod.neg(),Y&&oe.negative!==0&&oe.iadd(O)),{div:te,mod:oe}):this.negative===0&&O.negative!==0?(le=this.divmod(O.neg(),z),z!=="mod"&&(te=le.div.neg()),{div:te,mod:le.mod}):(this.negative&O.negative)!==0?(le=this.neg().divmod(O.neg(),z),z!=="div"&&(oe=le.mod.neg(),Y&&oe.negative!==0&&oe.isub(O)),{div:le.div,mod:oe}):O.length>this.length||this.cmp(O)<0?{div:new T(0),mod:this}:O.length===1?z==="div"?{div:this.divn(O.words[0]),mod:null}:z==="mod"?{div:null,mod:new T(this.modn(O.words[0]))}:{div:this.divn(O.words[0]),mod:new T(this.modn(O.words[0]))}:this._wordDiv(O,z)},T.prototype.div=function(O){return this.divmod(O,"div",!1).div},T.prototype.mod=function(O){return this.divmod(O,"mod",!1).mod},T.prototype.umod=function(O){return this.divmod(O,"mod",!0).mod},T.prototype.divRound=function(O){var z=this.divmod(O);if(z.mod.isZero())return z.div;var Y=z.div.negative!==0?z.mod.isub(O):z.mod,te=O.ushrn(1),oe=O.andln(1),le=Y.cmp(te);return le<0||oe===1&&le===0?z.div:z.div.negative!==0?z.div.isubn(1):z.div.iaddn(1)},T.prototype.modn=function(O){I(O<=67108863);for(var z=(1<<26)%O,Y=0,te=this.length-1;te>=0;te--)Y=(z*Y+(this.words[te]|0))%O;return Y},T.prototype.idivn=function(O){I(O<=67108863);for(var z=0,Y=this.length-1;Y>=0;Y--){var te=(this.words[Y]|0)+z*67108864;this.words[Y]=te/O|0,z=te%O}return this.strip()},T.prototype.divn=function(O){return this.clone().idivn(O)},T.prototype.egcd=function(O){I(O.negative===0),I(!O.isZero());var z=this,Y=O.clone();z.negative!==0?z=z.umod(O):z=z.clone();for(var te=new T(1),oe=new T(0),le=new T(0),he=new T(1),ae=0;z.isEven()&&Y.isEven();)z.iushrn(1),Y.iushrn(1),++ae;for(var Q=Y.clone(),se=z.clone();!z.isZero();){for(var Ae=0,ge=1;(z.words[0]&ge)===0&&Ae<26;++Ae,ge<<=1);if(Ae>0)for(z.iushrn(Ae);Ae-- >0;)(te.isOdd()||oe.isOdd())&&(te.iadd(Q),oe.isub(se)),te.iushrn(1),oe.iushrn(1);for(var Ee=0,ke=1;(Y.words[0]&ke)===0&&Ee<26;++Ee,ke<<=1);if(Ee>0)for(Y.iushrn(Ee);Ee-- >0;)(le.isOdd()||he.isOdd())&&(le.iadd(Q),he.isub(se)),le.iushrn(1),he.iushrn(1);z.cmp(Y)>=0?(z.isub(Y),te.isub(le),oe.isub(he)):(Y.isub(z),le.isub(te),he.isub(oe))}return{a:le,b:he,gcd:Y.iushln(ae)}},T.prototype._invmp=function(O){I(O.negative===0),I(!O.isZero());var z=this,Y=O.clone();z.negative!==0?z=z.umod(O):z=z.clone();for(var te=new T(1),oe=new T(0),le=Y.clone();z.cmpn(1)>0&&Y.cmpn(1)>0;){for(var he=0,ae=1;(z.words[0]&ae)===0&&he<26;++he,ae<<=1);if(he>0)for(z.iushrn(he);he-- >0;)te.isOdd()&&te.iadd(le),te.iushrn(1);for(var Q=0,se=1;(Y.words[0]&se)===0&&Q<26;++Q,se<<=1);if(Q>0)for(Y.iushrn(Q);Q-- >0;)oe.isOdd()&&oe.iadd(le),oe.iushrn(1);z.cmp(Y)>=0?(z.isub(Y),te.isub(oe)):(Y.isub(z),oe.isub(te))}var Ae;return z.cmpn(1)===0?Ae=te:Ae=oe,Ae.cmpn(0)<0&&Ae.iadd(O),Ae},T.prototype.gcd=function(O){if(this.isZero())return O.abs();if(O.isZero())return this.abs();var z=this.clone(),Y=O.clone();z.negative=0,Y.negative=0;for(var te=0;z.isEven()&&Y.isEven();te++)z.iushrn(1),Y.iushrn(1);do{for(;z.isEven();)z.iushrn(1);for(;Y.isEven();)Y.iushrn(1);var oe=z.cmp(Y);if(oe<0){var le=z;z=Y,Y=le}else if(oe===0||Y.cmpn(1)===0)break;z.isub(Y)}while(!0);return Y.iushln(te)},T.prototype.invm=function(O){return this.egcd(O).a.umod(O)},T.prototype.isEven=function(){return(this.words[0]&1)===0},T.prototype.isOdd=function(){return(this.words[0]&1)===1},T.prototype.andln=function(O){return this.words[0]&O},T.prototype.bincn=function(O){I(typeof O=="number");var z=O%26,Y=(O-z)/26,te=1<<z;if(this.length<=Y)return this._expand(Y+1),this.words[Y]|=te,this;for(var oe=te,le=Y;oe!==0&&le<this.length;le++){var he=this.words[le]|0;he+=oe,oe=he>>>26,he&=67108863,this.words[le]=he}return oe!==0&&(this.words[le]=oe,this.length++),this},T.prototype.isZero=function(){return this.length===1&&this.words[0]===0},T.prototype.cmpn=function(O){var z=O<0;if(this.negative!==0&&!z)return-1;if(this.negative===0&&z)return 1;this.strip();var Y;if(this.length>1)Y=1;else{z&&(O=-O),I(O<=67108863,"Number is too big");var te=this.words[0]|0;Y=te===O?0:te<O?-1:1}return this.negative!==0?-Y|0:Y},T.prototype.cmp=function(O){if(this.negative!==0&&O.negative===0)return-1;if(this.negative===0&&O.negative!==0)return 1;var z=this.ucmp(O);return this.negative!==0?-z|0:z},T.prototype.ucmp=function(O){if(this.length>O.length)return 1;if(this.length<O.length)return-1;for(var z=0,Y=this.length-1;Y>=0;Y--){var te=this.words[Y]|0,oe=O.words[Y]|0;if(te!==oe){te<oe?z=-1:te>oe&&(z=1);break}}return z},T.prototype.gtn=function(O){return this.cmpn(O)===1},T.prototype.gt=function(O){return this.cmp(O)===1},T.prototype.gten=function(O){return this.cmpn(O)>=0},T.prototype.gte=function(O){return this.cmp(O)>=0},T.prototype.ltn=function(O){return this.cmpn(O)===-1},T.prototype.lt=function(O){return this.cmp(O)===-1},T.prototype.lten=function(O){return this.cmpn(O)<=0},T.prototype.lte=function(O){return this.cmp(O)<=0},T.prototype.eqn=function(O){return this.cmpn(O)===0},T.prototype.eq=function(O){return this.cmp(O)===0},T.red=function(O){return new be(O)},T.prototype.toRed=function(O){return I(!this.red,"Already a number in reduction context"),I(this.negative===0,"red works only with positives"),O.convertTo(this)._forceRed(O)},T.prototype.fromRed=function(){return I(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},T.prototype._forceRed=function(O){return this.red=O,this},T.prototype.forceRed=function(O){return I(!this.red,"Already a number in reduction context"),this._forceRed(O)},T.prototype.redAdd=function(O){return I(this.red,"redAdd works only with red numbers"),this.red.add(this,O)},T.prototype.redIAdd=function(O){return I(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,O)},T.prototype.redSub=function(O){return I(this.red,"redSub works only with red numbers"),this.red.sub(this,O)},T.prototype.redISub=function(O){return I(this.red,"redISub works only with red numbers"),this.red.isub(this,O)},T.prototype.redShl=function(O){return I(this.red,"redShl works only with red numbers"),this.red.shl(this,O)},T.prototype.redMul=function(O){return I(this.red,"redMul works only with red numbers"),this.red._verify2(this,O),this.red.mul(this,O)},T.prototype.redIMul=function(O){return I(this.red,"redMul works only with red numbers"),this.red._verify2(this,O),this.red.imul(this,O)},T.prototype.redSqr=function(){return I(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},T.prototype.redISqr=function(){return I(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},T.prototype.redSqrt=function(){return I(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},T.prototype.redInvm=function(){return I(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},T.prototype.redNeg=function(){return I(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},T.prototype.redPow=function(O){return I(this.red&&!O.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,O)};var fe={k256:null,p224:null,p192:null,p25519:null};function de(ue,O){this.name=ue,this.p=new T(O,16),this.n=this.p.bitLength(),this.k=new T(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}de.prototype._tmp=function(){var O=new T(null);return O.words=new Array(Math.ceil(this.n/13)),O},de.prototype.ireduce=function(O){var z=O,Y;do this.split(z,this.tmp),z=this.imulK(z),z=z.iadd(this.tmp),Y=z.bitLength();while(Y>this.n);var te=Y<this.n?-1:z.ucmp(this.p);return te===0?(z.words[0]=0,z.length=1):te>0?z.isub(this.p):z.strip!==void 0?z.strip():z._strip(),z},de.prototype.split=function(O,z){O.iushrn(this.n,0,z)},de.prototype.imulK=function(O){return O.imul(this.k)};function pe(){de.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}B(pe,de),pe.prototype.split=function(O,z){for(var Y=4194303,te=Math.min(O.length,9),oe=0;oe<te;oe++)z.words[oe]=O.words[oe];if(z.length=te,O.length<=9){O.words[0]=0,O.length=1;return}var le=O.words[9];for(z.words[z.length++]=le&Y,oe=10;oe<O.length;oe++){var he=O.words[oe]|0;O.words[oe-10]=(he&Y)<<4|le>>>22,le=he}le>>>=22,O.words[oe-10]=le,le===0&&O.length>10?O.length-=10:O.length-=9},pe.prototype.imulK=function(O){O.words[O.length]=0,O.words[O.length+1]=0,O.length+=2;for(var z=0,Y=0;Y<O.length;Y++){var te=O.words[Y]|0;z+=te*977,O.words[Y]=z&67108863,z=te*64+(z/67108864|0)}return O.words[O.length-1]===0&&(O.length--,O.words[O.length-1]===0&&O.length--),O};function ve(){de.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}B(ve,de);function ye(){de.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}B(ye,de);function _e(){de.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}B(_e,de),_e.prototype.imulK=function(O){for(var z=0,Y=0;Y<O.length;Y++){var te=(O.words[Y]|0)*19+z,oe=te&67108863;te>>>=26,O.words[Y]=oe,z=te}return z!==0&&(O.words[O.length++]=z),O},T._prime=function(O){if(fe[O])return fe[O];var z;if(O==="k256")z=new pe;else if(O==="p224")z=new ve;else if(O==="p192")z=new ye;else if(O==="p25519")z=new _e;else throw new Error("Unknown prime "+O);return fe[O]=z,z};function be(ue){if(typeof ue=="string"){var O=T._prime(ue);this.m=O.p,this.prime=O}else I(ue.gtn(1),"modulus must be greater than 1"),this.m=ue,this.prime=null}be.prototype._verify1=function(O){I(O.negative===0,"red works only with positives"),I(O.red,"red works only with red numbers")},be.prototype._verify2=function(O,z){I((O.negative|z.negative)===0,"red works only with positives"),I(O.red&&O.red===z.red,"red works only with red numbers")},be.prototype.imod=function(O){return this.prime?this.prime.ireduce(O)._forceRed(this):O.umod(this.m)._forceRed(this)},be.prototype.neg=function(O){return O.isZero()?O.clone():this.m.sub(O)._forceRed(this)},be.prototype.add=function(O,z){this._verify2(O,z);var Y=O.add(z);return Y.cmp(this.m)>=0&&Y.isub(this.m),Y._forceRed(this)},be.prototype.iadd=function(O,z){this._verify2(O,z);var Y=O.iadd(z);return Y.cmp(this.m)>=0&&Y.isub(this.m),Y},be.prototype.sub=function(O,z){this._verify2(O,z);var Y=O.sub(z);return Y.cmpn(0)<0&&Y.iadd(this.m),Y._forceRed(this)},be.prototype.isub=function(O,z){this._verify2(O,z);var Y=O.isub(z);return Y.cmpn(0)<0&&Y.iadd(this.m),Y},be.prototype.shl=function(O,z){return this._verify1(O),this.imod(O.ushln(z))},be.prototype.imul=function(O,z){return this._verify2(O,z),this.imod(O.imul(z))},be.prototype.mul=function(O,z){return this._verify2(O,z),this.imod(O.mul(z))},be.prototype.isqr=function(O){return this.imul(O,O.clone())},be.prototype.sqr=function(O){return this.mul(O,O)},be.prototype.sqrt=function(O){if(O.isZero())return O.clone();var z=this.m.andln(3);if(I(z%2===1),z===3){var Y=this.m.add(new T(1)).iushrn(2);return this.pow(O,Y)}for(var te=this.m.subn(1),oe=0;!te.isZero()&&te.andln(1)===0;)oe++,te.iushrn(1);I(!te.isZero());var le=new T(1).toRed(this),he=le.redNeg(),ae=this.m.subn(1).iushrn(1),Q=this.m.bitLength();for(Q=new T(2*Q*Q).toRed(this);this.pow(Q,ae).cmp(he)!==0;)Q.redIAdd(he);for(var se=this.pow(Q,te),Ae=this.pow(O,te.addn(1).iushrn(1)),ge=this.pow(O,te),Ee=oe;ge.cmp(le)!==0;){for(var ke=ge,Se=0;ke.cmp(le)!==0;Se++)ke=ke.redSqr();I(Se<Ee);var Ie=this.pow(se,new T(1).iushln(Ee-Se-1));Ae=Ae.redMul(Ie),se=Ie.redSqr(),ge=ge.redMul(se),Ee=Se}return Ae},be.prototype.invm=function(O){var z=O._invmp(this.m);return z.negative!==0?(z.negative=0,this.imod(z).redNeg()):this.imod(z)},be.prototype.pow=function(O,z){if(z.isZero())return new T(1).toRed(this);if(z.cmpn(1)===0)return O.clone();var Y=4,te=new Array(1<<Y);te[0]=new T(1).toRed(this),te[1]=O;for(var oe=2;oe<te.length;oe++)te[oe]=this.mul(te[oe-1],O);var le=te[0],he=0,ae=0,Q=z.bitLength()%26;for(Q===0&&(Q=26),oe=z.length-1;oe>=0;oe--){for(var se=z.words[oe],Ae=Q-1;Ae>=0;Ae--){var ge=se>>Ae&1;if(le!==te[0]&&(le=this.sqr(le)),ge===0&&he===0){ae=0;continue}he<<=1,he|=ge,ae++,!(ae!==Y&&(oe!==0||Ae!==0))&&(le=this.mul(le,te[he]),ae=0,he=0)}Q=26}return le},be.prototype.convertTo=function(O){var z=O.umod(this.m);return z===O?z.clone():z},be.prototype.convertFrom=function(O){var z=O.clone();return z.red=null,z},T.mont=function(O){return new Te(O)};function Te(ue){be.call(this,ue),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new T(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}B(Te,be),Te.prototype.convertTo=function(O){return this.imod(O.ushln(this.shift))},Te.prototype.convertFrom=function(O){var z=this.imod(O.mul(this.rinv));return z.red=null,z},Te.prototype.imul=function(O,z){if(O.isZero()||z.isZero())return O.words[0]=0,O.length=1,O;var Y=O.imul(z),te=Y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),oe=Y.isub(te).iushrn(this.shift),le=oe;return oe.cmp(this.m)>=0?le=oe.isub(this.m):oe.cmpn(0)<0&&(le=oe.iadd(this.m)),le._forceRed(this)},Te.prototype.mul=function(O,z){if(O.isZero()||z.isZero())return new T(0)._forceRed(this);var Y=O.mul(z),te=Y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),oe=Y.isub(te).iushrn(this.shift),le=oe;return oe.cmp(this.m)>=0?le=oe.isub(this.m):oe.cmpn(0)<0&&(le=oe.iadd(this.m)),le._forceRed(this)},Te.prototype.invm=function(O){var z=this.imod(O._invmp(this.m).mul(this.r2));return z._forceRed(this)}})(E,bn$6)})(bn$7)),bn$7.exports}var utils$4={},hasRequiredUtils$5;function requireUtils$5(){return hasRequiredUtils$5||(hasRequiredUtils$5=1,(function(E){var A=E;function _(T,R){if(Array.isArray(T))return T.slice();if(!T)return[];var P=[];if(typeof T!="string"){for(var D=0;D<T.length;D++)P[D]=T[D]|0;return P}if(R==="hex"){T=T.replace(/[^a-z0-9]+/ig,""),T.length%2!==0&&(T="0"+T);for(var D=0;D<T.length;D+=2)P.push(parseInt(T[D]+T[D+1],16))}else for(var D=0;D<T.length;D++){var F=T.charCodeAt(D),L=F>>8,U=F&255;L?P.push(L,U):P.push(U)}return P}A.toArray=_;function I(T){return T.length===1?"0"+T:T}A.zero2=I;function B(T){for(var R="",P=0;P<T.length;P++)R+=I(T[P].toString(16));return R}A.toHex=B,A.encode=function(R,P){return P==="hex"?B(R):R}})(utils$4)),utils$4}var hasRequiredUtils$4;function requireUtils$4(){return hasRequiredUtils$4||(hasRequiredUtils$4=1,(function(E){var A=E,_=requireBn$3(),I=requireMinimalisticAssert(),B=requireUtils$5();A.assert=I,A.toArray=B.toArray,A.zero2=B.zero2,A.toHex=B.toHex,A.encode=B.encode;function T(L,U,V){var K=new Array(Math.max(L.bitLength(),V)+1),J;for(J=0;J<K.length;J+=1)K[J]=0;var ee=1<<U+1,ie=L.clone();for(J=0;J<K.length;J++){var ne,ce=ie.andln(ee-1);ie.isOdd()?(ce>(ee>>1)-1?ne=(ee>>1)-ce:ne=ce,ie.isubn(ne)):ne=0,K[J]=ne,ie.iushrn(1)}return K}A.getNAF=T;function R(L,U){var V=[[],[]];L=L.clone(),U=U.clone();for(var K=0,J=0,ee;L.cmpn(-K)>0||U.cmpn(-J)>0;){var ie=L.andln(3)+K&3,ne=U.andln(3)+J&3;ie===3&&(ie=-1),ne===3&&(ne=-1);var ce;(ie&1)===0?ce=0:(ee=L.andln(7)+K&7,(ee===3||ee===5)&&ne===2?ce=-ie:ce=ie),V[0].push(ce);var fe;(ne&1)===0?fe=0:(ee=U.andln(7)+J&7,(ee===3||ee===5)&&ie===2?fe=-ne:fe=ne),V[1].push(fe),2*K===ce+1&&(K=1-K),2*J===fe+1&&(J=1-J),L.iushrn(1),U.iushrn(1)}return V}A.getJSF=R;function P(L,U,V){var K="_"+U;L.prototype[U]=function(){return this[K]!==void 0?this[K]:this[K]=V.call(this)}}A.cachedProperty=P;function D(L){return typeof L=="string"?A.toArray(L,"hex"):L}A.parseBytes=D;function F(L){return new _(L,"hex","le")}A.intFromLE=F})(utils$5)),utils$5}var curve={},base$1,hasRequiredBase$1;function requireBase$1(){if(hasRequiredBase$1)return base$1;hasRequiredBase$1=1;var E=requireBn$3(),A=requireUtils$4(),_=A.getNAF,I=A.getJSF,B=A.assert;function T(P,D){this.type=P,this.p=new E(D.p,16),this.red=D.prime?E.red(D.prime):E.mont(this.p),this.zero=new E(0).toRed(this.red),this.one=new E(1).toRed(this.red),this.two=new E(2).toRed(this.red),this.n=D.n&&new E(D.n,16),this.g=D.g&&this.pointFromJSON(D.g,D.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var F=this.n&&this.p.div(this.n);!F||F.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}base$1=T,T.prototype.point=function(){throw new Error("Not implemented")},T.prototype.validate=function(){throw new Error("Not implemented")},T.prototype._fixedNafMul=function(D,F){B(D.precomputed);var L=D._getDoubles(),U=_(F,1,this._bitLength),V=(1<<L.step+1)-(L.step%2===0?2:1);V/=3;var K=[],J,ee;for(J=0;J<U.length;J+=L.step){ee=0;for(var ie=J+L.step-1;ie>=J;ie--)ee=(ee<<1)+U[ie];K.push(ee)}for(var ne=this.jpoint(null,null,null),ce=this.jpoint(null,null,null),fe=V;fe>0;fe--){for(J=0;J<K.length;J++)ee=K[J],ee===fe?ce=ce.mixedAdd(L.points[J]):ee===-fe&&(ce=ce.mixedAdd(L.points[J].neg()));ne=ne.add(ce)}return ne.toP()},T.prototype._wnafMul=function(D,F){var L=4,U=D._getNAFPoints(L);L=U.wnd;for(var V=U.points,K=_(F,L,this._bitLength),J=this.jpoint(null,null,null),ee=K.length-1;ee>=0;ee--){for(var ie=0;ee>=0&&K[ee]===0;ee--)ie++;if(ee>=0&&ie++,J=J.dblp(ie),ee<0)break;var ne=K[ee];B(ne!==0),D.type==="affine"?ne>0?J=J.mixedAdd(V[ne-1>>1]):J=J.mixedAdd(V[-ne-1>>1].neg()):ne>0?J=J.add(V[ne-1>>1]):J=J.add(V[-ne-1>>1].neg())}return D.type==="affine"?J.toP():J},T.prototype._wnafMulAdd=function(D,F,L,U,V){var K=this._wnafT1,J=this._wnafT2,ee=this._wnafT3,ie=0,ne,ce,fe;for(ne=0;ne<U;ne++){fe=F[ne];var de=fe._getNAFPoints(D);K[ne]=de.wnd,J[ne]=de.points}for(ne=U-1;ne>=1;ne-=2){var pe=ne-1,ve=ne;if(K[pe]!==1||K[ve]!==1){ee[pe]=_(L[pe],K[pe],this._bitLength),ee[ve]=_(L[ve],K[ve],this._bitLength),ie=Math.max(ee[pe].length,ie),ie=Math.max(ee[ve].length,ie);continue}var ye=[F[pe],null,null,F[ve]];F[pe].y.cmp(F[ve].y)===0?(ye[1]=F[pe].add(F[ve]),ye[2]=F[pe].toJ().mixedAdd(F[ve].neg())):F[pe].y.cmp(F[ve].y.redNeg())===0?(ye[1]=F[pe].toJ().mixedAdd(F[ve]),ye[2]=F[pe].add(F[ve].neg())):(ye[1]=F[pe].toJ().mixedAdd(F[ve]),ye[2]=F[pe].toJ().mixedAdd(F[ve].neg()));var _e=[-3,-1,-5,-7,0,7,5,1,3],be=I(L[pe],L[ve]);for(ie=Math.max(be[0].length,ie),ee[pe]=new Array(ie),ee[ve]=new Array(ie),ce=0;ce<ie;ce++){var Te=be[0][ce]|0,ue=be[1][ce]|0;ee[pe][ce]=_e[(Te+1)*3+(ue+1)],ee[ve][ce]=0,J[pe]=ye}}var O=this.jpoint(null,null,null),z=this._wnafT4;for(ne=ie;ne>=0;ne--){for(var Y=0;ne>=0;){var te=!0;for(ce=0;ce<U;ce++)z[ce]=ee[ce][ne]|0,z[ce]!==0&&(te=!1);if(!te)break;Y++,ne--}if(ne>=0&&Y++,O=O.dblp(Y),ne<0)break;for(ce=0;ce<U;ce++){var oe=z[ce];oe!==0&&(oe>0?fe=J[ce][oe-1>>1]:oe<0&&(fe=J[ce][-oe-1>>1].neg()),fe.type==="affine"?O=O.mixedAdd(fe):O=O.add(fe))}}for(ne=0;ne<U;ne++)J[ne]=null;return V?O:O.toP()};function R(P,D){this.curve=P,this.type=D,this.precomputed=null}return T.BasePoint=R,R.prototype.eq=function(){throw new Error("Not implemented")},R.prototype.validate=function(){return this.curve.validate(this)},T.prototype.decodePoint=function(D,F){D=A.toArray(D,F);var L=this.p.byteLength();if((D[0]===4||D[0]===6||D[0]===7)&&D.length-1===2*L){D[0]===6?B(D[D.length-1]%2===0):D[0]===7&&B(D[D.length-1]%2===1);var U=this.point(D.slice(1,1+L),D.slice(1+L,1+2*L));return U}else if((D[0]===2||D[0]===3)&&D.length-1===L)return this.pointFromX(D.slice(1,1+L),D[0]===3);throw new Error("Unknown point format")},R.prototype.encodeCompressed=function(D){return this.encode(D,!0)},R.prototype._encode=function(D){var F=this.curve.p.byteLength(),L=this.getX().toArray("be",F);return D?[this.getY().isEven()?2:3].concat(L):[4].concat(L,this.getY().toArray("be",F))},R.prototype.encode=function(D,F){return A.encode(this._encode(F),D)},R.prototype.precompute=function(D){if(this.precomputed)return this;var F={doubles:null,naf:null,beta:null};return F.naf=this._getNAFPoints(8),F.doubles=this._getDoubles(4,D),F.beta=this._getBeta(),this.precomputed=F,this},R.prototype._hasDoubles=function(D){if(!this.precomputed)return!1;var F=this.precomputed.doubles;return F?F.points.length>=Math.ceil((D.bitLength()+1)/F.step):!1},R.prototype._getDoubles=function(D,F){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var L=[this],U=this,V=0;V<F;V+=D){for(var K=0;K<D;K++)U=U.dbl();L.push(U)}return{step:D,points:L}},R.prototype._getNAFPoints=function(D){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var F=[this],L=(1<<D)-1,U=L===1?null:this.dbl(),V=1;V<L;V++)F[V]=F[V-1].add(U);return{wnd:D,points:F}},R.prototype._getBeta=function(){return null},R.prototype.dblp=function(D){for(var F=this,L=0;L<D;L++)F=F.dbl();return F},base$1}var short,hasRequiredShort;function requireShort(){if(hasRequiredShort)return short;hasRequiredShort=1;var E=requireUtils$4(),A=requireBn$3(),_=requireInherits_browser(),I=requireBase$1(),B=E.assert;function T(D){I.call(this,"short",D),this.a=new A(D.a,16).toRed(this.red),this.b=new A(D.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(D),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}_(T,I),short=T,T.prototype._getEndomorphism=function(F){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var L,U;if(F.beta)L=new A(F.beta,16).toRed(this.red);else{var V=this._getEndoRoots(this.p);L=V[0].cmp(V[1])<0?V[0]:V[1],L=L.toRed(this.red)}if(F.lambda)U=new A(F.lambda,16);else{var K=this._getEndoRoots(this.n);this.g.mul(K[0]).x.cmp(this.g.x.redMul(L))===0?U=K[0]:(U=K[1],B(this.g.mul(U).x.cmp(this.g.x.redMul(L))===0))}var J;return F.basis?J=F.basis.map(function(ee){return{a:new A(ee.a,16),b:new A(ee.b,16)}}):J=this._getEndoBasis(U),{beta:L,lambda:U,basis:J}}},T.prototype._getEndoRoots=function(F){var L=F===this.p?this.red:A.mont(F),U=new A(2).toRed(L).redInvm(),V=U.redNeg(),K=new A(3).toRed(L).redNeg().redSqrt().redMul(U),J=V.redAdd(K).fromRed(),ee=V.redSub(K).fromRed();return[J,ee]},T.prototype._getEndoBasis=function(F){for(var L=this.n.ushrn(Math.floor(this.n.bitLength()/2)),U=F,V=this.n.clone(),K=new A(1),J=new A(0),ee=new A(0),ie=new A(1),ne,ce,fe,de,pe,ve,ye,_e=0,be,Te;U.cmpn(0)!==0;){var ue=V.div(U);be=V.sub(ue.mul(U)),Te=ee.sub(ue.mul(K));var O=ie.sub(ue.mul(J));if(!fe&&be.cmp(L)<0)ne=ye.neg(),ce=K,fe=be.neg(),de=Te;else if(fe&&++_e===2)break;ye=be,V=U,U=be,ee=K,K=Te,ie=J,J=O}pe=be.neg(),ve=Te;var z=fe.sqr().add(de.sqr()),Y=pe.sqr().add(ve.sqr());return Y.cmp(z)>=0&&(pe=ne,ve=ce),fe.negative&&(fe=fe.neg(),de=de.neg()),pe.negative&&(pe=pe.neg(),ve=ve.neg()),[{a:fe,b:de},{a:pe,b:ve}]},T.prototype._endoSplit=function(F){var L=this.endo.basis,U=L[0],V=L[1],K=V.b.mul(F).divRound(this.n),J=U.b.neg().mul(F).divRound(this.n),ee=K.mul(U.a),ie=J.mul(V.a),ne=K.mul(U.b),ce=J.mul(V.b),fe=F.sub(ee).sub(ie),de=ne.add(ce).neg();return{k1:fe,k2:de}},T.prototype.pointFromX=function(F,L){F=new A(F,16),F.red||(F=F.toRed(this.red));var U=F.redSqr().redMul(F).redIAdd(F.redMul(this.a)).redIAdd(this.b),V=U.redSqrt();if(V.redSqr().redSub(U).cmp(this.zero)!==0)throw new Error("invalid point");var K=V.fromRed().isOdd();return(L&&!K||!L&&K)&&(V=V.redNeg()),this.point(F,V)},T.prototype.validate=function(F){if(F.inf)return!0;var L=F.x,U=F.y,V=this.a.redMul(L),K=L.redSqr().redMul(L).redIAdd(V).redIAdd(this.b);return U.redSqr().redISub(K).cmpn(0)===0},T.prototype._endoWnafMulAdd=function(F,L,U){for(var V=this._endoWnafT1,K=this._endoWnafT2,J=0;J<F.length;J++){var ee=this._endoSplit(L[J]),ie=F[J],ne=ie._getBeta();ee.k1.negative&&(ee.k1.ineg(),ie=ie.neg(!0)),ee.k2.negative&&(ee.k2.ineg(),ne=ne.neg(!0)),V[J*2]=ie,V[J*2+1]=ne,K[J*2]=ee.k1,K[J*2+1]=ee.k2}for(var ce=this._wnafMulAdd(1,V,K,J*2,U),fe=0;fe<J*2;fe++)V[fe]=null,K[fe]=null;return ce};function R(D,F,L,U){I.BasePoint.call(this,D,"affine"),F===null&&L===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new A(F,16),this.y=new A(L,16),U&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}_(R,I.BasePoint),T.prototype.point=function(F,L,U){return new R(this,F,L,U)},T.prototype.pointFromJSON=function(F,L){return R.fromJSON(this,F,L)},R.prototype._getBeta=function(){if(this.curve.endo){var F=this.precomputed;if(F&&F.beta)return F.beta;var L=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(F){var U=this.curve,V=function(K){return U.point(K.x.redMul(U.endo.beta),K.y)};F.beta=L,L.precomputed={beta:null,naf:F.naf&&{wnd:F.naf.wnd,points:F.naf.points.map(V)},doubles:F.doubles&&{step:F.doubles.step,points:F.doubles.points.map(V)}}}return L}},R.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},R.fromJSON=function(F,L,U){typeof L=="string"&&(L=JSON.parse(L));var V=F.point(L[0],L[1],U);if(!L[2])return V;function K(ee){return F.point(ee[0],ee[1],U)}var J=L[2];return V.precomputed={beta:null,doubles:J.doubles&&{step:J.doubles.step,points:[V].concat(J.doubles.points.map(K))},naf:J.naf&&{wnd:J.naf.wnd,points:[V].concat(J.naf.points.map(K))}},V},R.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},R.prototype.isInfinity=function(){return this.inf},R.prototype.add=function(F){if(this.inf)return F;if(F.inf)return this;if(this.eq(F))return this.dbl();if(this.neg().eq(F))return this.curve.point(null,null);if(this.x.cmp(F.x)===0)return this.curve.point(null,null);var L=this.y.redSub(F.y);L.cmpn(0)!==0&&(L=L.redMul(this.x.redSub(F.x).redInvm()));var U=L.redSqr().redISub(this.x).redISub(F.x),V=L.redMul(this.x.redSub(U)).redISub(this.y);return this.curve.point(U,V)},R.prototype.dbl=function(){if(this.inf)return this;var F=this.y.redAdd(this.y);if(F.cmpn(0)===0)return this.curve.point(null,null);var L=this.curve.a,U=this.x.redSqr(),V=F.redInvm(),K=U.redAdd(U).redIAdd(U).redIAdd(L).redMul(V),J=K.redSqr().redISub(this.x.redAdd(this.x)),ee=K.redMul(this.x.redSub(J)).redISub(this.y);return this.curve.point(J,ee)},R.prototype.getX=function(){return this.x.fromRed()},R.prototype.getY=function(){return this.y.fromRed()},R.prototype.mul=function(F){return F=new A(F,16),this.isInfinity()?this:this._hasDoubles(F)?this.curve._fixedNafMul(this,F):this.curve.endo?this.curve._endoWnafMulAdd([this],[F]):this.curve._wnafMul(this,F)},R.prototype.mulAdd=function(F,L,U){var V=[this,L],K=[F,U];return this.curve.endo?this.curve._endoWnafMulAdd(V,K):this.curve._wnafMulAdd(1,V,K,2)},R.prototype.jmulAdd=function(F,L,U){var V=[this,L],K=[F,U];return this.curve.endo?this.curve._endoWnafMulAdd(V,K,!0):this.curve._wnafMulAdd(1,V,K,2,!0)},R.prototype.eq=function(F){return this===F||this.inf===F.inf&&(this.inf||this.x.cmp(F.x)===0&&this.y.cmp(F.y)===0)},R.prototype.neg=function(F){if(this.inf)return this;var L=this.curve.point(this.x,this.y.redNeg());if(F&&this.precomputed){var U=this.precomputed,V=function(K){return K.neg()};L.precomputed={naf:U.naf&&{wnd:U.naf.wnd,points:U.naf.points.map(V)},doubles:U.doubles&&{step:U.doubles.step,points:U.doubles.points.map(V)}}}return L},R.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var F=this.curve.jpoint(this.x,this.y,this.curve.one);return F};function P(D,F,L,U){I.BasePoint.call(this,D,"jacobian"),F===null&&L===null&&U===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new A(0)):(this.x=new A(F,16),this.y=new A(L,16),this.z=new A(U,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}return _(P,I.BasePoint),T.prototype.jpoint=function(F,L,U){return new P(this,F,L,U)},P.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var F=this.z.redInvm(),L=F.redSqr(),U=this.x.redMul(L),V=this.y.redMul(L).redMul(F);return this.curve.point(U,V)},P.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},P.prototype.add=function(F){if(this.isInfinity())return F;if(F.isInfinity())return this;var L=F.z.redSqr(),U=this.z.redSqr(),V=this.x.redMul(L),K=F.x.redMul(U),J=this.y.redMul(L.redMul(F.z)),ee=F.y.redMul(U.redMul(this.z)),ie=V.redSub(K),ne=J.redSub(ee);if(ie.cmpn(0)===0)return ne.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var ce=ie.redSqr(),fe=ce.redMul(ie),de=V.redMul(ce),pe=ne.redSqr().redIAdd(fe).redISub(de).redISub(de),ve=ne.redMul(de.redISub(pe)).redISub(J.redMul(fe)),ye=this.z.redMul(F.z).redMul(ie);return this.curve.jpoint(pe,ve,ye)},P.prototype.mixedAdd=function(F){if(this.isInfinity())return F.toJ();if(F.isInfinity())return this;var L=this.z.redSqr(),U=this.x,V=F.x.redMul(L),K=this.y,J=F.y.redMul(L).redMul(this.z),ee=U.redSub(V),ie=K.redSub(J);if(ee.cmpn(0)===0)return ie.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var ne=ee.redSqr(),ce=ne.redMul(ee),fe=U.redMul(ne),de=ie.redSqr().redIAdd(ce).redISub(fe).redISub(fe),pe=ie.redMul(fe.redISub(de)).redISub(K.redMul(ce)),ve=this.z.redMul(ee);return this.curve.jpoint(de,pe,ve)},P.prototype.dblp=function(F){if(F===0)return this;if(this.isInfinity())return this;if(!F)return this.dbl();var L;if(this.curve.zeroA||this.curve.threeA){var U=this;for(L=0;L<F;L++)U=U.dbl();return U}var V=this.curve.a,K=this.curve.tinv,J=this.x,ee=this.y,ie=this.z,ne=ie.redSqr().redSqr(),ce=ee.redAdd(ee);for(L=0;L<F;L++){var fe=J.redSqr(),de=ce.redSqr(),pe=de.redSqr(),ve=fe.redAdd(fe).redIAdd(fe).redIAdd(V.redMul(ne)),ye=J.redMul(de),_e=ve.redSqr().redISub(ye.redAdd(ye)),be=ye.redISub(_e),Te=ve.redMul(be);Te=Te.redIAdd(Te).redISub(pe);var ue=ce.redMul(ie);L+1<F&&(ne=ne.redMul(pe)),J=_e,ie=ue,ce=Te}return this.curve.jpoint(J,ce.redMul(K),ie)},P.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},P.prototype._zeroDbl=function(){var F,L,U;if(this.zOne){var V=this.x.redSqr(),K=this.y.redSqr(),J=K.redSqr(),ee=this.x.redAdd(K).redSqr().redISub(V).redISub(J);ee=ee.redIAdd(ee);var ie=V.redAdd(V).redIAdd(V),ne=ie.redSqr().redISub(ee).redISub(ee),ce=J.redIAdd(J);ce=ce.redIAdd(ce),ce=ce.redIAdd(ce),F=ne,L=ie.redMul(ee.redISub(ne)).redISub(ce),U=this.y.redAdd(this.y)}else{var fe=this.x.redSqr(),de=this.y.redSqr(),pe=de.redSqr(),ve=this.x.redAdd(de).redSqr().redISub(fe).redISub(pe);ve=ve.redIAdd(ve);var ye=fe.redAdd(fe).redIAdd(fe),_e=ye.redSqr(),be=pe.redIAdd(pe);be=be.redIAdd(be),be=be.redIAdd(be),F=_e.redISub(ve).redISub(ve),L=ye.redMul(ve.redISub(F)).redISub(be),U=this.y.redMul(this.z),U=U.redIAdd(U)}return this.curve.jpoint(F,L,U)},P.prototype._threeDbl=function(){var F,L,U;if(this.zOne){var V=this.x.redSqr(),K=this.y.redSqr(),J=K.redSqr(),ee=this.x.redAdd(K).redSqr().redISub(V).redISub(J);ee=ee.redIAdd(ee);var ie=V.redAdd(V).redIAdd(V).redIAdd(this.curve.a),ne=ie.redSqr().redISub(ee).redISub(ee);F=ne;var ce=J.redIAdd(J);ce=ce.redIAdd(ce),ce=ce.redIAdd(ce),L=ie.redMul(ee.redISub(ne)).redISub(ce),U=this.y.redAdd(this.y)}else{var fe=this.z.redSqr(),de=this.y.redSqr(),pe=this.x.redMul(de),ve=this.x.redSub(fe).redMul(this.x.redAdd(fe));ve=ve.redAdd(ve).redIAdd(ve);var ye=pe.redIAdd(pe);ye=ye.redIAdd(ye);var _e=ye.redAdd(ye);F=ve.redSqr().redISub(_e),U=this.y.redAdd(this.z).redSqr().redISub(de).redISub(fe);var be=de.redSqr();be=be.redIAdd(be),be=be.redIAdd(be),be=be.redIAdd(be),L=ve.redMul(ye.redISub(F)).redISub(be)}return this.curve.jpoint(F,L,U)},P.prototype._dbl=function(){var F=this.curve.a,L=this.x,U=this.y,V=this.z,K=V.redSqr().redSqr(),J=L.redSqr(),ee=U.redSqr(),ie=J.redAdd(J).redIAdd(J).redIAdd(F.redMul(K)),ne=L.redAdd(L);ne=ne.redIAdd(ne);var ce=ne.redMul(ee),fe=ie.redSqr().redISub(ce.redAdd(ce)),de=ce.redISub(fe),pe=ee.redSqr();pe=pe.redIAdd(pe),pe=pe.redIAdd(pe),pe=pe.redIAdd(pe);var ve=ie.redMul(de).redISub(pe),ye=U.redAdd(U).redMul(V);return this.curve.jpoint(fe,ve,ye)},P.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var F=this.x.redSqr(),L=this.y.redSqr(),U=this.z.redSqr(),V=L.redSqr(),K=F.redAdd(F).redIAdd(F),J=K.redSqr(),ee=this.x.redAdd(L).redSqr().redISub(F).redISub(V);ee=ee.redIAdd(ee),ee=ee.redAdd(ee).redIAdd(ee),ee=ee.redISub(J);var ie=ee.redSqr(),ne=V.redIAdd(V);ne=ne.redIAdd(ne),ne=ne.redIAdd(ne),ne=ne.redIAdd(ne);var ce=K.redIAdd(ee).redSqr().redISub(J).redISub(ie).redISub(ne),fe=L.redMul(ce);fe=fe.redIAdd(fe),fe=fe.redIAdd(fe);var de=this.x.redMul(ie).redISub(fe);de=de.redIAdd(de),de=de.redIAdd(de);var pe=this.y.redMul(ce.redMul(ne.redISub(ce)).redISub(ee.redMul(ie)));pe=pe.redIAdd(pe),pe=pe.redIAdd(pe),pe=pe.redIAdd(pe);var ve=this.z.redAdd(ee).redSqr().redISub(U).redISub(ie);return this.curve.jpoint(de,pe,ve)},P.prototype.mul=function(F,L){return F=new A(F,L),this.curve._wnafMul(this,F)},P.prototype.eq=function(F){if(F.type==="affine")return this.eq(F.toJ());if(this===F)return!0;var L=this.z.redSqr(),U=F.z.redSqr();if(this.x.redMul(U).redISub(F.x.redMul(L)).cmpn(0)!==0)return!1;var V=L.redMul(this.z),K=U.redMul(F.z);return this.y.redMul(K).redISub(F.y.redMul(V)).cmpn(0)===0},P.prototype.eqXToP=function(F){var L=this.z.redSqr(),U=F.toRed(this.curve.red).redMul(L);if(this.x.cmp(U)===0)return!0;for(var V=F.clone(),K=this.curve.redN.redMul(L);;){if(V.iadd(this.curve.n),V.cmp(this.curve.p)>=0)return!1;if(U.redIAdd(K),this.x.cmp(U)===0)return!0}},P.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},P.prototype.isInfinity=function(){return this.z.cmpn(0)===0},short}var mont,hasRequiredMont;function requireMont(){if(hasRequiredMont)return mont;hasRequiredMont=1;var E=requireBn$3(),A=requireInherits_browser(),_=requireBase$1(),I=requireUtils$4();function B(R){_.call(this,"mont",R),this.a=new E(R.a,16).toRed(this.red),this.b=new E(R.b,16).toRed(this.red),this.i4=new E(4).toRed(this.red).redInvm(),this.two=new E(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}A(B,_),mont=B,B.prototype.validate=function(P){var D=P.normalize().x,F=D.redSqr(),L=F.redMul(D).redAdd(F.redMul(this.a)).redAdd(D),U=L.redSqrt();return U.redSqr().cmp(L)===0};function T(R,P,D){_.BasePoint.call(this,R,"projective"),P===null&&D===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new E(P,16),this.z=new E(D,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}return A(T,_.BasePoint),B.prototype.decodePoint=function(P,D){return this.point(I.toArray(P,D),1)},B.prototype.point=function(P,D){return new T(this,P,D)},B.prototype.pointFromJSON=function(P){return T.fromJSON(this,P)},T.prototype.precompute=function(){},T.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},T.fromJSON=function(P,D){return new T(P,D[0],D[1]||P.one)},T.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},T.prototype.isInfinity=function(){return this.z.cmpn(0)===0},T.prototype.dbl=function(){var P=this.x.redAdd(this.z),D=P.redSqr(),F=this.x.redSub(this.z),L=F.redSqr(),U=D.redSub(L),V=D.redMul(L),K=U.redMul(L.redAdd(this.curve.a24.redMul(U)));return this.curve.point(V,K)},T.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},T.prototype.diffAdd=function(P,D){var F=this.x.redAdd(this.z),L=this.x.redSub(this.z),U=P.x.redAdd(P.z),V=P.x.redSub(P.z),K=V.redMul(F),J=U.redMul(L),ee=D.z.redMul(K.redAdd(J).redSqr()),ie=D.x.redMul(K.redISub(J).redSqr());return this.curve.point(ee,ie)},T.prototype.mul=function(P){for(var D=P.clone(),F=this,L=this.curve.point(null,null),U=this,V=[];D.cmpn(0)!==0;D.iushrn(1))V.push(D.andln(1));for(var K=V.length-1;K>=0;K--)V[K]===0?(F=F.diffAdd(L,U),L=L.dbl()):(L=F.diffAdd(L,U),F=F.dbl());return L},T.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},T.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},T.prototype.eq=function(P){return this.getX().cmp(P.getX())===0},T.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},T.prototype.getX=function(){return this.normalize(),this.x.fromRed()},mont}var edwards,hasRequiredEdwards;function requireEdwards(){if(hasRequiredEdwards)return edwards;hasRequiredEdwards=1;var E=requireUtils$4(),A=requireBn$3(),_=requireInherits_browser(),I=requireBase$1(),B=E.assert;function T(P){this.twisted=(P.a|0)!==1,this.mOneA=this.twisted&&(P.a|0)===-1,this.extended=this.mOneA,I.call(this,"edwards",P),this.a=new A(P.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new A(P.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new A(P.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),B(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(P.c|0)===1}_(T,I),edwards=T,T.prototype._mulA=function(D){return this.mOneA?D.redNeg():this.a.redMul(D)},T.prototype._mulC=function(D){return this.oneC?D:this.c.redMul(D)},T.prototype.jpoint=function(D,F,L,U){return this.point(D,F,L,U)},T.prototype.pointFromX=function(D,F){D=new A(D,16),D.red||(D=D.toRed(this.red));var L=D.redSqr(),U=this.c2.redSub(this.a.redMul(L)),V=this.one.redSub(this.c2.redMul(this.d).redMul(L)),K=U.redMul(V.redInvm()),J=K.redSqrt();if(J.redSqr().redSub(K).cmp(this.zero)!==0)throw new Error("invalid point");var ee=J.fromRed().isOdd();return(F&&!ee||!F&&ee)&&(J=J.redNeg()),this.point(D,J)},T.prototype.pointFromY=function(D,F){D=new A(D,16),D.red||(D=D.toRed(this.red));var L=D.redSqr(),U=L.redSub(this.c2),V=L.redMul(this.d).redMul(this.c2).redSub(this.a),K=U.redMul(V.redInvm());if(K.cmp(this.zero)===0){if(F)throw new Error("invalid point");return this.point(this.zero,D)}var J=K.redSqrt();if(J.redSqr().redSub(K).cmp(this.zero)!==0)throw new Error("invalid point");return J.fromRed().isOdd()!==F&&(J=J.redNeg()),this.point(J,D)},T.prototype.validate=function(D){if(D.isInfinity())return!0;D.normalize();var F=D.x.redSqr(),L=D.y.redSqr(),U=F.redMul(this.a).redAdd(L),V=this.c2.redMul(this.one.redAdd(this.d.redMul(F).redMul(L)));return U.cmp(V)===0};function R(P,D,F,L,U){I.BasePoint.call(this,P,"projective"),D===null&&F===null&&L===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new A(D,16),this.y=new A(F,16),this.z=L?new A(L,16):this.curve.one,this.t=U&&new A(U,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}return _(R,I.BasePoint),T.prototype.pointFromJSON=function(D){return R.fromJSON(this,D)},T.prototype.point=function(D,F,L,U){return new R(this,D,F,L,U)},R.fromJSON=function(D,F){return new R(D,F[0],F[1],F[2])},R.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},R.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},R.prototype._extDbl=function(){var D=this.x.redSqr(),F=this.y.redSqr(),L=this.z.redSqr();L=L.redIAdd(L);var U=this.curve._mulA(D),V=this.x.redAdd(this.y).redSqr().redISub(D).redISub(F),K=U.redAdd(F),J=K.redSub(L),ee=U.redSub(F),ie=V.redMul(J),ne=K.redMul(ee),ce=V.redMul(ee),fe=J.redMul(K);return this.curve.point(ie,ne,fe,ce)},R.prototype._projDbl=function(){var D=this.x.redAdd(this.y).redSqr(),F=this.x.redSqr(),L=this.y.redSqr(),U,V,K,J,ee,ie;if(this.curve.twisted){J=this.curve._mulA(F);var ne=J.redAdd(L);this.zOne?(U=D.redSub(F).redSub(L).redMul(ne.redSub(this.curve.two)),V=ne.redMul(J.redSub(L)),K=ne.redSqr().redSub(ne).redSub(ne)):(ee=this.z.redSqr(),ie=ne.redSub(ee).redISub(ee),U=D.redSub(F).redISub(L).redMul(ie),V=ne.redMul(J.redSub(L)),K=ne.redMul(ie))}else J=F.redAdd(L),ee=this.curve._mulC(this.z).redSqr(),ie=J.redSub(ee).redSub(ee),U=this.curve._mulC(D.redISub(J)).redMul(ie),V=this.curve._mulC(J).redMul(F.redISub(L)),K=J.redMul(ie);return this.curve.point(U,V,K)},R.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},R.prototype._extAdd=function(D){var F=this.y.redSub(this.x).redMul(D.y.redSub(D.x)),L=this.y.redAdd(this.x).redMul(D.y.redAdd(D.x)),U=this.t.redMul(this.curve.dd).redMul(D.t),V=this.z.redMul(D.z.redAdd(D.z)),K=L.redSub(F),J=V.redSub(U),ee=V.redAdd(U),ie=L.redAdd(F),ne=K.redMul(J),ce=ee.redMul(ie),fe=K.redMul(ie),de=J.redMul(ee);return this.curve.point(ne,ce,de,fe)},R.prototype._projAdd=function(D){var F=this.z.redMul(D.z),L=F.redSqr(),U=this.x.redMul(D.x),V=this.y.redMul(D.y),K=this.curve.d.redMul(U).redMul(V),J=L.redSub(K),ee=L.redAdd(K),ie=this.x.redAdd(this.y).redMul(D.x.redAdd(D.y)).redISub(U).redISub(V),ne=F.redMul(J).redMul(ie),ce,fe;return this.curve.twisted?(ce=F.redMul(ee).redMul(V.redSub(this.curve._mulA(U))),fe=J.redMul(ee)):(ce=F.redMul(ee).redMul(V.redSub(U)),fe=this.curve._mulC(J).redMul(ee)),this.curve.point(ne,ce,fe)},R.prototype.add=function(D){return this.isInfinity()?D:D.isInfinity()?this:this.curve.extended?this._extAdd(D):this._projAdd(D)},R.prototype.mul=function(D){return this._hasDoubles(D)?this.curve._fixedNafMul(this,D):this.curve._wnafMul(this,D)},R.prototype.mulAdd=function(D,F,L){return this.curve._wnafMulAdd(1,[this,F],[D,L],2,!1)},R.prototype.jmulAdd=function(D,F,L){return this.curve._wnafMulAdd(1,[this,F],[D,L],2,!0)},R.prototype.normalize=function(){if(this.zOne)return this;var D=this.z.redInvm();return this.x=this.x.redMul(D),this.y=this.y.redMul(D),this.t&&(this.t=this.t.redMul(D)),this.z=this.curve.one,this.zOne=!0,this},R.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},R.prototype.getX=function(){return this.normalize(),this.x.fromRed()},R.prototype.getY=function(){return this.normalize(),this.y.fromRed()},R.prototype.eq=function(D){return this===D||this.getX().cmp(D.getX())===0&&this.getY().cmp(D.getY())===0},R.prototype.eqXToP=function(D){var F=D.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(F)===0)return!0;for(var L=D.clone(),U=this.curve.redN.redMul(this.z);;){if(L.iadd(this.curve.n),L.cmp(this.curve.p)>=0)return!1;if(F.redIAdd(U),this.x.cmp(F)===0)return!0}},R.prototype.toP=R.prototype.normalize,R.prototype.mixedAdd=R.prototype.add,edwards}var hasRequiredCurve;function requireCurve(){return hasRequiredCurve||(hasRequiredCurve=1,(function(E){var A=E;A.base=requireBase$1(),A.short=requireShort(),A.mont=requireMont(),A.edwards=requireEdwards()})(curve)),curve}var curves={},hash$1={},utils$3={},hasRequiredUtils$3;function requireUtils$3(){if(hasRequiredUtils$3)return utils$3;hasRequiredUtils$3=1;var E=requireMinimalisticAssert(),A=requireInherits_browser();utils$3.inherits=A;function _(O,z){return(O.charCodeAt(z)&64512)!==55296||z<0||z+1>=O.length?!1:(O.charCodeAt(z+1)&64512)===56320}function I(O,z){if(Array.isArray(O))return O.slice();if(!O)return[];var Y=[];if(typeof O=="string")if(z){if(z==="hex")for(O=O.replace(/[^a-z0-9]+/ig,""),O.length%2!==0&&(O="0"+O),oe=0;oe<O.length;oe+=2)Y.push(parseInt(O[oe]+O[oe+1],16))}else for(var te=0,oe=0;oe<O.length;oe++){var le=O.charCodeAt(oe);le<128?Y[te++]=le:le<2048?(Y[te++]=le>>6|192,Y[te++]=le&63|128):_(O,oe)?(le=65536+((le&1023)<<10)+(O.charCodeAt(++oe)&1023),Y[te++]=le>>18|240,Y[te++]=le>>12&63|128,Y[te++]=le>>6&63|128,Y[te++]=le&63|128):(Y[te++]=le>>12|224,Y[te++]=le>>6&63|128,Y[te++]=le&63|128)}else for(oe=0;oe<O.length;oe++)Y[oe]=O[oe]|0;return Y}utils$3.toArray=I;function B(O){for(var z="",Y=0;Y<O.length;Y++)z+=P(O[Y].toString(16));return z}utils$3.toHex=B;function T(O){var z=O>>>24|O>>>8&65280|O<<8&16711680|(O&255)<<24;return z>>>0}utils$3.htonl=T;function R(O,z){for(var Y="",te=0;te<O.length;te++){var oe=O[te];z==="little"&&(oe=T(oe)),Y+=D(oe.toString(16))}return Y}utils$3.toHex32=R;function P(O){return O.length===1?"0"+O:O}utils$3.zero2=P;function D(O){return O.length===7?"0"+O:O.length===6?"00"+O:O.length===5?"000"+O:O.length===4?"0000"+O:O.length===3?"00000"+O:O.length===2?"000000"+O:O.length===1?"0000000"+O:O}utils$3.zero8=D;function F(O,z,Y,te){var oe=Y-z;E(oe%4===0);for(var le=new Array(oe/4),he=0,ae=z;he<le.length;he++,ae+=4){var Q;te==="big"?Q=O[ae]<<24|O[ae+1]<<16|O[ae+2]<<8|O[ae+3]:Q=O[ae+3]<<24|O[ae+2]<<16|O[ae+1]<<8|O[ae],le[he]=Q>>>0}return le}utils$3.join32=F;function L(O,z){for(var Y=new Array(O.length*4),te=0,oe=0;te<O.length;te++,oe+=4){var le=O[te];z==="big"?(Y[oe]=le>>>24,Y[oe+1]=le>>>16&255,Y[oe+2]=le>>>8&255,Y[oe+3]=le&255):(Y[oe+3]=le>>>24,Y[oe+2]=le>>>16&255,Y[oe+1]=le>>>8&255,Y[oe]=le&255)}return Y}utils$3.split32=L;function U(O,z){return O>>>z|O<<32-z}utils$3.rotr32=U;function V(O,z){return O<<z|O>>>32-z}utils$3.rotl32=V;function K(O,z){return O+z>>>0}utils$3.sum32=K;function J(O,z,Y){return O+z+Y>>>0}utils$3.sum32_3=J;function ee(O,z,Y,te){return O+z+Y+te>>>0}utils$3.sum32_4=ee;function ie(O,z,Y,te,oe){return O+z+Y+te+oe>>>0}utils$3.sum32_5=ie;function ne(O,z,Y,te){var oe=O[z],le=O[z+1],he=te+le>>>0,ae=(he<te?1:0)+Y+oe;O[z]=ae>>>0,O[z+1]=he}utils$3.sum64=ne;function ce(O,z,Y,te){var oe=z+te>>>0,le=(oe<z?1:0)+O+Y;return le>>>0}utils$3.sum64_hi=ce;function fe(O,z,Y,te){var oe=z+te;return oe>>>0}utils$3.sum64_lo=fe;function de(O,z,Y,te,oe,le,he,ae){var Q=0,se=z;se=se+te>>>0,Q+=se<z?1:0,se=se+le>>>0,Q+=se<le?1:0,se=se+ae>>>0,Q+=se<ae?1:0;var Ae=O+Y+oe+he+Q;return Ae>>>0}utils$3.sum64_4_hi=de;function pe(O,z,Y,te,oe,le,he,ae){var Q=z+te+le+ae;return Q>>>0}utils$3.sum64_4_lo=pe;function ve(O,z,Y,te,oe,le,he,ae,Q,se){var Ae=0,ge=z;ge=ge+te>>>0,Ae+=ge<z?1:0,ge=ge+le>>>0,Ae+=ge<le?1:0,ge=ge+ae>>>0,Ae+=ge<ae?1:0,ge=ge+se>>>0,Ae+=ge<se?1:0;var Ee=O+Y+oe+he+Q+Ae;return Ee>>>0}utils$3.sum64_5_hi=ve;function ye(O,z,Y,te,oe,le,he,ae,Q,se){var Ae=z+te+le+ae+se;return Ae>>>0}utils$3.sum64_5_lo=ye;function _e(O,z,Y){var te=z<<32-Y|O>>>Y;return te>>>0}utils$3.rotr64_hi=_e;function be(O,z,Y){var te=O<<32-Y|z>>>Y;return te>>>0}utils$3.rotr64_lo=be;function Te(O,z,Y){return O>>>Y}utils$3.shr64_hi=Te;function ue(O,z,Y){var te=O<<32-Y|z>>>Y;return te>>>0}return utils$3.shr64_lo=ue,utils$3}var common$2={},hasRequiredCommon$2;function requireCommon$2(){if(hasRequiredCommon$2)return common$2;hasRequiredCommon$2=1;var E=requireUtils$3(),A=requireMinimalisticAssert();function _(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return common$2.BlockHash=_,_.prototype.update=function(B,T){if(B=E.toArray(B,T),this.pending?this.pending=this.pending.concat(B):this.pending=B,this.pendingTotal+=B.length,this.pending.length>=this._delta8){B=this.pending;var R=B.length%this._delta8;this.pending=B.slice(B.length-R,B.length),this.pending.length===0&&(this.pending=null),B=E.join32(B,0,B.length-R,this.endian);for(var P=0;P<B.length;P+=this._delta32)this._update(B,P,P+this._delta32)}return this},_.prototype.digest=function(B){return this.update(this._pad()),A(this.pending===null),this._digest(B)},_.prototype._pad=function(){var B=this.pendingTotal,T=this._delta8,R=T-(B+this.padLength)%T,P=new Array(R+this.padLength);P[0]=128;for(var D=1;D<R;D++)P[D]=0;if(B<<=3,this.endian==="big"){for(var F=8;F<this.padLength;F++)P[D++]=0;P[D++]=0,P[D++]=0,P[D++]=0,P[D++]=0,P[D++]=B>>>24&255,P[D++]=B>>>16&255,P[D++]=B>>>8&255,P[D++]=B&255}else for(P[D++]=B&255,P[D++]=B>>>8&255,P[D++]=B>>>16&255,P[D++]=B>>>24&255,P[D++]=0,P[D++]=0,P[D++]=0,P[D++]=0,F=8;F<this.padLength;F++)P[D++]=0;return P},common$2}var sha={},common$1={},hasRequiredCommon$1;function requireCommon$1(){if(hasRequiredCommon$1)return common$1;hasRequiredCommon$1=1;var E=requireUtils$3(),A=E.rotr32;function _(L,U,V,K){if(L===0)return I(U,V,K);if(L===1||L===3)return T(U,V,K);if(L===2)return B(U,V,K)}common$1.ft_1=_;function I(L,U,V){return L&U^~L&V}common$1.ch32=I;function B(L,U,V){return L&U^L&V^U&V}common$1.maj32=B;function T(L,U,V){return L^U^V}common$1.p32=T;function R(L){return A(L,2)^A(L,13)^A(L,22)}common$1.s0_256=R;function P(L){return A(L,6)^A(L,11)^A(L,25)}common$1.s1_256=P;function D(L){return A(L,7)^A(L,18)^L>>>3}common$1.g0_256=D;function F(L){return A(L,17)^A(L,19)^L>>>10}return common$1.g1_256=F,common$1}var _1,hasRequired_1;function require_1(){if(hasRequired_1)return _1;hasRequired_1=1;var E=requireUtils$3(),A=requireCommon$2(),_=requireCommon$1(),I=E.rotl32,B=E.sum32,T=E.sum32_5,R=_.ft_1,P=A.BlockHash,D=[1518500249,1859775393,2400959708,3395469782];function F(){if(!(this instanceof F))return new F;P.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return E.inherits(F,P),_1=F,F.blockSize=512,F.outSize=160,F.hmacStrength=80,F.padLength=64,F.prototype._update=function(U,V){for(var K=this.W,J=0;J<16;J++)K[J]=U[V+J];for(;J<K.length;J++)K[J]=I(K[J-3]^K[J-8]^K[J-14]^K[J-16],1);var ee=this.h[0],ie=this.h[1],ne=this.h[2],ce=this.h[3],fe=this.h[4];for(J=0;J<K.length;J++){var de=~~(J/20),pe=T(I(ee,5),R(de,ie,ne,ce),fe,K[J],D[de]);fe=ce,ce=ne,ne=I(ie,30),ie=ee,ee=pe}this.h[0]=B(this.h[0],ee),this.h[1]=B(this.h[1],ie),this.h[2]=B(this.h[2],ne),this.h[3]=B(this.h[3],ce),this.h[4]=B(this.h[4],fe)},F.prototype._digest=function(U){return U==="hex"?E.toHex32(this.h,"big"):E.split32(this.h,"big")},_1}var _256,hasRequired_256;function require_256(){if(hasRequired_256)return _256;hasRequired_256=1;var E=requireUtils$3(),A=requireCommon$2(),_=requireCommon$1(),I=requireMinimalisticAssert(),B=E.sum32,T=E.sum32_4,R=E.sum32_5,P=_.ch32,D=_.maj32,F=_.s0_256,L=_.s1_256,U=_.g0_256,V=_.g1_256,K=A.BlockHash,J=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function ee(){if(!(this instanceof ee))return new ee;K.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=J,this.W=new Array(64)}return E.inherits(ee,K),_256=ee,ee.blockSize=512,ee.outSize=256,ee.hmacStrength=192,ee.padLength=64,ee.prototype._update=function(ne,ce){for(var fe=this.W,de=0;de<16;de++)fe[de]=ne[ce+de];for(;de<fe.length;de++)fe[de]=T(V(fe[de-2]),fe[de-7],U(fe[de-15]),fe[de-16]);var pe=this.h[0],ve=this.h[1],ye=this.h[2],_e=this.h[3],be=this.h[4],Te=this.h[5],ue=this.h[6],O=this.h[7];for(I(this.k.length===fe.length),de=0;de<fe.length;de++){var z=R(O,L(be),P(be,Te,ue),this.k[de],fe[de]),Y=B(F(pe),D(pe,ve,ye));O=ue,ue=Te,Te=be,be=B(_e,z),_e=ye,ye=ve,ve=pe,pe=B(z,Y)}this.h[0]=B(this.h[0],pe),this.h[1]=B(this.h[1],ve),this.h[2]=B(this.h[2],ye),this.h[3]=B(this.h[3],_e),this.h[4]=B(this.h[4],be),this.h[5]=B(this.h[5],Te),this.h[6]=B(this.h[6],ue),this.h[7]=B(this.h[7],O)},ee.prototype._digest=function(ne){return ne==="hex"?E.toHex32(this.h,"big"):E.split32(this.h,"big")},_256}var _224,hasRequired_224;function require_224(){if(hasRequired_224)return _224;hasRequired_224=1;var E=requireUtils$3(),A=require_256();function _(){if(!(this instanceof _))return new _;A.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return E.inherits(_,A),_224=_,_.blockSize=512,_.outSize=224,_.hmacStrength=192,_.padLength=64,_.prototype._digest=function(B){return B==="hex"?E.toHex32(this.h.slice(0,7),"big"):E.split32(this.h.slice(0,7),"big")},_224}var _512,hasRequired_512;function require_512(){if(hasRequired_512)return _512;hasRequired_512=1;var E=requireUtils$3(),A=requireCommon$2(),_=requireMinimalisticAssert(),I=E.rotr64_hi,B=E.rotr64_lo,T=E.shr64_hi,R=E.shr64_lo,P=E.sum64,D=E.sum64_hi,F=E.sum64_lo,L=E.sum64_4_hi,U=E.sum64_4_lo,V=E.sum64_5_hi,K=E.sum64_5_lo,J=A.BlockHash,ee=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function ie(){if(!(this instanceof ie))return new ie;J.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=ee,this.W=new Array(160)}E.inherits(ie,J),_512=ie,ie.blockSize=1024,ie.outSize=512,ie.hmacStrength=192,ie.padLength=128,ie.prototype._prepareBlock=function(Y,te){for(var oe=this.W,le=0;le<32;le++)oe[le]=Y[te+le];for(;le<oe.length;le+=2){var he=ue(oe[le-4],oe[le-3]),ae=O(oe[le-4],oe[le-3]),Q=oe[le-14],se=oe[le-13],Ae=be(oe[le-30],oe[le-29]),ge=Te(oe[le-30],oe[le-29]),Ee=oe[le-32],ke=oe[le-31];oe[le]=L(he,ae,Q,se,Ae,ge,Ee,ke),oe[le+1]=U(he,ae,Q,se,Ae,ge,Ee,ke)}},ie.prototype._update=function(Y,te){this._prepareBlock(Y,te);var oe=this.W,le=this.h[0],he=this.h[1],ae=this.h[2],Q=this.h[3],se=this.h[4],Ae=this.h[5],ge=this.h[6],Ee=this.h[7],ke=this.h[8],Se=this.h[9],Ie=this.h[10],we=this.h[11],xe=this.h[12],Fe=this.h[13],Ge=this.h[14],Oe=this.h[15];_(this.k.length===oe.length);for(var et=0;et<oe.length;et+=2){var Mt=Ge,dt=Oe,mt=ye(ke,Se),Ut=_e(ke,Se),St=ne(ke,Se,Ie,we,xe),vt=ce(ke,Se,Ie,we,xe,Fe),It=this.k[et],yt=this.k[et+1],Tt=oe[et],Wt=oe[et+1],ft=V(Mt,dt,mt,Ut,St,vt,It,yt,Tt,Wt),_t=K(Mt,dt,mt,Ut,St,vt,It,yt,Tt,Wt);Mt=pe(le,he),dt=ve(le,he),mt=fe(le,he,ae,Q,se),Ut=de(le,he,ae,Q,se,Ae);var Xt=D(Mt,dt,mt,Ut),Nt=F(Mt,dt,mt,Ut);Ge=xe,Oe=Fe,xe=Ie,Fe=we,Ie=ke,we=Se,ke=D(ge,Ee,ft,_t),Se=F(Ee,Ee,ft,_t),ge=se,Ee=Ae,se=ae,Ae=Q,ae=le,Q=he,le=D(ft,_t,Xt,Nt),he=F(ft,_t,Xt,Nt)}P(this.h,0,le,he),P(this.h,2,ae,Q),P(this.h,4,se,Ae),P(this.h,6,ge,Ee),P(this.h,8,ke,Se),P(this.h,10,Ie,we),P(this.h,12,xe,Fe),P(this.h,14,Ge,Oe)},ie.prototype._digest=function(Y){return Y==="hex"?E.toHex32(this.h,"big"):E.split32(this.h,"big")};function ne(z,Y,te,oe,le){var he=z&te^~z&le;return he<0&&(he+=4294967296),he}function ce(z,Y,te,oe,le,he){var ae=Y&oe^~Y&he;return ae<0&&(ae+=4294967296),ae}function fe(z,Y,te,oe,le){var he=z&te^z&le^te&le;return he<0&&(he+=4294967296),he}function de(z,Y,te,oe,le,he){var ae=Y&oe^Y&he^oe&he;return ae<0&&(ae+=4294967296),ae}function pe(z,Y){var te=I(z,Y,28),oe=I(Y,z,2),le=I(Y,z,7),he=te^oe^le;return he<0&&(he+=4294967296),he}function ve(z,Y){var te=B(z,Y,28),oe=B(Y,z,2),le=B(Y,z,7),he=te^oe^le;return he<0&&(he+=4294967296),he}function ye(z,Y){var te=I(z,Y,14),oe=I(z,Y,18),le=I(Y,z,9),he=te^oe^le;return he<0&&(he+=4294967296),he}function _e(z,Y){var te=B(z,Y,14),oe=B(z,Y,18),le=B(Y,z,9),he=te^oe^le;return he<0&&(he+=4294967296),he}function be(z,Y){var te=I(z,Y,1),oe=I(z,Y,8),le=T(z,Y,7),he=te^oe^le;return he<0&&(he+=4294967296),he}function Te(z,Y){var te=B(z,Y,1),oe=B(z,Y,8),le=R(z,Y,7),he=te^oe^le;return he<0&&(he+=4294967296),he}function ue(z,Y){var te=I(z,Y,19),oe=I(Y,z,29),le=T(z,Y,6),he=te^oe^le;return he<0&&(he+=4294967296),he}function O(z,Y){var te=B(z,Y,19),oe=B(Y,z,29),le=R(z,Y,6),he=te^oe^le;return he<0&&(he+=4294967296),he}return _512}var _384,hasRequired_384;function require_384(){if(hasRequired_384)return _384;hasRequired_384=1;var E=requireUtils$3(),A=require_512();function _(){if(!(this instanceof _))return new _;A.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return E.inherits(_,A),_384=_,_.blockSize=1024,_.outSize=384,_.hmacStrength=192,_.padLength=128,_.prototype._digest=function(B){return B==="hex"?E.toHex32(this.h.slice(0,12),"big"):E.split32(this.h.slice(0,12),"big")},_384}var hasRequiredSha;function requireSha(){return hasRequiredSha||(hasRequiredSha=1,sha.sha1=require_1(),sha.sha224=require_224(),sha.sha256=require_256(),sha.sha384=require_384(),sha.sha512=require_512()),sha}var ripemd={},hasRequiredRipemd;function requireRipemd(){if(hasRequiredRipemd)return ripemd;hasRequiredRipemd=1;var E=requireUtils$3(),A=requireCommon$2(),_=E.rotl32,I=E.sum32,B=E.sum32_3,T=E.sum32_4,R=A.BlockHash;function P(){if(!(this instanceof P))return new P;R.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}E.inherits(P,R),ripemd.ripemd160=P,P.blockSize=512,P.outSize=160,P.hmacStrength=192,P.padLength=64,P.prototype._update=function(ie,ne){for(var ce=this.h[0],fe=this.h[1],de=this.h[2],pe=this.h[3],ve=this.h[4],ye=ce,_e=fe,be=de,Te=pe,ue=ve,O=0;O<80;O++){var z=I(_(T(ce,D(O,fe,de,pe),ie[U[O]+ne],F(O)),K[O]),ve);ce=ve,ve=pe,pe=_(de,10),de=fe,fe=z,z=I(_(T(ye,D(79-O,_e,be,Te),ie[V[O]+ne],L(O)),J[O]),ue),ye=ue,ue=Te,Te=_(be,10),be=_e,_e=z}z=B(this.h[1],de,Te),this.h[1]=B(this.h[2],pe,ue),this.h[2]=B(this.h[3],ve,ye),this.h[3]=B(this.h[4],ce,_e),this.h[4]=B(this.h[0],fe,be),this.h[0]=z},P.prototype._digest=function(ie){return ie==="hex"?E.toHex32(this.h,"little"):E.split32(this.h,"little")};function D(ee,ie,ne,ce){return ee<=15?ie^ne^ce:ee<=31?ie&ne|~ie&ce:ee<=47?(ie|~ne)^ce:ee<=63?ie&ce|ne&~ce:ie^(ne|~ce)}function F(ee){return ee<=15?0:ee<=31?1518500249:ee<=47?1859775393:ee<=63?2400959708:2840853838}function L(ee){return ee<=15?1352829926:ee<=31?1548603684:ee<=47?1836072691:ee<=63?2053994217:0}var U=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],V=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],K=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],J=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return ripemd}var hmac,hasRequiredHmac;function requireHmac(){if(hasRequiredHmac)return hmac;hasRequiredHmac=1;var E=requireUtils$3(),A=requireMinimalisticAssert();function _(I,B,T){if(!(this instanceof _))return new _(I,B,T);this.Hash=I,this.blockSize=I.blockSize/8,this.outSize=I.outSize/8,this.inner=null,this.outer=null,this._init(E.toArray(B,T))}return hmac=_,_.prototype._init=function(B){B.length>this.blockSize&&(B=new this.Hash().update(B).digest()),A(B.length<=this.blockSize);for(var T=B.length;T<this.blockSize;T++)B.push(0);for(T=0;T<B.length;T++)B[T]^=54;for(this.inner=new this.Hash().update(B),T=0;T<B.length;T++)B[T]^=106;this.outer=new this.Hash().update(B)},_.prototype.update=function(B,T){return this.inner.update(B,T),this},_.prototype.digest=function(B){return this.outer.update(this.inner.digest()),this.outer.digest(B)},hmac}var hasRequiredHash;function requireHash(){return hasRequiredHash||(hasRequiredHash=1,(function(E){var A=E;A.utils=requireUtils$3(),A.common=requireCommon$2(),A.sha=requireSha(),A.ripemd=requireRipemd(),A.hmac=requireHmac(),A.sha1=A.sha.sha1,A.sha256=A.sha.sha256,A.sha224=A.sha.sha224,A.sha384=A.sha.sha384,A.sha512=A.sha.sha512,A.ripemd160=A.ripemd.ripemd160})(hash$1)),hash$1}var secp256k1,hasRequiredSecp256k1;function requireSecp256k1(){return hasRequiredSecp256k1||(hasRequiredSecp256k1=1,secp256k1={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),secp256k1}var hasRequiredCurves;function requireCurves(){return hasRequiredCurves||(hasRequiredCurves=1,(function(E){var A=E,_=requireHash(),I=requireCurve(),B=requireUtils$4(),T=B.assert;function R(F){F.type==="short"?this.curve=new I.short(F):F.type==="edwards"?this.curve=new I.edwards(F):this.curve=new I.mont(F),this.g=this.curve.g,this.n=this.curve.n,this.hash=F.hash,T(this.g.validate(),"Invalid curve"),T(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}A.PresetCurve=R;function P(F,L){Object.defineProperty(A,F,{configurable:!0,enumerable:!0,get:function(){var U=new R(L);return Object.defineProperty(A,F,{configurable:!0,enumerable:!0,value:U}),U}})}P("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:_.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),P("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:_.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),P("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:_.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),P("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:_.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),P("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:_.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),P("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:_.sha256,gRed:!1,g:["9"]}),P("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:_.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var D;try{D=requireSecp256k1()}catch{D=void 0}P("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:_.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",D]})})(curves)),curves}var hmacDrbg,hasRequiredHmacDrbg;function requireHmacDrbg(){if(hasRequiredHmacDrbg)return hmacDrbg;hasRequiredHmacDrbg=1;var E=requireHash(),A=requireUtils$5(),_=requireMinimalisticAssert();function I(B){if(!(this instanceof I))return new I(B);this.hash=B.hash,this.predResist=!!B.predResist,this.outLen=this.hash.outSize,this.minEntropy=B.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var T=A.toArray(B.entropy,B.entropyEnc||"hex"),R=A.toArray(B.nonce,B.nonceEnc||"hex"),P=A.toArray(B.pers,B.persEnc||"hex");_(T.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(T,R,P)}return hmacDrbg=I,I.prototype._init=function(T,R,P){var D=T.concat(R).concat(P);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var F=0;F<this.V.length;F++)this.K[F]=0,this.V[F]=1;this._update(D),this._reseed=1,this.reseedInterval=281474976710656},I.prototype._hmac=function(){return new E.hmac(this.hash,this.K)},I.prototype._update=function(T){var R=this._hmac().update(this.V).update([0]);T&&(R=R.update(T)),this.K=R.digest(),this.V=this._hmac().update(this.V).digest(),T&&(this.K=this._hmac().update(this.V).update([1]).update(T).digest(),this.V=this._hmac().update(this.V).digest())},I.prototype.reseed=function(T,R,P,D){typeof R!="string"&&(D=P,P=R,R=null),T=A.toArray(T,R),P=A.toArray(P,D),_(T.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(T.concat(P||[])),this._reseed=1},I.prototype.generate=function(T,R,P,D){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof R!="string"&&(D=P,P=R,R=null),P&&(P=A.toArray(P,D||"hex"),this._update(P));for(var F=[];F.length<T;)this.V=this._hmac().update(this.V).digest(),F=F.concat(this.V);var L=F.slice(0,T);return this._update(P),this._reseed++,A.encode(L,R)},hmacDrbg}var key$2,hasRequiredKey$2;function requireKey$2(){if(hasRequiredKey$2)return key$2;hasRequiredKey$2=1;var E=requireBn$3(),A=requireUtils$4(),_=A.assert;function I(B,T){this.ec=B,this.priv=null,this.pub=null,T.priv&&this._importPrivate(T.priv,T.privEnc),T.pub&&this._importPublic(T.pub,T.pubEnc)}return key$2=I,I.fromPublic=function(T,R,P){return R instanceof I?R:new I(T,{pub:R,pubEnc:P})},I.fromPrivate=function(T,R,P){return R instanceof I?R:new I(T,{priv:R,privEnc:P})},I.prototype.validate=function(){var T=this.getPublic();return T.isInfinity()?{result:!1,reason:"Invalid public key"}:T.validate()?T.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},I.prototype.getPublic=function(T,R){return typeof T=="string"&&(R=T,T=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),R?this.pub.encode(R,T):this.pub},I.prototype.getPrivate=function(T){return T==="hex"?this.priv.toString(16,2):this.priv},I.prototype._importPrivate=function(T,R){this.priv=new E(T,R||16),this.priv=this.priv.umod(this.ec.curve.n)},I.prototype._importPublic=function(T,R){if(T.x||T.y){this.ec.curve.type==="mont"?_(T.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&_(T.x&&T.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(T.x,T.y);return}this.pub=this.ec.curve.decodePoint(T,R)},I.prototype.derive=function(T){return T.validate()||_(T.validate(),"public point not validated"),T.mul(this.priv).getX()},I.prototype.sign=function(T,R,P){return this.ec.sign(T,this,R,P)},I.prototype.verify=function(T,R,P){return this.ec.verify(T,R,this,void 0,P)},I.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"},key$2}var signature$2,hasRequiredSignature$2;function requireSignature$2(){if(hasRequiredSignature$2)return signature$2;hasRequiredSignature$2=1;var E=requireBn$3(),A=requireUtils$4(),_=A.assert;function I(D,F){if(D instanceof I)return D;this._importDER(D,F)||(_(D.r&&D.s,"Signature without r or s"),this.r=new E(D.r,16),this.s=new E(D.s,16),D.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=D.recoveryParam)}signature$2=I;function B(){this.place=0}function T(D,F){var L=D[F.place++];if(!(L&128))return L;var U=L&15;if(U===0||U>4||D[F.place]===0)return!1;for(var V=0,K=0,J=F.place;K<U;K++,J++)V<<=8,V|=D[J],V>>>=0;return V<=127?!1:(F.place=J,V)}function R(D){for(var F=0,L=D.length-1;!D[F]&&!(D[F+1]&128)&&F<L;)F++;return F===0?D:D.slice(F)}I.prototype._importDER=function(F,L){F=A.toArray(F,L);var U=new B;if(F[U.place++]!==48)return!1;var V=T(F,U);if(V===!1||V+U.place!==F.length||F[U.place++]!==2)return!1;var K=T(F,U);if(K===!1||(F[U.place]&128)!==0)return!1;var J=F.slice(U.place,K+U.place);if(U.place+=K,F[U.place++]!==2)return!1;var ee=T(F,U);if(ee===!1||F.length!==ee+U.place||(F[U.place]&128)!==0)return!1;var ie=F.slice(U.place,ee+U.place);if(J[0]===0)if(J[1]&128)J=J.slice(1);else return!1;if(ie[0]===0)if(ie[1]&128)ie=ie.slice(1);else return!1;return this.r=new E(J),this.s=new E(ie),this.recoveryParam=null,!0};function P(D,F){if(F<128){D.push(F);return}var L=1+(Math.log(F)/Math.LN2>>>3);for(D.push(L|128);--L;)D.push(F>>>(L<<3)&255);D.push(F)}return I.prototype.toDER=function(F){var L=this.r.toArray(),U=this.s.toArray();for(L[0]&128&&(L=[0].concat(L)),U[0]&128&&(U=[0].concat(U)),L=R(L),U=R(U);!U[0]&&!(U[1]&128);)U=U.slice(1);var V=[2];P(V,L.length),V=V.concat(L),V.push(2),P(V,U.length);var K=V.concat(U),J=[48];return P(J,K.length),J=J.concat(K),A.encode(J,F)},signature$2}var ec$1,hasRequiredEc$1;function requireEc$1(){if(hasRequiredEc$1)return ec$1;hasRequiredEc$1=1;var E=requireBn$3(),A=requireHmacDrbg(),_=requireUtils$4(),I=requireCurves(),B=requireBrorand(),T=_.assert,R=requireKey$2(),P=requireSignature$2();function D(F){if(!(this instanceof D))return new D(F);typeof F=="string"&&(T(Object.prototype.hasOwnProperty.call(I,F),"Unknown curve "+F),F=I[F]),F instanceof I.PresetCurve&&(F={curve:F}),this.curve=F.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=F.curve.g,this.g.precompute(F.curve.n.bitLength()+1),this.hash=F.hash||F.curve.hash}return ec$1=D,D.prototype.keyPair=function(L){return new R(this,L)},D.prototype.keyFromPrivate=function(L,U){return R.fromPrivate(this,L,U)},D.prototype.keyFromPublic=function(L,U){return R.fromPublic(this,L,U)},D.prototype.genKeyPair=function(L){L||(L={});for(var U=new A({hash:this.hash,pers:L.pers,persEnc:L.persEnc||"utf8",entropy:L.entropy||B(this.hash.hmacStrength),entropyEnc:L.entropy&&L.entropyEnc||"utf8",nonce:this.n.toArray()}),V=this.n.byteLength(),K=this.n.sub(new E(2));;){var J=new E(U.generate(V));if(!(J.cmp(K)>0))return J.iaddn(1),this.keyFromPrivate(J)}},D.prototype._truncateToN=function(L,U,V){var K;if(E.isBN(L)||typeof L=="number")L=new E(L,16),K=L.byteLength();else if(typeof L=="object")K=L.length,L=new E(L,16);else{var J=L.toString();K=J.length+1>>>1,L=new E(J,16)}typeof V!="number"&&(V=K*8);var ee=V-this.n.bitLength();return ee>0&&(L=L.ushrn(ee)),!U&&L.cmp(this.n)>=0?L.sub(this.n):L},D.prototype.sign=function(L,U,V,K){if(typeof V=="object"&&(K=V,V=null),K||(K={}),typeof L!="string"&&typeof L!="number"&&!E.isBN(L)){T(typeof L=="object"&&L&&typeof L.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),T(L.length>>>0===L.length);for(var J=0;J<L.length;J++)T((L[J]&255)===L[J])}U=this.keyFromPrivate(U,V),L=this._truncateToN(L,!1,K.msgBitLength),T(!L.isNeg(),"Can not sign a negative message");var ee=this.n.byteLength(),ie=U.getPrivate().toArray("be",ee),ne=L.toArray("be",ee);T(new E(ne).eq(L),"Can not sign message");for(var ce=new A({hash:this.hash,entropy:ie,nonce:ne,pers:K.pers,persEnc:K.persEnc||"utf8"}),fe=this.n.sub(new E(1)),de=0;;de++){var pe=K.k?K.k(de):new E(ce.generate(this.n.byteLength()));if(pe=this._truncateToN(pe,!0),!(pe.cmpn(1)<=0||pe.cmp(fe)>=0)){var ve=this.g.mul(pe);if(!ve.isInfinity()){var ye=ve.getX(),_e=ye.umod(this.n);if(_e.cmpn(0)!==0){var be=pe.invm(this.n).mul(_e.mul(U.getPrivate()).iadd(L));if(be=be.umod(this.n),be.cmpn(0)!==0){var Te=(ve.getY().isOdd()?1:0)|(ye.cmp(_e)!==0?2:0);return K.canonical&&be.cmp(this.nh)>0&&(be=this.n.sub(be),Te^=1),new P({r:_e,s:be,recoveryParam:Te})}}}}}},D.prototype.verify=function(L,U,V,K,J){J||(J={}),L=this._truncateToN(L,!1,J.msgBitLength),V=this.keyFromPublic(V,K),U=new P(U,"hex");var ee=U.r,ie=U.s;if(ee.cmpn(1)<0||ee.cmp(this.n)>=0||ie.cmpn(1)<0||ie.cmp(this.n)>=0)return!1;var ne=ie.invm(this.n),ce=ne.mul(L).umod(this.n),fe=ne.mul(ee).umod(this.n),de;return this.curve._maxwellTrick?(de=this.g.jmulAdd(ce,V.getPublic(),fe),de.isInfinity()?!1:de.eqXToP(ee)):(de=this.g.mulAdd(ce,V.getPublic(),fe),de.isInfinity()?!1:de.getX().umod(this.n).cmp(ee)===0)},D.prototype.recoverPubKey=function(F,L,U,V){T((3&U)===U,"The recovery param is more than two bits"),L=new P(L,V);var K=this.n,J=new E(F),ee=L.r,ie=L.s,ne=U&1,ce=U>>1;if(ee.cmp(this.curve.p.umod(this.curve.n))>=0&&ce)throw new Error("Unable to find sencond key candinate");ce?ee=this.curve.pointFromX(ee.add(this.curve.n),ne):ee=this.curve.pointFromX(ee,ne);var fe=L.r.invm(K),de=K.sub(J).mul(fe).umod(K),pe=ie.mul(fe).umod(K);return this.g.mulAdd(de,ee,pe)},D.prototype.getKeyRecoveryParam=function(F,L,U,V){if(L=new P(L,V),L.recoveryParam!==null)return L.recoveryParam;for(var K=0;K<4;K++){var J;try{J=this.recoverPubKey(F,L,K)}catch{continue}if(J.eq(U))return K}throw new Error("Unable to find valid recovery factor")},ec$1}var key$1,hasRequiredKey$1;function requireKey$1(){if(hasRequiredKey$1)return key$1;hasRequiredKey$1=1;var E=requireUtils$4(),A=E.assert,_=E.parseBytes,I=E.cachedProperty;function B(T,R){this.eddsa=T,this._secret=_(R.secret),T.isPoint(R.pub)?this._pub=R.pub:this._pubBytes=_(R.pub)}return B.fromPublic=function(R,P){return P instanceof B?P:new B(R,{pub:P})},B.fromSecret=function(R,P){return P instanceof B?P:new B(R,{secret:P})},B.prototype.secret=function(){return this._secret},I(B,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),I(B,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),I(B,"privBytes",function(){var R=this.eddsa,P=this.hash(),D=R.encodingLength-1,F=P.slice(0,R.encodingLength);return F[0]&=248,F[D]&=127,F[D]|=64,F}),I(B,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),I(B,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),I(B,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),B.prototype.sign=function(R){return A(this._secret,"KeyPair can only verify"),this.eddsa.sign(R,this)},B.prototype.verify=function(R,P){return this.eddsa.verify(R,P,this)},B.prototype.getSecret=function(R){return A(this._secret,"KeyPair is public only"),E.encode(this.secret(),R)},B.prototype.getPublic=function(R){return E.encode(this.pubBytes(),R)},key$1=B,key$1}var signature$1,hasRequiredSignature$1;function requireSignature$1(){if(hasRequiredSignature$1)return signature$1;hasRequiredSignature$1=1;var E=requireBn$3(),A=requireUtils$4(),_=A.assert,I=A.cachedProperty,B=A.parseBytes;function T(R,P){this.eddsa=R,typeof P!="object"&&(P=B(P)),Array.isArray(P)&&(_(P.length===R.encodingLength*2,"Signature has invalid size"),P={R:P.slice(0,R.encodingLength),S:P.slice(R.encodingLength)}),_(P.R&&P.S,"Signature without R or S"),R.isPoint(P.R)&&(this._R=P.R),P.S instanceof E&&(this._S=P.S),this._Rencoded=Array.isArray(P.R)?P.R:P.Rencoded,this._Sencoded=Array.isArray(P.S)?P.S:P.Sencoded}return I(T,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),I(T,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),I(T,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),I(T,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),T.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},T.prototype.toHex=function(){return A.encode(this.toBytes(),"hex").toUpperCase()},signature$1=T,signature$1}var eddsa,hasRequiredEddsa;function requireEddsa(){if(hasRequiredEddsa)return eddsa;hasRequiredEddsa=1;var E=requireHash(),A=requireCurves(),_=requireUtils$4(),I=_.assert,B=_.parseBytes,T=requireKey$1(),R=requireSignature$1();function P(D){if(I(D==="ed25519","only tested with ed25519 so far"),!(this instanceof P))return new P(D);D=A[D].curve,this.curve=D,this.g=D.g,this.g.precompute(D.n.bitLength()+1),this.pointClass=D.point().constructor,this.encodingLength=Math.ceil(D.n.bitLength()/8),this.hash=E.sha512}return eddsa=P,P.prototype.sign=function(F,L){F=B(F);var U=this.keyFromSecret(L),V=this.hashInt(U.messagePrefix(),F),K=this.g.mul(V),J=this.encodePoint(K),ee=this.hashInt(J,U.pubBytes(),F).mul(U.priv()),ie=V.add(ee).umod(this.curve.n);return this.makeSignature({R:K,S:ie,Rencoded:J})},P.prototype.verify=function(F,L,U){if(F=B(F),L=this.makeSignature(L),L.S().gte(L.eddsa.curve.n)||L.S().isNeg())return!1;var V=this.keyFromPublic(U),K=this.hashInt(L.Rencoded(),V.pubBytes(),F),J=this.g.mul(L.S()),ee=L.R().add(V.pub().mul(K));return ee.eq(J)},P.prototype.hashInt=function(){for(var F=this.hash(),L=0;L<arguments.length;L++)F.update(arguments[L]);return _.intFromLE(F.digest()).umod(this.curve.n)},P.prototype.keyFromPublic=function(F){return T.fromPublic(this,F)},P.prototype.keyFromSecret=function(F){return T.fromSecret(this,F)},P.prototype.makeSignature=function(F){return F instanceof R?F:new R(this,F)},P.prototype.encodePoint=function(F){var L=F.getY().toArray("le",this.encodingLength);return L[this.encodingLength-1]|=F.getX().isOdd()?128:0,L},P.prototype.decodePoint=function(F){F=_.parseBytes(F);var L=F.length-1,U=F.slice(0,L).concat(F[L]&-129),V=(F[L]&128)!==0,K=_.intFromLE(U);return this.curve.pointFromY(K,V)},P.prototype.encodeInt=function(F){return F.toArray("le",this.encodingLength)},P.prototype.decodeInt=function(F){return _.intFromLE(F)},P.prototype.isPoint=function(F){return F instanceof this.pointClass},eddsa}var hasRequiredElliptic;function requireElliptic(){return hasRequiredElliptic||(hasRequiredElliptic=1,(function(E){var A=E;A.version=require$$0$4.version,A.utils=requireUtils$4(),A.rand=requireBrorand(),A.curve=requireCurve(),A.curves=requireCurves(),A.ec=requireEc$1(),A.eddsa=requireEddsa()})(elliptic)),elliptic}var asn1$1={},asn1={},bn$5={exports:{}},bn$4=bn$5.exports,hasRequiredBn$2;function requireBn$2(){return hasRequiredBn$2||(hasRequiredBn$2=1,(function(E){(function(A,_){function I(ue,O){if(!ue)throw new Error(O||"Assertion failed")}function B(ue,O){ue.super_=O;var z=function(){};z.prototype=O.prototype,ue.prototype=new z,ue.prototype.constructor=ue}function T(ue,O,z){if(T.isBN(ue))return ue;this.negative=0,this.words=null,this.length=0,this.red=null,ue!==null&&((O==="le"||O==="be")&&(z=O,O=10),this._init(ue||0,O||10,z||"be"))}typeof A=="object"?A.exports=T:_.BN=T,T.BN=T,T.wordSize=26;var R;try{typeof window<"u"&&typeof window.Buffer<"u"?R=window.Buffer:R=requireDist$1().Buffer}catch{}T.isBN=function(O){return O instanceof T?!0:O!==null&&typeof O=="object"&&O.constructor.wordSize===T.wordSize&&Array.isArray(O.words)},T.max=function(O,z){return O.cmp(z)>0?O:z},T.min=function(O,z){return O.cmp(z)<0?O:z},T.prototype._init=function(O,z,Y){if(typeof O=="number")return this._initNumber(O,z,Y);if(typeof O=="object")return this._initArray(O,z,Y);z==="hex"&&(z=16),I(z===(z|0)&&z>=2&&z<=36),O=O.toString().replace(/\s+/g,"");var te=0;O[0]==="-"&&(te++,this.negative=1),te<O.length&&(z===16?this._parseHex(O,te,Y):(this._parseBase(O,z,te),Y==="le"&&this._initArray(this.toArray(),z,Y)))},T.prototype._initNumber=function(O,z,Y){O<0&&(this.negative=1,O=-O),O<67108864?(this.words=[O&67108863],this.length=1):O<4503599627370496?(this.words=[O&67108863,O/67108864&67108863],this.length=2):(I(O<9007199254740992),this.words=[O&67108863,O/67108864&67108863,1],this.length=3),Y==="le"&&this._initArray(this.toArray(),z,Y)},T.prototype._initArray=function(O,z,Y){if(I(typeof O.length=="number"),O.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(O.length/3),this.words=new Array(this.length);for(var te=0;te<this.length;te++)this.words[te]=0;var oe,le,he=0;if(Y==="be")for(te=O.length-1,oe=0;te>=0;te-=3)le=O[te]|O[te-1]<<8|O[te-2]<<16,this.words[oe]|=le<<he&67108863,this.words[oe+1]=le>>>26-he&67108863,he+=24,he>=26&&(he-=26,oe++);else if(Y==="le")for(te=0,oe=0;te<O.length;te+=3)le=O[te]|O[te+1]<<8|O[te+2]<<16,this.words[oe]|=le<<he&67108863,this.words[oe+1]=le>>>26-he&67108863,he+=24,he>=26&&(he-=26,oe++);return this.strip()};function P(ue,O){var z=ue.charCodeAt(O);return z>=65&&z<=70?z-55:z>=97&&z<=102?z-87:z-48&15}function D(ue,O,z){var Y=P(ue,z);return z-1>=O&&(Y|=P(ue,z-1)<<4),Y}T.prototype._parseHex=function(O,z,Y){this.length=Math.ceil((O.length-z)/6),this.words=new Array(this.length);for(var te=0;te<this.length;te++)this.words[te]=0;var oe=0,le=0,he;if(Y==="be")for(te=O.length-1;te>=z;te-=2)he=D(O,z,te)<<oe,this.words[le]|=he&67108863,oe>=18?(oe-=18,le+=1,this.words[le]|=he>>>26):oe+=8;else{var ae=O.length-z;for(te=ae%2===0?z+1:z;te<O.length;te+=2)he=D(O,z,te)<<oe,this.words[le]|=he&67108863,oe>=18?(oe-=18,le+=1,this.words[le]|=he>>>26):oe+=8}this.strip()};function F(ue,O,z,Y){for(var te=0,oe=Math.min(ue.length,z),le=O;le<oe;le++){var he=ue.charCodeAt(le)-48;te*=Y,he>=49?te+=he-49+10:he>=17?te+=he-17+10:te+=he}return te}T.prototype._parseBase=function(O,z,Y){this.words=[0],this.length=1;for(var te=0,oe=1;oe<=67108863;oe*=z)te++;te--,oe=oe/z|0;for(var le=O.length-Y,he=le%te,ae=Math.min(le,le-he)+Y,Q=0,se=Y;se<ae;se+=te)Q=F(O,se,se+te,z),this.imuln(oe),this.words[0]+Q<67108864?this.words[0]+=Q:this._iaddn(Q);if(he!==0){var Ae=1;for(Q=F(O,se,O.length,z),se=0;se<he;se++)Ae*=z;this.imuln(Ae),this.words[0]+Q<67108864?this.words[0]+=Q:this._iaddn(Q)}this.strip()},T.prototype.copy=function(O){O.words=new Array(this.length);for(var z=0;z<this.length;z++)O.words[z]=this.words[z];O.length=this.length,O.negative=this.negative,O.red=this.red},T.prototype.clone=function(){var O=new T(null);return this.copy(O),O},T.prototype._expand=function(O){for(;this.length<O;)this.words[this.length++]=0;return this},T.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},T.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},T.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var L=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],U=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],V=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];T.prototype.toString=function(O,z){O=O||10,z=z|0||1;var Y;if(O===16||O==="hex"){Y="";for(var te=0,oe=0,le=0;le<this.length;le++){var he=this.words[le],ae=((he<<te|oe)&16777215).toString(16);oe=he>>>24-te&16777215,te+=2,te>=26&&(te-=26,le--),oe!==0||le!==this.length-1?Y=L[6-ae.length]+ae+Y:Y=ae+Y}for(oe!==0&&(Y=oe.toString(16)+Y);Y.length%z!==0;)Y="0"+Y;return this.negative!==0&&(Y="-"+Y),Y}if(O===(O|0)&&O>=2&&O<=36){var Q=U[O],se=V[O];Y="";var Ae=this.clone();for(Ae.negative=0;!Ae.isZero();){var ge=Ae.modn(se).toString(O);Ae=Ae.idivn(se),Ae.isZero()?Y=ge+Y:Y=L[Q-ge.length]+ge+Y}for(this.isZero()&&(Y="0"+Y);Y.length%z!==0;)Y="0"+Y;return this.negative!==0&&(Y="-"+Y),Y}I(!1,"Base should be between 2 and 36")},T.prototype.toNumber=function(){var O=this.words[0];return this.length===2?O+=this.words[1]*67108864:this.length===3&&this.words[2]===1?O+=4503599627370496+this.words[1]*67108864:this.length>2&&I(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-O:O},T.prototype.toJSON=function(){return this.toString(16)},T.prototype.toBuffer=function(O,z){return I(typeof R<"u"),this.toArrayLike(R,O,z)},T.prototype.toArray=function(O,z){return this.toArrayLike(Array,O,z)},T.prototype.toArrayLike=function(O,z,Y){var te=this.byteLength(),oe=Y||Math.max(1,te);I(te<=oe,"byte array longer than desired length"),I(oe>0,"Requested array length <= 0"),this.strip();var le=z==="le",he=new O(oe),ae,Q,se=this.clone();if(le){for(Q=0;!se.isZero();Q++)ae=se.andln(255),se.iushrn(8),he[Q]=ae;for(;Q<oe;Q++)he[Q]=0}else{for(Q=0;Q<oe-te;Q++)he[Q]=0;for(Q=0;!se.isZero();Q++)ae=se.andln(255),se.iushrn(8),he[oe-Q-1]=ae}return he},Math.clz32?T.prototype._countBits=function(O){return 32-Math.clz32(O)}:T.prototype._countBits=function(O){var z=O,Y=0;return z>=4096&&(Y+=13,z>>>=13),z>=64&&(Y+=7,z>>>=7),z>=8&&(Y+=4,z>>>=4),z>=2&&(Y+=2,z>>>=2),Y+z},T.prototype._zeroBits=function(O){if(O===0)return 26;var z=O,Y=0;return(z&8191)===0&&(Y+=13,z>>>=13),(z&127)===0&&(Y+=7,z>>>=7),(z&15)===0&&(Y+=4,z>>>=4),(z&3)===0&&(Y+=2,z>>>=2),(z&1)===0&&Y++,Y},T.prototype.bitLength=function(){var O=this.words[this.length-1],z=this._countBits(O);return(this.length-1)*26+z};function K(ue){for(var O=new Array(ue.bitLength()),z=0;z<O.length;z++){var Y=z/26|0,te=z%26;O[z]=(ue.words[Y]&1<<te)>>>te}return O}T.prototype.zeroBits=function(){if(this.isZero())return 0;for(var O=0,z=0;z<this.length;z++){var Y=this._zeroBits(this.words[z]);if(O+=Y,Y!==26)break}return O},T.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},T.prototype.toTwos=function(O){return this.negative!==0?this.abs().inotn(O).iaddn(1):this.clone()},T.prototype.fromTwos=function(O){return this.testn(O-1)?this.notn(O).iaddn(1).ineg():this.clone()},T.prototype.isNeg=function(){return this.negative!==0},T.prototype.neg=function(){return this.clone().ineg()},T.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},T.prototype.iuor=function(O){for(;this.length<O.length;)this.words[this.length++]=0;for(var z=0;z<O.length;z++)this.words[z]=this.words[z]|O.words[z];return this.strip()},T.prototype.ior=function(O){return I((this.negative|O.negative)===0),this.iuor(O)},T.prototype.or=function(O){return this.length>O.length?this.clone().ior(O):O.clone().ior(this)},T.prototype.uor=function(O){return this.length>O.length?this.clone().iuor(O):O.clone().iuor(this)},T.prototype.iuand=function(O){var z;this.length>O.length?z=O:z=this;for(var Y=0;Y<z.length;Y++)this.words[Y]=this.words[Y]&O.words[Y];return this.length=z.length,this.strip()},T.prototype.iand=function(O){return I((this.negative|O.negative)===0),this.iuand(O)},T.prototype.and=function(O){return this.length>O.length?this.clone().iand(O):O.clone().iand(this)},T.prototype.uand=function(O){return this.length>O.length?this.clone().iuand(O):O.clone().iuand(this)},T.prototype.iuxor=function(O){var z,Y;this.length>O.length?(z=this,Y=O):(z=O,Y=this);for(var te=0;te<Y.length;te++)this.words[te]=z.words[te]^Y.words[te];if(this!==z)for(;te<z.length;te++)this.words[te]=z.words[te];return this.length=z.length,this.strip()},T.prototype.ixor=function(O){return I((this.negative|O.negative)===0),this.iuxor(O)},T.prototype.xor=function(O){return this.length>O.length?this.clone().ixor(O):O.clone().ixor(this)},T.prototype.uxor=function(O){return this.length>O.length?this.clone().iuxor(O):O.clone().iuxor(this)},T.prototype.inotn=function(O){I(typeof O=="number"&&O>=0);var z=Math.ceil(O/26)|0,Y=O%26;this._expand(z),Y>0&&z--;for(var te=0;te<z;te++)this.words[te]=~this.words[te]&67108863;return Y>0&&(this.words[te]=~this.words[te]&67108863>>26-Y),this.strip()},T.prototype.notn=function(O){return this.clone().inotn(O)},T.prototype.setn=function(O,z){I(typeof O=="number"&&O>=0);var Y=O/26|0,te=O%26;return this._expand(Y+1),z?this.words[Y]=this.words[Y]|1<<te:this.words[Y]=this.words[Y]&~(1<<te),this.strip()},T.prototype.iadd=function(O){var z;if(this.negative!==0&&O.negative===0)return this.negative=0,z=this.isub(O),this.negative^=1,this._normSign();if(this.negative===0&&O.negative!==0)return O.negative=0,z=this.isub(O),O.negative=1,z._normSign();var Y,te;this.length>O.length?(Y=this,te=O):(Y=O,te=this);for(var oe=0,le=0;le<te.length;le++)z=(Y.words[le]|0)+(te.words[le]|0)+oe,this.words[le]=z&67108863,oe=z>>>26;for(;oe!==0&&le<Y.length;le++)z=(Y.words[le]|0)+oe,this.words[le]=z&67108863,oe=z>>>26;if(this.length=Y.length,oe!==0)this.words[this.length]=oe,this.length++;else if(Y!==this)for(;le<Y.length;le++)this.words[le]=Y.words[le];return this},T.prototype.add=function(O){var z;return O.negative!==0&&this.negative===0?(O.negative=0,z=this.sub(O),O.negative^=1,z):O.negative===0&&this.negative!==0?(this.negative=0,z=O.sub(this),this.negative=1,z):this.length>O.length?this.clone().iadd(O):O.clone().iadd(this)},T.prototype.isub=function(O){if(O.negative!==0){O.negative=0;var z=this.iadd(O);return O.negative=1,z._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(O),this.negative=1,this._normSign();var Y=this.cmp(O);if(Y===0)return this.negative=0,this.length=1,this.words[0]=0,this;var te,oe;Y>0?(te=this,oe=O):(te=O,oe=this);for(var le=0,he=0;he<oe.length;he++)z=(te.words[he]|0)-(oe.words[he]|0)+le,le=z>>26,this.words[he]=z&67108863;for(;le!==0&&he<te.length;he++)z=(te.words[he]|0)+le,le=z>>26,this.words[he]=z&67108863;if(le===0&&he<te.length&&te!==this)for(;he<te.length;he++)this.words[he]=te.words[he];return this.length=Math.max(this.length,he),te!==this&&(this.negative=1),this.strip()},T.prototype.sub=function(O){return this.clone().isub(O)};function J(ue,O,z){z.negative=O.negative^ue.negative;var Y=ue.length+O.length|0;z.length=Y,Y=Y-1|0;var te=ue.words[0]|0,oe=O.words[0]|0,le=te*oe,he=le&67108863,ae=le/67108864|0;z.words[0]=he;for(var Q=1;Q<Y;Q++){for(var se=ae>>>26,Ae=ae&67108863,ge=Math.min(Q,O.length-1),Ee=Math.max(0,Q-ue.length+1);Ee<=ge;Ee++){var ke=Q-Ee|0;te=ue.words[ke]|0,oe=O.words[Ee]|0,le=te*oe+Ae,se+=le/67108864|0,Ae=le&67108863}z.words[Q]=Ae|0,ae=se|0}return ae!==0?z.words[Q]=ae|0:z.length--,z.strip()}var ee=function(O,z,Y){var te=O.words,oe=z.words,le=Y.words,he=0,ae,Q,se,Ae=te[0]|0,ge=Ae&8191,Ee=Ae>>>13,ke=te[1]|0,Se=ke&8191,Ie=ke>>>13,we=te[2]|0,xe=we&8191,Fe=we>>>13,Ge=te[3]|0,Oe=Ge&8191,et=Ge>>>13,Mt=te[4]|0,dt=Mt&8191,mt=Mt>>>13,Ut=te[5]|0,St=Ut&8191,vt=Ut>>>13,It=te[6]|0,yt=It&8191,Tt=It>>>13,Wt=te[7]|0,ft=Wt&8191,_t=Wt>>>13,Xt=te[8]|0,Nt=Xt&8191,qt=Xt>>>13,nr=te[9]|0,ze=nr&8191,Ce=nr>>>13,Le=oe[0]|0,Ze=Le&8191,Je=Le>>>13,nt=oe[1]|0,rt=nt&8191,He=nt>>>13,Dt=oe[2]|0,Rt=Dt&8191,De=Dt>>>13,We=oe[3]|0,Ve=We&8191,qe=We>>>13,pt=oe[4]|0,At=pt&8191,jt=pt>>>13,rr=oe[5]|0,Ke=rr&8191,Ne=rr>>>13,Ye=oe[6]|0,st=Ye&8191,bt=Ye>>>13,Qe=oe[7]|0,Re=Qe&8191,Pe=Qe>>>13,Me=oe[8]|0,$e=Me&8191,it=Me>>>13,kt=oe[9]|0,xt=kt&8191,Ot=kt>>>13;Y.negative=O.negative^z.negative,Y.length=19,ae=Math.imul(ge,Ze),Q=Math.imul(ge,Je),Q=Q+Math.imul(Ee,Ze)|0,se=Math.imul(Ee,Je);var Jt=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,ae=Math.imul(Se,Ze),Q=Math.imul(Se,Je),Q=Q+Math.imul(Ie,Ze)|0,se=Math.imul(Ie,Je),ae=ae+Math.imul(ge,rt)|0,Q=Q+Math.imul(ge,He)|0,Q=Q+Math.imul(Ee,rt)|0,se=se+Math.imul(Ee,He)|0;var tr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(tr>>>26)|0,tr&=67108863,ae=Math.imul(xe,Ze),Q=Math.imul(xe,Je),Q=Q+Math.imul(Fe,Ze)|0,se=Math.imul(Fe,Je),ae=ae+Math.imul(Se,rt)|0,Q=Q+Math.imul(Se,He)|0,Q=Q+Math.imul(Ie,rt)|0,se=se+Math.imul(Ie,He)|0,ae=ae+Math.imul(ge,Rt)|0,Q=Q+Math.imul(ge,De)|0,Q=Q+Math.imul(Ee,Rt)|0,se=se+Math.imul(Ee,De)|0;var br=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(br>>>26)|0,br&=67108863,ae=Math.imul(Oe,Ze),Q=Math.imul(Oe,Je),Q=Q+Math.imul(et,Ze)|0,se=Math.imul(et,Je),ae=ae+Math.imul(xe,rt)|0,Q=Q+Math.imul(xe,He)|0,Q=Q+Math.imul(Fe,rt)|0,se=se+Math.imul(Fe,He)|0,ae=ae+Math.imul(Se,Rt)|0,Q=Q+Math.imul(Se,De)|0,Q=Q+Math.imul(Ie,Rt)|0,se=se+Math.imul(Ie,De)|0,ae=ae+Math.imul(ge,Ve)|0,Q=Q+Math.imul(ge,qe)|0,Q=Q+Math.imul(Ee,Ve)|0,se=se+Math.imul(Ee,qe)|0;var ar=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(ar>>>26)|0,ar&=67108863,ae=Math.imul(dt,Ze),Q=Math.imul(dt,Je),Q=Q+Math.imul(mt,Ze)|0,se=Math.imul(mt,Je),ae=ae+Math.imul(Oe,rt)|0,Q=Q+Math.imul(Oe,He)|0,Q=Q+Math.imul(et,rt)|0,se=se+Math.imul(et,He)|0,ae=ae+Math.imul(xe,Rt)|0,Q=Q+Math.imul(xe,De)|0,Q=Q+Math.imul(Fe,Rt)|0,se=se+Math.imul(Fe,De)|0,ae=ae+Math.imul(Se,Ve)|0,Q=Q+Math.imul(Se,qe)|0,Q=Q+Math.imul(Ie,Ve)|0,se=se+Math.imul(Ie,qe)|0,ae=ae+Math.imul(ge,At)|0,Q=Q+Math.imul(ge,jt)|0,Q=Q+Math.imul(Ee,At)|0,se=se+Math.imul(Ee,jt)|0;var _r=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(_r>>>26)|0,_r&=67108863,ae=Math.imul(St,Ze),Q=Math.imul(St,Je),Q=Q+Math.imul(vt,Ze)|0,se=Math.imul(vt,Je),ae=ae+Math.imul(dt,rt)|0,Q=Q+Math.imul(dt,He)|0,Q=Q+Math.imul(mt,rt)|0,se=se+Math.imul(mt,He)|0,ae=ae+Math.imul(Oe,Rt)|0,Q=Q+Math.imul(Oe,De)|0,Q=Q+Math.imul(et,Rt)|0,se=se+Math.imul(et,De)|0,ae=ae+Math.imul(xe,Ve)|0,Q=Q+Math.imul(xe,qe)|0,Q=Q+Math.imul(Fe,Ve)|0,se=se+Math.imul(Fe,qe)|0,ae=ae+Math.imul(Se,At)|0,Q=Q+Math.imul(Se,jt)|0,Q=Q+Math.imul(Ie,At)|0,se=se+Math.imul(Ie,jt)|0,ae=ae+Math.imul(ge,Ke)|0,Q=Q+Math.imul(ge,Ne)|0,Q=Q+Math.imul(Ee,Ke)|0,se=se+Math.imul(Ee,Ne)|0;var or=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(or>>>26)|0,or&=67108863,ae=Math.imul(yt,Ze),Q=Math.imul(yt,Je),Q=Q+Math.imul(Tt,Ze)|0,se=Math.imul(Tt,Je),ae=ae+Math.imul(St,rt)|0,Q=Q+Math.imul(St,He)|0,Q=Q+Math.imul(vt,rt)|0,se=se+Math.imul(vt,He)|0,ae=ae+Math.imul(dt,Rt)|0,Q=Q+Math.imul(dt,De)|0,Q=Q+Math.imul(mt,Rt)|0,se=se+Math.imul(mt,De)|0,ae=ae+Math.imul(Oe,Ve)|0,Q=Q+Math.imul(Oe,qe)|0,Q=Q+Math.imul(et,Ve)|0,se=se+Math.imul(et,qe)|0,ae=ae+Math.imul(xe,At)|0,Q=Q+Math.imul(xe,jt)|0,Q=Q+Math.imul(Fe,At)|0,se=se+Math.imul(Fe,jt)|0,ae=ae+Math.imul(Se,Ke)|0,Q=Q+Math.imul(Se,Ne)|0,Q=Q+Math.imul(Ie,Ke)|0,se=se+Math.imul(Ie,Ne)|0,ae=ae+Math.imul(ge,st)|0,Q=Q+Math.imul(ge,bt)|0,Q=Q+Math.imul(Ee,st)|0,se=se+Math.imul(Ee,bt)|0;var gr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(gr>>>26)|0,gr&=67108863,ae=Math.imul(ft,Ze),Q=Math.imul(ft,Je),Q=Q+Math.imul(_t,Ze)|0,se=Math.imul(_t,Je),ae=ae+Math.imul(yt,rt)|0,Q=Q+Math.imul(yt,He)|0,Q=Q+Math.imul(Tt,rt)|0,se=se+Math.imul(Tt,He)|0,ae=ae+Math.imul(St,Rt)|0,Q=Q+Math.imul(St,De)|0,Q=Q+Math.imul(vt,Rt)|0,se=se+Math.imul(vt,De)|0,ae=ae+Math.imul(dt,Ve)|0,Q=Q+Math.imul(dt,qe)|0,Q=Q+Math.imul(mt,Ve)|0,se=se+Math.imul(mt,qe)|0,ae=ae+Math.imul(Oe,At)|0,Q=Q+Math.imul(Oe,jt)|0,Q=Q+Math.imul(et,At)|0,se=se+Math.imul(et,jt)|0,ae=ae+Math.imul(xe,Ke)|0,Q=Q+Math.imul(xe,Ne)|0,Q=Q+Math.imul(Fe,Ke)|0,se=se+Math.imul(Fe,Ne)|0,ae=ae+Math.imul(Se,st)|0,Q=Q+Math.imul(Se,bt)|0,Q=Q+Math.imul(Ie,st)|0,se=se+Math.imul(Ie,bt)|0,ae=ae+Math.imul(ge,Re)|0,Q=Q+Math.imul(ge,Pe)|0,Q=Q+Math.imul(Ee,Re)|0,se=se+Math.imul(Ee,Pe)|0;var xr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(xr>>>26)|0,xr&=67108863,ae=Math.imul(Nt,Ze),Q=Math.imul(Nt,Je),Q=Q+Math.imul(qt,Ze)|0,se=Math.imul(qt,Je),ae=ae+Math.imul(ft,rt)|0,Q=Q+Math.imul(ft,He)|0,Q=Q+Math.imul(_t,rt)|0,se=se+Math.imul(_t,He)|0,ae=ae+Math.imul(yt,Rt)|0,Q=Q+Math.imul(yt,De)|0,Q=Q+Math.imul(Tt,Rt)|0,se=se+Math.imul(Tt,De)|0,ae=ae+Math.imul(St,Ve)|0,Q=Q+Math.imul(St,qe)|0,Q=Q+Math.imul(vt,Ve)|0,se=se+Math.imul(vt,qe)|0,ae=ae+Math.imul(dt,At)|0,Q=Q+Math.imul(dt,jt)|0,Q=Q+Math.imul(mt,At)|0,se=se+Math.imul(mt,jt)|0,ae=ae+Math.imul(Oe,Ke)|0,Q=Q+Math.imul(Oe,Ne)|0,Q=Q+Math.imul(et,Ke)|0,se=se+Math.imul(et,Ne)|0,ae=ae+Math.imul(xe,st)|0,Q=Q+Math.imul(xe,bt)|0,Q=Q+Math.imul(Fe,st)|0,se=se+Math.imul(Fe,bt)|0,ae=ae+Math.imul(Se,Re)|0,Q=Q+Math.imul(Se,Pe)|0,Q=Q+Math.imul(Ie,Re)|0,se=se+Math.imul(Ie,Pe)|0,ae=ae+Math.imul(ge,$e)|0,Q=Q+Math.imul(ge,it)|0,Q=Q+Math.imul(Ee,$e)|0,se=se+Math.imul(Ee,it)|0;var vr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(vr>>>26)|0,vr&=67108863,ae=Math.imul(ze,Ze),Q=Math.imul(ze,Je),Q=Q+Math.imul(Ce,Ze)|0,se=Math.imul(Ce,Je),ae=ae+Math.imul(Nt,rt)|0,Q=Q+Math.imul(Nt,He)|0,Q=Q+Math.imul(qt,rt)|0,se=se+Math.imul(qt,He)|0,ae=ae+Math.imul(ft,Rt)|0,Q=Q+Math.imul(ft,De)|0,Q=Q+Math.imul(_t,Rt)|0,se=se+Math.imul(_t,De)|0,ae=ae+Math.imul(yt,Ve)|0,Q=Q+Math.imul(yt,qe)|0,Q=Q+Math.imul(Tt,Ve)|0,se=se+Math.imul(Tt,qe)|0,ae=ae+Math.imul(St,At)|0,Q=Q+Math.imul(St,jt)|0,Q=Q+Math.imul(vt,At)|0,se=se+Math.imul(vt,jt)|0,ae=ae+Math.imul(dt,Ke)|0,Q=Q+Math.imul(dt,Ne)|0,Q=Q+Math.imul(mt,Ke)|0,se=se+Math.imul(mt,Ne)|0,ae=ae+Math.imul(Oe,st)|0,Q=Q+Math.imul(Oe,bt)|0,Q=Q+Math.imul(et,st)|0,se=se+Math.imul(et,bt)|0,ae=ae+Math.imul(xe,Re)|0,Q=Q+Math.imul(xe,Pe)|0,Q=Q+Math.imul(Fe,Re)|0,se=se+Math.imul(Fe,Pe)|0,ae=ae+Math.imul(Se,$e)|0,Q=Q+Math.imul(Se,it)|0,Q=Q+Math.imul(Ie,$e)|0,se=se+Math.imul(Ie,it)|0,ae=ae+Math.imul(ge,xt)|0,Q=Q+Math.imul(ge,Ot)|0,Q=Q+Math.imul(Ee,xt)|0,se=se+Math.imul(Ee,Ot)|0;var Cr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,ae=Math.imul(ze,rt),Q=Math.imul(ze,He),Q=Q+Math.imul(Ce,rt)|0,se=Math.imul(Ce,He),ae=ae+Math.imul(Nt,Rt)|0,Q=Q+Math.imul(Nt,De)|0,Q=Q+Math.imul(qt,Rt)|0,se=se+Math.imul(qt,De)|0,ae=ae+Math.imul(ft,Ve)|0,Q=Q+Math.imul(ft,qe)|0,Q=Q+Math.imul(_t,Ve)|0,se=se+Math.imul(_t,qe)|0,ae=ae+Math.imul(yt,At)|0,Q=Q+Math.imul(yt,jt)|0,Q=Q+Math.imul(Tt,At)|0,se=se+Math.imul(Tt,jt)|0,ae=ae+Math.imul(St,Ke)|0,Q=Q+Math.imul(St,Ne)|0,Q=Q+Math.imul(vt,Ke)|0,se=se+Math.imul(vt,Ne)|0,ae=ae+Math.imul(dt,st)|0,Q=Q+Math.imul(dt,bt)|0,Q=Q+Math.imul(mt,st)|0,se=se+Math.imul(mt,bt)|0,ae=ae+Math.imul(Oe,Re)|0,Q=Q+Math.imul(Oe,Pe)|0,Q=Q+Math.imul(et,Re)|0,se=se+Math.imul(et,Pe)|0,ae=ae+Math.imul(xe,$e)|0,Q=Q+Math.imul(xe,it)|0,Q=Q+Math.imul(Fe,$e)|0,se=se+Math.imul(Fe,it)|0,ae=ae+Math.imul(Se,xt)|0,Q=Q+Math.imul(Se,Ot)|0,Q=Q+Math.imul(Ie,xt)|0,se=se+Math.imul(Ie,Ot)|0;var Sr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(Sr>>>26)|0,Sr&=67108863,ae=Math.imul(ze,Rt),Q=Math.imul(ze,De),Q=Q+Math.imul(Ce,Rt)|0,se=Math.imul(Ce,De),ae=ae+Math.imul(Nt,Ve)|0,Q=Q+Math.imul(Nt,qe)|0,Q=Q+Math.imul(qt,Ve)|0,se=se+Math.imul(qt,qe)|0,ae=ae+Math.imul(ft,At)|0,Q=Q+Math.imul(ft,jt)|0,Q=Q+Math.imul(_t,At)|0,se=se+Math.imul(_t,jt)|0,ae=ae+Math.imul(yt,Ke)|0,Q=Q+Math.imul(yt,Ne)|0,Q=Q+Math.imul(Tt,Ke)|0,se=se+Math.imul(Tt,Ne)|0,ae=ae+Math.imul(St,st)|0,Q=Q+Math.imul(St,bt)|0,Q=Q+Math.imul(vt,st)|0,se=se+Math.imul(vt,bt)|0,ae=ae+Math.imul(dt,Re)|0,Q=Q+Math.imul(dt,Pe)|0,Q=Q+Math.imul(mt,Re)|0,se=se+Math.imul(mt,Pe)|0,ae=ae+Math.imul(Oe,$e)|0,Q=Q+Math.imul(Oe,it)|0,Q=Q+Math.imul(et,$e)|0,se=se+Math.imul(et,it)|0,ae=ae+Math.imul(xe,xt)|0,Q=Q+Math.imul(xe,Ot)|0,Q=Q+Math.imul(Fe,xt)|0,se=se+Math.imul(Fe,Ot)|0;var dr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(dr>>>26)|0,dr&=67108863,ae=Math.imul(ze,Ve),Q=Math.imul(ze,qe),Q=Q+Math.imul(Ce,Ve)|0,se=Math.imul(Ce,qe),ae=ae+Math.imul(Nt,At)|0,Q=Q+Math.imul(Nt,jt)|0,Q=Q+Math.imul(qt,At)|0,se=se+Math.imul(qt,jt)|0,ae=ae+Math.imul(ft,Ke)|0,Q=Q+Math.imul(ft,Ne)|0,Q=Q+Math.imul(_t,Ke)|0,se=se+Math.imul(_t,Ne)|0,ae=ae+Math.imul(yt,st)|0,Q=Q+Math.imul(yt,bt)|0,Q=Q+Math.imul(Tt,st)|0,se=se+Math.imul(Tt,bt)|0,ae=ae+Math.imul(St,Re)|0,Q=Q+Math.imul(St,Pe)|0,Q=Q+Math.imul(vt,Re)|0,se=se+Math.imul(vt,Pe)|0,ae=ae+Math.imul(dt,$e)|0,Q=Q+Math.imul(dt,it)|0,Q=Q+Math.imul(mt,$e)|0,se=se+Math.imul(mt,it)|0,ae=ae+Math.imul(Oe,xt)|0,Q=Q+Math.imul(Oe,Ot)|0,Q=Q+Math.imul(et,xt)|0,se=se+Math.imul(et,Ot)|0;var wr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(wr>>>26)|0,wr&=67108863,ae=Math.imul(ze,At),Q=Math.imul(ze,jt),Q=Q+Math.imul(Ce,At)|0,se=Math.imul(Ce,jt),ae=ae+Math.imul(Nt,Ke)|0,Q=Q+Math.imul(Nt,Ne)|0,Q=Q+Math.imul(qt,Ke)|0,se=se+Math.imul(qt,Ne)|0,ae=ae+Math.imul(ft,st)|0,Q=Q+Math.imul(ft,bt)|0,Q=Q+Math.imul(_t,st)|0,se=se+Math.imul(_t,bt)|0,ae=ae+Math.imul(yt,Re)|0,Q=Q+Math.imul(yt,Pe)|0,Q=Q+Math.imul(Tt,Re)|0,se=se+Math.imul(Tt,Pe)|0,ae=ae+Math.imul(St,$e)|0,Q=Q+Math.imul(St,it)|0,Q=Q+Math.imul(vt,$e)|0,se=se+Math.imul(vt,it)|0,ae=ae+Math.imul(dt,xt)|0,Q=Q+Math.imul(dt,Ot)|0,Q=Q+Math.imul(mt,xt)|0,se=se+Math.imul(mt,Ot)|0;var fr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(fr>>>26)|0,fr&=67108863,ae=Math.imul(ze,Ke),Q=Math.imul(ze,Ne),Q=Q+Math.imul(Ce,Ke)|0,se=Math.imul(Ce,Ne),ae=ae+Math.imul(Nt,st)|0,Q=Q+Math.imul(Nt,bt)|0,Q=Q+Math.imul(qt,st)|0,se=se+Math.imul(qt,bt)|0,ae=ae+Math.imul(ft,Re)|0,Q=Q+Math.imul(ft,Pe)|0,Q=Q+Math.imul(_t,Re)|0,se=se+Math.imul(_t,Pe)|0,ae=ae+Math.imul(yt,$e)|0,Q=Q+Math.imul(yt,it)|0,Q=Q+Math.imul(Tt,$e)|0,se=se+Math.imul(Tt,it)|0,ae=ae+Math.imul(St,xt)|0,Q=Q+Math.imul(St,Ot)|0,Q=Q+Math.imul(vt,xt)|0,se=se+Math.imul(vt,Ot)|0;var hr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(hr>>>26)|0,hr&=67108863,ae=Math.imul(ze,st),Q=Math.imul(ze,bt),Q=Q+Math.imul(Ce,st)|0,se=Math.imul(Ce,bt),ae=ae+Math.imul(Nt,Re)|0,Q=Q+Math.imul(Nt,Pe)|0,Q=Q+Math.imul(qt,Re)|0,se=se+Math.imul(qt,Pe)|0,ae=ae+Math.imul(ft,$e)|0,Q=Q+Math.imul(ft,it)|0,Q=Q+Math.imul(_t,$e)|0,se=se+Math.imul(_t,it)|0,ae=ae+Math.imul(yt,xt)|0,Q=Q+Math.imul(yt,Ot)|0,Q=Q+Math.imul(Tt,xt)|0,se=se+Math.imul(Tt,Ot)|0;var Ar=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,ae=Math.imul(ze,Re),Q=Math.imul(ze,Pe),Q=Q+Math.imul(Ce,Re)|0,se=Math.imul(Ce,Pe),ae=ae+Math.imul(Nt,$e)|0,Q=Q+Math.imul(Nt,it)|0,Q=Q+Math.imul(qt,$e)|0,se=se+Math.imul(qt,it)|0,ae=ae+Math.imul(ft,xt)|0,Q=Q+Math.imul(ft,Ot)|0,Q=Q+Math.imul(_t,xt)|0,se=se+Math.imul(_t,Ot)|0;var ur=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(ur>>>26)|0,ur&=67108863,ae=Math.imul(ze,$e),Q=Math.imul(ze,it),Q=Q+Math.imul(Ce,$e)|0,se=Math.imul(Ce,it),ae=ae+Math.imul(Nt,xt)|0,Q=Q+Math.imul(Nt,Ot)|0,Q=Q+Math.imul(qt,xt)|0,se=se+Math.imul(qt,Ot)|0;var zt=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(zt>>>26)|0,zt&=67108863,ae=Math.imul(ze,xt),Q=Math.imul(ze,Ot),Q=Q+Math.imul(Ce,xt)|0,se=Math.imul(Ce,Ot);var Kt=(he+ae|0)+((Q&8191)<<13)|0;return he=(se+(Q>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,le[0]=Jt,le[1]=tr,le[2]=br,le[3]=ar,le[4]=_r,le[5]=or,le[6]=gr,le[7]=xr,le[8]=vr,le[9]=Cr,le[10]=Sr,le[11]=dr,le[12]=wr,le[13]=fr,le[14]=hr,le[15]=Ar,le[16]=ur,le[17]=zt,le[18]=Kt,he!==0&&(le[19]=he,Y.length++),Y};Math.imul||(ee=J);function ie(ue,O,z){z.negative=O.negative^ue.negative,z.length=ue.length+O.length;for(var Y=0,te=0,oe=0;oe<z.length-1;oe++){var le=te;te=0;for(var he=Y&67108863,ae=Math.min(oe,O.length-1),Q=Math.max(0,oe-ue.length+1);Q<=ae;Q++){var se=oe-Q,Ae=ue.words[se]|0,ge=O.words[Q]|0,Ee=Ae*ge,ke=Ee&67108863;le=le+(Ee/67108864|0)|0,ke=ke+he|0,he=ke&67108863,le=le+(ke>>>26)|0,te+=le>>>26,le&=67108863}z.words[oe]=he,Y=le,le=te}return Y!==0?z.words[oe]=Y:z.length--,z.strip()}function ne(ue,O,z){var Y=new ce;return Y.mulp(ue,O,z)}T.prototype.mulTo=function(O,z){var Y,te=this.length+O.length;return this.length===10&&O.length===10?Y=ee(this,O,z):te<63?Y=J(this,O,z):te<1024?Y=ie(this,O,z):Y=ne(this,O,z),Y};function ce(ue,O){this.x=ue,this.y=O}ce.prototype.makeRBT=function(O){for(var z=new Array(O),Y=T.prototype._countBits(O)-1,te=0;te<O;te++)z[te]=this.revBin(te,Y,O);return z},ce.prototype.revBin=function(O,z,Y){if(O===0||O===Y-1)return O;for(var te=0,oe=0;oe<z;oe++)te|=(O&1)<<z-oe-1,O>>=1;return te},ce.prototype.permute=function(O,z,Y,te,oe,le){for(var he=0;he<le;he++)te[he]=z[O[he]],oe[he]=Y[O[he]]},ce.prototype.transform=function(O,z,Y,te,oe,le){this.permute(le,O,z,Y,te,oe);for(var he=1;he<oe;he<<=1)for(var ae=he<<1,Q=Math.cos(2*Math.PI/ae),se=Math.sin(2*Math.PI/ae),Ae=0;Ae<oe;Ae+=ae)for(var ge=Q,Ee=se,ke=0;ke<he;ke++){var Se=Y[Ae+ke],Ie=te[Ae+ke],we=Y[Ae+ke+he],xe=te[Ae+ke+he],Fe=ge*we-Ee*xe;xe=ge*xe+Ee*we,we=Fe,Y[Ae+ke]=Se+we,te[Ae+ke]=Ie+xe,Y[Ae+ke+he]=Se-we,te[Ae+ke+he]=Ie-xe,ke!==ae&&(Fe=Q*ge-se*Ee,Ee=Q*Ee+se*ge,ge=Fe)}},ce.prototype.guessLen13b=function(O,z){var Y=Math.max(z,O)|1,te=Y&1,oe=0;for(Y=Y/2|0;Y;Y=Y>>>1)oe++;return 1<<oe+1+te},ce.prototype.conjugate=function(O,z,Y){if(!(Y<=1))for(var te=0;te<Y/2;te++){var oe=O[te];O[te]=O[Y-te-1],O[Y-te-1]=oe,oe=z[te],z[te]=-z[Y-te-1],z[Y-te-1]=-oe}},ce.prototype.normalize13b=function(O,z){for(var Y=0,te=0;te<z/2;te++){var oe=Math.round(O[2*te+1]/z)*8192+Math.round(O[2*te]/z)+Y;O[te]=oe&67108863,oe<67108864?Y=0:Y=oe/67108864|0}return O},ce.prototype.convert13b=function(O,z,Y,te){for(var oe=0,le=0;le<z;le++)oe=oe+(O[le]|0),Y[2*le]=oe&8191,oe=oe>>>13,Y[2*le+1]=oe&8191,oe=oe>>>13;for(le=2*z;le<te;++le)Y[le]=0;I(oe===0),I((oe&-8192)===0)},ce.prototype.stub=function(O){for(var z=new Array(O),Y=0;Y<O;Y++)z[Y]=0;return z},ce.prototype.mulp=function(O,z,Y){var te=2*this.guessLen13b(O.length,z.length),oe=this.makeRBT(te),le=this.stub(te),he=new Array(te),ae=new Array(te),Q=new Array(te),se=new Array(te),Ae=new Array(te),ge=new Array(te),Ee=Y.words;Ee.length=te,this.convert13b(O.words,O.length,he,te),this.convert13b(z.words,z.length,se,te),this.transform(he,le,ae,Q,te,oe),this.transform(se,le,Ae,ge,te,oe);for(var ke=0;ke<te;ke++){var Se=ae[ke]*Ae[ke]-Q[ke]*ge[ke];Q[ke]=ae[ke]*ge[ke]+Q[ke]*Ae[ke],ae[ke]=Se}return this.conjugate(ae,Q,te),this.transform(ae,Q,Ee,le,te,oe),this.conjugate(Ee,le,te),this.normalize13b(Ee,te),Y.negative=O.negative^z.negative,Y.length=O.length+z.length,Y.strip()},T.prototype.mul=function(O){var z=new T(null);return z.words=new Array(this.length+O.length),this.mulTo(O,z)},T.prototype.mulf=function(O){var z=new T(null);return z.words=new Array(this.length+O.length),ne(this,O,z)},T.prototype.imul=function(O){return this.clone().mulTo(O,this)},T.prototype.imuln=function(O){I(typeof O=="number"),I(O<67108864);for(var z=0,Y=0;Y<this.length;Y++){var te=(this.words[Y]|0)*O,oe=(te&67108863)+(z&67108863);z>>=26,z+=te/67108864|0,z+=oe>>>26,this.words[Y]=oe&67108863}return z!==0&&(this.words[Y]=z,this.length++),this.length=O===0?1:this.length,this},T.prototype.muln=function(O){return this.clone().imuln(O)},T.prototype.sqr=function(){return this.mul(this)},T.prototype.isqr=function(){return this.imul(this.clone())},T.prototype.pow=function(O){var z=K(O);if(z.length===0)return new T(1);for(var Y=this,te=0;te<z.length&&z[te]===0;te++,Y=Y.sqr());if(++te<z.length)for(var oe=Y.sqr();te<z.length;te++,oe=oe.sqr())z[te]!==0&&(Y=Y.mul(oe));return Y},T.prototype.iushln=function(O){I(typeof O=="number"&&O>=0);var z=O%26,Y=(O-z)/26,te=67108863>>>26-z<<26-z,oe;if(z!==0){var le=0;for(oe=0;oe<this.length;oe++){var he=this.words[oe]&te,ae=(this.words[oe]|0)-he<<z;this.words[oe]=ae|le,le=he>>>26-z}le&&(this.words[oe]=le,this.length++)}if(Y!==0){for(oe=this.length-1;oe>=0;oe--)this.words[oe+Y]=this.words[oe];for(oe=0;oe<Y;oe++)this.words[oe]=0;this.length+=Y}return this.strip()},T.prototype.ishln=function(O){return I(this.negative===0),this.iushln(O)},T.prototype.iushrn=function(O,z,Y){I(typeof O=="number"&&O>=0);var te;z?te=(z-z%26)/26:te=0;var oe=O%26,le=Math.min((O-oe)/26,this.length),he=67108863^67108863>>>oe<<oe,ae=Y;if(te-=le,te=Math.max(0,te),ae){for(var Q=0;Q<le;Q++)ae.words[Q]=this.words[Q];ae.length=le}if(le!==0)if(this.length>le)for(this.length-=le,Q=0;Q<this.length;Q++)this.words[Q]=this.words[Q+le];else this.words[0]=0,this.length=1;var se=0;for(Q=this.length-1;Q>=0&&(se!==0||Q>=te);Q--){var Ae=this.words[Q]|0;this.words[Q]=se<<26-oe|Ae>>>oe,se=Ae&he}return ae&&se!==0&&(ae.words[ae.length++]=se),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},T.prototype.ishrn=function(O,z,Y){return I(this.negative===0),this.iushrn(O,z,Y)},T.prototype.shln=function(O){return this.clone().ishln(O)},T.prototype.ushln=function(O){return this.clone().iushln(O)},T.prototype.shrn=function(O){return this.clone().ishrn(O)},T.prototype.ushrn=function(O){return this.clone().iushrn(O)},T.prototype.testn=function(O){I(typeof O=="number"&&O>=0);var z=O%26,Y=(O-z)/26,te=1<<z;if(this.length<=Y)return!1;var oe=this.words[Y];return!!(oe&te)},T.prototype.imaskn=function(O){I(typeof O=="number"&&O>=0);var z=O%26,Y=(O-z)/26;if(I(this.negative===0,"imaskn works only with positive numbers"),this.length<=Y)return this;if(z!==0&&Y++,this.length=Math.min(Y,this.length),z!==0){var te=67108863^67108863>>>z<<z;this.words[this.length-1]&=te}return this.strip()},T.prototype.maskn=function(O){return this.clone().imaskn(O)},T.prototype.iaddn=function(O){return I(typeof O=="number"),I(O<67108864),O<0?this.isubn(-O):this.negative!==0?this.length===1&&(this.words[0]|0)<O?(this.words[0]=O-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(O),this.negative=1,this):this._iaddn(O)},T.prototype._iaddn=function(O){this.words[0]+=O;for(var z=0;z<this.length&&this.words[z]>=67108864;z++)this.words[z]-=67108864,z===this.length-1?this.words[z+1]=1:this.words[z+1]++;return this.length=Math.max(this.length,z+1),this},T.prototype.isubn=function(O){if(I(typeof O=="number"),I(O<67108864),O<0)return this.iaddn(-O);if(this.negative!==0)return this.negative=0,this.iaddn(O),this.negative=1,this;if(this.words[0]-=O,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var z=0;z<this.length&&this.words[z]<0;z++)this.words[z]+=67108864,this.words[z+1]-=1;return this.strip()},T.prototype.addn=function(O){return this.clone().iaddn(O)},T.prototype.subn=function(O){return this.clone().isubn(O)},T.prototype.iabs=function(){return this.negative=0,this},T.prototype.abs=function(){return this.clone().iabs()},T.prototype._ishlnsubmul=function(O,z,Y){var te=O.length+Y,oe;this._expand(te);var le,he=0;for(oe=0;oe<O.length;oe++){le=(this.words[oe+Y]|0)+he;var ae=(O.words[oe]|0)*z;le-=ae&67108863,he=(le>>26)-(ae/67108864|0),this.words[oe+Y]=le&67108863}for(;oe<this.length-Y;oe++)le=(this.words[oe+Y]|0)+he,he=le>>26,this.words[oe+Y]=le&67108863;if(he===0)return this.strip();for(I(he===-1),he=0,oe=0;oe<this.length;oe++)le=-(this.words[oe]|0)+he,he=le>>26,this.words[oe]=le&67108863;return this.negative=1,this.strip()},T.prototype._wordDiv=function(O,z){var Y=this.length-O.length,te=this.clone(),oe=O,le=oe.words[oe.length-1]|0,he=this._countBits(le);Y=26-he,Y!==0&&(oe=oe.ushln(Y),te.iushln(Y),le=oe.words[oe.length-1]|0);var ae=te.length-oe.length,Q;if(z!=="mod"){Q=new T(null),Q.length=ae+1,Q.words=new Array(Q.length);for(var se=0;se<Q.length;se++)Q.words[se]=0}var Ae=te.clone()._ishlnsubmul(oe,1,ae);Ae.negative===0&&(te=Ae,Q&&(Q.words[ae]=1));for(var ge=ae-1;ge>=0;ge--){var Ee=(te.words[oe.length+ge]|0)*67108864+(te.words[oe.length+ge-1]|0);for(Ee=Math.min(Ee/le|0,67108863),te._ishlnsubmul(oe,Ee,ge);te.negative!==0;)Ee--,te.negative=0,te._ishlnsubmul(oe,1,ge),te.isZero()||(te.negative^=1);Q&&(Q.words[ge]=Ee)}return Q&&Q.strip(),te.strip(),z!=="div"&&Y!==0&&te.iushrn(Y),{div:Q||null,mod:te}},T.prototype.divmod=function(O,z,Y){if(I(!O.isZero()),this.isZero())return{div:new T(0),mod:new T(0)};var te,oe,le;return this.negative!==0&&O.negative===0?(le=this.neg().divmod(O,z),z!=="mod"&&(te=le.div.neg()),z!=="div"&&(oe=le.mod.neg(),Y&&oe.negative!==0&&oe.iadd(O)),{div:te,mod:oe}):this.negative===0&&O.negative!==0?(le=this.divmod(O.neg(),z),z!=="mod"&&(te=le.div.neg()),{div:te,mod:le.mod}):(this.negative&O.negative)!==0?(le=this.neg().divmod(O.neg(),z),z!=="div"&&(oe=le.mod.neg(),Y&&oe.negative!==0&&oe.isub(O)),{div:le.div,mod:oe}):O.length>this.length||this.cmp(O)<0?{div:new T(0),mod:this}:O.length===1?z==="div"?{div:this.divn(O.words[0]),mod:null}:z==="mod"?{div:null,mod:new T(this.modn(O.words[0]))}:{div:this.divn(O.words[0]),mod:new T(this.modn(O.words[0]))}:this._wordDiv(O,z)},T.prototype.div=function(O){return this.divmod(O,"div",!1).div},T.prototype.mod=function(O){return this.divmod(O,"mod",!1).mod},T.prototype.umod=function(O){return this.divmod(O,"mod",!0).mod},T.prototype.divRound=function(O){var z=this.divmod(O);if(z.mod.isZero())return z.div;var Y=z.div.negative!==0?z.mod.isub(O):z.mod,te=O.ushrn(1),oe=O.andln(1),le=Y.cmp(te);return le<0||oe===1&&le===0?z.div:z.div.negative!==0?z.div.isubn(1):z.div.iaddn(1)},T.prototype.modn=function(O){I(O<=67108863);for(var z=(1<<26)%O,Y=0,te=this.length-1;te>=0;te--)Y=(z*Y+(this.words[te]|0))%O;return Y},T.prototype.idivn=function(O){I(O<=67108863);for(var z=0,Y=this.length-1;Y>=0;Y--){var te=(this.words[Y]|0)+z*67108864;this.words[Y]=te/O|0,z=te%O}return this.strip()},T.prototype.divn=function(O){return this.clone().idivn(O)},T.prototype.egcd=function(O){I(O.negative===0),I(!O.isZero());var z=this,Y=O.clone();z.negative!==0?z=z.umod(O):z=z.clone();for(var te=new T(1),oe=new T(0),le=new T(0),he=new T(1),ae=0;z.isEven()&&Y.isEven();)z.iushrn(1),Y.iushrn(1),++ae;for(var Q=Y.clone(),se=z.clone();!z.isZero();){for(var Ae=0,ge=1;(z.words[0]&ge)===0&&Ae<26;++Ae,ge<<=1);if(Ae>0)for(z.iushrn(Ae);Ae-- >0;)(te.isOdd()||oe.isOdd())&&(te.iadd(Q),oe.isub(se)),te.iushrn(1),oe.iushrn(1);for(var Ee=0,ke=1;(Y.words[0]&ke)===0&&Ee<26;++Ee,ke<<=1);if(Ee>0)for(Y.iushrn(Ee);Ee-- >0;)(le.isOdd()||he.isOdd())&&(le.iadd(Q),he.isub(se)),le.iushrn(1),he.iushrn(1);z.cmp(Y)>=0?(z.isub(Y),te.isub(le),oe.isub(he)):(Y.isub(z),le.isub(te),he.isub(oe))}return{a:le,b:he,gcd:Y.iushln(ae)}},T.prototype._invmp=function(O){I(O.negative===0),I(!O.isZero());var z=this,Y=O.clone();z.negative!==0?z=z.umod(O):z=z.clone();for(var te=new T(1),oe=new T(0),le=Y.clone();z.cmpn(1)>0&&Y.cmpn(1)>0;){for(var he=0,ae=1;(z.words[0]&ae)===0&&he<26;++he,ae<<=1);if(he>0)for(z.iushrn(he);he-- >0;)te.isOdd()&&te.iadd(le),te.iushrn(1);for(var Q=0,se=1;(Y.words[0]&se)===0&&Q<26;++Q,se<<=1);if(Q>0)for(Y.iushrn(Q);Q-- >0;)oe.isOdd()&&oe.iadd(le),oe.iushrn(1);z.cmp(Y)>=0?(z.isub(Y),te.isub(oe)):(Y.isub(z),oe.isub(te))}var Ae;return z.cmpn(1)===0?Ae=te:Ae=oe,Ae.cmpn(0)<0&&Ae.iadd(O),Ae},T.prototype.gcd=function(O){if(this.isZero())return O.abs();if(O.isZero())return this.abs();var z=this.clone(),Y=O.clone();z.negative=0,Y.negative=0;for(var te=0;z.isEven()&&Y.isEven();te++)z.iushrn(1),Y.iushrn(1);do{for(;z.isEven();)z.iushrn(1);for(;Y.isEven();)Y.iushrn(1);var oe=z.cmp(Y);if(oe<0){var le=z;z=Y,Y=le}else if(oe===0||Y.cmpn(1)===0)break;z.isub(Y)}while(!0);return Y.iushln(te)},T.prototype.invm=function(O){return this.egcd(O).a.umod(O)},T.prototype.isEven=function(){return(this.words[0]&1)===0},T.prototype.isOdd=function(){return(this.words[0]&1)===1},T.prototype.andln=function(O){return this.words[0]&O},T.prototype.bincn=function(O){I(typeof O=="number");var z=O%26,Y=(O-z)/26,te=1<<z;if(this.length<=Y)return this._expand(Y+1),this.words[Y]|=te,this;for(var oe=te,le=Y;oe!==0&&le<this.length;le++){var he=this.words[le]|0;he+=oe,oe=he>>>26,he&=67108863,this.words[le]=he}return oe!==0&&(this.words[le]=oe,this.length++),this},T.prototype.isZero=function(){return this.length===1&&this.words[0]===0},T.prototype.cmpn=function(O){var z=O<0;if(this.negative!==0&&!z)return-1;if(this.negative===0&&z)return 1;this.strip();var Y;if(this.length>1)Y=1;else{z&&(O=-O),I(O<=67108863,"Number is too big");var te=this.words[0]|0;Y=te===O?0:te<O?-1:1}return this.negative!==0?-Y|0:Y},T.prototype.cmp=function(O){if(this.negative!==0&&O.negative===0)return-1;if(this.negative===0&&O.negative!==0)return 1;var z=this.ucmp(O);return this.negative!==0?-z|0:z},T.prototype.ucmp=function(O){if(this.length>O.length)return 1;if(this.length<O.length)return-1;for(var z=0,Y=this.length-1;Y>=0;Y--){var te=this.words[Y]|0,oe=O.words[Y]|0;if(te!==oe){te<oe?z=-1:te>oe&&(z=1);break}}return z},T.prototype.gtn=function(O){return this.cmpn(O)===1},T.prototype.gt=function(O){return this.cmp(O)===1},T.prototype.gten=function(O){return this.cmpn(O)>=0},T.prototype.gte=function(O){return this.cmp(O)>=0},T.prototype.ltn=function(O){return this.cmpn(O)===-1},T.prototype.lt=function(O){return this.cmp(O)===-1},T.prototype.lten=function(O){return this.cmpn(O)<=0},T.prototype.lte=function(O){return this.cmp(O)<=0},T.prototype.eqn=function(O){return this.cmpn(O)===0},T.prototype.eq=function(O){return this.cmp(O)===0},T.red=function(O){return new be(O)},T.prototype.toRed=function(O){return I(!this.red,"Already a number in reduction context"),I(this.negative===0,"red works only with positives"),O.convertTo(this)._forceRed(O)},T.prototype.fromRed=function(){return I(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},T.prototype._forceRed=function(O){return this.red=O,this},T.prototype.forceRed=function(O){return I(!this.red,"Already a number in reduction context"),this._forceRed(O)},T.prototype.redAdd=function(O){return I(this.red,"redAdd works only with red numbers"),this.red.add(this,O)},T.prototype.redIAdd=function(O){return I(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,O)},T.prototype.redSub=function(O){return I(this.red,"redSub works only with red numbers"),this.red.sub(this,O)},T.prototype.redISub=function(O){return I(this.red,"redISub works only with red numbers"),this.red.isub(this,O)},T.prototype.redShl=function(O){return I(this.red,"redShl works only with red numbers"),this.red.shl(this,O)},T.prototype.redMul=function(O){return I(this.red,"redMul works only with red numbers"),this.red._verify2(this,O),this.red.mul(this,O)},T.prototype.redIMul=function(O){return I(this.red,"redMul works only with red numbers"),this.red._verify2(this,O),this.red.imul(this,O)},T.prototype.redSqr=function(){return I(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},T.prototype.redISqr=function(){return I(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},T.prototype.redSqrt=function(){return I(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},T.prototype.redInvm=function(){return I(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},T.prototype.redNeg=function(){return I(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},T.prototype.redPow=function(O){return I(this.red&&!O.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,O)};var fe={k256:null,p224:null,p192:null,p25519:null};function de(ue,O){this.name=ue,this.p=new T(O,16),this.n=this.p.bitLength(),this.k=new T(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}de.prototype._tmp=function(){var O=new T(null);return O.words=new Array(Math.ceil(this.n/13)),O},de.prototype.ireduce=function(O){var z=O,Y;do this.split(z,this.tmp),z=this.imulK(z),z=z.iadd(this.tmp),Y=z.bitLength();while(Y>this.n);var te=Y<this.n?-1:z.ucmp(this.p);return te===0?(z.words[0]=0,z.length=1):te>0?z.isub(this.p):z.strip!==void 0?z.strip():z._strip(),z},de.prototype.split=function(O,z){O.iushrn(this.n,0,z)},de.prototype.imulK=function(O){return O.imul(this.k)};function pe(){de.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}B(pe,de),pe.prototype.split=function(O,z){for(var Y=4194303,te=Math.min(O.length,9),oe=0;oe<te;oe++)z.words[oe]=O.words[oe];if(z.length=te,O.length<=9){O.words[0]=0,O.length=1;return}var le=O.words[9];for(z.words[z.length++]=le&Y,oe=10;oe<O.length;oe++){var he=O.words[oe]|0;O.words[oe-10]=(he&Y)<<4|le>>>22,le=he}le>>>=22,O.words[oe-10]=le,le===0&&O.length>10?O.length-=10:O.length-=9},pe.prototype.imulK=function(O){O.words[O.length]=0,O.words[O.length+1]=0,O.length+=2;for(var z=0,Y=0;Y<O.length;Y++){var te=O.words[Y]|0;z+=te*977,O.words[Y]=z&67108863,z=te*64+(z/67108864|0)}return O.words[O.length-1]===0&&(O.length--,O.words[O.length-1]===0&&O.length--),O};function ve(){de.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}B(ve,de);function ye(){de.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}B(ye,de);function _e(){de.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}B(_e,de),_e.prototype.imulK=function(O){for(var z=0,Y=0;Y<O.length;Y++){var te=(O.words[Y]|0)*19+z,oe=te&67108863;te>>>=26,O.words[Y]=oe,z=te}return z!==0&&(O.words[O.length++]=z),O},T._prime=function(O){if(fe[O])return fe[O];var z;if(O==="k256")z=new pe;else if(O==="p224")z=new ve;else if(O==="p192")z=new ye;else if(O==="p25519")z=new _e;else throw new Error("Unknown prime "+O);return fe[O]=z,z};function be(ue){if(typeof ue=="string"){var O=T._prime(ue);this.m=O.p,this.prime=O}else I(ue.gtn(1),"modulus must be greater than 1"),this.m=ue,this.prime=null}be.prototype._verify1=function(O){I(O.negative===0,"red works only with positives"),I(O.red,"red works only with red numbers")},be.prototype._verify2=function(O,z){I((O.negative|z.negative)===0,"red works only with positives"),I(O.red&&O.red===z.red,"red works only with red numbers")},be.prototype.imod=function(O){return this.prime?this.prime.ireduce(O)._forceRed(this):O.umod(this.m)._forceRed(this)},be.prototype.neg=function(O){return O.isZero()?O.clone():this.m.sub(O)._forceRed(this)},be.prototype.add=function(O,z){this._verify2(O,z);var Y=O.add(z);return Y.cmp(this.m)>=0&&Y.isub(this.m),Y._forceRed(this)},be.prototype.iadd=function(O,z){this._verify2(O,z);var Y=O.iadd(z);return Y.cmp(this.m)>=0&&Y.isub(this.m),Y},be.prototype.sub=function(O,z){this._verify2(O,z);var Y=O.sub(z);return Y.cmpn(0)<0&&Y.iadd(this.m),Y._forceRed(this)},be.prototype.isub=function(O,z){this._verify2(O,z);var Y=O.isub(z);return Y.cmpn(0)<0&&Y.iadd(this.m),Y},be.prototype.shl=function(O,z){return this._verify1(O),this.imod(O.ushln(z))},be.prototype.imul=function(O,z){return this._verify2(O,z),this.imod(O.imul(z))},be.prototype.mul=function(O,z){return this._verify2(O,z),this.imod(O.mul(z))},be.prototype.isqr=function(O){return this.imul(O,O.clone())},be.prototype.sqr=function(O){return this.mul(O,O)},be.prototype.sqrt=function(O){if(O.isZero())return O.clone();var z=this.m.andln(3);if(I(z%2===1),z===3){var Y=this.m.add(new T(1)).iushrn(2);return this.pow(O,Y)}for(var te=this.m.subn(1),oe=0;!te.isZero()&&te.andln(1)===0;)oe++,te.iushrn(1);I(!te.isZero());var le=new T(1).toRed(this),he=le.redNeg(),ae=this.m.subn(1).iushrn(1),Q=this.m.bitLength();for(Q=new T(2*Q*Q).toRed(this);this.pow(Q,ae).cmp(he)!==0;)Q.redIAdd(he);for(var se=this.pow(Q,te),Ae=this.pow(O,te.addn(1).iushrn(1)),ge=this.pow(O,te),Ee=oe;ge.cmp(le)!==0;){for(var ke=ge,Se=0;ke.cmp(le)!==0;Se++)ke=ke.redSqr();I(Se<Ee);var Ie=this.pow(se,new T(1).iushln(Ee-Se-1));Ae=Ae.redMul(Ie),se=Ie.redSqr(),ge=ge.redMul(se),Ee=Se}return Ae},be.prototype.invm=function(O){var z=O._invmp(this.m);return z.negative!==0?(z.negative=0,this.imod(z).redNeg()):this.imod(z)},be.prototype.pow=function(O,z){if(z.isZero())return new T(1).toRed(this);if(z.cmpn(1)===0)return O.clone();var Y=4,te=new Array(1<<Y);te[0]=new T(1).toRed(this),te[1]=O;for(var oe=2;oe<te.length;oe++)te[oe]=this.mul(te[oe-1],O);var le=te[0],he=0,ae=0,Q=z.bitLength()%26;for(Q===0&&(Q=26),oe=z.length-1;oe>=0;oe--){for(var se=z.words[oe],Ae=Q-1;Ae>=0;Ae--){var ge=se>>Ae&1;if(le!==te[0]&&(le=this.sqr(le)),ge===0&&he===0){ae=0;continue}he<<=1,he|=ge,ae++,!(ae!==Y&&(oe!==0||Ae!==0))&&(le=this.mul(le,te[he]),ae=0,he=0)}Q=26}return le},be.prototype.convertTo=function(O){var z=O.umod(this.m);return z===O?z.clone():z},be.prototype.convertFrom=function(O){var z=O.clone();return z.red=null,z},T.mont=function(O){return new Te(O)};function Te(ue){be.call(this,ue),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new T(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}B(Te,be),Te.prototype.convertTo=function(O){return this.imod(O.ushln(this.shift))},Te.prototype.convertFrom=function(O){var z=this.imod(O.mul(this.rinv));return z.red=null,z},Te.prototype.imul=function(O,z){if(O.isZero()||z.isZero())return O.words[0]=0,O.length=1,O;var Y=O.imul(z),te=Y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),oe=Y.isub(te).iushrn(this.shift),le=oe;return oe.cmp(this.m)>=0?le=oe.isub(this.m):oe.cmpn(0)<0&&(le=oe.iadd(this.m)),le._forceRed(this)},Te.prototype.mul=function(O,z){if(O.isZero()||z.isZero())return new T(0)._forceRed(this);var Y=O.mul(z),te=Y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),oe=Y.isub(te).iushrn(this.shift),le=oe;return oe.cmp(this.m)>=0?le=oe.isub(this.m):oe.cmpn(0)<0&&(le=oe.iadd(this.m)),le._forceRed(this)},Te.prototype.invm=function(O){var z=this.imod(O._invmp(this.m).mul(this.r2));return z._forceRed(this)}})(E,bn$4)})(bn$5)),bn$5.exports}var api$2={},vmBrowserify={},hasRequiredVmBrowserify;function requireVmBrowserify(){return hasRequiredVmBrowserify||(hasRequiredVmBrowserify=1,(function(exports){var indexOf=function(E,A){if(E.indexOf)return E.indexOf(A);for(var _=0;_<E.length;_++)if(E[_]===A)return _;return-1},Object_keys=function(E){if(Object.keys)return Object.keys(E);var A=[];for(var _ in E)A.push(_);return A},forEach=function(E,A){if(E.forEach)return E.forEach(A);for(var _=0;_<E.length;_++)A(E[_],_,E)},defineProp=(function(){try{return Object.defineProperty({},"_",{}),function(E,A,_){Object.defineProperty(E,A,{writable:!0,enumerable:!1,configurable:!0,value:_})}}catch{return function(A,_,I){A[_]=I}}})(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(A){if(!(this instanceof Script))return new Script(A);this.code=A};Script.prototype.runInContext=function(E){if(!(E instanceof Context))throw new TypeError("needs a 'context' argument.");var A=document.createElement("iframe");A.style||(A.style={}),A.style.display="none",document.body.appendChild(A);var _=A.contentWindow,I=_.eval,B=_.execScript;!I&&B&&(B.call(_,"null"),I=_.eval),forEach(Object_keys(E),function(P){_[P]=E[P]}),forEach(globals,function(P){E[P]&&(_[P]=E[P])});var T=Object_keys(_),R=I.call(_,this.code);return forEach(Object_keys(_),function(P){(P in E||indexOf(T,P)===-1)&&(E[P]=_[P])}),forEach(globals,function(P){P in E||defineProp(E,P,_[P])}),document.body.removeChild(A),R},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(E){var A=Script.createContext(E),_=this.runInContext(A);return E&&forEach(Object_keys(A),function(I){E[I]=A[I]}),_},forEach(Object_keys(Script.prototype),function(E){exports[E]=Script[E]=function(A){var _=Script(A);return _[E].apply(_,[].slice.call(arguments,1))}}),exports.isContext=function(E){return E instanceof Context},exports.createScript=function(E){return exports.Script(E)},exports.createContext=Script.createContext=function(E){var A=new Context;return typeof E=="object"&&forEach(Object_keys(E),function(_){A[_]=E[_]}),A}})(vmBrowserify)),vmBrowserify}var hasRequiredApi;function requireApi(){return hasRequiredApi||(hasRequiredApi=1,(function(E){var A=requireAsn1$1(),_=requireInherits_browser(),I=E;I.define=function(R,P){return new B(R,P)};function B(T,R){this.name=T,this.body=R,this.decoders={},this.encoders={}}B.prototype._createNamed=function(R){var P;try{P=requireVmBrowserify().runInThisContext("(function "+this.name+`(entity) {
  this._initNamed(entity);
})`)}catch{P=function(F){this._initNamed(F)}}return _(P,R),P.prototype._initNamed=function(F){R.call(this,F)},new P(this)},B.prototype._getDecoder=function(R){return R=R||"der",this.decoders.hasOwnProperty(R)||(this.decoders[R]=this._createNamed(A.decoders[R])),this.decoders[R]},B.prototype.decode=function(R,P,D){return this._getDecoder(P).decode(R,D)},B.prototype._getEncoder=function(R){return R=R||"der",this.encoders.hasOwnProperty(R)||(this.encoders[R]=this._createNamed(A.encoders[R])),this.encoders[R]},B.prototype.encode=function(R,P,D){return this._getEncoder(P).encode(R,D)}})(api$2)),api$2}var base={},reporter={},hasRequiredReporter;function requireReporter(){if(hasRequiredReporter)return reporter;hasRequiredReporter=1;var E=requireInherits_browser();function A(I){this._reporterState={obj:null,path:[],options:I||{},errors:[]}}reporter.Reporter=A,A.prototype.isError=function(B){return B instanceof _},A.prototype.save=function(){var B=this._reporterState;return{obj:B.obj,pathLen:B.path.length}},A.prototype.restore=function(B){var T=this._reporterState;T.obj=B.obj,T.path=T.path.slice(0,B.pathLen)},A.prototype.enterKey=function(B){return this._reporterState.path.push(B)},A.prototype.exitKey=function(B){var T=this._reporterState;T.path=T.path.slice(0,B-1)},A.prototype.leaveKey=function(B,T,R){var P=this._reporterState;this.exitKey(B),P.obj!==null&&(P.obj[T]=R)},A.prototype.path=function(){return this._reporterState.path.join("/")},A.prototype.enterObject=function(){var B=this._reporterState,T=B.obj;return B.obj={},T},A.prototype.leaveObject=function(B){var T=this._reporterState,R=T.obj;return T.obj=B,R},A.prototype.error=function(B){var T,R=this._reporterState,P=B instanceof _;if(P?T=B:T=new _(R.path.map(function(D){return"["+JSON.stringify(D)+"]"}).join(""),B.message||B,B.stack),!R.options.partial)throw T;return P||R.errors.push(T),T},A.prototype.wrapResult=function(B){var T=this._reporterState;return T.options.partial?{result:this.isError(B)?null:B,errors:T.errors}:B};function _(I,B){this.path=I,this.rethrow(B)}return E(_,Error),_.prototype.rethrow=function(B){if(this.message=B+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,_),!this.stack)try{throw new Error(this.message)}catch(T){this.stack=T.stack}return this},reporter}var buffer={},hasRequiredBuffer;function requireBuffer(){if(hasRequiredBuffer)return buffer;hasRequiredBuffer=1;var E=requireInherits_browser(),A=requireBase().Reporter,_=requireDist$1().Buffer;function I(T,R){if(A.call(this,R),!_.isBuffer(T)){this.error("Input not Buffer");return}this.base=T,this.offset=0,this.length=T.length}E(I,A),buffer.DecoderBuffer=I,I.prototype.save=function(){return{offset:this.offset,reporter:A.prototype.save.call(this)}},I.prototype.restore=function(R){var P=new I(this.base);return P.offset=R.offset,P.length=this.offset,this.offset=R.offset,A.prototype.restore.call(this,R.reporter),P},I.prototype.isEmpty=function(){return this.offset===this.length},I.prototype.readUInt8=function(R){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(R||"DecoderBuffer overrun")},I.prototype.skip=function(R,P){if(!(this.offset+R<=this.length))return this.error(P||"DecoderBuffer overrun");var D=new I(this.base);return D._reporterState=this._reporterState,D.offset=this.offset,D.length=this.offset+R,this.offset+=R,D},I.prototype.raw=function(R){return this.base.slice(R?R.offset:this.offset,this.length)};function B(T,R){if(Array.isArray(T))this.length=0,this.value=T.map(function(P){return P instanceof B||(P=new B(P,R)),this.length+=P.length,P},this);else if(typeof T=="number"){if(!(0<=T&&T<=255))return R.error("non-byte EncoderBuffer value");this.value=T,this.length=1}else if(typeof T=="string")this.value=T,this.length=_.byteLength(T);else if(_.isBuffer(T))this.value=T,this.length=T.length;else return R.error("Unsupported type: "+typeof T)}return buffer.EncoderBuffer=B,B.prototype.join=function(R,P){return R||(R=new _(this.length)),P||(P=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(D){D.join(R,P),P+=D.length}):(typeof this.value=="number"?R[P]=this.value:typeof this.value=="string"?R.write(this.value,P):_.isBuffer(this.value)&&this.value.copy(R,P),P+=this.length)),R},buffer}var node,hasRequiredNode;function requireNode(){if(hasRequiredNode)return node;hasRequiredNode=1;var E=requireBase().Reporter,A=requireBase().EncoderBuffer,_=requireBase().DecoderBuffer,I=requireMinimalisticAssert(),B=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],T=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(B),R=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function P(F,L){var U={};this._baseState=U,U.enc=F,U.parent=L||null,U.children=null,U.tag=null,U.args=null,U.reverseArgs=null,U.choice=null,U.optional=!1,U.any=!1,U.obj=!1,U.use=null,U.useDecoder=null,U.key=null,U.default=null,U.explicit=null,U.implicit=null,U.contains=null,U.parent||(U.children=[],this._wrap())}node=P;var D=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];return P.prototype.clone=function(){var L=this._baseState,U={};D.forEach(function(K){U[K]=L[K]});var V=new this.constructor(U.parent);return V._baseState=U,V},P.prototype._wrap=function(){var L=this._baseState;T.forEach(function(U){this[U]=function(){var K=new this.constructor(this);return L.children.push(K),K[U].apply(K,arguments)}},this)},P.prototype._init=function(L){var U=this._baseState;I(U.parent===null),L.call(this),U.children=U.children.filter(function(V){return V._baseState.parent===this},this),I.equal(U.children.length,1,"Root node can have only one child")},P.prototype._useArgs=function(L){var U=this._baseState,V=L.filter(function(K){return K instanceof this.constructor},this);L=L.filter(function(K){return!(K instanceof this.constructor)},this),V.length!==0&&(I(U.children===null),U.children=V,V.forEach(function(K){K._baseState.parent=this},this)),L.length!==0&&(I(U.args===null),U.args=L,U.reverseArgs=L.map(function(K){if(typeof K!="object"||K.constructor!==Object)return K;var J={};return Object.keys(K).forEach(function(ee){ee==(ee|0)&&(ee|=0);var ie=K[ee];J[ie]=ee}),J}))},R.forEach(function(F){P.prototype[F]=function(){var U=this._baseState;throw new Error(F+" not implemented for encoding: "+U.enc)}}),B.forEach(function(F){P.prototype[F]=function(){var U=this._baseState,V=Array.prototype.slice.call(arguments);return I(U.tag===null),U.tag=F,this._useArgs(V),this}}),P.prototype.use=function(L){I(L);var U=this._baseState;return I(U.use===null),U.use=L,this},P.prototype.optional=function(){var L=this._baseState;return L.optional=!0,this},P.prototype.def=function(L){var U=this._baseState;return I(U.default===null),U.default=L,U.optional=!0,this},P.prototype.explicit=function(L){var U=this._baseState;return I(U.explicit===null&&U.implicit===null),U.explicit=L,this},P.prototype.implicit=function(L){var U=this._baseState;return I(U.explicit===null&&U.implicit===null),U.implicit=L,this},P.prototype.obj=function(){var L=this._baseState,U=Array.prototype.slice.call(arguments);return L.obj=!0,U.length!==0&&this._useArgs(U),this},P.prototype.key=function(L){var U=this._baseState;return I(U.key===null),U.key=L,this},P.prototype.any=function(){var L=this._baseState;return L.any=!0,this},P.prototype.choice=function(L){var U=this._baseState;return I(U.choice===null),U.choice=L,this._useArgs(Object.keys(L).map(function(V){return L[V]})),this},P.prototype.contains=function(L){var U=this._baseState;return I(U.use===null),U.contains=L,this},P.prototype._decode=function(L,U){var V=this._baseState;if(V.parent===null)return L.wrapResult(V.children[0]._decode(L,U));var K=V.default,J=!0,ee=null;if(V.key!==null&&(ee=L.enterKey(V.key)),V.optional){var ie=null;if(V.explicit!==null?ie=V.explicit:V.implicit!==null?ie=V.implicit:V.tag!==null&&(ie=V.tag),ie===null&&!V.any){var ne=L.save();try{V.choice===null?this._decodeGeneric(V.tag,L,U):this._decodeChoice(L,U),J=!0}catch{J=!1}L.restore(ne)}else if(J=this._peekTag(L,ie,V.any),L.isError(J))return J}var ce;if(V.obj&&J&&(ce=L.enterObject()),J){if(V.explicit!==null){var fe=this._decodeTag(L,V.explicit);if(L.isError(fe))return fe;L=fe}var de=L.offset;if(V.use===null&&V.choice===null){if(V.any)var ne=L.save();var pe=this._decodeTag(L,V.implicit!==null?V.implicit:V.tag,V.any);if(L.isError(pe))return pe;V.any?K=L.raw(ne):L=pe}if(U&&U.track&&V.tag!==null&&U.track(L.path(),de,L.length,"tagged"),U&&U.track&&V.tag!==null&&U.track(L.path(),L.offset,L.length,"content"),V.any?K=K:V.choice===null?K=this._decodeGeneric(V.tag,L,U):K=this._decodeChoice(L,U),L.isError(K))return K;if(!V.any&&V.choice===null&&V.children!==null&&V.children.forEach(function(_e){_e._decode(L,U)}),V.contains&&(V.tag==="octstr"||V.tag==="bitstr")){var ve=new _(K);K=this._getUse(V.contains,L._reporterState.obj)._decode(ve,U)}}return V.obj&&J&&(K=L.leaveObject(ce)),V.key!==null&&(K!==null||J===!0)?L.leaveKey(ee,V.key,K):ee!==null&&L.exitKey(ee),K},P.prototype._decodeGeneric=function(L,U,V){var K=this._baseState;return L==="seq"||L==="set"?null:L==="seqof"||L==="setof"?this._decodeList(U,L,K.args[0],V):/str$/.test(L)?this._decodeStr(U,L,V):L==="objid"&&K.args?this._decodeObjid(U,K.args[0],K.args[1],V):L==="objid"?this._decodeObjid(U,null,null,V):L==="gentime"||L==="utctime"?this._decodeTime(U,L,V):L==="null_"?this._decodeNull(U,V):L==="bool"?this._decodeBool(U,V):L==="objDesc"?this._decodeStr(U,L,V):L==="int"||L==="enum"?this._decodeInt(U,K.args&&K.args[0],V):K.use!==null?this._getUse(K.use,U._reporterState.obj)._decode(U,V):U.error("unknown tag: "+L)},P.prototype._getUse=function(L,U){var V=this._baseState;return V.useDecoder=this._use(L,U),I(V.useDecoder._baseState.parent===null),V.useDecoder=V.useDecoder._baseState.children[0],V.implicit!==V.useDecoder._baseState.implicit&&(V.useDecoder=V.useDecoder.clone(),V.useDecoder._baseState.implicit=V.implicit),V.useDecoder},P.prototype._decodeChoice=function(L,U){var V=this._baseState,K=null,J=!1;return Object.keys(V.choice).some(function(ee){var ie=L.save(),ne=V.choice[ee];try{var ce=ne._decode(L,U);if(L.isError(ce))return!1;K={type:ee,value:ce},J=!0}catch{return L.restore(ie),!1}return!0},this),J?K:L.error("Choice not matched")},P.prototype._createEncoderBuffer=function(L){return new A(L,this.reporter)},P.prototype._encode=function(L,U,V){var K=this._baseState;if(!(K.default!==null&&K.default===L)){var J=this._encodeValue(L,U,V);if(J!==void 0&&!this._skipDefault(J,U,V))return J}},P.prototype._encodeValue=function(L,U,V){var K=this._baseState;if(K.parent===null)return K.children[0]._encode(L,U||new E);var ne=null;if(this.reporter=U,K.optional&&L===void 0)if(K.default!==null)L=K.default;else return;var J=null,ee=!1;if(K.any)ne=this._createEncoderBuffer(L);else if(K.choice)ne=this._encodeChoice(L,U);else if(K.contains)J=this._getUse(K.contains,V)._encode(L,U),ee=!0;else if(K.children)J=K.children.map(function(de){if(de._baseState.tag==="null_")return de._encode(null,U,L);if(de._baseState.key===null)return U.error("Child should have a key");var pe=U.enterKey(de._baseState.key);if(typeof L!="object")return U.error("Child expected, but input is not object");var ve=de._encode(L[de._baseState.key],U,L);return U.leaveKey(pe),ve},this).filter(function(de){return de}),J=this._createEncoderBuffer(J);else if(K.tag==="seqof"||K.tag==="setof"){if(!(K.args&&K.args.length===1))return U.error("Too many args for : "+K.tag);if(!Array.isArray(L))return U.error("seqof/setof, but data is not Array");var ie=this.clone();ie._baseState.implicit=null,J=this._createEncoderBuffer(L.map(function(de){var pe=this._baseState;return this._getUse(pe.args[0],L)._encode(de,U)},ie))}else K.use!==null?ne=this._getUse(K.use,V)._encode(L,U):(J=this._encodePrimitive(K.tag,L),ee=!0);var ne;if(!K.any&&K.choice===null){var ce=K.implicit!==null?K.implicit:K.tag,fe=K.implicit===null?"universal":"context";ce===null?K.use===null&&U.error("Tag could be omitted only for .use()"):K.use===null&&(ne=this._encodeComposite(ce,ee,fe,J))}return K.explicit!==null&&(ne=this._encodeComposite(K.explicit,!1,"context",ne)),ne},P.prototype._encodeChoice=function(L,U){var V=this._baseState,K=V.choice[L.type];return K||I(!1,L.type+" not found in "+JSON.stringify(Object.keys(V.choice))),K._encode(L.value,U)},P.prototype._encodePrimitive=function(L,U){var V=this._baseState;if(/str$/.test(L))return this._encodeStr(U,L);if(L==="objid"&&V.args)return this._encodeObjid(U,V.reverseArgs[0],V.args[1]);if(L==="objid")return this._encodeObjid(U,null,null);if(L==="gentime"||L==="utctime")return this._encodeTime(U,L);if(L==="null_")return this._encodeNull();if(L==="int"||L==="enum")return this._encodeInt(U,V.args&&V.reverseArgs[0]);if(L==="bool")return this._encodeBool(U);if(L==="objDesc")return this._encodeStr(U,L);throw new Error("Unsupported tag: "+L)},P.prototype._isNumstr=function(L){return/^[0-9 ]*$/.test(L)},P.prototype._isPrintstr=function(L){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(L)},node}var hasRequiredBase;function requireBase(){return hasRequiredBase||(hasRequiredBase=1,(function(E){var A=E;A.Reporter=requireReporter().Reporter,A.DecoderBuffer=requireBuffer().DecoderBuffer,A.EncoderBuffer=requireBuffer().EncoderBuffer,A.Node=requireNode()})(base)),base}var constants$1={},der={},hasRequiredDer$2;function requireDer$2(){return hasRequiredDer$2||(hasRequiredDer$2=1,(function(E){var A=requireConstants$1();E.tagClass={0:"universal",1:"application",2:"context",3:"private"},E.tagClassByName=A._reverse(E.tagClass),E.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},E.tagByName=A._reverse(E.tag)})(der)),der}var hasRequiredConstants$1;function requireConstants$1(){return hasRequiredConstants$1||(hasRequiredConstants$1=1,(function(E){var A=E;A._reverse=function(I){var B={};return Object.keys(I).forEach(function(T){(T|0)==T&&(T=T|0);var R=I[T];B[R]=T}),B},A.der=requireDer$2()})(constants$1)),constants$1}var decoders={},der_1$1,hasRequiredDer$1;function requireDer$1(){if(hasRequiredDer$1)return der_1$1;hasRequiredDer$1=1;var E=requireInherits_browser(),A=requireAsn1$1(),_=A.base,I=A.bignum,B=A.constants.der;function T(F){this.enc="der",this.name=F.name,this.entity=F,this.tree=new R,this.tree._init(F.body)}der_1$1=T,T.prototype.decode=function(L,U){return L instanceof _.DecoderBuffer||(L=new _.DecoderBuffer(L,U)),this.tree._decode(L,U)};function R(F){_.Node.call(this,"der",F)}E(R,_.Node),R.prototype._peekTag=function(L,U,V){if(L.isEmpty())return!1;var K=L.save(),J=P(L,'Failed to peek tag: "'+U+'"');return L.isError(J)?J:(L.restore(K),J.tag===U||J.tagStr===U||J.tagStr+"of"===U||V)},R.prototype._decodeTag=function(L,U,V){var K=P(L,'Failed to decode tag of "'+U+'"');if(L.isError(K))return K;var J=D(L,K.primitive,'Failed to get length of "'+U+'"');if(L.isError(J))return J;if(!V&&K.tag!==U&&K.tagStr!==U&&K.tagStr+"of"!==U)return L.error('Failed to match tag: "'+U+'"');if(K.primitive||J!==null)return L.skip(J,'Failed to match body of: "'+U+'"');var ee=L.save(),ie=this._skipUntilEnd(L,'Failed to skip indefinite length body: "'+this.tag+'"');return L.isError(ie)?ie:(J=L.offset-ee.offset,L.restore(ee),L.skip(J,'Failed to match body of: "'+U+'"'))},R.prototype._skipUntilEnd=function(L,U){for(;;){var V=P(L,U);if(L.isError(V))return V;var K=D(L,V.primitive,U);if(L.isError(K))return K;var J;if(V.primitive||K!==null?J=L.skip(K):J=this._skipUntilEnd(L,U),L.isError(J))return J;if(V.tagStr==="end")break}},R.prototype._decodeList=function(L,U,V,K){for(var J=[];!L.isEmpty();){var ee=this._peekTag(L,"end");if(L.isError(ee))return ee;var ie=V.decode(L,"der",K);if(L.isError(ie)&&ee)break;J.push(ie)}return J},R.prototype._decodeStr=function(L,U){if(U==="bitstr"){var V=L.readUInt8();return L.isError(V)?V:{unused:V,data:L.raw()}}else if(U==="bmpstr"){var K=L.raw();if(K.length%2===1)return L.error("Decoding of string type: bmpstr length mismatch");for(var J="",ee=0;ee<K.length/2;ee++)J+=String.fromCharCode(K.readUInt16BE(ee*2));return J}else if(U==="numstr"){var ie=L.raw().toString("ascii");return this._isNumstr(ie)?ie:L.error("Decoding of string type: numstr unsupported characters")}else{if(U==="octstr")return L.raw();if(U==="objDesc")return L.raw();if(U==="printstr"){var ne=L.raw().toString("ascii");return this._isPrintstr(ne)?ne:L.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(U)?L.raw().toString():L.error("Decoding of string type: "+U+" unsupported")}},R.prototype._decodeObjid=function(L,U,V){for(var K,J=[],ee=0;!L.isEmpty();){var ie=L.readUInt8();ee<<=7,ee|=ie&127,(ie&128)===0&&(J.push(ee),ee=0)}ie&128&&J.push(ee);var ne=J[0]/40|0,ce=J[0]%40;if(V?K=J:K=[ne,ce].concat(J.slice(1)),U){var fe=U[K.join(" ")];fe===void 0&&(fe=U[K.join(".")]),fe!==void 0&&(K=fe)}return K},R.prototype._decodeTime=function(L,U){var V=L.raw().toString();if(U==="gentime")var K=V.slice(0,4)|0,J=V.slice(4,6)|0,ee=V.slice(6,8)|0,ie=V.slice(8,10)|0,ne=V.slice(10,12)|0,ce=V.slice(12,14)|0;else if(U==="utctime"){var K=V.slice(0,2)|0,J=V.slice(2,4)|0,ee=V.slice(4,6)|0,ie=V.slice(6,8)|0,ne=V.slice(8,10)|0,ce=V.slice(10,12)|0;K<70?K=2e3+K:K=1900+K}else return L.error("Decoding "+U+" time is not supported yet");return Date.UTC(K,J-1,ee,ie,ne,ce,0)},R.prototype._decodeNull=function(L){return null},R.prototype._decodeBool=function(L){var U=L.readUInt8();return L.isError(U)?U:U!==0},R.prototype._decodeInt=function(L,U){var V=L.raw(),K=new I(V);return U&&(K=U[K.toString(10)]||K),K},R.prototype._use=function(L,U){return typeof L=="function"&&(L=L(U)),L._getDecoder("der").tree};function P(F,L){var U=F.readUInt8(L);if(F.isError(U))return U;var V=B.tagClass[U>>6],K=(U&32)===0;if((U&31)===31){var J=U;for(U=0;(J&128)===128;){if(J=F.readUInt8(L),F.isError(J))return J;U<<=7,U|=J&127}}else U&=31;var ee=B.tag[U];return{cls:V,primitive:K,tag:U,tagStr:ee}}function D(F,L,U){var V=F.readUInt8(U);if(F.isError(V))return V;if(!L&&V===128)return null;if((V&128)===0)return V;var K=V&127;if(K>4)return F.error("length octect is too long");V=0;for(var J=0;J<K;J++){V<<=8;var ee=F.readUInt8(U);if(F.isError(ee))return ee;V|=ee}return V}return der_1$1}var pem$2,hasRequiredPem$2;function requirePem$2(){if(hasRequiredPem$2)return pem$2;hasRequiredPem$2=1;var E=requireInherits_browser(),A=requireDist$1().Buffer,_=requireDer$1();function I(B){_.call(this,B),this.enc="pem"}return E(I,_),pem$2=I,I.prototype.decode=function(T,R){for(var P=T.toString().split(/[\r\n]+/g),D=R.label.toUpperCase(),F=/^-----(BEGIN|END) ([^-]+)-----$/,L=-1,U=-1,V=0;V<P.length;V++){var K=P[V].match(F);if(K!==null&&K[2]===D)if(L===-1){if(K[1]!=="BEGIN")break;L=V}else{if(K[1]!=="END")break;U=V;break}}if(L===-1||U===-1)throw new Error("PEM section not found for: "+D);var J=P.slice(L+1,U).join("");J.replace(/[^a-z0-9\+\/=]+/gi,"");var ee=new A(J,"base64");return _.prototype.decode.call(this,ee,R)},pem$2}var hasRequiredDecoders;function requireDecoders(){return hasRequiredDecoders||(hasRequiredDecoders=1,(function(E){var A=E;A.der=requireDer$1(),A.pem=requirePem$2()})(decoders)),decoders}var encoders={},der_1,hasRequiredDer;function requireDer(){if(hasRequiredDer)return der_1;hasRequiredDer=1;var E=requireInherits_browser(),A=requireDist$1().Buffer,_=requireAsn1$1(),I=_.base,B=_.constants.der;function T(F){this.enc="der",this.name=F.name,this.entity=F,this.tree=new R,this.tree._init(F.body)}der_1=T,T.prototype.encode=function(L,U){return this.tree._encode(L,U).join()};function R(F){I.Node.call(this,"der",F)}E(R,I.Node),R.prototype._encodeComposite=function(L,U,V,K){var J=D(L,U,V,this.reporter);if(K.length<128){var ne=new A(2);return ne[0]=J,ne[1]=K.length,this._createEncoderBuffer([ne,K])}for(var ee=1,ie=K.length;ie>=256;ie>>=8)ee++;var ne=new A(2+ee);ne[0]=J,ne[1]=128|ee;for(var ie=1+ee,ce=K.length;ce>0;ie--,ce>>=8)ne[ie]=ce&255;return this._createEncoderBuffer([ne,K])},R.prototype._encodeStr=function(L,U){if(U==="bitstr")return this._createEncoderBuffer([L.unused|0,L.data]);if(U==="bmpstr"){for(var V=new A(L.length*2),K=0;K<L.length;K++)V.writeUInt16BE(L.charCodeAt(K),K*2);return this._createEncoderBuffer(V)}else return U==="numstr"?this._isNumstr(L)?this._createEncoderBuffer(L):this.reporter.error("Encoding of string type: numstr supports only digits and space"):U==="printstr"?this._isPrintstr(L)?this._createEncoderBuffer(L):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(U)?this._createEncoderBuffer(L):U==="objDesc"?this._createEncoderBuffer(L):this.reporter.error("Encoding of string type: "+U+" unsupported")},R.prototype._encodeObjid=function(L,U,V){if(typeof L=="string"){if(!U)return this.reporter.error("string objid given, but no values map found");if(!U.hasOwnProperty(L))return this.reporter.error("objid not found in values map");L=U[L].split(/[\s\.]+/g);for(var K=0;K<L.length;K++)L[K]|=0}else if(Array.isArray(L)){L=L.slice();for(var K=0;K<L.length;K++)L[K]|=0}if(!Array.isArray(L))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(L));if(!V){if(L[1]>=40)return this.reporter.error("Second objid identifier OOB");L.splice(0,2,L[0]*40+L[1])}for(var J=0,K=0;K<L.length;K++){var ee=L[K];for(J++;ee>=128;ee>>=7)J++}for(var ie=new A(J),ne=ie.length-1,K=L.length-1;K>=0;K--){var ee=L[K];for(ie[ne--]=ee&127;(ee>>=7)>0;)ie[ne--]=128|ee&127}return this._createEncoderBuffer(ie)};function P(F){return F<10?"0"+F:F}R.prototype._encodeTime=function(L,U){var V,K=new Date(L);return U==="gentime"?V=[P(K.getFullYear()),P(K.getUTCMonth()+1),P(K.getUTCDate()),P(K.getUTCHours()),P(K.getUTCMinutes()),P(K.getUTCSeconds()),"Z"].join(""):U==="utctime"?V=[P(K.getFullYear()%100),P(K.getUTCMonth()+1),P(K.getUTCDate()),P(K.getUTCHours()),P(K.getUTCMinutes()),P(K.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+U+" time is not supported yet"),this._encodeStr(V,"octstr")},R.prototype._encodeNull=function(){return this._createEncoderBuffer("")},R.prototype._encodeInt=function(L,U){if(typeof L=="string"){if(!U)return this.reporter.error("String int or enum given, but no values map");if(!U.hasOwnProperty(L))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(L));L=U[L]}if(typeof L!="number"&&!A.isBuffer(L)){var V=L.toArray();!L.sign&&V[0]&128&&V.unshift(0),L=new A(V)}if(A.isBuffer(L)){var K=L.length;L.length===0&&K++;var ee=new A(K);return L.copy(ee),L.length===0&&(ee[0]=0),this._createEncoderBuffer(ee)}if(L<128)return this._createEncoderBuffer(L);if(L<256)return this._createEncoderBuffer([0,L]);for(var K=1,J=L;J>=256;J>>=8)K++;for(var ee=new Array(K),J=ee.length-1;J>=0;J--)ee[J]=L&255,L>>=8;return ee[0]&128&&ee.unshift(0),this._createEncoderBuffer(new A(ee))},R.prototype._encodeBool=function(L){return this._createEncoderBuffer(L?255:0)},R.prototype._use=function(L,U){return typeof L=="function"&&(L=L(U)),L._getEncoder("der").tree},R.prototype._skipDefault=function(L,U,V){var K=this._baseState,J;if(K.default===null)return!1;var ee=L.join();if(K.defaultBuffer===void 0&&(K.defaultBuffer=this._encodeValue(K.default,U,V).join()),ee.length!==K.defaultBuffer.length)return!1;for(J=0;J<ee.length;J++)if(ee[J]!==K.defaultBuffer[J])return!1;return!0};function D(F,L,U,V){var K;if(F==="seqof"?F="seq":F==="setof"&&(F="set"),B.tagByName.hasOwnProperty(F))K=B.tagByName[F];else if(typeof F=="number"&&(F|0)===F)K=F;else return V.error("Unknown tag: "+F);return K>=31?V.error("Multi-octet tag encoding unsupported"):(L||(K|=32),K|=B.tagClassByName[U||"universal"]<<6,K)}return der_1}var pem$1,hasRequiredPem$1;function requirePem$1(){if(hasRequiredPem$1)return pem$1;hasRequiredPem$1=1;var E=requireInherits_browser(),A=requireDer();function _(I){A.call(this,I),this.enc="pem"}return E(_,A),pem$1=_,_.prototype.encode=function(B,T){for(var R=A.prototype.encode.call(this,B),P=R.toString("base64"),D=["-----BEGIN "+T.label+"-----"],F=0;F<P.length;F+=64)D.push(P.slice(F,F+64));return D.push("-----END "+T.label+"-----"),D.join(`
`)},pem$1}var hasRequiredEncoders;function requireEncoders(){return hasRequiredEncoders||(hasRequiredEncoders=1,(function(E){var A=E;A.der=requireDer(),A.pem=requirePem$1()})(encoders)),encoders}var hasRequiredAsn1$1;function requireAsn1$1(){return hasRequiredAsn1$1||(hasRequiredAsn1$1=1,(function(E){var A=E;A.bignum=requireBn$2(),A.define=requireApi().define,A.base=requireBase(),A.constants=requireConstants$1(),A.decoders=requireDecoders(),A.encoders=requireEncoders()})(asn1)),asn1}var certificate$1,hasRequiredCertificate$1;function requireCertificate$1(){if(hasRequiredCertificate$1)return certificate$1;hasRequiredCertificate$1=1;var E=requireAsn1$1(),A=E.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),_=E.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),I=E.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),B=E.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(I),this.key("subjectPublicKey").bitstr())}),T=E.define("RelativeDistinguishedName",function(){this.setof(_)}),R=E.define("RDNSequence",function(){this.seqof(T)}),P=E.define("Name",function(){this.choice({rdnSequence:this.use(R)})}),D=E.define("Validity",function(){this.seq().obj(this.key("notBefore").use(A),this.key("notAfter").use(A))}),F=E.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),L=E.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(I),this.key("issuer").use(P),this.key("validity").use(D),this.key("subject").use(P),this.key("subjectPublicKeyInfo").use(B),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(F).optional())}),U=E.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(L),this.key("signatureAlgorithm").use(I),this.key("signatureValue").bitstr())});return certificate$1=U,certificate$1}var hasRequiredAsn1;function requireAsn1(){if(hasRequiredAsn1)return asn1$1;hasRequiredAsn1=1;var E=requireAsn1$1();asn1$1.certificate=requireCertificate$1();var A=E.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});asn1$1.RSAPrivateKey=A;var _=E.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});asn1$1.RSAPublicKey=_;var I=E.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),B=E.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(I),this.key("subjectPublicKey").bitstr())});asn1$1.PublicKey=B;var T=E.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(I),this.key("subjectPrivateKey").octstr())});asn1$1.PrivateKey=T;var R=E.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});asn1$1.EncryptedPrivateKey=R;var P=E.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});asn1$1.DSAPrivateKey=P,asn1$1.DSAparam=E.define("DSAparam",function(){this.int()});var D=E.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),F=E.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(D),this.key("publicKey").optional().explicit(1).bitstr())});return asn1$1.ECPrivateKey=F,asn1$1.signature=E.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())}),asn1$1}const require$$1$3={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"};var fixProc,hasRequiredFixProc;function requireFixProc(){if(hasRequiredFixProc)return fixProc;hasRequiredFixProc=1;var E=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,A=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,_=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,I=requireEvp_bytestokey(),B=requireBrowser$9(),T=requireSafeBuffer$1().Buffer;return fixProc=function(R,P){var D=R.toString(),F=D.match(E),L;if(F){var V="aes"+F[1],K=T.from(F[2],"hex"),J=T.from(F[3].replace(/[\r\n]/g,""),"base64"),ee=I(P,K.slice(0,8),parseInt(F[1],10)).key,ie=[],ne=B.createDecipheriv(V,ee,K);ie.push(ne.update(J)),ie.push(ne.final()),L=T.concat(ie)}else{var U=D.match(_);L=T.from(U[2].replace(/[\r\n]/g,""),"base64")}var ce=D.match(A)[1];return{tag:ce,data:L}},fixProc}var parseAsn1,hasRequiredParseAsn1;function requireParseAsn1(){if(hasRequiredParseAsn1)return parseAsn1;hasRequiredParseAsn1=1;var E=requireAsn1(),A=require$$1$3,_=requireFixProc(),I=requireBrowser$9(),B=requireBrowser$a(),T=requireSafeBuffer$1().Buffer;function R(D,F){var L=D.algorithm.decrypt.kde.kdeparams.salt,U=parseInt(D.algorithm.decrypt.kde.kdeparams.iters.toString(),10),V=A[D.algorithm.decrypt.cipher.algo.join(".")],K=D.algorithm.decrypt.cipher.iv,J=D.subjectPrivateKey,ee=parseInt(V.split("-")[1],10)/8,ie=B.pbkdf2Sync(F,L,U,ee,"sha1"),ne=I.createDecipheriv(V,ie,K),ce=[];return ce.push(ne.update(J)),ce.push(ne.final()),T.concat(ce)}function P(D){var F;typeof D=="object"&&!T.isBuffer(D)&&(F=D.passphrase,D=D.key),typeof D=="string"&&(D=T.from(D));var L=_(D,F),U=L.tag,V=L.data,K,J;switch(U){case"CERTIFICATE":J=E.certificate.decode(V,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(J||(J=E.PublicKey.decode(V,"der")),K=J.algorithm.algorithm.join("."),K){case"1.2.840.113549.1.1.1":return E.RSAPublicKey.decode(J.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return J.subjectPrivateKey=J.subjectPublicKey,{type:"ec",data:J};case"1.2.840.10040.4.1":return J.algorithm.params.pub_key=E.DSAparam.decode(J.subjectPublicKey.data,"der"),{type:"dsa",data:J.algorithm.params};default:throw new Error("unknown key id "+K)}case"ENCRYPTED PRIVATE KEY":V=E.EncryptedPrivateKey.decode(V,"der"),V=R(V,F);case"PRIVATE KEY":switch(J=E.PrivateKey.decode(V,"der"),K=J.algorithm.algorithm.join("."),K){case"1.2.840.113549.1.1.1":return E.RSAPrivateKey.decode(J.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:J.algorithm.curve,privateKey:E.ECPrivateKey.decode(J.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return J.algorithm.params.priv_key=E.DSAparam.decode(J.subjectPrivateKey,"der"),{type:"dsa",params:J.algorithm.params};default:throw new Error("unknown key id "+K)}case"RSA PUBLIC KEY":return E.RSAPublicKey.decode(V,"der");case"RSA PRIVATE KEY":return E.RSAPrivateKey.decode(V,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:E.DSAPrivateKey.decode(V,"der")};case"EC PRIVATE KEY":return V=E.ECPrivateKey.decode(V,"der"),{curve:V.parameters.value,privateKey:V.privateKey};default:throw new Error("unknown key type "+U)}}return P.signature=E.signature,parseAsn1=P,parseAsn1}const require$$4$2={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"};var hasRequiredSign;function requireSign(){if(hasRequiredSign)return sign.exports;hasRequiredSign=1;var E=requireSafeBuffer$1().Buffer,A=requireBrowser$b(),_=requireBrowserifyRsa(),I=requireElliptic().ec,B=requireBn$4(),T=requireParseAsn1(),R=require$$4$2,P=1;function D(ne,ce,fe,de,pe){var ve=T(ce);if(ve.curve){if(de!=="ecdsa"&&de!=="ecdsa/rsa")throw new Error("wrong private key type");return F(ne,ve)}else if(ve.type==="dsa"){if(de!=="dsa")throw new Error("wrong private key type");return L(ne,ve,fe)}if(de!=="rsa"&&de!=="ecdsa/rsa")throw new Error("wrong private key type");if(ce.padding!==void 0&&ce.padding!==P)throw new Error("illegal or unsupported padding mode");ne=E.concat([pe,ne]);for(var ye=ve.modulus.byteLength(),_e=[0,1];ne.length+_e.length+1<ye;)_e.push(255);_e.push(0);for(var be=-1;++be<ne.length;)_e.push(ne[be]);var Te=_(_e,ve);return Te}function F(ne,ce){var fe=R[ce.curve.join(".")];if(!fe)throw new Error("unknown curve "+ce.curve.join("."));var de=new I(fe),pe=de.keyFromPrivate(ce.privateKey),ve=pe.sign(ne);return E.from(ve.toDER())}function L(ne,ce,fe){for(var de=ce.params.priv_key,pe=ce.params.p,ve=ce.params.q,ye=ce.params.g,_e=new B(0),be,Te=K(ne,ve).mod(ve),ue=!1,O=V(de,ve,ne,fe);ue===!1;)be=ee(ve,O,fe),_e=ie(ye,be,pe,ve),ue=be.invm(ve).imul(Te.add(de.mul(_e))).mod(ve),ue.cmpn(0)===0&&(ue=!1,_e=new B(0));return U(_e,ue)}function U(ne,ce){ne=ne.toArray(),ce=ce.toArray(),ne[0]&128&&(ne=[0].concat(ne)),ce[0]&128&&(ce=[0].concat(ce));var fe=ne.length+ce.length+4,de=[48,fe,2,ne.length];return de=de.concat(ne,[2,ce.length],ce),E.from(de)}function V(ne,ce,fe,de){if(ne=E.from(ne.toArray()),ne.length<ce.byteLength()){var pe=E.alloc(ce.byteLength()-ne.length);ne=E.concat([pe,ne])}var ve=fe.length,ye=J(fe,ce),_e=E.alloc(ve);_e.fill(1);var be=E.alloc(ve);return be=A(de,be).update(_e).update(E.from([0])).update(ne).update(ye).digest(),_e=A(de,be).update(_e).digest(),be=A(de,be).update(_e).update(E.from([1])).update(ne).update(ye).digest(),_e=A(de,be).update(_e).digest(),{k:be,v:_e}}function K(ne,ce){var fe=new B(ne),de=(ne.length<<3)-ce.bitLength();return de>0&&fe.ishrn(de),fe}function J(ne,ce){ne=K(ne,ce),ne=ne.mod(ce);var fe=E.from(ne.toArray());if(fe.length<ce.byteLength()){var de=E.alloc(ce.byteLength()-fe.length);fe=E.concat([de,fe])}return fe}function ee(ne,ce,fe){var de,pe;do{for(de=E.alloc(0);de.length*8<ne.bitLength();)ce.v=A(fe,ce.k).update(ce.v).digest(),de=E.concat([de,ce.v]);pe=K(de,ne),ce.k=A(fe,ce.k).update(ce.v).update(E.from([0])).digest(),ce.v=A(fe,ce.k).update(ce.v).digest()}while(pe.cmp(ne)!==-1);return pe}function ie(ne,ce,fe,de){return ne.toRed(B.mont(fe)).redPow(ce).fromRed().mod(de)}return sign.exports=D,sign.exports.getKey=V,sign.exports.makeKey=ee,sign.exports}var verify_1,hasRequiredVerify$1;function requireVerify$1(){if(hasRequiredVerify$1)return verify_1;hasRequiredVerify$1=1;var E=requireSafeBuffer$1().Buffer,A=requireBn$4(),_=requireElliptic().ec,I=requireParseAsn1(),B=require$$4$2;function T(F,L,U,V,K){var J=I(U);if(J.type==="ec"){if(V!=="ecdsa"&&V!=="ecdsa/rsa")throw new Error("wrong public key type");return R(F,L,J)}else if(J.type==="dsa"){if(V!=="dsa")throw new Error("wrong public key type");return P(F,L,J)}if(V!=="rsa"&&V!=="ecdsa/rsa")throw new Error("wrong public key type");L=E.concat([K,L]);for(var ee=J.modulus.byteLength(),ie=[1],ne=0;L.length+ie.length+2<ee;)ie.push(255),ne+=1;ie.push(0);for(var ce=-1;++ce<L.length;)ie.push(L[ce]);ie=E.from(ie);var fe=A.mont(J.modulus);F=new A(F).toRed(fe),F=F.redPow(new A(J.publicExponent)),F=E.from(F.fromRed().toArray());var de=ne<8?1:0;for(ee=Math.min(F.length,ie.length),F.length!==ie.length&&(de=1),ce=-1;++ce<ee;)de|=F[ce]^ie[ce];return de===0}function R(F,L,U){var V=B[U.data.algorithm.curve.join(".")];if(!V)throw new Error("unknown curve "+U.data.algorithm.curve.join("."));var K=new _(V),J=U.data.subjectPrivateKey.data;return K.verify(L,F,J)}function P(F,L,U){var V=U.data.p,K=U.data.q,J=U.data.g,ee=U.data.pub_key,ie=I.signature.decode(F,"der"),ne=ie.s,ce=ie.r;D(ne,K),D(ce,K);var fe=A.mont(V),de=ne.invm(K),pe=J.toRed(fe).redPow(new A(L).mul(de).mod(K)).fromRed().mul(ee.toRed(fe).redPow(ce.mul(de).mod(K)).fromRed()).mod(V).mod(K);return pe.cmp(ce)===0}function D(F,L){if(F.cmpn(0)<=0)throw new Error("invalid sig");if(F.cmp(L)>=0)throw new Error("invalid sig")}return verify_1=T,verify_1}var browser$6,hasRequiredBrowser$6;function requireBrowser$6(){if(hasRequiredBrowser$6)return browser$6;hasRequiredBrowser$6=1;var E=requireSafeBuffer$1().Buffer,A=requireBrowser$c(),_=requireReadableBrowser$1(),I=requireInherits_browser(),B=requireSign(),T=requireVerify$1(),R=require$$6$1;Object.keys(R).forEach(function(U){R[U].id=E.from(R[U].id,"hex"),R[U.toLowerCase()]=R[U]});function P(U){_.Writable.call(this);var V=R[U];if(!V)throw new Error("Unknown message digest");this._hashType=V.hash,this._hash=A(V.hash),this._tag=V.id,this._signType=V.sign}I(P,_.Writable),P.prototype._write=function(V,K,J){this._hash.update(V),J()},P.prototype.update=function(V,K){return this._hash.update(typeof V=="string"?E.from(V,K):V),this},P.prototype.sign=function(V,K){this.end();var J=this._hash.digest(),ee=B(J,V,this._hashType,this._signType,this._tag);return K?ee.toString(K):ee};function D(U){_.Writable.call(this);var V=R[U];if(!V)throw new Error("Unknown message digest");this._hash=A(V.hash),this._tag=V.id,this._signType=V.sign}I(D,_.Writable),D.prototype._write=function(V,K,J){this._hash.update(V),J()},D.prototype.update=function(V,K){return this._hash.update(typeof V=="string"?E.from(V,K):V),this},D.prototype.verify=function(V,K,J){var ee=typeof K=="string"?E.from(K,J):K;this.end();var ie=this._hash.digest();return T(ee,ie,V,this._signType,this._tag)};function F(U){return new P(U)}function L(U){return new D(U)}return browser$6={Sign:F,Verify:L,createSign:F,createVerify:L},browser$6}var bn$3={exports:{}},bn$2=bn$3.exports,hasRequiredBn$1;function requireBn$1(){return hasRequiredBn$1||(hasRequiredBn$1=1,(function(E){(function(A,_){function I(ue,O){if(!ue)throw new Error(O||"Assertion failed")}function B(ue,O){ue.super_=O;var z=function(){};z.prototype=O.prototype,ue.prototype=new z,ue.prototype.constructor=ue}function T(ue,O,z){if(T.isBN(ue))return ue;this.negative=0,this.words=null,this.length=0,this.red=null,ue!==null&&((O==="le"||O==="be")&&(z=O,O=10),this._init(ue||0,O||10,z||"be"))}typeof A=="object"?A.exports=T:_.BN=T,T.BN=T,T.wordSize=26;var R;try{typeof window<"u"&&typeof window.Buffer<"u"?R=window.Buffer:R=requireDist$1().Buffer}catch{}T.isBN=function(O){return O instanceof T?!0:O!==null&&typeof O=="object"&&O.constructor.wordSize===T.wordSize&&Array.isArray(O.words)},T.max=function(O,z){return O.cmp(z)>0?O:z},T.min=function(O,z){return O.cmp(z)<0?O:z},T.prototype._init=function(O,z,Y){if(typeof O=="number")return this._initNumber(O,z,Y);if(typeof O=="object")return this._initArray(O,z,Y);z==="hex"&&(z=16),I(z===(z|0)&&z>=2&&z<=36),O=O.toString().replace(/\s+/g,"");var te=0;O[0]==="-"&&(te++,this.negative=1),te<O.length&&(z===16?this._parseHex(O,te,Y):(this._parseBase(O,z,te),Y==="le"&&this._initArray(this.toArray(),z,Y)))},T.prototype._initNumber=function(O,z,Y){O<0&&(this.negative=1,O=-O),O<67108864?(this.words=[O&67108863],this.length=1):O<4503599627370496?(this.words=[O&67108863,O/67108864&67108863],this.length=2):(I(O<9007199254740992),this.words=[O&67108863,O/67108864&67108863,1],this.length=3),Y==="le"&&this._initArray(this.toArray(),z,Y)},T.prototype._initArray=function(O,z,Y){if(I(typeof O.length=="number"),O.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(O.length/3),this.words=new Array(this.length);for(var te=0;te<this.length;te++)this.words[te]=0;var oe,le,he=0;if(Y==="be")for(te=O.length-1,oe=0;te>=0;te-=3)le=O[te]|O[te-1]<<8|O[te-2]<<16,this.words[oe]|=le<<he&67108863,this.words[oe+1]=le>>>26-he&67108863,he+=24,he>=26&&(he-=26,oe++);else if(Y==="le")for(te=0,oe=0;te<O.length;te+=3)le=O[te]|O[te+1]<<8|O[te+2]<<16,this.words[oe]|=le<<he&67108863,this.words[oe+1]=le>>>26-he&67108863,he+=24,he>=26&&(he-=26,oe++);return this.strip()};function P(ue,O){var z=ue.charCodeAt(O);return z>=65&&z<=70?z-55:z>=97&&z<=102?z-87:z-48&15}function D(ue,O,z){var Y=P(ue,z);return z-1>=O&&(Y|=P(ue,z-1)<<4),Y}T.prototype._parseHex=function(O,z,Y){this.length=Math.ceil((O.length-z)/6),this.words=new Array(this.length);for(var te=0;te<this.length;te++)this.words[te]=0;var oe=0,le=0,he;if(Y==="be")for(te=O.length-1;te>=z;te-=2)he=D(O,z,te)<<oe,this.words[le]|=he&67108863,oe>=18?(oe-=18,le+=1,this.words[le]|=he>>>26):oe+=8;else{var ae=O.length-z;for(te=ae%2===0?z+1:z;te<O.length;te+=2)he=D(O,z,te)<<oe,this.words[le]|=he&67108863,oe>=18?(oe-=18,le+=1,this.words[le]|=he>>>26):oe+=8}this.strip()};function F(ue,O,z,Y){for(var te=0,oe=Math.min(ue.length,z),le=O;le<oe;le++){var he=ue.charCodeAt(le)-48;te*=Y,he>=49?te+=he-49+10:he>=17?te+=he-17+10:te+=he}return te}T.prototype._parseBase=function(O,z,Y){this.words=[0],this.length=1;for(var te=0,oe=1;oe<=67108863;oe*=z)te++;te--,oe=oe/z|0;for(var le=O.length-Y,he=le%te,ae=Math.min(le,le-he)+Y,Q=0,se=Y;se<ae;se+=te)Q=F(O,se,se+te,z),this.imuln(oe),this.words[0]+Q<67108864?this.words[0]+=Q:this._iaddn(Q);if(he!==0){var Ae=1;for(Q=F(O,se,O.length,z),se=0;se<he;se++)Ae*=z;this.imuln(Ae),this.words[0]+Q<67108864?this.words[0]+=Q:this._iaddn(Q)}this.strip()},T.prototype.copy=function(O){O.words=new Array(this.length);for(var z=0;z<this.length;z++)O.words[z]=this.words[z];O.length=this.length,O.negative=this.negative,O.red=this.red},T.prototype.clone=function(){var O=new T(null);return this.copy(O),O},T.prototype._expand=function(O){for(;this.length<O;)this.words[this.length++]=0;return this},T.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},T.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},T.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var L=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],U=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],V=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];T.prototype.toString=function(O,z){O=O||10,z=z|0||1;var Y;if(O===16||O==="hex"){Y="";for(var te=0,oe=0,le=0;le<this.length;le++){var he=this.words[le],ae=((he<<te|oe)&16777215).toString(16);oe=he>>>24-te&16777215,te+=2,te>=26&&(te-=26,le--),oe!==0||le!==this.length-1?Y=L[6-ae.length]+ae+Y:Y=ae+Y}for(oe!==0&&(Y=oe.toString(16)+Y);Y.length%z!==0;)Y="0"+Y;return this.negative!==0&&(Y="-"+Y),Y}if(O===(O|0)&&O>=2&&O<=36){var Q=U[O],se=V[O];Y="";var Ae=this.clone();for(Ae.negative=0;!Ae.isZero();){var ge=Ae.modn(se).toString(O);Ae=Ae.idivn(se),Ae.isZero()?Y=ge+Y:Y=L[Q-ge.length]+ge+Y}for(this.isZero()&&(Y="0"+Y);Y.length%z!==0;)Y="0"+Y;return this.negative!==0&&(Y="-"+Y),Y}I(!1,"Base should be between 2 and 36")},T.prototype.toNumber=function(){var O=this.words[0];return this.length===2?O+=this.words[1]*67108864:this.length===3&&this.words[2]===1?O+=4503599627370496+this.words[1]*67108864:this.length>2&&I(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-O:O},T.prototype.toJSON=function(){return this.toString(16)},T.prototype.toBuffer=function(O,z){return I(typeof R<"u"),this.toArrayLike(R,O,z)},T.prototype.toArray=function(O,z){return this.toArrayLike(Array,O,z)},T.prototype.toArrayLike=function(O,z,Y){var te=this.byteLength(),oe=Y||Math.max(1,te);I(te<=oe,"byte array longer than desired length"),I(oe>0,"Requested array length <= 0"),this.strip();var le=z==="le",he=new O(oe),ae,Q,se=this.clone();if(le){for(Q=0;!se.isZero();Q++)ae=se.andln(255),se.iushrn(8),he[Q]=ae;for(;Q<oe;Q++)he[Q]=0}else{for(Q=0;Q<oe-te;Q++)he[Q]=0;for(Q=0;!se.isZero();Q++)ae=se.andln(255),se.iushrn(8),he[oe-Q-1]=ae}return he},Math.clz32?T.prototype._countBits=function(O){return 32-Math.clz32(O)}:T.prototype._countBits=function(O){var z=O,Y=0;return z>=4096&&(Y+=13,z>>>=13),z>=64&&(Y+=7,z>>>=7),z>=8&&(Y+=4,z>>>=4),z>=2&&(Y+=2,z>>>=2),Y+z},T.prototype._zeroBits=function(O){if(O===0)return 26;var z=O,Y=0;return(z&8191)===0&&(Y+=13,z>>>=13),(z&127)===0&&(Y+=7,z>>>=7),(z&15)===0&&(Y+=4,z>>>=4),(z&3)===0&&(Y+=2,z>>>=2),(z&1)===0&&Y++,Y},T.prototype.bitLength=function(){var O=this.words[this.length-1],z=this._countBits(O);return(this.length-1)*26+z};function K(ue){for(var O=new Array(ue.bitLength()),z=0;z<O.length;z++){var Y=z/26|0,te=z%26;O[z]=(ue.words[Y]&1<<te)>>>te}return O}T.prototype.zeroBits=function(){if(this.isZero())return 0;for(var O=0,z=0;z<this.length;z++){var Y=this._zeroBits(this.words[z]);if(O+=Y,Y!==26)break}return O},T.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},T.prototype.toTwos=function(O){return this.negative!==0?this.abs().inotn(O).iaddn(1):this.clone()},T.prototype.fromTwos=function(O){return this.testn(O-1)?this.notn(O).iaddn(1).ineg():this.clone()},T.prototype.isNeg=function(){return this.negative!==0},T.prototype.neg=function(){return this.clone().ineg()},T.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},T.prototype.iuor=function(O){for(;this.length<O.length;)this.words[this.length++]=0;for(var z=0;z<O.length;z++)this.words[z]=this.words[z]|O.words[z];return this.strip()},T.prototype.ior=function(O){return I((this.negative|O.negative)===0),this.iuor(O)},T.prototype.or=function(O){return this.length>O.length?this.clone().ior(O):O.clone().ior(this)},T.prototype.uor=function(O){return this.length>O.length?this.clone().iuor(O):O.clone().iuor(this)},T.prototype.iuand=function(O){var z;this.length>O.length?z=O:z=this;for(var Y=0;Y<z.length;Y++)this.words[Y]=this.words[Y]&O.words[Y];return this.length=z.length,this.strip()},T.prototype.iand=function(O){return I((this.negative|O.negative)===0),this.iuand(O)},T.prototype.and=function(O){return this.length>O.length?this.clone().iand(O):O.clone().iand(this)},T.prototype.uand=function(O){return this.length>O.length?this.clone().iuand(O):O.clone().iuand(this)},T.prototype.iuxor=function(O){var z,Y;this.length>O.length?(z=this,Y=O):(z=O,Y=this);for(var te=0;te<Y.length;te++)this.words[te]=z.words[te]^Y.words[te];if(this!==z)for(;te<z.length;te++)this.words[te]=z.words[te];return this.length=z.length,this.strip()},T.prototype.ixor=function(O){return I((this.negative|O.negative)===0),this.iuxor(O)},T.prototype.xor=function(O){return this.length>O.length?this.clone().ixor(O):O.clone().ixor(this)},T.prototype.uxor=function(O){return this.length>O.length?this.clone().iuxor(O):O.clone().iuxor(this)},T.prototype.inotn=function(O){I(typeof O=="number"&&O>=0);var z=Math.ceil(O/26)|0,Y=O%26;this._expand(z),Y>0&&z--;for(var te=0;te<z;te++)this.words[te]=~this.words[te]&67108863;return Y>0&&(this.words[te]=~this.words[te]&67108863>>26-Y),this.strip()},T.prototype.notn=function(O){return this.clone().inotn(O)},T.prototype.setn=function(O,z){I(typeof O=="number"&&O>=0);var Y=O/26|0,te=O%26;return this._expand(Y+1),z?this.words[Y]=this.words[Y]|1<<te:this.words[Y]=this.words[Y]&~(1<<te),this.strip()},T.prototype.iadd=function(O){var z;if(this.negative!==0&&O.negative===0)return this.negative=0,z=this.isub(O),this.negative^=1,this._normSign();if(this.negative===0&&O.negative!==0)return O.negative=0,z=this.isub(O),O.negative=1,z._normSign();var Y,te;this.length>O.length?(Y=this,te=O):(Y=O,te=this);for(var oe=0,le=0;le<te.length;le++)z=(Y.words[le]|0)+(te.words[le]|0)+oe,this.words[le]=z&67108863,oe=z>>>26;for(;oe!==0&&le<Y.length;le++)z=(Y.words[le]|0)+oe,this.words[le]=z&67108863,oe=z>>>26;if(this.length=Y.length,oe!==0)this.words[this.length]=oe,this.length++;else if(Y!==this)for(;le<Y.length;le++)this.words[le]=Y.words[le];return this},T.prototype.add=function(O){var z;return O.negative!==0&&this.negative===0?(O.negative=0,z=this.sub(O),O.negative^=1,z):O.negative===0&&this.negative!==0?(this.negative=0,z=O.sub(this),this.negative=1,z):this.length>O.length?this.clone().iadd(O):O.clone().iadd(this)},T.prototype.isub=function(O){if(O.negative!==0){O.negative=0;var z=this.iadd(O);return O.negative=1,z._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(O),this.negative=1,this._normSign();var Y=this.cmp(O);if(Y===0)return this.negative=0,this.length=1,this.words[0]=0,this;var te,oe;Y>0?(te=this,oe=O):(te=O,oe=this);for(var le=0,he=0;he<oe.length;he++)z=(te.words[he]|0)-(oe.words[he]|0)+le,le=z>>26,this.words[he]=z&67108863;for(;le!==0&&he<te.length;he++)z=(te.words[he]|0)+le,le=z>>26,this.words[he]=z&67108863;if(le===0&&he<te.length&&te!==this)for(;he<te.length;he++)this.words[he]=te.words[he];return this.length=Math.max(this.length,he),te!==this&&(this.negative=1),this.strip()},T.prototype.sub=function(O){return this.clone().isub(O)};function J(ue,O,z){z.negative=O.negative^ue.negative;var Y=ue.length+O.length|0;z.length=Y,Y=Y-1|0;var te=ue.words[0]|0,oe=O.words[0]|0,le=te*oe,he=le&67108863,ae=le/67108864|0;z.words[0]=he;for(var Q=1;Q<Y;Q++){for(var se=ae>>>26,Ae=ae&67108863,ge=Math.min(Q,O.length-1),Ee=Math.max(0,Q-ue.length+1);Ee<=ge;Ee++){var ke=Q-Ee|0;te=ue.words[ke]|0,oe=O.words[Ee]|0,le=te*oe+Ae,se+=le/67108864|0,Ae=le&67108863}z.words[Q]=Ae|0,ae=se|0}return ae!==0?z.words[Q]=ae|0:z.length--,z.strip()}var ee=function(O,z,Y){var te=O.words,oe=z.words,le=Y.words,he=0,ae,Q,se,Ae=te[0]|0,ge=Ae&8191,Ee=Ae>>>13,ke=te[1]|0,Se=ke&8191,Ie=ke>>>13,we=te[2]|0,xe=we&8191,Fe=we>>>13,Ge=te[3]|0,Oe=Ge&8191,et=Ge>>>13,Mt=te[4]|0,dt=Mt&8191,mt=Mt>>>13,Ut=te[5]|0,St=Ut&8191,vt=Ut>>>13,It=te[6]|0,yt=It&8191,Tt=It>>>13,Wt=te[7]|0,ft=Wt&8191,_t=Wt>>>13,Xt=te[8]|0,Nt=Xt&8191,qt=Xt>>>13,nr=te[9]|0,ze=nr&8191,Ce=nr>>>13,Le=oe[0]|0,Ze=Le&8191,Je=Le>>>13,nt=oe[1]|0,rt=nt&8191,He=nt>>>13,Dt=oe[2]|0,Rt=Dt&8191,De=Dt>>>13,We=oe[3]|0,Ve=We&8191,qe=We>>>13,pt=oe[4]|0,At=pt&8191,jt=pt>>>13,rr=oe[5]|0,Ke=rr&8191,Ne=rr>>>13,Ye=oe[6]|0,st=Ye&8191,bt=Ye>>>13,Qe=oe[7]|0,Re=Qe&8191,Pe=Qe>>>13,Me=oe[8]|0,$e=Me&8191,it=Me>>>13,kt=oe[9]|0,xt=kt&8191,Ot=kt>>>13;Y.negative=O.negative^z.negative,Y.length=19,ae=Math.imul(ge,Ze),Q=Math.imul(ge,Je),Q=Q+Math.imul(Ee,Ze)|0,se=Math.imul(Ee,Je);var Jt=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,ae=Math.imul(Se,Ze),Q=Math.imul(Se,Je),Q=Q+Math.imul(Ie,Ze)|0,se=Math.imul(Ie,Je),ae=ae+Math.imul(ge,rt)|0,Q=Q+Math.imul(ge,He)|0,Q=Q+Math.imul(Ee,rt)|0,se=se+Math.imul(Ee,He)|0;var tr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(tr>>>26)|0,tr&=67108863,ae=Math.imul(xe,Ze),Q=Math.imul(xe,Je),Q=Q+Math.imul(Fe,Ze)|0,se=Math.imul(Fe,Je),ae=ae+Math.imul(Se,rt)|0,Q=Q+Math.imul(Se,He)|0,Q=Q+Math.imul(Ie,rt)|0,se=se+Math.imul(Ie,He)|0,ae=ae+Math.imul(ge,Rt)|0,Q=Q+Math.imul(ge,De)|0,Q=Q+Math.imul(Ee,Rt)|0,se=se+Math.imul(Ee,De)|0;var br=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(br>>>26)|0,br&=67108863,ae=Math.imul(Oe,Ze),Q=Math.imul(Oe,Je),Q=Q+Math.imul(et,Ze)|0,se=Math.imul(et,Je),ae=ae+Math.imul(xe,rt)|0,Q=Q+Math.imul(xe,He)|0,Q=Q+Math.imul(Fe,rt)|0,se=se+Math.imul(Fe,He)|0,ae=ae+Math.imul(Se,Rt)|0,Q=Q+Math.imul(Se,De)|0,Q=Q+Math.imul(Ie,Rt)|0,se=se+Math.imul(Ie,De)|0,ae=ae+Math.imul(ge,Ve)|0,Q=Q+Math.imul(ge,qe)|0,Q=Q+Math.imul(Ee,Ve)|0,se=se+Math.imul(Ee,qe)|0;var ar=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(ar>>>26)|0,ar&=67108863,ae=Math.imul(dt,Ze),Q=Math.imul(dt,Je),Q=Q+Math.imul(mt,Ze)|0,se=Math.imul(mt,Je),ae=ae+Math.imul(Oe,rt)|0,Q=Q+Math.imul(Oe,He)|0,Q=Q+Math.imul(et,rt)|0,se=se+Math.imul(et,He)|0,ae=ae+Math.imul(xe,Rt)|0,Q=Q+Math.imul(xe,De)|0,Q=Q+Math.imul(Fe,Rt)|0,se=se+Math.imul(Fe,De)|0,ae=ae+Math.imul(Se,Ve)|0,Q=Q+Math.imul(Se,qe)|0,Q=Q+Math.imul(Ie,Ve)|0,se=se+Math.imul(Ie,qe)|0,ae=ae+Math.imul(ge,At)|0,Q=Q+Math.imul(ge,jt)|0,Q=Q+Math.imul(Ee,At)|0,se=se+Math.imul(Ee,jt)|0;var _r=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(_r>>>26)|0,_r&=67108863,ae=Math.imul(St,Ze),Q=Math.imul(St,Je),Q=Q+Math.imul(vt,Ze)|0,se=Math.imul(vt,Je),ae=ae+Math.imul(dt,rt)|0,Q=Q+Math.imul(dt,He)|0,Q=Q+Math.imul(mt,rt)|0,se=se+Math.imul(mt,He)|0,ae=ae+Math.imul(Oe,Rt)|0,Q=Q+Math.imul(Oe,De)|0,Q=Q+Math.imul(et,Rt)|0,se=se+Math.imul(et,De)|0,ae=ae+Math.imul(xe,Ve)|0,Q=Q+Math.imul(xe,qe)|0,Q=Q+Math.imul(Fe,Ve)|0,se=se+Math.imul(Fe,qe)|0,ae=ae+Math.imul(Se,At)|0,Q=Q+Math.imul(Se,jt)|0,Q=Q+Math.imul(Ie,At)|0,se=se+Math.imul(Ie,jt)|0,ae=ae+Math.imul(ge,Ke)|0,Q=Q+Math.imul(ge,Ne)|0,Q=Q+Math.imul(Ee,Ke)|0,se=se+Math.imul(Ee,Ne)|0;var or=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(or>>>26)|0,or&=67108863,ae=Math.imul(yt,Ze),Q=Math.imul(yt,Je),Q=Q+Math.imul(Tt,Ze)|0,se=Math.imul(Tt,Je),ae=ae+Math.imul(St,rt)|0,Q=Q+Math.imul(St,He)|0,Q=Q+Math.imul(vt,rt)|0,se=se+Math.imul(vt,He)|0,ae=ae+Math.imul(dt,Rt)|0,Q=Q+Math.imul(dt,De)|0,Q=Q+Math.imul(mt,Rt)|0,se=se+Math.imul(mt,De)|0,ae=ae+Math.imul(Oe,Ve)|0,Q=Q+Math.imul(Oe,qe)|0,Q=Q+Math.imul(et,Ve)|0,se=se+Math.imul(et,qe)|0,ae=ae+Math.imul(xe,At)|0,Q=Q+Math.imul(xe,jt)|0,Q=Q+Math.imul(Fe,At)|0,se=se+Math.imul(Fe,jt)|0,ae=ae+Math.imul(Se,Ke)|0,Q=Q+Math.imul(Se,Ne)|0,Q=Q+Math.imul(Ie,Ke)|0,se=se+Math.imul(Ie,Ne)|0,ae=ae+Math.imul(ge,st)|0,Q=Q+Math.imul(ge,bt)|0,Q=Q+Math.imul(Ee,st)|0,se=se+Math.imul(Ee,bt)|0;var gr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(gr>>>26)|0,gr&=67108863,ae=Math.imul(ft,Ze),Q=Math.imul(ft,Je),Q=Q+Math.imul(_t,Ze)|0,se=Math.imul(_t,Je),ae=ae+Math.imul(yt,rt)|0,Q=Q+Math.imul(yt,He)|0,Q=Q+Math.imul(Tt,rt)|0,se=se+Math.imul(Tt,He)|0,ae=ae+Math.imul(St,Rt)|0,Q=Q+Math.imul(St,De)|0,Q=Q+Math.imul(vt,Rt)|0,se=se+Math.imul(vt,De)|0,ae=ae+Math.imul(dt,Ve)|0,Q=Q+Math.imul(dt,qe)|0,Q=Q+Math.imul(mt,Ve)|0,se=se+Math.imul(mt,qe)|0,ae=ae+Math.imul(Oe,At)|0,Q=Q+Math.imul(Oe,jt)|0,Q=Q+Math.imul(et,At)|0,se=se+Math.imul(et,jt)|0,ae=ae+Math.imul(xe,Ke)|0,Q=Q+Math.imul(xe,Ne)|0,Q=Q+Math.imul(Fe,Ke)|0,se=se+Math.imul(Fe,Ne)|0,ae=ae+Math.imul(Se,st)|0,Q=Q+Math.imul(Se,bt)|0,Q=Q+Math.imul(Ie,st)|0,se=se+Math.imul(Ie,bt)|0,ae=ae+Math.imul(ge,Re)|0,Q=Q+Math.imul(ge,Pe)|0,Q=Q+Math.imul(Ee,Re)|0,se=se+Math.imul(Ee,Pe)|0;var xr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(xr>>>26)|0,xr&=67108863,ae=Math.imul(Nt,Ze),Q=Math.imul(Nt,Je),Q=Q+Math.imul(qt,Ze)|0,se=Math.imul(qt,Je),ae=ae+Math.imul(ft,rt)|0,Q=Q+Math.imul(ft,He)|0,Q=Q+Math.imul(_t,rt)|0,se=se+Math.imul(_t,He)|0,ae=ae+Math.imul(yt,Rt)|0,Q=Q+Math.imul(yt,De)|0,Q=Q+Math.imul(Tt,Rt)|0,se=se+Math.imul(Tt,De)|0,ae=ae+Math.imul(St,Ve)|0,Q=Q+Math.imul(St,qe)|0,Q=Q+Math.imul(vt,Ve)|0,se=se+Math.imul(vt,qe)|0,ae=ae+Math.imul(dt,At)|0,Q=Q+Math.imul(dt,jt)|0,Q=Q+Math.imul(mt,At)|0,se=se+Math.imul(mt,jt)|0,ae=ae+Math.imul(Oe,Ke)|0,Q=Q+Math.imul(Oe,Ne)|0,Q=Q+Math.imul(et,Ke)|0,se=se+Math.imul(et,Ne)|0,ae=ae+Math.imul(xe,st)|0,Q=Q+Math.imul(xe,bt)|0,Q=Q+Math.imul(Fe,st)|0,se=se+Math.imul(Fe,bt)|0,ae=ae+Math.imul(Se,Re)|0,Q=Q+Math.imul(Se,Pe)|0,Q=Q+Math.imul(Ie,Re)|0,se=se+Math.imul(Ie,Pe)|0,ae=ae+Math.imul(ge,$e)|0,Q=Q+Math.imul(ge,it)|0,Q=Q+Math.imul(Ee,$e)|0,se=se+Math.imul(Ee,it)|0;var vr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(vr>>>26)|0,vr&=67108863,ae=Math.imul(ze,Ze),Q=Math.imul(ze,Je),Q=Q+Math.imul(Ce,Ze)|0,se=Math.imul(Ce,Je),ae=ae+Math.imul(Nt,rt)|0,Q=Q+Math.imul(Nt,He)|0,Q=Q+Math.imul(qt,rt)|0,se=se+Math.imul(qt,He)|0,ae=ae+Math.imul(ft,Rt)|0,Q=Q+Math.imul(ft,De)|0,Q=Q+Math.imul(_t,Rt)|0,se=se+Math.imul(_t,De)|0,ae=ae+Math.imul(yt,Ve)|0,Q=Q+Math.imul(yt,qe)|0,Q=Q+Math.imul(Tt,Ve)|0,se=se+Math.imul(Tt,qe)|0,ae=ae+Math.imul(St,At)|0,Q=Q+Math.imul(St,jt)|0,Q=Q+Math.imul(vt,At)|0,se=se+Math.imul(vt,jt)|0,ae=ae+Math.imul(dt,Ke)|0,Q=Q+Math.imul(dt,Ne)|0,Q=Q+Math.imul(mt,Ke)|0,se=se+Math.imul(mt,Ne)|0,ae=ae+Math.imul(Oe,st)|0,Q=Q+Math.imul(Oe,bt)|0,Q=Q+Math.imul(et,st)|0,se=se+Math.imul(et,bt)|0,ae=ae+Math.imul(xe,Re)|0,Q=Q+Math.imul(xe,Pe)|0,Q=Q+Math.imul(Fe,Re)|0,se=se+Math.imul(Fe,Pe)|0,ae=ae+Math.imul(Se,$e)|0,Q=Q+Math.imul(Se,it)|0,Q=Q+Math.imul(Ie,$e)|0,se=se+Math.imul(Ie,it)|0,ae=ae+Math.imul(ge,xt)|0,Q=Q+Math.imul(ge,Ot)|0,Q=Q+Math.imul(Ee,xt)|0,se=se+Math.imul(Ee,Ot)|0;var Cr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,ae=Math.imul(ze,rt),Q=Math.imul(ze,He),Q=Q+Math.imul(Ce,rt)|0,se=Math.imul(Ce,He),ae=ae+Math.imul(Nt,Rt)|0,Q=Q+Math.imul(Nt,De)|0,Q=Q+Math.imul(qt,Rt)|0,se=se+Math.imul(qt,De)|0,ae=ae+Math.imul(ft,Ve)|0,Q=Q+Math.imul(ft,qe)|0,Q=Q+Math.imul(_t,Ve)|0,se=se+Math.imul(_t,qe)|0,ae=ae+Math.imul(yt,At)|0,Q=Q+Math.imul(yt,jt)|0,Q=Q+Math.imul(Tt,At)|0,se=se+Math.imul(Tt,jt)|0,ae=ae+Math.imul(St,Ke)|0,Q=Q+Math.imul(St,Ne)|0,Q=Q+Math.imul(vt,Ke)|0,se=se+Math.imul(vt,Ne)|0,ae=ae+Math.imul(dt,st)|0,Q=Q+Math.imul(dt,bt)|0,Q=Q+Math.imul(mt,st)|0,se=se+Math.imul(mt,bt)|0,ae=ae+Math.imul(Oe,Re)|0,Q=Q+Math.imul(Oe,Pe)|0,Q=Q+Math.imul(et,Re)|0,se=se+Math.imul(et,Pe)|0,ae=ae+Math.imul(xe,$e)|0,Q=Q+Math.imul(xe,it)|0,Q=Q+Math.imul(Fe,$e)|0,se=se+Math.imul(Fe,it)|0,ae=ae+Math.imul(Se,xt)|0,Q=Q+Math.imul(Se,Ot)|0,Q=Q+Math.imul(Ie,xt)|0,se=se+Math.imul(Ie,Ot)|0;var Sr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(Sr>>>26)|0,Sr&=67108863,ae=Math.imul(ze,Rt),Q=Math.imul(ze,De),Q=Q+Math.imul(Ce,Rt)|0,se=Math.imul(Ce,De),ae=ae+Math.imul(Nt,Ve)|0,Q=Q+Math.imul(Nt,qe)|0,Q=Q+Math.imul(qt,Ve)|0,se=se+Math.imul(qt,qe)|0,ae=ae+Math.imul(ft,At)|0,Q=Q+Math.imul(ft,jt)|0,Q=Q+Math.imul(_t,At)|0,se=se+Math.imul(_t,jt)|0,ae=ae+Math.imul(yt,Ke)|0,Q=Q+Math.imul(yt,Ne)|0,Q=Q+Math.imul(Tt,Ke)|0,se=se+Math.imul(Tt,Ne)|0,ae=ae+Math.imul(St,st)|0,Q=Q+Math.imul(St,bt)|0,Q=Q+Math.imul(vt,st)|0,se=se+Math.imul(vt,bt)|0,ae=ae+Math.imul(dt,Re)|0,Q=Q+Math.imul(dt,Pe)|0,Q=Q+Math.imul(mt,Re)|0,se=se+Math.imul(mt,Pe)|0,ae=ae+Math.imul(Oe,$e)|0,Q=Q+Math.imul(Oe,it)|0,Q=Q+Math.imul(et,$e)|0,se=se+Math.imul(et,it)|0,ae=ae+Math.imul(xe,xt)|0,Q=Q+Math.imul(xe,Ot)|0,Q=Q+Math.imul(Fe,xt)|0,se=se+Math.imul(Fe,Ot)|0;var dr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(dr>>>26)|0,dr&=67108863,ae=Math.imul(ze,Ve),Q=Math.imul(ze,qe),Q=Q+Math.imul(Ce,Ve)|0,se=Math.imul(Ce,qe),ae=ae+Math.imul(Nt,At)|0,Q=Q+Math.imul(Nt,jt)|0,Q=Q+Math.imul(qt,At)|0,se=se+Math.imul(qt,jt)|0,ae=ae+Math.imul(ft,Ke)|0,Q=Q+Math.imul(ft,Ne)|0,Q=Q+Math.imul(_t,Ke)|0,se=se+Math.imul(_t,Ne)|0,ae=ae+Math.imul(yt,st)|0,Q=Q+Math.imul(yt,bt)|0,Q=Q+Math.imul(Tt,st)|0,se=se+Math.imul(Tt,bt)|0,ae=ae+Math.imul(St,Re)|0,Q=Q+Math.imul(St,Pe)|0,Q=Q+Math.imul(vt,Re)|0,se=se+Math.imul(vt,Pe)|0,ae=ae+Math.imul(dt,$e)|0,Q=Q+Math.imul(dt,it)|0,Q=Q+Math.imul(mt,$e)|0,se=se+Math.imul(mt,it)|0,ae=ae+Math.imul(Oe,xt)|0,Q=Q+Math.imul(Oe,Ot)|0,Q=Q+Math.imul(et,xt)|0,se=se+Math.imul(et,Ot)|0;var wr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(wr>>>26)|0,wr&=67108863,ae=Math.imul(ze,At),Q=Math.imul(ze,jt),Q=Q+Math.imul(Ce,At)|0,se=Math.imul(Ce,jt),ae=ae+Math.imul(Nt,Ke)|0,Q=Q+Math.imul(Nt,Ne)|0,Q=Q+Math.imul(qt,Ke)|0,se=se+Math.imul(qt,Ne)|0,ae=ae+Math.imul(ft,st)|0,Q=Q+Math.imul(ft,bt)|0,Q=Q+Math.imul(_t,st)|0,se=se+Math.imul(_t,bt)|0,ae=ae+Math.imul(yt,Re)|0,Q=Q+Math.imul(yt,Pe)|0,Q=Q+Math.imul(Tt,Re)|0,se=se+Math.imul(Tt,Pe)|0,ae=ae+Math.imul(St,$e)|0,Q=Q+Math.imul(St,it)|0,Q=Q+Math.imul(vt,$e)|0,se=se+Math.imul(vt,it)|0,ae=ae+Math.imul(dt,xt)|0,Q=Q+Math.imul(dt,Ot)|0,Q=Q+Math.imul(mt,xt)|0,se=se+Math.imul(mt,Ot)|0;var fr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(fr>>>26)|0,fr&=67108863,ae=Math.imul(ze,Ke),Q=Math.imul(ze,Ne),Q=Q+Math.imul(Ce,Ke)|0,se=Math.imul(Ce,Ne),ae=ae+Math.imul(Nt,st)|0,Q=Q+Math.imul(Nt,bt)|0,Q=Q+Math.imul(qt,st)|0,se=se+Math.imul(qt,bt)|0,ae=ae+Math.imul(ft,Re)|0,Q=Q+Math.imul(ft,Pe)|0,Q=Q+Math.imul(_t,Re)|0,se=se+Math.imul(_t,Pe)|0,ae=ae+Math.imul(yt,$e)|0,Q=Q+Math.imul(yt,it)|0,Q=Q+Math.imul(Tt,$e)|0,se=se+Math.imul(Tt,it)|0,ae=ae+Math.imul(St,xt)|0,Q=Q+Math.imul(St,Ot)|0,Q=Q+Math.imul(vt,xt)|0,se=se+Math.imul(vt,Ot)|0;var hr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(hr>>>26)|0,hr&=67108863,ae=Math.imul(ze,st),Q=Math.imul(ze,bt),Q=Q+Math.imul(Ce,st)|0,se=Math.imul(Ce,bt),ae=ae+Math.imul(Nt,Re)|0,Q=Q+Math.imul(Nt,Pe)|0,Q=Q+Math.imul(qt,Re)|0,se=se+Math.imul(qt,Pe)|0,ae=ae+Math.imul(ft,$e)|0,Q=Q+Math.imul(ft,it)|0,Q=Q+Math.imul(_t,$e)|0,se=se+Math.imul(_t,it)|0,ae=ae+Math.imul(yt,xt)|0,Q=Q+Math.imul(yt,Ot)|0,Q=Q+Math.imul(Tt,xt)|0,se=se+Math.imul(Tt,Ot)|0;var Ar=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,ae=Math.imul(ze,Re),Q=Math.imul(ze,Pe),Q=Q+Math.imul(Ce,Re)|0,se=Math.imul(Ce,Pe),ae=ae+Math.imul(Nt,$e)|0,Q=Q+Math.imul(Nt,it)|0,Q=Q+Math.imul(qt,$e)|0,se=se+Math.imul(qt,it)|0,ae=ae+Math.imul(ft,xt)|0,Q=Q+Math.imul(ft,Ot)|0,Q=Q+Math.imul(_t,xt)|0,se=se+Math.imul(_t,Ot)|0;var ur=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(ur>>>26)|0,ur&=67108863,ae=Math.imul(ze,$e),Q=Math.imul(ze,it),Q=Q+Math.imul(Ce,$e)|0,se=Math.imul(Ce,it),ae=ae+Math.imul(Nt,xt)|0,Q=Q+Math.imul(Nt,Ot)|0,Q=Q+Math.imul(qt,xt)|0,se=se+Math.imul(qt,Ot)|0;var zt=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(zt>>>26)|0,zt&=67108863,ae=Math.imul(ze,xt),Q=Math.imul(ze,Ot),Q=Q+Math.imul(Ce,xt)|0,se=Math.imul(Ce,Ot);var Kt=(he+ae|0)+((Q&8191)<<13)|0;return he=(se+(Q>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,le[0]=Jt,le[1]=tr,le[2]=br,le[3]=ar,le[4]=_r,le[5]=or,le[6]=gr,le[7]=xr,le[8]=vr,le[9]=Cr,le[10]=Sr,le[11]=dr,le[12]=wr,le[13]=fr,le[14]=hr,le[15]=Ar,le[16]=ur,le[17]=zt,le[18]=Kt,he!==0&&(le[19]=he,Y.length++),Y};Math.imul||(ee=J);function ie(ue,O,z){z.negative=O.negative^ue.negative,z.length=ue.length+O.length;for(var Y=0,te=0,oe=0;oe<z.length-1;oe++){var le=te;te=0;for(var he=Y&67108863,ae=Math.min(oe,O.length-1),Q=Math.max(0,oe-ue.length+1);Q<=ae;Q++){var se=oe-Q,Ae=ue.words[se]|0,ge=O.words[Q]|0,Ee=Ae*ge,ke=Ee&67108863;le=le+(Ee/67108864|0)|0,ke=ke+he|0,he=ke&67108863,le=le+(ke>>>26)|0,te+=le>>>26,le&=67108863}z.words[oe]=he,Y=le,le=te}return Y!==0?z.words[oe]=Y:z.length--,z.strip()}function ne(ue,O,z){var Y=new ce;return Y.mulp(ue,O,z)}T.prototype.mulTo=function(O,z){var Y,te=this.length+O.length;return this.length===10&&O.length===10?Y=ee(this,O,z):te<63?Y=J(this,O,z):te<1024?Y=ie(this,O,z):Y=ne(this,O,z),Y};function ce(ue,O){this.x=ue,this.y=O}ce.prototype.makeRBT=function(O){for(var z=new Array(O),Y=T.prototype._countBits(O)-1,te=0;te<O;te++)z[te]=this.revBin(te,Y,O);return z},ce.prototype.revBin=function(O,z,Y){if(O===0||O===Y-1)return O;for(var te=0,oe=0;oe<z;oe++)te|=(O&1)<<z-oe-1,O>>=1;return te},ce.prototype.permute=function(O,z,Y,te,oe,le){for(var he=0;he<le;he++)te[he]=z[O[he]],oe[he]=Y[O[he]]},ce.prototype.transform=function(O,z,Y,te,oe,le){this.permute(le,O,z,Y,te,oe);for(var he=1;he<oe;he<<=1)for(var ae=he<<1,Q=Math.cos(2*Math.PI/ae),se=Math.sin(2*Math.PI/ae),Ae=0;Ae<oe;Ae+=ae)for(var ge=Q,Ee=se,ke=0;ke<he;ke++){var Se=Y[Ae+ke],Ie=te[Ae+ke],we=Y[Ae+ke+he],xe=te[Ae+ke+he],Fe=ge*we-Ee*xe;xe=ge*xe+Ee*we,we=Fe,Y[Ae+ke]=Se+we,te[Ae+ke]=Ie+xe,Y[Ae+ke+he]=Se-we,te[Ae+ke+he]=Ie-xe,ke!==ae&&(Fe=Q*ge-se*Ee,Ee=Q*Ee+se*ge,ge=Fe)}},ce.prototype.guessLen13b=function(O,z){var Y=Math.max(z,O)|1,te=Y&1,oe=0;for(Y=Y/2|0;Y;Y=Y>>>1)oe++;return 1<<oe+1+te},ce.prototype.conjugate=function(O,z,Y){if(!(Y<=1))for(var te=0;te<Y/2;te++){var oe=O[te];O[te]=O[Y-te-1],O[Y-te-1]=oe,oe=z[te],z[te]=-z[Y-te-1],z[Y-te-1]=-oe}},ce.prototype.normalize13b=function(O,z){for(var Y=0,te=0;te<z/2;te++){var oe=Math.round(O[2*te+1]/z)*8192+Math.round(O[2*te]/z)+Y;O[te]=oe&67108863,oe<67108864?Y=0:Y=oe/67108864|0}return O},ce.prototype.convert13b=function(O,z,Y,te){for(var oe=0,le=0;le<z;le++)oe=oe+(O[le]|0),Y[2*le]=oe&8191,oe=oe>>>13,Y[2*le+1]=oe&8191,oe=oe>>>13;for(le=2*z;le<te;++le)Y[le]=0;I(oe===0),I((oe&-8192)===0)},ce.prototype.stub=function(O){for(var z=new Array(O),Y=0;Y<O;Y++)z[Y]=0;return z},ce.prototype.mulp=function(O,z,Y){var te=2*this.guessLen13b(O.length,z.length),oe=this.makeRBT(te),le=this.stub(te),he=new Array(te),ae=new Array(te),Q=new Array(te),se=new Array(te),Ae=new Array(te),ge=new Array(te),Ee=Y.words;Ee.length=te,this.convert13b(O.words,O.length,he,te),this.convert13b(z.words,z.length,se,te),this.transform(he,le,ae,Q,te,oe),this.transform(se,le,Ae,ge,te,oe);for(var ke=0;ke<te;ke++){var Se=ae[ke]*Ae[ke]-Q[ke]*ge[ke];Q[ke]=ae[ke]*ge[ke]+Q[ke]*Ae[ke],ae[ke]=Se}return this.conjugate(ae,Q,te),this.transform(ae,Q,Ee,le,te,oe),this.conjugate(Ee,le,te),this.normalize13b(Ee,te),Y.negative=O.negative^z.negative,Y.length=O.length+z.length,Y.strip()},T.prototype.mul=function(O){var z=new T(null);return z.words=new Array(this.length+O.length),this.mulTo(O,z)},T.prototype.mulf=function(O){var z=new T(null);return z.words=new Array(this.length+O.length),ne(this,O,z)},T.prototype.imul=function(O){return this.clone().mulTo(O,this)},T.prototype.imuln=function(O){I(typeof O=="number"),I(O<67108864);for(var z=0,Y=0;Y<this.length;Y++){var te=(this.words[Y]|0)*O,oe=(te&67108863)+(z&67108863);z>>=26,z+=te/67108864|0,z+=oe>>>26,this.words[Y]=oe&67108863}return z!==0&&(this.words[Y]=z,this.length++),this.length=O===0?1:this.length,this},T.prototype.muln=function(O){return this.clone().imuln(O)},T.prototype.sqr=function(){return this.mul(this)},T.prototype.isqr=function(){return this.imul(this.clone())},T.prototype.pow=function(O){var z=K(O);if(z.length===0)return new T(1);for(var Y=this,te=0;te<z.length&&z[te]===0;te++,Y=Y.sqr());if(++te<z.length)for(var oe=Y.sqr();te<z.length;te++,oe=oe.sqr())z[te]!==0&&(Y=Y.mul(oe));return Y},T.prototype.iushln=function(O){I(typeof O=="number"&&O>=0);var z=O%26,Y=(O-z)/26,te=67108863>>>26-z<<26-z,oe;if(z!==0){var le=0;for(oe=0;oe<this.length;oe++){var he=this.words[oe]&te,ae=(this.words[oe]|0)-he<<z;this.words[oe]=ae|le,le=he>>>26-z}le&&(this.words[oe]=le,this.length++)}if(Y!==0){for(oe=this.length-1;oe>=0;oe--)this.words[oe+Y]=this.words[oe];for(oe=0;oe<Y;oe++)this.words[oe]=0;this.length+=Y}return this.strip()},T.prototype.ishln=function(O){return I(this.negative===0),this.iushln(O)},T.prototype.iushrn=function(O,z,Y){I(typeof O=="number"&&O>=0);var te;z?te=(z-z%26)/26:te=0;var oe=O%26,le=Math.min((O-oe)/26,this.length),he=67108863^67108863>>>oe<<oe,ae=Y;if(te-=le,te=Math.max(0,te),ae){for(var Q=0;Q<le;Q++)ae.words[Q]=this.words[Q];ae.length=le}if(le!==0)if(this.length>le)for(this.length-=le,Q=0;Q<this.length;Q++)this.words[Q]=this.words[Q+le];else this.words[0]=0,this.length=1;var se=0;for(Q=this.length-1;Q>=0&&(se!==0||Q>=te);Q--){var Ae=this.words[Q]|0;this.words[Q]=se<<26-oe|Ae>>>oe,se=Ae&he}return ae&&se!==0&&(ae.words[ae.length++]=se),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},T.prototype.ishrn=function(O,z,Y){return I(this.negative===0),this.iushrn(O,z,Y)},T.prototype.shln=function(O){return this.clone().ishln(O)},T.prototype.ushln=function(O){return this.clone().iushln(O)},T.prototype.shrn=function(O){return this.clone().ishrn(O)},T.prototype.ushrn=function(O){return this.clone().iushrn(O)},T.prototype.testn=function(O){I(typeof O=="number"&&O>=0);var z=O%26,Y=(O-z)/26,te=1<<z;if(this.length<=Y)return!1;var oe=this.words[Y];return!!(oe&te)},T.prototype.imaskn=function(O){I(typeof O=="number"&&O>=0);var z=O%26,Y=(O-z)/26;if(I(this.negative===0,"imaskn works only with positive numbers"),this.length<=Y)return this;if(z!==0&&Y++,this.length=Math.min(Y,this.length),z!==0){var te=67108863^67108863>>>z<<z;this.words[this.length-1]&=te}return this.strip()},T.prototype.maskn=function(O){return this.clone().imaskn(O)},T.prototype.iaddn=function(O){return I(typeof O=="number"),I(O<67108864),O<0?this.isubn(-O):this.negative!==0?this.length===1&&(this.words[0]|0)<O?(this.words[0]=O-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(O),this.negative=1,this):this._iaddn(O)},T.prototype._iaddn=function(O){this.words[0]+=O;for(var z=0;z<this.length&&this.words[z]>=67108864;z++)this.words[z]-=67108864,z===this.length-1?this.words[z+1]=1:this.words[z+1]++;return this.length=Math.max(this.length,z+1),this},T.prototype.isubn=function(O){if(I(typeof O=="number"),I(O<67108864),O<0)return this.iaddn(-O);if(this.negative!==0)return this.negative=0,this.iaddn(O),this.negative=1,this;if(this.words[0]-=O,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var z=0;z<this.length&&this.words[z]<0;z++)this.words[z]+=67108864,this.words[z+1]-=1;return this.strip()},T.prototype.addn=function(O){return this.clone().iaddn(O)},T.prototype.subn=function(O){return this.clone().isubn(O)},T.prototype.iabs=function(){return this.negative=0,this},T.prototype.abs=function(){return this.clone().iabs()},T.prototype._ishlnsubmul=function(O,z,Y){var te=O.length+Y,oe;this._expand(te);var le,he=0;for(oe=0;oe<O.length;oe++){le=(this.words[oe+Y]|0)+he;var ae=(O.words[oe]|0)*z;le-=ae&67108863,he=(le>>26)-(ae/67108864|0),this.words[oe+Y]=le&67108863}for(;oe<this.length-Y;oe++)le=(this.words[oe+Y]|0)+he,he=le>>26,this.words[oe+Y]=le&67108863;if(he===0)return this.strip();for(I(he===-1),he=0,oe=0;oe<this.length;oe++)le=-(this.words[oe]|0)+he,he=le>>26,this.words[oe]=le&67108863;return this.negative=1,this.strip()},T.prototype._wordDiv=function(O,z){var Y=this.length-O.length,te=this.clone(),oe=O,le=oe.words[oe.length-1]|0,he=this._countBits(le);Y=26-he,Y!==0&&(oe=oe.ushln(Y),te.iushln(Y),le=oe.words[oe.length-1]|0);var ae=te.length-oe.length,Q;if(z!=="mod"){Q=new T(null),Q.length=ae+1,Q.words=new Array(Q.length);for(var se=0;se<Q.length;se++)Q.words[se]=0}var Ae=te.clone()._ishlnsubmul(oe,1,ae);Ae.negative===0&&(te=Ae,Q&&(Q.words[ae]=1));for(var ge=ae-1;ge>=0;ge--){var Ee=(te.words[oe.length+ge]|0)*67108864+(te.words[oe.length+ge-1]|0);for(Ee=Math.min(Ee/le|0,67108863),te._ishlnsubmul(oe,Ee,ge);te.negative!==0;)Ee--,te.negative=0,te._ishlnsubmul(oe,1,ge),te.isZero()||(te.negative^=1);Q&&(Q.words[ge]=Ee)}return Q&&Q.strip(),te.strip(),z!=="div"&&Y!==0&&te.iushrn(Y),{div:Q||null,mod:te}},T.prototype.divmod=function(O,z,Y){if(I(!O.isZero()),this.isZero())return{div:new T(0),mod:new T(0)};var te,oe,le;return this.negative!==0&&O.negative===0?(le=this.neg().divmod(O,z),z!=="mod"&&(te=le.div.neg()),z!=="div"&&(oe=le.mod.neg(),Y&&oe.negative!==0&&oe.iadd(O)),{div:te,mod:oe}):this.negative===0&&O.negative!==0?(le=this.divmod(O.neg(),z),z!=="mod"&&(te=le.div.neg()),{div:te,mod:le.mod}):(this.negative&O.negative)!==0?(le=this.neg().divmod(O.neg(),z),z!=="div"&&(oe=le.mod.neg(),Y&&oe.negative!==0&&oe.isub(O)),{div:le.div,mod:oe}):O.length>this.length||this.cmp(O)<0?{div:new T(0),mod:this}:O.length===1?z==="div"?{div:this.divn(O.words[0]),mod:null}:z==="mod"?{div:null,mod:new T(this.modn(O.words[0]))}:{div:this.divn(O.words[0]),mod:new T(this.modn(O.words[0]))}:this._wordDiv(O,z)},T.prototype.div=function(O){return this.divmod(O,"div",!1).div},T.prototype.mod=function(O){return this.divmod(O,"mod",!1).mod},T.prototype.umod=function(O){return this.divmod(O,"mod",!0).mod},T.prototype.divRound=function(O){var z=this.divmod(O);if(z.mod.isZero())return z.div;var Y=z.div.negative!==0?z.mod.isub(O):z.mod,te=O.ushrn(1),oe=O.andln(1),le=Y.cmp(te);return le<0||oe===1&&le===0?z.div:z.div.negative!==0?z.div.isubn(1):z.div.iaddn(1)},T.prototype.modn=function(O){I(O<=67108863);for(var z=(1<<26)%O,Y=0,te=this.length-1;te>=0;te--)Y=(z*Y+(this.words[te]|0))%O;return Y},T.prototype.idivn=function(O){I(O<=67108863);for(var z=0,Y=this.length-1;Y>=0;Y--){var te=(this.words[Y]|0)+z*67108864;this.words[Y]=te/O|0,z=te%O}return this.strip()},T.prototype.divn=function(O){return this.clone().idivn(O)},T.prototype.egcd=function(O){I(O.negative===0),I(!O.isZero());var z=this,Y=O.clone();z.negative!==0?z=z.umod(O):z=z.clone();for(var te=new T(1),oe=new T(0),le=new T(0),he=new T(1),ae=0;z.isEven()&&Y.isEven();)z.iushrn(1),Y.iushrn(1),++ae;for(var Q=Y.clone(),se=z.clone();!z.isZero();){for(var Ae=0,ge=1;(z.words[0]&ge)===0&&Ae<26;++Ae,ge<<=1);if(Ae>0)for(z.iushrn(Ae);Ae-- >0;)(te.isOdd()||oe.isOdd())&&(te.iadd(Q),oe.isub(se)),te.iushrn(1),oe.iushrn(1);for(var Ee=0,ke=1;(Y.words[0]&ke)===0&&Ee<26;++Ee,ke<<=1);if(Ee>0)for(Y.iushrn(Ee);Ee-- >0;)(le.isOdd()||he.isOdd())&&(le.iadd(Q),he.isub(se)),le.iushrn(1),he.iushrn(1);z.cmp(Y)>=0?(z.isub(Y),te.isub(le),oe.isub(he)):(Y.isub(z),le.isub(te),he.isub(oe))}return{a:le,b:he,gcd:Y.iushln(ae)}},T.prototype._invmp=function(O){I(O.negative===0),I(!O.isZero());var z=this,Y=O.clone();z.negative!==0?z=z.umod(O):z=z.clone();for(var te=new T(1),oe=new T(0),le=Y.clone();z.cmpn(1)>0&&Y.cmpn(1)>0;){for(var he=0,ae=1;(z.words[0]&ae)===0&&he<26;++he,ae<<=1);if(he>0)for(z.iushrn(he);he-- >0;)te.isOdd()&&te.iadd(le),te.iushrn(1);for(var Q=0,se=1;(Y.words[0]&se)===0&&Q<26;++Q,se<<=1);if(Q>0)for(Y.iushrn(Q);Q-- >0;)oe.isOdd()&&oe.iadd(le),oe.iushrn(1);z.cmp(Y)>=0?(z.isub(Y),te.isub(oe)):(Y.isub(z),oe.isub(te))}var Ae;return z.cmpn(1)===0?Ae=te:Ae=oe,Ae.cmpn(0)<0&&Ae.iadd(O),Ae},T.prototype.gcd=function(O){if(this.isZero())return O.abs();if(O.isZero())return this.abs();var z=this.clone(),Y=O.clone();z.negative=0,Y.negative=0;for(var te=0;z.isEven()&&Y.isEven();te++)z.iushrn(1),Y.iushrn(1);do{for(;z.isEven();)z.iushrn(1);for(;Y.isEven();)Y.iushrn(1);var oe=z.cmp(Y);if(oe<0){var le=z;z=Y,Y=le}else if(oe===0||Y.cmpn(1)===0)break;z.isub(Y)}while(!0);return Y.iushln(te)},T.prototype.invm=function(O){return this.egcd(O).a.umod(O)},T.prototype.isEven=function(){return(this.words[0]&1)===0},T.prototype.isOdd=function(){return(this.words[0]&1)===1},T.prototype.andln=function(O){return this.words[0]&O},T.prototype.bincn=function(O){I(typeof O=="number");var z=O%26,Y=(O-z)/26,te=1<<z;if(this.length<=Y)return this._expand(Y+1),this.words[Y]|=te,this;for(var oe=te,le=Y;oe!==0&&le<this.length;le++){var he=this.words[le]|0;he+=oe,oe=he>>>26,he&=67108863,this.words[le]=he}return oe!==0&&(this.words[le]=oe,this.length++),this},T.prototype.isZero=function(){return this.length===1&&this.words[0]===0},T.prototype.cmpn=function(O){var z=O<0;if(this.negative!==0&&!z)return-1;if(this.negative===0&&z)return 1;this.strip();var Y;if(this.length>1)Y=1;else{z&&(O=-O),I(O<=67108863,"Number is too big");var te=this.words[0]|0;Y=te===O?0:te<O?-1:1}return this.negative!==0?-Y|0:Y},T.prototype.cmp=function(O){if(this.negative!==0&&O.negative===0)return-1;if(this.negative===0&&O.negative!==0)return 1;var z=this.ucmp(O);return this.negative!==0?-z|0:z},T.prototype.ucmp=function(O){if(this.length>O.length)return 1;if(this.length<O.length)return-1;for(var z=0,Y=this.length-1;Y>=0;Y--){var te=this.words[Y]|0,oe=O.words[Y]|0;if(te!==oe){te<oe?z=-1:te>oe&&(z=1);break}}return z},T.prototype.gtn=function(O){return this.cmpn(O)===1},T.prototype.gt=function(O){return this.cmp(O)===1},T.prototype.gten=function(O){return this.cmpn(O)>=0},T.prototype.gte=function(O){return this.cmp(O)>=0},T.prototype.ltn=function(O){return this.cmpn(O)===-1},T.prototype.lt=function(O){return this.cmp(O)===-1},T.prototype.lten=function(O){return this.cmpn(O)<=0},T.prototype.lte=function(O){return this.cmp(O)<=0},T.prototype.eqn=function(O){return this.cmpn(O)===0},T.prototype.eq=function(O){return this.cmp(O)===0},T.red=function(O){return new be(O)},T.prototype.toRed=function(O){return I(!this.red,"Already a number in reduction context"),I(this.negative===0,"red works only with positives"),O.convertTo(this)._forceRed(O)},T.prototype.fromRed=function(){return I(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},T.prototype._forceRed=function(O){return this.red=O,this},T.prototype.forceRed=function(O){return I(!this.red,"Already a number in reduction context"),this._forceRed(O)},T.prototype.redAdd=function(O){return I(this.red,"redAdd works only with red numbers"),this.red.add(this,O)},T.prototype.redIAdd=function(O){return I(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,O)},T.prototype.redSub=function(O){return I(this.red,"redSub works only with red numbers"),this.red.sub(this,O)},T.prototype.redISub=function(O){return I(this.red,"redISub works only with red numbers"),this.red.isub(this,O)},T.prototype.redShl=function(O){return I(this.red,"redShl works only with red numbers"),this.red.shl(this,O)},T.prototype.redMul=function(O){return I(this.red,"redMul works only with red numbers"),this.red._verify2(this,O),this.red.mul(this,O)},T.prototype.redIMul=function(O){return I(this.red,"redMul works only with red numbers"),this.red._verify2(this,O),this.red.imul(this,O)},T.prototype.redSqr=function(){return I(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},T.prototype.redISqr=function(){return I(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},T.prototype.redSqrt=function(){return I(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},T.prototype.redInvm=function(){return I(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},T.prototype.redNeg=function(){return I(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},T.prototype.redPow=function(O){return I(this.red&&!O.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,O)};var fe={k256:null,p224:null,p192:null,p25519:null};function de(ue,O){this.name=ue,this.p=new T(O,16),this.n=this.p.bitLength(),this.k=new T(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}de.prototype._tmp=function(){var O=new T(null);return O.words=new Array(Math.ceil(this.n/13)),O},de.prototype.ireduce=function(O){var z=O,Y;do this.split(z,this.tmp),z=this.imulK(z),z=z.iadd(this.tmp),Y=z.bitLength();while(Y>this.n);var te=Y<this.n?-1:z.ucmp(this.p);return te===0?(z.words[0]=0,z.length=1):te>0?z.isub(this.p):z.strip!==void 0?z.strip():z._strip(),z},de.prototype.split=function(O,z){O.iushrn(this.n,0,z)},de.prototype.imulK=function(O){return O.imul(this.k)};function pe(){de.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}B(pe,de),pe.prototype.split=function(O,z){for(var Y=4194303,te=Math.min(O.length,9),oe=0;oe<te;oe++)z.words[oe]=O.words[oe];if(z.length=te,O.length<=9){O.words[0]=0,O.length=1;return}var le=O.words[9];for(z.words[z.length++]=le&Y,oe=10;oe<O.length;oe++){var he=O.words[oe]|0;O.words[oe-10]=(he&Y)<<4|le>>>22,le=he}le>>>=22,O.words[oe-10]=le,le===0&&O.length>10?O.length-=10:O.length-=9},pe.prototype.imulK=function(O){O.words[O.length]=0,O.words[O.length+1]=0,O.length+=2;for(var z=0,Y=0;Y<O.length;Y++){var te=O.words[Y]|0;z+=te*977,O.words[Y]=z&67108863,z=te*64+(z/67108864|0)}return O.words[O.length-1]===0&&(O.length--,O.words[O.length-1]===0&&O.length--),O};function ve(){de.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}B(ve,de);function ye(){de.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}B(ye,de);function _e(){de.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}B(_e,de),_e.prototype.imulK=function(O){for(var z=0,Y=0;Y<O.length;Y++){var te=(O.words[Y]|0)*19+z,oe=te&67108863;te>>>=26,O.words[Y]=oe,z=te}return z!==0&&(O.words[O.length++]=z),O},T._prime=function(O){if(fe[O])return fe[O];var z;if(O==="k256")z=new pe;else if(O==="p224")z=new ve;else if(O==="p192")z=new ye;else if(O==="p25519")z=new _e;else throw new Error("Unknown prime "+O);return fe[O]=z,z};function be(ue){if(typeof ue=="string"){var O=T._prime(ue);this.m=O.p,this.prime=O}else I(ue.gtn(1),"modulus must be greater than 1"),this.m=ue,this.prime=null}be.prototype._verify1=function(O){I(O.negative===0,"red works only with positives"),I(O.red,"red works only with red numbers")},be.prototype._verify2=function(O,z){I((O.negative|z.negative)===0,"red works only with positives"),I(O.red&&O.red===z.red,"red works only with red numbers")},be.prototype.imod=function(O){return this.prime?this.prime.ireduce(O)._forceRed(this):O.umod(this.m)._forceRed(this)},be.prototype.neg=function(O){return O.isZero()?O.clone():this.m.sub(O)._forceRed(this)},be.prototype.add=function(O,z){this._verify2(O,z);var Y=O.add(z);return Y.cmp(this.m)>=0&&Y.isub(this.m),Y._forceRed(this)},be.prototype.iadd=function(O,z){this._verify2(O,z);var Y=O.iadd(z);return Y.cmp(this.m)>=0&&Y.isub(this.m),Y},be.prototype.sub=function(O,z){this._verify2(O,z);var Y=O.sub(z);return Y.cmpn(0)<0&&Y.iadd(this.m),Y._forceRed(this)},be.prototype.isub=function(O,z){this._verify2(O,z);var Y=O.isub(z);return Y.cmpn(0)<0&&Y.iadd(this.m),Y},be.prototype.shl=function(O,z){return this._verify1(O),this.imod(O.ushln(z))},be.prototype.imul=function(O,z){return this._verify2(O,z),this.imod(O.imul(z))},be.prototype.mul=function(O,z){return this._verify2(O,z),this.imod(O.mul(z))},be.prototype.isqr=function(O){return this.imul(O,O.clone())},be.prototype.sqr=function(O){return this.mul(O,O)},be.prototype.sqrt=function(O){if(O.isZero())return O.clone();var z=this.m.andln(3);if(I(z%2===1),z===3){var Y=this.m.add(new T(1)).iushrn(2);return this.pow(O,Y)}for(var te=this.m.subn(1),oe=0;!te.isZero()&&te.andln(1)===0;)oe++,te.iushrn(1);I(!te.isZero());var le=new T(1).toRed(this),he=le.redNeg(),ae=this.m.subn(1).iushrn(1),Q=this.m.bitLength();for(Q=new T(2*Q*Q).toRed(this);this.pow(Q,ae).cmp(he)!==0;)Q.redIAdd(he);for(var se=this.pow(Q,te),Ae=this.pow(O,te.addn(1).iushrn(1)),ge=this.pow(O,te),Ee=oe;ge.cmp(le)!==0;){for(var ke=ge,Se=0;ke.cmp(le)!==0;Se++)ke=ke.redSqr();I(Se<Ee);var Ie=this.pow(se,new T(1).iushln(Ee-Se-1));Ae=Ae.redMul(Ie),se=Ie.redSqr(),ge=ge.redMul(se),Ee=Se}return Ae},be.prototype.invm=function(O){var z=O._invmp(this.m);return z.negative!==0?(z.negative=0,this.imod(z).redNeg()):this.imod(z)},be.prototype.pow=function(O,z){if(z.isZero())return new T(1).toRed(this);if(z.cmpn(1)===0)return O.clone();var Y=4,te=new Array(1<<Y);te[0]=new T(1).toRed(this),te[1]=O;for(var oe=2;oe<te.length;oe++)te[oe]=this.mul(te[oe-1],O);var le=te[0],he=0,ae=0,Q=z.bitLength()%26;for(Q===0&&(Q=26),oe=z.length-1;oe>=0;oe--){for(var se=z.words[oe],Ae=Q-1;Ae>=0;Ae--){var ge=se>>Ae&1;if(le!==te[0]&&(le=this.sqr(le)),ge===0&&he===0){ae=0;continue}he<<=1,he|=ge,ae++,!(ae!==Y&&(oe!==0||Ae!==0))&&(le=this.mul(le,te[he]),ae=0,he=0)}Q=26}return le},be.prototype.convertTo=function(O){var z=O.umod(this.m);return z===O?z.clone():z},be.prototype.convertFrom=function(O){var z=O.clone();return z.red=null,z},T.mont=function(O){return new Te(O)};function Te(ue){be.call(this,ue),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new T(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}B(Te,be),Te.prototype.convertTo=function(O){return this.imod(O.ushln(this.shift))},Te.prototype.convertFrom=function(O){var z=this.imod(O.mul(this.rinv));return z.red=null,z},Te.prototype.imul=function(O,z){if(O.isZero()||z.isZero())return O.words[0]=0,O.length=1,O;var Y=O.imul(z),te=Y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),oe=Y.isub(te).iushrn(this.shift),le=oe;return oe.cmp(this.m)>=0?le=oe.isub(this.m):oe.cmpn(0)<0&&(le=oe.iadd(this.m)),le._forceRed(this)},Te.prototype.mul=function(O,z){if(O.isZero()||z.isZero())return new T(0)._forceRed(this);var Y=O.mul(z),te=Y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),oe=Y.isub(te).iushrn(this.shift),le=oe;return oe.cmp(this.m)>=0?le=oe.isub(this.m):oe.cmpn(0)<0&&(le=oe.iadd(this.m)),le._forceRed(this)},Te.prototype.invm=function(O){var z=this.imod(O._invmp(this.m).mul(this.r2));return z._forceRed(this)}})(E,bn$2)})(bn$3)),bn$3.exports}var browser$5,hasRequiredBrowser$5;function requireBrowser$5(){if(hasRequiredBrowser$5)return browser$5;hasRequiredBrowser$5=1;var E=requireElliptic(),A=requireBn$1();browser$5=function(R){return new I(R)};var _={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};_.p224=_.secp224r1,_.p256=_.secp256r1=_.prime256v1,_.p192=_.secp192r1=_.prime192v1,_.p384=_.secp384r1,_.p521=_.secp521r1;function I(T){this.curveType=_[T],this.curveType||(this.curveType={name:T}),this.curve=new E.ec(this.curveType.name),this.keys=void 0}I.prototype.generateKeys=function(T,R){return this.keys=this.curve.genKeyPair(),this.getPublicKey(T,R)},I.prototype.computeSecret=function(T,R,P){R=R||"utf8",Buffer$1.isBuffer(T)||(T=new Buffer$1(T,R));var D=this.curve.keyFromPublic(T).getPublic(),F=D.mul(this.keys.getPrivate()).getX();return B(F,P,this.curveType.byteLength)},I.prototype.getPublicKey=function(T,R){var P=this.keys.getPublic(R==="compressed",!0);return R==="hybrid"&&(P[P.length-1]%2?P[0]=7:P[0]=6),B(P,T)},I.prototype.getPrivateKey=function(T){return B(this.keys.getPrivate(),T)},I.prototype.setPublicKey=function(T,R){return R=R||"utf8",Buffer$1.isBuffer(T)||(T=new Buffer$1(T,R)),this.keys._importPublic(T),this},I.prototype.setPrivateKey=function(T,R){R=R||"utf8",Buffer$1.isBuffer(T)||(T=new Buffer$1(T,R));var P=new A(T);return P=P.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(P),this};function B(T,R,P){Array.isArray(T)||(T=T.toArray());var D=new Buffer$1(T);if(P&&D.length<P){var F=new Buffer$1(P-D.length);F.fill(0),D=Buffer$1.concat([F,D])}return R?D.toString(R):D}return browser$5}var browser$4={},mgf,hasRequiredMgf;function requireMgf(){if(hasRequiredMgf)return mgf;hasRequiredMgf=1;var E=requireBrowser$c(),A=requireSafeBuffer$1().Buffer;mgf=function(I,B){for(var T=A.alloc(0),R=0,P;T.length<B;)P=_(R++),T=A.concat([T,E("sha1").update(I).update(P).digest()]);return T.slice(0,B)};function _(I){var B=A.allocUnsafe(4);return B.writeUInt32BE(I,0),B}return mgf}var xor,hasRequiredXor;function requireXor(){return hasRequiredXor||(hasRequiredXor=1,xor=function(A,_){for(var I=A.length,B=-1;++B<I;)A[B]^=_[B];return A}),xor}var bn$1={exports:{}},bn=bn$1.exports,hasRequiredBn;function requireBn(){return hasRequiredBn||(hasRequiredBn=1,(function(E){(function(A,_){function I(ue,O){if(!ue)throw new Error(O||"Assertion failed")}function B(ue,O){ue.super_=O;var z=function(){};z.prototype=O.prototype,ue.prototype=new z,ue.prototype.constructor=ue}function T(ue,O,z){if(T.isBN(ue))return ue;this.negative=0,this.words=null,this.length=0,this.red=null,ue!==null&&((O==="le"||O==="be")&&(z=O,O=10),this._init(ue||0,O||10,z||"be"))}typeof A=="object"?A.exports=T:_.BN=T,T.BN=T,T.wordSize=26;var R;try{typeof window<"u"&&typeof window.Buffer<"u"?R=window.Buffer:R=requireDist$1().Buffer}catch{}T.isBN=function(O){return O instanceof T?!0:O!==null&&typeof O=="object"&&O.constructor.wordSize===T.wordSize&&Array.isArray(O.words)},T.max=function(O,z){return O.cmp(z)>0?O:z},T.min=function(O,z){return O.cmp(z)<0?O:z},T.prototype._init=function(O,z,Y){if(typeof O=="number")return this._initNumber(O,z,Y);if(typeof O=="object")return this._initArray(O,z,Y);z==="hex"&&(z=16),I(z===(z|0)&&z>=2&&z<=36),O=O.toString().replace(/\s+/g,"");var te=0;O[0]==="-"&&(te++,this.negative=1),te<O.length&&(z===16?this._parseHex(O,te,Y):(this._parseBase(O,z,te),Y==="le"&&this._initArray(this.toArray(),z,Y)))},T.prototype._initNumber=function(O,z,Y){O<0&&(this.negative=1,O=-O),O<67108864?(this.words=[O&67108863],this.length=1):O<4503599627370496?(this.words=[O&67108863,O/67108864&67108863],this.length=2):(I(O<9007199254740992),this.words=[O&67108863,O/67108864&67108863,1],this.length=3),Y==="le"&&this._initArray(this.toArray(),z,Y)},T.prototype._initArray=function(O,z,Y){if(I(typeof O.length=="number"),O.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(O.length/3),this.words=new Array(this.length);for(var te=0;te<this.length;te++)this.words[te]=0;var oe,le,he=0;if(Y==="be")for(te=O.length-1,oe=0;te>=0;te-=3)le=O[te]|O[te-1]<<8|O[te-2]<<16,this.words[oe]|=le<<he&67108863,this.words[oe+1]=le>>>26-he&67108863,he+=24,he>=26&&(he-=26,oe++);else if(Y==="le")for(te=0,oe=0;te<O.length;te+=3)le=O[te]|O[te+1]<<8|O[te+2]<<16,this.words[oe]|=le<<he&67108863,this.words[oe+1]=le>>>26-he&67108863,he+=24,he>=26&&(he-=26,oe++);return this.strip()};function P(ue,O){var z=ue.charCodeAt(O);return z>=65&&z<=70?z-55:z>=97&&z<=102?z-87:z-48&15}function D(ue,O,z){var Y=P(ue,z);return z-1>=O&&(Y|=P(ue,z-1)<<4),Y}T.prototype._parseHex=function(O,z,Y){this.length=Math.ceil((O.length-z)/6),this.words=new Array(this.length);for(var te=0;te<this.length;te++)this.words[te]=0;var oe=0,le=0,he;if(Y==="be")for(te=O.length-1;te>=z;te-=2)he=D(O,z,te)<<oe,this.words[le]|=he&67108863,oe>=18?(oe-=18,le+=1,this.words[le]|=he>>>26):oe+=8;else{var ae=O.length-z;for(te=ae%2===0?z+1:z;te<O.length;te+=2)he=D(O,z,te)<<oe,this.words[le]|=he&67108863,oe>=18?(oe-=18,le+=1,this.words[le]|=he>>>26):oe+=8}this.strip()};function F(ue,O,z,Y){for(var te=0,oe=Math.min(ue.length,z),le=O;le<oe;le++){var he=ue.charCodeAt(le)-48;te*=Y,he>=49?te+=he-49+10:he>=17?te+=he-17+10:te+=he}return te}T.prototype._parseBase=function(O,z,Y){this.words=[0],this.length=1;for(var te=0,oe=1;oe<=67108863;oe*=z)te++;te--,oe=oe/z|0;for(var le=O.length-Y,he=le%te,ae=Math.min(le,le-he)+Y,Q=0,se=Y;se<ae;se+=te)Q=F(O,se,se+te,z),this.imuln(oe),this.words[0]+Q<67108864?this.words[0]+=Q:this._iaddn(Q);if(he!==0){var Ae=1;for(Q=F(O,se,O.length,z),se=0;se<he;se++)Ae*=z;this.imuln(Ae),this.words[0]+Q<67108864?this.words[0]+=Q:this._iaddn(Q)}this.strip()},T.prototype.copy=function(O){O.words=new Array(this.length);for(var z=0;z<this.length;z++)O.words[z]=this.words[z];O.length=this.length,O.negative=this.negative,O.red=this.red},T.prototype.clone=function(){var O=new T(null);return this.copy(O),O},T.prototype._expand=function(O){for(;this.length<O;)this.words[this.length++]=0;return this},T.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},T.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},T.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var L=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],U=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],V=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];T.prototype.toString=function(O,z){O=O||10,z=z|0||1;var Y;if(O===16||O==="hex"){Y="";for(var te=0,oe=0,le=0;le<this.length;le++){var he=this.words[le],ae=((he<<te|oe)&16777215).toString(16);oe=he>>>24-te&16777215,te+=2,te>=26&&(te-=26,le--),oe!==0||le!==this.length-1?Y=L[6-ae.length]+ae+Y:Y=ae+Y}for(oe!==0&&(Y=oe.toString(16)+Y);Y.length%z!==0;)Y="0"+Y;return this.negative!==0&&(Y="-"+Y),Y}if(O===(O|0)&&O>=2&&O<=36){var Q=U[O],se=V[O];Y="";var Ae=this.clone();for(Ae.negative=0;!Ae.isZero();){var ge=Ae.modn(se).toString(O);Ae=Ae.idivn(se),Ae.isZero()?Y=ge+Y:Y=L[Q-ge.length]+ge+Y}for(this.isZero()&&(Y="0"+Y);Y.length%z!==0;)Y="0"+Y;return this.negative!==0&&(Y="-"+Y),Y}I(!1,"Base should be between 2 and 36")},T.prototype.toNumber=function(){var O=this.words[0];return this.length===2?O+=this.words[1]*67108864:this.length===3&&this.words[2]===1?O+=4503599627370496+this.words[1]*67108864:this.length>2&&I(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-O:O},T.prototype.toJSON=function(){return this.toString(16)},T.prototype.toBuffer=function(O,z){return I(typeof R<"u"),this.toArrayLike(R,O,z)},T.prototype.toArray=function(O,z){return this.toArrayLike(Array,O,z)},T.prototype.toArrayLike=function(O,z,Y){var te=this.byteLength(),oe=Y||Math.max(1,te);I(te<=oe,"byte array longer than desired length"),I(oe>0,"Requested array length <= 0"),this.strip();var le=z==="le",he=new O(oe),ae,Q,se=this.clone();if(le){for(Q=0;!se.isZero();Q++)ae=se.andln(255),se.iushrn(8),he[Q]=ae;for(;Q<oe;Q++)he[Q]=0}else{for(Q=0;Q<oe-te;Q++)he[Q]=0;for(Q=0;!se.isZero();Q++)ae=se.andln(255),se.iushrn(8),he[oe-Q-1]=ae}return he},Math.clz32?T.prototype._countBits=function(O){return 32-Math.clz32(O)}:T.prototype._countBits=function(O){var z=O,Y=0;return z>=4096&&(Y+=13,z>>>=13),z>=64&&(Y+=7,z>>>=7),z>=8&&(Y+=4,z>>>=4),z>=2&&(Y+=2,z>>>=2),Y+z},T.prototype._zeroBits=function(O){if(O===0)return 26;var z=O,Y=0;return(z&8191)===0&&(Y+=13,z>>>=13),(z&127)===0&&(Y+=7,z>>>=7),(z&15)===0&&(Y+=4,z>>>=4),(z&3)===0&&(Y+=2,z>>>=2),(z&1)===0&&Y++,Y},T.prototype.bitLength=function(){var O=this.words[this.length-1],z=this._countBits(O);return(this.length-1)*26+z};function K(ue){for(var O=new Array(ue.bitLength()),z=0;z<O.length;z++){var Y=z/26|0,te=z%26;O[z]=(ue.words[Y]&1<<te)>>>te}return O}T.prototype.zeroBits=function(){if(this.isZero())return 0;for(var O=0,z=0;z<this.length;z++){var Y=this._zeroBits(this.words[z]);if(O+=Y,Y!==26)break}return O},T.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},T.prototype.toTwos=function(O){return this.negative!==0?this.abs().inotn(O).iaddn(1):this.clone()},T.prototype.fromTwos=function(O){return this.testn(O-1)?this.notn(O).iaddn(1).ineg():this.clone()},T.prototype.isNeg=function(){return this.negative!==0},T.prototype.neg=function(){return this.clone().ineg()},T.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},T.prototype.iuor=function(O){for(;this.length<O.length;)this.words[this.length++]=0;for(var z=0;z<O.length;z++)this.words[z]=this.words[z]|O.words[z];return this.strip()},T.prototype.ior=function(O){return I((this.negative|O.negative)===0),this.iuor(O)},T.prototype.or=function(O){return this.length>O.length?this.clone().ior(O):O.clone().ior(this)},T.prototype.uor=function(O){return this.length>O.length?this.clone().iuor(O):O.clone().iuor(this)},T.prototype.iuand=function(O){var z;this.length>O.length?z=O:z=this;for(var Y=0;Y<z.length;Y++)this.words[Y]=this.words[Y]&O.words[Y];return this.length=z.length,this.strip()},T.prototype.iand=function(O){return I((this.negative|O.negative)===0),this.iuand(O)},T.prototype.and=function(O){return this.length>O.length?this.clone().iand(O):O.clone().iand(this)},T.prototype.uand=function(O){return this.length>O.length?this.clone().iuand(O):O.clone().iuand(this)},T.prototype.iuxor=function(O){var z,Y;this.length>O.length?(z=this,Y=O):(z=O,Y=this);for(var te=0;te<Y.length;te++)this.words[te]=z.words[te]^Y.words[te];if(this!==z)for(;te<z.length;te++)this.words[te]=z.words[te];return this.length=z.length,this.strip()},T.prototype.ixor=function(O){return I((this.negative|O.negative)===0),this.iuxor(O)},T.prototype.xor=function(O){return this.length>O.length?this.clone().ixor(O):O.clone().ixor(this)},T.prototype.uxor=function(O){return this.length>O.length?this.clone().iuxor(O):O.clone().iuxor(this)},T.prototype.inotn=function(O){I(typeof O=="number"&&O>=0);var z=Math.ceil(O/26)|0,Y=O%26;this._expand(z),Y>0&&z--;for(var te=0;te<z;te++)this.words[te]=~this.words[te]&67108863;return Y>0&&(this.words[te]=~this.words[te]&67108863>>26-Y),this.strip()},T.prototype.notn=function(O){return this.clone().inotn(O)},T.prototype.setn=function(O,z){I(typeof O=="number"&&O>=0);var Y=O/26|0,te=O%26;return this._expand(Y+1),z?this.words[Y]=this.words[Y]|1<<te:this.words[Y]=this.words[Y]&~(1<<te),this.strip()},T.prototype.iadd=function(O){var z;if(this.negative!==0&&O.negative===0)return this.negative=0,z=this.isub(O),this.negative^=1,this._normSign();if(this.negative===0&&O.negative!==0)return O.negative=0,z=this.isub(O),O.negative=1,z._normSign();var Y,te;this.length>O.length?(Y=this,te=O):(Y=O,te=this);for(var oe=0,le=0;le<te.length;le++)z=(Y.words[le]|0)+(te.words[le]|0)+oe,this.words[le]=z&67108863,oe=z>>>26;for(;oe!==0&&le<Y.length;le++)z=(Y.words[le]|0)+oe,this.words[le]=z&67108863,oe=z>>>26;if(this.length=Y.length,oe!==0)this.words[this.length]=oe,this.length++;else if(Y!==this)for(;le<Y.length;le++)this.words[le]=Y.words[le];return this},T.prototype.add=function(O){var z;return O.negative!==0&&this.negative===0?(O.negative=0,z=this.sub(O),O.negative^=1,z):O.negative===0&&this.negative!==0?(this.negative=0,z=O.sub(this),this.negative=1,z):this.length>O.length?this.clone().iadd(O):O.clone().iadd(this)},T.prototype.isub=function(O){if(O.negative!==0){O.negative=0;var z=this.iadd(O);return O.negative=1,z._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(O),this.negative=1,this._normSign();var Y=this.cmp(O);if(Y===0)return this.negative=0,this.length=1,this.words[0]=0,this;var te,oe;Y>0?(te=this,oe=O):(te=O,oe=this);for(var le=0,he=0;he<oe.length;he++)z=(te.words[he]|0)-(oe.words[he]|0)+le,le=z>>26,this.words[he]=z&67108863;for(;le!==0&&he<te.length;he++)z=(te.words[he]|0)+le,le=z>>26,this.words[he]=z&67108863;if(le===0&&he<te.length&&te!==this)for(;he<te.length;he++)this.words[he]=te.words[he];return this.length=Math.max(this.length,he),te!==this&&(this.negative=1),this.strip()},T.prototype.sub=function(O){return this.clone().isub(O)};function J(ue,O,z){z.negative=O.negative^ue.negative;var Y=ue.length+O.length|0;z.length=Y,Y=Y-1|0;var te=ue.words[0]|0,oe=O.words[0]|0,le=te*oe,he=le&67108863,ae=le/67108864|0;z.words[0]=he;for(var Q=1;Q<Y;Q++){for(var se=ae>>>26,Ae=ae&67108863,ge=Math.min(Q,O.length-1),Ee=Math.max(0,Q-ue.length+1);Ee<=ge;Ee++){var ke=Q-Ee|0;te=ue.words[ke]|0,oe=O.words[Ee]|0,le=te*oe+Ae,se+=le/67108864|0,Ae=le&67108863}z.words[Q]=Ae|0,ae=se|0}return ae!==0?z.words[Q]=ae|0:z.length--,z.strip()}var ee=function(O,z,Y){var te=O.words,oe=z.words,le=Y.words,he=0,ae,Q,se,Ae=te[0]|0,ge=Ae&8191,Ee=Ae>>>13,ke=te[1]|0,Se=ke&8191,Ie=ke>>>13,we=te[2]|0,xe=we&8191,Fe=we>>>13,Ge=te[3]|0,Oe=Ge&8191,et=Ge>>>13,Mt=te[4]|0,dt=Mt&8191,mt=Mt>>>13,Ut=te[5]|0,St=Ut&8191,vt=Ut>>>13,It=te[6]|0,yt=It&8191,Tt=It>>>13,Wt=te[7]|0,ft=Wt&8191,_t=Wt>>>13,Xt=te[8]|0,Nt=Xt&8191,qt=Xt>>>13,nr=te[9]|0,ze=nr&8191,Ce=nr>>>13,Le=oe[0]|0,Ze=Le&8191,Je=Le>>>13,nt=oe[1]|0,rt=nt&8191,He=nt>>>13,Dt=oe[2]|0,Rt=Dt&8191,De=Dt>>>13,We=oe[3]|0,Ve=We&8191,qe=We>>>13,pt=oe[4]|0,At=pt&8191,jt=pt>>>13,rr=oe[5]|0,Ke=rr&8191,Ne=rr>>>13,Ye=oe[6]|0,st=Ye&8191,bt=Ye>>>13,Qe=oe[7]|0,Re=Qe&8191,Pe=Qe>>>13,Me=oe[8]|0,$e=Me&8191,it=Me>>>13,kt=oe[9]|0,xt=kt&8191,Ot=kt>>>13;Y.negative=O.negative^z.negative,Y.length=19,ae=Math.imul(ge,Ze),Q=Math.imul(ge,Je),Q=Q+Math.imul(Ee,Ze)|0,se=Math.imul(Ee,Je);var Jt=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,ae=Math.imul(Se,Ze),Q=Math.imul(Se,Je),Q=Q+Math.imul(Ie,Ze)|0,se=Math.imul(Ie,Je),ae=ae+Math.imul(ge,rt)|0,Q=Q+Math.imul(ge,He)|0,Q=Q+Math.imul(Ee,rt)|0,se=se+Math.imul(Ee,He)|0;var tr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(tr>>>26)|0,tr&=67108863,ae=Math.imul(xe,Ze),Q=Math.imul(xe,Je),Q=Q+Math.imul(Fe,Ze)|0,se=Math.imul(Fe,Je),ae=ae+Math.imul(Se,rt)|0,Q=Q+Math.imul(Se,He)|0,Q=Q+Math.imul(Ie,rt)|0,se=se+Math.imul(Ie,He)|0,ae=ae+Math.imul(ge,Rt)|0,Q=Q+Math.imul(ge,De)|0,Q=Q+Math.imul(Ee,Rt)|0,se=se+Math.imul(Ee,De)|0;var br=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(br>>>26)|0,br&=67108863,ae=Math.imul(Oe,Ze),Q=Math.imul(Oe,Je),Q=Q+Math.imul(et,Ze)|0,se=Math.imul(et,Je),ae=ae+Math.imul(xe,rt)|0,Q=Q+Math.imul(xe,He)|0,Q=Q+Math.imul(Fe,rt)|0,se=se+Math.imul(Fe,He)|0,ae=ae+Math.imul(Se,Rt)|0,Q=Q+Math.imul(Se,De)|0,Q=Q+Math.imul(Ie,Rt)|0,se=se+Math.imul(Ie,De)|0,ae=ae+Math.imul(ge,Ve)|0,Q=Q+Math.imul(ge,qe)|0,Q=Q+Math.imul(Ee,Ve)|0,se=se+Math.imul(Ee,qe)|0;var ar=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(ar>>>26)|0,ar&=67108863,ae=Math.imul(dt,Ze),Q=Math.imul(dt,Je),Q=Q+Math.imul(mt,Ze)|0,se=Math.imul(mt,Je),ae=ae+Math.imul(Oe,rt)|0,Q=Q+Math.imul(Oe,He)|0,Q=Q+Math.imul(et,rt)|0,se=se+Math.imul(et,He)|0,ae=ae+Math.imul(xe,Rt)|0,Q=Q+Math.imul(xe,De)|0,Q=Q+Math.imul(Fe,Rt)|0,se=se+Math.imul(Fe,De)|0,ae=ae+Math.imul(Se,Ve)|0,Q=Q+Math.imul(Se,qe)|0,Q=Q+Math.imul(Ie,Ve)|0,se=se+Math.imul(Ie,qe)|0,ae=ae+Math.imul(ge,At)|0,Q=Q+Math.imul(ge,jt)|0,Q=Q+Math.imul(Ee,At)|0,se=se+Math.imul(Ee,jt)|0;var _r=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(_r>>>26)|0,_r&=67108863,ae=Math.imul(St,Ze),Q=Math.imul(St,Je),Q=Q+Math.imul(vt,Ze)|0,se=Math.imul(vt,Je),ae=ae+Math.imul(dt,rt)|0,Q=Q+Math.imul(dt,He)|0,Q=Q+Math.imul(mt,rt)|0,se=se+Math.imul(mt,He)|0,ae=ae+Math.imul(Oe,Rt)|0,Q=Q+Math.imul(Oe,De)|0,Q=Q+Math.imul(et,Rt)|0,se=se+Math.imul(et,De)|0,ae=ae+Math.imul(xe,Ve)|0,Q=Q+Math.imul(xe,qe)|0,Q=Q+Math.imul(Fe,Ve)|0,se=se+Math.imul(Fe,qe)|0,ae=ae+Math.imul(Se,At)|0,Q=Q+Math.imul(Se,jt)|0,Q=Q+Math.imul(Ie,At)|0,se=se+Math.imul(Ie,jt)|0,ae=ae+Math.imul(ge,Ke)|0,Q=Q+Math.imul(ge,Ne)|0,Q=Q+Math.imul(Ee,Ke)|0,se=se+Math.imul(Ee,Ne)|0;var or=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(or>>>26)|0,or&=67108863,ae=Math.imul(yt,Ze),Q=Math.imul(yt,Je),Q=Q+Math.imul(Tt,Ze)|0,se=Math.imul(Tt,Je),ae=ae+Math.imul(St,rt)|0,Q=Q+Math.imul(St,He)|0,Q=Q+Math.imul(vt,rt)|0,se=se+Math.imul(vt,He)|0,ae=ae+Math.imul(dt,Rt)|0,Q=Q+Math.imul(dt,De)|0,Q=Q+Math.imul(mt,Rt)|0,se=se+Math.imul(mt,De)|0,ae=ae+Math.imul(Oe,Ve)|0,Q=Q+Math.imul(Oe,qe)|0,Q=Q+Math.imul(et,Ve)|0,se=se+Math.imul(et,qe)|0,ae=ae+Math.imul(xe,At)|0,Q=Q+Math.imul(xe,jt)|0,Q=Q+Math.imul(Fe,At)|0,se=se+Math.imul(Fe,jt)|0,ae=ae+Math.imul(Se,Ke)|0,Q=Q+Math.imul(Se,Ne)|0,Q=Q+Math.imul(Ie,Ke)|0,se=se+Math.imul(Ie,Ne)|0,ae=ae+Math.imul(ge,st)|0,Q=Q+Math.imul(ge,bt)|0,Q=Q+Math.imul(Ee,st)|0,se=se+Math.imul(Ee,bt)|0;var gr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(gr>>>26)|0,gr&=67108863,ae=Math.imul(ft,Ze),Q=Math.imul(ft,Je),Q=Q+Math.imul(_t,Ze)|0,se=Math.imul(_t,Je),ae=ae+Math.imul(yt,rt)|0,Q=Q+Math.imul(yt,He)|0,Q=Q+Math.imul(Tt,rt)|0,se=se+Math.imul(Tt,He)|0,ae=ae+Math.imul(St,Rt)|0,Q=Q+Math.imul(St,De)|0,Q=Q+Math.imul(vt,Rt)|0,se=se+Math.imul(vt,De)|0,ae=ae+Math.imul(dt,Ve)|0,Q=Q+Math.imul(dt,qe)|0,Q=Q+Math.imul(mt,Ve)|0,se=se+Math.imul(mt,qe)|0,ae=ae+Math.imul(Oe,At)|0,Q=Q+Math.imul(Oe,jt)|0,Q=Q+Math.imul(et,At)|0,se=se+Math.imul(et,jt)|0,ae=ae+Math.imul(xe,Ke)|0,Q=Q+Math.imul(xe,Ne)|0,Q=Q+Math.imul(Fe,Ke)|0,se=se+Math.imul(Fe,Ne)|0,ae=ae+Math.imul(Se,st)|0,Q=Q+Math.imul(Se,bt)|0,Q=Q+Math.imul(Ie,st)|0,se=se+Math.imul(Ie,bt)|0,ae=ae+Math.imul(ge,Re)|0,Q=Q+Math.imul(ge,Pe)|0,Q=Q+Math.imul(Ee,Re)|0,se=se+Math.imul(Ee,Pe)|0;var xr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(xr>>>26)|0,xr&=67108863,ae=Math.imul(Nt,Ze),Q=Math.imul(Nt,Je),Q=Q+Math.imul(qt,Ze)|0,se=Math.imul(qt,Je),ae=ae+Math.imul(ft,rt)|0,Q=Q+Math.imul(ft,He)|0,Q=Q+Math.imul(_t,rt)|0,se=se+Math.imul(_t,He)|0,ae=ae+Math.imul(yt,Rt)|0,Q=Q+Math.imul(yt,De)|0,Q=Q+Math.imul(Tt,Rt)|0,se=se+Math.imul(Tt,De)|0,ae=ae+Math.imul(St,Ve)|0,Q=Q+Math.imul(St,qe)|0,Q=Q+Math.imul(vt,Ve)|0,se=se+Math.imul(vt,qe)|0,ae=ae+Math.imul(dt,At)|0,Q=Q+Math.imul(dt,jt)|0,Q=Q+Math.imul(mt,At)|0,se=se+Math.imul(mt,jt)|0,ae=ae+Math.imul(Oe,Ke)|0,Q=Q+Math.imul(Oe,Ne)|0,Q=Q+Math.imul(et,Ke)|0,se=se+Math.imul(et,Ne)|0,ae=ae+Math.imul(xe,st)|0,Q=Q+Math.imul(xe,bt)|0,Q=Q+Math.imul(Fe,st)|0,se=se+Math.imul(Fe,bt)|0,ae=ae+Math.imul(Se,Re)|0,Q=Q+Math.imul(Se,Pe)|0,Q=Q+Math.imul(Ie,Re)|0,se=se+Math.imul(Ie,Pe)|0,ae=ae+Math.imul(ge,$e)|0,Q=Q+Math.imul(ge,it)|0,Q=Q+Math.imul(Ee,$e)|0,se=se+Math.imul(Ee,it)|0;var vr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(vr>>>26)|0,vr&=67108863,ae=Math.imul(ze,Ze),Q=Math.imul(ze,Je),Q=Q+Math.imul(Ce,Ze)|0,se=Math.imul(Ce,Je),ae=ae+Math.imul(Nt,rt)|0,Q=Q+Math.imul(Nt,He)|0,Q=Q+Math.imul(qt,rt)|0,se=se+Math.imul(qt,He)|0,ae=ae+Math.imul(ft,Rt)|0,Q=Q+Math.imul(ft,De)|0,Q=Q+Math.imul(_t,Rt)|0,se=se+Math.imul(_t,De)|0,ae=ae+Math.imul(yt,Ve)|0,Q=Q+Math.imul(yt,qe)|0,Q=Q+Math.imul(Tt,Ve)|0,se=se+Math.imul(Tt,qe)|0,ae=ae+Math.imul(St,At)|0,Q=Q+Math.imul(St,jt)|0,Q=Q+Math.imul(vt,At)|0,se=se+Math.imul(vt,jt)|0,ae=ae+Math.imul(dt,Ke)|0,Q=Q+Math.imul(dt,Ne)|0,Q=Q+Math.imul(mt,Ke)|0,se=se+Math.imul(mt,Ne)|0,ae=ae+Math.imul(Oe,st)|0,Q=Q+Math.imul(Oe,bt)|0,Q=Q+Math.imul(et,st)|0,se=se+Math.imul(et,bt)|0,ae=ae+Math.imul(xe,Re)|0,Q=Q+Math.imul(xe,Pe)|0,Q=Q+Math.imul(Fe,Re)|0,se=se+Math.imul(Fe,Pe)|0,ae=ae+Math.imul(Se,$e)|0,Q=Q+Math.imul(Se,it)|0,Q=Q+Math.imul(Ie,$e)|0,se=se+Math.imul(Ie,it)|0,ae=ae+Math.imul(ge,xt)|0,Q=Q+Math.imul(ge,Ot)|0,Q=Q+Math.imul(Ee,xt)|0,se=se+Math.imul(Ee,Ot)|0;var Cr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,ae=Math.imul(ze,rt),Q=Math.imul(ze,He),Q=Q+Math.imul(Ce,rt)|0,se=Math.imul(Ce,He),ae=ae+Math.imul(Nt,Rt)|0,Q=Q+Math.imul(Nt,De)|0,Q=Q+Math.imul(qt,Rt)|0,se=se+Math.imul(qt,De)|0,ae=ae+Math.imul(ft,Ve)|0,Q=Q+Math.imul(ft,qe)|0,Q=Q+Math.imul(_t,Ve)|0,se=se+Math.imul(_t,qe)|0,ae=ae+Math.imul(yt,At)|0,Q=Q+Math.imul(yt,jt)|0,Q=Q+Math.imul(Tt,At)|0,se=se+Math.imul(Tt,jt)|0,ae=ae+Math.imul(St,Ke)|0,Q=Q+Math.imul(St,Ne)|0,Q=Q+Math.imul(vt,Ke)|0,se=se+Math.imul(vt,Ne)|0,ae=ae+Math.imul(dt,st)|0,Q=Q+Math.imul(dt,bt)|0,Q=Q+Math.imul(mt,st)|0,se=se+Math.imul(mt,bt)|0,ae=ae+Math.imul(Oe,Re)|0,Q=Q+Math.imul(Oe,Pe)|0,Q=Q+Math.imul(et,Re)|0,se=se+Math.imul(et,Pe)|0,ae=ae+Math.imul(xe,$e)|0,Q=Q+Math.imul(xe,it)|0,Q=Q+Math.imul(Fe,$e)|0,se=se+Math.imul(Fe,it)|0,ae=ae+Math.imul(Se,xt)|0,Q=Q+Math.imul(Se,Ot)|0,Q=Q+Math.imul(Ie,xt)|0,se=se+Math.imul(Ie,Ot)|0;var Sr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(Sr>>>26)|0,Sr&=67108863,ae=Math.imul(ze,Rt),Q=Math.imul(ze,De),Q=Q+Math.imul(Ce,Rt)|0,se=Math.imul(Ce,De),ae=ae+Math.imul(Nt,Ve)|0,Q=Q+Math.imul(Nt,qe)|0,Q=Q+Math.imul(qt,Ve)|0,se=se+Math.imul(qt,qe)|0,ae=ae+Math.imul(ft,At)|0,Q=Q+Math.imul(ft,jt)|0,Q=Q+Math.imul(_t,At)|0,se=se+Math.imul(_t,jt)|0,ae=ae+Math.imul(yt,Ke)|0,Q=Q+Math.imul(yt,Ne)|0,Q=Q+Math.imul(Tt,Ke)|0,se=se+Math.imul(Tt,Ne)|0,ae=ae+Math.imul(St,st)|0,Q=Q+Math.imul(St,bt)|0,Q=Q+Math.imul(vt,st)|0,se=se+Math.imul(vt,bt)|0,ae=ae+Math.imul(dt,Re)|0,Q=Q+Math.imul(dt,Pe)|0,Q=Q+Math.imul(mt,Re)|0,se=se+Math.imul(mt,Pe)|0,ae=ae+Math.imul(Oe,$e)|0,Q=Q+Math.imul(Oe,it)|0,Q=Q+Math.imul(et,$e)|0,se=se+Math.imul(et,it)|0,ae=ae+Math.imul(xe,xt)|0,Q=Q+Math.imul(xe,Ot)|0,Q=Q+Math.imul(Fe,xt)|0,se=se+Math.imul(Fe,Ot)|0;var dr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(dr>>>26)|0,dr&=67108863,ae=Math.imul(ze,Ve),Q=Math.imul(ze,qe),Q=Q+Math.imul(Ce,Ve)|0,se=Math.imul(Ce,qe),ae=ae+Math.imul(Nt,At)|0,Q=Q+Math.imul(Nt,jt)|0,Q=Q+Math.imul(qt,At)|0,se=se+Math.imul(qt,jt)|0,ae=ae+Math.imul(ft,Ke)|0,Q=Q+Math.imul(ft,Ne)|0,Q=Q+Math.imul(_t,Ke)|0,se=se+Math.imul(_t,Ne)|0,ae=ae+Math.imul(yt,st)|0,Q=Q+Math.imul(yt,bt)|0,Q=Q+Math.imul(Tt,st)|0,se=se+Math.imul(Tt,bt)|0,ae=ae+Math.imul(St,Re)|0,Q=Q+Math.imul(St,Pe)|0,Q=Q+Math.imul(vt,Re)|0,se=se+Math.imul(vt,Pe)|0,ae=ae+Math.imul(dt,$e)|0,Q=Q+Math.imul(dt,it)|0,Q=Q+Math.imul(mt,$e)|0,se=se+Math.imul(mt,it)|0,ae=ae+Math.imul(Oe,xt)|0,Q=Q+Math.imul(Oe,Ot)|0,Q=Q+Math.imul(et,xt)|0,se=se+Math.imul(et,Ot)|0;var wr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(wr>>>26)|0,wr&=67108863,ae=Math.imul(ze,At),Q=Math.imul(ze,jt),Q=Q+Math.imul(Ce,At)|0,se=Math.imul(Ce,jt),ae=ae+Math.imul(Nt,Ke)|0,Q=Q+Math.imul(Nt,Ne)|0,Q=Q+Math.imul(qt,Ke)|0,se=se+Math.imul(qt,Ne)|0,ae=ae+Math.imul(ft,st)|0,Q=Q+Math.imul(ft,bt)|0,Q=Q+Math.imul(_t,st)|0,se=se+Math.imul(_t,bt)|0,ae=ae+Math.imul(yt,Re)|0,Q=Q+Math.imul(yt,Pe)|0,Q=Q+Math.imul(Tt,Re)|0,se=se+Math.imul(Tt,Pe)|0,ae=ae+Math.imul(St,$e)|0,Q=Q+Math.imul(St,it)|0,Q=Q+Math.imul(vt,$e)|0,se=se+Math.imul(vt,it)|0,ae=ae+Math.imul(dt,xt)|0,Q=Q+Math.imul(dt,Ot)|0,Q=Q+Math.imul(mt,xt)|0,se=se+Math.imul(mt,Ot)|0;var fr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(fr>>>26)|0,fr&=67108863,ae=Math.imul(ze,Ke),Q=Math.imul(ze,Ne),Q=Q+Math.imul(Ce,Ke)|0,se=Math.imul(Ce,Ne),ae=ae+Math.imul(Nt,st)|0,Q=Q+Math.imul(Nt,bt)|0,Q=Q+Math.imul(qt,st)|0,se=se+Math.imul(qt,bt)|0,ae=ae+Math.imul(ft,Re)|0,Q=Q+Math.imul(ft,Pe)|0,Q=Q+Math.imul(_t,Re)|0,se=se+Math.imul(_t,Pe)|0,ae=ae+Math.imul(yt,$e)|0,Q=Q+Math.imul(yt,it)|0,Q=Q+Math.imul(Tt,$e)|0,se=se+Math.imul(Tt,it)|0,ae=ae+Math.imul(St,xt)|0,Q=Q+Math.imul(St,Ot)|0,Q=Q+Math.imul(vt,xt)|0,se=se+Math.imul(vt,Ot)|0;var hr=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(hr>>>26)|0,hr&=67108863,ae=Math.imul(ze,st),Q=Math.imul(ze,bt),Q=Q+Math.imul(Ce,st)|0,se=Math.imul(Ce,bt),ae=ae+Math.imul(Nt,Re)|0,Q=Q+Math.imul(Nt,Pe)|0,Q=Q+Math.imul(qt,Re)|0,se=se+Math.imul(qt,Pe)|0,ae=ae+Math.imul(ft,$e)|0,Q=Q+Math.imul(ft,it)|0,Q=Q+Math.imul(_t,$e)|0,se=se+Math.imul(_t,it)|0,ae=ae+Math.imul(yt,xt)|0,Q=Q+Math.imul(yt,Ot)|0,Q=Q+Math.imul(Tt,xt)|0,se=se+Math.imul(Tt,Ot)|0;var Ar=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,ae=Math.imul(ze,Re),Q=Math.imul(ze,Pe),Q=Q+Math.imul(Ce,Re)|0,se=Math.imul(Ce,Pe),ae=ae+Math.imul(Nt,$e)|0,Q=Q+Math.imul(Nt,it)|0,Q=Q+Math.imul(qt,$e)|0,se=se+Math.imul(qt,it)|0,ae=ae+Math.imul(ft,xt)|0,Q=Q+Math.imul(ft,Ot)|0,Q=Q+Math.imul(_t,xt)|0,se=se+Math.imul(_t,Ot)|0;var ur=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(ur>>>26)|0,ur&=67108863,ae=Math.imul(ze,$e),Q=Math.imul(ze,it),Q=Q+Math.imul(Ce,$e)|0,se=Math.imul(Ce,it),ae=ae+Math.imul(Nt,xt)|0,Q=Q+Math.imul(Nt,Ot)|0,Q=Q+Math.imul(qt,xt)|0,se=se+Math.imul(qt,Ot)|0;var zt=(he+ae|0)+((Q&8191)<<13)|0;he=(se+(Q>>>13)|0)+(zt>>>26)|0,zt&=67108863,ae=Math.imul(ze,xt),Q=Math.imul(ze,Ot),Q=Q+Math.imul(Ce,xt)|0,se=Math.imul(Ce,Ot);var Kt=(he+ae|0)+((Q&8191)<<13)|0;return he=(se+(Q>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,le[0]=Jt,le[1]=tr,le[2]=br,le[3]=ar,le[4]=_r,le[5]=or,le[6]=gr,le[7]=xr,le[8]=vr,le[9]=Cr,le[10]=Sr,le[11]=dr,le[12]=wr,le[13]=fr,le[14]=hr,le[15]=Ar,le[16]=ur,le[17]=zt,le[18]=Kt,he!==0&&(le[19]=he,Y.length++),Y};Math.imul||(ee=J);function ie(ue,O,z){z.negative=O.negative^ue.negative,z.length=ue.length+O.length;for(var Y=0,te=0,oe=0;oe<z.length-1;oe++){var le=te;te=0;for(var he=Y&67108863,ae=Math.min(oe,O.length-1),Q=Math.max(0,oe-ue.length+1);Q<=ae;Q++){var se=oe-Q,Ae=ue.words[se]|0,ge=O.words[Q]|0,Ee=Ae*ge,ke=Ee&67108863;le=le+(Ee/67108864|0)|0,ke=ke+he|0,he=ke&67108863,le=le+(ke>>>26)|0,te+=le>>>26,le&=67108863}z.words[oe]=he,Y=le,le=te}return Y!==0?z.words[oe]=Y:z.length--,z.strip()}function ne(ue,O,z){var Y=new ce;return Y.mulp(ue,O,z)}T.prototype.mulTo=function(O,z){var Y,te=this.length+O.length;return this.length===10&&O.length===10?Y=ee(this,O,z):te<63?Y=J(this,O,z):te<1024?Y=ie(this,O,z):Y=ne(this,O,z),Y};function ce(ue,O){this.x=ue,this.y=O}ce.prototype.makeRBT=function(O){for(var z=new Array(O),Y=T.prototype._countBits(O)-1,te=0;te<O;te++)z[te]=this.revBin(te,Y,O);return z},ce.prototype.revBin=function(O,z,Y){if(O===0||O===Y-1)return O;for(var te=0,oe=0;oe<z;oe++)te|=(O&1)<<z-oe-1,O>>=1;return te},ce.prototype.permute=function(O,z,Y,te,oe,le){for(var he=0;he<le;he++)te[he]=z[O[he]],oe[he]=Y[O[he]]},ce.prototype.transform=function(O,z,Y,te,oe,le){this.permute(le,O,z,Y,te,oe);for(var he=1;he<oe;he<<=1)for(var ae=he<<1,Q=Math.cos(2*Math.PI/ae),se=Math.sin(2*Math.PI/ae),Ae=0;Ae<oe;Ae+=ae)for(var ge=Q,Ee=se,ke=0;ke<he;ke++){var Se=Y[Ae+ke],Ie=te[Ae+ke],we=Y[Ae+ke+he],xe=te[Ae+ke+he],Fe=ge*we-Ee*xe;xe=ge*xe+Ee*we,we=Fe,Y[Ae+ke]=Se+we,te[Ae+ke]=Ie+xe,Y[Ae+ke+he]=Se-we,te[Ae+ke+he]=Ie-xe,ke!==ae&&(Fe=Q*ge-se*Ee,Ee=Q*Ee+se*ge,ge=Fe)}},ce.prototype.guessLen13b=function(O,z){var Y=Math.max(z,O)|1,te=Y&1,oe=0;for(Y=Y/2|0;Y;Y=Y>>>1)oe++;return 1<<oe+1+te},ce.prototype.conjugate=function(O,z,Y){if(!(Y<=1))for(var te=0;te<Y/2;te++){var oe=O[te];O[te]=O[Y-te-1],O[Y-te-1]=oe,oe=z[te],z[te]=-z[Y-te-1],z[Y-te-1]=-oe}},ce.prototype.normalize13b=function(O,z){for(var Y=0,te=0;te<z/2;te++){var oe=Math.round(O[2*te+1]/z)*8192+Math.round(O[2*te]/z)+Y;O[te]=oe&67108863,oe<67108864?Y=0:Y=oe/67108864|0}return O},ce.prototype.convert13b=function(O,z,Y,te){for(var oe=0,le=0;le<z;le++)oe=oe+(O[le]|0),Y[2*le]=oe&8191,oe=oe>>>13,Y[2*le+1]=oe&8191,oe=oe>>>13;for(le=2*z;le<te;++le)Y[le]=0;I(oe===0),I((oe&-8192)===0)},ce.prototype.stub=function(O){for(var z=new Array(O),Y=0;Y<O;Y++)z[Y]=0;return z},ce.prototype.mulp=function(O,z,Y){var te=2*this.guessLen13b(O.length,z.length),oe=this.makeRBT(te),le=this.stub(te),he=new Array(te),ae=new Array(te),Q=new Array(te),se=new Array(te),Ae=new Array(te),ge=new Array(te),Ee=Y.words;Ee.length=te,this.convert13b(O.words,O.length,he,te),this.convert13b(z.words,z.length,se,te),this.transform(he,le,ae,Q,te,oe),this.transform(se,le,Ae,ge,te,oe);for(var ke=0;ke<te;ke++){var Se=ae[ke]*Ae[ke]-Q[ke]*ge[ke];Q[ke]=ae[ke]*ge[ke]+Q[ke]*Ae[ke],ae[ke]=Se}return this.conjugate(ae,Q,te),this.transform(ae,Q,Ee,le,te,oe),this.conjugate(Ee,le,te),this.normalize13b(Ee,te),Y.negative=O.negative^z.negative,Y.length=O.length+z.length,Y.strip()},T.prototype.mul=function(O){var z=new T(null);return z.words=new Array(this.length+O.length),this.mulTo(O,z)},T.prototype.mulf=function(O){var z=new T(null);return z.words=new Array(this.length+O.length),ne(this,O,z)},T.prototype.imul=function(O){return this.clone().mulTo(O,this)},T.prototype.imuln=function(O){I(typeof O=="number"),I(O<67108864);for(var z=0,Y=0;Y<this.length;Y++){var te=(this.words[Y]|0)*O,oe=(te&67108863)+(z&67108863);z>>=26,z+=te/67108864|0,z+=oe>>>26,this.words[Y]=oe&67108863}return z!==0&&(this.words[Y]=z,this.length++),this.length=O===0?1:this.length,this},T.prototype.muln=function(O){return this.clone().imuln(O)},T.prototype.sqr=function(){return this.mul(this)},T.prototype.isqr=function(){return this.imul(this.clone())},T.prototype.pow=function(O){var z=K(O);if(z.length===0)return new T(1);for(var Y=this,te=0;te<z.length&&z[te]===0;te++,Y=Y.sqr());if(++te<z.length)for(var oe=Y.sqr();te<z.length;te++,oe=oe.sqr())z[te]!==0&&(Y=Y.mul(oe));return Y},T.prototype.iushln=function(O){I(typeof O=="number"&&O>=0);var z=O%26,Y=(O-z)/26,te=67108863>>>26-z<<26-z,oe;if(z!==0){var le=0;for(oe=0;oe<this.length;oe++){var he=this.words[oe]&te,ae=(this.words[oe]|0)-he<<z;this.words[oe]=ae|le,le=he>>>26-z}le&&(this.words[oe]=le,this.length++)}if(Y!==0){for(oe=this.length-1;oe>=0;oe--)this.words[oe+Y]=this.words[oe];for(oe=0;oe<Y;oe++)this.words[oe]=0;this.length+=Y}return this.strip()},T.prototype.ishln=function(O){return I(this.negative===0),this.iushln(O)},T.prototype.iushrn=function(O,z,Y){I(typeof O=="number"&&O>=0);var te;z?te=(z-z%26)/26:te=0;var oe=O%26,le=Math.min((O-oe)/26,this.length),he=67108863^67108863>>>oe<<oe,ae=Y;if(te-=le,te=Math.max(0,te),ae){for(var Q=0;Q<le;Q++)ae.words[Q]=this.words[Q];ae.length=le}if(le!==0)if(this.length>le)for(this.length-=le,Q=0;Q<this.length;Q++)this.words[Q]=this.words[Q+le];else this.words[0]=0,this.length=1;var se=0;for(Q=this.length-1;Q>=0&&(se!==0||Q>=te);Q--){var Ae=this.words[Q]|0;this.words[Q]=se<<26-oe|Ae>>>oe,se=Ae&he}return ae&&se!==0&&(ae.words[ae.length++]=se),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},T.prototype.ishrn=function(O,z,Y){return I(this.negative===0),this.iushrn(O,z,Y)},T.prototype.shln=function(O){return this.clone().ishln(O)},T.prototype.ushln=function(O){return this.clone().iushln(O)},T.prototype.shrn=function(O){return this.clone().ishrn(O)},T.prototype.ushrn=function(O){return this.clone().iushrn(O)},T.prototype.testn=function(O){I(typeof O=="number"&&O>=0);var z=O%26,Y=(O-z)/26,te=1<<z;if(this.length<=Y)return!1;var oe=this.words[Y];return!!(oe&te)},T.prototype.imaskn=function(O){I(typeof O=="number"&&O>=0);var z=O%26,Y=(O-z)/26;if(I(this.negative===0,"imaskn works only with positive numbers"),this.length<=Y)return this;if(z!==0&&Y++,this.length=Math.min(Y,this.length),z!==0){var te=67108863^67108863>>>z<<z;this.words[this.length-1]&=te}return this.strip()},T.prototype.maskn=function(O){return this.clone().imaskn(O)},T.prototype.iaddn=function(O){return I(typeof O=="number"),I(O<67108864),O<0?this.isubn(-O):this.negative!==0?this.length===1&&(this.words[0]|0)<O?(this.words[0]=O-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(O),this.negative=1,this):this._iaddn(O)},T.prototype._iaddn=function(O){this.words[0]+=O;for(var z=0;z<this.length&&this.words[z]>=67108864;z++)this.words[z]-=67108864,z===this.length-1?this.words[z+1]=1:this.words[z+1]++;return this.length=Math.max(this.length,z+1),this},T.prototype.isubn=function(O){if(I(typeof O=="number"),I(O<67108864),O<0)return this.iaddn(-O);if(this.negative!==0)return this.negative=0,this.iaddn(O),this.negative=1,this;if(this.words[0]-=O,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var z=0;z<this.length&&this.words[z]<0;z++)this.words[z]+=67108864,this.words[z+1]-=1;return this.strip()},T.prototype.addn=function(O){return this.clone().iaddn(O)},T.prototype.subn=function(O){return this.clone().isubn(O)},T.prototype.iabs=function(){return this.negative=0,this},T.prototype.abs=function(){return this.clone().iabs()},T.prototype._ishlnsubmul=function(O,z,Y){var te=O.length+Y,oe;this._expand(te);var le,he=0;for(oe=0;oe<O.length;oe++){le=(this.words[oe+Y]|0)+he;var ae=(O.words[oe]|0)*z;le-=ae&67108863,he=(le>>26)-(ae/67108864|0),this.words[oe+Y]=le&67108863}for(;oe<this.length-Y;oe++)le=(this.words[oe+Y]|0)+he,he=le>>26,this.words[oe+Y]=le&67108863;if(he===0)return this.strip();for(I(he===-1),he=0,oe=0;oe<this.length;oe++)le=-(this.words[oe]|0)+he,he=le>>26,this.words[oe]=le&67108863;return this.negative=1,this.strip()},T.prototype._wordDiv=function(O,z){var Y=this.length-O.length,te=this.clone(),oe=O,le=oe.words[oe.length-1]|0,he=this._countBits(le);Y=26-he,Y!==0&&(oe=oe.ushln(Y),te.iushln(Y),le=oe.words[oe.length-1]|0);var ae=te.length-oe.length,Q;if(z!=="mod"){Q=new T(null),Q.length=ae+1,Q.words=new Array(Q.length);for(var se=0;se<Q.length;se++)Q.words[se]=0}var Ae=te.clone()._ishlnsubmul(oe,1,ae);Ae.negative===0&&(te=Ae,Q&&(Q.words[ae]=1));for(var ge=ae-1;ge>=0;ge--){var Ee=(te.words[oe.length+ge]|0)*67108864+(te.words[oe.length+ge-1]|0);for(Ee=Math.min(Ee/le|0,67108863),te._ishlnsubmul(oe,Ee,ge);te.negative!==0;)Ee--,te.negative=0,te._ishlnsubmul(oe,1,ge),te.isZero()||(te.negative^=1);Q&&(Q.words[ge]=Ee)}return Q&&Q.strip(),te.strip(),z!=="div"&&Y!==0&&te.iushrn(Y),{div:Q||null,mod:te}},T.prototype.divmod=function(O,z,Y){if(I(!O.isZero()),this.isZero())return{div:new T(0),mod:new T(0)};var te,oe,le;return this.negative!==0&&O.negative===0?(le=this.neg().divmod(O,z),z!=="mod"&&(te=le.div.neg()),z!=="div"&&(oe=le.mod.neg(),Y&&oe.negative!==0&&oe.iadd(O)),{div:te,mod:oe}):this.negative===0&&O.negative!==0?(le=this.divmod(O.neg(),z),z!=="mod"&&(te=le.div.neg()),{div:te,mod:le.mod}):(this.negative&O.negative)!==0?(le=this.neg().divmod(O.neg(),z),z!=="div"&&(oe=le.mod.neg(),Y&&oe.negative!==0&&oe.isub(O)),{div:le.div,mod:oe}):O.length>this.length||this.cmp(O)<0?{div:new T(0),mod:this}:O.length===1?z==="div"?{div:this.divn(O.words[0]),mod:null}:z==="mod"?{div:null,mod:new T(this.modn(O.words[0]))}:{div:this.divn(O.words[0]),mod:new T(this.modn(O.words[0]))}:this._wordDiv(O,z)},T.prototype.div=function(O){return this.divmod(O,"div",!1).div},T.prototype.mod=function(O){return this.divmod(O,"mod",!1).mod},T.prototype.umod=function(O){return this.divmod(O,"mod",!0).mod},T.prototype.divRound=function(O){var z=this.divmod(O);if(z.mod.isZero())return z.div;var Y=z.div.negative!==0?z.mod.isub(O):z.mod,te=O.ushrn(1),oe=O.andln(1),le=Y.cmp(te);return le<0||oe===1&&le===0?z.div:z.div.negative!==0?z.div.isubn(1):z.div.iaddn(1)},T.prototype.modn=function(O){I(O<=67108863);for(var z=(1<<26)%O,Y=0,te=this.length-1;te>=0;te--)Y=(z*Y+(this.words[te]|0))%O;return Y},T.prototype.idivn=function(O){I(O<=67108863);for(var z=0,Y=this.length-1;Y>=0;Y--){var te=(this.words[Y]|0)+z*67108864;this.words[Y]=te/O|0,z=te%O}return this.strip()},T.prototype.divn=function(O){return this.clone().idivn(O)},T.prototype.egcd=function(O){I(O.negative===0),I(!O.isZero());var z=this,Y=O.clone();z.negative!==0?z=z.umod(O):z=z.clone();for(var te=new T(1),oe=new T(0),le=new T(0),he=new T(1),ae=0;z.isEven()&&Y.isEven();)z.iushrn(1),Y.iushrn(1),++ae;for(var Q=Y.clone(),se=z.clone();!z.isZero();){for(var Ae=0,ge=1;(z.words[0]&ge)===0&&Ae<26;++Ae,ge<<=1);if(Ae>0)for(z.iushrn(Ae);Ae-- >0;)(te.isOdd()||oe.isOdd())&&(te.iadd(Q),oe.isub(se)),te.iushrn(1),oe.iushrn(1);for(var Ee=0,ke=1;(Y.words[0]&ke)===0&&Ee<26;++Ee,ke<<=1);if(Ee>0)for(Y.iushrn(Ee);Ee-- >0;)(le.isOdd()||he.isOdd())&&(le.iadd(Q),he.isub(se)),le.iushrn(1),he.iushrn(1);z.cmp(Y)>=0?(z.isub(Y),te.isub(le),oe.isub(he)):(Y.isub(z),le.isub(te),he.isub(oe))}return{a:le,b:he,gcd:Y.iushln(ae)}},T.prototype._invmp=function(O){I(O.negative===0),I(!O.isZero());var z=this,Y=O.clone();z.negative!==0?z=z.umod(O):z=z.clone();for(var te=new T(1),oe=new T(0),le=Y.clone();z.cmpn(1)>0&&Y.cmpn(1)>0;){for(var he=0,ae=1;(z.words[0]&ae)===0&&he<26;++he,ae<<=1);if(he>0)for(z.iushrn(he);he-- >0;)te.isOdd()&&te.iadd(le),te.iushrn(1);for(var Q=0,se=1;(Y.words[0]&se)===0&&Q<26;++Q,se<<=1);if(Q>0)for(Y.iushrn(Q);Q-- >0;)oe.isOdd()&&oe.iadd(le),oe.iushrn(1);z.cmp(Y)>=0?(z.isub(Y),te.isub(oe)):(Y.isub(z),oe.isub(te))}var Ae;return z.cmpn(1)===0?Ae=te:Ae=oe,Ae.cmpn(0)<0&&Ae.iadd(O),Ae},T.prototype.gcd=function(O){if(this.isZero())return O.abs();if(O.isZero())return this.abs();var z=this.clone(),Y=O.clone();z.negative=0,Y.negative=0;for(var te=0;z.isEven()&&Y.isEven();te++)z.iushrn(1),Y.iushrn(1);do{for(;z.isEven();)z.iushrn(1);for(;Y.isEven();)Y.iushrn(1);var oe=z.cmp(Y);if(oe<0){var le=z;z=Y,Y=le}else if(oe===0||Y.cmpn(1)===0)break;z.isub(Y)}while(!0);return Y.iushln(te)},T.prototype.invm=function(O){return this.egcd(O).a.umod(O)},T.prototype.isEven=function(){return(this.words[0]&1)===0},T.prototype.isOdd=function(){return(this.words[0]&1)===1},T.prototype.andln=function(O){return this.words[0]&O},T.prototype.bincn=function(O){I(typeof O=="number");var z=O%26,Y=(O-z)/26,te=1<<z;if(this.length<=Y)return this._expand(Y+1),this.words[Y]|=te,this;for(var oe=te,le=Y;oe!==0&&le<this.length;le++){var he=this.words[le]|0;he+=oe,oe=he>>>26,he&=67108863,this.words[le]=he}return oe!==0&&(this.words[le]=oe,this.length++),this},T.prototype.isZero=function(){return this.length===1&&this.words[0]===0},T.prototype.cmpn=function(O){var z=O<0;if(this.negative!==0&&!z)return-1;if(this.negative===0&&z)return 1;this.strip();var Y;if(this.length>1)Y=1;else{z&&(O=-O),I(O<=67108863,"Number is too big");var te=this.words[0]|0;Y=te===O?0:te<O?-1:1}return this.negative!==0?-Y|0:Y},T.prototype.cmp=function(O){if(this.negative!==0&&O.negative===0)return-1;if(this.negative===0&&O.negative!==0)return 1;var z=this.ucmp(O);return this.negative!==0?-z|0:z},T.prototype.ucmp=function(O){if(this.length>O.length)return 1;if(this.length<O.length)return-1;for(var z=0,Y=this.length-1;Y>=0;Y--){var te=this.words[Y]|0,oe=O.words[Y]|0;if(te!==oe){te<oe?z=-1:te>oe&&(z=1);break}}return z},T.prototype.gtn=function(O){return this.cmpn(O)===1},T.prototype.gt=function(O){return this.cmp(O)===1},T.prototype.gten=function(O){return this.cmpn(O)>=0},T.prototype.gte=function(O){return this.cmp(O)>=0},T.prototype.ltn=function(O){return this.cmpn(O)===-1},T.prototype.lt=function(O){return this.cmp(O)===-1},T.prototype.lten=function(O){return this.cmpn(O)<=0},T.prototype.lte=function(O){return this.cmp(O)<=0},T.prototype.eqn=function(O){return this.cmpn(O)===0},T.prototype.eq=function(O){return this.cmp(O)===0},T.red=function(O){return new be(O)},T.prototype.toRed=function(O){return I(!this.red,"Already a number in reduction context"),I(this.negative===0,"red works only with positives"),O.convertTo(this)._forceRed(O)},T.prototype.fromRed=function(){return I(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},T.prototype._forceRed=function(O){return this.red=O,this},T.prototype.forceRed=function(O){return I(!this.red,"Already a number in reduction context"),this._forceRed(O)},T.prototype.redAdd=function(O){return I(this.red,"redAdd works only with red numbers"),this.red.add(this,O)},T.prototype.redIAdd=function(O){return I(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,O)},T.prototype.redSub=function(O){return I(this.red,"redSub works only with red numbers"),this.red.sub(this,O)},T.prototype.redISub=function(O){return I(this.red,"redISub works only with red numbers"),this.red.isub(this,O)},T.prototype.redShl=function(O){return I(this.red,"redShl works only with red numbers"),this.red.shl(this,O)},T.prototype.redMul=function(O){return I(this.red,"redMul works only with red numbers"),this.red._verify2(this,O),this.red.mul(this,O)},T.prototype.redIMul=function(O){return I(this.red,"redMul works only with red numbers"),this.red._verify2(this,O),this.red.imul(this,O)},T.prototype.redSqr=function(){return I(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},T.prototype.redISqr=function(){return I(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},T.prototype.redSqrt=function(){return I(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},T.prototype.redInvm=function(){return I(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},T.prototype.redNeg=function(){return I(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},T.prototype.redPow=function(O){return I(this.red&&!O.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,O)};var fe={k256:null,p224:null,p192:null,p25519:null};function de(ue,O){this.name=ue,this.p=new T(O,16),this.n=this.p.bitLength(),this.k=new T(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}de.prototype._tmp=function(){var O=new T(null);return O.words=new Array(Math.ceil(this.n/13)),O},de.prototype.ireduce=function(O){var z=O,Y;do this.split(z,this.tmp),z=this.imulK(z),z=z.iadd(this.tmp),Y=z.bitLength();while(Y>this.n);var te=Y<this.n?-1:z.ucmp(this.p);return te===0?(z.words[0]=0,z.length=1):te>0?z.isub(this.p):z.strip!==void 0?z.strip():z._strip(),z},de.prototype.split=function(O,z){O.iushrn(this.n,0,z)},de.prototype.imulK=function(O){return O.imul(this.k)};function pe(){de.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}B(pe,de),pe.prototype.split=function(O,z){for(var Y=4194303,te=Math.min(O.length,9),oe=0;oe<te;oe++)z.words[oe]=O.words[oe];if(z.length=te,O.length<=9){O.words[0]=0,O.length=1;return}var le=O.words[9];for(z.words[z.length++]=le&Y,oe=10;oe<O.length;oe++){var he=O.words[oe]|0;O.words[oe-10]=(he&Y)<<4|le>>>22,le=he}le>>>=22,O.words[oe-10]=le,le===0&&O.length>10?O.length-=10:O.length-=9},pe.prototype.imulK=function(O){O.words[O.length]=0,O.words[O.length+1]=0,O.length+=2;for(var z=0,Y=0;Y<O.length;Y++){var te=O.words[Y]|0;z+=te*977,O.words[Y]=z&67108863,z=te*64+(z/67108864|0)}return O.words[O.length-1]===0&&(O.length--,O.words[O.length-1]===0&&O.length--),O};function ve(){de.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}B(ve,de);function ye(){de.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}B(ye,de);function _e(){de.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}B(_e,de),_e.prototype.imulK=function(O){for(var z=0,Y=0;Y<O.length;Y++){var te=(O.words[Y]|0)*19+z,oe=te&67108863;te>>>=26,O.words[Y]=oe,z=te}return z!==0&&(O.words[O.length++]=z),O},T._prime=function(O){if(fe[O])return fe[O];var z;if(O==="k256")z=new pe;else if(O==="p224")z=new ve;else if(O==="p192")z=new ye;else if(O==="p25519")z=new _e;else throw new Error("Unknown prime "+O);return fe[O]=z,z};function be(ue){if(typeof ue=="string"){var O=T._prime(ue);this.m=O.p,this.prime=O}else I(ue.gtn(1),"modulus must be greater than 1"),this.m=ue,this.prime=null}be.prototype._verify1=function(O){I(O.negative===0,"red works only with positives"),I(O.red,"red works only with red numbers")},be.prototype._verify2=function(O,z){I((O.negative|z.negative)===0,"red works only with positives"),I(O.red&&O.red===z.red,"red works only with red numbers")},be.prototype.imod=function(O){return this.prime?this.prime.ireduce(O)._forceRed(this):O.umod(this.m)._forceRed(this)},be.prototype.neg=function(O){return O.isZero()?O.clone():this.m.sub(O)._forceRed(this)},be.prototype.add=function(O,z){this._verify2(O,z);var Y=O.add(z);return Y.cmp(this.m)>=0&&Y.isub(this.m),Y._forceRed(this)},be.prototype.iadd=function(O,z){this._verify2(O,z);var Y=O.iadd(z);return Y.cmp(this.m)>=0&&Y.isub(this.m),Y},be.prototype.sub=function(O,z){this._verify2(O,z);var Y=O.sub(z);return Y.cmpn(0)<0&&Y.iadd(this.m),Y._forceRed(this)},be.prototype.isub=function(O,z){this._verify2(O,z);var Y=O.isub(z);return Y.cmpn(0)<0&&Y.iadd(this.m),Y},be.prototype.shl=function(O,z){return this._verify1(O),this.imod(O.ushln(z))},be.prototype.imul=function(O,z){return this._verify2(O,z),this.imod(O.imul(z))},be.prototype.mul=function(O,z){return this._verify2(O,z),this.imod(O.mul(z))},be.prototype.isqr=function(O){return this.imul(O,O.clone())},be.prototype.sqr=function(O){return this.mul(O,O)},be.prototype.sqrt=function(O){if(O.isZero())return O.clone();var z=this.m.andln(3);if(I(z%2===1),z===3){var Y=this.m.add(new T(1)).iushrn(2);return this.pow(O,Y)}for(var te=this.m.subn(1),oe=0;!te.isZero()&&te.andln(1)===0;)oe++,te.iushrn(1);I(!te.isZero());var le=new T(1).toRed(this),he=le.redNeg(),ae=this.m.subn(1).iushrn(1),Q=this.m.bitLength();for(Q=new T(2*Q*Q).toRed(this);this.pow(Q,ae).cmp(he)!==0;)Q.redIAdd(he);for(var se=this.pow(Q,te),Ae=this.pow(O,te.addn(1).iushrn(1)),ge=this.pow(O,te),Ee=oe;ge.cmp(le)!==0;){for(var ke=ge,Se=0;ke.cmp(le)!==0;Se++)ke=ke.redSqr();I(Se<Ee);var Ie=this.pow(se,new T(1).iushln(Ee-Se-1));Ae=Ae.redMul(Ie),se=Ie.redSqr(),ge=ge.redMul(se),Ee=Se}return Ae},be.prototype.invm=function(O){var z=O._invmp(this.m);return z.negative!==0?(z.negative=0,this.imod(z).redNeg()):this.imod(z)},be.prototype.pow=function(O,z){if(z.isZero())return new T(1).toRed(this);if(z.cmpn(1)===0)return O.clone();var Y=4,te=new Array(1<<Y);te[0]=new T(1).toRed(this),te[1]=O;for(var oe=2;oe<te.length;oe++)te[oe]=this.mul(te[oe-1],O);var le=te[0],he=0,ae=0,Q=z.bitLength()%26;for(Q===0&&(Q=26),oe=z.length-1;oe>=0;oe--){for(var se=z.words[oe],Ae=Q-1;Ae>=0;Ae--){var ge=se>>Ae&1;if(le!==te[0]&&(le=this.sqr(le)),ge===0&&he===0){ae=0;continue}he<<=1,he|=ge,ae++,!(ae!==Y&&(oe!==0||Ae!==0))&&(le=this.mul(le,te[he]),ae=0,he=0)}Q=26}return le},be.prototype.convertTo=function(O){var z=O.umod(this.m);return z===O?z.clone():z},be.prototype.convertFrom=function(O){var z=O.clone();return z.red=null,z},T.mont=function(O){return new Te(O)};function Te(ue){be.call(this,ue),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new T(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}B(Te,be),Te.prototype.convertTo=function(O){return this.imod(O.ushln(this.shift))},Te.prototype.convertFrom=function(O){var z=this.imod(O.mul(this.rinv));return z.red=null,z},Te.prototype.imul=function(O,z){if(O.isZero()||z.isZero())return O.words[0]=0,O.length=1,O;var Y=O.imul(z),te=Y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),oe=Y.isub(te).iushrn(this.shift),le=oe;return oe.cmp(this.m)>=0?le=oe.isub(this.m):oe.cmpn(0)<0&&(le=oe.iadd(this.m)),le._forceRed(this)},Te.prototype.mul=function(O,z){if(O.isZero()||z.isZero())return new T(0)._forceRed(this);var Y=O.mul(z),te=Y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),oe=Y.isub(te).iushrn(this.shift),le=oe;return oe.cmp(this.m)>=0?le=oe.isub(this.m):oe.cmpn(0)<0&&(le=oe.iadd(this.m)),le._forceRed(this)},Te.prototype.invm=function(O){var z=this.imod(O._invmp(this.m).mul(this.r2));return z._forceRed(this)}})(E,bn)})(bn$1)),bn$1.exports}var withPublic_1,hasRequiredWithPublic;function requireWithPublic(){if(hasRequiredWithPublic)return withPublic_1;hasRequiredWithPublic=1;var E=requireBn(),A=requireSafeBuffer$1().Buffer;function _(I,B){return A.from(I.toRed(E.mont(B.modulus)).redPow(new E(B.publicExponent)).fromRed().toArray())}return withPublic_1=_,withPublic_1}var publicEncrypt,hasRequiredPublicEncrypt;function requirePublicEncrypt(){if(hasRequiredPublicEncrypt)return publicEncrypt;hasRequiredPublicEncrypt=1;var E=requireParseAsn1(),A=requireBrowser$e(),_=requireBrowser$c(),I=requireMgf(),B=requireXor(),T=requireBn(),R=requireWithPublic(),P=requireBrowserifyRsa(),D=requireSafeBuffer$1().Buffer;publicEncrypt=function(K,J,ee){var ie;K.padding?ie=K.padding:ee?ie=1:ie=4;var ne=E(K),ce;if(ie===4)ce=F(ne,J);else if(ie===1)ce=L(ne,J,ee);else if(ie===3){if(ce=new T(J),ce.cmp(ne.modulus)>=0)throw new Error("data too long for modulus")}else throw new Error("unknown padding");return ee?P(ce,ne):R(ce,ne)};function F(V,K){var J=V.modulus.byteLength(),ee=K.length,ie=_("sha1").update(D.alloc(0)).digest(),ne=ie.length,ce=2*ne;if(ee>J-ce-2)throw new Error("message too long");var fe=D.alloc(J-ee-ce-2),de=J-ne-1,pe=A(ne),ve=B(D.concat([ie,fe,D.alloc(1,1),K],de),I(pe,de)),ye=B(pe,I(ve,ne));return new T(D.concat([D.alloc(1),ye,ve],J))}function L(V,K,J){var ee=K.length,ie=V.modulus.byteLength();if(ee>ie-11)throw new Error("message too long");var ne;return J?ne=D.alloc(ie-ee-3,255):ne=U(ie-ee-3),new T(D.concat([D.from([0,J?1:2]),ne,D.alloc(1),K],ie))}function U(V){for(var K=D.allocUnsafe(V),J=0,ee=A(V*2),ie=0,ne;J<V;)ie===ee.length&&(ee=A(V*2),ie=0),ne=ee[ie++],ne&&(K[J++]=ne);return K}return publicEncrypt}var privateDecrypt,hasRequiredPrivateDecrypt;function requirePrivateDecrypt(){if(hasRequiredPrivateDecrypt)return privateDecrypt;hasRequiredPrivateDecrypt=1;var E=requireParseAsn1(),A=requireMgf(),_=requireXor(),I=requireBn(),B=requireBrowserifyRsa(),T=requireBrowser$c(),R=requireWithPublic(),P=requireSafeBuffer$1().Buffer;privateDecrypt=function(V,K,J){var ee;V.padding?ee=V.padding:J?ee=1:ee=4;var ie=E(V),ne=ie.modulus.byteLength();if(K.length>ne||new I(K).cmp(ie.modulus)>=0)throw new Error("decryption error");var ce;J?ce=R(new I(K),ie):ce=B(K,ie);var fe=P.alloc(ne-ce.length);if(ce=P.concat([fe,ce],ne),ee===4)return D(ie,ce);if(ee===1)return F(ie,ce,J);if(ee===3)return ce;throw new Error("unknown padding")};function D(U,V){var K=U.modulus.byteLength(),J=T("sha1").update(P.alloc(0)).digest(),ee=J.length;if(V[0]!==0)throw new Error("decryption error");var ie=V.slice(1,ee+1),ne=V.slice(ee+1),ce=_(ie,A(ne,ee)),fe=_(ne,A(ce,K-ee-1));if(L(J,fe.slice(0,ee)))throw new Error("decryption error");for(var de=ee;fe[de]===0;)de++;if(fe[de++]!==1)throw new Error("decryption error");return fe.slice(de)}function F(U,V,K){for(var J=V.slice(0,2),ee=2,ie=0;V[ee++]!==0;)if(ee>=V.length){ie++;break}var ne=V.slice(2,ee-1);if((J.toString("hex")!=="0002"&&!K||J.toString("hex")!=="0001"&&K)&&ie++,ne.length<8&&ie++,ie)throw new Error("decryption error");return V.slice(ee)}function L(U,V){U=P.from(U),V=P.from(V);var K=0,J=U.length;U.length!==V.length&&(K++,J=Math.min(U.length,V.length));for(var ee=-1;++ee<J;)K+=U[ee]^V[ee];return K}return privateDecrypt}var hasRequiredBrowser$4;function requireBrowser$4(){return hasRequiredBrowser$4||(hasRequiredBrowser$4=1,(function(E){E.publicEncrypt=requirePublicEncrypt(),E.privateDecrypt=requirePrivateDecrypt(),E.privateEncrypt=function(_,I){return E.publicEncrypt(_,I,!0)},E.publicDecrypt=function(_,I){return E.privateDecrypt(_,I,!0)}})(browser$4)),browser$4}var browser$3={},hasRequiredBrowser$3;function requireBrowser$3(){if(hasRequiredBrowser$3)return browser$3;hasRequiredBrowser$3=1;function E(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var A=requireSafeBuffer$1(),_=requireBrowser$e(),I=A.Buffer,B=A.kMaxLength,T=commonjsGlobal.crypto||commonjsGlobal.msCrypto,R=Math.pow(2,32)-1;function P(V,K){if(typeof V!="number"||V!==V)throw new TypeError("offset must be a number");if(V>R||V<0)throw new TypeError("offset must be a uint32");if(V>B||V>K)throw new RangeError("offset out of range")}function D(V,K,J){if(typeof V!="number"||V!==V)throw new TypeError("size must be a number");if(V>R||V<0)throw new TypeError("size must be a uint32");if(V+K>J||V>B)throw new RangeError("buffer too small")}T&&T.getRandomValues||!process$1.browser?(browser$3.randomFill=F,browser$3.randomFillSync=U):(browser$3.randomFill=E,browser$3.randomFillSync=E);function F(V,K,J,ee){if(!I.isBuffer(V)&&!(V instanceof commonjsGlobal.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof K=="function")ee=K,K=0,J=V.length;else if(typeof J=="function")ee=J,J=V.length-K;else if(typeof ee!="function")throw new TypeError('"cb" argument must be a function');return P(K,V.length),D(J,K,V.length),L(V,K,J,ee)}function L(V,K,J,ee){if(process$1.browser){var ie=V.buffer,ne=new Uint8Array(ie,K,J);if(T.getRandomValues(ne),ee){process$1.nextTick(function(){ee(null,V)});return}return V}if(ee){_(J,function(fe,de){if(fe)return ee(fe);de.copy(V,K),ee(null,V)});return}var ce=_(J);return ce.copy(V,K),V}function U(V,K,J){if(typeof K>"u"&&(K=0),!I.isBuffer(V)&&!(V instanceof commonjsGlobal.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return P(K,V.length),J===void 0&&(J=V.length-K),D(J,K,V.length),L(V,K,J)}return browser$3}var hasRequiredCryptoBrowserify;function requireCryptoBrowserify(){if(hasRequiredCryptoBrowserify)return cryptoBrowserify;hasRequiredCryptoBrowserify=1,cryptoBrowserify.randomBytes=cryptoBrowserify.rng=cryptoBrowserify.pseudoRandomBytes=cryptoBrowserify.prng=requireBrowser$e(),cryptoBrowserify.createHash=cryptoBrowserify.Hash=requireBrowser$c(),cryptoBrowserify.createHmac=cryptoBrowserify.Hmac=requireBrowser$b();var E=requireAlgos(),A=Object.keys(E),_=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(A);cryptoBrowserify.getHashes=function(){return _};var I=requireBrowser$a();cryptoBrowserify.pbkdf2=I.pbkdf2,cryptoBrowserify.pbkdf2Sync=I.pbkdf2Sync;var B=requireBrowser$8();cryptoBrowserify.Cipher=B.Cipher,cryptoBrowserify.createCipher=B.createCipher,cryptoBrowserify.Cipheriv=B.Cipheriv,cryptoBrowserify.createCipheriv=B.createCipheriv,cryptoBrowserify.Decipher=B.Decipher,cryptoBrowserify.createDecipher=B.createDecipher,cryptoBrowserify.Decipheriv=B.Decipheriv,cryptoBrowserify.createDecipheriv=B.createDecipheriv,cryptoBrowserify.getCiphers=B.getCiphers,cryptoBrowserify.listCiphers=B.listCiphers;var T=requireBrowser$7();cryptoBrowserify.DiffieHellmanGroup=T.DiffieHellmanGroup,cryptoBrowserify.createDiffieHellmanGroup=T.createDiffieHellmanGroup,cryptoBrowserify.getDiffieHellman=T.getDiffieHellman,cryptoBrowserify.createDiffieHellman=T.createDiffieHellman,cryptoBrowserify.DiffieHellman=T.DiffieHellman;var R=requireBrowser$6();cryptoBrowserify.createSign=R.createSign,cryptoBrowserify.Sign=R.Sign,cryptoBrowserify.createVerify=R.createVerify,cryptoBrowserify.Verify=R.Verify,cryptoBrowserify.createECDH=requireBrowser$5();var P=requireBrowser$4();cryptoBrowserify.publicEncrypt=P.publicEncrypt,cryptoBrowserify.privateEncrypt=P.privateEncrypt,cryptoBrowserify.publicDecrypt=P.publicDecrypt,cryptoBrowserify.privateDecrypt=P.privateDecrypt;var D=requireBrowser$3();return cryptoBrowserify.randomFill=D.randomFill,cryptoBrowserify.randomFillSync=D.randomFillSync,cryptoBrowserify.createCredentials=function(){throw new Error(`sorry, createCredentials is not implemented yet
we accept pull requests
https://github.com/browserify/crypto-browserify`)},cryptoBrowserify.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6},cryptoBrowserify}var core=core$1.exports,hasRequiredCore;function requireCore(){return hasRequiredCore||(hasRequiredCore=1,(function(E,A){(function(_,I){E.exports=I()})(core,function(){var _=_||(function(I,B){var T;if(typeof window<"u"&&window.crypto&&(T=window.crypto),typeof self<"u"&&self.crypto&&(T=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(T=globalThis.crypto),!T&&typeof window<"u"&&window.msCrypto&&(T=window.msCrypto),!T&&typeof commonjsGlobal<"u"&&commonjsGlobal.crypto&&(T=commonjsGlobal.crypto),!T&&typeof commonjsRequire=="function")try{T=requireCryptoBrowserify()}catch{}var R=function(){if(T){if(typeof T.getRandomValues=="function")try{return T.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof T.randomBytes=="function")try{return T.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},P=Object.create||(function(){function ce(){}return function(fe){var de;return ce.prototype=fe,de=new ce,ce.prototype=null,de}})(),D={},F=D.lib={},L=F.Base=(function(){return{extend:function(ce){var fe=P(this);return ce&&fe.mixIn(ce),(!fe.hasOwnProperty("init")||this.init===fe.init)&&(fe.init=function(){fe.$super.init.apply(this,arguments)}),fe.init.prototype=fe,fe.$super=this,fe},create:function(){var ce=this.extend();return ce.init.apply(ce,arguments),ce},init:function(){},mixIn:function(ce){for(var fe in ce)ce.hasOwnProperty(fe)&&(this[fe]=ce[fe]);ce.hasOwnProperty("toString")&&(this.toString=ce.toString)},clone:function(){return this.init.prototype.extend(this)}}})(),U=F.WordArray=L.extend({init:function(ce,fe){ce=this.words=ce||[],fe!=B?this.sigBytes=fe:this.sigBytes=ce.length*4},toString:function(ce){return(ce||K).stringify(this)},concat:function(ce){var fe=this.words,de=ce.words,pe=this.sigBytes,ve=ce.sigBytes;if(this.clamp(),pe%4)for(var ye=0;ye<ve;ye++){var _e=de[ye>>>2]>>>24-ye%4*8&255;fe[pe+ye>>>2]|=_e<<24-(pe+ye)%4*8}else for(var be=0;be<ve;be+=4)fe[pe+be>>>2]=de[be>>>2];return this.sigBytes+=ve,this},clamp:function(){var ce=this.words,fe=this.sigBytes;ce[fe>>>2]&=4294967295<<32-fe%4*8,ce.length=I.ceil(fe/4)},clone:function(){var ce=L.clone.call(this);return ce.words=this.words.slice(0),ce},random:function(ce){for(var fe=[],de=0;de<ce;de+=4)fe.push(R());return new U.init(fe,ce)}}),V=D.enc={},K=V.Hex={stringify:function(ce){for(var fe=ce.words,de=ce.sigBytes,pe=[],ve=0;ve<de;ve++){var ye=fe[ve>>>2]>>>24-ve%4*8&255;pe.push((ye>>>4).toString(16)),pe.push((ye&15).toString(16))}return pe.join("")},parse:function(ce){for(var fe=ce.length,de=[],pe=0;pe<fe;pe+=2)de[pe>>>3]|=parseInt(ce.substr(pe,2),16)<<24-pe%8*4;return new U.init(de,fe/2)}},J=V.Latin1={stringify:function(ce){for(var fe=ce.words,de=ce.sigBytes,pe=[],ve=0;ve<de;ve++){var ye=fe[ve>>>2]>>>24-ve%4*8&255;pe.push(String.fromCharCode(ye))}return pe.join("")},parse:function(ce){for(var fe=ce.length,de=[],pe=0;pe<fe;pe++)de[pe>>>2]|=(ce.charCodeAt(pe)&255)<<24-pe%4*8;return new U.init(de,fe)}},ee=V.Utf8={stringify:function(ce){try{return decodeURIComponent(escape(J.stringify(ce)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(ce){return J.parse(unescape(encodeURIComponent(ce)))}},ie=F.BufferedBlockAlgorithm=L.extend({reset:function(){this._data=new U.init,this._nDataBytes=0},_append:function(ce){typeof ce=="string"&&(ce=ee.parse(ce)),this._data.concat(ce),this._nDataBytes+=ce.sigBytes},_process:function(ce){var fe,de=this._data,pe=de.words,ve=de.sigBytes,ye=this.blockSize,_e=ye*4,be=ve/_e;ce?be=I.ceil(be):be=I.max((be|0)-this._minBufferSize,0);var Te=be*ye,ue=I.min(Te*4,ve);if(Te){for(var O=0;O<Te;O+=ye)this._doProcessBlock(pe,O);fe=pe.splice(0,Te),de.sigBytes-=ue}return new U.init(fe,ue)},clone:function(){var ce=L.clone.call(this);return ce._data=this._data.clone(),ce},_minBufferSize:0});F.Hasher=ie.extend({cfg:L.extend(),init:function(ce){this.cfg=this.cfg.extend(ce),this.reset()},reset:function(){ie.reset.call(this),this._doReset()},update:function(ce){return this._append(ce),this._process(),this},finalize:function(ce){ce&&this._append(ce);var fe=this._doFinalize();return fe},blockSize:16,_createHelper:function(ce){return function(fe,de){return new ce.init(de).finalize(fe)}},_createHmacHelper:function(ce){return function(fe,de){return new ne.HMAC.init(ce,de).finalize(fe)}}});var ne=D.algo={};return D})(Math);return _})})(core$1)),core$1.exports}var md5$1=md5$4.exports,hasRequiredMd5;function requireMd5(){return hasRequiredMd5||(hasRequiredMd5=1,(function(E,A){(function(_,I){E.exports=I(requireCore())})(md5$1,function(_){return(function(I){var B=_,T=B.lib,R=T.WordArray,P=T.Hasher,D=B.algo,F=[];(function(){for(var ee=0;ee<64;ee++)F[ee]=I.abs(I.sin(ee+1))*4294967296|0})();var L=D.MD5=P.extend({_doReset:function(){this._hash=new R.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(ee,ie){for(var ne=0;ne<16;ne++){var ce=ie+ne,fe=ee[ce];ee[ce]=(fe<<8|fe>>>24)&16711935|(fe<<24|fe>>>8)&4278255360}var de=this._hash.words,pe=ee[ie+0],ve=ee[ie+1],ye=ee[ie+2],_e=ee[ie+3],be=ee[ie+4],Te=ee[ie+5],ue=ee[ie+6],O=ee[ie+7],z=ee[ie+8],Y=ee[ie+9],te=ee[ie+10],oe=ee[ie+11],le=ee[ie+12],he=ee[ie+13],ae=ee[ie+14],Q=ee[ie+15],se=de[0],Ae=de[1],ge=de[2],Ee=de[3];se=U(se,Ae,ge,Ee,pe,7,F[0]),Ee=U(Ee,se,Ae,ge,ve,12,F[1]),ge=U(ge,Ee,se,Ae,ye,17,F[2]),Ae=U(Ae,ge,Ee,se,_e,22,F[3]),se=U(se,Ae,ge,Ee,be,7,F[4]),Ee=U(Ee,se,Ae,ge,Te,12,F[5]),ge=U(ge,Ee,se,Ae,ue,17,F[6]),Ae=U(Ae,ge,Ee,se,O,22,F[7]),se=U(se,Ae,ge,Ee,z,7,F[8]),Ee=U(Ee,se,Ae,ge,Y,12,F[9]),ge=U(ge,Ee,se,Ae,te,17,F[10]),Ae=U(Ae,ge,Ee,se,oe,22,F[11]),se=U(se,Ae,ge,Ee,le,7,F[12]),Ee=U(Ee,se,Ae,ge,he,12,F[13]),ge=U(ge,Ee,se,Ae,ae,17,F[14]),Ae=U(Ae,ge,Ee,se,Q,22,F[15]),se=V(se,Ae,ge,Ee,ve,5,F[16]),Ee=V(Ee,se,Ae,ge,ue,9,F[17]),ge=V(ge,Ee,se,Ae,oe,14,F[18]),Ae=V(Ae,ge,Ee,se,pe,20,F[19]),se=V(se,Ae,ge,Ee,Te,5,F[20]),Ee=V(Ee,se,Ae,ge,te,9,F[21]),ge=V(ge,Ee,se,Ae,Q,14,F[22]),Ae=V(Ae,ge,Ee,se,be,20,F[23]),se=V(se,Ae,ge,Ee,Y,5,F[24]),Ee=V(Ee,se,Ae,ge,ae,9,F[25]),ge=V(ge,Ee,se,Ae,_e,14,F[26]),Ae=V(Ae,ge,Ee,se,z,20,F[27]),se=V(se,Ae,ge,Ee,he,5,F[28]),Ee=V(Ee,se,Ae,ge,ye,9,F[29]),ge=V(ge,Ee,se,Ae,O,14,F[30]),Ae=V(Ae,ge,Ee,se,le,20,F[31]),se=K(se,Ae,ge,Ee,Te,4,F[32]),Ee=K(Ee,se,Ae,ge,z,11,F[33]),ge=K(ge,Ee,se,Ae,oe,16,F[34]),Ae=K(Ae,ge,Ee,se,ae,23,F[35]),se=K(se,Ae,ge,Ee,ve,4,F[36]),Ee=K(Ee,se,Ae,ge,be,11,F[37]),ge=K(ge,Ee,se,Ae,O,16,F[38]),Ae=K(Ae,ge,Ee,se,te,23,F[39]),se=K(se,Ae,ge,Ee,he,4,F[40]),Ee=K(Ee,se,Ae,ge,pe,11,F[41]),ge=K(ge,Ee,se,Ae,_e,16,F[42]),Ae=K(Ae,ge,Ee,se,ue,23,F[43]),se=K(se,Ae,ge,Ee,Y,4,F[44]),Ee=K(Ee,se,Ae,ge,le,11,F[45]),ge=K(ge,Ee,se,Ae,Q,16,F[46]),Ae=K(Ae,ge,Ee,se,ye,23,F[47]),se=J(se,Ae,ge,Ee,pe,6,F[48]),Ee=J(Ee,se,Ae,ge,O,10,F[49]),ge=J(ge,Ee,se,Ae,ae,15,F[50]),Ae=J(Ae,ge,Ee,se,Te,21,F[51]),se=J(se,Ae,ge,Ee,le,6,F[52]),Ee=J(Ee,se,Ae,ge,_e,10,F[53]),ge=J(ge,Ee,se,Ae,te,15,F[54]),Ae=J(Ae,ge,Ee,se,ve,21,F[55]),se=J(se,Ae,ge,Ee,z,6,F[56]),Ee=J(Ee,se,Ae,ge,Q,10,F[57]),ge=J(ge,Ee,se,Ae,ue,15,F[58]),Ae=J(Ae,ge,Ee,se,he,21,F[59]),se=J(se,Ae,ge,Ee,be,6,F[60]),Ee=J(Ee,se,Ae,ge,oe,10,F[61]),ge=J(ge,Ee,se,Ae,ye,15,F[62]),Ae=J(Ae,ge,Ee,se,Y,21,F[63]),de[0]=de[0]+se|0,de[1]=de[1]+Ae|0,de[2]=de[2]+ge|0,de[3]=de[3]+Ee|0},_doFinalize:function(){var ee=this._data,ie=ee.words,ne=this._nDataBytes*8,ce=ee.sigBytes*8;ie[ce>>>5]|=128<<24-ce%32;var fe=I.floor(ne/4294967296),de=ne;ie[(ce+64>>>9<<4)+15]=(fe<<8|fe>>>24)&16711935|(fe<<24|fe>>>8)&4278255360,ie[(ce+64>>>9<<4)+14]=(de<<8|de>>>24)&16711935|(de<<24|de>>>8)&4278255360,ee.sigBytes=(ie.length+1)*4,this._process();for(var pe=this._hash,ve=pe.words,ye=0;ye<4;ye++){var _e=ve[ye];ve[ye]=(_e<<8|_e>>>24)&16711935|(_e<<24|_e>>>8)&4278255360}return pe},clone:function(){var ee=P.clone.call(this);return ee._hash=this._hash.clone(),ee}});function U(ee,ie,ne,ce,fe,de,pe){var ve=ee+(ie&ne|~ie&ce)+fe+pe;return(ve<<de|ve>>>32-de)+ie}function V(ee,ie,ne,ce,fe,de,pe){var ve=ee+(ie&ce|ne&~ce)+fe+pe;return(ve<<de|ve>>>32-de)+ie}function K(ee,ie,ne,ce,fe,de,pe){var ve=ee+(ie^ne^ce)+fe+pe;return(ve<<de|ve>>>32-de)+ie}function J(ee,ie,ne,ce,fe,de,pe){var ve=ee+(ne^(ie|~ce))+fe+pe;return(ve<<de|ve>>>32-de)+ie}B.MD5=P._createHelper(L),B.HmacMD5=P._createHmacHelper(L)})(Math),_.MD5})})(md5$4)),md5$4.exports}var md5Exports=requireMd5();const md5=getDefaultExportFromCjs$1(md5Exports);var castComparer=function(E){return function(A,_,I){return E(A,_,I)*I}},throwInvalidConfigErrorIfTrue=function(E,A){if(E)throw Error("Invalid sort config: "+A)},unpackObjectSorter=function(E){var A=E||{},_=A.asc,I=A.desc,B=_?1:-1,T=_||I;throwInvalidConfigErrorIfTrue(!T,"Expected `asc` or `desc` property"),throwInvalidConfigErrorIfTrue(_&&I,"Ambiguous object with `asc` and `desc` config properties");var R=E.comparer&&castComparer(E.comparer);return{order:B,sortBy:T,comparer:R}},multiPropertySorterProvider=function(E){return function A(_,I,B,T,R,P,D){var F,L;if(typeof _=="string")F=P[_],L=D[_];else if(typeof _=="function")F=_(P),L=_(D);else{var U=unpackObjectSorter(_);return A(U.sortBy,I,B,U.order,U.comparer||E,P,D)}var V=R(F,L,T);return(V===0||F==null&&L==null)&&I.length>B?A(I[B],I,B+1,T,R,P,D):V}};function getSortStrategy(E,A,_){if(E===void 0||E===!0)return function(T,R){return A(T,R,_)};if(typeof E=="string")return throwInvalidConfigErrorIfTrue(E.includes("."),"String syntax not allowed for nested properties."),function(T,R){return A(T[E],R[E],_)};if(typeof E=="function")return function(T,R){return A(E(T),E(R),_)};if(Array.isArray(E)){var I=multiPropertySorterProvider(A);return function(T,R){return I(E[0],E,1,_,A,T,R)}}var B=unpackObjectSorter(E);return getSortStrategy(B.sortBy,B.comparer||A,B.order)}var sortArray=function(E,A,_,I){var B;return Array.isArray(A)?(Array.isArray(_)&&_.length<2&&(B=_,_=B[0]),A.sort(getSortStrategy(_,I,E))):A};function createNewSortInstance(E){var A=castComparer(E.comparer);return function(_){var I=Array.isArray(_)&&!E.inPlaceSorting?_.slice():_;return{asc:function(B){return sortArray(1,I,B,A)},desc:function(B){return sortArray(-1,I,B,A)},by:function(B){return sortArray(1,I,B,A)}}}}var defaultComparer=function(E,A,_){return E==null?_:A==null?-_:typeof E!=typeof A?typeof E<typeof A?-1:1:E<A?-1:E>A?1:0},sort=createNewSortInstance({comparer:defaultComparer});createNewSortInstance({comparer:defaultComparer,inPlaceSorting:!0});class BeatmapColorSection{comboColors=[];sliderTrackColor;sliderBorderColor;clone(){const A=new BeatmapColorSection;return A.comboColors=this.comboColors.map(_=>_.clone()),this.sliderTrackColor&&(A.sliderTrackColor=this.sliderTrackColor),this.sliderBorderColor&&(A.sliderBorderColor=this.sliderBorderColor),A}}class BeatmapDifficultySection{static BASE_DIFFICULTY=5;_CS=BeatmapDifficultySection.BASE_DIFFICULTY;_HP=BeatmapDifficultySection.BASE_DIFFICULTY;_OD=BeatmapDifficultySection.BASE_DIFFICULTY;_AR;_multiplier=1;_tickRate=1;_rate=1;get circleSize(){return Math.fround(this._CS)}set circleSize(A){this._CS=A}get drainRate(){return Math.fround(this._HP)}set drainRate(A){this._HP=A}get overallDifficulty(){return Math.fround(this._OD)}set overallDifficulty(A){this._OD=A}get approachRate(){return Math.fround(this._AR??this._OD)}set approachRate(A){this._AR=A}get sliderMultiplier(){return this._multiplier}set sliderMultiplier(A){this._multiplier=A}get sliderTickRate(){return this._tickRate}set sliderTickRate(A){this._tickRate=A}get clockRate(){return this._rate}set clockRate(A){this._rate=A}clone(){const A=new BeatmapDifficultySection;return A.circleSize=this._CS,A.drainRate=this._HP,A.overallDifficulty=this._OD,typeof this._AR=="number"&&(A.approachRate=this._AR),A.sliderMultiplier=this._multiplier,A.sliderTickRate=this._tickRate,A.clockRate=this._rate,A}static range(A,_,I,B){return A>5?I+(B-I)*(A-5)/5:A<5?I-(I-_)*(5-A)/5:I}}class BeatmapEditorSection{bookmarks=[];distanceSpacing=1;beatDivisor=4;gridSize=1;timelineZoom=2;clone(){const A=new BeatmapEditorSection;return A.bookmarks=this.bookmarks.slice(),A.distanceSpacing=this.distanceSpacing,A.beatDivisor=this.beatDivisor,A.gridSize=this.gridSize,A.timelineZoom=this.timelineZoom,A}}let BlendingMode;(function(E){E[E.AdditiveBlending=0]="AdditiveBlending",E[E.AlphaBlending=1]="AlphaBlending"})(BlendingMode||(BlendingMode={}));class BlendingParameters{source;destination;sourceAlpha;destinationAlpha;rgbEquation;alphaEquation;static None=new BlendingParameters({source:5,destination:15,sourceAlpha:5,destinationAlpha:15,rgbEquation:1,alphaEquation:1});static Inherit=new BlendingParameters({source:0,destination:0,sourceAlpha:0,destinationAlpha:0,rgbEquation:0,alphaEquation:0});static Mixture=new BlendingParameters({source:12,destination:10,sourceAlpha:5,destinationAlpha:5,rgbEquation:1,alphaEquation:1});static Additive=new BlendingParameters({source:12,destination:5,sourceAlpha:5,destinationAlpha:5,rgbEquation:1,alphaEquation:1});constructor(A){this.source=A.source||0,this.destination=A.destination||0,this.sourceAlpha=A.sourceAlpha||0,this.destinationAlpha=A.destinationAlpha||0,this.rgbEquation=A.rgbEquation||0,this.alphaEquation=A.alphaEquation||0}copyFromParent(A){this.source===0&&(this.source=A.source),this.destination===0&&(this.destination=A.destination),this.sourceAlpha===0&&(this.sourceAlpha=A.sourceAlpha),this.destinationAlpha===0&&(this.destinationAlpha=A.destinationAlpha),this.rgbEquation===0&&(this.rgbEquation=A.rgbEquation),this.alphaEquation===0&&(this.alphaEquation=A.alphaEquation)}applyDefaultToInherited(){this.source===0&&(this.source=12),this.destination===0&&(this.destination=10),this.sourceAlpha===0&&(this.sourceAlpha=5),this.destinationAlpha===0&&(this.destinationAlpha=5),this.rgbEquation===0&&(this.rgbEquation=1),this.alphaEquation===0&&(this.alphaEquation=1)}equals(A){return A.source===this.source&&A.destination===this.destination&&A.sourceAlpha===this.sourceAlpha&&A.destinationAlpha===this.destinationAlpha&&A.rgbEquation===this.rgbEquation&&A.alphaEquation===this.alphaEquation}get isDisabled(){return this.source===5&&this.destination===15&&this.sourceAlpha===5&&this.destinationAlpha===15&&this.rgbEquation===1&&this.alphaEquation===1}get rgbEquationMode(){return BlendingParameters._translateEquation(this.rgbEquation)}get alphaEquationMode(){return BlendingParameters._translateEquation(this.alphaEquation)}get sourceBlendingFactor(){return BlendingParameters._translateBlendingFactorSrc(this.source)}get destinationBlendingFactor(){return BlendingParameters._translateBlendingFactorDest(this.destination)}get sourceAlphaBlendingFactor(){return BlendingParameters._translateBlendingFactorSrc(this.sourceAlpha)}get destinationAlphaBlendingFactor(){return BlendingParameters._translateBlendingFactorDest(this.destinationAlpha)}static _translateBlendingFactorSrc(A){switch(A){case 1:return 32771;case 2:return 32769;case 3:return 772;case 4:return 774;case 5:return 1;case 6:return 32772;case 7:return 32770;case 8:return 773;case 9:return 775;case 10:return 769;case 12:return 770;case 13:return 776;case 14:return 768;default:case 15:return 0}}static _translateBlendingFactorDest(A){switch(A){case 1:return 32771;case 2:return 32769;case 3:return 772;case 4:return 774;case 5:return 1;case 6:return 32772;case 7:return 32770;case 8:return 773;case 9:return 775;case 10:return 771;case 11:return 769;case 12:return 770;case 13:return 776;case 14:return 768;default:case 15:return 0}}static _translateEquation(A){switch(A){default:case 0:case 1:return 32774;case 2:return 32775;case 3:return 32776;case 4:return 32778;case 5:return 32779}}}let Anchor;(function(E){E[E.y0=1]="y0",E[E.y1=2]="y1",E[E.y2=4]="y2",E[E.x0=8]="x0",E[E.x1=16]="x1",E[E.x2=32]="x2",E[E.Custom=64]="Custom",E[E.TopLeft=9]="TopLeft",E[E.TopCentre=17]="TopCentre",E[E.TopRight=33]="TopRight",E[E.CentreLeft=10]="CentreLeft",E[E.Centre=18]="Centre",E[E.CentreRight=34]="CentreRight",E[E.BottomLeft=12]="BottomLeft",E[E.BottomCentre=20]="BottomCentre",E[E.BottomRight=36]="BottomRight"})(Anchor||(Anchor={}));let CommandType;(function(E){E.None="",E.Movement="M",E.MovementX="MX",E.MovementY="MY",E.Fade="F",E.Scale="S",E.VectorScale="V",E.Rotation="R",E.Color="C",E.Parameter="P"})(CommandType||(CommandType={}));let CompoundType;(function(E){E.None="",E.Loop="L",E.Trigger="T"})(CompoundType||(CompoundType={}));let EventType;(function(E){E[E.Background=0]="Background",E[E.Video=1]="Video",E[E.Break=2]="Break",E[E.Colour=3]="Colour",E[E.Sprite=4]="Sprite",E[E.Sample=5]="Sample",E[E.Animation=6]="Animation",E[E.StoryboardCommand=7]="StoryboardCommand"})(EventType||(EventType={}));let LayerType;(function(E){E[E.Background=0]="Background",E[E.Fail=1]="Fail",E[E.Pass=2]="Pass",E[E.Foreground=3]="Foreground",E[E.Overlay=4]="Overlay",E[E.Video=5]="Video"})(LayerType||(LayerType={}));let LoopType;(function(E){E[E.LoopForever=0]="LoopForever",E[E.LoopOnce=1]="LoopOnce"})(LoopType||(LoopType={}));let Origins;(function(E){E[E.TopLeft=0]="TopLeft",E[E.Centre=1]="Centre",E[E.CentreLeft=2]="CentreLeft",E[E.TopRight=3]="TopRight",E[E.BottomCentre=4]="BottomCentre",E[E.TopCentre=5]="TopCentre",E[E.Custom=6]="Custom",E[E.CentreRight=7]="CentreRight",E[E.BottomLeft=8]="BottomLeft",E[E.BottomRight=9]="BottomRight"})(Origins||(Origins={}));let ParameterType;(function(E){E.None="",E.HorizontalFlip="H",E.VerticalFlip="V",E.BlendingMode="A"})(ParameterType||(ParameterType={}));class Color4{red;green;blue;alpha;constructor(A,_,I,B){this.red=A??255,this.green=_??255,this.blue=I??255,this.alpha=B??1}get hex(){const A=Math.round(this.alpha*255);return"#"+this.red.toString(16).padStart(2,"0")+this.green.toString(16).padStart(2,"0")+this.blue.toString(16).padStart(2,"0")+A.toString(16).padStart(2,"0")}equals(A){return this.red===A.red&&this.green===A.green&&this.blue===A.blue&&this.alpha===A.alpha}clone(){return new Color4(this.red,this.green,this.blue,this.alpha)}toString(){return`${this.red},${this.green},${this.blue},${this.alpha}`}}class Vector2{x;y;constructor(A,_){this.x=A,this.y=isFinite(_)?_:A}get floatX(){return Math.fround(this.x)}get floatY(){return Math.fround(this.y)}add(A){return new Vector2(this.x+A.x,this.y+A.y)}fadd(A){return new Vector2(Math.fround(this.floatX+A.floatX),Math.fround(this.floatY+A.floatY))}subtract(A){return new Vector2(this.x-A.x,this.y-A.y)}fsubtract(A){return new Vector2(Math.fround(this.floatX-A.floatX),Math.fround(this.floatY-A.floatY))}scale(A){return new Vector2(this.x*A,this.y*A)}fscale(A){const _=Math.fround(A);return new Vector2(Math.fround(this.floatX*_),Math.fround(this.floatY*_))}divide(A){return new Vector2(this.x/A,this.y/A)}fdivide(A){const _=Math.fround(A);return new Vector2(Math.fround(this.floatX/_),Math.fround(this.floatY/_))}dot(A){return this.x*A.x+this.y*A.y}fdot(A){return Math.fround(Math.fround(Math.fround(this.floatX*A.floatX)+Math.fround(this.floatY*A.floatY)))}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}flength(){return Math.fround(Math.sqrt(Math.fround(Math.fround(this.floatX*this.floatX)+Math.fround(this.floatY*this.floatY))))}distance(A){const _=this.x-A.x,I=this.y-A.y;return Math.sqrt(_*_+I*I)}fdistance(A){const _=Math.fround(this.floatX-A.floatX),I=Math.fround(this.floatY-A.floatY);return Math.fround(Math.sqrt(Math.fround(Math.fround(_*_)+Math.fround(I*I))))}normalize(){const A=1/this.length();return new Vector2(this.x*A,this.y*A)}fnormalize(){const A=Math.fround(1/this.flength());return new Vector2(Math.fround(this.floatX*A),Math.fround(this.floatY*A))}equals(A){return this.x===A.x&&this.y===A.y}clone(){return new Vector2(this.x,this.y)}toString(){return`${this.x},${this.y}`}}function clamp(E,A,_){return Math.max(A,Math.min(_,E))}function clamp01(E){return clamp(E,0,1)}function map(E,A,_,I,B){return E<A?I:E>=_?B:(E-A)/(_-A)*(B-I)+I}function map01(E,A,_){return map(E,A,_,0,1)}function lerp(E,A,_){return A*(1-E)+_*E}function lerpClamped01(E,A,_){return lerp(clamp01(E),A,_)}function lerpVector2(E,A,_){const I=lerpClamped01(E,A.floatX,_.floatX),B=lerpClamped01(E,A.floatY,_.floatY);return new Vector2(I,B)}function lerpColor4(E,A,_){const I=lerpClamped01(E,A.red,_.red),B=lerpClamped01(E,A.green,_.green),T=lerpClamped01(E,A.blue,_.blue),R=lerpClamped01(E,A.alpha,_.alpha);return new Color4(I,B,T,R)}let MathUtils=Object.freeze({__proto__:null,clamp,clamp01,lerp,lerpClamped01,lerpColor4,lerpVector2,map,map01}),EasingType;(function(E){E[E.None=0]="None",E[E.Out=1]="Out",E[E.In=2]="In",E[E.InQuad=3]="InQuad",E[E.OutQuad=4]="OutQuad",E[E.InOutQuad=5]="InOutQuad",E[E.InCubic=6]="InCubic",E[E.OutCubic=7]="OutCubic",E[E.InOutCubic=8]="InOutCubic",E[E.InQuart=9]="InQuart",E[E.OutQuart=10]="OutQuart",E[E.InOutQuart=11]="InOutQuart",E[E.InQuint=12]="InQuint",E[E.OutQuint=13]="OutQuint",E[E.InOutQuint=14]="InOutQuint",E[E.InSine=15]="InSine",E[E.OutSine=16]="OutSine",E[E.InOutSine=17]="InOutSine",E[E.InExpo=18]="InExpo",E[E.OutExpo=19]="OutExpo",E[E.InOutExpo=20]="InOutExpo",E[E.InCirc=21]="InCirc",E[E.OutCirc=22]="OutCirc",E[E.InOutCirc=23]="InOutCirc",E[E.InElastic=24]="InElastic",E[E.OutElastic=25]="OutElastic",E[E.OutElasticHalf=26]="OutElasticHalf",E[E.OutElasticQuarter=27]="OutElasticQuarter",E[E.InOutElastic=28]="InOutElastic",E[E.InBack=29]="InBack",E[E.OutBack=30]="OutBack",E[E.InOutBack=31]="InOutBack",E[E.InBounce=32]="InBounce",E[E.OutBounce=33]="OutBounce",E[E.InOutBounce=34]="InOutBounce",E[E.OutPow10=35]="OutPow10"})(EasingType||(EasingType={}));const ELASTIC_CONST=2*Math.PI/.3,ELASTIC_CONST2=.3/4,BACK_CONST=1.70158,BACK_CONST2=BACK_CONST*1.525,BOUNCE_CONST=1/2.75,EXPO_OFFSET=Math.pow(2,-10),ELASTIC_OFFSET_FULL=Math.pow(2,-11),ELASTIC_OFFSET_HALF=Math.pow(2,-10)*Math.sin((.5-ELASTIC_CONST2)*ELASTIC_CONST),ELASTIC_OFFSET_QUARTER=Math.pow(2,-10)*Math.sin((.25-ELASTIC_CONST2)*ELASTIC_CONST),IN_OUT_ELASTIC_OFFSET=Math.pow(2,-10)*Math.sin((1-ELASTIC_CONST2*1.5)*ELASTIC_CONST/1.5),clampEase=E=>A=>E(clamp01(A)),linear=clampEase(E=>E),inQuad=clampEase(E=>E*E),outQuad=clampEase(E=>E*(2-E)),inOutQuad=clampEase(E=>E<.5?E*E*2:--E*E*-2+1),inCubic=clampEase(E=>E*E*E),outCubic=clampEase(E=>--E*E*E+1),inOutCubic=clampEase(E=>E<.5?E*E*E*4:--E*E*E*4+1),inQuart=clampEase(E=>E*E*E*E),outQuart=clampEase(E=>1- --E*E*E*E),inOutQuart=clampEase(E=>E<.5?E*E*E*E*8:--E*E*E*E*-8+1),inQuint=clampEase(E=>E*E*E*E*E),outQuint=clampEase(E=>--E*E*E*E*E+1),inOutQuint=clampEase(E=>E<.5?E*E*E*E*E*16:--E*E*E*E*E*16+1),inSine=clampEase(E=>1-Math.cos(E*Math.PI*.5)),outSine=clampEase(E=>Math.sin(E*Math.PI*.5)),inOutSine=clampEase(E=>.5-.5*Math.cos(Math.PI*E)),inExpo=clampEase(E=>Math.pow(2,10*(E-1))+EXPO_OFFSET*(E-1)),outExpo=clampEase(E=>-Math.pow(2,-10*E)+1+EXPO_OFFSET*E),inOutExpo=clampEase(E=>E<.5?.5*(Math.pow(2,20*E-10)+EXPO_OFFSET*(2*E-1)):1-.5*(Math.pow(2,-20*E+10)+EXPO_OFFSET*(-2*E+1))),inCirc=clampEase(E=>1-Math.sqrt(1-E*E)),outCirc=clampEase(E=>Math.sqrt(1- --E*E)),inOutCirc=clampEase(E=>(E*=2)<1?.5-.5*Math.sqrt(1-E*E):.5*Math.sqrt(1-(E-=2)*E)+.5),inElastic=clampEase(E=>-Math.pow(2,-10+10*E)*Math.sin((1-ELASTIC_CONST2-E)*ELASTIC_CONST)+ELASTIC_OFFSET_FULL*(1-E)),outElastic=clampEase(E=>Math.pow(2,-10*E)*Math.sin((E-ELASTIC_CONST2)*ELASTIC_CONST)+1-ELASTIC_OFFSET_FULL*E),outElasticHalf=clampEase(E=>Math.pow(2,-10*E)*Math.sin((.5*E-ELASTIC_CONST2)*ELASTIC_CONST)+1-ELASTIC_OFFSET_HALF*E),outElasticQuarter=clampEase(E=>Math.pow(2,-10*E)*Math.sin((.25*E-ELASTIC_CONST2)*ELASTIC_CONST)+1-ELASTIC_OFFSET_QUARTER*E),inOutElastic=clampEase(E=>(E*=2)<1?-.5*(Math.pow(2,-10+10*E)*Math.sin((1-ELASTIC_CONST2*1.5-E)*ELASTIC_CONST/1.5)-IN_OUT_ELASTIC_OFFSET*(1-E)):.5*(Math.pow(2,-10*--E)*Math.sin((E-ELASTIC_CONST2*1.5)*ELASTIC_CONST/1.5)-IN_OUT_ELASTIC_OFFSET*E)+1),inBack=clampEase(E=>E*E*((BACK_CONST+1)*E-BACK_CONST)),outBack=clampEase(E=>--E*E*((BACK_CONST+1)*E+BACK_CONST)+1),inOutBack=clampEase(E=>(E*=2)<1?.5*E*E*((BACK_CONST2+1)*E-BACK_CONST2):.5*((E-=2)*E*((BACK_CONST2+1)*E+BACK_CONST2)+2)),inBounce=clampEase(E=>(E=1-E,E<BOUNCE_CONST?1-7.5625*E*E:E<2*BOUNCE_CONST?1-(7.5625*(E-=1.5*BOUNCE_CONST)*E+.75):E<2.5*BOUNCE_CONST?1-(7.5625*(E-=2.25*BOUNCE_CONST)*E+.9375):1-(7.5625*(E-=2.625*BOUNCE_CONST)*E+.984375))),outBounce=clampEase(E=>E<BOUNCE_CONST?7.5625*E*E:E<2*BOUNCE_CONST?7.5625*(E-=1.5*BOUNCE_CONST)*E+.75:E<2.5*BOUNCE_CONST?7.5625*(E-=2.25*BOUNCE_CONST)*E+.9375:7.5625*(E-=2.625*BOUNCE_CONST)*E+.984375),inOutBounce=clampEase(E=>E<.5?.5-.5*outBounce(1-E*2):outBounce((E-.5)*2)*.5+.5),outPow10=clampEase(E=>--E*Math.pow(E,10)+1);function getEasingFn(E){switch(E){case EasingType.In:case EasingType.InQuad:return inQuad;case EasingType.Out:case EasingType.OutQuad:return outQuad;case EasingType.InOutQuad:return inOutQuad;case EasingType.InCubic:return inCubic;case EasingType.OutCubic:return outCubic;case EasingType.InOutCubic:return inOutCubic;case EasingType.InQuart:return inQuart;case EasingType.OutQuart:return outQuart;case EasingType.InOutQuart:return inOutQuart;case EasingType.InQuint:return inQuint;case EasingType.OutQuint:return outQuint;case EasingType.InOutQuint:return inOutQuint;case EasingType.InSine:return inSine;case EasingType.OutSine:return outSine;case EasingType.InOutSine:return inOutSine;case EasingType.InExpo:return inExpo;case EasingType.OutExpo:return outExpo;case EasingType.InOutExpo:return inOutExpo;case EasingType.InCirc:return inCirc;case EasingType.OutCirc:return outCirc;case EasingType.InOutCirc:return inOutCirc;case EasingType.InElastic:return inElastic;case EasingType.OutElastic:return outElastic;case EasingType.OutElasticHalf:return outElasticHalf;case EasingType.OutElasticQuarter:return outElasticQuarter;case EasingType.InOutElastic:return inOutElastic;case EasingType.InBack:return inBack;case EasingType.OutBack:return outBack;case EasingType.InOutBack:return inOutBack;case EasingType.InBounce:return inBounce;case EasingType.OutBounce:return outBounce;case EasingType.InOutBounce:return inOutBounce;case EasingType.OutPow10:return outPow10}return linear}let Easing=Object.freeze({__proto__:null,getEasingFn,inBack,inBounce,inCirc,inCubic,inElastic,inExpo,inOutBack,inOutBounce,inOutCirc,inOutCubic,inOutElastic,inOutExpo,inOutQuad,inOutQuart,inOutQuint,inOutSine,inQuad,inQuart,inQuint,inSine,linear,outBack,outBounce,outCirc,outCubic,outElastic,outElasticHalf,outElasticQuarter,outExpo,outPow10,outQuad,outQuart,outQuint,outSine});class Command{type;parameter;easing;startTime;endTime;constructor(A){this.type=A?.type??CommandType.None,this.parameter=A?.parameter??ParameterType.None,this.easing=A?.easing??EasingType.None,this.startTime=A?.startTime??0,this.endTime=A?.endTime??0,this.startValue=A?.startValue??null,this.endValue=A?.endValue??null}get duration(){return this.endTime-this.startTime}getProgress(A){const _=map01(A,this.startTime,this.endTime);return getEasingFn(this.easing)(_)}getValueAtProgress(A){const _=(T,R,P)=>R+T*(P-R),I=(T,R,P)=>R===P||T>=R&&T<P;if(typeof this.startValue=="number"){const T=this.startValue,R=this.endValue;return _(A,T,R)}if(this.startValue instanceof Vector2){const T=this.startValue,R=this.endValue;return new Vector2(_(A,T.floatX,R.floatX),_(A,T.floatY,R.floatY))}if(this.startValue instanceof Color4){const T=this.startValue,R=this.endValue;return new Color4(_(A,T.red,R.red),_(A,T.green,R.green),_(A,T.blue,R.blue),_(A,T.alpha,R.alpha))}const B=this.startTime+this.duration*A;if(typeof this.startValue=="boolean")return I(B,this.startTime,this.endTime);if(this.startValue instanceof BlendingParameters){const T=this.startValue,R=this.endValue;return I(B,this.startTime,this.endTime)?T:R}return this.endValue}getValueAtTime(A){return this.getValueAtProgress(this.getProgress(A))}equals(A){return this.type===A.type&&this.startTime===A.startTime&&this.endTime===A.endTime&&this.startValue===A.startValue&&this.endValue===A.endValue&&this.easing===A.easing&&this.parameter===A.parameter}}class CommandTimeline{_commands=[];startTime=1/0;endTime=-1/0;[Symbol.iterator](){const A=this.commands;let _=-1;return{next:()=>({value:A[++_],done:!(_ in A)})}}get commands(){return this._commands.sort((A,_)=>A.startTime-_.startTime||A.endTime-_.endTime)}add(A,_,I,B,T,R,P){B<I&&([I,B]=[B,I],[T,R]=[R,T]),this._commands.push(new Command({type:A,easing:_,startTime:I,endTime:B,startValue:T,endValue:R,parameter:P})),I<this.startTime&&(this.startValue=T,this.startTime=I),B>this.endTime&&(this.endValue=R,this.endTime=B)}get hasCommands(){return this._commands.length>0}}class CommandTimelineGroup{x=new CommandTimeline;y=new CommandTimeline;scale=new CommandTimeline;vectorScale=new CommandTimeline;rotation=new CommandTimeline;color=new CommandTimeline;alpha=new CommandTimeline;blendingParameters=new CommandTimeline;flipH=new CommandTimeline;flipV=new CommandTimeline;_timelines;constructor(){this._timelines=[this.x,this.y,this.scale,this.vectorScale,this.rotation,this.color,this.alpha,this.blendingParameters,this.flipH,this.flipV]}get timelines(){return this._timelines}get totalCommands(){return this._timelines.reduce((A,_)=>A+_.commands.length,0)}get commands(){return this._timelines.flatMap(A=>A.commands).sort((A,_)=>A.startTime-_.startTime||A.endTime-_.endTime)}get commandsStartTime(){let A=1/0;for(let _=0;_<this._timelines.length;++_)A=Math.min(A,this._timelines[_].startTime);return A}get commandsEndTime(){let A=-1/0;for(let _=0;_<this._timelines.length;++_)A=Math.max(A,this._timelines[_].endTime);return A}get commandsDuration(){return this.commandsEndTime-this.commandsStartTime}get startTime(){return this.commandsStartTime}get endTime(){return this.commandsEndTime}get duration(){return this.endTime-this.startTime}get hasCommands(){for(let A=0;A<this._timelines.length;++A)if(this._timelines[A].hasCommands)return!0;return!1}}class CommandLoop extends CommandTimelineGroup{type=CompoundType.Loop;loopStartTime;loopCount;constructor(A,_){super(),this.loopStartTime=A||0,this.loopCount=_||0}get totalIterations(){return this.loopCount+1}get startTime(){return this.loopStartTime+this.commandsStartTime}get endTime(){return this.startTime+this.commandsDuration*this.totalIterations}unrollCommands(){const A=this.commands;if(A.length===0)return[];const{commandsDuration:_,totalIterations:I,loopStartTime:B}=this,T=new Array(I*A.length);for(let R=0;R<I;R++){const P=B+R*_;for(let D=0;D<A.length;D++){const F=R*A.length+D,L=A[D];T[F]=new Command({...L,startTime:L.startTime+P,endTime:L.endTime+P})}}return T}}class CommandTrigger extends CommandTimelineGroup{type=CompoundType.Trigger;triggerName;triggerStartTime;triggerEndTime;groupNumber;constructor(A,_,I,B){super(),this.triggerName=A||"",this.triggerStartTime=_||0,this.triggerEndTime=I||0,this.groupNumber=B||0}unrollCommands(){const A=this.commands;if(A.length===0)return[];const _=new Array(A.length);for(let I=0;I<A.length;I++)_[I]=new Command({...A[I],startTime:A[I].startTime+this.triggerStartTime,endTime:A[I].endTime+this.triggerStartTime});return _}}let StoryboardSprite$1=class{origin;anchor;startTime=1/0;endTime=-1/0;filePath;commands=[];timelineGroup=new CommandTimelineGroup;loops=[];triggers=[];startPosition;scale=new Vector2(1,1);color=new Color4;rotation=0;flipX=!1;flipY=!1;isAdditive=!1;constructor(A,_,I,B){this.filePath=A??"",this.origin=_??Origins.TopLeft,this.anchor=I??Anchor.TopLeft,this.startPosition=B??new Vector2(0,0)}get startX(){return this.startPosition.floatX}set startX(A){this.startPosition.x=A}get startY(){return this.startPosition.floatY}set startY(A){this.startPosition.y=A}get duration(){return this.endTime-this.startTime}get hasCommands(){return this.timelineGroup.hasCommands||this.loops.some(A=>A.hasCommands)||this.triggers.some(A=>A.hasCommands)}get isDrawable(){return this.color.alpha>=.01&&this.hasCommands}addLoop(A,_){const I=new CommandLoop(A,_);return this.loops.push(I),I}addTrigger(A,_,I,B){const T=new CommandTrigger(A,_,I,B);return this.triggers.push(T),T}updateCommands(){const A=[...this.timelineGroup.commands,...this.loops.flatMap(_=>_.unrollCommands())];return this.commands=A.sort((_,I)=>_.startTime-I.startTime),this.commands}adjustTimesToCommands(){let A=this.startTime,_=this.endTime;for(const I of this.commands)A=Math.min(A,I.startTime),_=Math.max(_,I.endTime);this.startTime=A,this.endTime=_}resetValuesToCommands(){const A={};for(const _ of this.commands)A[_.type]||(this.setValueFromCommand(_,0),A[_.type]=!0)}setValueFromCommand(A,_){const I=A.getValueAtProgress(_);switch(A.type){case CommandType.Movement:this.startPosition.x=I.x,this.startPosition.y=I.y;break;case CommandType.MovementX:this.startPosition.x=I;break;case CommandType.MovementY:this.startPosition.y=I;break;case CommandType.Fade:this.color.alpha=I;break;case CommandType.Scale:this.scale.x=I,this.scale.y=I;break;case CommandType.VectorScale:this.scale.x=I.x,this.scale.y=I.y;break;case CommandType.Rotation:this.rotation=I;break;case CommandType.Color:this.color.red=I.red,this.color.green=I.green,this.color.blue=I.blue;break}if(A.type===CommandType.Parameter)switch(A.parameter){case ParameterType.BlendingMode:this.isAdditive=I.rgbEquation===1;break;case ParameterType.HorizontalFlip:this.flipX=I;break;case ParameterType.VerticalFlip:this.flipY=I}}},StoryboardAnimation$1=class extends StoryboardSprite$1{frameCount;frameDelay;loopType;constructor(A,_,I,B,T,R,P){super(A,_,I,B),this.frameCount=T??0,this.frameDelay=R??0,this.loopType=P??LoopType.LoopForever}};class StoryboardSample{startTime;volume;filePath;get isDrawable(){return!0}constructor(A,_,I){this.filePath=A??"",this.startTime=_??0,this.volume=I??100}}class StoryboardVideo{startTime;filePath;get isDrawable(){return!0}constructor(A,_){this.filePath=A??"",this.startTime=_??0}}class StoryboardLayer{name;depth;masking;visibleWhenPassing=!0;visibleWhenFailing=!0;elements=[];constructor(A){this.name=A.name,this.depth=A.depth,this.masking=A.masking??!0}}let Storyboard$1=class{variables=new Map;colors=new BeatmapColorSection;useSkinSprites=!1;minimumLayerDepth=0;fileFormat=14;_layers=new Map;constructor(){this.addLayer(new StoryboardLayer({name:"Video",depth:4,masking:!1})),this.addLayer(new StoryboardLayer({name:"Background",depth:3})),this.addLayer(new StoryboardLayer({name:"Fail",depth:2,visibleWhenPassing:!1})),this.addLayer(new StoryboardLayer({name:"Pass",depth:1,visibleWhenFailing:!1})),this.addLayer(new StoryboardLayer({name:"Foreground",depth:0})),this.addLayer(new StoryboardLayer({name:"Overlay",depth:-2147483648}))}get layers(){return this._layers}get hasDrawable(){for(const A of this.layers.values())if(A.elements.find(_=>_.isDrawable))return!0;return!1}get hasVariables(){for(const A in this.variables)return!0;return!1}get earliestEventTime(){let A=1/0;return this._layers.forEach(_=>{const B=_.elements.reduce((T,R)=>Math.min(T,R.startTime),0);A=Math.min(B,A)}),A===1/0?null:A}get latestEventTime(){let A=-1/0;return this._layers.forEach(_=>{const B=_.elements.reduce((T,R)=>Math.max(T,R?.endTime??R.startTime),0);A=Math.max(B,A)}),A===-1/0?null:A}addLayer(A){this._layers.has(A.name)||this._layers.set(A.name,A)}getLayerByType(A){return this.getLayerByName(LayerType[A]??"Background")}getLayerByName(A){const _=this._layers.get(A)??new StoryboardLayer({name:A,depth:--this.minimumLayerDepth});return this._layers.has(A)||this._layers.set(A,_),_}};class BeatmapEventSection{backgroundPath=null;breaks=[];storyboard=null;get isBackgroundReplaced(){if(!this.backgroundPath||!this.storyboard)return!1;const A=this.backgroundPath.trim().toLowerCase();return this.storyboard.getLayerByType(LayerType.Background).elements.some(I=>I.filePath.toLowerCase()===A)}clone(){const A=new BeatmapEventSection;return A.backgroundPath=this.backgroundPath,A.breaks=this.breaks,A.storyboard=this.storyboard,A}}let SampleSet;(function(E){E[E.None=0]="None",E[E.Normal=1]="Normal",E[E.Soft=2]="Soft",E[E.Drum=3]="Drum"})(SampleSet||(SampleSet={}));class BeatmapGeneralSection{audioFilename="";audioHash;overlayPosition="NoChange";skinPreference="";audioLeadIn=0;previewTime=-1;countdown=1;stackLeniency=.7;countdownOffset=0;sampleSet=SampleSet.Normal;letterboxInBreaks=!1;storyFireInFront;useSkinSprites=!1;alwaysShowPlayfield;epilepsyWarning=!1;specialStyle=!1;widescreenStoryboard=!1;samplesMatchPlaybackRate=!1;clone(){const A=new BeatmapGeneralSection;return A.audioFilename=this.audioFilename,this.audioHash&&(A.audioHash=this.audioHash),A.overlayPosition=this.overlayPosition,A.skinPreference=this.skinPreference,A.audioLeadIn=this.audioLeadIn,A.previewTime=this.previewTime,A.countdown=this.countdown,A.stackLeniency=this.stackLeniency,A.countdownOffset=this.countdownOffset,A.sampleSet=this.sampleSet,A.letterboxInBreaks=this.letterboxInBreaks,this.storyFireInFront&&(A.storyFireInFront=this.storyFireInFront),A.useSkinSprites=this.useSkinSprites,this.alwaysShowPlayfield&&(A.alwaysShowPlayfield=this.alwaysShowPlayfield),A.epilepsyWarning=this.epilepsyWarning,A.specialStyle=this.specialStyle,A.widescreenStoryboard=this.widescreenStoryboard,A.samplesMatchPlaybackRate=this.samplesMatchPlaybackRate,A}}class BeatmapMetadataSection{title="Unknown Title";artist="Unknown Artist";creator="Unknown Creator";version="Normal";source="";tags=[];beatmapId=0;beatmapSetId=0;_titleUnicode="Unknown Title";get titleUnicode(){return this._titleUnicode!=="Unknown Title"?this._titleUnicode:this.title}set titleUnicode(A){this._titleUnicode=A}_artistUnicode="Unknown Artist";get artistUnicode(){return this._artistUnicode!=="Unknown Artist"?this._artistUnicode:this.artist}set artistUnicode(A){this._artistUnicode=A}clone(){const A=new BeatmapMetadataSection;return A.title=this.title,A.titleUnicode=this.titleUnicode,A.artist=this.artist,A.artistUnicode=this.artistUnicode,A.creator=this.creator,A.version=this.version,A.source=this.source,A.tags=this.tags.slice(),A.beatmapId=this.beatmapId,A.beatmapSetId=this.beatmapSetId,A}}class ControlPoint{group;constructor(A){this.group=A||null}attachGroup(A){this.group=A}dettachGroup(){this.group=null}get startTime(){return this.group?this.group.startTime:0}}class ControlPointGroup{controlPoints=[];startTime;constructor(A){this.startTime=A}add(A){const _=this.controlPoints.find(I=>I.pointType===A.pointType);_&&this.remove(_),A.attachGroup(this),this.controlPoints.push(A)}remove(A){const _=this.controlPoints.findIndex(I=>I.pointType===A.pointType);_!==-1&&(this.controlPoints.splice(_,1),A.dettachGroup())}}function findNumber(E,A){let _=0,I,B=E.length-1;for(;_<=B;){if(I=_+(B-_>>1),E[I]===A)return I;E[I]<A?_=I+1:B=I-1}return~_}function findControlPointIndex(E,A){if(!E.length||A<E[0].startTime)return-1;if(A>=E[E.length-1].startTime)return E.length-1;let _=0,I=E.length-2;for(;_<=I;){const B=_+(I-_>>1);if(E[B].startTime<A)_=B+1;else if(E[B].startTime>A)I=B-1;else return B}return _-1}function findControlPoint(E,A){const _=findControlPointIndex(E,A);return _===-1?null:E[_]}function barycentricWeights(E){const A=E.length,_=[];for(let I=0;I<A;I++){_[I]=1;for(let B=0;B<A;B++)I!==B&&(_[I]*=E[I].floatX-E[B].floatX);_[I]=1/_[I]}return _}function barycentricLagrange(E,A,_){if(E===null||E.length===0)throw new Error("points must contain at least one point");if(E.length!==A.length)throw new Error("points must contain exactly as many items as weights");let I=0,B=0;for(let T=0,R=E.length;T<R;++T){if(_===E[T].floatX)return E[T].floatY;const P=A[T]/(_-E[T].floatX);I+=P*E[T].floatY,B+=P}return I/B}class FastRandom{static MAX_INT32=2147483647;static MAX_UINT32=4294967295;static INT_MASK=2147483647;static INT_TO_REAL=1/(FastRandom.MAX_INT32+1);_y=842502087;_z=3579807591;_w=273326509;_x=0;_bitBuffer=0;_bitIndex=32;constructor(A){this._x=A}_next(){const A=(this._x^this._x<<11>>>0)>>>0;return this._x=this._y>>>0,this._y=this._z>>>0,this._z=this._w>>>0,this._w=(this._w^this._w>>>19)>>>0,this._w=(this._w^A)>>>0,this._w=(this._w^A>>>8)>>>0,this._w}next(){return(FastRandom.INT_MASK&this._next())>>0}nextUInt(A=0,_=FastRandom.MAX_INT32){return A===0&&_===FastRandom.MAX_INT32?this._next():A+this.nextDouble()*(_-A)>>>0}nextInt(A=0,_=FastRandom.MAX_INT32){return A+this.nextDouble()*(_-A)>>0}nextDouble(){return FastRandom.INT_TO_REAL*this.next()}nextBool(){return this._bitIndex===32?(this._bitBuffer=this.nextUInt(),this._bitIndex=1,(this._bitBuffer&1)===1):(this._bitIndex=this._bitIndex+1>>0,((this._bitBuffer>>=1)&1)===1)}}class RoundHelper{static PRECISION_ERROR=1e-15;static round(A,_=1){return _?this.roundToEven(A):this.roundAwayFromZero(A)}static roundToEven(A){return this.isAtMidPoint(A)?2*Math.round(A/2):Math.round(A)}static roundAwayFromZero(A){return this.isAtMidPoint(A)?A>0?Math.ceil(A):Math.floor(A):Math.round(A)}static isAtMidPoint(A){return Math.abs(.5-Math.abs(A-(A>>0)))<=this.PRECISION_ERROR}}let ControlPointType;(function(E){E[E.TimingPoint=0]="TimingPoint",E[E.DifficultyPoint=1]="DifficultyPoint",E[E.EffectPoint=2]="EffectPoint",E[E.SamplePoint=3]="SamplePoint"})(ControlPointType||(ControlPointType={}));class DifficultyPoint extends ControlPoint{static default=new DifficultyPoint;pointType=ControlPointType.DifficultyPoint;generateTicks=!0;isLegacy=!1;sliderVelocityUnlimited=1;get sliderVelocity(){return clamp(this.sliderVelocityUnlimited,.1,10)}set sliderVelocity(A){this.sliderVelocityUnlimited=A}bpmMultiplier=1;isRedundant(A){return A instanceof DifficultyPoint&&A.sliderVelocity===this.sliderVelocity&&A.generateTicks===this.generateTicks}equals(A){return A instanceof DifficultyPoint&&this.sliderVelocity===A.sliderVelocity}}class EffectPoint extends ControlPoint{static default=new EffectPoint;pointType=ControlPointType.EffectPoint;kiai=!1;omitFirstBarLine=!1;scrollSpeedUnlimited=1;get scrollSpeed(){return clamp(this.scrollSpeedUnlimited,.1,10)}set scrollSpeed(A){this.scrollSpeedUnlimited=A}isRedundant(A){return!this.omitFirstBarLine&&A instanceof EffectPoint&&this.kiai===A.kiai&&this.omitFirstBarLine===A.omitFirstBarLine&&this.scrollSpeed===A.scrollSpeed}equals(A){return A instanceof EffectPoint&&this.kiai===A.kiai&&this.omitFirstBarLine===A.omitFirstBarLine&&this.scrollSpeed===A.scrollSpeed}}class SamplePoint extends ControlPoint{static default=new SamplePoint;pointType=ControlPointType.SamplePoint;sampleSet=SampleSet[SampleSet.Normal];customIndex=0;volume=100;isRedundant(A){return A instanceof SamplePoint&&this.volume===A.volume&&this.customIndex===A.customIndex&&this.sampleSet===A.sampleSet}equals(A){return A instanceof SamplePoint&&this.volume===A.volume&&this.customIndex===A.customIndex&&this.sampleSet===A.sampleSet}}let TimeSignature;(function(E){E[E.SimpleTriple=3]="SimpleTriple",E[E.SimpleQuadruple=4]="SimpleQuadruple"})(TimeSignature||(TimeSignature={}));class TimingPoint extends ControlPoint{static default=new TimingPoint;static DEFAULT_BEAT_LENGTH=1e3;pointType=ControlPointType.TimingPoint;beatLengthUnlimited=TimingPoint.DEFAULT_BEAT_LENGTH;get beatLength(){return clamp(this.beatLengthUnlimited,6,6e4)}set beatLength(A){this.beatLengthUnlimited=A}timeSignature=TimeSignature.SimpleQuadruple;get bpmUnlimited(){return 6e4/this.beatLengthUnlimited}get bpm(){return 6e4/this.beatLength}isRedundant(){return!1}equals(A){return A instanceof TimingPoint&&this.timeSignature===A.timeSignature&&this.beatLength===A.beatLength}}class ControlPointInfo{groups=[];difficultyPoints=[];effectPoints=[];samplePoints=[];timingPoints=[];get allPoints(){const A=[];return this.groups.forEach(_=>A.push(..._.controlPoints)),A}groupAt(A){let _=this.groups.find(I=>I.startTime===A);return _||(_=new ControlPointGroup(A),this.groups.push(_),this.groups.sort((I,B)=>I.startTime-B.startTime)),_}difficultyPointAt(A){const _=findControlPoint(this.difficultyPoints,A),I=DifficultyPoint.default;return _||I}effectPointAt(A){const _=findControlPoint(this.effectPoints,A),I=EffectPoint.default;return _||I}samplePointAt(A){const _=findControlPoint(this.samplePoints,A),I=SamplePoint.default;return _||I}timingPointAt(A){const _=findControlPoint(this.timingPoints,A),I=this.timingPoints[0]||TimingPoint.default;return _||I}add(A,_){if(this.checkAlreadyExisting(_,A))return!1;const I=this.getCurrentList(A),B=findControlPointIndex(I,_);return I.splice(B+1,0,A),this.groupAt(_).add(A),!0}getCurrentList(A){switch(A.pointType){case ControlPointType.DifficultyPoint:return this.difficultyPoints;case ControlPointType.EffectPoint:return this.effectPoints;case ControlPointType.SamplePoint:return this.samplePoints;case ControlPointType.TimingPoint:return this.timingPoints}throw new TypeError(`Unknown control point type: ${A.pointType}!`)}checkAlreadyExisting(A,_){let I=null;switch(_.pointType){case ControlPointType.DifficultyPoint:I=this.difficultyPointAt(A);break;case ControlPointType.EffectPoint:I=this.effectPointAt(A);break;case ControlPointType.SamplePoint:I=findControlPoint(this.samplePoints,A);break;case ControlPointType.TimingPoint:I=findControlPoint(this.timingPoints,A)}return _?.isRedundant(I)}remove(A,_){let I;switch(A.pointType){case ControlPointType.DifficultyPoint:I=this.difficultyPoints;break;case ControlPointType.EffectPoint:I=this.effectPoints;break;case ControlPointType.SamplePoint:I=this.samplePoints;break;default:I=this.timingPoints}const B=I.findIndex(T=>T.startTime===A.startTime);return B===-1?!1:(I.splice(B,1),this.groupAt(_).remove(A),!0)}clear(){this.groups.length=0,this.difficultyPoints.length=0,this.effectPoints.length=0,this.samplePoints.length=0,this.timingPoints.length=0}clone(){const A=new ControlPointInfo;return A.groups=this.groups,A.difficultyPoints=this.difficultyPoints,A.effectPoints=this.effectPoints,A.samplePoints=this.samplePoints,A.timingPoints=this.timingPoints,A}}let HitSound;(function(E){E[E.None=0]="None",E[E.Normal=1]="Normal",E[E.Whistle=2]="Whistle",E[E.Finish=4]="Finish",E[E.Clap=8]="Clap"})(HitSound||(HitSound={}));let HitType;(function(E){E[E.Normal=1]="Normal",E[E.Slider=2]="Slider",E[E.NewCombo=4]="NewCombo",E[E.Spinner=8]="Spinner",E[E.ComboSkip1=16]="ComboSkip1",E[E.ComboSkip2=32]="ComboSkip2",E[E.ComboSkip3=64]="ComboSkip3",E[E.ComboOffset=112]="ComboOffset",E[E.Hold=128]="Hold"})(HitType||(HitType={}));let PathType;(function(E){E.Catmull="C",E.Bezier="B",E.Linear="L",E.PerfectCurve="P"})(PathType||(PathType={}));let SliderEventType;(function(E){E[E.Tick=1]="Tick",E[E.LegacyLastTick=2]="LegacyLastTick",E[E.Head=4]="Head",E[E.Tail=8]="Tail",E[E.Repeat=16]="Repeat"})(SliderEventType||(SliderEventType={}));class EventGenerator{static SLIDER_MAX_DISTANCE=1e5;static*generate(A){const _=Math.min(this.SLIDER_MAX_DISTANCE,A.path.distance),I=clamp(A.tickDistance||0,0,_),B=A.velocity*10;let T=A.startTime;if(yield{eventType:SliderEventType.Head,startTime:T,spanStartTime:T,spanIndex:0,progress:0},I!==0&&I!==1/0)for(let U=0;U<A.spans;++U){const V=!!(U&1),K=[];let J=I;for(;J<_-B;){const ee=J/_,ie=V?1-ee:ee;K.push({eventType:SliderEventType.Tick,startTime:T+ie*A.spanDuration,spanStartTime:T,spanIndex:U,progress:ee}),J+=I}V&&K.reverse();for(const ee of K)yield ee;U<A.repeats&&(yield{eventType:SliderEventType.Repeat,startTime:T+A.spanDuration,spanStartTime:T,spanIndex:U,progress:U+1&1}),T+=A.spanDuration}const R=A.spans*A.spanDuration,P=A.spans-1,D=A.startTime+P*A.spanDuration,F=Math.max(A.startTime+R/2,D+A.spanDuration-(A.legacyLastTickOffset||0));let L=(F-D)/A.spanDuration;(A.spans&1)===0&&(L=1-L),yield{eventType:SliderEventType.LegacyLastTick,startTime:F,spanStartTime:D,spanIndex:P,progress:L},yield{eventType:SliderEventType.Tail,startTime:A.startTime+R,spanStartTime:D,spanIndex:P,progress:A.spans%2}}}class DifficultyRange{result;min;average;max;constructor(A,_,I,B){this.result=A,this.min=_,this.average=I,this.max=B}static map(A,_,I,B){return A>5?I+(B-I)*(A-5)/5:A<5?I-(I-_)*(5-A)/5:I}}let HitResult;(function(E){E[E.None=0]="None",E[E.Miss=1]="Miss",E[E.Meh=2]="Meh",E[E.Ok=3]="Ok",E[E.Good=4]="Good",E[E.Great=5]="Great",E[E.Perfect=6]="Perfect",E[E.SmallTickMiss=7]="SmallTickMiss",E[E.SmallTickHit=8]="SmallTickHit",E[E.LargeTickMiss=9]="LargeTickMiss",E[E.LargeTickHit=10]="LargeTickHit",E[E.SmallBonus=11]="SmallBonus",E[E.LargeBonus=12]="LargeBonus",E[E.IgnoreMiss=13]="IgnoreMiss",E[E.IgnoreHit=14]="IgnoreHit"})(HitResult||(HitResult={}));class HitWindows{static _BASE_RANGES=[new DifficultyRange(HitResult.Perfect,22.4,19.4,13.9),new DifficultyRange(HitResult.Great,64,49,34),new DifficultyRange(HitResult.Good,97,82,67),new DifficultyRange(HitResult.Ok,127,112,97),new DifficultyRange(HitResult.Meh,151,136,121),new DifficultyRange(HitResult.Miss,188,173,158)];_perfect=0;_great=0;_good=0;_ok=0;_meh=0;_miss=0;_lowestSuccessfulHitResult(){for(let A=HitResult.Meh;A<=HitResult.Perfect;++A)if(this.isHitResultAllowed(A))return A;return HitResult.None}*getAllAvailableWindows(){for(let A=HitResult.Meh;A<=HitResult.Perfect;++A)this.isHitResultAllowed(A)&&(yield[A,this.windowFor(A)])}isHitResultAllowed(A){return!0}setDifficulty(A){for(const _ of this._getRanges()){const I=DifficultyRange.map(A,_.min,_.average,_.max);switch(_.result){case HitResult.Miss:this._miss=I;break;case HitResult.Meh:this._meh=I;break;case HitResult.Ok:this._ok=I;break;case HitResult.Good:this._good=I;break;case HitResult.Great:this._great=I;break;case HitResult.Perfect:this._perfect=I;break}}}resultFor(A){A=Math.abs(A);for(let _=HitResult.Perfect;_>=HitResult.Miss;--_)if(this.isHitResultAllowed(_)&&A<=this.windowFor(_))return _;return HitResult.None}windowFor(A){switch(A){case HitResult.Perfect:return this._perfect;case HitResult.Great:return this._great;case HitResult.Good:return this._good;case HitResult.Ok:return this._ok;case HitResult.Meh:return this._meh;case HitResult.Miss:return this._miss;default:throw new Error("Unknown enum member")}}canBeHit(A){return A<=this.windowFor(this._lowestSuccessfulHitResult())}_getRanges(){return HitWindows._BASE_RANGES}static EmptyHitWindows=class Fn extends HitWindows{static _ranges=[new DifficultyRange(HitResult.Perfect,0,0,0),new DifficultyRange(HitResult.Miss,0,0,0)];isHitResultAllowed(_){switch(_){case HitResult.Perfect:case HitResult.Miss:return!0}return!1}_getRanges(){return Fn._ranges}};static empty=new HitWindows.EmptyHitWindows}class HitObject{kiai=!1;nestedHitObjects=[];startTime=0;hitType=HitType.Normal;hitSound=HitSound.Normal;samples=[];startPosition=new Vector2(0,0);hitWindows=new HitWindows;get startX(){return this.startPosition.floatX}set startX(A){this.startPosition.x=A}get startY(){return this.startPosition.floatY}set startY(A){this.startPosition.y=A}createNestedHitObjects(){this.nestedHitObjects=[]}applyDefaultsToSelf(A,_){this.kiai=A.effectPointAt(this.startTime+1).kiai,this.hitWindows?.setDifficulty(_.overallDifficulty)}applyDefaultsToNested(A,_){this.nestedHitObjects.forEach(I=>{I.applyDefaults(A,_)})}applyDefaults(A,_){this.applyDefaultsToSelf(A,_),this.nestedHitObjects=[],this.createNestedHitObjects(),this.nestedHitObjects.sort((I,B)=>I.startTime-B.startTime),this.applyDefaultsToNested(A,_)}clone(){const A=this.constructor,_=new A;return _.startPosition=this.startPosition.clone(),_.startTime=this.startTime,_.hitType=this.hitType,_.hitSound=this.hitSound,_.samples=this.samples.map(I=>I.clone()),_.kiai=this.kiai,_}}class PathApproximator{static BEZIER_TOLERANCE=Math.fround(.25);static CIRCULAR_ARC_TOLERANCE=Math.fround(.1);static CATMULL_DETAIL=50;static approximateBezier(A){return this.approximateBSpline(A)}static approximateBSpline(A,_=0){const I=[],B=A.length-1;if(B<0)return I;const T=[],R=[],P=A.slice();if(_>0&&_<B){for(let U=0;U<B-_;++U){const V=[P[U]];for(let K=0;K<_-1;++K){V[K+1]=P[U+1];for(let J=1;J<_-K;++J){const ee=Math.min(J,B-_-U);P[U+J]=P[U+J].fscale(ee).fadd(P[U+J+1]).fdivide(ee+1)}}V[_]=P[U+1],T.push(V)}T.push(P.slice(B-_)),T.reverse()}else _=B,T.push(P);const D=[],F=[],L=F;for(;T.length>0;){const U=T.pop()||[];if(this._bezierIsFlatEnough(U)){this._bezierApproximate(U,I,D,F,_+1),R.push(U);continue}const V=R.pop()||[];this._bezierSubdivide(U,L,V,D,_+1);for(let K=0;K<_+1;++K)U[K]=L[K];T.push(V),T.push(U)}return I.push(A[B]),I}static approximateCatmull(A){const _=[],I=A.length;for(let B=0;B<I-1;B++){const T=B>0?A[B-1]:A[B],R=A[B],P=B<I-1?A[B+1]:R.fadd(R).fsubtract(T),D=B<I-2?A[B+2]:P.fadd(P).fsubtract(R);for(let F=0;F<PathApproximator.CATMULL_DETAIL;F++)_.push(PathApproximator._catmullFindPoint(T,R,P,D,Math.fround(Math.fround(F)/PathApproximator.CATMULL_DETAIL))),_.push(PathApproximator._catmullFindPoint(T,R,P,D,Math.fround(Math.fround(F+1)/PathApproximator.CATMULL_DETAIL)))}return _}static approximateCircularArc(A){const _=this._circularArcProperties(A);if(!_.isValid)return this.approximateBezier(A);let I=2;if(2*_.radius>PathApproximator.CIRCULAR_ARC_TOLERANCE){let T=Math.fround(PathApproximator.CIRCULAR_ARC_TOLERANCE/_.radius);T=Math.fround(1-T),T=Math.fround(2*Math.fround(Math.acos(T)));const R=Math.ceil(Math.fround(_.thetaRange/T)),P=isFinite(R)?R:-2147483648;I=Math.max(2,P)}const B=[];for(let T=0;T<I;++T){const R=T/(I-1),P=_.thetaStart+_.direction*R*_.thetaRange,D=new Vector2(Math.fround(Math.cos(P)),Math.fround(Math.sin(P)));B.push(D.fscale(_.radius).fadd(_.centre))}return B}static _circularArcProperties(A){const _=A[0],I=A[1],B=A[2],T=Math.fround(Math.fround(I.floatY-_.floatY)*Math.fround(B.floatX-_.floatX)-Math.fround(I.floatX-_.floatX)*Math.fround(B.floatY-_.floatY));if(Math.abs(T)<Math.fround(.001))return new CircularArcProperties;const R=Math.fround(2*Math.fround(Math.fround(_.floatX*I.fsubtract(B).floatY)+Math.fround(I.floatX*B.fsubtract(_).floatY)+Math.fround(B.floatX*_.fsubtract(I).floatY))),P=Math.fround(Math.fround(_.floatX*_.floatX)+Math.fround(_.floatY*_.floatY)),D=Math.fround(Math.fround(I.floatX*I.floatX)+Math.fround(I.floatY*I.floatY)),F=Math.fround(Math.fround(B.floatX*B.floatX)+Math.fround(B.floatY*B.floatY)),L=new Vector2(Math.fround(Math.fround(Math.fround(P*I.fsubtract(B).floatY)+Math.fround(D*B.fsubtract(_).floatY))+Math.fround(F*_.fsubtract(I).floatY)),Math.fround(Math.fround(Math.fround(P*B.fsubtract(I).floatX)+Math.fround(D*_.fsubtract(B).floatX))+Math.fround(F*I.fsubtract(_).floatX))).fdivide(R),U=_.fsubtract(L),V=B.fsubtract(L),K=U.flength(),J=Math.atan2(U.floatY,U.floatX);let ee=Math.atan2(V.floatY,V.floatX);for(;ee<J;)ee+=2*Math.PI;let ie=1,ne=ee-J,ce=B.fsubtract(_);return ce=new Vector2(ce.floatY,-ce.floatX),ce.fdot(I.fsubtract(_))<0&&(ie=-ie,ne=2*Math.PI-ne),new CircularArcProperties(J,ne,ie,K,L)}static approximateLinear(A){return A.slice()}static approximateLagrangePolynomial(A){const I=[],B=barycentricWeights(A);let T=A[0].floatX,R=A[0].floatX;for(let D=1,F=A.length;D<F;D++)T=Math.min(T,A[D].floatX),R=Math.max(R,A[D].floatX);const P=R-T;for(let D=0;D<51;D++){const F=T+P/50*D,L=Math.fround(barycentricLagrange(A,B,F));I.push(new Vector2(F,L))}return I}static _bezierIsFlatEnough(A){let _;for(let I=1,B=A.length;I<B-1;I++)if(_=A[I-1].fsubtract(A[I].fscale(2)).fadd(A[I+1]),_.flength()**2>PathApproximator.BEZIER_TOLERANCE**2*4)return!1;return!0}static _bezierSubdivide(A,_,I,B,T){const R=B;for(let P=0;P<T;++P)R[P]=A[P];for(let P=0;P<T;++P){_[P]=R[0],I[T-P-1]=R[T-P-1];for(let D=0;D<T-P-1;D++)R[D]=R[D].fadd(R[D+1]).fdivide(2)}}static _bezierApproximate(A,_,I,B,T){const R=B,P=I;PathApproximator._bezierSubdivide(A,R,P,I,T);for(let D=0;D<T-1;++D)R[T+D]=P[D+1];_.push(A[0]);for(let D=1;D<T-1;++D){const F=2*D,L=R[F-1].fadd(R[F].fscale(2)).fadd(R[F+1]).fscale(Math.fround(.25));_.push(L)}}static _catmullFindPoint(A,_,I,B,T){const R=Math.fround(T*T),P=Math.fround(T*R),D=[];for(let F=0;F<=1;++F){const L=F===0?A.floatX:A.floatY,U=F===0?_.floatX:_.floatY,V=F===0?I.floatX:I.floatY,K=F===0?B.floatX:B.floatY,J=Math.fround(2*U),ee=Math.fround(V-L),ie=Math.fround(2*L),ne=Math.fround(5*U),ce=Math.fround(4*V),fe=Math.fround(3*U),de=Math.fround(3*V),pe=Math.fround(ee*T),ve=Math.fround(ie-ne),ye=Math.fround(ve+ce),_e=Math.fround(ye-K),be=Math.fround(_e),Te=Math.fround(fe-L),ue=Math.fround(Te-de),O=Math.fround(ue+K),z=Math.fround(be*R),Y=Math.fround(O*P),te=Math.fround(J+pe),oe=Math.fround(te+z),le=Math.fround(oe+Y);D.push(Math.fround(Math.fround(.5)*le))}return new Vector2(D[0],D[1])}}class CircularArcProperties{isValid;thetaStart;thetaRange;direction;radius;centre;constructor(A,_,I,B,T){this.isValid=!!(A||_||I||B||T),this.thetaStart=A||0,this.thetaRange=_||0,this.direction=I||0,this.radius=B?Math.fround(B):0,this.centre=T||new Vector2(0,0)}get thetaEnd(){return this.thetaStart+this.thetaRange*this.direction}}class PathPoint{position;type;constructor(A,_){this.position=A||new Vector2(0,0),this.type=_||null}}class SliderPath{_expectedDistance;_controlPoints;_curveType;_calculatedLength=0;_calculatedPath=[];_cumulativeLength=[];_isCached=!1;constructor(A,_,I){this._curveType=A||PathType.Linear,this._controlPoints=_||[],this._expectedDistance=I||0}get curveType(){return this._curveType}set curveType(A){this._curveType=A,this.invalidate()}get controlPoints(){return this._controlPoints}set controlPoints(A){this._controlPoints=A,this.invalidate()}get expectedDistance(){return this._expectedDistance}set expectedDistance(A){this._expectedDistance=A,this.invalidate()}get distance(){return this._ensureValid(),this._cumulativeLength.length?this._cumulativeLength[this._cumulativeLength.length-1]:0}set distance(A){this.expectedDistance=A}get calculatedDistance(){return this._ensureValid(),this._calculatedLength}get path(){this._ensureValid();const A=[];for(let _=0;_<this._calculatedPath.length&&!(this._cumulativeLength[_]>=this.expectedDistance);_++)A.push(this._calculatedPath[_]);return A.push(this.positionAt(1)),A}get calculatedPath(){return this._ensureValid(),this._calculatedPath}invalidate(){this._calculatedLength=0,this._calculatedPath=[],this._cumulativeLength=[],this._isCached=!1}calculatePathToProgress(A,_){this._ensureValid();const I=this._progressToDistance(A),B=this._progressToDistance(_);let T=0;for(;T<this._calculatedPath.length&&this._cumulativeLength[T]<I;)++T;const R=[this._interpolateVertices(T,I)];for(;T<this._calculatedPath.length&&this._cumulativeLength[T++]<=B;)R.push(this._calculatedPath[T]);return R.push(this._interpolateVertices(T,B)),R}progressAt(A,_){const I=A*_%1;return Math.trunc(A*_)%2?1-I:I}positionAt(A){this._ensureValid();const _=this._progressToDistance(A);return this._interpolateVertices(this._indexOfDistance(_),_)}curvePositionAt(A,_){return this.positionAt(this.progressAt(A,_))}clone(){const A=this._controlPoints.map(_=>new PathPoint(_.position.clone(),_.type));return new SliderPath(this._curveType,A,this._expectedDistance)}_ensureValid(){this._isCached||(this._calculatePath(),this._calculateLength(),this._isCached=!0)}_calculatePath(){this._calculatedPath=[];const A=this.controlPoints.length;if(A===0)return;const _=[];for(let B=0;B<A;B++)_[B]=this.controlPoints[B].position;let I=0;for(let B=0;B<A;++B){if(!this.controlPoints[B].type&&B<A-1)continue;const T=_.slice(I,B+1),R=this.controlPoints[I].type||PathType.Linear;for(const P of this._calculateSubPath(T,R)){const D=this._calculatedPath[this._calculatedPath.length-1];(this._calculatedPath.length===0||!D.equals(P))&&this._calculatedPath.push(P)}I=B}}_calculateSubPath(A,_){switch(_){case PathType.Linear:return PathApproximator.approximateLinear(A);case PathType.PerfectCurve:{if(A.length!==3)break;const I=PathApproximator.approximateCircularArc(A);if(I.length===0)break;return I}case PathType.Catmull:return PathApproximator.approximateCatmull(A)}return PathApproximator.approximateBezier(A)}_calculateLength(){this._calculatedLength=0,this._cumulativeLength=[0];for(let A=0,_=this._calculatedPath.length-1;A<_;++A){const I=this._calculatedPath[A+1].fsubtract(this._calculatedPath[A]);this._calculatedLength+=I.flength(),this._cumulativeLength.push(this._calculatedLength)}if(this.expectedDistance&&this._calculatedLength!==this.expectedDistance){const A=this.controlPoints,_=A[A.length-1],I=A[A.length-2];if(A.length>=2&&_.position.equals(I.position)&&this.expectedDistance>this._calculatedLength){this._cumulativeLength.push(this._calculatedLength);return}this._cumulativeLength.pop();let T=this._calculatedPath.length-1;if(this._calculatedLength>this.expectedDistance)for(;this._cumulativeLength.length>0&&this._cumulativeLength[this._cumulativeLength.length-1]>=this.expectedDistance;)this._cumulativeLength.pop(),this._calculatedPath.splice(T--,1);if(T<=0){this._cumulativeLength.push(0);return}const R=this._calculatedPath[T].fsubtract(this._calculatedPath[T-1]).fnormalize(),P=Math.fround(this.expectedDistance-this._cumulativeLength[this._cumulativeLength.length-1]);this._calculatedPath[T]=this._calculatedPath[T-1].fadd(R.fscale(P)),this._cumulativeLength.push(this.expectedDistance)}}_indexOfDistance(A){let _=findNumber(this._cumulativeLength,A);return _<0&&(_=~_),_}_progressToDistance(A){return clamp01(A)*this.distance}_interpolateVertices(A,_){if(this._calculatedPath.length===0)return new Vector2(0,0);if(A<=0)return this._calculatedPath[0];if(A>=this._calculatedPath.length)return this._calculatedPath[this._calculatedPath.length-1];const I=this._calculatedPath[A-1],B=this._calculatedPath[A],T=this._cumulativeLength[A-1],R=this._cumulativeLength[A];if(Math.abs(T-R)<.001)return I;const P=(_-T)/(R-T);return I.fadd(B.fsubtract(I).fscale(P))}}let HitSample$1=class Nn{sampleSet=SampleSet[SampleSet.None];hitSound=HitSound[HitSound.Normal];customIndex=0;suffix="";volume=100;isLayered=!1;filename="";clone(){const A=new Nn;return A.sampleSet=this.sampleSet,A.hitSound=this.hitSound,A.customIndex=this.customIndex,A.suffix=this.suffix,A.volume=this.volume,A.isLayered=this.isLayered,A.filename=this.filename,A}};class SampleBank{filename="";volume=100;normalSet=SampleSet.None;additionSet=SampleSet.None;customIndex=0;clone(){const A=new SampleBank;return A.filename=this.filename,A.volume=this.volume,A.normalSet=this.normalSet,A.additionSet=this.additionSet,A.customIndex=this.customIndex,A}}let Beatmap$1=class{base;general=new BeatmapGeneralSection;editor=new BeatmapEditorSection;difficulty=new BeatmapDifficultySection;metadata=new BeatmapMetadataSection;colors=new BeatmapColorSection;events=new BeatmapEventSection;controlPoints=new ControlPointInfo;hitObjects=[];fileFormat=14;fileUpdateDate=new Date;originalMode=0;get mode(){return this.originalMode}get length(){if(!this.hitObjects.length)return 0;const A=this.hitObjects[0],_=this.hitObjects[this.hitObjects.length-1],I=_,B=A.startTime;return((I.endTime||_.startTime)-B)/this.difficulty.clockRate}get totalLength(){if(!this.hitObjects.length)return 0;const A=this.hitObjects[this.hitObjects.length-1];return(A.endTime||A.startTime)/this.difficulty.clockRate}_getLongestBeatLength(A){const _=this.controlPoints.timingPoints.reduce((I,B)=>{const T=A?B.beatLengthUnlimited:B.beatLength;return T>=0?Math.max(T,I):I},-1/0);return isFinite(_)?_:TimingPoint.DEFAULT_BEAT_LENGTH}get bpmMin(){return 6e4/this._getLongestBeatLength(!1)*this.difficulty.clockRate}get bpmMinUnlimited(){return 6e4/this._getLongestBeatLength(!0)*this.difficulty.clockRate}_getShortestBeatLength(A){const _=this.controlPoints.timingPoints.reduce((I,B)=>{const T=A?B.beatLengthUnlimited:B.beatLength;return T>=0?Math.min(T,I):I},1/0);return isFinite(_)?_:TimingPoint.DEFAULT_BEAT_LENGTH}get bpmMax(){return 6e4/this._getShortestBeatLength(!1)*this.difficulty.clockRate}get bpmMaxUnlimited(){return 6e4/this._getShortestBeatLength(!0)*this.difficulty.clockRate}_getMostCommonBeatLength(A){if(!this.controlPoints.timingPoints.length)return TimingPoint.DEFAULT_BEAT_LENGTH;const _=this.controlPoints.timingPoints,I=this.hitObjects.at(-1),B=I?.endTime??I?.startTime??_.at(-1)?.startTime??0,T=new Map;return _.forEach((R,P)=>{const D=A?R.beatLengthUnlimited:R.beatLength,F=RoundHelper.round(D*1e3)/1e3;if(T.has(F)||T.set(F,0),R.startTime>B)return;const L=P===0?0:R.startTime,U=P===_.length-1?B:_[P+1].startTime,V=T.get(F)??0;T.set(F,V+(U-L))}),T.size===0?this.bpmMax:[...T.entries()].sort((R,P)=>P[1]-R[1])[0][0]}get bpm(){return 6e4/this._getMostCommonBeatLength(!1)*this.difficulty.clockRate}get bpmUnlimited(){return 6e4/this._getMostCommonBeatLength(!0)*this.difficulty.clockRate}get totalBreakTime(){return(this.events.breaks||[]).reduce((A,_)=>A+_.duration,0)}get hittable(){return this.hitObjects.reduce((A,_)=>A+(_.hitType&HitType.Normal?1:0),0)}get slidable(){return this.hitObjects.reduce((A,_)=>A+(_.hitType&HitType.Slider?1:0),0)}get spinnable(){return this.hitObjects.reduce((A,_)=>A+(_.hitType&HitType.Spinner?1:0),0)}get holdable(){return this.hitObjects.reduce((A,_)=>A+(_.hitType&HitType.Hold?1:0),0)}clone(){const A=this.constructor,_=new A;return _.general=this.general.clone(),_.editor=this.editor.clone(),_.difficulty=this.difficulty.clone(),_.metadata=this.metadata.clone(),_.colors=this.colors.clone(),_.events=this.events.clone(),_.controlPoints=this.controlPoints.clone(),_.hitObjects=this.hitObjects.map(I=>I.clone()),_.originalMode=this.originalMode,_.fileFormat=this.fileFormat,this.base&&(_.base=this.base),_}};class BeatmapConverter{convertBeatmap(A){const _=this.createBeatmap();_.general=A.general,_.editor=A.editor,_.difficulty=A.difficulty.clone(),_.metadata=A.metadata,_.colors=A.colors,_.events=A.events,_.controlPoints=A.controlPoints,_.fileFormat=A.fileFormat,_.originalMode=A.originalMode,_.base=A.base??A;for(const I of this.convertHitObjects(_.base))_.hitObjects.push(I);return _.hitObjects.sort((I,B)=>I.startTime-B.startTime),_}}class BeatmapInfo{id=0;beatmapsetId=0;creatorId=0;creator="";favourites=0;passcount=0;playcount=0;status=-2;title="Unknown title";artist="Unknown artist";version="Normal";hittable=0;slidable=0;spinnable=0;holdable=0;length=0;bpmMin=0;bpmMax=0;bpm=0;circleSize=0;approachRate=0;overallDifficulty=0;drainRate=0;_ruleset=null;get ruleset(){return this._ruleset}set ruleset(A){this._ruleset=A,this._mods=this.ruleset?.createModCombination(this.rawMods)??null}_rulesetId=0;get rulesetId(){return this.ruleset?.id??this._rulesetId}set rulesetId(A){this._rulesetId=A}_mods=null;get mods(){return this._mods}set mods(A){this._mods=A,this._rawMods=A?.bitwise??0}_rawMods=0;get rawMods(){return this._rawMods}set rawMods(A){this._rawMods!==A&&(this._rawMods=A,this._mods=this.ruleset?.createModCombination(A)??null)}starRating=0;maxCombo=0;isConvert=!1;deletedAt=null;updatedAt=null;hashMD5="";constructor(A={}){Object.assign(this,A)}get totalHits(){return this.hittable+this.slidable+this.spinnable+this.holdable}clone(){const A=this.constructor,_=new A;return Object.assign(_,this),_}equals(A){return A&&this.id!==0&&A.id!==0?this.id===A.id:!1}toJSON(){const A={},_=["ruleset","rawMods","mods"];for(const I in this)I.startsWith("_")||_.includes(I)||(A[I]=this[I]);return{...A,mods:this.mods?.toString()??"NM",rulesetId:this.rulesetId,totalHits:this.totalHits,deletedAt:this.deletedAt?this.deletedAt.getTime()/1e3:null,updatedAt:this.updatedAt?this.updatedAt.getTime()/1e3:null}}static fromJSON(A){return new BeatmapInfo({...A,deletedAt:A.deletedAt?new Date(A.deletedAt*1e3):null,updatedAt:A.updatedAt?new Date(A.updatedAt*1e3):null,rawMods:A.mods})}}class BeatmapProcessor{preProcess(A){const I=A.hitObjects.filter(T=>{const R=T;if(typeof R.comboIndex=="number")return R});let B=null;for(let T=0;T<I.length;T++){const R=I[T];T===0&&(I[T].hitType|=HitType.NewCombo,I[T].isNewCombo=!0),R.comboIndex=B?.comboIndex??0,R.comboIndexWithOffsets=B?.comboIndexWithOffsets??0,R.currentComboIndex=(B?.currentComboIndex??-1)+1,R.isNewCombo&&(R.currentComboIndex=0,R.comboIndex++,R.comboIndexWithOffsets+=R.comboOffset+1,B!==null&&(B.lastInCombo=!0)),B=R}return A}postProcess(A){return A}}let EffectType;(function(E){E[E.None=0]="None",E[E.Kiai=1]="Kiai",E[E.OmitFirstBarLine=8]="OmitFirstBarLine"})(EffectType||(EffectType={}));class BeatmapBreakEvent{startTime;endTime;constructor(A,_){this.startTime=A,this.endTime=_}get duration(){return this.endTime-this.startTime}get hasEffect(){return this.duration>=650}contains(A){return this.startTime<=A&&A<=this.endTime}}class ProgressiveCalculationBeatmap{_baseBeatmap;constructor(A){this._baseBeatmap=A}hitObjects=[];get general(){return this._baseBeatmap.general}set general(A){this._baseBeatmap.general=A}get editor(){return this._baseBeatmap.editor}set editor(A){this._baseBeatmap.editor=A}get difficulty(){return this._baseBeatmap.difficulty}set difficulty(A){this._baseBeatmap.difficulty=A}get metadata(){return this._baseBeatmap.metadata}set metadata(A){this._baseBeatmap.metadata=A}get colors(){return this._baseBeatmap.colors}set colors(A){this._baseBeatmap.colors=A}get events(){return this._baseBeatmap.events}set events(A){this._baseBeatmap.events=A}get controlPoints(){return this._baseBeatmap.controlPoints}set controlPoints(A){this._baseBeatmap.controlPoints=A}get mode(){return this._baseBeatmap.mode}get originalMode(){return this._baseBeatmap.originalMode}get fileFormat(){return this._baseBeatmap.fileFormat}get length(){return this._baseBeatmap.length}get bpmMin(){return this._baseBeatmap.bpmMin}get bpmMax(){return this._baseBeatmap.bpmMax}get bpm(){return this._baseBeatmap.bpm}get totalBreakTime(){return this._baseBeatmap.totalBreakTime}clone(){return new ProgressiveCalculationBeatmap(this._baseBeatmap)}}class RulesetBeatmap extends Beatmap$1{clone(){const A=super.clone();return A.mods=this.mods.clone(),A}}class DifficultyAttributes{mods;starRating;maxCombo=0;constructor(A,_){this.mods=A,this.starRating=_}}class PerformanceAttributes{mods;totalPerformance;constructor(A,_){this.mods=A,this.totalPerformance=_}}class TimedDifficultyAttributes{time;attributes;constructor(A,_){this.time=A,this.attributes=_}compareTo(A){return this.time<A.time?-1:this.time>A.time?1:this.time===A.time?0:Number.isFinite(this.time)?1:Number.isFinite(A.time)?-1:0}}class DifficultyCalculator{_beatmap;_ruleset;_mods;constructor(A,_){this._beatmap=A,this._ruleset=_,this._mods=A?.mods??this._ruleset.createModCombination()}calculate(A){return this.calculateWithMods(this._mods,A)}*calculateAll(A){for(const _ of this._createDifficultyModCombinations())yield this.calculateWithMods(_,A)}calculateWithMods(A,_){const I=this._getWorkingBeatmap(A);_??=I.difficulty.clockRate;const B=this._createSkills(I,A,_);if(!I.hitObjects.length)return this._createDifficultyAttributes(I,A,B,_);for(const T of this._getDifficultyHitObjects(I,_))for(const R of B)R.process(T);return this._createDifficultyAttributes(I,A,B,_)}calculateAt(A,_){return this.calculateWithModsAt(this._mods,A,_)}calculateWithModsAt(A,_,I){if(!_)return this.calculateWithMods(A);const B=this._getWorkingBeatmap(A);I??=B.difficulty.clockRate;const T=this._createSkills(B,A,I);if(!B.hitObjects.length||_<=0)return this._createDifficultyAttributes(B,A,T,I);const R=new ProgressiveCalculationBeatmap(B);R.hitObjects=B.hitObjects.slice(0,_);for(const P of this._getDifficultyHitObjects(R,I))for(const D of T)D.process(P);return this._createDifficultyAttributes(R,A,T,I)}calculateTimed(A){return this.calculateTimedWithMods(this._mods,A)}*calculateTimedWithMods(A,_){const I=this._getWorkingBeatmap(A);if(!I.hitObjects.length)return;_??=I.difficulty.clockRate;const B=this._createSkills(I,A,_),T=new ProgressiveCalculationBeatmap(I);for(const R of this._getDifficultyHitObjects(I,_)){T.hitObjects.push(R.baseObject);for(const F of B)F.process(R);const P=R.endTime*_,D=this._createDifficultyAttributes(T,A,B,_);yield new TimedDifficultyAttributes(P,D)}}_getWorkingBeatmap(A){const _=this._beatmap,I=this._beatmap.mode===this._ruleset.id,B=_.mods?.equals(A)??!1;if(I&&B)return _;const T=this._beatmap.base??this._beatmap;return this._ruleset.applyToBeatmapWithMods(T,A)}_getDifficultyHitObjects(A,_){return this._sortObjects(this._createDifficultyHitObjects(A,_))}_sortObjects(A){return A.sort((_,I)=>_.startTime-I.startTime)}_createDifficultyModCombinations(){const A=this._ruleset;function*_(I,B){const T=B.reduce((R,P)=>R+P.bitwise,0);yield A.createModCombination(T);for(let R=0;R<I.length;++R){const P=I[R];if(B.find(U=>U.incompatibles&P.bitwise)||B.find(U=>U.bitwise&P.bitwise))continue;const D=I.slice(R+1),F=[...B,P],L=_(D,F);for(const U of L)yield U}}return _(this.difficultyMods,[])}get difficultyMods(){return[]}}class PerformanceCalculator{attributes;_ruleset;_score;constructor(A,_,I){this._ruleset=A,this._score=I,this.attributes=_}calculate(A,_){return this.calculateAttributes(A,_).totalPerformance}}class DifficultyHitObject{index;baseObject;lastObject;deltaTime;startTime;endTime;_difficultyHitObjects;constructor(A,_,I,B,T){this._difficultyHitObjects=B,this.index=T,this.baseObject=A,this.lastObject=_,this.deltaTime=(A.startTime-_.startTime)/I,this.startTime=A.startTime/I;const R=A;this.endTime=(R?.endTime??A.startTime)/I}previous(A){const _=this.index-(A+1);return this._difficultyHitObjects[_]??null}next(A){const _=this.index+(A+1);return this._difficultyHitObjects[_]??null}}class Skill{_mods;constructor(A){this._mods=A}}class StrainSkill extends Skill{_decayWeight=.9;_sectionLength=400;_currentSectionPeak=0;_currentSectionEnd=0;_strainPeaks=[];process(A){for(A.index===0&&(this._currentSectionEnd=Math.ceil(A.startTime/this._sectionLength),this._currentSectionEnd*=this._sectionLength);A.startTime>this._currentSectionEnd;)this._saveCurrentPeak(),this._startNewSectionFrom(this._currentSectionEnd,A),this._currentSectionEnd+=this._sectionLength;this._currentSectionPeak=Math.max(this._strainValueAt(A),this._currentSectionPeak)}_saveCurrentPeak(){this._strainPeaks.push(this._currentSectionPeak)}_startNewSectionFrom(A,_){this._currentSectionPeak=this._calculateInitialStrain(A,_)}*getCurrentStrainPeaks(){for(const A of this._strainPeaks)yield A;yield this._currentSectionPeak}get difficultyValue(){let A=0,_=1;const I=[...this.getCurrentStrainPeaks()].filter(B=>B>0);I.sort((B,T)=>T-B);for(const B of I)A+=B*_,_*=this._decayWeight;return A}}let ModBitwise;(function(E){E[E.None=0]="None",E[E.NoFail=1]="NoFail",E[E.Easy=2]="Easy",E[E.TouchDevice=4]="TouchDevice",E[E.Hidden=8]="Hidden",E[E.HardRock=16]="HardRock",E[E.SuddenDeath=32]="SuddenDeath",E[E.DoubleTime=64]="DoubleTime",E[E.Relax=128]="Relax",E[E.HalfTime=256]="HalfTime",E[E.Nightcore=512]="Nightcore",E[E.Flashlight=1024]="Flashlight",E[E.Autoplay=2048]="Autoplay",E[E.SpunOut=4096]="SpunOut",E[E.Relax2=8192]="Relax2",E[E.Perfect=16384]="Perfect",E[E.Key4=32768]="Key4",E[E.Key5=65536]="Key5",E[E.Key6=131072]="Key6",E[E.Key7=262144]="Key7",E[E.Key8=524288]="Key8",E[E.FadeIn=1048576]="FadeIn",E[E.Random=2097152]="Random",E[E.Cinema=4194304]="Cinema",E[E.Target=8388608]="Target",E[E.Key9=16777216]="Key9",E[E.KeyCoop=33554432]="KeyCoop",E[E.Key1=67108864]="Key1",E[E.Key3=134217728]="Key3",E[E.Key2=268435456]="Key2",E[E.ScoreV2=536870912]="ScoreV2",E[E.Mirror=1073741824]="Mirror",E[E.KeyMod=487555072]="KeyMod",E[E.DifficultyDecrease=258]="DifficultyDecrease",E[E.DifficultyIncrease=1616]="DifficultyIncrease"})(ModBitwise||(ModBitwise={}));let ModType;(function(E){E[E.DifficultyReduction=0]="DifficultyReduction",E[E.DifficultyIncrease=1]="DifficultyIncrease",E[E.Conversion=2]="Conversion",E[E.Automation=3]="Automation",E[E.Fun=4]="Fun",E[E.System=5]="System"})(ModType||(ModType={}));class Autoplay{name="Autoplay";acronym="AT";bitwise=ModBitwise.Autoplay;type=ModType.Automation;multiplier=1;isRanked=!1;incompatibles=ModBitwise.NoFail|ModBitwise.SuddenDeath|ModBitwise.Perfect|ModBitwise.Relax|ModBitwise.Relax2|ModBitwise.SpunOut|ModBitwise.Cinema}class Cinema{name="Cinema";acronym="CN";bitwise=ModBitwise.Cinema;type=ModType.Fun;multiplier=1;isRanked=!1;incompatibles=ModBitwise.NoFail|ModBitwise.SuddenDeath|ModBitwise.Perfect|ModBitwise.Relax|ModBitwise.Relax2|ModBitwise.SpunOut|ModBitwise.Autoplay}class DoubleTime{name="Double Time";acronym="DT";bitwise=ModBitwise.DoubleTime;type=ModType.DifficultyIncrease;multiplier=1.12;isRanked=!0;incompatibles=ModBitwise.HalfTime|ModBitwise.Nightcore;applyToDifficulty(A){A.clockRate=1.5}}class Easy{name="Easy";acronym="EZ";bitwise=ModBitwise.Easy;type=ModType.DifficultyReduction;multiplier=.5;isRanked=!0;incompatibles=ModBitwise.HardRock;applyToDifficulty(A){A.circleSize=Math.fround(A.circleSize*.5),A.approachRate=Math.fround(A.approachRate*.5),A.drainRate=Math.fround(A.drainRate*.5),A.overallDifficulty=Math.fround(A.overallDifficulty*.5)}}let Flashlight$1=class{name="Flashlight";acronym="FL";bitwise=ModBitwise.Flashlight;type=ModType.DifficultyIncrease;multiplier=1.12;isRanked=!0;incompatibles=ModBitwise.None};class HalfTime{name="Half Time";acronym="HT";bitwise=ModBitwise.HalfTime;type=ModType.DifficultyReduction;multiplier=.3;isRanked=!0;incompatibles=ModBitwise.DoubleTime|ModBitwise.Nightcore;applyToDifficulty(A){A.clockRate=.75}}class HardRock{name="Hard Rock";acronym="HR";bitwise=ModBitwise.HardRock;type=ModType.DifficultyIncrease;multiplier=1.06;isRanked=!0;incompatibles=ModBitwise.Easy;applyToDifficulty(A){const _=Math.fround(1.4),I=Math.fround(A.circleSize*Math.fround(1.3)),B=Math.fround(A.approachRate*_),T=Math.fround(A.drainRate*_),R=Math.fround(A.overallDifficulty*_);A.circleSize=Math.min(I,10),A.approachRate=Math.min(B,10),A.drainRate=Math.min(T,10),A.overallDifficulty=Math.min(R,10)}}class Hidden{name="Hidden";acronym="HD";bitwise=ModBitwise.Hidden;type=ModType.DifficultyIncrease;multiplier=1.06;isRanked=!0;incompatibles=ModBitwise.None}class Nightcore extends DoubleTime{name="Nightcore";acronym="NC";bitwise=ModBitwise.Nightcore;incompatibles=ModBitwise.HalfTime|ModBitwise.DoubleTime}class NoFail{name="No Fail";acronym="NF";bitwise=ModBitwise.NoFail;type=ModType.DifficultyReduction;multiplier=.5;isRanked=!0;incompatibles=ModBitwise.SuddenDeath|ModBitwise.Perfect|ModBitwise.Autoplay|ModBitwise.Cinema|ModBitwise.Relax|ModBitwise.Relax2}class NoMod{name="No Mod";acronym="NM";bitwise=ModBitwise.None;type=ModType.System;multiplier=1;isRanked=!0;incompatibles=ModBitwise.None}class Perfect{name="Perfect";acronym="PF";bitwise=ModBitwise.Perfect;type=ModType.DifficultyIncrease;multiplier=1;isRanked=!0;incompatibles=ModBitwise.NoFail|ModBitwise.SuddenDeath|ModBitwise.Autoplay|ModBitwise.Cinema|ModBitwise.Relax|ModBitwise.Relax2}class Relax{name="Relax";acronym="RX";bitwise=ModBitwise.Relax;type=ModType.Automation;multiplier=1;isRanked=!1;incompatibles=ModBitwise.NoFail|ModBitwise.SuddenDeath|ModBitwise.Perfect|ModBitwise.Autoplay|ModBitwise.Cinema|ModBitwise.Relax2}class SuddenDeath{name="Sudden Death";acronym="SD";bitwise=ModBitwise.SuddenDeath;type=ModType.DifficultyIncrease;multiplier=1;isRanked=!0;incompatibles=ModBitwise.NoFail|ModBitwise.Perfect|ModBitwise.Autoplay|ModBitwise.Cinema|ModBitwise.Relax|ModBitwise.Relax2}class ModCombination{_mods=[];constructor(A){const _=this._availableMods;if(typeof A=="number"||typeof A=="string"){let I=this.toBitwise(A),B=1<<30;for(;B>0;){const T=_.find(R=>R.bitwise&I&B);T&&!(this.bitwise&T.incompatibles)&&this._mods.push(T),I&=~B,B>>=1}}if(!this._mods.length){const I=_.find(B=>B.bitwise===0);I&&this._mods.push(I)}this._mods.sort((I,B)=>I.bitwise-B.bitwise)}get all(){return this._mods}get beatmapMods(){return this.all.filter(_=>_.applyToBeatmap)}get hitObjectMods(){return this.all.filter(_=>_.applyToHitObjects)}get difficultyMods(){return this.all.filter(_=>_.applyToDifficulty)}get converterMods(){return this.all.filter(_=>_.applyToConverter)}get names(){return this.all.map(A=>A.name)}get acronyms(){return this.all.map(A=>A.acronym)}get bitwise(){return this.all.reduce((A,_)=>(A|=_.bitwise,_.bitwise===ModBitwise.Nightcore&&(A|=ModBitwise.DoubleTime),_.bitwise===ModBitwise.Perfect&&(A|=ModBitwise.SuddenDeath),A),0)}get multiplier(){return this.all.reduce((A,_)=>A*_.multiplier,1)}get isRanked(){return this.all.reduce((A,_)=>A&&_.isRanked,!0)}get incompatibles(){return this.all.reduce((A,_)=>A|_.incompatibles,0)}has(A){const _=this.toBitwise(A);return(this.bitwise&_)===_||this.bitwise===_}any(A){return this._mods.some(_=>_ instanceof A)}beatmapModsAt(A){const _=this.toBitwise(A);return this.all.filter(B=>B.bitwise&_&&B.applyToBeatmap)}beatmapModAt(A){const _=this.toBitwise(A);return this.beatmapModsAt(_)[0]||null}hitObjectModsAt(A){const _=this.toBitwise(A);return this.all.filter(B=>B.bitwise&_&&B.applyToHitObjects)}hitObjectModAt(A){const _=this.toBitwise(A);return this.hitObjectModsAt(_)[0]||null}difficultyModsAt(A){const _=this.toBitwise(A);return this.all.filter(B=>B.bitwise&_&&B.applyToDifficulty)}difficultyModAt(A){const _=this.toBitwise(A);return this.difficultyModsAt(_)[0]||null}converterModsAt(A){const _=this.toBitwise(A);return this.all.filter(B=>B.bitwise&_&&B.applyToConverter)}converterModAt(A){const _=this.toBitwise(A);return this.converterModsAt(_)[0]||null}modsAt(A){const _=this.toBitwise(A);return this.all.filter(I=>I.bitwise&_)}modAt(A){const _=this.toBitwise(A);return this.modsAt(_)[0]||null}toString(){return this.acronyms.join("")}toJSON(){return this.toString()}toBitwise(A){return typeof A=="number"?Math.max(0,A):typeof A!="string"||!A||A.length%2?0:(A.match(/.{1,2}/g)?.map(I=>I.toUpperCase())??[]).reduce((I,B)=>{const T=this._availableMods.find(R=>R.acronym===B);return I|(T?.bitwise??0)},0)}clone(){const A=this.constructor;return new A(this.bitwise)}equals(A){return this.bitwise===A.bitwise&&this.mode===A.mode}get _availableMods(){return[]}}let ReplayButtonState;(function(E){E[E.None=0]="None",E[E.Left1=1]="Left1",E[E.Right1=2]="Right1",E[E.Left2=4]="Left2",E[E.Right2=8]="Right2",E[E.Smoke=16]="Smoke"})(ReplayButtonState||(ReplayButtonState={}));class ReplayFrame{startTime;interval;constructor(A,_){this.startTime=A??0,this.interval=_??0}clone(){const A=this.constructor,_=new A;return _.startTime=this.startTime,_.interval=this.interval,_}}class LegacyReplayFrame extends ReplayFrame{buttonState;position;constructor(A,_,I,B){super(A,_),this.position=I??new Vector2(0,0),this.buttonState=B??ReplayButtonState.None}get mouseX(){return this.position.x}get mouseY(){return this.position.y}get mousePosition(){return new Vector2(this.mouseX??0,this.mouseY??0)}get mouseLeft(){return this.mouseLeft1||this.mouseLeft2}get mouseRight(){return this.mouseRight1||this.mouseRight2}get mouseLeft1(){return(this.buttonState&ReplayButtonState.Left1)>0}get mouseRight1(){return(this.buttonState&ReplayButtonState.Right1)>0}get mouseLeft2(){return(this.buttonState&ReplayButtonState.Left2)>0}get mouseRight2(){return(this.buttonState&ReplayButtonState.Right2)>0}get smoke(){return(this.buttonState&ReplayButtonState.Smoke)>0}clone(){const A=super.clone();return A.buttonState=this.buttonState,A.position=this.position.clone(),A}}class LifeBarFrame{startTime;health;constructor(A,_){this.startTime=A??0,this.health=_??0}clone(){const A=this.constructor,_=new A;return _.startTime=this.startTime,_.health=this.health,_}}let Replay$1=class{gameVersion=0;mode=0;hashMD5="";frames=[];lifeBar=[];get length(){if(!this.frames?.length)return 0;const A=this.frames[0].startTime;return this.frames[this.frames.length-1].startTime-A}clone(){const A=this.constructor,_=new A;return _.gameVersion=this.gameVersion,_.mode=this.mode,_.hashMD5=this.hashMD5,_.frames=this.frames.map(I=>I.clone()),_}equals(A){return this.hashMD5===A.hashMD5}};class ReplayConverter{convertReplay(A,_){const I=this.createReplay();I.gameVersion=A.gameVersion,I.mode=A.mode,I.hashMD5=A.hashMD5,I.lifeBar=A.lifeBar;for(const B of this.convertFrames(A.frames,_))I.frames.push(B);return I}createReplay(){return new Replay$1}*convertFrames(A,_){let I=null;for(const B of A){const T=this._convertFrame(B,I,_);yield T,I=T}}_convertFrame(A,_,I){if(this._isConvertedReplayFrame(A))return A;const B=this._createConvertibleReplayFrame();if(B&&A instanceof LegacyReplayFrame)return B.fromLegacy(A,_,I);throw new Error("Replay can not be converted to this ruleset!")}}class Ruleset{applyToBeatmap(A){const _=A.mods,I=_?_.bitwise:0,B=this.createModCombination(I);return this.applyToBeatmapWithMods(A,B)}applyToBeatmapWithMods(A,_){_||(_=this.createModCombination(0)),this.id!==_.mode&&(_=this.createModCombination(_.bitwise));const I=this._createBeatmapConverter();if(A.hitObjects.length>0&&!I.canConvert(A))throw new Error("Beatmap can not be converted to this ruleset!");_.converterMods.forEach(R=>R.applyToConverter(I));const B=I.convertBeatmap(A);B.mods=_,_.difficultyMods.forEach(R=>{R.applyToDifficulty(B.difficulty)});const T=this._createBeatmapProcessor();return T.preProcess(B),B.hitObjects.forEach(R=>{R.applyDefaults(B.controlPoints,B.difficulty)}),_.hitObjectMods.forEach(R=>{R.applyToHitObjects(B.hitObjects)}),T.postProcess(B),_.beatmapMods.forEach(R=>R.applyToBeatmap(B)),B}applyToReplay(A,_){if(_&&A.mode!==_.mode)throw new Error("Replay and beatmap mode does not match!");return this._createReplayConverter().convertReplay(A,_)}resetMods(A){const _=this.createModCombination(0);return this.applyToBeatmapWithMods(A,_)}}let ScoreRank;(function(E){E[E.F=-1]="F",E[E.D=0]="D",E[E.C=1]="C",E[E.B=2]="B",E[E.A=3]="A",E[E.S=4]="S",E[E.SH=5]="SH",E[E.X=6]="X",E[E.XH=7]="XH"})(ScoreRank||(ScoreRank={}));class HitStatistics extends Map{get(A){return super.has(A)||super.set(A,0),super.get(A)}toJSON(){const A={};return this.forEach((_,I)=>{A[HitStatistics._getJsonableKeyFromHitResult(I)]=_}),A}static fromJSON(A){const _=new HitStatistics;return Object.entries(A).forEach(B=>{const T=B[0],R=B[1];_.set(this._getHitResultFromJsonableKey(T),R)}),_}static _getJsonableKeyFromHitResult(A){switch(A){case HitResult.None:return"none";case HitResult.Miss:return"miss";case HitResult.Meh:return"meh";case HitResult.Ok:return"ok";case HitResult.Good:return"good";case HitResult.Great:return"great";case HitResult.Perfect:return"perfect";case HitResult.SmallTickMiss:return"smallTickMiss";case HitResult.SmallTickHit:return"smallTickHit";case HitResult.LargeTickMiss:return"largeTickMiss";case HitResult.LargeTickHit:return"largeTickHit";case HitResult.SmallBonus:return"smallBonus";case HitResult.LargeBonus:return"largeBonus";case HitResult.IgnoreMiss:return"ignoreMiss";case HitResult.IgnoreHit:return"ignoreHit"}}static _getHitResultFromJsonableKey(A){switch(A){case"none":return HitResult.None;case"miss":return HitResult.Miss;case"meh":return HitResult.Meh;case"ok":return HitResult.Ok;case"good":return HitResult.Good;case"great":return HitResult.Great;case"perfect":return HitResult.Perfect;case"smallTickMiss":return HitResult.SmallTickMiss;case"smallTickHit":return HitResult.SmallTickHit;case"largeTickMiss":return HitResult.LargeTickMiss;case"largeTickHit":return HitResult.LargeTickHit;case"smallBonus":return HitResult.SmallBonus;case"largeBonus":return HitResult.LargeBonus;case"ignoreMiss":return HitResult.IgnoreMiss;case"ignoreHit":return HitResult.IgnoreHit}}}class LegacyScoreExtensions{statistics=new HitStatistics;_legacyCountGeki=0;_legacyCountKatu=0;get countGeki(){return this.rulesetId===3?this.statistics.has(HitResult.Perfect)?this.statistics.get(HitResult.Perfect):this._legacyCountGeki:this._legacyCountGeki}set countGeki(A){this.statistics&&(this.rulesetId===3&&this.statistics.set(HitResult.Perfect,A),this._legacyCountGeki=A)}get count300(){return this.statistics.get(HitResult.Great)}set count300(A){this.statistics&&this.statistics.set(HitResult.Great,A)}get countKatu(){return this.rulesetId===2?this.statistics.has(HitResult.SmallTickMiss)?this.statistics.get(HitResult.SmallTickMiss):this._legacyCountKatu:this.rulesetId===3?this.statistics.has(HitResult.Good)?this.statistics.get(HitResult.Good):this._legacyCountKatu:this._legacyCountKatu}set countKatu(A){this.statistics&&(this.rulesetId===2&&this.statistics.set(HitResult.SmallTickMiss,A),this.rulesetId===3&&this.statistics.set(HitResult.Good,A),this._legacyCountKatu=A)}get count100(){return this.rulesetId===2?this.statistics.get(HitResult.LargeTickHit):this.statistics.get(HitResult.Ok)}set count100(A){this.statistics&&(this.rulesetId===2&&this.statistics.set(HitResult.LargeTickHit,A),this.statistics.set(HitResult.Ok,A))}get count50(){return this.rulesetId===2?this.statistics.get(HitResult.SmallTickHit):this.statistics.get(HitResult.Meh)}set count50(A){this.statistics&&(this.rulesetId===2&&this.statistics.set(HitResult.SmallTickHit,A),this.statistics.set(HitResult.Meh,A))}get countMiss(){return this.statistics.get(HitResult.Miss)}set countMiss(A){this.statistics&&this.statistics.set(HitResult.Miss,A)}get totalHits(){const A=this.countGeki,_=this.countKatu,I=this.count300,B=this.count100,T=this.count50,R=this.countMiss;switch(this.rulesetId){case 0:return I+B+T+R;case 1:return I+B+T+R;case 2:return I+_+B+T+R;case 3:return A+I+_+B+T+R}return A+I+_+B+T+R}}function calculate$1(E){const A=E.countGeki,_=E.countKatu,I=E.count300,B=E.count100,T=E.count50,R=E.totalHits;if(R<=0)return 1;switch(E.rulesetId){case 0:return clamp01((T/6+B/3+I)/R);case 1:return clamp01((B/2+I)/R);case 2:return clamp01((T+B+I)/R);case 3:return clamp01((T/6+B/3+_/1.5+(I+A))/R)}return 1}function calculate(E){if(!E.passed)return"F";switch(E.rulesetId){case 0:return calculateOsuRank(E);case 1:return calculateTaikoRank(E);case 2:return calculateCatchRank(E);case 3:return calculateManiaRank(E)}return"F"}function calculateOsuRank(E){const{count300:A,count50:_,countMiss:I,totalHits:B}=E,T=Math.fround(A/B),R=Math.fround(_/B);return T===1?shouldBeSilverRank(E)?"XH":"X":T>.9&&R<=.01&&I===0?shouldBeSilverRank(E)?"SH":"S":T>.8&&I===0||T>.9?"A":T>.7&&I===0||T>.8?"B":T>.6?"C":"D"}function calculateTaikoRank(E){const{count300:A,count50:_,countMiss:I,totalHits:B}=E,T=Math.fround(A/B),R=Math.fround(_/B);return T===1?shouldBeSilverRank(E)?"XH":"X":T>.9&&R<=.01&&I===0?shouldBeSilverRank(E)?"SH":"S":T>.8&&I===0||T>.9?"A":T>.7&&I===0||T>.8?"B":T>.6?"C":"D"}function calculateCatchRank(E){const A=E.accuracy;return A===1?shouldBeSilverRank(E)?"XH":"X":A>.98?shouldBeSilverRank(E)?"SH":"S":A>.94?"A":A>.9?"B":A>.85?"C":"D"}function calculateManiaRank(E){const A=E.accuracy;return A===1?shouldBeSilverRank(E)?"XH":"X":A>.95?shouldBeSilverRank(E)?"SH":"S":A>.9?"A":A>.8?"B":A>.7?"C":"D"}function shouldBeSilverRank(E){if(E.mods)return E.mods.has("HD")||E.mods.has("FL");if(typeof E.rawMods=="number"){const A=(E.rawMods&ModBitwise.Hidden)>0,_=(E.rawMods&ModBitwise.Flashlight)>0;return A||_}if(typeof E.rawMods=="string"){const A=E.rawMods.match(/.{1,2}/g)?.map(_=>_.toUpperCase())??[];return A.includes("HD")||A.includes("FL")}return!1}class ScoreInfo extends LegacyScoreExtensions{id=0;totalScore=0;totalPerformance=null;maxCombo=0;passed=!1;perfect=!1;_ruleset=null;_rulesetId=0;_mods=null;_rawMods=0;get accuracy(){return calculate$1(this)}set accuracy(A){}get rank(){return calculate(this)}set rank(A){this.passed=A!=="F"}get ruleset(){return this._ruleset}set ruleset(A){this._ruleset=A,this._mods=this.ruleset?.createModCombination(this.rawMods)??null}get rulesetId(){return this.ruleset?.id??this._rulesetId}set rulesetId(A){this._rulesetId=A}get mods(){return this._mods}set mods(A){this._mods=A,this._rawMods=A?.bitwise??0}get rawMods(){return this._rawMods}set rawMods(A){this._rawMods!==A&&(this._rawMods=A,this._mods=this.ruleset?.createModCombination(A)??null)}username="";userId=0;beatmap=null;beatmapId=0;date=new Date;beatmapHashMD5="";constructor(A={}){super(),Object.assign(this,A)}clone(){const A=this.constructor,_=new A;return Object.assign(_,this),_.statistics=new HitStatistics(this.statistics),_}equals(A){return A&&this.id!==0&&A.id!==0?this.id===A.id:!1}toJSON(){const A={},_=["beatmap","ruleset","rawMods","mods"];for(const I in this)I.startsWith("_")||_.includes(I)||(A[I]=this[I]);return{...A,statistics:this.statistics.toJSON(),beatmap:this.beatmap?.toJSON()??null,mods:this.mods?.toString()??"NM",date:this.date.getTime()/1e3,accuracy:this.accuracy,rank:this.rank,rulesetId:this.rulesetId,countGeki:this.countGeki,count300:this.count300,countKatu:this.countKatu,count100:this.count100,count50:this.count50,countMiss:this.countMiss,totalHits:this.totalHits}}static fromJSON(A){return new ScoreInfo({...A,rawMods:A.mods,beatmap:A.beatmap?BeatmapInfo.fromJSON(A.beatmap):null,statistics:HitStatistics.fromJSON(A.statistics),date:new Date(A.date*1e3)})}}class Score{info=new ScoreInfo;replay=null;constructor(A,_){A&&(this.info=A),_&&(this.replay=_)}clone(){const A=this.constructor,_=new A;return _.info=this.info.clone(),_.replay=this.replay?.clone()??null,_}equals(A){if(!A)return!1;const _=this.info.equals(A.info);return this.replay===null&&A.replay===null?_:this.replay!==null&&A.replay!==null?_&&this.replay.equals(A.replay):!1}}let CountryCode;(function(E){E[E.Unknown=0]="Unknown",E[E.BD=1]="BD",E[E.BE=2]="BE",E[E.BF=3]="BF",E[E.BG=4]="BG",E[E.BA=5]="BA",E[E.BB=6]="BB",E[E.WF=7]="WF",E[E.BL=8]="BL",E[E.BM=9]="BM",E[E.BN=10]="BN",E[E.BO=11]="BO",E[E.BH=12]="BH",E[E.BI=13]="BI",E[E.BJ=14]="BJ",E[E.BT=15]="BT",E[E.JM=16]="JM",E[E.BV=17]="BV",E[E.BW=18]="BW",E[E.WS=19]="WS",E[E.BQ=20]="BQ",E[E.BR=21]="BR",E[E.BS=22]="BS",E[E.JE=23]="JE",E[E.BY=24]="BY",E[E.BZ=25]="BZ",E[E.RU=26]="RU",E[E.RW=27]="RW",E[E.RS=28]="RS",E[E.TL=29]="TL",E[E.RE=30]="RE",E[E.TM=31]="TM",E[E.TJ=32]="TJ",E[E.RO=33]="RO",E[E.TK=34]="TK",E[E.GW=35]="GW",E[E.GU=36]="GU",E[E.GT=37]="GT",E[E.GS=38]="GS",E[E.GR=39]="GR",E[E.GQ=40]="GQ",E[E.GP=41]="GP",E[E.JP=42]="JP",E[E.GY=43]="GY",E[E.GG=44]="GG",E[E.GF=45]="GF",E[E.GE=46]="GE",E[E.GD=47]="GD",E[E.GB=48]="GB",E[E.GA=49]="GA",E[E.SV=50]="SV",E[E.GN=51]="GN",E[E.GM=52]="GM",E[E.GL=53]="GL",E[E.GI=54]="GI",E[E.GH=55]="GH",E[E.OM=56]="OM",E[E.TN=57]="TN",E[E.JO=58]="JO",E[E.HR=59]="HR",E[E.HT=60]="HT",E[E.HU=61]="HU",E[E.HK=62]="HK",E[E.HN=63]="HN",E[E.HM=64]="HM",E[E.VE=65]="VE",E[E.PR=66]="PR",E[E.PS=67]="PS",E[E.PW=68]="PW",E[E.PT=69]="PT",E[E.SJ=70]="SJ",E[E.PY=71]="PY",E[E.IQ=72]="IQ",E[E.PA=73]="PA",E[E.PF=74]="PF",E[E.PG=75]="PG",E[E.PE=76]="PE",E[E.PK=77]="PK",E[E.PH=78]="PH",E[E.PN=79]="PN",E[E.PL=80]="PL",E[E.PM=81]="PM",E[E.ZM=82]="ZM",E[E.EH=83]="EH",E[E.EE=84]="EE",E[E.EG=85]="EG",E[E.ZA=86]="ZA",E[E.EC=87]="EC",E[E.IT=88]="IT",E[E.VN=89]="VN",E[E.SB=90]="SB",E[E.ET=91]="ET",E[E.SO=92]="SO",E[E.ZW=93]="ZW",E[E.SA=94]="SA",E[E.ES=95]="ES",E[E.ER=96]="ER",E[E.ME=97]="ME",E[E.MD=98]="MD",E[E.MG=99]="MG",E[E.MF=100]="MF",E[E.MA=101]="MA",E[E.MC=102]="MC",E[E.UZ=103]="UZ",E[E.MM=104]="MM",E[E.ML=105]="ML",E[E.MO=106]="MO",E[E.MN=107]="MN",E[E.MH=108]="MH",E[E.MK=109]="MK",E[E.MU=110]="MU",E[E.MT=111]="MT",E[E.MW=112]="MW",E[E.MV=113]="MV",E[E.MQ=114]="MQ",E[E.MP=115]="MP",E[E.MS=116]="MS",E[E.MR=117]="MR",E[E.IM=118]="IM",E[E.UG=119]="UG",E[E.TZ=120]="TZ",E[E.MY=121]="MY",E[E.MX=122]="MX",E[E.IL=123]="IL",E[E.FR=124]="FR",E[E.IO=125]="IO",E[E.SH=126]="SH",E[E.FI=127]="FI",E[E.FJ=128]="FJ",E[E.FK=129]="FK",E[E.FM=130]="FM",E[E.FO=131]="FO",E[E.NI=132]="NI",E[E.NL=133]="NL",E[E.NO=134]="NO",E[E.NA=135]="NA",E[E.VU=136]="VU",E[E.NC=137]="NC",E[E.NE=138]="NE",E[E.NF=139]="NF",E[E.NG=140]="NG",E[E.NZ=141]="NZ",E[E.NP=142]="NP",E[E.NR=143]="NR",E[E.NU=144]="NU",E[E.CK=145]="CK",E[E.XK=146]="XK",E[E.CI=147]="CI",E[E.CH=148]="CH",E[E.CO=149]="CO",E[E.CN=150]="CN",E[E.CM=151]="CM",E[E.CL=152]="CL",E[E.CC=153]="CC",E[E.CA=154]="CA",E[E.CG=155]="CG",E[E.CF=156]="CF",E[E.CD=157]="CD",E[E.CZ=158]="CZ",E[E.CY=159]="CY",E[E.CX=160]="CX",E[E.CR=161]="CR",E[E.CW=162]="CW",E[E.CV=163]="CV",E[E.CU=164]="CU",E[E.SZ=165]="SZ",E[E.SY=166]="SY",E[E.SX=167]="SX",E[E.KG=168]="KG",E[E.KE=169]="KE",E[E.SS=170]="SS",E[E.SR=171]="SR",E[E.KI=172]="KI",E[E.KH=173]="KH",E[E.KN=174]="KN",E[E.KM=175]="KM",E[E.ST=176]="ST",E[E.SK=177]="SK",E[E.KR=178]="KR",E[E.SI=179]="SI",E[E.KP=180]="KP",E[E.KW=181]="KW",E[E.SN=182]="SN",E[E.SM=183]="SM",E[E.SL=184]="SL",E[E.SC=185]="SC",E[E.KZ=186]="KZ",E[E.KY=187]="KY",E[E.SG=188]="SG",E[E.SE=189]="SE",E[E.SD=190]="SD",E[E.DO=191]="DO",E[E.DM=192]="DM",E[E.DJ=193]="DJ",E[E.DK=194]="DK",E[E.VG=195]="VG",E[E.DE=196]="DE",E[E.YE=197]="YE",E[E.DZ=198]="DZ",E[E.US=199]="US",E[E.UY=200]="UY",E[E.YT=201]="YT",E[E.UM=202]="UM",E[E.LB=203]="LB",E[E.LC=204]="LC",E[E.LA=205]="LA",E[E.TV=206]="TV",E[E.TW=207]="TW",E[E.TT=208]="TT",E[E.TR=209]="TR",E[E.LK=210]="LK",E[E.LI=211]="LI",E[E.LV=212]="LV",E[E.TO=213]="TO",E[E.LT=214]="LT",E[E.LU=215]="LU",E[E.LR=216]="LR",E[E.LS=217]="LS",E[E.TH=218]="TH",E[E.TF=219]="TF",E[E.TG=220]="TG",E[E.TD=221]="TD",E[E.TC=222]="TC",E[E.LY=223]="LY",E[E.VA=224]="VA",E[E.VC=225]="VC",E[E.AE=226]="AE",E[E.AD=227]="AD",E[E.AG=228]="AG",E[E.AF=229]="AF",E[E.AI=230]="AI",E[E.VI=231]="VI",E[E.IS=232]="IS",E[E.IR=233]="IR",E[E.AM=234]="AM",E[E.AL=235]="AL",E[E.AO=236]="AO",E[E.AQ=237]="AQ",E[E.AS=238]="AS",E[E.AR=239]="AR",E[E.AU=240]="AU",E[E.AT=241]="AT",E[E.AW=242]="AW",E[E.IN=243]="IN",E[E.AX=244]="AX",E[E.AZ=245]="AZ",E[E.IE=246]="IE",E[E.ID=247]="ID",E[E.UA=248]="UA",E[E.QA=249]="QA",E[E.MZ=250]="MZ"})(CountryCode||(CountryCode={}));var LZMA$1=(function(){var E=1,A=2,_=3,I=typeof setImmediate=="function"?setImmediate:setTimeout,B=4294967296,T=[4294967295,-B],R=[0,-9223372036854776e3],P=[0,0],D=[1,0];function F(me,ht){postMessage({action:_,cbn:ht,result:me})}function L(me){var ht=[];return ht[me-1]=void 0,ht}function U(me,ht){return J(me[0]+ht[0],me[1]+ht[1])}function V(me,ht){return ce(~~Math.max(Math.min(me[1]/B,2147483647),-2147483648)&~~Math.max(Math.min(ht[1]/B,2147483647),-2147483648),ne(me)&ne(ht))}function K(me,ht){var wt,Pt;return me[0]==ht[0]&&me[1]==ht[1]?0:(wt=me[1]<0,Pt=ht[1]<0,wt&&!Pt?-1:!wt&&Pt?1:ye(me,ht)[1]<0?-1:1)}function J(me,ht){var wt,Pt;for(ht%=18446744073709552e3,me%=18446744073709552e3,wt=ht%B,Pt=Math.floor(me/B)*B,ht=ht-wt+Pt,me=me-Pt+wt;me<0;)me+=B,ht-=B;for(;me>4294967295;)me-=B,ht+=B;for(ht=ht%18446744073709552e3;ht>9223372032559809e3;)ht-=18446744073709552e3;for(;ht<-9223372036854776e3;)ht+=18446744073709552e3;return[me,ht]}function ee(me,ht){return me[0]==ht[0]&&me[1]==ht[1]}function ie(me){return me>=0?[me,0]:[me+B,-B]}function ne(me){return me[0]>=2147483648?~~Math.max(Math.min(me[0]-B,2147483647),-2147483648):~~Math.max(Math.min(me[0],2147483647),-2147483648)}function ce(me,ht){var wt,Pt;return wt=me*B,Pt=ht,ht<0&&(Pt+=B),[Pt,wt]}function fe(me){return me<=30?1<<me:fe(30)*fe(me-30)}function de(me,ht){var wt,Pt,Gt,at;if(ht&=63,ee(me,R))return ht?P:me;if(me[1]<0)throw new Error("Neg");return at=fe(ht),Pt=me[1]*at%18446744073709552e3,Gt=me[0]*at,wt=Gt-Gt%B,Pt+=wt,Gt-=wt,Pt>=9223372036854776e3&&(Pt-=18446744073709552e3),[Gt,Pt]}function pe(me,ht){var wt;return ht&=63,wt=fe(ht),J(Math.floor(me[0]/wt),me[1]/wt)}function ve(me,ht){var wt;return ht&=63,wt=pe(me,ht),me[1]<0&&(wt=U(wt,de([2,0],63-ht))),wt}function ye(me,ht){return J(me[0]-ht[0],me[1]-ht[1])}function _e(me,ht){return me.buf=ht,me.pos=0,me.count=ht.length,me}function be(me){return me.pos>=me.count?-1:me.buf[me.pos++]&255}function Te(me,ht,wt,Pt){return me.pos>=me.count?-1:(Pt=Math.min(Pt,me.count-me.pos),oe(me.buf,me.pos,ht,wt,Pt),me.pos+=Pt,Pt)}function ue(me){return me.buf=L(32),me.count=0,me}function O(me){var ht=me.buf;return ht.length=me.count,ht}function z(me,ht){me.buf[me.count++]=ht<<24>>24}function Y(me,ht,wt,Pt){oe(ht,wt,me.buf,me.count,Pt),me.count+=Pt}function te(me,ht,wt,Pt,Gt){var at;for(at=ht;at<wt;++at)Pt[Gt++]=me.charCodeAt(at)}function oe(me,ht,wt,Pt,Gt){for(var at=0;at<Gt;++at)wt[Pt+at]=me[ht+at]}function le(me,ht){_r(ht,1<<me.s),ht._numFastBytes=me.f,or(ht,me.m),ht._numLiteralPosStateBits=0,ht._numLiteralContextBits=3,ht._posStateBits=2,ht._posStateMask=3}function he(me,ht,wt,Pt,Gt){var at,Ft;if(K(Pt,T)<0)throw new Error("invalid length "+Pt);for(me.length_0=Pt,at=Qe({}),le(Gt,at),at._writeEndMark=typeof LZMA$1.disableEndMark>"u",gr(at,wt),Ft=0;Ft<64;Ft+=8)z(wt,ne(pe(Pt,Ft))&255);me.chunker=(at._needReleaseMFStream=0,at._inStream=ht,at._finished=0,bt(at),at._rangeEncoder.Stream=wt,Ot(at),Pe(at),Re(at),at._lenEncoder._tableSize=at._numFastBytes+1-2,zt(at._lenEncoder,1<<at._posStateBits),at._repMatchLenEncoder._tableSize=at._numFastBytes+1-2,zt(at._repMatchLenEncoder,1<<at._posStateBits),at.nowPos64=P,Xt({},at))}function ae(me,ht,wt){return me.output=ue({}),he(me,_e({},ht),me.output,ie(ht.length),wt),me}function Q(me,ht,wt){var Pt,Gt="",at,Ft=[],Yt,pr;for(at=0;at<5;++at){if(Yt=be(ht),Yt==-1)throw new Error("truncated input");Ft[at]=Yt<<24>>24}if(Pt=Ze({}),!nt(Pt,Ft))throw new Error("corrupted input");for(at=0;at<64;at+=8){if(Yt=be(ht),Yt==-1)throw new Error("truncated input");Yt=Yt.toString(16),Yt.length==1&&(Yt="0"+Yt),Gt=Yt+""+Gt}/^0+$|^f+$/i.test(Gt)?me.length_0=T:(pr=parseInt(Gt,16),pr>4294967295?me.length_0=T:me.length_0=ie(pr)),me.chunker=Ce(Pt,ht,wt,me.length_0)}function se(me,ht){return me.output=ue({}),Q(me,_e({},ht),me.output),me}function Ae(me,ht,wt,Pt){var Gt;me._keepSizeBefore=ht,me._keepSizeAfter=wt,Gt=ht+wt+Pt,(me._bufferBase==null||me._blockSize!=Gt)&&(me._bufferBase=null,me._blockSize=Gt,me._bufferBase=L(me._blockSize)),me._pointerToLastSafePosition=me._blockSize-wt}function ge(me,ht){return me._bufferBase[me._bufferOffset+me._pos+ht]}function Ee(me,ht,wt,Pt){var Gt,at;for(me._streamEndWasReached&&me._pos+ht+Pt>me._streamPos&&(Pt=me._streamPos-(me._pos+ht)),++wt,at=me._bufferOffset+me._pos+ht,Gt=0;Gt<Pt&&me._bufferBase[at+Gt]==me._bufferBase[at+Gt-wt];++Gt);return Gt}function ke(me){return me._streamPos-me._pos}function Se(me){var ht,wt,Pt;for(Pt=me._bufferOffset+me._pos-me._keepSizeBefore,Pt>0&&--Pt,wt=me._bufferOffset+me._streamPos-Pt,ht=0;ht<wt;++ht)me._bufferBase[ht]=me._bufferBase[Pt+ht];me._bufferOffset-=Pt}function Ie(me){var ht;++me._pos,me._pos>me._posLimit&&(ht=me._bufferOffset+me._pos,ht>me._pointerToLastSafePosition&&Se(me),we(me))}function we(me){var ht,wt,Pt;if(!me._streamEndWasReached)for(;;){if(Pt=-me._bufferOffset+me._blockSize-me._streamPos,!Pt)return;if(ht=Te(me._stream,me._bufferBase,me._bufferOffset+me._streamPos,Pt),ht==-1){me._posLimit=me._streamPos,wt=me._bufferOffset+me._posLimit,wt>me._pointerToLastSafePosition&&(me._posLimit=me._pointerToLastSafePosition-me._bufferOffset),me._streamEndWasReached=1;return}me._streamPos+=ht,me._streamPos>=me._pos+me._keepSizeAfter&&(me._posLimit=me._streamPos-me._keepSizeAfter)}}function xe(me,ht){me._bufferOffset+=ht,me._posLimit-=ht,me._pos-=ht,me._streamPos-=ht}var Fe=(function(){var me,ht,wt,Pt=[];for(me=0;me<256;++me){for(wt=me,ht=0;ht<8;++ht)(wt&1)!=0?wt=wt>>>1^-306674912:wt>>>=1;Pt[me]=wt}return Pt})();function Ge(me,ht,wt,Pt,Gt){var at,Ft,Yt;ht<1073741567&&(me._cutValue=16+(Pt>>1),Yt=~~((ht+wt+Pt+Gt)/2)+256,Ae(me,ht+wt,Pt+Gt,Yt),me._matchMaxLen=Pt,at=ht+1,me._cyclicBufferSize!=at&&(me._son=L((me._cyclicBufferSize=at)*2)),Ft=65536,me.HASH_ARRAY&&(Ft=ht-1,Ft|=Ft>>1,Ft|=Ft>>2,Ft|=Ft>>4,Ft|=Ft>>8,Ft>>=1,Ft|=65535,Ft>16777216&&(Ft>>=1),me._hashMask=Ft,++Ft,Ft+=me.kFixHashSize),Ft!=me._hashSizeSum&&(me._hash=L(me._hashSizeSum=Ft)))}function Oe(me,ht){var wt,Pt,Gt,at,Ft,Yt,pr,Br,Tr,Nr,Dr,Lr,zr,Mr,Qr,Vr,Ur,Xr,Zr,ai,ci;if(me._pos+me._matchMaxLen<=me._streamPos)Mr=me._matchMaxLen;else if(Mr=me._streamPos-me._pos,Mr<me.kMinMatchCheck)return Mt(me),0;for(Ur=0,Qr=me._pos>me._cyclicBufferSize?me._pos-me._cyclicBufferSize:0,Pt=me._bufferOffset+me._pos,Vr=1,Br=0,Tr=0,me.HASH_ARRAY?(ci=Fe[me._bufferBase[Pt]&255]^me._bufferBase[Pt+1]&255,Br=ci&1023,ci^=(me._bufferBase[Pt+2]&255)<<8,Tr=ci&65535,Nr=(ci^Fe[me._bufferBase[Pt+3]&255]<<5)&me._hashMask):Nr=me._bufferBase[Pt]&255^(me._bufferBase[Pt+1]&255)<<8,Gt=me._hash[me.kFixHashSize+Nr]||0,me.HASH_ARRAY&&(at=me._hash[Br]||0,Ft=me._hash[1024+Tr]||0,me._hash[Br]=me._pos,me._hash[1024+Tr]=me._pos,at>Qr&&me._bufferBase[me._bufferOffset+at]==me._bufferBase[Pt]&&(ht[Ur++]=Vr=2,ht[Ur++]=me._pos-at-1),Ft>Qr&&me._bufferBase[me._bufferOffset+Ft]==me._bufferBase[Pt]&&(Ft==at&&(Ur-=2),ht[Ur++]=Vr=3,ht[Ur++]=me._pos-Ft-1,at=Ft),Ur!=0&&at==Gt&&(Ur-=2,Vr=1)),me._hash[me.kFixHashSize+Nr]=me._pos,Zr=(me._cyclicBufferPos<<1)+1,ai=me._cyclicBufferPos<<1,Lr=zr=me.kNumHashDirectBytes,me.kNumHashDirectBytes!=0&&Gt>Qr&&me._bufferBase[me._bufferOffset+Gt+me.kNumHashDirectBytes]!=me._bufferBase[Pt+me.kNumHashDirectBytes]&&(ht[Ur++]=Vr=me.kNumHashDirectBytes,ht[Ur++]=me._pos-Gt-1),wt=me._cutValue;;){if(Gt<=Qr||wt--==0){me._son[Zr]=me._son[ai]=0;break}if(pr=me._pos-Gt,Yt=(pr<=me._cyclicBufferPos?me._cyclicBufferPos-pr:me._cyclicBufferPos-pr+me._cyclicBufferSize)<<1,Xr=me._bufferOffset+Gt,Dr=Lr<zr?Lr:zr,me._bufferBase[Xr+Dr]==me._bufferBase[Pt+Dr]){for(;++Dr!=Mr&&me._bufferBase[Xr+Dr]==me._bufferBase[Pt+Dr];);if(Vr<Dr&&(ht[Ur++]=Vr=Dr,ht[Ur++]=pr-1,Dr==Mr)){me._son[ai]=me._son[Yt],me._son[Zr]=me._son[Yt+1];break}}(me._bufferBase[Xr+Dr]&255)<(me._bufferBase[Pt+Dr]&255)?(me._son[ai]=Gt,ai=Yt+1,Gt=me._son[ai],zr=Dr):(me._son[Zr]=Gt,Zr=Yt,Gt=me._son[Zr],Lr=Dr)}return Mt(me),Ur}function et(me){me._bufferOffset=0,me._pos=0,me._streamPos=0,me._streamEndWasReached=0,we(me),me._cyclicBufferPos=0,xe(me,-1)}function Mt(me){var ht;++me._cyclicBufferPos>=me._cyclicBufferSize&&(me._cyclicBufferPos=0),Ie(me),me._pos==1073741823&&(ht=me._pos-me._cyclicBufferSize,dt(me._son,me._cyclicBufferSize*2,ht),dt(me._hash,me._hashSizeSum,ht),xe(me,ht))}function dt(me,ht,wt){var Pt,Gt;for(Pt=0;Pt<ht;++Pt)Gt=me[Pt]||0,Gt<=wt?Gt=0:Gt-=wt,me[Pt]=Gt}function mt(me,ht){me.HASH_ARRAY=ht>2,me.HASH_ARRAY?(me.kNumHashDirectBytes=0,me.kMinMatchCheck=4,me.kFixHashSize=66560):(me.kNumHashDirectBytes=2,me.kMinMatchCheck=3,me.kFixHashSize=0)}function Ut(me,ht){var wt,Pt,Gt,at,Ft,Yt,pr,Br,Tr,Nr,Dr,Lr,zr,Mr,Qr,Vr,Ur;do{if(me._pos+me._matchMaxLen<=me._streamPos)Lr=me._matchMaxLen;else if(Lr=me._streamPos-me._pos,Lr<me.kMinMatchCheck){Mt(me);continue}for(zr=me._pos>me._cyclicBufferSize?me._pos-me._cyclicBufferSize:0,Pt=me._bufferOffset+me._pos,me.HASH_ARRAY?(Ur=Fe[me._bufferBase[Pt]&255]^me._bufferBase[Pt+1]&255,Yt=Ur&1023,me._hash[Yt]=me._pos,Ur^=(me._bufferBase[Pt+2]&255)<<8,pr=Ur&65535,me._hash[1024+pr]=me._pos,Br=(Ur^Fe[me._bufferBase[Pt+3]&255]<<5)&me._hashMask):Br=me._bufferBase[Pt]&255^(me._bufferBase[Pt+1]&255)<<8,Gt=me._hash[me.kFixHashSize+Br],me._hash[me.kFixHashSize+Br]=me._pos,Qr=(me._cyclicBufferPos<<1)+1,Vr=me._cyclicBufferPos<<1,Nr=Dr=me.kNumHashDirectBytes,wt=me._cutValue;;){if(Gt<=zr||wt--==0){me._son[Qr]=me._son[Vr]=0;break}if(Ft=me._pos-Gt,at=(Ft<=me._cyclicBufferPos?me._cyclicBufferPos-Ft:me._cyclicBufferPos-Ft+me._cyclicBufferSize)<<1,Mr=me._bufferOffset+Gt,Tr=Nr<Dr?Nr:Dr,me._bufferBase[Mr+Tr]==me._bufferBase[Pt+Tr]){for(;++Tr!=Lr&&me._bufferBase[Mr+Tr]==me._bufferBase[Pt+Tr];);if(Tr==Lr){me._son[Vr]=me._son[at],me._son[Qr]=me._son[at+1];break}}(me._bufferBase[Mr+Tr]&255)<(me._bufferBase[Pt+Tr]&255)?(me._son[Vr]=Gt,Vr=at+1,Gt=me._son[Vr],Dr=Tr):(me._son[Qr]=Gt,Qr=at,Gt=me._son[Qr],Nr=Tr)}Mt(me)}while(--ht!=0)}function St(me,ht,wt){var Pt=me._pos-ht-1;for(Pt<0&&(Pt+=me._windowSize);wt!=0;--wt)Pt>=me._windowSize&&(Pt=0),me._buffer[me._pos++]=me._buffer[Pt++],me._pos>=me._windowSize&&It(me)}function vt(me,ht){(me._buffer==null||me._windowSize!=ht)&&(me._buffer=L(ht)),me._windowSize=ht,me._pos=0,me._streamPos=0}function It(me){var ht=me._pos-me._streamPos;ht&&(Y(me._stream,me._buffer,me._streamPos,ht),me._pos>=me._windowSize&&(me._pos=0),me._streamPos=me._pos)}function yt(me,ht){var wt=me._pos-ht-1;return wt<0&&(wt+=me._windowSize),me._buffer[wt]}function Tt(me,ht){me._buffer[me._pos++]=ht,me._pos>=me._windowSize&&It(me)}function Wt(me){It(me),me._stream=null}function ft(me){return me-=2,me<4?me:3}function _t(me){return me<4?0:me<10?me-3:me-6}function Xt(me,ht){return me.encoder=ht,me.decoder=null,me.alive=1,me}function Nt(me,ht){return me.decoder=ht,me.encoder=null,me.alive=1,me}function qt(me){if(!me.alive)throw new Error("bad state");return me.encoder?ze(me):nr(me),me.alive}function nr(me){var ht=Le(me.decoder);if(ht==-1)throw new Error("corrupted input");me.inBytesProcessed=T,me.outBytesProcessed=me.decoder.nowPos64,(ht||K(me.decoder.outSize,P)>=0&&K(me.decoder.nowPos64,me.decoder.outSize)>=0)&&(It(me.decoder.m_OutWindow),Wt(me.decoder.m_OutWindow),me.decoder.m_RangeDecoder.Stream=null,me.alive=0)}function ze(me){st(me.encoder,me.encoder.processedInSize,me.encoder.processedOutSize,me.encoder.finished),me.inBytesProcessed=me.encoder.processedInSize[0],me.encoder.finished[0]&&(ar(me.encoder),me.alive=0)}function Ce(me,ht,wt,Pt){return me.m_RangeDecoder.Stream=ht,Wt(me.m_OutWindow),me.m_OutWindow._stream=wt,Je(me),me.state=0,me.rep0=0,me.rep1=0,me.rep2=0,me.rep3=0,me.outSize=Pt,me.nowPos64=P,me.prevByte=0,Nt({},me)}function Le(me){var ht,wt,Pt,Gt,at,Ft;if(Ft=ne(me.nowPos64)&me.m_PosStateMask,!Xe(me.m_RangeDecoder,me.m_IsMatchDecoders,(me.state<<4)+Ft))ht=qe(me.m_LiteralDecoder,ne(me.nowPos64),me.prevByte),me.state<7?me.prevByte=At(ht,me.m_RangeDecoder):me.prevByte=jt(ht,me.m_RangeDecoder,yt(me.m_OutWindow,me.rep0)),Tt(me.m_OutWindow,me.prevByte),me.state=_t(me.state),me.nowPos64=U(me.nowPos64,D);else{if(Xe(me.m_RangeDecoder,me.m_IsRepDecoders,me.state))Pt=0,Xe(me.m_RangeDecoder,me.m_IsRepG0Decoders,me.state)?(Xe(me.m_RangeDecoder,me.m_IsRepG1Decoders,me.state)?(Xe(me.m_RangeDecoder,me.m_IsRepG2Decoders,me.state)?(wt=me.rep3,me.rep3=me.rep2):wt=me.rep2,me.rep2=me.rep1):wt=me.rep1,me.rep1=me.rep0,me.rep0=wt):Xe(me.m_RangeDecoder,me.m_IsRep0LongDecoders,(me.state<<4)+Ft)||(me.state=me.state<7?9:11,Pt=1),Pt||(Pt=Rt(me.m_RepLenDecoder,me.m_RangeDecoder,Ft)+2,me.state=me.state<7?8:11);else if(me.rep3=me.rep2,me.rep2=me.rep1,me.rep1=me.rep0,Pt=2+Rt(me.m_LenDecoder,me.m_RangeDecoder,Ft),me.state=me.state<7?7:10,at=sr(me.m_PosSlotDecoder[ft(Pt)],me.m_RangeDecoder),at>=4){if(Gt=(at>>1)-1,me.rep0=(2|at&1)<<Gt,at<14)me.rep0+=yr(me.m_PosDecoders,me.rep0-at-1,me.m_RangeDecoder,Gt);else if(me.rep0+=lt(me.m_RangeDecoder,Gt-4)<<4,me.rep0+=cr(me.m_PosAlignDecoder,me.m_RangeDecoder),me.rep0<0)return me.rep0==-1?1:-1}else me.rep0=at;if(K(ie(me.rep0),me.nowPos64)>=0||me.rep0>=me.m_DictionarySizeCheck)return-1;St(me.m_OutWindow,me.rep0,Pt),me.nowPos64=U(me.nowPos64,ie(Pt)),me.prevByte=yt(me.m_OutWindow,0)}return 0}function Ze(me){me.m_OutWindow={},me.m_RangeDecoder={},me.m_IsMatchDecoders=L(192),me.m_IsRepDecoders=L(12),me.m_IsRepG0Decoders=L(12),me.m_IsRepG1Decoders=L(12),me.m_IsRepG2Decoders=L(12),me.m_IsRep0LongDecoders=L(192),me.m_PosSlotDecoder=L(4),me.m_PosDecoders=L(114),me.m_PosAlignDecoder=Et({},4),me.m_LenDecoder=De({}),me.m_RepLenDecoder=De({}),me.m_LiteralDecoder={};for(var ht=0;ht<4;++ht)me.m_PosSlotDecoder[ht]=Et({},6);return me}function Je(me){me.m_OutWindow._streamPos=0,me.m_OutWindow._pos=0,Qt(me.m_IsMatchDecoders),Qt(me.m_IsRep0LongDecoders),Qt(me.m_IsRepDecoders),Qt(me.m_IsRepG0Decoders),Qt(me.m_IsRepG1Decoders),Qt(me.m_IsRepG2Decoders),Qt(me.m_PosDecoders),pt(me.m_LiteralDecoder);for(var ht=0;ht<4;++ht)Qt(me.m_PosSlotDecoder[ht].Models);We(me.m_LenDecoder),We(me.m_RepLenDecoder),Qt(me.m_PosAlignDecoder.Models),Ct(me.m_RangeDecoder)}function nt(me,ht){var wt,Pt,Gt,at,Ft,Yt,pr;if(ht.length<5)return 0;for(pr=ht[0]&255,Gt=pr%9,Yt=~~(pr/9),at=Yt%5,Ft=~~(Yt/5),wt=0,Pt=0;Pt<4;++Pt)wt+=(ht[1+Pt]&255)<<Pt*8;return wt>99999999||!He(me,Gt,at,Ft)?0:rt(me,wt)}function rt(me,ht){return ht<0?0:(me.m_DictionarySize!=ht&&(me.m_DictionarySize=ht,me.m_DictionarySizeCheck=Math.max(me.m_DictionarySize,1),vt(me.m_OutWindow,Math.max(me.m_DictionarySizeCheck,4096))),1)}function He(me,ht,wt,Pt){if(ht>8||wt>4||Pt>4)return 0;Ve(me.m_LiteralDecoder,wt,ht);var Gt=1<<Pt;return Dt(me.m_LenDecoder,Gt),Dt(me.m_RepLenDecoder,Gt),me.m_PosStateMask=Gt-1,1}function Dt(me,ht){for(;me.m_NumPosStates<ht;++me.m_NumPosStates)me.m_LowCoder[me.m_NumPosStates]=Et({},3),me.m_MidCoder[me.m_NumPosStates]=Et({},3)}function Rt(me,ht,wt){if(!Xe(ht,me.m_Choice,0))return sr(me.m_LowCoder[wt],ht);var Pt=8;return Xe(ht,me.m_Choice,1)?Pt+=8+sr(me.m_HighCoder,ht):Pt+=sr(me.m_MidCoder[wt],ht),Pt}function De(me){return me.m_Choice=L(2),me.m_LowCoder=L(16),me.m_MidCoder=L(16),me.m_HighCoder=Et({},8),me.m_NumPosStates=0,me}function We(me){Qt(me.m_Choice);for(var ht=0;ht<me.m_NumPosStates;++ht)Qt(me.m_LowCoder[ht].Models),Qt(me.m_MidCoder[ht].Models);Qt(me.m_HighCoder.Models)}function Ve(me,ht,wt){var Pt,Gt;if(!(me.m_Coders!=null&&me.m_NumPrevBits==wt&&me.m_NumPosBits==ht))for(me.m_NumPosBits=ht,me.m_PosMask=(1<<ht)-1,me.m_NumPrevBits=wt,Gt=1<<me.m_NumPrevBits+me.m_NumPosBits,me.m_Coders=L(Gt),Pt=0;Pt<Gt;++Pt)me.m_Coders[Pt]=rr({})}function qe(me,ht,wt){return me.m_Coders[((ht&me.m_PosMask)<<me.m_NumPrevBits)+((wt&255)>>>8-me.m_NumPrevBits)]}function pt(me){var ht,wt;for(wt=1<<me.m_NumPrevBits+me.m_NumPosBits,ht=0;ht<wt;++ht)Qt(me.m_Coders[ht].m_Decoders)}function At(me,ht){var wt=1;do wt=wt<<1|Xe(ht,me.m_Decoders,wt);while(wt<256);return wt<<24>>24}function jt(me,ht,wt){var Pt,Gt,at=1;do if(Gt=wt>>7&1,wt<<=1,Pt=Xe(ht,me.m_Decoders,(1+Gt<<8)+at),at=at<<1|Pt,Gt!=Pt){for(;at<256;)at=at<<1|Xe(ht,me.m_Decoders,at);break}while(at<256);return at<<24>>24}function rr(me){return me.m_Decoders=L(768),me}var Ke=(function(){var me,ht,wt,Pt=2,Gt=[0,1];for(wt=2;wt<22;++wt)for(ht=1<<(wt>>1)-1,me=0;me<ht;++me,++Pt)Gt[Pt]=wt<<24>>24;return Gt})();function Ne(me,ht){var wt,Pt,Gt,at;me._optimumEndIndex=ht,Gt=me._optimum[ht].PosPrev,Pt=me._optimum[ht].BackPrev;do me._optimum[ht].Prev1IsChar&&(Zt(me._optimum[Gt]),me._optimum[Gt].PosPrev=Gt-1,me._optimum[ht].Prev2&&(me._optimum[Gt-1].Prev1IsChar=0,me._optimum[Gt-1].PosPrev=me._optimum[ht].PosPrev2,me._optimum[Gt-1].BackPrev=me._optimum[ht].BackPrev2)),at=Gt,wt=Pt,Pt=me._optimum[at].BackPrev,Gt=me._optimum[at].PosPrev,me._optimum[at].BackPrev=wt,me._optimum[at].PosPrev=ht,ht=at;while(ht>0);return me.backRes=me._optimum[0].BackPrev,me._optimumCurrentIndex=me._optimum[0].PosPrev,me._optimumCurrentIndex}function Ye(me){me._state=0,me._previousByte=0;for(var ht=0;ht<4;++ht)me._repDistances[ht]=0}function st(me,ht,wt,Pt){var Gt,at,Ft,Yt,pr,Br,Tr,Nr,Dr,Lr,zr,Mr,Qr,Vr,Ur;if(ht[0]=P,wt[0]=P,Pt[0]=1,me._inStream&&(me._matchFinder._stream=me._inStream,et(me._matchFinder),me._needReleaseMFStream=1,me._inStream=null),!me._finished){if(me._finished=1,Vr=me.nowPos64,ee(me.nowPos64,P)){if(!ke(me._matchFinder)){Me(me,ne(me.nowPos64));return}tr(me),Qr=ne(me.nowPos64)&me._posStateMask,er(me._rangeEncoder,me._isMatch,(me._state<<4)+Qr,0),me._state=_t(me._state),Ft=ge(me._matchFinder,-me._additionalOffset),ut(lr(me._literalEncoder,ne(me.nowPos64),me._previousByte),me._rangeEncoder,Ft),me._previousByte=Ft,--me._additionalOffset,me.nowPos64=U(me.nowPos64,D)}if(!ke(me._matchFinder)){Me(me,ne(me.nowPos64));return}for(;;){if(Tr=$e(me,ne(me.nowPos64)),Lr=me.backRes,Qr=ne(me.nowPos64)&me._posStateMask,at=(me._state<<4)+Qr,Tr==1&&Lr==-1)er(me._rangeEncoder,me._isMatch,at,0),Ft=ge(me._matchFinder,-me._additionalOffset),Ur=lr(me._literalEncoder,ne(me.nowPos64),me._previousByte),me._state<7?ut(Ur,me._rangeEncoder,Ft):(Dr=ge(me._matchFinder,-me._repDistances[0]-1-me._additionalOffset),Bt(Ur,me._rangeEncoder,Dr,Ft)),me._previousByte=Ft,me._state=_t(me._state);else{if(er(me._rangeEncoder,me._isMatch,at,1),Lr<4){if(er(me._rangeEncoder,me._isRep,me._state,1),Lr?(er(me._rangeEncoder,me._isRepG0,me._state,1),Lr==1?er(me._rangeEncoder,me._isRepG1,me._state,0):(er(me._rangeEncoder,me._isRepG1,me._state,1),er(me._rangeEncoder,me._isRepG2,me._state,Lr-2))):(er(me._rangeEncoder,me._isRepG0,me._state,0),Tr==1?er(me._rangeEncoder,me._isRep0Long,at,0):er(me._rangeEncoder,me._isRep0Long,at,1)),Tr==1?me._state=me._state<7?9:11:(hr(me._repMatchLenEncoder,me._rangeEncoder,Tr-2,Qr),me._state=me._state<7?8:11),Yt=me._repDistances[Lr],Lr!=0){for(Br=Lr;Br>=1;--Br)me._repDistances[Br]=me._repDistances[Br-1];me._repDistances[0]=Yt}}else{for(er(me._rangeEncoder,me._isRep,me._state,0),me._state=me._state<7?7:10,hr(me._lenEncoder,me._rangeEncoder,Tr-2,Qr),Lr-=4,Mr=vr(Lr),Nr=ft(Tr),ct(me._posSlotEncoder[Nr],me._rangeEncoder,Mr),Mr>=4&&(pr=(Mr>>1)-1,Gt=(2|Mr&1)<<pr,zr=Lr-Gt,Mr<14?gt(me._posEncoders,Gt-Mr-1,me._rangeEncoder,pr,zr):(ir(me._rangeEncoder,zr>>4,pr-4),Ue(me._posAlignEncoder,me._rangeEncoder,zr&15),++me._alignPriceCount)),Yt=Lr,Br=3;Br>=1;--Br)me._repDistances[Br]=me._repDistances[Br-1];me._repDistances[0]=Yt,++me._matchPriceCount}me._previousByte=ge(me._matchFinder,Tr-1-me._additionalOffset)}if(me._additionalOffset-=Tr,me.nowPos64=U(me.nowPos64,ie(Tr)),!me._additionalOffset){if(me._matchPriceCount>=128&&Pe(me),me._alignPriceCount>=16&&Re(me),ht[0]=me.nowPos64,wt[0]=Ir(me._rangeEncoder),!ke(me._matchFinder)){Me(me,ne(me.nowPos64));return}if(K(ye(me.nowPos64,Vr),[4096,0])>=0){me._finished=0,Pt[0]=0;return}}}}}function bt(me){var ht,wt;me._matchFinder||(ht={},wt=4,me._matchFinderType||(wt=2),mt(ht,wt),me._matchFinder=ht),Kt(me._literalEncoder,me._numLiteralPosStateBits,me._numLiteralContextBits),!(me._dictionarySize==me._dictionarySizePrev&&me._numFastBytesPrev==me._numFastBytes)&&(Ge(me._matchFinder,me._dictionarySize,4096,me._numFastBytes,274),me._dictionarySizePrev=me._dictionarySize,me._numFastBytesPrev=me._numFastBytes)}function Qe(me){var ht;for(me._repDistances=L(4),me._optimum=[],me._rangeEncoder={},me._isMatch=L(192),me._isRep=L(12),me._isRepG0=L(12),me._isRepG1=L(12),me._isRepG2=L(12),me._isRep0Long=L(192),me._posSlotEncoder=[],me._posEncoders=L(114),me._posAlignEncoder=Er({},4),me._lenEncoder=Ar({}),me._repMatchLenEncoder=Ar({}),me._literalEncoder={},me._matchDistances=[],me._posSlotPrices=[],me._distancesPrices=[],me._alignPrices=L(16),me.reps=L(4),me.repLens=L(4),me.processedInSize=[P],me.processedOutSize=[P],me.finished=[0],me.properties=L(5),me.tempPrices=L(128),me._longestMatchLength=0,me._matchFinderType=1,me._numDistancePairs=0,me._numFastBytesPrev=-1,me.backRes=0,ht=0;ht<4096;++ht)me._optimum[ht]={};for(ht=0;ht<4;++ht)me._posSlotEncoder[ht]=Er({},6);return me}function Re(me){for(var ht=0;ht<16;++ht)me._alignPrices[ht]=tt(me._posAlignEncoder,ht);me._alignPriceCount=0}function Pe(me){var ht,wt,Pt,Gt,at,Ft,Yt,pr;for(Gt=4;Gt<128;++Gt)Ft=vr(Gt),Pt=(Ft>>1)-1,ht=(2|Ft&1)<<Pt,me.tempPrices[Gt]=je(me._posEncoders,ht-Ft-1,Pt,Gt-ht);for(at=0;at<4;++at){for(wt=me._posSlotEncoder[at],Yt=at<<6,Ft=0;Ft<me._distTableSize;++Ft)me._posSlotPrices[Yt+Ft]=Be(wt,Ft);for(Ft=14;Ft<me._distTableSize;++Ft)me._posSlotPrices[Yt+Ft]+=(Ft>>1)-1-4<<6;for(pr=at*128,Gt=0;Gt<4;++Gt)me._distancesPrices[pr+Gt]=me._posSlotPrices[Yt+Gt];for(;Gt<128;++Gt)me._distancesPrices[pr+Gt]=me._posSlotPrices[Yt+vr(Gt)]+me.tempPrices[Gt]}me._matchPriceCount=0}function Me(me,ht){br(me),xr(me,ht&me._posStateMask);for(var wt=0;wt<5;++wt)Or(me._rangeEncoder)}function $e(me,ht){var wt,Pt,Gt,at,Ft,Yt,pr,Br,Tr,Nr,Dr,Lr,zr,Mr,Qr,Vr,Ur,Xr,Zr,ai,ci,ii,Ai,Si,si,ui,li,ri,fi,Kr,Fr,pi,mi,Jr,ei,$i,oi,_i,gi,di,vi,xi,Gr,Yr,yi,zi,Vi,Wi,Ki,Yi;if(me._optimumEndIndex!=me._optimumCurrentIndex)return zr=me._optimum[me._optimumCurrentIndex].PosPrev-me._optimumCurrentIndex,me.backRes=me._optimum[me._optimumCurrentIndex].BackPrev,me._optimumCurrentIndex=me._optimum[me._optimumCurrentIndex].PosPrev,zr;if(me._optimumCurrentIndex=me._optimumEndIndex=0,me._longestMatchWasFound?(Lr=me._longestMatchLength,me._longestMatchWasFound=0):Lr=tr(me),li=me._numDistancePairs,si=ke(me._matchFinder)+1,si<2)return me.backRes=-1,1;for(si>273&&(si=273),di=0,Tr=0;Tr<4;++Tr)me.reps[Tr]=me._repDistances[Tr],me.repLens[Tr]=Ee(me._matchFinder,-1,me.reps[Tr],273),me.repLens[Tr]>me.repLens[di]&&(di=Tr);if(me.repLens[di]>=me._numFastBytes)return me.backRes=di,zr=me.repLens[di],Jt(me,zr-1),zr;if(Lr>=me._numFastBytes)return me.backRes=me._matchDistances[li-1]+4,Jt(me,Lr-1),Lr;if(pr=ge(me._matchFinder,-1),Ur=ge(me._matchFinder,-me._repDistances[0]-1-1),Lr<2&&pr!=Ur&&me.repLens[di]<2)return me.backRes=-1,1;if(me._optimum[0].State=me._state,Jr=ht&me._posStateMask,me._optimum[1].Price=Ht[me._isMatch[(me._state<<4)+Jr]>>>2]+$t(lr(me._literalEncoder,ht,me._previousByte),me._state>=7,Ur,pr),Zt(me._optimum[1]),Xr=Ht[2048-me._isMatch[(me._state<<4)+Jr]>>>2],gi=Xr+Ht[2048-me._isRep[me._state]>>>2],Ur==pr&&(vi=gi+xt(me,me._state,Jr),vi<me._optimum[1].Price&&(me._optimum[1].Price=vi,Vt(me._optimum[1]))),Dr=Lr>=me.repLens[di]?Lr:me.repLens[di],Dr<2)return me.backRes=me._optimum[1].BackPrev,1;me._optimum[1].PosPrev=0,me._optimum[0].Backs0=me.reps[0],me._optimum[0].Backs1=me.reps[1],me._optimum[0].Backs2=me.reps[2],me._optimum[0].Backs3=me.reps[3],Nr=Dr;do me._optimum[Nr--].Price=268435455;while(Nr>=2);for(Tr=0;Tr<4;++Tr)if(_i=me.repLens[Tr],!(_i<2)){$i=gi+kt(me,Tr,me._state,Jr);do at=$i+ur(me._repMatchLenEncoder,_i-2,Jr),Fr=me._optimum[_i],at<Fr.Price&&(Fr.Price=at,Fr.PosPrev=0,Fr.BackPrev=Tr,Fr.Prev1IsChar=0);while(--_i>=2)}if(Si=Xr+Ht[me._isRep[me._state]>>>2],Nr=me.repLens[0]>=2?me.repLens[0]+1:2,Nr<=Lr){for(ri=0;Nr>me._matchDistances[ri];)ri+=2;for(;Br=me._matchDistances[ri+1],at=Si+it(me,Br,Nr,Jr),Fr=me._optimum[Nr],at<Fr.Price&&(Fr.Price=at,Fr.PosPrev=0,Fr.BackPrev=Br+4,Fr.Prev1IsChar=0),!(Nr==me._matchDistances[ri]&&(ri+=2,ri==li));++Nr);}for(wt=0;;){if(++wt,wt==Dr)return Ne(me,wt);if(Zr=tr(me),li=me._numDistancePairs,Zr>=me._numFastBytes)return me._longestMatchLength=Zr,me._longestMatchWasFound=1,Ne(me,wt);if(++ht,mi=me._optimum[wt].PosPrev,me._optimum[wt].Prev1IsChar?(--mi,me._optimum[wt].Prev2?(Gr=me._optimum[me._optimum[wt].PosPrev2].State,me._optimum[wt].BackPrev2<4?Gr=Gr<7?8:11:Gr=Gr<7?7:10):Gr=me._optimum[mi].State,Gr=_t(Gr)):Gr=me._optimum[mi].State,mi==wt-1?me._optimum[wt].BackPrev?Gr=_t(Gr):Gr=Gr<7?9:11:(me._optimum[wt].Prev1IsChar&&me._optimum[wt].Prev2?(mi=me._optimum[wt].PosPrev2,pi=me._optimum[wt].BackPrev2,Gr=Gr<7?8:11):(pi=me._optimum[wt].BackPrev,pi<4?Gr=Gr<7?8:11:Gr=Gr<7?7:10),Kr=me._optimum[mi],pi<4?pi?pi==1?(me.reps[0]=Kr.Backs1,me.reps[1]=Kr.Backs0,me.reps[2]=Kr.Backs2,me.reps[3]=Kr.Backs3):pi==2?(me.reps[0]=Kr.Backs2,me.reps[1]=Kr.Backs0,me.reps[2]=Kr.Backs1,me.reps[3]=Kr.Backs3):(me.reps[0]=Kr.Backs3,me.reps[1]=Kr.Backs0,me.reps[2]=Kr.Backs1,me.reps[3]=Kr.Backs2):(me.reps[0]=Kr.Backs0,me.reps[1]=Kr.Backs1,me.reps[2]=Kr.Backs2,me.reps[3]=Kr.Backs3):(me.reps[0]=pi-4,me.reps[1]=Kr.Backs0,me.reps[2]=Kr.Backs1,me.reps[3]=Kr.Backs2)),me._optimum[wt].State=Gr,me._optimum[wt].Backs0=me.reps[0],me._optimum[wt].Backs1=me.reps[1],me._optimum[wt].Backs2=me.reps[2],me._optimum[wt].Backs3=me.reps[3],Yt=me._optimum[wt].Price,pr=ge(me._matchFinder,-1),Ur=ge(me._matchFinder,-me.reps[0]-1-1),Jr=ht&me._posStateMask,Pt=Yt+Ht[me._isMatch[(Gr<<4)+Jr]>>>2]+$t(lr(me._literalEncoder,ht,ge(me._matchFinder,-2)),Gr>=7,Ur,pr),ii=me._optimum[wt+1],ai=0,Pt<ii.Price&&(ii.Price=Pt,ii.PosPrev=wt,ii.BackPrev=-1,ii.Prev1IsChar=0,ai=1),Xr=Yt+Ht[2048-me._isMatch[(Gr<<4)+Jr]>>>2],gi=Xr+Ht[2048-me._isRep[Gr]>>>2],Ur==pr&&!(ii.PosPrev<wt&&!ii.BackPrev)&&(vi=gi+(Ht[me._isRepG0[Gr]>>>2]+Ht[me._isRep0Long[(Gr<<4)+Jr]>>>2]),vi<=ii.Price&&(ii.Price=vi,ii.PosPrev=wt,ii.BackPrev=0,ii.Prev1IsChar=0,ai=1)),ui=ke(me._matchFinder)+1,ui=4095-wt<ui?4095-wt:ui,si=ui,!(si<2)){if(si>me._numFastBytes&&(si=me._numFastBytes),!ai&&Ur!=pr&&(yi=Math.min(ui-1,me._numFastBytes),Qr=Ee(me._matchFinder,0,me.reps[0],yi),Qr>=2)){for(Yr=_t(Gr),ei=ht+1&me._posStateMask,Ai=Pt+Ht[2048-me._isMatch[(Yr<<4)+ei]>>>2]+Ht[2048-me._isRep[Yr]>>>2],fi=wt+1+Qr;Dr<fi;)me._optimum[++Dr].Price=268435455;at=Ai+(zi=ur(me._repMatchLenEncoder,Qr-2,ei),zi+kt(me,0,Yr,ei)),Fr=me._optimum[fi],at<Fr.Price&&(Fr.Price=at,Fr.PosPrev=wt+1,Fr.BackPrev=0,Fr.Prev1IsChar=1,Fr.Prev2=0)}for(xi=2,oi=0;oi<4;++oi)if(Mr=Ee(me._matchFinder,-1,me.reps[oi],si),!(Mr<2)){Vr=Mr;do{for(;Dr<wt+Mr;)me._optimum[++Dr].Price=268435455;at=gi+(Vi=ur(me._repMatchLenEncoder,Mr-2,Jr),Vi+kt(me,oi,Gr,Jr)),Fr=me._optimum[wt+Mr],at<Fr.Price&&(Fr.Price=at,Fr.PosPrev=wt,Fr.BackPrev=oi,Fr.Prev1IsChar=0)}while(--Mr>=2);if(Mr=Vr,oi||(xi=Mr+1),Mr<ui&&(yi=Math.min(ui-1-Mr,me._numFastBytes),Qr=Ee(me._matchFinder,Mr,me.reps[oi],yi),Qr>=2)){for(Yr=Gr<7?8:11,ei=ht+Mr&me._posStateMask,Gt=gi+(Wi=ur(me._repMatchLenEncoder,Mr-2,Jr),Wi+kt(me,oi,Gr,Jr))+Ht[me._isMatch[(Yr<<4)+ei]>>>2]+$t(lr(me._literalEncoder,ht+Mr,ge(me._matchFinder,Mr-1-1)),1,ge(me._matchFinder,Mr-1-(me.reps[oi]+1)),ge(me._matchFinder,Mr-1)),Yr=_t(Yr),ei=ht+Mr+1&me._posStateMask,ci=Gt+Ht[2048-me._isMatch[(Yr<<4)+ei]>>>2],Ai=ci+Ht[2048-me._isRep[Yr]>>>2],fi=Mr+1+Qr;Dr<wt+fi;)me._optimum[++Dr].Price=268435455;at=Ai+(Ki=ur(me._repMatchLenEncoder,Qr-2,ei),Ki+kt(me,0,Yr,ei)),Fr=me._optimum[wt+fi],at<Fr.Price&&(Fr.Price=at,Fr.PosPrev=wt+Mr+1,Fr.BackPrev=0,Fr.Prev1IsChar=1,Fr.Prev2=1,Fr.PosPrev2=wt,Fr.BackPrev2=oi)}}if(Zr>si){for(Zr=si,li=0;Zr>me._matchDistances[li];li+=2);me._matchDistances[li]=Zr,li+=2}if(Zr>=xi){for(Si=Xr+Ht[me._isRep[Gr]>>>2];Dr<wt+Zr;)me._optimum[++Dr].Price=268435455;for(ri=0;xi>me._matchDistances[ri];)ri+=2;for(Mr=xi;;++Mr)if(Ft=me._matchDistances[ri+1],at=Si+it(me,Ft,Mr,Jr),Fr=me._optimum[wt+Mr],at<Fr.Price&&(Fr.Price=at,Fr.PosPrev=wt,Fr.BackPrev=Ft+4,Fr.Prev1IsChar=0),Mr==me._matchDistances[ri]){if(Mr<ui&&(yi=Math.min(ui-1-Mr,me._numFastBytes),Qr=Ee(me._matchFinder,Mr,Ft,yi),Qr>=2)){for(Yr=Gr<7?7:10,ei=ht+Mr&me._posStateMask,Gt=at+Ht[me._isMatch[(Yr<<4)+ei]>>>2]+$t(lr(me._literalEncoder,ht+Mr,ge(me._matchFinder,Mr-1-1)),1,ge(me._matchFinder,Mr-(Ft+1)-1),ge(me._matchFinder,Mr-1)),Yr=_t(Yr),ei=ht+Mr+1&me._posStateMask,ci=Gt+Ht[2048-me._isMatch[(Yr<<4)+ei]>>>2],Ai=ci+Ht[2048-me._isRep[Yr]>>>2],fi=Mr+1+Qr;Dr<wt+fi;)me._optimum[++Dr].Price=268435455;at=Ai+(Yi=ur(me._repMatchLenEncoder,Qr-2,ei),Yi+kt(me,0,Yr,ei)),Fr=me._optimum[wt+fi],at<Fr.Price&&(Fr.Price=at,Fr.PosPrev=wt+Mr+1,Fr.BackPrev=0,Fr.Prev1IsChar=1,Fr.Prev2=1,Fr.PosPrev2=wt,Fr.BackPrev2=Ft+4)}if(ri+=2,ri==li)break}}}}}function it(me,ht,wt,Pt){var Gt,at=ft(wt);return ht<128?Gt=me._distancesPrices[at*128+ht]:Gt=me._posSlotPrices[(at<<6)+Cr(ht)]+me._alignPrices[ht&15],Gt+ur(me._lenEncoder,wt-2,Pt)}function kt(me,ht,wt,Pt){var Gt;return ht?(Gt=Ht[2048-me._isRepG0[wt]>>>2],ht==1?Gt+=Ht[me._isRepG1[wt]>>>2]:(Gt+=Ht[2048-me._isRepG1[wt]>>>2],Gt+=Pr(me._isRepG2[wt],ht-2))):(Gt=Ht[me._isRepG0[wt]>>>2],Gt+=Ht[2048-me._isRep0Long[(wt<<4)+Pt]>>>2]),Gt}function xt(me,ht,wt){return Ht[me._isRepG0[ht]>>>2]+Ht[me._isRep0Long[(ht<<4)+wt]>>>2]}function Ot(me){Ye(me),kr(me._rangeEncoder),Qt(me._isMatch),Qt(me._isRep0Long),Qt(me._isRep),Qt(me._isRepG0),Qt(me._isRepG1),Qt(me._isRepG2),Qt(me._posEncoders),ot(me._literalEncoder);for(var ht=0;ht<4;++ht)Qt(me._posSlotEncoder[ht].Models);wr(me._lenEncoder,1<<me._posStateBits),wr(me._repMatchLenEncoder,1<<me._posStateBits),Qt(me._posAlignEncoder.Models),me._longestMatchWasFound=0,me._optimumEndIndex=0,me._optimumCurrentIndex=0,me._additionalOffset=0}function Jt(me,ht){ht>0&&(Ut(me._matchFinder,ht),me._additionalOffset+=ht)}function tr(me){var ht=0;return me._numDistancePairs=Oe(me._matchFinder,me._matchDistances),me._numDistancePairs>0&&(ht=me._matchDistances[me._numDistancePairs-2],ht==me._numFastBytes&&(ht+=Ee(me._matchFinder,ht-1,me._matchDistances[me._numDistancePairs-1],273-ht))),++me._additionalOffset,ht}function br(me){me._matchFinder&&me._needReleaseMFStream&&(me._matchFinder._stream=null,me._needReleaseMFStream=0)}function ar(me){br(me),me._rangeEncoder.Stream=null}function _r(me,ht){me._dictionarySize=ht;for(var wt=0;ht>1<<wt;++wt);me._distTableSize=wt*2}function or(me,ht){var wt=me._matchFinderType;me._matchFinderType=ht,me._matchFinder&&wt!=me._matchFinderType&&(me._dictionarySizePrev=-1,me._matchFinder=null)}function gr(me,ht){me.properties[0]=(me._posStateBits*5+me._numLiteralPosStateBits)*9+me._numLiteralContextBits<<24>>24;for(var wt=0;wt<4;++wt)me.properties[1+wt]=me._dictionarySize>>8*wt<<24>>24;Y(ht,me.properties,0,5)}function xr(me,ht){if(me._writeEndMark){er(me._rangeEncoder,me._isMatch,(me._state<<4)+ht,1),er(me._rangeEncoder,me._isRep,me._state,0),me._state=me._state<7?7:10,hr(me._lenEncoder,me._rangeEncoder,0,ht);var wt=ft(2);ct(me._posSlotEncoder[wt],me._rangeEncoder,63),ir(me._rangeEncoder,67108863,26),Ue(me._posAlignEncoder,me._rangeEncoder,15)}}function vr(me){return me<2048?Ke[me]:me<2097152?Ke[me>>10]+20:Ke[me>>20]+40}function Cr(me){return me<131072?Ke[me>>6]+12:me<134217728?Ke[me>>16]+32:Ke[me>>26]+52}function Sr(me,ht,wt,Pt){wt<8?(er(ht,me._choice,0,0),ct(me._lowCoder[Pt],ht,wt)):(wt-=8,er(ht,me._choice,0,1),wt<8?(er(ht,me._choice,1,0),ct(me._midCoder[Pt],ht,wt)):(er(ht,me._choice,1,1),ct(me._highCoder,ht,wt-8)))}function dr(me){me._choice=L(2),me._lowCoder=L(16),me._midCoder=L(16),me._highCoder=Er({},8);for(var ht=0;ht<16;++ht)me._lowCoder[ht]=Er({},3),me._midCoder[ht]=Er({},3);return me}function wr(me,ht){Qt(me._choice);for(var wt=0;wt<ht;++wt)Qt(me._lowCoder[wt].Models),Qt(me._midCoder[wt].Models);Qt(me._highCoder.Models)}function fr(me,ht,wt,Pt,Gt){var at,Ft,Yt,pr,Br;for(at=Ht[me._choice[0]>>>2],Ft=Ht[2048-me._choice[0]>>>2],Yt=Ft+Ht[me._choice[1]>>>2],pr=Ft+Ht[2048-me._choice[1]>>>2],Br=0,Br=0;Br<8;++Br){if(Br>=wt)return;Pt[Gt+Br]=at+Be(me._lowCoder[ht],Br)}for(;Br<16;++Br){if(Br>=wt)return;Pt[Gt+Br]=Yt+Be(me._midCoder[ht],Br-8)}for(;Br<wt;++Br)Pt[Gt+Br]=pr+Be(me._highCoder,Br-8-8)}function hr(me,ht,wt,Pt){Sr(me,ht,wt,Pt),--me._counters[Pt]==0&&(fr(me,Pt,me._tableSize,me._prices,Pt*272),me._counters[Pt]=me._tableSize)}function Ar(me){return dr(me),me._prices=[],me._counters=[],me}function ur(me,ht,wt){return me._prices[wt*272+ht]}function zt(me,ht){for(var wt=0;wt<ht;++wt)fr(me,wt,me._tableSize,me._prices,wt*272),me._counters[wt]=me._tableSize}function Kt(me,ht,wt){var Pt,Gt;if(!(me.m_Coders!=null&&me.m_NumPrevBits==wt&&me.m_NumPosBits==ht))for(me.m_NumPosBits=ht,me.m_PosMask=(1<<ht)-1,me.m_NumPrevBits=wt,Gt=1<<me.m_NumPrevBits+me.m_NumPosBits,me.m_Coders=L(Gt),Pt=0;Pt<Gt;++Pt)me.m_Coders[Pt]=Lt({})}function lr(me,ht,wt){return me.m_Coders[((ht&me.m_PosMask)<<me.m_NumPrevBits)+((wt&255)>>>8-me.m_NumPrevBits)]}function ot(me){var ht,wt=1<<me.m_NumPrevBits+me.m_NumPosBits;for(ht=0;ht<wt;++ht)Qt(me.m_Coders[ht].m_Encoders)}function ut(me,ht,wt){var Pt,Gt,at=1;for(Gt=7;Gt>=0;--Gt)Pt=wt>>Gt&1,er(ht,me.m_Encoders,at,Pt),at=at<<1|Pt}function Bt(me,ht,wt,Pt){var Gt,at,Ft,Yt,pr=1,Br=1;for(at=7;at>=0;--at)Gt=Pt>>at&1,Yt=Br,pr&&(Ft=wt>>at&1,Yt+=1+Ft<<8,pr=Ft==Gt),er(ht,me.m_Encoders,Yt,Gt),Br=Br<<1|Gt}function Lt(me){return me.m_Encoders=L(768),me}function $t(me,ht,wt,Pt){var Gt,at=1,Ft=7,Yt,pr=0;if(ht){for(;Ft>=0;--Ft)if(Yt=wt>>Ft&1,Gt=Pt>>Ft&1,pr+=Pr(me.m_Encoders[(1+Yt<<8)+at],Gt),at=at<<1|Gt,Yt!=Gt){--Ft;break}}for(;Ft>=0;--Ft)Gt=Pt>>Ft&1,pr+=Pr(me.m_Encoders[at],Gt),at=at<<1|Gt;return pr}function Zt(me){me.BackPrev=-1,me.Prev1IsChar=0}function Vt(me){me.BackPrev=0,me.Prev1IsChar=0}function Et(me,ht){return me.NumBitLevels=ht,me.Models=L(1<<ht),me}function sr(me,ht){var wt,Pt=1;for(wt=me.NumBitLevels;wt!=0;--wt)Pt=(Pt<<1)+Xe(ht,me.Models,Pt);return Pt-(1<<me.NumBitLevels)}function cr(me,ht){var wt,Pt,Gt=1,at=0;for(Pt=0;Pt<me.NumBitLevels;++Pt)wt=Xe(ht,me.Models,Gt),Gt<<=1,Gt+=wt,at|=wt<<Pt;return at}function yr(me,ht,wt,Pt){var Gt,at,Ft=1,Yt=0;for(at=0;at<Pt;++at)Gt=Xe(wt,me,ht+Ft),Ft<<=1,Ft+=Gt,Yt|=Gt<<at;return Yt}function Er(me,ht){return me.NumBitLevels=ht,me.Models=L(1<<ht),me}function ct(me,ht,wt){var Pt,Gt,at=1;for(Gt=me.NumBitLevels;Gt!=0;)--Gt,Pt=wt>>>Gt&1,er(ht,me.Models,at,Pt),at=at<<1|Pt}function Be(me,ht){var wt,Pt,Gt=1,at=0;for(Pt=me.NumBitLevels;Pt!=0;)--Pt,wt=ht>>>Pt&1,at+=Pr(me.Models[Gt],wt),Gt=(Gt<<1)+wt;return at}function Ue(me,ht,wt){var Pt,Gt,at=1;for(Gt=0;Gt<me.NumBitLevels;++Gt)Pt=wt&1,er(ht,me.Models,at,Pt),at=at<<1|Pt,wt>>=1}function tt(me,ht){var wt,Pt,Gt=1,at=0;for(Pt=me.NumBitLevels;Pt!=0;--Pt)wt=ht&1,ht>>>=1,at+=Pr(me.Models[Gt],wt),Gt=Gt<<1|wt;return at}function gt(me,ht,wt,Pt,Gt){var at,Ft,Yt=1;for(Ft=0;Ft<Pt;++Ft)at=Gt&1,er(wt,me,ht+Yt,at),Yt=Yt<<1|at,Gt>>=1}function je(me,ht,wt,Pt){var Gt,at,Ft=1,Yt=0;for(at=wt;at!=0;--at)Gt=Pt&1,Pt>>>=1,Yt+=Ht[((me[ht+Ft]-Gt^-Gt)&2047)>>>2],Ft=Ft<<1|Gt;return Yt}function Xe(me,ht,wt){var Pt,Gt=ht[wt];return Pt=(me.Range>>>11)*Gt,(me.Code^-2147483648)<(Pt^-2147483648)?(me.Range=Pt,ht[wt]=Gt+(2048-Gt>>>5)<<16>>16,me.Range&-16777216||(me.Code=me.Code<<8|be(me.Stream),me.Range<<=8),0):(me.Range-=Pt,me.Code-=Pt,ht[wt]=Gt-(Gt>>>5)<<16>>16,me.Range&-16777216||(me.Code=me.Code<<8|be(me.Stream),me.Range<<=8),1)}function lt(me,ht){var wt,Pt,Gt=0;for(wt=ht;wt!=0;--wt)me.Range>>>=1,Pt=me.Code-me.Range>>>31,me.Code-=me.Range&Pt-1,Gt=Gt<<1|1-Pt,me.Range&-16777216||(me.Code=me.Code<<8|be(me.Stream),me.Range<<=8);return Gt}function Ct(me){me.Code=0,me.Range=-1;for(var ht=0;ht<5;++ht)me.Code=me.Code<<8|be(me.Stream)}function Qt(me){for(var ht=me.length-1;ht>=0;--ht)me[ht]=1024}var Ht=(function(){var me,ht,wt,Pt,Gt=[];for(ht=8;ht>=0;--ht)for(Pt=1<<9-ht-1,me=1<<9-ht,wt=Pt;wt<me;++wt)Gt[wt]=(ht<<6)+(me-wt<<6>>>9-ht-1);return Gt})();function er(me,ht,wt,Pt){var Gt,at=ht[wt];Gt=(me.Range>>>11)*at,Pt?(me.Low=U(me.Low,V(ie(Gt),[4294967295,0])),me.Range-=Gt,ht[wt]=at-(at>>>5)<<16>>16):(me.Range=Gt,ht[wt]=at+(2048-at>>>5)<<16>>16),me.Range&-16777216||(me.Range<<=8,Or(me))}function ir(me,ht,wt){for(var Pt=wt-1;Pt>=0;--Pt)me.Range>>>=1,(ht>>>Pt&1)==1&&(me.Low=U(me.Low,ie(me.Range))),me.Range&-16777216||(me.Range<<=8,Or(me))}function Ir(me){return U(U(ie(me._cacheSize),me._position),[4,0])}function kr(me){me._position=P,me.Low=P,me.Range=-1,me._cacheSize=1,me._cache=0}function Or(me){var ht,wt=ne(ve(me.Low,32));if(wt!=0||K(me.Low,[4278190080,0])<0){me._position=U(me._position,ie(me._cacheSize)),ht=me._cache;do z(me.Stream,ht+wt),ht=255;while(--me._cacheSize!=0);me._cache=ne(me.Low)>>>24}++me._cacheSize,me.Low=de(V(me.Low,[16777215,0]),8)}function Pr(me,ht){return Ht[((me-ht^-ht)&2047)>>>2]}function jr(me){for(var ht=0,wt=0,Pt,Gt,at,Ft=me.length,Yt=[],pr=[];ht<Ft;++ht,++wt){if(Pt=me[ht]&255,Pt&128)if((Pt&224)==192){if(ht+1>=Ft||(Gt=me[++ht]&255,(Gt&192)!=128))return me;pr[wt]=(Pt&31)<<6|Gt&63}else if((Pt&240)==224){if(ht+2>=Ft||(Gt=me[++ht]&255,(Gt&192)!=128)||(at=me[++ht]&255,(at&192)!=128))return me;pr[wt]=(Pt&15)<<12|(Gt&63)<<6|at&63}else return me;else{if(!Pt)return me;pr[wt]=Pt}wt==16383&&(Yt.push(String.fromCharCode.apply(String,pr)),wt=-1)}return wt>0&&(pr.length=wt,Yt.push(String.fromCharCode.apply(String,pr))),Yt.join("")}function $r(me){var ht,wt=[],Pt,Gt=0,at,Ft=me.length;if(typeof me=="object")return me;for(te(me,0,Ft,wt,0),at=0;at<Ft;++at)ht=wt[at],ht>=1&&ht<=127?++Gt:!ht||ht>=128&&ht<=2047?Gt+=2:Gt+=3;for(Pt=[],Gt=0,at=0;at<Ft;++at)ht=wt[at],ht>=1&&ht<=127?Pt[Gt++]=ht<<24>>24:!ht||ht>=128&&ht<=2047?(Pt[Gt++]=(192|ht>>6&31)<<24>>24,Pt[Gt++]=(128|ht&63)<<24>>24):(Pt[Gt++]=(224|ht>>12&15)<<24>>24,Pt[Gt++]=(128|ht>>6&63)<<24>>24,Pt[Gt++]=(128|ht&63)<<24>>24);return Pt}function qr(me){return me[1]+me[0]}function Hr(me,ht,wt,Pt){var Gt={},at,Ft,Yt=typeof wt>"u"&&typeof Pt>"u";if(typeof wt!="function"&&(Ft=wt,wt=Pt=0),Pt=Pt||function(Br){if(!(typeof Ft>"u"))return F(Br,Ft)},wt=wt||function(Br,Tr){if(!(typeof Ft>"u"))return postMessage({action:E,cbn:Ft,result:Br,error:Tr})},Yt){for(Gt.c=ae({},$r(me),Wr(ht));qt(Gt.c.chunker););return O(Gt.c.output)}try{Gt.c=ae({},$r(me),Wr(ht)),Pt(0)}catch(Br){return wt(null,Br)}function pr(){try{for(var Br,Tr=new Date().getTime();qt(Gt.c.chunker);)if(at=qr(Gt.c.chunker.inBytesProcessed)/qr(Gt.c.length_0),new Date().getTime()-Tr>200)return Pt(at),I(pr,0),0;Pt(1),Br=O(Gt.c.output),I(wt.bind(null,Br),0)}catch(Nr){wt(null,Nr)}}I(pr,0)}function ti(me,ht,wt){var Pt={},Gt,at,Ft,Yt,pr=typeof ht>"u"&&typeof wt>"u";if(typeof ht!="function"&&(at=ht,ht=wt=0),wt=wt||function(Tr){if(!(typeof at>"u"))return F(Ft?Tr:-1,at)},ht=ht||function(Tr,Nr){if(!(typeof at>"u"))return postMessage({action:A,cbn:at,result:Tr,error:Nr})},pr){for(Pt.d=se({},me);qt(Pt.d.chunker););return jr(O(Pt.d.output))}try{Pt.d=se({},me),Yt=qr(Pt.d.length_0),Ft=Yt>-1,wt(0)}catch(Tr){return ht(null,Tr)}function Br(){try{for(var Tr,Nr=0,Dr=new Date().getTime();qt(Pt.d.chunker);)if(++Nr%1e3==0&&new Date().getTime()-Dr>200)return Ft&&(Gt=qr(Pt.d.chunker.decoder.nowPos64)/Yt,wt(Gt)),I(Br,0),0;wt(1),Tr=jr(O(Pt.d.output)),I(ht.bind(null,Tr),0)}catch(Lr){ht(null,Lr)}}I(Br,0)}var Wr=(function(){var me=[{s:16,f:64,m:0},{s:20,f:64,m:0},{s:19,f:64,m:1},{s:20,f:64,m:1},{s:21,f:128,m:1},{s:22,f:128,m:1},{s:23,f:128,m:1},{s:24,f:255,m:1},{s:25,f:255,m:1}];return function(ht){return me[ht-1]||me[6]}})();return{compress:Hr,decompress:ti}})();const compress=LZMA$1.compress,decompress=LZMA$1.decompress;class Parsing{static MAX_COORDINATE_VALUE=131072;static MAX_PARSE_VALUE=2147483647;static parseInt(A,_=this.MAX_PARSE_VALUE,I=!1){return this._getValue(parseInt(A),_,I)}static parseFloat(A,_=this.MAX_PARSE_VALUE,I=!1){return this._getValue(parseFloat(A),_,I)}static parseEnum(A,_){const I=_.trim(),B=parseInt(I);if(B in A)return B;if(I in A)return A[I];throw new Error("Unknown enum value!")}static parseByte(A){const _=parseInt(A);if(_<0)throw new Error("Value must be greater than 0!");if(_>255)throw new Error("Value must be less than 255!");return this._getValue(_)}static _getValue(A,_=this.MAX_PARSE_VALUE,I=!1){if(A<-_)throw new Error("Value is too low!");if(A>_)throw new Error("Value is too high!");if(!I&&Number.isNaN(A))throw new Error("Not a number");return A}}class BeatmapColorDecoder{static handleLine(A,_){const[I,...B]=A.split(":"),T=B.join(":").trim().split(",").map(P=>Parsing.parseByte(P));if(T.length!==3&&T.length!==4)throw new Error(`Color specified in incorrect format (should be R,G,B or R,G,B,A): ${T.join(",")}`);const R=new Color4(T[0],T[1],T[2],T[3]);this.addColor(R,_,I.trim())}static addColor(A,_,I){if(I==="SliderTrackOverride"){_.colors.sliderTrackColor=A;return}if(I==="SliderBorder"){_.colors.sliderBorderColor=A;return}I.startsWith("Combo")&&_.colors.comboColors.push(A)}}class BeatmapDifficultyDecoder{static handleLine(A,_){const[I,...B]=A.split(":"),T=B.join(":").trim();switch(I.trim()){case"CircleSize":_.difficulty.circleSize=Parsing.parseFloat(T);break;case"HPDrainRate":_.difficulty.drainRate=Parsing.parseFloat(T);break;case"OverallDifficulty":_.difficulty.overallDifficulty=Parsing.parseFloat(T);break;case"ApproachRate":_.difficulty.approachRate=Parsing.parseFloat(T);break;case"SliderMultiplier":_.difficulty.sliderMultiplier=Parsing.parseFloat(T);break;case"SliderTickRate":_.difficulty.sliderTickRate=Parsing.parseFloat(T)}}}class BeatmapEditorDecoder{static handleLine(A,_){const[I,...B]=A.split(":"),T=B.join(":").trim();switch(I.trim()){case"Bookmarks":_.editor.bookmarks=T.split(",").map(R=>+R);break;case"DistanceSpacing":_.editor.distanceSpacing=Math.max(0,Parsing.parseFloat(T));break;case"BeatDivisor":_.editor.beatDivisor=Parsing.parseInt(T);break;case"GridSize":_.editor.gridSize=Parsing.parseInt(T);break;case"TimelineZoom":_.editor.timelineZoom=Math.max(0,Parsing.parseFloat(T))}}}class StoryboardEventDecoder{static handleLine(A,_){const I=this._getDepth(A);switch(I>0&&(A=A.substring(I)),I<2&&this._storyboardSprite&&(this._timelineGroup=this._storyboardSprite.timelineGroup),I){case 0:return this._handleElement(A,_);case 1:return this._handleCompoundOrCommand(A);case 2:return this._handleCommand(A)}}static _handleElement(A,_){const I=A.split(","),B=this.parseEventType(I[0]);switch(this._storyboardSprite?.hasCommands&&(this._storyboardSprite.updateCommands(),this._storyboardSprite.adjustTimesToCommands(),this._storyboardSprite.resetValuesToCommands()),B){case EventType.Video:{const T=_.getLayerByType(LayerType.Video),R=Parsing.parseInt(I[1]),P=I[2].replace(/"/g,"");T.elements.push(new StoryboardVideo(P,R));return}case EventType.Sprite:{const T=_.getLayerByType(this.parseLayerType(I[1])),R=this.parseOrigin(I[2]),P=this.convertOrigin(R),D=I[3].replace(/"/g,""),F=Parsing.parseFloat(I[4],Parsing.MAX_COORDINATE_VALUE),L=Parsing.parseFloat(I[5],Parsing.MAX_COORDINATE_VALUE);this._storyboardSprite=new StoryboardSprite$1(D,R,P,new Vector2(F,L)),T.elements.push(this._storyboardSprite);return}case EventType.Animation:{const T=_.getLayerByType(this.parseLayerType(I[1])),R=this.parseOrigin(I[2]),P=this.convertOrigin(R),D=I[3].replace(/"/g,""),F=Parsing.parseFloat(I[4],Parsing.MAX_COORDINATE_VALUE),L=Parsing.parseFloat(I[5],Parsing.MAX_COORDINATE_VALUE),U=Parsing.parseInt(I[6]);let V=Parsing.parseFloat(I[7]);_.fileFormat<6&&(V=Math.round(.015*V)*1.186*(1e3/60));const K=this.parseLoopType(I[8]);this._storyboardSprite=new StoryboardAnimation$1(D,R,P,new Vector2(F,L),U,V,K),T.elements.push(this._storyboardSprite);return}case EventType.Sample:{const T=Parsing.parseFloat(I[1]),R=_.getLayerByType(this.parseLayerType(I[2])),P=I[3].replace(/"/g,""),D=I.length>4?Parsing.parseInt(I[4]):100,F=new StoryboardSample(P,T,D);R.elements.push(F)}}}static _handleCompoundOrCommand(A){const _=A.split(",");switch(_[0]){case CompoundType.Trigger:{this._timelineGroup=this._storyboardSprite?.addTrigger(_[1],_.length>2?Parsing.parseFloat(_[2]):-1/0,_.length>3?Parsing.parseFloat(_[3]):1/0,_.length>4?Parsing.parseInt(_[4]):0);return}case CompoundType.Loop:{this._timelineGroup=this._storyboardSprite?.addLoop(Parsing.parseFloat(_[1]),Math.max(0,Parsing.parseInt(_[2])-1));return}default:this._handleCommand(A)}}static _handleCommand(A){const _=A.split(","),I=_[0],B=Parsing.parseInt(_[1]),T=Parsing.parseInt(_[2]),R=Parsing.parseInt(_[3]||_[2]);switch(I){case CommandType.Fade:{const P=Parsing.parseFloat(_[4]),D=_.length>5?Parsing.parseFloat(_[5]):P;this._timelineGroup?.alpha.add(I,B,T,R,P,D);return}case CommandType.Scale:{const P=Parsing.parseFloat(_[4]),D=_.length>5?Parsing.parseFloat(_[5]):P;this._timelineGroup?.scale.add(I,B,T,R,P,D);return}case CommandType.VectorScale:{const P=Parsing.parseFloat(_[4]),D=Parsing.parseFloat(_[5]),F=_.length>6?Parsing.parseFloat(_[6]):P,L=_.length>7?Parsing.parseFloat(_[7]):D;this._timelineGroup?.vectorScale.add(I,B,T,R,new Vector2(P,D),new Vector2(F,L));return}case CommandType.Rotation:{const P=Parsing.parseFloat(_[4]),D=_.length>5?Parsing.parseFloat(_[5]):P;this._timelineGroup?.rotation.add(I,B,T,R,P,D);return}case CommandType.Movement:{const P=Parsing.parseFloat(_[4]),D=Parsing.parseFloat(_[5]),F=_.length>6?Parsing.parseFloat(_[6]):P,L=_.length>7?Parsing.parseFloat(_[7]):D;this._timelineGroup?.x.add(CommandType.MovementX,B,T,R,P,F),this._timelineGroup?.y.add(CommandType.MovementY,B,T,R,D,L);return}case CommandType.MovementX:{const P=Parsing.parseFloat(_[4]),D=_.length>5?Parsing.parseFloat(_[5]):P;this._timelineGroup?.x.add(I,B,T,R,P,D);return}case CommandType.MovementY:{const P=Parsing.parseFloat(_[4]),D=_.length>5?Parsing.parseFloat(_[5]):P;this._timelineGroup?.y.add(I,B,T,R,P,D);return}case CommandType.Color:{const P=Parsing.parseFloat(_[4]),D=Parsing.parseFloat(_[5]),F=Parsing.parseFloat(_[6]),L=_.length>7?Parsing.parseFloat(_[7]):P,U=_.length>8?Parsing.parseFloat(_[8]):D,V=_.length>9?Parsing.parseFloat(_[9]):F;this._timelineGroup?.color.add(I,B,T,R,new Color4(P,D,F,1),new Color4(L,U,V,1));return}case CommandType.Parameter:return this._handleParameterCommand(_)}throw new Error(`Unknown command type: ${I}`)}static _handleParameterCommand(A){const _=CommandType.Parameter,I=Parsing.parseInt(A[1]),B=Parsing.parseInt(A[2]),T=Parsing.parseInt(A[3]||A[2]),R=A[4];switch(R){case ParameterType.BlendingMode:{const P=BlendingParameters.Additive,D=B===T?BlendingParameters.Additive:BlendingParameters.Inherit;this._timelineGroup?.blendingParameters.add(_,I,B,T,P,D,R);return}case ParameterType.HorizontalFlip:this._timelineGroup?.flipH.add(_,I,B,T,!0,B===T,R);return;case ParameterType.VerticalFlip:{this._timelineGroup?.flipV.add(_,I,B,T,!0,B===T,R);return}}throw new Error(`Unknown parameter type: ${R}`)}static parseEventType(A){if(A.startsWith(" ")||A.startsWith("_"))return EventType.StoryboardCommand;try{return Parsing.parseEnum(EventType,A)}catch{throw new Error(`Unknown event type: ${A}`)}}static parseLayerType(A){try{return Parsing.parseEnum(LayerType,A)}catch{throw new Error(`Unknown layer type: ${A}`)}}static parseOrigin(A){try{return Parsing.parseEnum(Origins,A)}catch{return Origins.TopLeft}}static convertOrigin(A){switch(A){case Origins.TopLeft:return Anchor.TopLeft;case Origins.TopCentre:return Anchor.TopCentre;case Origins.TopRight:return Anchor.TopRight;case Origins.CentreLeft:return Anchor.CentreLeft;case Origins.Centre:return Anchor.Centre;case Origins.CentreRight:return Anchor.CentreRight;case Origins.BottomLeft:return Anchor.BottomLeft;case Origins.BottomCentre:return Anchor.BottomCentre;case Origins.BottomRight:return Anchor.BottomRight}return Anchor.TopLeft}static parseLoopType(A){try{return Parsing.parseEnum(LoopType,A)}catch{return LoopType.LoopForever}}static _getDepth(A){let _=0;for(const I of A){if(I!==" "&&I!=="_")break;++_}return _}}class BeatmapEventDecoder{static handleLine(A,_,I,B){const T=A.split(",").map((P,D)=>D?P.trim():P);switch(StoryboardEventDecoder.parseEventType(T[0])){case EventType.Background:_.events.backgroundPath=T[2].replace(/"/g,"");break;case EventType.Break:{const P=Parsing.parseFloat(T[1])+B,D=Math.max(P,Parsing.parseFloat(T[2])+B),F=new BeatmapBreakEvent(P,D);_.events.breaks||(_.events.breaks=[]),_.events.breaks.push(F);break}case EventType.Video:case EventType.Sample:case EventType.Sprite:case EventType.Animation:case EventType.StoryboardCommand:I&&I.push(A)}}}class BeatmapGeneralDecoder{static handleLine(A,_,I){const[B,...T]=A.split(":"),R=T.join(":").trim();switch(B.trim()){case"AudioFilename":_.general.audioFilename=R;break;case"AudioHash":_.general.audioHash=R;break;case"OverlayPosition":_.general.overlayPosition=R;break;case"SkinPreference":_.general.skinPreference=R;break;case"AudioLeadIn":_.general.audioLeadIn=Parsing.parseInt(R);break;case"PreviewTime":_.general.previewTime=Parsing.parseInt(R)+I;break;case"Countdown":_.general.countdown=Parsing.parseInt(R);break;case"StackLeniency":_.general.stackLeniency=Parsing.parseFloat(R);break;case"Mode":_.originalMode=Parsing.parseInt(R);break;case"CountdownOffset":_.general.countdownOffset=Parsing.parseInt(R);break;case"SampleSet":_.general.sampleSet=SampleSet[R];break;case"LetterboxInBreaks":_.general.letterboxInBreaks=R==="1";break;case"StoryFireInFront":_.general.storyFireInFront=R==="1";break;case"UseSkinSprites":_.general.useSkinSprites=R==="1";break;case"AlwaysShowPlayfield":_.general.alwaysShowPlayfield=R==="1";break;case"EpilepsyWarning":_.general.epilepsyWarning=R==="1";break;case"SpecialStyle":_.general.specialStyle=R==="1";break;case"WidescreenStoryboard":_.general.widescreenStoryboard=R==="1";break;case"SamplesMatchPlaybackRate":_.general.samplesMatchPlaybackRate=R==="1"}}}class HittableObject extends HitObject{isNewCombo=!1;comboOffset=0;clone(){const A=super.clone();return A.isNewCombo=this.isNewCombo,A.comboOffset=this.comboOffset,A}}class HoldableObject extends HitObject{endTime=0;nodeSamples=[];get duration(){return this.endTime-this.startTime}clone(){const A=super.clone();return A.endTime=this.endTime,A.nestedHitObjects=this.nestedHitObjects.map(_=>_.clone()),A.nodeSamples=this.nodeSamples.map(_=>_.map(I=>I.clone())),A}}class SlidableObject extends HitObject{static BASE_SCORING_DISTANCE=100;get duration(){return this.spans*this.spanDuration}get endTime(){return this.startTime+this.duration}get spans(){return this.repeats+1}set spans(A){this.repeats=A-1}get spanDuration(){return this.distance/this.velocity}get distance(){return this.path.distance}set distance(A){this.path.distance=A}repeats=0;velocity=1;path=new SliderPath;legacyLastTickOffset=36;nodeSamples=[];isNewCombo=!1;comboOffset=0;applyDefaultsToSelf(A,_){super.applyDefaultsToSelf(A,_);const I=A.timingPointAt(this.startTime),B=A.difficultyPointAt(this.startTime),T=SlidableObject.BASE_SCORING_DISTANCE*_.sliderMultiplier*B.sliderVelocity;this.velocity=T/I.beatLength}clone(){const A=super.clone();return A.legacyLastTickOffset=this.legacyLastTickOffset,A.nodeSamples=this.nodeSamples.map(_=>_.map(I=>I.clone())),A.velocity=this.velocity,A.repeats=this.repeats,A.path=this.path.clone(),A.isNewCombo=this.isNewCombo,A.comboOffset=this.comboOffset,A}}class SpinnableObject extends HitObject{endTime=0;isNewCombo=!1;comboOffset=0;get duration(){return this.endTime-this.startTime}clone(){const A=super.clone();return A.endTime=this.endTime,A.isNewCombo=this.isNewCombo,A.comboOffset=this.comboOffset,A}}let FileFormat;(function(E){E.Beatmap=".osu",E.Storyboard=".osb",E.Replay=".osr"})(FileFormat||(FileFormat={}));let LineType;(function(E){E[E.FileFormat=0]="FileFormat",E[E.Section=1]="Section",E[E.Empty=2]="Empty",E[E.Data=3]="Data",E[E.Break=4]="Break"})(LineType||(LineType={}));let Section;(function(E){E.General="General",E.Editor="Editor",E.Metadata="Metadata",E.Difficulty="Difficulty",E.Events="Events",E.TimingPoints="TimingPoints",E.Colours="Colours",E.HitObjects="HitObjects",E.Variables="Variables",E.Fonts="Fonts",E.CatchTheBeat="CatchTheBeat",E.Mania="Mania"})(Section||(Section={}));const browserFSOperation=function(){throw new Error("Filesystem operations are not available in a browser environment")};class BeatmapColorEncoder{static encodeColors(A){const _=A.colors;if(Object.keys(_).length===1&&!_.comboColors.length)return"";const I=["[Colours]"];return _.comboColors.forEach((B,T)=>{I.push(`Combo${T+1}:${B}`)}),_.sliderTrackColor&&I.push(`SliderTrackOverride:${_.sliderTrackColor}`),_.sliderBorderColor&&I.push(`SliderBorder:${_.sliderBorderColor}`),I.join(`
`)}}class BeatmapDifficultyEncoder{static encodeDifficultySection(A){const _=["[Difficulty]"],I=A.difficulty;return _.push(`HPDrainRate:${I.drainRate}`),_.push(`CircleSize:${I.circleSize}`),_.push(`OverallDifficulty:${I.overallDifficulty}`),_.push(`ApproachRate:${I.approachRate}`),_.push(`SliderMultiplier:${I.sliderMultiplier}`),_.push(`SliderTickRate:${I.sliderTickRate}`),_.join(`
`)}}class BeatmapEditorEncoder{static encodeEditorSection(A){const _=["[Editor]"],I=A.editor;return _.push(`Bookmarks:${I.bookmarks.join(",")}`),_.push(`DistanceSpacing:${I.distanceSpacing}`),_.push(`BeatDivisor:${I.beatDivisor}`),_.push(`GridSize:${I.gridSize}`),_.push(`TimelineZoom:${I.timelineZoom}`),_.join(`
`)}}class StoryboardEventEncoder{static encodeEventSection(A){const _=[];return _.push("[Events]"),_.push("//Background and Video events"),_.push(this.encodeVideos(A)),_.push(this.encodeStoryboard(A)),_.join(`
`)}static encodeVideos(A){const _=[],I=A.getLayerByType(LayerType.Video);return I.elements.length>0&&_.push(this.encodeStoryboardLayer(I)),_.join(`
`)}static encodeStoryboard(A){const _=[];_.push("//Storyboard Layer 0 (Background)");const I=A.getLayerByType(LayerType.Background);I.elements.length>0&&_.push(this.encodeStoryboardLayer(I)),_.push("//Storyboard Layer 1 (Fail)");const B=A.getLayerByType(LayerType.Fail);B.elements.length>0&&_.push(this.encodeStoryboardLayer(B)),_.push("//Storyboard Layer 2 (Pass)");const T=A.getLayerByType(LayerType.Pass);T.elements.length>0&&_.push(this.encodeStoryboardLayer(T)),_.push("//Storyboard Layer 3 (Foreground)");const R=A.getLayerByType(LayerType.Foreground);R.elements.length>0&&_.push(this.encodeStoryboardLayer(R)),_.push("//Storyboard Layer 4 (Overlay)");const P=A.getLayerByType(LayerType.Overlay);return P.elements.length>0&&_.push(this.encodeStoryboardLayer(P)),_.join(`
`)}static encodeStoryboardLayer(A){const _=[];return A.elements.forEach(I=>{_.push(this.encodeStoryboardElement(I,A.name));const B=I;B?.loops?.forEach(T=>{T.commands.length>0&&(_.push(this.encodeCompound(T)),_.push(this.encodeTimelineGroup(T,2)))}),B?.timelineGroup?.commands.length>0&&_.push(this.encodeTimelineGroup(B.timelineGroup)),B?.triggers?.forEach(T=>{T.commands.length>0&&(_.push(this.encodeCompound(T)),_.push(this.encodeTimelineGroup(T,2)))})}),_.join(`
`)}static encodeStoryboardElement(A,_){return A instanceof StoryboardAnimation$1?["Animation",_,Origins[A.origin],`"${A.filePath}"`,A.startPosition,A.frameCount,A.frameDelay,A.loopType].join(","):A instanceof StoryboardSprite$1?["Sprite",_,Origins[A.origin],`"${A.filePath}"`,A.startPosition].join(","):A instanceof StoryboardSample?["Sample",A.startTime,_,`"${A.filePath}"`,A.volume].join(","):A instanceof StoryboardVideo?["Video",A.startTime,A.filePath,"0,0"].join(","):""}static encodeCompound(A,_=1){const I="".padStart(_," ");return A instanceof CommandLoop?I+[A.type,A.loopStartTime,A.totalIterations].join(","):A instanceof CommandTrigger?I+[A.type,A.triggerName,A.triggerStartTime,A.triggerEndTime,A.groupNumber].join(","):""}static encodeTimelineGroup(A,_=1){const I="".padStart(_," "),B=[],T=A.commands;let R=!1;for(let P=0;P<T.length;++P){if(R){R=!1;continue}if(P<T.length-1){const D=T[P],F=T[P+1],L=D.type===CommandType.MovementX,U=F.type===CommandType.MovementY,V=D.easing===F.easing,K=D.startTime===F.startTime,J=D.endTime===F.endTime;if(L&&U&&(V&&K&&J)){B.push(I+this.encodeMoveCommand(D,F)),R=!0;continue}}B.push(I+this.encodeCommand(T[P]))}return B.join(`
`)}static encodeMoveCommand(A,_){const I=[CommandType.Movement,A.easing,A.startTime,A.startTime!==A.endTime?A.endTime:"",A.startValue,_.startValue],B=A.startValue===A.endValue,T=_.startValue===_.endValue;return(!B||!T)&&I.push(`${A.endValue},${_.endValue}`),I.join(",")}static encodeCommand(A){return[A.type,A.easing,A.startTime,A.startTime!==A.endTime?A.endTime:"",this._encodeCommandParams(A)].join(",")}static _encodeCommandParams(A){if(A.type===CommandType.Parameter)return A.parameter;if(A.type===CommandType.Color){const _=R=>`${R.red},${R.green},${R.blue}`,I=A,B=I.startValue,T=I.endValue;return this._areValuesEqual(A)?_(B):_(B)+","+_(T)}return this._areValuesEqual(A)?`${A.startValue}`:`${A.startValue},${A.endValue}`}static _areValuesEqual(A){if(A.type===CommandType.VectorScale){const _=A;return _.startValue.equals(_.endValue)}if(A.type===CommandType.Color){const _=A;return _.startValue.equals(_.endValue)}return A.startValue===A.endValue}}class BeatmapEventEncoder{static encodeEventSection(A){const _=[],I=A.events;return _.push("[Events]"),_.push("//Background and Video events"),I.backgroundPath&&_.push(`0,0,"${I.backgroundPath}",0,0`),I.storyboard&&_.push(StoryboardEventEncoder.encodeVideos(I.storyboard)),_.push("//Break Periods"),I.breaks&&I.breaks.length>0&&I.breaks.forEach(B=>{_.push(`${EventType[EventType.Break]},${B.startTime},${B.endTime}`)}),I.storyboard&&_.push(StoryboardEventEncoder.encodeStoryboard(I.storyboard)),_.join(`
`)}}class BeatmapGeneralEncoder{static encodeGeneralSection(A){const _=["[General]"],I=A.general;return _.push(`AudioFilename:${I.audioFilename}`),_.push(`AudioLeadIn:${I.audioLeadIn}`),I.audioHash&&_.push(`AudioHash:${I.audioHash}`),_.push(`PreviewTime:${I.previewTime}`),_.push(`Countdown:${I.countdown}`),_.push(`SampleSet:${SampleSet[I.sampleSet]}`),_.push(`StackLeniency:${I.stackLeniency}`),_.push(`Mode:${A.mode}`),_.push(`LetterboxInBreaks:${+I.letterboxInBreaks}`),I.storyFireInFront&&_.push(`StoryFireInFront:${+I.storyFireInFront}`),_.push(`UseSkinSprites:${+I.useSkinSprites}`),I.alwaysShowPlayfield&&_.push(`AlwaysShowPlayfield:${+I.alwaysShowPlayfield}`),_.push(`OverlayPosition:${I.overlayPosition}`),_.push(`SkinPreference:${I.skinPreference}`),_.push(`EpilepsyWarning:${+I.epilepsyWarning}`),_.push(`CountdownOffset:${I.countdownOffset}`),_.push(`SpecialStyle:${+I.specialStyle}`),_.push(`WidescreenStoryboard:${+I.widescreenStoryboard}`),_.push(`SamplesMatchPlaybackRate:${+I.samplesMatchPlaybackRate}`),_.join(`
`)}}class BeatmapHitObjectEncoder{static encodeHitObjects(A){const _=["[HitObjects]"];return A.difficulty,A.hitObjects.forEach(B=>{const T=[],P=B.startPosition,D=new Vector2(P?P.x:256,P?P.y:192);T.push(D.toString()),T.push(B.startTime.toString()),T.push(B.hitType.toString()),T.push(B.hitSound.toString());const F=[];if(B.hitType&HitType.Slider){const ne=B;F.push(this.encodePathData(ne,D))}else if(B.hitType&HitType.Spinner){const ne=B;F.push(this.encodeEndTimeData(ne))}else if(B.hitType&HitType.Hold){const ne=B;F.push(this.encodeEndTimeData(ne))}const L=[],U=B.samples.find(ne=>ne.hitSound===HitSound[HitSound.Normal]),V=B.samples.find(ne=>ne.hitSound!==HitSound[HitSound.Normal]);let K=SampleSet.None,J=SampleSet.None;U&&(K=SampleSet[U.sampleSet]),V&&(J=SampleSet[V.sampleSet]),L[0]=K.toString(),L[1]=J.toString(),L[2]=B.samples[0].customIndex.toString(),L[3]=B.samples[0].volume.toString(),L[4]=B.samples[0].filename,F.push(L.join(":"));const ee=T.join(","),ie=B.hitType&HitType.Hold?F.join(":"):F.join(",");_.push([ee,ie].join(","))}),_.join(`
`)}static encodePathData(A,_){const I=[];let B;A.path.controlPoints.forEach((D,F)=>{if(D.type!==null){let L=D.type!==B||D.type===PathType.PerfectCurve;if(F>1){const U=_.add(A.path.controlPoints[F-1].position),V=_.add(A.path.controlPoints[F-2].position);~~U.x===~~V.x&&~~U.y===~~V.y&&(L=!0)}L?(I.push(A.path.curveType),B=D.type):I.push(`${_.x+D.position.x}:${_.y+D.position.y}`)}F!==0&&I.push(`${_.x+D.position.x}:${_.y+D.position.y}`)});const T=[];T.push(I.join("|")),T.push((A.repeats+1).toString()),T.push(A.distance.toString());const R=[],P=[];return A.nodeSamples.forEach((D,F)=>{R[F]=HitSound.None,P[F]=[SampleSet.None,SampleSet.None],D.forEach((L,U)=>{U===0?P[F][0]=SampleSet[L.sampleSet]:(R[F]|=HitSound[L.hitSound],P[F][1]=SampleSet[L.sampleSet])})}),T.push(R.join("|")),T.push(P.map(D=>D.join(":")).join("|")),T.join(",")}static encodeEndTimeData(A){return A.endTime.toString()}}class BeatmapMetadataEncoder{static encodeMetadataSection(A){const _=["[Metadata]"],I=A.metadata;return _.push(`Title:${I.title}`),_.push(`TitleUnicode:${I.titleUnicode}`),_.push(`Artist:${I.artist}`),_.push(`ArtistUnicode:${I.artistUnicode}`),_.push(`Creator:${I.creator}`),_.push(`Version:${I.version}`),_.push(`Source:${I.source}`),_.push(`Tags:${I.tags.join(" ")}`),_.push(`BeatmapID:${I.beatmapId}`),_.push(`BeatmapSetID:${I.beatmapSetId}`),_.join(`
`)}}class BeatmapTimingPointEncoder{static lastDifficultyPoint=null;static lastEffectPoint=null;static lastSamplePoint=null;static encodeControlPoints(A){const _=["[TimingPoints]"];return A.controlPoints.groups.forEach(I=>{I.controlPoints.find(R=>R.beatLength)&&_.push(this.encodeGroup(I,!0)),_.push(this.encodeGroup(I))}),_.join(`
`)}static encodeGroup(A,_=!1){const{difficultyPoint:I,effectPoint:B,samplePoint:T,timingPoint:R}=this.updateActualPoints(A),P=A.startTime;let D=-100;I!==null&&(D/=I.sliderVelocity);let F=SampleSet.None,L=0,U=100;T!==null&&(F=SampleSet[T.sampleSet],L=T.customIndex,U=T.volume);let V=EffectType.None;if(B!==null){const ee=B.kiai?EffectType.Kiai:EffectType.None,ie=B.omitFirstBarLine?EffectType.OmitFirstBarLine:EffectType.None;V|=ee|ie}let K=TimeSignature.SimpleQuadruple,J=0;return _&&R!==null&&(D=R.beatLength,K=R.timeSignature,J=1),[P,D,K,F,L,U,J,V].join(",")}static updateActualPoints(A){let _=null;return A.controlPoints.forEach(I=>{I.pointType===ControlPointType.DifficultyPoint&&!I.isRedundant(this.lastDifficultyPoint)&&(this.lastDifficultyPoint=I),I.pointType===ControlPointType.EffectPoint&&!I.isRedundant(this.lastEffectPoint)&&(this.lastEffectPoint=I),I.pointType===ControlPointType.SamplePoint&&!I.isRedundant(this.lastSamplePoint)&&(this.lastSamplePoint=I),I.pointType===ControlPointType.TimingPoint&&(_=I)}),{timingPoint:_,difficultyPoint:this.lastDifficultyPoint,effectPoint:this.lastEffectPoint,samplePoint:this.lastSamplePoint}}}const textDecoder=new TextDecoder;function stringifyBuffer(E){return typeof E=="string"?E:textDecoder.decode(E)}class BeatmapEncoder{static FIRST_LAZER_VERSION=128;async encodeToPath(A,_){A.endsWith(FileFormat.Beatmap)||(A+=FileFormat.Beatmap);try{await browserFSOperation(browserFSOperation(A),{recursive:!0}),await browserFSOperation(A,await this.encodeToString(_))}catch(I){const B=I.message||I;throw new Error(`Failed to encode a beatmap: ${B}`)}}encodeToString(A){return A?.fileFormat?[`osu file format v${A.fileFormat??BeatmapEncoder.FIRST_LAZER_VERSION}`,BeatmapGeneralEncoder.encodeGeneralSection(A),BeatmapEditorEncoder.encodeEditorSection(A),BeatmapMetadataEncoder.encodeMetadataSection(A),BeatmapDifficultyEncoder.encodeDifficultySection(A),BeatmapEventEncoder.encodeEventSection(A),BeatmapTimingPointEncoder.encodeControlPoints(A),BeatmapColorEncoder.encodeColors(A),BeatmapHitObjectEncoder.encodeHitObjects(A)].join(`

`)+`
`:""}}class LZMA{static _lzma=getLZMAInstance();static async decompress(A){try{return await this._lzma.decompress(A)}catch{return""}}static async compress(A){try{return await this._lzma.compress(A,1)}catch{return new Uint8Array([])}}}function getLZMAInstance(){return{decompress(E){return new Promise((A,_)=>{decompress(E,(I,B)=>{B?_(B):A(typeof I=="string"?I:new Uint8Array(I).toString())})})},compress(E){return new Promise((A,_)=>{compress(E,1,(I,B)=>{B?_(B):A(new Uint8Array(I))})})}}}class BeatmapHitObjectDecoder{static _forceNewCombo=!1;static _extraComboOffset=0;static handleLine(A,_,I){const B=A.split(",").map(D=>D.trim()),T=Parsing.parseInt(B[3]),R=this.createHitObject(T);R.startX=Parsing.parseInt(B[0],Parsing.MAX_COORDINATE_VALUE),R.startY=Parsing.parseInt(B[1],Parsing.MAX_COORDINATE_VALUE),R.startTime=Parsing.parseFloat(B[2])+I,R.hitType=T,R.hitSound=Parsing.parseInt(B[4]);const P=new SampleBank;this.addExtras(B.slice(5),R,P,I,_.fileFormat),this.addComboOffset(R,_),R.samples.length===0&&(R.samples=this.convertSoundType(R.hitSound,P)),_.hitObjects.push(R)}static addComboOffset(A,_){const I=_.originalMode===0,B=_.originalMode===2;if(!I&&!B)return;const T=A,R=Math.trunc((A.hitType&HitType.ComboOffset)>>4),P=!!(A.hitType&HitType.NewCombo);(A.hitType&HitType.Normal||A.hitType&HitType.Slider)&&(T.isNewCombo=P||this._forceNewCombo,T.comboOffset=R+this._extraComboOffset,this._forceNewCombo=!1,this._extraComboOffset=0),A.hitType&HitType.Spinner&&(this._forceNewCombo=_.fileFormat<=8||P||!1,this._extraComboOffset+=R)}static addExtras(A,_,I,B,T){if(_.hitType&HitType.Normal&&A.length>0&&this.readCustomSampleBanks(A[0],I),_.hitType&HitType.Slider)return this.addSliderExtras(A,_,I,T);if(_.hitType&HitType.Spinner)return this.addSpinnerExtras(A,_,I,B);if(_.hitType&HitType.Hold)return this.addHoldExtras(A,_,I,B)}static addSliderExtras(A,_,I,B){const T=A[0],R=_.startPosition,P=Parsing.parseInt(A[1]);if(_.repeats>9e3)throw new Error("Repeat count is way too high");if(_.repeats=Math.max(0,P-1),_.path.controlPoints=this.convertPathString(T,R,B),_.path.curveType=_.path.controlPoints[0].type,A.length>2){const D=Parsing.parseFloat(A[2],Parsing.MAX_COORDINATE_VALUE);_.path.expectedDistance=Math.max(0,D)}A.length>5&&this.readCustomSampleBanks(A[5],I),_.samples=this.convertSoundType(_.hitSound,I),_.nodeSamples=this.getSliderNodeSamples(A,_,I)}static addSpinnerExtras(A,_,I,B){_.endTime=Parsing.parseInt(A[0])+B,A.length>1&&this.readCustomSampleBanks(A[1],I)}static addHoldExtras(A,_,I,B){if(_.endTime=_.startTime,A.length>0&&A[0]){const T=A[0].split(":");_.endTime=Math.max(_.endTime,Parsing.parseFloat(T[0]))+B,this.readCustomSampleBanks(T.slice(1).join(":"),I)}}static getSliderNodeSamples(A,_,I){const B=_.repeats+2,T=[];for(let D=0;D<B;++D)T.push(I.clone());if(A.length>4&&A[4].length>0){const D=A[4].split("|");for(let F=0;F<B&&!(F>=D.length);++F)this.readCustomSampleBanks(D[F],T[F])}const R=[];for(let D=0;D<B;++D)R.push(_.hitSound);if(A.length>3&&A[3].length>0){const D=A[3].split("|");for(let F=0;F<B&&!(F>=D.length);++F)R[F]=parseInt(D[F])||HitSound.None}const P=[];for(let D=0;D<B;D++)P.push(this.convertSoundType(R[D],T[D]));return P}static convertPathString(A,_,I){const B=A.split("|").map(F=>F.trim()),T=[];let R=0,P=0,D=!0;for(;++P<B.length;){if(B[P].length>1)continue;const F=B.slice(R,P),L=P<B.length-1?B[P+1]:null,U=this.convertPoints(F,L,D,_,I);for(const V of U)T.push(...V);R=P,D=!1}if(P>R){const F=B.slice(R,P),L=this.convertPoints(F,null,D,_,I);for(const U of L)T.push(...U)}return T}static*convertPoints(A,_,I,B,T){const R=I?1:0,P=_!==null?1:0,D=[];R===1&&(D[0]=new PathPoint);for(let J=1;J<A.length;++J)D[R+J-1]=V(A[J],B);_!==null&&(D[D.length-1]=V(_,B));let F=this.convertPathType(A[0]);F===PathType.PerfectCurve&&(D.length!==3?F=PathType.Bezier:K(D)&&(F=PathType.Linear)),D[0].type=F;let L=0,U=0;for(;++U<D.length-P;){if(!D[U].position.equals(D[U-1].position))continue;const J=T<BeatmapEncoder.FIRST_LAZER_VERSION;F===PathType.Catmull&&U>1&&J||U!==D.length-P-1&&(D[U-1].type=F,yield D.slice(L,U),L=U+1)}U>L&&(yield D.slice(L,U));function V(J,ee){const ie=J.split(":").map(ce=>Math.trunc(Parsing.parseFloat(ce,Parsing.MAX_COORDINATE_VALUE))),ne=new Vector2(ie[0],ie[1]).fsubtract(ee);return new PathPoint(ne)}function K(J){const ee=(J[1].position.y-J[0].position.y)*(J[2].position.x-J[0].position.x),ie=(J[1].position.x-J[0].position.x)*(J[2].position.y-J[0].position.y);return Math.abs(ee-ie)<.001}}static convertPathType(A){switch(A){default:case"C":return PathType.Catmull;case"B":return PathType.Bezier;case"L":return PathType.Linear;case"P":return PathType.PerfectCurve}}static readCustomSampleBanks(A,_){if(!A)return;const I=A.split(":");_.normalSet=Parsing.parseInt(I[0]),_.additionSet=Parsing.parseInt(I[1]),_.additionSet===SampleSet.None&&(_.additionSet=_.normalSet),I.length>2&&(_.customIndex=Parsing.parseInt(I[2])),I.length>3&&(_.volume=Math.max(0,Parsing.parseInt(I[3]))),_.filename=I.length>4?I[4]:""}static convertSoundType(A,_){if(_.filename){const B=new HitSample$1;return B.filename=_.filename,B.volume=_.volume,[B]}const I=[new HitSample$1];if(I[0].hitSound=HitSound[HitSound.Normal],I[0].sampleSet=SampleSet[_.normalSet],I[0].isLayered=A!==HitSound.None&&!(A&HitSound.Normal),A&HitSound.Finish){const B=new HitSample$1;B.hitSound=HitSound[HitSound.Finish],I.push(B)}if(A&HitSound.Whistle){const B=new HitSample$1;B.hitSound=HitSound[HitSound.Whistle],I.push(B)}if(A&HitSound.Clap){const B=new HitSample$1;B.hitSound=HitSound[HitSound.Clap],I.push(B)}return I.forEach((B,T)=>{B.sampleSet=T!==0?SampleSet[_.additionSet]:SampleSet[_.normalSet],B.volume=_.volume,B.customIndex=0,_.customIndex>=2&&(B.customIndex=_.customIndex)}),I}static createHitObject(A){if(A&HitType.Normal)return new HittableObject;if(A&HitType.Slider)return new SlidableObject;if(A&HitType.Spinner)return new SpinnableObject;if(A&HitType.Hold)return new HoldableObject;throw new Error(`Unknown hit object type: ${A}!`)}}class BeatmapMetadataDecoder{static handleLine(A,_){const[I,...B]=A.split(":"),T=B.join(":").trim();switch(I.trim()){case"Title":_.metadata.title=T;break;case"TitleUnicode":_.metadata.titleUnicode=T;break;case"Artist":_.metadata.artist=T;break;case"ArtistUnicode":_.metadata.artistUnicode=T;break;case"Creator":_.metadata.creator=T;break;case"Version":_.metadata.version=T;break;case"Source":_.metadata.source=T;break;case"Tags":_.metadata.tags=T.split(" ");break;case"BeatmapID":_.metadata.beatmapId=Parsing.parseInt(T);break;case"BeatmapSetID":_.metadata.beatmapSetId=Parsing.parseInt(T)}}}class BeatmapTimingPointDecoder{static pendingTime=0;static pendingTypes=[];static pendingPoints=[];static controlPoints;static handleLine(A,_,I){this.controlPoints=_.controlPoints;const B=A.split(",");let T=TimeSignature.SimpleQuadruple,R=SampleSet[SampleSet.None],P=0,D=100,F=!0,L=EffectType.None;if(B.length>2)switch(B.length){default:case 8:L=Parsing.parseInt(B[7]);case 7:F=B[6]==="1";case 6:D=Parsing.parseInt(B[5]);case 5:P=Parsing.parseInt(B[4]);case 4:R=SampleSet[Parsing.parseInt(B[3])];case 3:T=Parsing.parseInt(B[2])}if(T<1)throw new Error("The numerator of a time signature must be positive.");const U=Parsing.parseFloat(B[0])+I,V=Parsing.parseFloat(B[1],Parsing.MAX_PARSE_VALUE,!0);let K=1,J=1;if(V<0&&(J=100/-V,K=Math.min(Math.fround(-V),1e4),K=Math.max(10,K)/100),F&&Number.isNaN(V))throw new Error("Beat length cannot be NaN in a timing control point");if(F){const ce=new TimingPoint;ce.beatLength=V,ce.timeSignature=T,this.addControlPoint(ce,U,!0)}const ee=new DifficultyPoint;ee.bpmMultiplier=K,ee.sliderVelocity=J,ee.generateTicks=!Number.isNaN(V),ee.isLegacy=!0,this.addControlPoint(ee,U,F);const ie=new EffectPoint;ie.kiai=(L&EffectType.Kiai)>0,ie.omitFirstBarLine=(L&EffectType.OmitFirstBarLine)>0,(_.originalMode===1||_.originalMode===3)&&(ie.scrollSpeed=J),this.addControlPoint(ie,U,F);const ne=new SamplePoint;ne.sampleSet=R,ne.customIndex=P,ne.volume=D,this.addControlPoint(ne,U,F)}static addControlPoint(A,_,I){_!==this.pendingTime&&this.flushPendingPoints(),I?this.pendingPoints.unshift(A):this.pendingPoints.push(A),this.pendingTime=_}static flushPendingPoints(){const A=this.pendingTime,_=this.pendingPoints,I=this.controlPoints,B=this.pendingTypes;let T=_.length;for(;--T>=0;)B.includes(_[T].pointType)||(B.push(_[T].pointType),I.add(_[T],A));this.pendingPoints=[],this.pendingTypes=[]}}class ReplayDecoder{static decodeLifeBar(A){if(!A)return[];const _=[],I=A.split(",");for(let B=0;B<I.length;++B){if(!I[B])continue;const T=I[B].split("|");if(T.length<2)continue;const R=this.handleLifeBarFrame(T);_.push(R)}return _}static handleLifeBarFrame(A){return new LifeBarFrame(Parsing.parseInt(A[0]),Parsing.parseFloat(A[1]))}static decodeReplayFrames(A){if(!A)return[];let _=0;const I=[],B=A.split(",");for(let T=0;T<B.length;++T){if(!B[T])continue;const R=B[T].split("|");if(R.length<4||R[0]==="-12345")continue;const P=this.handleReplayFrame(R);_+=P.interval,!(T<2&&P.mouseX===256&&P.mouseY===-500)&&(P.interval<0||(P.startTime=_,I.push(P)))}return I}static handleReplayFrame(A){return new LegacyReplayFrame(0,Parsing.parseFloat(A[0]),new Vector2(Parsing.parseFloat(A[1],Parsing.MAX_COORDINATE_VALUE),Parsing.parseFloat(A[2],Parsing.MAX_COORDINATE_VALUE)),Parsing.parseInt(A[3]))}}class SerializationReader{view;_bytesRead=0;get bytesRead(){return this._bytesRead}constructor(A){this.view=new DataView(new Uint8Array(A).buffer)}get remainingBytes(){return this.view.byteLength-this._bytesRead}readByte(){return this.view.getUint8(this._bytesRead++)}readBytes(A){const _=this.view.buffer.slice(this._bytesRead,this._bytesRead+A);return this._bytesRead+=A,new Uint8Array(_)}readShort(){const A=this.view.getUint16(this._bytesRead,!0);return this._bytesRead+=2,A}readInteger(){const A=this.view.getInt32(this._bytesRead,!0);return this._bytesRead+=4,A}readLong(){const A=this.view.getBigInt64(this._bytesRead,!0);return this._bytesRead+=8,A}readDate(){return new Date(Number(this.readLong()/BigInt(1e4))-621355968e5)}readULEB128(){let A=0,_=0,I=0;do I=this.readByte(),A|=(I&127)<<_,_+=7;while((I&128)!==0);return A}readString(){if(this.readByte()!==11)return"";const A=this.readULEB128();return A>0?stringifyBuffer(this.readBytes(A)):""}}class StoryboardGeneralDecoder{static handleLine(A,_){const[I,...B]=A.split(":").map(R=>R.trim()),T=B.join(" ");switch(I){case"UseSkinSprites":_.useSkinSprites=T==="1"}}}class StoryboardVariableDecoder{static handleLine(A,_){if(!A.startsWith("$"))return;const I=A.split("=");I.length===2&&_.set(I[0],I[1].trimEnd())}static decodeVariables(A,_){return!A.includes("$")||!_.size||_.forEach((I,B)=>{A=A.replace(B,I)}),A}}class Decoder{async _getFileBuffer(A){try{await browserFSOperation(A)}catch{throw new Error("File doesn't exist!")}try{return await browserFSOperation(A)}catch{throw new Error("File can't be read!")}}async _getFileUpdateDate(A){try{return(await browserFSOperation(A)).mtime}catch{throw new Error("Failed to get last file update date!")}}}class SectionMap extends Map{currentSection=null;get(A){return super.get(A)??!1}set(A,_=!0){return super.set(A,_)}reset(){return this.forEach((A,_,I)=>{I.set(_,!0)}),this.currentSection=null,this}get hasEnabledSections(){for(const A of this.values())if(A)return!0;return!1}get isSectionEnabled(){return this.currentSection?this.get(this.currentSection):!1}}class SectionDecoder extends Decoder{_lines=null;_foundFirstNonEmptyLine=!1;_sectionMap=new SectionMap;_getLines(A){let _=null;if(A.constructor===Array&&(_=A),!_||!_.length)throw new Error("Data not found!");return _}_parseLine(A,_){if(!this._foundFirstNonEmptyLine&&A.includes("osu file format v")){const I=A.trim();try{return I.startsWith("osu file format v")&&(_.fileFormat=Parsing.parseInt(I.split("v")[1])),LineType.FileFormat}catch{throw new Error("Wrong file format version!")}}if(!this._foundFirstNonEmptyLine&&!this._isEmptyLine(A)&&(this._foundFirstNonEmptyLine=!0),this._shouldSkipLine(A))return LineType.Empty;if(A=this._preprocessLine(A),A.startsWith("[")&&A.endsWith("]")){const I=A.slice(1,-1);return this._sectionMap.currentSection&&(this._sectionMap.set(this._sectionMap.currentSection,!1),this._sectionMap.currentSection=null),this._sectionMap.hasEnabledSections?(I in Section&&(this._sectionMap.currentSection=I),LineType.Section):LineType.Break}if(!this._sectionMap.isSectionEnabled)return LineType.Empty;try{return this._parseSectionData(A,_),LineType.Data}catch{return LineType.Empty}}_parseSectionData(A,_){const I=_;this._sectionMap.currentSection===Section.Colours&&I?.colors&&BeatmapColorDecoder.handleLine(A,I)}_preprocessLine(A){return this._sectionMap.currentSection!==Section.Metadata&&(A=this._stripComments(A)),A.trimEnd()}_shouldSkipLine(A){return this._isEmptyLine(A)||A.startsWith("//")}_isEmptyLine(A){return typeof A!="string"||!A}_stripComments(A){const _=A.indexOf("//");return _>0?A.substring(0,_):A}_reset(){this._sectionMap.reset(),this._lines=null,this._foundFirstNonEmptyLine=!1}_setEnabledSections(A){this._sectionMap.set(Section.Colours,A?.parseColours)}}class StoryboardDecoder extends SectionDecoder{_variables=new Map;async decodeFromPath(A,_){if(!A.endsWith(FileFormat.Beatmap)&&!A.endsWith(FileFormat.Storyboard))throw new Error(`Wrong format of the first file! Only ${FileFormat.Beatmap} and ${FileFormat.Storyboard} files are supported!`);if(typeof _=="string"&&!_.endsWith(FileFormat.Storyboard))throw new Error(`Wrong format of the second file! Only ${FileFormat.Storyboard} files are supported as a second argument!`);try{const I=await this._getFileBuffer(A),B=typeof _=="string"?await this._getFileBuffer(A):void 0;return this.decodeFromBuffer(I,B)}catch(I){const B=I.message||I;throw new Error(`Failed to decode a storyboard: '${B}'`)}}decodeFromBuffer(A,_){const I=stringifyBuffer(A),B=_?stringifyBuffer(_):void 0;return this.decodeFromString(I,B)}decodeFromString(A,_){typeof A!="string"&&(A=String(A)),typeof _!="string"&&typeof _<"u"&&(_=String(_));const I=A.split(/\r?\n/),B=_?.split(/\r?\n/);return this.decodeFromLines(I,B)}decodeFromLines(A,_){const I=new Storyboard$1;this._reset(),this._setEnabledSections(),this._lines=[...this._getLines(A),..._?this._getLines(_):[]];for(let B=0;B<this._lines.length&&this._parseLine(this._lines[B],I)!==LineType.Break;++B);return I.variables=this._variables,I}_parseSectionData(A,_){switch(this._sectionMap.currentSection){case Section.General:return StoryboardGeneralDecoder.handleLine(A,_);case Section.Events:return StoryboardEventDecoder.handleLine(A,_);case Section.Variables:return StoryboardVariableDecoder.handleLine(A,this._variables)}super._parseSectionData(A,_)}_setEnabledSections(){super._setEnabledSections(),this._sectionMap.set(Section.General),this._sectionMap.set(Section.Variables),this._sectionMap.set(Section.Events)}_preprocessLine(A){return A=StoryboardVariableDecoder.decodeVariables(A,this._variables),super._preprocessLine(A)}_reset(){super._reset(),this._sectionMap.currentSection=Section.Events}}class BeatmapDecoder extends SectionDecoder{static EARLY_VERSION_TIMING_OFFSET=24;_offset=0;_sbLines=null;async decodeFromPath(A,_){if(!A.endsWith(FileFormat.Beatmap))throw new Error(`Wrong file format! Only ${FileFormat.Beatmap} files are supported!`);try{const I=await this._getFileBuffer(A),B=this.decodeFromBuffer(I,_);return B.fileUpdateDate=await this._getFileUpdateDate(A),B}catch(I){const B=I.message||I;throw new Error(`Failed to decode a beatmap: ${B}`)}}decodeFromBuffer(A,_){return this.decodeFromString(stringifyBuffer(A),_)}decodeFromString(A,_){return A=typeof A!="string"?String(A):A,this.decodeFromLines(A.split(/\r?\n/),_)}decodeFromLines(A,_){const I=new Beatmap$1;this._reset(),this._lines=this._getLines(A),this._setEnabledSections(typeof _!="boolean"?_:{}),this._sbLines=this._shouldParseStoryboard(_)?[]:null;for(let B=0;B<this._lines.length&&this._parseLine(this._lines[B],I)!==LineType.Break;++B);BeatmapTimingPointDecoder.flushPendingPoints();for(let B=0;B<I.hitObjects.length;++B)I.hitObjects[B].applyDefaults(I.controlPoints,I.difficulty);if(I.hitObjects.sort((B,T)=>B.startTime-T.startTime),this._sbLines&&this._sbLines.length){const B=new StoryboardDecoder;I.events.storyboard=B.decodeFromLines(this._sbLines),I.events.storyboard.useSkinSprites=I.general.useSkinSprites,I.events.storyboard.colors=I.colors,I.events.storyboard.fileFormat=I.fileFormat}return I}_parseSectionData(A,_){switch(this._sectionMap.currentSection){case Section.General:return BeatmapGeneralDecoder.handleLine(A,_,this._offset);case Section.Editor:return BeatmapEditorDecoder.handleLine(A,_);case Section.Metadata:return BeatmapMetadataDecoder.handleLine(A,_);case Section.Difficulty:return BeatmapDifficultyDecoder.handleLine(A,_);case Section.Events:return BeatmapEventDecoder.handleLine(A,_,this._sbLines,this._offset);case Section.TimingPoints:return BeatmapTimingPointDecoder.handleLine(A,_,this._offset);case Section.HitObjects:return BeatmapHitObjectDecoder.handleLine(A,_,this._offset)}super._parseSectionData(A,_)}_setEnabledSections(A){super._setEnabledSections(A),this._sectionMap.set(Section.General,A?.parseGeneral),this._sectionMap.set(Section.Editor,A?.parseEditor),this._sectionMap.set(Section.Metadata,A?.parseMetadata),this._sectionMap.set(Section.Difficulty,A?.parseDifficulty),this._sectionMap.set(Section.Events,A?.parseEvents),this._sectionMap.set(Section.TimingPoints,A?.parseTimingPoints),this._sectionMap.set(Section.HitObjects,A?.parseHitObjects)}_shouldParseStoryboard(A){const _=A,I=_?.parseStoryboard??A,B=typeof I=="boolean"?I:!0;return(_?.parseEvents??!0)&&B}}class ScoreDecoder extends Decoder{async decodeFromPath(A,_=!0){if(!A.endsWith(FileFormat.Replay))throw new Error(`Wrong file format! Only ${FileFormat.Replay} files are supported!`);try{const I=await this._getFileBuffer(A);return await this.decodeFromBuffer(I,_)}catch(I){const B=I.message||I;throw new Error(`Failed to decode a score: '${B}'`)}}async decodeFromBuffer(A,_=!0){const I=new SerializationReader(A),B=new ScoreInfo;let T=null;try{B.rulesetId=I.readByte();const R=I.readInteger();B.beatmapHashMD5=I.readString(),B.username=I.readString();const P=I.readString();B.count300=I.readShort(),B.count100=I.readShort(),B.count50=I.readShort(),B.countGeki=I.readShort(),B.countKatu=I.readShort(),B.countMiss=I.readShort(),B.totalScore=I.readInteger(),B.maxCombo=I.readShort(),B.perfect=!!I.readByte(),B.rawMods=I.readInteger();const D=I.readString();B.date=I.readDate();const F=I.readInteger(),L=I.readBytes(F);if(_&&F>0){T=new Replay$1;const U=await LZMA.decompress(L),V=stringifyBuffer(U);T.mode=B.rulesetId,T.gameVersion=R,T.hashMD5=P,T.frames=ReplayDecoder.decodeReplayFrames(V),T.lifeBar=ReplayDecoder.decodeLifeBar(D)}return B.id=this._parseScoreId(R,I),new Score(B,T)}catch{return new Score(B,T)}}_parseScoreId(A,_){return A>=20140721?Number(_.readLong()):A>=20121008?_.readInteger():0}}class StandardNoMod extends NoMod{}class StandardNoFail extends NoFail{}class StandardEasy extends Easy{}class StandardTouchDevice{constructor(){this.name="Touch Device",this.acronym="TD",this.bitwise=ModBitwise.TouchDevice,this.type=ModType.System,this.multiplier=1,this.isRanked=!0,this.incompatibles=ModBitwise.None}}class StandardHidden extends Hidden{applyToBeatmap(A){for(const _ of A.hitObjects)this._applyFadeAdjustments(_)}_applyFadeAdjustments(A){A.timeFadeIn=A.timePreempt*StandardHidden.FADE_IN_DURATION_MULTIPLIER;for(const _ of A.nestedHitObjects)this._applyFadeAdjustments(_)}}StandardHidden.FADE_IN_DURATION_MULTIPLIER=.4;StandardHidden.FADE_OUT_DURATION_MULTIPLIER=.3;class StandardHitWindows extends HitWindows{isHitResultAllowed(A){switch(A){case HitResult.Great:case HitResult.Ok:case HitResult.Meh:case HitResult.Miss:return!0}return!1}_getRanges(){return StandardHitWindows.OSU_RANGES}}StandardHitWindows.OSU_RANGES=[new DifficultyRange(HitResult.Great,80,50,20),new DifficultyRange(HitResult.Ok,140,100,60),new DifficultyRange(HitResult.Meh,200,150,100),new DifficultyRange(HitResult.Miss,400,400,400)];class StandardHitObject extends HitObject{constructor(){super(...arguments),this.timePreempt=600,this.timeFadeIn=400,this._scale=.5,this._stackHeight=0,this._stackOffset=new Vector2(0,0),this.currentComboIndex=0,this.comboIndex=0,this.comboIndexWithOffsets=0,this.comboOffset=0,this.lastInCombo=!1,this.isNewCombo=!1,this.hitWindows=new StandardHitWindows}get endPosition(){return this.startPosition}get endX(){return this.endPosition.x}set endX(A){this.endPosition.x=A}get endY(){return this.endPosition.y}set endY(A){this.endPosition.y=A}get scale(){return this._scale}set scale(A){this._scale=A;const _=Math.fround(Math.fround(this._stackHeight*this._scale)*Math.fround(-6.4));this._stackOffset.x=this._stackOffset.y=_}get radius(){return StandardHitObject.OBJECT_RADIUS*this._scale}get stackHeight(){return this._stackHeight}set stackHeight(A){this._stackHeight=A;const _=Math.fround(Math.fround(this._stackHeight*this._scale)*Math.fround(-6.4));this._stackOffset.x=this._stackOffset.y=_,this.nestedHitObjects.forEach(I=>{I.stackHeight=this._stackHeight})}get stackedOffset(){return this._stackOffset}set stackedOffset(A){this._stackOffset=A}get stackedStartPosition(){return this.startPosition.fadd(this.stackedOffset)}get stackedEndPosition(){return this.endPosition.fadd(this.stackedOffset)}applyDefaultsToSelf(A,_){super.applyDefaultsToSelf(A,_),this.timePreempt=Math.fround(BeatmapDifficultySection.range(_.approachRate,1800,1200,450)),this.timeFadeIn=400*Math.min(1,this.timePreempt/StandardHitObject.PREEMPT_MIN);const I=Math.fround(Math.fround(.7)*Math.fround(_.circleSize-5));this.scale=Math.fround(Math.fround(1-Math.fround(I/5))/2)}clone(){const A=super.clone();return A.stackHeight=this.stackHeight,A.scale=this.scale,A.currentComboIndex=this.currentComboIndex,A.comboIndex=this.comboIndex,A.comboIndexWithOffsets=this.comboIndexWithOffsets,A.comboOffset=this.comboOffset,A.lastInCombo=this.lastInCombo,A}}StandardHitObject.OBJECT_RADIUS=64;StandardHitObject.BASE_SCORING_DISTANCE=100;StandardHitObject.PREEMPT_MIN=450;class Circle extends StandardHitObject{}class SliderHead extends Circle{}class SliderTick extends StandardHitObject{constructor(){super(...arguments),this.spanIndex=0,this.spanStartTime=0,this.hitWindows=StandardHitWindows.empty}applyDefaultsToSelf(A,_){super.applyDefaultsToSelf(A,_);const I=this.spanIndex>0?200:this.timePreempt*Math.fround(.66);this.timePreempt=(this.startTime-this.spanStartTime)/2+I}clone(){const A=super.clone();return A.spanIndex=this.spanIndex,A.spanStartTime=this.spanStartTime,A}}class SliderEnd extends Circle{constructor(A){super(),this.repeatIndex=0,this.hitWindows=StandardHitWindows.empty,this._slider=A}get spanDuration(){return this._slider.spanDuration}applyDefaultsToSelf(A,_){if(super.applyDefaultsToSelf(A,_),this.repeatIndex>0){this.timeFadeIn=0,this.timePreempt=this.spanDuration*2;return}const I=Math.fround(2/3);this.timePreempt=this.startTime-this._slider.startTime+this._slider.timePreempt*I}}class SliderRepeat extends SliderEnd{}class SliderTail extends SliderEnd{}class SpinnerTick extends StandardHitObject{constructor(){super(...arguments),this.hitWindows=StandardHitWindows.empty}}class SpinnerBonusTick extends SpinnerTick{}class StandardEventGenerator extends EventGenerator{static*generateSliderTicks(A){for(const _ of EventGenerator.generate(A)){const I=A.path.positionAt(_.progress);switch(_.eventType){case SliderEventType.Head:{const B=new SliderHead;B.startPosition=A.startPosition,B.startTime=_.startTime,yield B;break}case SliderEventType.Repeat:{const B=new SliderRepeat(A);B.repeatIndex=_.spanIndex,B.startTime=_.startTime,B.startPosition=A.startPosition.fadd(I),B.scale=A.scale,yield B;break}case SliderEventType.LegacyLastTick:{const B=new SliderTail(A);B.repeatIndex=_.spanIndex,B.startTime=_.startTime,B.startPosition=A.endPosition,yield B;break}case SliderEventType.Tick:{const B=new SliderTick;B.spanIndex=_.spanIndex,B.spanStartTime=_.spanStartTime,B.startTime=_.startTime,B.startPosition=A.startPosition.fadd(I),B.scale=A.scale,yield B}}}}static*generateSpinnerTicks(A){const _=A.maximumBonusSpins+A.spinsRequired;for(let I=0;I<_;++I){const B=I<A.spinsRequired?new SpinnerTick:new SpinnerBonusTick;B.startTime=A.startTime+(I+1/_)*A.duration,yield B}}}class Slider extends StandardHitObject{constructor(){super(...arguments),this.tickDistance=0,this.tickRate=1,this.velocity=1,this.lazyTravelDistance=0,this.lazyTravelTime=0,this.hitWindows=StandardHitWindows.empty,this.path=new SliderPath,this.nodeSamples=[],this.repeats=0,this.startPosition=new Vector2(0,0)}get startX(){return this._updateHeadPosition(),this.startPosition.floatX}set startX(A){this.startPosition.x=A,this._updateHeadPosition()}get startY(){return this._updateHeadPosition(),this.startPosition.floatY}set startY(A){this.startPosition.y=A,this._updateHeadPosition()}get endX(){return this._updateTailPosition(),this.endPosition.floatX}set endX(A){this.endPosition.x=A,this._updateTailPosition()}get endY(){return this._updateTailPosition(),this.endPosition.floatY}set endY(A){this.endPosition.y=A,this._updateTailPosition()}get head(){return this.nestedHitObjects.find(_=>_ instanceof SliderHead)||null}get tail(){return this.nestedHitObjects.find(_=>_ instanceof SliderTail)||null}get distance(){return this.path.distance}set distance(A){this.path.distance=A}get spans(){return this.repeats+1}get spanDuration(){return this.duration/this.spans}get duration(){return this.endTime-this.startTime}get endPosition(){const A=this.path.curvePositionAt(1,this.spans);if(isFinite(A.x)&&isFinite(A.y))return this.startPosition.fadd(A);const _=this.path.controlPoints;return _.length?_[_.length-1].position:this.startPosition}get endTime(){return this.startTime+this.spans*this.distance/this.velocity}applyDefaultsToSelf(A,_){super.applyDefaultsToSelf(A,_);const I=A.timingPointAt(this.startTime),B=A.difficultyPointAt(this.startTime),T=StandardHitObject.BASE_SCORING_DISTANCE*_.sliderMultiplier*B.sliderVelocity,R=B.generateTicks;this.velocity=T/I.beatLength,this.tickDistance=R?T/_.sliderTickRate*this.tickRate:1/0}createNestedHitObjects(){this.nestedHitObjects=[];for(const A of StandardEventGenerator.generateSliderTicks(this))this.nestedHitObjects.push(A)}_updateHeadPosition(){this.head!==null&&(this.head.startPosition=this.startPosition)}_updateTailPosition(){this.tail!==null&&(this.tail.startPosition=this.endPosition)}clone(){const A=super.clone();return A.nodeSamples=this.nodeSamples.map(_=>_.map(I=>I.clone())),A.velocity=this.velocity,A.repeats=this.repeats,A.path=this.path.clone(),A.tickDistance=this.tickDistance,A.tickRate=this.tickRate,A.legacyLastTickOffset=this.legacyLastTickOffset,A}}let Spinner$1=class Gi extends StandardHitObject{constructor(){super(...arguments),this.spinsRequired=1,this.maximumBonusSpins=1,this.endTime=0,this.hitWindows=StandardHitWindows.empty}get duration(){return this.endTime-this.startTime}applyDefaultsToSelf(A,_){super.applyDefaultsToSelf(A,_);const I=this.duration/1e3,B=Gi.STABLE_MATCHING_FUDGE*BeatmapDifficultySection.range(_.overallDifficulty,3,5,7.5),T=Gi.MAXIMUM_ROTATIONS-B;this.spinsRequired=Math.trunc(I*B),this.maximumBonusSpins=Math.trunc(I*T)}createNestedHitObjects(){this.nestedHitObjects=[];for(const A of StandardEventGenerator.generateSpinnerTicks(this))this.nestedHitObjects.push(A)}clone(){const A=super.clone();return A.endTime=this.endTime,A.spinsRequired=this.spinsRequired,A.maximumBonusSpins=this.maximumBonusSpins,A}};Spinner$1.STABLE_MATCHING_FUDGE=.6;Spinner$1.MAXIMUM_ROTATIONS=8;class StandardHardRock extends HardRock{applyToHitObjects(A){A.forEach(_=>{StandardHardRock._reflectVertically(_)})}static _reflectVertically(A){if(A.startY=StandardHardRock.BASE_SIZE.y-A.startY,!(A instanceof Slider))return;const _=A;_.nestedHitObjects.forEach(B=>{(B instanceof SliderTick||B instanceof SliderRepeat)&&(B.startY=StandardHardRock.BASE_SIZE.y-B.startY)}),_.path.controlPoints.forEach(B=>{B.position.y*=-1}),_.path.invalidate(),_.endY=_.endPosition.y}}StandardHardRock.BASE_SIZE=new Vector2(512,384);class StandardSuddenDeath extends SuddenDeath{}class StandardDoubleTime extends DoubleTime{}class StandardRelax extends Relax{}class StandardHalfTime extends HalfTime{}class StandardNightcore extends Nightcore{}class StandardFlashlight extends Flashlight$1{}class StandardAutoplay extends Autoplay{}class StandardSpunOut{constructor(){this.name="Spun Out",this.acronym="SO",this.bitwise=ModBitwise.SpunOut,this.type=ModType.Automation,this.multiplier=.9,this.isRanked=!0,this.incompatibles=ModBitwise.Autoplay|ModBitwise.Cinema|ModBitwise.Relax2}}class StandardAutopilot{constructor(){this.name="Autopilot",this.acronym="AP",this.bitwise=ModBitwise.Relax2,this.type=ModType.Automation,this.multiplier=1,this.isRanked=!1,this.incompatibles=ModBitwise.NoFail|ModBitwise.SuddenDeath|ModBitwise.Perfect|ModBitwise.Autoplay|ModBitwise.Cinema|ModBitwise.Relax|ModBitwise.SpunOut}}class StandardPerfect extends Perfect{}class StandardCinema extends Cinema{}class StandardModCombination extends ModCombination{get mode(){return 0}get _availableMods(){return[new StandardNoMod,new StandardNoFail,new StandardEasy,new StandardTouchDevice,new StandardHidden,new StandardHardRock,new StandardSuddenDeath,new StandardDoubleTime,new StandardRelax,new StandardHalfTime,new StandardNightcore,new StandardFlashlight,new StandardAutoplay,new StandardSpunOut,new StandardAutopilot,new StandardPerfect,new StandardCinema]}}class StandardBeatmap extends RulesetBeatmap{constructor(){super(...arguments),this.mods=new StandardModCombination,this.hitObjects=[]}get mode(){return 0}get maxCombo(){return this.hitObjects.reduce((A,_)=>_ instanceof Circle?A+1:_ instanceof Slider?A+_.nestedHitObjects.length:_ instanceof Spinner$1?A+1:A,0)}get circles(){return this.hitObjects.filter(A=>A instanceof Circle)}get sliders(){return this.hitObjects.filter(A=>A instanceof Slider)}get spinners(){return this.hitObjects.filter(A=>A instanceof Spinner$1)}}class StandardBeatmapConverter extends BeatmapConverter{canConvert(A){return A.hitObjects.every(_=>_.startPosition)}*convertHitObjects(A){const _=A.hitObjects;for(const I of _){if(I instanceof StandardHitObject){yield I.clone();continue}yield this._convertHitObject(I,A)}}_convertHitObject(A,_){const I=A,B=A;return I.path?this._convertSlider(I,_):typeof B.endTime=="number"?this._convertSpinner(B):this._convertCircle(A)}_convertCircle(A){const _=new Circle;return this._copyProperties(_,A),_}_convertSlider(A,_){var I;const B=new Slider;if(this._copyProperties(B,A),B.repeats=A.repeats,B.nodeSamples=A.nodeSamples,B.path=A.path,B.legacyLastTickOffset=(I=A?.legacyLastTickOffset)!==null&&I!==void 0?I:0,B.tickRate=1,_.fileFormat<8){const T=_.controlPoints.difficultyPointAt(A.startTime);B.tickRate=Math.fround(1/T.sliderVelocity)}return B}_convertSpinner(A){const _=new Spinner$1;return this._copyProperties(_,A),_.endTime=A.endTime,_}_copyProperties(A,_){var I,B,T;const R=_,P=_;A.startPosition=(I=R?.startPosition)!==null&&I!==void 0?I:new Vector2(0,0),A.startTime=_.startTime,A.hitType=_.hitType,A.hitSound=_.hitSound,A.samples=_.samples,A.comboOffset=(B=P?.comboOffset)!==null&&B!==void 0?B:0,A.isNewCombo=(T=P?.isNewCombo)!==null&&T!==void 0?T:!1}createBeatmap(){return new StandardBeatmap}}class StandardBeatmapProcessor extends BeatmapProcessor{postProcess(A){return super.postProcess(A),A.fileFormat>=6?this._applyStackingNew(A):this._applyStackingOld(A),A}_applyStackingNew(A){const _=A.hitObjects,I=A.general.stackLeniency,B=StandardBeatmapProcessor.STACK_DISTANCE,T=0,R=_.length-1;let P=R;if(R<_.length-1)for(let F=R;F>=T;--F){let L=F;for(let U=L+1;U<_.length;++U){const V=_[L];if(V instanceof Spinner$1)break;const K=_[U];if(K instanceof Spinner$1)continue;const J=V.endTime||V.startTime,ee=K.timePreempt*I;if(K.startTime-J>ee)break;const ie=V.startPosition.fdistance(K.startPosition)<B,ne=V instanceof Slider&&V.endPosition.fdistance(K.startPosition)<B;(ie||ne)&&(L=U,K.stackHeight=0)}if(L>P&&(P=L,P===_.length-1))break}let D=T;for(let F=P;F>T;--F){let L=F,U=_[F];if(U.stackHeight!==0||U instanceof Spinner$1)continue;const V=U.timePreempt*I;if(U instanceof Circle)for(;--L>=0;){const K=_[L];if(K instanceof Spinner$1)continue;const J=K.endTime||K.startTime;if(U.startTime-J>V)break;L<D&&(K.stackHeight=0,D=L);const ee=K.endPosition.fdistance(U.startPosition);if(K instanceof Slider&&ee<B){const ie=U.stackHeight-K.stackHeight+1;for(let ne=L+1;ne<=F;++ne){const ce=_[ne];K.endPosition.fdistance(ce.startPosition)<B&&(ce.stackHeight-=ie)}break}K.startPosition.fdistance(U.startPosition)<B&&(K.stackHeight=U.stackHeight+1,U=K)}else if(U instanceof Slider)for(;--L>=T;){const K=_[L];if(K instanceof Spinner$1)continue;if(U.startTime-K.startTime>V)break;K.endPosition.fdistance(U.startPosition)<B&&(K.stackHeight=U.stackHeight+1,U=K)}}}_applyStackingOld(A){const _=A.hitObjects,I=A.general.stackLeniency,B=StandardBeatmapProcessor.STACK_DISTANCE;for(let T=0,R=_.length;T<R;++T){const P=_[T];if(P.stackHeight!==0&&!(P instanceof Slider))continue;let D=P.endTime||P.startTime,F=0;for(let L=T+1;L<R;++L){const U=_[T].timePreempt*I;if(_[L].startTime-U>D)break;const V=P.endPosition;_[L].startPosition.fdistance(P.startPosition)<B?(++P.stackHeight,D=_[L].endTime||_[L].startTime):_[L].startPosition.fdistance(V)<B&&(_[L].stackHeight-=++F,D=_[L].endTime||_[L].startTime)}}}}StandardBeatmapProcessor.STACK_DISTANCE=3;class StandardDifficultyAttributes extends DifficultyAttributes{constructor(){super(...arguments),this.aimDifficulty=0,this.speedDifficulty=0,this.speedNoteCount=0,this.flashlightDifficulty=0,this.sliderFactor=0,this.approachRate=0,this.overallDifficulty=0,this.drainRate=0,this.hitCircleCount=0,this.sliderCount=0,this.spinnerCount=0}}class StandardPerformanceAttributes extends PerformanceAttributes{constructor(A,_){super(A,_),this.aimPerformance=0,this.speedPerformance=0,this.accuracyPerformance=0,this.flashlightPerformance=0,this.effectiveMissCount=0,this.mods=A}}var _a;class StandardDifficultyHitObject extends DifficultyHitObject{constructor(A,_,I,B,T,R){super(A,_,B,T,R),this.lazyJumpDistance=0,this.minimumJumpDistance=0,this.minimumJumpTime=0,this.travelDistance=0,this.travelTime=0,this.angle=null,this.hitWindowGreat=0,this.baseObject=A,this.lastObject=_,this._lastLastObject=I,this.strainTime=Math.max(this.deltaTime,_a.MIN_DELTA_TIME),this.hitWindowGreat=this.baseObject instanceof Slider&&this.baseObject.head?2*this.baseObject.head.hitWindows.windowFor(HitResult.Great)/B:2*this.baseObject.hitWindows.windowFor(HitResult.Great)/B,this._setDistances(B)}opacityAt(A,_){if(A>this.baseObject.startTime)return 0;const I=this.baseObject.startTime-this.baseObject.timePreempt,B=this.baseObject.timeFadeIn;if(_){const T=this.baseObject.startTime-this.baseObject.timePreempt+this.baseObject.timeFadeIn,R=this.baseObject.timePreempt*StandardHidden.FADE_OUT_DURATION_MULTIPLIER;return Math.min(MathUtils.clamp((A-I)/B,0,1),1-MathUtils.clamp((A-T)/R,0,1))}return MathUtils.clamp((A-I)/B,0,1)}_setDistances(A){var _,I;const B=this.baseObject,T=this.lastObject;if(B instanceof Slider&&(this._computeSliderCursorPosition(B),this.travelDistance=Math.fround(Math.fround(B.lazyTravelDistance)*Math.fround(Math.pow(1+B.repeats/2.5,1/2.5))),this.travelTime=Math.max(B.lazyTravelTime/A,_a.MIN_DELTA_TIME)),B instanceof Spinner$1||T instanceof Spinner$1)return;let R=Math.fround(_a.NORMALIZED_RADIUS/Math.fround(B.radius));if(B.radius<30){const L=Math.fround(Math.min(Math.fround(30-Math.fround(B.radius)),5)/50);R=Math.fround(R*Math.fround(1+L))}const P=this._getEndCursorPosition(T),D=B.stackedStartPosition.fscale(R),F=P.fscale(R);if(this.lazyJumpDistance=D.fsubtract(F).flength(),this.minimumJumpTime=this.strainTime,this.minimumJumpDistance=this.lazyJumpDistance,T instanceof Slider){const L=Math.max(T.lazyTravelTime/A,_a.MIN_DELTA_TIME);this.minimumJumpTime=Math.max(this.strainTime-L,_a.MIN_DELTA_TIME);const U=(I=(_=T.tail)===null||_===void 0?void 0:_.stackedStartPosition)!==null&&I!==void 0?I:T.stackedStartPosition,V=B.stackedStartPosition,K=Math.fround(U.fsubtract(V).flength()*R),J=_a.MAXIMUM_SLIDER_RADIUS,ee=_a.ASSUMED_SLIDER_RADIUS;this.minimumJumpDistance=MathUtils.clamp(this.lazyJumpDistance-(J-ee),0,Math.fround(K-J))}if(this._lastLastObject!==null&&!(this._lastLastObject instanceof Spinner$1)){const U=this._getEndCursorPosition(this._lastLastObject).fsubtract(T.stackedStartPosition),V=B.stackedStartPosition.fsubtract(P),K=U.fdot(V),J=Math.fround(Math.fround(U.floatX*V.floatY)-Math.fround(U.floatY*V.floatX));this.angle=Math.abs(Math.atan2(J,K))}}_computeSliderCursorPosition(A){if(A.lazyEndPosition)return;const _=A.nestedHitObjects[A.nestedHitObjects.length-1];A.lazyTravelTime=_.startTime-A.startTime;let I=A.lazyTravelTime/A.spanDuration;I=I%2>=1?1-I%1:I%1;const B=A.path.positionAt(I);A.lazyEndPosition=A.stackedStartPosition.fadd(B);let T=A.stackedStartPosition;const R=_a.NORMALIZED_RADIUS/A.radius;for(let P=1;P<A.nestedHitObjects.length;++P){const D=A.nestedHitObjects[P];let F=D.stackedStartPosition.fsubtract(T),L=R*F.flength(),U=_a.ASSUMED_SLIDER_RADIUS;if(P===A.nestedHitObjects.length-1){const V=A.lazyEndPosition.fsubtract(T);V.flength()<F.flength()&&(F=V),L=R*F.flength()}else D instanceof SliderRepeat&&(U=_a.NORMALIZED_RADIUS);if(L>U){const V=Math.fround((L-U)/L);T=T.fadd(F.fscale(V)),L*=(L-U)/L,A.lazyTravelDistance=Math.fround(A.lazyTravelDistance+Math.fround(L))}P===A.nestedHitObjects.length-1&&(A.lazyEndPosition=T)}}_getEndCursorPosition(A){var _;return A instanceof Slider?(this._computeSliderCursorPosition(A),(_=A.lazyEndPosition)!==null&&_!==void 0?_:A.stackedStartPosition):A.stackedStartPosition}}_a=StandardDifficultyHitObject;StandardDifficultyHitObject.NORMALIZED_RADIUS=50;StandardDifficultyHitObject.MIN_DELTA_TIME=25;StandardDifficultyHitObject.MAXIMUM_SLIDER_RADIUS=Math.fround(_a.NORMALIZED_RADIUS*Math.fround(2.4));StandardDifficultyHitObject.ASSUMED_SLIDER_RADIUS=Math.fround(_a.NORMALIZED_RADIUS*Math.fround(1.8));class StandardStrainSkill extends StrainSkill{constructor(){super(...arguments),this._reducedSectionCount=10,this._reducedStrainBaseline=.75,this._difficultyMultiplier=StandardStrainSkill.DEFAULT_DIFFICULTY_MULTIPLIER}get difficultyValue(){let A=0,_=1;const I=[...this.getCurrentStrainPeaks()].filter(R=>R>0).sort((R,P)=>P-R),B=(R,P,D)=>R+(P-R)*D,T=Math.min(I.length,this._reducedSectionCount);for(let R=0;R<T;++R){const P=Math.fround(R/this._reducedSectionCount),D=MathUtils.clamp01(P),F=Math.log10(B(1,10,D));I[R]*=B(this._reducedStrainBaseline,1,F)}return I.sort((R,P)=>P-R),I.forEach(R=>{A+=R*_,_*=this._decayWeight}),A*this._difficultyMultiplier}}StandardStrainSkill.DEFAULT_DIFFICULTY_MULTIPLIER=1.06;class AimEvaluator{static evaluateDifficultyOf(A,_){var I;if(A.baseObject instanceof Spinner$1||A.index<=1||((I=A.previous(0))===null||I===void 0?void 0:I.baseObject)instanceof Spinner$1)return 0;const B=A,T=A.previous(0),R=A.previous(1);let P=B.lazyJumpDistance/B.strainTime;if(T.baseObject instanceof Slider&&_){const fe=T.travelDistance/T.travelTime,de=B.minimumJumpDistance/B.minimumJumpTime;P=Math.max(P,de+fe)}let D=T.lazyJumpDistance/T.strainTime;if(R.baseObject instanceof Slider&&_){const fe=R.travelDistance/R.travelTime,de=T.minimumJumpDistance/T.minimumJumpTime;D=Math.max(D,de+fe)}let F=0,L=0,U=0,V=0,K=P;const J=Math.max(B.strainTime,T.strainTime),ee=Math.min(B.strainTime,T.strainTime);if(J<1.25*ee&&B.angle!==null&&T.angle!==null&&R.angle!==null){const fe=B.angle,de=T.angle,pe=R.angle,ve=Math.min(P,D);if(F=this._calcWideAngleBonus(fe),L=this._calcAcuteAngleBonus(fe),B.strainTime>100)L=0;else{L*=this._calcAcuteAngleBonus(de),L*=Math.min(ve,125/B.strainTime);const be=Math.PI/2*Math.min(1,(100-B.strainTime)/25);L*=Math.pow(Math.sin(be),2);const Te=Math.min(Math.max(B.lazyJumpDistance,50),100),ue=Math.PI/2*(Te-50)/50;L*=Math.pow(Math.sin(ue),2)}const ye=Math.pow(this._calcWideAngleBonus(de),3);F*=ve*(1-Math.min(F,ye));const _e=Math.pow(this._calcAcuteAngleBonus(pe),3);L*=.5+.5*(1-Math.min(L,_e))}if(Math.max(D,P)!==0){D=(T.lazyJumpDistance+R.travelDistance)/T.strainTime,P=(B.lazyJumpDistance+T.travelDistance)/B.strainTime;const fe=Math.abs(D-P),de=Math.max(D,P),pe=Math.pow(Math.sin(Math.PI/2*fe/de),2),ve=Math.min(B.strainTime,T.strainTime),ye=Math.abs(D-P);V=Math.min(125/ve,ye)*pe;const be=Math.min(B.strainTime,T.strainTime),Te=Math.max(B.strainTime,T.strainTime);V*=Math.pow(be/Te,2)}T.baseObject instanceof Slider&&(U=T.travelDistance/T.travelTime);const ie=L*this.ACUTE_ANGLE_MULTIPLIER,ne=F*this.WIDE_ANGLE_MULTIPLIER,ce=V*this.VELOCITY_CHANGE_MULTIPLIER;return K+=Math.max(ie,ne+ce),_&&(K+=U*this.SLIDER_MULTIPLIER),K}static _calcWideAngleBonus(A){const _=Math.min(.8333333333333334*Math.PI,Math.max(Math.PI/6,A)),I=3/4*(_-Math.PI/6);return Math.pow(Math.sin(I),2)}static _calcAcuteAngleBonus(A){return 1-this._calcWideAngleBonus(A)}}AimEvaluator.WIDE_ANGLE_MULTIPLIER=1.5;AimEvaluator.ACUTE_ANGLE_MULTIPLIER=1.95;AimEvaluator.SLIDER_MULTIPLIER=1.35;AimEvaluator.VELOCITY_CHANGE_MULTIPLIER=.75;class FlashlightEvaluator{static evaluateDifficultyOf(A,_){if(A.baseObject instanceof Spinner$1)return 0;const I=A,B=I.baseObject,T=52/B.radius;let R=1,P=0,D=0,F=0,L=I;for(let V=0;V<Math.min(A.index,10);V++){const K=A.previous(V),J=K.baseObject;if(!(K.baseObject instanceof Spinner$1)){const ee=B.stackedStartPosition.fsubtract(J.stackedEndPosition).flength();P+=L.strainTime,V===0&&(R=Math.min(1,ee/75));const ie=Math.min(1,K.lazyJumpDistance/T/25),ne=I.opacityAt(J.startTime,_),ce=1+this.MAX_OPACITY_BONUS*(1-ne);D+=ie*ce*T*ee/P,K.angle!==null&&I.angle!==null&&Math.abs(K.angle-I.angle)<.02&&(F+=Math.max(1-.1*V,0))}L=K}D=Math.pow(R*D,2),_&&(D*=1+this.HIDDEN_BONUS),D*=this.MIN_ANGLE_MULTIPLIER+(1-this.MIN_ANGLE_MULTIPLIER)/(F+1);let U=0;if(I.baseObject instanceof Slider){const V=I.baseObject,K=V.lazyTravelDistance/T,J=Math.max(0,K/I.travelTime-this.MIN_VELOCITY);U=Math.pow(J,.5),U*=K,V.repeats>0&&(U/=V.repeats+1)}return D+=U*this.SLIDER_MULTIPLIER,D}}FlashlightEvaluator.MAX_OPACITY_BONUS=.4;FlashlightEvaluator.HIDDEN_BONUS=.2;FlashlightEvaluator.MIN_VELOCITY=.5;FlashlightEvaluator.SLIDER_MULTIPLIER=1.3;FlashlightEvaluator.MIN_ANGLE_MULTIPLIER=.2;class RhythmEvaluator{static evaluateDifficultyOf(A){var _,I,B,T;if(A.baseObject instanceof Spinner$1)return 0;let R=0,P=!1,D=0,F=0,L=0,U=1;const V=Math.min(A.index,32);for(;D<V-2&&A.startTime-((I=(_=A.previous(D))===null||_===void 0?void 0:_.startTime)!==null&&I!==void 0?I:0)<this.HISTORY_TIME_MAX;)D++;for(let K=D;K>0;--K){const J=A.previous(K-1),ee=A.previous(K),ie=A.previous(K+1);let ne=(this.HISTORY_TIME_MAX-(A.startTime-J.startTime))/this.HISTORY_TIME_MAX;ne=Math.min((V-K)/V,ne);const ce=J.strainTime,fe=ee.strainTime,de=ie.strainTime,pe=Math.min(fe,ce)/Math.max(fe,ce),ve=1+6*Math.min(.5,Math.pow(Math.sin(Math.PI/pe),2)),ye=Math.max(0,Math.abs(fe-ce)-J.hitWindowGreat*.3);let _e=Math.min(1,ye/(J.hitWindowGreat*.3));_e=Math.min(1,_e);let be=_e*ve;if(P)if(!(fe>1.25*ce||fe*1.25<ce))U<7&&U++;else{((B=A.previous(K-1))===null||B===void 0?void 0:B.baseObject)instanceof Slider&&(be*=.125),((T=A.previous(K))===null||T===void 0?void 0:T.baseObject)instanceof Slider&&(be*=.25),F===U&&(be*=.25),F%2===U%2&&(be*=.5),de>fe+10&&fe>ce+10&&(be*=.125);const Te=Math.sqrt(be*R),ue=Math.sqrt(4+U),O=Math.sqrt(4+F);L+=Te*ne*ue/2*O/2,R=be,F=U,fe*1.25<ce&&(P=!1),U=1}else fe>1.25*ce&&(P=!0,R=be,U=1)}return Math.sqrt(4+L*this.RHYTHM_MULTIPLIER)/2}}RhythmEvaluator.HISTORY_TIME_MAX=5e3;RhythmEvaluator.RHYTHM_MULTIPLIER=.75;class SpeedEvaluator{static evaluateDifficultyOf(A){var _;if(A.baseObject instanceof Spinner$1)return 0;const I=A,B=A.index>0?A.previous(0):null,T=A.next(0);let R=I.strainTime,P=1;if(T!==null){const V=Math.max(1,I.deltaTime),K=Math.max(1,T.deltaTime),J=Math.abs(K-V),ee=V/Math.max(V,J),ie=Math.pow(Math.min(1,V/I.hitWindowGreat),2);P=Math.pow(ee,1-ie)}R/=MathUtils.clamp(R/I.hitWindowGreat/.93,.92,1);let D=1;R<this.MIN_SPEED_BONUS&&(D=1+.75*Math.pow((this.MIN_SPEED_BONUS-R)/this.SPEED_BALANCING_FACTOR,2));const F=(_=B?.travelDistance)!==null&&_!==void 0?_:0,L=Math.min(this.SINGLE_SPACING_THRESHOLD,F+I.minimumJumpDistance),U=Math.pow(L/this.SINGLE_SPACING_THRESHOLD,3.5);return(D+D*U)*P/R}}SpeedEvaluator.SINGLE_SPACING_THRESHOLD=125;SpeedEvaluator.MIN_SPEED_BONUS=75;SpeedEvaluator.SPEED_BALANCING_FACTOR=40;class Aim extends StandardStrainSkill{constructor(A,_){super(A),this._currentStrain=0,this._withSliders=_}_strainDecay(A){return Math.pow(Aim.STRAIN_DECAY_BASE,A/1e3)}_calculateInitialStrain(A,_){var I,B;return this._currentStrain*this._strainDecay(A-((B=(I=_.previous(0))===null||I===void 0?void 0:I.startTime)!==null&&B!==void 0?B:0))}_strainValueAt(A){this._currentStrain*=this._strainDecay(A.deltaTime);const _=AimEvaluator.evaluateDifficultyOf(A,this._withSliders);return this._currentStrain+=_*Aim.SKILL_MULTIPLIER,this._currentStrain}}Aim.SKILL_MULTIPLIER=23.55;Aim.STRAIN_DECAY_BASE=.15;class Flashlight extends StrainSkill{constructor(A){super(A),this._currentStrain=0,this._hasHiddenMod=A.any(StandardHidden)}_strainDecay(A){return Math.pow(Flashlight.STRAIN_DECAY_BASE,A/1e3)}_calculateInitialStrain(A,_){var I,B;return this._currentStrain*this._strainDecay(A-((B=(I=_.previous(0))===null||I===void 0?void 0:I.startTime)!==null&&B!==void 0?B:0))}_strainValueAt(A){this._currentStrain*=this._strainDecay(A.deltaTime);const _=FlashlightEvaluator.evaluateDifficultyOf(A,this._hasHiddenMod);return this._currentStrain+=_*Flashlight.SKILL_MULTIPLIER,this._currentStrain}get difficultyValue(){return[...this.getCurrentStrainPeaks()].reduce((_,I)=>_+I)*StandardStrainSkill.DEFAULT_DIFFICULTY_MULTIPLIER}}Flashlight.SKILL_MULTIPLIER=.052;Flashlight.STRAIN_DECAY_BASE=.15;class Speed extends StandardStrainSkill{constructor(){super(...arguments),this._currentStrain=0,this._currentRhythm=0,this._reducedSectionCount=5,this._difficultyMultiplier=1.04,this._objectStrains=[]}_strainDecay(A){return Math.pow(Speed.STRAIN_DECAY_BASE,A/1e3)}_calculateInitialStrain(A,_){var I,B;const T=this._strainDecay(A-((B=(I=_.previous(0))===null||I===void 0?void 0:I.startTime)!==null&&B!==void 0?B:0));return this._currentStrain*this._currentRhythm*T}_strainValueAt(A){const _=A;this._currentStrain*=this._strainDecay(_.strainTime);const I=SpeedEvaluator.evaluateDifficultyOf(A);this._currentStrain+=I*Speed.SKILL_MULTIPLIER,this._currentRhythm=RhythmEvaluator.evaluateDifficultyOf(A);const B=this._currentStrain*this._currentRhythm;return this._objectStrains.push(B),B}relevantNoteCount(){if(this._objectStrains.length===0)return 0;const A=Math.max(...this._objectStrains);return A===0?0:this._objectStrains.reduce((_,I)=>_+1/(1+Math.exp(6-I/A*12)),0)}}Speed.SKILL_MULTIPLIER=1375;Speed.STRAIN_DECAY_BASE=.3;class StandardPerformanceCalculator extends PerformanceCalculator{constructor(A,_,I){super(A,_,I),this._mods=new StandardModCombination,this._scoreMaxCombo=0,this._countGreat=0,this._countOk=0,this._countMeh=0,this._countMiss=0,this._accuracy=1,this._effectiveMissCount=0,this.attributes=_,this._addParams(_,I)}calculateAttributes(A,_){if(this._addParams(A,_),!this.attributes)return new StandardPerformanceAttributes(this._mods,0);let I=StandardPerformanceCalculator.PERFORMANCE_BASE_MULTIPLIER;if(this._mods.any(StandardNoFail)&&(I*=Math.max(.9,1-.02*this._effectiveMissCount)),this._mods.any(StandardSpunOut)&&this._totalHits>0&&(I*=1-Math.pow(this.attributes.spinnerCount/this._totalHits,.85)),this._mods.any(StandardRelax)){const L=Math.max(0,this.attributes.overallDifficulty>0?1-Math.pow(this.attributes.overallDifficulty/13.33,1.8):1),U=Math.max(0,this.attributes.overallDifficulty>0?1-Math.pow(this.attributes.overallDifficulty/13.33,5):1),V=this._countOk*L,K=this._countMeh*U;this._effectiveMissCount=Math.min(this._effectiveMissCount+V+K,this._totalHits)}const B=this._computeAimValue(this.attributes),T=this._computeSpeedValue(this.attributes),R=this._computeAccuracyValue(this.attributes),P=this._computeFlashlightValue(this.attributes),D=Math.pow(Math.pow(B,1.1)+Math.pow(T,1.1)+Math.pow(R,1.1)+Math.pow(P,1.1),1/1.1)*I,F=new StandardPerformanceAttributes(this._mods,D);return F.aimPerformance=B,F.speedPerformance=T,F.accuracyPerformance=R,F.flashlightPerformance=P,F.effectiveMissCount=this._effectiveMissCount,F}_computeAimValue(A){const _=Math.max(1,A.aimDifficulty/.0675);let I=Math.pow(5*_-4,3)/1e5;const B=.95+.4*Math.min(1,this._totalHits/2e3)+(this._totalHits>2e3?Math.log10(this._totalHits/2e3)*.5:0);if(I*=B,this._effectiveMissCount>0){const P=Math.pow(this._effectiveMissCount/this._totalHits,.775);I*=.97*Math.pow(1-P,this._effectiveMissCount)}I*=this._getComboScalingFactor(A);let T=0;A.approachRate>10.33?T=.3*(A.approachRate-10.33):A.approachRate<8&&(T=.05*(8-A.approachRate)),this._mods.any(StandardRelax)&&(T=0),I*=1+T*B,this._mods.any(StandardHidden)&&(I*=1+.04*(12-A.approachRate));const R=A.sliderCount*.15;if(A.sliderCount>0){const P=this._countOk+this._countMeh+this._countMiss,D=A.maxCombo-this._scoreMaxCombo,F=Math.min(P,D),L=MathUtils.clamp(F,0,R),U=Math.pow(1-L/R,3),V=(1-A.sliderFactor)*U+A.sliderFactor;I*=V}return I*=this._accuracy,I*=.98+Math.pow(A.overallDifficulty,2)/2500,I}_computeSpeedValue(A){if(this._mods.any(StandardRelax))return 0;const _=Math.max(1,A.speedDifficulty/.0675);let I=Math.pow(5*_-4,3)/1e5;const B=.95+.4*Math.min(1,this._totalHits/2e3)+(this._totalHits>2e3?Math.log10(this._totalHits/2e3)*.5:0);if(I*=B,this._effectiveMissCount>0){const ee=Math.pow(this._effectiveMissCount/this._totalHits,.775);I*=.97*Math.pow(1-ee,Math.pow(this._effectiveMissCount,.875))}I*=this._getComboScalingFactor(A);let T=0;A.approachRate>10.33&&(T=.3*(A.approachRate-10.33)),I*=1+T*B,this._mods.any(StandardHidden)&&(I*=1+.04*(12-A.approachRate));const R=this._totalHits-A.speedNoteCount,P=Math.max(0,this._countGreat-R),D=Math.max(0,this._countOk-Math.max(0,R-this._countGreat)),F=Math.max(0,this._countMeh-Math.max(0,R-this._countGreat-this._countOk)),L=A.speedNoteCount!==0?(P*6+D*2+F)/(A.speedNoteCount*6):0,U=.95+Math.pow(A.overallDifficulty,2)/750,V=(this._accuracy+L)/2,K=(14.5-Math.max(A.overallDifficulty,8))/2;I*=U*Math.pow(V,K);const J=this._countMeh<this._totalHits/500?0:this._countMeh-this._totalHits/500;return I*=Math.pow(.99,J),I}_computeAccuracyValue(A){if(this._mods.any(StandardRelax))return 0;let _=0;const I=A.hitCircleCount;I>0&&(_=(this._countGreat-(this._totalHits-I))*6+this._countOk*2+this._countMeh,_/=I*6),_=Math.max(0,_);let B=Math.pow(1.52163,A.overallDifficulty)*Math.pow(_,24)*2.83;return B*=Math.min(1.15,Math.pow(I/1e3,.3)),this._mods.any(StandardHidden)&&(B*=1.08),this._mods.any(StandardFlashlight)&&(B*=1.02),B}_computeFlashlightValue(A){if(!this._mods.any(StandardFlashlight))return 0;let _=Math.pow(A.flashlightDifficulty,2)*25;if(this._effectiveMissCount>0){const I=Math.pow(this._effectiveMissCount/this._totalHits,.775),B=Math.pow(this._effectiveMissCount,.875);_*=.97*Math.pow(1-I,B)}return _*=this._getComboScalingFactor(A),_*=.7+.1*Math.min(1,this._totalHits/200)+(this._totalHits>200?.2*Math.min(1,(this._totalHits-200)/200):0),_*=.5+this._accuracy/2,_*=.98+Math.pow(A.overallDifficulty,2)/2500,_}_calculateEffectiveMissCount(A){let _=0;if(A.sliderCount>0){const I=A.maxCombo-.1*A.sliderCount;this._scoreMaxCombo<I&&(_=I/Math.max(1,this._scoreMaxCombo))}return _=Math.min(_,this._countOk+this._countMeh+this._countMiss),Math.max(this._countMiss,_)}_addParams(A,_){var I,B,T,R,P,D,F;_&&(this._mods=(I=_?.mods)!==null&&I!==void 0?I:new StandardModCombination,this._scoreMaxCombo=(B=_.maxCombo)!==null&&B!==void 0?B:this._scoreMaxCombo,this._countGreat=(T=_.statistics.get(HitResult.Great))!==null&&T!==void 0?T:this._countGreat,this._countOk=(R=_.statistics.get(HitResult.Ok))!==null&&R!==void 0?R:this._countOk,this._countMeh=(P=_.statistics.get(HitResult.Meh))!==null&&P!==void 0?P:this._countMeh,this._countMiss=(D=_.statistics.get(HitResult.Miss))!==null&&D!==void 0?D:this._countMiss,this._accuracy=(F=_.accuracy)!==null&&F!==void 0?F:this._accuracy),A&&(this.attributes=A,this._effectiveMissCount=this._calculateEffectiveMissCount(this.attributes))}_getComboScalingFactor(A){return A.maxCombo<=0?1:Math.min(Math.pow(this._scoreMaxCombo,.8)/Math.pow(A.maxCombo,.8),1)}get _totalHits(){return this._countGreat+this._countOk+this._countMeh+this._countMiss}}StandardPerformanceCalculator.PERFORMANCE_BASE_MULTIPLIER=1.14;class StandardDifficultyCalculator extends DifficultyCalculator{constructor(){super(...arguments),this._DIFFICULTY_MULTIPLIER=.0675}_createDifficultyAttributes(A,_,I,B){if(A.hitObjects.length===0)return new StandardDifficultyAttributes(_,0);let T=Math.sqrt(I[0].difficultyValue)*this._DIFFICULTY_MULTIPLIER,R=Math.sqrt(I[2].difficultyValue)*this._DIFFICULTY_MULTIPLIER,P=Math.sqrt(I[3].difficultyValue)*this._DIFFICULTY_MULTIPLIER;const D=Math.sqrt(I[1].difficultyValue)*this._DIFFICULTY_MULTIPLIER,F=I[2].relevantNoteCount(),L=T>0?D/T:1;_.any(StandardTouchDevice)&&(T=Math.pow(T,.8),P=Math.pow(P,.8)),_.any(StandardRelax)&&(T*=.9,R=0,P*=.7);const U=Math.pow(5*Math.max(1,T/.0675)-4,3)/1e5,V=Math.pow(5*Math.max(1,R/.0675)-4,3)/1e5;let K=0;_.any(StandardFlashlight)&&(K=Math.pow(P,2)*25);const J=Math.pow(Math.pow(U,1.1)+Math.pow(V,1.1)+Math.pow(K,1.1),1/1.1),ee=StandardPerformanceCalculator.PERFORMANCE_BASE_MULTIPLIER,ie=J>1e-5?Math.cbrt(ee)*.027*(Math.cbrt(1e5/Math.pow(2,1/1.1)*J)+4):0,ne=A.difficulty.approachRate,ce=DifficultyRange.map(ne,1800,1200,450)/B,fe=A.hitObjects.filter(Te=>Te instanceof Circle),de=A.hitObjects.filter(Te=>Te instanceof Slider),pe=A.hitObjects.filter(Te=>Te instanceof Spinner$1),ve=de.reduce((Te,ue)=>Te+ue.nestedHitObjects.length,0),ye=new StandardHitWindows;ye.setDifficulty(A.difficulty.overallDifficulty);const _e=ye.windowFor(HitResult.Great)/B,be=new StandardDifficultyAttributes(_,ie);return be.aimDifficulty=T,be.speedDifficulty=R,be.speedNoteCount=F,be.flashlightDifficulty=P,be.sliderFactor=L,be.hitCircleCount=fe.length,be.sliderCount=de.length,be.spinnerCount=pe.length,be.maxCombo=fe.length+pe.length+ve,be.drainRate=A.difficulty.drainRate,be.overallDifficulty=(80-_e)/6,be.approachRate=ce>1200?(1800-ce)/120:(1200-ce)/150+5,be}_createDifficultyHitObjects(A,_){const I=[];for(let B=1;B<A.hitObjects.length;++B){const T=B>1?A.hitObjects[B-2]:null,R=A.hitObjects[B-1],P=A.hitObjects[B],D=new StandardDifficultyHitObject(P,R,T,_,I,I.length);I.push(D)}return I}_createSkills(A,_){return[new Aim(_,!0),new Aim(_,!1),new Speed(_),new Flashlight(_)]}get difficultyMods(){return[new StandardDoubleTime,new StandardHalfTime,new StandardEasy,new StandardHardRock,new StandardFlashlight]}}var StandardAction;(function(E){E[E.LeftButton=0]="LeftButton",E[E.RightButton=1]="RightButton",E[E.Smoke=2]="Smoke"})(StandardAction||(StandardAction={}));class StandardReplayFrame extends ReplayFrame{constructor(){super(...arguments),this.position=new Vector2(0,0),this.actions=new Set}fromLegacy(A){return this.startTime=A.startTime,this.interval=A.interval,this.position=A.position,A.mouseLeft&&this.actions.add(StandardAction.LeftButton),A.mouseRight&&this.actions.add(StandardAction.RightButton),A.smoke&&this.actions.add(StandardAction.Smoke),this}toLegacy(){let A=ReplayButtonState.None;return this.actions.has(StandardAction.LeftButton)&&(A|=ReplayButtonState.Left1),this.actions.has(StandardAction.RightButton)&&(A|=ReplayButtonState.Right1),this.actions.has(StandardAction.Smoke)&&(A|=ReplayButtonState.Smoke),new LegacyReplayFrame(this.startTime,this.interval,this.position,A)}}class StandardReplayConverter extends ReplayConverter{_createConvertibleReplayFrame(){return new StandardReplayFrame}_isConvertedReplayFrame(A){return A instanceof StandardReplayFrame}}class StandardRuleset extends Ruleset{get id(){return 0}applyToBeatmap(A){return super.applyToBeatmap(A)}applyToBeatmapWithMods(A,_){return super.applyToBeatmapWithMods(A,_)}resetMods(A){return super.resetMods(A)}createModCombination(A){return new StandardModCombination(A)}_createBeatmapProcessor(){return new StandardBeatmapProcessor}_createBeatmapConverter(){return new StandardBeatmapConverter}_createReplayConverter(){return new StandardReplayConverter}createDifficultyCalculator(A){return new StandardDifficultyCalculator(A,this)}createPerformanceCalculator(A,_){return new StandardPerformanceCalculator(this,A,_)}}var __defProp$4=Object.defineProperty,__defNormalProp$4=(E,A,_)=>A in E?__defProp$4(E,A,{enumerable:!0,configurable:!0,writable:!0,value:_}):E[A]=_,__publicField$4=(E,A,_)=>__defNormalProp$4(E,typeof A!="symbol"?A+"":A,_);class Spring{constructor(A={}){__publicField$4(this,"x"),__publicField$4(this,"ax"),__publicField$4(this,"dx"),__publicField$4(this,"tx"),__publicField$4(this,"_options"),this.x=0,this.ax=0,this.dx=0,this.tx=0,this._options=A,this._options.max=A.max??160,this._options.damp=A.damp??.8,this._options.springiness=A.springiness??.1}update(){this.ax=(this.tx-this.x)*this._options.springiness,this.dx+=this.ax,this.dx*=this._options.damp,this.dx<-this._options.max?this.dx=-this._options.max:this.dx>this._options.max&&(this.dx=this._options.max),this.x+=this.dx}}var __defProp$3=Object.defineProperty,__defNormalProp$3=(E,A,_)=>A in E?__defProp$3(E,A,{enumerable:!0,configurable:!0,writable:!0,value:_}):E[A]=_,__publicField$3=(E,A,_)=>__defNormalProp$3(E,typeof A!="symbol"?A+"":A,_);class ScrollSpring{constructor(A={}){__publicField$3(this,"done"),__publicField$3(this,"to"),__publicField$3(this,"_spring"),__publicField$3(this,"_pos"),__publicField$3(this,"_speed"),__publicField$3(this,"_correctSpeed"),this._spring=new Spring(A),this._pos=0,this.to=0}start(A,_,I){this._speed=A,this._pos=_,this.to=I,this.done=!1,this._spring.x=this._pos,this._spring.tx=this.to;const B=this.to-this._pos,T=Math.abs(B)/B,R=Math.abs(this._speed)/this._speed;T!==R?this._correctSpeed=!0:this._correctSpeed=!1}update(){if(this._correctSpeed)this._speed*=.6,Math.abs(this._speed)<2&&(this._correctSpeed=!1),this._pos+=this._speed,this._spring.x=this._pos;else{const A=this.to-this._pos;Math.abs(A)<.05?(this._pos=this.to,this.done=!0):(this._spring.tx=this.to,this._spring.update(),this._pos=this._spring.x)}return this._pos}}var __defProp$2=Object.defineProperty,__defNormalProp$2=(E,A,_)=>A in E?__defProp$2(E,A,{enumerable:!0,configurable:!0,writable:!0,value:_}):E[A]=_,__publicField$2=(E,A,_)=>__defNormalProp$2(E,typeof A!="symbol"?A+"":A,_);class SlidingNumber{constructor(A={}){__publicField$2(this,"position",0),__publicField$2(this,"maxSpeed"),__publicField$2(this,"constrainPercent"),__publicField$2(this,"constrain"),__publicField$2(this,"min",0),__publicField$2(this,"max",0),__publicField$2(this,"_ease"),__publicField$2(this,"_offset",0),__publicField$2(this,"_prev",0),__publicField$2(this,"_speed",0),__publicField$2(this,"_hasStopped",!0),__publicField$2(this,"_targetSpeed",0),__publicField$2(this,"_speedChecker",0),__publicField$2(this,"_grab",0),__publicField$2(this,"_activeEase",null),this.constrain=A.constrain??!0,this.maxSpeed=A.maxSpeed??400,this._ease=A.ease??new ScrollSpring,this.constrainPercent=A.constrainPercent??0}set value(A){this._speed=0,this.position=A}get value(){return this.position}grab(A){this._grab=A,this._offset=this.position-A,this._speedChecker=0,this._targetSpeed=this._speed=0,this._hasStopped=!1}hold(A){this._speedChecker++,this.position=A+this._offset,this._speedChecker>1&&(this._targetSpeed=this.position-this._prev),this._speed+=(this._targetSpeed-this._speed)/2,this._speed>this.maxSpeed?this._speed=this.maxSpeed:this._speed<-this.maxSpeed&&(this._speed=-this.maxSpeed),this._prev=this.position,this.constrain&&(this.constrainPercent===0?this.position>this.min?this.position=this.min:this.position<this.max&&(this.position=this.max):this.position>this.min?this.position-=(this.position-this.min)/(1+this.constrainPercent):this.position<this.max&&(this.position+=(this.max-this.position)/(1+this.constrainPercent)))}slide(A=!1){this._hasStopped||(this.constrain?this._updateConstrain(A):this._updateDefault())}_updateDefault(){this._speed*=.9,this.position+=this._speed,(this._speed<0?this._speed*-1:this._speed)<.01&&(this._hasStopped=!0),this.position>this.min?(this.position=this.min,this._hasStopped=!0):this.position<this.max&&(this.position=this.max,this._hasStopped=!0)}_updateConstrain(A=!1){const _=this.max;A?this.position>this.min?this.position=this.min:this.position<this.max&&(this.position=this.max):this.position>this.min||this.position<_||this._activeEase?(this._activeEase||(this._activeEase=this._ease,this.position>this.min?this._activeEase.start(this._speed,this.position,this.min):this._activeEase.start(this._speed,this.position,_)),this.position=this._activeEase.update(),this._activeEase.done&&(this.position=this._activeEase.to,this._speed=0,this._activeEase=null)):this._updateDefault()}}var __defProp$1=Object.defineProperty,__defNormalProp$1=(E,A,_)=>A in E?__defProp$1(E,A,{enumerable:!0,configurable:!0,writable:!0,value:_}):E[A]=_,__publicField$1=(E,A,_)=>__defNormalProp$1(E,typeof A!="symbol"?A+"":A,_);class Trackpad{constructor(A){__publicField$1(this,"xAxis"),__publicField$1(this,"yAxis"),__publicField$1(this,"_isDown"),__publicField$1(this,"_globalPosition"),__publicField$1(this,"_frame"),__publicField$1(this,"_bounds"),__publicField$1(this,"_dirty"),__publicField$1(this,"disableEasing",!1),this.xAxis=new SlidingNumber({ease:A.xEase,maxSpeed:A.maxSpeed,constrain:A.constrain,constrainPercent:A.xConstrainPercent}),this.yAxis=new SlidingNumber({ease:A.yEase,maxSpeed:A.maxSpeed,constrain:A.constrain,constrainPercent:A.yConstrainPercent}),this.disableEasing=A.disableEasing??!1,this._frame=new Rectangle,this._bounds=new Rectangle,this._globalPosition=new Point$1}pointerDown(A){this._globalPosition=A,this.xAxis.grab(A.x),this.yAxis.grab(A.y),this._isDown=!0}pointerUp(){this._isDown=!1}pointerMove(A){this._globalPosition=A}update(){this._dirty&&(this._dirty=!1,this.xAxis.min=this._bounds.left,this.xAxis.min=this._bounds.right-this._frame.width,this.xAxis.min=this._bounds.top,this.xAxis.min=this._bounds.bottom-this._frame.height),this._isDown?(this.xAxis.hold(this._globalPosition.x),this.yAxis.hold(this._globalPosition.y)):(this.xAxis.slide(this.disableEasing),this.yAxis.slide(this.disableEasing))}resize(A,_){this._frame.x=0,this._frame.width=A,this._frame.y=0,this._frame.height=_,this._dirty=!0}setBounds(A,_,I,B){this._bounds.x=A,this._bounds.width=_-A,this._bounds.y=I,this._bounds.height=B-I,this._dirty=!0}get x(){return this.xAxis.value}set x(A){this.xAxis.value=A}get y(){return this.yAxis.value}set y(A){this.yAxis.value=A}}var __defProp=Object.defineProperty,__defNormalProp=(E,A,_)=>A in E?__defProp(E,A,{enumerable:!0,configurable:!0,writable:!0,value:_}):E[A]=_,__publicField=(E,A,_)=>__defNormalProp(E,typeof A!="symbol"?A+"":A,_);function bindAndPreserve(E,A,_){const I={},B=Object.getPrototypeOf(E);for(const T of _){const R=B[T];I[T]=R.bind(E),E[T]=(...P)=>A[T](...P)}return I}class LayoutContainer extends Container{constructor(A={}){const{layout:_,trackpad:I,background:B,children:T,...R}=A;super(R),__publicField(this,"background"),__publicField(this,"stroke",new Graphics$1({label:"stroke"})),__publicField(this,"overflowContainer",new Container({label:"overflowContainer"})),__publicField(this,"containerMethods"),__publicField(this,"_trackpad"),__publicField(this,"_mask",new Graphics$1),__publicField(this,"_isUserBackground",!1),__publicField(this,"_hitArea",new Rectangle),this.layout=_??{},T?.forEach(P=>this.addChild(P)),this.overflowContainer.isOverflowContainer=!0,this.background=B??new Graphics$1({label:"background"}),this._isUserBackground=!!B,this.addChild(this.background,this.overflowContainer,this._mask,this.stroke),this.containerMethods=bindAndPreserve(this,this.overflowContainer,["addChild","addChildAt","removeChild","removeChildAt","getChildAt","getChildIndex","setChildIndex","getChildByName","removeChildren","sortChildren","swapChildren","reparentChild","reparentChildAt","getChildByLabel","getChildrenByLabel"]),this._trackpad=new Trackpad({constrain:!0,...I}),this.eventMode="static",this.on("pointerdown",P=>this._trackpad.pointerDown(P.global)),this.on("pointerup",()=>this._trackpad.pointerUp()),this.on("pointerupoutside",()=>this._trackpad.pointerUp()),this.on("pointermove",P=>this._trackpad.pointerMove(P.global)),this.on("pointercancel",()=>this._trackpad.pointerUp()),this.on("wheel",P=>{var D;if(((D=this.layout)==null?void 0:D.style.overflow)!=="scroll")return;const L=P.shiftKey?1:0,U=P.deltaX*(L?1:-1),V=P.deltaY*(L?-1:1),K=this._trackpad.xAxis.value-U,J=this._trackpad.yAxis.value-V;this._trackpad.xAxis.value=Math.max(this._trackpad.xAxis.max,Math.min(this._trackpad.xAxis.min,K)),this._trackpad.yAxis.value=Math.max(this._trackpad.yAxis.max,Math.min(this._trackpad.yAxis.min,J))}),Ticker$1.shared.add(this.update,this)}computeLayoutData(A){return this._drawBackground(A),this._hitArea.width=A.width,this._hitArea.height=A.height,this.hitArea=this._hitArea,{x:A.left,y:A.top,offsetX:0,offsetY:0,scaleX:1,scaleY:1}}_updateMask(A,_,I=0){this._mask.clear(),this._mask.roundRect(0,0,A,_,I),this._mask.fill(255),this._mask.roundRect(1,1,A-2,_-2,I),this._mask.cut(),this._mask.roundRect(1,1,A-2,_-2,I),this._mask.fill(65280),this._mask.cut()}_updateBackground(A){const _=this.layout.style,{backgroundColor:I,borderRadius:B}=_;if(this._isUserBackground)this.background.position.set(0,0),this.background.setSize(A.width,A.height);else{const T=this.background;T.clear(),T.roundRect(0,0,A.width,A.height,B??0),I!=null&&T.fill({color:I})}}_drawBackground(A){var _;const I=this.layout.yoga.getBorder(Edge.All),B=this.layout.yoga.getBoxSizing(),T=B===BoxSizing.BorderBox?1:0,R=this.layout.style,{borderColor:P,borderRadius:D}=R;if(this._updateBackground(A),this.stroke.clear(),I>0&&P!=null&&(this.stroke.roundRect(0,0,A.width,A.height,D??0),this.stroke.stroke({color:P,width:I,alignment:T})),((_=this.layout)==null?void 0:_.style.overflow)!=="visible"){this._updateMask(A.width,A.height,R.borderRadius??0),this.setMask({mask:this._mask});const L=B===BoxSizing.BorderBox?I:0;setTimeout(()=>{const U=A.width-this.overflowContainer.width-L*2,V=A.height-this.overflowContainer.height-L*2;this._trackpad.xAxis.max=Math.min(0,U),this._trackpad.yAxis.max=Math.min(0,V)},1)}else this.mask=null,this._trackpad.xAxis.value=0,this._trackpad.yAxis.value=0,this.overflowContainer.position.set(0,0)}update(){var A;((A=this.layout)==null?void 0:A.style.overflow)==="scroll"&&(this._trackpad.update(),this.overflowContainer.x=this._trackpad.x,this.overflowContainer.y=this._trackpad.y)}destroy(A){super.destroy(A),Ticker$1.shared.remove(this.update,this)}}var lib$8={},gif={},lib$7={},hasRequiredLib$8;function requireLib$8(){if(hasRequiredLib$8)return lib$7;hasRequiredLib$8=1,Object.defineProperty(lib$7,"__esModule",{value:!0}),lib$7.loop=lib$7.conditional=lib$7.parse=void 0;var E=function I(B,T){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},P=arguments.length>3&&arguments[3]!==void 0?arguments[3]:R;if(Array.isArray(T))T.forEach(function(F){return I(B,F,R,P)});else if(typeof T=="function")T(B,R,P,I);else{var D=Object.keys(T)[0];Array.isArray(T[D])?(P[D]={},I(B,T[D],R,P[D])):P[D]=T[D](B,R,P,I)}return R};lib$7.parse=E;var A=function(B,T){return function(R,P,D,F){T(R,P,D)&&F(R,B,P,D)}};lib$7.conditional=A;var _=function(B,T){return function(R,P,D,F){for(var L=[],U=R.pos;T(R,P,D);){var V={};if(F(R,B,P,V),R.pos===U)break;U=R.pos,L.push(V)}return L}};return lib$7.loop=_,lib$7}var uint8={},hasRequiredUint8;function requireUint8(){if(hasRequiredUint8)return uint8;hasRequiredUint8=1,Object.defineProperty(uint8,"__esModule",{value:!0}),uint8.readBits=uint8.readArray=uint8.readUnsigned=uint8.readString=uint8.peekBytes=uint8.readBytes=uint8.peekByte=uint8.readByte=uint8.buildStream=void 0;var E=function(U){return{data:U,pos:0}};uint8.buildStream=E;var A=function(){return function(U){return U.data[U.pos++]}};uint8.readByte=A;var _=function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return function(V){return V.data[V.pos+U]}};uint8.peekByte=_;var I=function(U){return function(V){return V.data.subarray(V.pos,V.pos+=U)}};uint8.readBytes=I;var B=function(U){return function(V){return V.data.subarray(V.pos,V.pos+U)}};uint8.peekBytes=B;var T=function(U){return function(V){return Array.from(I(U)(V)).map(function(K){return String.fromCharCode(K)}).join("")}};uint8.readString=T;var R=function(U){return function(V){var K=I(2)(V);return U?(K[1]<<8)+K[0]:(K[0]<<8)+K[1]}};uint8.readUnsigned=R;var P=function(U,V){return function(K,J,ee){for(var ie=typeof V=="function"?V(K,J,ee):V,ne=I(U),ce=new Array(ie),fe=0;fe<ie;fe++)ce[fe]=ne(K);return ce}};uint8.readArray=P;var D=function(U,V,K){for(var J=0,ee=0;ee<K;ee++)J+=U[V+ee]&&Math.pow(2,K-ee-1);return J},F=function(U){return function(V){for(var K=A()(V),J=new Array(8),ee=0;ee<8;ee++)J[7-ee]=!!(K&1<<ee);return Object.keys(U).reduce(function(ie,ne){var ce=U[ne];return ce.length?ie[ne]=D(J,ce.index,ce.length):ie[ne]=J[ce.index],ie},{})}};return uint8.readBits=F,uint8}var hasRequiredGif;function requireGif(){return hasRequiredGif||(hasRequiredGif=1,(function(E){Object.defineProperty(E,"__esModule",{value:!0}),E.default=void 0;var A=requireLib$8(),_=requireUint8(),I={blocks:function(V){for(var K=0,J=[],ee=V.data.length,ie=0,ne=(0,_.readByte)()(V);ne!==K&&ne;ne=(0,_.readByte)()(V)){if(V.pos+ne>=ee){var ce=ee-V.pos;J.push((0,_.readBytes)(ce)(V)),ie+=ce;break}J.push((0,_.readBytes)(ne)(V)),ie+=ne}for(var fe=new Uint8Array(ie),de=0,pe=0;pe<J.length;pe++)fe.set(J[pe],de),de+=J[pe].length;return fe}},B=(0,A.conditional)({gce:[{codes:(0,_.readBytes)(2)},{byteSize:(0,_.readByte)()},{extras:(0,_.readBits)({future:{index:0,length:3},disposal:{index:3,length:3},userInput:{index:6},transparentColorGiven:{index:7}})},{delay:(0,_.readUnsigned)(!0)},{transparentColorIndex:(0,_.readByte)()},{terminator:(0,_.readByte)()}]},function(U){var V=(0,_.peekBytes)(2)(U);return V[0]===33&&V[1]===249}),T=(0,A.conditional)({image:[{code:(0,_.readByte)()},{descriptor:[{left:(0,_.readUnsigned)(!0)},{top:(0,_.readUnsigned)(!0)},{width:(0,_.readUnsigned)(!0)},{height:(0,_.readUnsigned)(!0)},{lct:(0,_.readBits)({exists:{index:0},interlaced:{index:1},sort:{index:2},future:{index:3,length:2},size:{index:5,length:3}})}]},(0,A.conditional)({lct:(0,_.readArray)(3,function(U,V,K){return Math.pow(2,K.descriptor.lct.size+1)})},function(U,V,K){return K.descriptor.lct.exists}),{data:[{minCodeSize:(0,_.readByte)()},I]}]},function(U){return(0,_.peekByte)()(U)===44}),R=(0,A.conditional)({text:[{codes:(0,_.readBytes)(2)},{blockSize:(0,_.readByte)()},{preData:function(V,K,J){return(0,_.readBytes)(J.text.blockSize)(V)}},I]},function(U){var V=(0,_.peekBytes)(2)(U);return V[0]===33&&V[1]===1}),P=(0,A.conditional)({application:[{codes:(0,_.readBytes)(2)},{blockSize:(0,_.readByte)()},{id:function(V,K,J){return(0,_.readString)(J.blockSize)(V)}},I]},function(U){var V=(0,_.peekBytes)(2)(U);return V[0]===33&&V[1]===255}),D=(0,A.conditional)({comment:[{codes:(0,_.readBytes)(2)},I]},function(U){var V=(0,_.peekBytes)(2)(U);return V[0]===33&&V[1]===254}),F=[{header:[{signature:(0,_.readString)(3)},{version:(0,_.readString)(3)}]},{lsd:[{width:(0,_.readUnsigned)(!0)},{height:(0,_.readUnsigned)(!0)},{gct:(0,_.readBits)({exists:{index:0},resolution:{index:1,length:3},sort:{index:4},size:{index:5,length:3}})},{backgroundColorIndex:(0,_.readByte)()},{pixelAspectRatio:(0,_.readByte)()}]},(0,A.conditional)({gct:(0,_.readArray)(3,function(U,V){return Math.pow(2,V.lsd.gct.size+1)})},function(U,V){return V.lsd.gct.exists}),{frames:(0,A.loop)([B,P,D,T,R],function(U){var V=(0,_.peekByte)()(U);return V===33||V===44})}],L=F;E.default=L})(gif)),gif}var deinterlace={},hasRequiredDeinterlace;function requireDeinterlace(){if(hasRequiredDeinterlace)return deinterlace;hasRequiredDeinterlace=1,Object.defineProperty(deinterlace,"__esModule",{value:!0}),deinterlace.deinterlace=void 0;var E=function(_,I){for(var B=new Array(_.length),T=_.length/I,R=function(K,J){var ee=_.slice(J*I,(J+1)*I);B.splice.apply(B,[K*I,I].concat(ee))},P=[0,4,2,1],D=[8,8,4,2],F=0,L=0;L<4;L++)for(var U=P[L];U<T;U+=D[L])R(U,F),F++;return B};return deinterlace.deinterlace=E,deinterlace}var lzw={},hasRequiredLzw;function requireLzw(){if(hasRequiredLzw)return lzw;hasRequiredLzw=1,Object.defineProperty(lzw,"__esModule",{value:!0}),lzw.lzw=void 0;var E=function(_,I,B){var T=4096,R=-1,P=B,D,F,L,U,V,K,J,ye,ee,ie,ve,ne,_e,be,ue,Te,ce=new Array(B),fe=new Array(T),de=new Array(T),pe=new Array(T+1);for(ne=_,F=1<<ne,V=F+1,D=F+2,J=R,U=ne+1,L=(1<<U)-1,ee=0;ee<F;ee++)fe[ee]=0,de[ee]=ee;var ve,ye,_e,be,Te,ue;for(ve=ye=_e=be=Te=ue=0,ie=0;ie<P;){if(be===0){if(ye<U){ve+=I[ue]<<ye,ye+=8,ue++;continue}if(ee=ve&L,ve>>=U,ye-=U,ee>D||ee==V)break;if(ee==F){U=ne+1,L=(1<<U)-1,D=F+2,J=R;continue}if(J==R){pe[be++]=de[ee],J=ee,_e=ee;continue}for(K=ee,ee==D&&(pe[be++]=_e,ee=J);ee>F;)pe[be++]=de[ee],ee=fe[ee];_e=de[ee]&255,pe[be++]=_e,D<T&&(fe[D]=J,de[D]=_e,D++,(D&L)===0&&D<T&&(U++,L+=D)),J=K}be--,ce[Te++]=pe[be],ie++}for(ie=Te;ie<P;ie++)ce[ie]=0;return ce};return lzw.lzw=E,lzw}var hasRequiredLib$7;function requireLib$7(){if(hasRequiredLib$7)return lib$8;hasRequiredLib$7=1,Object.defineProperty(lib$8,"__esModule",{value:!0}),lib$8.decompressFrames=lib$8.decompressFrame=lib$8.parseGIF=void 0;var E=T(requireGif()),A=requireLib$8(),_=requireUint8(),I=requireDeinterlace(),B=requireLzw();function T(L){return L&&L.__esModule?L:{default:L}}var R=function(U){var V=new Uint8Array(U);return(0,A.parse)((0,_.buildStream)(V),E.default)};lib$8.parseGIF=R;var P=function(U){for(var V=U.pixels.length,K=new Uint8ClampedArray(V*4),J=0;J<V;J++){var ee=J*4,ie=U.pixels[J],ne=U.colorTable[ie]||[0,0,0];K[ee]=ne[0],K[ee+1]=ne[1],K[ee+2]=ne[2],K[ee+3]=ie!==U.transparentIndex?255:0}return K},D=function(U,V,K){if(!U.image){console.warn("gif frame does not have associated image.");return}var J=U.image,ee=J.descriptor.width*J.descriptor.height,ie=(0,B.lzw)(J.data.minCodeSize,J.data.blocks,ee);J.descriptor.lct.interlaced&&(ie=(0,I.deinterlace)(ie,J.descriptor.width));var ne={pixels:ie,dims:{top:U.image.descriptor.top,left:U.image.descriptor.left,width:U.image.descriptor.width,height:U.image.descriptor.height}};return J.descriptor.lct&&J.descriptor.lct.exists?ne.colorTable=J.lct:ne.colorTable=V,U.gce&&(ne.delay=(U.gce.delay||10)*10,ne.disposalType=U.gce.extras.disposal,U.gce.extras.transparentColorGiven&&(ne.transparentIndex=U.gce.transparentColorIndex)),K&&(ne.patch=P(ne)),ne};lib$8.decompressFrame=D;var F=function(U,V){return U.frames.filter(function(K){return K.image}).map(function(K){return D(K,U.gct,V)})};return lib$8.decompressFrames=F,lib$8}var libExports$1=requireLib$7();class GifSource{constructor(A){if(!A||!A.length)throw new Error("Invalid frames");const[{texture:{width:_,height:I}}]=A;this.width=_,this.height=I,this.frames=A,this.textures=this.frames.map(B=>B.texture),this.totalFrames=this.frames.length,this.duration=this.frames[this.totalFrames-1].end}destroy(){for(const A of this.textures)A.destroy(!0);for(const A of this.frames)A.texture=null;this.frames.length=0,this.textures.length=0,Object.assign(this,{frames:null,textures:null,width:0,height:0,duration:0,totalFrames:0})}static from(A,_){if(!A||A.byteLength===0)throw new Error("Invalid buffer");const I=ie=>{let ne=null;for(const ce of ie.frames)ne=ce.gce??ne,"image"in ce&&!("gce"in ce)&&(ce.gce=ne)},B=libExports$1.parseGIF(A);I(B);const T=libExports$1.decompressFrames(B,!0),R=[],P=B.lsd.width,D=B.lsd.height,F=DOMAdapter.get().createCanvas(P,D),L=F.getContext("2d",{willReadFrequently:!0}),U=DOMAdapter.get().createCanvas(),V=U.getContext("2d");let K=0,J=null;const ee=1e3/(_?.fps??30);for(let ie=0;ie<T.length;ie++){const{disposalType:ne=2,delay:ce=ee,patch:fe,dims:{width:de,height:pe,left:ve,top:ye}}=T[ie];U.width=de,U.height=pe,V.clearRect(0,0,de,pe);const _e=V.createImageData(de,pe);_e.data.set(fe),V.putImageData(_e,0,0),ne===3&&(J=L.getImageData(0,0,P,D)),L.drawImage(U,ve,ye);const be=L.getImageData(0,0,P,D);ne===2?L.clearRect(0,0,P,D):ne===3&&L.putImageData(J,0,0);const Te=DOMAdapter.get().createCanvas(be.width,be.height);Te.getContext("2d").putImageData(be,0,0),R.push({start:K,end:K+ce,texture:new Texture({source:new CanvasSource({resource:Te})})}),K+=ce}return F.width=F.height=0,U.width=U.height=0,new GifSource(R)}}const GifAsset={extension:ExtensionType.Asset,detection:{test:async()=>!0,add:async E=>[...E,"gif"],remove:async E=>E.filter(A=>A!=="gif")},loader:{name:"gifLoader",id:"gif",test:E=>path.extname(E)===".gif"||E.startsWith("data:image/gif"),load:async(E,A)=>{const I=await(await DOMAdapter.get().fetch(E)).arrayBuffer();return GifSource.from(I,A?.data)},unload:async E=>{E.destroy()}}};extensions.add(GifAsset);class HitSample extends ScopedClass{localGainNode;srcs=[];isPlaying=!1;timeout;constructor(A){super(),this.hitSamples=A}_hitSamples=[];get hitSamples(){return this._hitSamples}set hitSamples(A){this._hitSamples=A}play(A,_=!1){const I=this.context.consume("audio"),T=1+(inject("beatmapset")?.slaves.size??0);if(!I||I.state==="STOPPED")return;const R=this.context.consume("audioContext");if(!R)return;const P=this.context.consume("sampleManager");if(P){this.srcs=[];for(const D of this.hitSamples){let{sampleSet:F,hitSound:L}=D;F==="None"&&(F=A.sampleSet),F==="None"&&(F="Normal"),L.includes("slider")||(L=`hit${L}`);const U=P.get(F.toLowerCase(),L.toLowerCase(),inject("config/audio")?.hitsound?0:A.customIndex);if(!U)continue;const V=R.createBufferSource();V.buffer=U;const K=R?.createGain();K.gain.value=A.volume*(inject("config/audio")?.effectVolume??1)/T/100,this.localGainNode=K,V.connect(K),K.connect(this.context.consume("masterGainNode")),V.onended=()=>{V.disconnect(),K.disconnect()},V.start(),V.loop=_,this.srcs.push(V)}this.isPlaying=!0}}playLoop(A,_,I){const B=this.context.consume("audio");if(!B)return;const R=1+(inject("beatmapset")?.slaves.size??0);this.localGainNode&&(this.localGainNode.gain.value=.3*A.volume/R/100);const P=()=>{for(const D of this.srcs)D.stop(),D.disconnect();this.isPlaying=!1};_&&!this.isPlaying&&B.state==="PLAYING"&&(clearTimeout(this.timeout),this.play(A,!0),this.timeout=setTimeout(()=>P(),I??0)),this.isPlaying&&(!_||B.state==="STOPPED")&&(clearTimeout(this.timeout),P())}}const sharedRefreshSprite=E=>{const A=E.skinManager?.getCurrentSkin();if(!A)return;const _=A.getTexture("hitcircle",A.config.General.Argon?void 0:E.context.consume("beatmapSkin")),I=A.getTexture("hitcircleoverlay",A.config.General.Argon?void 0:E.context.consume("beatmapSkin")),B=A.getTexture("hitcircleselect",A.config.General.Argon?void 0:E.context.consume("beatmapSkin"));_&&(E.hitCircleSprite.texture=_),I&&(E.hitCircleOverlay.texture=I),B&&(E.select.texture=B),E.hitCircleOverlay.alpha=1,E.hitCircleSprite.alpha=1;const T=E.context.consume("beatmapObject");if(T?.data?.colors.comboColors.length&&!inject("config/skinning")?.disableBeatmapSkin){const D=T.data.colors.comboColors,F=E.object.comboIndexWithOffsets%D.length;E.hitCircleSprite.tint=`rgb(${D[F].red},${D[F].green},${D[F].blue})`,E.flashPiece.tint=`rgb(${D[F].red},${D[F].green},${D[F].blue})`,E.color=`rgb(${D[F].red},${D[F].green},${D[F].blue})`,E.timelineObject?.refreshSprite();return}const R=E.object.comboIndexWithOffsets%A.colorsLength,P=A.config.Colours[`Combo${R+1}`];E.color=`rgb(${P})`,E.hitCircleSprite.tint=`rgb(${P})`,E.flashPiece.tint=`rgb(${P})`,E.timelineObject?.refreshSprite()},refreshSprite$3=E=>{sharedRefreshSprite(E);const A=E.skinManager?.getCurrentSkin().getTexture("hitcircleglow");E.flashPiece.texture=A??BLANK_TEXTURE,E.container.scale.set(E.object.scale*.95),E.select.scale.set(E.object.scale*.95)},update$i=(E,A)=>{const _=inject("config/experimental")?.hidden,I=E.object.startTime+E.object.hitWindows.windowFor(HitResult.Meh),B=Math.min(I,E.evaluation?.hitTime??E.object.startTime),T=E.object.startTime-E.object.timePreempt,R=800,P=150,D=80;if(A<T||A>E.object.startTime+R){E.wrapper.visible=!1;return}E.wrapper.visible=!0,E.sprite.scale.set(1),E.hitCircleSprite.tint=E.color;const F=![HitResult.Miss,HitResult.LargeTickMiss,HitResult.SmallTickMiss].includes(E.evaluation?.value);if(_)return applyHidden$1(E,A);if(!inject("config/gameplay")?.hitAnimation)return surpressAnimation$2(E,A);if(A<=B){const L=E.skinManager?.getCurrentSkin().getTexture("hitcircle");L&&(E.hitCircleSprite.texture=L),E.flashPiece.visible=!1,E.sprite.blendMode="normal";const U=Math.min(1,Math.max(0,(A-T)/E.object.timeFadeIn));E.wrapper.alpha=U,E.hitCircleOverlay.alpha=1,E.hitCircleSprite.alpha=1;return}if(A>B&&F){E.hitCircleSprite.tint=E.color;const L=E.skinManager?.getCurrentSkin().getTexture("hitcircleflash");L&&(E.hitCircleSprite.texture=L),E.flashPiece.visible=!0;const U=Clamp((A-B)/R),V=Clamp((A-B)/D),K=Clamp((A-(B+D))/P),J=2*Clamp((A-B)/(P*2))-1,ee=Clamp((A-B)/400),ie=color(E.color),ne=color("white");if(ie&&ne){const fe=interpolateRgb(ie,ne)(V);E.hitCircleSprite.tint=fe}E.wrapper.alpha=1-Easings.OutQuad(U),E.hitCircleOverlay.alpha=.5*(1-Easings.OutQuad(U)),E.hitCircleSprite.alpha=1-Easings.OutQuint(K),E.sprite.scale.set(1-.15*Easing.outElasticHalf(ee)),E.sprite.blendMode="add",E.flashPiece.alpha=J<0?Easings.OutQuint(1-Math.abs(J)):1-Easings.OutQuint(J),E.flashPiece.scale.set(1-.15*Easing.outElasticHalf(ee));return}if(!F&&A>I){const L=1-Math.min(1,Math.max(0,(A-I)/100));E.wrapper.alpha=L}},applyHidden$1=(E,A)=>{const _=E.object.startTime-E.object.timePreempt,I=Math.min(1,Math.max(0,(A-_)/E.object.timeFadeIn));if(E.flashPiece.visible=!1,E.sprite.blendMode="normal",I>=1){const B=Clamp((A-(_+E.object.timeFadeIn))/(E.object.timePreempt*.3));E.wrapper.alpha=1-B;return}E.wrapper.alpha=I},surpressAnimation$2=(E,A)=>{const _=E.object.startTime-E.object.timePreempt,I=Math.min(1,Math.max(0,(A-_)/E.object.timeFadeIn));E.hitCircleSprite.tint=E.color;const B=E.skinManager?.getCurrentSkin().getTexture("hitcircle");if(B&&(E.hitCircleSprite.texture=B),E.flashPiece.visible=!1,E.hitCircleOverlay.alpha=1,E.hitCircleSprite.alpha=1,E.sprite.blendMode="normal",A>E.object.startTime){const T=Clamp((A-E.object.startTime)/800);E.wrapper.alpha=1-T,E.hitCircleSprite.tint=16777215;return}E.wrapper.alpha=I},refreshSprite$2=E=>{sharedRefreshSprite(E),E.flashPiece.texture=BLANK_TEXTURE,E.flashPiece.visible=!1,E.container.scale.set(E.object.scale),E.select.scale.set(E.object.scale),E.sprite.blendMode="normal"},update$h=(E,A)=>{const _=inject("config/experimental")?.hidden,I=E.object.startTime+E.object.hitWindows.windowFor(HitResult.Meh),B=Math.min(I,E.evaluation?.hitTime??E.object.startTime),T=E.object.startTime-E.object.timePreempt,R=240,P=![HitResult.Miss,HitResult.LargeTickMiss,HitResult.SmallTickMiss].includes(E.evaluation?.value);if(A<T||A>E.object.startTime+800){E.wrapper.visible=!1;return}if(E.wrapper.visible=!0,E.sprite.scale.set(1),_)return applyHidden(E,A);if(!inject("config/gameplay")?.hitAnimation)return surpressAnimation$1(E,A);if(A<B){const D=Math.min(1,Math.max(0,(A-T)/E.object.timeFadeIn));E.wrapper.alpha=D;return}if(A>=B&&P){const D=1-Math.min(1,Math.max(0,(A-B)/R)),F=Math.min(1.5,1+.5*Math.max(0,(A-B)/R));E.wrapper.alpha=D,E.sprite.scale.set(F);return}if(!P&&A>I){const D=1-Math.min(1,Math.max(0,(A-I)/100));E.wrapper.alpha=D,E.sprite.scale.set(1)}},applyHidden=(E,A)=>{const _=E.object.startTime-E.object.timePreempt,I=Math.min(1,Math.max(0,(A-_)/E.object.timeFadeIn));if(I>=1){const B=Clamp((A-(_+E.object.timeFadeIn))/(E.object.timePreempt*.3));E.wrapper.alpha=1-B;return}E.wrapper.alpha=I},surpressAnimation$1=(E,A)=>{const _=E.object.startTime-E.object.timePreempt,I=Math.min(1,Math.max(0,(A-_)/E.object.timeFadeIn));if(E.hitCircleSprite.tint=E.color,A>E.object.startTime){const B=Clamp((A-E.object.startTime)/800);E.wrapper.alpha=1-B,E.hitCircleSprite.tint=16777215;return}E.wrapper.alpha=I},update$g=(E,A)=>{const B=E.context.consume("drawable")?.evaluation?.hitTime??E.object.startTime;if(!inject("config/gameplay")?.hitAnimation)return surpressAnimation(E);if(A<=B){E.container.alpha=1;return}if(A>B&&A<=B+60){const T=1-Math.min(1,Math.max(0,(A-B)/60));E.container.alpha=T;return}E.container.alpha=0},surpressAnimation=(E,A)=>{E.container.alpha=1};class SkinnableElement extends ScopedClass{skinManager;skinEventCallback;constructor(){super(),this.skinManager=inject("skinManager")}}class DrawableDefaults extends SkinnableElement{container;sprites=[];digits=[];constructor(A){super(),this.container=new Container,this.object=A;const I=(A.currentComboIndex+1).toString().split("");this.sprites=I.map(()=>{const B=new Sprite$1;return B.anchor.set(0,.5),B}),this.refreshSprites(),this.container.scale.set(.8),this.container.interactive=!1,this.container.interactiveChildren=!1,this.container.addChild(...this.sprites),this.skinEventCallback=this.skinManager?.addSkinChangeListener(()=>this.refreshSprites())}_object;get object(){return this._object}set object(A){this._object=A;const I=(A.currentComboIndex+1).toString().split("");this.digits=I}refreshSprites(A){const _=A??this.skinManager?.getCurrentSkin();if(!_)return;let I=_.config.Fonts.HitCircleOverlap;for(let B=0;B<this.sprites.length;B++){const T=this.sprites[B],R=this.digits[B];I-=_.config.Fonts.HitCircleOverlap;const P=_.getTexture(`default-${R}`);T.x=I,P&&(T.texture=P,I+=P.width)}this.container.x=-I/2*.8,this.container.y=0}update(A){update$g(this,A)}destroy(){for(const A of this.sprites)A.destroy();this.container.destroy(),this.skinEventCallback&&this.skinManager?.removeSkinChangeListener(this.skinEventCallback)}}const Interval=class Hi{constructor(A,_){this.low=A,this.high=_}clone(){return new Hi(this.low,this.high)}get max(){return this.clone()}less_than(A){return this.low<A.low||this.low===A.low&&this.high<A.high}equal_to(A){return this.low===A.low&&this.high===A.high}intersect(A){return!this.not_intersect(A)}not_intersect(A){return this.high<A.low||A.high<this.low}merge(A){return new Hi(this.low===void 0?A.low:this.low<A.low?this.low:A.low,this.high===void 0?A.high:this.high>A.high?this.high:A.high)}output(){return[this.low,this.high]}static comparable_max(A,_){return A.merge(_)}static comparable_less_than(A,_){return A<_}},RB_TREE_COLOR_RED=0,RB_TREE_COLOR_BLACK=1;let Node$1=class{constructor(A=void 0,_=void 0,I=null,B=null,T=null,R=RB_TREE_COLOR_BLACK){if(this.left=I,this.right=B,this.parent=T,this.color=R,this.item={key:A,value:_},A&&A instanceof Array&&A.length===2&&!Number.isNaN(A[0])&&!Number.isNaN(A[1])){let[P,D]=A;P>D&&([P,D]=[D,P]),this.item.key=new Interval(P,D)}this.max=this.item.key?this.item.key.max:void 0}isNil(){return this.item.key===void 0&&this.item.value===void 0&&this.left===null&&this.right===null&&this.color===RB_TREE_COLOR_BLACK}_value_less_than(A){return this.item.value&&A.item.value&&this.item.value.less_than?this.item.value.less_than(A.item.value):this.item.value<A.item.value}less_than(A){return this.item.value===this.item.key&&A.item.value===A.item.key?this.item.key.less_than(A.item.key):this.item.key.less_than(A.item.key)||this.item.key.equal_to(A.item.key)&&this._value_less_than(A)}_value_equal(A){return this.item.value&&A.item.value&&this.item.value.equal_to?this.item.value.equal_to(A.item.value):this.item.value===A.item.value}equal_to(A){return this.item.value===this.item.key&&A.item.value===A.item.key?this.item.key.equal_to(A.item.key):this.item.key.equal_to(A.item.key)&&this._value_equal(A)}intersect(A){return this.item.key.intersect(A.item.key)}copy_data(A){this.item.key=A.item.key,this.item.value=A.item.value}update_max(){if(this.max=this.item.key?this.item.key.max:void 0,this.right&&this.right.max){const A=this.item.key.constructor.comparable_max;this.max=A(this.max,this.right.max)}if(this.left&&this.left.max){const A=this.item.key.constructor.comparable_max;this.max=A(this.max,this.left.max)}}not_intersect_left_subtree(A){const _=this.item.key.constructor.comparable_less_than;let I=this.left.max.high!==void 0?this.left.max.high:this.left.max;return _(I,A.item.key.low)}not_intersect_right_subtree(A){const _=this.item.key.constructor.comparable_less_than;let I=this.right.max.low!==void 0?this.right.max.low:this.right.item.key.low;return _(A.item.key.high,I)}};class IntervalTree{constructor(){this.root=null,this.nil_node=new Node$1}get size(){let A=0;return this.tree_walk(this.root,()=>A++),A}get keys(){let A=[];return this.tree_walk(this.root,_=>A.push(_.item.key.output?_.item.key.output():_.item.key)),A}get values(){let A=[];return this.tree_walk(this.root,_=>A.push(_.item.value)),A}get items(){let A=[];return this.tree_walk(this.root,_=>A.push({key:_.item.key.output?_.item.key.output():_.item.key,value:_.item.value})),A}isEmpty(){return this.root==null||this.root===this.nil_node}clear(){this.root=null}insert(A,_=A){if(A===void 0)return;let I=new Node$1(A,_,this.nil_node,this.nil_node,null,RB_TREE_COLOR_RED);return this.tree_insert(I),this.recalc_max(I),I}exist(A,_=A){let I=new Node$1(A,_);return!!this.tree_search(this.root,I)}remove(A,_=A){let I=new Node$1(A,_),B=this.tree_search(this.root,I);return B&&this.tree_delete(B),B}search(A,_=(I,B)=>I===B?B.output():I){let I=new Node$1(A),B=[];return this.tree_search_interval(this.root,I,B),B.map(T=>_(T.item.value,T.item.key))}intersect_any(A){let _=new Node$1(A);return this.tree_find_any_interval(this.root,_)}forEach(A){this.tree_walk(this.root,_=>A(_.item.key,_.item.value))}map(A){const _=new IntervalTree;return this.tree_walk(this.root,I=>_.insert(I.item.key,A(I.item.value,I.item.key))),_}*iterate(A,_=(I,B)=>I===B?B.output():I){let I;for(A?I=this.tree_search_nearest_forward(this.root,new Node$1(A)):this.root&&(I=this.local_minimum(this.root));I;)yield _(I.item.value,I.item.key),I=this.tree_successor(I)}recalc_max(A){let _=A;for(;_.parent!=null;)_.parent.update_max(),_=_.parent}tree_insert(A){let _=this.root,I=null;if(this.root==null||this.root===this.nil_node)this.root=A;else{for(;_!==this.nil_node;)I=_,A.less_than(_)?_=_.left:_=_.right;A.parent=I,A.less_than(I)?I.left=A:I.right=A}this.insert_fixup(A)}insert_fixup(A){let _,I;for(_=A;_!==this.root&&_.parent.color===RB_TREE_COLOR_RED;)_.parent===_.parent.parent.left?(I=_.parent.parent.right,I.color===RB_TREE_COLOR_RED?(_.parent.color=RB_TREE_COLOR_BLACK,I.color=RB_TREE_COLOR_BLACK,_.parent.parent.color=RB_TREE_COLOR_RED,_=_.parent.parent):(_===_.parent.right&&(_=_.parent,this.rotate_left(_)),_.parent.color=RB_TREE_COLOR_BLACK,_.parent.parent.color=RB_TREE_COLOR_RED,this.rotate_right(_.parent.parent))):(I=_.parent.parent.left,I.color===RB_TREE_COLOR_RED?(_.parent.color=RB_TREE_COLOR_BLACK,I.color=RB_TREE_COLOR_BLACK,_.parent.parent.color=RB_TREE_COLOR_RED,_=_.parent.parent):(_===_.parent.left&&(_=_.parent,this.rotate_right(_)),_.parent.color=RB_TREE_COLOR_BLACK,_.parent.parent.color=RB_TREE_COLOR_RED,this.rotate_left(_.parent.parent)));this.root.color=RB_TREE_COLOR_BLACK}tree_delete(A){let _,I;A.left===this.nil_node||A.right===this.nil_node?_=A:_=this.tree_successor(A),_.left!==this.nil_node?I=_.left:I=_.right,I.parent=_.parent,_===this.root?this.root=I:(_===_.parent.left?_.parent.left=I:_.parent.right=I,_.parent.update_max()),this.recalc_max(I),_!==A&&(A.copy_data(_),A.update_max(),this.recalc_max(A)),_.color===RB_TREE_COLOR_BLACK&&this.delete_fixup(I)}delete_fixup(A){let _=A,I;for(;_!==this.root&&_.parent!=null&&_.color===RB_TREE_COLOR_BLACK;)_===_.parent.left?(I=_.parent.right,I.color===RB_TREE_COLOR_RED&&(I.color=RB_TREE_COLOR_BLACK,_.parent.color=RB_TREE_COLOR_RED,this.rotate_left(_.parent),I=_.parent.right),I.left.color===RB_TREE_COLOR_BLACK&&I.right.color===RB_TREE_COLOR_BLACK?(I.color=RB_TREE_COLOR_RED,_=_.parent):(I.right.color===RB_TREE_COLOR_BLACK&&(I.color=RB_TREE_COLOR_RED,I.left.color=RB_TREE_COLOR_BLACK,this.rotate_right(I),I=_.parent.right),I.color=_.parent.color,_.parent.color=RB_TREE_COLOR_BLACK,I.right.color=RB_TREE_COLOR_BLACK,this.rotate_left(_.parent),_=this.root)):(I=_.parent.left,I.color===RB_TREE_COLOR_RED&&(I.color=RB_TREE_COLOR_BLACK,_.parent.color=RB_TREE_COLOR_RED,this.rotate_right(_.parent),I=_.parent.left),I.left.color===RB_TREE_COLOR_BLACK&&I.right.color===RB_TREE_COLOR_BLACK?(I.color=RB_TREE_COLOR_RED,_=_.parent):(I.left.color===RB_TREE_COLOR_BLACK&&(I.color=RB_TREE_COLOR_RED,I.right.color=RB_TREE_COLOR_BLACK,this.rotate_left(I),I=_.parent.left),I.color=_.parent.color,_.parent.color=RB_TREE_COLOR_BLACK,I.left.color=RB_TREE_COLOR_BLACK,this.rotate_right(_.parent),_=this.root));_.color=RB_TREE_COLOR_BLACK}tree_search(A,_){if(!(A==null||A===this.nil_node))return _.equal_to(A)?A:_.less_than(A)?this.tree_search(A.left,_):this.tree_search(A.right,_)}tree_search_nearest_forward(A,_){let I,B=A;for(;B&&B!==this.nil_node;)B.less_than(_)?B.intersect(_)?(I=B,B=B.left):B=B.right:((!I||B.less_than(I))&&(I=B),B=B.left);return I||null}tree_search_interval(A,_,I){A!=null&&A!==this.nil_node&&(A.left!==this.nil_node&&!A.not_intersect_left_subtree(_)&&this.tree_search_interval(A.left,_,I),A.intersect(_)&&I.push(A),A.right!==this.nil_node&&!A.not_intersect_right_subtree(_)&&this.tree_search_interval(A.right,_,I))}tree_find_any_interval(A,_){let I=!1;return A!=null&&A!==this.nil_node&&(A.left!==this.nil_node&&!A.not_intersect_left_subtree(_)&&(I=this.tree_find_any_interval(A.left,_)),I||(I=A.intersect(_)),!I&&A.right!==this.nil_node&&!A.not_intersect_right_subtree(_)&&(I=this.tree_find_any_interval(A.right,_))),I}local_minimum(A){let _=A;for(;_.left!=null&&_.left!==this.nil_node;)_=_.left;return _}local_maximum(A){let _=A;for(;_.right!=null&&_.right!==this.nil_node;)_=_.right;return _}tree_successor(A){let _,I,B;if(A.right!==this.nil_node)_=this.local_minimum(A.right);else{for(I=A,B=A.parent;B!=null&&B.right===I;)I=B,B=B.parent;_=B}return _}rotate_left(A){let _=A.right;A.right=_.left,_.left!==this.nil_node&&(_.left.parent=A),_.parent=A.parent,A===this.root?this.root=_:A===A.parent.left?A.parent.left=_:A.parent.right=_,_.left=A,A.parent=_,A!=null&&A!==this.nil_node&&A.update_max(),_=A.parent,_!=null&&_!==this.nil_node&&_.update_max()}rotate_right(A){let _=A.left;A.left=_.right,_.right!==this.nil_node&&(_.right.parent=A),_.parent=A.parent,A===this.root?this.root=_:A===A.parent.left?A.parent.left=_:A.parent.right=_,_.right=A,A.parent=_,A!==null&&A!==this.nil_node&&A.update_max(),_=A.parent,_!=null&&_!==this.nil_node&&_.update_max()}tree_walk(A,_){A!=null&&A!==this.nil_node&&(this.tree_walk(A.left,_),_(A),this.tree_walk(A.right,_))}testRedBlackProperty(){let A=!0;return this.tree_walk(this.root,function(_){_.color===RB_TREE_COLOR_RED&&(_.left.color===RB_TREE_COLOR_BLACK&&_.right.color===RB_TREE_COLOR_BLACK||(A=!1))}),A}testBlackHeightProperty(A){let _=0,I=0,B=0;if(A.color===RB_TREE_COLOR_BLACK&&_++,A.left!==this.nil_node?I=this.testBlackHeightProperty(A.left):I=1,A.right!==this.nil_node?B=this.testBlackHeightProperty(A.right):B=1,I!==B)throw new Error("Red-black height property violated");return _+=I,_}}class TimelineTimingPoint{constructor(A){this.data=A;const _=new Graphics$1,I=new Text$1({text:`${A.bpm.toFixed(0)}BPM`,style:{fontFamily:"Rubik",align:"center",fill:16777215,fontSize:10},anchor:{x:0,y:1},x:5,y:38}),B=I.width,T=I.height;_.rect(0,40-(T+4),B+10,T+4).fill(16073300).moveTo(0,-40).lineTo(0,40).stroke({color:16777215,width:2,cap:"round"}),this.container.addChild(_,I);const R=inject("config/timeline")?.scale??1;this.container.x=this.data.startTime/(DEFAULT_SCALE/R),this.container.y=40,inject("config/timeline")?.onChange("scale",P=>{this.container.x=this.data.startTime/(DEFAULT_SCALE/P)})}container=new Container;destroy(){this.container.destroy()}}class ZContainer extends LayoutContainer{animationControler=new AnimationController;alphaFilter=new AlphaFilter({alpha:1});constructor(A){super(A),this.filters=[this.alphaFilter]}triggerAnimation(A,_,I,B,T,R,P,D){return this.animationControler.addAnimation(A,_,I,B,T,R,P,D)}}const DEFAULT_SCALE=1,BEAT_LINE_COLOR={1:16777215,2:16711680,3:11994807,4:3307238,5:15132165,6:8666756,7:15132165,8:15132165,9:15132165};class Timeline{container=new ZContainer({label:"timeline",layout:{flex:1,height:80,overflow:"hidden"}});_objectsContainer=new Container({isRenderGroup:!0});_dragWindow=new Graphics$1().rect(0,0,1,80).fill({color:16777215,alpha:.3});_timingPoints=[];_objects=[];_range=0;_ruler=new Graphics$1;constructor(){const A=new Graphics$1().moveTo(0,-40).lineTo(0,40).stroke(13489908).moveTo(-2,-40).lineTo(0,-38).lineTo(2,-38).lineTo(4,-40).lineTo(-2,-40).moveTo(-2,40).lineTo(-0,38).lineTo(2,38).lineTo(4,40).lineTo(-2,40).fill(13489908);this.container.addChild(this._ruler,this._objectsContainer,this._dragWindow,A),this.container.on("layout",_=>{const{width:I,height:B}=_.computedLayout,T=inject("config/timeline")?.scale??1;this._range=I/2*(DEFAULT_SCALE/T)+120,A.x=I/2,A.y=B/2;const R=new GraphicsContext().moveTo(0,-B/2).lineTo(0,B/2).stroke(13489908).moveTo(-3,-(B/2)).lineTo(0,-(B/2-3)).lineTo(3,-(B/2)).lineTo(-3,-(B/2)).moveTo(-3,B/2).lineTo(0,B/2-3).lineTo(3,B/2).lineTo(-3,B/2).fill(13489908);A.context=R}),this.loadEventListeners(),inject("config/timeline")?.onChange("scale",_=>{const I=this.container.layout?.computedLayout.width??0;this._range=I/2*(DEFAULT_SCALE/_)+120}),inject("config/fullscreen")?.onChange("fullscreen",_=>{_&&this.container.triggerAnimation("height",this.container.layout?.computedLayout.height??80,0,I=>{this.container.layout={height:I}},200,Easings.InOut,()=>{this.container.visible=!1}),_||(this.container.visible=!0,this.container.triggerAnimation("height",this.container.layout?.computedLayout.height??0,80,I=>{this.container.layout={height:I}},200,Easings.InOut))}),this.container.addEventListener("wheel",_=>{if(!_.altKey)return;_.preventDefault();const I=inject("config/timeline");if(I!==void 0){if(_.deltaY>0){I.scale=Math.max(.5,I.scale-.1);return}if(_.deltaY<0){I.scale=Math.min(1.5,I.scale+.1);return}}},{capture:!0,passive:!1})}_dragWindowRange=[0,0];_selected=new Set;_clicked=!1;_offset=0;loadEventListeners(){this.container.on("pointerdown",A=>{this._clicked=!0;const{x:_}=this.container.toLocal(A.global),I=this.container.layout?.computedLayout.width??1,B=inject("config/timeline")?.scale??1,T=inject("beatmapset")?.context.consume("audio")?.currentTime??0,R=(_-I/2)*(DEFAULT_SCALE/B)+T;this._dragWindowRange=[R,R];const P=40*(DEFAULT_SCALE/B),D=new Set;for(const F of this._previous){const L=this._objects[F],U=L.object.startTime,V=L.object.endTime??L.object.startTime;(R-P<U&&R+P>U||R-P<V&&R+P>V||U-P<R&&R<V+P)&&D.add(F)}if(!A.ctrlKey||D.values.length===0)for(const F of this._selected)this.removeSelected(F);this._selected.add([...D][0]);for(const F of this._selected)this.addSelected(F)}),this.container.on("globalpointermove",A=>{if(!this._clicked)return;const{x:_}=this.container.toLocal(A.global),I=this.container.layout?.computedLayout.width??1,B=inject("config/timeline")?.scale??1,T=inject("beatmapset")?.context.consume("audio")?.currentTime??0,R=(_-I/2)*(DEFAULT_SCALE/B),P=(_-I/2)*(DEFAULT_SCALE/B)+T;this._dragWindowRange[1]=P,this._offset=R}),this.container.on("pointerup",()=>{this._clicked=!1,this._dragWindowRange=[0,0],this._dragWindow.scale.set(0,1),this._offset=0}),this.container.on("pointerupoutside",()=>{this._clicked=!1,this._dragWindowRange=[0,0],this._dragWindow.scale.set(0,1),this._offset=0})}addSelected(A){this._selected.add(A),this._objects[A]?.context.consume("beatmapObject")?.container.addSelected(A)}removeSelected(A){this._selected.delete(A),this._objects[A]?.context.consume("beatmapObject")?.container.removeSelected(A)}_tree=new IntervalTree;loadObjects(A){this._objects.length>0&&(this._objectsContainer.removeChild(...this._objects.map(_=>_.container)),this._objects=[],this._tree.clear()),this._objects=A.map(_=>_.timelineObject).filter(_=>_!==void 0);for(let _=0;_<this._objects.length;_++){const{start:I,end:B}=this._objects[_].getTimeRange();this._tree.insert([I,B],_)}}loadTimingPoints(A){this._timingPoints.length>0&&(this._objectsContainer.removeChild(...this._timingPoints.map(_=>_.container)),this._timingPoints=[]),this._timingPoints=A.map(_=>new TimelineTimingPoint(_))}_previous=new Set;update(A){this.updateTiming(A);const _=new Set(this._tree.search([A-this._range,A+this._range])),I=this._previous.difference(_);for(const T of I)this._objects[T]&&(this._objects[T].container.visible=!1,this._objectsContainer.removeChild(this._objects[T].container));this._previous=_;const B=[];for(const T of[..._].sort())B.push(this._objects[T].container);B.length>0&&this._objectsContainer.addChild(...B)}_previousTiming=new Set;updateTiming(A){const _=binarySearch(A,this._timingPoints,(D,F)=>D.data.startTime-F),I=new Set;I.add(_);let B=_-1;for(;B>=0&&this._timingPoints[B].data.startTime>A-this._range;)I.add(B),B--;let T=_+1;for(;this._timingPoints[T]&&T<this._objects.length&&this._timingPoints[T].data.startTime<A+this._range;)I.add(T),T++;const R=this._previousTiming.difference(I);for(const D of R)this._timingPoints[D]&&(this._timingPoints[D].container.visible=!1,this._objectsContainer.removeChild(this._timingPoints[D].container));this._previousTiming=I;const P=[];for(const D of[...I].sort())this._timingPoints[D]&&P.push(this._timingPoints[D].container);if(P.length>0&&this._objectsContainer.addChild(...P),Math.abs(this._dragWindowRange[0]-this._dragWindowRange[1])!==0){const D=Math.min(...this._dragWindowRange),F=Math.max(...this._dragWindowRange);for(const L of this._previous){const U=this._objects[L],V=U.object.startTime,K=U.object.endTime??U.object.startTime;D<V&&F>V||D<K&&F>K||D<V&&K<F?this.addSelected(L):this.removeSelected(L)}}}draw(A){this._clicked&&inject("beatmapset")?.context.consume("audio")?.state==="PLAYING"&&(this._dragWindowRange[1]=A+this._offset);const _=inject("config/timeline")?.scale??1,I=this.container.layout?.computedLayout.width??0;this._objectsContainer.x=I/2+-A/(DEFAULT_SCALE/_),this._ruler.x=I/2+-A/(DEFAULT_SCALE/_);for(const B of[...this._previousTiming].sort((T,R)=>R-T))this._timingPoints[B]&&(this._timingPoints[B].container.visible=!0);for(const B of[...this._previous].sort((T,R)=>R-T))this._objects[B]&&(this._objects[B].container.visible=!0);if(this.drawRuler(A),Math.abs(this._dragWindowRange[0]-this._dragWindowRange[1])!==0){const B=Math.min(...this._dragWindowRange),T=Math.max(...this._dragWindowRange),R=this.container.layout?.computedLayout.width??1,P=inject("config/timeline")?.scale??1,D=inject("beatmapset")?.context.consume("audio")?.currentTime??0,F=T-B,L=(B-D)/(DEFAULT_SCALE/P),U=F/(DEFAULT_SCALE/P);this._dragWindow.x=R/2+L,this._dragWindow.scale.set(U,1)}}_currentTimingPoint;updateTimingPoint(A){this._currentTimingPoint=A}_currentContext;drawRuler(A){if(!this._currentTimingPoint)return;const _=inject("config/timeline")?.scale??1,I=inject("config/timeline")?.divisor??4,B=A-this._range,T=A+this._range,{beatLength:R,timeSignature:P,startTime:D}=this._currentTimingPoint,F=D+R*Math.ceil((A-D)/R),L=new GraphicsContext;let U=F;const V=(K,J)=>{const ee=Math.round(K-(Math.round((K-D)/R)*R+D))===0,ie=ee&&Math.round((K-D)/R)%P===0;let ne=16777215;if(!ee){const ce=Math.floor((K-D)/R)*R+D,fe=K-ce,de=Math.round(fe/(R/I)),pe=I/gcd(I,de);ne=BEAT_LINE_COLOR[pe]??9605778}L.moveTo(K/(DEFAULT_SCALE/_),ie?0:10).lineTo(K/(DEFAULT_SCALE/_),ie?80:70).stroke({color:ne,pixelLine:!0})};for(;U<=T;)V(U),U+=R/I;for(U=F-R/I;U>=B;)V(U),U-=R/I;this._currentContext?.destroy(),this._currentContext=L,this._ruler.context=L}}class TimelineHitObject extends SkinnableElement{container=new Container({visible:!1});constructor(A){super(),this.object=A,this.container.y=40,inject("config/timeline")?.onChange("scale",_=>{this.container.x=this.object.startTime/(DEFAULT_SCALE/_)})}_object;get object(){return this._object}set object(A){this._object=A;const _=inject("config/timeline")?.scale??1;this.container.x=A.startTime/(DEFAULT_SCALE/_)}_isSelected=!1;get isSelected(){return this._isSelected}set isSelected(A){this._isSelected=A}destroy(){this.skinEventCallback&&this.skinManager?.removeSkinChangeListener(this.skinEventCallback)}}class TimelineHitCircle extends TimelineHitObject{hitCircle;hitCircleOverlay;defaults;select;constructor(A){super(A),this.defaults=new DrawableDefaults(A),this.hitCircle=new Sprite$1,this.hitCircleOverlay=new Sprite$1,this.select=new Sprite$1({visible:!1}),this.hitCircle.anchor.set(.5),this.hitCircleOverlay.anchor.set(.5),this.select.anchor.set(.5),this.container.scale.set(50/128),this.container.addChild(this.hitCircle,this.defaults.container,this.hitCircleOverlay,this.select),this.refreshSprite()}get object(){return this._object}set object(A){super.object=A,this._object=A,this.defaults&&(this.defaults.object=A)}get isSelected(){return this._isSelected}set isSelected(A){this._isSelected=A,this.select.visible=A}refreshSprite(){const A=this.skinManager?.getCurrentSkin();if(!A)return;const _=A.getTexture("timelinehitcircle",this.context.consume("beatmapSkin")),I=A.getTexture("hitcircle",this.context.consume("beatmapSkin")),B=A.getTexture("hitcircleoverlay",this.context.consume("beatmapSkin")),T=A.getTexture("hitcircleselect",this.context.consume("beatmapSkin"));this.hitCircle.texture=(A.config.General.Argon?_??I:I)??BLANK_TEXTURE,this.hitCircleOverlay.texture=(A.config.General.Argon?BLANK_TEXTURE:B)??BLANK_TEXTURE,this.select.texture=T??BLANK_TEXTURE,this.select.scale.set(A.config.General.Argon?256/236:1);const R=this.context.consume("object")?.color??"rgb(0,0,0)";if(this.hitCircle.tint=R,this.defaults.container.tint=16777215,this.defaults.sprites.map(F=>{F.tint=16777215}),!A.config.General.Argon)return;const P=color(R);if(!P)return;const D=.299*(P?.rgb().r/255)+.587*(P?.rgb().g/255)+.114*(P?.rgb().b/255);this.defaults.container.tint=D>.5?R:16777215,this.defaults.sprites.map(F=>{F.tint=D>.5?3355443:15066597})}hook(A){return super.hook(A),this.refreshSprite(),this}getTimeRange(){return{start:this.object.startTime-150,end:this.object.startTime+150}}}const sharedUpdate$1=(E,A)=>{const _=inject("config/experimental")?.hidden,I=E.object.startTime-E.object.timePreempt,B=Math.min(E.object.timeFadeIn*2,E.object.timePreempt),T=50;if(_||A<I||A>=E.object.startTime+T)return E.container.visible=!1,3;if(E.container.visible=!0,A<E.object.startTime){const R=Math.min(1,Math.max(0,(A-I)/B)),P=Math.min(1,Math.max(0,(A-I)/E.object.timePreempt))*3;return E.container.alpha=R*.9,E.container.scale.set((4-P)*E.object.scale),P}if(A>=E.object.startTime){const R=Math.min(1,Math.max(0,(A-E.object.startTime)/T));return E.container.alpha=(1-R)*.9,3}return 3},update$f=(E,A)=>{const _=sharedUpdate$1(E,A);E.container.scale.set((4-_)*E.object.scale*1.02)},update$e=(E,A)=>{const _=sharedUpdate$1(E,A);E.container.scale.set((4-_)*E.object.scale)};class DrawableApproachCircle extends SkinnableElement{container=new Sprite$1;constructor(A){super(),this.object=A,this.container.visible=!1,this.container.anchor.set(.5),this.container.interactive=!1,this.container.interactiveChildren=!1,this.container.eventMode="none",this.refreshSprite(),this.skinEventCallback=this.skinManager?.addSkinChangeListener(()=>this.refreshSprite())}_object;get object(){return this._object}set object(A){this._object=A,this.container.x=A.startX+A.stackedOffset.x,this.container.y=A.startY+A.stackedOffset.y}updateFn=update$e;refreshSprite(){const A=this.skinManager?.getCurrentSkin();if(!A)return;A.config.General.Argon?this.updateFn=update$f:this.updateFn=update$e;const _=A.getTexture("approachcircle",this.context.consume("beatmapSkin"));_&&(this.container.texture=_);const I=this.context.consume("beatmapObject");if(I?.data.colors.comboColors.length&&!inject("config/skinning")?.disableBeatmapSkin){const R=I.data.colors.comboColors,P=this.object.comboIndexWithOffsets%R.length;this.container.tint=`rgb(${R[P].red},${R[P].green},${R[P].blue})`;return}const B=this.object.comboIndexWithOffsets%A.colorsLength,T=A.config.Colours[`Combo${B+1}`];this.container.tint=`rgb(${T})`}update(A){this.updateFn(this,A)}destroy(){this.container.destroy(),this.skinEventCallback&&this.skinManager?.removeSkinChangeListener(this.skinEventCallback)}}class DrawableHitObject extends SkinnableElement{playHitSound(A,_){}constructor(A){super(),this.context.provide("object",this)}disable(){this.container.visible=!1}_evaluation;get evaluation(){return this._evaluation}set evaluation(A){this._evaluation=A}eval(A){return{value:HitResult.Great,hitTime:this.object.startTime}}}const update$d=(E,A)=>{if(!E.drawable.evaluation){E.container.visible=!1;return}const _=E.drawable.object.endTime??Math.min(E.drawable.evaluation.hitTime,E.drawable.object.startTime+E.drawable.object.hitWindows.windowFor(HitResult.Meh)+1),I=800,B=100;if(A<_||A>=_+I){E.container.visible=!1;return}E.container.visible=!0;const T=Clamp((A-_)/I);if(E.drawable.evaluation.value!==HitResult.Miss){const R=1+.4*Easings.OutQuint(T),P=1-T**5;E.text.scale.set(R),E.text.alpha=P,E.text.angle=0;return}if(E.drawable.evaluation.value===HitResult.Miss){const R=1.6-.6*Easings.OutSine(Clamp((A-_)/B)),P=1-T**5;E.text.scale.set(R),E.text.alpha=P,E.text.y=100*T**5,E.text.angle=40*T**5}},update$c=(E,A)=>{if(!E.evaluation){E.container.visible=!1;return}const _=120,I=500,B=600,T=E.drawable.object.endTime??Math.min(E.evaluation.hitTime,E.drawable.object.startTime+E.drawable.object.hitWindows.windowFor(HitResult.Meh)+1),R=_+I+B;if(A<T||A>=T+R){E.container.visible=!1;return}if(E.container.visible=!0,A>=T&&A<T+_){const P=Clamp((A-T)/_);E.text.alpha=P}if(A>=T+_){const P=1-Clamp((A-(T+_+I))/B);E.text.alpha=P}if(E.evaluation.value!==HitResult.Miss){const P=_*.8,D=_*.2,F=_*.2,L=_*.2;let U=.6;A<T+P&&(U=.6+.5*Clamp((A-T)/P)),A>=T+P&&A<T+P+D&&(U=1.1),A>=T+P+D&&A<T+P+D+F&&(U=1.1-.2*Clamp((A-(T+P+D))/F)),A>=T+P+D+F&&(U=.9+.05*Clamp((A-(T+P+D+F))/L)),E.text.scale.set(U)}if(E.evaluation.value===HitResult.Miss){const P=E.legacyRotation,D=1.6-.6*Easings.In(Clamp((A-T)/100));if(E.text.scale.set(D),A>=T&&A<T+_){const F=Clamp((A-T)/_);E.text.angle=P*Easings.In(F),E.text.y=-5}if(A>=T+_){const F=Clamp((A-(T+_))/(I+B));E.text.angle=P+P*Easings.In(F);const L=Clamp((A-(T+_))/(I+B));E.text.y=-5+Easings.In(L)*85}}};class AnimatedSkinnableElement extends SkinnableElement{texturesList=[]}class DrawableJudgement extends AnimatedSkinnableElement{constructor(A){super(),this.drawable=A,this.text=new Sprite$1({anchor:.5}),this.container=new Container({label:"judgement",interactive:!1,eventMode:"none"}),this.container.addChild(this.text),this.container.visible=!1,this.updateFn=inject("skinManager")?.getCurrentSkin().metadata?.type==="ARGON"?update$d:update$c,this.texturesList=[BLANK_TEXTURE],inject("skinManager")?.addSkinChangeListener(_=>{if(this.updateFn=_.metadata?.type==="ARGON"?update$d:update$c,!!this.evaluation)switch(this.evaluation.value){case HitResult.Great:{this.texturesList=_.getAnimatedTexture("hit300");break}case HitResult.Ok:{this.texturesList=_.getAnimatedTexture("hit100");break}case HitResult.Meh:{this.texturesList=_.getAnimatedTexture("hit50");break}case HitResult.Miss:{this.texturesList=_.getAnimatedTexture("hit0");break}default:this.texturesList=[BLANK_TEXTURE]}}),this.legacyRotation=Math.random()*8.6*2-8.6}container;text;legacyRotation=0;_evaluation;get evaluation(){return this._evaluation}set evaluation(A){if(this._evaluation=A,!A){this.container.visible=!1;return}switch(this.container.visible=!0,A.value){case HitResult.Great:{this.texturesList=inject("skinManager")?.getCurrentSkin().getAnimatedTexture("hit300")??[BLANK_TEXTURE];break}case HitResult.Ok:{this.texturesList=inject("skinManager")?.getCurrentSkin().getAnimatedTexture("hit100")??[BLANK_TEXTURE];break}case HitResult.Meh:{this.texturesList=inject("skinManager")?.getCurrentSkin().getAnimatedTexture("hit50")??[BLANK_TEXTURE];break}case HitResult.Miss:{this.texturesList=inject("skinManager")?.getCurrentSkin().getAnimatedTexture("hit0")??[BLANK_TEXTURE];break}default:this.texturesList=[BLANK_TEXTURE]}}updateFn;frame(A){if(this.updateFn?.(this,A),!this.evaluation)return;const _=this.drawable.object.endTime??Math.min(this.evaluation.hitTime,this.drawable.object.startTime+this.drawable.object.hitWindows.windowFor(HitResult.Meh)+1),I=1e3/60,B=Clamp(Math.floor((A-_)/I),0,this.texturesList.length-1);this.text.texture=this.texturesList[B]}}class DrawableHitCircle extends DrawableHitObject{constructor(A,_=!0){super(A),this.hasNumber=_,this.context.provide("drawable",this),this.wrapper.visible=!1,this.hitCircleSprite=new Sprite$1,this.hitCircleOverlay=new Sprite$1,this.flashPiece=new Sprite$1,this.flashPiece.anchor.set(.5),this.flashPiece.blendMode="add",this.hitCircleSprite.anchor.set(.5),this.hitCircleSprite.alpha=.9,this.hitCircleOverlay.anchor.set(.5),this.sprite.addChild(this.hitCircleSprite,this.hitCircleOverlay),this.approachCircle=new DrawableApproachCircle(A).hook(this.context),this.object=A,this.wrapper.addChild(this.sprite,this.flashPiece);const I=new RenderLayer;this.container.addChild(I,this.wrapper),this.hasNumber&&(this.defaults=new DrawableDefaults(A).hook(this.context),this.wrapper.addChild(this.defaults.container)),this.hitSound=new HitSample(A.samples).hook(this.context),this.refreshSprite(),this.skinEventCallback=this.skinManager?.addSkinChangeListener(()=>this.refreshSprite()),this.timelineObject=new TimelineHitCircle(A).hook(this.context),this.judgement=new DrawableJudgement(this),I.attach(this.judgement.container),this.container.addChild(this.judgement.container),inject("config/gameplay")?.onChange("hitAnimation",B=>{B&&(this.hitCircleSprite.tint=this.color)})}container=new Container;hitCircleSprite;hitCircleOverlay;flashPiece;select=new Sprite$1({visible:!1,anchor:.5});sprite=new Container;wrapper=new Container;approachCircle;defaults;hitSound;samplePoint;timelineObject;updateFn=update$h;judgement;_isSelected=!1;get isSelected(){return this._isSelected}set isSelected(A){this._isSelected=A,this.select.visible=A}checkCollide(A,_,I){if(!(this.object.startTime-this.object.timePreempt<I&&I<this.object.startTime+240))return!1;const B=64*this.object.scale*(256/236),T=new Vector2(this.object.startX+this.object.stackedOffset.x,this.object.startY+this.object.stackedOffset.y);return new Vector2(A,_).distance(T)<B&&this.wrapper.visible}_object;get object(){return this._object}set object(A){this._object=A,this.container.x=A.startX+A.stackedOffset.x,this.container.y=A.startY+A.stackedOffset.y,this.container.scale.set(A.scale*(inject("skinManager")?.getCurrentSkin()?.config.General.Argon?.95:1)),this.select.x=A.startX+A.stackedOffset.x,this.select.y=A.startY+A.stackedOffset.y,this.select.scale.set(A.scale*(inject("skinManager")?.getCurrentSkin()?.config.General.Argon?.95:1)),this.approachCircle&&(this.approachCircle.object=A),this.defaults&&(this.defaults.object=A),this.hitSound&&(this.hitSound.hitSamples=A.samples),this.timelineObject&&(this.timelineObject.object=A)}hook(A){return super.hook(A),this.refreshSprite(),this.approachCircle.refreshSprite(),this}color="rgb(0, 0, 0)";refreshSprite(){const A=this.skinManager?.getCurrentSkin();A&&(A.config.General.Argon?(refreshSprite$3(this),this.updateFn=update$i):(refreshSprite$2(this),this.updateFn=update$h))}playHitSound(A,_){const I=this.context.consume("beatmapObject"),B=inject("ui/main/controls/progress")?.isSeeking||inject("beatmapset")?.isSeeking;if(!I||B)return;const T=this.evaluation?.hitTime??this.object.startTime;if(!(I.previousTime<=T&&T<A&&A-I.previousTime<30))return;const R=I.getNearestSamplePoint(this.object.startTime);this.hitSound?.play(R)}getTimeRange(){return{start:this.object.startTime-this.object.timePreempt,end:this.object.startTime+800}}update(A){this.approachCircle.update(A),this.defaults?.update(A),this.updateFn(this,A),this.judgement.frame(A)}get evaluation(){return this._evaluation}set evaluation(A){this._evaluation=A,this.judgement.evaluation=A}eval(A){const _=A.find((T,R,P)=>{if(Math.abs(T.startTime-this.object.startTime)>this.object.hitWindows.windowFor(HitResult.Meh))return!1;const D=P[R-1];if(!D)return!1;const F=!D.mouseLeft&&T.mouseLeft,L=!D.mouseRight&&T.mouseRight;if(!(F||L))return!1;const U=T.position.x,V=T.position.y,K=64*this.object.scale,J=new Vector2(this.object.startX+this.object.stackedOffset.x,this.object.startY+this.object.stackedOffset.y);return new Vector2(U,V).distance(J)<=K});return _?{value:(T=>{T=Math.abs(T);for(let R=HitResult.Perfect;R>=HitResult.Miss;--R)if(this.object.hitWindows.isHitResultAllowed(R)&&T<Math.round(this.object.hitWindows.windowFor(R)))return R;return HitResult.None})(_.startTime-this.object.startTime),hitTime:_.startTime}:{value:HitResult.Miss,hitTime:1/0}}destroy(){this.hitCircleOverlay.destroy(),this.hitCircleSprite.destroy(),this.defaults?.destroy(),this.approachCircle.destroy(),this.skinEventCallback&&this.skinManager?.removeSkinChangeListener(this.skinEventCallback)}}function interpolateVertices(E,A,_){if(E.calculatedPath.length===0)return new Vector2(0,0);if(A<=0)return E.calculatedPath[0];if(A>=E.calculatedPath.length)return E.calculatedPath[E.calculatedPath.length-1];const I=E.calculatedPath[A-1],B=E.calculatedPath[A],T=E._cumulativeLength[A-1],R=E._cumulativeLength[A];if(Math.abs(T-R)<.001)return I;const P=(_-T)/(R-T);return I.fadd(B.fsubtract(I).fscale(P))}function progressToDistance(E,A){return MathUtils.clamp01(A)*E.distance}function calculateSliderProgress(E,A,_){const I=progressToDistance(E,A),B=progressToDistance(E,_);let T=0;for(;T<E.calculatedPath.length&&E._cumulativeLength[T]<I;)T++;const R=[interpolateVertices(E,T,I)];for(;T<E.calculatedPath.length&&E._cumulativeLength[T]<=B;){if(R.length>0&&R[R.length-1].fdistance(E.calculatedPath[T])<=0){T++;continue}R.push(E.calculatedPath[T]),++T}return interpolateVertices(E,T,B).fdistance(R[R.length-1])>0&&R.push(interpolateVertices(E,T,B)),R}const RADIUS=20,DIVIDES=64,VECS=3;function createGeometry(E,A=RADIUS){const _=[],I=[];_.push(E[0].x,E[0].y,0);const B=E.length-1;for(let R=1;R<=B;R++){const{x:P,y:D}=E[R],{x:F,y:L}=E[R-1],U=P-F,V=D-L,K=Math.hypot(U,V),J=K===0?0:A*-V/K,ee=K===0?0:A*U/K;_.push(F+J,L+ee,1,F-J,L-ee,1,P+J,D+ee,1,P-J,D-ee,1,P,D,0);const ie=5*R+1;I.push(ie-6,ie-5,ie-1,ie-5,ie-1,ie-3,ie-6,ie-4,ie-1,ie-4,ie-1,ie-2)}const T=(R,P,D)=>{const F=Math.atan2(_[VECS*P+1]-_[VECS*R+1],_[VECS*P]-_[VECS*R]);let L=Math.atan2(_[VECS*D+1]-_[VECS*R+1],_[VECS*D]-_[VECS*R]);F>L&&(L+=2*Math.PI);let U=L-F;const V=Math.ceil(DIVIDES*Math.abs(U)/(2*Math.PI));U/=V;let K=P;for(let J=1;J<V;++J){_.push(_[VECS*R]+A*Math.cos(F+J*U),_[VECS*R+1]+A*Math.sin(F+J*U),1);const ee=_.length/VECS-1;I.push(R,K,ee),K=ee}I.push(R,K,D)};for(let R=1;R<B;++R){const P=E[R].x-E[R-1].x,D=E[R].y-E[R-1].y,F=E[R+1].x-E[R].x,L=E[R+1].y-E[R].y;P*L-F*D>0?T(5*R,5*R-1,5*R+2):T(5*R,5*R+1,5*R-2)}return T(0,1,2),T(5*E.length-5,5*E.length-6,5*E.length-7),{aPosition:_,indexBuffer:I}}const sharedUpdate=(E,A)=>{const _=inject("config/experimental")?.hidden,I=E.object.startTime-E.object.timePreempt,T=inject("config/gameplay")?.snakeOutSlider?40:240;if(A<I||A>E.object.endTime+800)return E._alphaFilter.alpha=0,E.wrapper.visible=!1,{start:0,end:0};E.wrapper.visible=!0;const R=Math.min(1,Math.max(0,(A-E.object.startTime)/E.object.duration)),P=E.spanAt(R),D=E.progressAt(R);let F=0,L=Math.min(1,Math.max(0,(A-(E.object.startTime-E.object.timePreempt))/(E.object.timePreempt/3)));P>=E.object.spans-1&&(Math.min(P,E.object.spans-1)%2===1?(F=0,L=D):F=D);const U=E.evaluation?.hitTime??E.object.startTime,V=E.evaluation?.circlesEvals[0].value!==HitResult.LargeTickMiss;if(F=A>=U&&V?F:0,A<E.object.startTime){const K=Math.min(1,Math.max(0,(A-I)/E.object.timeFadeIn));if(E._alphaFilter.alpha=K,_&&K>=1){const J=I+E.object.timeFadeIn,ee=Clamp((A-J)/(E.object.endTime-J));return E._alphaFilter.alpha=1-ee,{start:F,end:L}}return{start:F,end:L}}if(_&&A>=E.object.startTime){const K=I+E.object.timeFadeIn,J=Clamp((A-K)/(E.object.endTime-K));return E._alphaFilter.alpha=1-J,{start:F,end:L}}if(A>=E.object.startTime&&A<E.object.endTime)return E._alphaFilter.alpha=1,{start:F,end:L};if(A>=E.object.endTime){const K=1-Clamp((A-E.object.endTime)/T);return E._alphaFilter.alpha=K,{start:F,end:L}}return{start:F,end:L}},refreshSprite$1=E=>{const A=E.skinManager?.getCurrentSkin();if(!A)return;const _=E.context.consume("beatmapObject"),I=E.object.comboIndexWithOffsets%(_?.data.colors.comboColors.length&&!inject("config/skinning")?.disableBeatmapSkin?_?.data.colors.comboColors.length:A.colorsLength),B=_?.data.colors.comboColors,T=B?.length&&!inject("config/skinning")?.disableBeatmapSkin?`${B[I].red},${B[I].green},${B[I].blue}`:A.config.Colours[`Combo${I+1}`],R=T.split(",").map(L=>+L/255);E.trackColor=R,E.color=T,E.borderColor=R,E._shader.resources.customUniforms.uniforms.borderColor=R,E._shader.resources.customUniforms.uniforms.innerColor=darken([R[0],R[1],R[2]],4),E._shader.resources.customUniforms.uniforms.outerColor=darken([R[0],R[1],R[2]],4),E._shader.resources.customUniforms.uniforms.borderWidth=.128*1.65,E._shader.resources.customUniforms.uniforms.bodyAlpha=.92,E._selectShader.resources.customUniforms.uniforms.borderColor=[255/255,192/255,43/255,1],E._selectShader.resources.customUniforms.uniforms.borderWidth=.128*1.65,E.timelineObject?.refreshSprite();const P=calculateSliderProgress(E.object.path,0,1);if(!P.length)return;const{aPosition:D,indexBuffer:F}=createGeometry(P,E.object.radius*(236/256)*.95);E._baseGeometry.attributes.aPosition.buffer.data=new Float32Array(D),E._baseGeometry.indexBuffer.data=new Uint32Array(F)},update$b=(E,A)=>{const{start:_,end:I}=sharedUpdate(E,A);E.updateGeometry(_,I,.95)},blur=new URLSearchParams(window.location.search).get("blur"),refreshSprite=E=>{const A=E.skinManager?.getCurrentSkin();if(!A)return;const _=E.context.consume("beatmapObject"),I=E.object.comboIndexWithOffsets%(_?.data.colors.comboColors.length&&!inject("config/skinning")?.disableBeatmapSkin?_?.data.colors.comboColors.length:A.colorsLength),B=_?.data.colors.comboColors,T=B?.length&&!inject("config/skinning")?.disableBeatmapSkin?`${B[I].red},${B[I].green},${B[I].blue}`:A.config.Colours[`Combo${I+1}`],R=_?.data.colors.sliderTrackColor,D=((R&&!inject("config/skinning")?.disableBeatmapSkin?`${R.red},${R.green},${R.blue}`:A.config.Colours.SliderTrackOverride)??T).split(",").map(J=>+J/255);E.trackColor=D,E.color=T;const L=(_?.data.colors.sliderBorderColor&&!inject("config/skinning")?.disableBeatmapSkin?Object.values(_?.data.colors.sliderBorderColor).map(J=>J/255).slice(0,3):null)??A.config.Colours.SliderBorder.split(",").map(J=>+J/255);E.borderColor=L,E._shader.resources.customUniforms.uniforms.borderColor=L,E._shader.resources.customUniforms.uniforms.innerColor=lighten(blur?[.5,.5,.5]:[D[0],D[1],D[2]],blur?.1:.5),E._shader.resources.customUniforms.uniforms.outerColor=darken(blur?[.5,.5,.5]:[D[0],D[1],D[2]],.1),E._shader.resources.customUniforms.uniforms.borderWidth=.128,E._shader.resources.customUniforms.uniforms.bodyAlpha=.7,E._selectShader.resources.customUniforms.uniforms.borderColor=[49/255,151/255,255/255,1],E._selectShader.resources.customUniforms.uniforms.borderWidth=.128,E.timelineObject?.refreshSprite();const U=calculateSliderProgress(E.object.path,0,1);if(!U.length)return;const{aPosition:V,indexBuffer:K}=createGeometry(U,E.object.radius*(236/256));E._baseGeometry.attributes.aPosition.buffer.data=new Float32Array(V),E._baseGeometry.indexBuffer.data=new Uint32Array(K)},update$a=(E,A)=>{const{start:_,end:I}=sharedUpdate(E,A);E.updateGeometry(_,I)};class TimelineSliderHead extends TimelineHitCircle{constructor(A,_){super(A),this.container.removeChild(this.defaults.container),this.defaults.destroy(),this.defaults=new DrawableDefaults(_),this.container.addChild(this.defaults.container)}refreshSprite(){const A=this.skinManager?.getCurrentSkin();if(!A)return;const _=A.getTexture("hitcircle",this.context.consume("beatmapSkin")),I=A.getTexture("hitcircleoverlay",this.context.consume("beatmapSkin")),B=A.getTexture("hitcircleselect",this.context.consume("beatmapSkin"));_&&(this.hitCircle.texture=_),I&&(this.hitCircleOverlay.texture=I),this.select.texture=(A.config.General.Argon?BLANK_TEXTURE:B)??BLANK_TEXTURE,this.hitCircle.visible=!A.config.General.Argon,this.hitCircleOverlay.visible=!A.config.General.Argon;const T=this.context.consume("object")?.color,R=T?.includes("rgb")?T??"rgb(0, 0, 0)":`rgb(${T??"0,0,0"})`;if(this.hitCircle.tint=R,this.defaults.container.tint=16777215,this.defaults.sprites.map(F=>{F.tint=16777215}),!A.config.General.Argon)return;const P=color(R);if(!P)return;const D=.299*(P?.rgb().r/255)+.587*(P?.rgb().g/255)+.114*(P?.rgb().b/255);this.defaults.container.tint=D>.5?R:16777215,this.defaults.sprites.map(F=>{F.tint=D>.5?3355443:15066597})}}class TimelineSliderTail extends TimelineHitCircle{constructor(A){super(A),this.container.removeChild(this.defaults.container),this.defaults.destroy()}refreshSprite(){const A=this.skinManager?.getCurrentSkin();if(!A)return;const _=A.config.General.Argon?BLANK_TEXTURE:A.getTexture("sliderendcircle",this.context.consume("beatmapSkin"))??A.getTexture("hitcircle",this.context.consume("beatmapSkin")),I=A.config.General.Argon?BLANK_TEXTURE:A.getTexture("sliderendcircle",this.context.consume("beatmapSkin"))?A.getTexture("sliderendcircleoverlay",this.context.consume("beatmapSkin"))??BLANK_TEXTURE:A.getTexture("hitcircleoverlay",this.context.consume("beatmapSkin")),B=A.getTexture("hitcircleselect",this.context.consume("beatmapSkin"));_&&(this.hitCircle.texture=_),I&&(this.hitCircleOverlay.texture=I),this.select.texture=(A.config.General.Argon?BLANK_TEXTURE:B)??BLANK_TEXTURE;const T=this.context.consume("object")?.color,R=T?.includes("rgb")?T??"rgb(0, 0, 0)":`rgb(${T??"0,0,0"})`;this.hitCircle.tint=R}}class TimelineSliderRepeat extends TimelineSliderTail{sprite=new Sprite$1({anchor:.5});graphics=new Graphics$1().circle(0,0,15).fill(11974326);constructor(A){super(A),this.container.addChild(this.sprite,this.graphics),this.refreshSprite()}refreshSprite(){if(!this.sprite||!this.graphics)return;super.refreshSprite();const A=this.skinManager?.getCurrentSkin();if(!A)return;const _=A.getTexture("reversearrow",this.context.consume("beatmapSkin"));if(_&&this.sprite&&(this.sprite.texture=_),A.config.General.Argon){if(this.container.removeChild(this.sprite),!this.graphics)return;this.container.addChild(this.graphics);const I=this.context.consume("object")?.color,B=I?.includes("rgb")?I??"rgb(0, 0, 0)":`rgb(${I??"0,0,0"})`;this.graphics.tint=B}else this.graphics&&this.container.removeChild(this.graphics),this.container.addChild(this.sprite)}}const gradient=new FillGradient({start:{x:0,y:0},end:{x:0,y:1},colorStops:[{offset:0,color:16777215},{offset:.5,color:Color$1.shared.setValue(darken([1,1,1,1],.1)).toHex()},{offset:1,color:16777215}],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"}),radialGradient=new FillGradient({type:"radial",colorStops:[{offset:0,color:Color$1.shared.setValue(darken([1,1,1,1],.1)).toHex()},{offset:1,color:16777215}]});class TimelineSlider extends TimelineHitObject{circles=[];filter=new AlphaFilter({alpha:.7});body=new Graphics$1({filters:this.filter});select;length=0;constructor(A){super(A),this.object=A,this.length=A.duration/(DEFAULT_SCALE/(inject("config/timeline")?.scale??1)),this.select=new Graphics$1({visible:!1});for(const _ of this.object.nestedHitObjects.filter(I=>!(I instanceof SliderTick||I instanceof SpinnerTick||I instanceof SpinnerBonusTick)).map(I=>{const B=I.clone();return B.startTime=B.startTime-this.object.startTime,B}).toReversed()){const I=_ instanceof SliderHead?new TimelineSliderHead(_,this.object).hook(this.context):_ instanceof SliderTail?new TimelineSliderTail(_).hook(this.context):_ instanceof SliderRepeat?new TimelineSliderRepeat(_).hook(this.context):new TimelineSliderTail(_).hook(this.context);I.container.y=0,I.container.visible=!0,this.circles.push(I)}this.container.addChild(this.body,...this.circles.map(_=>_.container),this.select),this.updateCircles(),this.refreshSprite(),inject("config/timeline")?.onChange("scale",()=>{this.updateCircles(),this.refreshSprite()})}get object(){return this._object}set object(A){if(super.object=A,this._object=A,this.length=A.duration/(DEFAULT_SCALE/(inject("config/timeline")?.scale??1)),!this.circles?.length)return;let _=0;for(const I of A.nestedHitObjects.filter(B=>!(B instanceof SliderTick||B instanceof SpinnerTick||B instanceof SpinnerBonusTick)).map(B=>{const T=B.clone();return T.startTime=T.startTime-A.startTime,T}).toReversed())this.circles[_++].object=I;this.updateCircles(),this.refreshSprite()}get isSelected(){return this._isSelected}set isSelected(A){this._isSelected=A;for(const _ of this.circles)_.isSelected=A;this.refreshSprite()}updateVelocity(){const A=this.context.consume("beatmapObject");if(!A)return;const _=A.data.controlPoints.difficultyPointAt(this.object.startTime),I=new Text$1({text:`${_.sliderVelocity.toFixed(2)}x`,style:{fontFamily:"Rubik",fontSize:10,fill:10937249},anchor:{x:0,y:.5},x:5,y:-32});this.container.addChild(I)}refreshSprite(){this.length=this.object.duration/(DEFAULT_SCALE/(inject("config/timeline")?.scale??1)),this.select.clear().roundRect(-25,-25,this.length+50,50,25).stroke({width:50*.1,cap:"round",color:16760875,alignment:1}),this.select.visible=(this.skinManager?.getCurrentSkin().config.General.Argon??!1)&&this.isSelected,this.skinManager?.getCurrentSkin().config.General.Argon?(this.body.clear().moveTo(0,0).lineTo(this.length,0).stroke({width:50,cap:"round",color:11974326}).moveTo(0,0).lineTo(this.length,0).stroke({width:50*.8,cap:"round",color:"white"}),this.filter.alpha=1):(this.body.clear().circle(0,0,5900/256).fill(radialGradient).circle(this.length,0,5900/256).fill(radialGradient).rect(0,-23.046875,this.length,11800/256).fill(gradient),this.filter.alpha=.7),this.body.tint=this.context.consume("object")?.color.includes("rgb")?this.context.consume("object")?.color??"rgb(0, 0, 0)":`rgb(${this.context.consume("object")?.color??"0,0,0"})`;for(const A of this.circles)A.refreshSprite()}hook(A){super.hook(A);for(const _ of this.circles)_.refreshSprite();return this.refreshSprite(),this}getTimeRange(){return{start:this.object.startTime-150,end:this.object.endTime+150}}updateCircles(){const A=inject("config/timeline")?.scale??1;for(const _ of this.circles.filter(I=>I instanceof TimelineSliderTail||TimelineSliderRepeat))_.container.x=(_.object.startTime+(_ instanceof TimelineSliderTail&&!(_ instanceof TimelineSliderRepeat)?36:0))/(DEFAULT_SCALE/A)}}const update$9=(E,A)=>{const _=Math.min(1,Math.max(0,(A-E.object.startTime)/E.object.duration)),I=E.object.path.curvePositionAt(_,E.object.spans),B=200;if(E.container.x=E.object.startX+I.x+E.object.stackedOffset.x,E.container.y=E.object.startY+I.y+E.object.stackedOffset.y,A<E.object.startTime||A>E.object.endTime+B/4){E.container.visible=!1;return}if(E.container.visible=!0,A>=E.object.startTime&&A<=E.object.endTime){E.container.alpha=Easings.OutQuint(Math.max(0,Math.min(1,(A-E.object.startTime)/B)));return}A>E.object.endTime&&(E.container.alpha=1-Easings.OutQuint(Math.max(0,Math.min(1,(A-E.object.endTime)/(B/4)))))},update$8=(E,A)=>{const _=Math.min(1,Math.max(0,(A-E.object.startTime)/E.object.duration)),I=E.object.path.curvePositionAt(_,E.object.spans);if(E.container.x=E.object.startX+I.x+E.object.stackedOffset.x,E.container.y=E.object.startY+I.y+E.object.stackedOffset.y,A<E.object.startTime||A>E.object.endTime){E.container.visible=!1;return}E.container.visible=!0};class DrawableSliderBall extends AnimatedSkinnableElement{container;sliderb;slidernd;sliderspec;updateFn=update$8;constructor(A){super(),this.object=A,this.container=new Container,this.sliderb=new Sprite$1,this.sliderb.anchor.set(.5),this.slidernd=new Sprite$1,this.slidernd.anchor.set(.5),this.sliderspec=new Sprite$1,this.sliderspec.anchor.set(.5),this.sliderspec.blendMode="add",this.container.visible=!1,this.container.x=A.startX,this.container.y=A.startY,this.container.scale.set(this.object.scale),this.container.interactive=!1,this.container.interactiveChildren=!1,this.container.eventMode="none",this.container.addChild(this.slidernd,this.sliderb,this.sliderspec),this.skinEventCallback=this.skinManager?.addSkinChangeListener(()=>this.refreshSprite()),this.refreshSprite()}_object;get object(){return this._object}set object(A){this._object=A,this.container&&(this.container.x=A.startX,this.container.y=A.startY,this.container.scale.set(A.scale))}refreshSprite(){const A=this.skinManager?.getCurrentSkin();if(!A)return;const _=A.getAnimatedTexture("sliderb",A.config.General.Argon?void 0:this.context.consume("beatmapSkin")),I=A.getTexture("sliderb-nd",A.config.General.Argon?void 0:this.context.consume("beatmapSkin")),B=A.getTexture("sliderb-spec",A.config.General.Argon?void 0:this.context.consume("beatmapSkin"));if(this.container.alpha=1,I&&(this.slidernd.texture=I),B&&(this.sliderspec.texture=B),this.texturesList=_,this.container.scale.set(this.object.scale*(A.config.General.Argon?.95:1)),this.updateFn=A.config.General.Argon?update$9:update$8,A.config.General.Argon&&(this.slidernd.tint=this.context.consume("slider")?.getColor(A)??16777215,this.sliderb.tint=16777215,this.slidernd.visible=!0,this.sliderspec.visible=!1),!A.config.General.Argon){const T=this.context.consume("beatmapSkin")?.animatedTextures.has("sliderb")||A.animatedTextures.has("sliderb")||A.textures.has("sliderb")||this.context.consume("beatmapSkin")?.textures.has("sliderb");this.slidernd.visible=!(T&&A!==this.skinManager?.defaultSkin),this.sliderspec.visible=!(T&&A!==this.skinManager?.defaultSkin),this.sliderb.tint=A.config.General.AllowSliderBallTint?this.context.consume("slider")?.getColor(A)??16777215:16777215,this.slidernd.tint=0}}update(A){this.updateFn(this,A);const _=this.object,I=(A-_.startTime)/_.duration,B=.1/_.path.distance,T=_.path.curvePositionAt(Math.min(1-B,I),_.spans),R=_.path.curvePositionAt(Math.min(1,I+B),_.spans),P=T.subtract(R),D=Math.max(.15/this.object.velocity*(1e3/60),1e3/60),F=Math.floor((A-_.startTime)/D)%this.texturesList.length;if(this.sliderb.texture=this.texturesList[F],P.flength()<.01)return;const L=-90+-Math.atan2(P.x,P.y)*180/Math.PI;this.container.angle=L,this.slidernd.angle=-L,this.sliderspec.angle=-L}destroy(){this.container.destroy(),this.skinEventCallback&&this.skinManager?.removeSkinChangeListener(this.skinEventCallback)}}const update$7=(E,A)=>{const I=E.context.consume("drawable")?.evaluation?.trackingStates.findLast(L=>L[0].startTime<=A),B=I?.[0].startTime??E.object.startTime,T=I?.[1].startTime??E.object.endTime,R=Math.min(1,Math.max(0,(A-E.object.startTime)/E.object.duration)),P=E.object.path.curvePositionAt(R,E.object.spans);E.container.x=E.object.startX+P.x+E.object.stackedOffset.x,E.container.y=E.object.startY+P.y+E.object.stackedOffset.y;const D=300;if(A<B||A>T+D){E.container.visible=!1;return}if(E.container.visible=!0,A>=B&&A<=T){const L=Math.min(1,Math.max(0,(A-B)/D)),U=Math.min(1,Math.max(0,(A-B)/D));E.container.scale.set((1+1.4*Easings.OutQuint(U))*E.object.scale),E.container.alpha=Easings.OutQuint(L);return}const F=1+1.4*Clamp(Easings.OutQuint((T-B)/D));if(A>T){const L=Math.min(1,Math.max(0,(A-T)/(D/2))),U=Math.min(1,Math.max(0,(A-T)/D));E.container.scale.set((F-(F-1)*Easings.OutQuint(U))*E.object.scale),E.container.alpha=1-Easings.OutQuint(L);return}},update$6=(E,A)=>{const _=E.context.consume("drawable"),I=_?.evaluation?.trackingStates.findLast(V=>V[0].startTime<=A),B=I?.[0].startTime??E.object.startTime,T=I?.[1].startTime??E.object.endTime,R=T-B,P=Math.min(1,Math.max(0,(A-E.object.startTime)/E.object.duration)),D=E.object.path.curvePositionAt(P,E.object.spans);E.container.x=E.object.startX+D.x+E.object.stackedOffset.x,E.container.y=E.object.startY+D.y+E.object.stackedOffset.y;const F=Math.min(180,R),L=Math.min(60,R),U=200;if(A<B||A>T+U||_?.evaluation?.trackingStates.length===0){E.container.visible=!1;return}if(E.container.visible=!0,A>=B&&A<B+F){const V=Math.min(1,Math.max(0,(A-B)/L)),K=Math.min(1,Math.max(0,(A-B)/F));E.container.scale.set((.5+.5*Easings.Out(K))*E.object.scale),E.container.alpha=V;return}if(A>=B+F&&A<=T){E.container.scale.set(1*E.object.scale),E.container.alpha=1;return}if(A>T){const V=1-Math.min(1,Math.max(0,(A-T)/U)),K=Math.min(1,Math.max(0,(A-T)/U));E.container.scale.set((1-.2*Easings.Out(K))*E.object.scale),E.container.alpha=Easings.In(V);return}};class DrawableSliderFollowCircle extends AnimatedSkinnableElement{container;updateFn=update$6;constructor(A){super(),this.object=A,this.container=new Sprite$1,this.container.visible=!1,this.container.x=A.startX,this.container.y=A.startY,this.container.anchor.set(.5),this.container.scale.set(this.object.scale),this.container.eventMode="none",this.texturesList=this.skinManager?.getCurrentSkin().getAnimatedTexture("sliderfollowcircle")??[BLANK_TEXTURE],this.skinEventCallback=this.skinManager?.addSkinChangeListener(()=>this.refreshSprite())}_object;get object(){return this._object}set object(A){this._object=A,this.container&&(this.container.x=A.startX,this.container.y=A.startY,this.container.scale.set(A.scale))}refreshSprite(){const A=this.skinManager?.getCurrentSkin();A&&(this.updateFn=A.config.General.Argon?update$7:update$6,this.texturesList=this.skinManager?.getCurrentSkin().getAnimatedTexture("sliderfollowcircle",A.config.General.Argon?this.context.consume("beatmapSkin"):void 0)??[BLANK_TEXTURE],this.container.tint=A.config.General.Argon?this.context.consume("slider")?.getColor(A)??16777215:16777215,this.container.blendMode=A.config.General.Argon?"add":"normal")}update(A){this.updateFn(this,A);const _=this.object.startTime,B=1e3/(this.skinManager?.getCurrentSkin()?.config.General.AnimationFrameRate??this.texturesList.length),T=Clamp(Math.floor((A-_)/B),0,this.texturesList.length-1);this.container.texture=this.texturesList[T]}destroy(){this.container.destroy(),this.skinEventCallback&&this.skinManager?.removeSkinChangeListener(this.skinEventCallback)}}const update$5=(E,A)=>{const _=E.evaluation?.hitTime??E.object.startTime;if(A<_||!inject("config/gameplay")?.hitAnimation){const I=E.skinManager?.getCurrentSkin(),B=I?.getTexture("sliderstartcircle"),T=I?.getTexture("hitcircle"),R=B??T;R&&(E.hitCircleSprite.texture=R)}if(inject("config/gameplay")?.hitAnimation&&A>=_){const I=E.skinManager?.getCurrentSkin().getTexture("hitcircleflash");I&&(E.hitCircleSprite.texture=I)}};class DrawableSliderHead extends DrawableHitCircle{constructor(A,_,I,B=!0){super(A,!1),this.parent=_,B&&(this.defaults=new DrawableDefaults(_).hook(this.context),this.approachCircle=new DrawableApproachCircle(_).hook(this.context),this.wrapper.addChild(this.defaults.container)),this.hitSound=new HitSample(I).hook(this.context),this.container.interactive=!1,this.container.interactiveChildren=!1,this.timelineObject=void 0,this.refreshSprite(),this.container.eventMode="none"}hitSound;headUpdateFn=null;updateObjects(A,_,I){super.object=A,this._object=A,this.parent=_,this.defaults&&(this.defaults.object=_),this.approachCircle&&(this.approachCircle.object=_),this.hitSound&&(this.hitSound.hitSamples=I)}refreshSprite(){super.refreshSprite(),this.approachCircle.refreshSprite();const A=this.skinManager?.getCurrentSkin();if(!A)return;const _=A.getTexture("sliderstartcircle",this.context.consume("beatmapSkin")),I=A.getTexture("sliderstartcircleoverlay",this.context.consume("beatmapSkin")),B=_??A.getTexture("hitcircle",this.context.consume("beatmapSkin")),T=_?I??A.getTexture("hitcircleoverlay",this.context.consume("beatmapSkin")):A.getTexture("hitcircleoverlay",this.context.consume("beatmapSkin"));B&&(this.hitCircleSprite.texture=B),T&&(this.hitCircleOverlay.texture=T),this.headUpdateFn=A.config.General.Argon?update$5:null;const R=this.context.consume("slider")?.getColor(A)??16777215;this.hitCircleSprite.tint=R,this.flashPiece.tint=R,this.color=R,this.timelineObject?.refreshSprite()}update(A){super.update(A),this.headUpdateFn?.(this,A)}eval(A){const _=super.eval(A);return _.value===HitResult.None||_.value===HitResult.Miss?{..._,value:HitResult.LargeTickMiss}:{..._,value:HitResult.LargeTickHit}}}const update$4=(E,A)=>{const I=E.object.startTime-E.object.timePreempt,B=-12,T=35,R=250,P=(Math.min(A,E.object.startTime)-I)%300;if(A>E.object.startTime){const F=1.3-Easings.Out(P/300)*.3,L=1.4-F,U=Math.min(300,E.object.spanDuration);E.reverseArrow.scale.set(F+Easings.Out(Clamp((A-E.object.startTime)/U))*L),E.reverseArrow.alpha=Easings.Out(1-Clamp((A-E.object.startTime)/U)),E.ringPiece.scale.set(F+Easings.Out(Clamp((A-E.object.startTime)/U))*L),E.ringPiece.alpha=Easings.Out(1-Clamp((A-E.object.startTime)/U));return}const D=150;E.ringPiece.scale.set(236/200),E.reverseArrow.alpha=Clamp((A-I)/D),E.ringPiece.alpha=Clamp((A-I)/D),P<T?(E.reverseArrow.scale.set(1+Easings.Out(P/T)*.3),E.ringPiece.x=Easings.Out(P/T)*B):(E.reverseArrow.scale.set(1.3-Easings.Out((P-T)/(T+R))*.3),E.ringPiece.x=B-Easings.Out((P-T)/(T+R))*B)},update$3=(E,A)=>{const I=E.object.startTime-E.object.timePreempt,B=(Math.min(A,E.object.startTime)-I)%300;if(A>E.object.startTime){const R=1.3-Easings.Out(B/300)*.3,P=1.4-R,D=Math.min(300,E.object.spanDuration);E.reverseArrow.scale.set(R+Easings.Out(Math.max(0,Math.min(1,(A-E.object.startTime)/D)))*P),E.reverseArrow.alpha=Easings.Out(1-Math.min(1,Math.max(0,(A-E.object.startTime)/D)));return}const T=150;E.reverseArrow.alpha=Math.min(1,Math.max(0,(A-I)/T)),E.reverseArrow.scale.set(1.3-Easings.Out(B/300)*.3)},update$2=(E,A)=>{const _=E.skinManager?.getCurrentSkin().getTexture("sliderendcircle",E.context.consume("beatmapSkin"));_&&(E.hitCircleSprite.texture=_)},TAIL_LENIENCY=36;class DrawableSliderTail extends DrawableSliderHead{constructor(A,_,I){super(A,_,I,!1),this.parent=_,this.hitSound=new HitSample(I).hook(this.context),this.refreshSprite()}hitSound;tailUpdateFn=null;refreshSprite(){super.refreshSprite(),this.flashPiece.texture=BLANK_TEXTURE;const A=this.skinManager?.getCurrentSkin();if(!A)return;A.config.General.Argon?this.tailUpdateFn=update$2:this.tailUpdateFn=null;const _=A.getTexture("sliderendcircle",A.config.General.Argon?void 0:this.context.consume("beatmapSkin"))??A.getTexture("hitcircle",A.config.General.Argon?void 0:this.context.consume("beatmapSkin")),I=A.getTexture("sliderendcircle",A.config.General.Argon?void 0:this.context.consume("beatmapSkin"))?A.getTexture("sliderendcircleoverlay",A.config.General.Argon?void 0:this.context.consume("beatmapSkin"))??BLANK_TEXTURE:A.getTexture("hitcircleoverlay",A.config.General.Argon?void 0:this.context.consume("beatmapSkin"));_&&(this.hitCircleSprite.texture=_),I&&(this.hitCircleOverlay.texture=I)}playHitSound(A,_){const I=this.context.consume("beatmapObject"),B=inject("ui/main/controls/progress")?.isSeeking||inject("beatmapset")?.isSeeking;if(!I||B||!(I.previousTime<=this.object.startTime+_&&this.object.startTime+_<A&&A-I.previousTime<30))return;const T=I.getNearestSamplePoint(this.object.startTime+_);this.hitSound?.play(T)}eval(A){const _=A.findLast(L=>L.startTime<=this.object.startTime);if(!_||!(_.mouseLeft||_.mouseRight))return{value:HitResult.LargeTickMiss,hitTime:1/0};const I=Clamp((this.object.startTime-this.parent.startTime)/this.parent.duration),B=this.parent.path.curvePositionAt(I,this.parent.spans),T=_.position.x,R=_.position.y,P=new Vector2(T,R),D=64*this.object.scale*2.4;return P.distance(B.add(this.parent.stackedOffset).add(this.parent.startPosition))>D?{value:HitResult.LargeTickMiss,hitTime:1/0}:{value:HitResult.LargeTickHit,hitTime:this.object.startTime}}update(A){super.update(A),this.tailUpdateFn?.(this,A)}}class DrawableSliderRepeat extends DrawableSliderTail{constructor(A,_,I){super(A,_,I),this.parent=_,this.arrowContainer.interactive=!1,this.arrowContainer.interactiveChildren=!1,this.arrowContainer.addChild(this.reverseArrow,this.ringPiece),this.container.addChild(this.arrowContainer),this.refreshSprite(),this.updateRotation()}reverseArrow=new Sprite$1({anchor:.5});ringPiece=new Sprite$1({anchor:.5});rotation;arrowContainer=new Container;updateObjects(A,_,I){super.updateObjects(A,_,I),this.parent=_,this.updateRotation()}arrowUpdateFn=update$3;refreshSprite(){if(super.refreshSprite(),!this.reverseArrow)return;const A=this.skinManager?.getCurrentSkin();if(!A)return;this.arrowUpdateFn=A?.config.General.Argon?update$4:update$3;const _=A.getTexture("reversearrow",this.context.consume("beatmapSkin"));_&&(this.reverseArrow.texture=_);const I=A.getTexture("repeat-edge-piece",this.context.consume("beatmapSkin"));this.ringPiece.texture=A?.config.General.Argon?I??BLANK_TEXTURE:BLANK_TEXTURE}updateRotation(){const A=this.object.repeatIndex%2===0,_=A?this.parent.path.calculatedPath.length-1:0;let I=_;for(;this.parent.path.calculatedPath[_].distance(this.parent.path.calculatedPath[I])<.01;){if(A){I--;continue}I++}const B=this.parent.path.calculatedPath[_],T=this.parent.path.calculatedPath[I],R=Math.atan2(T.y-B.y,T.x-B.x);this.rotation=R,this.arrowContainer.rotation=R}get object(){return super.object}set object(A){super.object=A}update(A){super.update(A),this.arrowUpdateFn(this,A)}}const update$1=(E,A)=>{const _=E.object.startTime-E.object.timePreempt,I=200,B=!E.evaluation||![HitResult.Miss,HitResult.LargeTickMiss,HitResult.SmallTickMiss].includes(E.evaluation.value);if(E.container.x=E.object.startX+E.object.stackedOffset.x,E.container.y=E.object.startY+E.object.stackedOffset.y,E.container.scale.set(1*E.object.scale),A<E.object.startTime){const T=Math.min(1,Math.max(0,(A-_)/E.object.timeFadeIn));E.container.alpha=T;return}if(A>=E.object.startTime){const T=1-Math.min(1,Math.max(0,(A-E.object.startTime)/I)),R=Math.min(2,1+Math.max(0,(A-E.object.startTime)/I));E.container.alpha=T,E.container.scale.set((B?R:1)*E.object.scale);return}};class DrawableSliderTick extends DrawableHitObject{constructor(A,_,I){super(A),this.object=A,this.object=A,this.container=new Sprite$1(this.skinManager?.getCurrentSkin().getTexture("sliderscorepoint")),this.container.x=A.startX+A.stackedOffset.x,this.container.y=A.startY+A.stackedOffset.x,this.container.anchor.set(.5),this.container.interactive=!1,this.container.interactiveChildren=!1,this.container.eventMode="none";const B=A.startPosition.distance(_.startPosition),T=A.endPosition.distance(_.endPosition);(B<_.radius||T<_.radius)&&(this.container.visible=!1);const R=I.clone();R.hitSound="slidertick",this.hitSound=new HitSample([R]).hook(this.context),this.skinEventCallback=this.skinManager?.addSkinChangeListener(()=>this.refreshSprite())}container;hitSound;updateObjects(A,_,I){if(this.object=A,this.container){this.container.x=A.startX+A.stackedOffset.x,this.container.y=A.startY+A.stackedOffset.x;const B=A.startPosition.distance(_.startPosition),T=A.endPosition.distance(_.endPosition);(B<_.radius||T<_.radius)&&(this.container.visible=!1)}if(this.hitSound){const B=I.clone();B.hitSound="slidertick",this.hitSound.hitSamples=[B]}}refreshSprite(){const A=this.skinManager?.getCurrentSkin();if(!A)return;const _=A.getTexture("sliderscorepoint",A.config.General.Argon?void 0:this.context.consume("beatmapSkin"));this.container.tint=A.config.General.Argon?this.context.consume("slider")?.getColor(A)??16777215:16777215,_&&(this.container.texture=_)}playHitSound(A){const _=this.context.consume("beatmapObject"),I=inject("ui/main/controls/progress")?.isSeeking||inject("beatmapset")?.isSeeking;if(!_||I||!(_.previousTime<=this.object.startTime&&this.object.startTime<A&&A-_.previousTime<30))return;const B=_.getNearestSamplePoint(this.object.startTime);this.hitSound?.play(B)}getTimeRange(){return{start:this.object.startTime-this.object.timePreempt,end:this.object.startTime+800}}update(A){update$1(this,A)}eval(A){const _=A.findLast(F=>F.startTime<=this.object.startTime);if(!_||!(_.mouseLeft||_.mouseRight))return{value:HitResult.SmallTickMiss,hitTime:1/0};const I=new Vector2(this.object.startX+this.object.stackedOffset.x,this.object.startY+this.object.stackedOffset.y),B=_.position.x,T=_.position.y,R=new Vector2(B,T),P=64*this.object.scale*2.4;return R.distance(I)>P?{value:HitResult.SmallTickMiss,hitTime:1/0}:{value:HitResult.SmallTickHit,hitTime:this.object.startTime}}destroy(){this.container.destroy(),this.skinEventCallback&&this.skinManager?.removeSkinChangeListener(this.skinEventCallback)}}const fragment=`in float dist;
// in float progress;
// in float isCircle;
out vec4 finalColor;

// uniform float progressHead;
// uniform float progressTail;

// uniform float scale;
uniform vec4 borderColor;
uniform vec4 innerColor;
uniform vec4 outerColor;
uniform float borderWidth;
uniform float bodyAlpha;

void main() {
    float position = dist;

    float a = 1.0;
    float innerWidth = 1.0 - borderWidth;
    float blurRate = 0.02;

    // Set body color
    vec4 color = mix(innerColor, outerColor, position);

    // Set border color
    if (position >= innerWidth + blurRate) {
        color = borderColor;
    }

    // Set body alpha
    if (position < innerWidth) {
        a = bodyAlpha;
    }

    // Anti-aliasing at outer edge
    if (1.0 - position < blurRate) {
        a = (1.0 - position) / blurRate; 
    }

    // Anti-aliasing at inner edge
    if (position >= innerWidth && position < innerWidth + blurRate) {
        float mu = (position - innerWidth) / blurRate;
        color = borderColor * mu + (1.0 - mu) * color;

        a = 1.0 * mu + (1.0 - mu) * 1.0 * bodyAlpha;
    }

    color.a = 1.0;
    finalColor = vec4(color.rgb, 1.0) * a;
}`,vertex=`in vec3 aPosition;
out float dist;
uniform mat3 uProjectionMatrix;
uniform mat3 uWorldTransformMatrix;
uniform mat3 uTransformMatrix;

void main() {
    dist = aPosition.z;
    
    float x = aPosition.x;
    float y = aPosition.y;
    float z = aPosition.z;

    mat3 mvp = uProjectionMatrix * uWorldTransformMatrix * uTransformMatrix;

    gl_Position = vec4((mvp * vec3(x, y, 1.0)).xy, z, 1.0);
}`,gpuSrc=`struct GlobalUniforms {
    projectionMatrix : mat3x3<f32>,
    worldTransformMatrix : mat3x3<f32>,
    worldColorAlpha : vec4<f32>,
    uResolution : vec2<f32>,
}

struct LocalUniforms {
    uTransformMatrix : mat3x3<f32>,
    uColor : vec4<f32>,
    uRound : f32,
}

struct CustomUniforms {
    // Fragment Uniforms
    borderColor: vec4<f32>,
    innerColor: vec4<f32>,
    outerColor: vec4<f32>,
    borderWidth: f32,
    bodyAlpha: f32,
}

struct VertexOutput {
    @builtin(position) position : vec4<f32>,
    @location(0) dist : f32,
}

@group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
@group(1) @binding(0) var<uniform> localUniforms : LocalUniforms;
@group(2) @binding(0) var<uniform> customUniforms : CustomUniforms;

@vertex
fn vsMain(
    @location(0) aPosition: vec4<f32>,
) -> VertexOutput {
    var mvp: mat3x3<f32> = globalUniforms.projectionMatrix * globalUniforms.worldTransformMatrix * localUniforms.uTransformMatrix;
    var x: f32 = aPosition.x;
    var y: f32 = aPosition.y;
    var z: f32 = aPosition.z;

    return VertexOutput(
        vec4<f32>(
            (mvp * vec3<f32>(x, y, 1.0)).xy,
            z,
            1.0
        ),
        z
    );
}

@fragment
fn fsMain(
    input: VertexOutput
) -> @location(0) vec4<f32> {
    var position = input.dist;

    var a = 1.0;
    var innerWidth = 1.0 - customUniforms.borderWidth;
    var blurRate = 0.02;

    var color: vec4<f32> = mix(customUniforms.innerColor, customUniforms.outerColor, position);

    if (position >= innerWidth + blurRate) {
        color = customUniforms.borderColor;
    }

    if (position < innerWidth) {
        a = customUniforms.bodyAlpha;
    }

    if (1.0 - position < blurRate) {
        a = (1.0 - position) / blurRate; 
    }

    if (position >= innerWidth && position < innerWidth + blurRate) {
        var mu: f32 = (position - innerWidth) / blurRate;
        color = customUniforms.borderColor * mu + (1.0 - mu) * color;

        a = 1.0 * mu + (1.0 - mu) * customUniforms.bodyAlpha;
    }

    color.a = 1.0;    
    return vec4<f32>(color.xyz, 1.0) * a;
}`,GL={vertex,fragment},GPU=GpuProgram.from({vertex:{source:gpuSrc,entryPoint:"vsMain"},fragment:{source:gpuSrc,entryPoint:"fsMain"}}),COLOR=[69/255,71/255,90/255,0];class DrawableSlider extends DrawableHitObject{_geometry=new Geometry({attributes:{aPosition:{buffer:new Buffer({data:new Float32Array([]),usage:BufferUsage.VERTEX|BufferUsage.COPY_DST}),format:"float32x3",stride:12}},indexBuffer:[]});_shader=Shader.from({gl:GL,gpu:GPU,resources:{customUniforms:{borderColor:{value:[205/255,214/255,244/255,1],type:"vec4<f32>"},innerColor:{value:lighten(COLOR,.5),type:"vec4<f32>"},outerColor:{value:darken(COLOR,.1),type:"vec4<f32>"},borderWidth:{value:.128,type:"f32"},bodyAlpha:{value:.7,type:"f32"}}}});_selectShader=Shader.from({gl:GL,gpu:GPU,resources:{customUniforms:{borderColor:{value:[205/255,214/255,244/255,1],type:"vec4<f32>"},innerColor:{value:lighten(COLOR,.5),type:"vec4<f32>"},outerColor:{value:darken(COLOR,.1),type:"vec4<f32>"},borderWidth:{value:.128,type:"f32"},bodyAlpha:{value:0,type:"f32"}}}});_alphaFilter=new AlphaFilter;drawableCircles=[];body=new Mesh$1({geometry:this._geometry,shader:this._shader,filters:[this._alphaFilter],x:0,y:0,blendMode:inject("config/renderer")?.renderer==="webgl"?"none":"max"});select=new Container;_baseGeometry=new Geometry({attributes:{aPosition:new Float32Array([])},indexBuffer:[]});selectBody=new Mesh$1({geometry:this._baseGeometry,shader:this._selectShader,filters:[new AlphaFilter({alpha:1})],x:0,y:0,blendMode:"none"});path=[];ball;followCircle;nodes=new Graphics$1({visible:!1});sliderWhistleSample;sliderSlideSample;container=new Container;timelineObject;layer=new RenderLayer;layer2=new RenderLayer;layer3=new RenderLayer;wrapper=new Container;judgement;constructor(A){super(A),this.object=A,this.context.provide("drawable",this);let _=-1;this.drawableCircles.push(...A.nestedHitObjects.filter(R=>R instanceof StandardHitObject).map(R=>R instanceof SliderTick?new DrawableSliderTick(R,this.object,this.object.samples.find(P=>P.hitSound==="Normal")).hook(this.context):(_++,R instanceof SliderRepeat?new DrawableSliderRepeat(R,this.object,this.object.nodeSamples[_]).hook(this.context):R instanceof SliderTail?new DrawableSliderTail(R,this.object,this.object.nodeSamples[_]).hook(this.context):R instanceof SliderHead?new DrawableSliderHead(R,this.object,this.object.nodeSamples[_]).hook(this.context):null)).filter(R=>R!==null)),this.body.state.depthTest=!0,this.selectBody.state.depthTest=!0,this.context.provide("slider",this),this.ball=new DrawableSliderBall(this.object).hook(this.context),this.followCircle=new DrawableSliderFollowCircle(this.object).hook(this.context),this.wrapper.addChild(this.body,...this.drawableCircles.slice(1).toReversed().map(R=>R.container),this.followCircle.container,this.layer,this.ball.container,this.drawableCircles[0].container,this.layer2);const I=new RenderLayer;this.container.addChild(I,this.wrapper,this.nodes),this.select.addChild(this.selectBody);for(const R of this.drawableCircles.toReversed()){const P=R;P instanceof DrawableSliderRepeat&&this.layer.attach(P.reverseArrow),P instanceof DrawableSliderHead&&P.defaults&&this.layer2.attach(P.defaults.container),P.select&&this.select.addChild(P.select)}const B=new HitSample$1;B.hitSound="sliderwhistle",this.sliderWhistleSample=new HitSample([B]).hook(this.context);const T=new HitSample$1;T.hitSound="sliderslide",this.sliderSlideSample=new HitSample([T]).hook(this.context),this.refreshSprite(),this.skinEventCallback=this.skinManager?.addSkinChangeListener(()=>this.refreshSprite()),this._shader.resources.customUniforms.uniforms.scale=A.radius/54.4*(236/256),this.timelineObject=new TimelineSlider(A).hook(this.context),this.judgement=new DrawableJudgement(this),I.attach(this.judgement.container),this.container.addChild(this.judgement.container),this.judgement.container.position.x=A.endPosition.add(A.stackedOffset).x,this.judgement.container.position.y=A.endPosition.add(A.stackedOffset).y,this.judgement.container.scale.set(A.scale)}_isHover=!1;get isHover(){return this._isHover}set isHover(A){this._isHover=A,this.nodes.visible=A||this.isSelected}_isSelected=!1;get isSelected(){return this._isSelected}set isSelected(A){this._isSelected=A,this.select.visible=A,this.nodes.visible=A;for(const _ of this.drawableCircles)(_ instanceof DrawableSliderHead||_ instanceof DrawableSliderTail||_ instanceof DrawableSliderRepeat)&&(_.select.visible=A)}_object;get object(){return this._object}set object(A){this._object=A,this.nodes.clear();for(let P=0;P<A.path.controlPoints.length;P++){const D=A.path.controlPoints[P];P===0?this.nodes.lineTo(D.position.x,D.position.y):this.nodes.lineTo(D.position.x,D.position.y).stroke({width:1,alignment:.5,color:15724527})}for(let P=0;P<A.path.controlPoints.length;P++){const D=A.path.controlPoints[P];this.nodes.circle(D.position.x,D.position.y,2).fill(P===0||D.type===null?15724527:16711680)}this.body.x=A.startPosition.x+A.stackedOffset.x,this.body.y=A.startPosition.y+A.stackedOffset.x,this.selectBody.x=A.startPosition.x+A.stackedOffset.x,this.selectBody.y=A.startPosition.y+A.stackedOffset.x,this.nodes.x=A.startPosition.x+A.stackedOffset.x,this.nodes.y=A.startPosition.y+A.stackedOffset.x;const _=A.nestedHitObjects.filter(P=>P instanceof StandardHitObject);let I=-1;for(let P=0;P<this.drawableCircles.length;P++){const D=this.drawableCircles[P];if(D.object=A,D instanceof DrawableSliderTick){D.updateObjects(_[P],A,A.samples.find(F=>F.hitSound==="Normal"));continue}I++,D instanceof DrawableSliderHead&&D.updateObjects?.(_[P],A,A.nodeSamples[I])}this.ball&&(this.ball.object=A),this.followCircle&&(this.followCircle.object=A),this.timelineObject&&(this.timelineObject.object=A),this.judgement&&(this.judgement.container.position.x=A.endPosition.add(A.stackedOffset).x,this.judgement.container.position.y=A.endPosition.add(A.stackedOffset).y,this.judgement.container.scale.set(A.scale));const B=calculateSliderProgress(this.object.path,0,1);if(!B.length)return;const{aPosition:T,indexBuffer:R}=createGeometry(B,A.radius*(236/256)*(inject("skinManager")?.getCurrentSkin()?.config.General.Argon?.95:1));this._baseGeometry.attributes.aPosition.buffer.data=new Float32Array(T),this._baseGeometry.indexBuffer.data=new Uint32Array(R)}checkCollide(A,_,I){if(!(this.object.startTime-this.object.timePreempt<I&&I<this.object.endTime+240))return!1;const B=64*this.object.scale,T=new Vector2(A,_),R=new Vector2(this.object.startX+this.object.stackedOffset.x,this.object.startY+this.object.stackedOffset.y);let P=1/0;for(let D=0;D<this.path.length-1;D++){const F=this.path[D].add(R),L=this.path[D+1].add(R),V=closestPointTo(T,F,L).distance(T);V<P&&(P=V)}return P<B}hook(A){super.hook(A);for(const _ of this.drawableCircles.filter(I=>I instanceof DrawableSliderHead||I instanceof DrawableSliderTail||I instanceof DrawableSliderRepeat||I instanceof DrawableSliderTick))_.refreshSprite();return this.ball.refreshSprite(),this.followCircle.refreshSprite(),this.refreshSprite(),this.timelineObject.updateVelocity(),this}trackColor=[0,0,0];borderColor=[0,0,0];color="0,0,0";updateFn=update$a;refreshSprite(){const A=this.skinManager?.getCurrentSkin();A&&(A.config.General.Argon?(refreshSprite$1(this),this.updateFn=update$b):(refreshSprite(this),this.updateFn=update$a))}getColor(A){const _=this.context.consume("beatmapObject");if(_?.data?.colors.comboColors.length&&!inject("config/skinning")?.disableBeatmapSkin){const T=_.data.colors.comboColors,R=this.object.comboIndexWithOffsets%T.length;return`rgb(${T[R].red},${T[R].green},${T[R].blue})`}const I=this.object.comboIndexWithOffsets%A.colorsLength;return`rgb(${A.config.Colours[`Combo${I+1}`]})`}get approachCircle(){return this.drawableCircles[0].approachCircle}getTimeRange(){return{start:this.object.startTime-this.object.timePreempt,end:this.object.endTime+800}}playHitSound(A){const _=this.context.consume("beatmapObject"),I=inject("ui/main/controls/progress")?.isSeeking||inject("beatmapset")?.isSeeking;if(!_||I)return;for(const T of this.drawableCircles){const R=T instanceof DrawableSliderTail&&!(T instanceof DrawableSliderRepeat)?TAIL_LENIENCY:0;T.playHitSound(A,R)}const B=_.getNearestSamplePoint(this.object.startTime);this.object.hitSound!==0&&this.sliderWhistleSample.playLoop(B,A>=this.object.startTime&&A<=this.object.endTime,this.object.endTime-A),this.sliderSlideSample.playLoop(B,A>=this.object.startTime&&A<=this.object.endTime,this.object.endTime-A)}updateGeometry(A=0,_=0,I=1){const B=inject("config/gameplay")?.snakeInSlider,T=inject("config/gameplay")?.snakeOutSlider;let R=A,P=_;if(A===_){const U=.1/this.object.path.distance;R=Math.min(1-U,A),P=Math.min(1,A+U)}R=T?R:0,P=B?P:1;const D=calculateSliderProgress(this.object.path,R,P);if(this.path=D,!D.length)return;const{aPosition:F,indexBuffer:L}=createGeometry(D,this.object.radius*(236/256)*I);this._geometry.attributes.aPosition.buffer.data=new Float32Array(F),this._geometry.indexBuffer.data=new Uint32Array(L)}spanAt(A){return Math.floor(A*this.object.spans)}progressAt(A){const _=A*this.object.spans%1;return this.spanAt(A)%2===1?1-_:_}update(A){this.ball.update(A),this.followCircle.update(A);for(const _ of this.drawableCircles){const I=_ instanceof DrawableSliderTail&&!(_ instanceof DrawableSliderRepeat)?TAIL_LENIENCY:0;_.update(A-I)}this.updateFn(this,A),this.judgement.frame(A),this.isHover&&A>this.object.endTime+240&&(this.isHover=!1)}get evaluation(){return this._evaluation}set evaluation(A){if(this._evaluation=A,A)for(let _=0;_<this.drawableCircles.length;_++){const I=this.drawableCircles[_],B=A.circlesEvals[_];I.evaluation=B}if(!A)for(const _ of this.drawableCircles)_.evaluation=void 0;this.judgement.evaluation=A}eval(A){let _=!1;const I=[],B=D=>{if(!D.mouseLeft&&!D.mouseRight||D.startTime<this.object.startTime||D.startTime>this.object.endTime)return!1;const F=Clamp((D.startTime-this.object.startTime)/this.object.duration),L=this.object.path.curvePositionAt(F,this.object.spans),U=D.position.x,V=D.position.y,K=new Vector2(U,V),J=64*this.object.scale*2.4;return K.distance(L.add(this.object.stackedOffset).add(this.object.startPosition))<=J&&(D.mouseLeft||D.mouseRight)};for(const D of A){const F=B(D);_!==F&&(I.push(D),_=F)}const T=[];for(let D=0;D<I.length;D+=2)T.push([I[D],I[D+1]??new LegacyReplayFrame(this.object.endTime)]);const R=this.drawableCircles.map(D=>D.eval(A));return{value:R.every(D=>[HitResult.LargeTickMiss,HitResult.SmallTickMiss].includes(D.value))?HitResult.Miss:R.every(D=>[HitResult.LargeTickHit,HitResult.SmallTickHit].includes(D.value))?HitResult.Great:R.filter(D=>[HitResult.LargeTickHit,HitResult.SmallTickHit].includes(D.value)).length*2>=this.drawableCircles.length?HitResult.Ok:HitResult.Meh,hitTime:T[0]?.[0]?.startTime??1/0,circlesEvals:R,trackingStates:T}}destroy(){for(const A of this.drawableCircles)A.destroy();this.ball.destroy(),this.followCircle.destroy(),this.body.destroy(),this.container.destroy(),this.skinEventCallback&&this.skinManager?.removeSkinChangeListener(this.skinEventCallback)}}class Spinner{constructor(A){this.parent=A,this.graphics=new Graphics$1,this.graphics.arc(0,0,30,0,5*Math.PI/6).stroke({color:"white",width:10,cap:"round"})}graphics;_spin=!1;_lastTime=0;spinFn(A){this.graphics.angle+=1*(A-this._lastTime),this._lastTime=A,this.spin&&requestAnimationFrame(_=>this.spinFn(_))}get spin(){return this._spin}set spin(A){if(A)this._spin=A,this.graphics.alpha=1,this.parent.container.addChild(this.graphics),this.parent.objectsContainer.alpha=0,requestAnimationFrame(_=>this.spinFn(_));else{const _=new Tween({value:100}).easing(Easings.Out).to({value:0},500).onUpdate(({value:I})=>{this.graphics.alpha=I/100,this.parent.objectsContainer.alpha=1-I/100}).onComplete(()=>{this.parent.container.removeChild(this.graphics),tweenGroup.remove(_),this.parent.objectsContainer.alpha=1,this._spin=A}).onStop(()=>{this.parent.container.removeChild(this.graphics),tweenGroup.remove(_),this.parent.objectsContainer.alpha=1,this._spin=A}).start();tweenGroup.add(_)}}}const defaultStyle$1={fontFamily:"Rubik",fill:12239582,align:"left",fontSize:14,fontWeight:"400"},defaultLayout$1={objectPosition:"top left",objectFit:"none"};class Gameplay{constructor(A){this.beatmap=A,this.container=new Container({label:"gameplay",layout:{position:"absolute",width:0,height:0,alignItems:"flex-start"},isRenderGroup:!0,interactive:!0}),this.wrapper=new Container({label:"wrapper",layout:{width:"100%",height:"100%"},interactive:!0}),this.background=new LayoutContainer({label:"dim",layout:{width:"100%",height:"100%",backgroundColor:[0,0,0,Math.min(1,(inject("config/background")?.backgroundDim??70)/100)],borderRadius:20}}),this.selector=new Graphics$1().rect(0,0,1,1).fill({color:16777215,alpha:.3}).stroke({width:1,color:16777215,pixelLine:!0}),this.objectsContainer=new Container({label:"objectsContainer",boundsArea:new Rectangle(0,0,512,384)}),this.cursorLayer=new Container({label:"cursorContainer",boundsArea:new Rectangle(0,0,512,384)}),this.selectContainer=new Container({label:"selectContainer",boundsArea:new Rectangle(0,0,512,384)}),this.spinner=new Spinner(this),this.spinner.spin=!0,this.grid=new Graphics$1({interactive:!1,eventMode:"none",visible:inject("config/gameplay")?.showGrid??!0}),this.drawGrid(512),this.createStats(),this.createCloseButton(),this.container.addChild(this.wrapper,this.spinner.graphics),this.wrapper.addChild(this.background,this.grid,this.objectsContainer,this.selectContainer,this.selector,this.cursorLayer),this.wrapper.on("layout",()=>{const _=this.wrapper.layout?.computedLayout.width??0,I=this.wrapper.layout?.computedLayout.height??0,B=Math.min(_/640,I/480),T=512*B,R=384*B;this.objectsContainer.scale.set(B),this.objectsContainer.x=(_-T)/2,this.objectsContainer.y=(I-R)/2,this.cursorLayer.scale.set(B),this.cursorLayer.x=(_-T)/2,this.cursorLayer.y=(I-R)/2,this.grid.x=(_-T)/2,this.grid.y=(I-R)/2,this.drawGrid(T),this.selectContainer.scale.set(B),this.selectContainer.x=(_-T)/2,this.selectContainer.y=(I-R)/2,this.spinner.graphics.x=_/2,this.spinner.graphics.y=I/2}),this.loadEventListeners(),inject("config/color")?.onChange("color",({base:_,text:I})=>{this.closeButton.layout={backgroundColor:_},this.statsContainer.layout={backgroundColor:_},this.diffName.style.fill=I}),inject("config/background")?.onChange("backgroundDim",_=>{this.background.layout={backgroundColor:[0,0,0,Math.max(.01,_/100)]}}),inject("config/background")?.onChange("breakSection",_=>{this._currentTween?.stop();const I=new Tween({value:this.background.alpha}).easing(Easings.Out).to({value:_?.6:1},1e3).onUpdate(({value:B})=>{this.background.alpha=B}).onComplete(()=>{tweenGroup.remove(I)}).onStop(()=>{tweenGroup.remove(I)}).start();tweenGroup.add(I),this._currentTween=I}),inject("config/gameplay")?.onChange("showGrid",_=>{this.grid.visible=_})}container;wrapper;grid;background;objectsContainer;selector;selectContainer;diffName;statsContainer;closeButton;spinner;cursorLayer;csText;arText;odText;hpText;selected=new Set;_currentTween;drawGrid(A=512){const _=A/512,I=384*_,B=32*_,T=B/2,R=10*_;this.grid.clear().roundRect(0,0,A,I,R).stroke({color:16777215,alpha:.8,width:2,alignment:.5});for(let P=B;P<A-1;P+=B){if(P===A/2){this.grid.moveTo(P,0).lineTo(P,I).stroke({color:16777215,alpha:.6,width:2,alignment:.5});continue}this.grid.moveTo(P,0).lineTo(P,I).stroke({color:16777215,alpha:.4,pixelLine:!0})}for(let P=B;P<I;P+=B){if(P===I/2){this.grid.moveTo(0,P).lineTo(A,P).stroke({color:16777215,alpha:.6,width:2,alignment:.5});continue}this.grid.moveTo(0,P).lineTo(A,P).stroke({color:16777215,alpha:.4,pixelLine:!0})}this.grid.moveTo(0,T).lineTo(0,R).arc(R,R,R,Math.PI,-Math.PI/2).lineTo(T,0).stroke({color:16777215,alpha:1,width:4,alignment:.5,cap:"round",join:"round"}).moveTo(A-T,0).lineTo(A-R,0).arc(A-R,R,R,-Math.PI/2,0).lineTo(A,T).stroke({color:16777215,alpha:1,width:4,alignment:.5,cap:"round",join:"round"}).moveTo(A,I-T).lineTo(A,I-R).arc(A-R,I-R,R,0,Math.PI/2).lineTo(A-T,I).stroke({color:16777215,alpha:1,width:4,alignment:.5,cap:"round",join:"round"}).moveTo(T,I).lineTo(R,I).arc(R,I-R,R,Math.PI/2,Math.PI).lineTo(0,I-T).stroke({color:16777215,alpha:1,width:4,alignment:.5,cap:"round",join:"round"})}dragWindow=[new Vector2(0,0),new Vector2(0,0)];loadEventListeners(){const A=this.beatmap;let _=!1;this.wrapper.on("pointerup",()=>{_=!1,this.dragWindow=[new Vector2(0,0),new Vector2(0,0)]}),this.wrapper.on("pointerupoutside",()=>{_=!1,this.dragWindow=[new Vector2(0,0),new Vector2(0,0)]}),this.wrapper.on("globalpointermove",I=>{const B=this.objectsContainer.toLocal(I.global);_&&(this.dragWindow[1]=new Vector2(I.global.x,I.global.y));for(const T of A.previousObjects){const R=A.objects[T];if(R instanceof DrawableHitCircle||R instanceof DrawableSlider){const P=R.checkCollide(B.x,B.y,inject("beatmapset")?.context.consume("audio")?.currentTime??0);R instanceof DrawableSlider&&(R.isHover=P)}}}),this.wrapper.on("pointerdown",I=>{_=!0,this.dragWindow[0]=new Vector2(I.global.x,I.global.y),this.dragWindow[1]=new Vector2(I.global.x,I.global.y);const B=this.objectsContainer.toLocal(I.global),T=[];for(const R of A.previousObjects){const P=A.objects[R];(P instanceof DrawableHitCircle||P instanceof DrawableSlider)&&P.checkCollide(B.x,B.y,inject("beatmapset")?.context.consume("audio")?.currentTime??0)&&T.push(R)}if(T.sort((R,P)=>A.objects[R].object.startTime-A.objects[P].object.startTime),!I.ctrlKey||T.length===0)for(const R of this.selected)this.removeSelected(R);T.length!==0&&this.selected.add(T[0]);for(const R of this.selected)this.addSelected(R)})}addSelected(A){this.selected.add(A);const _=this.beatmap.objects[A];_.isSelected=!0,_.timelineObject&&(_.timelineObject.isSelected=!0),this.selectContainer.addChild(_.select)}removeSelected(A){this.selected.delete(A);const _=this.beatmap.objects[A];_.isSelected=!1,_.timelineObject&&(_.timelineObject.isSelected=!1),this.selectContainer.removeChild(_.select)}checkInBound(A){const _=this.objectsContainer.toLocal(this.dragWindow[0]),I=this.objectsContainer.toLocal(this.dragWindow[1]),B=Math.min(_.x,I.x),T=Math.max(_.x,I.x),R=Math.min(_.y,I.y),P=Math.max(_.y,I.y);return B<=A.x&&A.x<=T&&R<=A.y&&A.y<=P}showCloseButton(){this.container.addChild(this.closeButton)}hideCloseButton(){this.container.removeChild(this.closeButton)}showDiffName(A=!1){A?this.statsContainer.addChild(this.closeButton):this.statsContainer.removeChild(this.closeButton),this.container.addChild(this.statsContainer)}hideDiffName(){this.container.removeChild(this.statsContainer)}createCloseButton(){const A=new LayoutContainer({layout:{width:20,height:20,alignItems:"center",justifyContent:"center",backgroundColor:inject("config/color")?.color.base,borderRadius:15}}),_=new Sprite$1({width:20,height:20,layout:{width:20,height:20}});_.tint=inject("config/color")?.color.text??16777215,inject("config/color")?.onChange("color",({text:B})=>{_.tint=B}),(async()=>_.texture=await Assets.load({src:"./assets/x.png",parser:"texture"}))(),A.cursor="pointer";const I=()=>{A.layout={backgroundColor:inject("config/color")?.color.base??16777215};const B=this.beatmap.context.consume("beatmapset");if(!B)return;const T=B.difficulties.findIndex(R=>R===this.beatmap);B.unloadSlave(T)};A.addEventListener("pointertap",()=>I()),A.addEventListener("pointerenter",()=>{A.layout={backgroundColor:inject("config/color")?.color.surface2??16777215}}),A.addEventListener("pointerleave",()=>{A.layout={backgroundColor:inject("config/color")?.color.base??16777215}}),A.addChild(_),this.closeButton=A}createStats(){this.statsContainer=new LayoutContainer({label:"stats",layout:{display:"flex",alignItems:"center",flexDirection:"row",gap:10,backgroundColor:inject("config/color")?.color.base,borderRadius:20,padding:10,paddingInline:20,flex:0,height:"auto",position:"absolute",top:20,left:20,transformOrigin:"top left"}}),this.diffName=new Text$1({text:this.beatmap.data.metadata.version,style:{...defaultStyle$1,fill:inject("config/color")?.color.text},layout:defaultLayout$1}),this.statsContainer.addChild(this.diffName)}}const update=(E,A)=>{const _=E.startObject.timeFadeIn,I=E.startObject.timePreempt;if(E.endObject instanceof Spinner$1||A<E.startTime-I){E.container.visible=!1;return}E.container.visible=!0;for(const[B,T]of Object.entries(E.sprites)){const P=(48+32*+B)/E.distance,D=E.startTime+P*E.duration,F=D-I;if(A<F+_){const L=Easings.OutQuad(Math.min(1,Math.max(0,(A-F)/_)));T.alpha=L,T.scale.set((1.5-.5*L)*E.startObject.scale),T.x=(P-.1*(1-L))*E.distance;continue}if(A>=F+_&&A<D){T.alpha=1,T.scale.set(1*E.startObject.scale),T.x=P*E.distance;continue}if(A>D){const L=1-Easings.OutQuad(Math.min(1,Math.max(0,(A-D)/_)));T.alpha=L,T.scale.set(1*E.startObject.scale),T.x=P*E.distance}}};class DrawableFollowPoints extends AnimatedSkinnableElement{constructor(A,_){super(),this.startObject=A,this.endObject=_,this.updateObjects(A,_),this.skinEventCallback=this.skinManager?.addSkinChangeListener(I=>{const B=I.getAnimatedTexture("followpoint",this.context.consume("beatmapSkin"));this.container.blendMode=I.config.General.Argon?"add":"normal",this.texturesList=B})}container=new Container;sprites=[];startTime;endTime;startPosition;endPosition;distance;get duration(){return this.endTime-this.startTime}updateObjects(A,_){this.startObject=A,this.endObject=_,this.startTime=this.startObject.endTime??this.startObject.startTime,this.endTime=this.endObject.startTime,this.startPosition=this.startObject.endPosition.add(this.startObject.stackedOffset),this.endPosition=this.endObject.startPosition.add(this.endObject.stackedOffset),this.distance=this.endPosition.distance(this.startPosition);const I=this.endPosition.subtract(this.startPosition).normalize(),B=Math.atan2(I.y,I.x);this.container.x=this.startPosition.x,this.container.y=this.startPosition.y,this.container.rotation=B,this.container.removeChildren();for(const R of this.sprites)R.destroy();const T=this.distance<80?0:Math.floor((this.distance-48)/(512/16));this.sprites=[];for(let R=0;R<T;R++){const P=new Sprite$1;P.anchor.set(.5),P.x=(1.5+R)*(512/16),this.sprites.push(P)}this.texturesList=this.skinManager?.getCurrentSkin().getAnimatedTexture("followpoint")??[BLANK_TEXTURE],this.sprites.length&&this.container.addChild(...this.sprites)}update(A){update(this,A);for(const[_,I]of Object.entries(this.sprites)){const T=(48+32*+_)/this.distance,R=this.startTime+T*this.duration,P=R-this.startObject.timePreempt,D=(R-P)/this.texturesList.length,F=Clamp(Math.floor((A-P)/D),0,this.texturesList.length-1);I.texture=this.texturesList[F]}}destroy(){for(const A of this.sprites)A.destroy();this.container.destroy(),this.skinEventCallback&&this.skinManager?.removeSkinChangeListener(this.skinEventCallback)}}class DrawableSpinnerApproachCircle extends DrawableApproachCircle{constructor(A){super(A),this.container.visible=!0,this.container.scale.set(480/384)}refreshSprite(){super.refreshSprite(),this.container.texture=this.skinManager?.getCurrentSkin().getTexture("spinner-approachcircle")??BLANK_TEXTURE,this.container.scale.set(480/384),this.container.tint=16777215}update(A){const _=this.object.startTime-this.object.timePreempt,I=Math.min(this.object.timeFadeIn,this.object.timePreempt),B=50,T=this.object.endTime,R=this.object.duration;if(A<_||A>=T+B){this.container.visible=!1,this.container.scale.set(480/384);return}if(this.container.visible=!0,A<this.object.startTime){const P=Math.min(1,Math.max(0,(A-_)/I));this.container.alpha=P;return}if(A>=this.object.startTime){const P=Clamp((A-T)/B),D=Clamp((A-this.object.startTime)/R);this.container.alpha=(1-P)*.9,this.container.scale.set((480-(480-32*this.object.scale)*D)/384);return}this.container.scale.set(480/384)}}class DrawableSpinner extends DrawableHitCircle{constructor(A){super(A,!1),this.approachCircle.destroy(),this.wrapper.visible=!0,this.approachCircle.container.visible=!0,this.approachCircle=new DrawableSpinnerApproachCircle(A).hook(this.context),this.timelineObject?.destroy();const _=A.clone(),I=A.clone(),B=A.clone();I.startTime=I.startTime-TAIL_LENIENCY,B.startTime=B.endTime-TAIL_LENIENCY,_.nestedHitObjects=[I,B],this.timelineObject=new TimelineSlider(_).hook(this.context)}get object(){return super.object}set object(A){super.object=A}getTimeRange(){return{start:this.object.startTime-this.object.timePreempt,end:this.object.endTime+800}}refreshSprite(){super.refreshSprite(),this.hitCircleOverlay.texture=this.skinManager?.getCurrentSkin().getTexture("spinner-bottom")??BLANK_TEXTURE,this.hitCircleSprite.texture=BLANK_TEXTURE,this.flashPiece.texture=BLANK_TEXTURE,this.select.texture=BLANK_TEXTURE,this.container.tint=16777215}update(A){this.approachCircle.update(A),this.judgement.frame(A);const _=this.object.startTime-this.object.timePreempt,I=800,B=this.object.endTime;if(A<_||A>B+I){this.wrapper.visible=!1;return}if(this.wrapper.visible=!0,A<this.object.startTime){const T=Clamp((A-_)/this.object.timeFadeIn);this.wrapper.alpha=T;return}if(A>=this.object.startTime){const T=1-Clamp((A-B)/I);this.wrapper.alpha=T;return}this.wrapper.alpha=1}playHitSound(A,_){const I=this.context.consume("beatmapObject"),B=this.object.endTime,T=inject("ui/main/controls/progress")?.isSeeking||inject("beatmapset")?.isSeeking;if(!I||T||!(I.previousTime<=B&&B<A&&A-I.previousTime<30))return;const R=I.getNearestSamplePoint(B);this.hitSound?.play(R)}eval(A){return{value:HitResult.Great,hitTime:this.object.endTime}}}function WorkerWrapper(E){return new Worker(""+new URL("Objects-Dqg5ApPk.js",import.meta.url).href,{name:E?.name})}const decoder=new BeatmapDecoder,ruleset=new StandardRuleset;class Beatmap extends ScopedClass{constructor(A){super(),this.raw=A,this.md5=md5(A).toString();const _=inject("config/experimental")?.getModsString()??"";this.data=this.context.provide("beatmap",ruleset.applyToBeatmapWithMods(decoder.decodeFromString(this.raw),ruleset.createModCombination(_))),this.difficultyCalculator=ruleset.createDifficultyCalculator(this.data),this.difficultyAttributes=this.difficultyCalculator.calculateWithMods(ruleset.createModCombination(_)),this.calculateStrainGraph(_),this.color=getDiffColour(this.difficultyAttributes.starRating),this.context.provide("beatmapObject",this),this.container=new Gameplay(this),this.worker.postMessage({type:"preempt",preempt:difficultyRange(this.data.difficulty.approachRate,1800,1200,450)}),inject("config/experimental")?.onChange("mods",({mods:I,shouldRecalculate:B})=>{const T=ruleset.applyToBeatmapWithMods(decoder.decodeFromString(this.raw),ruleset.createModCombination(I));B&&(this.data=this.context.provide("beatmap",T),this.reassignObjects(),this.replay?.evaluate(this)),this.difficultyCalculator=ruleset.createDifficultyCalculator(T),this.difficultyAttributes=this.difficultyCalculator.calculateWithMods(ruleset.createModCombination(I)),this.calculateStrainGraph(I),this.recalculateDifficulty()})}data;difficultyCalculator;difficultyAttributes;objects=[];connectors=[];color;worker=new WorkerWrapper;loaded=!1;previousConnectors=new Set;previousObjects=new Set;previousTime=0;container;md5;strains=[];calculateStrainGraph(A){const _=ruleset.createModCombination(A),I=this.difficultyCalculator._getWorkingBeatmap(_),B=400,T=Math.ceil(I.hitObjects[0].startTime/B)*B,R=I.difficulty.clockRate??1,P=this.difficultyCalculator._createSkills(I,_),D=P[1]._strainPeaks,F=P[1]._strainPeaks;for(const U of this.difficultyCalculator._getDifficultyHitObjects(I,R))for(const V of P)V.process(U);const L=new Array(Math.max(D.length,F.length)+1);L[0]={strain:0,time:(T-B)/1e3};for(let U=1;U<L.length;++U){const V=D[U]??0,K=F[U]??0;L[U]={time:(T+B*(U-1))/1e3,strain:(V+K)/2}}this.strains=L}reassignObjects(){this.worker.postMessage({type:"preempt",preempt:difficultyRange(this.data.difficulty.approachRate,1800,1200,450)});const A=this.data.hitObjects.filter(I=>I instanceof Circle||I instanceof Slider||I instanceof Spinner$1);for(let I=0;I<this.objects.length;I++)this.objects[I].object=A[I];let _=0;for(let I=0;I<this.data.hitObjects.length-1;I++){const B=this.data.hitObjects[I],T=this.data.hitObjects[I+1];T.isNewCombo||(this.connectors[_]?.updateObjects(B,T),_++)}}recalculateDifficulty(){if(this.context.consume("beatmapset")?.master!==this)return;this.color=getDiffColour(this.difficultyAttributes.starRating);const A=document.querySelector("#masterDiff");A&&(A.innerHTML=`
						<span class="truncate">${this.data.metadata.version}</span>
						<br/>
						<span class="text-xs">
							CS <span class="font-medium">${this.data.difficulty.circleSize.toFixed(1).replace(".0","")}</span> / 
							AR <span class="font-medium">${this.difficultyAttributes.approachRate.toFixed(1).replace(".0","")}</span> / 
							OD <span class="font-medium">${this.difficultyAttributes.overallDifficulty.toFixed(1).replace(".0","")}</span> / 
							HP <span class="font-medium">${this.difficultyAttributes.drainRate.toFixed(1).replace(".0","")}</span> 
						</span>`);const _=document.querySelector("#extraMode");if(_){const B=this.color;_.innerHTML=_.innerHTML.replace(/stroke=".*"/g,`stroke="${B}"`).replace(/fill=".*"/,`fill="${B}"`)}const I=document.querySelector("#masterSR");I&&(I.textContent=`${this.difficultyAttributes.starRating.toFixed(2)}`)}async constructConnectorsAsync(){return await Promise.all(this.data.hitObjects.map((A,_,I)=>new Promise(B=>{setTimeout(()=>{if(_===I.length-1){B(null);return}const T=I[_],R=I[_+1];if(R.isNewCombo){B(null);return}B(new DrawableFollowPoints(T,R))},5)})))}constructConnectorsSync(){const A=[];for(let _=0;_<this.data.hitObjects.length-1;_++){const I=this.data.hitObjects[_],B=this.data.hitObjects[_+1];B.isNewCombo||A.push(new DrawableFollowPoints(I,B))}return A}async constructConnectors(){return inject("config/experimental")?.asyncLoading?await this.constructConnectorsAsync():this.constructConnectorsSync()}load(){this.loaded=!0,this.replay&&this.hookReplay(this.replay)}async loadTimingPoints(){const A=this.context.consume("audio"),_=this.data.controlPoints.groups.map(F=>{const L=F.controlPoints.some(K=>K instanceof TimingPoint),U=F.controlPoints.some(K=>K instanceof DifficultyPoint),V=F.controlPoints.some(K=>K instanceof SamplePoint);return!L&&!U&&V?null:{position:F.startTime/(A?.duration??1),color:L&&!U?16717641:L&&U?16750359:1572689}}),I=[],B=this.data.controlPoints.effectPoints,T=[];let R=!1;for(let F=0;F<B.length;F++){if(B[F].kiai&&!R){R=!0,T.push(B[F].startTime/(A?.duration??1));continue}!B[F].kiai&&R&&(R=!1,T.push(B[F].startTime/(A?.duration??1)),I.push({start:T[0],end:T.at(-1)??1}),T.length=0)}const P=this.data.events.breaks.map(({startTime:F,endTime:L})=>({start:F/(A?.duration??1),end:L/(A?.duration??1)})),D=[...this.data.controlPoints.timingPoints,...this.data.controlPoints.difficultyPoints,...this.data.controlPoints.samplePoints].sort((F,L)=>{if(F.startTime===L.startTime){const U=V=>V instanceof TimingPoint?0:V instanceof DifficultyPoint?1:V instanceof SamplePoint?2:0;return U(F)-U(L)}return F.startTime-L.startTime});await inject("ui/sidepanel/timing")?.updateTimingPoints(D),inject("ui/main/viewer/timeline")?.loadTimingPoints(this.data.controlPoints.timingPoints),inject("ui/main/controls/progress")?.drawTimeline(_,I,P)}loadHitObjectsSync(){this.objects=this.data.hitObjects.map(A=>A instanceof Circle?new DrawableHitCircle(A).hook(this.context):A instanceof Slider?new DrawableSlider(A).hook(this.context):A instanceof Spinner$1?new DrawableSpinner(A).hook(this.context):null).filter(A=>A!==null)}async loadHitObjectsAsync(){this.objects=(await Promise.all(this.data.hitObjects.map(A=>new Promise(_=>{setTimeout(()=>{A instanceof Circle&&_(new DrawableHitCircle(A).hook(this.context)),A instanceof Slider&&_(new DrawableSlider(A).hook(this.context)),A instanceof Spinner$1&&_(new DrawableSpinner(A).hook(this.context)),_(null)},5)})))).filter(A=>A!==null)}async loadHitObjects(){console.time("Constructing hitObjects"),inject("config/experimental")?.asyncLoading?await this.loadHitObjectsAsync():this.loadHitObjectsSync(),console.timeEnd("Constructing hitObjects"),this.connectors=(await this.constructConnectors()).filter(_=>_!==null),this.worker.postMessage({type:"init",objects:this.data.hitObjects.map(_=>({startTime:_.startTime,endTime:_.endTime})).filter(_=>_!==null),connectors:this.connectors.map(_=>({startTime:_.startTime,endTime:_.endTime}))}),this.worker.onmessage=_=>{switch(_.data.type){case"update":{const{objects:I,connectors:B,currentTime:T,previousTime:R}=_.data,P=this.data.events.breaks.some(({startTime:L,endTime:U})=>L<=T&&T<=U),D=T>this.data.hitObjects[0].startTime-this.data.hitObjects[0].timePreempt&&T<(this.data.hitObjects.at(-1).endTime??this.data.hitObjects.at(-1)?.startTime),F=inject("config/background");if(F){const L=!(!P&&D);F.breakSection!==L&&(F.breakSection=L)}this.previousTime=R,this.update(T,I,B);break}}}}frame(A){const _=[],I=[],B=[],T=sort([...this.previousObjects]).desc(D=>this.objects[D].object.startTime);for(const D of T)_.push(this.objects[D].container),this.objects[D].approachCircle&&I.push(this.objects[D].approachCircle.container),this.objects[D].update(A);for(const D of this.previousConnectors)B.push(this.connectors[D].container),this.connectors[D].update(A);_.length>0&&this.container.objectsContainer?.addChild(...B,..._,...I);const R=this.container.dragWindow[1].subtract(this.container.dragWindow[0]),P=this.container.wrapper.toLocal(this.container.dragWindow[0]);this.container.selector.scale.set(R.x,R.y),this.container.selector.position.set(P.x,P.y),this.replay?.frame(A)}getNearestSamplePoint(A){const _=this.data.controlPoints.samplePointAt(Math.ceil(A)),I=this.data.controlPoints.samplePointAt(Math.ceil(A+2));let B=_;return I?.group&&I.group.startTime-A<3&&(B=I),B}update(A,_,I){if(!this.loaded)return;if(this.container.dragWindow[0].distance(this.container.dragWindow[1])>0)for(const D of _){const F=this.objects[D];this.container.checkInBound(F.object.startPosition)?this.container.addSelected(D):this.container.removeSelected(D)}const B=_.union(this.container.selected),T=this.container.objectsContainer,R=this.previousObjects.difference(B),P=this.previousConnectors.difference(I);this.previousObjects=B,this.previousConnectors=I;for(const D of R)T?.removeChild(this.objects[D].container),this.objects[D].approachCircle&&T?.removeChild(this.objects[D].approachCircle.container);for(const D of P)T?.removeChild(this.connectors[D].container);for(const D of _)this.objects[D].playHitSound(A)}toggle(){if(!this.loaded)throw new Error("Cannot play / pause a beatmap that hasn't been initialized");const A=this.context.consume("audio");this.worker.postMessage({type:"playbackRate",playbackRate:this.context.consume("beatmapset")?.playbackRate??1}),A?.state==="PLAYING"&&this.worker.postMessage({type:"start"}),A?.state==="STOPPED"&&this.worker.postMessage({type:"stop"})}seek(A){if(!this.loaded)throw new Error("Cannot play / pause a beatmap that hasn't been initialized");this.worker.postMessage({type:"seek",time:A})}replay;hookReplay(A){this.unhookReplay();const _=ruleset.createModCombination(A?.data?.info.rawMods),I=inject("config/experimental");let B=!1;I&&(I.hardRock!==_.acronyms.includes("HR")&&(B=!0,I.hardRock=_.acronyms.includes("HR")??!1),I.doubleTime!==_.acronyms.includes("DT")&&(B=!0,I.doubleTime=_.acronyms.includes("DT")??!1),I.hidden!==_.acronyms.includes("HD")&&(I.hidden=_.acronyms.includes("HD")??!1)),this.container.cursorLayer.addChild(...A.trails.toReversed(),A.cursor),this.replay=A,B||this.replay?.evaluate(this)}unhookReplay(){this.replay&&this.container.cursorLayer.removeChildren(),this.replay=void 0;for(const A of this.objects)A.evaluation=void 0}destroy(){inject("ui/main/viewer/gameplays")?.removeGameplay(this.container),this.worker.postMessage({type:"destroy"}),this.loaded=!1,this.container.objectsContainer.removeChildren();for(const A of this.objects)A.destroy(),A.timelineObject?.destroy();for(const A of this.connectors)A.destroy();this.objects=[],this.connectors=[],this.previousConnectors.clear(),this.previousObjects.clear()}}var dist={},extend,hasRequiredExtend;function requireExtend(){if(hasRequiredExtend)return extend;hasRequiredExtend=1;var E=Object.prototype.hasOwnProperty,A=Object.prototype.toString,_=Object.defineProperty,I=Object.getOwnPropertyDescriptor,B=function(F){return typeof Array.isArray=="function"?Array.isArray(F):A.call(F)==="[object Array]"},T=function(F){if(!F||A.call(F)!=="[object Object]")return!1;var L=E.call(F,"constructor"),U=F.constructor&&F.constructor.prototype&&E.call(F.constructor.prototype,"isPrototypeOf");if(F.constructor&&!L&&!U)return!1;var V;for(V in F);return typeof V>"u"||E.call(F,V)},R=function(F,L){_&&L.name==="__proto__"?_(F,L.name,{enumerable:!0,configurable:!0,value:L.newValue,writable:!0}):F[L.name]=L.newValue},P=function(F,L){if(L==="__proto__")if(E.call(F,L)){if(I)return I(F,L).value}else return;return F[L]};return extend=function D(){var F,L,U,V,K,J,ee=arguments[0],ie=1,ne=arguments.length,ce=!1;for(typeof ee=="boolean"&&(ce=ee,ee=arguments[1]||{},ie=2),(ee==null||typeof ee!="object"&&typeof ee!="function")&&(ee={});ie<ne;++ie)if(F=arguments[ie],F!=null)for(L in F)U=P(ee,L),V=P(F,L),ee!==V&&(ce&&V&&(T(V)||(K=B(V)))?(K?(K=!1,J=U&&B(U)?U:[]):J=U&&T(U)?U:{},R(ee,{name:L,newValue:D(ce,J,V)})):typeof V<"u"&&R(ee,{name:L,newValue:V}));return ee},extend}var cookies={},cookie={},empty=null;const empty$1=Object.freeze(Object.defineProperty({__proto__:null,default:empty},Symbol.toStringTag,{value:"Module"})),require$$0$3=getAugmentedNamespace(empty$1);var punycode$2={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */var punycode$1=punycode$2.exports,hasRequiredPunycode;function requirePunycode(){return hasRequiredPunycode||(hasRequiredPunycode=1,(function(E,A){(function(_){var I=A&&!A.nodeType&&A,B=E&&!E.nodeType&&E,T=typeof commonjsGlobal=="object"&&commonjsGlobal;(T.global===T||T.window===T||T.self===T)&&(_=T);var R,P=2147483647,D=36,F=1,L=26,U=38,V=700,K=72,J=128,ee="-",ie=/^xn--/,ne=/[^\x20-\x7E]/,ce=/[\x2E\u3002\uFF0E\uFF61]/g,fe={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},de=D-F,pe=Math.floor,ve=String.fromCharCode,ye;function _e(Q){throw new RangeError(fe[Q])}function be(Q,se){for(var Ae=Q.length,ge=[];Ae--;)ge[Ae]=se(Q[Ae]);return ge}function Te(Q,se){var Ae=Q.split("@"),ge="";Ae.length>1&&(ge=Ae[0]+"@",Q=Ae[1]),Q=Q.replace(ce,".");var Ee=Q.split("."),ke=be(Ee,se).join(".");return ge+ke}function ue(Q){for(var se=[],Ae=0,ge=Q.length,Ee,ke;Ae<ge;)Ee=Q.charCodeAt(Ae++),Ee>=55296&&Ee<=56319&&Ae<ge?(ke=Q.charCodeAt(Ae++),(ke&64512)==56320?se.push(((Ee&1023)<<10)+(ke&1023)+65536):(se.push(Ee),Ae--)):se.push(Ee);return se}function O(Q){return be(Q,function(se){var Ae="";return se>65535&&(se-=65536,Ae+=ve(se>>>10&1023|55296),se=56320|se&1023),Ae+=ve(se),Ae}).join("")}function z(Q){return Q-48<10?Q-22:Q-65<26?Q-65:Q-97<26?Q-97:D}function Y(Q,se){return Q+22+75*(Q<26)-((se!=0)<<5)}function te(Q,se,Ae){var ge=0;for(Q=Ae?pe(Q/V):Q>>1,Q+=pe(Q/se);Q>de*L>>1;ge+=D)Q=pe(Q/de);return pe(ge+(de+1)*Q/(Q+U))}function oe(Q){var se=[],Ae=Q.length,ge,Ee=0,ke=J,Se=K,Ie,we,xe,Fe,Ge,Oe,et,Mt,dt;for(Ie=Q.lastIndexOf(ee),Ie<0&&(Ie=0),we=0;we<Ie;++we)Q.charCodeAt(we)>=128&&_e("not-basic"),se.push(Q.charCodeAt(we));for(xe=Ie>0?Ie+1:0;xe<Ae;){for(Fe=Ee,Ge=1,Oe=D;xe>=Ae&&_e("invalid-input"),et=z(Q.charCodeAt(xe++)),(et>=D||et>pe((P-Ee)/Ge))&&_e("overflow"),Ee+=et*Ge,Mt=Oe<=Se?F:Oe>=Se+L?L:Oe-Se,!(et<Mt);Oe+=D)dt=D-Mt,Ge>pe(P/dt)&&_e("overflow"),Ge*=dt;ge=se.length+1,Se=te(Ee-Fe,ge,Fe==0),pe(Ee/ge)>P-ke&&_e("overflow"),ke+=pe(Ee/ge),Ee%=ge,se.splice(Ee++,0,ke)}return O(se)}function le(Q){var se,Ae,ge,Ee,ke,Se,Ie,we,xe,Fe,Ge,Oe=[],et,Mt,dt,mt;for(Q=ue(Q),et=Q.length,se=J,Ae=0,ke=K,Se=0;Se<et;++Se)Ge=Q[Se],Ge<128&&Oe.push(ve(Ge));for(ge=Ee=Oe.length,Ee&&Oe.push(ee);ge<et;){for(Ie=P,Se=0;Se<et;++Se)Ge=Q[Se],Ge>=se&&Ge<Ie&&(Ie=Ge);for(Mt=ge+1,Ie-se>pe((P-Ae)/Mt)&&_e("overflow"),Ae+=(Ie-se)*Mt,se=Ie,Se=0;Se<et;++Se)if(Ge=Q[Se],Ge<se&&++Ae>P&&_e("overflow"),Ge==se){for(we=Ae,xe=D;Fe=xe<=ke?F:xe>=ke+L?L:xe-ke,!(we<Fe);xe+=D)mt=we-Fe,dt=D-Fe,Oe.push(ve(Y(Fe+mt%dt,0))),we=pe(mt/dt);Oe.push(ve(Y(we,0))),ke=te(Ae,Mt,ge==Ee),Ae=0,++ge}++Ae,++se}return Oe.join("")}function he(Q){return Te(Q,function(se){return ie.test(se)?oe(se.slice(4).toLowerCase()):se})}function ae(Q){return Te(Q,function(se){return ne.test(se)?"xn--"+le(se):se})}if(R={version:"1.4.1",ucs2:{decode:ue,encode:O},decode:oe,encode:le,toASCII:ae,toUnicode:he},I&&B)if(E.exports==I)B.exports=R;else for(ye in R)R.hasOwnProperty(ye)&&(I[ye]=R[ye]);else _.punycode=R})(punycode$1)})(punycode$2,punycode$2.exports)),punycode$2.exports}var punycodeExports=requirePunycode();const require$$0$2=getDefaultExportFromCjs$1(punycodeExports);var utils$2,hasRequiredUtils$2;function requireUtils$2(){if(hasRequiredUtils$2)return utils$2;hasRequiredUtils$2=1;var E=Object.prototype.hasOwnProperty,A=(function(){for(var U=[],V=0;V<256;++V)U.push("%"+((V<16?"0":"")+V.toString(16)).toUpperCase());return U})(),_=function(V){for(var K;V.length;){var J=V.pop();if(K=J.obj[J.prop],Array.isArray(K)){for(var ee=[],ie=0;ie<K.length;++ie)typeof K[ie]<"u"&&ee.push(K[ie]);J.obj[J.prop]=ee}}return K},I=function(V,K){for(var J=K&&K.plainObjects?Object.create(null):{},ee=0;ee<V.length;++ee)typeof V[ee]<"u"&&(J[ee]=V[ee]);return J},B=function U(V,K,J){if(!K)return V;if(typeof K!="object"){if(Array.isArray(V))V.push(K);else if(V&&typeof V=="object")(J&&(J.plainObjects||J.allowPrototypes)||!E.call(Object.prototype,K))&&(V[K]=!0);else return[V,K];return V}if(!V||typeof V!="object")return[V].concat(K);var ee=V;return Array.isArray(V)&&!Array.isArray(K)&&(ee=I(V,J)),Array.isArray(V)&&Array.isArray(K)?(K.forEach(function(ie,ne){if(E.call(V,ne)){var ce=V[ne];ce&&typeof ce=="object"&&ie&&typeof ie=="object"?V[ne]=U(ce,ie,J):V.push(ie)}else V[ne]=ie}),V):Object.keys(K).reduce(function(ie,ne){var ce=K[ne];return E.call(ie,ne)?ie[ne]=U(ie[ne],ce,J):ie[ne]=ce,ie},ee)},T=function(V,K){return Object.keys(K).reduce(function(J,ee){return J[ee]=K[ee],J},V)},R=function(U){try{return decodeURIComponent(U.replace(/\+/g," "))}catch{return U}},P=function(V){if(V.length===0)return V;for(var K=typeof V=="string"?V:String(V),J="",ee=0;ee<K.length;++ee){var ie=K.charCodeAt(ee);if(ie===45||ie===46||ie===95||ie===126||ie>=48&&ie<=57||ie>=65&&ie<=90||ie>=97&&ie<=122){J+=K.charAt(ee);continue}if(ie<128){J=J+A[ie];continue}if(ie<2048){J=J+(A[192|ie>>6]+A[128|ie&63]);continue}if(ie<55296||ie>=57344){J=J+(A[224|ie>>12]+A[128|ie>>6&63]+A[128|ie&63]);continue}ee+=1,ie=65536+((ie&1023)<<10|K.charCodeAt(ee)&1023),J+=A[240|ie>>18]+A[128|ie>>12&63]+A[128|ie>>6&63]+A[128|ie&63]}return J},D=function(V){for(var K=[{obj:{o:V},prop:"o"}],J=[],ee=0;ee<K.length;++ee)for(var ie=K[ee],ne=ie.obj[ie.prop],ce=Object.keys(ne),fe=0;fe<ce.length;++fe){var de=ce[fe],pe=ne[de];typeof pe=="object"&&pe!==null&&J.indexOf(pe)===-1&&(K.push({obj:ne,prop:de}),J.push(pe))}return _(K)},F=function(V){return Object.prototype.toString.call(V)==="[object RegExp]"},L=function(V){return V===null||typeof V>"u"?!1:!!(V.constructor&&V.constructor.isBuffer&&V.constructor.isBuffer(V))};return utils$2={arrayToObject:I,assign:T,compact:D,decode:R,encode:P,isBuffer:L,isRegExp:F,merge:B},utils$2}var formats,hasRequiredFormats$1;function requireFormats$1(){if(hasRequiredFormats$1)return formats;hasRequiredFormats$1=1;var E=String.prototype.replace,A=/%20/g;return formats={default:"RFC3986",formatters:{RFC1738:function(_){return E.call(_,A,"+")},RFC3986:function(_){return String(_)}},RFC1738:"RFC1738",RFC3986:"RFC3986"},formats}var stringify_1,hasRequiredStringify$1;function requireStringify$1(){if(hasRequiredStringify$1)return stringify_1;hasRequiredStringify$1=1;var E=requireUtils$2(),A=requireFormats$1(),_={brackets:function(L){return L+"[]"},indices:function(L,U){return L+"["+U+"]"},repeat:function(L){return L}},I=Array.isArray,B=Array.prototype.push,T=function(F,L){B.apply(F,I(L)?L:[L])},R=Date.prototype.toISOString,P={delimiter:"&",encode:!0,encoder:E.encode,encodeValuesOnly:!1,serializeDate:function(L){return R.call(L)},skipNulls:!1,strictNullHandling:!1},D=function F(L,U,V,K,J,ee,ie,ne,ce,fe,de,pe){var ve=L;if(typeof ie=="function"?ve=ie(U,ve):ve instanceof Date&&(ve=fe(ve)),ve===null){if(K)return ee&&!pe?ee(U,P.encoder):U;ve=""}if(typeof ve=="string"||typeof ve=="number"||typeof ve=="boolean"||E.isBuffer(ve)){if(ee){var ye=pe?U:ee(U,P.encoder);return[de(ye)+"="+de(ee(ve,P.encoder))]}return[de(U)+"="+de(String(ve))]}var _e=[];if(typeof ve>"u")return _e;var be;if(I(ie))be=ie;else{var Te=Object.keys(ve);be=ne?Te.sort(ne):Te}for(var ue=0;ue<be.length;++ue){var O=be[ue];J&&ve[O]===null||(I(ve)?T(_e,F(ve[O],V(U,O),V,K,J,ee,ie,ne,ce,fe,de,pe)):T(_e,F(ve[O],U+(ce?"."+O:"["+O+"]"),V,K,J,ee,ie,ne,ce,fe,de,pe)))}return _e};return stringify_1=function(F,L){var U=F,V=L?E.assign({},L):{};if(V.encoder!==null&&typeof V.encoder<"u"&&typeof V.encoder!="function")throw new TypeError("Encoder has to be a function.");var K=typeof V.delimiter>"u"?P.delimiter:V.delimiter,J=typeof V.strictNullHandling=="boolean"?V.strictNullHandling:P.strictNullHandling,ee=typeof V.skipNulls=="boolean"?V.skipNulls:P.skipNulls,ie=typeof V.encode=="boolean"?V.encode:P.encode,ne=typeof V.encoder=="function"?V.encoder:P.encoder,ce=typeof V.sort=="function"?V.sort:null,fe=typeof V.allowDots>"u"?!1:V.allowDots,de=typeof V.serializeDate=="function"?V.serializeDate:P.serializeDate,pe=typeof V.encodeValuesOnly=="boolean"?V.encodeValuesOnly:P.encodeValuesOnly;if(typeof V.format>"u")V.format=A.default;else if(!Object.prototype.hasOwnProperty.call(A.formatters,V.format))throw new TypeError("Unknown format option provided.");var ve=A.formatters[V.format],ye,_e;typeof V.filter=="function"?(_e=V.filter,U=_e("",U)):I(V.filter)&&(_e=V.filter,ye=_e);var be=[];if(typeof U!="object"||U===null)return"";var Te;V.arrayFormat in _?Te=V.arrayFormat:"indices"in V?Te=V.indices?"indices":"repeat":Te="indices";var ue=_[Te];ye||(ye=Object.keys(U)),ce&&ye.sort(ce);for(var O=0;O<ye.length;++O){var z=ye[O];ee&&U[z]===null||T(be,D(U[z],z,ue,J,ee,ie?ne:null,_e,ce,fe,de,ve,pe))}var Y=be.join(K),te=V.addQueryPrefix===!0?"?":"";return Y.length>0?te+Y:""},stringify_1}var parse$1,hasRequiredParse;function requireParse(){if(hasRequiredParse)return parse$1;hasRequiredParse=1;var E=requireUtils$2(),A=Object.prototype.hasOwnProperty,_={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:E.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},I=function(P,D){for(var F={},L=D.ignoreQueryPrefix?P.replace(/^\?/,""):P,U=D.parameterLimit===1/0?void 0:D.parameterLimit,V=L.split(D.delimiter,U),K=0;K<V.length;++K){var J=V[K],ee=J.indexOf("]="),ie=ee===-1?J.indexOf("="):ee+1,ne,ce;ie===-1?(ne=D.decoder(J,_.decoder),ce=D.strictNullHandling?null:""):(ne=D.decoder(J.slice(0,ie),_.decoder),ce=D.decoder(J.slice(ie+1),_.decoder)),A.call(F,ne)?F[ne]=[].concat(F[ne]).concat(ce):F[ne]=ce}return F},B=function(R,P,D){for(var F=P,L=R.length-1;L>=0;--L){var U,V=R[L];if(V==="[]"&&D.parseArrays)U=[].concat(F);else{U=D.plainObjects?Object.create(null):{};var K=V.charAt(0)==="["&&V.charAt(V.length-1)==="]"?V.slice(1,-1):V,J=parseInt(K,10);!D.parseArrays&&K===""?U={0:F}:!isNaN(J)&&V!==K&&String(J)===K&&J>=0&&D.parseArrays&&J<=D.arrayLimit?(U=[],U[J]=F):K!=="__proto__"&&(U[K]=F)}F=U}return F},T=function(P,D,F){if(P){var L=F.allowDots?P.replace(/\.([^.[]+)/g,"[$1]"):P,U=/(\[[^[\]]*])/,V=/(\[[^[\]]*])/g,K=U.exec(L),J=K?L.slice(0,K.index):L,ee=[];if(J){if(!F.plainObjects&&A.call(Object.prototype,J)&&!F.allowPrototypes)return;ee.push(J)}for(var ie=0;(K=V.exec(L))!==null&&ie<F.depth;){if(ie+=1,!F.plainObjects&&A.call(Object.prototype,K[1].slice(1,-1))&&!F.allowPrototypes)return;ee.push(K[1])}return K&&ee.push("["+L.slice(K.index)+"]"),B(ee,D,F)}};return parse$1=function(R,P){var D=P?E.assign({},P):{};if(D.decoder!==null&&D.decoder!==void 0&&typeof D.decoder!="function")throw new TypeError("Decoder has to be a function.");if(D.ignoreQueryPrefix=D.ignoreQueryPrefix===!0,D.delimiter=typeof D.delimiter=="string"||E.isRegExp(D.delimiter)?D.delimiter:_.delimiter,D.depth=typeof D.depth=="number"?D.depth:_.depth,D.arrayLimit=typeof D.arrayLimit=="number"?D.arrayLimit:_.arrayLimit,D.parseArrays=D.parseArrays!==!1,D.decoder=typeof D.decoder=="function"?D.decoder:_.decoder,D.allowDots=typeof D.allowDots=="boolean"?D.allowDots:_.allowDots,D.plainObjects=typeof D.plainObjects=="boolean"?D.plainObjects:_.plainObjects,D.allowPrototypes=typeof D.allowPrototypes=="boolean"?D.allowPrototypes:_.allowPrototypes,D.parameterLimit=typeof D.parameterLimit=="number"?D.parameterLimit:_.parameterLimit,D.strictNullHandling=typeof D.strictNullHandling=="boolean"?D.strictNullHandling:_.strictNullHandling,R===""||R===null||typeof R>"u")return D.plainObjects?Object.create(null):{};for(var F=typeof R=="string"?I(R,D):R,L=D.plainObjects?Object.create(null):{},U=Object.keys(F),V=0;V<U.length;++V){var K=U[V],J=T(K,F[K],D);L=E.merge(L,J,D)}return E.compact(L)},parse$1}var lib$6,hasRequiredLib$6;function requireLib$6(){if(hasRequiredLib$6)return lib$6;hasRequiredLib$6=1;var E=requireStringify$1(),A=requireParse(),_=requireFormats$1();return lib$6={formats:_,parse:A,stringify:E},lib$6}var libExports=requireLib$6();const require$$1$2=getDefaultExportFromCjs$1(libExports);var punycode=require$$0$2;function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r",`
`,"	"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},querystring$2=require$$1$2;function urlParse(E,A,_){if(E&&typeof E=="object"&&E instanceof Url)return E;var I=new Url;return I.parse(E,A,_),I}Url.prototype.parse=function(E,A,_){if(typeof E!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof E);var I=E.indexOf("?"),B=I!==-1&&I<E.indexOf("#")?"?":"#",T=E.split(B),R=/\\/g;T[0]=T[0].replace(R,"/"),E=T.join(B);var P=E;if(P=P.trim(),!_&&E.split("#").length===1){var D=simplePathPattern.exec(P);if(D)return this.path=P,this.href=P,this.pathname=D[1],D[2]?(this.search=D[2],A?this.query=querystring$2.parse(this.search.substr(1)):this.query=this.search.substr(1)):A&&(this.search="",this.query={}),this}var F=protocolPattern.exec(P);if(F){F=F[0];var L=F.toLowerCase();this.protocol=L,P=P.substr(F.length)}if(_||F||P.match(/^\/\/[^@/]+@[^@/]+/)){var U=P.substr(0,2)==="//";U&&!(F&&hostlessProtocol[F])&&(P=P.substr(2),this.slashes=!0)}if(!hostlessProtocol[F]&&(U||F&&!slashedProtocol[F])){for(var V=-1,K=0;K<hostEndingChars.length;K++){var J=P.indexOf(hostEndingChars[K]);J!==-1&&(V===-1||J<V)&&(V=J)}var ee,ie;V===-1?ie=P.lastIndexOf("@"):ie=P.lastIndexOf("@",V),ie!==-1&&(ee=P.slice(0,ie),P=P.slice(ie+1),this.auth=decodeURIComponent(ee)),V=-1;for(var K=0;K<nonHostChars.length;K++){var J=P.indexOf(nonHostChars[K]);J!==-1&&(V===-1||J<V)&&(V=J)}V===-1&&(V=P.length),this.host=P.slice(0,V),P=P.slice(V),this.parseHost(),this.hostname=this.hostname||"";var ne=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!ne)for(var ce=this.hostname.split(/\./),K=0,fe=ce.length;K<fe;K++){var de=ce[K];if(de&&!de.match(hostnamePartPattern)){for(var pe="",ve=0,ye=de.length;ve<ye;ve++)de.charCodeAt(ve)>127?pe+="x":pe+=de[ve];if(!pe.match(hostnamePartPattern)){var _e=ce.slice(0,K),be=ce.slice(K+1),Te=de.match(hostnamePartStart);Te&&(_e.push(Te[1]),be.unshift(Te[2])),be.length&&(P="/"+be.join(".")+P),this.hostname=_e.join(".");break}}}this.hostname.length>hostnameMaxLen?this.hostname="":this.hostname=this.hostname.toLowerCase(),ne||(this.hostname=punycode.toASCII(this.hostname));var ue=this.port?":"+this.port:"",O=this.hostname||"";this.host=O+ue,this.href+=this.host,ne&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),P[0]!=="/"&&(P="/"+P))}if(!unsafeProtocol[L])for(var K=0,fe=autoEscape.length;K<fe;K++){var z=autoEscape[K];if(P.indexOf(z)!==-1){var Y=encodeURIComponent(z);Y===z&&(Y=escape(z)),P=P.split(z).join(Y)}}var te=P.indexOf("#");te!==-1&&(this.hash=P.substr(te),P=P.slice(0,te));var oe=P.indexOf("?");if(oe!==-1?(this.search=P.substr(oe),this.query=P.substr(oe+1),A&&(this.query=querystring$2.parse(this.query)),P=P.slice(0,oe)):A&&(this.search="",this.query={}),P&&(this.pathname=P),slashedProtocol[L]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var ue=this.pathname||"",le=this.search||"";this.path=ue+le}return this.href=this.format(),this};function urlFormat(E){return typeof E=="string"&&(E=urlParse(E)),E instanceof Url?E.format():Url.prototype.format.call(E)}Url.prototype.format=function(){var E=this.auth||"";E&&(E=encodeURIComponent(E),E=E.replace(/%3A/i,":"),E+="@");var A=this.protocol||"",_=this.pathname||"",I=this.hash||"",B=!1,T="";this.host?B=E+this.host:this.hostname&&(B=E+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(B+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(T=querystring$2.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var R=this.search||T&&"?"+T||"";return A&&A.substr(-1)!==":"&&(A+=":"),this.slashes||(!A||slashedProtocol[A])&&B!==!1?(B="//"+(B||""),_&&_.charAt(0)!=="/"&&(_="/"+_)):B||(B=""),I&&I.charAt(0)!=="#"&&(I="#"+I),R&&R.charAt(0)!=="?"&&(R="?"+R),_=_.replace(/[?#]/g,function(P){return encodeURIComponent(P)}),R=R.replace("#","%23"),A+B+_+R+I};function urlResolve(E,A){return urlParse(E,!1,!0).resolve(A)}Url.prototype.resolve=function(E){return this.resolveObject(urlParse(E,!1,!0)).format()};function urlResolveObject(E,A){return E?urlParse(E,!1,!0).resolveObject(A):A}Url.prototype.resolveObject=function(E){if(typeof E=="string"){var A=new Url;A.parse(E,!1,!0),E=A}for(var _=new Url,I=Object.keys(this),B=0;B<I.length;B++){var T=I[B];_[T]=this[T]}if(_.hash=E.hash,E.href==="")return _.href=_.format(),_;if(E.slashes&&!E.protocol){for(var R=Object.keys(E),P=0;P<R.length;P++){var D=R[P];D!=="protocol"&&(_[D]=E[D])}return slashedProtocol[_.protocol]&&_.hostname&&!_.pathname&&(_.pathname="/",_.path=_.pathname),_.href=_.format(),_}if(E.protocol&&E.protocol!==_.protocol){if(!slashedProtocol[E.protocol]){for(var F=Object.keys(E),L=0;L<F.length;L++){var U=F[L];_[U]=E[U]}return _.href=_.format(),_}if(_.protocol=E.protocol,!E.host&&!hostlessProtocol[E.protocol]){for(var fe=(E.pathname||"").split("/");fe.length&&!(E.host=fe.shift()););E.host||(E.host=""),E.hostname||(E.hostname=""),fe[0]!==""&&fe.unshift(""),fe.length<2&&fe.unshift(""),_.pathname=fe.join("/")}else _.pathname=E.pathname;if(_.search=E.search,_.query=E.query,_.host=E.host||"",_.auth=E.auth,_.hostname=E.hostname||E.host,_.port=E.port,_.pathname||_.search){var V=_.pathname||"",K=_.search||"";_.path=V+K}return _.slashes=_.slashes||E.slashes,_.href=_.format(),_}var J=_.pathname&&_.pathname.charAt(0)==="/",ee=E.host||E.pathname&&E.pathname.charAt(0)==="/",ie=ee||J||_.host&&E.pathname,ne=ie,ce=_.pathname&&_.pathname.split("/")||[],fe=E.pathname&&E.pathname.split("/")||[],de=_.protocol&&!slashedProtocol[_.protocol];if(de&&(_.hostname="",_.port=null,_.host&&(ce[0]===""?ce[0]=_.host:ce.unshift(_.host)),_.host="",E.protocol&&(E.hostname=null,E.port=null,E.host&&(fe[0]===""?fe[0]=E.host:fe.unshift(E.host)),E.host=null),ie=ie&&(fe[0]===""||ce[0]==="")),ee)_.host=E.host||E.host===""?E.host:_.host,_.hostname=E.hostname||E.hostname===""?E.hostname:_.hostname,_.search=E.search,_.query=E.query,ce=fe;else if(fe.length)ce||(ce=[]),ce.pop(),ce=ce.concat(fe),_.search=E.search,_.query=E.query;else if(E.search!=null){if(de){_.host=ce.shift(),_.hostname=_.host;var pe=_.host&&_.host.indexOf("@")>0?_.host.split("@"):!1;pe&&(_.auth=pe.shift(),_.hostname=pe.shift(),_.host=_.hostname)}return _.search=E.search,_.query=E.query,(_.pathname!==null||_.search!==null)&&(_.path=(_.pathname?_.pathname:"")+(_.search?_.search:"")),_.href=_.format(),_}if(!ce.length)return _.pathname=null,_.search?_.path="/"+_.search:_.path=null,_.href=_.format(),_;for(var ve=ce.slice(-1)[0],ye=(_.host||E.host||ce.length>1)&&(ve==="."||ve==="..")||ve==="",_e=0,be=ce.length;be>=0;be--)ve=ce[be],ve==="."?ce.splice(be,1):ve===".."?(ce.splice(be,1),_e++):_e&&(ce.splice(be,1),_e--);if(!ie&&!ne)for(;_e--;_e)ce.unshift("..");ie&&ce[0]!==""&&(!ce[0]||ce[0].charAt(0)!=="/")&&ce.unshift(""),ye&&ce.join("/").substr(-1)!=="/"&&ce.push("");var Te=ce[0]===""||ce[0]&&ce[0].charAt(0)==="/";if(de){_.hostname=Te?"":ce.length?ce.shift():"",_.host=_.hostname;var pe=_.host&&_.host.indexOf("@")>0?_.host.split("@"):!1;pe&&(_.auth=pe.shift(),_.hostname=pe.shift(),_.host=_.hostname)}return ie=ie||_.host&&ce.length,ie&&!Te&&ce.unshift(""),ce.length>0?_.pathname=ce.join("/"):(_.pathname=null,_.path=null),(_.pathname!==null||_.search!==null)&&(_.path=(_.pathname?_.pathname:"")+(_.search?_.search:"")),_.auth=E.auth||_.auth,_.slashes=_.slashes||E.slashes,_.href=_.format(),_};Url.prototype.parseHost=function(){var E=this.host,A=portPattern.exec(E);A&&(A=A[0],A!==":"&&(this.port=A.substr(1)),E=E.substr(0,E.length-A.length)),E&&(this.hostname=E)};var parse=urlParse,resolve$1=urlResolve,resolveObject=urlResolveObject,format$1=urlFormat,Url_1=Url;function normalizeArray(E,A){for(var _=0,I=E.length-1;I>=0;I--){var B=E[I];B==="."?E.splice(I,1):B===".."?(E.splice(I,1),_++):_&&(E.splice(I,1),_--)}if(A)for(;_--;_)E.unshift("..");return E}function resolve(){for(var E="",A=!1,_=arguments.length-1;_>=-1&&!A;_--){var I=_>=0?arguments[_]:"/";if(typeof I!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!I)continue;E=I+"/"+E,A=I.charAt(0)==="/"}return E=normalizeArray(filter(E.split("/"),function(B){return!!B}),!A).join("/"),(A?"/":"")+E||"."}function filter(E,A){if(E.filter)return E.filter(A);for(var _=[],I=0;I<E.length;I++)A(E[I],I,E)&&_.push(E[I]);return _}var _globalThis=(function(E){function A(){var I=this||self;return delete E.prototype.__magic__,I}if(typeof globalThis=="object")return globalThis;if(this)return A();E.defineProperty(E.prototype,"__magic__",{configurable:!0,get:A});var _=__magic__;return _})(Object),formatImport=format$1,parseImport=parse,resolveImport=resolve$1,UrlImport=Url_1,URL$1=_globalThis.URL,URLSearchParams$1=_globalThis.URLSearchParams,percentRegEx=/%/g,backslashRegEx=/\\/g,newlineRegEx=/\n/g,carriageReturnRegEx=/\r/g,tabRegEx=/\t/g,CHAR_FORWARD_SLASH=47;function isURLInstance(E){var A=E??null;return!!(A!==null&&A?.href&&A?.origin)}function getPathFromURLPosix(E){if(E.hostname!=="")throw new TypeError('File URL host must be "localhost" or empty on browser');for(var A=E.pathname,_=0;_<A.length;_++)if(A[_]==="%"){var I=A.codePointAt(_+2)|32;if(A[_+1]==="2"&&I===102)throw new TypeError("File URL path must not include encoded / characters")}return decodeURIComponent(A)}function encodePathChars(E){return E.includes("%")&&(E=E.replace(percentRegEx,"%25")),E.includes("\\")&&(E=E.replace(backslashRegEx,"%5C")),E.includes(`
`)&&(E=E.replace(newlineRegEx,"%0A")),E.includes("\r")&&(E=E.replace(carriageReturnRegEx,"%0D")),E.includes("	")&&(E=E.replace(tabRegEx,"%09")),E}var domainToASCII=function E(A){if(typeof A>"u")throw new TypeError('The "domain" argument must be specified');return new URL$1("http://"+A).hostname},domainToUnicode=function E(A){if(typeof A>"u")throw new TypeError('The "domain" argument must be specified');return new URL$1("http://"+A).hostname},pathToFileURL=function E(A){var _=new URL$1("file://"),I=resolve(A),B=A.charCodeAt(A.length-1);return B===CHAR_FORWARD_SLASH&&I[I.length-1]!=="/"&&(I+="/"),_.pathname=encodePathChars(I),_},fileURLToPath=function E(A){if(!isURLInstance(A)&&typeof A!="string")throw new TypeError('The "path" argument must be of type string or an instance of URL. Received type '+typeof A+" ("+A+")");var _=new URL$1(A);if(_.protocol!=="file:")throw new TypeError("The URL must be of scheme file");return getPathFromURLPosix(_)},formatImportWithOverloads=function E(A,_){var I,B,T,R;if(_===void 0&&(_={}),!(A instanceof URL$1))return formatImport(A);if(typeof _!="object"||_===null)throw new TypeError('The "options" argument must be of type object.');var P=(I=_.auth)!=null?I:!0,D=(B=_.fragment)!=null?B:!0,F=(T=_.search)!=null?T:!0;(R=_.unicode)!=null;var L=new URL$1(A.toString());return P||(L.username="",L.password=""),D||(L.hash=""),F||(L.search=""),L.toString()},api$1={format:formatImportWithOverloads,parse:parseImport,resolve:resolveImport,resolveObject,Url:UrlImport,URL:URL$1,URLSearchParams:URLSearchParams$1,domainToASCII,domainToUnicode,pathToFileURL,fileURLToPath};const url=Object.freeze(Object.defineProperty({__proto__:null,URL:URL$1,URLSearchParams:URLSearchParams$1,Url:UrlImport,default:api$1,domainToASCII,domainToUnicode,fileURLToPath,format:formatImportWithOverloads,parse:parseImport,pathToFileURL,resolve:resolveImport,resolveObject},Symbol.toStringTag,{value:"Module"})),require$$2$1=getAugmentedNamespace(url);var pubsuffixPsl={},psl={},hasRequiredPsl;function requirePsl(){return hasRequiredPsl||(hasRequiredPsl=1,(function(E){Object.defineProperties(E,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function A(ie){return ie&&ie.__esModule&&Object.prototype.hasOwnProperty.call(ie,"default")?ie.default:ie}var _,I;function B(){if(I)return _;I=1;const ie=2147483647,ne=36,ce=1,fe=26,de=38,pe=700,ve=72,ye=128,_e="-",be=/^xn--/,Te=/[^\0-\x7F]/,ue=/[\x2E\u3002\uFF0E\uFF61]/g,O={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},z=ne-ce,Y=Math.floor,te=String.fromCharCode;function oe(Se){throw new RangeError(O[Se])}function le(Se,Ie){const we=[];let xe=Se.length;for(;xe--;)we[xe]=Ie(Se[xe]);return we}function he(Se,Ie){const we=Se.split("@");let xe="";we.length>1&&(xe=we[0]+"@",Se=we[1]),Se=Se.replace(ue,".");const Fe=Se.split("."),Ge=le(Fe,Ie).join(".");return xe+Ge}function ae(Se){const Ie=[];let we=0;const xe=Se.length;for(;we<xe;){const Fe=Se.charCodeAt(we++);if(Fe>=55296&&Fe<=56319&&we<xe){const Ge=Se.charCodeAt(we++);(Ge&64512)==56320?Ie.push(((Fe&1023)<<10)+(Ge&1023)+65536):(Ie.push(Fe),we--)}else Ie.push(Fe)}return Ie}const Q=Se=>String.fromCodePoint(...Se),se=function(Se){return Se>=48&&Se<58?26+(Se-48):Se>=65&&Se<91?Se-65:Se>=97&&Se<123?Se-97:ne},Ae=function(Se,Ie){return Se+22+75*(Se<26)-((Ie!=0)<<5)},ge=function(Se,Ie,we){let xe=0;for(Se=we?Y(Se/pe):Se>>1,Se+=Y(Se/Ie);Se>z*fe>>1;xe+=ne)Se=Y(Se/z);return Y(xe+(z+1)*Se/(Se+de))},Ee=function(Se){const Ie=[],we=Se.length;let xe=0,Fe=ye,Ge=ve,Oe=Se.lastIndexOf(_e);Oe<0&&(Oe=0);for(let et=0;et<Oe;++et)Se.charCodeAt(et)>=128&&oe("not-basic"),Ie.push(Se.charCodeAt(et));for(let et=Oe>0?Oe+1:0;et<we;){const Mt=xe;for(let mt=1,Ut=ne;;Ut+=ne){et>=we&&oe("invalid-input");const St=se(Se.charCodeAt(et++));St>=ne&&oe("invalid-input"),St>Y((ie-xe)/mt)&&oe("overflow"),xe+=St*mt;const vt=Ut<=Ge?ce:Ut>=Ge+fe?fe:Ut-Ge;if(St<vt)break;const It=ne-vt;mt>Y(ie/It)&&oe("overflow"),mt*=It}const dt=Ie.length+1;Ge=ge(xe-Mt,dt,Mt==0),Y(xe/dt)>ie-Fe&&oe("overflow"),Fe+=Y(xe/dt),xe%=dt,Ie.splice(xe++,0,Fe)}return String.fromCodePoint(...Ie)},ke=function(Se){const Ie=[];Se=ae(Se);const we=Se.length;let xe=ye,Fe=0,Ge=ve;for(const Mt of Se)Mt<128&&Ie.push(te(Mt));const Oe=Ie.length;let et=Oe;for(Oe&&Ie.push(_e);et<we;){let Mt=ie;for(const mt of Se)mt>=xe&&mt<Mt&&(Mt=mt);const dt=et+1;Mt-xe>Y((ie-Fe)/dt)&&oe("overflow"),Fe+=(Mt-xe)*dt,xe=Mt;for(const mt of Se)if(mt<xe&&++Fe>ie&&oe("overflow"),mt===xe){let Ut=Fe;for(let St=ne;;St+=ne){const vt=St<=Ge?ce:St>=Ge+fe?fe:St-Ge;if(Ut<vt)break;const It=Ut-vt,yt=ne-vt;Ie.push(te(Ae(vt+It%yt,0))),Ut=Y(It/yt)}Ie.push(te(Ae(Ut,0))),Ge=ge(Fe,dt,et===Oe),Fe=0,++et}++Fe,++xe}return Ie.join("")};return _={version:"2.3.1",ucs2:{decode:ae,encode:Q},decode:Ee,encode:ke,toASCII:function(Se){return he(Se,function(Ie){return Te.test(Ie)?"xn--"+ke(Ie):Ie})},toUnicode:function(Se){return he(Se,function(Ie){return be.test(Ie)?Ee(Ie.slice(4).toLowerCase()):Ie})}},_}var T=B();const R=A(T),P=["ac","com.ac","edu.ac","gov.ac","mil.ac","net.ac","org.ac","ad","ae","ac.ae","co.ae","gov.ae","mil.ae","net.ae","org.ae","sch.ae","aero","airline.aero","airport.aero","accident-investigation.aero","accident-prevention.aero","aerobatic.aero","aeroclub.aero","aerodrome.aero","agents.aero","air-surveillance.aero","air-traffic-control.aero","aircraft.aero","airtraffic.aero","ambulance.aero","association.aero","author.aero","ballooning.aero","broker.aero","caa.aero","cargo.aero","catering.aero","certification.aero","championship.aero","charter.aero","civilaviation.aero","club.aero","conference.aero","consultant.aero","consulting.aero","control.aero","council.aero","crew.aero","design.aero","dgca.aero","educator.aero","emergency.aero","engine.aero","engineer.aero","entertainment.aero","equipment.aero","exchange.aero","express.aero","federation.aero","flight.aero","freight.aero","fuel.aero","gliding.aero","government.aero","groundhandling.aero","group.aero","hanggliding.aero","homebuilt.aero","insurance.aero","journal.aero","journalist.aero","leasing.aero","logistics.aero","magazine.aero","maintenance.aero","marketplace.aero","media.aero","microlight.aero","modelling.aero","navigation.aero","parachuting.aero","paragliding.aero","passenger-association.aero","pilot.aero","press.aero","production.aero","recreation.aero","repbody.aero","res.aero","research.aero","rotorcraft.aero","safety.aero","scientist.aero","services.aero","show.aero","skydiving.aero","software.aero","student.aero","taxi.aero","trader.aero","trading.aero","trainer.aero","union.aero","workinggroup.aero","works.aero","af","com.af","edu.af","gov.af","net.af","org.af","ag","co.ag","com.ag","net.ag","nom.ag","org.ag","ai","com.ai","net.ai","off.ai","org.ai","al","com.al","edu.al","gov.al","mil.al","net.al","org.al","am","co.am","com.am","commune.am","net.am","org.am","ao","co.ao","ed.ao","edu.ao","gov.ao","gv.ao","it.ao","og.ao","org.ao","pb.ao","aq","ar","bet.ar","com.ar","coop.ar","edu.ar","gob.ar","gov.ar","int.ar","mil.ar","musica.ar","mutual.ar","net.ar","org.ar","senasa.ar","tur.ar","arpa","e164.arpa","home.arpa","in-addr.arpa","ip6.arpa","iris.arpa","uri.arpa","urn.arpa","as","gov.as","asia","at","ac.at","sth.ac.at","co.at","gv.at","or.at","au","asn.au","com.au","edu.au","gov.au","id.au","net.au","org.au","conf.au","oz.au","act.au","nsw.au","nt.au","qld.au","sa.au","tas.au","vic.au","wa.au","act.edu.au","catholic.edu.au","nsw.edu.au","nt.edu.au","qld.edu.au","sa.edu.au","tas.edu.au","vic.edu.au","wa.edu.au","qld.gov.au","sa.gov.au","tas.gov.au","vic.gov.au","wa.gov.au","schools.nsw.edu.au","aw","com.aw","ax","az","biz.az","com.az","edu.az","gov.az","info.az","int.az","mil.az","name.az","net.az","org.az","pp.az","pro.az","ba","com.ba","edu.ba","gov.ba","mil.ba","net.ba","org.ba","bb","biz.bb","co.bb","com.bb","edu.bb","gov.bb","info.bb","net.bb","org.bb","store.bb","tv.bb","*.bd","be","ac.be","bf","gov.bf","bg","0.bg","1.bg","2.bg","3.bg","4.bg","5.bg","6.bg","7.bg","8.bg","9.bg","a.bg","b.bg","c.bg","d.bg","e.bg","f.bg","g.bg","h.bg","i.bg","j.bg","k.bg","l.bg","m.bg","n.bg","o.bg","p.bg","q.bg","r.bg","s.bg","t.bg","u.bg","v.bg","w.bg","x.bg","y.bg","z.bg","bh","com.bh","edu.bh","gov.bh","net.bh","org.bh","bi","co.bi","com.bi","edu.bi","or.bi","org.bi","biz","bj","africa.bj","agro.bj","architectes.bj","assur.bj","avocats.bj","co.bj","com.bj","eco.bj","econo.bj","edu.bj","info.bj","loisirs.bj","money.bj","net.bj","org.bj","ote.bj","restaurant.bj","resto.bj","tourism.bj","univ.bj","bm","com.bm","edu.bm","gov.bm","net.bm","org.bm","bn","com.bn","edu.bn","gov.bn","net.bn","org.bn","bo","com.bo","edu.bo","gob.bo","int.bo","mil.bo","net.bo","org.bo","tv.bo","web.bo","academia.bo","agro.bo","arte.bo","blog.bo","bolivia.bo","ciencia.bo","cooperativa.bo","democracia.bo","deporte.bo","ecologia.bo","economia.bo","empresa.bo","indigena.bo","industria.bo","info.bo","medicina.bo","movimiento.bo","musica.bo","natural.bo","nombre.bo","noticias.bo","patria.bo","plurinacional.bo","politica.bo","profesional.bo","pueblo.bo","revista.bo","salud.bo","tecnologia.bo","tksat.bo","transporte.bo","wiki.bo","br","9guacu.br","abc.br","adm.br","adv.br","agr.br","aju.br","am.br","anani.br","aparecida.br","app.br","arq.br","art.br","ato.br","b.br","barueri.br","belem.br","bet.br","bhz.br","bib.br","bio.br","blog.br","bmd.br","boavista.br","bsb.br","campinagrande.br","campinas.br","caxias.br","cim.br","cng.br","cnt.br","com.br","contagem.br","coop.br","coz.br","cri.br","cuiaba.br","curitiba.br","def.br","des.br","det.br","dev.br","ecn.br","eco.br","edu.br","emp.br","enf.br","eng.br","esp.br","etc.br","eti.br","far.br","feira.br","flog.br","floripa.br","fm.br","fnd.br","fortal.br","fot.br","foz.br","fst.br","g12.br","geo.br","ggf.br","goiania.br","gov.br","ac.gov.br","al.gov.br","am.gov.br","ap.gov.br","ba.gov.br","ce.gov.br","df.gov.br","es.gov.br","go.gov.br","ma.gov.br","mg.gov.br","ms.gov.br","mt.gov.br","pa.gov.br","pb.gov.br","pe.gov.br","pi.gov.br","pr.gov.br","rj.gov.br","rn.gov.br","ro.gov.br","rr.gov.br","rs.gov.br","sc.gov.br","se.gov.br","sp.gov.br","to.gov.br","gru.br","imb.br","ind.br","inf.br","jab.br","jampa.br","jdf.br","joinville.br","jor.br","jus.br","leg.br","leilao.br","lel.br","log.br","londrina.br","macapa.br","maceio.br","manaus.br","maringa.br","mat.br","med.br","mil.br","morena.br","mp.br","mus.br","natal.br","net.br","niteroi.br","*.nom.br","not.br","ntr.br","odo.br","ong.br","org.br","osasco.br","palmas.br","poa.br","ppg.br","pro.br","psc.br","psi.br","pvh.br","qsl.br","radio.br","rec.br","recife.br","rep.br","ribeirao.br","rio.br","riobranco.br","riopreto.br","salvador.br","sampa.br","santamaria.br","santoandre.br","saobernardo.br","saogonca.br","seg.br","sjc.br","slg.br","slz.br","sorocaba.br","srv.br","taxi.br","tc.br","tec.br","teo.br","the.br","tmp.br","trd.br","tur.br","tv.br","udi.br","vet.br","vix.br","vlog.br","wiki.br","zlg.br","bs","com.bs","edu.bs","gov.bs","net.bs","org.bs","bt","com.bt","edu.bt","gov.bt","net.bt","org.bt","bv","bw","co.bw","org.bw","by","gov.by","mil.by","com.by","of.by","bz","co.bz","com.bz","edu.bz","gov.bz","net.bz","org.bz","ca","ab.ca","bc.ca","mb.ca","nb.ca","nf.ca","nl.ca","ns.ca","nt.ca","nu.ca","on.ca","pe.ca","qc.ca","sk.ca","yk.ca","gc.ca","cat","cc","cd","gov.cd","cf","cg","ch","ci","ac.ci","aroport.ci","asso.ci","co.ci","com.ci","ed.ci","edu.ci","go.ci","gouv.ci","int.ci","net.ci","or.ci","org.ci","*.ck","!www.ck","cl","co.cl","gob.cl","gov.cl","mil.cl","cm","co.cm","com.cm","gov.cm","net.cm","cn","ac.cn","com.cn","edu.cn","gov.cn","mil.cn","net.cn","org.cn",".cn",".cn",".cn","ah.cn","bj.cn","cq.cn","fj.cn","gd.cn","gs.cn","gx.cn","gz.cn","ha.cn","hb.cn","he.cn","hi.cn","hk.cn","hl.cn","hn.cn","jl.cn","js.cn","jx.cn","ln.cn","mo.cn","nm.cn","nx.cn","qh.cn","sc.cn","sd.cn","sh.cn","sn.cn","sx.cn","tj.cn","tw.cn","xj.cn","xz.cn","yn.cn","zj.cn","co","com.co","edu.co","gov.co","mil.co","net.co","nom.co","org.co","com","coop","cr","ac.cr","co.cr","ed.cr","fi.cr","go.cr","or.cr","sa.cr","cu","com.cu","edu.cu","gob.cu","inf.cu","nat.cu","net.cu","org.cu","cv","com.cv","edu.cv","id.cv","int.cv","net.cv","nome.cv","org.cv","publ.cv","cw","com.cw","edu.cw","net.cw","org.cw","cx","gov.cx","cy","ac.cy","biz.cy","com.cy","ekloges.cy","gov.cy","ltd.cy","mil.cy","net.cy","org.cy","press.cy","pro.cy","tm.cy","cz","de","dj","dk","dm","co.dm","com.dm","edu.dm","gov.dm","net.dm","org.dm","do","art.do","com.do","edu.do","gob.do","gov.do","mil.do","net.do","org.do","sld.do","web.do","dz","art.dz","asso.dz","com.dz","edu.dz","gov.dz","net.dz","org.dz","pol.dz","soc.dz","tm.dz","ec","com.ec","edu.ec","fin.ec","gob.ec","gov.ec","info.ec","k12.ec","med.ec","mil.ec","net.ec","org.ec","pro.ec","edu","ee","aip.ee","com.ee","edu.ee","fie.ee","gov.ee","lib.ee","med.ee","org.ee","pri.ee","riik.ee","eg","ac.eg","com.eg","edu.eg","eun.eg","gov.eg","info.eg","me.eg","mil.eg","name.eg","net.eg","org.eg","sci.eg","sport.eg","tv.eg","*.er","es","com.es","edu.es","gob.es","nom.es","org.es","et","biz.et","com.et","edu.et","gov.et","info.et","name.et","net.et","org.et","eu","fi","aland.fi","fj","ac.fj","biz.fj","com.fj","gov.fj","info.fj","mil.fj","name.fj","net.fj","org.fj","pro.fj","*.fk","fm","com.fm","edu.fm","net.fm","org.fm","fo","fr","asso.fr","com.fr","gouv.fr","nom.fr","prd.fr","tm.fr","avoues.fr","cci.fr","greta.fr","huissier-justice.fr","ga","gb","gd","edu.gd","gov.gd","ge","com.ge","edu.ge","gov.ge","net.ge","org.ge","pvt.ge","school.ge","gf","gg","co.gg","net.gg","org.gg","gh","com.gh","edu.gh","gov.gh","mil.gh","org.gh","gi","com.gi","edu.gi","gov.gi","ltd.gi","mod.gi","org.gi","gl","co.gl","com.gl","edu.gl","net.gl","org.gl","gm","gn","ac.gn","com.gn","edu.gn","gov.gn","net.gn","org.gn","gov","gp","asso.gp","com.gp","edu.gp","mobi.gp","net.gp","org.gp","gq","gr","com.gr","edu.gr","gov.gr","net.gr","org.gr","gs","gt","com.gt","edu.gt","gob.gt","ind.gt","mil.gt","net.gt","org.gt","gu","com.gu","edu.gu","gov.gu","guam.gu","info.gu","net.gu","org.gu","web.gu","gw","gy","co.gy","com.gy","edu.gy","gov.gy","net.gy","org.gy","hk","com.hk","edu.hk","gov.hk","idv.hk","net.hk","org.hk",".hk",".hk",".hk",".hk",".hk",".hk",".hk",".hk",".hk",".hk",".hk",".hk",".hk",".hk",".hk","hm","hn","com.hn","edu.hn","gob.hn","mil.hn","net.hn","org.hn","hr","com.hr","from.hr","iz.hr","name.hr","ht","adult.ht","art.ht","asso.ht","com.ht","coop.ht","edu.ht","firm.ht","gouv.ht","info.ht","med.ht","net.ht","org.ht","perso.ht","pol.ht","pro.ht","rel.ht","shop.ht","hu","2000.hu","agrar.hu","bolt.hu","casino.hu","city.hu","co.hu","erotica.hu","erotika.hu","film.hu","forum.hu","games.hu","hotel.hu","info.hu","ingatlan.hu","jogasz.hu","konyvelo.hu","lakas.hu","media.hu","news.hu","org.hu","priv.hu","reklam.hu","sex.hu","shop.hu","sport.hu","suli.hu","szex.hu","tm.hu","tozsde.hu","utazas.hu","video.hu","id","ac.id","biz.id","co.id","desa.id","go.id","mil.id","my.id","net.id","or.id","ponpes.id","sch.id","web.id","ie","gov.ie","il","ac.il","co.il","gov.il","idf.il","k12.il","muni.il","net.il","org.il","",".",".",".",".","im","ac.im","co.im","ltd.co.im","plc.co.im","com.im","net.im","org.im","tt.im","tv.im","in","5g.in","6g.in","ac.in","ai.in","am.in","bihar.in","biz.in","business.in","ca.in","cn.in","co.in","com.in","coop.in","cs.in","delhi.in","dr.in","edu.in","er.in","firm.in","gen.in","gov.in","gujarat.in","ind.in","info.in","int.in","internet.in","io.in","me.in","mil.in","net.in","nic.in","org.in","pg.in","post.in","pro.in","res.in","travel.in","tv.in","uk.in","up.in","us.in","info","int","eu.int","io","co.io","com.io","edu.io","gov.io","mil.io","net.io","nom.io","org.io","iq","com.iq","edu.iq","gov.iq","mil.iq","net.iq","org.iq","ir","ac.ir","co.ir","gov.ir","id.ir","net.ir","org.ir","sch.ir",".ir",".ir","is","it","edu.it","gov.it","abr.it","abruzzo.it","aosta-valley.it","aostavalley.it","bas.it","basilicata.it","cal.it","calabria.it","cam.it","campania.it","emilia-romagna.it","emiliaromagna.it","emr.it","friuli-v-giulia.it","friuli-ve-giulia.it","friuli-vegiulia.it","friuli-venezia-giulia.it","friuli-veneziagiulia.it","friuli-vgiulia.it","friuliv-giulia.it","friulive-giulia.it","friulivegiulia.it","friulivenezia-giulia.it","friuliveneziagiulia.it","friulivgiulia.it","fvg.it","laz.it","lazio.it","lig.it","liguria.it","lom.it","lombardia.it","lombardy.it","lucania.it","mar.it","marche.it","mol.it","molise.it","piedmont.it","piemonte.it","pmn.it","pug.it","puglia.it","sar.it","sardegna.it","sardinia.it","sic.it","sicilia.it","sicily.it","taa.it","tos.it","toscana.it","trentin-sud-tirol.it","trentin-sd-tirol.it","trentin-sudtirol.it","trentin-sdtirol.it","trentin-sued-tirol.it","trentin-suedtirol.it","trentino.it","trentino-a-adige.it","trentino-aadige.it","trentino-alto-adige.it","trentino-altoadige.it","trentino-s-tirol.it","trentino-stirol.it","trentino-sud-tirol.it","trentino-sd-tirol.it","trentino-sudtirol.it","trentino-sdtirol.it","trentino-sued-tirol.it","trentino-suedtirol.it","trentinoa-adige.it","trentinoaadige.it","trentinoalto-adige.it","trentinoaltoadige.it","trentinos-tirol.it","trentinostirol.it","trentinosud-tirol.it","trentinosd-tirol.it","trentinosudtirol.it","trentinosdtirol.it","trentinosued-tirol.it","trentinosuedtirol.it","trentinsud-tirol.it","trentinsd-tirol.it","trentinsudtirol.it","trentinsdtirol.it","trentinsued-tirol.it","trentinsuedtirol.it","tuscany.it","umb.it","umbria.it","val-d-aosta.it","val-daosta.it","vald-aosta.it","valdaosta.it","valle-aosta.it","valle-d-aosta.it","valle-daosta.it","valleaosta.it","valled-aosta.it","valledaosta.it","vallee-aoste.it","valle-aoste.it","vallee-d-aoste.it","valle-d-aoste.it","valleeaoste.it","valleaoste.it","valleedaoste.it","valledaoste.it","vao.it","vda.it","ven.it","veneto.it","ag.it","agrigento.it","al.it","alessandria.it","alto-adige.it","altoadige.it","an.it","ancona.it","andria-barletta-trani.it","andria-trani-barletta.it","andriabarlettatrani.it","andriatranibarletta.it","ao.it","aosta.it","aoste.it","ap.it","aq.it","aquila.it","ar.it","arezzo.it","ascoli-piceno.it","ascolipiceno.it","asti.it","at.it","av.it","avellino.it","ba.it","balsan.it","balsan-sudtirol.it","balsan-sdtirol.it","balsan-suedtirol.it","bari.it","barletta-trani-andria.it","barlettatraniandria.it","belluno.it","benevento.it","bergamo.it","bg.it","bi.it","biella.it","bl.it","bn.it","bo.it","bologna.it","bolzano.it","bolzano-altoadige.it","bozen.it","bozen-sudtirol.it","bozen-sdtirol.it","bozen-suedtirol.it","br.it","brescia.it","brindisi.it","bs.it","bt.it","bulsan.it","bulsan-sudtirol.it","bulsan-sdtirol.it","bulsan-suedtirol.it","bz.it","ca.it","cagliari.it","caltanissetta.it","campidano-medio.it","campidanomedio.it","campobasso.it","carbonia-iglesias.it","carboniaiglesias.it","carrara-massa.it","carraramassa.it","caserta.it","catania.it","catanzaro.it","cb.it","ce.it","cesena-forli.it","cesena-forl.it","cesenaforli.it","cesenaforl.it","ch.it","chieti.it","ci.it","cl.it","cn.it","co.it","como.it","cosenza.it","cr.it","cremona.it","crotone.it","cs.it","ct.it","cuneo.it","cz.it","dell-ogliastra.it","dellogliastra.it","en.it","enna.it","fc.it","fe.it","fermo.it","ferrara.it","fg.it","fi.it","firenze.it","florence.it","fm.it","foggia.it","forli-cesena.it","forl-cesena.it","forlicesena.it","forlcesena.it","fr.it","frosinone.it","ge.it","genoa.it","genova.it","go.it","gorizia.it","gr.it","grosseto.it","iglesias-carbonia.it","iglesiascarbonia.it","im.it","imperia.it","is.it","isernia.it","kr.it","la-spezia.it","laquila.it","laspezia.it","latina.it","lc.it","le.it","lecce.it","lecco.it","li.it","livorno.it","lo.it","lodi.it","lt.it","lu.it","lucca.it","macerata.it","mantova.it","massa-carrara.it","massacarrara.it","matera.it","mb.it","mc.it","me.it","medio-campidano.it","mediocampidano.it","messina.it","mi.it","milan.it","milano.it","mn.it","mo.it","modena.it","monza.it","monza-brianza.it","monza-e-della-brianza.it","monzabrianza.it","monzaebrianza.it","monzaedellabrianza.it","ms.it","mt.it","na.it","naples.it","napoli.it","no.it","novara.it","nu.it","nuoro.it","og.it","ogliastra.it","olbia-tempio.it","olbiatempio.it","or.it","oristano.it","ot.it","pa.it","padova.it","padua.it","palermo.it","parma.it","pavia.it","pc.it","pd.it","pe.it","perugia.it","pesaro-urbino.it","pesarourbino.it","pescara.it","pg.it","pi.it","piacenza.it","pisa.it","pistoia.it","pn.it","po.it","pordenone.it","potenza.it","pr.it","prato.it","pt.it","pu.it","pv.it","pz.it","ra.it","ragusa.it","ravenna.it","rc.it","re.it","reggio-calabria.it","reggio-emilia.it","reggiocalabria.it","reggioemilia.it","rg.it","ri.it","rieti.it","rimini.it","rm.it","rn.it","ro.it","roma.it","rome.it","rovigo.it","sa.it","salerno.it","sassari.it","savona.it","si.it","siena.it","siracusa.it","so.it","sondrio.it","sp.it","sr.it","ss.it","sdtirol.it","suedtirol.it","sv.it","ta.it","taranto.it","te.it","tempio-olbia.it","tempioolbia.it","teramo.it","terni.it","tn.it","to.it","torino.it","tp.it","tr.it","trani-andria-barletta.it","trani-barletta-andria.it","traniandriabarletta.it","tranibarlettaandria.it","trapani.it","trento.it","treviso.it","trieste.it","ts.it","turin.it","tv.it","ud.it","udine.it","urbino-pesaro.it","urbinopesaro.it","va.it","varese.it","vb.it","vc.it","ve.it","venezia.it","venice.it","verbania.it","vercelli.it","verona.it","vi.it","vibo-valentia.it","vibovalentia.it","vicenza.it","viterbo.it","vr.it","vs.it","vt.it","vv.it","je","co.je","net.je","org.je","*.jm","jo","agri.jo","ai.jo","com.jo","edu.jo","eng.jo","fm.jo","gov.jo","mil.jo","net.jo","org.jo","per.jo","phd.jo","sch.jo","tv.jo","jobs","jp","ac.jp","ad.jp","co.jp","ed.jp","go.jp","gr.jp","lg.jp","ne.jp","or.jp","aichi.jp","akita.jp","aomori.jp","chiba.jp","ehime.jp","fukui.jp","fukuoka.jp","fukushima.jp","gifu.jp","gunma.jp","hiroshima.jp","hokkaido.jp","hyogo.jp","ibaraki.jp","ishikawa.jp","iwate.jp","kagawa.jp","kagoshima.jp","kanagawa.jp","kochi.jp","kumamoto.jp","kyoto.jp","mie.jp","miyagi.jp","miyazaki.jp","nagano.jp","nagasaki.jp","nara.jp","niigata.jp","oita.jp","okayama.jp","okinawa.jp","osaka.jp","saga.jp","saitama.jp","shiga.jp","shimane.jp","shizuoka.jp","tochigi.jp","tokushima.jp","tokyo.jp","tottori.jp","toyama.jp","wakayama.jp","yamagata.jp","yamaguchi.jp","yamanashi.jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp",".jp","*.kawasaki.jp","!city.kawasaki.jp","*.kitakyushu.jp","!city.kitakyushu.jp","*.kobe.jp","!city.kobe.jp","*.nagoya.jp","!city.nagoya.jp","*.sapporo.jp","!city.sapporo.jp","*.sendai.jp","!city.sendai.jp","*.yokohama.jp","!city.yokohama.jp","aisai.aichi.jp","ama.aichi.jp","anjo.aichi.jp","asuke.aichi.jp","chiryu.aichi.jp","chita.aichi.jp","fuso.aichi.jp","gamagori.aichi.jp","handa.aichi.jp","hazu.aichi.jp","hekinan.aichi.jp","higashiura.aichi.jp","ichinomiya.aichi.jp","inazawa.aichi.jp","inuyama.aichi.jp","isshiki.aichi.jp","iwakura.aichi.jp","kanie.aichi.jp","kariya.aichi.jp","kasugai.aichi.jp","kira.aichi.jp","kiyosu.aichi.jp","komaki.aichi.jp","konan.aichi.jp","kota.aichi.jp","mihama.aichi.jp","miyoshi.aichi.jp","nishio.aichi.jp","nisshin.aichi.jp","obu.aichi.jp","oguchi.aichi.jp","oharu.aichi.jp","okazaki.aichi.jp","owariasahi.aichi.jp","seto.aichi.jp","shikatsu.aichi.jp","shinshiro.aichi.jp","shitara.aichi.jp","tahara.aichi.jp","takahama.aichi.jp","tobishima.aichi.jp","toei.aichi.jp","togo.aichi.jp","tokai.aichi.jp","tokoname.aichi.jp","toyoake.aichi.jp","toyohashi.aichi.jp","toyokawa.aichi.jp","toyone.aichi.jp","toyota.aichi.jp","tsushima.aichi.jp","yatomi.aichi.jp","akita.akita.jp","daisen.akita.jp","fujisato.akita.jp","gojome.akita.jp","hachirogata.akita.jp","happou.akita.jp","higashinaruse.akita.jp","honjo.akita.jp","honjyo.akita.jp","ikawa.akita.jp","kamikoani.akita.jp","kamioka.akita.jp","katagami.akita.jp","kazuno.akita.jp","kitaakita.akita.jp","kosaka.akita.jp","kyowa.akita.jp","misato.akita.jp","mitane.akita.jp","moriyoshi.akita.jp","nikaho.akita.jp","noshiro.akita.jp","odate.akita.jp","oga.akita.jp","ogata.akita.jp","semboku.akita.jp","yokote.akita.jp","yurihonjo.akita.jp","aomori.aomori.jp","gonohe.aomori.jp","hachinohe.aomori.jp","hashikami.aomori.jp","hiranai.aomori.jp","hirosaki.aomori.jp","itayanagi.aomori.jp","kuroishi.aomori.jp","misawa.aomori.jp","mutsu.aomori.jp","nakadomari.aomori.jp","noheji.aomori.jp","oirase.aomori.jp","owani.aomori.jp","rokunohe.aomori.jp","sannohe.aomori.jp","shichinohe.aomori.jp","shingo.aomori.jp","takko.aomori.jp","towada.aomori.jp","tsugaru.aomori.jp","tsuruta.aomori.jp","abiko.chiba.jp","asahi.chiba.jp","chonan.chiba.jp","chosei.chiba.jp","choshi.chiba.jp","chuo.chiba.jp","funabashi.chiba.jp","futtsu.chiba.jp","hanamigawa.chiba.jp","ichihara.chiba.jp","ichikawa.chiba.jp","ichinomiya.chiba.jp","inzai.chiba.jp","isumi.chiba.jp","kamagaya.chiba.jp","kamogawa.chiba.jp","kashiwa.chiba.jp","katori.chiba.jp","katsuura.chiba.jp","kimitsu.chiba.jp","kisarazu.chiba.jp","kozaki.chiba.jp","kujukuri.chiba.jp","kyonan.chiba.jp","matsudo.chiba.jp","midori.chiba.jp","mihama.chiba.jp","minamiboso.chiba.jp","mobara.chiba.jp","mutsuzawa.chiba.jp","nagara.chiba.jp","nagareyama.chiba.jp","narashino.chiba.jp","narita.chiba.jp","noda.chiba.jp","oamishirasato.chiba.jp","omigawa.chiba.jp","onjuku.chiba.jp","otaki.chiba.jp","sakae.chiba.jp","sakura.chiba.jp","shimofusa.chiba.jp","shirako.chiba.jp","shiroi.chiba.jp","shisui.chiba.jp","sodegaura.chiba.jp","sosa.chiba.jp","tako.chiba.jp","tateyama.chiba.jp","togane.chiba.jp","tohnosho.chiba.jp","tomisato.chiba.jp","urayasu.chiba.jp","yachimata.chiba.jp","yachiyo.chiba.jp","yokaichiba.chiba.jp","yokoshibahikari.chiba.jp","yotsukaido.chiba.jp","ainan.ehime.jp","honai.ehime.jp","ikata.ehime.jp","imabari.ehime.jp","iyo.ehime.jp","kamijima.ehime.jp","kihoku.ehime.jp","kumakogen.ehime.jp","masaki.ehime.jp","matsuno.ehime.jp","matsuyama.ehime.jp","namikata.ehime.jp","niihama.ehime.jp","ozu.ehime.jp","saijo.ehime.jp","seiyo.ehime.jp","shikokuchuo.ehime.jp","tobe.ehime.jp","toon.ehime.jp","uchiko.ehime.jp","uwajima.ehime.jp","yawatahama.ehime.jp","echizen.fukui.jp","eiheiji.fukui.jp","fukui.fukui.jp","ikeda.fukui.jp","katsuyama.fukui.jp","mihama.fukui.jp","minamiechizen.fukui.jp","obama.fukui.jp","ohi.fukui.jp","ono.fukui.jp","sabae.fukui.jp","sakai.fukui.jp","takahama.fukui.jp","tsuruga.fukui.jp","wakasa.fukui.jp","ashiya.fukuoka.jp","buzen.fukuoka.jp","chikugo.fukuoka.jp","chikuho.fukuoka.jp","chikujo.fukuoka.jp","chikushino.fukuoka.jp","chikuzen.fukuoka.jp","chuo.fukuoka.jp","dazaifu.fukuoka.jp","fukuchi.fukuoka.jp","hakata.fukuoka.jp","higashi.fukuoka.jp","hirokawa.fukuoka.jp","hisayama.fukuoka.jp","iizuka.fukuoka.jp","inatsuki.fukuoka.jp","kaho.fukuoka.jp","kasuga.fukuoka.jp","kasuya.fukuoka.jp","kawara.fukuoka.jp","keisen.fukuoka.jp","koga.fukuoka.jp","kurate.fukuoka.jp","kurogi.fukuoka.jp","kurume.fukuoka.jp","minami.fukuoka.jp","miyako.fukuoka.jp","miyama.fukuoka.jp","miyawaka.fukuoka.jp","mizumaki.fukuoka.jp","munakata.fukuoka.jp","nakagawa.fukuoka.jp","nakama.fukuoka.jp","nishi.fukuoka.jp","nogata.fukuoka.jp","ogori.fukuoka.jp","okagaki.fukuoka.jp","okawa.fukuoka.jp","oki.fukuoka.jp","omuta.fukuoka.jp","onga.fukuoka.jp","onojo.fukuoka.jp","oto.fukuoka.jp","saigawa.fukuoka.jp","sasaguri.fukuoka.jp","shingu.fukuoka.jp","shinyoshitomi.fukuoka.jp","shonai.fukuoka.jp","soeda.fukuoka.jp","sue.fukuoka.jp","tachiarai.fukuoka.jp","tagawa.fukuoka.jp","takata.fukuoka.jp","toho.fukuoka.jp","toyotsu.fukuoka.jp","tsuiki.fukuoka.jp","ukiha.fukuoka.jp","umi.fukuoka.jp","usui.fukuoka.jp","yamada.fukuoka.jp","yame.fukuoka.jp","yanagawa.fukuoka.jp","yukuhashi.fukuoka.jp","aizubange.fukushima.jp","aizumisato.fukushima.jp","aizuwakamatsu.fukushima.jp","asakawa.fukushima.jp","bandai.fukushima.jp","date.fukushima.jp","fukushima.fukushima.jp","furudono.fukushima.jp","futaba.fukushima.jp","hanawa.fukushima.jp","higashi.fukushima.jp","hirata.fukushima.jp","hirono.fukushima.jp","iitate.fukushima.jp","inawashiro.fukushima.jp","ishikawa.fukushima.jp","iwaki.fukushima.jp","izumizaki.fukushima.jp","kagamiishi.fukushima.jp","kaneyama.fukushima.jp","kawamata.fukushima.jp","kitakata.fukushima.jp","kitashiobara.fukushima.jp","koori.fukushima.jp","koriyama.fukushima.jp","kunimi.fukushima.jp","miharu.fukushima.jp","mishima.fukushima.jp","namie.fukushima.jp","nango.fukushima.jp","nishiaizu.fukushima.jp","nishigo.fukushima.jp","okuma.fukushima.jp","omotego.fukushima.jp","ono.fukushima.jp","otama.fukushima.jp","samegawa.fukushima.jp","shimogo.fukushima.jp","shirakawa.fukushima.jp","showa.fukushima.jp","soma.fukushima.jp","sukagawa.fukushima.jp","taishin.fukushima.jp","tamakawa.fukushima.jp","tanagura.fukushima.jp","tenei.fukushima.jp","yabuki.fukushima.jp","yamato.fukushima.jp","yamatsuri.fukushima.jp","yanaizu.fukushima.jp","yugawa.fukushima.jp","anpachi.gifu.jp","ena.gifu.jp","gifu.gifu.jp","ginan.gifu.jp","godo.gifu.jp","gujo.gifu.jp","hashima.gifu.jp","hichiso.gifu.jp","hida.gifu.jp","higashishirakawa.gifu.jp","ibigawa.gifu.jp","ikeda.gifu.jp","kakamigahara.gifu.jp","kani.gifu.jp","kasahara.gifu.jp","kasamatsu.gifu.jp","kawaue.gifu.jp","kitagata.gifu.jp","mino.gifu.jp","minokamo.gifu.jp","mitake.gifu.jp","mizunami.gifu.jp","motosu.gifu.jp","nakatsugawa.gifu.jp","ogaki.gifu.jp","sakahogi.gifu.jp","seki.gifu.jp","sekigahara.gifu.jp","shirakawa.gifu.jp","tajimi.gifu.jp","takayama.gifu.jp","tarui.gifu.jp","toki.gifu.jp","tomika.gifu.jp","wanouchi.gifu.jp","yamagata.gifu.jp","yaotsu.gifu.jp","yoro.gifu.jp","annaka.gunma.jp","chiyoda.gunma.jp","fujioka.gunma.jp","higashiagatsuma.gunma.jp","isesaki.gunma.jp","itakura.gunma.jp","kanna.gunma.jp","kanra.gunma.jp","katashina.gunma.jp","kawaba.gunma.jp","kiryu.gunma.jp","kusatsu.gunma.jp","maebashi.gunma.jp","meiwa.gunma.jp","midori.gunma.jp","minakami.gunma.jp","naganohara.gunma.jp","nakanojo.gunma.jp","nanmoku.gunma.jp","numata.gunma.jp","oizumi.gunma.jp","ora.gunma.jp","ota.gunma.jp","shibukawa.gunma.jp","shimonita.gunma.jp","shinto.gunma.jp","showa.gunma.jp","takasaki.gunma.jp","takayama.gunma.jp","tamamura.gunma.jp","tatebayashi.gunma.jp","tomioka.gunma.jp","tsukiyono.gunma.jp","tsumagoi.gunma.jp","ueno.gunma.jp","yoshioka.gunma.jp","asaminami.hiroshima.jp","daiwa.hiroshima.jp","etajima.hiroshima.jp","fuchu.hiroshima.jp","fukuyama.hiroshima.jp","hatsukaichi.hiroshima.jp","higashihiroshima.hiroshima.jp","hongo.hiroshima.jp","jinsekikogen.hiroshima.jp","kaita.hiroshima.jp","kui.hiroshima.jp","kumano.hiroshima.jp","kure.hiroshima.jp","mihara.hiroshima.jp","miyoshi.hiroshima.jp","naka.hiroshima.jp","onomichi.hiroshima.jp","osakikamijima.hiroshima.jp","otake.hiroshima.jp","saka.hiroshima.jp","sera.hiroshima.jp","seranishi.hiroshima.jp","shinichi.hiroshima.jp","shobara.hiroshima.jp","takehara.hiroshima.jp","abashiri.hokkaido.jp","abira.hokkaido.jp","aibetsu.hokkaido.jp","akabira.hokkaido.jp","akkeshi.hokkaido.jp","asahikawa.hokkaido.jp","ashibetsu.hokkaido.jp","ashoro.hokkaido.jp","assabu.hokkaido.jp","atsuma.hokkaido.jp","bibai.hokkaido.jp","biei.hokkaido.jp","bifuka.hokkaido.jp","bihoro.hokkaido.jp","biratori.hokkaido.jp","chippubetsu.hokkaido.jp","chitose.hokkaido.jp","date.hokkaido.jp","ebetsu.hokkaido.jp","embetsu.hokkaido.jp","eniwa.hokkaido.jp","erimo.hokkaido.jp","esan.hokkaido.jp","esashi.hokkaido.jp","fukagawa.hokkaido.jp","fukushima.hokkaido.jp","furano.hokkaido.jp","furubira.hokkaido.jp","haboro.hokkaido.jp","hakodate.hokkaido.jp","hamatonbetsu.hokkaido.jp","hidaka.hokkaido.jp","higashikagura.hokkaido.jp","higashikawa.hokkaido.jp","hiroo.hokkaido.jp","hokuryu.hokkaido.jp","hokuto.hokkaido.jp","honbetsu.hokkaido.jp","horokanai.hokkaido.jp","horonobe.hokkaido.jp","ikeda.hokkaido.jp","imakane.hokkaido.jp","ishikari.hokkaido.jp","iwamizawa.hokkaido.jp","iwanai.hokkaido.jp","kamifurano.hokkaido.jp","kamikawa.hokkaido.jp","kamishihoro.hokkaido.jp","kamisunagawa.hokkaido.jp","kamoenai.hokkaido.jp","kayabe.hokkaido.jp","kembuchi.hokkaido.jp","kikonai.hokkaido.jp","kimobetsu.hokkaido.jp","kitahiroshima.hokkaido.jp","kitami.hokkaido.jp","kiyosato.hokkaido.jp","koshimizu.hokkaido.jp","kunneppu.hokkaido.jp","kuriyama.hokkaido.jp","kuromatsunai.hokkaido.jp","kushiro.hokkaido.jp","kutchan.hokkaido.jp","kyowa.hokkaido.jp","mashike.hokkaido.jp","matsumae.hokkaido.jp","mikasa.hokkaido.jp","minamifurano.hokkaido.jp","mombetsu.hokkaido.jp","moseushi.hokkaido.jp","mukawa.hokkaido.jp","muroran.hokkaido.jp","naie.hokkaido.jp","nakagawa.hokkaido.jp","nakasatsunai.hokkaido.jp","nakatombetsu.hokkaido.jp","nanae.hokkaido.jp","nanporo.hokkaido.jp","nayoro.hokkaido.jp","nemuro.hokkaido.jp","niikappu.hokkaido.jp","niki.hokkaido.jp","nishiokoppe.hokkaido.jp","noboribetsu.hokkaido.jp","numata.hokkaido.jp","obihiro.hokkaido.jp","obira.hokkaido.jp","oketo.hokkaido.jp","okoppe.hokkaido.jp","otaru.hokkaido.jp","otobe.hokkaido.jp","otofuke.hokkaido.jp","otoineppu.hokkaido.jp","oumu.hokkaido.jp","ozora.hokkaido.jp","pippu.hokkaido.jp","rankoshi.hokkaido.jp","rebun.hokkaido.jp","rikubetsu.hokkaido.jp","rishiri.hokkaido.jp","rishirifuji.hokkaido.jp","saroma.hokkaido.jp","sarufutsu.hokkaido.jp","shakotan.hokkaido.jp","shari.hokkaido.jp","shibecha.hokkaido.jp","shibetsu.hokkaido.jp","shikabe.hokkaido.jp","shikaoi.hokkaido.jp","shimamaki.hokkaido.jp","shimizu.hokkaido.jp","shimokawa.hokkaido.jp","shinshinotsu.hokkaido.jp","shintoku.hokkaido.jp","shiranuka.hokkaido.jp","shiraoi.hokkaido.jp","shiriuchi.hokkaido.jp","sobetsu.hokkaido.jp","sunagawa.hokkaido.jp","taiki.hokkaido.jp","takasu.hokkaido.jp","takikawa.hokkaido.jp","takinoue.hokkaido.jp","teshikaga.hokkaido.jp","tobetsu.hokkaido.jp","tohma.hokkaido.jp","tomakomai.hokkaido.jp","tomari.hokkaido.jp","toya.hokkaido.jp","toyako.hokkaido.jp","toyotomi.hokkaido.jp","toyoura.hokkaido.jp","tsubetsu.hokkaido.jp","tsukigata.hokkaido.jp","urakawa.hokkaido.jp","urausu.hokkaido.jp","uryu.hokkaido.jp","utashinai.hokkaido.jp","wakkanai.hokkaido.jp","wassamu.hokkaido.jp","yakumo.hokkaido.jp","yoichi.hokkaido.jp","aioi.hyogo.jp","akashi.hyogo.jp","ako.hyogo.jp","amagasaki.hyogo.jp","aogaki.hyogo.jp","asago.hyogo.jp","ashiya.hyogo.jp","awaji.hyogo.jp","fukusaki.hyogo.jp","goshiki.hyogo.jp","harima.hyogo.jp","himeji.hyogo.jp","ichikawa.hyogo.jp","inagawa.hyogo.jp","itami.hyogo.jp","kakogawa.hyogo.jp","kamigori.hyogo.jp","kamikawa.hyogo.jp","kasai.hyogo.jp","kasuga.hyogo.jp","kawanishi.hyogo.jp","miki.hyogo.jp","minamiawaji.hyogo.jp","nishinomiya.hyogo.jp","nishiwaki.hyogo.jp","ono.hyogo.jp","sanda.hyogo.jp","sannan.hyogo.jp","sasayama.hyogo.jp","sayo.hyogo.jp","shingu.hyogo.jp","shinonsen.hyogo.jp","shiso.hyogo.jp","sumoto.hyogo.jp","taishi.hyogo.jp","taka.hyogo.jp","takarazuka.hyogo.jp","takasago.hyogo.jp","takino.hyogo.jp","tamba.hyogo.jp","tatsuno.hyogo.jp","toyooka.hyogo.jp","yabu.hyogo.jp","yashiro.hyogo.jp","yoka.hyogo.jp","yokawa.hyogo.jp","ami.ibaraki.jp","asahi.ibaraki.jp","bando.ibaraki.jp","chikusei.ibaraki.jp","daigo.ibaraki.jp","fujishiro.ibaraki.jp","hitachi.ibaraki.jp","hitachinaka.ibaraki.jp","hitachiomiya.ibaraki.jp","hitachiota.ibaraki.jp","ibaraki.ibaraki.jp","ina.ibaraki.jp","inashiki.ibaraki.jp","itako.ibaraki.jp","iwama.ibaraki.jp","joso.ibaraki.jp","kamisu.ibaraki.jp","kasama.ibaraki.jp","kashima.ibaraki.jp","kasumigaura.ibaraki.jp","koga.ibaraki.jp","miho.ibaraki.jp","mito.ibaraki.jp","moriya.ibaraki.jp","naka.ibaraki.jp","namegata.ibaraki.jp","oarai.ibaraki.jp","ogawa.ibaraki.jp","omitama.ibaraki.jp","ryugasaki.ibaraki.jp","sakai.ibaraki.jp","sakuragawa.ibaraki.jp","shimodate.ibaraki.jp","shimotsuma.ibaraki.jp","shirosato.ibaraki.jp","sowa.ibaraki.jp","suifu.ibaraki.jp","takahagi.ibaraki.jp","tamatsukuri.ibaraki.jp","tokai.ibaraki.jp","tomobe.ibaraki.jp","tone.ibaraki.jp","toride.ibaraki.jp","tsuchiura.ibaraki.jp","tsukuba.ibaraki.jp","uchihara.ibaraki.jp","ushiku.ibaraki.jp","yachiyo.ibaraki.jp","yamagata.ibaraki.jp","yawara.ibaraki.jp","yuki.ibaraki.jp","anamizu.ishikawa.jp","hakui.ishikawa.jp","hakusan.ishikawa.jp","kaga.ishikawa.jp","kahoku.ishikawa.jp","kanazawa.ishikawa.jp","kawakita.ishikawa.jp","komatsu.ishikawa.jp","nakanoto.ishikawa.jp","nanao.ishikawa.jp","nomi.ishikawa.jp","nonoichi.ishikawa.jp","noto.ishikawa.jp","shika.ishikawa.jp","suzu.ishikawa.jp","tsubata.ishikawa.jp","tsurugi.ishikawa.jp","uchinada.ishikawa.jp","wajima.ishikawa.jp","fudai.iwate.jp","fujisawa.iwate.jp","hanamaki.iwate.jp","hiraizumi.iwate.jp","hirono.iwate.jp","ichinohe.iwate.jp","ichinoseki.iwate.jp","iwaizumi.iwate.jp","iwate.iwate.jp","joboji.iwate.jp","kamaishi.iwate.jp","kanegasaki.iwate.jp","karumai.iwate.jp","kawai.iwate.jp","kitakami.iwate.jp","kuji.iwate.jp","kunohe.iwate.jp","kuzumaki.iwate.jp","miyako.iwate.jp","mizusawa.iwate.jp","morioka.iwate.jp","ninohe.iwate.jp","noda.iwate.jp","ofunato.iwate.jp","oshu.iwate.jp","otsuchi.iwate.jp","rikuzentakata.iwate.jp","shiwa.iwate.jp","shizukuishi.iwate.jp","sumita.iwate.jp","tanohata.iwate.jp","tono.iwate.jp","yahaba.iwate.jp","yamada.iwate.jp","ayagawa.kagawa.jp","higashikagawa.kagawa.jp","kanonji.kagawa.jp","kotohira.kagawa.jp","manno.kagawa.jp","marugame.kagawa.jp","mitoyo.kagawa.jp","naoshima.kagawa.jp","sanuki.kagawa.jp","tadotsu.kagawa.jp","takamatsu.kagawa.jp","tonosho.kagawa.jp","uchinomi.kagawa.jp","utazu.kagawa.jp","zentsuji.kagawa.jp","akune.kagoshima.jp","amami.kagoshima.jp","hioki.kagoshima.jp","isa.kagoshima.jp","isen.kagoshima.jp","izumi.kagoshima.jp","kagoshima.kagoshima.jp","kanoya.kagoshima.jp","kawanabe.kagoshima.jp","kinko.kagoshima.jp","kouyama.kagoshima.jp","makurazaki.kagoshima.jp","matsumoto.kagoshima.jp","minamitane.kagoshima.jp","nakatane.kagoshima.jp","nishinoomote.kagoshima.jp","satsumasendai.kagoshima.jp","soo.kagoshima.jp","tarumizu.kagoshima.jp","yusui.kagoshima.jp","aikawa.kanagawa.jp","atsugi.kanagawa.jp","ayase.kanagawa.jp","chigasaki.kanagawa.jp","ebina.kanagawa.jp","fujisawa.kanagawa.jp","hadano.kanagawa.jp","hakone.kanagawa.jp","hiratsuka.kanagawa.jp","isehara.kanagawa.jp","kaisei.kanagawa.jp","kamakura.kanagawa.jp","kiyokawa.kanagawa.jp","matsuda.kanagawa.jp","minamiashigara.kanagawa.jp","miura.kanagawa.jp","nakai.kanagawa.jp","ninomiya.kanagawa.jp","odawara.kanagawa.jp","oi.kanagawa.jp","oiso.kanagawa.jp","sagamihara.kanagawa.jp","samukawa.kanagawa.jp","tsukui.kanagawa.jp","yamakita.kanagawa.jp","yamato.kanagawa.jp","yokosuka.kanagawa.jp","yugawara.kanagawa.jp","zama.kanagawa.jp","zushi.kanagawa.jp","aki.kochi.jp","geisei.kochi.jp","hidaka.kochi.jp","higashitsuno.kochi.jp","ino.kochi.jp","kagami.kochi.jp","kami.kochi.jp","kitagawa.kochi.jp","kochi.kochi.jp","mihara.kochi.jp","motoyama.kochi.jp","muroto.kochi.jp","nahari.kochi.jp","nakamura.kochi.jp","nankoku.kochi.jp","nishitosa.kochi.jp","niyodogawa.kochi.jp","ochi.kochi.jp","okawa.kochi.jp","otoyo.kochi.jp","otsuki.kochi.jp","sakawa.kochi.jp","sukumo.kochi.jp","susaki.kochi.jp","tosa.kochi.jp","tosashimizu.kochi.jp","toyo.kochi.jp","tsuno.kochi.jp","umaji.kochi.jp","yasuda.kochi.jp","yusuhara.kochi.jp","amakusa.kumamoto.jp","arao.kumamoto.jp","aso.kumamoto.jp","choyo.kumamoto.jp","gyokuto.kumamoto.jp","kamiamakusa.kumamoto.jp","kikuchi.kumamoto.jp","kumamoto.kumamoto.jp","mashiki.kumamoto.jp","mifune.kumamoto.jp","minamata.kumamoto.jp","minamioguni.kumamoto.jp","nagasu.kumamoto.jp","nishihara.kumamoto.jp","oguni.kumamoto.jp","ozu.kumamoto.jp","sumoto.kumamoto.jp","takamori.kumamoto.jp","uki.kumamoto.jp","uto.kumamoto.jp","yamaga.kumamoto.jp","yamato.kumamoto.jp","yatsushiro.kumamoto.jp","ayabe.kyoto.jp","fukuchiyama.kyoto.jp","higashiyama.kyoto.jp","ide.kyoto.jp","ine.kyoto.jp","joyo.kyoto.jp","kameoka.kyoto.jp","kamo.kyoto.jp","kita.kyoto.jp","kizu.kyoto.jp","kumiyama.kyoto.jp","kyotamba.kyoto.jp","kyotanabe.kyoto.jp","kyotango.kyoto.jp","maizuru.kyoto.jp","minami.kyoto.jp","minamiyamashiro.kyoto.jp","miyazu.kyoto.jp","muko.kyoto.jp","nagaokakyo.kyoto.jp","nakagyo.kyoto.jp","nantan.kyoto.jp","oyamazaki.kyoto.jp","sakyo.kyoto.jp","seika.kyoto.jp","tanabe.kyoto.jp","uji.kyoto.jp","ujitawara.kyoto.jp","wazuka.kyoto.jp","yamashina.kyoto.jp","yawata.kyoto.jp","asahi.mie.jp","inabe.mie.jp","ise.mie.jp","kameyama.mie.jp","kawagoe.mie.jp","kiho.mie.jp","kisosaki.mie.jp","kiwa.mie.jp","komono.mie.jp","kumano.mie.jp","kuwana.mie.jp","matsusaka.mie.jp","meiwa.mie.jp","mihama.mie.jp","minamiise.mie.jp","misugi.mie.jp","miyama.mie.jp","nabari.mie.jp","shima.mie.jp","suzuka.mie.jp","tado.mie.jp","taiki.mie.jp","taki.mie.jp","tamaki.mie.jp","toba.mie.jp","tsu.mie.jp","udono.mie.jp","ureshino.mie.jp","watarai.mie.jp","yokkaichi.mie.jp","furukawa.miyagi.jp","higashimatsushima.miyagi.jp","ishinomaki.miyagi.jp","iwanuma.miyagi.jp","kakuda.miyagi.jp","kami.miyagi.jp","kawasaki.miyagi.jp","marumori.miyagi.jp","matsushima.miyagi.jp","minamisanriku.miyagi.jp","misato.miyagi.jp","murata.miyagi.jp","natori.miyagi.jp","ogawara.miyagi.jp","ohira.miyagi.jp","onagawa.miyagi.jp","osaki.miyagi.jp","rifu.miyagi.jp","semine.miyagi.jp","shibata.miyagi.jp","shichikashuku.miyagi.jp","shikama.miyagi.jp","shiogama.miyagi.jp","shiroishi.miyagi.jp","tagajo.miyagi.jp","taiwa.miyagi.jp","tome.miyagi.jp","tomiya.miyagi.jp","wakuya.miyagi.jp","watari.miyagi.jp","yamamoto.miyagi.jp","zao.miyagi.jp","aya.miyazaki.jp","ebino.miyazaki.jp","gokase.miyazaki.jp","hyuga.miyazaki.jp","kadogawa.miyazaki.jp","kawaminami.miyazaki.jp","kijo.miyazaki.jp","kitagawa.miyazaki.jp","kitakata.miyazaki.jp","kitaura.miyazaki.jp","kobayashi.miyazaki.jp","kunitomi.miyazaki.jp","kushima.miyazaki.jp","mimata.miyazaki.jp","miyakonojo.miyazaki.jp","miyazaki.miyazaki.jp","morotsuka.miyazaki.jp","nichinan.miyazaki.jp","nishimera.miyazaki.jp","nobeoka.miyazaki.jp","saito.miyazaki.jp","shiiba.miyazaki.jp","shintomi.miyazaki.jp","takaharu.miyazaki.jp","takanabe.miyazaki.jp","takazaki.miyazaki.jp","tsuno.miyazaki.jp","achi.nagano.jp","agematsu.nagano.jp","anan.nagano.jp","aoki.nagano.jp","asahi.nagano.jp","azumino.nagano.jp","chikuhoku.nagano.jp","chikuma.nagano.jp","chino.nagano.jp","fujimi.nagano.jp","hakuba.nagano.jp","hara.nagano.jp","hiraya.nagano.jp","iida.nagano.jp","iijima.nagano.jp","iiyama.nagano.jp","iizuna.nagano.jp","ikeda.nagano.jp","ikusaka.nagano.jp","ina.nagano.jp","karuizawa.nagano.jp","kawakami.nagano.jp","kiso.nagano.jp","kisofukushima.nagano.jp","kitaaiki.nagano.jp","komagane.nagano.jp","komoro.nagano.jp","matsukawa.nagano.jp","matsumoto.nagano.jp","miasa.nagano.jp","minamiaiki.nagano.jp","minamimaki.nagano.jp","minamiminowa.nagano.jp","minowa.nagano.jp","miyada.nagano.jp","miyota.nagano.jp","mochizuki.nagano.jp","nagano.nagano.jp","nagawa.nagano.jp","nagiso.nagano.jp","nakagawa.nagano.jp","nakano.nagano.jp","nozawaonsen.nagano.jp","obuse.nagano.jp","ogawa.nagano.jp","okaya.nagano.jp","omachi.nagano.jp","omi.nagano.jp","ookuwa.nagano.jp","ooshika.nagano.jp","otaki.nagano.jp","otari.nagano.jp","sakae.nagano.jp","sakaki.nagano.jp","saku.nagano.jp","sakuho.nagano.jp","shimosuwa.nagano.jp","shinanomachi.nagano.jp","shiojiri.nagano.jp","suwa.nagano.jp","suzaka.nagano.jp","takagi.nagano.jp","takamori.nagano.jp","takayama.nagano.jp","tateshina.nagano.jp","tatsuno.nagano.jp","togakushi.nagano.jp","togura.nagano.jp","tomi.nagano.jp","ueda.nagano.jp","wada.nagano.jp","yamagata.nagano.jp","yamanouchi.nagano.jp","yasaka.nagano.jp","yasuoka.nagano.jp","chijiwa.nagasaki.jp","futsu.nagasaki.jp","goto.nagasaki.jp","hasami.nagasaki.jp","hirado.nagasaki.jp","iki.nagasaki.jp","isahaya.nagasaki.jp","kawatana.nagasaki.jp","kuchinotsu.nagasaki.jp","matsuura.nagasaki.jp","nagasaki.nagasaki.jp","obama.nagasaki.jp","omura.nagasaki.jp","oseto.nagasaki.jp","saikai.nagasaki.jp","sasebo.nagasaki.jp","seihi.nagasaki.jp","shimabara.nagasaki.jp","shinkamigoto.nagasaki.jp","togitsu.nagasaki.jp","tsushima.nagasaki.jp","unzen.nagasaki.jp","ando.nara.jp","gose.nara.jp","heguri.nara.jp","higashiyoshino.nara.jp","ikaruga.nara.jp","ikoma.nara.jp","kamikitayama.nara.jp","kanmaki.nara.jp","kashiba.nara.jp","kashihara.nara.jp","katsuragi.nara.jp","kawai.nara.jp","kawakami.nara.jp","kawanishi.nara.jp","koryo.nara.jp","kurotaki.nara.jp","mitsue.nara.jp","miyake.nara.jp","nara.nara.jp","nosegawa.nara.jp","oji.nara.jp","ouda.nara.jp","oyodo.nara.jp","sakurai.nara.jp","sango.nara.jp","shimoichi.nara.jp","shimokitayama.nara.jp","shinjo.nara.jp","soni.nara.jp","takatori.nara.jp","tawaramoto.nara.jp","tenkawa.nara.jp","tenri.nara.jp","uda.nara.jp","yamatokoriyama.nara.jp","yamatotakada.nara.jp","yamazoe.nara.jp","yoshino.nara.jp","aga.niigata.jp","agano.niigata.jp","gosen.niigata.jp","itoigawa.niigata.jp","izumozaki.niigata.jp","joetsu.niigata.jp","kamo.niigata.jp","kariwa.niigata.jp","kashiwazaki.niigata.jp","minamiuonuma.niigata.jp","mitsuke.niigata.jp","muika.niigata.jp","murakami.niigata.jp","myoko.niigata.jp","nagaoka.niigata.jp","niigata.niigata.jp","ojiya.niigata.jp","omi.niigata.jp","sado.niigata.jp","sanjo.niigata.jp","seiro.niigata.jp","seirou.niigata.jp","sekikawa.niigata.jp","shibata.niigata.jp","tagami.niigata.jp","tainai.niigata.jp","tochio.niigata.jp","tokamachi.niigata.jp","tsubame.niigata.jp","tsunan.niigata.jp","uonuma.niigata.jp","yahiko.niigata.jp","yoita.niigata.jp","yuzawa.niigata.jp","beppu.oita.jp","bungoono.oita.jp","bungotakada.oita.jp","hasama.oita.jp","hiji.oita.jp","himeshima.oita.jp","hita.oita.jp","kamitsue.oita.jp","kokonoe.oita.jp","kuju.oita.jp","kunisaki.oita.jp","kusu.oita.jp","oita.oita.jp","saiki.oita.jp","taketa.oita.jp","tsukumi.oita.jp","usa.oita.jp","usuki.oita.jp","yufu.oita.jp","akaiwa.okayama.jp","asakuchi.okayama.jp","bizen.okayama.jp","hayashima.okayama.jp","ibara.okayama.jp","kagamino.okayama.jp","kasaoka.okayama.jp","kibichuo.okayama.jp","kumenan.okayama.jp","kurashiki.okayama.jp","maniwa.okayama.jp","misaki.okayama.jp","nagi.okayama.jp","niimi.okayama.jp","nishiawakura.okayama.jp","okayama.okayama.jp","satosho.okayama.jp","setouchi.okayama.jp","shinjo.okayama.jp","shoo.okayama.jp","soja.okayama.jp","takahashi.okayama.jp","tamano.okayama.jp","tsuyama.okayama.jp","wake.okayama.jp","yakage.okayama.jp","aguni.okinawa.jp","ginowan.okinawa.jp","ginoza.okinawa.jp","gushikami.okinawa.jp","haebaru.okinawa.jp","higashi.okinawa.jp","hirara.okinawa.jp","iheya.okinawa.jp","ishigaki.okinawa.jp","ishikawa.okinawa.jp","itoman.okinawa.jp","izena.okinawa.jp","kadena.okinawa.jp","kin.okinawa.jp","kitadaito.okinawa.jp","kitanakagusuku.okinawa.jp","kumejima.okinawa.jp","kunigami.okinawa.jp","minamidaito.okinawa.jp","motobu.okinawa.jp","nago.okinawa.jp","naha.okinawa.jp","nakagusuku.okinawa.jp","nakijin.okinawa.jp","nanjo.okinawa.jp","nishihara.okinawa.jp","ogimi.okinawa.jp","okinawa.okinawa.jp","onna.okinawa.jp","shimoji.okinawa.jp","taketomi.okinawa.jp","tarama.okinawa.jp","tokashiki.okinawa.jp","tomigusuku.okinawa.jp","tonaki.okinawa.jp","urasoe.okinawa.jp","uruma.okinawa.jp","yaese.okinawa.jp","yomitan.okinawa.jp","yonabaru.okinawa.jp","yonaguni.okinawa.jp","zamami.okinawa.jp","abeno.osaka.jp","chihayaakasaka.osaka.jp","chuo.osaka.jp","daito.osaka.jp","fujiidera.osaka.jp","habikino.osaka.jp","hannan.osaka.jp","higashiosaka.osaka.jp","higashisumiyoshi.osaka.jp","higashiyodogawa.osaka.jp","hirakata.osaka.jp","ibaraki.osaka.jp","ikeda.osaka.jp","izumi.osaka.jp","izumiotsu.osaka.jp","izumisano.osaka.jp","kadoma.osaka.jp","kaizuka.osaka.jp","kanan.osaka.jp","kashiwara.osaka.jp","katano.osaka.jp","kawachinagano.osaka.jp","kishiwada.osaka.jp","kita.osaka.jp","kumatori.osaka.jp","matsubara.osaka.jp","minato.osaka.jp","minoh.osaka.jp","misaki.osaka.jp","moriguchi.osaka.jp","neyagawa.osaka.jp","nishi.osaka.jp","nose.osaka.jp","osakasayama.osaka.jp","sakai.osaka.jp","sayama.osaka.jp","sennan.osaka.jp","settsu.osaka.jp","shijonawate.osaka.jp","shimamoto.osaka.jp","suita.osaka.jp","tadaoka.osaka.jp","taishi.osaka.jp","tajiri.osaka.jp","takaishi.osaka.jp","takatsuki.osaka.jp","tondabayashi.osaka.jp","toyonaka.osaka.jp","toyono.osaka.jp","yao.osaka.jp","ariake.saga.jp","arita.saga.jp","fukudomi.saga.jp","genkai.saga.jp","hamatama.saga.jp","hizen.saga.jp","imari.saga.jp","kamimine.saga.jp","kanzaki.saga.jp","karatsu.saga.jp","kashima.saga.jp","kitagata.saga.jp","kitahata.saga.jp","kiyama.saga.jp","kouhoku.saga.jp","kyuragi.saga.jp","nishiarita.saga.jp","ogi.saga.jp","omachi.saga.jp","ouchi.saga.jp","saga.saga.jp","shiroishi.saga.jp","taku.saga.jp","tara.saga.jp","tosu.saga.jp","yoshinogari.saga.jp","arakawa.saitama.jp","asaka.saitama.jp","chichibu.saitama.jp","fujimi.saitama.jp","fujimino.saitama.jp","fukaya.saitama.jp","hanno.saitama.jp","hanyu.saitama.jp","hasuda.saitama.jp","hatogaya.saitama.jp","hatoyama.saitama.jp","hidaka.saitama.jp","higashichichibu.saitama.jp","higashimatsuyama.saitama.jp","honjo.saitama.jp","ina.saitama.jp","iruma.saitama.jp","iwatsuki.saitama.jp","kamiizumi.saitama.jp","kamikawa.saitama.jp","kamisato.saitama.jp","kasukabe.saitama.jp","kawagoe.saitama.jp","kawaguchi.saitama.jp","kawajima.saitama.jp","kazo.saitama.jp","kitamoto.saitama.jp","koshigaya.saitama.jp","kounosu.saitama.jp","kuki.saitama.jp","kumagaya.saitama.jp","matsubushi.saitama.jp","minano.saitama.jp","misato.saitama.jp","miyashiro.saitama.jp","miyoshi.saitama.jp","moroyama.saitama.jp","nagatoro.saitama.jp","namegawa.saitama.jp","niiza.saitama.jp","ogano.saitama.jp","ogawa.saitama.jp","ogose.saitama.jp","okegawa.saitama.jp","omiya.saitama.jp","otaki.saitama.jp","ranzan.saitama.jp","ryokami.saitama.jp","saitama.saitama.jp","sakado.saitama.jp","satte.saitama.jp","sayama.saitama.jp","shiki.saitama.jp","shiraoka.saitama.jp","soka.saitama.jp","sugito.saitama.jp","toda.saitama.jp","tokigawa.saitama.jp","tokorozawa.saitama.jp","tsurugashima.saitama.jp","urawa.saitama.jp","warabi.saitama.jp","yashio.saitama.jp","yokoze.saitama.jp","yono.saitama.jp","yorii.saitama.jp","yoshida.saitama.jp","yoshikawa.saitama.jp","yoshimi.saitama.jp","aisho.shiga.jp","gamo.shiga.jp","higashiomi.shiga.jp","hikone.shiga.jp","koka.shiga.jp","konan.shiga.jp","kosei.shiga.jp","koto.shiga.jp","kusatsu.shiga.jp","maibara.shiga.jp","moriyama.shiga.jp","nagahama.shiga.jp","nishiazai.shiga.jp","notogawa.shiga.jp","omihachiman.shiga.jp","otsu.shiga.jp","ritto.shiga.jp","ryuoh.shiga.jp","takashima.shiga.jp","takatsuki.shiga.jp","torahime.shiga.jp","toyosato.shiga.jp","yasu.shiga.jp","akagi.shimane.jp","ama.shimane.jp","gotsu.shimane.jp","hamada.shimane.jp","higashiizumo.shimane.jp","hikawa.shimane.jp","hikimi.shimane.jp","izumo.shimane.jp","kakinoki.shimane.jp","masuda.shimane.jp","matsue.shimane.jp","misato.shimane.jp","nishinoshima.shimane.jp","ohda.shimane.jp","okinoshima.shimane.jp","okuizumo.shimane.jp","shimane.shimane.jp","tamayu.shimane.jp","tsuwano.shimane.jp","unnan.shimane.jp","yakumo.shimane.jp","yasugi.shimane.jp","yatsuka.shimane.jp","arai.shizuoka.jp","atami.shizuoka.jp","fuji.shizuoka.jp","fujieda.shizuoka.jp","fujikawa.shizuoka.jp","fujinomiya.shizuoka.jp","fukuroi.shizuoka.jp","gotemba.shizuoka.jp","haibara.shizuoka.jp","hamamatsu.shizuoka.jp","higashiizu.shizuoka.jp","ito.shizuoka.jp","iwata.shizuoka.jp","izu.shizuoka.jp","izunokuni.shizuoka.jp","kakegawa.shizuoka.jp","kannami.shizuoka.jp","kawanehon.shizuoka.jp","kawazu.shizuoka.jp","kikugawa.shizuoka.jp","kosai.shizuoka.jp","makinohara.shizuoka.jp","matsuzaki.shizuoka.jp","minamiizu.shizuoka.jp","mishima.shizuoka.jp","morimachi.shizuoka.jp","nishiizu.shizuoka.jp","numazu.shizuoka.jp","omaezaki.shizuoka.jp","shimada.shizuoka.jp","shimizu.shizuoka.jp","shimoda.shizuoka.jp","shizuoka.shizuoka.jp","susono.shizuoka.jp","yaizu.shizuoka.jp","yoshida.shizuoka.jp","ashikaga.tochigi.jp","bato.tochigi.jp","haga.tochigi.jp","ichikai.tochigi.jp","iwafune.tochigi.jp","kaminokawa.tochigi.jp","kanuma.tochigi.jp","karasuyama.tochigi.jp","kuroiso.tochigi.jp","mashiko.tochigi.jp","mibu.tochigi.jp","moka.tochigi.jp","motegi.tochigi.jp","nasu.tochigi.jp","nasushiobara.tochigi.jp","nikko.tochigi.jp","nishikata.tochigi.jp","nogi.tochigi.jp","ohira.tochigi.jp","ohtawara.tochigi.jp","oyama.tochigi.jp","sakura.tochigi.jp","sano.tochigi.jp","shimotsuke.tochigi.jp","shioya.tochigi.jp","takanezawa.tochigi.jp","tochigi.tochigi.jp","tsuga.tochigi.jp","ujiie.tochigi.jp","utsunomiya.tochigi.jp","yaita.tochigi.jp","aizumi.tokushima.jp","anan.tokushima.jp","ichiba.tokushima.jp","itano.tokushima.jp","kainan.tokushima.jp","komatsushima.tokushima.jp","matsushige.tokushima.jp","mima.tokushima.jp","minami.tokushima.jp","miyoshi.tokushima.jp","mugi.tokushima.jp","nakagawa.tokushima.jp","naruto.tokushima.jp","sanagochi.tokushima.jp","shishikui.tokushima.jp","tokushima.tokushima.jp","wajiki.tokushima.jp","adachi.tokyo.jp","akiruno.tokyo.jp","akishima.tokyo.jp","aogashima.tokyo.jp","arakawa.tokyo.jp","bunkyo.tokyo.jp","chiyoda.tokyo.jp","chofu.tokyo.jp","chuo.tokyo.jp","edogawa.tokyo.jp","fuchu.tokyo.jp","fussa.tokyo.jp","hachijo.tokyo.jp","hachioji.tokyo.jp","hamura.tokyo.jp","higashikurume.tokyo.jp","higashimurayama.tokyo.jp","higashiyamato.tokyo.jp","hino.tokyo.jp","hinode.tokyo.jp","hinohara.tokyo.jp","inagi.tokyo.jp","itabashi.tokyo.jp","katsushika.tokyo.jp","kita.tokyo.jp","kiyose.tokyo.jp","kodaira.tokyo.jp","koganei.tokyo.jp","kokubunji.tokyo.jp","komae.tokyo.jp","koto.tokyo.jp","kouzushima.tokyo.jp","kunitachi.tokyo.jp","machida.tokyo.jp","meguro.tokyo.jp","minato.tokyo.jp","mitaka.tokyo.jp","mizuho.tokyo.jp","musashimurayama.tokyo.jp","musashino.tokyo.jp","nakano.tokyo.jp","nerima.tokyo.jp","ogasawara.tokyo.jp","okutama.tokyo.jp","ome.tokyo.jp","oshima.tokyo.jp","ota.tokyo.jp","setagaya.tokyo.jp","shibuya.tokyo.jp","shinagawa.tokyo.jp","shinjuku.tokyo.jp","suginami.tokyo.jp","sumida.tokyo.jp","tachikawa.tokyo.jp","taito.tokyo.jp","tama.tokyo.jp","toshima.tokyo.jp","chizu.tottori.jp","hino.tottori.jp","kawahara.tottori.jp","koge.tottori.jp","kotoura.tottori.jp","misasa.tottori.jp","nanbu.tottori.jp","nichinan.tottori.jp","sakaiminato.tottori.jp","tottori.tottori.jp","wakasa.tottori.jp","yazu.tottori.jp","yonago.tottori.jp","asahi.toyama.jp","fuchu.toyama.jp","fukumitsu.toyama.jp","funahashi.toyama.jp","himi.toyama.jp","imizu.toyama.jp","inami.toyama.jp","johana.toyama.jp","kamiichi.toyama.jp","kurobe.toyama.jp","nakaniikawa.toyama.jp","namerikawa.toyama.jp","nanto.toyama.jp","nyuzen.toyama.jp","oyabe.toyama.jp","taira.toyama.jp","takaoka.toyama.jp","tateyama.toyama.jp","toga.toyama.jp","tonami.toyama.jp","toyama.toyama.jp","unazuki.toyama.jp","uozu.toyama.jp","yamada.toyama.jp","arida.wakayama.jp","aridagawa.wakayama.jp","gobo.wakayama.jp","hashimoto.wakayama.jp","hidaka.wakayama.jp","hirogawa.wakayama.jp","inami.wakayama.jp","iwade.wakayama.jp","kainan.wakayama.jp","kamitonda.wakayama.jp","katsuragi.wakayama.jp","kimino.wakayama.jp","kinokawa.wakayama.jp","kitayama.wakayama.jp","koya.wakayama.jp","koza.wakayama.jp","kozagawa.wakayama.jp","kudoyama.wakayama.jp","kushimoto.wakayama.jp","mihama.wakayama.jp","misato.wakayama.jp","nachikatsuura.wakayama.jp","shingu.wakayama.jp","shirahama.wakayama.jp","taiji.wakayama.jp","tanabe.wakayama.jp","wakayama.wakayama.jp","yuasa.wakayama.jp","yura.wakayama.jp","asahi.yamagata.jp","funagata.yamagata.jp","higashine.yamagata.jp","iide.yamagata.jp","kahoku.yamagata.jp","kaminoyama.yamagata.jp","kaneyama.yamagata.jp","kawanishi.yamagata.jp","mamurogawa.yamagata.jp","mikawa.yamagata.jp","murayama.yamagata.jp","nagai.yamagata.jp","nakayama.yamagata.jp","nanyo.yamagata.jp","nishikawa.yamagata.jp","obanazawa.yamagata.jp","oe.yamagata.jp","oguni.yamagata.jp","ohkura.yamagata.jp","oishida.yamagata.jp","sagae.yamagata.jp","sakata.yamagata.jp","sakegawa.yamagata.jp","shinjo.yamagata.jp","shirataka.yamagata.jp","shonai.yamagata.jp","takahata.yamagata.jp","tendo.yamagata.jp","tozawa.yamagata.jp","tsuruoka.yamagata.jp","yamagata.yamagata.jp","yamanobe.yamagata.jp","yonezawa.yamagata.jp","yuza.yamagata.jp","abu.yamaguchi.jp","hagi.yamaguchi.jp","hikari.yamaguchi.jp","hofu.yamaguchi.jp","iwakuni.yamaguchi.jp","kudamatsu.yamaguchi.jp","mitou.yamaguchi.jp","nagato.yamaguchi.jp","oshima.yamaguchi.jp","shimonoseki.yamaguchi.jp","shunan.yamaguchi.jp","tabuse.yamaguchi.jp","tokuyama.yamaguchi.jp","toyota.yamaguchi.jp","ube.yamaguchi.jp","yuu.yamaguchi.jp","chuo.yamanashi.jp","doshi.yamanashi.jp","fuefuki.yamanashi.jp","fujikawa.yamanashi.jp","fujikawaguchiko.yamanashi.jp","fujiyoshida.yamanashi.jp","hayakawa.yamanashi.jp","hokuto.yamanashi.jp","ichikawamisato.yamanashi.jp","kai.yamanashi.jp","kofu.yamanashi.jp","koshu.yamanashi.jp","kosuge.yamanashi.jp","minami-alps.yamanashi.jp","minobu.yamanashi.jp","nakamichi.yamanashi.jp","nanbu.yamanashi.jp","narusawa.yamanashi.jp","nirasaki.yamanashi.jp","nishikatsura.yamanashi.jp","oshino.yamanashi.jp","otsuki.yamanashi.jp","showa.yamanashi.jp","tabayama.yamanashi.jp","tsuru.yamanashi.jp","uenohara.yamanashi.jp","yamanakako.yamanashi.jp","yamanashi.yamanashi.jp","ke","ac.ke","co.ke","go.ke","info.ke","me.ke","mobi.ke","ne.ke","or.ke","sc.ke","kg","com.kg","edu.kg","gov.kg","mil.kg","net.kg","org.kg","*.kh","ki","biz.ki","com.ki","edu.ki","gov.ki","info.ki","net.ki","org.ki","km","ass.km","com.km","edu.km","gov.km","mil.km","nom.km","org.km","prd.km","tm.km","asso.km","coop.km","gouv.km","medecin.km","notaires.km","pharmaciens.km","presse.km","veterinaire.km","kn","edu.kn","gov.kn","net.kn","org.kn","kp","com.kp","edu.kp","gov.kp","org.kp","rep.kp","tra.kp","kr","ac.kr","co.kr","es.kr","go.kr","hs.kr","kg.kr","mil.kr","ms.kr","ne.kr","or.kr","pe.kr","re.kr","sc.kr","busan.kr","chungbuk.kr","chungnam.kr","daegu.kr","daejeon.kr","gangwon.kr","gwangju.kr","gyeongbuk.kr","gyeonggi.kr","gyeongnam.kr","incheon.kr","jeju.kr","jeonbuk.kr","jeonnam.kr","seoul.kr","ulsan.kr","kw","com.kw","edu.kw","emb.kw","gov.kw","ind.kw","net.kw","org.kw","ky","com.ky","edu.ky","net.ky","org.ky","kz","com.kz","edu.kz","gov.kz","mil.kz","net.kz","org.kz","la","com.la","edu.la","gov.la","info.la","int.la","net.la","org.la","per.la","lb","com.lb","edu.lb","gov.lb","net.lb","org.lb","lc","co.lc","com.lc","edu.lc","gov.lc","net.lc","org.lc","li","lk","ac.lk","assn.lk","com.lk","edu.lk","gov.lk","grp.lk","hotel.lk","int.lk","ltd.lk","net.lk","ngo.lk","org.lk","sch.lk","soc.lk","web.lk","lr","com.lr","edu.lr","gov.lr","net.lr","org.lr","ls","ac.ls","biz.ls","co.ls","edu.ls","gov.ls","info.ls","net.ls","org.ls","sc.ls","lt","gov.lt","lu","lv","asn.lv","com.lv","conf.lv","edu.lv","gov.lv","id.lv","mil.lv","net.lv","org.lv","ly","com.ly","edu.ly","gov.ly","id.ly","med.ly","net.ly","org.ly","plc.ly","sch.ly","ma","ac.ma","co.ma","gov.ma","net.ma","org.ma","press.ma","mc","asso.mc","tm.mc","md","me","ac.me","co.me","edu.me","gov.me","its.me","net.me","org.me","priv.me","mg","co.mg","com.mg","edu.mg","gov.mg","mil.mg","nom.mg","org.mg","prd.mg","mh","mil","mk","com.mk","edu.mk","gov.mk","inf.mk","name.mk","net.mk","org.mk","ml","com.ml","edu.ml","gouv.ml","gov.ml","net.ml","org.ml","presse.ml","*.mm","mn","edu.mn","gov.mn","org.mn","mo","com.mo","edu.mo","gov.mo","net.mo","org.mo","mobi","mp","mq","mr","gov.mr","ms","com.ms","edu.ms","gov.ms","net.ms","org.ms","mt","com.mt","edu.mt","net.mt","org.mt","mu","ac.mu","co.mu","com.mu","gov.mu","net.mu","or.mu","org.mu","museum","mv","aero.mv","biz.mv","com.mv","coop.mv","edu.mv","gov.mv","info.mv","int.mv","mil.mv","museum.mv","name.mv","net.mv","org.mv","pro.mv","mw","ac.mw","biz.mw","co.mw","com.mw","coop.mw","edu.mw","gov.mw","int.mw","net.mw","org.mw","mx","com.mx","edu.mx","gob.mx","net.mx","org.mx","my","biz.my","com.my","edu.my","gov.my","mil.my","name.my","net.my","org.my","mz","ac.mz","adv.mz","co.mz","edu.mz","gov.mz","mil.mz","net.mz","org.mz","na","alt.na","co.na","com.na","gov.na","net.na","org.na","name","nc","asso.nc","nom.nc","ne","net","nf","arts.nf","com.nf","firm.nf","info.nf","net.nf","other.nf","per.nf","rec.nf","store.nf","web.nf","ng","com.ng","edu.ng","gov.ng","i.ng","mil.ng","mobi.ng","name.ng","net.ng","org.ng","sch.ng","ni","ac.ni","biz.ni","co.ni","com.ni","edu.ni","gob.ni","in.ni","info.ni","int.ni","mil.ni","net.ni","nom.ni","org.ni","web.ni","nl","no","fhs.no","folkebibl.no","fylkesbibl.no","idrett.no","museum.no","priv.no","vgs.no","dep.no","herad.no","kommune.no","mil.no","stat.no","aa.no","ah.no","bu.no","fm.no","hl.no","hm.no","jan-mayen.no","mr.no","nl.no","nt.no","of.no","ol.no","oslo.no","rl.no","sf.no","st.no","svalbard.no","tm.no","tr.no","va.no","vf.no","gs.aa.no","gs.ah.no","gs.bu.no","gs.fm.no","gs.hl.no","gs.hm.no","gs.jan-mayen.no","gs.mr.no","gs.nl.no","gs.nt.no","gs.of.no","gs.ol.no","gs.oslo.no","gs.rl.no","gs.sf.no","gs.st.no","gs.svalbard.no","gs.tm.no","gs.tr.no","gs.va.no","gs.vf.no","akrehamn.no","krehamn.no","algard.no","lgrd.no","arna.no","bronnoysund.no","brnnysund.no","brumunddal.no","bryne.no","drobak.no","drbak.no","egersund.no","fetsund.no","floro.no","flor.no","fredrikstad.no","hokksund.no","honefoss.no","hnefoss.no","jessheim.no","jorpeland.no","jrpeland.no","kirkenes.no","kopervik.no","krokstadelva.no","langevag.no","langevg.no","leirvik.no","mjondalen.no","mjndalen.no","mo-i-rana.no","mosjoen.no","mosjen.no","nesoddtangen.no","orkanger.no","osoyro.no","osyro.no","raholt.no","rholt.no","sandnessjoen.no","sandnessjen.no","skedsmokorset.no","slattum.no","spjelkavik.no","stathelle.no","stavern.no","stjordalshalsen.no","stjrdalshalsen.no","tananger.no","tranby.no","vossevangen.no","aarborte.no","aejrie.no","afjord.no","fjord.no","agdenes.no","nes.akershus.no","aknoluokta.no","koluokta.no","al.no","l.no","alaheadju.no","laheadju.no","alesund.no","lesund.no","alstahaug.no","alta.no","lt.no","alvdal.no","amli.no","mli.no","amot.no","mot.no","andasuolo.no","andebu.no","andoy.no","andy.no","ardal.no","rdal.no","aremark.no","arendal.no","s.no","aseral.no","seral.no","asker.no","askim.no","askoy.no","asky.no","askvoll.no","asnes.no","snes.no","audnedaln.no","aukra.no","aure.no","aurland.no","aurskog-holand.no","aurskog-hland.no","austevoll.no","austrheim.no","averoy.no","avery.no","badaddja.no","bdddj.no","brum.no","bahcavuotna.no","bhcavuotna.no","bahccavuotna.no","bhccavuotna.no","baidar.no","bidr.no","bajddar.no","bjddar.no","balat.no","blt.no","balestrand.no","ballangen.no","balsfjord.no","bamble.no","bardu.no","barum.no","batsfjord.no","btsfjord.no","bearalvahki.no","bearalvhki.no","beardu.no","beiarn.no","berg.no","bergen.no","berlevag.no","berlevg.no","bievat.no","bievt.no","bindal.no","birkenes.no","bjarkoy.no","bjarky.no","bjerkreim.no","bjugn.no","bodo.no","bod.no","bokn.no","bomlo.no","bmlo.no","bremanger.no","bronnoy.no","brnny.no","budejju.no","nes.buskerud.no","bygland.no","bykle.no","cahcesuolo.no","hcesuolo.no","davvenjarga.no","davvenjrga.no","davvesiida.no","deatnu.no","dielddanuorri.no","divtasvuodna.no","divttasvuotna.no","donna.no","dnna.no","dovre.no","drammen.no","drangedal.no","dyroy.no","dyry.no","eid.no","eidfjord.no","eidsberg.no","eidskog.no","eidsvoll.no","eigersund.no","elverum.no","enebakk.no","engerdal.no","etne.no","etnedal.no","evenassi.no","eveni.no","evenes.no","evje-og-hornnes.no","farsund.no","fauske.no","fedje.no","fet.no","finnoy.no","finny.no","fitjar.no","fjaler.no","fjell.no","fla.no","fl.no","flakstad.no","flatanger.no","flekkefjord.no","flesberg.no","flora.no","folldal.no","forde.no","frde.no","forsand.no","fosnes.no","frna.no","frana.no","frei.no","frogn.no","froland.no","frosta.no","froya.no","frya.no","fuoisku.no","fuossko.no","fusa.no","fyresdal.no","gaivuotna.no","givuotna.no","galsa.no","gls.no","gamvik.no","gangaviika.no","ggaviika.no","gaular.no","gausdal.no","giehtavuoatna.no","gildeskal.no","gildeskl.no","giske.no","gjemnes.no","gjerdrum.no","gjerstad.no","gjesdal.no","gjovik.no","gjvik.no","gloppen.no","gol.no","gran.no","grane.no","granvin.no","gratangen.no","grimstad.no","grong.no","grue.no","gulen.no","guovdageaidnu.no","ha.no","h.no","habmer.no","hbmer.no","hadsel.no","hgebostad.no","hagebostad.no","halden.no","halsa.no","hamar.no","hamaroy.no","hammarfeasta.no","hmmrfeasta.no","hammerfest.no","hapmir.no","hpmir.no","haram.no","hareid.no","harstad.no","hasvik.no","hattfjelldal.no","haugesund.no","os.hedmark.no","valer.hedmark.no","vler.hedmark.no","hemne.no","hemnes.no","hemsedal.no","hitra.no","hjartdal.no","hjelmeland.no","hobol.no","hobl.no","hof.no","hol.no","hole.no","holmestrand.no","holtalen.no","holtlen.no","os.hordaland.no","hornindal.no","horten.no","hoyanger.no","hyanger.no","hoylandet.no","hylandet.no","hurdal.no","hurum.no","hvaler.no","hyllestad.no","ibestad.no","inderoy.no","indery.no","iveland.no","ivgu.no","jevnaker.no","jolster.no","jlster.no","jondal.no","kafjord.no","kfjord.no","karasjohka.no","krjohka.no","karasjok.no","karlsoy.no","karmoy.no","karmy.no","kautokeino.no","klabu.no","klbu.no","klepp.no","kongsberg.no","kongsvinger.no","kraanghke.no","kranghke.no","kragero.no","krager.no","kristiansand.no","kristiansund.no","krodsherad.no","krdsherad.no","kvfjord.no","kvnangen.no","kvafjord.no","kvalsund.no","kvam.no","kvanangen.no","kvinesdal.no","kvinnherad.no","kviteseid.no","kvitsoy.no","kvitsy.no","laakesvuemie.no","lrdal.no","lahppi.no","lhppi.no","lardal.no","larvik.no","lavagis.no","lavangen.no","leangaviika.no","leagaviika.no","lebesby.no","leikanger.no","leirfjord.no","leka.no","leksvik.no","lenvik.no","lerdal.no","lesja.no","levanger.no","lier.no","lierne.no","lillehammer.no","lillesand.no","lindas.no","linds.no","lindesnes.no","loabat.no","loabt.no","lodingen.no","ldingen.no","lom.no","loppa.no","lorenskog.no","lrenskog.no","loten.no","lten.no","lund.no","lunner.no","luroy.no","lury.no","luster.no","lyngdal.no","lyngen.no","malatvuopmi.no","mlatvuopmi.no","malselv.no","mlselv.no","malvik.no","mandal.no","marker.no","marnardal.no","masfjorden.no","masoy.no","msy.no","matta-varjjat.no","mtta-vrjjat.no","meland.no","meldal.no","melhus.no","meloy.no","mely.no","meraker.no","merker.no","midsund.no","midtre-gauldal.no","moareke.no","moreke.no","modalen.no","modum.no","molde.no","heroy.more-og-romsdal.no","sande.more-og-romsdal.no","hery.mre-og-romsdal.no","sande.mre-og-romsdal.no","moskenes.no","moss.no","mosvik.no","muosat.no","muost.no","naamesjevuemie.no","nmesjevuemie.no","nry.no","namdalseid.no","namsos.no","namsskogan.no","nannestad.no","naroy.no","narviika.no","narvik.no","naustdal.no","navuotna.no","nvuotna.no","nedre-eiker.no","nesna.no","nesodden.no","nesseby.no","nesset.no","nissedal.no","nittedal.no","nord-aurdal.no","nord-fron.no","nord-odal.no","norddal.no","nordkapp.no","bo.nordland.no","b.nordland.no","heroy.nordland.no","hery.nordland.no","nordre-land.no","nordreisa.no","nore-og-uvdal.no","notodden.no","notteroy.no","nttery.no","odda.no","oksnes.no","ksnes.no","omasvuotna.no","oppdal.no","oppegard.no","oppegrd.no","orkdal.no","orland.no","rland.no","orskog.no","rskog.no","orsta.no","rsta.no","osen.no","osteroy.no","ostery.no","valer.ostfold.no","vler.stfold.no","ostre-toten.no","stre-toten.no","overhalla.no","ovre-eiker.no","vre-eiker.no","oyer.no","yer.no","oygarden.no","ygarden.no","oystre-slidre.no","ystre-slidre.no","porsanger.no","porsangu.no","porsgu.no","porsgrunn.no","rade.no","rde.no","radoy.no","rady.no","rlingen.no","rahkkeravju.no","rhkkervju.no","raisa.no","risa.no","rakkestad.no","ralingen.no","rana.no","randaberg.no","rauma.no","rendalen.no","rennebu.no","rennesoy.no","rennesy.no","rindal.no","ringebu.no","ringerike.no","ringsaker.no","risor.no","risr.no","rissa.no","roan.no","rodoy.no","rdy.no","rollag.no","romsa.no","romskog.no","rmskog.no","roros.no","rros.no","rost.no","rst.no","royken.no","ryken.no","royrvik.no","ryrvik.no","ruovat.no","rygge.no","salangen.no","salat.no","slat.no","slt.no","saltdal.no","samnanger.no","sandefjord.no","sandnes.no","sandoy.no","sandy.no","sarpsborg.no","sauda.no","sauherad.no","sel.no","selbu.no","selje.no","seljord.no","siellak.no","sigdal.no","siljan.no","sirdal.no","skanit.no","sknit.no","skanland.no","sknland.no","skaun.no","skedsmo.no","ski.no","skien.no","skierva.no","skierv.no","skiptvet.no","skjak.no","skjk.no","skjervoy.no","skjervy.no","skodje.no","smola.no","smla.no","snaase.no","snase.no","snasa.no","snsa.no","snillfjord.no","snoasa.no","sogndal.no","sogne.no","sgne.no","sokndal.no","sola.no","solund.no","somna.no","smna.no","sondre-land.no","sndre-land.no","songdalen.no","sor-aurdal.no","sr-aurdal.no","sor-fron.no","sr-fron.no","sor-odal.no","sr-odal.no","sor-varanger.no","sr-varanger.no","sorfold.no","srfold.no","sorreisa.no","srreisa.no","sortland.no","sorum.no","srum.no","spydeberg.no","stange.no","stavanger.no","steigen.no","steinkjer.no","stjordal.no","stjrdal.no","stokke.no","stor-elvdal.no","stord.no","stordal.no","storfjord.no","strand.no","stranda.no","stryn.no","sula.no","suldal.no","sund.no","sunndal.no","surnadal.no","sveio.no","svelvik.no","sykkylven.no","tana.no","bo.telemark.no","b.telemark.no","time.no","tingvoll.no","tinn.no","tjeldsund.no","tjome.no","tjme.no","tokke.no","tolga.no","tonsberg.no","tnsberg.no","torsken.no","trna.no","trana.no","tranoy.no","trany.no","troandin.no","trogstad.no","trgstad.no","tromsa.no","tromso.no","troms.no","trondheim.no","trysil.no","tvedestrand.no","tydal.no","tynset.no","tysfjord.no","tysnes.no","tysvr.no","tysvar.no","ullensaker.no","ullensvang.no","ulvik.no","unjarga.no","unjrga.no","utsira.no","vaapste.no","vadso.no","vads.no","vry.no","vaga.no","vg.no","vagan.no","vgan.no","vagsoy.no","vgsy.no","vaksdal.no","valle.no","vang.no","vanylven.no","vardo.no","vard.no","varggat.no","vrggt.no","varoy.no","vefsn.no","vega.no","vegarshei.no","vegrshei.no","vennesla.no","verdal.no","verran.no","vestby.no","sande.vestfold.no","vestnes.no","vestre-slidre.no","vestre-toten.no","vestvagoy.no","vestvgy.no","vevelstad.no","vik.no","vikna.no","vindafjord.no","voagat.no","volda.no","voss.no","*.np","nr","biz.nr","com.nr","edu.nr","gov.nr","info.nr","net.nr","org.nr","nu","nz","ac.nz","co.nz","cri.nz","geek.nz","gen.nz","govt.nz","health.nz","iwi.nz","kiwi.nz","maori.nz","mori.nz","mil.nz","net.nz","org.nz","parliament.nz","school.nz","om","co.om","com.om","edu.om","gov.om","med.om","museum.om","net.om","org.om","pro.om","onion","org","pa","abo.pa","ac.pa","com.pa","edu.pa","gob.pa","ing.pa","med.pa","net.pa","nom.pa","org.pa","sld.pa","pe","com.pe","edu.pe","gob.pe","mil.pe","net.pe","nom.pe","org.pe","pf","com.pf","edu.pf","org.pf","*.pg","ph","com.ph","edu.ph","gov.ph","i.ph","mil.ph","net.ph","ngo.ph","org.ph","pk","ac.pk","biz.pk","com.pk","edu.pk","fam.pk","gkp.pk","gob.pk","gog.pk","gok.pk","gon.pk","gop.pk","gos.pk","gov.pk","net.pk","org.pk","web.pk","pl","com.pl","net.pl","org.pl","agro.pl","aid.pl","atm.pl","auto.pl","biz.pl","edu.pl","gmina.pl","gsm.pl","info.pl","mail.pl","media.pl","miasta.pl","mil.pl","nieruchomosci.pl","nom.pl","pc.pl","powiat.pl","priv.pl","realestate.pl","rel.pl","sex.pl","shop.pl","sklep.pl","sos.pl","szkola.pl","targi.pl","tm.pl","tourism.pl","travel.pl","turystyka.pl","gov.pl","ap.gov.pl","griw.gov.pl","ic.gov.pl","is.gov.pl","kmpsp.gov.pl","konsulat.gov.pl","kppsp.gov.pl","kwp.gov.pl","kwpsp.gov.pl","mup.gov.pl","mw.gov.pl","oia.gov.pl","oirm.gov.pl","oke.gov.pl","oow.gov.pl","oschr.gov.pl","oum.gov.pl","pa.gov.pl","pinb.gov.pl","piw.gov.pl","po.gov.pl","pr.gov.pl","psp.gov.pl","psse.gov.pl","pup.gov.pl","rzgw.gov.pl","sa.gov.pl","sdn.gov.pl","sko.gov.pl","so.gov.pl","sr.gov.pl","starostwo.gov.pl","ug.gov.pl","ugim.gov.pl","um.gov.pl","umig.gov.pl","upow.gov.pl","uppo.gov.pl","us.gov.pl","uw.gov.pl","uzs.gov.pl","wif.gov.pl","wiih.gov.pl","winb.gov.pl","wios.gov.pl","witd.gov.pl","wiw.gov.pl","wkz.gov.pl","wsa.gov.pl","wskr.gov.pl","wsse.gov.pl","wuoz.gov.pl","wzmiuw.gov.pl","zp.gov.pl","zpisdn.gov.pl","augustow.pl","babia-gora.pl","bedzin.pl","beskidy.pl","bialowieza.pl","bialystok.pl","bielawa.pl","bieszczady.pl","boleslawiec.pl","bydgoszcz.pl","bytom.pl","cieszyn.pl","czeladz.pl","czest.pl","dlugoleka.pl","elblag.pl","elk.pl","glogow.pl","gniezno.pl","gorlice.pl","grajewo.pl","ilawa.pl","jaworzno.pl","jelenia-gora.pl","jgora.pl","kalisz.pl","karpacz.pl","kartuzy.pl","kaszuby.pl","katowice.pl","kazimierz-dolny.pl","kepno.pl","ketrzyn.pl","klodzko.pl","kobierzyce.pl","kolobrzeg.pl","konin.pl","konskowola.pl","kutno.pl","lapy.pl","lebork.pl","legnica.pl","lezajsk.pl","limanowa.pl","lomza.pl","lowicz.pl","lubin.pl","lukow.pl","malbork.pl","malopolska.pl","mazowsze.pl","mazury.pl","mielec.pl","mielno.pl","mragowo.pl","naklo.pl","nowaruda.pl","nysa.pl","olawa.pl","olecko.pl","olkusz.pl","olsztyn.pl","opoczno.pl","opole.pl","ostroda.pl","ostroleka.pl","ostrowiec.pl","ostrowwlkp.pl","pila.pl","pisz.pl","podhale.pl","podlasie.pl","polkowice.pl","pomorskie.pl","pomorze.pl","prochowice.pl","pruszkow.pl","przeworsk.pl","pulawy.pl","radom.pl","rawa-maz.pl","rybnik.pl","rzeszow.pl","sanok.pl","sejny.pl","skoczow.pl","slask.pl","slupsk.pl","sosnowiec.pl","stalowa-wola.pl","starachowice.pl","stargard.pl","suwalki.pl","swidnica.pl","swiebodzin.pl","swinoujscie.pl","szczecin.pl","szczytno.pl","tarnobrzeg.pl","tgory.pl","turek.pl","tychy.pl","ustka.pl","walbrzych.pl","warmia.pl","warszawa.pl","waw.pl","wegrow.pl","wielun.pl","wlocl.pl","wloclawek.pl","wodzislaw.pl","wolomin.pl","wroclaw.pl","zachpomor.pl","zagan.pl","zarow.pl","zgora.pl","zgorzelec.pl","pm","pn","co.pn","edu.pn","gov.pn","net.pn","org.pn","post","pr","biz.pr","com.pr","edu.pr","gov.pr","info.pr","isla.pr","name.pr","net.pr","org.pr","pro.pr","ac.pr","est.pr","prof.pr","pro","aaa.pro","aca.pro","acct.pro","avocat.pro","bar.pro","cpa.pro","eng.pro","jur.pro","law.pro","med.pro","recht.pro","ps","com.ps","edu.ps","gov.ps","net.ps","org.ps","plo.ps","sec.ps","pt","com.pt","edu.pt","gov.pt","int.pt","net.pt","nome.pt","org.pt","publ.pt","pw","belau.pw","co.pw","ed.pw","go.pw","or.pw","py","com.py","coop.py","edu.py","gov.py","mil.py","net.py","org.py","qa","com.qa","edu.qa","gov.qa","mil.qa","name.qa","net.qa","org.qa","sch.qa","re","asso.re","com.re","ro","arts.ro","com.ro","firm.ro","info.ro","nom.ro","nt.ro","org.ro","rec.ro","store.ro","tm.ro","www.ro","rs","ac.rs","co.rs","edu.rs","gov.rs","in.rs","org.rs","ru","rw","ac.rw","co.rw","coop.rw","gov.rw","mil.rw","net.rw","org.rw","sa","com.sa","edu.sa","gov.sa","med.sa","net.sa","org.sa","pub.sa","sch.sa","sb","com.sb","edu.sb","gov.sb","net.sb","org.sb","sc","com.sc","edu.sc","gov.sc","net.sc","org.sc","sd","com.sd","edu.sd","gov.sd","info.sd","med.sd","net.sd","org.sd","tv.sd","se","a.se","ac.se","b.se","bd.se","brand.se","c.se","d.se","e.se","f.se","fh.se","fhsk.se","fhv.se","g.se","h.se","i.se","k.se","komforb.se","kommunalforbund.se","komvux.se","l.se","lanbib.se","m.se","n.se","naturbruksgymn.se","o.se","org.se","p.se","parti.se","pp.se","press.se","r.se","s.se","t.se","tm.se","u.se","w.se","x.se","y.se","z.se","sg","com.sg","edu.sg","gov.sg","net.sg","org.sg","sh","com.sh","gov.sh","mil.sh","net.sh","org.sh","si","sj","sk","sl","com.sl","edu.sl","gov.sl","net.sl","org.sl","sm","sn","art.sn","com.sn","edu.sn","gouv.sn","org.sn","perso.sn","univ.sn","so","com.so","edu.so","gov.so","me.so","net.so","org.so","sr","ss","biz.ss","co.ss","com.ss","edu.ss","gov.ss","me.ss","net.ss","org.ss","sch.ss","st","co.st","com.st","consulado.st","edu.st","embaixada.st","mil.st","net.st","org.st","principe.st","saotome.st","store.st","su","sv","com.sv","edu.sv","gob.sv","org.sv","red.sv","sx","gov.sx","sy","com.sy","edu.sy","gov.sy","mil.sy","net.sy","org.sy","sz","ac.sz","co.sz","org.sz","tc","td","tel","tf","tg","th","ac.th","co.th","go.th","in.th","mi.th","net.th","or.th","tj","ac.tj","biz.tj","co.tj","com.tj","edu.tj","go.tj","gov.tj","int.tj","mil.tj","name.tj","net.tj","nic.tj","org.tj","test.tj","web.tj","tk","tl","gov.tl","tm","co.tm","com.tm","edu.tm","gov.tm","mil.tm","net.tm","nom.tm","org.tm","tn","com.tn","ens.tn","fin.tn","gov.tn","ind.tn","info.tn","intl.tn","mincom.tn","nat.tn","net.tn","org.tn","perso.tn","tourism.tn","to","com.to","edu.to","gov.to","mil.to","net.to","org.to","tr","av.tr","bbs.tr","bel.tr","biz.tr","com.tr","dr.tr","edu.tr","gen.tr","gov.tr","info.tr","k12.tr","kep.tr","mil.tr","name.tr","net.tr","org.tr","pol.tr","tel.tr","tsk.tr","tv.tr","web.tr","nc.tr","gov.nc.tr","tt","biz.tt","co.tt","com.tt","edu.tt","gov.tt","info.tt","mil.tt","name.tt","net.tt","org.tt","pro.tt","tv","tw","club.tw","com.tw","ebiz.tw","edu.tw","game.tw","gov.tw","idv.tw","mil.tw","net.tw","org.tw","tz","ac.tz","co.tz","go.tz","hotel.tz","info.tz","me.tz","mil.tz","mobi.tz","ne.tz","or.tz","sc.tz","tv.tz","ua","com.ua","edu.ua","gov.ua","in.ua","net.ua","org.ua","cherkassy.ua","cherkasy.ua","chernigov.ua","chernihiv.ua","chernivtsi.ua","chernovtsy.ua","ck.ua","cn.ua","cr.ua","crimea.ua","cv.ua","dn.ua","dnepropetrovsk.ua","dnipropetrovsk.ua","donetsk.ua","dp.ua","if.ua","ivano-frankivsk.ua","kh.ua","kharkiv.ua","kharkov.ua","kherson.ua","khmelnitskiy.ua","khmelnytskyi.ua","kiev.ua","kirovograd.ua","km.ua","kr.ua","kropyvnytskyi.ua","krym.ua","ks.ua","kv.ua","kyiv.ua","lg.ua","lt.ua","lugansk.ua","luhansk.ua","lutsk.ua","lv.ua","lviv.ua","mk.ua","mykolaiv.ua","nikolaev.ua","od.ua","odesa.ua","odessa.ua","pl.ua","poltava.ua","rivne.ua","rovno.ua","rv.ua","sb.ua","sebastopol.ua","sevastopol.ua","sm.ua","sumy.ua","te.ua","ternopil.ua","uz.ua","uzhgorod.ua","uzhhorod.ua","vinnica.ua","vinnytsia.ua","vn.ua","volyn.ua","yalta.ua","zakarpattia.ua","zaporizhzhe.ua","zaporizhzhia.ua","zhitomir.ua","zhytomyr.ua","zp.ua","zt.ua","ug","ac.ug","co.ug","com.ug","go.ug","ne.ug","or.ug","org.ug","sc.ug","uk","ac.uk","co.uk","gov.uk","ltd.uk","me.uk","net.uk","nhs.uk","org.uk","plc.uk","police.uk","*.sch.uk","us","dni.us","fed.us","isa.us","kids.us","nsn.us","ak.us","al.us","ar.us","as.us","az.us","ca.us","co.us","ct.us","dc.us","de.us","fl.us","ga.us","gu.us","hi.us","ia.us","id.us","il.us","in.us","ks.us","ky.us","la.us","ma.us","md.us","me.us","mi.us","mn.us","mo.us","ms.us","mt.us","nc.us","nd.us","ne.us","nh.us","nj.us","nm.us","nv.us","ny.us","oh.us","ok.us","or.us","pa.us","pr.us","ri.us","sc.us","sd.us","tn.us","tx.us","ut.us","va.us","vi.us","vt.us","wa.us","wi.us","wv.us","wy.us","k12.ak.us","k12.al.us","k12.ar.us","k12.as.us","k12.az.us","k12.ca.us","k12.co.us","k12.ct.us","k12.dc.us","k12.fl.us","k12.ga.us","k12.gu.us","k12.ia.us","k12.id.us","k12.il.us","k12.in.us","k12.ks.us","k12.ky.us","k12.la.us","k12.ma.us","k12.md.us","k12.me.us","k12.mi.us","k12.mn.us","k12.mo.us","k12.ms.us","k12.mt.us","k12.nc.us","k12.ne.us","k12.nh.us","k12.nj.us","k12.nm.us","k12.nv.us","k12.ny.us","k12.oh.us","k12.ok.us","k12.or.us","k12.pa.us","k12.pr.us","k12.sc.us","k12.tn.us","k12.tx.us","k12.ut.us","k12.va.us","k12.vi.us","k12.vt.us","k12.wa.us","k12.wi.us","cc.ak.us","lib.ak.us","cc.al.us","lib.al.us","cc.ar.us","lib.ar.us","cc.as.us","lib.as.us","cc.az.us","lib.az.us","cc.ca.us","lib.ca.us","cc.co.us","lib.co.us","cc.ct.us","lib.ct.us","cc.dc.us","lib.dc.us","cc.de.us","cc.fl.us","cc.ga.us","cc.gu.us","cc.hi.us","cc.ia.us","cc.id.us","cc.il.us","cc.in.us","cc.ks.us","cc.ky.us","cc.la.us","cc.ma.us","cc.md.us","cc.me.us","cc.mi.us","cc.mn.us","cc.mo.us","cc.ms.us","cc.mt.us","cc.nc.us","cc.nd.us","cc.ne.us","cc.nh.us","cc.nj.us","cc.nm.us","cc.nv.us","cc.ny.us","cc.oh.us","cc.ok.us","cc.or.us","cc.pa.us","cc.pr.us","cc.ri.us","cc.sc.us","cc.sd.us","cc.tn.us","cc.tx.us","cc.ut.us","cc.va.us","cc.vi.us","cc.vt.us","cc.wa.us","cc.wi.us","cc.wv.us","cc.wy.us","k12.wy.us","lib.fl.us","lib.ga.us","lib.gu.us","lib.hi.us","lib.ia.us","lib.id.us","lib.il.us","lib.in.us","lib.ks.us","lib.ky.us","lib.la.us","lib.ma.us","lib.md.us","lib.me.us","lib.mi.us","lib.mn.us","lib.mo.us","lib.ms.us","lib.mt.us","lib.nc.us","lib.nd.us","lib.ne.us","lib.nh.us","lib.nj.us","lib.nm.us","lib.nv.us","lib.ny.us","lib.oh.us","lib.ok.us","lib.or.us","lib.pa.us","lib.pr.us","lib.ri.us","lib.sc.us","lib.sd.us","lib.tn.us","lib.tx.us","lib.ut.us","lib.va.us","lib.vi.us","lib.vt.us","lib.wa.us","lib.wi.us","lib.wy.us","chtr.k12.ma.us","paroch.k12.ma.us","pvt.k12.ma.us","ann-arbor.mi.us","cog.mi.us","dst.mi.us","eaton.mi.us","gen.mi.us","mus.mi.us","tec.mi.us","washtenaw.mi.us","uy","com.uy","edu.uy","gub.uy","mil.uy","net.uy","org.uy","uz","co.uz","com.uz","net.uz","org.uz","va","vc","com.vc","edu.vc","gov.vc","mil.vc","net.vc","org.vc","ve","arts.ve","bib.ve","co.ve","com.ve","e12.ve","edu.ve","firm.ve","gob.ve","gov.ve","info.ve","int.ve","mil.ve","net.ve","nom.ve","org.ve","rar.ve","rec.ve","store.ve","tec.ve","web.ve","vg","vi","co.vi","com.vi","k12.vi","net.vi","org.vi","vn","ac.vn","ai.vn","biz.vn","com.vn","edu.vn","gov.vn","health.vn","id.vn","info.vn","int.vn","io.vn","name.vn","net.vn","org.vn","pro.vn","angiang.vn","bacgiang.vn","backan.vn","baclieu.vn","bacninh.vn","baria-vungtau.vn","bentre.vn","binhdinh.vn","binhduong.vn","binhphuoc.vn","binhthuan.vn","camau.vn","cantho.vn","caobang.vn","daklak.vn","daknong.vn","danang.vn","dienbien.vn","dongnai.vn","dongthap.vn","gialai.vn","hagiang.vn","haiduong.vn","haiphong.vn","hanam.vn","hanoi.vn","hatinh.vn","haugiang.vn","hoabinh.vn","hungyen.vn","khanhhoa.vn","kiengiang.vn","kontum.vn","laichau.vn","lamdong.vn","langson.vn","laocai.vn","longan.vn","namdinh.vn","nghean.vn","ninhbinh.vn","ninhthuan.vn","phutho.vn","phuyen.vn","quangbinh.vn","quangnam.vn","quangngai.vn","quangninh.vn","quangtri.vn","soctrang.vn","sonla.vn","tayninh.vn","thaibinh.vn","thainguyen.vn","thanhhoa.vn","thanhphohochiminh.vn","thuathienhue.vn","tiengiang.vn","travinh.vn","tuyenquang.vn","vinhlong.vn","vinhphuc.vn","yenbai.vn","vu","com.vu","edu.vu","net.vu","org.vu","wf","ws","com.ws","edu.ws","gov.ws","net.ws","org.ws","yt","","","","","","","","","","","","","","","","",".",".",".",".",".",".","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",".",".",".",".",".",".","","","","","","","","","","","","",".",".",".",".",".",".","","","","","","","xxx","ye","com.ye","edu.ye","gov.ye","mil.ye","net.ye","org.ye","ac.za","agric.za","alt.za","co.za","edu.za","gov.za","grondar.za","law.za","mil.za","net.za","ngo.za","nic.za","nis.za","nom.za","org.za","school.za","tm.za","web.za","zm","ac.zm","biz.zm","co.zm","com.zm","edu.zm","gov.zm","info.zm","mil.zm","net.zm","org.zm","sch.zm","zw","ac.zw","co.zw","gov.zw","mil.zw","org.zw","aaa","aarp","abb","abbott","abbvie","abc","able","abogado","abudhabi","academy","accenture","accountant","accountants","aco","actor","ads","adult","aeg","aetna","afl","africa","agakhan","agency","aig","airbus","airforce","airtel","akdn","alibaba","alipay","allfinanz","allstate","ally","alsace","alstom","amazon","americanexpress","americanfamily","amex","amfam","amica","amsterdam","analytics","android","anquan","anz","aol","apartments","app","apple","aquarelle","arab","aramco","archi","army","art","arte","asda","associates","athleta","attorney","auction","audi","audible","audio","auspost","author","auto","autos","aws","axa","azure","baby","baidu","banamex","band","bank","bar","barcelona","barclaycard","barclays","barefoot","bargains","baseball","basketball","bauhaus","bayern","bbc","bbt","bbva","bcg","bcn","beats","beauty","beer","bentley","berlin","best","bestbuy","bet","bharti","bible","bid","bike","bing","bingo","bio","black","blackfriday","blockbuster","blog","bloomberg","blue","bms","bmw","bnpparibas","boats","boehringer","bofa","bom","bond","boo","book","booking","bosch","bostik","boston","bot","boutique","box","bradesco","bridgestone","broadway","broker","brother","brussels","build","builders","business","buy","buzz","bzh","cab","cafe","cal","call","calvinklein","cam","camera","camp","canon","capetown","capital","capitalone","car","caravan","cards","care","career","careers","cars","casa","case","cash","casino","catering","catholic","cba","cbn","cbre","center","ceo","cern","cfa","cfd","chanel","channel","charity","chase","chat","cheap","chintai","christmas","chrome","church","cipriani","circle","cisco","citadel","citi","citic","city","claims","cleaning","click","clinic","clinique","clothing","cloud","club","clubmed","coach","codes","coffee","college","cologne","commbank","community","company","compare","computer","comsec","condos","construction","consulting","contact","contractors","cooking","cool","corsica","country","coupon","coupons","courses","cpa","credit","creditcard","creditunion","cricket","crown","crs","cruise","cruises","cuisinella","cymru","cyou","dad","dance","data","date","dating","datsun","day","dclk","dds","deal","dealer","deals","degree","delivery","dell","deloitte","delta","democrat","dental","dentist","desi","design","dev","dhl","diamonds","diet","digital","direct","directory","discount","discover","dish","diy","dnp","docs","doctor","dog","domains","dot","download","drive","dtv","dubai","dunlop","dupont","durban","dvag","dvr","earth","eat","eco","edeka","education","email","emerck","energy","engineer","engineering","enterprises","epson","equipment","ericsson","erni","esq","estate","eurovision","eus","events","exchange","expert","exposed","express","extraspace","fage","fail","fairwinds","faith","family","fan","fans","farm","farmers","fashion","fast","fedex","feedback","ferrari","ferrero","fidelity","fido","film","final","finance","financial","fire","firestone","firmdale","fish","fishing","fit","fitness","flickr","flights","flir","florist","flowers","fly","foo","food","football","ford","forex","forsale","forum","foundation","fox","free","fresenius","frl","frogans","frontier","ftr","fujitsu","fun","fund","furniture","futbol","fyi","gal","gallery","gallo","gallup","game","games","gap","garden","gay","gbiz","gdn","gea","gent","genting","george","ggee","gift","gifts","gives","giving","glass","gle","global","globo","gmail","gmbh","gmo","gmx","godaddy","gold","goldpoint","golf","goo","goodyear","goog","google","gop","got","grainger","graphics","gratis","green","gripe","grocery","group","gucci","guge","guide","guitars","guru","hair","hamburg","hangout","haus","hbo","hdfc","hdfcbank","health","healthcare","help","helsinki","here","hermes","hiphop","hisamitsu","hitachi","hiv","hkt","hockey","holdings","holiday","homedepot","homegoods","homes","homesense","honda","horse","hospital","host","hosting","hot","hotels","hotmail","house","how","hsbc","hughes","hyatt","hyundai","ibm","icbc","ice","icu","ieee","ifm","ikano","imamat","imdb","immo","immobilien","inc","industries","infiniti","ing","ink","institute","insurance","insure","international","intuit","investments","ipiranga","irish","ismaili","ist","istanbul","itau","itv","jaguar","java","jcb","jeep","jetzt","jewelry","jio","jll","jmp","jnj","joburg","jot","joy","jpmorgan","jprs","juegos","juniper","kaufen","kddi","kerryhotels","kerrylogistics","kerryproperties","kfh","kia","kids","kim","kindle","kitchen","kiwi","koeln","komatsu","kosher","kpmg","kpn","krd","kred","kuokgroup","kyoto","lacaixa","lamborghini","lamer","lancaster","land","landrover","lanxess","lasalle","lat","latino","latrobe","law","lawyer","lds","lease","leclerc","lefrak","legal","lego","lexus","lgbt","lidl","life","lifeinsurance","lifestyle","lighting","like","lilly","limited","limo","lincoln","link","lipsy","live","living","llc","llp","loan","loans","locker","locus","lol","london","lotte","lotto","love","lpl","lplfinancial","ltd","ltda","lundbeck","luxe","luxury","madrid","maif","maison","makeup","man","management","mango","map","market","marketing","markets","marriott","marshalls","mattel","mba","mckinsey","med","media","meet","melbourne","meme","memorial","men","menu","merck","merckmsd","miami","microsoft","mini","mint","mit","mitsubishi","mlb","mls","mma","mobile","moda","moe","moi","mom","monash","money","monster","mormon","mortgage","moscow","moto","motorcycles","mov","movie","msd","mtn","mtr","music","nab","nagoya","navy","nba","nec","netbank","netflix","network","neustar","new","news","next","nextdirect","nexus","nfl","ngo","nhk","nico","nike","nikon","ninja","nissan","nissay","nokia","norton","now","nowruz","nowtv","nra","nrw","ntt","nyc","obi","observer","office","okinawa","olayan","olayangroup","ollo","omega","one","ong","onl","online","ooo","open","oracle","orange","organic","origins","osaka","otsuka","ott","ovh","page","panasonic","paris","pars","partners","parts","party","pay","pccw","pet","pfizer","pharmacy","phd","philips","phone","photo","photography","photos","physio","pics","pictet","pictures","pid","pin","ping","pink","pioneer","pizza","place","play","playstation","plumbing","plus","pnc","pohl","poker","politie","porn","pramerica","praxi","press","prime","prod","productions","prof","progressive","promo","properties","property","protection","pru","prudential","pub","pwc","qpon","quebec","quest","racing","radio","read","realestate","realtor","realty","recipes","red","redstone","redumbrella","rehab","reise","reisen","reit","reliance","ren","rent","rentals","repair","report","republican","rest","restaurant","review","reviews","rexroth","rich","richardli","ricoh","ril","rio","rip","rocks","rodeo","rogers","room","rsvp","rugby","ruhr","run","rwe","ryukyu","saarland","safe","safety","sakura","sale","salon","samsclub","samsung","sandvik","sandvikcoromant","sanofi","sap","sarl","sas","save","saxo","sbi","sbs","scb","schaeffler","schmidt","scholarships","school","schule","schwarz","science","scot","search","seat","secure","security","seek","select","sener","services","seven","sew","sex","sexy","sfr","shangrila","sharp","shell","shia","shiksha","shoes","shop","shopping","shouji","show","silk","sina","singles","site","ski","skin","sky","skype","sling","smart","smile","sncf","soccer","social","softbank","software","sohu","solar","solutions","song","sony","soy","spa","space","sport","spot","srl","stada","staples","star","statebank","statefarm","stc","stcgroup","stockholm","storage","store","stream","studio","study","style","sucks","supplies","supply","support","surf","surgery","suzuki","swatch","swiss","sydney","systems","tab","taipei","talk","taobao","target","tatamotors","tatar","tattoo","tax","taxi","tci","tdk","team","tech","technology","temasek","tennis","teva","thd","theater","theatre","tiaa","tickets","tienda","tips","tires","tirol","tjmaxx","tjx","tkmaxx","tmall","today","tokyo","tools","top","toray","toshiba","total","tours","town","toyota","toys","trade","trading","training","travel","travelers","travelersinsurance","trust","trv","tube","tui","tunes","tushu","tvs","ubank","ubs","unicom","university","uno","uol","ups","vacations","vana","vanguard","vegas","ventures","verisign","versicherung","vet","viajes","video","vig","viking","villas","vin","vip","virgin","visa","vision","viva","vivo","vlaanderen","vodka","volvo","vote","voting","voto","voyage","wales","walmart","walter","wang","wanggou","watch","watches","weather","weatherchannel","webcam","weber","website","wed","wedding","weibo","weir","whoswho","wien","wiki","williamhill","win","windows","wine","winners","wme","wolterskluwer","woodside","work","works","world","wow","wtc","wtf","xbox","xerox","xihuan","xin","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","vermgensberater","vermgensberatung","","","","","","","xyz","yachts","yahoo","yamaxun","yandex","yodobashi","yoga","yokohama","you","youtube","yun","zappos","zara","zero","zip","zone","zuerich","co.krd","edu.krd","art.pl","gliwice.pl","krakow.pl","poznan.pl","wroc.pl","zakopane.pl","lib.de.us","12chars.dev","12chars.it","12chars.pro","cc.ua","inf.ua","ltd.ua","611.to","a2hosted.com","cpserver.com","aaa.vodka","*.on-acorn.io","activetrail.biz","adaptable.app","adobeaemcloud.com","*.dev.adobeaemcloud.com","aem.live","hlx.live","adobeaemcloud.net","aem.page","hlx.page","hlx3.page","adobeio-static.net","adobeioruntime.net","africa.com","beep.pl","airkitapps.com","airkitapps-au.com","airkitapps.eu","aivencloud.com","akadns.net","akamai.net","akamai-staging.net","akamaiedge.net","akamaiedge-staging.net","akamaihd.net","akamaihd-staging.net","akamaiorigin.net","akamaiorigin-staging.net","akamaized.net","akamaized-staging.net","edgekey.net","edgekey-staging.net","edgesuite.net","edgesuite-staging.net","barsy.ca","*.compute.estate","*.alces.network","kasserver.com","altervista.org","alwaysdata.net","myamaze.net","execute-api.cn-north-1.amazonaws.com.cn","execute-api.cn-northwest-1.amazonaws.com.cn","execute-api.af-south-1.amazonaws.com","execute-api.ap-east-1.amazonaws.com","execute-api.ap-northeast-1.amazonaws.com","execute-api.ap-northeast-2.amazonaws.com","execute-api.ap-northeast-3.amazonaws.com","execute-api.ap-south-1.amazonaws.com","execute-api.ap-south-2.amazonaws.com","execute-api.ap-southeast-1.amazonaws.com","execute-api.ap-southeast-2.amazonaws.com","execute-api.ap-southeast-3.amazonaws.com","execute-api.ap-southeast-4.amazonaws.com","execute-api.ap-southeast-5.amazonaws.com","execute-api.ca-central-1.amazonaws.com","execute-api.ca-west-1.amazonaws.com","execute-api.eu-central-1.amazonaws.com","execute-api.eu-central-2.amazonaws.com","execute-api.eu-north-1.amazonaws.com","execute-api.eu-south-1.amazonaws.com","execute-api.eu-south-2.amazonaws.com","execute-api.eu-west-1.amazonaws.com","execute-api.eu-west-2.amazonaws.com","execute-api.eu-west-3.amazonaws.com","execute-api.il-central-1.amazonaws.com","execute-api.me-central-1.amazonaws.com","execute-api.me-south-1.amazonaws.com","execute-api.sa-east-1.amazonaws.com","execute-api.us-east-1.amazonaws.com","execute-api.us-east-2.amazonaws.com","execute-api.us-gov-east-1.amazonaws.com","execute-api.us-gov-west-1.amazonaws.com","execute-api.us-west-1.amazonaws.com","execute-api.us-west-2.amazonaws.com","cloudfront.net","auth.af-south-1.amazoncognito.com","auth.ap-east-1.amazoncognito.com","auth.ap-northeast-1.amazoncognito.com","auth.ap-northeast-2.amazoncognito.com","auth.ap-northeast-3.amazoncognito.com","auth.ap-south-1.amazoncognito.com","auth.ap-south-2.amazoncognito.com","auth.ap-southeast-1.amazoncognito.com","auth.ap-southeast-2.amazoncognito.com","auth.ap-southeast-3.amazoncognito.com","auth.ap-southeast-4.amazoncognito.com","auth.ca-central-1.amazoncognito.com","auth.ca-west-1.amazoncognito.com","auth.eu-central-1.amazoncognito.com","auth.eu-central-2.amazoncognito.com","auth.eu-north-1.amazoncognito.com","auth.eu-south-1.amazoncognito.com","auth.eu-south-2.amazoncognito.com","auth.eu-west-1.amazoncognito.com","auth.eu-west-2.amazoncognito.com","auth.eu-west-3.amazoncognito.com","auth.il-central-1.amazoncognito.com","auth.me-central-1.amazoncognito.com","auth.me-south-1.amazoncognito.com","auth.sa-east-1.amazoncognito.com","auth.us-east-1.amazoncognito.com","auth-fips.us-east-1.amazoncognito.com","auth.us-east-2.amazoncognito.com","auth-fips.us-east-2.amazoncognito.com","auth-fips.us-gov-west-1.amazoncognito.com","auth.us-west-1.amazoncognito.com","auth-fips.us-west-1.amazoncognito.com","auth.us-west-2.amazoncognito.com","auth-fips.us-west-2.amazoncognito.com","*.compute.amazonaws.com.cn","*.compute.amazonaws.com","*.compute-1.amazonaws.com","us-east-1.amazonaws.com","emrappui-prod.cn-north-1.amazonaws.com.cn","emrnotebooks-prod.cn-north-1.amazonaws.com.cn","emrstudio-prod.cn-north-1.amazonaws.com.cn","emrappui-prod.cn-northwest-1.amazonaws.com.cn","emrnotebooks-prod.cn-northwest-1.amazonaws.com.cn","emrstudio-prod.cn-northwest-1.amazonaws.com.cn","emrappui-prod.af-south-1.amazonaws.com","emrnotebooks-prod.af-south-1.amazonaws.com","emrstudio-prod.af-south-1.amazonaws.com","emrappui-prod.ap-east-1.amazonaws.com","emrnotebooks-prod.ap-east-1.amazonaws.com","emrstudio-prod.ap-east-1.amazonaws.com","emrappui-prod.ap-northeast-1.amazonaws.com","emrnotebooks-prod.ap-northeast-1.amazonaws.com","emrstudio-prod.ap-northeast-1.amazonaws.com","emrappui-prod.ap-northeast-2.amazonaws.com","emrnotebooks-prod.ap-northeast-2.amazonaws.com","emrstudio-prod.ap-northeast-2.amazonaws.com","emrappui-prod.ap-northeast-3.amazonaws.com","emrnotebooks-prod.ap-northeast-3.amazonaws.com","emrstudio-prod.ap-northeast-3.amazonaws.com","emrappui-prod.ap-south-1.amazonaws.com","emrnotebooks-prod.ap-south-1.amazonaws.com","emrstudio-prod.ap-south-1.amazonaws.com","emrappui-prod.ap-south-2.amazonaws.com","emrnotebooks-prod.ap-south-2.amazonaws.com","emrstudio-prod.ap-south-2.amazonaws.com","emrappui-prod.ap-southeast-1.amazonaws.com","emrnotebooks-prod.ap-southeast-1.amazonaws.com","emrstudio-prod.ap-southeast-1.amazonaws.com","emrappui-prod.ap-southeast-2.amazonaws.com","emrnotebooks-prod.ap-southeast-2.amazonaws.com","emrstudio-prod.ap-southeast-2.amazonaws.com","emrappui-prod.ap-southeast-3.amazonaws.com","emrnotebooks-prod.ap-southeast-3.amazonaws.com","emrstudio-prod.ap-southeast-3.amazonaws.com","emrappui-prod.ap-southeast-4.amazonaws.com","emrnotebooks-prod.ap-southeast-4.amazonaws.com","emrstudio-prod.ap-southeast-4.amazonaws.com","emrappui-prod.ca-central-1.amazonaws.com","emrnotebooks-prod.ca-central-1.amazonaws.com","emrstudio-prod.ca-central-1.amazonaws.com","emrappui-prod.ca-west-1.amazonaws.com","emrnotebooks-prod.ca-west-1.amazonaws.com","emrstudio-prod.ca-west-1.amazonaws.com","emrappui-prod.eu-central-1.amazonaws.com","emrnotebooks-prod.eu-central-1.amazonaws.com","emrstudio-prod.eu-central-1.amazonaws.com","emrappui-prod.eu-central-2.amazonaws.com","emrnotebooks-prod.eu-central-2.amazonaws.com","emrstudio-prod.eu-central-2.amazonaws.com","emrappui-prod.eu-north-1.amazonaws.com","emrnotebooks-prod.eu-north-1.amazonaws.com","emrstudio-prod.eu-north-1.amazonaws.com","emrappui-prod.eu-south-1.amazonaws.com","emrnotebooks-prod.eu-south-1.amazonaws.com","emrstudio-prod.eu-south-1.amazonaws.com","emrappui-prod.eu-south-2.amazonaws.com","emrnotebooks-prod.eu-south-2.amazonaws.com","emrstudio-prod.eu-south-2.amazonaws.com","emrappui-prod.eu-west-1.amazonaws.com","emrnotebooks-prod.eu-west-1.amazonaws.com","emrstudio-prod.eu-west-1.amazonaws.com","emrappui-prod.eu-west-2.amazonaws.com","emrnotebooks-prod.eu-west-2.amazonaws.com","emrstudio-prod.eu-west-2.amazonaws.com","emrappui-prod.eu-west-3.amazonaws.com","emrnotebooks-prod.eu-west-3.amazonaws.com","emrstudio-prod.eu-west-3.amazonaws.com","emrappui-prod.il-central-1.amazonaws.com","emrnotebooks-prod.il-central-1.amazonaws.com","emrstudio-prod.il-central-1.amazonaws.com","emrappui-prod.me-central-1.amazonaws.com","emrnotebooks-prod.me-central-1.amazonaws.com","emrstudio-prod.me-central-1.amazonaws.com","emrappui-prod.me-south-1.amazonaws.com","emrnotebooks-prod.me-south-1.amazonaws.com","emrstudio-prod.me-south-1.amazonaws.com","emrappui-prod.sa-east-1.amazonaws.com","emrnotebooks-prod.sa-east-1.amazonaws.com","emrstudio-prod.sa-east-1.amazonaws.com","emrappui-prod.us-east-1.amazonaws.com","emrnotebooks-prod.us-east-1.amazonaws.com","emrstudio-prod.us-east-1.amazonaws.com","emrappui-prod.us-east-2.amazonaws.com","emrnotebooks-prod.us-east-2.amazonaws.com","emrstudio-prod.us-east-2.amazonaws.com","emrappui-prod.us-gov-east-1.amazonaws.com","emrnotebooks-prod.us-gov-east-1.amazonaws.com","emrstudio-prod.us-gov-east-1.amazonaws.com","emrappui-prod.us-gov-west-1.amazonaws.com","emrnotebooks-prod.us-gov-west-1.amazonaws.com","emrstudio-prod.us-gov-west-1.amazonaws.com","emrappui-prod.us-west-1.amazonaws.com","emrnotebooks-prod.us-west-1.amazonaws.com","emrstudio-prod.us-west-1.amazonaws.com","emrappui-prod.us-west-2.amazonaws.com","emrnotebooks-prod.us-west-2.amazonaws.com","emrstudio-prod.us-west-2.amazonaws.com","*.cn-north-1.airflow.amazonaws.com.cn","*.cn-northwest-1.airflow.amazonaws.com.cn","*.af-south-1.airflow.amazonaws.com","*.ap-east-1.airflow.amazonaws.com","*.ap-northeast-1.airflow.amazonaws.com","*.ap-northeast-2.airflow.amazonaws.com","*.ap-northeast-3.airflow.amazonaws.com","*.ap-south-1.airflow.amazonaws.com","*.ap-south-2.airflow.amazonaws.com","*.ap-southeast-1.airflow.amazonaws.com","*.ap-southeast-2.airflow.amazonaws.com","*.ap-southeast-3.airflow.amazonaws.com","*.ap-southeast-4.airflow.amazonaws.com","*.ca-central-1.airflow.amazonaws.com","*.ca-west-1.airflow.amazonaws.com","*.eu-central-1.airflow.amazonaws.com","*.eu-central-2.airflow.amazonaws.com","*.eu-north-1.airflow.amazonaws.com","*.eu-south-1.airflow.amazonaws.com","*.eu-south-2.airflow.amazonaws.com","*.eu-west-1.airflow.amazonaws.com","*.eu-west-2.airflow.amazonaws.com","*.eu-west-3.airflow.amazonaws.com","*.il-central-1.airflow.amazonaws.com","*.me-central-1.airflow.amazonaws.com","*.me-south-1.airflow.amazonaws.com","*.sa-east-1.airflow.amazonaws.com","*.us-east-1.airflow.amazonaws.com","*.us-east-2.airflow.amazonaws.com","*.us-west-1.airflow.amazonaws.com","*.us-west-2.airflow.amazonaws.com","s3.dualstack.cn-north-1.amazonaws.com.cn","s3-accesspoint.dualstack.cn-north-1.amazonaws.com.cn","s3-website.dualstack.cn-north-1.amazonaws.com.cn","s3.cn-north-1.amazonaws.com.cn","s3-accesspoint.cn-north-1.amazonaws.com.cn","s3-deprecated.cn-north-1.amazonaws.com.cn","s3-object-lambda.cn-north-1.amazonaws.com.cn","s3-website.cn-north-1.amazonaws.com.cn","s3.dualstack.cn-northwest-1.amazonaws.com.cn","s3-accesspoint.dualstack.cn-northwest-1.amazonaws.com.cn","s3.cn-northwest-1.amazonaws.com.cn","s3-accesspoint.cn-northwest-1.amazonaws.com.cn","s3-object-lambda.cn-northwest-1.amazonaws.com.cn","s3-website.cn-northwest-1.amazonaws.com.cn","s3.dualstack.af-south-1.amazonaws.com","s3-accesspoint.dualstack.af-south-1.amazonaws.com","s3-website.dualstack.af-south-1.amazonaws.com","s3.af-south-1.amazonaws.com","s3-accesspoint.af-south-1.amazonaws.com","s3-object-lambda.af-south-1.amazonaws.com","s3-website.af-south-1.amazonaws.com","s3.dualstack.ap-east-1.amazonaws.com","s3-accesspoint.dualstack.ap-east-1.amazonaws.com","s3.ap-east-1.amazonaws.com","s3-accesspoint.ap-east-1.amazonaws.com","s3-object-lambda.ap-east-1.amazonaws.com","s3-website.ap-east-1.amazonaws.com","s3.dualstack.ap-northeast-1.amazonaws.com","s3-accesspoint.dualstack.ap-northeast-1.amazonaws.com","s3-website.dualstack.ap-northeast-1.amazonaws.com","s3.ap-northeast-1.amazonaws.com","s3-accesspoint.ap-northeast-1.amazonaws.com","s3-object-lambda.ap-northeast-1.amazonaws.com","s3-website.ap-northeast-1.amazonaws.com","s3.dualstack.ap-northeast-2.amazonaws.com","s3-accesspoint.dualstack.ap-northeast-2.amazonaws.com","s3-website.dualstack.ap-northeast-2.amazonaws.com","s3.ap-northeast-2.amazonaws.com","s3-accesspoint.ap-northeast-2.amazonaws.com","s3-object-lambda.ap-northeast-2.amazonaws.com","s3-website.ap-northeast-2.amazonaws.com","s3.dualstack.ap-northeast-3.amazonaws.com","s3-accesspoint.dualstack.ap-northeast-3.amazonaws.com","s3-website.dualstack.ap-northeast-3.amazonaws.com","s3.ap-northeast-3.amazonaws.com","s3-accesspoint.ap-northeast-3.amazonaws.com","s3-object-lambda.ap-northeast-3.amazonaws.com","s3-website.ap-northeast-3.amazonaws.com","s3.dualstack.ap-south-1.amazonaws.com","s3-accesspoint.dualstack.ap-south-1.amazonaws.com","s3-website.dualstack.ap-south-1.amazonaws.com","s3.ap-south-1.amazonaws.com","s3-accesspoint.ap-south-1.amazonaws.com","s3-object-lambda.ap-south-1.amazonaws.com","s3-website.ap-south-1.amazonaws.com","s3.dualstack.ap-south-2.amazonaws.com","s3-accesspoint.dualstack.ap-south-2.amazonaws.com","s3-website.dualstack.ap-south-2.amazonaws.com","s3.ap-south-2.amazonaws.com","s3-accesspoint.ap-south-2.amazonaws.com","s3-object-lambda.ap-south-2.amazonaws.com","s3-website.ap-south-2.amazonaws.com","s3.dualstack.ap-southeast-1.amazonaws.com","s3-accesspoint.dualstack.ap-southeast-1.amazonaws.com","s3-website.dualstack.ap-southeast-1.amazonaws.com","s3.ap-southeast-1.amazonaws.com","s3-accesspoint.ap-southeast-1.amazonaws.com","s3-object-lambda.ap-southeast-1.amazonaws.com","s3-website.ap-southeast-1.amazonaws.com","s3.dualstack.ap-southeast-2.amazonaws.com","s3-accesspoint.dualstack.ap-southeast-2.amazonaws.com","s3-website.dualstack.ap-southeast-2.amazonaws.com","s3.ap-southeast-2.amazonaws.com","s3-accesspoint.ap-southeast-2.amazonaws.com","s3-object-lambda.ap-southeast-2.amazonaws.com","s3-website.ap-southeast-2.amazonaws.com","s3.dualstack.ap-southeast-3.amazonaws.com","s3-accesspoint.dualstack.ap-southeast-3.amazonaws.com","s3-website.dualstack.ap-southeast-3.amazonaws.com","s3.ap-southeast-3.amazonaws.com","s3-accesspoint.ap-southeast-3.amazonaws.com","s3-object-lambda.ap-southeast-3.amazonaws.com","s3-website.ap-southeast-3.amazonaws.com","s3.dualstack.ap-southeast-4.amazonaws.com","s3-accesspoint.dualstack.ap-southeast-4.amazonaws.com","s3-website.dualstack.ap-southeast-4.amazonaws.com","s3.ap-southeast-4.amazonaws.com","s3-accesspoint.ap-southeast-4.amazonaws.com","s3-object-lambda.ap-southeast-4.amazonaws.com","s3-website.ap-southeast-4.amazonaws.com","s3.dualstack.ap-southeast-5.amazonaws.com","s3-accesspoint.dualstack.ap-southeast-5.amazonaws.com","s3-website.dualstack.ap-southeast-5.amazonaws.com","s3.ap-southeast-5.amazonaws.com","s3-accesspoint.ap-southeast-5.amazonaws.com","s3-deprecated.ap-southeast-5.amazonaws.com","s3-object-lambda.ap-southeast-5.amazonaws.com","s3-website.ap-southeast-5.amazonaws.com","s3.dualstack.ca-central-1.amazonaws.com","s3-accesspoint.dualstack.ca-central-1.amazonaws.com","s3-accesspoint-fips.dualstack.ca-central-1.amazonaws.com","s3-fips.dualstack.ca-central-1.amazonaws.com","s3-website.dualstack.ca-central-1.amazonaws.com","s3.ca-central-1.amazonaws.com","s3-accesspoint.ca-central-1.amazonaws.com","s3-accesspoint-fips.ca-central-1.amazonaws.com","s3-fips.ca-central-1.amazonaws.com","s3-object-lambda.ca-central-1.amazonaws.com","s3-website.ca-central-1.amazonaws.com","s3.dualstack.ca-west-1.amazonaws.com","s3-accesspoint.dualstack.ca-west-1.amazonaws.com","s3-accesspoint-fips.dualstack.ca-west-1.amazonaws.com","s3-fips.dualstack.ca-west-1.amazonaws.com","s3-website.dualstack.ca-west-1.amazonaws.com","s3.ca-west-1.amazonaws.com","s3-accesspoint.ca-west-1.amazonaws.com","s3-accesspoint-fips.ca-west-1.amazonaws.com","s3-fips.ca-west-1.amazonaws.com","s3-object-lambda.ca-west-1.amazonaws.com","s3-website.ca-west-1.amazonaws.com","s3.dualstack.eu-central-1.amazonaws.com","s3-accesspoint.dualstack.eu-central-1.amazonaws.com","s3-website.dualstack.eu-central-1.amazonaws.com","s3.eu-central-1.amazonaws.com","s3-accesspoint.eu-central-1.amazonaws.com","s3-object-lambda.eu-central-1.amazonaws.com","s3-website.eu-central-1.amazonaws.com","s3.dualstack.eu-central-2.amazonaws.com","s3-accesspoint.dualstack.eu-central-2.amazonaws.com","s3-website.dualstack.eu-central-2.amazonaws.com","s3.eu-central-2.amazonaws.com","s3-accesspoint.eu-central-2.amazonaws.com","s3-object-lambda.eu-central-2.amazonaws.com","s3-website.eu-central-2.amazonaws.com","s3.dualstack.eu-north-1.amazonaws.com","s3-accesspoint.dualstack.eu-north-1.amazonaws.com","s3.eu-north-1.amazonaws.com","s3-accesspoint.eu-north-1.amazonaws.com","s3-object-lambda.eu-north-1.amazonaws.com","s3-website.eu-north-1.amazonaws.com","s3.dualstack.eu-south-1.amazonaws.com","s3-accesspoint.dualstack.eu-south-1.amazonaws.com","s3-website.dualstack.eu-south-1.amazonaws.com","s3.eu-south-1.amazonaws.com","s3-accesspoint.eu-south-1.amazonaws.com","s3-object-lambda.eu-south-1.amazonaws.com","s3-website.eu-south-1.amazonaws.com","s3.dualstack.eu-south-2.amazonaws.com","s3-accesspoint.dualstack.eu-south-2.amazonaws.com","s3-website.dualstack.eu-south-2.amazonaws.com","s3.eu-south-2.amazonaws.com","s3-accesspoint.eu-south-2.amazonaws.com","s3-object-lambda.eu-south-2.amazonaws.com","s3-website.eu-south-2.amazonaws.com","s3.dualstack.eu-west-1.amazonaws.com","s3-accesspoint.dualstack.eu-west-1.amazonaws.com","s3-website.dualstack.eu-west-1.amazonaws.com","s3.eu-west-1.amazonaws.com","s3-accesspoint.eu-west-1.amazonaws.com","s3-deprecated.eu-west-1.amazonaws.com","s3-object-lambda.eu-west-1.amazonaws.com","s3-website.eu-west-1.amazonaws.com","s3.dualstack.eu-west-2.amazonaws.com","s3-accesspoint.dualstack.eu-west-2.amazonaws.com","s3.eu-west-2.amazonaws.com","s3-accesspoint.eu-west-2.amazonaws.com","s3-object-lambda.eu-west-2.amazonaws.com","s3-website.eu-west-2.amazonaws.com","s3.dualstack.eu-west-3.amazonaws.com","s3-accesspoint.dualstack.eu-west-3.amazonaws.com","s3-website.dualstack.eu-west-3.amazonaws.com","s3.eu-west-3.amazonaws.com","s3-accesspoint.eu-west-3.amazonaws.com","s3-object-lambda.eu-west-3.amazonaws.com","s3-website.eu-west-3.amazonaws.com","s3.dualstack.il-central-1.amazonaws.com","s3-accesspoint.dualstack.il-central-1.amazonaws.com","s3-website.dualstack.il-central-1.amazonaws.com","s3.il-central-1.amazonaws.com","s3-accesspoint.il-central-1.amazonaws.com","s3-object-lambda.il-central-1.amazonaws.com","s3-website.il-central-1.amazonaws.com","s3.dualstack.me-central-1.amazonaws.com","s3-accesspoint.dualstack.me-central-1.amazonaws.com","s3-website.dualstack.me-central-1.amazonaws.com","s3.me-central-1.amazonaws.com","s3-accesspoint.me-central-1.amazonaws.com","s3-object-lambda.me-central-1.amazonaws.com","s3-website.me-central-1.amazonaws.com","s3.dualstack.me-south-1.amazonaws.com","s3-accesspoint.dualstack.me-south-1.amazonaws.com","s3.me-south-1.amazonaws.com","s3-accesspoint.me-south-1.amazonaws.com","s3-object-lambda.me-south-1.amazonaws.com","s3-website.me-south-1.amazonaws.com","s3.amazonaws.com","s3-1.amazonaws.com","s3-ap-east-1.amazonaws.com","s3-ap-northeast-1.amazonaws.com","s3-ap-northeast-2.amazonaws.com","s3-ap-northeast-3.amazonaws.com","s3-ap-south-1.amazonaws.com","s3-ap-southeast-1.amazonaws.com","s3-ap-southeast-2.amazonaws.com","s3-ca-central-1.amazonaws.com","s3-eu-central-1.amazonaws.com","s3-eu-north-1.amazonaws.com","s3-eu-west-1.amazonaws.com","s3-eu-west-2.amazonaws.com","s3-eu-west-3.amazonaws.com","s3-external-1.amazonaws.com","s3-fips-us-gov-east-1.amazonaws.com","s3-fips-us-gov-west-1.amazonaws.com","mrap.accesspoint.s3-global.amazonaws.com","s3-me-south-1.amazonaws.com","s3-sa-east-1.amazonaws.com","s3-us-east-2.amazonaws.com","s3-us-gov-east-1.amazonaws.com","s3-us-gov-west-1.amazonaws.com","s3-us-west-1.amazonaws.com","s3-us-west-2.amazonaws.com","s3-website-ap-northeast-1.amazonaws.com","s3-website-ap-southeast-1.amazonaws.com","s3-website-ap-southeast-2.amazonaws.com","s3-website-eu-west-1.amazonaws.com","s3-website-sa-east-1.amazonaws.com","s3-website-us-east-1.amazonaws.com","s3-website-us-gov-west-1.amazonaws.com","s3-website-us-west-1.amazonaws.com","s3-website-us-west-2.amazonaws.com","s3.dualstack.sa-east-1.amazonaws.com","s3-accesspoint.dualstack.sa-east-1.amazonaws.com","s3-website.dualstack.sa-east-1.amazonaws.com","s3.sa-east-1.amazonaws.com","s3-accesspoint.sa-east-1.amazonaws.com","s3-object-lambda.sa-east-1.amazonaws.com","s3-website.sa-east-1.amazonaws.com","s3.dualstack.us-east-1.amazonaws.com","s3-accesspoint.dualstack.us-east-1.amazonaws.com","s3-accesspoint-fips.dualstack.us-east-1.amazonaws.com","s3-fips.dualstack.us-east-1.amazonaws.com","s3-website.dualstack.us-east-1.amazonaws.com","s3.us-east-1.amazonaws.com","s3-accesspoint.us-east-1.amazonaws.com","s3-accesspoint-fips.us-east-1.amazonaws.com","s3-deprecated.us-east-1.amazonaws.com","s3-fips.us-east-1.amazonaws.com","s3-object-lambda.us-east-1.amazonaws.com","s3-website.us-east-1.amazonaws.com","s3.dualstack.us-east-2.amazonaws.com","s3-accesspoint.dualstack.us-east-2.amazonaws.com","s3-accesspoint-fips.dualstack.us-east-2.amazonaws.com","s3-fips.dualstack.us-east-2.amazonaws.com","s3-website.dualstack.us-east-2.amazonaws.com","s3.us-east-2.amazonaws.com","s3-accesspoint.us-east-2.amazonaws.com","s3-accesspoint-fips.us-east-2.amazonaws.com","s3-deprecated.us-east-2.amazonaws.com","s3-fips.us-east-2.amazonaws.com","s3-object-lambda.us-east-2.amazonaws.com","s3-website.us-east-2.amazonaws.com","s3.dualstack.us-gov-east-1.amazonaws.com","s3-accesspoint.dualstack.us-gov-east-1.amazonaws.com","s3-accesspoint-fips.dualstack.us-gov-east-1.amazonaws.com","s3-fips.dualstack.us-gov-east-1.amazonaws.com","s3.us-gov-east-1.amazonaws.com","s3-accesspoint.us-gov-east-1.amazonaws.com","s3-accesspoint-fips.us-gov-east-1.amazonaws.com","s3-fips.us-gov-east-1.amazonaws.com","s3-object-lambda.us-gov-east-1.amazonaws.com","s3-website.us-gov-east-1.amazonaws.com","s3.dualstack.us-gov-west-1.amazonaws.com","s3-accesspoint.dualstack.us-gov-west-1.amazonaws.com","s3-accesspoint-fips.dualstack.us-gov-west-1.amazonaws.com","s3-fips.dualstack.us-gov-west-1.amazonaws.com","s3.us-gov-west-1.amazonaws.com","s3-accesspoint.us-gov-west-1.amazonaws.com","s3-accesspoint-fips.us-gov-west-1.amazonaws.com","s3-fips.us-gov-west-1.amazonaws.com","s3-object-lambda.us-gov-west-1.amazonaws.com","s3-website.us-gov-west-1.amazonaws.com","s3.dualstack.us-west-1.amazonaws.com","s3-accesspoint.dualstack.us-west-1.amazonaws.com","s3-accesspoint-fips.dualstack.us-west-1.amazonaws.com","s3-fips.dualstack.us-west-1.amazonaws.com","s3-website.dualstack.us-west-1.amazonaws.com","s3.us-west-1.amazonaws.com","s3-accesspoint.us-west-1.amazonaws.com","s3-accesspoint-fips.us-west-1.amazonaws.com","s3-fips.us-west-1.amazonaws.com","s3-object-lambda.us-west-1.amazonaws.com","s3-website.us-west-1.amazonaws.com","s3.dualstack.us-west-2.amazonaws.com","s3-accesspoint.dualstack.us-west-2.amazonaws.com","s3-accesspoint-fips.dualstack.us-west-2.amazonaws.com","s3-fips.dualstack.us-west-2.amazonaws.com","s3-website.dualstack.us-west-2.amazonaws.com","s3.us-west-2.amazonaws.com","s3-accesspoint.us-west-2.amazonaws.com","s3-accesspoint-fips.us-west-2.amazonaws.com","s3-deprecated.us-west-2.amazonaws.com","s3-fips.us-west-2.amazonaws.com","s3-object-lambda.us-west-2.amazonaws.com","s3-website.us-west-2.amazonaws.com","labeling.ap-northeast-1.sagemaker.aws","labeling.ap-northeast-2.sagemaker.aws","labeling.ap-south-1.sagemaker.aws","labeling.ap-southeast-1.sagemaker.aws","labeling.ap-southeast-2.sagemaker.aws","labeling.ca-central-1.sagemaker.aws","labeling.eu-central-1.sagemaker.aws","labeling.eu-west-1.sagemaker.aws","labeling.eu-west-2.sagemaker.aws","labeling.us-east-1.sagemaker.aws","labeling.us-east-2.sagemaker.aws","labeling.us-west-2.sagemaker.aws","notebook.af-south-1.sagemaker.aws","notebook.ap-east-1.sagemaker.aws","notebook.ap-northeast-1.sagemaker.aws","notebook.ap-northeast-2.sagemaker.aws","notebook.ap-northeast-3.sagemaker.aws","notebook.ap-south-1.sagemaker.aws","notebook.ap-south-2.sagemaker.aws","notebook.ap-southeast-1.sagemaker.aws","notebook.ap-southeast-2.sagemaker.aws","notebook.ap-southeast-3.sagemaker.aws","notebook.ap-southeast-4.sagemaker.aws","notebook.ca-central-1.sagemaker.aws","notebook-fips.ca-central-1.sagemaker.aws","notebook.ca-west-1.sagemaker.aws","notebook-fips.ca-west-1.sagemaker.aws","notebook.eu-central-1.sagemaker.aws","notebook.eu-central-2.sagemaker.aws","notebook.eu-north-1.sagemaker.aws","notebook.eu-south-1.sagemaker.aws","notebook.eu-south-2.sagemaker.aws","notebook.eu-west-1.sagemaker.aws","notebook.eu-west-2.sagemaker.aws","notebook.eu-west-3.sagemaker.aws","notebook.il-central-1.sagemaker.aws","notebook.me-central-1.sagemaker.aws","notebook.me-south-1.sagemaker.aws","notebook.sa-east-1.sagemaker.aws","notebook.us-east-1.sagemaker.aws","notebook-fips.us-east-1.sagemaker.aws","notebook.us-east-2.sagemaker.aws","notebook-fips.us-east-2.sagemaker.aws","notebook.us-gov-east-1.sagemaker.aws","notebook-fips.us-gov-east-1.sagemaker.aws","notebook.us-gov-west-1.sagemaker.aws","notebook-fips.us-gov-west-1.sagemaker.aws","notebook.us-west-1.sagemaker.aws","notebook-fips.us-west-1.sagemaker.aws","notebook.us-west-2.sagemaker.aws","notebook-fips.us-west-2.sagemaker.aws","notebook.cn-north-1.sagemaker.com.cn","notebook.cn-northwest-1.sagemaker.com.cn","studio.af-south-1.sagemaker.aws","studio.ap-east-1.sagemaker.aws","studio.ap-northeast-1.sagemaker.aws","studio.ap-northeast-2.sagemaker.aws","studio.ap-northeast-3.sagemaker.aws","studio.ap-south-1.sagemaker.aws","studio.ap-southeast-1.sagemaker.aws","studio.ap-southeast-2.sagemaker.aws","studio.ap-southeast-3.sagemaker.aws","studio.ca-central-1.sagemaker.aws","studio.eu-central-1.sagemaker.aws","studio.eu-north-1.sagemaker.aws","studio.eu-south-1.sagemaker.aws","studio.eu-south-2.sagemaker.aws","studio.eu-west-1.sagemaker.aws","studio.eu-west-2.sagemaker.aws","studio.eu-west-3.sagemaker.aws","studio.il-central-1.sagemaker.aws","studio.me-central-1.sagemaker.aws","studio.me-south-1.sagemaker.aws","studio.sa-east-1.sagemaker.aws","studio.us-east-1.sagemaker.aws","studio.us-east-2.sagemaker.aws","studio.us-gov-east-1.sagemaker.aws","studio-fips.us-gov-east-1.sagemaker.aws","studio.us-gov-west-1.sagemaker.aws","studio-fips.us-gov-west-1.sagemaker.aws","studio.us-west-1.sagemaker.aws","studio.us-west-2.sagemaker.aws","studio.cn-north-1.sagemaker.com.cn","studio.cn-northwest-1.sagemaker.com.cn","*.experiments.sagemaker.aws","analytics-gateway.ap-northeast-1.amazonaws.com","analytics-gateway.ap-northeast-2.amazonaws.com","analytics-gateway.ap-south-1.amazonaws.com","analytics-gateway.ap-southeast-1.amazonaws.com","analytics-gateway.ap-southeast-2.amazonaws.com","analytics-gateway.eu-central-1.amazonaws.com","analytics-gateway.eu-west-1.amazonaws.com","analytics-gateway.us-east-1.amazonaws.com","analytics-gateway.us-east-2.amazonaws.com","analytics-gateway.us-west-2.amazonaws.com","amplifyapp.com","*.awsapprunner.com","webview-assets.aws-cloud9.af-south-1.amazonaws.com","vfs.cloud9.af-south-1.amazonaws.com","webview-assets.cloud9.af-south-1.amazonaws.com","webview-assets.aws-cloud9.ap-east-1.amazonaws.com","vfs.cloud9.ap-east-1.amazonaws.com","webview-assets.cloud9.ap-east-1.amazonaws.com","webview-assets.aws-cloud9.ap-northeast-1.amazonaws.com","vfs.cloud9.ap-northeast-1.amazonaws.com","webview-assets.cloud9.ap-northeast-1.amazonaws.com","webview-assets.aws-cloud9.ap-northeast-2.amazonaws.com","vfs.cloud9.ap-northeast-2.amazonaws.com","webview-assets.cloud9.ap-northeast-2.amazonaws.com","webview-assets.aws-cloud9.ap-northeast-3.amazonaws.com","vfs.cloud9.ap-northeast-3.amazonaws.com","webview-assets.cloud9.ap-northeast-3.amazonaws.com","webview-assets.aws-cloud9.ap-south-1.amazonaws.com","vfs.cloud9.ap-south-1.amazonaws.com","webview-assets.cloud9.ap-south-1.amazonaws.com","webview-assets.aws-cloud9.ap-southeast-1.amazonaws.com","vfs.cloud9.ap-southeast-1.amazonaws.com","webview-assets.cloud9.ap-southeast-1.amazonaws.com","webview-assets.aws-cloud9.ap-southeast-2.amazonaws.com","vfs.cloud9.ap-southeast-2.amazonaws.com","webview-assets.cloud9.ap-southeast-2.amazonaws.com","webview-assets.aws-cloud9.ca-central-1.amazonaws.com","vfs.cloud9.ca-central-1.amazonaws.com","webview-assets.cloud9.ca-central-1.amazonaws.com","webview-assets.aws-cloud9.eu-central-1.amazonaws.com","vfs.cloud9.eu-central-1.amazonaws.com","webview-assets.cloud9.eu-central-1.amazonaws.com","webview-assets.aws-cloud9.eu-north-1.amazonaws.com","vfs.cloud9.eu-north-1.amazonaws.com","webview-assets.cloud9.eu-north-1.amazonaws.com","webview-assets.aws-cloud9.eu-south-1.amazonaws.com","vfs.cloud9.eu-south-1.amazonaws.com","webview-assets.cloud9.eu-south-1.amazonaws.com","webview-assets.aws-cloud9.eu-west-1.amazonaws.com","vfs.cloud9.eu-west-1.amazonaws.com","webview-assets.cloud9.eu-west-1.amazonaws.com","webview-assets.aws-cloud9.eu-west-2.amazonaws.com","vfs.cloud9.eu-west-2.amazonaws.com","webview-assets.cloud9.eu-west-2.amazonaws.com","webview-assets.aws-cloud9.eu-west-3.amazonaws.com","vfs.cloud9.eu-west-3.amazonaws.com","webview-assets.cloud9.eu-west-3.amazonaws.com","webview-assets.aws-cloud9.il-central-1.amazonaws.com","vfs.cloud9.il-central-1.amazonaws.com","webview-assets.aws-cloud9.me-south-1.amazonaws.com","vfs.cloud9.me-south-1.amazonaws.com","webview-assets.cloud9.me-south-1.amazonaws.com","webview-assets.aws-cloud9.sa-east-1.amazonaws.com","vfs.cloud9.sa-east-1.amazonaws.com","webview-assets.cloud9.sa-east-1.amazonaws.com","webview-assets.aws-cloud9.us-east-1.amazonaws.com","vfs.cloud9.us-east-1.amazonaws.com","webview-assets.cloud9.us-east-1.amazonaws.com","webview-assets.aws-cloud9.us-east-2.amazonaws.com","vfs.cloud9.us-east-2.amazonaws.com","webview-assets.cloud9.us-east-2.amazonaws.com","webview-assets.aws-cloud9.us-west-1.amazonaws.com","vfs.cloud9.us-west-1.amazonaws.com","webview-assets.cloud9.us-west-1.amazonaws.com","webview-assets.aws-cloud9.us-west-2.amazonaws.com","vfs.cloud9.us-west-2.amazonaws.com","webview-assets.cloud9.us-west-2.amazonaws.com","awsapps.com","cn-north-1.eb.amazonaws.com.cn","cn-northwest-1.eb.amazonaws.com.cn","elasticbeanstalk.com","af-south-1.elasticbeanstalk.com","ap-east-1.elasticbeanstalk.com","ap-northeast-1.elasticbeanstalk.com","ap-northeast-2.elasticbeanstalk.com","ap-northeast-3.elasticbeanstalk.com","ap-south-1.elasticbeanstalk.com","ap-southeast-1.elasticbeanstalk.com","ap-southeast-2.elasticbeanstalk.com","ap-southeast-3.elasticbeanstalk.com","ca-central-1.elasticbeanstalk.com","eu-central-1.elasticbeanstalk.com","eu-north-1.elasticbeanstalk.com","eu-south-1.elasticbeanstalk.com","eu-west-1.elasticbeanstalk.com","eu-west-2.elasticbeanstalk.com","eu-west-3.elasticbeanstalk.com","il-central-1.elasticbeanstalk.com","me-south-1.elasticbeanstalk.com","sa-east-1.elasticbeanstalk.com","us-east-1.elasticbeanstalk.com","us-east-2.elasticbeanstalk.com","us-gov-east-1.elasticbeanstalk.com","us-gov-west-1.elasticbeanstalk.com","us-west-1.elasticbeanstalk.com","us-west-2.elasticbeanstalk.com","*.elb.amazonaws.com.cn","*.elb.amazonaws.com","awsglobalaccelerator.com","*.private.repost.aws","eero.online","eero-stage.online","apigee.io","panel.dev","siiites.com","appspacehosted.com","appspaceusercontent.com","appudo.net","on-aptible.com","f5.si","arvanedge.ir","user.aseinet.ne.jp","gv.vc","d.gv.vc","user.party.eus","pimienta.org","poivron.org","potager.org","sweetpepper.org","myasustor.com","cdn.prod.atlassian-dev.net","translated.page","myfritz.link","myfritz.net","onavstack.net","*.awdev.ca","*.advisor.ws","ecommerce-shop.pl","b-data.io","balena-devices.com","base.ec","official.ec","buyshop.jp","fashionstore.jp","handcrafted.jp","kawaiishop.jp","supersale.jp","theshop.jp","shopselect.net","base.shop","beagleboard.io","*.beget.app","pages.gay","bnr.la","bitbucket.io","blackbaudcdn.net","of.je","bluebite.io","boomla.net","boutir.com","boxfuse.io","square7.ch","bplaced.com","bplaced.de","square7.de","bplaced.net","square7.net","*.s.brave.io","shop.brendly.hr","shop.brendly.rs","browsersafetymark.io","radio.am","radio.fm","uk0.bigv.io","dh.bytemark.co.uk","vm.bytemark.co.uk","cafjs.com","canva-apps.cn","*.my.canvasite.cn","canva-apps.com","*.my.canva.site","drr.ac","uwu.ai","carrd.co","crd.co","ju.mp","api.gov.uk","cdn77-storage.com","rsc.contentproxy9.cz","r.cdn77.net","cdn77-ssl.net","c.cdn77.org","rsc.cdn77.org","ssl.origin.cdn77-secure.org","za.bz","br.com","cn.com","de.com","eu.com","jpn.com","mex.com","ru.com","sa.com","uk.com","us.com","za.com","com.de","gb.net","hu.net","jp.net","se.net","uk.net","ae.org","com.se","cx.ua","discourse.group","discourse.team","clerk.app","clerkstage.app","*.lcl.dev","*.lclstage.dev","*.stg.dev","*.stgstage.dev","cleverapps.cc","*.services.clever-cloud.com","cleverapps.io","cleverapps.tech","clickrising.net","cloudns.asia","cloudns.be","cloud-ip.biz","cloudns.biz","cloudns.cc","cloudns.ch","cloudns.cl","cloudns.club","dnsabr.com","ip-ddns.com","cloudns.cx","cloudns.eu","cloudns.in","cloudns.info","ddns-ip.net","dns-cloud.net","dns-dynamic.net","cloudns.nz","cloudns.org","ip-dynamic.org","cloudns.ph","cloudns.pro","cloudns.pw","cloudns.us","c66.me","cloud66.ws","cloud66.zone","jdevcloud.com","wpdevcloud.com","cloudaccess.host","freesite.host","cloudaccess.net","*.cloudera.site","cf-ipfs.com","cloudflare-ipfs.com","trycloudflare.com","pages.dev","r2.dev","workers.dev","cloudflare.net","cdn.cloudflare.net","cdn.cloudflareanycast.net","cdn.cloudflarecn.net","cdn.cloudflareglobal.net","cust.cloudscale.ch","objects.lpg.cloudscale.ch","objects.rma.cloudscale.ch","wnext.app","cnpy.gdn","*.otap.co","co.ca","co.com","codeberg.page","csb.app","preview.csb.app","co.nl","co.no","webhosting.be","hosting-cluster.nl","ctfcloud.net","convex.site","ac.ru","edu.ru","gov.ru","int.ru","mil.ru","test.ru","dyn.cosidns.de","dnsupdater.de","dynamisches-dns.de","internet-dns.de","l-o-g-i-n.de","dynamic-dns.info","feste-ip.net","knx-server.net","static-access.net","craft.me","realm.cz","on.crisp.email","*.cryptonomic.net","curv.dev","cfolks.pl","cyon.link","cyon.site","platform0.app","fnwk.site","folionetwork.site","biz.dk","co.dk","firm.dk","reg.dk","store.dk","dyndns.dappnode.io","builtwithdark.com","darklang.io","demo.datadetect.com","instance.datadetect.com","edgestack.me","dattolocal.com","dattorelay.com","dattoweb.com","mydatto.com","dattolocal.net","mydatto.net","ddnss.de","dyn.ddnss.de","dyndns.ddnss.de","dyn-ip24.de","dyndns1.de","home-webserver.de","dyn.home-webserver.de","myhome-server.de","ddnss.org","debian.net","definima.io","definima.net","deno.dev","deno-staging.dev","dedyn.io","deta.app","deta.dev","dfirma.pl","dkonto.pl","you2.pl","ondigitalocean.app","*.digitaloceanspaces.com","us.kg","rss.my.id","diher.solutions","discordsays.com","discordsez.com","jozi.biz","dnshome.de","online.th","shop.th","drayddns.com","shoparena.pl","dreamhosters.com","durumis.com","mydrobo.com","drud.io","drud.us","duckdns.org","dy.fi","tunk.org","dyndns.biz","for-better.biz","for-more.biz","for-some.biz","for-the.biz","selfip.biz","webhop.biz","ftpaccess.cc","game-server.cc","myphotos.cc","scrapping.cc","blogdns.com","cechire.com","dnsalias.com","dnsdojo.com","doesntexist.com","dontexist.com","doomdns.com","dyn-o-saur.com","dynalias.com","dyndns-at-home.com","dyndns-at-work.com","dyndns-blog.com","dyndns-free.com","dyndns-home.com","dyndns-ip.com","dyndns-mail.com","dyndns-office.com","dyndns-pics.com","dyndns-remote.com","dyndns-server.com","dyndns-web.com","dyndns-wiki.com","dyndns-work.com","est-a-la-maison.com","est-a-la-masion.com","est-le-patron.com","est-mon-blogueur.com","from-ak.com","from-al.com","from-ar.com","from-ca.com","from-ct.com","from-dc.com","from-de.com","from-fl.com","from-ga.com","from-hi.com","from-ia.com","from-id.com","from-il.com","from-in.com","from-ks.com","from-ky.com","from-ma.com","from-md.com","from-mi.com","from-mn.com","from-mo.com","from-ms.com","from-mt.com","from-nc.com","from-nd.com","from-ne.com","from-nh.com","from-nj.com","from-nm.com","from-nv.com","from-oh.com","from-ok.com","from-or.com","from-pa.com","from-pr.com","from-ri.com","from-sc.com","from-sd.com","from-tn.com","from-tx.com","from-ut.com","from-va.com","from-vt.com","from-wa.com","from-wi.com","from-wv.com","from-wy.com","getmyip.com","gotdns.com","hobby-site.com","homelinux.com","homeunix.com","iamallama.com","is-a-anarchist.com","is-a-blogger.com","is-a-bookkeeper.com","is-a-bulls-fan.com","is-a-caterer.com","is-a-chef.com","is-a-conservative.com","is-a-cpa.com","is-a-cubicle-slave.com","is-a-democrat.com","is-a-designer.com","is-a-doctor.com","is-a-financialadvisor.com","is-a-geek.com","is-a-green.com","is-a-guru.com","is-a-hard-worker.com","is-a-hunter.com","is-a-landscaper.com","is-a-lawyer.com","is-a-liberal.com","is-a-libertarian.com","is-a-llama.com","is-a-musician.com","is-a-nascarfan.com","is-a-nurse.com","is-a-painter.com","is-a-personaltrainer.com","is-a-photographer.com","is-a-player.com","is-a-republican.com","is-a-rockstar.com","is-a-socialist.com","is-a-student.com","is-a-teacher.com","is-a-techie.com","is-a-therapist.com","is-an-accountant.com","is-an-actor.com","is-an-actress.com","is-an-anarchist.com","is-an-artist.com","is-an-engineer.com","is-an-entertainer.com","is-certified.com","is-gone.com","is-into-anime.com","is-into-cars.com","is-into-cartoons.com","is-into-games.com","is-leet.com","is-not-certified.com","is-slick.com","is-uberleet.com","is-with-theband.com","isa-geek.com","isa-hockeynut.com","issmarterthanyou.com","likes-pie.com","likescandy.com","neat-url.com","saves-the-whales.com","selfip.com","sells-for-less.com","sells-for-u.com","servebbs.com","simple-url.com","space-to-rent.com","teaches-yoga.com","writesthisblog.com","ath.cx","fuettertdasnetz.de","isteingeek.de","istmein.de","lebtimnetz.de","leitungsen.de","traeumtgerade.de","barrel-of-knowledge.info","barrell-of-knowledge.info","dyndns.info","for-our.info","groks-the.info","groks-this.info","here-for-more.info","knowsitall.info","selfip.info","webhop.info","forgot.her.name","forgot.his.name","at-band-camp.net","blogdns.net","broke-it.net","buyshouses.net","dnsalias.net","dnsdojo.net","does-it.net","dontexist.net","dynalias.net","dynathome.net","endofinternet.net","from-az.net","from-co.net","from-la.net","from-ny.net","gets-it.net","ham-radio-op.net","homeftp.net","homeip.net","homelinux.net","homeunix.net","in-the-band.net","is-a-chef.net","is-a-geek.net","isa-geek.net","kicks-ass.net","office-on-the.net","podzone.net","scrapper-site.net","selfip.net","sells-it.net","servebbs.net","serveftp.net","thruhere.net","webhop.net","merseine.nu","mine.nu","shacknet.nu","blogdns.org","blogsite.org","boldlygoingnowhere.org","dnsalias.org","dnsdojo.org","doesntexist.org","dontexist.org","doomdns.org","dvrdns.org","dynalias.org","dyndns.org","go.dyndns.org","home.dyndns.org","endofinternet.org","endoftheinternet.org","from-me.org","game-host.org","gotdns.org","hobby-site.org","homedns.org","homeftp.org","homelinux.org","homeunix.org","is-a-bruinsfan.org","is-a-candidate.org","is-a-celticsfan.org","is-a-chef.org","is-a-geek.org","is-a-knight.org","is-a-linux-user.org","is-a-patsfan.org","is-a-soxfan.org","is-found.org","is-lost.org","is-saved.org","is-very-bad.org","is-very-evil.org","is-very-good.org","is-very-nice.org","is-very-sweet.org","isa-geek.org","kicks-ass.org","misconfused.org","podzone.org","readmyblog.org","selfip.org","sellsyourhome.org","servebbs.org","serveftp.org","servegame.org","stuff-4-sale.org","webhop.org","better-than.tv","dyndns.tv","on-the-web.tv","worse-than.tv","is-by.us","land-4-sale.us","stuff-4-sale.us","dyndns.ws","mypets.ws","ddnsfree.com","ddnsgeek.com","giize.com","gleeze.com","kozow.com","loseyourip.com","ooguy.com","theworkpc.com","casacam.net","dynu.net","accesscam.org","camdvr.org","freeddns.org","mywire.org","webredirect.org","myddns.rocks","dynv6.net","e4.cz","easypanel.app","easypanel.host","*.ewp.live","twmail.cc","twmail.net","twmail.org","mymailer.com.tw","url.tw","at.emf.camp","rt.ht","elementor.cloud","elementor.cool","en-root.fr","mytuleap.com","tuleap-partners.com","encr.app","encoreapi.com","eu.encoway.cloud","eu.org","al.eu.org","asso.eu.org","at.eu.org","au.eu.org","be.eu.org","bg.eu.org","ca.eu.org","cd.eu.org","ch.eu.org","cn.eu.org","cy.eu.org","cz.eu.org","de.eu.org","dk.eu.org","edu.eu.org","ee.eu.org","es.eu.org","fi.eu.org","fr.eu.org","gr.eu.org","hr.eu.org","hu.eu.org","ie.eu.org","il.eu.org","in.eu.org","int.eu.org","is.eu.org","it.eu.org","jp.eu.org","kr.eu.org","lt.eu.org","lu.eu.org","lv.eu.org","me.eu.org","mk.eu.org","mt.eu.org","my.eu.org","net.eu.org","ng.eu.org","nl.eu.org","no.eu.org","nz.eu.org","pl.eu.org","pt.eu.org","ro.eu.org","ru.eu.org","se.eu.org","si.eu.org","sk.eu.org","tr.eu.org","uk.eu.org","us.eu.org","eurodir.ru","eu-1.evennode.com","eu-2.evennode.com","eu-3.evennode.com","eu-4.evennode.com","us-1.evennode.com","us-2.evennode.com","us-3.evennode.com","us-4.evennode.com","relay.evervault.app","relay.evervault.dev","expo.app","staging.expo.app","onfabrica.com","ru.net","adygeya.ru","bashkiria.ru","bir.ru","cbg.ru","com.ru","dagestan.ru","grozny.ru","kalmykia.ru","kustanai.ru","marine.ru","mordovia.ru","msk.ru","mytis.ru","nalchik.ru","nov.ru","pyatigorsk.ru","spb.ru","vladikavkaz.ru","vladimir.ru","abkhazia.su","adygeya.su","aktyubinsk.su","arkhangelsk.su","armenia.su","ashgabad.su","azerbaijan.su","balashov.su","bashkiria.su","bryansk.su","bukhara.su","chimkent.su","dagestan.su","east-kazakhstan.su","exnet.su","georgia.su","grozny.su","ivanovo.su","jambyl.su","kalmykia.su","kaluga.su","karacol.su","karaganda.su","karelia.su","khakassia.su","krasnodar.su","kurgan.su","kustanai.su","lenug.su","mangyshlak.su","mordovia.su","msk.su","murmansk.su","nalchik.su","navoi.su","north-kazakhstan.su","nov.su","obninsk.su","penza.su","pokrovsk.su","sochi.su","spb.su","tashkent.su","termez.su","togliatti.su","troitsk.su","tselinograd.su","tula.su","tuva.su","vladikavkaz.su","vladimir.su","vologda.su","channelsdvr.net","u.channelsdvr.net","edgecompute.app","fastly-edge.com","fastly-terrarium.com","freetls.fastly.net","map.fastly.net","a.prod.fastly.net","global.prod.fastly.net","a.ssl.fastly.net","b.ssl.fastly.net","global.ssl.fastly.net","fastlylb.net","map.fastlylb.net","*.user.fm","fastvps-server.com","fastvps.host","myfast.host","fastvps.site","myfast.space","conn.uk","copro.uk","hosp.uk","fedorainfracloud.org","fedorapeople.org","cloud.fedoraproject.org","app.os.fedoraproject.org","app.os.stg.fedoraproject.org","mydobiss.com","fh-muenster.io","filegear.me","firebaseapp.com","fldrv.com","flutterflow.app","fly.dev","shw.io","edgeapp.net","forgeblocks.com","id.forgerock.io","framer.ai","framer.app","framercanvas.com","framer.media","framer.photos","framer.website","framer.wiki","0e.vc","freebox-os.com","freeboxos.com","fbx-os.fr","fbxos.fr","freebox-os.fr","freeboxos.fr","freedesktop.org","freemyip.com","*.frusky.de","wien.funkfeuer.at","daemon.asia","dix.asia","mydns.bz","0am.jp","0g0.jp","0j0.jp","0t0.jp","mydns.jp","pgw.jp","wjg.jp","keyword-on.net","live-on.net","server-on.net","mydns.tw","mydns.vc","*.futurecms.at","*.ex.futurecms.at","*.in.futurecms.at","futurehosting.at","futuremailing.at","*.ex.ortsinfo.at","*.kunden.ortsinfo.at","*.statics.cloud","aliases121.com","campaign.gov.uk","service.gov.uk","independent-commission.uk","independent-inquest.uk","independent-inquiry.uk","independent-panel.uk","independent-review.uk","public-inquiry.uk","royal-commission.uk","gehirn.ne.jp","usercontent.jp","gentapps.com","gentlentapis.com","lab.ms","cdn-edges.net","localcert.net","localhostcert.net","gsj.bz","githubusercontent.com","githubpreview.dev","github.io","gitlab.io","gitapp.si","gitpage.si","glitch.me","nog.community","co.ro","shop.ro","lolipop.io","angry.jp","babyblue.jp","babymilk.jp","backdrop.jp","bambina.jp","bitter.jp","blush.jp","boo.jp","boy.jp","boyfriend.jp","but.jp","candypop.jp","capoo.jp","catfood.jp","cheap.jp","chicappa.jp","chillout.jp","chips.jp","chowder.jp","chu.jp","ciao.jp","cocotte.jp","coolblog.jp","cranky.jp","cutegirl.jp","daa.jp","deca.jp","deci.jp","digick.jp","egoism.jp","fakefur.jp","fem.jp","flier.jp","floppy.jp","fool.jp","frenchkiss.jp","girlfriend.jp","girly.jp","gloomy.jp","gonna.jp","greater.jp","hacca.jp","heavy.jp","her.jp","hiho.jp","hippy.jp","holy.jp","hungry.jp","icurus.jp","itigo.jp","jellybean.jp","kikirara.jp","kill.jp","kilo.jp","kuron.jp","littlestar.jp","lolipopmc.jp","lolitapunk.jp","lomo.jp","lovepop.jp","lovesick.jp","main.jp","mods.jp","mond.jp","mongolian.jp","moo.jp","namaste.jp","nikita.jp","nobushi.jp","noor.jp","oops.jp","parallel.jp","parasite.jp","pecori.jp","peewee.jp","penne.jp","pepper.jp","perma.jp","pigboat.jp","pinoko.jp","punyu.jp","pupu.jp","pussycat.jp","pya.jp","raindrop.jp","readymade.jp","sadist.jp","schoolbus.jp","secret.jp","staba.jp","stripper.jp","sub.jp","sunnyday.jp","thick.jp","tonkotsu.jp","under.jp","upper.jp","velvet.jp","verse.jp","versus.jp","vivian.jp","watson.jp","weblike.jp","whitesnow.jp","zombie.jp","heteml.net","graphic.design","goip.de","blogspot.ae","blogspot.al","blogspot.am","*.hosted.app","*.run.app","web.app","blogspot.com.ar","blogspot.co.at","blogspot.com.au","blogspot.ba","blogspot.be","blogspot.bg","blogspot.bj","blogspot.com.br","blogspot.com.by","blogspot.ca","blogspot.cf","blogspot.ch","blogspot.cl","blogspot.com.co","*.0emm.com","appspot.com","*.r.appspot.com","blogspot.com","codespot.com","googleapis.com","googlecode.com","pagespeedmobilizer.com","withgoogle.com","withyoutube.com","blogspot.cv","blogspot.com.cy","blogspot.cz","blogspot.de","*.gateway.dev","blogspot.dk","blogspot.com.ee","blogspot.com.eg","blogspot.com.es","blogspot.fi","blogspot.fr","cloud.goog","translate.goog","*.usercontent.goog","blogspot.gr","blogspot.hk","blogspot.hr","blogspot.hu","blogspot.co.id","blogspot.ie","blogspot.co.il","blogspot.in","blogspot.is","blogspot.it","blogspot.jp","blogspot.co.ke","blogspot.kr","blogspot.li","blogspot.lt","blogspot.lu","blogspot.md","blogspot.mk","blogspot.com.mt","blogspot.mx","blogspot.my","cloudfunctions.net","blogspot.com.ng","blogspot.nl","blogspot.no","blogspot.co.nz","blogspot.pe","blogspot.pt","blogspot.qa","blogspot.re","blogspot.ro","blogspot.rs","blogspot.ru","blogspot.se","blogspot.sg","blogspot.si","blogspot.sk","blogspot.sn","blogspot.td","blogspot.com.tr","blogspot.tw","blogspot.ug","blogspot.co.uk","blogspot.com.uy","blogspot.vn","blogspot.co.za","goupile.fr","pymnt.uk","cloudapps.digital","london.cloudapps.digital","gov.nl","grafana-dev.net","grayjayleagues.com","gnstigbestellen.de","gnstigliefern.de","fin.ci","free.hr","caa.li","ua.rs","conf.se","hkkinen.fi","hrsn.dev","hashbang.sh","hasura.app","hasura-app.io","hatenablog.com","hatenadiary.com","hateblo.jp","hatenablog.jp","hatenadiary.jp","hatenadiary.org","pages.it.hs-heilbronn.de","pages-research.it.hs-heilbronn.de","heiyu.space","helioho.st","heliohost.us","hepforge.org","herokuapp.com","herokussl.com","heyflow.page","heyflow.site","ravendb.cloud","ravendb.community","development.run","ravendb.run","homesklep.pl","*.kin.one","*.id.pub","*.kin.pub","secaas.hk","hoplix.shop","orx.biz","biz.gl","biz.ng","co.biz.ng","dl.biz.ng","go.biz.ng","lg.biz.ng","on.biz.ng","col.ng","firm.ng","gen.ng","ltd.ng","ngo.ng","plc.ng","ie.ua","hostyhosting.io","hf.space","static.hf.space","hypernode.io","iobb.net","co.cz","*.moonscale.io","moonscale.net","gr.com","iki.fi","ibxos.it","iliadboxos.it","smushcdn.com","wphostedmail.com","wpmucdn.com","tempurl.host","wpmudev.host","dyn-berlin.de","in-berlin.de","in-brb.de","in-butter.de","in-dsl.de","in-vpn.de","in-dsl.net","in-vpn.net","in-dsl.org","in-vpn.org","biz.at","info.at","info.cx","ac.leg.br","al.leg.br","am.leg.br","ap.leg.br","ba.leg.br","ce.leg.br","df.leg.br","es.leg.br","go.leg.br","ma.leg.br","mg.leg.br","ms.leg.br","mt.leg.br","pa.leg.br","pb.leg.br","pe.leg.br","pi.leg.br","pr.leg.br","rj.leg.br","rn.leg.br","ro.leg.br","rr.leg.br","rs.leg.br","sc.leg.br","se.leg.br","sp.leg.br","to.leg.br","pixolino.com","na4u.ru","apps-1and1.com","live-website.com","apps-1and1.net","websitebuilder.online","app-ionos.space","iopsys.se","*.dweb.link","ipifony.net","ir.md","is-a-good.dev","is-a.dev","iservschule.de","mein-iserv.de","schulplattform.de","schulserver.de","test-iserv.de","iserv.dev","mel.cloudlets.com.au","cloud.interhostsolutions.be","alp1.ae.flow.ch","appengine.flow.ch","es-1.axarnet.cloud","diadem.cloud","vip.jelastic.cloud","jele.cloud","it1.eur.aruba.jenv-aruba.cloud","it1.jenv-aruba.cloud","keliweb.cloud","cs.keliweb.cloud","oxa.cloud","tn.oxa.cloud","uk.oxa.cloud","primetel.cloud","uk.primetel.cloud","ca.reclaim.cloud","uk.reclaim.cloud","us.reclaim.cloud","ch.trendhosting.cloud","de.trendhosting.cloud","jele.club","dopaas.com","paas.hosted-by-previder.com","rag-cloud.hosteur.com","rag-cloud-ch.hosteur.com","jcloud.ik-server.com","jcloud-ver-jpc.ik-server.com","demo.jelastic.com","paas.massivegrid.com","jed.wafaicloud.com","ryd.wafaicloud.com","j.scaleforce.com.cy","jelastic.dogado.eu","fi.cloudplatform.fi","demo.datacenter.fi","paas.datacenter.fi","jele.host","mircloud.host","paas.beebyte.io","sekd1.beebyteapp.io","jele.io","jc.neen.it","jcloud.kz","cloudjiffy.net","fra1-de.cloudjiffy.net","west1-us.cloudjiffy.net","jls-sto1.elastx.net","jls-sto2.elastx.net","jls-sto3.elastx.net","fr-1.paas.massivegrid.net","lon-1.paas.massivegrid.net","lon-2.paas.massivegrid.net","ny-1.paas.massivegrid.net","ny-2.paas.massivegrid.net","sg-1.paas.massivegrid.net","jelastic.saveincloud.net","nordeste-idc.saveincloud.net","j.scaleforce.net","sdscloud.pl","unicloud.pl","mircloud.ru","enscaled.sg","jele.site","jelastic.team","orangecloud.tn","j.layershift.co.uk","phx.enscaled.us","mircloud.us","myjino.ru","*.hosting.myjino.ru","*.landing.myjino.ru","*.spectrum.myjino.ru","*.vps.myjino.ru","jotelulu.cloud","webadorsite.com","jouwweb.site","*.cns.joyent.com","*.triton.zone","js.org","kaas.gg","khplay.nl","kapsi.fi","ezproxy.kuleuven.be","kuleuven.cloud","keymachine.de","kinghost.net","uni5.net","knightpoint.systems","koobin.events","webthings.io","krellian.net","oya.to","git-repos.de","lcube-server.de","svn-repos.de","leadpages.co","lpages.co","lpusercontent.com","lelux.site","libp2p.direct","runcontainers.dev","co.business","co.education","co.events","co.financial","co.network","co.place","co.technology","linkyard-cloud.ch","linkyard.cloud","members.linode.com","*.nodebalancer.linode.com","*.linodeobjects.com","ip.linodeusercontent.com","we.bs","filegear-sg.me","ggff.net","*.user.localcert.dev","lodz.pl","pabianice.pl","plock.pl","sieradz.pl","skierniewice.pl","zgierz.pl","loginline.app","loginline.dev","loginline.io","loginline.services","loginline.site","lohmus.me","servers.run","krasnik.pl","leczna.pl","lubartow.pl","lublin.pl","poniatowa.pl","swidnik.pl","glug.org.uk","lug.org.uk","lugs.org.uk","barsy.bg","barsy.club","barsycenter.com","barsyonline.com","barsy.de","barsy.dev","barsy.eu","barsy.gr","barsy.in","barsy.info","barsy.io","barsy.me","barsy.menu","barsyonline.menu","barsy.mobi","barsy.net","barsy.online","barsy.org","barsy.pro","barsy.pub","barsy.ro","barsy.rs","barsy.shop","barsyonline.shop","barsy.site","barsy.store","barsy.support","barsy.uk","barsy.co.uk","barsyonline.co.uk","*.magentosite.cloud","hb.cldmail.ru","matlab.cloud","modelscape.com","mwcloudnonprod.com","polyspace.com","mayfirst.info","mayfirst.org","mazeplay.com","mcdir.me","mcdir.ru","vps.mcdir.ru","mcpre.ru","mediatech.by","mediatech.dev","hra.health","medusajs.app","miniserver.com","memset.net","messerli.app","atmeta.com","apps.fbsbx.com","*.cloud.metacentrum.cz","custom.metacentrum.cz","flt.cloud.muni.cz","usr.cloud.muni.cz","meteorapp.com","eu.meteorapp.com","co.pl","*.azurecontainer.io","azure-api.net","azure-mobile.net","azureedge.net","azurefd.net","azurestaticapps.net","1.azurestaticapps.net","2.azurestaticapps.net","3.azurestaticapps.net","4.azurestaticapps.net","5.azurestaticapps.net","6.azurestaticapps.net","7.azurestaticapps.net","centralus.azurestaticapps.net","eastasia.azurestaticapps.net","eastus2.azurestaticapps.net","westeurope.azurestaticapps.net","westus2.azurestaticapps.net","azurewebsites.net","cloudapp.net","trafficmanager.net","blob.core.windows.net","servicebus.windows.net","routingthecloud.com","sn.mynetname.net","routingthecloud.net","routingthecloud.org","csx.cc","mydbserver.com","webspaceconfig.de","mittwald.info","mittwaldserver.info","typo3server.info","project.space","modx.dev","bmoattachments.org","net.ru","org.ru","pp.ru","hostedpi.com","caracal.mythic-beasts.com","customer.mythic-beasts.com","fentiger.mythic-beasts.com","lynx.mythic-beasts.com","ocelot.mythic-beasts.com","oncilla.mythic-beasts.com","onza.mythic-beasts.com","sphinx.mythic-beasts.com","vs.mythic-beasts.com","x.mythic-beasts.com","yali.mythic-beasts.com","cust.retrosnub.co.uk","ui.nabu.casa","cloud.nospamproxy.com","netfy.app","netlify.app","4u.com","nfshost.com","ipfs.nftstorage.link","ngo.us","ngrok.app","ngrok-free.app","ngrok.dev","ngrok-free.dev","ngrok.io","ap.ngrok.io","au.ngrok.io","eu.ngrok.io","in.ngrok.io","jp.ngrok.io","sa.ngrok.io","us.ngrok.io","ngrok.pizza","ngrok.pro","torun.pl","nh-serv.co.uk","nimsite.uk","mmafan.biz","myftp.biz","no-ip.biz","no-ip.ca","fantasyleague.cc","gotdns.ch","3utilities.com","blogsyte.com","ciscofreak.com","damnserver.com","ddnsking.com","ditchyourip.com","dnsiskinky.com","dynns.com","geekgalaxy.com","health-carereform.com","homesecuritymac.com","homesecuritypc.com","myactivedirectory.com","mysecuritycamera.com","myvnc.com","net-freaks.com","onthewifi.com","point2this.com","quicksytes.com","securitytactics.com","servebeer.com","servecounterstrike.com","serveexchange.com","serveftp.com","servegame.com","servehalflife.com","servehttp.com","servehumour.com","serveirc.com","servemp3.com","servep2p.com","servepics.com","servequake.com","servesarcasm.com","stufftoread.com","unusualperson.com","workisboring.com","dvrcam.info","ilovecollege.info","no-ip.info","brasilia.me","ddns.me","dnsfor.me","hopto.me","loginto.me","noip.me","webhop.me","bounceme.net","ddns.net","eating-organic.net","mydissent.net","myeffect.net","mymediapc.net","mypsx.net","mysecuritycamera.net","nhlfan.net","no-ip.net","pgafan.net","privatizehealthinsurance.net","redirectme.net","serveblog.net","serveminecraft.net","sytes.net","cable-modem.org","collegefan.org","couchpotatofries.org","hopto.org","mlbfan.org","myftp.org","mysecuritycamera.org","nflfan.org","no-ip.org","read-books.org","ufcfan.org","zapto.org","no-ip.co.uk","golffan.us","noip.us","pointto.us","stage.nodeart.io","*.developer.app","noop.app","*.northflank.app","*.build.run","*.code.run","*.database.run","*.migration.run","noticeable.news","notion.site","dnsking.ch","mypi.co","n4t.co","001www.com","myiphost.com","forumz.info","soundcast.me","tcp4.me","dnsup.net","hicam.net","now-dns.net","ownip.net","vpndns.net","dynserv.org","now-dns.org","x443.pw","now-dns.top","ntdll.top","freeddns.us","nsupdate.info","nerdpol.ovh","nyc.mn","prvcy.page","obl.ong","observablehq.cloud","static.observableusercontent.com","omg.lol","cloudycluster.net","omniwe.site","123webseite.at","123website.be","simplesite.com.br","123website.ch","simplesite.com","123webseite.de","123hjemmeside.dk","123miweb.es","123kotisivu.fi","123siteweb.fr","simplesite.gr","123homepage.it","123website.lu","123website.nl","123hjemmeside.no","service.one","simplesite.pl","123paginaweb.pt","123minsida.se","is-a-fullstack.dev","is-cool.dev","is-not-a.dev","localplayer.dev","is-local.org","opensocial.site","opencraft.hosting","16-b.it","32-b.it","64-b.it","orsites.com","operaunite.com","*.customer-oci.com","*.oci.customer-oci.com","*.ocp.customer-oci.com","*.ocs.customer-oci.com","*.oraclecloudapps.com","*.oraclegovcloudapps.com","*.oraclegovcloudapps.uk","tech.orange","can.re","authgear-staging.com","authgearapps.com","skygearapp.com","outsystemscloud.com","*.hosting.ovh.net","*.webpaas.ovh.net","ownprovider.com","own.pm","*.owo.codes","ox.rs","oy.lc","pgfog.com","pagexl.com","gotpantheon.com","pantheonsite.io","*.paywhirl.com","*.xmit.co","xmit.dev","madethis.site","srv.us","gh.srv.us","gl.srv.us","lk3.ru","mypep.link","perspecta.cloud","on-web.fr","*.upsun.app","upsunapp.com","ent.platform.sh","eu.platform.sh","us.platform.sh","*.platformsh.site","*.tst.site","platter-app.com","platter-app.dev","platterp.us","pley.games","onporter.run","co.bn","postman-echo.com","pstmn.io","mock.pstmn.io","httpbin.org","prequalifyme.today","xen.prgmr.com","priv.at","protonet.io","chirurgiens-dentistes-en-france.fr","byen.site","pubtls.org","pythonanywhere.com","eu.pythonanywhere.com","qa2.com","qcx.io","*.sys.qcx.io","myqnapcloud.cn","alpha-myqnapcloud.com","dev-myqnapcloud.com","mycloudnas.com","mynascloud.com","myqnapcloud.com","qoto.io","qualifioapp.com","ladesk.com","qbuser.com","*.quipelements.com","vapor.cloud","vaporcloud.io","rackmaze.com","rackmaze.net","cloudsite.builders","myradweb.net","servername.us","web.in","in.net","myrdbx.io","site.rb-hosting.io","*.on-rancher.cloud","*.on-k3s.io","*.on-rio.io","ravpage.co.il","readthedocs-hosted.com","readthedocs.io","rhcloud.com","instances.spawn.cc","onrender.com","app.render.com","replit.app","id.replit.app","firewalledreplit.co","id.firewalledreplit.co","repl.co","id.repl.co","replit.dev","archer.replit.dev","bones.replit.dev","canary.replit.dev","global.replit.dev","hacker.replit.dev","id.replit.dev","janeway.replit.dev","kim.replit.dev","kira.replit.dev","kirk.replit.dev","odo.replit.dev","paris.replit.dev","picard.replit.dev","pike.replit.dev","prerelease.replit.dev","reed.replit.dev","riker.replit.dev","sisko.replit.dev","spock.replit.dev","staging.replit.dev","sulu.replit.dev","tarpit.replit.dev","teams.replit.dev","tucker.replit.dev","wesley.replit.dev","worf.replit.dev","repl.run","resindevice.io","devices.resinstaging.io","hzc.io","adimo.co.uk","itcouldbewor.se","aus.basketball","nz.basketball","git-pages.rit.edu","rocky.page","rub.de","ruhr-uni-bochum.de","io.noc.ruhr-uni-bochum.de",".",".",".",".",".",".",".",".",".",".","ras.ru","nyat.app","180r.com","dojin.com","sakuratan.com","sakuraweb.com","x0.com","2-d.jp","bona.jp","crap.jp","daynight.jp","eek.jp","flop.jp","halfmoon.jp","jeez.jp","matrix.jp","mimoza.jp","ivory.ne.jp","mail-box.ne.jp","mints.ne.jp","mokuren.ne.jp","opal.ne.jp","sakura.ne.jp","sumomo.ne.jp","topaz.ne.jp","netgamers.jp","nyanta.jp","o0o0.jp","rdy.jp","rgr.jp","rulez.jp","s3.isk01.sakurastorage.jp","s3.isk02.sakurastorage.jp","saloon.jp","sblo.jp","skr.jp","tank.jp","uh-oh.jp","undo.jp","rs.webaccel.jp","user.webaccel.jp","websozai.jp","xii.jp","squares.net","jpn.org","kirara.st","x0.to","from.tv","sakura.tv","*.builder.code.com","*.dev-builder.code.com","*.stg-builder.code.com","*.001.test.code-builder-stg.platform.salesforce.com","*.d.crm.dev","*.w.crm.dev","*.wa.crm.dev","*.wb.crm.dev","*.wc.crm.dev","*.wd.crm.dev","*.we.crm.dev","*.wf.crm.dev","sandcats.io","logoip.com","logoip.de","fr-par-1.baremetal.scw.cloud","fr-par-2.baremetal.scw.cloud","nl-ams-1.baremetal.scw.cloud","cockpit.fr-par.scw.cloud","fnc.fr-par.scw.cloud","functions.fnc.fr-par.scw.cloud","k8s.fr-par.scw.cloud","nodes.k8s.fr-par.scw.cloud","s3.fr-par.scw.cloud","s3-website.fr-par.scw.cloud","whm.fr-par.scw.cloud","priv.instances.scw.cloud","pub.instances.scw.cloud","k8s.scw.cloud","cockpit.nl-ams.scw.cloud","k8s.nl-ams.scw.cloud","nodes.k8s.nl-ams.scw.cloud","s3.nl-ams.scw.cloud","s3-website.nl-ams.scw.cloud","whm.nl-ams.scw.cloud","cockpit.pl-waw.scw.cloud","k8s.pl-waw.scw.cloud","nodes.k8s.pl-waw.scw.cloud","s3.pl-waw.scw.cloud","s3-website.pl-waw.scw.cloud","scalebook.scw.cloud","smartlabeling.scw.cloud","dedibox.fr","schokokeks.net","gov.scot","service.gov.scot","scrysec.com","client.scrypted.io","firewall-gateway.com","firewall-gateway.de","my-gateway.de","my-router.de","spdns.de","spdns.eu","firewall-gateway.net","my-firewall.org","myfirewall.org","spdns.org","seidat.net","sellfy.store","minisite.ms","senseering.net","servebolt.cloud","biz.ua","co.ua","pp.ua","as.sh.cn","sheezy.games","shiftedit.io","myshopblocks.com","myshopify.com","shopitsite.com","shopware.shop","shopware.store","mo-siemens.io","1kapp.com","appchizi.com","applinzi.com","sinaapp.com","vipsinaapp.com","siteleaf.net","small-web.org","aeroport.fr","avocat.fr","chambagri.fr","chirurgiens-dentistes.fr","experts-comptables.fr","medecin.fr","notaires.fr","pharmacien.fr","port.fr","veterinaire.fr","vp4.me","*.snowflake.app","*.privatelink.snowflake.app","streamlit.app","streamlitapp.com","try-snowplow.com","mafelo.net","playstation-cloud.com","srht.site","apps.lair.io","*.stolos.io","spacekit.io","ind.mom","customer.speedpartner.de","myspreadshop.at","myspreadshop.com.au","myspreadshop.be","myspreadshop.ca","myspreadshop.ch","myspreadshop.com","myspreadshop.de","myspreadshop.dk","myspreadshop.es","myspreadshop.fi","myspreadshop.fr","myspreadshop.ie","myspreadshop.it","myspreadshop.net","myspreadshop.nl","myspreadshop.no","myspreadshop.pl","myspreadshop.se","myspreadshop.co.uk","w-corp-staticblitz.com","w-credentialless-staticblitz.com","w-staticblitz.com","stackhero-network.com","runs.onstackit.cloud","stackit.gg","stackit.rocks","stackit.run","stackit.zone","musician.io","novecore.site","api.stdlib.com","feedback.ac","forms.ac","assessments.cx","calculators.cx","funnels.cx","paynow.cx","quizzes.cx","researched.cx","tests.cx","surveys.so","storebase.store","storipress.app","storj.farm","strapiapp.com","media.strapiapp.com","vps-host.net","atl.jelastic.vps-host.net","njs.jelastic.vps-host.net","ric.jelastic.vps-host.net","streak-link.com","streaklinks.com","streakusercontent.com","soc.srcf.net","user.srcf.net","utwente.io","temp-dns.com","supabase.co","supabase.in","supabase.net","syncloud.it","dscloud.biz","direct.quickconnect.cn","dsmynas.com","familyds.com","diskstation.me","dscloud.me","i234.me","myds.me","synology.me","dscloud.mobi","dsmynas.net","familyds.net","dsmynas.org","familyds.org","direct.quickconnect.to","vpnplus.to","mytabit.com","mytabit.co.il","tabitorder.co.il","taifun-dns.de","ts.net","*.c.ts.net","gda.pl","gdansk.pl","gdynia.pl","med.pl","sopot.pl","taveusercontent.com","p.tawk.email","p.tawkto.email","site.tb-hosting.com","edugit.io","s3.teckids.org","telebit.app","telebit.io","*.telebit.xyz","*.firenet.ch","*.svc.firenet.ch","reservd.com","thingdustdata.com","cust.dev.thingdust.io","reservd.dev.thingdust.io","cust.disrec.thingdust.io","reservd.disrec.thingdust.io","cust.prod.thingdust.io","cust.testing.thingdust.io","reservd.testing.thingdust.io","tickets.io","arvo.network","azimuth.network","tlon.network","torproject.net","pages.torproject.net","townnews-staging.com","12hp.at","2ix.at","4lima.at","lima-city.at","12hp.ch","2ix.ch","4lima.ch","lima-city.ch","trafficplex.cloud","de.cool","12hp.de","2ix.de","4lima.de","lima-city.de","1337.pictures","clan.rip","lima-city.rocks","webspace.rocks","lima.zone","*.transurl.be","*.transurl.eu","site.transip.me","*.transurl.nl","tuxfamily.org","dd-dns.de","dray-dns.de","draydns.de","dyn-vpn.de","dynvpn.de","mein-vigor.de","my-vigor.de","my-wan.de","syno-ds.de","synology-diskstation.de","synology-ds.de","diskstation.eu","diskstation.org","typedream.app","pro.typeform.com","*.uberspace.de","uber.space","hk.com","inc.hk","ltd.hk","hk.org","it.com","unison-services.cloud","virtual-user.de","virtualuser.de","name.pm","sch.tf","biz.wf","sch.wf","org.yt","rs.ba","bielsko.pl","upli.io","urown.cloud","dnsupdate.info","us.org","v.ua","express.val.run","web.val.run","vercel.app","v0.build","vercel.dev","vusercontent.net","now.sh","2038.io","router.management","v-info.info","voorloper.cloud","*.vultrobjects.com","wafflecell.com","webflow.io","webflowtest.io","*.webhare.dev","bookonline.app","hotelwithflight.com","reserve-online.com","reserve-online.net","cprapid.com","pleskns.com","wp2.host","pdns.page","plesk.page","wpsquared.site","*.wadl.top","remotewd.com","box.ca","pages.wiardweb.com","toolforge.org","wmcloud.org","wmflabs.org","wdh.app","panel.gg","daemon.panel.gg","wixsite.com","wixstudio.com","editorx.io","wixstudio.io","wix.run","messwithdns.com","woltlab-demo.com","myforum.community","community-pro.de","diskussionsbereich.de","community-pro.net","meinforum.net","affinitylottery.org.uk","raffleentry.org.uk","weeklylottery.org.uk","wpenginepowered.com","js.wpenginepowered.com","half.host","xnbay.com","u2.xnbay.com","u2-local.xnbay.com","cistron.nl","demon.nl","xs4all.space","yandexcloud.net","storage.yandexcloud.net","website.yandexcloud.net","official.academy","yolasite.com","yombo.me","ynh.fr","nohost.me","noho.st","za.net","za.org","zap.cloud","zeabur.app","bss.design","basicserver.io","virtualserver.io","enterprisecloud.nu"],D=P.reduce((ie,ne)=>{const ce=ne.replace(/^(\*\.|\!)/,""),fe=R.toASCII(ce),de=ne.charAt(0);if(ie.has(fe))throw new Error(`Multiple rules found for ${ne} (${fe})`);return ie.set(fe,{rule:ne,suffix:ce,punySuffix:fe,wildcard:de==="*",exception:de==="!"}),ie},new Map),F=ie=>{const ne=R.toASCII(ie).split(".");for(let ce=0;ce<ne.length;ce++){const fe=ne.slice(ce).join("."),de=D.get(fe);if(de)return de}return null},L={DOMAIN_TOO_SHORT:"Domain name too short.",DOMAIN_TOO_LONG:"Domain name too long. It should be no more than 255 chars.",LABEL_STARTS_WITH_DASH:"Domain name label can not start with a dash.",LABEL_ENDS_WITH_DASH:"Domain name label can not end with a dash.",LABEL_TOO_LONG:"Domain name label should be at most 63 chars long.",LABEL_TOO_SHORT:"Domain name label should be at least 1 character long.",LABEL_INVALID_CHARS:"Domain name label can only contain alphanumeric characters or dashes."},U=ie=>{const ne=R.toASCII(ie);if(ne.length<1)return"DOMAIN_TOO_SHORT";if(ne.length>255)return"DOMAIN_TOO_LONG";const ce=ne.split(".");let fe;for(let de=0;de<ce.length;++de){if(fe=ce[de],!fe.length)return"LABEL_TOO_SHORT";if(fe.length>63)return"LABEL_TOO_LONG";if(fe.charAt(0)==="-")return"LABEL_STARTS_WITH_DASH";if(fe.charAt(fe.length-1)==="-")return"LABEL_ENDS_WITH_DASH";if(!/^[a-z0-9\-_]+$/.test(fe))return"LABEL_INVALID_CHARS"}},V=ie=>{if(typeof ie!="string")throw new TypeError("Domain name must be a string.");let ne=ie.slice(0).toLowerCase();ne.charAt(ne.length-1)==="."&&(ne=ne.slice(0,ne.length-1));const ce=U(ne);if(ce)return{input:ie,error:{message:L[ce],code:ce}};const fe={input:ie,tld:null,sld:null,domain:null,subdomain:null,listed:!1},de=ne.split(".");if(de[de.length-1]==="local")return fe;const pe=()=>(/xn--/.test(ne)&&(fe.domain&&(fe.domain=R.toASCII(fe.domain)),fe.subdomain&&(fe.subdomain=R.toASCII(fe.subdomain))),fe),ve=F(ne);if(!ve)return de.length<2?fe:(fe.tld=de.pop(),fe.sld=de.pop(),fe.domain=[fe.sld,fe.tld].join("."),de.length&&(fe.subdomain=de.pop()),pe());fe.listed=!0;const ye=ve.suffix.split("."),_e=de.slice(0,de.length-ye.length);return ve.exception&&_e.push(ye.shift()),fe.tld=ye.join("."),!_e.length||(ve.wildcard&&(ye.unshift(_e.pop()),fe.tld=ye.join(".")),!_e.length)||(fe.sld=_e.pop(),fe.domain=[fe.sld,fe.tld].join("."),_e.length&&(fe.subdomain=_e.join("."))),pe()},K=ie=>ie&&V(ie).domain||null,J=ie=>{const ne=V(ie);return!!(ne.domain&&ne.listed)},ee={parse:V,get:K,isValid:J};E.default=ee,E.errorCodes=L,E.get=K,E.isValid=J,E.parse=V})(psl)),psl}/*!
 * Copyright (c) 2018, Salesforce.com, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. Neither the name of Salesforce.com nor the names of its contributors may
 * be used to endorse or promote products derived from this software without
 * specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */var hasRequiredPubsuffixPsl;function requirePubsuffixPsl(){if(hasRequiredPubsuffixPsl)return pubsuffixPsl;hasRequiredPubsuffixPsl=1;var E=requirePsl();function A(_){return E.get(_)}return pubsuffixPsl.getPublicSuffix=A,pubsuffixPsl}var store={};/*!
 * Copyright (c) 2015, Salesforce.com, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. Neither the name of Salesforce.com nor the names of its contributors may
 * be used to endorse or promote products derived from this software without
 * specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */var hasRequiredStore;function requireStore(){if(hasRequiredStore)return store;hasRequiredStore=1;function E(){}return store.Store=E,E.prototype.synchronous=!1,E.prototype.findCookie=function(A,_,I,B){throw new Error("findCookie is not implemented")},E.prototype.findCookies=function(A,_,I){throw new Error("findCookies is not implemented")},E.prototype.putCookie=function(A,_){throw new Error("putCookie is not implemented")},E.prototype.updateCookie=function(A,_,I){throw new Error("updateCookie is not implemented")},E.prototype.removeCookie=function(A,_,I,B){throw new Error("removeCookie is not implemented")},E.prototype.removeCookies=function(A,_,I){throw new Error("removeCookies is not implemented")},E.prototype.removeAllCookies=function(A){throw new Error("removeAllCookies is not implemented")},E.prototype.getAllCookies=function(A){throw new Error("getAllCookies is not implemented (therefore jar cannot be serialized)")},store}var memstore={},permuteDomain={};/*!
 * Copyright (c) 2015, Salesforce.com, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. Neither the name of Salesforce.com nor the names of its contributors may
 * be used to endorse or promote products derived from this software without
 * specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */var hasRequiredPermuteDomain;function requirePermuteDomain(){if(hasRequiredPermuteDomain)return permuteDomain;hasRequiredPermuteDomain=1;var E=requirePubsuffixPsl();function A(_){var I=E.getPublicSuffix(_);if(!I)return null;if(I==_)return[_];for(var B=_.slice(0,-(I.length+1)),T=B.split(".").reverse(),R=I,P=[R];T.length;)R=T.shift()+"."+R,P.push(R);return P}return permuteDomain.permuteDomain=A,permuteDomain}var pathMatch={};/*!
 * Copyright (c) 2015, Salesforce.com, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. Neither the name of Salesforce.com nor the names of its contributors may
 * be used to endorse or promote products derived from this software without
 * specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */var hasRequiredPathMatch;function requirePathMatch(){if(hasRequiredPathMatch)return pathMatch;hasRequiredPathMatch=1;function E(A,_){if(_===A)return!0;var I=A.indexOf(_);return I===0&&(_.substr(-1)==="/"||A.substr(_.length,1)==="/")}return pathMatch.pathMatch=E,pathMatch}/*!
 * Copyright (c) 2015, Salesforce.com, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. Neither the name of Salesforce.com nor the names of its contributors may
 * be used to endorse or promote products derived from this software without
 * specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */var hasRequiredMemstore;function requireMemstore(){if(hasRequiredMemstore)return memstore;hasRequiredMemstore=1;var E=requireStore().Store,A=requirePermuteDomain().permuteDomain,_=requirePathMatch().pathMatch,I=requireUtil$3();function B(){E.call(this),this.idx={}}return I.inherits(B,E),memstore.MemoryCookieStore=B,B.prototype.idx=null,B.prototype.synchronous=!0,B.prototype.inspect=function(){return"{ idx: "+I.inspect(this.idx,!1,2)+" }"},I.inspect.custom&&(B.prototype[I.inspect.custom]=B.prototype.inspect),B.prototype.findCookie=function(T,R,P,D){return!this.idx[T]||!this.idx[T][R]?D(null,void 0):D(null,this.idx[T][R][P]||null)},B.prototype.findCookies=function(T,R,P){var D=[];if(!T)return P(null,[]);var F;R?F=function(K){Object.keys(K).forEach(function(J){if(_(R,J)){var ee=K[J];for(var ie in ee)D.push(ee[ie])}})}:F=function(K){for(var J in K){var ee=K[J];for(var ie in ee)D.push(ee[ie])}};var L=A(T)||[T],U=this.idx;L.forEach(function(V){var K=U[V];K&&F(K)}),P(null,D)},B.prototype.putCookie=function(T,R){this.idx[T.domain]||(this.idx[T.domain]={}),this.idx[T.domain][T.path]||(this.idx[T.domain][T.path]={}),this.idx[T.domain][T.path][T.key]=T,R(null)},B.prototype.updateCookie=function(T,R,P){this.putCookie(R,P)},B.prototype.removeCookie=function(T,R,P,D){this.idx[T]&&this.idx[T][R]&&this.idx[T][R][P]&&delete this.idx[T][R][P],D(null)},B.prototype.removeCookies=function(T,R,P){return this.idx[T]&&(R?delete this.idx[T][R]:delete this.idx[T]),P(null)},B.prototype.removeAllCookies=function(T){return this.idx={},T(null)},B.prototype.getAllCookies=function(T){var R=[],P=this.idx,D=Object.keys(P);D.forEach(function(F){var L=Object.keys(P[F]);L.forEach(function(U){var V=Object.keys(P[F][U]);V.forEach(function(K){K!==null&&R.push(P[F][U][K])})})}),R.sort(function(F,L){return(F.creationIndex||0)-(L.creationIndex||0)}),T(null,R)},memstore}var version$1,hasRequiredVersion;function requireVersion(){return hasRequiredVersion||(hasRequiredVersion=1,version$1="2.5.0"),version$1}/*!
 * Copyright (c) 2015, Salesforce.com, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. Neither the name of Salesforce.com nor the names of its contributors may
 * be used to endorse or promote products derived from this software without
 * specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */var hasRequiredCookie;function requireCookie(){if(hasRequiredCookie)return cookie;hasRequiredCookie=1;var E=require$$0$3,A=require$$2$1.parse,_=requireUtil$3(),I=requirePubsuffixPsl(),B=requireStore().Store,T=requireMemstore().MemoryCookieStore,R=requirePathMatch().pathMatch,P=requireVersion(),D;try{D=requirePunycode()}catch{console.warn("tough-cookie: can't load punycode; won't use punycode for domain normalization")}var F=/^[\x21\x23-\x2B\x2D-\x3A\x3C-\x5B\x5D-\x7E]+$/,L=/[\x00-\x1F]/,U=[`
`,"\r","\0"],V=/[\x20-\x3A\x3C-\x7E]+/,K=/[\x09\x20-\x2F\x3B-\x40\x5B-\x60\x7B-\x7E]/,J={jan:0,feb:1,mar:2,apr:3,may:4,jun:5,jul:6,aug:7,sep:8,oct:9,nov:10,dec:11},ee=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ie=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ne=2147483647e3,ce=0;function fe(ge,Ee,ke,Se){for(var Ie=0;Ie<ge.length;){var we=ge.charCodeAt(Ie);if(we<=47||we>=58)break;Ie++}return Ie<Ee||Ie>ke||!Se&&Ie!=ge.length?null:parseInt(ge.substr(0,Ie),10)}function de(ge){var Ee=ge.split(":"),ke=[0,0,0];if(Ee.length!==3)return null;for(var Se=0;Se<3;Se++){var Ie=Se==2,we=fe(Ee[Se],1,2,Ie);if(we===null)return null;ke[Se]=we}return ke}function pe(ge){ge=String(ge).substr(0,3).toLowerCase();var Ee=J[ge];return Ee>=0?Ee:null}function ve(ge){if(ge){var Ee=ge.split(K);if(Ee){for(var ke=null,Se=null,Ie=null,we=null,xe=null,Fe=null,Ge=0;Ge<Ee.length;Ge++){var Oe=Ee[Ge].trim();if(Oe.length){var et;if(Ie===null&&(et=de(Oe),et)){ke=et[0],Se=et[1],Ie=et[2];continue}if(we===null&&(et=fe(Oe,1,2,!0),et!==null)){we=et;continue}if(xe===null&&(et=pe(Oe),et!==null)){xe=et;continue}Fe===null&&(et=fe(Oe,2,4,!0),et!==null&&(Fe=et,Fe>=70&&Fe<=99?Fe+=1900:Fe>=0&&Fe<=69&&(Fe+=2e3)))}}if(!(we===null||xe===null||Fe===null||Ie===null||we<1||we>31||Fe<1601||ke>23||Se>59||Ie>59))return new Date(Date.UTC(Fe,xe,we,ke,Se,Ie))}}}function ye(ge){var Ee=ge.getUTCDate();Ee=Ee>=10?Ee:"0"+Ee;var ke=ge.getUTCHours();ke=ke>=10?ke:"0"+ke;var Se=ge.getUTCMinutes();Se=Se>=10?Se:"0"+Se;var Ie=ge.getUTCSeconds();return Ie=Ie>=10?Ie:"0"+Ie,ie[ge.getUTCDay()]+", "+Ee+" "+ee[ge.getUTCMonth()]+" "+ge.getUTCFullYear()+" "+ke+":"+Se+":"+Ie+" GMT"}function _e(ge){return ge==null?null:(ge=ge.trim().replace(/^\./,""),D&&/[^\u0001-\u007f]/.test(ge)&&(ge=D.toASCII(ge)),ge.toLowerCase())}function be(ge,Ee,ke){if(ge==null||Ee==null)return null;if(ke!==!1&&(ge=_e(ge),Ee=_e(Ee)),ge==Ee)return!0;if(E.isIP(ge))return!1;var Se=ge.indexOf(Ee);return!(Se<=0||ge.length!==Ee.length+Se||ge.substr(Se-1,1)!==".")}function Te(ge){if(!ge||ge.substr(0,1)!=="/")return"/";if(ge==="/")return ge;var Ee=ge.lastIndexOf("/");return Ee===0?"/":ge.slice(0,Ee)}function ue(ge){for(var Ee=0;Ee<U.length;Ee++){var ke=ge.indexOf(U[Ee]);ke!==-1&&(ge=ge.substr(0,ke))}return ge}function O(ge,Ee){ge=ue(ge);var ke=ge.indexOf("=");if(Ee)ke===0&&(ge=ge.substr(1),ke=ge.indexOf("="));else if(ke<=0)return;var Se,Ie;if(ke<=0?(Se="",Ie=ge.trim()):(Se=ge.substr(0,ke).trim(),Ie=ge.substr(ke+1).trim()),!(L.test(Se)||L.test(Ie))){var we=new ae;return we.key=Se,we.value=Ie,we}}function z(ge,Ee){(!Ee||typeof Ee!="object")&&(Ee={}),ge=ge.trim();var ke=ge.indexOf(";"),Se=ke===-1?ge:ge.substr(0,ke),Ie=O(Se,!!Ee.loose);if(Ie){if(ke===-1)return Ie;var we=ge.slice(ke+1).trim();if(we.length===0)return Ie;for(var xe=we.split(";");xe.length;){var Fe=xe.shift().trim();if(Fe.length!==0){var Ge=Fe.indexOf("="),Oe,et;switch(Ge===-1?(Oe=Fe,et=null):(Oe=Fe.substr(0,Ge),et=Fe.substr(Ge+1)),Oe=Oe.trim().toLowerCase(),et&&(et=et.trim()),Oe){case"expires":if(et){var Mt=ve(et);Mt&&(Ie.expires=Mt)}break;case"max-age":if(et&&/^-?[0-9]+$/.test(et)){var dt=parseInt(et,10);Ie.setMaxAge(dt)}break;case"domain":if(et){var mt=et.trim().replace(/^\./,"");mt&&(Ie.domain=mt.toLowerCase())}break;case"path":Ie.path=et&&et[0]==="/"?et:null;break;case"secure":Ie.secure=!0;break;case"httponly":Ie.httpOnly=!0;break;default:Ie.extensions=Ie.extensions||[],Ie.extensions.push(Fe);break}}}return Ie}}function Y(ge){var Ee;try{Ee=JSON.parse(ge)}catch(ke){return ke}return Ee}function te(ge){if(!ge)return null;var Ee;if(typeof ge=="string"){if(Ee=Y(ge),Ee instanceof Error)return null}else Ee=ge;for(var ke=new ae,Se=0;Se<ae.serializableProperties.length;Se++){var Ie=ae.serializableProperties[Se];Ee[Ie]===void 0||Ee[Ie]===ae.prototype[Ie]||(Ie==="expires"||Ie==="creation"||Ie==="lastAccessed"?Ee[Ie]===null?ke[Ie]=null:ke[Ie]=Ee[Ie]=="Infinity"?"Infinity":new Date(Ee[Ie]):ke[Ie]=Ee[Ie])}return ke}function oe(ge,Ee){var ke=0,Se=ge.path?ge.path.length:0,Ie=Ee.path?Ee.path.length:0;if(ke=Ie-Se,ke!==0)return ke;var we=ge.creation?ge.creation.getTime():ne,xe=Ee.creation?Ee.creation.getTime():ne;return ke=we-xe,ke!==0||(ke=ge.creationIndex-Ee.creationIndex),ke}function le(ge){if(ge==="/")return["/"];ge.lastIndexOf("/")===ge.length-1&&(ge=ge.substr(0,ge.length-1));for(var Ee=[ge];ge.length>1;){var ke=ge.lastIndexOf("/");if(ke===0)break;ge=ge.substr(0,ke),Ee.push(ge)}return Ee.push("/"),Ee}function he(ge){if(ge instanceof Object)return ge;try{ge=decodeURI(ge)}catch{}return A(ge)}function ae(ge){ge=ge||{},Object.keys(ge).forEach(function(Ee){ae.prototype.hasOwnProperty(Ee)&&ae.prototype[Ee]!==ge[Ee]&&Ee.substr(0,1)!=="_"&&(this[Ee]=ge[Ee])},this),this.creation=this.creation||new Date,Object.defineProperty(this,"creationIndex",{configurable:!1,enumerable:!1,writable:!0,value:++ae.cookiesCreated})}ae.cookiesCreated=0,ae.parse=z,ae.fromJSON=te,ae.prototype.key="",ae.prototype.value="",ae.prototype.expires="Infinity",ae.prototype.maxAge=null,ae.prototype.domain=null,ae.prototype.path=null,ae.prototype.secure=!1,ae.prototype.httpOnly=!1,ae.prototype.extensions=null,ae.prototype.hostOnly=null,ae.prototype.pathIsDefault=null,ae.prototype.creation=null,ae.prototype.lastAccessed=null,Object.defineProperty(ae.prototype,"creationIndex",{configurable:!0,enumerable:!1,writable:!0,value:0}),ae.serializableProperties=Object.keys(ae.prototype).filter(function(ge){return!(ae.prototype[ge]instanceof Function||ge==="creationIndex"||ge.substr(0,1)==="_")}),ae.prototype.inspect=function(){var Ee=Date.now();return'Cookie="'+this.toString()+"; hostOnly="+(this.hostOnly!=null?this.hostOnly:"?")+"; aAge="+(this.lastAccessed?Ee-this.lastAccessed.getTime()+"ms":"?")+"; cAge="+(this.creation?Ee-this.creation.getTime()+"ms":"?")+'"'},_.inspect.custom&&(ae.prototype[_.inspect.custom]=ae.prototype.inspect),ae.prototype.toJSON=function(){for(var ge={},Ee=ae.serializableProperties,ke=0;ke<Ee.length;ke++){var Se=Ee[ke];this[Se]!==ae.prototype[Se]&&(Se==="expires"||Se==="creation"||Se==="lastAccessed"?this[Se]===null?ge[Se]=null:ge[Se]=this[Se]=="Infinity"?"Infinity":this[Se].toISOString():Se==="maxAge"?this[Se]!==null&&(ge[Se]=this[Se]==1/0||this[Se]==-1/0?this[Se].toString():this[Se]):this[Se]!==ae.prototype[Se]&&(ge[Se]=this[Se]))}return ge},ae.prototype.clone=function(){return te(this.toJSON())},ae.prototype.validate=function(){if(!F.test(this.value)||this.expires!=1/0&&!(this.expires instanceof Date)&&!ve(this.expires)||this.maxAge!=null&&this.maxAge<=0||this.path!=null&&!V.test(this.path))return!1;var Ee=this.cdomain();if(Ee){if(Ee.match(/\.$/))return!1;var ke=I.getPublicSuffix(Ee);if(ke==null)return!1}return!0},ae.prototype.setExpires=function(Ee){Ee instanceof Date?this.expires=Ee:this.expires=ve(Ee)||"Infinity"},ae.prototype.setMaxAge=function(Ee){Ee===1/0||Ee===-1/0?this.maxAge=Ee.toString():this.maxAge=Ee},ae.prototype.cookieString=function(){var Ee=this.value;return Ee==null&&(Ee=""),this.key===""?Ee:this.key+"="+Ee},ae.prototype.toString=function(){var Ee=this.cookieString();return this.expires!=1/0&&(this.expires instanceof Date?Ee+="; Expires="+ye(this.expires):Ee+="; Expires="+this.expires),this.maxAge!=null&&this.maxAge!=1/0&&(Ee+="; Max-Age="+this.maxAge),this.domain&&!this.hostOnly&&(Ee+="; Domain="+this.domain),this.path&&(Ee+="; Path="+this.path),this.secure&&(Ee+="; Secure"),this.httpOnly&&(Ee+="; HttpOnly"),this.extensions&&this.extensions.forEach(function(ke){Ee+="; "+ke}),Ee},ae.prototype.TTL=function(Ee){if(this.maxAge!=null)return this.maxAge<=0?0:this.maxAge*1e3;var ke=this.expires;return ke!=1/0?(ke instanceof Date||(ke=ve(ke)||1/0),ke==1/0?1/0:ke.getTime()-(Ee||Date.now())):1/0},ae.prototype.expiryTime=function(Ee){if(this.maxAge!=null){var ke=Ee||this.creation||new Date,Se=this.maxAge<=0?-1/0:this.maxAge*1e3;return ke.getTime()+Se}return this.expires==1/0?1/0:this.expires.getTime()},ae.prototype.expiryDate=function(Ee){var ke=this.expiryTime(Ee);return ke==1/0?new Date(ne):ke==-1/0?new Date(ce):new Date(ke)},ae.prototype.isPersistent=function(){return this.maxAge!=null||this.expires!=1/0},ae.prototype.cdomain=ae.prototype.canonicalizedDomain=function(){return this.domain==null?null:_e(this.domain)};function Q(ge,Ee){typeof Ee=="boolean"?Ee={rejectPublicSuffixes:Ee}:Ee==null&&(Ee={}),Ee.rejectPublicSuffixes!=null&&(this.rejectPublicSuffixes=Ee.rejectPublicSuffixes),Ee.looseMode!=null&&(this.enableLooseMode=Ee.looseMode),ge||(ge=new T),this.store=ge}Q.prototype.store=null,Q.prototype.rejectPublicSuffixes=!0,Q.prototype.enableLooseMode=!1;var se=[];se.push("setCookie"),Q.prototype.setCookie=function(ge,Ee,ke,Se){var Ie,we=he(Ee);ke instanceof Function&&(Se=ke,ke={});var xe=_e(we.hostname),Fe=this.enableLooseMode;if(ke.loose!=null&&(Fe=ke.loose),ge instanceof ae||(ge=ae.parse(ge,{loose:Fe})),!ge)return Ie=new Error("Cookie failed to parse"),Se(ke.ignoreError?null:Ie);var Ge=ke.now||new Date;if(this.rejectPublicSuffixes&&ge.domain){var Oe=I.getPublicSuffix(ge.cdomain());if(Oe==null)return Ie=new Error("Cookie has domain set to a public suffix"),Se(ke.ignoreError?null:Ie)}if(ge.domain){if(!be(xe,ge.cdomain(),!1))return Ie=new Error("Cookie not in this host's domain. Cookie:"+ge.cdomain()+" Request:"+xe),Se(ke.ignoreError?null:Ie);ge.hostOnly==null&&(ge.hostOnly=!1)}else ge.hostOnly=!0,ge.domain=xe;if((!ge.path||ge.path[0]!=="/")&&(ge.path=Te(we.pathname),ge.pathIsDefault=!0),ke.http===!1&&ge.httpOnly)return Ie=new Error("Cookie is HttpOnly and this isn't an HTTP API"),Se(ke.ignoreError?null:Ie);var et=this.store;et.updateCookie||(et.updateCookie=function(dt,mt,Ut){this.putCookie(mt,Ut)});function Mt(dt,mt){if(dt)return Se(dt);var Ut=function(St){if(St)return Se(St);Se(null,ge)};if(mt){if(ke.http===!1&&mt.httpOnly)return dt=new Error("old Cookie is HttpOnly and this isn't an HTTP API"),Se(ke.ignoreError?null:dt);ge.creation=mt.creation,ge.creationIndex=mt.creationIndex,ge.lastAccessed=Ge,et.updateCookie(mt,ge,Ut)}else ge.creation=ge.lastAccessed=Ge,et.putCookie(ge,Ut)}et.findCookie(ge.domain,ge.path,ge.key,Mt)},se.push("getCookies"),Q.prototype.getCookies=function(ge,Ee,ke){var Se=he(ge);Ee instanceof Function&&(ke=Ee,Ee={});var Ie=_e(Se.hostname),we=Se.pathname||"/",xe=Ee.secure;xe==null&&Se.protocol&&(Se.protocol=="https:"||Se.protocol=="wss:")&&(xe=!0);var Fe=Ee.http;Fe==null&&(Fe=!0);var Ge=Ee.now||Date.now(),Oe=Ee.expire!==!1,et=!!Ee.allPaths,Mt=this.store;function dt(mt){if(mt.hostOnly){if(mt.domain!=Ie)return!1}else if(!be(Ie,mt.domain,!1))return!1;return!et&&!R(we,mt.path)||mt.secure&&!xe||mt.httpOnly&&!Fe?!1:Oe&&mt.expiryTime()<=Ge?(Mt.removeCookie(mt.domain,mt.path,mt.key,function(){}),!1):!0}Mt.findCookies(Ie,et?null:we,function(mt,Ut){if(mt)return ke(mt);Ut=Ut.filter(dt),Ee.sort!==!1&&(Ut=Ut.sort(oe));var St=new Date;Ut.forEach(function(vt){vt.lastAccessed=St}),ke(null,Ut)})},se.push("getCookieString"),Q.prototype.getCookieString=function(){var ge=Array.prototype.slice.call(arguments,0),Ee=ge.pop(),ke=function(Se,Ie){Se?Ee(Se):Ee(null,Ie.sort(oe).map(function(we){return we.cookieString()}).join("; "))};ge.push(ke),this.getCookies.apply(this,ge)},se.push("getSetCookieStrings"),Q.prototype.getSetCookieStrings=function(){var ge=Array.prototype.slice.call(arguments,0),Ee=ge.pop(),ke=function(Se,Ie){Se?Ee(Se):Ee(null,Ie.map(function(we){return we.toString()}))};ge.push(ke),this.getCookies.apply(this,ge)},se.push("serialize"),Q.prototype.serialize=function(ge){var Ee=this.store.constructor.name;Ee==="Object"&&(Ee=null);var ke={version:"tough-cookie@"+P,storeType:Ee,rejectPublicSuffixes:!!this.rejectPublicSuffixes,cookies:[]};if(!(this.store.getAllCookies&&typeof this.store.getAllCookies=="function"))return ge(new Error("store does not support getAllCookies and cannot be serialized"));this.store.getAllCookies(function(Se,Ie){return Se?ge(Se):(ke.cookies=Ie.map(function(we){return we=we instanceof ae?we.toJSON():we,delete we.creationIndex,we}),ge(null,ke))})},Q.prototype.toJSON=function(){return this.serializeSync()},se.push("_importCookies"),Q.prototype._importCookies=function(ge,Ee){var ke=this,Se=ge.cookies;if(!Se||!Array.isArray(Se))return Ee(new Error("serialized jar has no cookies array"));Se=Se.slice();function Ie(we){if(we)return Ee(we);if(!Se.length)return Ee(we,ke);var xe;try{xe=te(Se.shift())}catch(Fe){return Ee(Fe)}if(xe===null)return Ie(null);ke.store.putCookie(xe,Ie)}Ie()},Q.deserialize=function(ge,Ee,ke){arguments.length!==3&&(ke=Ee,Ee=null);var Se;if(typeof ge=="string"){if(Se=Y(ge),Se instanceof Error)return ke(Se)}else Se=ge;var Ie=new Q(Ee,Se.rejectPublicSuffixes);Ie._importCookies(Se,function(we){if(we)return ke(we);ke(null,Ie)})},Q.deserializeSync=function(ge,Ee){var ke=typeof ge=="string"?JSON.parse(ge):ge,Se=new Q(Ee,ke.rejectPublicSuffixes);if(!Se.store.synchronous)throw new Error("CookieJar store is not synchronous; use async API instead.");return Se._importCookiesSync(ke),Se},Q.fromJSON=Q.deserializeSync,Q.prototype.clone=function(ge,Ee){arguments.length===1&&(Ee=ge,ge=null),this.serialize(function(ke,Se){if(ke)return Ee(ke);Q.deserialize(Se,ge,Ee)})},se.push("removeAllCookies"),Q.prototype.removeAllCookies=function(ge){var Ee=this.store;if(Ee.removeAllCookies instanceof Function&&Ee.removeAllCookies!==B.prototype.removeAllCookies)return Ee.removeAllCookies(ge);Ee.getAllCookies(function(ke,Se){if(ke)return ge(ke);if(Se.length===0)return ge(null);var Ie=0,we=[];function xe(Fe){if(Fe&&we.push(Fe),Ie++,Ie===Se.length)return ge(we.length?we[0]:null)}Se.forEach(function(Fe){Ee.removeCookie(Fe.domain,Fe.path,Fe.key,xe)})})},Q.prototype._cloneSync=Ae("clone"),Q.prototype.cloneSync=function(ge){if(!ge.synchronous)throw new Error("CookieJar clone destination store is not synchronous; use async API instead.");return this._cloneSync(ge)};function Ae(ge){return function(){if(!this.store.synchronous)throw new Error("CookieJar store is not synchronous; use async API instead.");var Ee=Array.prototype.slice.call(arguments),ke,Se;if(Ee.push(function(we,xe){ke=we,Se=xe}),this[ge].apply(this,Ee),ke)throw ke;return Se}}return se.forEach(function(ge){Q.prototype[ge+"Sync"]=Ae(ge)}),cookie.version=P,cookie.CookieJar=Q,cookie.Cookie=ae,cookie.Store=B,cookie.MemoryCookieStore=T,cookie.parseDate=ve,cookie.formatDate=ye,cookie.parse=z,cookie.fromJSON=te,cookie.domainMatch=be,cookie.defaultPath=Te,cookie.pathMatch=R,cookie.getPublicSuffix=I.getPublicSuffix,cookie.cookieCompare=oe,cookie.permuteDomain=requirePermuteDomain().permuteDomain,cookie.permutePath=le,cookie.canonicalDomain=_e,cookie}var hasRequiredCookies;function requireCookies(){if(hasRequiredCookies)return cookies;hasRequiredCookies=1;var E=requireCookie(),A=E.Cookie,_=E.CookieJar;cookies.parse=function(B){if(B&&B.uri&&(B=B.uri),typeof B!="string")throw new Error("The cookie function only accepts STRING as param");return A.parse(B,{loose:!0})};function I(B){var T=this;T._jar=new _(B,{looseMode:!0})}return I.prototype.setCookie=function(B,T,R){var P=this;return P._jar.setCookieSync(B,T,R||{})},I.prototype.getCookieString=function(B){var T=this;return T._jar.getCookieStringSync(B)},I.prototype.getCookies=function(B){var T=this;return T._jar.getCookiesSync(B)},cookies.jar=function(B){return new I(B)},cookies}var helpers={},stringify={exports:{}},hasRequiredStringify;function requireStringify(){return hasRequiredStringify||(hasRequiredStringify=1,(function(E,A){A=E.exports=_,A.getSerialize=I;function _(B,T,R,P){return JSON.stringify(B,I(T,P),R)}function I(B,T){var R=[],P=[];return T==null&&(T=function(D,F){return R[0]===F?"[Circular ~]":"[Circular ~."+P.slice(0,R.indexOf(F)).join(".")+"]"}),function(D,F){if(R.length>0){var L=R.indexOf(this);~L?R.splice(L+1):R.push(this),~L?P.splice(L,1/0,D):P.push(D),~R.indexOf(F)&&(F=T.call(this,D,F))}else R.push(F);return B==null?F:B.call(this,D,F)}}})(stringify,stringify.exports)),stringify.exports}var hasRequiredHelpers;function requireHelpers(){if(hasRequiredHelpers)return helpers;hasRequiredHelpers=1;var E=requireStringify(),A=requireCryptoBrowserify(),_=requireSafeBuffer$1().Buffer,I=typeof setImmediate>"u"?process$1.nextTick:setImmediate;function B(U){return U.body||U.requestBodyStream||U.json&&typeof U.json!="boolean"||U.multipart}function T(U,V){var K;try{K=JSON.stringify(U,V)}catch{K=E(U,V)}return K}function R(U){return A.createHash("md5").update(U).digest("hex")}function P(U){return U.readable&&U.path&&U.mode}function D(U){return _.from(U||"","utf8").toString("base64")}function F(U){var V={};return Object.keys(U).forEach(function(K){V[K]=U[K]}),V}function L(){var U=process$1.version.replace("v","").split(".");return{major:parseInt(U[0],10),minor:parseInt(U[1],10),patch:parseInt(U[2],10)}}return helpers.paramsHaveRequestBody=B,helpers.safeStringify=T,helpers.md5=R,helpers.isReadStream=P,helpers.toBase64=D,helpers.copy=F,helpers.version=L,helpers.defer=I,helpers}var streamHttp={},request$1={exports:{}},capability={},hasRequiredCapability;function requireCapability(){return hasRequiredCapability||(hasRequiredCapability=1,(function(E){E.fetch=B(commonjsGlobal.fetch)&&B(commonjsGlobal.ReadableStream),E.writableStream=B(commonjsGlobal.WritableStream),E.abortController=B(commonjsGlobal.AbortController);var A;function _(){if(A!==void 0)return A;if(commonjsGlobal.XMLHttpRequest){A=new commonjsGlobal.XMLHttpRequest;try{A.open("GET",commonjsGlobal.XDomainRequest?"/":"https://example.com")}catch{A=null}}else A=null;return A}function I(T){var R=_();if(!R)return!1;try{return R.responseType=T,R.responseType===T}catch{}return!1}E.arraybuffer=E.fetch||I("arraybuffer"),E.msstream=!E.fetch&&I("ms-stream"),E.mozchunkedarraybuffer=!E.fetch&&I("moz-chunked-arraybuffer"),E.overrideMimeType=E.fetch||(_()?B(_().overrideMimeType):!1);function B(T){return typeof T=="function"}A=null})(capability)),capability}var response={},readableBrowser={exports:{}},hasRequiredReadableBrowser;function requireReadableBrowser(){return hasRequiredReadableBrowser||(hasRequiredReadableBrowser=1,(function(E,A){A=E.exports=require_stream_readable$1(),A.Stream=A,A.Readable=A,A.Writable=require_stream_writable$1(),A.Duplex=require_stream_duplex$1(),A.Transform=require_stream_transform$1(),A.PassThrough=require_stream_passthrough$1(),A.finished=requireEndOfStream(),A.pipeline=requirePipeline()})(readableBrowser,readableBrowser.exports)),readableBrowser.exports}var hasRequiredResponse;function requireResponse(){if(hasRequiredResponse)return response;hasRequiredResponse=1;var E=requireCapability(),A=requireInherits_browser(),_=requireReadableBrowser(),I=response.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},B=response.IncomingMessage=function(T,R,P,D){var F=this;if(_.Readable.call(F),F._mode=P,F.headers={},F.rawHeaders=[],F.trailers={},F.rawTrailers=[],F.on("end",function(){process$1.nextTick(function(){F.emit("close")})}),P==="fetch"){let ee=function(){U.read().then(function(ie){if(!F._destroyed){if(D(ie.done),ie.done){F.push(null);return}F.push(Buffer$1.from(ie.value)),ee()}}).catch(function(ie){D(!0),F._destroyed||F.emit("error",ie)})};if(F._fetchResponse=R,F.url=R.url,F.statusCode=R.status,F.statusMessage=R.statusText,R.headers.forEach(function(ie,ne){F.headers[ne.toLowerCase()]=ie,F.rawHeaders.push(ne,ie)}),E.writableStream){var L=new WritableStream({write:function(ie){return D(!1),new Promise(function(ne,ce){F._destroyed?ce():F.push(Buffer$1.from(ie))?ne():F._resumeFetch=ne})},close:function(){D(!0),F._destroyed||F.push(null)},abort:function(ie){D(!0),F._destroyed||F.emit("error",ie)}});try{R.body.pipeTo(L).catch(function(ie){D(!0),F._destroyed||F.emit("error",ie)});return}catch{}}var U=R.body.getReader();ee()}else{F._xhr=T,F._pos=0,F.url=T.responseURL,F.statusCode=T.status,F.statusMessage=T.statusText;var V=T.getAllResponseHeaders().split(/\r?\n/);if(V.forEach(function(ee){var ie=ee.match(/^([^:]+):\s*(.*)/);if(ie){var ne=ie[1].toLowerCase();ne==="set-cookie"?(F.headers[ne]===void 0&&(F.headers[ne]=[]),F.headers[ne].push(ie[2])):F.headers[ne]!==void 0?F.headers[ne]+=", "+ie[2]:F.headers[ne]=ie[2],F.rawHeaders.push(ie[1],ie[2])}}),F._charset="x-user-defined",!E.overrideMimeType){var K=F.rawHeaders["mime-type"];if(K){var J=K.match(/;\s*charset=([^;])(;|$)/);J&&(F._charset=J[1].toLowerCase())}F._charset||(F._charset="utf-8")}}};return A(B,_.Readable),B.prototype._read=function(){var T=this,R=T._resumeFetch;R&&(T._resumeFetch=null,R())},B.prototype._onXHRProgress=function(T){var R=this,P=R._xhr,D=null;switch(R._mode){case"text":if(D=P.responseText,D.length>R._pos){var F=D.substr(R._pos);if(R._charset==="x-user-defined"){for(var L=Buffer$1.alloc(F.length),U=0;U<F.length;U++)L[U]=F.charCodeAt(U)&255;R.push(L)}else R.push(F,R._charset);R._pos=D.length}break;case"arraybuffer":if(P.readyState!==I.DONE||!P.response)break;D=P.response,R.push(Buffer$1.from(new Uint8Array(D)));break;case"moz-chunked-arraybuffer":if(D=P.response,P.readyState!==I.LOADING||!D)break;R.push(Buffer$1.from(new Uint8Array(D)));break;case"ms-stream":if(D=P.response,P.readyState!==I.LOADING)break;var V=new commonjsGlobal.MSStreamReader;V.onprogress=function(){V.result.byteLength>R._pos&&(R.push(Buffer$1.from(new Uint8Array(V.result.slice(R._pos)))),R._pos=V.result.byteLength)},V.onload=function(){T(!0),R.push(null)},V.readAsArrayBuffer(D);break}R._xhr.readyState===I.DONE&&R._mode!=="ms-stream"&&(T(!0),R.push(null))},response}var hasRequiredRequest$2;function requireRequest$2(){if(hasRequiredRequest$2)return request$1.exports;hasRequiredRequest$2=1;var E=requireCapability(),A=requireInherits_browser(),_=requireResponse(),I=requireReadableBrowser(),B=_.IncomingMessage,T=_.readyStates;function R(L,U){return E.fetch&&U?"fetch":E.mozchunkedarraybuffer?"moz-chunked-arraybuffer":E.msstream?"ms-stream":E.arraybuffer&&L?"arraybuffer":"text"}var P=request$1.exports=function(L){var U=this;I.Writable.call(U),U._opts=L,U._body=[],U._headers={},L.auth&&U.setHeader("Authorization","Basic "+Buffer$1.from(L.auth).toString("base64")),Object.keys(L.headers).forEach(function(J){U.setHeader(J,L.headers[J])});var V,K=!0;if(L.mode==="disable-fetch"||"requestTimeout"in L&&!E.abortController)K=!1,V=!0;else if(L.mode==="prefer-streaming")V=!1;else if(L.mode==="allow-wrong-content-type")V=!E.overrideMimeType;else if(!L.mode||L.mode==="default"||L.mode==="prefer-fast")V=!0;else throw new Error("Invalid value for opts.mode");U._mode=R(V,K),U._fetchTimer=null,U._socketTimeout=null,U._socketTimer=null,U.on("finish",function(){U._onFinish()})};A(P,I.Writable),P.prototype.setHeader=function(L,U){var V=this,K=L.toLowerCase();F.indexOf(K)===-1&&(V._headers[K]={name:L,value:U})},P.prototype.getHeader=function(L){var U=this._headers[L.toLowerCase()];return U?U.value:null},P.prototype.removeHeader=function(L){var U=this;delete U._headers[L.toLowerCase()]},P.prototype._onFinish=function(){var L=this;if(!L._destroyed){var U=L._opts;"timeout"in U&&U.timeout!==0&&L.setTimeout(U.timeout);var V=L._headers,K=null;U.method!=="GET"&&U.method!=="HEAD"&&(K=new Blob(L._body,{type:(V["content-type"]||{}).value||""}));var J=[];if(Object.keys(V).forEach(function(ce){var fe=V[ce].name,de=V[ce].value;Array.isArray(de)?de.forEach(function(pe){J.push([fe,pe])}):J.push([fe,de])}),L._mode==="fetch"){var ee=null;if(E.abortController){var ie=new AbortController;ee=ie.signal,L._fetchAbortController=ie,"requestTimeout"in U&&U.requestTimeout!==0&&(L._fetchTimer=commonjsGlobal.setTimeout(function(){L.emit("requestTimeout"),L._fetchAbortController&&L._fetchAbortController.abort()},U.requestTimeout))}commonjsGlobal.fetch(L._opts.url,{method:L._opts.method,headers:J,body:K||void 0,mode:"cors",credentials:U.withCredentials?"include":"same-origin",signal:ee}).then(function(ce){L._fetchResponse=ce,L._resetTimers(!1),L._connect()},function(ce){L._resetTimers(!0),L._destroyed||L.emit("error",ce)})}else{var ne=L._xhr=new commonjsGlobal.XMLHttpRequest;try{ne.open(L._opts.method,L._opts.url,!0)}catch(ce){process$1.nextTick(function(){L.emit("error",ce)});return}"responseType"in ne&&(ne.responseType=L._mode),"withCredentials"in ne&&(ne.withCredentials=!!U.withCredentials),L._mode==="text"&&"overrideMimeType"in ne&&ne.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in U&&(ne.timeout=U.requestTimeout,ne.ontimeout=function(){L.emit("requestTimeout")}),J.forEach(function(ce){ne.setRequestHeader(ce[0],ce[1])}),L._response=null,ne.onreadystatechange=function(){switch(ne.readyState){case T.LOADING:case T.DONE:L._onXHRProgress();break}},L._mode==="moz-chunked-arraybuffer"&&(ne.onprogress=function(){L._onXHRProgress()}),ne.onerror=function(){L._destroyed||(L._resetTimers(!0),L.emit("error",new Error("XHR error")))};try{ne.send(K)}catch(ce){process$1.nextTick(function(){L.emit("error",ce)});return}}}};function D(L){try{var U=L.status;return U!==null&&U!==0}catch{return!1}}P.prototype._onXHRProgress=function(){var L=this;L._resetTimers(!1),!(!D(L._xhr)||L._destroyed)&&(L._response||L._connect(),L._response._onXHRProgress(L._resetTimers.bind(L)))},P.prototype._connect=function(){var L=this;L._destroyed||(L._response=new B(L._xhr,L._fetchResponse,L._mode,L._resetTimers.bind(L)),L._response.on("error",function(U){L.emit("error",U)}),L.emit("response",L._response))},P.prototype._write=function(L,U,V){var K=this;K._body.push(L),V()},P.prototype._resetTimers=function(L){var U=this;commonjsGlobal.clearTimeout(U._socketTimer),U._socketTimer=null,L?(commonjsGlobal.clearTimeout(U._fetchTimer),U._fetchTimer=null):U._socketTimeout&&(U._socketTimer=commonjsGlobal.setTimeout(function(){U.emit("timeout")},U._socketTimeout))},P.prototype.abort=P.prototype.destroy=function(L){var U=this;U._destroyed=!0,U._resetTimers(!0),U._response&&(U._response._destroyed=!0),U._xhr?U._xhr.abort():U._fetchAbortController&&U._fetchAbortController.abort(),L&&U.emit("error",L)},P.prototype.end=function(L,U,V){var K=this;typeof L=="function"&&(V=L,L=void 0),I.Writable.prototype.end.call(K,L,U,V)},P.prototype.setTimeout=function(L,U){var V=this;U&&V.once("timeout",U),V._socketTimeout=L,V._resetTimers(!1)},P.prototype.flushHeaders=function(){},P.prototype.setNoDelay=function(){},P.prototype.setSocketKeepAlive=function(){};var F=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"];return request$1.exports}var immutable,hasRequiredImmutable;function requireImmutable(){if(hasRequiredImmutable)return immutable;hasRequiredImmutable=1,immutable=A;var E=Object.prototype.hasOwnProperty;function A(){for(var _={},I=0;I<arguments.length;I++){var B=arguments[I];for(var T in B)E.call(B,T)&&(_[T]=B[T])}return _}return immutable}var browser$2,hasRequiredBrowser$2;function requireBrowser$2(){return hasRequiredBrowser$2||(hasRequiredBrowser$2=1,browser$2={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}),browser$2}var hasRequiredStreamHttp;function requireStreamHttp(){return hasRequiredStreamHttp||(hasRequiredStreamHttp=1,(function(E){var A=requireRequest$2(),_=requireResponse(),I=requireImmutable(),B=requireBrowser$2(),T=require$$2$1,R=E;R.request=function(P,D){typeof P=="string"?P=T.parse(P):P=I(P);var F=commonjsGlobal.location.protocol.search(/^https?:$/)===-1?"http:":"",L=P.protocol||F,U=P.hostname||P.host,V=P.port,K=P.path||"/";U&&U.indexOf(":")!==-1&&(U="["+U+"]"),P.url=(U?L+"//"+U:"")+(V?":"+V:"")+K,P.method=(P.method||"GET").toUpperCase(),P.headers=P.headers||{};var J=new A(P);return D&&J.on("response",D),J},R.get=function(D,F){var L=R.request(D,F);return L.end(),L},R.ClientRequest=A,R.IncomingMessage=_.IncomingMessage,R.Agent=function(){},R.Agent.defaultMaxSockets=4,R.globalAgent=new R.Agent,R.STATUS_CODES=B,R.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]})(streamHttp)),streamHttp}var httpsBrowserify={exports:{}},hasRequiredHttpsBrowserify;function requireHttpsBrowserify(){return hasRequiredHttpsBrowserify||(hasRequiredHttpsBrowserify=1,(function(E){var A=requireStreamHttp(),_=require$$2$1,I=E.exports;for(var B in A)A.hasOwnProperty(B)&&(I[B]=A[B]);I.request=function(R,P){return R=T(R),A.request.call(this,R,P)},I.get=function(R,P){return R=T(R),A.get.call(this,R,P)};function T(R){if(typeof R=="string"&&(R=_.parse(R)),R.protocol||(R.protocol="https:"),R.protocol!=="https:")throw new Error('Protocol "'+R.protocol+'" not supported. Expected "https:"');return R}})(httpsBrowserify)),httpsBrowserify.exports}var lib$5={},binding={},assert={exports:{}},errors$2={},hasRequiredErrors$2;function requireErrors$2(){if(hasRequiredErrors$2)return errors$2;hasRequiredErrors$2=1;function E(ce){"@babel/helpers - typeof";return E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(fe){return typeof fe}:function(fe){return fe&&typeof Symbol=="function"&&fe.constructor===Symbol&&fe!==Symbol.prototype?"symbol":typeof fe},E(ce)}function A(ce,fe,de){return Object.defineProperty(ce,"prototype",{writable:!1}),ce}function _(ce,fe){if(!(ce instanceof fe))throw new TypeError("Cannot call a class as a function")}function I(ce,fe){if(typeof fe!="function"&&fe!==null)throw new TypeError("Super expression must either be null or a function");ce.prototype=Object.create(fe&&fe.prototype,{constructor:{value:ce,writable:!0,configurable:!0}}),Object.defineProperty(ce,"prototype",{writable:!1}),fe&&B(ce,fe)}function B(ce,fe){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(pe,ve){return pe.__proto__=ve,pe},B(ce,fe)}function T(ce){var fe=D();return function(){var pe=F(ce),ve;if(fe){var ye=F(this).constructor;ve=Reflect.construct(pe,arguments,ye)}else ve=pe.apply(this,arguments);return R(this,ve)}}function R(ce,fe){if(fe&&(E(fe)==="object"||typeof fe=="function"))return fe;if(fe!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return P(ce)}function P(ce){if(ce===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ce}function D(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function F(ce){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(de){return de.__proto__||Object.getPrototypeOf(de)},F(ce)}var L={},U,V;function K(ce,fe,de){de||(de=Error);function pe(ye,_e,be){return typeof fe=="string"?fe:fe(ye,_e,be)}var ve=(function(ye){I(be,ye);var _e=T(be);function be(Te,ue,O){var z;return _(this,be),z=_e.call(this,pe(Te,ue,O)),z.code=ce,z}return A(be)})(de);L[ce]=ve}function J(ce,fe){if(Array.isArray(ce)){var de=ce.length;return ce=ce.map(function(pe){return String(pe)}),de>2?"one of ".concat(fe," ").concat(ce.slice(0,de-1).join(", "),", or ")+ce[de-1]:de===2?"one of ".concat(fe," ").concat(ce[0]," or ").concat(ce[1]):"of ".concat(fe," ").concat(ce[0])}else return"of ".concat(fe," ").concat(String(ce))}function ee(ce,fe,de){return ce.substr(0,fe.length)===fe}function ie(ce,fe,de){return(de===void 0||de>ce.length)&&(de=ce.length),ce.substring(de-fe.length,de)===fe}function ne(ce,fe,de){return typeof de!="number"&&(de=0),de+fe.length>ce.length?!1:ce.indexOf(fe,de)!==-1}return K("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),K("ERR_INVALID_ARG_TYPE",function(ce,fe,de){U===void 0&&(U=requireAssert$1()),U(typeof ce=="string","'name' must be a string");var pe;typeof fe=="string"&&ee(fe,"not ")?(pe="must not be",fe=fe.replace(/^not /,"")):pe="must be";var ve;if(ie(ce," argument"))ve="The ".concat(ce," ").concat(pe," ").concat(J(fe,"type"));else{var ye=ne(ce,".")?"property":"argument";ve='The "'.concat(ce,'" ').concat(ye," ").concat(pe," ").concat(J(fe,"type"))}return ve+=". Received type ".concat(E(de)),ve},TypeError),K("ERR_INVALID_ARG_VALUE",function(ce,fe){var de=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";V===void 0&&(V=requireUtil$3());var pe=V.inspect(fe);return pe.length>128&&(pe="".concat(pe.slice(0,128),"...")),"The argument '".concat(ce,"' ").concat(de,". Received ").concat(pe)},TypeError),K("ERR_INVALID_RETURN_VALUE",function(ce,fe,de){var pe;return de&&de.constructor&&de.constructor.name?pe="instance of ".concat(de.constructor.name):pe="type ".concat(E(de)),"Expected ".concat(ce,' to be returned from the "').concat(fe,'"')+" function but got ".concat(pe,".")},TypeError),K("ERR_MISSING_ARGS",function(){for(var ce=arguments.length,fe=new Array(ce),de=0;de<ce;de++)fe[de]=arguments[de];U===void 0&&(U=requireAssert$1()),U(fe.length>0,"At least one arg needs to be specified");var pe="The ",ve=fe.length;switch(fe=fe.map(function(ye){return'"'.concat(ye,'"')}),ve){case 1:pe+="".concat(fe[0]," argument");break;case 2:pe+="".concat(fe[0]," and ").concat(fe[1]," arguments");break;default:pe+=fe.slice(0,ve-1).join(", "),pe+=", and ".concat(fe[ve-1]," arguments");break}return"".concat(pe," must be specified")},TypeError),errors$2.codes=L,errors$2}var assertion_error,hasRequiredAssertion_error;function requireAssertion_error(){if(hasRequiredAssertion_error)return assertion_error;hasRequiredAssertion_error=1;function E(ae,Q){var se=Object.keys(ae);if(Object.getOwnPropertySymbols){var Ae=Object.getOwnPropertySymbols(ae);Q&&(Ae=Ae.filter(function(ge){return Object.getOwnPropertyDescriptor(ae,ge).enumerable})),se.push.apply(se,Ae)}return se}function A(ae){for(var Q=1;Q<arguments.length;Q++){var se=arguments[Q]!=null?arguments[Q]:{};Q%2?E(Object(se),!0).forEach(function(Ae){_(ae,Ae,se[Ae])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ae,Object.getOwnPropertyDescriptors(se)):E(Object(se)).forEach(function(Ae){Object.defineProperty(ae,Ae,Object.getOwnPropertyDescriptor(se,Ae))})}return ae}function _(ae,Q,se){return Q=R(Q),Q in ae?Object.defineProperty(ae,Q,{value:se,enumerable:!0,configurable:!0,writable:!0}):ae[Q]=se,ae}function I(ae,Q){if(!(ae instanceof Q))throw new TypeError("Cannot call a class as a function")}function B(ae,Q){for(var se=0;se<Q.length;se++){var Ae=Q[se];Ae.enumerable=Ae.enumerable||!1,Ae.configurable=!0,"value"in Ae&&(Ae.writable=!0),Object.defineProperty(ae,R(Ae.key),Ae)}}function T(ae,Q,se){return Q&&B(ae.prototype,Q),Object.defineProperty(ae,"prototype",{writable:!1}),ae}function R(ae){var Q=P(ae,"string");return ce(Q)==="symbol"?Q:String(Q)}function P(ae,Q){if(ce(ae)!=="object"||ae===null)return ae;var se=ae[Symbol.toPrimitive];if(se!==void 0){var Ae=se.call(ae,Q);if(ce(Ae)!=="object")return Ae;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(ae)}function D(ae,Q){if(typeof Q!="function"&&Q!==null)throw new TypeError("Super expression must either be null or a function");ae.prototype=Object.create(Q&&Q.prototype,{constructor:{value:ae,writable:!0,configurable:!0}}),Object.defineProperty(ae,"prototype",{writable:!1}),Q&&ie(ae,Q)}function F(ae){var Q=J();return function(){var Ae=ne(ae),ge;if(Q){var Ee=ne(this).constructor;ge=Reflect.construct(Ae,arguments,Ee)}else ge=Ae.apply(this,arguments);return L(this,ge)}}function L(ae,Q){if(Q&&(ce(Q)==="object"||typeof Q=="function"))return Q;if(Q!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return U(ae)}function U(ae){if(ae===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ae}function V(ae){var Q=typeof Map=="function"?new Map:void 0;return V=function(Ae){if(Ae===null||!ee(Ae))return Ae;if(typeof Ae!="function")throw new TypeError("Super expression must either be null or a function");if(typeof Q<"u"){if(Q.has(Ae))return Q.get(Ae);Q.set(Ae,ge)}function ge(){return K(Ae,arguments,ne(this).constructor)}return ge.prototype=Object.create(Ae.prototype,{constructor:{value:ge,enumerable:!1,writable:!0,configurable:!0}}),ie(ge,Ae)},V(ae)}function K(ae,Q,se){return J()?K=Reflect.construct.bind():K=function(ge,Ee,ke){var Se=[null];Se.push.apply(Se,Ee);var Ie=Function.bind.apply(ge,Se),we=new Ie;return ke&&ie(we,ke.prototype),we},K.apply(null,arguments)}function J(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ee(ae){return Function.toString.call(ae).indexOf("[native code]")!==-1}function ie(ae,Q){return ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Ae,ge){return Ae.__proto__=ge,Ae},ie(ae,Q)}function ne(ae){return ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(se){return se.__proto__||Object.getPrototypeOf(se)},ne(ae)}function ce(ae){"@babel/helpers - typeof";return ce=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Q){return typeof Q}:function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q},ce(ae)}var fe=requireUtil$3(),de=fe.inspect,pe=requireErrors$2(),ve=pe.codes.ERR_INVALID_ARG_TYPE;function ye(ae,Q,se){return(se===void 0||se>ae.length)&&(se=ae.length),ae.substring(se-Q.length,se)===Q}function _e(ae,Q){if(Q=Math.floor(Q),ae.length==0||Q==0)return"";var se=ae.length*Q;for(Q=Math.floor(Math.log(Q)/Math.log(2));Q;)ae+=ae,Q--;return ae+=ae.substring(0,se-ae.length),ae}var be="",Te="",ue="",O="",z={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},Y=10;function te(ae){var Q=Object.keys(ae),se=Object.create(Object.getPrototypeOf(ae));return Q.forEach(function(Ae){se[Ae]=ae[Ae]}),Object.defineProperty(se,"message",{value:ae.message}),se}function oe(ae){return de(ae,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function le(ae,Q,se){var Ae="",ge="",Ee=0,ke="",Se=!1,Ie=oe(ae),we=Ie.split(`
`),xe=oe(Q).split(`
`),Fe=0,Ge="";if(se==="strictEqual"&&ce(ae)==="object"&&ce(Q)==="object"&&ae!==null&&Q!==null&&(se="strictEqualObject"),we.length===1&&xe.length===1&&we[0]!==xe[0]){var Oe=we[0].length+xe[0].length;if(Oe<=Y){if((ce(ae)!=="object"||ae===null)&&(ce(Q)!=="object"||Q===null)&&(ae!==0||Q!==0))return"".concat(z[se],`

`)+"".concat(we[0]," !== ").concat(xe[0],`
`)}else if(se!=="strictEqualObject"){var et=process$1.stderr&&process$1.stderr.isTTY?process$1.stderr.columns:80;if(Oe<et){for(;we[0][Fe]===xe[0][Fe];)Fe++;Fe>2&&(Ge=`
  `.concat(_e(" ",Fe),"^"),Fe=0)}}}for(var Mt=we[we.length-1],dt=xe[xe.length-1];Mt===dt&&(Fe++<2?ke=`
  `.concat(Mt).concat(ke):Ae=Mt,we.pop(),xe.pop(),!(we.length===0||xe.length===0));)Mt=we[we.length-1],dt=xe[xe.length-1];var mt=Math.max(we.length,xe.length);if(mt===0){var Ut=Ie.split(`
`);if(Ut.length>30)for(Ut[26]="".concat(be,"...").concat(O);Ut.length>27;)Ut.pop();return"".concat(z.notIdentical,`

`).concat(Ut.join(`
`),`
`)}Fe>3&&(ke=`
`.concat(be,"...").concat(O).concat(ke),Se=!0),Ae!==""&&(ke=`
  `.concat(Ae).concat(ke),Ae="");var St=0,vt=z[se]+`
`.concat(Te,"+ actual").concat(O," ").concat(ue,"- expected").concat(O),It=" ".concat(be,"...").concat(O," Lines skipped");for(Fe=0;Fe<mt;Fe++){var yt=Fe-Ee;if(we.length<Fe+1)yt>1&&Fe>2&&(yt>4?(ge+=`
`.concat(be,"...").concat(O),Se=!0):yt>3&&(ge+=`
  `.concat(xe[Fe-2]),St++),ge+=`
  `.concat(xe[Fe-1]),St++),Ee=Fe,Ae+=`
`.concat(ue,"-").concat(O," ").concat(xe[Fe]),St++;else if(xe.length<Fe+1)yt>1&&Fe>2&&(yt>4?(ge+=`
`.concat(be,"...").concat(O),Se=!0):yt>3&&(ge+=`
  `.concat(we[Fe-2]),St++),ge+=`
  `.concat(we[Fe-1]),St++),Ee=Fe,ge+=`
`.concat(Te,"+").concat(O," ").concat(we[Fe]),St++;else{var Tt=xe[Fe],Wt=we[Fe],ft=Wt!==Tt&&(!ye(Wt,",")||Wt.slice(0,-1)!==Tt);ft&&ye(Tt,",")&&Tt.slice(0,-1)===Wt&&(ft=!1,Wt+=","),ft?(yt>1&&Fe>2&&(yt>4?(ge+=`
`.concat(be,"...").concat(O),Se=!0):yt>3&&(ge+=`
  `.concat(we[Fe-2]),St++),ge+=`
  `.concat(we[Fe-1]),St++),Ee=Fe,ge+=`
`.concat(Te,"+").concat(O," ").concat(Wt),Ae+=`
`.concat(ue,"-").concat(O," ").concat(Tt),St+=2):(ge+=Ae,Ae="",(yt===1||Fe===0)&&(ge+=`
  `.concat(Wt),St++))}if(St>20&&Fe<mt-2)return"".concat(vt).concat(It,`
`).concat(ge,`
`).concat(be,"...").concat(O).concat(Ae,`
`)+"".concat(be,"...").concat(O)}return"".concat(vt).concat(Se?It:"",`
`).concat(ge).concat(Ae).concat(ke).concat(Ge)}var he=(function(ae,Q){D(Ae,ae);var se=F(Ae);function Ae(ge){var Ee;if(I(this,Ae),ce(ge)!=="object"||ge===null)throw new ve("options","Object",ge);var ke=ge.message,Se=ge.operator,Ie=ge.stackStartFn,we=ge.actual,xe=ge.expected,Fe=Error.stackTraceLimit;if(Error.stackTraceLimit=0,ke!=null)Ee=se.call(this,String(ke));else if(process$1.stderr&&process$1.stderr.isTTY&&(process$1.stderr&&process$1.stderr.getColorDepth&&process$1.stderr.getColorDepth()!==1?(be="\x1B[34m",Te="\x1B[32m",O="\x1B[39m",ue="\x1B[31m"):(be="",Te="",O="",ue="")),ce(we)==="object"&&we!==null&&ce(xe)==="object"&&xe!==null&&"stack"in we&&we instanceof Error&&"stack"in xe&&xe instanceof Error&&(we=te(we),xe=te(xe)),Se==="deepStrictEqual"||Se==="strictEqual")Ee=se.call(this,le(we,xe,Se));else if(Se==="notDeepStrictEqual"||Se==="notStrictEqual"){var Ge=z[Se],Oe=oe(we).split(`
`);if(Se==="notStrictEqual"&&ce(we)==="object"&&we!==null&&(Ge=z.notStrictEqualObject),Oe.length>30)for(Oe[26]="".concat(be,"...").concat(O);Oe.length>27;)Oe.pop();Oe.length===1?Ee=se.call(this,"".concat(Ge," ").concat(Oe[0])):Ee=se.call(this,"".concat(Ge,`

`).concat(Oe.join(`
`),`
`))}else{var et=oe(we),Mt="",dt=z[Se];Se==="notDeepEqual"||Se==="notEqual"?(et="".concat(z[Se],`

`).concat(et),et.length>1024&&(et="".concat(et.slice(0,1021),"..."))):(Mt="".concat(oe(xe)),et.length>512&&(et="".concat(et.slice(0,509),"...")),Mt.length>512&&(Mt="".concat(Mt.slice(0,509),"...")),Se==="deepEqual"||Se==="equal"?et="".concat(dt,`

`).concat(et,`

should equal

`):Mt=" ".concat(Se," ").concat(Mt)),Ee=se.call(this,"".concat(et).concat(Mt))}return Error.stackTraceLimit=Fe,Ee.generatedMessage=!ke,Object.defineProperty(U(Ee),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),Ee.code="ERR_ASSERTION",Ee.actual=we,Ee.expected=xe,Ee.operator=Se,Error.captureStackTrace&&Error.captureStackTrace(U(Ee),Ie),Ee.stack,Ee.name="AssertionError",L(Ee)}return T(Ae,[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:Q,value:function(Ee,ke){return de(this,A(A({},ke),{},{customInspect:!1,depth:0}))}}]),Ae})(V(Error),de.custom);return assertion_error=he,assertion_error}var isArguments,hasRequiredIsArguments;function requireIsArguments(){if(hasRequiredIsArguments)return isArguments;hasRequiredIsArguments=1;var E=Object.prototype.toString;return isArguments=function(_){var I=E.call(_),B=I==="[object Arguments]";return B||(B=I!=="[object Array]"&&_!==null&&typeof _=="object"&&typeof _.length=="number"&&_.length>=0&&E.call(_.callee)==="[object Function]"),B},isArguments}var implementation$3,hasRequiredImplementation$3;function requireImplementation$3(){if(hasRequiredImplementation$3)return implementation$3;hasRequiredImplementation$3=1;var E;if(!Object.keys){var A=Object.prototype.hasOwnProperty,_=Object.prototype.toString,I=requireIsArguments(),B=Object.prototype.propertyIsEnumerable,T=!B.call({toString:null},"toString"),R=B.call(function(){},"prototype"),P=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],D=function(V){var K=V.constructor;return K&&K.prototype===V},F={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},L=(function(){if(typeof window>"u")return!1;for(var V in window)try{if(!F["$"+V]&&A.call(window,V)&&window[V]!==null&&typeof window[V]=="object")try{D(window[V])}catch{return!0}}catch{return!0}return!1})(),U=function(V){if(typeof window>"u"||!L)return D(V);try{return D(V)}catch{return!1}};E=function(K){var J=K!==null&&typeof K=="object",ee=_.call(K)==="[object Function]",ie=I(K),ne=J&&_.call(K)==="[object String]",ce=[];if(!J&&!ee&&!ie)throw new TypeError("Object.keys called on a non-object");var fe=R&&ee;if(ne&&K.length>0&&!A.call(K,0))for(var de=0;de<K.length;++de)ce.push(String(de));if(ie&&K.length>0)for(var pe=0;pe<K.length;++pe)ce.push(String(pe));else for(var ve in K)!(fe&&ve==="prototype")&&A.call(K,ve)&&ce.push(String(ve));if(T)for(var ye=U(K),_e=0;_e<P.length;++_e)!(ye&&P[_e]==="constructor")&&A.call(K,P[_e])&&ce.push(P[_e]);return ce}}return implementation$3=E,implementation$3}var objectKeys,hasRequiredObjectKeys;function requireObjectKeys(){if(hasRequiredObjectKeys)return objectKeys;hasRequiredObjectKeys=1;var E=Array.prototype.slice,A=requireIsArguments(),_=Object.keys,I=_?function(R){return _(R)}:requireImplementation$3(),B=Object.keys;return I.shim=function(){if(Object.keys){var R=(function(){var P=Object.keys(arguments);return P&&P.length===arguments.length})(1,2);R||(Object.keys=function(D){return A(D)?B(E.call(D)):B(D)})}else Object.keys=I;return Object.keys||I},objectKeys=I,objectKeys}var implementation$2,hasRequiredImplementation$2;function requireImplementation$2(){if(hasRequiredImplementation$2)return implementation$2;hasRequiredImplementation$2=1;var E=requireObjectKeys(),A=requireShams$1()(),_=requireCallBound$1(),I=requireEsObjectAtoms(),B=_("Array.prototype.push"),T=_("Object.prototype.propertyIsEnumerable"),R=A?I.getOwnPropertySymbols:null;return implementation$2=function(D,F){if(D==null)throw new TypeError("target must be an object");var L=I(D);if(arguments.length===1)return L;for(var U=1;U<arguments.length;++U){var V=I(arguments[U]),K=E(V),J=A&&(I.getOwnPropertySymbols||R);if(J)for(var ee=J(V),ie=0;ie<ee.length;++ie){var ne=ee[ie];T(V,ne)&&B(K,ne)}for(var ce=0;ce<K.length;++ce){var fe=K[ce];if(T(V,fe)){var de=V[fe];L[fe]=de}}}return L},implementation$2}var polyfill$2,hasRequiredPolyfill$2;function requirePolyfill$2(){if(hasRequiredPolyfill$2)return polyfill$2;hasRequiredPolyfill$2=1;var E=requireImplementation$2(),A=function(){if(!Object.assign)return!1;for(var I="abcdefghijklmnopqrst",B=I.split(""),T={},R=0;R<B.length;++R)T[B[R]]=B[R];var P=Object.assign({},T),D="";for(var F in P)D+=F;return I!==D},_=function(){if(!Object.assign||!Object.preventExtensions)return!1;var I=Object.preventExtensions({1:2});try{Object.assign(I,"xy")}catch{return I[1]==="y"}return!1};return polyfill$2=function(){return!Object.assign||A()||_()?E:Object.assign},polyfill$2}var implementation$1,hasRequiredImplementation$1;function requireImplementation$1(){if(hasRequiredImplementation$1)return implementation$1;hasRequiredImplementation$1=1;var E=function(A){return A!==A};return implementation$1=function(_,I){return _===0&&I===0?1/_===1/I:!!(_===I||E(_)&&E(I))},implementation$1}var polyfill$1,hasRequiredPolyfill$1;function requirePolyfill$1(){if(hasRequiredPolyfill$1)return polyfill$1;hasRequiredPolyfill$1=1;var E=requireImplementation$1();return polyfill$1=function(){return typeof Object.is=="function"?Object.is:E},polyfill$1}var callBound,hasRequiredCallBound;function requireCallBound(){if(hasRequiredCallBound)return callBound;hasRequiredCallBound=1;var E=requireGetIntrinsic(),A=requireCallBind(),_=A(E("String.prototype.indexOf"));return callBound=function(B,T){var R=E(B,!!T);return typeof R=="function"&&_(B,".prototype.")>-1?A(R):R},callBound}var defineProperties_1,hasRequiredDefineProperties;function requireDefineProperties(){if(hasRequiredDefineProperties)return defineProperties_1;hasRequiredDefineProperties=1;var E=requireObjectKeys(),A=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",_=Object.prototype.toString,I=Array.prototype.concat,B=requireDefineDataProperty(),T=function(F){return typeof F=="function"&&_.call(F)==="[object Function]"},R=requireHasPropertyDescriptors()(),P=function(F,L,U,V){if(L in F){if(V===!0){if(F[L]===U)return}else if(!T(V)||!V())return}R?B(F,L,U,!0):B(F,L,U)},D=function(F,L){var U=arguments.length>2?arguments[2]:{},V=E(L);A&&(V=I.call(V,Object.getOwnPropertySymbols(L)));for(var K=0;K<V.length;K+=1)P(F,V[K],L[V[K]],U[V[K]])};return D.supportsDescriptors=!!R,defineProperties_1=D,defineProperties_1}var shim$1,hasRequiredShim$1;function requireShim$1(){if(hasRequiredShim$1)return shim$1;hasRequiredShim$1=1;var E=requirePolyfill$1(),A=requireDefineProperties();return shim$1=function(){var I=E();return A(Object,{is:I},{is:function(){return Object.is!==I}}),I},shim$1}var objectIs,hasRequiredObjectIs;function requireObjectIs(){if(hasRequiredObjectIs)return objectIs;hasRequiredObjectIs=1;var E=requireDefineProperties(),A=requireCallBind(),_=requireImplementation$1(),I=requirePolyfill$1(),B=requireShim$1(),T=A(I(),Object);return E(T,{getPolyfill:I,implementation:_,shim:B}),objectIs=T,objectIs}var implementation,hasRequiredImplementation;function requireImplementation(){return hasRequiredImplementation||(hasRequiredImplementation=1,implementation=function(A){return A!==A}),implementation}var polyfill,hasRequiredPolyfill;function requirePolyfill(){if(hasRequiredPolyfill)return polyfill;hasRequiredPolyfill=1;var E=requireImplementation();return polyfill=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:E},polyfill}var shim,hasRequiredShim;function requireShim(){if(hasRequiredShim)return shim;hasRequiredShim=1;var E=requireDefineProperties(),A=requirePolyfill();return shim=function(){var I=A();return E(Number,{isNaN:I},{isNaN:function(){return Number.isNaN!==I}}),I},shim}var isNan,hasRequiredIsNan;function requireIsNan(){if(hasRequiredIsNan)return isNan;hasRequiredIsNan=1;var E=requireCallBind(),A=requireDefineProperties(),_=requireImplementation(),I=requirePolyfill(),B=requireShim(),T=E(I(),Number);return A(T,{getPolyfill:I,implementation:_,shim:B}),isNan=T,isNan}var comparisons,hasRequiredComparisons;function requireComparisons(){if(hasRequiredComparisons)return comparisons;hasRequiredComparisons=1;function E(ft,_t){return T(ft)||B(ft,_t)||_(ft,_t)||A()}function A(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _(ft,_t){if(ft){if(typeof ft=="string")return I(ft,_t);var Xt=Object.prototype.toString.call(ft).slice(8,-1);if(Xt==="Object"&&ft.constructor&&(Xt=ft.constructor.name),Xt==="Map"||Xt==="Set")return Array.from(ft);if(Xt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Xt))return I(ft,_t)}}function I(ft,_t){(_t==null||_t>ft.length)&&(_t=ft.length);for(var Xt=0,Nt=new Array(_t);Xt<_t;Xt++)Nt[Xt]=ft[Xt];return Nt}function B(ft,_t){var Xt=ft==null?null:typeof Symbol<"u"&&ft[Symbol.iterator]||ft["@@iterator"];if(Xt!=null){var Nt,qt,nr,ze,Ce=[],Le=!0,Ze=!1;try{if(nr=(Xt=Xt.call(ft)).next,_t!==0)for(;!(Le=(Nt=nr.call(Xt)).done)&&(Ce.push(Nt.value),Ce.length!==_t);Le=!0);}catch(Je){Ze=!0,qt=Je}finally{try{if(!Le&&Xt.return!=null&&(ze=Xt.return(),Object(ze)!==ze))return}finally{if(Ze)throw qt}}return Ce}}function T(ft){if(Array.isArray(ft))return ft}function R(ft){"@babel/helpers - typeof";return R=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_t){return typeof _t}:function(_t){return _t&&typeof Symbol=="function"&&_t.constructor===Symbol&&_t!==Symbol.prototype?"symbol":typeof _t},R(ft)}var P=/a/g.flags!==void 0,D=function(_t){var Xt=[];return _t.forEach(function(Nt){return Xt.push(Nt)}),Xt},F=function(_t){var Xt=[];return _t.forEach(function(Nt,qt){return Xt.push([qt,Nt])}),Xt},L=Object.is?Object.is:requireObjectIs(),U=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},V=Number.isNaN?Number.isNaN:requireIsNan();function K(ft){return ft.call.bind(ft)}var J=K(Object.prototype.hasOwnProperty),ee=K(Object.prototype.propertyIsEnumerable),ie=K(Object.prototype.toString),ne=requireUtil$3().types,ce=ne.isAnyArrayBuffer,fe=ne.isArrayBufferView,de=ne.isDate,pe=ne.isMap,ve=ne.isRegExp,ye=ne.isSet,_e=ne.isNativeError,be=ne.isBoxedPrimitive,Te=ne.isNumberObject,ue=ne.isStringObject,O=ne.isBooleanObject,z=ne.isBigIntObject,Y=ne.isSymbolObject,te=ne.isFloat32Array,oe=ne.isFloat64Array;function le(ft){if(ft.length===0||ft.length>10)return!0;for(var _t=0;_t<ft.length;_t++){var Xt=ft.charCodeAt(_t);if(Xt<48||Xt>57)return!0}return ft.length===10&&ft>=Math.pow(2,32)}function he(ft){return Object.keys(ft).filter(le).concat(U(ft).filter(Object.prototype.propertyIsEnumerable.bind(ft)))}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function ae(ft,_t){if(ft===_t)return 0;for(var Xt=ft.length,Nt=_t.length,qt=0,nr=Math.min(Xt,Nt);qt<nr;++qt)if(ft[qt]!==_t[qt]){Xt=ft[qt],Nt=_t[qt];break}return Xt<Nt?-1:Nt<Xt?1:0}var Q=!0,se=!1,Ae=0,ge=1,Ee=2,ke=3;function Se(ft,_t){return P?ft.source===_t.source&&ft.flags===_t.flags:RegExp.prototype.toString.call(ft)===RegExp.prototype.toString.call(_t)}function Ie(ft,_t){if(ft.byteLength!==_t.byteLength)return!1;for(var Xt=0;Xt<ft.byteLength;Xt++)if(ft[Xt]!==_t[Xt])return!1;return!0}function we(ft,_t){return ft.byteLength!==_t.byteLength?!1:ae(new Uint8Array(ft.buffer,ft.byteOffset,ft.byteLength),new Uint8Array(_t.buffer,_t.byteOffset,_t.byteLength))===0}function xe(ft,_t){return ft.byteLength===_t.byteLength&&ae(new Uint8Array(ft),new Uint8Array(_t))===0}function Fe(ft,_t){return Te(ft)?Te(_t)&&L(Number.prototype.valueOf.call(ft),Number.prototype.valueOf.call(_t)):ue(ft)?ue(_t)&&String.prototype.valueOf.call(ft)===String.prototype.valueOf.call(_t):O(ft)?O(_t)&&Boolean.prototype.valueOf.call(ft)===Boolean.prototype.valueOf.call(_t):z(ft)?z(_t)&&BigInt.prototype.valueOf.call(ft)===BigInt.prototype.valueOf.call(_t):Y(_t)&&Symbol.prototype.valueOf.call(ft)===Symbol.prototype.valueOf.call(_t)}function Ge(ft,_t,Xt,Nt){if(ft===_t)return ft!==0?!0:Xt?L(ft,_t):!0;if(Xt){if(R(ft)!=="object")return typeof ft=="number"&&V(ft)&&V(_t);if(R(_t)!=="object"||ft===null||_t===null||Object.getPrototypeOf(ft)!==Object.getPrototypeOf(_t))return!1}else{if(ft===null||R(ft)!=="object")return _t===null||R(_t)!=="object"?ft==_t:!1;if(_t===null||R(_t)!=="object")return!1}var qt=ie(ft),nr=ie(_t);if(qt!==nr)return!1;if(Array.isArray(ft)){if(ft.length!==_t.length)return!1;var ze=he(ft),Ce=he(_t);return ze.length!==Ce.length?!1:et(ft,_t,Xt,Nt,ge,ze)}if(qt==="[object Object]"&&(!pe(ft)&&pe(_t)||!ye(ft)&&ye(_t)))return!1;if(de(ft)){if(!de(_t)||Date.prototype.getTime.call(ft)!==Date.prototype.getTime.call(_t))return!1}else if(ve(ft)){if(!ve(_t)||!Se(ft,_t))return!1}else if(_e(ft)||ft instanceof Error){if(ft.message!==_t.message||ft.name!==_t.name)return!1}else if(fe(ft)){if(!Xt&&(te(ft)||oe(ft))){if(!Ie(ft,_t))return!1}else if(!we(ft,_t))return!1;var Le=he(ft),Ze=he(_t);return Le.length!==Ze.length?!1:et(ft,_t,Xt,Nt,Ae,Le)}else{if(ye(ft))return!ye(_t)||ft.size!==_t.size?!1:et(ft,_t,Xt,Nt,Ee);if(pe(ft))return!pe(_t)||ft.size!==_t.size?!1:et(ft,_t,Xt,Nt,ke);if(ce(ft)){if(!xe(ft,_t))return!1}else if(be(ft)&&!Fe(ft,_t))return!1}return et(ft,_t,Xt,Nt,Ae)}function Oe(ft,_t){return _t.filter(function(Xt){return ee(ft,Xt)})}function et(ft,_t,Xt,Nt,qt,nr){if(arguments.length===5){nr=Object.keys(ft);var ze=Object.keys(_t);if(nr.length!==ze.length)return!1}for(var Ce=0;Ce<nr.length;Ce++)if(!J(_t,nr[Ce]))return!1;if(Xt&&arguments.length===5){var Le=U(ft);if(Le.length!==0){var Ze=0;for(Ce=0;Ce<Le.length;Ce++){var Je=Le[Ce];if(ee(ft,Je)){if(!ee(_t,Je))return!1;nr.push(Je),Ze++}else if(ee(_t,Je))return!1}var nt=U(_t);if(Le.length!==nt.length&&Oe(_t,nt).length!==Ze)return!1}else{var rt=U(_t);if(rt.length!==0&&Oe(_t,rt).length!==0)return!1}}if(nr.length===0&&(qt===Ae||qt===ge&&ft.length===0||ft.size===0))return!0;if(Nt===void 0)Nt={val1:new Map,val2:new Map,position:0};else{var He=Nt.val1.get(ft);if(He!==void 0){var Dt=Nt.val2.get(_t);if(Dt!==void 0)return He===Dt}Nt.position++}Nt.val1.set(ft,Nt.position),Nt.val2.set(_t,Nt.position);var Rt=yt(ft,_t,Xt,nr,Nt,qt);return Nt.val1.delete(ft),Nt.val2.delete(_t),Rt}function Mt(ft,_t,Xt,Nt){for(var qt=D(ft),nr=0;nr<qt.length;nr++){var ze=qt[nr];if(Ge(_t,ze,Xt,Nt))return ft.delete(ze),!0}return!1}function dt(ft){switch(R(ft)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":ft=+ft;case"number":if(V(ft))return!1}return!0}function mt(ft,_t,Xt){var Nt=dt(Xt);return Nt??(_t.has(Nt)&&!ft.has(Nt))}function Ut(ft,_t,Xt,Nt,qt){var nr=dt(Xt);if(nr!=null)return nr;var ze=_t.get(nr);return ze===void 0&&!_t.has(nr)||!Ge(Nt,ze,!1,qt)?!1:!ft.has(nr)&&Ge(Nt,ze,!1,qt)}function St(ft,_t,Xt,Nt){for(var qt=null,nr=D(ft),ze=0;ze<nr.length;ze++){var Ce=nr[ze];if(R(Ce)==="object"&&Ce!==null)qt===null&&(qt=new Set),qt.add(Ce);else if(!_t.has(Ce)){if(Xt||!mt(ft,_t,Ce))return!1;qt===null&&(qt=new Set),qt.add(Ce)}}if(qt!==null){for(var Le=D(_t),Ze=0;Ze<Le.length;Ze++){var Je=Le[Ze];if(R(Je)==="object"&&Je!==null){if(!Mt(qt,Je,Xt,Nt))return!1}else if(!Xt&&!ft.has(Je)&&!Mt(qt,Je,Xt,Nt))return!1}return qt.size===0}return!0}function vt(ft,_t,Xt,Nt,qt,nr){for(var ze=D(ft),Ce=0;Ce<ze.length;Ce++){var Le=ze[Ce];if(Ge(Xt,Le,qt,nr)&&Ge(Nt,_t.get(Le),qt,nr))return ft.delete(Le),!0}return!1}function It(ft,_t,Xt,Nt){for(var qt=null,nr=F(ft),ze=0;ze<nr.length;ze++){var Ce=E(nr[ze],2),Le=Ce[0],Ze=Ce[1];if(R(Le)==="object"&&Le!==null)qt===null&&(qt=new Set),qt.add(Le);else{var Je=_t.get(Le);if(Je===void 0&&!_t.has(Le)||!Ge(Ze,Je,Xt,Nt)){if(Xt||!Ut(ft,_t,Le,Ze,Nt))return!1;qt===null&&(qt=new Set),qt.add(Le)}}}if(qt!==null){for(var nt=F(_t),rt=0;rt<nt.length;rt++){var He=E(nt[rt],2),Dt=He[0],Rt=He[1];if(R(Dt)==="object"&&Dt!==null){if(!vt(qt,ft,Dt,Rt,Xt,Nt))return!1}else if(!Xt&&(!ft.has(Dt)||!Ge(ft.get(Dt),Rt,!1,Nt))&&!vt(qt,ft,Dt,Rt,!1,Nt))return!1}return qt.size===0}return!0}function yt(ft,_t,Xt,Nt,qt,nr){var ze=0;if(nr===Ee){if(!St(ft,_t,Xt,qt))return!1}else if(nr===ke){if(!It(ft,_t,Xt,qt))return!1}else if(nr===ge)for(;ze<ft.length;ze++)if(J(ft,ze)){if(!J(_t,ze)||!Ge(ft[ze],_t[ze],Xt,qt))return!1}else{if(J(_t,ze))return!1;for(var Ce=Object.keys(ft);ze<Ce.length;ze++){var Le=Ce[ze];if(!J(_t,Le)||!Ge(ft[Le],_t[Le],Xt,qt))return!1}return Ce.length===Object.keys(_t).length}for(ze=0;ze<Nt.length;ze++){var Ze=Nt[ze];if(!Ge(ft[Ze],_t[Ze],Xt,qt))return!1}return!0}function Tt(ft,_t){return Ge(ft,_t,se)}function Wt(ft,_t){return Ge(ft,_t,Q)}return comparisons={isDeepEqual:Tt,isDeepStrictEqual:Wt},comparisons}var hasRequiredAssert$1;function requireAssert$1(){if(hasRequiredAssert$1)return assert.exports;hasRequiredAssert$1=1;function E(Ee){"@babel/helpers - typeof";return E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ke){return typeof ke}:function(ke){return ke&&typeof Symbol=="function"&&ke.constructor===Symbol&&ke!==Symbol.prototype?"symbol":typeof ke},E(Ee)}function A(Ee,ke,Se){return Object.defineProperty(Ee,"prototype",{writable:!1}),Ee}function _(Ee,ke){if(!(Ee instanceof ke))throw new TypeError("Cannot call a class as a function")}var I=requireErrors$2(),B=I.codes,T=B.ERR_AMBIGUOUS_ARGUMENT,R=B.ERR_INVALID_ARG_TYPE,P=B.ERR_INVALID_ARG_VALUE,D=B.ERR_INVALID_RETURN_VALUE,F=B.ERR_MISSING_ARGS,L=requireAssertion_error(),U=requireUtil$3(),V=U.inspect,K=requireUtil$3().types,J=K.isPromise,ee=K.isRegExp,ie=requirePolyfill$2()(),ne=requirePolyfill$1()(),ce=requireCallBound()("RegExp.prototype.test"),fe,de;function pe(){var Ee=requireComparisons();fe=Ee.isDeepEqual,de=Ee.isDeepStrictEqual}var ve=!1,ye=assert.exports=O,_e={};function be(Ee){throw Ee.message instanceof Error?Ee.message:new L(Ee)}function Te(Ee,ke,Se,Ie,we){var xe=arguments.length,Fe;if(xe===0)Fe="Failed";else if(xe===1)Se=Ee,Ee=void 0;else{if(ve===!1){ve=!0;var Ge=process$1.emitWarning?process$1.emitWarning:console.warn.bind(console);Ge("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}xe===2&&(Ie="!=")}if(Se instanceof Error)throw Se;var Oe={actual:Ee,expected:ke,operator:Ie===void 0?"fail":Ie,stackStartFn:we||Te};Se!==void 0&&(Oe.message=Se);var et=new L(Oe);throw Fe&&(et.message=Fe,et.generatedMessage=!0),et}ye.fail=Te,ye.AssertionError=L;function ue(Ee,ke,Se,Ie){if(!Se){var we=!1;if(ke===0)we=!0,Ie="No value argument passed to `assert.ok()`";else if(Ie instanceof Error)throw Ie;var xe=new L({actual:Se,expected:!0,message:Ie,operator:"==",stackStartFn:Ee});throw xe.generatedMessage=we,xe}}function O(){for(var Ee=arguments.length,ke=new Array(Ee),Se=0;Se<Ee;Se++)ke[Se]=arguments[Se];ue.apply(void 0,[O,ke.length].concat(ke))}ye.ok=O,ye.equal=function Ee(ke,Se,Ie){if(arguments.length<2)throw new F("actual","expected");ke!=Se&&be({actual:ke,expected:Se,message:Ie,operator:"==",stackStartFn:Ee})},ye.notEqual=function Ee(ke,Se,Ie){if(arguments.length<2)throw new F("actual","expected");ke==Se&&be({actual:ke,expected:Se,message:Ie,operator:"!=",stackStartFn:Ee})},ye.deepEqual=function Ee(ke,Se,Ie){if(arguments.length<2)throw new F("actual","expected");fe===void 0&&pe(),fe(ke,Se)||be({actual:ke,expected:Se,message:Ie,operator:"deepEqual",stackStartFn:Ee})},ye.notDeepEqual=function Ee(ke,Se,Ie){if(arguments.length<2)throw new F("actual","expected");fe===void 0&&pe(),fe(ke,Se)&&be({actual:ke,expected:Se,message:Ie,operator:"notDeepEqual",stackStartFn:Ee})},ye.deepStrictEqual=function Ee(ke,Se,Ie){if(arguments.length<2)throw new F("actual","expected");fe===void 0&&pe(),de(ke,Se)||be({actual:ke,expected:Se,message:Ie,operator:"deepStrictEqual",stackStartFn:Ee})},ye.notDeepStrictEqual=z;function z(Ee,ke,Se){if(arguments.length<2)throw new F("actual","expected");fe===void 0&&pe(),de(Ee,ke)&&be({actual:Ee,expected:ke,message:Se,operator:"notDeepStrictEqual",stackStartFn:z})}ye.strictEqual=function Ee(ke,Se,Ie){if(arguments.length<2)throw new F("actual","expected");ne(ke,Se)||be({actual:ke,expected:Se,message:Ie,operator:"strictEqual",stackStartFn:Ee})},ye.notStrictEqual=function Ee(ke,Se,Ie){if(arguments.length<2)throw new F("actual","expected");ne(ke,Se)&&be({actual:ke,expected:Se,message:Ie,operator:"notStrictEqual",stackStartFn:Ee})};var Y=A(function Ee(ke,Se,Ie){var we=this;_(this,Ee),Se.forEach(function(xe){xe in ke&&(Ie!==void 0&&typeof Ie[xe]=="string"&&ee(ke[xe])&&ce(ke[xe],Ie[xe])?we[xe]=Ie[xe]:we[xe]=ke[xe])})});function te(Ee,ke,Se,Ie,we,xe){if(!(Se in Ee)||!de(Ee[Se],ke[Se])){if(!Ie){var Fe=new Y(Ee,we),Ge=new Y(ke,we,Ee),Oe=new L({actual:Fe,expected:Ge,operator:"deepStrictEqual",stackStartFn:xe});throw Oe.actual=Ee,Oe.expected=ke,Oe.operator=xe.name,Oe}be({actual:Ee,expected:ke,message:Ie,operator:xe.name,stackStartFn:xe})}}function oe(Ee,ke,Se,Ie){if(typeof ke!="function"){if(ee(ke))return ce(ke,Ee);if(arguments.length===2)throw new R("expected",["Function","RegExp"],ke);if(E(Ee)!=="object"||Ee===null){var we=new L({actual:Ee,expected:ke,message:Se,operator:"deepStrictEqual",stackStartFn:Ie});throw we.operator=Ie.name,we}var xe=Object.keys(ke);if(ke instanceof Error)xe.push("name","message");else if(xe.length===0)throw new P("error",ke,"may not be an empty object");return fe===void 0&&pe(),xe.forEach(function(Fe){typeof Ee[Fe]=="string"&&ee(ke[Fe])&&ce(ke[Fe],Ee[Fe])||te(Ee,ke,Fe,Se,xe,Ie)}),!0}return ke.prototype!==void 0&&Ee instanceof ke?!0:Error.isPrototypeOf(ke)?!1:ke.call({},Ee)===!0}function le(Ee){if(typeof Ee!="function")throw new R("fn","Function",Ee);try{Ee()}catch(ke){return ke}return _e}function he(Ee){return J(Ee)||Ee!==null&&E(Ee)==="object"&&typeof Ee.then=="function"&&typeof Ee.catch=="function"}function ae(Ee){return Promise.resolve().then(function(){var ke;if(typeof Ee=="function"){if(ke=Ee(),!he(ke))throw new D("instance of Promise","promiseFn",ke)}else if(he(Ee))ke=Ee;else throw new R("promiseFn",["Function","Promise"],Ee);return Promise.resolve().then(function(){return ke}).then(function(){return _e}).catch(function(Se){return Se})})}function Q(Ee,ke,Se,Ie){if(typeof Se=="string"){if(arguments.length===4)throw new R("error",["Object","Error","Function","RegExp"],Se);if(E(ke)==="object"&&ke!==null){if(ke.message===Se)throw new T("error/message",'The error message "'.concat(ke.message,'" is identical to the message.'))}else if(ke===Se)throw new T("error/message",'The error "'.concat(ke,'" is identical to the message.'));Ie=Se,Se=void 0}else if(Se!=null&&E(Se)!=="object"&&typeof Se!="function")throw new R("error",["Object","Error","Function","RegExp"],Se);if(ke===_e){var we="";Se&&Se.name&&(we+=" (".concat(Se.name,")")),we+=Ie?": ".concat(Ie):".";var xe=Ee.name==="rejects"?"rejection":"exception";be({actual:void 0,expected:Se,operator:Ee.name,message:"Missing expected ".concat(xe).concat(we),stackStartFn:Ee})}if(Se&&!oe(ke,Se,Ie,Ee))throw ke}function se(Ee,ke,Se,Ie){if(ke!==_e){if(typeof Se=="string"&&(Ie=Se,Se=void 0),!Se||oe(ke,Se)){var we=Ie?": ".concat(Ie):".",xe=Ee.name==="doesNotReject"?"rejection":"exception";be({actual:ke,expected:Se,operator:Ee.name,message:"Got unwanted ".concat(xe).concat(we,`
`)+'Actual message: "'.concat(ke&&ke.message,'"'),stackStartFn:Ee})}throw ke}}ye.throws=function Ee(ke){for(var Se=arguments.length,Ie=new Array(Se>1?Se-1:0),we=1;we<Se;we++)Ie[we-1]=arguments[we];Q.apply(void 0,[Ee,le(ke)].concat(Ie))},ye.rejects=function Ee(ke){for(var Se=arguments.length,Ie=new Array(Se>1?Se-1:0),we=1;we<Se;we++)Ie[we-1]=arguments[we];return ae(ke).then(function(xe){return Q.apply(void 0,[Ee,xe].concat(Ie))})},ye.doesNotThrow=function Ee(ke){for(var Se=arguments.length,Ie=new Array(Se>1?Se-1:0),we=1;we<Se;we++)Ie[we-1]=arguments[we];se.apply(void 0,[Ee,le(ke)].concat(Ie))},ye.doesNotReject=function Ee(ke){for(var Se=arguments.length,Ie=new Array(Se>1?Se-1:0),we=1;we<Se;we++)Ie[we-1]=arguments[we];return ae(ke).then(function(xe){return se.apply(void 0,[Ee,xe].concat(Ie))})},ye.ifError=function Ee(ke){if(ke!=null){var Se="ifError got unwanted exception: ";E(ke)==="object"&&typeof ke.message=="string"?ke.message.length===0&&ke.constructor?Se+=ke.constructor.name:Se+=ke.message:Se+=V(ke);var Ie=new L({actual:ke,expected:null,operator:"ifError",message:Se,stackStartFn:Ee}),we=ke.stack;if(typeof we=="string"){var xe=we.split(`
`);xe.shift();for(var Fe=Ie.stack.split(`
`),Ge=0;Ge<xe.length;Ge++){var Oe=Fe.indexOf(xe[Ge]);if(Oe!==-1){Fe=Fe.slice(0,Oe);break}}Ie.stack="".concat(Fe.join(`
`),`
`).concat(xe.join(`
`))}throw Ie}};function Ae(Ee,ke,Se,Ie,we){if(!ee(ke))throw new R("regexp","RegExp",ke);var xe=we==="match";if(typeof Ee!="string"||ce(ke,Ee)!==xe){if(Se instanceof Error)throw Se;var Fe=!Se;Se=Se||(typeof Ee!="string"?'The "string" argument must be of type string. Received type '+"".concat(E(Ee)," (").concat(V(Ee),")"):(xe?"The input did not match the regular expression ":"The input was expected to not match the regular expression ")+"".concat(V(ke),`. Input:

`).concat(V(Ee),`
`));var Ge=new L({actual:Ee,expected:ke,message:Se,operator:we,stackStartFn:Ie});throw Ge.generatedMessage=Fe,Ge}}ye.match=function Ee(ke,Se,Ie){Ae(ke,Se,Ie,Ee,"match")},ye.doesNotMatch=function Ee(ke,Se,Ie){Ae(ke,Se,Ie,Ee,"doesNotMatch")};function ge(){for(var Ee=arguments.length,ke=new Array(Ee),Se=0;Se<Ee;Se++)ke[Se]=arguments[Se];ue.apply(void 0,[ge,ke.length].concat(ke))}return ye.strict=ie(ge,ye,{equal:ye.strictEqual,deepEqual:ye.deepStrictEqual,notEqual:ye.notStrictEqual,notDeepEqual:ye.notDeepStrictEqual}),ye.strict.strict=ye.strict,assert.exports}var zstream,hasRequiredZstream;function requireZstream(){if(hasRequiredZstream)return zstream;hasRequiredZstream=1;function E(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return zstream=E,zstream}var deflate={},common={},hasRequiredCommon;function requireCommon(){return hasRequiredCommon||(hasRequiredCommon=1,(function(E){var A=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function _(T,R){return Object.prototype.hasOwnProperty.call(T,R)}E.assign=function(T){for(var R=Array.prototype.slice.call(arguments,1);R.length;){var P=R.shift();if(P){if(typeof P!="object")throw new TypeError(P+"must be non-object");for(var D in P)_(P,D)&&(T[D]=P[D])}}return T},E.shrinkBuf=function(T,R){return T.length===R?T:T.subarray?T.subarray(0,R):(T.length=R,T)};var I={arraySet:function(T,R,P,D,F){if(R.subarray&&T.subarray){T.set(R.subarray(P,P+D),F);return}for(var L=0;L<D;L++)T[F+L]=R[P+L]},flattenChunks:function(T){var R,P,D,F,L,U;for(D=0,R=0,P=T.length;R<P;R++)D+=T[R].length;for(U=new Uint8Array(D),F=0,R=0,P=T.length;R<P;R++)L=T[R],U.set(L,F),F+=L.length;return U}},B={arraySet:function(T,R,P,D,F){for(var L=0;L<D;L++)T[F+L]=R[P+L]},flattenChunks:function(T){return[].concat.apply([],T)}};E.setTyped=function(T){T?(E.Buf8=Uint8Array,E.Buf16=Uint16Array,E.Buf32=Int32Array,E.assign(E,I)):(E.Buf8=Array,E.Buf16=Array,E.Buf32=Array,E.assign(E,B))},E.setTyped(A)})(common)),common}var trees={},hasRequiredTrees;function requireTrees(){if(hasRequiredTrees)return trees;hasRequiredTrees=1;var E=requireCommon(),A=4,_=0,I=1,B=2;function T(Ce){for(var Le=Ce.length;--Le>=0;)Ce[Le]=0}var R=0,P=1,D=2,F=3,L=258,U=29,V=256,K=V+1+U,J=30,ee=19,ie=2*K+1,ne=15,ce=16,fe=7,de=256,pe=16,ve=17,ye=18,_e=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],be=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Te=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ue=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],O=512,z=new Array((K+2)*2);T(z);var Y=new Array(J*2);T(Y);var te=new Array(O);T(te);var oe=new Array(L-F+1);T(oe);var le=new Array(U);T(le);var he=new Array(J);T(he);function ae(Ce,Le,Ze,Je,nt){this.static_tree=Ce,this.extra_bits=Le,this.extra_base=Ze,this.elems=Je,this.max_length=nt,this.has_stree=Ce&&Ce.length}var Q,se,Ae;function ge(Ce,Le){this.dyn_tree=Ce,this.max_code=0,this.stat_desc=Le}function Ee(Ce){return Ce<256?te[Ce]:te[256+(Ce>>>7)]}function ke(Ce,Le){Ce.pending_buf[Ce.pending++]=Le&255,Ce.pending_buf[Ce.pending++]=Le>>>8&255}function Se(Ce,Le,Ze){Ce.bi_valid>ce-Ze?(Ce.bi_buf|=Le<<Ce.bi_valid&65535,ke(Ce,Ce.bi_buf),Ce.bi_buf=Le>>ce-Ce.bi_valid,Ce.bi_valid+=Ze-ce):(Ce.bi_buf|=Le<<Ce.bi_valid&65535,Ce.bi_valid+=Ze)}function Ie(Ce,Le,Ze){Se(Ce,Ze[Le*2],Ze[Le*2+1])}function we(Ce,Le){var Ze=0;do Ze|=Ce&1,Ce>>>=1,Ze<<=1;while(--Le>0);return Ze>>>1}function xe(Ce){Ce.bi_valid===16?(ke(Ce,Ce.bi_buf),Ce.bi_buf=0,Ce.bi_valid=0):Ce.bi_valid>=8&&(Ce.pending_buf[Ce.pending++]=Ce.bi_buf&255,Ce.bi_buf>>=8,Ce.bi_valid-=8)}function Fe(Ce,Le){var Ze=Le.dyn_tree,Je=Le.max_code,nt=Le.stat_desc.static_tree,rt=Le.stat_desc.has_stree,He=Le.stat_desc.extra_bits,Dt=Le.stat_desc.extra_base,Rt=Le.stat_desc.max_length,De,We,Ve,qe,pt,At,jt=0;for(qe=0;qe<=ne;qe++)Ce.bl_count[qe]=0;for(Ze[Ce.heap[Ce.heap_max]*2+1]=0,De=Ce.heap_max+1;De<ie;De++)We=Ce.heap[De],qe=Ze[Ze[We*2+1]*2+1]+1,qe>Rt&&(qe=Rt,jt++),Ze[We*2+1]=qe,!(We>Je)&&(Ce.bl_count[qe]++,pt=0,We>=Dt&&(pt=He[We-Dt]),At=Ze[We*2],Ce.opt_len+=At*(qe+pt),rt&&(Ce.static_len+=At*(nt[We*2+1]+pt)));if(jt!==0){do{for(qe=Rt-1;Ce.bl_count[qe]===0;)qe--;Ce.bl_count[qe]--,Ce.bl_count[qe+1]+=2,Ce.bl_count[Rt]--,jt-=2}while(jt>0);for(qe=Rt;qe!==0;qe--)for(We=Ce.bl_count[qe];We!==0;)Ve=Ce.heap[--De],!(Ve>Je)&&(Ze[Ve*2+1]!==qe&&(Ce.opt_len+=(qe-Ze[Ve*2+1])*Ze[Ve*2],Ze[Ve*2+1]=qe),We--)}}function Ge(Ce,Le,Ze){var Je=new Array(ne+1),nt=0,rt,He;for(rt=1;rt<=ne;rt++)Je[rt]=nt=nt+Ze[rt-1]<<1;for(He=0;He<=Le;He++){var Dt=Ce[He*2+1];Dt!==0&&(Ce[He*2]=we(Je[Dt]++,Dt))}}function Oe(){var Ce,Le,Ze,Je,nt,rt=new Array(ne+1);for(Ze=0,Je=0;Je<U-1;Je++)for(le[Je]=Ze,Ce=0;Ce<1<<_e[Je];Ce++)oe[Ze++]=Je;for(oe[Ze-1]=Je,nt=0,Je=0;Je<16;Je++)for(he[Je]=nt,Ce=0;Ce<1<<be[Je];Ce++)te[nt++]=Je;for(nt>>=7;Je<J;Je++)for(he[Je]=nt<<7,Ce=0;Ce<1<<be[Je]-7;Ce++)te[256+nt++]=Je;for(Le=0;Le<=ne;Le++)rt[Le]=0;for(Ce=0;Ce<=143;)z[Ce*2+1]=8,Ce++,rt[8]++;for(;Ce<=255;)z[Ce*2+1]=9,Ce++,rt[9]++;for(;Ce<=279;)z[Ce*2+1]=7,Ce++,rt[7]++;for(;Ce<=287;)z[Ce*2+1]=8,Ce++,rt[8]++;for(Ge(z,K+1,rt),Ce=0;Ce<J;Ce++)Y[Ce*2+1]=5,Y[Ce*2]=we(Ce,5);Q=new ae(z,_e,V+1,K,ne),se=new ae(Y,be,0,J,ne),Ae=new ae(new Array(0),Te,0,ee,fe)}function et(Ce){var Le;for(Le=0;Le<K;Le++)Ce.dyn_ltree[Le*2]=0;for(Le=0;Le<J;Le++)Ce.dyn_dtree[Le*2]=0;for(Le=0;Le<ee;Le++)Ce.bl_tree[Le*2]=0;Ce.dyn_ltree[de*2]=1,Ce.opt_len=Ce.static_len=0,Ce.last_lit=Ce.matches=0}function Mt(Ce){Ce.bi_valid>8?ke(Ce,Ce.bi_buf):Ce.bi_valid>0&&(Ce.pending_buf[Ce.pending++]=Ce.bi_buf),Ce.bi_buf=0,Ce.bi_valid=0}function dt(Ce,Le,Ze,Je){Mt(Ce),ke(Ce,Ze),ke(Ce,~Ze),E.arraySet(Ce.pending_buf,Ce.window,Le,Ze,Ce.pending),Ce.pending+=Ze}function mt(Ce,Le,Ze,Je){var nt=Le*2,rt=Ze*2;return Ce[nt]<Ce[rt]||Ce[nt]===Ce[rt]&&Je[Le]<=Je[Ze]}function Ut(Ce,Le,Ze){for(var Je=Ce.heap[Ze],nt=Ze<<1;nt<=Ce.heap_len&&(nt<Ce.heap_len&&mt(Le,Ce.heap[nt+1],Ce.heap[nt],Ce.depth)&&nt++,!mt(Le,Je,Ce.heap[nt],Ce.depth));)Ce.heap[Ze]=Ce.heap[nt],Ze=nt,nt<<=1;Ce.heap[Ze]=Je}function St(Ce,Le,Ze){var Je,nt,rt=0,He,Dt;if(Ce.last_lit!==0)do Je=Ce.pending_buf[Ce.d_buf+rt*2]<<8|Ce.pending_buf[Ce.d_buf+rt*2+1],nt=Ce.pending_buf[Ce.l_buf+rt],rt++,Je===0?Ie(Ce,nt,Le):(He=oe[nt],Ie(Ce,He+V+1,Le),Dt=_e[He],Dt!==0&&(nt-=le[He],Se(Ce,nt,Dt)),Je--,He=Ee(Je),Ie(Ce,He,Ze),Dt=be[He],Dt!==0&&(Je-=he[He],Se(Ce,Je,Dt)));while(rt<Ce.last_lit);Ie(Ce,de,Le)}function vt(Ce,Le){var Ze=Le.dyn_tree,Je=Le.stat_desc.static_tree,nt=Le.stat_desc.has_stree,rt=Le.stat_desc.elems,He,Dt,Rt=-1,De;for(Ce.heap_len=0,Ce.heap_max=ie,He=0;He<rt;He++)Ze[He*2]!==0?(Ce.heap[++Ce.heap_len]=Rt=He,Ce.depth[He]=0):Ze[He*2+1]=0;for(;Ce.heap_len<2;)De=Ce.heap[++Ce.heap_len]=Rt<2?++Rt:0,Ze[De*2]=1,Ce.depth[De]=0,Ce.opt_len--,nt&&(Ce.static_len-=Je[De*2+1]);for(Le.max_code=Rt,He=Ce.heap_len>>1;He>=1;He--)Ut(Ce,Ze,He);De=rt;do He=Ce.heap[1],Ce.heap[1]=Ce.heap[Ce.heap_len--],Ut(Ce,Ze,1),Dt=Ce.heap[1],Ce.heap[--Ce.heap_max]=He,Ce.heap[--Ce.heap_max]=Dt,Ze[De*2]=Ze[He*2]+Ze[Dt*2],Ce.depth[De]=(Ce.depth[He]>=Ce.depth[Dt]?Ce.depth[He]:Ce.depth[Dt])+1,Ze[He*2+1]=Ze[Dt*2+1]=De,Ce.heap[1]=De++,Ut(Ce,Ze,1);while(Ce.heap_len>=2);Ce.heap[--Ce.heap_max]=Ce.heap[1],Fe(Ce,Le),Ge(Ze,Rt,Ce.bl_count)}function It(Ce,Le,Ze){var Je,nt=-1,rt,He=Le[1],Dt=0,Rt=7,De=4;for(He===0&&(Rt=138,De=3),Le[(Ze+1)*2+1]=65535,Je=0;Je<=Ze;Je++)rt=He,He=Le[(Je+1)*2+1],!(++Dt<Rt&&rt===He)&&(Dt<De?Ce.bl_tree[rt*2]+=Dt:rt!==0?(rt!==nt&&Ce.bl_tree[rt*2]++,Ce.bl_tree[pe*2]++):Dt<=10?Ce.bl_tree[ve*2]++:Ce.bl_tree[ye*2]++,Dt=0,nt=rt,He===0?(Rt=138,De=3):rt===He?(Rt=6,De=3):(Rt=7,De=4))}function yt(Ce,Le,Ze){var Je,nt=-1,rt,He=Le[1],Dt=0,Rt=7,De=4;for(He===0&&(Rt=138,De=3),Je=0;Je<=Ze;Je++)if(rt=He,He=Le[(Je+1)*2+1],!(++Dt<Rt&&rt===He)){if(Dt<De)do Ie(Ce,rt,Ce.bl_tree);while(--Dt!==0);else rt!==0?(rt!==nt&&(Ie(Ce,rt,Ce.bl_tree),Dt--),Ie(Ce,pe,Ce.bl_tree),Se(Ce,Dt-3,2)):Dt<=10?(Ie(Ce,ve,Ce.bl_tree),Se(Ce,Dt-3,3)):(Ie(Ce,ye,Ce.bl_tree),Se(Ce,Dt-11,7));Dt=0,nt=rt,He===0?(Rt=138,De=3):rt===He?(Rt=6,De=3):(Rt=7,De=4)}}function Tt(Ce){var Le;for(It(Ce,Ce.dyn_ltree,Ce.l_desc.max_code),It(Ce,Ce.dyn_dtree,Ce.d_desc.max_code),vt(Ce,Ce.bl_desc),Le=ee-1;Le>=3&&Ce.bl_tree[ue[Le]*2+1]===0;Le--);return Ce.opt_len+=3*(Le+1)+5+5+4,Le}function Wt(Ce,Le,Ze,Je){var nt;for(Se(Ce,Le-257,5),Se(Ce,Ze-1,5),Se(Ce,Je-4,4),nt=0;nt<Je;nt++)Se(Ce,Ce.bl_tree[ue[nt]*2+1],3);yt(Ce,Ce.dyn_ltree,Le-1),yt(Ce,Ce.dyn_dtree,Ze-1)}function ft(Ce){var Le=4093624447,Ze;for(Ze=0;Ze<=31;Ze++,Le>>>=1)if(Le&1&&Ce.dyn_ltree[Ze*2]!==0)return _;if(Ce.dyn_ltree[18]!==0||Ce.dyn_ltree[20]!==0||Ce.dyn_ltree[26]!==0)return I;for(Ze=32;Ze<V;Ze++)if(Ce.dyn_ltree[Ze*2]!==0)return I;return _}var _t=!1;function Xt(Ce){_t||(Oe(),_t=!0),Ce.l_desc=new ge(Ce.dyn_ltree,Q),Ce.d_desc=new ge(Ce.dyn_dtree,se),Ce.bl_desc=new ge(Ce.bl_tree,Ae),Ce.bi_buf=0,Ce.bi_valid=0,et(Ce)}function Nt(Ce,Le,Ze,Je){Se(Ce,(R<<1)+(Je?1:0),3),dt(Ce,Le,Ze)}function qt(Ce){Se(Ce,P<<1,3),Ie(Ce,de,z),xe(Ce)}function nr(Ce,Le,Ze,Je){var nt,rt,He=0;Ce.level>0?(Ce.strm.data_type===B&&(Ce.strm.data_type=ft(Ce)),vt(Ce,Ce.l_desc),vt(Ce,Ce.d_desc),He=Tt(Ce),nt=Ce.opt_len+3+7>>>3,rt=Ce.static_len+3+7>>>3,rt<=nt&&(nt=rt)):nt=rt=Ze+5,Ze+4<=nt&&Le!==-1?Nt(Ce,Le,Ze,Je):Ce.strategy===A||rt===nt?(Se(Ce,(P<<1)+(Je?1:0),3),St(Ce,z,Y)):(Se(Ce,(D<<1)+(Je?1:0),3),Wt(Ce,Ce.l_desc.max_code+1,Ce.d_desc.max_code+1,He+1),St(Ce,Ce.dyn_ltree,Ce.dyn_dtree)),et(Ce),Je&&Mt(Ce)}function ze(Ce,Le,Ze){return Ce.pending_buf[Ce.d_buf+Ce.last_lit*2]=Le>>>8&255,Ce.pending_buf[Ce.d_buf+Ce.last_lit*2+1]=Le&255,Ce.pending_buf[Ce.l_buf+Ce.last_lit]=Ze&255,Ce.last_lit++,Le===0?Ce.dyn_ltree[Ze*2]++:(Ce.matches++,Le--,Ce.dyn_ltree[(oe[Ze]+V+1)*2]++,Ce.dyn_dtree[Ee(Le)*2]++),Ce.last_lit===Ce.lit_bufsize-1}return trees._tr_init=Xt,trees._tr_stored_block=Nt,trees._tr_flush_block=nr,trees._tr_tally=ze,trees._tr_align=qt,trees}var adler32_1,hasRequiredAdler32;function requireAdler32(){if(hasRequiredAdler32)return adler32_1;hasRequiredAdler32=1;function E(A,_,I,B){for(var T=A&65535|0,R=A>>>16&65535|0,P=0;I!==0;){P=I>2e3?2e3:I,I-=P;do T=T+_[B++]|0,R=R+T|0;while(--P);T%=65521,R%=65521}return T|R<<16|0}return adler32_1=E,adler32_1}var crc32_1,hasRequiredCrc32;function requireCrc32(){if(hasRequiredCrc32)return crc32_1;hasRequiredCrc32=1;function E(){for(var I,B=[],T=0;T<256;T++){I=T;for(var R=0;R<8;R++)I=I&1?3988292384^I>>>1:I>>>1;B[T]=I}return B}var A=E();function _(I,B,T,R){var P=A,D=R+T;I^=-1;for(var F=R;F<D;F++)I=I>>>8^P[(I^B[F])&255];return I^-1}return crc32_1=_,crc32_1}var messages,hasRequiredMessages;function requireMessages(){return hasRequiredMessages||(hasRequiredMessages=1,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),messages}var hasRequiredDeflate;function requireDeflate(){if(hasRequiredDeflate)return deflate;hasRequiredDeflate=1;var E=requireCommon(),A=requireTrees(),_=requireAdler32(),I=requireCrc32(),B=requireMessages(),T=0,R=1,P=3,D=4,F=5,L=0,U=1,V=-2,K=-3,J=-5,ee=-1,ie=1,ne=2,ce=3,fe=4,de=0,pe=2,ve=8,ye=9,_e=15,be=8,Te=29,ue=256,O=ue+1+Te,z=30,Y=19,te=2*O+1,oe=15,le=3,he=258,ae=he+le+1,Q=32,se=42,Ae=69,ge=73,Ee=91,ke=103,Se=113,Ie=666,we=1,xe=2,Fe=3,Ge=4,Oe=3;function et(De,We){return De.msg=B[We],We}function Mt(De){return(De<<1)-(De>4?9:0)}function dt(De){for(var We=De.length;--We>=0;)De[We]=0}function mt(De){var We=De.state,Ve=We.pending;Ve>De.avail_out&&(Ve=De.avail_out),Ve!==0&&(E.arraySet(De.output,We.pending_buf,We.pending_out,Ve,De.next_out),De.next_out+=Ve,We.pending_out+=Ve,De.total_out+=Ve,De.avail_out-=Ve,We.pending-=Ve,We.pending===0&&(We.pending_out=0))}function Ut(De,We){A._tr_flush_block(De,De.block_start>=0?De.block_start:-1,De.strstart-De.block_start,We),De.block_start=De.strstart,mt(De.strm)}function St(De,We){De.pending_buf[De.pending++]=We}function vt(De,We){De.pending_buf[De.pending++]=We>>>8&255,De.pending_buf[De.pending++]=We&255}function It(De,We,Ve,qe){var pt=De.avail_in;return pt>qe&&(pt=qe),pt===0?0:(De.avail_in-=pt,E.arraySet(We,De.input,De.next_in,pt,Ve),De.state.wrap===1?De.adler=_(De.adler,We,pt,Ve):De.state.wrap===2&&(De.adler=I(De.adler,We,pt,Ve)),De.next_in+=pt,De.total_in+=pt,pt)}function yt(De,We){var Ve=De.max_chain_length,qe=De.strstart,pt,At,jt=De.prev_length,rr=De.nice_match,Ke=De.strstart>De.w_size-ae?De.strstart-(De.w_size-ae):0,Ne=De.window,Ye=De.w_mask,st=De.prev,bt=De.strstart+he,Qe=Ne[qe+jt-1],Re=Ne[qe+jt];De.prev_length>=De.good_match&&(Ve>>=2),rr>De.lookahead&&(rr=De.lookahead);do if(pt=We,!(Ne[pt+jt]!==Re||Ne[pt+jt-1]!==Qe||Ne[pt]!==Ne[qe]||Ne[++pt]!==Ne[qe+1])){qe+=2,pt++;do;while(Ne[++qe]===Ne[++pt]&&Ne[++qe]===Ne[++pt]&&Ne[++qe]===Ne[++pt]&&Ne[++qe]===Ne[++pt]&&Ne[++qe]===Ne[++pt]&&Ne[++qe]===Ne[++pt]&&Ne[++qe]===Ne[++pt]&&Ne[++qe]===Ne[++pt]&&qe<bt);if(At=he-(bt-qe),qe=bt-he,At>jt){if(De.match_start=We,jt=At,At>=rr)break;Qe=Ne[qe+jt-1],Re=Ne[qe+jt]}}while((We=st[We&Ye])>Ke&&--Ve!==0);return jt<=De.lookahead?jt:De.lookahead}function Tt(De){var We=De.w_size,Ve,qe,pt,At,jt;do{if(At=De.window_size-De.lookahead-De.strstart,De.strstart>=We+(We-ae)){E.arraySet(De.window,De.window,We,We,0),De.match_start-=We,De.strstart-=We,De.block_start-=We,qe=De.hash_size,Ve=qe;do pt=De.head[--Ve],De.head[Ve]=pt>=We?pt-We:0;while(--qe);qe=We,Ve=qe;do pt=De.prev[--Ve],De.prev[Ve]=pt>=We?pt-We:0;while(--qe);At+=We}if(De.strm.avail_in===0)break;if(qe=It(De.strm,De.window,De.strstart+De.lookahead,At),De.lookahead+=qe,De.lookahead+De.insert>=le)for(jt=De.strstart-De.insert,De.ins_h=De.window[jt],De.ins_h=(De.ins_h<<De.hash_shift^De.window[jt+1])&De.hash_mask;De.insert&&(De.ins_h=(De.ins_h<<De.hash_shift^De.window[jt+le-1])&De.hash_mask,De.prev[jt&De.w_mask]=De.head[De.ins_h],De.head[De.ins_h]=jt,jt++,De.insert--,!(De.lookahead+De.insert<le)););}while(De.lookahead<ae&&De.strm.avail_in!==0)}function Wt(De,We){var Ve=65535;for(Ve>De.pending_buf_size-5&&(Ve=De.pending_buf_size-5);;){if(De.lookahead<=1){if(Tt(De),De.lookahead===0&&We===T)return we;if(De.lookahead===0)break}De.strstart+=De.lookahead,De.lookahead=0;var qe=De.block_start+Ve;if((De.strstart===0||De.strstart>=qe)&&(De.lookahead=De.strstart-qe,De.strstart=qe,Ut(De,!1),De.strm.avail_out===0)||De.strstart-De.block_start>=De.w_size-ae&&(Ut(De,!1),De.strm.avail_out===0))return we}return De.insert=0,We===D?(Ut(De,!0),De.strm.avail_out===0?Fe:Ge):(De.strstart>De.block_start&&(Ut(De,!1),De.strm.avail_out===0),we)}function ft(De,We){for(var Ve,qe;;){if(De.lookahead<ae){if(Tt(De),De.lookahead<ae&&We===T)return we;if(De.lookahead===0)break}if(Ve=0,De.lookahead>=le&&(De.ins_h=(De.ins_h<<De.hash_shift^De.window[De.strstart+le-1])&De.hash_mask,Ve=De.prev[De.strstart&De.w_mask]=De.head[De.ins_h],De.head[De.ins_h]=De.strstart),Ve!==0&&De.strstart-Ve<=De.w_size-ae&&(De.match_length=yt(De,Ve)),De.match_length>=le)if(qe=A._tr_tally(De,De.strstart-De.match_start,De.match_length-le),De.lookahead-=De.match_length,De.match_length<=De.max_lazy_match&&De.lookahead>=le){De.match_length--;do De.strstart++,De.ins_h=(De.ins_h<<De.hash_shift^De.window[De.strstart+le-1])&De.hash_mask,Ve=De.prev[De.strstart&De.w_mask]=De.head[De.ins_h],De.head[De.ins_h]=De.strstart;while(--De.match_length!==0);De.strstart++}else De.strstart+=De.match_length,De.match_length=0,De.ins_h=De.window[De.strstart],De.ins_h=(De.ins_h<<De.hash_shift^De.window[De.strstart+1])&De.hash_mask;else qe=A._tr_tally(De,0,De.window[De.strstart]),De.lookahead--,De.strstart++;if(qe&&(Ut(De,!1),De.strm.avail_out===0))return we}return De.insert=De.strstart<le-1?De.strstart:le-1,We===D?(Ut(De,!0),De.strm.avail_out===0?Fe:Ge):De.last_lit&&(Ut(De,!1),De.strm.avail_out===0)?we:xe}function _t(De,We){for(var Ve,qe,pt;;){if(De.lookahead<ae){if(Tt(De),De.lookahead<ae&&We===T)return we;if(De.lookahead===0)break}if(Ve=0,De.lookahead>=le&&(De.ins_h=(De.ins_h<<De.hash_shift^De.window[De.strstart+le-1])&De.hash_mask,Ve=De.prev[De.strstart&De.w_mask]=De.head[De.ins_h],De.head[De.ins_h]=De.strstart),De.prev_length=De.match_length,De.prev_match=De.match_start,De.match_length=le-1,Ve!==0&&De.prev_length<De.max_lazy_match&&De.strstart-Ve<=De.w_size-ae&&(De.match_length=yt(De,Ve),De.match_length<=5&&(De.strategy===ie||De.match_length===le&&De.strstart-De.match_start>4096)&&(De.match_length=le-1)),De.prev_length>=le&&De.match_length<=De.prev_length){pt=De.strstart+De.lookahead-le,qe=A._tr_tally(De,De.strstart-1-De.prev_match,De.prev_length-le),De.lookahead-=De.prev_length-1,De.prev_length-=2;do++De.strstart<=pt&&(De.ins_h=(De.ins_h<<De.hash_shift^De.window[De.strstart+le-1])&De.hash_mask,Ve=De.prev[De.strstart&De.w_mask]=De.head[De.ins_h],De.head[De.ins_h]=De.strstart);while(--De.prev_length!==0);if(De.match_available=0,De.match_length=le-1,De.strstart++,qe&&(Ut(De,!1),De.strm.avail_out===0))return we}else if(De.match_available){if(qe=A._tr_tally(De,0,De.window[De.strstart-1]),qe&&Ut(De,!1),De.strstart++,De.lookahead--,De.strm.avail_out===0)return we}else De.match_available=1,De.strstart++,De.lookahead--}return De.match_available&&(qe=A._tr_tally(De,0,De.window[De.strstart-1]),De.match_available=0),De.insert=De.strstart<le-1?De.strstart:le-1,We===D?(Ut(De,!0),De.strm.avail_out===0?Fe:Ge):De.last_lit&&(Ut(De,!1),De.strm.avail_out===0)?we:xe}function Xt(De,We){for(var Ve,qe,pt,At,jt=De.window;;){if(De.lookahead<=he){if(Tt(De),De.lookahead<=he&&We===T)return we;if(De.lookahead===0)break}if(De.match_length=0,De.lookahead>=le&&De.strstart>0&&(pt=De.strstart-1,qe=jt[pt],qe===jt[++pt]&&qe===jt[++pt]&&qe===jt[++pt])){At=De.strstart+he;do;while(qe===jt[++pt]&&qe===jt[++pt]&&qe===jt[++pt]&&qe===jt[++pt]&&qe===jt[++pt]&&qe===jt[++pt]&&qe===jt[++pt]&&qe===jt[++pt]&&pt<At);De.match_length=he-(At-pt),De.match_length>De.lookahead&&(De.match_length=De.lookahead)}if(De.match_length>=le?(Ve=A._tr_tally(De,1,De.match_length-le),De.lookahead-=De.match_length,De.strstart+=De.match_length,De.match_length=0):(Ve=A._tr_tally(De,0,De.window[De.strstart]),De.lookahead--,De.strstart++),Ve&&(Ut(De,!1),De.strm.avail_out===0))return we}return De.insert=0,We===D?(Ut(De,!0),De.strm.avail_out===0?Fe:Ge):De.last_lit&&(Ut(De,!1),De.strm.avail_out===0)?we:xe}function Nt(De,We){for(var Ve;;){if(De.lookahead===0&&(Tt(De),De.lookahead===0)){if(We===T)return we;break}if(De.match_length=0,Ve=A._tr_tally(De,0,De.window[De.strstart]),De.lookahead--,De.strstart++,Ve&&(Ut(De,!1),De.strm.avail_out===0))return we}return De.insert=0,We===D?(Ut(De,!0),De.strm.avail_out===0?Fe:Ge):De.last_lit&&(Ut(De,!1),De.strm.avail_out===0)?we:xe}function qt(De,We,Ve,qe,pt){this.good_length=De,this.max_lazy=We,this.nice_length=Ve,this.max_chain=qe,this.func=pt}var nr;nr=[new qt(0,0,0,0,Wt),new qt(4,4,8,4,ft),new qt(4,5,16,8,ft),new qt(4,6,32,32,ft),new qt(4,4,16,16,_t),new qt(8,16,32,32,_t),new qt(8,16,128,128,_t),new qt(8,32,128,256,_t),new qt(32,128,258,1024,_t),new qt(32,258,258,4096,_t)];function ze(De){De.window_size=2*De.w_size,dt(De.head),De.max_lazy_match=nr[De.level].max_lazy,De.good_match=nr[De.level].good_length,De.nice_match=nr[De.level].nice_length,De.max_chain_length=nr[De.level].max_chain,De.strstart=0,De.block_start=0,De.lookahead=0,De.insert=0,De.match_length=De.prev_length=le-1,De.match_available=0,De.ins_h=0}function Ce(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ve,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new E.Buf16(te*2),this.dyn_dtree=new E.Buf16((2*z+1)*2),this.bl_tree=new E.Buf16((2*Y+1)*2),dt(this.dyn_ltree),dt(this.dyn_dtree),dt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new E.Buf16(oe+1),this.heap=new E.Buf16(2*O+1),dt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new E.Buf16(2*O+1),dt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Le(De){var We;return!De||!De.state?et(De,V):(De.total_in=De.total_out=0,De.data_type=pe,We=De.state,We.pending=0,We.pending_out=0,We.wrap<0&&(We.wrap=-We.wrap),We.status=We.wrap?se:Se,De.adler=We.wrap===2?0:1,We.last_flush=T,A._tr_init(We),L)}function Ze(De){var We=Le(De);return We===L&&ze(De.state),We}function Je(De,We){return!De||!De.state||De.state.wrap!==2?V:(De.state.gzhead=We,L)}function nt(De,We,Ve,qe,pt,At){if(!De)return V;var jt=1;if(We===ee&&(We=6),qe<0?(jt=0,qe=-qe):qe>15&&(jt=2,qe-=16),pt<1||pt>ye||Ve!==ve||qe<8||qe>15||We<0||We>9||At<0||At>fe)return et(De,V);qe===8&&(qe=9);var rr=new Ce;return De.state=rr,rr.strm=De,rr.wrap=jt,rr.gzhead=null,rr.w_bits=qe,rr.w_size=1<<rr.w_bits,rr.w_mask=rr.w_size-1,rr.hash_bits=pt+7,rr.hash_size=1<<rr.hash_bits,rr.hash_mask=rr.hash_size-1,rr.hash_shift=~~((rr.hash_bits+le-1)/le),rr.window=new E.Buf8(rr.w_size*2),rr.head=new E.Buf16(rr.hash_size),rr.prev=new E.Buf16(rr.w_size),rr.lit_bufsize=1<<pt+6,rr.pending_buf_size=rr.lit_bufsize*4,rr.pending_buf=new E.Buf8(rr.pending_buf_size),rr.d_buf=1*rr.lit_bufsize,rr.l_buf=3*rr.lit_bufsize,rr.level=We,rr.strategy=At,rr.method=Ve,Ze(De)}function rt(De,We){return nt(De,We,ve,_e,be,de)}function He(De,We){var Ve,qe,pt,At;if(!De||!De.state||We>F||We<0)return De?et(De,V):V;if(qe=De.state,!De.output||!De.input&&De.avail_in!==0||qe.status===Ie&&We!==D)return et(De,De.avail_out===0?J:V);if(qe.strm=De,Ve=qe.last_flush,qe.last_flush=We,qe.status===se)if(qe.wrap===2)De.adler=0,St(qe,31),St(qe,139),St(qe,8),qe.gzhead?(St(qe,(qe.gzhead.text?1:0)+(qe.gzhead.hcrc?2:0)+(qe.gzhead.extra?4:0)+(qe.gzhead.name?8:0)+(qe.gzhead.comment?16:0)),St(qe,qe.gzhead.time&255),St(qe,qe.gzhead.time>>8&255),St(qe,qe.gzhead.time>>16&255),St(qe,qe.gzhead.time>>24&255),St(qe,qe.level===9?2:qe.strategy>=ne||qe.level<2?4:0),St(qe,qe.gzhead.os&255),qe.gzhead.extra&&qe.gzhead.extra.length&&(St(qe,qe.gzhead.extra.length&255),St(qe,qe.gzhead.extra.length>>8&255)),qe.gzhead.hcrc&&(De.adler=I(De.adler,qe.pending_buf,qe.pending,0)),qe.gzindex=0,qe.status=Ae):(St(qe,0),St(qe,0),St(qe,0),St(qe,0),St(qe,0),St(qe,qe.level===9?2:qe.strategy>=ne||qe.level<2?4:0),St(qe,Oe),qe.status=Se);else{var jt=ve+(qe.w_bits-8<<4)<<8,rr=-1;qe.strategy>=ne||qe.level<2?rr=0:qe.level<6?rr=1:qe.level===6?rr=2:rr=3,jt|=rr<<6,qe.strstart!==0&&(jt|=Q),jt+=31-jt%31,qe.status=Se,vt(qe,jt),qe.strstart!==0&&(vt(qe,De.adler>>>16),vt(qe,De.adler&65535)),De.adler=1}if(qe.status===Ae)if(qe.gzhead.extra){for(pt=qe.pending;qe.gzindex<(qe.gzhead.extra.length&65535)&&!(qe.pending===qe.pending_buf_size&&(qe.gzhead.hcrc&&qe.pending>pt&&(De.adler=I(De.adler,qe.pending_buf,qe.pending-pt,pt)),mt(De),pt=qe.pending,qe.pending===qe.pending_buf_size));)St(qe,qe.gzhead.extra[qe.gzindex]&255),qe.gzindex++;qe.gzhead.hcrc&&qe.pending>pt&&(De.adler=I(De.adler,qe.pending_buf,qe.pending-pt,pt)),qe.gzindex===qe.gzhead.extra.length&&(qe.gzindex=0,qe.status=ge)}else qe.status=ge;if(qe.status===ge)if(qe.gzhead.name){pt=qe.pending;do{if(qe.pending===qe.pending_buf_size&&(qe.gzhead.hcrc&&qe.pending>pt&&(De.adler=I(De.adler,qe.pending_buf,qe.pending-pt,pt)),mt(De),pt=qe.pending,qe.pending===qe.pending_buf_size)){At=1;break}qe.gzindex<qe.gzhead.name.length?At=qe.gzhead.name.charCodeAt(qe.gzindex++)&255:At=0,St(qe,At)}while(At!==0);qe.gzhead.hcrc&&qe.pending>pt&&(De.adler=I(De.adler,qe.pending_buf,qe.pending-pt,pt)),At===0&&(qe.gzindex=0,qe.status=Ee)}else qe.status=Ee;if(qe.status===Ee)if(qe.gzhead.comment){pt=qe.pending;do{if(qe.pending===qe.pending_buf_size&&(qe.gzhead.hcrc&&qe.pending>pt&&(De.adler=I(De.adler,qe.pending_buf,qe.pending-pt,pt)),mt(De),pt=qe.pending,qe.pending===qe.pending_buf_size)){At=1;break}qe.gzindex<qe.gzhead.comment.length?At=qe.gzhead.comment.charCodeAt(qe.gzindex++)&255:At=0,St(qe,At)}while(At!==0);qe.gzhead.hcrc&&qe.pending>pt&&(De.adler=I(De.adler,qe.pending_buf,qe.pending-pt,pt)),At===0&&(qe.status=ke)}else qe.status=ke;if(qe.status===ke&&(qe.gzhead.hcrc?(qe.pending+2>qe.pending_buf_size&&mt(De),qe.pending+2<=qe.pending_buf_size&&(St(qe,De.adler&255),St(qe,De.adler>>8&255),De.adler=0,qe.status=Se)):qe.status=Se),qe.pending!==0){if(mt(De),De.avail_out===0)return qe.last_flush=-1,L}else if(De.avail_in===0&&Mt(We)<=Mt(Ve)&&We!==D)return et(De,J);if(qe.status===Ie&&De.avail_in!==0)return et(De,J);if(De.avail_in!==0||qe.lookahead!==0||We!==T&&qe.status!==Ie){var Ke=qe.strategy===ne?Nt(qe,We):qe.strategy===ce?Xt(qe,We):nr[qe.level].func(qe,We);if((Ke===Fe||Ke===Ge)&&(qe.status=Ie),Ke===we||Ke===Fe)return De.avail_out===0&&(qe.last_flush=-1),L;if(Ke===xe&&(We===R?A._tr_align(qe):We!==F&&(A._tr_stored_block(qe,0,0,!1),We===P&&(dt(qe.head),qe.lookahead===0&&(qe.strstart=0,qe.block_start=0,qe.insert=0))),mt(De),De.avail_out===0))return qe.last_flush=-1,L}return We!==D?L:qe.wrap<=0?U:(qe.wrap===2?(St(qe,De.adler&255),St(qe,De.adler>>8&255),St(qe,De.adler>>16&255),St(qe,De.adler>>24&255),St(qe,De.total_in&255),St(qe,De.total_in>>8&255),St(qe,De.total_in>>16&255),St(qe,De.total_in>>24&255)):(vt(qe,De.adler>>>16),vt(qe,De.adler&65535)),mt(De),qe.wrap>0&&(qe.wrap=-qe.wrap),qe.pending!==0?L:U)}function Dt(De){var We;return!De||!De.state?V:(We=De.state.status,We!==se&&We!==Ae&&We!==ge&&We!==Ee&&We!==ke&&We!==Se&&We!==Ie?et(De,V):(De.state=null,We===Se?et(De,K):L))}function Rt(De,We){var Ve=We.length,qe,pt,At,jt,rr,Ke,Ne,Ye;if(!De||!De.state||(qe=De.state,jt=qe.wrap,jt===2||jt===1&&qe.status!==se||qe.lookahead))return V;for(jt===1&&(De.adler=_(De.adler,We,Ve,0)),qe.wrap=0,Ve>=qe.w_size&&(jt===0&&(dt(qe.head),qe.strstart=0,qe.block_start=0,qe.insert=0),Ye=new E.Buf8(qe.w_size),E.arraySet(Ye,We,Ve-qe.w_size,qe.w_size,0),We=Ye,Ve=qe.w_size),rr=De.avail_in,Ke=De.next_in,Ne=De.input,De.avail_in=Ve,De.next_in=0,De.input=We,Tt(qe);qe.lookahead>=le;){pt=qe.strstart,At=qe.lookahead-(le-1);do qe.ins_h=(qe.ins_h<<qe.hash_shift^qe.window[pt+le-1])&qe.hash_mask,qe.prev[pt&qe.w_mask]=qe.head[qe.ins_h],qe.head[qe.ins_h]=pt,pt++;while(--At);qe.strstart=pt,qe.lookahead=le-1,Tt(qe)}return qe.strstart+=qe.lookahead,qe.block_start=qe.strstart,qe.insert=qe.lookahead,qe.lookahead=0,qe.match_length=qe.prev_length=le-1,qe.match_available=0,De.next_in=Ke,De.input=Ne,De.avail_in=rr,qe.wrap=jt,L}return deflate.deflateInit=rt,deflate.deflateInit2=nt,deflate.deflateReset=Ze,deflate.deflateResetKeep=Le,deflate.deflateSetHeader=Je,deflate.deflate=He,deflate.deflateEnd=Dt,deflate.deflateSetDictionary=Rt,deflate.deflateInfo="pako deflate (from Nodeca project)",deflate}var inflate={},inffast,hasRequiredInffast;function requireInffast(){if(hasRequiredInffast)return inffast;hasRequiredInffast=1;var E=30,A=12;return inffast=function(I,B){var T,R,P,D,F,L,U,V,K,J,ee,ie,ne,ce,fe,de,pe,ve,ye,_e,be,Te,ue,O,z;T=I.state,R=I.next_in,O=I.input,P=R+(I.avail_in-5),D=I.next_out,z=I.output,F=D-(B-I.avail_out),L=D+(I.avail_out-257),U=T.dmax,V=T.wsize,K=T.whave,J=T.wnext,ee=T.window,ie=T.hold,ne=T.bits,ce=T.lencode,fe=T.distcode,de=(1<<T.lenbits)-1,pe=(1<<T.distbits)-1;e:do{ne<15&&(ie+=O[R++]<<ne,ne+=8,ie+=O[R++]<<ne,ne+=8),ve=ce[ie&de];t:for(;;){if(ye=ve>>>24,ie>>>=ye,ne-=ye,ye=ve>>>16&255,ye===0)z[D++]=ve&65535;else if(ye&16){_e=ve&65535,ye&=15,ye&&(ne<ye&&(ie+=O[R++]<<ne,ne+=8),_e+=ie&(1<<ye)-1,ie>>>=ye,ne-=ye),ne<15&&(ie+=O[R++]<<ne,ne+=8,ie+=O[R++]<<ne,ne+=8),ve=fe[ie&pe];r:for(;;){if(ye=ve>>>24,ie>>>=ye,ne-=ye,ye=ve>>>16&255,ye&16){if(be=ve&65535,ye&=15,ne<ye&&(ie+=O[R++]<<ne,ne+=8,ne<ye&&(ie+=O[R++]<<ne,ne+=8)),be+=ie&(1<<ye)-1,be>U){I.msg="invalid distance too far back",T.mode=E;break e}if(ie>>>=ye,ne-=ye,ye=D-F,be>ye){if(ye=be-ye,ye>K&&T.sane){I.msg="invalid distance too far back",T.mode=E;break e}if(Te=0,ue=ee,J===0){if(Te+=V-ye,ye<_e){_e-=ye;do z[D++]=ee[Te++];while(--ye);Te=D-be,ue=z}}else if(J<ye){if(Te+=V+J-ye,ye-=J,ye<_e){_e-=ye;do z[D++]=ee[Te++];while(--ye);if(Te=0,J<_e){ye=J,_e-=ye;do z[D++]=ee[Te++];while(--ye);Te=D-be,ue=z}}}else if(Te+=J-ye,ye<_e){_e-=ye;do z[D++]=ee[Te++];while(--ye);Te=D-be,ue=z}for(;_e>2;)z[D++]=ue[Te++],z[D++]=ue[Te++],z[D++]=ue[Te++],_e-=3;_e&&(z[D++]=ue[Te++],_e>1&&(z[D++]=ue[Te++]))}else{Te=D-be;do z[D++]=z[Te++],z[D++]=z[Te++],z[D++]=z[Te++],_e-=3;while(_e>2);_e&&(z[D++]=z[Te++],_e>1&&(z[D++]=z[Te++]))}}else if((ye&64)===0){ve=fe[(ve&65535)+(ie&(1<<ye)-1)];continue r}else{I.msg="invalid distance code",T.mode=E;break e}break}}else if((ye&64)===0){ve=ce[(ve&65535)+(ie&(1<<ye)-1)];continue t}else if(ye&32){T.mode=A;break e}else{I.msg="invalid literal/length code",T.mode=E;break e}break}}while(R<P&&D<L);_e=ne>>3,R-=_e,ne-=_e<<3,ie&=(1<<ne)-1,I.next_in=R,I.next_out=D,I.avail_in=R<P?5+(P-R):5-(R-P),I.avail_out=D<L?257+(L-D):257-(D-L),T.hold=ie,T.bits=ne},inffast}var inftrees,hasRequiredInftrees;function requireInftrees(){if(hasRequiredInftrees)return inftrees;hasRequiredInftrees=1;var E=requireCommon(),A=15,_=852,I=592,B=0,T=1,R=2,P=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],D=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],F=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],L=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return inftrees=function(V,K,J,ee,ie,ne,ce,fe){var de=fe.bits,pe=0,ve=0,ye=0,_e=0,be=0,Te=0,ue=0,O=0,z=0,Y=0,te,oe,le,he,ae,Q=null,se=0,Ae,ge=new E.Buf16(A+1),Ee=new E.Buf16(A+1),ke=null,Se=0,Ie,we,xe;for(pe=0;pe<=A;pe++)ge[pe]=0;for(ve=0;ve<ee;ve++)ge[K[J+ve]]++;for(be=de,_e=A;_e>=1&&ge[_e]===0;_e--);if(be>_e&&(be=_e),_e===0)return ie[ne++]=1<<24|64<<16|0,ie[ne++]=1<<24|64<<16|0,fe.bits=1,0;for(ye=1;ye<_e&&ge[ye]===0;ye++);for(be<ye&&(be=ye),O=1,pe=1;pe<=A;pe++)if(O<<=1,O-=ge[pe],O<0)return-1;if(O>0&&(V===B||_e!==1))return-1;for(Ee[1]=0,pe=1;pe<A;pe++)Ee[pe+1]=Ee[pe]+ge[pe];for(ve=0;ve<ee;ve++)K[J+ve]!==0&&(ce[Ee[K[J+ve]]++]=ve);if(V===B?(Q=ke=ce,Ae=19):V===T?(Q=P,se-=257,ke=D,Se-=257,Ae=256):(Q=F,ke=L,Ae=-1),Y=0,ve=0,pe=ye,ae=ne,Te=be,ue=0,le=-1,z=1<<be,he=z-1,V===T&&z>_||V===R&&z>I)return 1;for(;;){Ie=pe-ue,ce[ve]<Ae?(we=0,xe=ce[ve]):ce[ve]>Ae?(we=ke[Se+ce[ve]],xe=Q[se+ce[ve]]):(we=96,xe=0),te=1<<pe-ue,oe=1<<Te,ye=oe;do oe-=te,ie[ae+(Y>>ue)+oe]=Ie<<24|we<<16|xe|0;while(oe!==0);for(te=1<<pe-1;Y&te;)te>>=1;if(te!==0?(Y&=te-1,Y+=te):Y=0,ve++,--ge[pe]===0){if(pe===_e)break;pe=K[J+ce[ve]]}if(pe>be&&(Y&he)!==le){for(ue===0&&(ue=be),ae+=ye,Te=pe-ue,O=1<<Te;Te+ue<_e&&(O-=ge[Te+ue],!(O<=0));)Te++,O<<=1;if(z+=1<<Te,V===T&&z>_||V===R&&z>I)return 1;le=Y&he,ie[le]=be<<24|Te<<16|ae-ne|0}}return Y!==0&&(ie[ae+Y]=pe-ue<<24|64<<16|0),fe.bits=be,0},inftrees}var hasRequiredInflate;function requireInflate(){if(hasRequiredInflate)return inflate;hasRequiredInflate=1;var E=requireCommon(),A=requireAdler32(),_=requireCrc32(),I=requireInffast(),B=requireInftrees(),T=0,R=1,P=2,D=4,F=5,L=6,U=0,V=1,K=2,J=-2,ee=-3,ie=-4,ne=-5,ce=8,fe=1,de=2,pe=3,ve=4,ye=5,_e=6,be=7,Te=8,ue=9,O=10,z=11,Y=12,te=13,oe=14,le=15,he=16,ae=17,Q=18,se=19,Ae=20,ge=21,Ee=22,ke=23,Se=24,Ie=25,we=26,xe=27,Fe=28,Ge=29,Oe=30,et=31,Mt=32,dt=852,mt=592,Ut=15,St=Ut;function vt(nt){return(nt>>>24&255)+(nt>>>8&65280)+((nt&65280)<<8)+((nt&255)<<24)}function It(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new E.Buf16(320),this.work=new E.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function yt(nt){var rt;return!nt||!nt.state?J:(rt=nt.state,nt.total_in=nt.total_out=rt.total=0,nt.msg="",rt.wrap&&(nt.adler=rt.wrap&1),rt.mode=fe,rt.last=0,rt.havedict=0,rt.dmax=32768,rt.head=null,rt.hold=0,rt.bits=0,rt.lencode=rt.lendyn=new E.Buf32(dt),rt.distcode=rt.distdyn=new E.Buf32(mt),rt.sane=1,rt.back=-1,U)}function Tt(nt){var rt;return!nt||!nt.state?J:(rt=nt.state,rt.wsize=0,rt.whave=0,rt.wnext=0,yt(nt))}function Wt(nt,rt){var He,Dt;return!nt||!nt.state||(Dt=nt.state,rt<0?(He=0,rt=-rt):(He=(rt>>4)+1,rt<48&&(rt&=15)),rt&&(rt<8||rt>15))?J:(Dt.window!==null&&Dt.wbits!==rt&&(Dt.window=null),Dt.wrap=He,Dt.wbits=rt,Tt(nt))}function ft(nt,rt){var He,Dt;return nt?(Dt=new It,nt.state=Dt,Dt.window=null,He=Wt(nt,rt),He!==U&&(nt.state=null),He):J}function _t(nt){return ft(nt,St)}var Xt=!0,Nt,qt;function nr(nt){if(Xt){var rt;for(Nt=new E.Buf32(512),qt=new E.Buf32(32),rt=0;rt<144;)nt.lens[rt++]=8;for(;rt<256;)nt.lens[rt++]=9;for(;rt<280;)nt.lens[rt++]=7;for(;rt<288;)nt.lens[rt++]=8;for(B(R,nt.lens,0,288,Nt,0,nt.work,{bits:9}),rt=0;rt<32;)nt.lens[rt++]=5;B(P,nt.lens,0,32,qt,0,nt.work,{bits:5}),Xt=!1}nt.lencode=Nt,nt.lenbits=9,nt.distcode=qt,nt.distbits=5}function ze(nt,rt,He,Dt){var Rt,De=nt.state;return De.window===null&&(De.wsize=1<<De.wbits,De.wnext=0,De.whave=0,De.window=new E.Buf8(De.wsize)),Dt>=De.wsize?(E.arraySet(De.window,rt,He-De.wsize,De.wsize,0),De.wnext=0,De.whave=De.wsize):(Rt=De.wsize-De.wnext,Rt>Dt&&(Rt=Dt),E.arraySet(De.window,rt,He-Dt,Rt,De.wnext),Dt-=Rt,Dt?(E.arraySet(De.window,rt,He-Dt,Dt,0),De.wnext=Dt,De.whave=De.wsize):(De.wnext+=Rt,De.wnext===De.wsize&&(De.wnext=0),De.whave<De.wsize&&(De.whave+=Rt))),0}function Ce(nt,rt){var He,Dt,Rt,De,We,Ve,qe,pt,At,jt,rr,Ke,Ne,Ye,st=0,bt,Qe,Re,Pe,Me,$e,it,kt,xt=new E.Buf8(4),Ot,Jt,tr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!nt||!nt.state||!nt.output||!nt.input&&nt.avail_in!==0)return J;He=nt.state,He.mode===Y&&(He.mode=te),We=nt.next_out,Rt=nt.output,qe=nt.avail_out,De=nt.next_in,Dt=nt.input,Ve=nt.avail_in,pt=He.hold,At=He.bits,jt=Ve,rr=qe,kt=U;e:for(;;)switch(He.mode){case fe:if(He.wrap===0){He.mode=te;break}for(;At<16;){if(Ve===0)break e;Ve--,pt+=Dt[De++]<<At,At+=8}if(He.wrap&2&&pt===35615){He.check=0,xt[0]=pt&255,xt[1]=pt>>>8&255,He.check=_(He.check,xt,2,0),pt=0,At=0,He.mode=de;break}if(He.flags=0,He.head&&(He.head.done=!1),!(He.wrap&1)||(((pt&255)<<8)+(pt>>8))%31){nt.msg="incorrect header check",He.mode=Oe;break}if((pt&15)!==ce){nt.msg="unknown compression method",He.mode=Oe;break}if(pt>>>=4,At-=4,it=(pt&15)+8,He.wbits===0)He.wbits=it;else if(it>He.wbits){nt.msg="invalid window size",He.mode=Oe;break}He.dmax=1<<it,nt.adler=He.check=1,He.mode=pt&512?O:Y,pt=0,At=0;break;case de:for(;At<16;){if(Ve===0)break e;Ve--,pt+=Dt[De++]<<At,At+=8}if(He.flags=pt,(He.flags&255)!==ce){nt.msg="unknown compression method",He.mode=Oe;break}if(He.flags&57344){nt.msg="unknown header flags set",He.mode=Oe;break}He.head&&(He.head.text=pt>>8&1),He.flags&512&&(xt[0]=pt&255,xt[1]=pt>>>8&255,He.check=_(He.check,xt,2,0)),pt=0,At=0,He.mode=pe;case pe:for(;At<32;){if(Ve===0)break e;Ve--,pt+=Dt[De++]<<At,At+=8}He.head&&(He.head.time=pt),He.flags&512&&(xt[0]=pt&255,xt[1]=pt>>>8&255,xt[2]=pt>>>16&255,xt[3]=pt>>>24&255,He.check=_(He.check,xt,4,0)),pt=0,At=0,He.mode=ve;case ve:for(;At<16;){if(Ve===0)break e;Ve--,pt+=Dt[De++]<<At,At+=8}He.head&&(He.head.xflags=pt&255,He.head.os=pt>>8),He.flags&512&&(xt[0]=pt&255,xt[1]=pt>>>8&255,He.check=_(He.check,xt,2,0)),pt=0,At=0,He.mode=ye;case ye:if(He.flags&1024){for(;At<16;){if(Ve===0)break e;Ve--,pt+=Dt[De++]<<At,At+=8}He.length=pt,He.head&&(He.head.extra_len=pt),He.flags&512&&(xt[0]=pt&255,xt[1]=pt>>>8&255,He.check=_(He.check,xt,2,0)),pt=0,At=0}else He.head&&(He.head.extra=null);He.mode=_e;case _e:if(He.flags&1024&&(Ke=He.length,Ke>Ve&&(Ke=Ve),Ke&&(He.head&&(it=He.head.extra_len-He.length,He.head.extra||(He.head.extra=new Array(He.head.extra_len)),E.arraySet(He.head.extra,Dt,De,Ke,it)),He.flags&512&&(He.check=_(He.check,Dt,Ke,De)),Ve-=Ke,De+=Ke,He.length-=Ke),He.length))break e;He.length=0,He.mode=be;case be:if(He.flags&2048){if(Ve===0)break e;Ke=0;do it=Dt[De+Ke++],He.head&&it&&He.length<65536&&(He.head.name+=String.fromCharCode(it));while(it&&Ke<Ve);if(He.flags&512&&(He.check=_(He.check,Dt,Ke,De)),Ve-=Ke,De+=Ke,it)break e}else He.head&&(He.head.name=null);He.length=0,He.mode=Te;case Te:if(He.flags&4096){if(Ve===0)break e;Ke=0;do it=Dt[De+Ke++],He.head&&it&&He.length<65536&&(He.head.comment+=String.fromCharCode(it));while(it&&Ke<Ve);if(He.flags&512&&(He.check=_(He.check,Dt,Ke,De)),Ve-=Ke,De+=Ke,it)break e}else He.head&&(He.head.comment=null);He.mode=ue;case ue:if(He.flags&512){for(;At<16;){if(Ve===0)break e;Ve--,pt+=Dt[De++]<<At,At+=8}if(pt!==(He.check&65535)){nt.msg="header crc mismatch",He.mode=Oe;break}pt=0,At=0}He.head&&(He.head.hcrc=He.flags>>9&1,He.head.done=!0),nt.adler=He.check=0,He.mode=Y;break;case O:for(;At<32;){if(Ve===0)break e;Ve--,pt+=Dt[De++]<<At,At+=8}nt.adler=He.check=vt(pt),pt=0,At=0,He.mode=z;case z:if(He.havedict===0)return nt.next_out=We,nt.avail_out=qe,nt.next_in=De,nt.avail_in=Ve,He.hold=pt,He.bits=At,K;nt.adler=He.check=1,He.mode=Y;case Y:if(rt===F||rt===L)break e;case te:if(He.last){pt>>>=At&7,At-=At&7,He.mode=xe;break}for(;At<3;){if(Ve===0)break e;Ve--,pt+=Dt[De++]<<At,At+=8}switch(He.last=pt&1,pt>>>=1,At-=1,pt&3){case 0:He.mode=oe;break;case 1:if(nr(He),He.mode=Ae,rt===L){pt>>>=2,At-=2;break e}break;case 2:He.mode=ae;break;case 3:nt.msg="invalid block type",He.mode=Oe}pt>>>=2,At-=2;break;case oe:for(pt>>>=At&7,At-=At&7;At<32;){if(Ve===0)break e;Ve--,pt+=Dt[De++]<<At,At+=8}if((pt&65535)!==(pt>>>16^65535)){nt.msg="invalid stored block lengths",He.mode=Oe;break}if(He.length=pt&65535,pt=0,At=0,He.mode=le,rt===L)break e;case le:He.mode=he;case he:if(Ke=He.length,Ke){if(Ke>Ve&&(Ke=Ve),Ke>qe&&(Ke=qe),Ke===0)break e;E.arraySet(Rt,Dt,De,Ke,We),Ve-=Ke,De+=Ke,qe-=Ke,We+=Ke,He.length-=Ke;break}He.mode=Y;break;case ae:for(;At<14;){if(Ve===0)break e;Ve--,pt+=Dt[De++]<<At,At+=8}if(He.nlen=(pt&31)+257,pt>>>=5,At-=5,He.ndist=(pt&31)+1,pt>>>=5,At-=5,He.ncode=(pt&15)+4,pt>>>=4,At-=4,He.nlen>286||He.ndist>30){nt.msg="too many length or distance symbols",He.mode=Oe;break}He.have=0,He.mode=Q;case Q:for(;He.have<He.ncode;){for(;At<3;){if(Ve===0)break e;Ve--,pt+=Dt[De++]<<At,At+=8}He.lens[tr[He.have++]]=pt&7,pt>>>=3,At-=3}for(;He.have<19;)He.lens[tr[He.have++]]=0;if(He.lencode=He.lendyn,He.lenbits=7,Ot={bits:He.lenbits},kt=B(T,He.lens,0,19,He.lencode,0,He.work,Ot),He.lenbits=Ot.bits,kt){nt.msg="invalid code lengths set",He.mode=Oe;break}He.have=0,He.mode=se;case se:for(;He.have<He.nlen+He.ndist;){for(;st=He.lencode[pt&(1<<He.lenbits)-1],bt=st>>>24,Qe=st>>>16&255,Re=st&65535,!(bt<=At);){if(Ve===0)break e;Ve--,pt+=Dt[De++]<<At,At+=8}if(Re<16)pt>>>=bt,At-=bt,He.lens[He.have++]=Re;else{if(Re===16){for(Jt=bt+2;At<Jt;){if(Ve===0)break e;Ve--,pt+=Dt[De++]<<At,At+=8}if(pt>>>=bt,At-=bt,He.have===0){nt.msg="invalid bit length repeat",He.mode=Oe;break}it=He.lens[He.have-1],Ke=3+(pt&3),pt>>>=2,At-=2}else if(Re===17){for(Jt=bt+3;At<Jt;){if(Ve===0)break e;Ve--,pt+=Dt[De++]<<At,At+=8}pt>>>=bt,At-=bt,it=0,Ke=3+(pt&7),pt>>>=3,At-=3}else{for(Jt=bt+7;At<Jt;){if(Ve===0)break e;Ve--,pt+=Dt[De++]<<At,At+=8}pt>>>=bt,At-=bt,it=0,Ke=11+(pt&127),pt>>>=7,At-=7}if(He.have+Ke>He.nlen+He.ndist){nt.msg="invalid bit length repeat",He.mode=Oe;break}for(;Ke--;)He.lens[He.have++]=it}}if(He.mode===Oe)break;if(He.lens[256]===0){nt.msg="invalid code -- missing end-of-block",He.mode=Oe;break}if(He.lenbits=9,Ot={bits:He.lenbits},kt=B(R,He.lens,0,He.nlen,He.lencode,0,He.work,Ot),He.lenbits=Ot.bits,kt){nt.msg="invalid literal/lengths set",He.mode=Oe;break}if(He.distbits=6,He.distcode=He.distdyn,Ot={bits:He.distbits},kt=B(P,He.lens,He.nlen,He.ndist,He.distcode,0,He.work,Ot),He.distbits=Ot.bits,kt){nt.msg="invalid distances set",He.mode=Oe;break}if(He.mode=Ae,rt===L)break e;case Ae:He.mode=ge;case ge:if(Ve>=6&&qe>=258){nt.next_out=We,nt.avail_out=qe,nt.next_in=De,nt.avail_in=Ve,He.hold=pt,He.bits=At,I(nt,rr),We=nt.next_out,Rt=nt.output,qe=nt.avail_out,De=nt.next_in,Dt=nt.input,Ve=nt.avail_in,pt=He.hold,At=He.bits,He.mode===Y&&(He.back=-1);break}for(He.back=0;st=He.lencode[pt&(1<<He.lenbits)-1],bt=st>>>24,Qe=st>>>16&255,Re=st&65535,!(bt<=At);){if(Ve===0)break e;Ve--,pt+=Dt[De++]<<At,At+=8}if(Qe&&(Qe&240)===0){for(Pe=bt,Me=Qe,$e=Re;st=He.lencode[$e+((pt&(1<<Pe+Me)-1)>>Pe)],bt=st>>>24,Qe=st>>>16&255,Re=st&65535,!(Pe+bt<=At);){if(Ve===0)break e;Ve--,pt+=Dt[De++]<<At,At+=8}pt>>>=Pe,At-=Pe,He.back+=Pe}if(pt>>>=bt,At-=bt,He.back+=bt,He.length=Re,Qe===0){He.mode=we;break}if(Qe&32){He.back=-1,He.mode=Y;break}if(Qe&64){nt.msg="invalid literal/length code",He.mode=Oe;break}He.extra=Qe&15,He.mode=Ee;case Ee:if(He.extra){for(Jt=He.extra;At<Jt;){if(Ve===0)break e;Ve--,pt+=Dt[De++]<<At,At+=8}He.length+=pt&(1<<He.extra)-1,pt>>>=He.extra,At-=He.extra,He.back+=He.extra}He.was=He.length,He.mode=ke;case ke:for(;st=He.distcode[pt&(1<<He.distbits)-1],bt=st>>>24,Qe=st>>>16&255,Re=st&65535,!(bt<=At);){if(Ve===0)break e;Ve--,pt+=Dt[De++]<<At,At+=8}if((Qe&240)===0){for(Pe=bt,Me=Qe,$e=Re;st=He.distcode[$e+((pt&(1<<Pe+Me)-1)>>Pe)],bt=st>>>24,Qe=st>>>16&255,Re=st&65535,!(Pe+bt<=At);){if(Ve===0)break e;Ve--,pt+=Dt[De++]<<At,At+=8}pt>>>=Pe,At-=Pe,He.back+=Pe}if(pt>>>=bt,At-=bt,He.back+=bt,Qe&64){nt.msg="invalid distance code",He.mode=Oe;break}He.offset=Re,He.extra=Qe&15,He.mode=Se;case Se:if(He.extra){for(Jt=He.extra;At<Jt;){if(Ve===0)break e;Ve--,pt+=Dt[De++]<<At,At+=8}He.offset+=pt&(1<<He.extra)-1,pt>>>=He.extra,At-=He.extra,He.back+=He.extra}if(He.offset>He.dmax){nt.msg="invalid distance too far back",He.mode=Oe;break}He.mode=Ie;case Ie:if(qe===0)break e;if(Ke=rr-qe,He.offset>Ke){if(Ke=He.offset-Ke,Ke>He.whave&&He.sane){nt.msg="invalid distance too far back",He.mode=Oe;break}Ke>He.wnext?(Ke-=He.wnext,Ne=He.wsize-Ke):Ne=He.wnext-Ke,Ke>He.length&&(Ke=He.length),Ye=He.window}else Ye=Rt,Ne=We-He.offset,Ke=He.length;Ke>qe&&(Ke=qe),qe-=Ke,He.length-=Ke;do Rt[We++]=Ye[Ne++];while(--Ke);He.length===0&&(He.mode=ge);break;case we:if(qe===0)break e;Rt[We++]=He.length,qe--,He.mode=ge;break;case xe:if(He.wrap){for(;At<32;){if(Ve===0)break e;Ve--,pt|=Dt[De++]<<At,At+=8}if(rr-=qe,nt.total_out+=rr,He.total+=rr,rr&&(nt.adler=He.check=He.flags?_(He.check,Rt,rr,We-rr):A(He.check,Rt,rr,We-rr)),rr=qe,(He.flags?pt:vt(pt))!==He.check){nt.msg="incorrect data check",He.mode=Oe;break}pt=0,At=0}He.mode=Fe;case Fe:if(He.wrap&&He.flags){for(;At<32;){if(Ve===0)break e;Ve--,pt+=Dt[De++]<<At,At+=8}if(pt!==(He.total&4294967295)){nt.msg="incorrect length check",He.mode=Oe;break}pt=0,At=0}He.mode=Ge;case Ge:kt=V;break e;case Oe:kt=ee;break e;case et:return ie;case Mt:default:return J}return nt.next_out=We,nt.avail_out=qe,nt.next_in=De,nt.avail_in=Ve,He.hold=pt,He.bits=At,(He.wsize||rr!==nt.avail_out&&He.mode<Oe&&(He.mode<xe||rt!==D))&&ze(nt,nt.output,nt.next_out,rr-nt.avail_out),jt-=nt.avail_in,rr-=nt.avail_out,nt.total_in+=jt,nt.total_out+=rr,He.total+=rr,He.wrap&&rr&&(nt.adler=He.check=He.flags?_(He.check,Rt,rr,nt.next_out-rr):A(He.check,Rt,rr,nt.next_out-rr)),nt.data_type=He.bits+(He.last?64:0)+(He.mode===Y?128:0)+(He.mode===Ae||He.mode===le?256:0),(jt===0&&rr===0||rt===D)&&kt===U&&(kt=ne),kt}function Le(nt){if(!nt||!nt.state)return J;var rt=nt.state;return rt.window&&(rt.window=null),nt.state=null,U}function Ze(nt,rt){var He;return!nt||!nt.state||(He=nt.state,(He.wrap&2)===0)?J:(He.head=rt,rt.done=!1,U)}function Je(nt,rt){var He=rt.length,Dt,Rt,De;return!nt||!nt.state||(Dt=nt.state,Dt.wrap!==0&&Dt.mode!==z)?J:Dt.mode===z&&(Rt=1,Rt=A(Rt,rt,He,0),Rt!==Dt.check)?ee:(De=ze(nt,rt,He,He),De?(Dt.mode=et,ie):(Dt.havedict=1,U))}return inflate.inflateReset=Tt,inflate.inflateReset2=Wt,inflate.inflateResetKeep=yt,inflate.inflateInit=_t,inflate.inflateInit2=ft,inflate.inflate=Ce,inflate.inflateEnd=Le,inflate.inflateGetHeader=Ze,inflate.inflateSetDictionary=Je,inflate.inflateInfo="pako inflate (from Nodeca project)",inflate}var constants,hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,constants={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),constants}var hasRequiredBinding;function requireBinding(){return hasRequiredBinding||(hasRequiredBinding=1,(function(E){var A=requireAssert$1(),_=requireZstream(),I=requireDeflate(),B=requireInflate(),T=requireConstants();for(var R in T)E[R]=T[R];E.NONE=0,E.DEFLATE=1,E.INFLATE=2,E.GZIP=3,E.GUNZIP=4,E.DEFLATERAW=5,E.INFLATERAW=6,E.UNZIP=7;var P=31,D=139;function F(L){if(typeof L!="number"||L<E.DEFLATE||L>E.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=L,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}F.prototype.close=function(){if(this.write_in_progress){this.pending_close=!0;return}this.pending_close=!1,A(this.init_done,"close before init"),A(this.mode<=E.UNZIP),this.mode===E.DEFLATE||this.mode===E.GZIP||this.mode===E.DEFLATERAW?I.deflateEnd(this.strm):(this.mode===E.INFLATE||this.mode===E.GUNZIP||this.mode===E.INFLATERAW||this.mode===E.UNZIP)&&B.inflateEnd(this.strm),this.mode=E.NONE,this.dictionary=null},F.prototype.write=function(L,U,V,K,J,ee,ie){return this._write(!0,L,U,V,K,J,ee,ie)},F.prototype.writeSync=function(L,U,V,K,J,ee,ie){return this._write(!1,L,U,V,K,J,ee,ie)},F.prototype._write=function(L,U,V,K,J,ee,ie,ne){if(A.equal(arguments.length,8),A(this.init_done,"write before init"),A(this.mode!==E.NONE,"already finalized"),A.equal(!1,this.write_in_progress,"write already in progress"),A.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,A.equal(!1,U===void 0,"must provide flush value"),this.write_in_progress=!0,U!==E.Z_NO_FLUSH&&U!==E.Z_PARTIAL_FLUSH&&U!==E.Z_SYNC_FLUSH&&U!==E.Z_FULL_FLUSH&&U!==E.Z_FINISH&&U!==E.Z_BLOCK)throw new Error("Invalid flush value");if(V==null&&(V=Buffer$1.alloc(0),J=0,K=0),this.strm.avail_in=J,this.strm.input=V,this.strm.next_in=K,this.strm.avail_out=ne,this.strm.output=ee,this.strm.next_out=ie,this.flush=U,!L)return this._process(),this._checkError()?this._afterSync():void 0;var ce=this;return process$1.nextTick(function(){ce._process(),ce._after()}),this},F.prototype._afterSync=function(){var L=this.strm.avail_out,U=this.strm.avail_in;return this.write_in_progress=!1,[U,L]},F.prototype._process=function(){var L=null;switch(this.mode){case E.DEFLATE:case E.GZIP:case E.DEFLATERAW:this.err=I.deflate(this.strm,this.flush);break;case E.UNZIP:switch(this.strm.avail_in>0&&(L=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(L===null)break;if(this.strm.input[L]===P){if(this.gzip_id_bytes_read=1,L++,this.strm.avail_in===1)break}else{this.mode=E.INFLATE;break}case 1:if(L===null)break;this.strm.input[L]===D?(this.gzip_id_bytes_read=2,this.mode=E.GUNZIP):this.mode=E.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case E.INFLATE:case E.GUNZIP:case E.INFLATERAW:for(this.err=B.inflate(this.strm,this.flush),this.err===E.Z_NEED_DICT&&this.dictionary&&(this.err=B.inflateSetDictionary(this.strm,this.dictionary),this.err===E.Z_OK?this.err=B.inflate(this.strm,this.flush):this.err===E.Z_DATA_ERROR&&(this.err=E.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===E.GUNZIP&&this.err===E.Z_STREAM_END&&this.strm.next_in[0]!==0;)this.reset(),this.err=B.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},F.prototype._checkError=function(){switch(this.err){case E.Z_OK:case E.Z_BUF_ERROR:if(this.strm.avail_out!==0&&this.flush===E.Z_FINISH)return this._error("unexpected end of file"),!1;break;case E.Z_STREAM_END:break;case E.Z_NEED_DICT:return this.dictionary==null?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},F.prototype._after=function(){if(this._checkError()){var L=this.strm.avail_out,U=this.strm.avail_in;this.write_in_progress=!1,this.callback(U,L),this.pending_close&&this.close()}},F.prototype._error=function(L){this.strm.msg&&(L=this.strm.msg),this.onerror(L,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},F.prototype.init=function(L,U,V,K,J){A(arguments.length===4||arguments.length===5,"init(windowBits, level, memLevel, strategy, [dictionary])"),A(L>=8&&L<=15,"invalid windowBits"),A(U>=-1&&U<=9,"invalid compression level"),A(V>=1&&V<=9,"invalid memlevel"),A(K===E.Z_FILTERED||K===E.Z_HUFFMAN_ONLY||K===E.Z_RLE||K===E.Z_FIXED||K===E.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(U,L,V,K,J),this._setDictionary()},F.prototype.params=function(){throw new Error("deflateParams Not supported")},F.prototype.reset=function(){this._reset(),this._setDictionary()},F.prototype._init=function(L,U,V,K,J){switch(this.level=L,this.windowBits=U,this.memLevel=V,this.strategy=K,this.flush=E.Z_NO_FLUSH,this.err=E.Z_OK,(this.mode===E.GZIP||this.mode===E.GUNZIP)&&(this.windowBits+=16),this.mode===E.UNZIP&&(this.windowBits+=32),(this.mode===E.DEFLATERAW||this.mode===E.INFLATERAW)&&(this.windowBits=-1*this.windowBits),this.strm=new _,this.mode){case E.DEFLATE:case E.GZIP:case E.DEFLATERAW:this.err=I.deflateInit2(this.strm,this.level,E.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case E.INFLATE:case E.GUNZIP:case E.INFLATERAW:case E.UNZIP:this.err=B.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==E.Z_OK&&this._error("Init error"),this.dictionary=J,this.write_in_progress=!1,this.init_done=!0},F.prototype._setDictionary=function(){if(this.dictionary!=null){switch(this.err=E.Z_OK,this.mode){case E.DEFLATE:case E.DEFLATERAW:this.err=I.deflateSetDictionary(this.strm,this.dictionary);break}this.err!==E.Z_OK&&this._error("Failed to set dictionary")}},F.prototype._reset=function(){switch(this.err=E.Z_OK,this.mode){case E.DEFLATE:case E.DEFLATERAW:case E.GZIP:this.err=I.deflateReset(this.strm);break;case E.INFLATE:case E.INFLATERAW:case E.GUNZIP:this.err=B.inflateReset(this.strm);break}this.err!==E.Z_OK&&this._error("Failed to reset stream")},E.Zlib=F})(binding)),binding}var hasRequiredLib$5;function requireLib$5(){return hasRequiredLib$5||(hasRequiredLib$5=1,(function(E){var A=requireDist$1().Buffer,_=requireStreamBrowserify().Transform,I=requireBinding(),B=requireUtil$3(),T=requireAssert$1().ok,R=requireDist$1().kMaxLength,P="Cannot create final Buffer. It would be larger than 0x"+R.toString(16)+" bytes";I.Z_MIN_WINDOWBITS=8,I.Z_MAX_WINDOWBITS=15,I.Z_DEFAULT_WINDOWBITS=15,I.Z_MIN_CHUNK=64,I.Z_MAX_CHUNK=1/0,I.Z_DEFAULT_CHUNK=16*1024,I.Z_MIN_MEMLEVEL=1,I.Z_MAX_MEMLEVEL=9,I.Z_DEFAULT_MEMLEVEL=8,I.Z_MIN_LEVEL=-1,I.Z_MAX_LEVEL=9,I.Z_DEFAULT_LEVEL=I.Z_DEFAULT_COMPRESSION;for(var D=Object.keys(I),F=0;F<D.length;F++){var L=D[F];L.match(/^Z/)&&Object.defineProperty(E,L,{enumerable:!0,value:I[L],writable:!1})}for(var U={Z_OK:I.Z_OK,Z_STREAM_END:I.Z_STREAM_END,Z_NEED_DICT:I.Z_NEED_DICT,Z_ERRNO:I.Z_ERRNO,Z_STREAM_ERROR:I.Z_STREAM_ERROR,Z_DATA_ERROR:I.Z_DATA_ERROR,Z_MEM_ERROR:I.Z_MEM_ERROR,Z_BUF_ERROR:I.Z_BUF_ERROR,Z_VERSION_ERROR:I.Z_VERSION_ERROR},V=Object.keys(U),K=0;K<V.length;K++){var J=V[K];U[U[J]]=J}Object.defineProperty(E,"codes",{enumerable:!0,value:Object.freeze(U),writable:!1}),E.Deflate=ne,E.Inflate=ce,E.Gzip=fe,E.Gunzip=de,E.DeflateRaw=pe,E.InflateRaw=ve,E.Unzip=ye,E.createDeflate=function(O){return new ne(O)},E.createInflate=function(O){return new ce(O)},E.createDeflateRaw=function(O){return new pe(O)},E.createInflateRaw=function(O){return new ve(O)},E.createGzip=function(O){return new fe(O)},E.createGunzip=function(O){return new de(O)},E.createUnzip=function(O){return new ye(O)},E.deflate=function(O,z,Y){return typeof z=="function"&&(Y=z,z={}),ee(new ne(z),O,Y)},E.deflateSync=function(O,z){return ie(new ne(z),O)},E.gzip=function(O,z,Y){return typeof z=="function"&&(Y=z,z={}),ee(new fe(z),O,Y)},E.gzipSync=function(O,z){return ie(new fe(z),O)},E.deflateRaw=function(O,z,Y){return typeof z=="function"&&(Y=z,z={}),ee(new pe(z),O,Y)},E.deflateRawSync=function(O,z){return ie(new pe(z),O)},E.unzip=function(O,z,Y){return typeof z=="function"&&(Y=z,z={}),ee(new ye(z),O,Y)},E.unzipSync=function(O,z){return ie(new ye(z),O)},E.inflate=function(O,z,Y){return typeof z=="function"&&(Y=z,z={}),ee(new ce(z),O,Y)},E.inflateSync=function(O,z){return ie(new ce(z),O)},E.gunzip=function(O,z,Y){return typeof z=="function"&&(Y=z,z={}),ee(new de(z),O,Y)},E.gunzipSync=function(O,z){return ie(new de(z),O)},E.inflateRaw=function(O,z,Y){return typeof z=="function"&&(Y=z,z={}),ee(new ve(z),O,Y)},E.inflateRawSync=function(O,z){return ie(new ve(z),O)};function ee(O,z,Y){var te=[],oe=0;O.on("error",he),O.on("end",ae),O.end(z),le();function le(){for(var Q;(Q=O.read())!==null;)te.push(Q),oe+=Q.length;O.once("readable",le)}function he(Q){O.removeListener("end",ae),O.removeListener("readable",le),Y(Q)}function ae(){var Q,se=null;oe>=R?se=new RangeError(P):Q=A.concat(te,oe),te=[],O.close(),Y(se,Q)}}function ie(O,z){if(typeof z=="string"&&(z=A.from(z)),!A.isBuffer(z))throw new TypeError("Not a string or buffer");var Y=O._finishFlushFlag;return O._processChunk(z,Y)}function ne(O){if(!(this instanceof ne))return new ne(O);be.call(this,O,I.DEFLATE)}function ce(O){if(!(this instanceof ce))return new ce(O);be.call(this,O,I.INFLATE)}function fe(O){if(!(this instanceof fe))return new fe(O);be.call(this,O,I.GZIP)}function de(O){if(!(this instanceof de))return new de(O);be.call(this,O,I.GUNZIP)}function pe(O){if(!(this instanceof pe))return new pe(O);be.call(this,O,I.DEFLATERAW)}function ve(O){if(!(this instanceof ve))return new ve(O);be.call(this,O,I.INFLATERAW)}function ye(O){if(!(this instanceof ye))return new ye(O);be.call(this,O,I.UNZIP)}function _e(O){return O===I.Z_NO_FLUSH||O===I.Z_PARTIAL_FLUSH||O===I.Z_SYNC_FLUSH||O===I.Z_FULL_FLUSH||O===I.Z_FINISH||O===I.Z_BLOCK}function be(O,z){var Y=this;if(this._opts=O=O||{},this._chunkSize=O.chunkSize||E.Z_DEFAULT_CHUNK,_.call(this,O),O.flush&&!_e(O.flush))throw new Error("Invalid flush flag: "+O.flush);if(O.finishFlush&&!_e(O.finishFlush))throw new Error("Invalid flush flag: "+O.finishFlush);if(this._flushFlag=O.flush||I.Z_NO_FLUSH,this._finishFlushFlag=typeof O.finishFlush<"u"?O.finishFlush:I.Z_FINISH,O.chunkSize&&(O.chunkSize<E.Z_MIN_CHUNK||O.chunkSize>E.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+O.chunkSize);if(O.windowBits&&(O.windowBits<E.Z_MIN_WINDOWBITS||O.windowBits>E.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+O.windowBits);if(O.level&&(O.level<E.Z_MIN_LEVEL||O.level>E.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+O.level);if(O.memLevel&&(O.memLevel<E.Z_MIN_MEMLEVEL||O.memLevel>E.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+O.memLevel);if(O.strategy&&O.strategy!=E.Z_FILTERED&&O.strategy!=E.Z_HUFFMAN_ONLY&&O.strategy!=E.Z_RLE&&O.strategy!=E.Z_FIXED&&O.strategy!=E.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+O.strategy);if(O.dictionary&&!A.isBuffer(O.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new I.Zlib(z);var te=this;this._hadError=!1,this._handle.onerror=function(he,ae){Te(te),te._hadError=!0;var Q=new Error(he);Q.errno=ae,Q.code=E.codes[ae],te.emit("error",Q)};var oe=E.Z_DEFAULT_COMPRESSION;typeof O.level=="number"&&(oe=O.level);var le=E.Z_DEFAULT_STRATEGY;typeof O.strategy=="number"&&(le=O.strategy),this._handle.init(O.windowBits||E.Z_DEFAULT_WINDOWBITS,oe,O.memLevel||E.Z_DEFAULT_MEMLEVEL,le,O.dictionary),this._buffer=A.allocUnsafe(this._chunkSize),this._offset=0,this._level=oe,this._strategy=le,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!Y._handle},configurable:!0,enumerable:!0})}B.inherits(be,_),be.prototype.params=function(O,z,Y){if(O<E.Z_MIN_LEVEL||O>E.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+O);if(z!=E.Z_FILTERED&&z!=E.Z_HUFFMAN_ONLY&&z!=E.Z_RLE&&z!=E.Z_FIXED&&z!=E.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+z);if(this._level!==O||this._strategy!==z){var te=this;this.flush(I.Z_SYNC_FLUSH,function(){T(te._handle,"zlib binding closed"),te._handle.params(O,z),te._hadError||(te._level=O,te._strategy=z,Y&&Y())})}else process$1.nextTick(Y)},be.prototype.reset=function(){return T(this._handle,"zlib binding closed"),this._handle.reset()},be.prototype._flush=function(O){this._transform(A.alloc(0),"",O)},be.prototype.flush=function(O,z){var Y=this,te=this._writableState;(typeof O=="function"||O===void 0&&!z)&&(z=O,O=I.Z_FULL_FLUSH),te.ended?z&&process$1.nextTick(z):te.ending?z&&this.once("end",z):te.needDrain?z&&this.once("drain",function(){return Y.flush(O,z)}):(this._flushFlag=O,this.write(A.alloc(0),"",z))},be.prototype.close=function(O){Te(this,O),process$1.nextTick(ue,this)};function Te(O,z){z&&process$1.nextTick(z),O._handle&&(O._handle.close(),O._handle=null)}function ue(O){O.emit("close")}be.prototype._transform=function(O,z,Y){var te,oe=this._writableState,le=oe.ending||oe.ended,he=le&&(!O||oe.length===O.length);if(O!==null&&!A.isBuffer(O))return Y(new Error("invalid input"));if(!this._handle)return Y(new Error("zlib binding closed"));he?te=this._finishFlushFlag:(te=this._flushFlag,O.length>=oe.length&&(this._flushFlag=this._opts.flush||I.Z_NO_FLUSH)),this._processChunk(O,te,Y)},be.prototype._processChunk=function(O,z,Y){var te=O&&O.length,oe=this._chunkSize-this._offset,le=0,he=this,ae=typeof Y=="function";if(!ae){var Q=[],se=0,Ae;this.on("error",function(Ie){Ae=Ie}),T(this._handle,"zlib binding closed");do var ge=this._handle.writeSync(z,O,le,te,this._buffer,this._offset,oe);while(!this._hadError&&Se(ge[0],ge[1]));if(this._hadError)throw Ae;if(se>=R)throw Te(this),new RangeError(P);var Ee=A.concat(Q,se);return Te(this),Ee}T(this._handle,"zlib binding closed");var ke=this._handle.write(z,O,le,te,this._buffer,this._offset,oe);ke.buffer=O,ke.callback=Se;function Se(Ie,we){if(this&&(this.buffer=null,this.callback=null),!he._hadError){var xe=oe-we;if(T(xe>=0,"have should not go down"),xe>0){var Fe=he._buffer.slice(he._offset,he._offset+xe);he._offset+=xe,ae?he.push(Fe):(Q.push(Fe),se+=Fe.length)}if((we===0||he._offset>=he._chunkSize)&&(oe=he._chunkSize,he._offset=0,he._buffer=A.allocUnsafe(he._chunkSize)),we===0){if(le+=te-Ie,te=Ie,!ae)return!0;var Ge=he._handle.write(z,O,le,te,he._buffer,he._offset,he._chunkSize);Ge.callback=Se,Ge.buffer=O;return}if(!ae)return!1;Y()}}},B.inherits(ne,be),B.inherits(ce,be),B.inherits(fe,be),B.inherits(de,be),B.inherits(pe,be),B.inherits(ve,be),B.inherits(ye,be)})(lib$5)),lib$5}var awsSign2={exports:{}},hasRequiredAwsSign2;function requireAwsSign2(){if(hasRequiredAwsSign2)return awsSign2.exports;hasRequiredAwsSign2=1;/*!
 *  Copyright 2010 LearnBoost <dev@learnboost.com>
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var E=requireCryptoBrowserify(),A=require$$2$1.parse,_=["acl","location","logging","notification","partNumber","policy","requestPayment","torrent","uploadId","uploads","versionId","versioning","versions","website"];function I(U){return"AWS "+U.key+":"+T(U)}awsSign2.exports=I,awsSign2.exports.authorization=I;function B(U){return E.createHmac("sha1",U.secret).update(U.message).digest("base64")}awsSign2.exports.hmacSha1=B;function T(U){return U.message=P(U),B(U)}awsSign2.exports.sign=T;function R(U){return U.message=D(U),B(U)}awsSign2.exports.signQuery=R;function P(U){var V=U.amazonHeaders||"";V&&(V+=`
`);var K=[U.verb,U.md5,U.contentType,U.date?U.date.toUTCString():"",V+U.resource];return K.join(`
`)}awsSign2.exports.stringToSign=P;function D(U){return`GET


`+U.date+`
`+U.resource}awsSign2.exports.queryStringToSign=D;function F(U){for(var V=[],K=Object.keys(U),J=0,ee=K.length;J<ee;++J){var ne=K[J],ie=U[ne],ne=ne.toLowerCase();ne.indexOf("x-amz")===0&&V.push(ne+":"+ie)}return V.sort().join(`
`)}awsSign2.exports.canonicalizeHeaders=F;function L(U){var V=A(U,!0),K=V.pathname,J=[];return Object.keys(V.query).forEach(function(ee){if(~_.indexOf(ee)){var ie=V.query[ee]==""?"":"="+encodeURIComponent(V.query[ee]);J.push(ee+ie)}}),K+(J.length?"?"+J.sort().join("&"):"")}return awsSign2.exports.canonicalizeResource=L,awsSign2.exports}var aws4={},querystringEs3={},decode,hasRequiredDecode;function requireDecode(){if(hasRequiredDecode)return decode;hasRequiredDecode=1;function E(_,I){return Object.prototype.hasOwnProperty.call(_,I)}decode=function(_,I,B,T){I=I||"&",B=B||"=";var R={};if(typeof _!="string"||_.length===0)return R;var P=/\+/g;_=_.split(I);var D=1e3;T&&typeof T.maxKeys=="number"&&(D=T.maxKeys);var F=_.length;D>0&&F>D&&(F=D);for(var L=0;L<F;++L){var U=_[L].replace(P,"%20"),V=U.indexOf(B),K,J,ee,ie;V>=0?(K=U.substr(0,V),J=U.substr(V+1)):(K=U,J=""),ee=decodeURIComponent(K),ie=decodeURIComponent(J),E(R,ee)?A(R[ee])?R[ee].push(ie):R[ee]=[R[ee],ie]:R[ee]=ie}return R};var A=Array.isArray||function(_){return Object.prototype.toString.call(_)==="[object Array]"};return decode}var encode,hasRequiredEncode;function requireEncode(){if(hasRequiredEncode)return encode;hasRequiredEncode=1;var E=function(B){switch(typeof B){case"string":return B;case"boolean":return B?"true":"false";case"number":return isFinite(B)?B:"";default:return""}};encode=function(B,T,R,P){return T=T||"&",R=R||"=",B===null&&(B=void 0),typeof B=="object"?_(I(B),function(D){var F=encodeURIComponent(E(D))+R;return A(B[D])?_(B[D],function(L){return F+encodeURIComponent(E(L))}).join(T):F+encodeURIComponent(E(B[D]))}).join(T):P?encodeURIComponent(E(P))+R+encodeURIComponent(E(B)):""};var A=Array.isArray||function(B){return Object.prototype.toString.call(B)==="[object Array]"};function _(B,T){if(B.map)return B.map(T);for(var R=[],P=0;P<B.length;P++)R.push(T(B[P],P));return R}var I=Object.keys||function(B){var T=[];for(var R in B)Object.prototype.hasOwnProperty.call(B,R)&&T.push(R);return T};return encode}var hasRequiredQuerystringEs3;function requireQuerystringEs3(){return hasRequiredQuerystringEs3||(hasRequiredQuerystringEs3=1,querystringEs3.decode=querystringEs3.parse=requireDecode(),querystringEs3.encode=querystringEs3.stringify=requireEncode()),querystringEs3}var querystringEs3Exports=requireQuerystringEs3();function qsEscape(E){return encodeURIComponent(E)}function qsUnescape(E){return decodeURIComponent(E)}var api={decode:querystringEs3Exports.decode,encode:querystringEs3Exports.encode,parse:querystringEs3Exports.parse,stringify:querystringEs3Exports.stringify,escape:qsEscape,unescape:qsUnescape};const querystring$1=Object.freeze(Object.defineProperty({__proto__:null,decode:querystringEs3Exports.decode,default:api,encode:querystringEs3Exports.encode,escape:qsEscape,parse:querystringEs3Exports.parse,stringify:querystringEs3Exports.stringify,unescape:qsUnescape},Symbol.toStringTag,{value:"Module"})),require$$1$1=getAugmentedNamespace(querystring$1);var lru,hasRequiredLru;function requireLru(){if(hasRequiredLru)return lru;hasRequiredLru=1,lru=function(I){return new E(I)};function E(I){this.capacity=I|0,this.map=Object.create(null),this.list=new A}E.prototype.get=function(I){var B=this.map[I];if(B!=null)return this.used(B),B.val},E.prototype.set=function(I,B){var T=this.map[I];if(T!=null)T.val=B;else{if(this.capacity||this.prune(),!this.capacity)return!1;T=new _(I,B),this.map[I]=T,this.capacity--}return this.used(T),!0},E.prototype.used=function(I){this.list.moveToFront(I)},E.prototype.prune=function(){var I=this.list.pop();I!=null&&(delete this.map[I.key],this.capacity++)};function A(){this.firstNode=null,this.lastNode=null}A.prototype.moveToFront=function(I){this.firstNode!=I&&(this.remove(I),this.firstNode==null?(this.firstNode=I,this.lastNode=I,I.prev=null,I.next=null):(I.prev=null,I.next=this.firstNode,I.next.prev=I,this.firstNode=I))},A.prototype.pop=function(){var I=this.lastNode;return I!=null&&this.remove(I),I},A.prototype.remove=function(I){this.firstNode==I?this.firstNode=I.next:I.prev!=null&&(I.prev.next=I.next),this.lastNode==I?this.lastNode=I.prev:I.next!=null&&(I.next.prev=I.prev)};function _(I,B){this.key=I,this.val=B,this.prev=null,this.next=null}return lru}var hasRequiredAws4;function requireAws4(){return hasRequiredAws4||(hasRequiredAws4=1,(function(E){var A={},_=E,I=require$$2$1,B=require$$1$1,T=requireCryptoBrowserify(),R=requireLru(),P=R(1e3);function D(J,ee,ie){return T.createHmac("sha256",J).update(ee,"utf8").digest(ie)}function F(J,ee){return T.createHash("sha256").update(J,"utf8").digest(ee)}function L(J){return J.replace(/[!'()*]/g,function(ee){return"%"+ee.charCodeAt(0).toString(16).toUpperCase()})}function U(J){return L(encodeURIComponent(J))}var V={authorization:!0,connection:!0,"x-amzn-trace-id":!0,"user-agent":!0,expect:!0,"presigned-expires":!0,range:!0};function K(J,ee){typeof J=="string"&&(J=I.parse(J));var ie=J.headers=Object.assign({},J.headers||{}),ne=(!this.service||!this.region)&&this.matchHost(J.hostname||J.host||ie.Host||ie.host);this.request=J,this.credentials=ee||this.defaultCredentials(),this.service=J.service||ne[0]||"",this.region=J.region||ne[1]||"us-east-1",this.service==="email"&&(this.service="ses"),!J.method&&J.body&&(J.method="POST"),!ie.Host&&!ie.host&&(ie.Host=J.hostname||J.host||this.createHost(),J.port&&(ie.Host+=":"+J.port)),!J.hostname&&!J.host&&(J.hostname=ie.Host||ie.host),this.isCodeCommitGit=this.service==="codecommit"&&J.method==="GIT",this.extraHeadersToIgnore=J.extraHeadersToIgnore||Object.create(null),this.extraHeadersToInclude=J.extraHeadersToInclude||Object.create(null)}K.prototype.matchHost=function(J){var ee=(J||"").match(/([^\.]{1,63})\.(?:([^\.]{0,63})\.)?amazonaws\.com(\.cn)?$/),ie=(ee||[]).slice(1,3);if((ie[1]==="es"||ie[1]==="aoss")&&(ie=ie.reverse()),ie[1]=="s3")ie[0]="s3",ie[1]="us-east-1";else for(var ne=0;ne<2;ne++)if(/^s3-/.test(ie[ne])){ie[1]=ie[ne].slice(3),ie[0]="s3";break}return ie},K.prototype.isSingleRegion=function(){return["s3","sdb"].indexOf(this.service)>=0&&this.region==="us-east-1"?!0:["cloudfront","ls","route53","iam","importexport","sts"].indexOf(this.service)>=0},K.prototype.createHost=function(){var J=this.isSingleRegion()?"":"."+this.region,ee=this.service==="ses"?"email":this.service;return ee+J+".amazonaws.com"},K.prototype.prepareRequest=function(){this.parsePath();var J=this.request,ee=J.headers,ie;J.signQuery?(this.parsedPath.query=ie=this.parsedPath.query||{},this.credentials.sessionToken&&(ie["X-Amz-Security-Token"]=this.credentials.sessionToken),this.service==="s3"&&!ie["X-Amz-Expires"]&&(ie["X-Amz-Expires"]=86400),ie["X-Amz-Date"]?this.datetime=ie["X-Amz-Date"]:ie["X-Amz-Date"]=this.getDateTime(),ie["X-Amz-Algorithm"]="AWS4-HMAC-SHA256",ie["X-Amz-Credential"]=this.credentials.accessKeyId+"/"+this.credentialString(),ie["X-Amz-SignedHeaders"]=this.signedHeaders()):(!J.doNotModifyHeaders&&!this.isCodeCommitGit&&(J.body&&!ee["Content-Type"]&&!ee["content-type"]&&(ee["Content-Type"]="application/x-www-form-urlencoded; charset=utf-8"),J.body&&!ee["Content-Length"]&&!ee["content-length"]&&(ee["Content-Length"]=Buffer$1.byteLength(J.body)),this.credentials.sessionToken&&!ee["X-Amz-Security-Token"]&&!ee["x-amz-security-token"]&&(ee["X-Amz-Security-Token"]=this.credentials.sessionToken),this.service==="s3"&&!ee["X-Amz-Content-Sha256"]&&!ee["x-amz-content-sha256"]&&(ee["X-Amz-Content-Sha256"]=F(this.request.body||"","hex")),ee["X-Amz-Date"]||ee["x-amz-date"]?this.datetime=ee["X-Amz-Date"]||ee["x-amz-date"]:ee["X-Amz-Date"]=this.getDateTime()),delete ee.Authorization,delete ee.authorization)},K.prototype.sign=function(){return this.parsedPath||this.prepareRequest(),this.request.signQuery?this.parsedPath.query["X-Amz-Signature"]=this.signature():this.request.headers.Authorization=this.authHeader(),this.request.path=this.formatPath(),this.request},K.prototype.getDateTime=function(){if(!this.datetime){var J=this.request.headers,ee=new Date(J.Date||J.date||new Date);this.datetime=ee.toISOString().replace(/[:\-]|\.\d{3}/g,""),this.isCodeCommitGit&&(this.datetime=this.datetime.slice(0,-1))}return this.datetime},K.prototype.getDate=function(){return this.getDateTime().substr(0,8)},K.prototype.authHeader=function(){return["AWS4-HMAC-SHA256 Credential="+this.credentials.accessKeyId+"/"+this.credentialString(),"SignedHeaders="+this.signedHeaders(),"Signature="+this.signature()].join(", ")},K.prototype.signature=function(){var J=this.getDate(),ee=[this.credentials.secretAccessKey,J,this.region,this.service].join(),ie,ne,ce,fe=P.get(ee);return fe||(ie=D("AWS4"+this.credentials.secretAccessKey,J),ne=D(ie,this.region),ce=D(ne,this.service),fe=D(ce,"aws4_request"),P.set(ee,fe)),D(fe,this.stringToSign(),"hex")},K.prototype.stringToSign=function(){return["AWS4-HMAC-SHA256",this.getDateTime(),this.credentialString(),F(this.canonicalString(),"hex")].join(`
`)},K.prototype.canonicalString=function(){this.parsedPath||this.prepareRequest();var J=this.parsedPath.path,ee=this.parsedPath.query,ie=this.request.headers,ne="",ce=this.service!=="s3",fe=this.service==="s3"||this.request.doNotEncodePath,de=this.service==="s3",pe=this.service==="s3",ve;if(this.service==="s3"&&this.request.signQuery?ve="UNSIGNED-PAYLOAD":this.isCodeCommitGit?ve="":ve=ie["X-Amz-Content-Sha256"]||ie["x-amz-content-sha256"]||F(this.request.body||"","hex"),ee){var ye=Object.keys(ee).reduce(function(be,Te){return Te&&(be[U(Te)]=Array.isArray(ee[Te])&&pe?ee[Te][0]:ee[Te]),be},{}),_e=[];Object.keys(ye).sort().forEach(function(be){Array.isArray(ye[be])?ye[be].map(U).sort().forEach(function(Te){_e.push(be+"="+Te)}):_e.push(be+"="+U(ye[be]))}),ne=_e.join("&")}return J!=="/"&&(ce&&(J=J.replace(/\/{2,}/g,"/")),J=J.split("/").reduce(function(be,Te){return ce&&Te===".."?be.pop():(!ce||Te!==".")&&(fe&&(Te=decodeURIComponent(Te.replace(/\+/g," "))),be.push(U(Te))),be},[]).join("/"),J[0]!=="/"&&(J="/"+J),de&&(J=J.replace(/%2F/g,"/"))),[this.request.method||"GET",J,ne,this.canonicalHeaders()+`
`,this.signedHeaders(),ve].join(`
`)},K.prototype.filterHeaders=function(){var J=this.request.headers,ee=this.extraHeadersToInclude,ie=this.extraHeadersToIgnore;this.filteredHeaders=Object.keys(J).map(function(ne){return[ne.toLowerCase(),J[ne]]}).filter(function(ne){return ee[ne[0]]||V[ne[0]]==null&&!ie[ne[0]]}).sort(function(ne,ce){return ne[0]<ce[0]?-1:1})},K.prototype.canonicalHeaders=function(){return this.filteredHeaders||this.filterHeaders(),this.filteredHeaders.map(function(J){return J[0]+":"+J[1].toString().trim().replace(/\s+/g," ")}).join(`
`)},K.prototype.signedHeaders=function(){return this.filteredHeaders||this.filterHeaders(),this.filteredHeaders.map(function(J){return J[0]}).join(";")},K.prototype.credentialString=function(){return[this.getDate(),this.region,this.service,"aws4_request"].join("/")},K.prototype.defaultCredentials=function(){var J=A;return{accessKeyId:J.AWS_ACCESS_KEY_ID||J.AWS_ACCESS_KEY,secretAccessKey:J.AWS_SECRET_ACCESS_KEY||J.AWS_SECRET_KEY,sessionToken:J.AWS_SESSION_TOKEN}},K.prototype.parsePath=function(){var J=this.request.path||"/";/[^0-9A-Za-z;,/?:@&=+$\-_.!~*'()#%]/.test(J)&&(J=encodeURI(decodeURI(J)));var ee=J.indexOf("?"),ie=null;ee>=0&&(ie=B.parse(J.slice(ee+1)),J=J.slice(0,ee)),this.parsedPath={path:J,query:ie}},K.prototype.formatPath=function(){var J=this.parsedPath.path,ee=this.parsedPath.query;return ee?(ee[""]!=null&&delete ee[""],J+"?"+L(B.stringify(ee))):J},_.RequestSigner=K,_.sign=function(J,ee){return new K(J,ee).sign()}})(aws4)),aws4}var assert_1,hasRequiredAssert;function requireAssert(){if(hasRequiredAssert)return assert_1;hasRequiredAssert=1;var E={},A=requireAssert$1(),_=requireStreamBrowserify().Stream,I=requireUtil$3(),B=/^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$/;function T(U){return U.charAt(0).toUpperCase()+U.slice(1)}function R(U,V,K,J,ee){throw new A.AssertionError({message:I.format("%s (%s) is required",U,V),actual:ee===void 0?typeof J:ee(J),expected:V,operator:K||"===",stackStartFunction:R.caller})}function P(U){return Object.prototype.toString.call(U).slice(8,-1)}function D(){}var F={bool:{check:function(U){return typeof U=="boolean"}},func:{check:function(U){return typeof U=="function"}},string:{check:function(U){return typeof U=="string"}},object:{check:function(U){return typeof U=="object"&&U!==null}},number:{check:function(U){return typeof U=="number"&&!isNaN(U)}},finite:{check:function(U){return typeof U=="number"&&!isNaN(U)&&isFinite(U)}},buffer:{check:function(U){return Buffer$1.isBuffer(U)},operator:"Buffer.isBuffer"},array:{check:function(U){return Array.isArray(U)},operator:"Array.isArray"},stream:{check:function(U){return U instanceof _},operator:"instanceof",actual:P},date:{check:function(U){return U instanceof Date},operator:"instanceof",actual:P},regexp:{check:function(U){return U instanceof RegExp},operator:"instanceof",actual:P},uuid:{check:function(U){return typeof U=="string"&&B.test(U)},operator:"isUUID"}};function L(U){var V=Object.keys(F),K;return E.NODE_NDEBUG?K=D:K=function(J,ee){J||R(ee,"true",J)},V.forEach(function(J){if(U){K[J]=D;return}var ee=F[J];K[J]=function(ie,ne){ee.check(ie)||R(ne,J,ee.operator,ie,ee.actual)}}),V.forEach(function(J){var ee="optional"+T(J);if(U){K[ee]=D;return}var ie=F[J];K[ee]=function(ne,ce){ne!=null&&(ie.check(ne)||R(ce,J,ie.operator,ne,ie.actual))}}),V.forEach(function(J){var ee="arrayOf"+T(J);if(U){K[ee]=D;return}var ie=F[J],ne="["+J+"]";K[ee]=function(ce,fe){Array.isArray(ce)||R(fe,ne,ie.operator,ce,ie.actual);var de;for(de=0;de<ce.length;de++)ie.check(ce[de])||R(fe,ne,ie.operator,ce,ie.actual)}}),V.forEach(function(J){var ee="optionalArrayOf"+T(J);if(U){K[ee]=D;return}var ie=F[J],ne="["+J+"]";K[ee]=function(ce,fe){if(ce!=null){Array.isArray(ce)||R(fe,ne,ie.operator,ce,ie.actual);var de;for(de=0;de<ce.length;de++)ie.check(ce[de])||R(fe,ne,ie.operator,ce,ie.actual)}}}),Object.keys(A).forEach(function(J){if(J==="AssertionError"){K[J]=A[J];return}if(U){K[J]=D;return}K[J]=A[J]}),K._setExports=L,K}return assert_1=L(E.NODE_NDEBUG),assert_1}var safer_1,hasRequiredSafer;function requireSafer(){if(hasRequiredSafer)return safer_1;hasRequiredSafer=1;var E=requireDist$1(),A=E.Buffer,_={},I;for(I in E)E.hasOwnProperty(I)&&(I==="SlowBuffer"||I==="Buffer"||(_[I]=E[I]));var B=_.Buffer={};for(I in A)A.hasOwnProperty(I)&&(I==="allocUnsafe"||I==="allocUnsafeSlow"||(B[I]=A[I]));if(_.Buffer.prototype=A.prototype,(!B.from||B.from===Uint8Array.from)&&(B.from=function(T,R,P){if(typeof T=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof T);if(T&&typeof T.length>"u")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof T);return A(T,R,P)}),B.alloc||(B.alloc=function(T,R,P){if(typeof T!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof T);if(T<0||T>=2*(1<<30))throw new RangeError('The value "'+T+'" is invalid for option "size"');var D=A(T);return!R||R.length===0?D.fill(0):typeof P=="string"?D.fill(R,P):D.fill(R),D}),!_.kStringMaxLength)try{_.kStringMaxLength=process$1.binding("buffer").kStringMaxLength}catch{}return _.constants||(_.constants={MAX_LENGTH:_.kMaxLength},_.kStringMaxLength&&(_.constants.MAX_STRING_LENGTH=_.kStringMaxLength)),safer_1=_,safer_1}var algs,hasRequiredAlgs;function requireAlgs(){if(hasRequiredAlgs)return algs;hasRequiredAlgs=1;var E=requireSafer().Buffer,A={dsa:{parts:["p","q","g","y"],sizePart:"p"},rsa:{parts:["e","n"],sizePart:"n"},ecdsa:{parts:["curve","Q"],sizePart:"Q"},ed25519:{parts:["A"],sizePart:"A"}};A.curve25519=A.ed25519;var _={dsa:{parts:["p","q","g","y","x"]},rsa:{parts:["n","e","d","iqmp","p","q"]},ecdsa:{parts:["curve","Q","d"]},ed25519:{parts:["A","k"]}};_.curve25519=_.ed25519;var I={md5:!0,sha1:!0,sha256:!0,sha384:!0,sha512:!0},B={nistp256:{size:256,pkcs8oid:"1.2.840.10045.3.1.7",p:E.from("00ffffffff 00000001 00000000 0000000000000000 ffffffff ffffffff ffffffff".replace(/ /g,""),"hex"),a:E.from("00FFFFFFFF 00000001 00000000 0000000000000000 FFFFFFFF FFFFFFFF FFFFFFFC".replace(/ /g,""),"hex"),b:E.from("5ac635d8 aa3a93e7 b3ebbd55 769886bc651d06b0 cc53b0f6 3bce3c3e 27d2604b".replace(/ /g,""),"hex"),s:E.from("00c49d3608 86e70493 6a6678e1 139d26b7819f7e90".replace(/ /g,""),"hex"),n:E.from("00ffffffff 00000000 ffffffff ffffffffbce6faad a7179e84 f3b9cac2 fc632551".replace(/ /g,""),"hex"),G:E.from("046b17d1f2 e12c4247 f8bce6e5 63a440f277037d81 2deb33a0 f4a13945 d898c2964fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e162bce3357 6b315ece cbb64068 37bf51f5".replace(/ /g,""),"hex")},nistp384:{size:384,pkcs8oid:"1.3.132.0.34",p:E.from("00ffffffff ffffffff ffffffff ffffffffffffffff ffffffff ffffffff fffffffeffffffff 00000000 00000000 ffffffff".replace(/ /g,""),"hex"),a:E.from("00FFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFFFFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFEFFFFFFFF 00000000 00000000 FFFFFFFC".replace(/ /g,""),"hex"),b:E.from("b3312fa7 e23ee7e4 988e056b e3f82d19181d9c6e fe814112 0314088f 5013875ac656398d 8a2ed19d 2a85c8ed d3ec2aef".replace(/ /g,""),"hex"),s:E.from("00a335926a a319a27a 1d00896a 6773a4827acdac73".replace(/ /g,""),"hex"),n:E.from("00ffffffff ffffffff ffffffff ffffffffffffffff ffffffff c7634d81 f4372ddf581a0db2 48b0a77a ecec196a ccc52973".replace(/ /g,""),"hex"),G:E.from("04aa87ca22 be8b0537 8eb1c71e f320ad746e1d3b62 8ba79b98 59f741e0 82542a385502f25d bf55296c 3a545e38 72760ab73617de4a 96262c6f 5d9e98bf 9292dc29f8f41dbd 289a147c e9da3113 b5f0b8c00a60b1ce 1d7e819d 7a431d7c 90ea0e5f".replace(/ /g,""),"hex")},nistp521:{size:521,pkcs8oid:"1.3.132.0.35",p:E.from("01ffffff ffffffff ffffffff ffffffffffffffff ffffffff ffffffff ffffffffffffffff ffffffff ffffffff ffffffffffffffff ffffffff ffffffff ffffffffffff".replace(/ /g,""),"hex"),a:E.from("01FFFFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFFFFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFFFFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFFFFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFC".replace(/ /g,""),"hex"),b:E.from("51953eb961 8e1c9a1f 929a21a0 b68540eea2da725b 99b315f3 b8b48991 8ef109e156193951 ec7e937b 1652c0bd 3bb1bf073573df88 3d2c34f1 ef451fd4 6b503f00".replace(/ /g,""),"hex"),s:E.from("00d09e8800 291cb853 96cc6717 393284aaa0da64ba".replace(/ /g,""),"hex"),n:E.from("01ffffffffff ffffffff ffffffff ffffffffffffffff ffffffff ffffffff fffffffa51868783 bf2f966b 7fcc0148 f709a5d03bb5c9b8 899c47ae bb6fb71e 91386409".replace(/ /g,""),"hex"),G:E.from("0400c6 858e06b7 0404e9cd 9e3ecb66 2395b4429c648139 053fb521 f828af60 6b4d3dbaa14b5e77 efe75928 fe1dc127 a2ffa8de3348b3c1 856a429b f97e7e31 c2e5bd660118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd998f54449 579b4468 17afbd17 273e662c97ee7299 5ef42640 c550b901 3fad0761353c7086 a272c240 88be9476 9fd16650".replace(/ /g,""),"hex")}};return algs={info:A,privInfo:_,hashAlgs:I,curves:B},algs}var errors$1,hasRequiredErrors$1;function requireErrors$1(){if(hasRequiredErrors$1)return errors$1;hasRequiredErrors$1=1,requireAssert();var E=requireUtil$3();function A(P,D){Error.captureStackTrace&&Error.captureStackTrace(this,A),this.name="FingerprintFormatError",this.fingerprint=P,this.format=D,this.message="Fingerprint format is not supported, or is invalid: ",P!==void 0&&(this.message+=" fingerprint = "+P),D!==void 0&&(this.message+=" format = "+D)}E.inherits(A,Error);function _(P){Error.captureStackTrace&&Error.captureStackTrace(this,_),this.name="InvalidAlgorithmError",this.algorithm=P,this.message='Algorithm "'+P+'" is not supported'}E.inherits(_,Error);function I(P,D,F){Error.captureStackTrace&&Error.captureStackTrace(this,I),this.name="KeyParseError",this.format=D,this.keyName=P,this.innerErr=F,this.message="Failed to parse "+P+" as a valid "+D+" format key: "+F.message}E.inherits(I,Error);function B(P,D,F){Error.captureStackTrace&&Error.captureStackTrace(this,B),this.name="SignatureParseError",this.type=P,this.format=D,this.innerErr=F,this.message="Failed to parse the given data as a "+P+" signature in "+D+" format: "+F.message}E.inherits(B,Error);function T(P,D,F){Error.captureStackTrace&&Error.captureStackTrace(this,T),this.name="CertificateParseError",this.format=D,this.certName=P,this.innerErr=F,this.message="Failed to parse "+P+" as a valid "+D+" format certificate: "+F.message}E.inherits(T,Error);function R(P,D){Error.captureStackTrace&&Error.captureStackTrace(this,R),this.name="KeyEncryptedError",this.format=D,this.keyName=P,this.message="The "+D+" format key "+P+" is encrypted (password-protected), and no passphrase was provided in `options`"}return E.inherits(R,Error),errors$1={FingerprintFormatError:A,InvalidAlgorithmError:_,KeyParseError:I,SignatureParseError:B,KeyEncryptedError:R,CertificateParseError:T},errors$1}var ber={exports:{}},errors,hasRequiredErrors;function requireErrors(){return hasRequiredErrors||(hasRequiredErrors=1,errors={newInvalidAsn1Error:function(E){var A=new Error;return A.name="InvalidAsn1Error",A.message=E||"",A}}),errors}var types,hasRequiredTypes;function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,types={EOC:0,Boolean:1,Integer:2,BitString:3,OctetString:4,Null:5,OID:6,ObjectDescriptor:7,External:8,Real:9,Enumeration:10,PDV:11,Utf8String:12,RelativeOID:13,Sequence:16,Set:17,NumericString:18,PrintableString:19,T61String:20,VideotexString:21,IA5String:22,UTCTime:23,GeneralizedTime:24,GraphicString:25,VisibleString:26,GeneralString:28,UniversalString:29,CharacterString:30,BMPString:31,Constructor:32,Context:128}),types}var reader,hasRequiredReader;function requireReader(){if(hasRequiredReader)return reader;hasRequiredReader=1;var E=requireAssert$1(),A=requireSafer().Buffer,_=requireTypes(),I=requireErrors(),B=I.newInvalidAsn1Error;function T(R){if(!R||!A.isBuffer(R))throw new TypeError("data must be a node Buffer");this._buf=R,this._size=R.length,this._len=0,this._offset=0}return Object.defineProperty(T.prototype,"length",{enumerable:!0,get:function(){return this._len}}),Object.defineProperty(T.prototype,"offset",{enumerable:!0,get:function(){return this._offset}}),Object.defineProperty(T.prototype,"remain",{get:function(){return this._size-this._offset}}),Object.defineProperty(T.prototype,"buffer",{get:function(){return this._buf.slice(this._offset)}}),T.prototype.readByte=function(R){if(this._size-this._offset<1)return null;var P=this._buf[this._offset]&255;return R||(this._offset+=1),P},T.prototype.peek=function(){return this.readByte(!0)},T.prototype.readLength=function(R){if(R===void 0&&(R=this._offset),R>=this._size)return null;var P=this._buf[R++]&255;if(P===null)return null;if((P&128)===128){if(P&=127,P===0)throw B("Indefinite length not supported");if(P>4)throw B("encoding too long");if(this._size-R<P)return null;this._len=0;for(var D=0;D<P;D++)this._len=(this._len<<8)+(this._buf[R++]&255)}else this._len=P;return R},T.prototype.readSequence=function(R){var P=this.peek();if(P===null)return null;if(R!==void 0&&R!==P)throw B("Expected 0x"+R.toString(16)+": got 0x"+P.toString(16));var D=this.readLength(this._offset+1);return D===null?null:(this._offset=D,P)},T.prototype.readInt=function(){return this._readTag(_.Integer)},T.prototype.readBoolean=function(){return this._readTag(_.Boolean)!==0},T.prototype.readEnumeration=function(){return this._readTag(_.Enumeration)},T.prototype.readString=function(R,P){R||(R=_.OctetString);var D=this.peek();if(D===null)return null;if(D!==R)throw B("Expected 0x"+R.toString(16)+": got 0x"+D.toString(16));var F=this.readLength(this._offset+1);if(F===null||this.length>this._size-F)return null;if(this._offset=F,this.length===0)return P?A.alloc(0):"";var L=this._buf.slice(this._offset,this._offset+this.length);return this._offset+=this.length,P?L:L.toString("utf8")},T.prototype.readOID=function(R){R||(R=_.OID);var P=this.readString(R,!0);if(P===null)return null;for(var D=[],F=0,L=0;L<P.length;L++){var U=P[L]&255;F<<=7,F+=U&127,(U&128)===0&&(D.push(F),F=0)}return F=D.shift(),D.unshift(F%40),D.unshift(F/40>>0),D.join(".")},T.prototype._readTag=function(R){E.ok(R!==void 0);var P=this.peek();if(P===null)return null;if(P!==R)throw B("Expected 0x"+R.toString(16)+": got 0x"+P.toString(16));var D=this.readLength(this._offset+1);if(D===null)return null;if(this.length>4)throw B("Integer too long: "+this.length);if(this.length>this._size-D)return null;this._offset=D;for(var F=this._buf[this._offset],L=0,U=0;U<this.length;U++)L<<=8,L|=this._buf[this._offset++]&255;return(F&128)===128&&U!==4&&(L-=1<<U*8),L>>0},reader=T,reader}var writer,hasRequiredWriter;function requireWriter(){if(hasRequiredWriter)return writer;hasRequiredWriter=1;var E=requireAssert$1(),A=requireSafer().Buffer,_=requireTypes(),I=requireErrors(),B=I.newInvalidAsn1Error,T={size:1024,growthFactor:8};function R(D,F){E.ok(D),E.equal(typeof D,"object"),E.ok(F),E.equal(typeof F,"object");var L=Object.getOwnPropertyNames(D);return L.forEach(function(U){if(!F[U]){var V=Object.getOwnPropertyDescriptor(D,U);Object.defineProperty(F,U,V)}}),F}function P(D){D=R(T,D||{}),this._buf=A.alloc(D.size||1024),this._size=this._buf.length,this._offset=0,this._options=D,this._seq=[]}return Object.defineProperty(P.prototype,"buffer",{get:function(){if(this._seq.length)throw B(this._seq.length+" unended sequence(s)");return this._buf.slice(0,this._offset)}}),P.prototype.writeByte=function(D){if(typeof D!="number")throw new TypeError("argument must be a Number");this._ensure(1),this._buf[this._offset++]=D},P.prototype.writeInt=function(D,F){if(typeof D!="number")throw new TypeError("argument must be a Number");typeof F!="number"&&(F=_.Integer);for(var L=4;((D&4286578688)===0||(D&4286578688)===-8388608)&&L>1;)L--,D<<=8;if(L>4)throw B("BER ints cannot be > 0xffffffff");for(this._ensure(2+L),this._buf[this._offset++]=F,this._buf[this._offset++]=L;L-- >0;)this._buf[this._offset++]=(D&4278190080)>>>24,D<<=8},P.prototype.writeNull=function(){this.writeByte(_.Null),this.writeByte(0)},P.prototype.writeEnumeration=function(D,F){if(typeof D!="number")throw new TypeError("argument must be a Number");return typeof F!="number"&&(F=_.Enumeration),this.writeInt(D,F)},P.prototype.writeBoolean=function(D,F){if(typeof D!="boolean")throw new TypeError("argument must be a Boolean");typeof F!="number"&&(F=_.Boolean),this._ensure(3),this._buf[this._offset++]=F,this._buf[this._offset++]=1,this._buf[this._offset++]=D?255:0},P.prototype.writeString=function(D,F){if(typeof D!="string")throw new TypeError("argument must be a string (was: "+typeof D+")");typeof F!="number"&&(F=_.OctetString);var L=A.byteLength(D);this.writeByte(F),this.writeLength(L),L&&(this._ensure(L),this._buf.write(D,this._offset),this._offset+=L)},P.prototype.writeBuffer=function(D,F){if(typeof F!="number")throw new TypeError("tag must be a number");if(!A.isBuffer(D))throw new TypeError("argument must be a buffer");this.writeByte(F),this.writeLength(D.length),this._ensure(D.length),D.copy(this._buf,this._offset,0,D.length),this._offset+=D.length},P.prototype.writeStringArray=function(D){if(!D instanceof Array)throw new TypeError("argument must be an Array[String]");var F=this;D.forEach(function(L){F.writeString(L)})},P.prototype.writeOID=function(D,F){if(typeof D!="string")throw new TypeError("argument must be a string");if(typeof F!="number"&&(F=_.OID),!/^([0-9]+\.){3,}[0-9]+$/.test(D))throw new Error("argument is not a valid OID string");function L(J,ee){ee<128?J.push(ee):ee<16384?(J.push(ee>>>7|128),J.push(ee&127)):ee<2097152?(J.push(ee>>>14|128),J.push((ee>>>7|128)&255),J.push(ee&127)):ee<268435456?(J.push(ee>>>21|128),J.push((ee>>>14|128)&255),J.push((ee>>>7|128)&255),J.push(ee&127)):(J.push((ee>>>28|128)&255),J.push((ee>>>21|128)&255),J.push((ee>>>14|128)&255),J.push((ee>>>7|128)&255),J.push(ee&127))}var U=D.split("."),V=[];V.push(parseInt(U[0],10)*40+parseInt(U[1],10)),U.slice(2).forEach(function(J){L(V,parseInt(J,10))});var K=this;this._ensure(2+V.length),this.writeByte(F),this.writeLength(V.length),V.forEach(function(J){K.writeByte(J)})},P.prototype.writeLength=function(D){if(typeof D!="number")throw new TypeError("argument must be a Number");if(this._ensure(4),D<=127)this._buf[this._offset++]=D;else if(D<=255)this._buf[this._offset++]=129,this._buf[this._offset++]=D;else if(D<=65535)this._buf[this._offset++]=130,this._buf[this._offset++]=D>>8,this._buf[this._offset++]=D;else if(D<=16777215)this._buf[this._offset++]=131,this._buf[this._offset++]=D>>16,this._buf[this._offset++]=D>>8,this._buf[this._offset++]=D;else throw B("Length too long (> 4 bytes)")},P.prototype.startSequence=function(D){typeof D!="number"&&(D=_.Sequence|_.Constructor),this.writeByte(D),this._seq.push(this._offset),this._ensure(3),this._offset+=3},P.prototype.endSequence=function(){var D=this._seq.pop(),F=D+3,L=this._offset-F;if(L<=127)this._shift(F,L,-2),this._buf[D]=L;else if(L<=255)this._shift(F,L,-1),this._buf[D]=129,this._buf[D+1]=L;else if(L<=65535)this._buf[D]=130,this._buf[D+1]=L>>8,this._buf[D+2]=L;else if(L<=16777215)this._shift(F,L,1),this._buf[D]=131,this._buf[D+1]=L>>16,this._buf[D+2]=L>>8,this._buf[D+3]=L;else throw B("Sequence too long")},P.prototype._shift=function(D,F,L){E.ok(D!==void 0),E.ok(F!==void 0),E.ok(L),this._buf.copy(this._buf,D+L,D,D+F),this._offset+=L},P.prototype._ensure=function(D){if(E.ok(D),this._size-this._offset<D){var F=this._size*this._options.growthFactor;F-this._offset<D&&(F+=D);var L=A.alloc(F);this._buf.copy(L,0,0,this._offset),this._buf=L,this._size=F}},writer=P,writer}var hasRequiredBer;function requireBer(){return hasRequiredBer||(hasRequiredBer=1,(function(E){var A=requireErrors(),_=requireTypes(),I=requireReader(),B=requireWriter();E.exports={Reader:I,Writer:B};for(var T in _)_.hasOwnProperty(T)&&(E.exports[T]=_[T]);for(var R in A)A.hasOwnProperty(R)&&(E.exports[R]=A[R])})(ber)),ber.exports}var lib$4,hasRequiredLib$4;function requireLib$4(){if(hasRequiredLib$4)return lib$4;hasRequiredLib$4=1;var E=requireBer();return lib$4={Ber:E,BerReader:E.Reader,BerWriter:E.Writer},lib$4}var jsbn$1={exports:{}},jsbn=jsbn$1.exports,hasRequiredJsbn;function requireJsbn(){return hasRequiredJsbn||(hasRequiredJsbn=1,(function(E,A){(function(){var _,I=0xdeadbeefcafe,B=(I&16777215)==15715070;function T(je,Xe,lt){je!=null&&(typeof je=="number"?this.fromNumber(je,Xe,lt):Xe==null&&typeof je!="string"?this.fromString(je,256):this.fromString(je,Xe))}function R(){return new T(null)}function P(je,Xe,lt,Ct,Qt,Ht){for(;--Ht>=0;){var er=Xe*this[je++]+lt[Ct]+Qt;Qt=Math.floor(er/67108864),lt[Ct++]=er&67108863}return Qt}function D(je,Xe,lt,Ct,Qt,Ht){for(var er=Xe&32767,ir=Xe>>15;--Ht>=0;){var Ir=this[je]&32767,kr=this[je++]>>15,Or=ir*Ir+kr*er;Ir=er*Ir+((Or&32767)<<15)+lt[Ct]+(Qt&1073741823),Qt=(Ir>>>30)+(Or>>>15)+ir*kr+(Qt>>>30),lt[Ct++]=Ir&1073741823}return Qt}function F(je,Xe,lt,Ct,Qt,Ht){for(var er=Xe&16383,ir=Xe>>14;--Ht>=0;){var Ir=this[je]&16383,kr=this[je++]>>14,Or=ir*Ir+kr*er;Ir=er*Ir+((Or&16383)<<14)+lt[Ct]+Qt,Qt=(Ir>>28)+(Or>>14)+ir*kr,lt[Ct++]=Ir&268435455}return Qt}var L=typeof navigator<"u";L&&B&&navigator.appName=="Microsoft Internet Explorer"?(T.prototype.am=D,_=30):L&&B&&navigator.appName!="Netscape"?(T.prototype.am=P,_=26):(T.prototype.am=F,_=28),T.prototype.DB=_,T.prototype.DM=(1<<_)-1,T.prototype.DV=1<<_;var U=52;T.prototype.FV=Math.pow(2,U),T.prototype.F1=U-_,T.prototype.F2=2*_-U;var V="0123456789abcdefghijklmnopqrstuvwxyz",K=new Array,J,ee;for(J=48,ee=0;ee<=9;++ee)K[J++]=ee;for(J=97,ee=10;ee<36;++ee)K[J++]=ee;for(J=65,ee=10;ee<36;++ee)K[J++]=ee;function ie(je){return V.charAt(je)}function ne(je,Xe){var lt=K[je.charCodeAt(Xe)];return lt??-1}function ce(je){for(var Xe=this.t-1;Xe>=0;--Xe)je[Xe]=this[Xe];je.t=this.t,je.s=this.s}function fe(je){this.t=1,this.s=je<0?-1:0,je>0?this[0]=je:je<-1?this[0]=je+this.DV:this.t=0}function de(je){var Xe=R();return Xe.fromInt(je),Xe}function pe(je,Xe){var lt;if(Xe==16)lt=4;else if(Xe==8)lt=3;else if(Xe==256)lt=8;else if(Xe==2)lt=1;else if(Xe==32)lt=5;else if(Xe==4)lt=2;else{this.fromRadix(je,Xe);return}this.t=0,this.s=0;for(var Ct=je.length,Qt=!1,Ht=0;--Ct>=0;){var er=lt==8?je[Ct]&255:ne(je,Ct);if(er<0){je.charAt(Ct)=="-"&&(Qt=!0);continue}Qt=!1,Ht==0?this[this.t++]=er:Ht+lt>this.DB?(this[this.t-1]|=(er&(1<<this.DB-Ht)-1)<<Ht,this[this.t++]=er>>this.DB-Ht):this[this.t-1]|=er<<Ht,Ht+=lt,Ht>=this.DB&&(Ht-=this.DB)}lt==8&&(je[0]&128)!=0&&(this.s=-1,Ht>0&&(this[this.t-1]|=(1<<this.DB-Ht)-1<<Ht)),this.clamp(),Qt&&T.ZERO.subTo(this,this)}function ve(){for(var je=this.s&this.DM;this.t>0&&this[this.t-1]==je;)--this.t}function ye(je){if(this.s<0)return"-"+this.negate().toString(je);var Xe;if(je==16)Xe=4;else if(je==8)Xe=3;else if(je==2)Xe=1;else if(je==32)Xe=5;else if(je==4)Xe=2;else return this.toRadix(je);var lt=(1<<Xe)-1,Ct,Qt=!1,Ht="",er=this.t,ir=this.DB-er*this.DB%Xe;if(er-- >0)for(ir<this.DB&&(Ct=this[er]>>ir)>0&&(Qt=!0,Ht=ie(Ct));er>=0;)ir<Xe?(Ct=(this[er]&(1<<ir)-1)<<Xe-ir,Ct|=this[--er]>>(ir+=this.DB-Xe)):(Ct=this[er]>>(ir-=Xe)&lt,ir<=0&&(ir+=this.DB,--er)),Ct>0&&(Qt=!0),Qt&&(Ht+=ie(Ct));return Qt?Ht:"0"}function _e(){var je=R();return T.ZERO.subTo(this,je),je}function be(){return this.s<0?this.negate():this}function Te(je){var Xe=this.s-je.s;if(Xe!=0)return Xe;var lt=this.t;if(Xe=lt-je.t,Xe!=0)return this.s<0?-Xe:Xe;for(;--lt>=0;)if((Xe=this[lt]-je[lt])!=0)return Xe;return 0}function ue(je){var Xe=1,lt;return(lt=je>>>16)!=0&&(je=lt,Xe+=16),(lt=je>>8)!=0&&(je=lt,Xe+=8),(lt=je>>4)!=0&&(je=lt,Xe+=4),(lt=je>>2)!=0&&(je=lt,Xe+=2),(lt=je>>1)!=0&&(je=lt,Xe+=1),Xe}function O(){return this.t<=0?0:this.DB*(this.t-1)+ue(this[this.t-1]^this.s&this.DM)}function z(je,Xe){var lt;for(lt=this.t-1;lt>=0;--lt)Xe[lt+je]=this[lt];for(lt=je-1;lt>=0;--lt)Xe[lt]=0;Xe.t=this.t+je,Xe.s=this.s}function Y(je,Xe){for(var lt=je;lt<this.t;++lt)Xe[lt-je]=this[lt];Xe.t=Math.max(this.t-je,0),Xe.s=this.s}function te(je,Xe){var lt=je%this.DB,Ct=this.DB-lt,Qt=(1<<Ct)-1,Ht=Math.floor(je/this.DB),er=this.s<<lt&this.DM,ir;for(ir=this.t-1;ir>=0;--ir)Xe[ir+Ht+1]=this[ir]>>Ct|er,er=(this[ir]&Qt)<<lt;for(ir=Ht-1;ir>=0;--ir)Xe[ir]=0;Xe[Ht]=er,Xe.t=this.t+Ht+1,Xe.s=this.s,Xe.clamp()}function oe(je,Xe){Xe.s=this.s;var lt=Math.floor(je/this.DB);if(lt>=this.t){Xe.t=0;return}var Ct=je%this.DB,Qt=this.DB-Ct,Ht=(1<<Ct)-1;Xe[0]=this[lt]>>Ct;for(var er=lt+1;er<this.t;++er)Xe[er-lt-1]|=(this[er]&Ht)<<Qt,Xe[er-lt]=this[er]>>Ct;Ct>0&&(Xe[this.t-lt-1]|=(this.s&Ht)<<Qt),Xe.t=this.t-lt,Xe.clamp()}function le(je,Xe){for(var lt=0,Ct=0,Qt=Math.min(je.t,this.t);lt<Qt;)Ct+=this[lt]-je[lt],Xe[lt++]=Ct&this.DM,Ct>>=this.DB;if(je.t<this.t){for(Ct-=je.s;lt<this.t;)Ct+=this[lt],Xe[lt++]=Ct&this.DM,Ct>>=this.DB;Ct+=this.s}else{for(Ct+=this.s;lt<je.t;)Ct-=je[lt],Xe[lt++]=Ct&this.DM,Ct>>=this.DB;Ct-=je.s}Xe.s=Ct<0?-1:0,Ct<-1?Xe[lt++]=this.DV+Ct:Ct>0&&(Xe[lt++]=Ct),Xe.t=lt,Xe.clamp()}function he(je,Xe){var lt=this.abs(),Ct=je.abs(),Qt=lt.t;for(Xe.t=Qt+Ct.t;--Qt>=0;)Xe[Qt]=0;for(Qt=0;Qt<Ct.t;++Qt)Xe[Qt+lt.t]=lt.am(0,Ct[Qt],Xe,Qt,0,lt.t);Xe.s=0,Xe.clamp(),this.s!=je.s&&T.ZERO.subTo(Xe,Xe)}function ae(je){for(var Xe=this.abs(),lt=je.t=2*Xe.t;--lt>=0;)je[lt]=0;for(lt=0;lt<Xe.t-1;++lt){var Ct=Xe.am(lt,Xe[lt],je,2*lt,0,1);(je[lt+Xe.t]+=Xe.am(lt+1,2*Xe[lt],je,2*lt+1,Ct,Xe.t-lt-1))>=Xe.DV&&(je[lt+Xe.t]-=Xe.DV,je[lt+Xe.t+1]=1)}je.t>0&&(je[je.t-1]+=Xe.am(lt,Xe[lt],je,2*lt,0,1)),je.s=0,je.clamp()}function Q(je,Xe,lt){var Ct=je.abs();if(!(Ct.t<=0)){var Qt=this.abs();if(Qt.t<Ct.t){Xe?.fromInt(0),lt!=null&&this.copyTo(lt);return}lt==null&&(lt=R());var Ht=R(),er=this.s,ir=je.s,Ir=this.DB-ue(Ct[Ct.t-1]);Ir>0?(Ct.lShiftTo(Ir,Ht),Qt.lShiftTo(Ir,lt)):(Ct.copyTo(Ht),Qt.copyTo(lt));var kr=Ht.t,Or=Ht[kr-1];if(Or!=0){var Pr=Or*(1<<this.F1)+(kr>1?Ht[kr-2]>>this.F2:0),jr=this.FV/Pr,$r=(1<<this.F1)/Pr,qr=1<<this.F2,Hr=lt.t,ti=Hr-kr,Wr=Xe??R();for(Ht.dlShiftTo(ti,Wr),lt.compareTo(Wr)>=0&&(lt[lt.t++]=1,lt.subTo(Wr,lt)),T.ONE.dlShiftTo(kr,Wr),Wr.subTo(Ht,Ht);Ht.t<kr;)Ht[Ht.t++]=0;for(;--ti>=0;){var me=lt[--Hr]==Or?this.DM:Math.floor(lt[Hr]*jr+(lt[Hr-1]+qr)*$r);if((lt[Hr]+=Ht.am(0,me,lt,ti,0,kr))<me)for(Ht.dlShiftTo(ti,Wr),lt.subTo(Wr,lt);lt[Hr]<--me;)lt.subTo(Wr,lt)}Xe!=null&&(lt.drShiftTo(kr,Xe),er!=ir&&T.ZERO.subTo(Xe,Xe)),lt.t=kr,lt.clamp(),Ir>0&&lt.rShiftTo(Ir,lt),er<0&&T.ZERO.subTo(lt,lt)}}}function se(je){var Xe=R();return this.abs().divRemTo(je,null,Xe),this.s<0&&Xe.compareTo(T.ZERO)>0&&je.subTo(Xe,Xe),Xe}function Ae(je){this.m=je}function ge(je){return je.s<0||je.compareTo(this.m)>=0?je.mod(this.m):je}function Ee(je){return je}function ke(je){je.divRemTo(this.m,null,je)}function Se(je,Xe,lt){je.multiplyTo(Xe,lt),this.reduce(lt)}function Ie(je,Xe){je.squareTo(Xe),this.reduce(Xe)}Ae.prototype.convert=ge,Ae.prototype.revert=Ee,Ae.prototype.reduce=ke,Ae.prototype.mulTo=Se,Ae.prototype.sqrTo=Ie;function we(){if(this.t<1)return 0;var je=this[0];if((je&1)==0)return 0;var Xe=je&3;return Xe=Xe*(2-(je&15)*Xe)&15,Xe=Xe*(2-(je&255)*Xe)&255,Xe=Xe*(2-((je&65535)*Xe&65535))&65535,Xe=Xe*(2-je*Xe%this.DV)%this.DV,Xe>0?this.DV-Xe:-Xe}function xe(je){this.m=je,this.mp=je.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<je.DB-15)-1,this.mt2=2*je.t}function Fe(je){var Xe=R();return je.abs().dlShiftTo(this.m.t,Xe),Xe.divRemTo(this.m,null,Xe),je.s<0&&Xe.compareTo(T.ZERO)>0&&this.m.subTo(Xe,Xe),Xe}function Ge(je){var Xe=R();return je.copyTo(Xe),this.reduce(Xe),Xe}function Oe(je){for(;je.t<=this.mt2;)je[je.t++]=0;for(var Xe=0;Xe<this.m.t;++Xe){var lt=je[Xe]&32767,Ct=lt*this.mpl+((lt*this.mph+(je[Xe]>>15)*this.mpl&this.um)<<15)&je.DM;for(lt=Xe+this.m.t,je[lt]+=this.m.am(0,Ct,je,Xe,0,this.m.t);je[lt]>=je.DV;)je[lt]-=je.DV,je[++lt]++}je.clamp(),je.drShiftTo(this.m.t,je),je.compareTo(this.m)>=0&&je.subTo(this.m,je)}function et(je,Xe){je.squareTo(Xe),this.reduce(Xe)}function Mt(je,Xe,lt){je.multiplyTo(Xe,lt),this.reduce(lt)}xe.prototype.convert=Fe,xe.prototype.revert=Ge,xe.prototype.reduce=Oe,xe.prototype.mulTo=Mt,xe.prototype.sqrTo=et;function dt(){return(this.t>0?this[0]&1:this.s)==0}function mt(je,Xe){if(je>4294967295||je<1)return T.ONE;var lt=R(),Ct=R(),Qt=Xe.convert(this),Ht=ue(je)-1;for(Qt.copyTo(lt);--Ht>=0;)if(Xe.sqrTo(lt,Ct),(je&1<<Ht)>0)Xe.mulTo(Ct,Qt,lt);else{var er=lt;lt=Ct,Ct=er}return Xe.revert(lt)}function Ut(je,Xe){var lt;return je<256||Xe.isEven()?lt=new Ae(Xe):lt=new xe(Xe),this.exp(je,lt)}T.prototype.copyTo=ce,T.prototype.fromInt=fe,T.prototype.fromString=pe,T.prototype.clamp=ve,T.prototype.dlShiftTo=z,T.prototype.drShiftTo=Y,T.prototype.lShiftTo=te,T.prototype.rShiftTo=oe,T.prototype.subTo=le,T.prototype.multiplyTo=he,T.prototype.squareTo=ae,T.prototype.divRemTo=Q,T.prototype.invDigit=we,T.prototype.isEven=dt,T.prototype.exp=mt,T.prototype.toString=ye,T.prototype.negate=_e,T.prototype.abs=be,T.prototype.compareTo=Te,T.prototype.bitLength=O,T.prototype.mod=se,T.prototype.modPowInt=Ut,T.ZERO=de(0),T.ONE=de(1);function St(){var je=R();return this.copyTo(je),je}function vt(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function It(){return this.t==0?this.s:this[0]<<24>>24}function yt(){return this.t==0?this.s:this[0]<<16>>16}function Tt(je){return Math.floor(Math.LN2*this.DB/Math.log(je))}function Wt(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function ft(je){if(je==null&&(je=10),this.signum()==0||je<2||je>36)return"0";var Xe=this.chunkSize(je),lt=Math.pow(je,Xe),Ct=de(lt),Qt=R(),Ht=R(),er="";for(this.divRemTo(Ct,Qt,Ht);Qt.signum()>0;)er=(lt+Ht.intValue()).toString(je).substr(1)+er,Qt.divRemTo(Ct,Qt,Ht);return Ht.intValue().toString(je)+er}function _t(je,Xe){this.fromInt(0),Xe==null&&(Xe=10);for(var lt=this.chunkSize(Xe),Ct=Math.pow(Xe,lt),Qt=!1,Ht=0,er=0,ir=0;ir<je.length;++ir){var Ir=ne(je,ir);if(Ir<0){je.charAt(ir)=="-"&&this.signum()==0&&(Qt=!0);continue}er=Xe*er+Ir,++Ht>=lt&&(this.dMultiply(Ct),this.dAddOffset(er,0),Ht=0,er=0)}Ht>0&&(this.dMultiply(Math.pow(Xe,Ht)),this.dAddOffset(er,0)),Qt&&T.ZERO.subTo(this,this)}function Xt(je,Xe,lt){if(typeof Xe=="number")if(je<2)this.fromInt(1);else for(this.fromNumber(je,lt),this.testBit(je-1)||this.bitwiseTo(T.ONE.shiftLeft(je-1),Je,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(Xe);)this.dAddOffset(2,0),this.bitLength()>je&&this.subTo(T.ONE.shiftLeft(je-1),this);else{var Ct=new Array,Qt=je&7;Ct.length=(je>>3)+1,Xe.nextBytes(Ct),Qt>0?Ct[0]&=(1<<Qt)-1:Ct[0]=0,this.fromString(Ct,256)}}function Nt(){var je=this.t,Xe=new Array;Xe[0]=this.s;var lt=this.DB-je*this.DB%8,Ct,Qt=0;if(je-- >0)for(lt<this.DB&&(Ct=this[je]>>lt)!=(this.s&this.DM)>>lt&&(Xe[Qt++]=Ct|this.s<<this.DB-lt);je>=0;)lt<8?(Ct=(this[je]&(1<<lt)-1)<<8-lt,Ct|=this[--je]>>(lt+=this.DB-8)):(Ct=this[je]>>(lt-=8)&255,lt<=0&&(lt+=this.DB,--je)),(Ct&128)!=0&&(Ct|=-256),Qt==0&&(this.s&128)!=(Ct&128)&&++Qt,(Qt>0||Ct!=this.s)&&(Xe[Qt++]=Ct);return Xe}function qt(je){return this.compareTo(je)==0}function nr(je){return this.compareTo(je)<0?this:je}function ze(je){return this.compareTo(je)>0?this:je}function Ce(je,Xe,lt){var Ct,Qt,Ht=Math.min(je.t,this.t);for(Ct=0;Ct<Ht;++Ct)lt[Ct]=Xe(this[Ct],je[Ct]);if(je.t<this.t){for(Qt=je.s&this.DM,Ct=Ht;Ct<this.t;++Ct)lt[Ct]=Xe(this[Ct],Qt);lt.t=this.t}else{for(Qt=this.s&this.DM,Ct=Ht;Ct<je.t;++Ct)lt[Ct]=Xe(Qt,je[Ct]);lt.t=je.t}lt.s=Xe(this.s,je.s),lt.clamp()}function Le(je,Xe){return je&Xe}function Ze(je){var Xe=R();return this.bitwiseTo(je,Le,Xe),Xe}function Je(je,Xe){return je|Xe}function nt(je){var Xe=R();return this.bitwiseTo(je,Je,Xe),Xe}function rt(je,Xe){return je^Xe}function He(je){var Xe=R();return this.bitwiseTo(je,rt,Xe),Xe}function Dt(je,Xe){return je&~Xe}function Rt(je){var Xe=R();return this.bitwiseTo(je,Dt,Xe),Xe}function De(){for(var je=R(),Xe=0;Xe<this.t;++Xe)je[Xe]=this.DM&~this[Xe];return je.t=this.t,je.s=~this.s,je}function We(je){var Xe=R();return je<0?this.rShiftTo(-je,Xe):this.lShiftTo(je,Xe),Xe}function Ve(je){var Xe=R();return je<0?this.lShiftTo(-je,Xe):this.rShiftTo(je,Xe),Xe}function qe(je){if(je==0)return-1;var Xe=0;return(je&65535)==0&&(je>>=16,Xe+=16),(je&255)==0&&(je>>=8,Xe+=8),(je&15)==0&&(je>>=4,Xe+=4),(je&3)==0&&(je>>=2,Xe+=2),(je&1)==0&&++Xe,Xe}function pt(){for(var je=0;je<this.t;++je)if(this[je]!=0)return je*this.DB+qe(this[je]);return this.s<0?this.t*this.DB:-1}function At(je){for(var Xe=0;je!=0;)je&=je-1,++Xe;return Xe}function jt(){for(var je=0,Xe=this.s&this.DM,lt=0;lt<this.t;++lt)je+=At(this[lt]^Xe);return je}function rr(je){var Xe=Math.floor(je/this.DB);return Xe>=this.t?this.s!=0:(this[Xe]&1<<je%this.DB)!=0}function Ke(je,Xe){var lt=T.ONE.shiftLeft(je);return this.bitwiseTo(lt,Xe,lt),lt}function Ne(je){return this.changeBit(je,Je)}function Ye(je){return this.changeBit(je,Dt)}function st(je){return this.changeBit(je,rt)}function bt(je,Xe){for(var lt=0,Ct=0,Qt=Math.min(je.t,this.t);lt<Qt;)Ct+=this[lt]+je[lt],Xe[lt++]=Ct&this.DM,Ct>>=this.DB;if(je.t<this.t){for(Ct+=je.s;lt<this.t;)Ct+=this[lt],Xe[lt++]=Ct&this.DM,Ct>>=this.DB;Ct+=this.s}else{for(Ct+=this.s;lt<je.t;)Ct+=je[lt],Xe[lt++]=Ct&this.DM,Ct>>=this.DB;Ct+=je.s}Xe.s=Ct<0?-1:0,Ct>0?Xe[lt++]=Ct:Ct<-1&&(Xe[lt++]=this.DV+Ct),Xe.t=lt,Xe.clamp()}function Qe(je){var Xe=R();return this.addTo(je,Xe),Xe}function Re(je){var Xe=R();return this.subTo(je,Xe),Xe}function Pe(je){var Xe=R();return this.multiplyTo(je,Xe),Xe}function Me(){var je=R();return this.squareTo(je),je}function $e(je){var Xe=R();return this.divRemTo(je,Xe,null),Xe}function it(je){var Xe=R();return this.divRemTo(je,null,Xe),Xe}function kt(je){var Xe=R(),lt=R();return this.divRemTo(je,Xe,lt),new Array(Xe,lt)}function xt(je){this[this.t]=this.am(0,je-1,this,0,0,this.t),++this.t,this.clamp()}function Ot(je,Xe){if(je!=0){for(;this.t<=Xe;)this[this.t++]=0;for(this[Xe]+=je;this[Xe]>=this.DV;)this[Xe]-=this.DV,++Xe>=this.t&&(this[this.t++]=0),++this[Xe]}}function Jt(){}function tr(je){return je}function br(je,Xe,lt){je.multiplyTo(Xe,lt)}function ar(je,Xe){je.squareTo(Xe)}Jt.prototype.convert=tr,Jt.prototype.revert=tr,Jt.prototype.mulTo=br,Jt.prototype.sqrTo=ar;function _r(je){return this.exp(je,new Jt)}function or(je,Xe,lt){var Ct=Math.min(this.t+je.t,Xe);for(lt.s=0,lt.t=Ct;Ct>0;)lt[--Ct]=0;var Qt;for(Qt=lt.t-this.t;Ct<Qt;++Ct)lt[Ct+this.t]=this.am(0,je[Ct],lt,Ct,0,this.t);for(Qt=Math.min(je.t,Xe);Ct<Qt;++Ct)this.am(0,je[Ct],lt,Ct,0,Xe-Ct);lt.clamp()}function gr(je,Xe,lt){--Xe;var Ct=lt.t=this.t+je.t-Xe;for(lt.s=0;--Ct>=0;)lt[Ct]=0;for(Ct=Math.max(Xe-this.t,0);Ct<je.t;++Ct)lt[this.t+Ct-Xe]=this.am(Xe-Ct,je[Ct],lt,0,0,this.t+Ct-Xe);lt.clamp(),lt.drShiftTo(1,lt)}function xr(je){this.r2=R(),this.q3=R(),T.ONE.dlShiftTo(2*je.t,this.r2),this.mu=this.r2.divide(je),this.m=je}function vr(je){if(je.s<0||je.t>2*this.m.t)return je.mod(this.m);if(je.compareTo(this.m)<0)return je;var Xe=R();return je.copyTo(Xe),this.reduce(Xe),Xe}function Cr(je){return je}function Sr(je){for(je.drShiftTo(this.m.t-1,this.r2),je.t>this.m.t+1&&(je.t=this.m.t+1,je.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);je.compareTo(this.r2)<0;)je.dAddOffset(1,this.m.t+1);for(je.subTo(this.r2,je);je.compareTo(this.m)>=0;)je.subTo(this.m,je)}function dr(je,Xe){je.squareTo(Xe),this.reduce(Xe)}function wr(je,Xe,lt){je.multiplyTo(Xe,lt),this.reduce(lt)}xr.prototype.convert=vr,xr.prototype.revert=Cr,xr.prototype.reduce=Sr,xr.prototype.mulTo=wr,xr.prototype.sqrTo=dr;function fr(je,Xe){var lt=je.bitLength(),Ct,Qt=de(1),Ht;if(lt<=0)return Qt;lt<18?Ct=1:lt<48?Ct=3:lt<144?Ct=4:lt<768?Ct=5:Ct=6,lt<8?Ht=new Ae(Xe):Xe.isEven()?Ht=new xr(Xe):Ht=new xe(Xe);var er=new Array,ir=3,Ir=Ct-1,kr=(1<<Ct)-1;if(er[1]=Ht.convert(this),Ct>1){var Or=R();for(Ht.sqrTo(er[1],Or);ir<=kr;)er[ir]=R(),Ht.mulTo(Or,er[ir-2],er[ir]),ir+=2}var Pr=je.t-1,jr,$r=!0,qr=R(),Hr;for(lt=ue(je[Pr])-1;Pr>=0;){for(lt>=Ir?jr=je[Pr]>>lt-Ir&kr:(jr=(je[Pr]&(1<<lt+1)-1)<<Ir-lt,Pr>0&&(jr|=je[Pr-1]>>this.DB+lt-Ir)),ir=Ct;(jr&1)==0;)jr>>=1,--ir;if((lt-=ir)<0&&(lt+=this.DB,--Pr),$r)er[jr].copyTo(Qt),$r=!1;else{for(;ir>1;)Ht.sqrTo(Qt,qr),Ht.sqrTo(qr,Qt),ir-=2;ir>0?Ht.sqrTo(Qt,qr):(Hr=Qt,Qt=qr,qr=Hr),Ht.mulTo(qr,er[jr],Qt)}for(;Pr>=0&&(je[Pr]&1<<lt)==0;)Ht.sqrTo(Qt,qr),Hr=Qt,Qt=qr,qr=Hr,--lt<0&&(lt=this.DB-1,--Pr)}return Ht.revert(Qt)}function hr(je){var Xe=this.s<0?this.negate():this.clone(),lt=je.s<0?je.negate():je.clone();if(Xe.compareTo(lt)<0){var Ct=Xe;Xe=lt,lt=Ct}var Qt=Xe.getLowestSetBit(),Ht=lt.getLowestSetBit();if(Ht<0)return Xe;for(Qt<Ht&&(Ht=Qt),Ht>0&&(Xe.rShiftTo(Ht,Xe),lt.rShiftTo(Ht,lt));Xe.signum()>0;)(Qt=Xe.getLowestSetBit())>0&&Xe.rShiftTo(Qt,Xe),(Qt=lt.getLowestSetBit())>0&&lt.rShiftTo(Qt,lt),Xe.compareTo(lt)>=0?(Xe.subTo(lt,Xe),Xe.rShiftTo(1,Xe)):(lt.subTo(Xe,lt),lt.rShiftTo(1,lt));return Ht>0&&lt.lShiftTo(Ht,lt),lt}function Ar(je){if(je<=0)return 0;var Xe=this.DV%je,lt=this.s<0?je-1:0;if(this.t>0)if(Xe==0)lt=this[0]%je;else for(var Ct=this.t-1;Ct>=0;--Ct)lt=(Xe*lt+this[Ct])%je;return lt}function ur(je){var Xe=je.isEven();if(this.isEven()&&Xe||je.signum()==0)return T.ZERO;for(var lt=je.clone(),Ct=this.clone(),Qt=de(1),Ht=de(0),er=de(0),ir=de(1);lt.signum()!=0;){for(;lt.isEven();)lt.rShiftTo(1,lt),Xe?((!Qt.isEven()||!Ht.isEven())&&(Qt.addTo(this,Qt),Ht.subTo(je,Ht)),Qt.rShiftTo(1,Qt)):Ht.isEven()||Ht.subTo(je,Ht),Ht.rShiftTo(1,Ht);for(;Ct.isEven();)Ct.rShiftTo(1,Ct),Xe?((!er.isEven()||!ir.isEven())&&(er.addTo(this,er),ir.subTo(je,ir)),er.rShiftTo(1,er)):ir.isEven()||ir.subTo(je,ir),ir.rShiftTo(1,ir);lt.compareTo(Ct)>=0?(lt.subTo(Ct,lt),Xe&&Qt.subTo(er,Qt),Ht.subTo(ir,Ht)):(Ct.subTo(lt,Ct),Xe&&er.subTo(Qt,er),ir.subTo(Ht,ir))}if(Ct.compareTo(T.ONE)!=0)return T.ZERO;if(ir.compareTo(je)>=0)return ir.subtract(je);if(ir.signum()<0)ir.addTo(je,ir);else return ir;return ir.signum()<0?ir.add(je):ir}var zt=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],Kt=(1<<26)/zt[zt.length-1];function lr(je){var Xe,lt=this.abs();if(lt.t==1&&lt[0]<=zt[zt.length-1]){for(Xe=0;Xe<zt.length;++Xe)if(lt[0]==zt[Xe])return!0;return!1}if(lt.isEven())return!1;for(Xe=1;Xe<zt.length;){for(var Ct=zt[Xe],Qt=Xe+1;Qt<zt.length&&Ct<Kt;)Ct*=zt[Qt++];for(Ct=lt.modInt(Ct);Xe<Qt;)if(Ct%zt[Xe++]==0)return!1}return lt.millerRabin(je)}function ot(je){var Xe=this.subtract(T.ONE),lt=Xe.getLowestSetBit();if(lt<=0)return!1;var Ct=Xe.shiftRight(lt);je=je+1>>1,je>zt.length&&(je=zt.length);for(var Qt=R(),Ht=0;Ht<je;++Ht){Qt.fromInt(zt[Math.floor(Math.random()*zt.length)]);var er=Qt.modPow(Ct,this);if(er.compareTo(T.ONE)!=0&&er.compareTo(Xe)!=0){for(var ir=1;ir++<lt&&er.compareTo(Xe)!=0;)if(er=er.modPowInt(2,this),er.compareTo(T.ONE)==0)return!1;if(er.compareTo(Xe)!=0)return!1}}return!0}T.prototype.chunkSize=Tt,T.prototype.toRadix=ft,T.prototype.fromRadix=_t,T.prototype.fromNumber=Xt,T.prototype.bitwiseTo=Ce,T.prototype.changeBit=Ke,T.prototype.addTo=bt,T.prototype.dMultiply=xt,T.prototype.dAddOffset=Ot,T.prototype.multiplyLowerTo=or,T.prototype.multiplyUpperTo=gr,T.prototype.modInt=Ar,T.prototype.millerRabin=ot,T.prototype.clone=St,T.prototype.intValue=vt,T.prototype.byteValue=It,T.prototype.shortValue=yt,T.prototype.signum=Wt,T.prototype.toByteArray=Nt,T.prototype.equals=qt,T.prototype.min=nr,T.prototype.max=ze,T.prototype.and=Ze,T.prototype.or=nt,T.prototype.xor=He,T.prototype.andNot=Rt,T.prototype.not=De,T.prototype.shiftLeft=We,T.prototype.shiftRight=Ve,T.prototype.getLowestSetBit=pt,T.prototype.bitCount=jt,T.prototype.testBit=rr,T.prototype.setBit=Ne,T.prototype.clearBit=Ye,T.prototype.flipBit=st,T.prototype.add=Qe,T.prototype.subtract=Re,T.prototype.multiply=Pe,T.prototype.divide=$e,T.prototype.remainder=it,T.prototype.divideAndRemainder=kt,T.prototype.modPow=fr,T.prototype.modInverse=ur,T.prototype.pow=_r,T.prototype.gcd=hr,T.prototype.isProbablePrime=lr,T.prototype.square=Me,T.prototype.Barrett=xr;var ut,Bt,Lt;function $t(je){Bt[Lt++]^=je&255,Bt[Lt++]^=je>>8&255,Bt[Lt++]^=je>>16&255,Bt[Lt++]^=je>>24&255,Lt>=gt&&(Lt-=gt)}function Zt(){$t(new Date().getTime())}if(Bt==null){Bt=new Array,Lt=0;var Vt;if(typeof window<"u"&&window.crypto){if(window.crypto.getRandomValues){var Et=new Uint8Array(32);for(window.crypto.getRandomValues(Et),Vt=0;Vt<32;++Vt)Bt[Lt++]=Et[Vt]}else if(navigator.appName=="Netscape"&&navigator.appVersion<"5"){var sr=window.crypto.random(32);for(Vt=0;Vt<sr.length;++Vt)Bt[Lt++]=sr.charCodeAt(Vt)&255}}for(;Lt<gt;)Vt=Math.floor(65536*Math.random()),Bt[Lt++]=Vt>>>8,Bt[Lt++]=Vt&255;Lt=0,Zt()}function cr(){if(ut==null){for(Zt(),ut=tt(),ut.init(Bt),Lt=0;Lt<Bt.length;++Lt)Bt[Lt]=0;Lt=0}return ut.next()}function yr(je){var Xe;for(Xe=0;Xe<je.length;++Xe)je[Xe]=cr()}function Er(){}Er.prototype.nextBytes=yr;function ct(){this.i=0,this.j=0,this.S=new Array}function Be(je){var Xe,lt,Ct;for(Xe=0;Xe<256;++Xe)this.S[Xe]=Xe;for(lt=0,Xe=0;Xe<256;++Xe)lt=lt+this.S[Xe]+je[Xe%je.length]&255,Ct=this.S[Xe],this.S[Xe]=this.S[lt],this.S[lt]=Ct;this.i=0,this.j=0}function Ue(){var je;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,je=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=je,this.S[je+this.S[this.i]&255]}ct.prototype.init=Be,ct.prototype.next=Ue;function tt(){return new ct}var gt=256;T.SecureRandom=Er,T.BigInteger=T,E.exports=T}).call(jsbn)})(jsbn$1)),jsbn$1.exports}var ec,hasRequiredEc;function requireEc(){if(hasRequiredEc)return ec;hasRequiredEc=1;var E=requireJsbn().BigInteger,A=E.prototype.Barrett;function _(te,oe){this.x=oe,this.q=te}function I(te){return te==this?!0:this.q.equals(te.q)&&this.x.equals(te.x)}function B(){return this.x}function T(){return new _(this.q,this.x.negate().mod(this.q))}function R(te){return new _(this.q,this.x.add(te.toBigInteger()).mod(this.q))}function P(te){return new _(this.q,this.x.subtract(te.toBigInteger()).mod(this.q))}function D(te){return new _(this.q,this.x.multiply(te.toBigInteger()).mod(this.q))}function F(){return new _(this.q,this.x.square().mod(this.q))}function L(te){return new _(this.q,this.x.multiply(te.toBigInteger().modInverse(this.q)).mod(this.q))}_.prototype.equals=I,_.prototype.toBigInteger=B,_.prototype.negate=T,_.prototype.add=R,_.prototype.subtract=P,_.prototype.multiply=D,_.prototype.square=F,_.prototype.divide=L;function U(te,oe,le,he){this.curve=te,this.x=oe,this.y=le,he==null?this.z=E.ONE:this.z=he,this.zinv=null}function V(){this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q));var te=this.x.toBigInteger().multiply(this.zinv);return this.curve.reduce(te),this.curve.fromBigInteger(te)}function K(){this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q));var te=this.y.toBigInteger().multiply(this.zinv);return this.curve.reduce(te),this.curve.fromBigInteger(te)}function J(te){if(te==this)return!0;if(this.isInfinity())return te.isInfinity();if(te.isInfinity())return this.isInfinity();var oe,le;return oe=te.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(te.z)).mod(this.curve.q),oe.equals(E.ZERO)?(le=te.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(te.z)).mod(this.curve.q),le.equals(E.ZERO)):!1}function ee(){return this.x==null&&this.y==null?!0:this.z.equals(E.ZERO)&&!this.y.toBigInteger().equals(E.ZERO)}function ie(){return new U(this.curve,this.x,this.y.negate(),this.z)}function ne(te){if(this.isInfinity())return te;if(te.isInfinity())return this;var oe=te.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(te.z)).mod(this.curve.q),le=te.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(te.z)).mod(this.curve.q);if(E.ZERO.equals(le))return E.ZERO.equals(oe)?this.twice():this.curve.getInfinity();var he=new E("3"),ae=this.x.toBigInteger(),Q=this.y.toBigInteger();te.x.toBigInteger(),te.y.toBigInteger();var se=le.square(),Ae=se.multiply(le),ge=ae.multiply(se),Ee=oe.square().multiply(this.z),ke=Ee.subtract(ge.shiftLeft(1)).multiply(te.z).subtract(Ae).multiply(le).mod(this.curve.q),Se=ge.multiply(he).multiply(oe).subtract(Q.multiply(Ae)).subtract(Ee.multiply(oe)).multiply(te.z).add(oe.multiply(Ae)).mod(this.curve.q),Ie=Ae.multiply(this.z).multiply(te.z).mod(this.curve.q);return new U(this.curve,this.curve.fromBigInteger(ke),this.curve.fromBigInteger(Se),Ie)}function ce(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var te=new E("3"),oe=this.x.toBigInteger(),le=this.y.toBigInteger(),he=le.multiply(this.z),ae=he.multiply(le).mod(this.curve.q),Q=this.curve.a.toBigInteger(),se=oe.square().multiply(te);E.ZERO.equals(Q)||(se=se.add(this.z.square().multiply(Q))),se=se.mod(this.curve.q);var Ae=se.square().subtract(oe.shiftLeft(3).multiply(ae)).shiftLeft(1).multiply(he).mod(this.curve.q),ge=se.multiply(te).multiply(oe).subtract(ae.shiftLeft(1)).shiftLeft(2).multiply(ae).subtract(se.square().multiply(se)).mod(this.curve.q),Ee=he.square().multiply(he).shiftLeft(3).mod(this.curve.q);return new U(this.curve,this.curve.fromBigInteger(Ae),this.curve.fromBigInteger(ge),Ee)}function fe(te){if(this.isInfinity())return this;if(te.signum()==0)return this.curve.getInfinity();var oe=te,le=oe.multiply(new E("3")),he=this.negate(),ae=this,Q;for(Q=le.bitLength()-2;Q>0;--Q){ae=ae.twice();var se=le.testBit(Q),Ae=oe.testBit(Q);se!=Ae&&(ae=ae.add(se?this:he))}return ae}function de(te,oe,le){var he;te.bitLength()>le.bitLength()?he=te.bitLength()-1:he=le.bitLength()-1;for(var ae=this.curve.getInfinity(),Q=this.add(oe);he>=0;)ae=ae.twice(),te.testBit(he)?le.testBit(he)?ae=ae.add(Q):ae=ae.add(this):le.testBit(he)&&(ae=ae.add(oe)),--he;return ae}U.prototype.getX=V,U.prototype.getY=K,U.prototype.equals=J,U.prototype.isInfinity=ee,U.prototype.negate=ie,U.prototype.add=ne,U.prototype.twice=ce,U.prototype.multiply=fe,U.prototype.multiplyTwo=de;function pe(te,oe,le){this.q=te,this.a=this.fromBigInteger(oe),this.b=this.fromBigInteger(le),this.infinity=new U(this,null,null),this.reducer=new A(this.q)}function ve(){return this.q}function ye(){return this.a}function _e(){return this.b}function be(te){return te==this?!0:this.q.equals(te.q)&&this.a.equals(te.a)&&this.b.equals(te.b)}function Te(){return this.infinity}function ue(te){return new _(this.q,te)}function O(te){this.reducer.reduce(te)}function z(te){if(te.isInfinity())return"00";var oe=te.getX().toBigInteger().toString(16),le=te.getY().toBigInteger().toString(16),he=this.getQ().toString(16).length;for(he%2!=0&&he++;oe.length<he;)oe="0"+oe;for(;le.length<he;)le="0"+le;return"04"+oe+le}pe.prototype.getQ=ve,pe.prototype.getA=ye,pe.prototype.getB=_e,pe.prototype.equals=be,pe.prototype.getInfinity=Te,pe.prototype.fromBigInteger=ue,pe.prototype.reduce=O,pe.prototype.encodePointHex=z,pe.prototype.decodePointHex=function(te){var oe;switch(parseInt(te.substr(0,2),16)){case 0:return this.infinity;case 2:oe=!1;case 3:oe==null&&(oe=!0);var se=te.length-2,Ae=te.substr(2,se),le=this.fromBigInteger(new E(Ae,16)),he=le.multiply(le.square().add(this.getA())).add(this.getB()),ae=he.sqrt();if(ae==null)throw"Invalid point compression";var Q=ae.toBigInteger();return Q.testBit(0)!=oe&&(ae=this.fromBigInteger(this.getQ().subtract(Q))),new U(this,le,ae);case 4:case 6:case 7:var se=(te.length-2)/2,Ae=te.substr(2,se),ge=te.substr(se+2,se);return new U(this,this.fromBigInteger(new E(Ae,16)),this.fromBigInteger(new E(ge,16)));default:return null}},pe.prototype.encodeCompressedPointHex=function(te){if(te.isInfinity())return"00";var oe=te.getX().toBigInteger().toString(16),le=this.getQ().toString(16).length;for(le%2!=0&&le++;oe.length<le;)oe="0"+oe;var he;return te.getY().toBigInteger().isEven()?he="02":he="03",he+oe},_.prototype.getR=function(){if(this.r!=null)return this.r;this.r=null;var te=this.q.bitLength();if(te>128){var oe=this.q.shiftRight(te-64);oe.intValue()==-1&&(this.r=E.ONE.shiftLeft(te).subtract(this.q))}return this.r},_.prototype.modMult=function(te,oe){return this.modReduce(te.multiply(oe))},_.prototype.modReduce=function(te){if(this.getR()!=null){for(var oe=q.bitLength();te.bitLength()>oe+1;){var le=te.shiftRight(oe),he=te.subtract(le.shiftLeft(oe));this.getR().equals(E.ONE)||(le=le.multiply(this.getR())),te=le.add(he)}for(;te.compareTo(q)>=0;)te=te.subtract(q)}else te=te.mod(q);return te},_.prototype.sqrt=function(){if(!this.q.testBit(0))throw"unsupported";if(this.q.testBit(1)){var te=new _(this.q,this.x.modPow(this.q.shiftRight(2).add(E.ONE),this.q));return te.square().equals(this)?te:null}var oe=this.q.subtract(E.ONE),le=oe.shiftRight(1);if(!this.x.modPow(le,this.q).equals(E.ONE))return null;var he=oe.shiftRight(2),ae=he.shiftLeft(1).add(E.ONE),Q=this.x,se=modDouble(modDouble(Q)),Ae,ge;do{var Ee;do Ee=new E(this.q.bitLength(),new SecureRandom);while(Ee.compareTo(this.q)>=0||!Ee.multiply(Ee).subtract(se).modPow(le,this.q).equals(oe));var ke=this.lucasSequence(Ee,Q,ae);if(Ae=ke[0],ge=ke[1],this.modMult(ge,ge).equals(se))return ge.testBit(0)&&(ge=ge.add(q)),ge=ge.shiftRight(1),new _(q,ge)}while(Ae.equals(E.ONE)||Ae.equals(oe));return null},_.prototype.lucasSequence=function(te,oe,le){for(var he=le.bitLength(),ae=le.getLowestSetBit(),Q=E.ONE,se=E.TWO,Ae=te,ge=E.ONE,Ee=E.ONE,ke=he-1;ke>=ae+1;--ke)ge=this.modMult(ge,Ee),le.testBit(ke)?(Ee=this.modMult(ge,oe),Q=this.modMult(Q,Ae),se=this.modReduce(Ae.multiply(se).subtract(te.multiply(ge))),Ae=this.modReduce(Ae.multiply(Ae).subtract(Ee.shiftLeft(1)))):(Ee=ge,Q=this.modReduce(Q.multiply(se).subtract(ge)),Ae=this.modReduce(Ae.multiply(se).subtract(te.multiply(ge))),se=this.modReduce(se.multiply(se).subtract(ge.shiftLeft(1))));ge=this.modMult(ge,Ee),Ee=this.modMult(ge,oe),Q=this.modReduce(Q.multiply(se).subtract(ge)),se=this.modReduce(Ae.multiply(se).subtract(te.multiply(ge))),ge=this.modMult(ge,Ee);for(var ke=1;ke<=ae;++ke)Q=this.modMult(Q,se),se=this.modReduce(se.multiply(se).subtract(ge.shiftLeft(1))),ge=this.modMult(ge,ge);return[Q,se]};var Y={ECCurveFp:pe,ECPointFp:U,ECFieldElementFp:_};return ec=Y,ec}var naclFast={exports:{}},hasRequiredNaclFast;function requireNaclFast(){return hasRequiredNaclFast||(hasRequiredNaclFast=1,(function(E){(function(A){var _=function(Qe){var Re,Pe=new Float64Array(16);if(Qe)for(Re=0;Re<Qe.length;Re++)Pe[Re]=Qe[Re];return Pe},I=function(){throw new Error("no PRNG")},B=new Uint8Array(16),T=new Uint8Array(32);T[0]=9;var R=_(),P=_([1]),D=_([56129,1]),F=_([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),L=_([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),U=_([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),V=_([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),K=_([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function J(Qe,Re,Pe,Me){Qe[Re]=Pe>>24&255,Qe[Re+1]=Pe>>16&255,Qe[Re+2]=Pe>>8&255,Qe[Re+3]=Pe&255,Qe[Re+4]=Me>>24&255,Qe[Re+5]=Me>>16&255,Qe[Re+6]=Me>>8&255,Qe[Re+7]=Me&255}function ee(Qe,Re,Pe,Me,$e){var it,kt=0;for(it=0;it<$e;it++)kt|=Qe[Re+it]^Pe[Me+it];return(1&kt-1>>>8)-1}function ie(Qe,Re,Pe,Me){return ee(Qe,Re,Pe,Me,16)}function ne(Qe,Re,Pe,Me){return ee(Qe,Re,Pe,Me,32)}function ce(Qe,Re,Pe,Me){for(var $e=Me[0]&255|(Me[1]&255)<<8|(Me[2]&255)<<16|(Me[3]&255)<<24,it=Pe[0]&255|(Pe[1]&255)<<8|(Pe[2]&255)<<16|(Pe[3]&255)<<24,kt=Pe[4]&255|(Pe[5]&255)<<8|(Pe[6]&255)<<16|(Pe[7]&255)<<24,xt=Pe[8]&255|(Pe[9]&255)<<8|(Pe[10]&255)<<16|(Pe[11]&255)<<24,Ot=Pe[12]&255|(Pe[13]&255)<<8|(Pe[14]&255)<<16|(Pe[15]&255)<<24,Jt=Me[4]&255|(Me[5]&255)<<8|(Me[6]&255)<<16|(Me[7]&255)<<24,tr=Re[0]&255|(Re[1]&255)<<8|(Re[2]&255)<<16|(Re[3]&255)<<24,br=Re[4]&255|(Re[5]&255)<<8|(Re[6]&255)<<16|(Re[7]&255)<<24,ar=Re[8]&255|(Re[9]&255)<<8|(Re[10]&255)<<16|(Re[11]&255)<<24,_r=Re[12]&255|(Re[13]&255)<<8|(Re[14]&255)<<16|(Re[15]&255)<<24,or=Me[8]&255|(Me[9]&255)<<8|(Me[10]&255)<<16|(Me[11]&255)<<24,gr=Pe[16]&255|(Pe[17]&255)<<8|(Pe[18]&255)<<16|(Pe[19]&255)<<24,xr=Pe[20]&255|(Pe[21]&255)<<8|(Pe[22]&255)<<16|(Pe[23]&255)<<24,vr=Pe[24]&255|(Pe[25]&255)<<8|(Pe[26]&255)<<16|(Pe[27]&255)<<24,Cr=Pe[28]&255|(Pe[29]&255)<<8|(Pe[30]&255)<<16|(Pe[31]&255)<<24,Sr=Me[12]&255|(Me[13]&255)<<8|(Me[14]&255)<<16|(Me[15]&255)<<24,dr=$e,wr=it,fr=kt,hr=xt,Ar=Ot,ur=Jt,zt=tr,Kt=br,lr=ar,ot=_r,ut=or,Bt=gr,Lt=xr,$t=vr,Zt=Cr,Vt=Sr,Et,sr=0;sr<20;sr+=2)Et=dr+Lt|0,Ar^=Et<<7|Et>>>25,Et=Ar+dr|0,lr^=Et<<9|Et>>>23,Et=lr+Ar|0,Lt^=Et<<13|Et>>>19,Et=Lt+lr|0,dr^=Et<<18|Et>>>14,Et=ur+wr|0,ot^=Et<<7|Et>>>25,Et=ot+ur|0,$t^=Et<<9|Et>>>23,Et=$t+ot|0,wr^=Et<<13|Et>>>19,Et=wr+$t|0,ur^=Et<<18|Et>>>14,Et=ut+zt|0,Zt^=Et<<7|Et>>>25,Et=Zt+ut|0,fr^=Et<<9|Et>>>23,Et=fr+Zt|0,zt^=Et<<13|Et>>>19,Et=zt+fr|0,ut^=Et<<18|Et>>>14,Et=Vt+Bt|0,hr^=Et<<7|Et>>>25,Et=hr+Vt|0,Kt^=Et<<9|Et>>>23,Et=Kt+hr|0,Bt^=Et<<13|Et>>>19,Et=Bt+Kt|0,Vt^=Et<<18|Et>>>14,Et=dr+hr|0,wr^=Et<<7|Et>>>25,Et=wr+dr|0,fr^=Et<<9|Et>>>23,Et=fr+wr|0,hr^=Et<<13|Et>>>19,Et=hr+fr|0,dr^=Et<<18|Et>>>14,Et=ur+Ar|0,zt^=Et<<7|Et>>>25,Et=zt+ur|0,Kt^=Et<<9|Et>>>23,Et=Kt+zt|0,Ar^=Et<<13|Et>>>19,Et=Ar+Kt|0,ur^=Et<<18|Et>>>14,Et=ut+ot|0,Bt^=Et<<7|Et>>>25,Et=Bt+ut|0,lr^=Et<<9|Et>>>23,Et=lr+Bt|0,ot^=Et<<13|Et>>>19,Et=ot+lr|0,ut^=Et<<18|Et>>>14,Et=Vt+Zt|0,Lt^=Et<<7|Et>>>25,Et=Lt+Vt|0,$t^=Et<<9|Et>>>23,Et=$t+Lt|0,Zt^=Et<<13|Et>>>19,Et=Zt+$t|0,Vt^=Et<<18|Et>>>14;dr=dr+$e|0,wr=wr+it|0,fr=fr+kt|0,hr=hr+xt|0,Ar=Ar+Ot|0,ur=ur+Jt|0,zt=zt+tr|0,Kt=Kt+br|0,lr=lr+ar|0,ot=ot+_r|0,ut=ut+or|0,Bt=Bt+gr|0,Lt=Lt+xr|0,$t=$t+vr|0,Zt=Zt+Cr|0,Vt=Vt+Sr|0,Qe[0]=dr>>>0&255,Qe[1]=dr>>>8&255,Qe[2]=dr>>>16&255,Qe[3]=dr>>>24&255,Qe[4]=wr>>>0&255,Qe[5]=wr>>>8&255,Qe[6]=wr>>>16&255,Qe[7]=wr>>>24&255,Qe[8]=fr>>>0&255,Qe[9]=fr>>>8&255,Qe[10]=fr>>>16&255,Qe[11]=fr>>>24&255,Qe[12]=hr>>>0&255,Qe[13]=hr>>>8&255,Qe[14]=hr>>>16&255,Qe[15]=hr>>>24&255,Qe[16]=Ar>>>0&255,Qe[17]=Ar>>>8&255,Qe[18]=Ar>>>16&255,Qe[19]=Ar>>>24&255,Qe[20]=ur>>>0&255,Qe[21]=ur>>>8&255,Qe[22]=ur>>>16&255,Qe[23]=ur>>>24&255,Qe[24]=zt>>>0&255,Qe[25]=zt>>>8&255,Qe[26]=zt>>>16&255,Qe[27]=zt>>>24&255,Qe[28]=Kt>>>0&255,Qe[29]=Kt>>>8&255,Qe[30]=Kt>>>16&255,Qe[31]=Kt>>>24&255,Qe[32]=lr>>>0&255,Qe[33]=lr>>>8&255,Qe[34]=lr>>>16&255,Qe[35]=lr>>>24&255,Qe[36]=ot>>>0&255,Qe[37]=ot>>>8&255,Qe[38]=ot>>>16&255,Qe[39]=ot>>>24&255,Qe[40]=ut>>>0&255,Qe[41]=ut>>>8&255,Qe[42]=ut>>>16&255,Qe[43]=ut>>>24&255,Qe[44]=Bt>>>0&255,Qe[45]=Bt>>>8&255,Qe[46]=Bt>>>16&255,Qe[47]=Bt>>>24&255,Qe[48]=Lt>>>0&255,Qe[49]=Lt>>>8&255,Qe[50]=Lt>>>16&255,Qe[51]=Lt>>>24&255,Qe[52]=$t>>>0&255,Qe[53]=$t>>>8&255,Qe[54]=$t>>>16&255,Qe[55]=$t>>>24&255,Qe[56]=Zt>>>0&255,Qe[57]=Zt>>>8&255,Qe[58]=Zt>>>16&255,Qe[59]=Zt>>>24&255,Qe[60]=Vt>>>0&255,Qe[61]=Vt>>>8&255,Qe[62]=Vt>>>16&255,Qe[63]=Vt>>>24&255}function fe(Qe,Re,Pe,Me){for(var $e=Me[0]&255|(Me[1]&255)<<8|(Me[2]&255)<<16|(Me[3]&255)<<24,it=Pe[0]&255|(Pe[1]&255)<<8|(Pe[2]&255)<<16|(Pe[3]&255)<<24,kt=Pe[4]&255|(Pe[5]&255)<<8|(Pe[6]&255)<<16|(Pe[7]&255)<<24,xt=Pe[8]&255|(Pe[9]&255)<<8|(Pe[10]&255)<<16|(Pe[11]&255)<<24,Ot=Pe[12]&255|(Pe[13]&255)<<8|(Pe[14]&255)<<16|(Pe[15]&255)<<24,Jt=Me[4]&255|(Me[5]&255)<<8|(Me[6]&255)<<16|(Me[7]&255)<<24,tr=Re[0]&255|(Re[1]&255)<<8|(Re[2]&255)<<16|(Re[3]&255)<<24,br=Re[4]&255|(Re[5]&255)<<8|(Re[6]&255)<<16|(Re[7]&255)<<24,ar=Re[8]&255|(Re[9]&255)<<8|(Re[10]&255)<<16|(Re[11]&255)<<24,_r=Re[12]&255|(Re[13]&255)<<8|(Re[14]&255)<<16|(Re[15]&255)<<24,or=Me[8]&255|(Me[9]&255)<<8|(Me[10]&255)<<16|(Me[11]&255)<<24,gr=Pe[16]&255|(Pe[17]&255)<<8|(Pe[18]&255)<<16|(Pe[19]&255)<<24,xr=Pe[20]&255|(Pe[21]&255)<<8|(Pe[22]&255)<<16|(Pe[23]&255)<<24,vr=Pe[24]&255|(Pe[25]&255)<<8|(Pe[26]&255)<<16|(Pe[27]&255)<<24,Cr=Pe[28]&255|(Pe[29]&255)<<8|(Pe[30]&255)<<16|(Pe[31]&255)<<24,Sr=Me[12]&255|(Me[13]&255)<<8|(Me[14]&255)<<16|(Me[15]&255)<<24,dr=$e,wr=it,fr=kt,hr=xt,Ar=Ot,ur=Jt,zt=tr,Kt=br,lr=ar,ot=_r,ut=or,Bt=gr,Lt=xr,$t=vr,Zt=Cr,Vt=Sr,Et,sr=0;sr<20;sr+=2)Et=dr+Lt|0,Ar^=Et<<7|Et>>>25,Et=Ar+dr|0,lr^=Et<<9|Et>>>23,Et=lr+Ar|0,Lt^=Et<<13|Et>>>19,Et=Lt+lr|0,dr^=Et<<18|Et>>>14,Et=ur+wr|0,ot^=Et<<7|Et>>>25,Et=ot+ur|0,$t^=Et<<9|Et>>>23,Et=$t+ot|0,wr^=Et<<13|Et>>>19,Et=wr+$t|0,ur^=Et<<18|Et>>>14,Et=ut+zt|0,Zt^=Et<<7|Et>>>25,Et=Zt+ut|0,fr^=Et<<9|Et>>>23,Et=fr+Zt|0,zt^=Et<<13|Et>>>19,Et=zt+fr|0,ut^=Et<<18|Et>>>14,Et=Vt+Bt|0,hr^=Et<<7|Et>>>25,Et=hr+Vt|0,Kt^=Et<<9|Et>>>23,Et=Kt+hr|0,Bt^=Et<<13|Et>>>19,Et=Bt+Kt|0,Vt^=Et<<18|Et>>>14,Et=dr+hr|0,wr^=Et<<7|Et>>>25,Et=wr+dr|0,fr^=Et<<9|Et>>>23,Et=fr+wr|0,hr^=Et<<13|Et>>>19,Et=hr+fr|0,dr^=Et<<18|Et>>>14,Et=ur+Ar|0,zt^=Et<<7|Et>>>25,Et=zt+ur|0,Kt^=Et<<9|Et>>>23,Et=Kt+zt|0,Ar^=Et<<13|Et>>>19,Et=Ar+Kt|0,ur^=Et<<18|Et>>>14,Et=ut+ot|0,Bt^=Et<<7|Et>>>25,Et=Bt+ut|0,lr^=Et<<9|Et>>>23,Et=lr+Bt|0,ot^=Et<<13|Et>>>19,Et=ot+lr|0,ut^=Et<<18|Et>>>14,Et=Vt+Zt|0,Lt^=Et<<7|Et>>>25,Et=Lt+Vt|0,$t^=Et<<9|Et>>>23,Et=$t+Lt|0,Zt^=Et<<13|Et>>>19,Et=Zt+$t|0,Vt^=Et<<18|Et>>>14;Qe[0]=dr>>>0&255,Qe[1]=dr>>>8&255,Qe[2]=dr>>>16&255,Qe[3]=dr>>>24&255,Qe[4]=ur>>>0&255,Qe[5]=ur>>>8&255,Qe[6]=ur>>>16&255,Qe[7]=ur>>>24&255,Qe[8]=ut>>>0&255,Qe[9]=ut>>>8&255,Qe[10]=ut>>>16&255,Qe[11]=ut>>>24&255,Qe[12]=Vt>>>0&255,Qe[13]=Vt>>>8&255,Qe[14]=Vt>>>16&255,Qe[15]=Vt>>>24&255,Qe[16]=zt>>>0&255,Qe[17]=zt>>>8&255,Qe[18]=zt>>>16&255,Qe[19]=zt>>>24&255,Qe[20]=Kt>>>0&255,Qe[21]=Kt>>>8&255,Qe[22]=Kt>>>16&255,Qe[23]=Kt>>>24&255,Qe[24]=lr>>>0&255,Qe[25]=lr>>>8&255,Qe[26]=lr>>>16&255,Qe[27]=lr>>>24&255,Qe[28]=ot>>>0&255,Qe[29]=ot>>>8&255,Qe[30]=ot>>>16&255,Qe[31]=ot>>>24&255}function de(Qe,Re,Pe,Me){ce(Qe,Re,Pe,Me)}function pe(Qe,Re,Pe,Me){fe(Qe,Re,Pe,Me)}var ve=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function ye(Qe,Re,Pe,Me,$e,it,kt){var xt=new Uint8Array(16),Ot=new Uint8Array(64),Jt,tr;for(tr=0;tr<16;tr++)xt[tr]=0;for(tr=0;tr<8;tr++)xt[tr]=it[tr];for(;$e>=64;){for(de(Ot,xt,kt,ve),tr=0;tr<64;tr++)Qe[Re+tr]=Pe[Me+tr]^Ot[tr];for(Jt=1,tr=8;tr<16;tr++)Jt=Jt+(xt[tr]&255)|0,xt[tr]=Jt&255,Jt>>>=8;$e-=64,Re+=64,Me+=64}if($e>0)for(de(Ot,xt,kt,ve),tr=0;tr<$e;tr++)Qe[Re+tr]=Pe[Me+tr]^Ot[tr];return 0}function _e(Qe,Re,Pe,Me,$e){var it=new Uint8Array(16),kt=new Uint8Array(64),xt,Ot;for(Ot=0;Ot<16;Ot++)it[Ot]=0;for(Ot=0;Ot<8;Ot++)it[Ot]=Me[Ot];for(;Pe>=64;){for(de(kt,it,$e,ve),Ot=0;Ot<64;Ot++)Qe[Re+Ot]=kt[Ot];for(xt=1,Ot=8;Ot<16;Ot++)xt=xt+(it[Ot]&255)|0,it[Ot]=xt&255,xt>>>=8;Pe-=64,Re+=64}if(Pe>0)for(de(kt,it,$e,ve),Ot=0;Ot<Pe;Ot++)Qe[Re+Ot]=kt[Ot];return 0}function be(Qe,Re,Pe,Me,$e){var it=new Uint8Array(32);pe(it,Me,$e,ve);for(var kt=new Uint8Array(8),xt=0;xt<8;xt++)kt[xt]=Me[xt+16];return _e(Qe,Re,Pe,kt,it)}function Te(Qe,Re,Pe,Me,$e,it,kt){var xt=new Uint8Array(32);pe(xt,it,kt,ve);for(var Ot=new Uint8Array(8),Jt=0;Jt<8;Jt++)Ot[Jt]=it[Jt+16];return ye(Qe,Re,Pe,Me,$e,Ot,xt)}var ue=function(Qe){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var Re,Pe,Me,$e,it,kt,xt,Ot;Re=Qe[0]&255|(Qe[1]&255)<<8,this.r[0]=Re&8191,Pe=Qe[2]&255|(Qe[3]&255)<<8,this.r[1]=(Re>>>13|Pe<<3)&8191,Me=Qe[4]&255|(Qe[5]&255)<<8,this.r[2]=(Pe>>>10|Me<<6)&7939,$e=Qe[6]&255|(Qe[7]&255)<<8,this.r[3]=(Me>>>7|$e<<9)&8191,it=Qe[8]&255|(Qe[9]&255)<<8,this.r[4]=($e>>>4|it<<12)&255,this.r[5]=it>>>1&8190,kt=Qe[10]&255|(Qe[11]&255)<<8,this.r[6]=(it>>>14|kt<<2)&8191,xt=Qe[12]&255|(Qe[13]&255)<<8,this.r[7]=(kt>>>11|xt<<5)&8065,Ot=Qe[14]&255|(Qe[15]&255)<<8,this.r[8]=(xt>>>8|Ot<<8)&8191,this.r[9]=Ot>>>5&127,this.pad[0]=Qe[16]&255|(Qe[17]&255)<<8,this.pad[1]=Qe[18]&255|(Qe[19]&255)<<8,this.pad[2]=Qe[20]&255|(Qe[21]&255)<<8,this.pad[3]=Qe[22]&255|(Qe[23]&255)<<8,this.pad[4]=Qe[24]&255|(Qe[25]&255)<<8,this.pad[5]=Qe[26]&255|(Qe[27]&255)<<8,this.pad[6]=Qe[28]&255|(Qe[29]&255)<<8,this.pad[7]=Qe[30]&255|(Qe[31]&255)<<8};ue.prototype.blocks=function(Qe,Re,Pe){for(var Me=this.fin?0:2048,$e,it,kt,xt,Ot,Jt,tr,br,ar,_r,or,gr,xr,vr,Cr,Sr,dr,wr,fr,hr=this.h[0],Ar=this.h[1],ur=this.h[2],zt=this.h[3],Kt=this.h[4],lr=this.h[5],ot=this.h[6],ut=this.h[7],Bt=this.h[8],Lt=this.h[9],$t=this.r[0],Zt=this.r[1],Vt=this.r[2],Et=this.r[3],sr=this.r[4],cr=this.r[5],yr=this.r[6],Er=this.r[7],ct=this.r[8],Be=this.r[9];Pe>=16;)$e=Qe[Re+0]&255|(Qe[Re+1]&255)<<8,hr+=$e&8191,it=Qe[Re+2]&255|(Qe[Re+3]&255)<<8,Ar+=($e>>>13|it<<3)&8191,kt=Qe[Re+4]&255|(Qe[Re+5]&255)<<8,ur+=(it>>>10|kt<<6)&8191,xt=Qe[Re+6]&255|(Qe[Re+7]&255)<<8,zt+=(kt>>>7|xt<<9)&8191,Ot=Qe[Re+8]&255|(Qe[Re+9]&255)<<8,Kt+=(xt>>>4|Ot<<12)&8191,lr+=Ot>>>1&8191,Jt=Qe[Re+10]&255|(Qe[Re+11]&255)<<8,ot+=(Ot>>>14|Jt<<2)&8191,tr=Qe[Re+12]&255|(Qe[Re+13]&255)<<8,ut+=(Jt>>>11|tr<<5)&8191,br=Qe[Re+14]&255|(Qe[Re+15]&255)<<8,Bt+=(tr>>>8|br<<8)&8191,Lt+=br>>>5|Me,ar=0,_r=ar,_r+=hr*$t,_r+=Ar*(5*Be),_r+=ur*(5*ct),_r+=zt*(5*Er),_r+=Kt*(5*yr),ar=_r>>>13,_r&=8191,_r+=lr*(5*cr),_r+=ot*(5*sr),_r+=ut*(5*Et),_r+=Bt*(5*Vt),_r+=Lt*(5*Zt),ar+=_r>>>13,_r&=8191,or=ar,or+=hr*Zt,or+=Ar*$t,or+=ur*(5*Be),or+=zt*(5*ct),or+=Kt*(5*Er),ar=or>>>13,or&=8191,or+=lr*(5*yr),or+=ot*(5*cr),or+=ut*(5*sr),or+=Bt*(5*Et),or+=Lt*(5*Vt),ar+=or>>>13,or&=8191,gr=ar,gr+=hr*Vt,gr+=Ar*Zt,gr+=ur*$t,gr+=zt*(5*Be),gr+=Kt*(5*ct),ar=gr>>>13,gr&=8191,gr+=lr*(5*Er),gr+=ot*(5*yr),gr+=ut*(5*cr),gr+=Bt*(5*sr),gr+=Lt*(5*Et),ar+=gr>>>13,gr&=8191,xr=ar,xr+=hr*Et,xr+=Ar*Vt,xr+=ur*Zt,xr+=zt*$t,xr+=Kt*(5*Be),ar=xr>>>13,xr&=8191,xr+=lr*(5*ct),xr+=ot*(5*Er),xr+=ut*(5*yr),xr+=Bt*(5*cr),xr+=Lt*(5*sr),ar+=xr>>>13,xr&=8191,vr=ar,vr+=hr*sr,vr+=Ar*Et,vr+=ur*Vt,vr+=zt*Zt,vr+=Kt*$t,ar=vr>>>13,vr&=8191,vr+=lr*(5*Be),vr+=ot*(5*ct),vr+=ut*(5*Er),vr+=Bt*(5*yr),vr+=Lt*(5*cr),ar+=vr>>>13,vr&=8191,Cr=ar,Cr+=hr*cr,Cr+=Ar*sr,Cr+=ur*Et,Cr+=zt*Vt,Cr+=Kt*Zt,ar=Cr>>>13,Cr&=8191,Cr+=lr*$t,Cr+=ot*(5*Be),Cr+=ut*(5*ct),Cr+=Bt*(5*Er),Cr+=Lt*(5*yr),ar+=Cr>>>13,Cr&=8191,Sr=ar,Sr+=hr*yr,Sr+=Ar*cr,Sr+=ur*sr,Sr+=zt*Et,Sr+=Kt*Vt,ar=Sr>>>13,Sr&=8191,Sr+=lr*Zt,Sr+=ot*$t,Sr+=ut*(5*Be),Sr+=Bt*(5*ct),Sr+=Lt*(5*Er),ar+=Sr>>>13,Sr&=8191,dr=ar,dr+=hr*Er,dr+=Ar*yr,dr+=ur*cr,dr+=zt*sr,dr+=Kt*Et,ar=dr>>>13,dr&=8191,dr+=lr*Vt,dr+=ot*Zt,dr+=ut*$t,dr+=Bt*(5*Be),dr+=Lt*(5*ct),ar+=dr>>>13,dr&=8191,wr=ar,wr+=hr*ct,wr+=Ar*Er,wr+=ur*yr,wr+=zt*cr,wr+=Kt*sr,ar=wr>>>13,wr&=8191,wr+=lr*Et,wr+=ot*Vt,wr+=ut*Zt,wr+=Bt*$t,wr+=Lt*(5*Be),ar+=wr>>>13,wr&=8191,fr=ar,fr+=hr*Be,fr+=Ar*ct,fr+=ur*Er,fr+=zt*yr,fr+=Kt*cr,ar=fr>>>13,fr&=8191,fr+=lr*sr,fr+=ot*Et,fr+=ut*Vt,fr+=Bt*Zt,fr+=Lt*$t,ar+=fr>>>13,fr&=8191,ar=(ar<<2)+ar|0,ar=ar+_r|0,_r=ar&8191,ar=ar>>>13,or+=ar,hr=_r,Ar=or,ur=gr,zt=xr,Kt=vr,lr=Cr,ot=Sr,ut=dr,Bt=wr,Lt=fr,Re+=16,Pe-=16;this.h[0]=hr,this.h[1]=Ar,this.h[2]=ur,this.h[3]=zt,this.h[4]=Kt,this.h[5]=lr,this.h[6]=ot,this.h[7]=ut,this.h[8]=Bt,this.h[9]=Lt},ue.prototype.finish=function(Qe,Re){var Pe=new Uint16Array(10),Me,$e,it,kt;if(this.leftover){for(kt=this.leftover,this.buffer[kt++]=1;kt<16;kt++)this.buffer[kt]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(Me=this.h[1]>>>13,this.h[1]&=8191,kt=2;kt<10;kt++)this.h[kt]+=Me,Me=this.h[kt]>>>13,this.h[kt]&=8191;for(this.h[0]+=Me*5,Me=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=Me,Me=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=Me,Pe[0]=this.h[0]+5,Me=Pe[0]>>>13,Pe[0]&=8191,kt=1;kt<10;kt++)Pe[kt]=this.h[kt]+Me,Me=Pe[kt]>>>13,Pe[kt]&=8191;for(Pe[9]-=8192,$e=(Me^1)-1,kt=0;kt<10;kt++)Pe[kt]&=$e;for($e=~$e,kt=0;kt<10;kt++)this.h[kt]=this.h[kt]&$e|Pe[kt];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,it=this.h[0]+this.pad[0],this.h[0]=it&65535,kt=1;kt<8;kt++)it=(this.h[kt]+this.pad[kt]|0)+(it>>>16)|0,this.h[kt]=it&65535;Qe[Re+0]=this.h[0]>>>0&255,Qe[Re+1]=this.h[0]>>>8&255,Qe[Re+2]=this.h[1]>>>0&255,Qe[Re+3]=this.h[1]>>>8&255,Qe[Re+4]=this.h[2]>>>0&255,Qe[Re+5]=this.h[2]>>>8&255,Qe[Re+6]=this.h[3]>>>0&255,Qe[Re+7]=this.h[3]>>>8&255,Qe[Re+8]=this.h[4]>>>0&255,Qe[Re+9]=this.h[4]>>>8&255,Qe[Re+10]=this.h[5]>>>0&255,Qe[Re+11]=this.h[5]>>>8&255,Qe[Re+12]=this.h[6]>>>0&255,Qe[Re+13]=this.h[6]>>>8&255,Qe[Re+14]=this.h[7]>>>0&255,Qe[Re+15]=this.h[7]>>>8&255},ue.prototype.update=function(Qe,Re,Pe){var Me,$e;if(this.leftover){for($e=16-this.leftover,$e>Pe&&($e=Pe),Me=0;Me<$e;Me++)this.buffer[this.leftover+Me]=Qe[Re+Me];if(Pe-=$e,Re+=$e,this.leftover+=$e,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(Pe>=16&&($e=Pe-Pe%16,this.blocks(Qe,Re,$e),Re+=$e,Pe-=$e),Pe){for(Me=0;Me<Pe;Me++)this.buffer[this.leftover+Me]=Qe[Re+Me];this.leftover+=Pe}};function O(Qe,Re,Pe,Me,$e,it){var kt=new ue(it);return kt.update(Pe,Me,$e),kt.finish(Qe,Re),0}function z(Qe,Re,Pe,Me,$e,it){var kt=new Uint8Array(16);return O(kt,0,Pe,Me,$e,it),ie(Qe,Re,kt,0)}function Y(Qe,Re,Pe,Me,$e){var it;if(Pe<32)return-1;for(Te(Qe,0,Re,0,Pe,Me,$e),O(Qe,16,Qe,32,Pe-32,Qe),it=0;it<16;it++)Qe[it]=0;return 0}function te(Qe,Re,Pe,Me,$e){var it,kt=new Uint8Array(32);if(Pe<32||(be(kt,0,32,Me,$e),z(Re,16,Re,32,Pe-32,kt)!==0))return-1;for(Te(Qe,0,Re,0,Pe,Me,$e),it=0;it<32;it++)Qe[it]=0;return 0}function oe(Qe,Re){var Pe;for(Pe=0;Pe<16;Pe++)Qe[Pe]=Re[Pe]|0}function le(Qe){var Re,Pe,Me=1;for(Re=0;Re<16;Re++)Pe=Qe[Re]+Me+65535,Me=Math.floor(Pe/65536),Qe[Re]=Pe-Me*65536;Qe[0]+=Me-1+37*(Me-1)}function he(Qe,Re,Pe){for(var Me,$e=~(Pe-1),it=0;it<16;it++)Me=$e&(Qe[it]^Re[it]),Qe[it]^=Me,Re[it]^=Me}function ae(Qe,Re){var Pe,Me,$e,it=_(),kt=_();for(Pe=0;Pe<16;Pe++)kt[Pe]=Re[Pe];for(le(kt),le(kt),le(kt),Me=0;Me<2;Me++){for(it[0]=kt[0]-65517,Pe=1;Pe<15;Pe++)it[Pe]=kt[Pe]-65535-(it[Pe-1]>>16&1),it[Pe-1]&=65535;it[15]=kt[15]-32767-(it[14]>>16&1),$e=it[15]>>16&1,it[14]&=65535,he(kt,it,1-$e)}for(Pe=0;Pe<16;Pe++)Qe[2*Pe]=kt[Pe]&255,Qe[2*Pe+1]=kt[Pe]>>8}function Q(Qe,Re){var Pe=new Uint8Array(32),Me=new Uint8Array(32);return ae(Pe,Qe),ae(Me,Re),ne(Pe,0,Me,0)}function se(Qe){var Re=new Uint8Array(32);return ae(Re,Qe),Re[0]&1}function Ae(Qe,Re){var Pe;for(Pe=0;Pe<16;Pe++)Qe[Pe]=Re[2*Pe]+(Re[2*Pe+1]<<8);Qe[15]&=32767}function ge(Qe,Re,Pe){for(var Me=0;Me<16;Me++)Qe[Me]=Re[Me]+Pe[Me]}function Ee(Qe,Re,Pe){for(var Me=0;Me<16;Me++)Qe[Me]=Re[Me]-Pe[Me]}function ke(Qe,Re,Pe){var Me,$e,it=0,kt=0,xt=0,Ot=0,Jt=0,tr=0,br=0,ar=0,_r=0,or=0,gr=0,xr=0,vr=0,Cr=0,Sr=0,dr=0,wr=0,fr=0,hr=0,Ar=0,ur=0,zt=0,Kt=0,lr=0,ot=0,ut=0,Bt=0,Lt=0,$t=0,Zt=0,Vt=0,Et=Pe[0],sr=Pe[1],cr=Pe[2],yr=Pe[3],Er=Pe[4],ct=Pe[5],Be=Pe[6],Ue=Pe[7],tt=Pe[8],gt=Pe[9],je=Pe[10],Xe=Pe[11],lt=Pe[12],Ct=Pe[13],Qt=Pe[14],Ht=Pe[15];Me=Re[0],it+=Me*Et,kt+=Me*sr,xt+=Me*cr,Ot+=Me*yr,Jt+=Me*Er,tr+=Me*ct,br+=Me*Be,ar+=Me*Ue,_r+=Me*tt,or+=Me*gt,gr+=Me*je,xr+=Me*Xe,vr+=Me*lt,Cr+=Me*Ct,Sr+=Me*Qt,dr+=Me*Ht,Me=Re[1],kt+=Me*Et,xt+=Me*sr,Ot+=Me*cr,Jt+=Me*yr,tr+=Me*Er,br+=Me*ct,ar+=Me*Be,_r+=Me*Ue,or+=Me*tt,gr+=Me*gt,xr+=Me*je,vr+=Me*Xe,Cr+=Me*lt,Sr+=Me*Ct,dr+=Me*Qt,wr+=Me*Ht,Me=Re[2],xt+=Me*Et,Ot+=Me*sr,Jt+=Me*cr,tr+=Me*yr,br+=Me*Er,ar+=Me*ct,_r+=Me*Be,or+=Me*Ue,gr+=Me*tt,xr+=Me*gt,vr+=Me*je,Cr+=Me*Xe,Sr+=Me*lt,dr+=Me*Ct,wr+=Me*Qt,fr+=Me*Ht,Me=Re[3],Ot+=Me*Et,Jt+=Me*sr,tr+=Me*cr,br+=Me*yr,ar+=Me*Er,_r+=Me*ct,or+=Me*Be,gr+=Me*Ue,xr+=Me*tt,vr+=Me*gt,Cr+=Me*je,Sr+=Me*Xe,dr+=Me*lt,wr+=Me*Ct,fr+=Me*Qt,hr+=Me*Ht,Me=Re[4],Jt+=Me*Et,tr+=Me*sr,br+=Me*cr,ar+=Me*yr,_r+=Me*Er,or+=Me*ct,gr+=Me*Be,xr+=Me*Ue,vr+=Me*tt,Cr+=Me*gt,Sr+=Me*je,dr+=Me*Xe,wr+=Me*lt,fr+=Me*Ct,hr+=Me*Qt,Ar+=Me*Ht,Me=Re[5],tr+=Me*Et,br+=Me*sr,ar+=Me*cr,_r+=Me*yr,or+=Me*Er,gr+=Me*ct,xr+=Me*Be,vr+=Me*Ue,Cr+=Me*tt,Sr+=Me*gt,dr+=Me*je,wr+=Me*Xe,fr+=Me*lt,hr+=Me*Ct,Ar+=Me*Qt,ur+=Me*Ht,Me=Re[6],br+=Me*Et,ar+=Me*sr,_r+=Me*cr,or+=Me*yr,gr+=Me*Er,xr+=Me*ct,vr+=Me*Be,Cr+=Me*Ue,Sr+=Me*tt,dr+=Me*gt,wr+=Me*je,fr+=Me*Xe,hr+=Me*lt,Ar+=Me*Ct,ur+=Me*Qt,zt+=Me*Ht,Me=Re[7],ar+=Me*Et,_r+=Me*sr,or+=Me*cr,gr+=Me*yr,xr+=Me*Er,vr+=Me*ct,Cr+=Me*Be,Sr+=Me*Ue,dr+=Me*tt,wr+=Me*gt,fr+=Me*je,hr+=Me*Xe,Ar+=Me*lt,ur+=Me*Ct,zt+=Me*Qt,Kt+=Me*Ht,Me=Re[8],_r+=Me*Et,or+=Me*sr,gr+=Me*cr,xr+=Me*yr,vr+=Me*Er,Cr+=Me*ct,Sr+=Me*Be,dr+=Me*Ue,wr+=Me*tt,fr+=Me*gt,hr+=Me*je,Ar+=Me*Xe,ur+=Me*lt,zt+=Me*Ct,Kt+=Me*Qt,lr+=Me*Ht,Me=Re[9],or+=Me*Et,gr+=Me*sr,xr+=Me*cr,vr+=Me*yr,Cr+=Me*Er,Sr+=Me*ct,dr+=Me*Be,wr+=Me*Ue,fr+=Me*tt,hr+=Me*gt,Ar+=Me*je,ur+=Me*Xe,zt+=Me*lt,Kt+=Me*Ct,lr+=Me*Qt,ot+=Me*Ht,Me=Re[10],gr+=Me*Et,xr+=Me*sr,vr+=Me*cr,Cr+=Me*yr,Sr+=Me*Er,dr+=Me*ct,wr+=Me*Be,fr+=Me*Ue,hr+=Me*tt,Ar+=Me*gt,ur+=Me*je,zt+=Me*Xe,Kt+=Me*lt,lr+=Me*Ct,ot+=Me*Qt,ut+=Me*Ht,Me=Re[11],xr+=Me*Et,vr+=Me*sr,Cr+=Me*cr,Sr+=Me*yr,dr+=Me*Er,wr+=Me*ct,fr+=Me*Be,hr+=Me*Ue,Ar+=Me*tt,ur+=Me*gt,zt+=Me*je,Kt+=Me*Xe,lr+=Me*lt,ot+=Me*Ct,ut+=Me*Qt,Bt+=Me*Ht,Me=Re[12],vr+=Me*Et,Cr+=Me*sr,Sr+=Me*cr,dr+=Me*yr,wr+=Me*Er,fr+=Me*ct,hr+=Me*Be,Ar+=Me*Ue,ur+=Me*tt,zt+=Me*gt,Kt+=Me*je,lr+=Me*Xe,ot+=Me*lt,ut+=Me*Ct,Bt+=Me*Qt,Lt+=Me*Ht,Me=Re[13],Cr+=Me*Et,Sr+=Me*sr,dr+=Me*cr,wr+=Me*yr,fr+=Me*Er,hr+=Me*ct,Ar+=Me*Be,ur+=Me*Ue,zt+=Me*tt,Kt+=Me*gt,lr+=Me*je,ot+=Me*Xe,ut+=Me*lt,Bt+=Me*Ct,Lt+=Me*Qt,$t+=Me*Ht,Me=Re[14],Sr+=Me*Et,dr+=Me*sr,wr+=Me*cr,fr+=Me*yr,hr+=Me*Er,Ar+=Me*ct,ur+=Me*Be,zt+=Me*Ue,Kt+=Me*tt,lr+=Me*gt,ot+=Me*je,ut+=Me*Xe,Bt+=Me*lt,Lt+=Me*Ct,$t+=Me*Qt,Zt+=Me*Ht,Me=Re[15],dr+=Me*Et,wr+=Me*sr,fr+=Me*cr,hr+=Me*yr,Ar+=Me*Er,ur+=Me*ct,zt+=Me*Be,Kt+=Me*Ue,lr+=Me*tt,ot+=Me*gt,ut+=Me*je,Bt+=Me*Xe,Lt+=Me*lt,$t+=Me*Ct,Zt+=Me*Qt,Vt+=Me*Ht,it+=38*wr,kt+=38*fr,xt+=38*hr,Ot+=38*Ar,Jt+=38*ur,tr+=38*zt,br+=38*Kt,ar+=38*lr,_r+=38*ot,or+=38*ut,gr+=38*Bt,xr+=38*Lt,vr+=38*$t,Cr+=38*Zt,Sr+=38*Vt,$e=1,Me=it+$e+65535,$e=Math.floor(Me/65536),it=Me-$e*65536,Me=kt+$e+65535,$e=Math.floor(Me/65536),kt=Me-$e*65536,Me=xt+$e+65535,$e=Math.floor(Me/65536),xt=Me-$e*65536,Me=Ot+$e+65535,$e=Math.floor(Me/65536),Ot=Me-$e*65536,Me=Jt+$e+65535,$e=Math.floor(Me/65536),Jt=Me-$e*65536,Me=tr+$e+65535,$e=Math.floor(Me/65536),tr=Me-$e*65536,Me=br+$e+65535,$e=Math.floor(Me/65536),br=Me-$e*65536,Me=ar+$e+65535,$e=Math.floor(Me/65536),ar=Me-$e*65536,Me=_r+$e+65535,$e=Math.floor(Me/65536),_r=Me-$e*65536,Me=or+$e+65535,$e=Math.floor(Me/65536),or=Me-$e*65536,Me=gr+$e+65535,$e=Math.floor(Me/65536),gr=Me-$e*65536,Me=xr+$e+65535,$e=Math.floor(Me/65536),xr=Me-$e*65536,Me=vr+$e+65535,$e=Math.floor(Me/65536),vr=Me-$e*65536,Me=Cr+$e+65535,$e=Math.floor(Me/65536),Cr=Me-$e*65536,Me=Sr+$e+65535,$e=Math.floor(Me/65536),Sr=Me-$e*65536,Me=dr+$e+65535,$e=Math.floor(Me/65536),dr=Me-$e*65536,it+=$e-1+37*($e-1),$e=1,Me=it+$e+65535,$e=Math.floor(Me/65536),it=Me-$e*65536,Me=kt+$e+65535,$e=Math.floor(Me/65536),kt=Me-$e*65536,Me=xt+$e+65535,$e=Math.floor(Me/65536),xt=Me-$e*65536,Me=Ot+$e+65535,$e=Math.floor(Me/65536),Ot=Me-$e*65536,Me=Jt+$e+65535,$e=Math.floor(Me/65536),Jt=Me-$e*65536,Me=tr+$e+65535,$e=Math.floor(Me/65536),tr=Me-$e*65536,Me=br+$e+65535,$e=Math.floor(Me/65536),br=Me-$e*65536,Me=ar+$e+65535,$e=Math.floor(Me/65536),ar=Me-$e*65536,Me=_r+$e+65535,$e=Math.floor(Me/65536),_r=Me-$e*65536,Me=or+$e+65535,$e=Math.floor(Me/65536),or=Me-$e*65536,Me=gr+$e+65535,$e=Math.floor(Me/65536),gr=Me-$e*65536,Me=xr+$e+65535,$e=Math.floor(Me/65536),xr=Me-$e*65536,Me=vr+$e+65535,$e=Math.floor(Me/65536),vr=Me-$e*65536,Me=Cr+$e+65535,$e=Math.floor(Me/65536),Cr=Me-$e*65536,Me=Sr+$e+65535,$e=Math.floor(Me/65536),Sr=Me-$e*65536,Me=dr+$e+65535,$e=Math.floor(Me/65536),dr=Me-$e*65536,it+=$e-1+37*($e-1),Qe[0]=it,Qe[1]=kt,Qe[2]=xt,Qe[3]=Ot,Qe[4]=Jt,Qe[5]=tr,Qe[6]=br,Qe[7]=ar,Qe[8]=_r,Qe[9]=or,Qe[10]=gr,Qe[11]=xr,Qe[12]=vr,Qe[13]=Cr,Qe[14]=Sr,Qe[15]=dr}function Se(Qe,Re){ke(Qe,Re,Re)}function Ie(Qe,Re){var Pe=_(),Me;for(Me=0;Me<16;Me++)Pe[Me]=Re[Me];for(Me=253;Me>=0;Me--)Se(Pe,Pe),Me!==2&&Me!==4&&ke(Pe,Pe,Re);for(Me=0;Me<16;Me++)Qe[Me]=Pe[Me]}function we(Qe,Re){var Pe=_(),Me;for(Me=0;Me<16;Me++)Pe[Me]=Re[Me];for(Me=250;Me>=0;Me--)Se(Pe,Pe),Me!==1&&ke(Pe,Pe,Re);for(Me=0;Me<16;Me++)Qe[Me]=Pe[Me]}function xe(Qe,Re,Pe){var Me=new Uint8Array(32),$e=new Float64Array(80),it,kt,xt=_(),Ot=_(),Jt=_(),tr=_(),br=_(),ar=_();for(kt=0;kt<31;kt++)Me[kt]=Re[kt];for(Me[31]=Re[31]&127|64,Me[0]&=248,Ae($e,Pe),kt=0;kt<16;kt++)Ot[kt]=$e[kt],tr[kt]=xt[kt]=Jt[kt]=0;for(xt[0]=tr[0]=1,kt=254;kt>=0;--kt)it=Me[kt>>>3]>>>(kt&7)&1,he(xt,Ot,it),he(Jt,tr,it),ge(br,xt,Jt),Ee(xt,xt,Jt),ge(Jt,Ot,tr),Ee(Ot,Ot,tr),Se(tr,br),Se(ar,xt),ke(xt,Jt,xt),ke(Jt,Ot,br),ge(br,xt,Jt),Ee(xt,xt,Jt),Se(Ot,xt),Ee(Jt,tr,ar),ke(xt,Jt,D),ge(xt,xt,tr),ke(Jt,Jt,xt),ke(xt,tr,ar),ke(tr,Ot,$e),Se(Ot,br),he(xt,Ot,it),he(Jt,tr,it);for(kt=0;kt<16;kt++)$e[kt+16]=xt[kt],$e[kt+32]=Jt[kt],$e[kt+48]=Ot[kt],$e[kt+64]=tr[kt];var _r=$e.subarray(32),or=$e.subarray(16);return Ie(_r,_r),ke(or,or,_r),ae(Qe,or),0}function Fe(Qe,Re){return xe(Qe,Re,T)}function Ge(Qe,Re){return I(Re,32),Fe(Qe,Re)}function Oe(Qe,Re,Pe){var Me=new Uint8Array(32);return xe(Me,Pe,Re),pe(Qe,B,Me,ve)}var et=Y,Mt=te;function dt(Qe,Re,Pe,Me,$e,it){var kt=new Uint8Array(32);return Oe(kt,$e,it),et(Qe,Re,Pe,Me,kt)}function mt(Qe,Re,Pe,Me,$e,it){var kt=new Uint8Array(32);return Oe(kt,$e,it),Mt(Qe,Re,Pe,Me,kt)}var Ut=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function St(Qe,Re,Pe,Me){for(var $e=new Int32Array(16),it=new Int32Array(16),kt,xt,Ot,Jt,tr,br,ar,_r,or,gr,xr,vr,Cr,Sr,dr,wr,fr,hr,Ar,ur,zt,Kt,lr,ot,ut,Bt,Lt=Qe[0],$t=Qe[1],Zt=Qe[2],Vt=Qe[3],Et=Qe[4],sr=Qe[5],cr=Qe[6],yr=Qe[7],Er=Re[0],ct=Re[1],Be=Re[2],Ue=Re[3],tt=Re[4],gt=Re[5],je=Re[6],Xe=Re[7],lt=0;Me>=128;){for(Ar=0;Ar<16;Ar++)ur=8*Ar+lt,$e[Ar]=Pe[ur+0]<<24|Pe[ur+1]<<16|Pe[ur+2]<<8|Pe[ur+3],it[Ar]=Pe[ur+4]<<24|Pe[ur+5]<<16|Pe[ur+6]<<8|Pe[ur+7];for(Ar=0;Ar<80;Ar++)if(kt=Lt,xt=$t,Ot=Zt,Jt=Vt,tr=Et,br=sr,ar=cr,_r=yr,or=Er,gr=ct,xr=Be,vr=Ue,Cr=tt,Sr=gt,dr=je,wr=Xe,zt=yr,Kt=Xe,lr=Kt&65535,ot=Kt>>>16,ut=zt&65535,Bt=zt>>>16,zt=(Et>>>14|tt<<18)^(Et>>>18|tt<<14)^(tt>>>9|Et<<23),Kt=(tt>>>14|Et<<18)^(tt>>>18|Et<<14)^(Et>>>9|tt<<23),lr+=Kt&65535,ot+=Kt>>>16,ut+=zt&65535,Bt+=zt>>>16,zt=Et&sr^~Et&cr,Kt=tt&gt^~tt&je,lr+=Kt&65535,ot+=Kt>>>16,ut+=zt&65535,Bt+=zt>>>16,zt=Ut[Ar*2],Kt=Ut[Ar*2+1],lr+=Kt&65535,ot+=Kt>>>16,ut+=zt&65535,Bt+=zt>>>16,zt=$e[Ar%16],Kt=it[Ar%16],lr+=Kt&65535,ot+=Kt>>>16,ut+=zt&65535,Bt+=zt>>>16,ot+=lr>>>16,ut+=ot>>>16,Bt+=ut>>>16,fr=ut&65535|Bt<<16,hr=lr&65535|ot<<16,zt=fr,Kt=hr,lr=Kt&65535,ot=Kt>>>16,ut=zt&65535,Bt=zt>>>16,zt=(Lt>>>28|Er<<4)^(Er>>>2|Lt<<30)^(Er>>>7|Lt<<25),Kt=(Er>>>28|Lt<<4)^(Lt>>>2|Er<<30)^(Lt>>>7|Er<<25),lr+=Kt&65535,ot+=Kt>>>16,ut+=zt&65535,Bt+=zt>>>16,zt=Lt&$t^Lt&Zt^$t&Zt,Kt=Er&ct^Er&Be^ct&Be,lr+=Kt&65535,ot+=Kt>>>16,ut+=zt&65535,Bt+=zt>>>16,ot+=lr>>>16,ut+=ot>>>16,Bt+=ut>>>16,_r=ut&65535|Bt<<16,wr=lr&65535|ot<<16,zt=Jt,Kt=vr,lr=Kt&65535,ot=Kt>>>16,ut=zt&65535,Bt=zt>>>16,zt=fr,Kt=hr,lr+=Kt&65535,ot+=Kt>>>16,ut+=zt&65535,Bt+=zt>>>16,ot+=lr>>>16,ut+=ot>>>16,Bt+=ut>>>16,Jt=ut&65535|Bt<<16,vr=lr&65535|ot<<16,$t=kt,Zt=xt,Vt=Ot,Et=Jt,sr=tr,cr=br,yr=ar,Lt=_r,ct=or,Be=gr,Ue=xr,tt=vr,gt=Cr,je=Sr,Xe=dr,Er=wr,Ar%16===15)for(ur=0;ur<16;ur++)zt=$e[ur],Kt=it[ur],lr=Kt&65535,ot=Kt>>>16,ut=zt&65535,Bt=zt>>>16,zt=$e[(ur+9)%16],Kt=it[(ur+9)%16],lr+=Kt&65535,ot+=Kt>>>16,ut+=zt&65535,Bt+=zt>>>16,fr=$e[(ur+1)%16],hr=it[(ur+1)%16],zt=(fr>>>1|hr<<31)^(fr>>>8|hr<<24)^fr>>>7,Kt=(hr>>>1|fr<<31)^(hr>>>8|fr<<24)^(hr>>>7|fr<<25),lr+=Kt&65535,ot+=Kt>>>16,ut+=zt&65535,Bt+=zt>>>16,fr=$e[(ur+14)%16],hr=it[(ur+14)%16],zt=(fr>>>19|hr<<13)^(hr>>>29|fr<<3)^fr>>>6,Kt=(hr>>>19|fr<<13)^(fr>>>29|hr<<3)^(hr>>>6|fr<<26),lr+=Kt&65535,ot+=Kt>>>16,ut+=zt&65535,Bt+=zt>>>16,ot+=lr>>>16,ut+=ot>>>16,Bt+=ut>>>16,$e[ur]=ut&65535|Bt<<16,it[ur]=lr&65535|ot<<16;zt=Lt,Kt=Er,lr=Kt&65535,ot=Kt>>>16,ut=zt&65535,Bt=zt>>>16,zt=Qe[0],Kt=Re[0],lr+=Kt&65535,ot+=Kt>>>16,ut+=zt&65535,Bt+=zt>>>16,ot+=lr>>>16,ut+=ot>>>16,Bt+=ut>>>16,Qe[0]=Lt=ut&65535|Bt<<16,Re[0]=Er=lr&65535|ot<<16,zt=$t,Kt=ct,lr=Kt&65535,ot=Kt>>>16,ut=zt&65535,Bt=zt>>>16,zt=Qe[1],Kt=Re[1],lr+=Kt&65535,ot+=Kt>>>16,ut+=zt&65535,Bt+=zt>>>16,ot+=lr>>>16,ut+=ot>>>16,Bt+=ut>>>16,Qe[1]=$t=ut&65535|Bt<<16,Re[1]=ct=lr&65535|ot<<16,zt=Zt,Kt=Be,lr=Kt&65535,ot=Kt>>>16,ut=zt&65535,Bt=zt>>>16,zt=Qe[2],Kt=Re[2],lr+=Kt&65535,ot+=Kt>>>16,ut+=zt&65535,Bt+=zt>>>16,ot+=lr>>>16,ut+=ot>>>16,Bt+=ut>>>16,Qe[2]=Zt=ut&65535|Bt<<16,Re[2]=Be=lr&65535|ot<<16,zt=Vt,Kt=Ue,lr=Kt&65535,ot=Kt>>>16,ut=zt&65535,Bt=zt>>>16,zt=Qe[3],Kt=Re[3],lr+=Kt&65535,ot+=Kt>>>16,ut+=zt&65535,Bt+=zt>>>16,ot+=lr>>>16,ut+=ot>>>16,Bt+=ut>>>16,Qe[3]=Vt=ut&65535|Bt<<16,Re[3]=Ue=lr&65535|ot<<16,zt=Et,Kt=tt,lr=Kt&65535,ot=Kt>>>16,ut=zt&65535,Bt=zt>>>16,zt=Qe[4],Kt=Re[4],lr+=Kt&65535,ot+=Kt>>>16,ut+=zt&65535,Bt+=zt>>>16,ot+=lr>>>16,ut+=ot>>>16,Bt+=ut>>>16,Qe[4]=Et=ut&65535|Bt<<16,Re[4]=tt=lr&65535|ot<<16,zt=sr,Kt=gt,lr=Kt&65535,ot=Kt>>>16,ut=zt&65535,Bt=zt>>>16,zt=Qe[5],Kt=Re[5],lr+=Kt&65535,ot+=Kt>>>16,ut+=zt&65535,Bt+=zt>>>16,ot+=lr>>>16,ut+=ot>>>16,Bt+=ut>>>16,Qe[5]=sr=ut&65535|Bt<<16,Re[5]=gt=lr&65535|ot<<16,zt=cr,Kt=je,lr=Kt&65535,ot=Kt>>>16,ut=zt&65535,Bt=zt>>>16,zt=Qe[6],Kt=Re[6],lr+=Kt&65535,ot+=Kt>>>16,ut+=zt&65535,Bt+=zt>>>16,ot+=lr>>>16,ut+=ot>>>16,Bt+=ut>>>16,Qe[6]=cr=ut&65535|Bt<<16,Re[6]=je=lr&65535|ot<<16,zt=yr,Kt=Xe,lr=Kt&65535,ot=Kt>>>16,ut=zt&65535,Bt=zt>>>16,zt=Qe[7],Kt=Re[7],lr+=Kt&65535,ot+=Kt>>>16,ut+=zt&65535,Bt+=zt>>>16,ot+=lr>>>16,ut+=ot>>>16,Bt+=ut>>>16,Qe[7]=yr=ut&65535|Bt<<16,Re[7]=Xe=lr&65535|ot<<16,lt+=128,Me-=128}return Me}function vt(Qe,Re,Pe){var Me=new Int32Array(8),$e=new Int32Array(8),it=new Uint8Array(256),kt,xt=Pe;for(Me[0]=1779033703,Me[1]=3144134277,Me[2]=1013904242,Me[3]=2773480762,Me[4]=1359893119,Me[5]=2600822924,Me[6]=528734635,Me[7]=1541459225,$e[0]=4089235720,$e[1]=2227873595,$e[2]=4271175723,$e[3]=1595750129,$e[4]=2917565137,$e[5]=725511199,$e[6]=4215389547,$e[7]=327033209,St(Me,$e,Re,Pe),Pe%=128,kt=0;kt<Pe;kt++)it[kt]=Re[xt-Pe+kt];for(it[Pe]=128,Pe=256-128*(Pe<112?1:0),it[Pe-9]=0,J(it,Pe-8,xt/536870912|0,xt<<3),St(Me,$e,it,Pe),kt=0;kt<8;kt++)J(Qe,8*kt,Me[kt],$e[kt]);return 0}function It(Qe,Re){var Pe=_(),Me=_(),$e=_(),it=_(),kt=_(),xt=_(),Ot=_(),Jt=_(),tr=_();Ee(Pe,Qe[1],Qe[0]),Ee(tr,Re[1],Re[0]),ke(Pe,Pe,tr),ge(Me,Qe[0],Qe[1]),ge(tr,Re[0],Re[1]),ke(Me,Me,tr),ke($e,Qe[3],Re[3]),ke($e,$e,L),ke(it,Qe[2],Re[2]),ge(it,it,it),Ee(kt,Me,Pe),Ee(xt,it,$e),ge(Ot,it,$e),ge(Jt,Me,Pe),ke(Qe[0],kt,xt),ke(Qe[1],Jt,Ot),ke(Qe[2],Ot,xt),ke(Qe[3],kt,Jt)}function yt(Qe,Re,Pe){var Me;for(Me=0;Me<4;Me++)he(Qe[Me],Re[Me],Pe)}function Tt(Qe,Re){var Pe=_(),Me=_(),$e=_();Ie($e,Re[2]),ke(Pe,Re[0],$e),ke(Me,Re[1],$e),ae(Qe,Me),Qe[31]^=se(Pe)<<7}function Wt(Qe,Re,Pe){var Me,$e;for(oe(Qe[0],R),oe(Qe[1],P),oe(Qe[2],P),oe(Qe[3],R),$e=255;$e>=0;--$e)Me=Pe[$e/8|0]>>($e&7)&1,yt(Qe,Re,Me),It(Re,Qe),It(Qe,Qe),yt(Qe,Re,Me)}function ft(Qe,Re){var Pe=[_(),_(),_(),_()];oe(Pe[0],U),oe(Pe[1],V),oe(Pe[2],P),ke(Pe[3],U,V),Wt(Qe,Pe,Re)}function _t(Qe,Re,Pe){var Me=new Uint8Array(64),$e=[_(),_(),_(),_()],it;for(Pe||I(Re,32),vt(Me,Re,32),Me[0]&=248,Me[31]&=127,Me[31]|=64,ft($e,Me),Tt(Qe,$e),it=0;it<32;it++)Re[it+32]=Qe[it];return 0}var Xt=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function Nt(Qe,Re){var Pe,Me,$e,it;for(Me=63;Me>=32;--Me){for(Pe=0,$e=Me-32,it=Me-12;$e<it;++$e)Re[$e]+=Pe-16*Re[Me]*Xt[$e-(Me-32)],Pe=Re[$e]+128>>8,Re[$e]-=Pe*256;Re[$e]+=Pe,Re[Me]=0}for(Pe=0,$e=0;$e<32;$e++)Re[$e]+=Pe-(Re[31]>>4)*Xt[$e],Pe=Re[$e]>>8,Re[$e]&=255;for($e=0;$e<32;$e++)Re[$e]-=Pe*Xt[$e];for(Me=0;Me<32;Me++)Re[Me+1]+=Re[Me]>>8,Qe[Me]=Re[Me]&255}function qt(Qe){var Re=new Float64Array(64),Pe;for(Pe=0;Pe<64;Pe++)Re[Pe]=Qe[Pe];for(Pe=0;Pe<64;Pe++)Qe[Pe]=0;Nt(Qe,Re)}function nr(Qe,Re,Pe,Me){var $e=new Uint8Array(64),it=new Uint8Array(64),kt=new Uint8Array(64),xt,Ot,Jt=new Float64Array(64),tr=[_(),_(),_(),_()];vt($e,Me,32),$e[0]&=248,$e[31]&=127,$e[31]|=64;var br=Pe+64;for(xt=0;xt<Pe;xt++)Qe[64+xt]=Re[xt];for(xt=0;xt<32;xt++)Qe[32+xt]=$e[32+xt];for(vt(kt,Qe.subarray(32),Pe+32),qt(kt),ft(tr,kt),Tt(Qe,tr),xt=32;xt<64;xt++)Qe[xt]=Me[xt];for(vt(it,Qe,Pe+64),qt(it),xt=0;xt<64;xt++)Jt[xt]=0;for(xt=0;xt<32;xt++)Jt[xt]=kt[xt];for(xt=0;xt<32;xt++)for(Ot=0;Ot<32;Ot++)Jt[xt+Ot]+=it[xt]*$e[Ot];return Nt(Qe.subarray(32),Jt),br}function ze(Qe,Re){var Pe=_(),Me=_(),$e=_(),it=_(),kt=_(),xt=_(),Ot=_();return oe(Qe[2],P),Ae(Qe[1],Re),Se($e,Qe[1]),ke(it,$e,F),Ee($e,$e,Qe[2]),ge(it,Qe[2],it),Se(kt,it),Se(xt,kt),ke(Ot,xt,kt),ke(Pe,Ot,$e),ke(Pe,Pe,it),we(Pe,Pe),ke(Pe,Pe,$e),ke(Pe,Pe,it),ke(Pe,Pe,it),ke(Qe[0],Pe,it),Se(Me,Qe[0]),ke(Me,Me,it),Q(Me,$e)&&ke(Qe[0],Qe[0],K),Se(Me,Qe[0]),ke(Me,Me,it),Q(Me,$e)?-1:(se(Qe[0])===Re[31]>>7&&Ee(Qe[0],R,Qe[0]),ke(Qe[3],Qe[0],Qe[1]),0)}function Ce(Qe,Re,Pe,Me){var $e,it,kt=new Uint8Array(32),xt=new Uint8Array(64),Ot=[_(),_(),_(),_()],Jt=[_(),_(),_(),_()];if(it=-1,Pe<64||ze(Jt,Me))return-1;for($e=0;$e<Pe;$e++)Qe[$e]=Re[$e];for($e=0;$e<32;$e++)Qe[$e+32]=Me[$e];if(vt(xt,Qe,Pe),qt(xt),Wt(Ot,Jt,xt),ft(Jt,Re.subarray(32)),It(Ot,Jt),Tt(kt,Ot),Pe-=64,ne(Re,0,kt,0)){for($e=0;$e<Pe;$e++)Qe[$e]=0;return-1}for($e=0;$e<Pe;$e++)Qe[$e]=Re[$e+64];return it=Pe,it}var Le=32,Ze=24,Je=32,nt=16,rt=32,He=32,Dt=32,Rt=32,De=32,We=Ze,Ve=Je,qe=nt,pt=64,At=32,jt=64,rr=32,Ke=64;A.lowlevel={crypto_core_hsalsa20:pe,crypto_stream_xor:Te,crypto_stream:be,crypto_stream_salsa20_xor:ye,crypto_stream_salsa20:_e,crypto_onetimeauth:O,crypto_onetimeauth_verify:z,crypto_verify_16:ie,crypto_verify_32:ne,crypto_secretbox:Y,crypto_secretbox_open:te,crypto_scalarmult:xe,crypto_scalarmult_base:Fe,crypto_box_beforenm:Oe,crypto_box_afternm:et,crypto_box:dt,crypto_box_open:mt,crypto_box_keypair:Ge,crypto_hash:vt,crypto_sign:nr,crypto_sign_keypair:_t,crypto_sign_open:Ce,crypto_secretbox_KEYBYTES:Le,crypto_secretbox_NONCEBYTES:Ze,crypto_secretbox_ZEROBYTES:Je,crypto_secretbox_BOXZEROBYTES:nt,crypto_scalarmult_BYTES:rt,crypto_scalarmult_SCALARBYTES:He,crypto_box_PUBLICKEYBYTES:Dt,crypto_box_SECRETKEYBYTES:Rt,crypto_box_BEFORENMBYTES:De,crypto_box_NONCEBYTES:We,crypto_box_ZEROBYTES:Ve,crypto_box_BOXZEROBYTES:qe,crypto_sign_BYTES:pt,crypto_sign_PUBLICKEYBYTES:At,crypto_sign_SECRETKEYBYTES:jt,crypto_sign_SEEDBYTES:rr,crypto_hash_BYTES:Ke};function Ne(Qe,Re){if(Qe.length!==Le)throw new Error("bad key size");if(Re.length!==Ze)throw new Error("bad nonce size")}function Ye(Qe,Re){if(Qe.length!==Dt)throw new Error("bad public key size");if(Re.length!==Rt)throw new Error("bad secret key size")}function st(){var Qe,Re;for(Re=0;Re<arguments.length;Re++)if((Qe=Object.prototype.toString.call(arguments[Re]))!=="[object Uint8Array]")throw new TypeError("unexpected type "+Qe+", use Uint8Array")}function bt(Qe){for(var Re=0;Re<Qe.length;Re++)Qe[Re]=0}A.util||(A.util={},A.util.decodeUTF8=A.util.encodeUTF8=A.util.encodeBase64=A.util.decodeBase64=function(){throw new Error("nacl.util moved into separate package: https://github.com/dchest/tweetnacl-util-js")}),A.randomBytes=function(Qe){var Re=new Uint8Array(Qe);return I(Re,Qe),Re},A.secretbox=function(Qe,Re,Pe){st(Qe,Re,Pe),Ne(Pe,Re);for(var Me=new Uint8Array(Je+Qe.length),$e=new Uint8Array(Me.length),it=0;it<Qe.length;it++)Me[it+Je]=Qe[it];return Y($e,Me,Me.length,Re,Pe),$e.subarray(nt)},A.secretbox.open=function(Qe,Re,Pe){st(Qe,Re,Pe),Ne(Pe,Re);for(var Me=new Uint8Array(nt+Qe.length),$e=new Uint8Array(Me.length),it=0;it<Qe.length;it++)Me[it+nt]=Qe[it];return Me.length<32||te($e,Me,Me.length,Re,Pe)!==0?!1:$e.subarray(Je)},A.secretbox.keyLength=Le,A.secretbox.nonceLength=Ze,A.secretbox.overheadLength=nt,A.scalarMult=function(Qe,Re){if(st(Qe,Re),Qe.length!==He)throw new Error("bad n size");if(Re.length!==rt)throw new Error("bad p size");var Pe=new Uint8Array(rt);return xe(Pe,Qe,Re),Pe},A.scalarMult.base=function(Qe){if(st(Qe),Qe.length!==He)throw new Error("bad n size");var Re=new Uint8Array(rt);return Fe(Re,Qe),Re},A.scalarMult.scalarLength=He,A.scalarMult.groupElementLength=rt,A.box=function(Qe,Re,Pe,Me){var $e=A.box.before(Pe,Me);return A.secretbox(Qe,Re,$e)},A.box.before=function(Qe,Re){st(Qe,Re),Ye(Qe,Re);var Pe=new Uint8Array(De);return Oe(Pe,Qe,Re),Pe},A.box.after=A.secretbox,A.box.open=function(Qe,Re,Pe,Me){var $e=A.box.before(Pe,Me);return A.secretbox.open(Qe,Re,$e)},A.box.open.after=A.secretbox.open,A.box.keyPair=function(){var Qe=new Uint8Array(Dt),Re=new Uint8Array(Rt);return Ge(Qe,Re),{publicKey:Qe,secretKey:Re}},A.box.keyPair.fromSecretKey=function(Qe){if(st(Qe),Qe.length!==Rt)throw new Error("bad secret key size");var Re=new Uint8Array(Dt);return Fe(Re,Qe),{publicKey:Re,secretKey:new Uint8Array(Qe)}},A.box.publicKeyLength=Dt,A.box.secretKeyLength=Rt,A.box.sharedKeyLength=De,A.box.nonceLength=We,A.box.overheadLength=A.secretbox.overheadLength,A.sign=function(Qe,Re){if(st(Qe,Re),Re.length!==jt)throw new Error("bad secret key size");var Pe=new Uint8Array(pt+Qe.length);return nr(Pe,Qe,Qe.length,Re),Pe},A.sign.open=function(Qe,Re){if(arguments.length!==2)throw new Error("nacl.sign.open accepts 2 arguments; did you mean to use nacl.sign.detached.verify?");if(st(Qe,Re),Re.length!==At)throw new Error("bad public key size");var Pe=new Uint8Array(Qe.length),Me=Ce(Pe,Qe,Qe.length,Re);if(Me<0)return null;for(var $e=new Uint8Array(Me),it=0;it<$e.length;it++)$e[it]=Pe[it];return $e},A.sign.detached=function(Qe,Re){for(var Pe=A.sign(Qe,Re),Me=new Uint8Array(pt),$e=0;$e<Me.length;$e++)Me[$e]=Pe[$e];return Me},A.sign.detached.verify=function(Qe,Re,Pe){if(st(Qe,Re,Pe),Re.length!==pt)throw new Error("bad signature size");if(Pe.length!==At)throw new Error("bad public key size");var Me=new Uint8Array(pt+Qe.length),$e=new Uint8Array(pt+Qe.length),it;for(it=0;it<pt;it++)Me[it]=Re[it];for(it=0;it<Qe.length;it++)Me[it+pt]=Qe[it];return Ce($e,Me,Me.length,Pe)>=0},A.sign.keyPair=function(){var Qe=new Uint8Array(At),Re=new Uint8Array(jt);return _t(Qe,Re),{publicKey:Qe,secretKey:Re}},A.sign.keyPair.fromSecretKey=function(Qe){if(st(Qe),Qe.length!==jt)throw new Error("bad secret key size");for(var Re=new Uint8Array(At),Pe=0;Pe<Re.length;Pe++)Re[Pe]=Qe[32+Pe];return{publicKey:Re,secretKey:new Uint8Array(Qe)}},A.sign.keyPair.fromSeed=function(Qe){if(st(Qe),Qe.length!==rr)throw new Error("bad seed size");for(var Re=new Uint8Array(At),Pe=new Uint8Array(jt),Me=0;Me<32;Me++)Pe[Me]=Qe[Me];return _t(Re,Pe,!0),{publicKey:Re,secretKey:Pe}},A.sign.publicKeyLength=At,A.sign.secretKeyLength=jt,A.sign.seedLength=rr,A.sign.signatureLength=pt,A.hash=function(Qe){st(Qe);var Re=new Uint8Array(Ke);return vt(Re,Qe,Qe.length),Re},A.hash.hashLength=Ke,A.verify=function(Qe,Re){return st(Qe,Re),Qe.length===0||Re.length===0||Qe.length!==Re.length?!1:ee(Qe,0,Re,0,Qe.length)===0},A.setPRNG=function(Qe){I=Qe},(function(){var Qe=typeof self<"u"?self.crypto||self.msCrypto:null;if(Qe&&Qe.getRandomValues){var Re=65536;A.setPRNG(function(Pe,Me){var $e,it=new Uint8Array(Me);for($e=0;$e<Me;$e+=Re)Qe.getRandomValues(it.subarray($e,$e+Math.min(Me-$e,Re)));for($e=0;$e<Me;$e++)Pe[$e]=it[$e];bt(it)})}else typeof commonjsRequire<"u"&&(Qe=requireCryptoBrowserify(),Qe&&Qe.randomBytes&&A.setPRNG(function(Pe,Me){var $e,it=Qe.randomBytes(Me);for($e=0;$e<Me;$e++)Pe[$e]=it[$e];bt(it)}))})()})(E.exports?E.exports:self.nacl=self.nacl||{})})(naclFast)),naclFast.exports}var utils$1,hasRequiredUtils$1;function requireUtils$1(){if(hasRequiredUtils$1)return utils$1;hasRequiredUtils$1=1,utils$1={bufferSplit:ce,addRSAMissing:z,calculateDSAPublic:Te,calculateED25519Public:ue,calculateX25519Public:O,mpNormalize:ve,mpDenormalize:ye,ecNormalize:fe,countZeros:ne,assertCompatible:V,isCompatible:U,opensslKeyDeriv:ee,opensshCipherInfo:te,publicFromPrivateECDSA:Y,zeroPadToLength:_e,writeBitString:pe,readBitString:de,pbkdf2:ie};var E=requireAssert(),A=requireSafer().Buffer,_=requirePrivateKey(),I=requireKey(),B=requireCryptoBrowserify(),T=requireAlgs(),R=requireLib$4(),P=requireEc(),D=requireJsbn().BigInteger,F=requireNaclFast(),L=3;function U(oe,le,he){if(oe===null||typeof oe!="object")return!1;if(he===void 0&&(he=le.prototype._sshpkApiVersion),oe instanceof le&&le.prototype._sshpkApiVersion[0]==he[0])return!0;for(var ae=Object.getPrototypeOf(oe),Q=0;ae.constructor.name!==le.name;)if(ae=Object.getPrototypeOf(ae),!ae||++Q>L)return!1;if(ae.constructor.name!==le.name)return!1;var se=ae._sshpkApiVersion;return se===void 0&&(se=le._oldVersionDetect(oe)),!(se[0]!=he[0]||se[1]<he[1])}function V(oe,le,he,ae){if(ae===void 0&&(ae="object"),E.ok(oe,ae+" must not be null"),E.object(oe,ae+" must be an object"),he===void 0&&(he=le.prototype._sshpkApiVersion),!(oe instanceof le&&le.prototype._sshpkApiVersion[0]==he[0])){for(var Q=Object.getPrototypeOf(oe),se=0;Q.constructor.name!==le.name;)Q=Object.getPrototypeOf(Q),E.ok(Q&&++se<=L,ae+" must be a "+le.name+" instance");E.strictEqual(Q.constructor.name,le.name,ae+" must be a "+le.name+" instance");var Ae=Q._sshpkApiVersion;Ae===void 0&&(Ae=le._oldVersionDetect(oe)),E.ok(Ae[0]==he[0]&&Ae[1]>=he[1],ae+" must be compatible with "+le.name+" klass version "+he[0]+"."+he[1])}}var K={"des-ede3-cbc":{key:24,iv:8},"aes-128-cbc":{key:16,iv:16},"aes-256-cbc":{key:32,iv:16}},J=8;function ee(oe,le,he,ae){E.buffer(le,"salt"),E.buffer(he,"passphrase"),E.number(ae,"iteration count");var Q=K[oe];E.object(Q,"supported cipher"),le=le.slice(0,J);for(var se,Ae,ge,Ee=A.alloc(0);Ee.length<Q.key+Q.iv;){ge=[],Ae&&ge.push(Ae),ge.push(he),ge.push(le),se=A.concat(ge);for(var ke=0;ke<ae;++ke)se=B.createHash("md5").update(se).digest();Ee=A.concat([Ee,se]),Ae=se}return{key:Ee.slice(0,Q.key),iv:Ee.slice(Q.key,Q.key+Q.iv)}}function ie(oe,le,he,ae,Q){var se=A.alloc(le.length+4);le.copy(se);for(var Ae=0,ge=[],Ee=1;Ae<ae;){var ke=Se(Ee++);Ae+=ke.length,ge.push(ke)}return A.concat(ge).slice(0,ae);function Se(Ie){se.writeUInt32BE(Ie,se.length-4);var we=B.createHmac(oe,Q);we.update(se);for(var xe=we.digest(),Fe=xe,Ge=1;Ge++<he;){we=B.createHmac(oe,Q),we.update(Fe),Fe=we.digest();for(var Oe=0;Oe<xe.length;++Oe)xe[Oe]^=Fe[Oe]}return xe}}function ne(oe){for(var le=0,he=8;le<oe.length;){var ae=1<<he;if((oe[le]&ae)===ae)break;he--,he<0&&(le++,he=8)}return le*8+(8-he)-1}function ce(oe,le){E.buffer(oe),E.string(le);for(var he=[],ae=0,Q=0,se=0;se<oe.length;++se)if(oe[se]===le.charCodeAt(Q)?++Q:oe[se]===le.charCodeAt(0)?Q=1:Q=0,Q>=le.length){var Ae=se+1;he.push(oe.slice(ae,Ae-Q)),ae=Ae,Q=0}return ae<=oe.length&&he.push(oe.slice(ae,oe.length)),he}function fe(oe,le){if(E.buffer(oe),oe[0]===0&&oe[1]===4)return le?oe:oe.slice(1);if(oe[0]===4){if(!le)return oe}else{for(;oe[0]===0;)oe=oe.slice(1);if(oe[0]===2||oe[0]===3)throw new Error("Compressed elliptic curve points are not supported");if(oe[0]!==4)throw new Error("Not a valid elliptic curve point");if(!le)return oe}var he=A.alloc(oe.length+1);return he[0]=0,oe.copy(he,1),he}function de(oe,le){le===void 0&&(le=R.Ber.BitString);var he=oe.readString(le,!0);return E.strictEqual(he[0],0,"bit strings with unused bits are not supported (0x"+he[0].toString(16)+")"),he.slice(1)}function pe(oe,le,he){he===void 0&&(he=R.Ber.BitString);var ae=A.alloc(le.length+1);ae[0]=0,le.copy(ae,1),oe.writeBuffer(ae,he)}function ve(oe){for(E.buffer(oe);oe.length>1&&oe[0]===0&&(oe[1]&128)===0;)oe=oe.slice(1);if((oe[0]&128)===128){var le=A.alloc(oe.length+1);le[0]=0,oe.copy(le,1),oe=le}return oe}function ye(oe){for(E.buffer(oe);oe.length>1&&oe[0]===0;)oe=oe.slice(1);return oe}function _e(oe,le){for(E.buffer(oe),E.number(le);oe.length>le;)E.equal(oe[0],0),oe=oe.slice(1);for(;oe.length<le;){var he=A.alloc(oe.length+1);he[0]=0,oe.copy(he,1),oe=he}return oe}function be(oe){var le=A.from(oe.toByteArray());return le=ve(le),le}function Te(oe,le,he){E.buffer(oe),E.buffer(le),E.buffer(he),oe=new D(oe),le=new D(le),he=new D(he);var ae=oe.modPow(he,le),Q=be(ae);return Q}function ue(oe){E.buffer(oe);var le=F.sign.keyPair.fromSeed(new Uint8Array(oe));return A.from(le.publicKey)}function O(oe){E.buffer(oe);var le=F.box.keyPair.fromSeed(new Uint8Array(oe));return A.from(le.publicKey)}function z(oe){E.object(oe),V(oe,_,[1,1]);var le=new D(oe.part.d.data),he;if(!oe.part.dmodp){var ae=new D(oe.part.p.data),Q=le.mod(ae.subtract(1));he=be(Q),oe.part.dmodp={name:"dmodp",data:he},oe.parts.push(oe.part.dmodp)}if(!oe.part.dmodq){var se=new D(oe.part.q.data),Ae=le.mod(se.subtract(1));he=be(Ae),oe.part.dmodq={name:"dmodq",data:he},oe.parts.push(oe.part.dmodq)}}function Y(oe,le){E.string(oe,"curveName"),E.buffer(le);var he=T.curves[oe],ae=new D(he.p),Q=new D(he.a),se=new D(he.b),Ae=new P.ECCurveFp(ae,Q,se),ge=Ae.decodePointHex(he.G.toString("hex")),Ee=new D(ve(le)),ke=ge.multiply(Ee);ke=A.from(Ae.encodePointHex(ke),"hex");var Se=[];Se.push({name:"curve",data:A.from(oe)}),Se.push({name:"Q",data:ke});var Ie=new I({type:"ecdsa",curve:Ae,parts:Se});return Ie}function te(oe){var le={};switch(oe){case"3des-cbc":le.keySize=24,le.blockSize=8,le.opensslName="des-ede3-cbc";break;case"blowfish-cbc":le.keySize=16,le.blockSize=8,le.opensslName="bf-cbc";break;case"aes128-cbc":case"aes128-ctr":case"aes128-gcm@openssh.com":le.keySize=16,le.blockSize=16,le.opensslName="aes-128-"+oe.slice(7,10);break;case"aes192-cbc":case"aes192-ctr":case"aes192-gcm@openssh.com":le.keySize=24,le.blockSize=16,le.opensslName="aes-192-"+oe.slice(7,10);break;case"aes256-cbc":case"aes256-ctr":case"aes256-gcm@openssh.com":le.keySize=32,le.blockSize=16,le.opensslName="aes-256-"+oe.slice(7,10);break;default:throw new Error('Unsupported openssl cipher "'+oe+'"')}return le}return utils$1}var sshBuffer,hasRequiredSshBuffer;function requireSshBuffer(){if(hasRequiredSshBuffer)return sshBuffer;hasRequiredSshBuffer=1,sshBuffer=_;var E=requireAssert(),A=requireSafer().Buffer;function _(I){E.object(I,"options"),I.buffer!==void 0&&E.buffer(I.buffer,"options.buffer"),this._size=I.buffer?I.buffer.length:1024,this._buffer=I.buffer||A.alloc(this._size),this._offset=0}return _.prototype.toBuffer=function(){return this._buffer.slice(0,this._offset)},_.prototype.atEnd=function(){return this._offset>=this._buffer.length},_.prototype.remainder=function(){return this._buffer.slice(this._offset)},_.prototype.skip=function(I){this._offset+=I},_.prototype.expand=function(){this._size*=2;var I=A.alloc(this._size);this._buffer.copy(I,0),this._buffer=I},_.prototype.readPart=function(){return{data:this.readBuffer()}},_.prototype.readBuffer=function(){var I=this._buffer.readUInt32BE(this._offset);this._offset+=4,E.ok(this._offset+I<=this._buffer.length,"length out of bounds at +0x"+this._offset.toString(16)+" (data truncated?)");var B=this._buffer.slice(this._offset,this._offset+I);return this._offset+=I,B},_.prototype.readString=function(){return this.readBuffer().toString()},_.prototype.readCString=function(){for(var I=this._offset;I<this._buffer.length&&this._buffer[I]!==0;)I++;E.ok(I<this._buffer.length,"c string does not terminate");var B=this._buffer.slice(this._offset,I).toString();return this._offset=I+1,B},_.prototype.readInt=function(){var I=this._buffer.readUInt32BE(this._offset);return this._offset+=4,I},_.prototype.readInt64=function(){E.ok(this._offset+8<this._buffer.length,"buffer not long enough to read Int64");var I=this._buffer.slice(this._offset,this._offset+8);return this._offset+=8,I},_.prototype.readChar=function(){var I=this._buffer[this._offset++];return I},_.prototype.writeBuffer=function(I){for(;this._offset+4+I.length>this._size;)this.expand();this._buffer.writeUInt32BE(I.length,this._offset),this._offset+=4,I.copy(this._buffer,this._offset),this._offset+=I.length},_.prototype.writeString=function(I){this.writeBuffer(A.from(I,"utf8"))},_.prototype.writeCString=function(I){for(;this._offset+1+I.length>this._size;)this.expand();this._buffer.write(I,this._offset),this._offset+=I.length,this._buffer[this._offset++]=0},_.prototype.writeInt=function(I){for(;this._offset+4>this._size;)this.expand();this._buffer.writeUInt32BE(I,this._offset),this._offset+=4},_.prototype.writeInt64=function(I){if(E.buffer(I,"value"),I.length>8){for(var B=I.slice(0,I.length-8),T=0;T<B.length;++T)E.strictEqual(B[T],0,"must fit in 64 bits of precision");I=I.slice(I.length-8,I.length)}for(;this._offset+8>this._size;)this.expand();I.copy(this._buffer,this._offset),this._offset+=8},_.prototype.writeChar=function(I){for(;this._offset+1>this._size;)this.expand();this._buffer[this._offset++]=I},_.prototype.writePart=function(I){this.writeBuffer(I.data)},_.prototype.write=function(I){for(;this._offset+I.length>this._size;)this.expand();I.copy(this._buffer,this._offset),this._offset+=I.length},sshBuffer}var signature,hasRequiredSignature;function requireSignature(){if(hasRequiredSignature)return signature;hasRequiredSignature=1,signature=D;var E=requireAssert(),A=requireSafer().Buffer;requireAlgs(),requireCryptoBrowserify();var _=requireErrors$1(),I=requireUtils$1(),B=requireLib$4(),T=requireSshBuffer(),R=_.InvalidAlgorithmError,P=_.SignatureParseError;function D(K){E.object(K,"options"),E.arrayOfObject(K.parts,"options.parts"),E.string(K.type,"options.type");for(var J={},ee=0;ee<K.parts.length;++ee){var ie=K.parts[ee];J[ie.name]=ie}this.type=K.type,this.hashAlgorithm=K.hashAlgo,this.curve=K.curve,this.parts=K.parts,this.part=J}D.prototype.toBuffer=function(K){K===void 0&&(K="asn1"),E.string(K,"format");var J,ee="ssh-"+this.type;switch(this.type){case"rsa":switch(this.hashAlgorithm){case"sha256":ee="rsa-sha2-256";break;case"sha512":ee="rsa-sha2-512";break;case"sha1":case void 0:break;default:throw new Error("SSH signature format does not support hash algorithm "+this.hashAlgorithm)}return K==="ssh"?(J=new T({}),J.writeString(ee),J.writePart(this.part.sig),J.toBuffer()):this.part.sig.data;case"ed25519":return K==="ssh"?(J=new T({}),J.writeString(ee),J.writePart(this.part.sig),J.toBuffer()):this.part.sig.data;case"dsa":case"ecdsa":var ie,ne;if(K==="asn1"){var ce=new B.BerWriter;return ce.startSequence(),ie=I.mpNormalize(this.part.r.data),ne=I.mpNormalize(this.part.s.data),ce.writeBuffer(ie,B.Ber.Integer),ce.writeBuffer(ne,B.Ber.Integer),ce.endSequence(),ce.buffer}else if(K==="ssh"&&this.type==="dsa"){if(J=new T({}),J.writeString("ssh-dss"),ie=this.part.r.data,ie.length>20&&ie[0]===0&&(ie=ie.slice(1)),ne=this.part.s.data,ne.length>20&&ne[0]===0&&(ne=ne.slice(1)),this.hashAlgorithm&&this.hashAlgorithm!=="sha1"||ie.length+ne.length!==40)throw new Error("OpenSSH only supports DSA signatures with SHA1 hash");return J.writeBuffer(A.concat([ie,ne])),J.toBuffer()}else if(K==="ssh"&&this.type==="ecdsa"){var fe=new T({});ie=this.part.r.data,fe.writeBuffer(ie),fe.writePart(this.part.s),J=new T({});var de;ie[0]===0&&(ie=ie.slice(1));var pe=ie.length*8;return pe===256?de="nistp256":pe===384?de="nistp384":pe===528&&(de="nistp521"),J.writeString("ecdsa-sha2-"+de),J.writeBuffer(fe.toBuffer()),J.toBuffer()}throw new Error("Invalid signature format");default:throw new Error("Invalid signature data")}},D.prototype.toString=function(K){return E.optionalString(K,"format"),this.toBuffer(K).toString("base64")},D.parse=function(K,J,ee){typeof K=="string"&&(K=A.from(K,"base64")),E.buffer(K,"data"),E.string(ee,"format"),E.string(J,"type");var ie={};ie.type=J.toLowerCase(),ie.parts=[];try{switch(E.ok(K.length>0,"signature must not be empty"),ie.type){case"rsa":return F(K,J,ee,ie);case"ed25519":return F(K,J,ee,ie);case"dsa":case"ecdsa":return ee==="asn1"?L(K,J,ee,ie):ie.type==="dsa"?U(K,J,ee,ie):V(K,J,ee,ie);default:throw new R(J)}}catch(ne){throw ne instanceof R?ne:new P(J,ee,ne)}};function F(K,J,ee,ie){if(ee==="ssh"){try{var ne=new T({buffer:K}),ce=ne.readString()}catch{}if(ne!==void 0){var fe="SSH signature does not match expected type (expected "+J+", got "+ce+")";switch(ce){case"ssh-rsa":E.strictEqual(J,"rsa",fe),ie.hashAlgo="sha1";break;case"rsa-sha2-256":E.strictEqual(J,"rsa",fe),ie.hashAlgo="sha256";break;case"rsa-sha2-512":E.strictEqual(J,"rsa",fe),ie.hashAlgo="sha512";break;case"ssh-ed25519":E.strictEqual(J,"ed25519",fe),ie.hashAlgo="sha512";break;default:throw new Error("Unknown SSH signature type: "+ce)}var de=ne.readPart();return E.ok(ne.atEnd(),"extra trailing bytes"),de.name="sig",ie.parts.push(de),new D(ie)}}return ie.parts.push({name:"sig",data:K}),new D(ie)}function L(K,J,ee,ie){var ne=new B.BerReader(K);ne.readSequence();var ce=ne.readString(B.Ber.Integer,!0),fe=ne.readString(B.Ber.Integer,!0);return ie.parts.push({name:"r",data:I.mpNormalize(ce)}),ie.parts.push({name:"s",data:I.mpNormalize(fe)}),new D(ie)}function U(K,J,ee,ie){if(K.length!=40){var ne=new T({buffer:K}),ce=ne.readBuffer();ce.toString("ascii")==="ssh-dss"&&(ce=ne.readBuffer()),E.ok(ne.atEnd(),"extra trailing bytes"),E.strictEqual(ce.length,40,"invalid inner length"),K=ce}return ie.parts.push({name:"r",data:K.slice(0,20)}),ie.parts.push({name:"s",data:K.slice(20,40)}),new D(ie)}function V(K,J,ee,ie){var ne=new T({buffer:K}),ce,fe,de=ne.readBuffer(),pe=de.toString("ascii");if(pe.slice(0,6)==="ecdsa-"){var ve=pe.split("-");switch(E.strictEqual(ve[0],"ecdsa"),E.strictEqual(ve[1],"sha2"),ie.curve=ve[2],ie.curve){case"nistp256":ie.hashAlgo="sha256";break;case"nistp384":ie.hashAlgo="sha384";break;case"nistp521":ie.hashAlgo="sha512";break;default:throw new Error("Unsupported ECDSA curve: "+ie.curve)}de=ne.readBuffer(),E.ok(ne.atEnd(),"extra trailing bytes on outer"),ne=new T({buffer:de}),ce=ne.readPart()}else ce={data:de};return fe=ne.readPart(),E.ok(ne.atEnd(),"extra trailing bytes"),ce.name="r",fe.name="s",ie.parts.push(ce),ie.parts.push(fe),new D(ie)}return D.isSignature=function(K,J){return I.isCompatible(K,D,J)},D.prototype._sshpkApiVersion=[2,1],D._oldVersionDetect=function(K){return E.func(K.toBuffer),K.hasOwnProperty("hashAlgorithm")?[2,0]:[1,0]},signature}var eccJsbn={},sec,hasRequiredSec;function requireSec(){if(hasRequiredSec)return sec;hasRequiredSec=1;var E=requireJsbn().BigInteger,A=requireEc().ECCurveFp;function _(ee,ie,ne,ce){this.curve=ee,this.g=ie,this.n=ne,this.h=ce}function I(){return this.curve}function B(){return this.g}function T(){return this.n}function R(){return this.h}_.prototype.getCurve=I,_.prototype.getG=B,_.prototype.getN=T,_.prototype.getH=R;function P(ee){return new E(ee,16)}function D(){var ee=P("FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF"),ie=P("FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC"),ne=P("E87579C11079F43DD824993C2CEE5ED3"),ce=P("FFFFFFFE0000000075A30D1B9038A115"),fe=E.ONE,de=new A(ee,ie,ne),pe=de.decodePointHex("04161FF7528B899B2D0C28607CA52C5B86CF5AC8395BAFEB13C02DA292DDED7A83");return new _(de,pe,ce,fe)}function F(){var ee=P("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73"),ie=E.ZERO,ne=P("7"),ce=P("0100000000000000000001B8FA16DFAB9ACA16B6B3"),fe=E.ONE,de=new A(ee,ie,ne),pe=de.decodePointHex("043B4C382CE37AA192A4019E763036F4F5DD4D7EBB938CF935318FDCED6BC28286531733C3F03C4FEE");return new _(de,pe,ce,fe)}function L(){var ee=P("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF"),ie=P("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC"),ne=P("1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45"),ce=P("0100000000000000000001F4C8F927AED3CA752257"),fe=E.ONE,de=new A(ee,ie,ne),pe=de.decodePointHex("044A96B5688EF573284664698968C38BB913CBFC8223A628553168947D59DCC912042351377AC5FB32");return new _(de,pe,ce,fe)}function U(){var ee=P("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37"),ie=E.ZERO,ne=P("3"),ce=P("FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D"),fe=E.ONE,de=new A(ee,ie,ne),pe=de.decodePointHex("04DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D");return new _(de,pe,ce,fe)}function V(){var ee=P("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF"),ie=P("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC"),ne=P("64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1"),ce=P("FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831"),fe=E.ONE,de=new A(ee,ie,ne),pe=de.decodePointHex("04188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF101207192B95FFC8DA78631011ED6B24CDD573F977A11E794811");return new _(de,pe,ce,fe)}function K(){var ee=P("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001"),ie=P("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE"),ne=P("B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4"),ce=P("FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D"),fe=E.ONE,de=new A(ee,ie,ne),pe=de.decodePointHex("04B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34");return new _(de,pe,ce,fe)}function J(){var ee=P("FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF"),ie=P("FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC"),ne=P("5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B"),ce=P("FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551"),fe=E.ONE,de=new A(ee,ie,ne),pe=de.decodePointHex("046B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C2964FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5");return new _(de,pe,ce,fe)}return sec={secp128r1:D,secp160k1:F,secp160r1:L,secp192k1:U,secp192r1:V,secp224r1:K,secp256r1:J},sec}var hasRequiredEccJsbn;function requireEccJsbn(){if(hasRequiredEccJsbn)return eccJsbn;hasRequiredEccJsbn=1;var E=requireCryptoBrowserify(),A=requireJsbn().BigInteger;requireEc().ECPointFp;var _=requireSafer().Buffer;eccJsbn.ECCurves=requireSec();function I(B,T){return B.length>=T?B:I("0"+B,T)}return eccJsbn.ECKey=function(B,T,R){var P,D=B(),F=D.getN(),L=Math.floor(F.bitLength()/8);if(T)if(R){var B=D.getCurve();this.P=B.decodePointHex(T.toString("hex"))}else{if(T.length!=L)return!1;P=new A(T.toString("hex"),16)}else{var U=F.subtract(A.ONE),V=new A(E.randomBytes(F.bitLength()));P=V.mod(U).add(A.ONE),this.P=D.getG().multiply(P)}this.P&&(this.PublicKey=_.from(D.getCurve().encodeCompressedPointHex(this.P),"hex")),P&&(this.PrivateKey=_.from(I(P.toString(16),L*2),"hex"),this.deriveSharedSecret=function(K){if(!K||!K.P)return!1;var J=K.P.multiply(P);return _.from(I(J.getX().toBigInteger().toString(16),L*2),"hex")})},eccJsbn}var dhe,hasRequiredDhe;function requireDhe(){if(hasRequiredDhe)return dhe;hasRequiredDhe=1,dhe={DiffieHellman:U,generateECDSA:ie,generateED25519:ee};var E=requireAssert(),A=requireCryptoBrowserify(),_=requireSafer().Buffer,I=requireAlgs(),B=requireUtils$1(),T=requireNaclFast(),R=requireKey(),P=requirePrivateKey(),D=A.createECDH!==void 0;requireEccJsbn();var F=requireEc(),L=requireJsbn().BigInteger;function U(ne){if(B.assertCompatible(ne,R,[1,4],"key"),this._isPriv=P.isPrivateKey(ne,[1,3]),this._algo=ne.type,this._curve=ne.curve,this._key=ne,ne.type==="dsa"){if(!D)throw new Error("Due to bugs in the node 0.10 crypto API, node 0.12.x or later is required to use DH");this._dh=A.createDiffieHellman(ne.part.p.data,void 0,ne.part.g.data,void 0),this._p=ne.part.p,this._g=ne.part.g,this._isPriv&&this._dh.setPrivateKey(ne.part.x.data),this._dh.setPublicKey(ne.part.y.data)}else if(ne.type==="ecdsa"){if(!D){this._ecParams=new V(this._curve),this._isPriv&&(this._priv=new J(this._ecParams,ne.part.d.data));return}var ce={nistp256:"prime256v1",nistp384:"secp384r1",nistp521:"secp521r1"}[ne.curve];if(this._dh=A.createECDH(ce),typeof this._dh!="object"||typeof this._dh.setPrivateKey!="function"){D=!1,U.call(this,ne);return}this._isPriv&&this._dh.setPrivateKey(ne.part.d.data),this._dh.setPublicKey(ne.part.Q.data)}else if(ne.type==="curve25519")this._isPriv&&(B.assertCompatible(ne,P,[1,5],"key"),this._priv=ne.part.k.data);else throw new Error("DH not supported for "+ne.type+" keys")}U.prototype.getPublicKey=function(){return this._isPriv?this._key.toPublic():this._key},U.prototype.getPrivateKey=function(){if(this._isPriv)return this._key},U.prototype.getKey=U.prototype.getPrivateKey,U.prototype._keyCheck=function(ne,ce){if(E.object(ne,"key"),ce||B.assertCompatible(ne,P,[1,3],"key"),B.assertCompatible(ne,R,[1,4],"key"),ne.type!==this._algo)throw new Error("A "+ne.type+" key cannot be used in "+this._algo+" Diffie-Hellman");if(ne.curve!==this._curve)throw new Error("A key from the "+ne.curve+" curve cannot be used with a "+this._curve+" Diffie-Hellman");ne.type==="dsa"&&(E.deepEqual(ne.part.p,this._p,"DSA key prime does not match"),E.deepEqual(ne.part.g,this._g,"DSA key generator does not match"))},U.prototype.setKey=function(ne){if(this._keyCheck(ne),ne.type==="dsa")this._dh.setPrivateKey(ne.part.x.data),this._dh.setPublicKey(ne.part.y.data);else if(ne.type==="ecdsa")D?(this._dh.setPrivateKey(ne.part.d.data),this._dh.setPublicKey(ne.part.Q.data)):this._priv=new J(this._ecParams,ne.part.d.data);else if(ne.type==="curve25519"){var ce=ne.part.k;ne.part.k||(ce=ne.part.r),this._priv=ce.data,this._priv[0]===0&&(this._priv=this._priv.slice(1)),this._priv=this._priv.slice(0,32)}this._key=ne,this._isPriv=!0},U.prototype.setPrivateKey=U.prototype.setKey,U.prototype.computeSecret=function(ne){if(this._keyCheck(ne,!0),!this._isPriv)throw new Error("DH exchange has not been initialized with a private key yet");var ce;if(this._algo==="dsa")return this._dh.computeSecret(ne.part.y.data);if(this._algo==="ecdsa")return D?this._dh.computeSecret(ne.part.Q.data):(ce=new K(this._ecParams,ne.part.Q.data),this._priv.deriveSharedSecret(ce));if(this._algo==="curve25519"){for(ce=ne.part.A.data;ce[0]===0&&ce.length>32;)ce=ce.slice(1);var fe=this._priv;E.strictEqual(ce.length,32),E.strictEqual(fe.length,32);var de=T.box.before(new Uint8Array(ce),new Uint8Array(fe));return _.from(de)}throw new Error("Invalid algorithm: "+this._algo)},U.prototype.generateKey=function(){var ne=[],ce,fe;if(this._algo==="dsa")return this._dh.generateKeys(),ne.push({name:"p",data:this._p.data}),ne.push({name:"q",data:this._key.part.q.data}),ne.push({name:"g",data:this._g.data}),ne.push({name:"y",data:this._dh.getPublicKey()}),ne.push({name:"x",data:this._dh.getPrivateKey()}),this._key=new P({type:"dsa",parts:ne}),this._isPriv=!0,this._key;if(this._algo==="ecdsa"){if(D)return this._dh.generateKeys(),ne.push({name:"curve",data:_.from(this._curve)}),ne.push({name:"Q",data:this._dh.getPublicKey()}),ne.push({name:"d",data:this._dh.getPrivateKey()}),this._key=new P({type:"ecdsa",curve:this._curve,parts:ne}),this._isPriv=!0,this._key;var de=this._ecParams.getN(),pe=new L(A.randomBytes(de.bitLength())),ve=de.subtract(L.ONE);return ce=pe.mod(ve).add(L.ONE),fe=this._ecParams.getG().multiply(ce),ce=_.from(ce.toByteArray()),fe=_.from(this._ecParams.getCurve().encodePointHex(fe),"hex"),this._priv=new J(this._ecParams,ce),ne.push({name:"curve",data:_.from(this._curve)}),ne.push({name:"Q",data:fe}),ne.push({name:"d",data:ce}),this._key=new P({type:"ecdsa",curve:this._curve,parts:ne}),this._isPriv=!0,this._key}else if(this._algo==="curve25519"){var ye=T.box.keyPair();return ce=_.from(ye.secretKey),fe=_.from(ye.publicKey),ce=_.concat([ce,fe]),E.strictEqual(ce.length,64),E.strictEqual(fe.length,32),ne.push({name:"A",data:fe}),ne.push({name:"k",data:ce}),this._key=new P({type:"curve25519",parts:ne}),this._isPriv=!0,this._key}throw new Error("Invalid algorithm: "+this._algo)},U.prototype.generateKeys=U.prototype.generateKey;function V(ne){var ce=I.curves[ne];E.object(ce);var fe=new L(ce.p),de=new L(ce.a),pe=new L(ce.b),ve=new L(ce.n),ye=L.ONE,_e=new F.ECCurveFp(fe,de,pe),be=_e.decodePointHex(ce.G.toString("hex"));this.curve=_e,this.g=be,this.n=ve,this.h=ye}V.prototype.getCurve=function(){return this.curve},V.prototype.getG=function(){return this.g},V.prototype.getN=function(){return this.n},V.prototype.getH=function(){return this.h};function K(ne,ce){this._params=ne,ce[0]===0&&(ce=ce.slice(1)),this._pub=ne.getCurve().decodePointHex(ce.toString("hex"))}function J(ne,ce){this._params=ne,this._priv=new L(B.mpNormalize(ce))}J.prototype.deriveSharedSecret=function(ne){E.ok(ne instanceof K);var ce=ne._pub.multiply(this._priv);return _.from(ce.getX().toBigInteger().toByteArray())};function ee(){var ne=T.sign.keyPair(),ce=_.from(ne.secretKey),fe=_.from(ne.publicKey);E.strictEqual(ce.length,64),E.strictEqual(fe.length,32);var de=[];de.push({name:"A",data:fe}),de.push({name:"k",data:ce.slice(0,32)});var pe=new P({type:"ed25519",parts:de});return pe}function ie(ne){var ce=[],fe;if(D){var de={nistp256:"prime256v1",nistp384:"secp384r1",nistp521:"secp521r1"}[ne],pe=A.createECDH(de);return pe.generateKeys(),ce.push({name:"curve",data:_.from(ne)}),ce.push({name:"Q",data:pe.getPublicKey()}),ce.push({name:"d",data:pe.getPrivateKey()}),fe=new P({type:"ecdsa",curve:ne,parts:ce}),fe}else{var ve=new V(ne),ye=ve.getN(),_e=Math.ceil((ye.bitLength()+64)/8),be=new L(A.randomBytes(_e)),Te=ye.subtract(L.ONE),ue=be.mod(Te).add(L.ONE),O=ve.getG().multiply(ue);return ue=_.from(ue.toByteArray()),O=_.from(ve.getCurve().encodePointHex(O),"hex"),ce.push({name:"curve",data:_.from(ne)}),ce.push({name:"Q",data:O}),ce.push({name:"d",data:ue}),fe=new P({type:"ecdsa",curve:ne,parts:ce}),fe}}return dhe}var edCompat,hasRequiredEdCompat;function requireEdCompat(){if(hasRequiredEdCompat)return edCompat;hasRequiredEdCompat=1,edCompat={Verifier:R,Signer:P};var E=requireNaclFast(),A=requireStreamBrowserify(),_=requireUtil$3(),I=requireAssert(),B=requireSafer().Buffer,T=requireSignature();function R(D,F){if(F.toLowerCase()!=="sha512")throw new Error("ED25519 only supports the use of SHA-512 hashes");this.key=D,this.chunks=[],A.Writable.call(this,{})}_.inherits(R,A.Writable),R.prototype._write=function(D,F,L){this.chunks.push(D),L()},R.prototype.update=function(D){typeof D=="string"&&(D=B.from(D,"binary")),this.chunks.push(D)},R.prototype.verify=function(D,F){var L;if(T.isSignature(D,[2,0])){if(D.type!=="ed25519")return!1;L=D.toBuffer("raw")}else if(typeof D=="string")L=B.from(D,"base64");else if(T.isSignature(D,[1,0]))throw new Error("signature was created by too old a version of sshpk and cannot be verified");return I.buffer(L),E.sign.detached.verify(new Uint8Array(B.concat(this.chunks)),new Uint8Array(L),new Uint8Array(this.key.part.A.data))};function P(D,F){if(F.toLowerCase()!=="sha512")throw new Error("ED25519 only supports the use of SHA-512 hashes");this.key=D,this.chunks=[],A.Writable.call(this,{})}return _.inherits(P,A.Writable),P.prototype._write=function(D,F,L){this.chunks.push(D),L()},P.prototype.update=function(D){typeof D=="string"&&(D=B.from(D,"binary")),this.chunks.push(D)},P.prototype.sign=function(){var D=E.sign.detached(new Uint8Array(B.concat(this.chunks)),new Uint8Array(B.concat([this.key.part.k.data,this.key.part.A.data]))),F=B.from(D),L=T.parse(F,"ed25519","raw");return L.hashAlgorithm="sha512",L},edCompat}var pkcs8,hasRequiredPkcs8;function requirePkcs8(){if(hasRequiredPkcs8)return pkcs8;hasRequiredPkcs8=1,pkcs8={read:D,readPkcs8:U,write:F,writePkcs8:_e,pkcs8ToBuffer:ye,readECDSACurve:ie,writeECDSACurve:z};var E=requireAssert(),A=requireLib$4(),_=requireSafer().Buffer,I=requireAlgs(),B=requireUtils$1(),T=requireKey(),R=requirePrivateKey(),P=requirePem();function D(he,ae){return P.read(he,ae,"pkcs8")}function F(he,ae){return P.write(he,ae,"pkcs8")}function L(he,ae){return E.strictEqual(he.peek(),A.Ber.Integer,ae+" is not an Integer"),B.mpNormalize(he.readString(A.Ber.Integer,!0))}function U(he,ae,Q){Q.peek()===A.Ber.Integer&&(E.strictEqual(ae,"private","unexpected Integer at start of public key"),Q.readString(A.Ber.Integer,!0)),Q.readSequence();var se=Q.offset+Q.length,Ae=Q.readOID();switch(Ae){case"1.2.840.113549.1.1.1":return Q._offset=se,ae==="public"?V(Q):K(Q);case"1.2.840.10040.4.1":return ae==="public"?J(Q):ee(Q);case"1.2.840.10045.2.1":return ae==="public"?ce(Q):ne(Q);case"1.3.101.112":return ae==="public"?fe(Q):pe(Q);case"1.3.101.110":return ae==="public"?de(Q):ve(Q);default:throw new Error("Unknown key type OID "+Ae)}}function V(he){he.readSequence(A.Ber.BitString),he.readByte(),he.readSequence();var ae=L(he,"modulus"),Q=L(he,"exponent"),se={type:"rsa",source:he.originalInput,parts:[{name:"e",data:Q},{name:"n",data:ae}]};return new T(se)}function K(he){he.readSequence(A.Ber.OctetString),he.readSequence();var ae=L(he,"version");E.equal(ae[0],0,"unknown RSA private key version");var Q=L(he,"modulus"),se=L(he,"public exponent"),Ae=L(he,"private exponent"),ge=L(he,"prime1"),Ee=L(he,"prime2"),ke=L(he,"exponent1"),Se=L(he,"exponent2"),Ie=L(he,"iqmp"),we={type:"rsa",parts:[{name:"n",data:Q},{name:"e",data:se},{name:"d",data:Ae},{name:"iqmp",data:Ie},{name:"p",data:ge},{name:"q",data:Ee},{name:"dmodp",data:ke},{name:"dmodq",data:Se}]};return new R(we)}function J(he){he.readSequence();var ae=L(he,"p"),Q=L(he,"q"),se=L(he,"g");he.readSequence(A.Ber.BitString),he.readByte();var Ae=L(he,"y"),ge={type:"dsa",parts:[{name:"p",data:ae},{name:"q",data:Q},{name:"g",data:se},{name:"y",data:Ae}]};return new T(ge)}function ee(he){he.readSequence();var ae=L(he,"p"),Q=L(he,"q"),se=L(he,"g");he.readSequence(A.Ber.OctetString);var Ae=L(he,"x"),ge=B.calculateDSAPublic(se,ae,Ae),Ee={type:"dsa",parts:[{name:"p",data:ae},{name:"q",data:Q},{name:"g",data:se},{name:"y",data:ge},{name:"x",data:Ae}]};return new R(Ee)}function ie(he){var ae,Q,se,Ae,ge;if(he.peek()===A.Ber.OID){var Ee=he.readOID();for(Q=Object.keys(I.curves),se=0;se<Q.length;++se)if(Ae=Q[se],ge=I.curves[Ae],ge.pkcs8oid===Ee){ae=Ae;break}}else{he.readSequence();var ke=he.readString(A.Ber.Integer,!0);E.strictEqual(ke[0],1,"ECDSA key not version 1");var Se={};he.readSequence();var Ie=he.readOID();E.strictEqual(Ie,"1.2.840.10045.1.1","ECDSA key is not from a prime-field");var we=Se.p=B.mpNormalize(he.readString(A.Ber.Integer,!0));Se.size=we.length*8-B.countZeros(we),he.readSequence(),Se.a=B.mpNormalize(he.readString(A.Ber.OctetString,!0)),Se.b=B.mpNormalize(he.readString(A.Ber.OctetString,!0)),he.peek()===A.Ber.BitString&&(Se.s=he.readString(A.Ber.BitString,!0)),Se.G=he.readString(A.Ber.OctetString,!0),E.strictEqual(Se.G[0],4,"uncompressed G is required"),Se.n=B.mpNormalize(he.readString(A.Ber.Integer,!0)),Se.h=B.mpNormalize(he.readString(A.Ber.Integer,!0)),E.strictEqual(Se.h[0],1,"a cofactor=1 curve is required"),Q=Object.keys(I.curves);var xe=Object.keys(Se);for(se=0;se<Q.length;++se){Ae=Q[se],ge=I.curves[Ae];for(var Fe=!0,Ge=0;Ge<xe.length;++Ge){var Oe=xe[Ge];if(ge[Oe]!==void 0){if(typeof ge[Oe]=="object"&&ge[Oe].equals!==void 0){if(!ge[Oe].equals(Se[Oe])){Fe=!1;break}}else if(_.isBuffer(ge[Oe])){if(ge[Oe].toString("binary")!==Se[Oe].toString("binary")){Fe=!1;break}}else if(ge[Oe]!==Se[Oe]){Fe=!1;break}}}if(Fe){ae=Ae;break}}}return ae}function ne(he){var ae=ie(he);E.string(ae,"a known elliptic curve"),he.readSequence(A.Ber.OctetString),he.readSequence();var Q=L(he,"version");E.equal(Q[0],1,"unknown version of ECDSA key");var se=he.readString(A.Ber.OctetString,!0),Ae;if(he.peek()==160&&(he.readSequence(160),he._offset+=he.length),he.peek()==161&&(he.readSequence(161),Ae=he.readString(A.Ber.BitString,!0),Ae=B.ecNormalize(Ae)),Ae===void 0){var ge=B.publicFromPrivateECDSA(ae,se);Ae=ge.part.Q.data}var Ee={type:"ecdsa",parts:[{name:"curve",data:_.from(ae)},{name:"Q",data:Ae},{name:"d",data:se}]};return new R(Ee)}function ce(he){var ae=ie(he);E.string(ae,"a known elliptic curve");var Q=he.readString(A.Ber.BitString,!0);Q=B.ecNormalize(Q);var se={type:"ecdsa",parts:[{name:"curve",data:_.from(ae)},{name:"Q",data:Q}]};return new T(se)}function fe(he){he.peek()===0&&he.readByte();var ae=B.readBitString(he),Q={type:"ed25519",parts:[{name:"A",data:B.zeroPadToLength(ae,32)}]};return new T(Q)}function de(he){var ae=B.readBitString(he),Q={type:"curve25519",parts:[{name:"A",data:B.zeroPadToLength(ae,32)}]};return new T(Q)}function pe(he){he.peek()===0&&he.readByte(),he.readSequence(A.Ber.OctetString);var ae=he.readString(A.Ber.OctetString,!0);ae=B.zeroPadToLength(ae,32);for(var Q,se;(se=he.peek())!==null;)se===(A.Ber.Context|1)?Q=B.readBitString(he,se):(he.readSequence(se),he._offset+=he.length);Q===void 0&&(Q=B.calculateED25519Public(ae));var Ae={type:"ed25519",parts:[{name:"A",data:B.zeroPadToLength(Q,32)},{name:"k",data:B.zeroPadToLength(ae,32)}]};return new R(Ae)}function ve(he){he.peek()===0&&he.readByte(),he.readSequence(A.Ber.OctetString);var ae=he.readString(A.Ber.OctetString,!0);ae=B.zeroPadToLength(ae,32);var Q=B.calculateX25519Public(ae),se={type:"curve25519",parts:[{name:"A",data:B.zeroPadToLength(Q,32)},{name:"k",data:B.zeroPadToLength(ae,32)}]};return new R(se)}function ye(he){var ae=new A.BerWriter;return _e(ae,he),ae.buffer}function _e(he,ae){if(he.startSequence(),R.isPrivateKey(ae)){var Q=0;ae.type==="ed25519"&&(Q=1);var se=_.from([Q]);he.writeBuffer(se,A.Ber.Integer)}switch(he.startSequence(),ae.type){case"rsa":he.writeOID("1.2.840.113549.1.1.1"),R.isPrivateKey(ae)?be(ae,he):Te(ae,he);break;case"dsa":he.writeOID("1.2.840.10040.4.1"),R.isPrivateKey(ae)?ue(ae,he):O(ae,he);break;case"ecdsa":he.writeOID("1.2.840.10045.2.1"),R.isPrivateKey(ae)?te(ae,he):Y(ae,he);break;case"ed25519":he.writeOID("1.3.101.112"),R.isPrivateKey(ae)?le(ae,he):oe(ae,he);break;default:throw new Error("Unsupported key type: "+ae.type)}he.endSequence()}function be(he,ae){ae.writeNull(),ae.endSequence(),ae.startSequence(A.Ber.OctetString),ae.startSequence();var Q=_.from([0]);ae.writeBuffer(Q,A.Ber.Integer),ae.writeBuffer(he.part.n.data,A.Ber.Integer),ae.writeBuffer(he.part.e.data,A.Ber.Integer),ae.writeBuffer(he.part.d.data,A.Ber.Integer),ae.writeBuffer(he.part.p.data,A.Ber.Integer),ae.writeBuffer(he.part.q.data,A.Ber.Integer),(!he.part.dmodp||!he.part.dmodq)&&B.addRSAMissing(he),ae.writeBuffer(he.part.dmodp.data,A.Ber.Integer),ae.writeBuffer(he.part.dmodq.data,A.Ber.Integer),ae.writeBuffer(he.part.iqmp.data,A.Ber.Integer),ae.endSequence(),ae.endSequence()}function Te(he,ae){ae.writeNull(),ae.endSequence(),ae.startSequence(A.Ber.BitString),ae.writeByte(0),ae.startSequence(),ae.writeBuffer(he.part.n.data,A.Ber.Integer),ae.writeBuffer(he.part.e.data,A.Ber.Integer),ae.endSequence(),ae.endSequence()}function ue(he,ae){ae.startSequence(),ae.writeBuffer(he.part.p.data,A.Ber.Integer),ae.writeBuffer(he.part.q.data,A.Ber.Integer),ae.writeBuffer(he.part.g.data,A.Ber.Integer),ae.endSequence(),ae.endSequence(),ae.startSequence(A.Ber.OctetString),ae.writeBuffer(he.part.x.data,A.Ber.Integer),ae.endSequence()}function O(he,ae){ae.startSequence(),ae.writeBuffer(he.part.p.data,A.Ber.Integer),ae.writeBuffer(he.part.q.data,A.Ber.Integer),ae.writeBuffer(he.part.g.data,A.Ber.Integer),ae.endSequence(),ae.endSequence(),ae.startSequence(A.Ber.BitString),ae.writeByte(0),ae.writeBuffer(he.part.y.data,A.Ber.Integer),ae.endSequence()}function z(he,ae){var Q=I.curves[he.curve];if(Q.pkcs8oid)ae.writeOID(Q.pkcs8oid);else{ae.startSequence();var se=_.from([1]);ae.writeBuffer(se,A.Ber.Integer),ae.startSequence(),ae.writeOID("1.2.840.10045.1.1"),ae.writeBuffer(Q.p,A.Ber.Integer),ae.endSequence(),ae.startSequence();var Ae=Q.p;Ae[0]===0&&(Ae=Ae.slice(1)),ae.writeBuffer(Ae,A.Ber.OctetString),ae.writeBuffer(Q.b,A.Ber.OctetString),ae.writeBuffer(Q.s,A.Ber.BitString),ae.endSequence(),ae.writeBuffer(Q.G,A.Ber.OctetString),ae.writeBuffer(Q.n,A.Ber.Integer);var ge=Q.h;ge||(ge=_.from([1])),ae.writeBuffer(ge,A.Ber.Integer),ae.endSequence()}}function Y(he,ae){z(he,ae),ae.endSequence();var Q=B.ecNormalize(he.part.Q.data,!0);ae.writeBuffer(Q,A.Ber.BitString)}function te(he,ae){z(he,ae),ae.endSequence(),ae.startSequence(A.Ber.OctetString),ae.startSequence();var Q=_.from([1]);ae.writeBuffer(Q,A.Ber.Integer),ae.writeBuffer(he.part.d.data,A.Ber.OctetString),ae.startSequence(161);var se=B.ecNormalize(he.part.Q.data,!0);ae.writeBuffer(se,A.Ber.BitString),ae.endSequence(),ae.endSequence(),ae.endSequence()}function oe(he,ae){ae.endSequence(),B.writeBitString(ae,he.part.A.data)}function le(he,ae){ae.endSequence(),ae.startSequence(A.Ber.OctetString);for(var Q=B.mpNormalize(he.part.k.data);Q.length>32&&Q[0]===0;)Q=Q.slice(1);ae.writeBuffer(Q,A.Ber.OctetString),ae.endSequence(),B.writeBitString(ae,he.part.A.data,A.Ber.Context|1)}return pkcs8}var pkcs1,hasRequiredPkcs1;function requirePkcs1(){if(hasRequiredPkcs1)return pkcs1;hasRequiredPkcs1=1,pkcs1={read:L,readPkcs1:K,write:U,writePkcs1:pe};var E=requireAssert(),A=requireLib$4(),_=requireSafer().Buffer,I=requireAlgs(),B=requireUtils$1(),T=requireKey(),R=requirePrivateKey(),P=requirePem(),D=requirePkcs8(),F=D.readECDSACurve;function L(Y,te){return P.read(Y,te,"pkcs1")}function U(Y,te){return P.write(Y,te,"pkcs1")}function V(Y,te){return E.strictEqual(Y.peek(),A.Ber.Integer,te+" is not an Integer"),B.mpNormalize(Y.readString(A.Ber.Integer,!0))}function K(Y,te,oe){switch(Y){case"RSA":if(te==="public")return J(oe);if(te==="private")return ee(oe);throw new Error("Unknown key type: "+te);case"DSA":if(te==="public")return ce(oe);if(te==="private")return ie(oe);throw new Error("Unknown key type: "+te);case"EC":case"ECDSA":if(te==="private")return de(oe);if(te==="public")return fe(oe);throw new Error("Unknown key type: "+te);case"EDDSA":case"EdDSA":if(te==="private")return ne(oe);throw new Error(te+" keys not supported with EdDSA");default:throw new Error("Unknown key algo: "+Y)}}function J(Y){var te=V(Y,"modulus"),oe=V(Y,"exponent"),le={type:"rsa",parts:[{name:"e",data:oe},{name:"n",data:te}]};return new T(le)}function ee(Y){var te=V(Y,"version");E.strictEqual(te[0],0);var oe=V(Y,"modulus"),le=V(Y,"public exponent"),he=V(Y,"private exponent"),ae=V(Y,"prime1"),Q=V(Y,"prime2"),se=V(Y,"exponent1"),Ae=V(Y,"exponent2"),ge=V(Y,"iqmp"),Ee={type:"rsa",parts:[{name:"n",data:oe},{name:"e",data:le},{name:"d",data:he},{name:"iqmp",data:ge},{name:"p",data:ae},{name:"q",data:Q},{name:"dmodp",data:se},{name:"dmodq",data:Ae}]};return new R(Ee)}function ie(Y){var te=V(Y,"version");E.strictEqual(te.readUInt8(0),0);var oe=V(Y,"p"),le=V(Y,"q"),he=V(Y,"g"),ae=V(Y,"y"),Q=V(Y,"x"),se={type:"dsa",parts:[{name:"p",data:oe},{name:"q",data:le},{name:"g",data:he},{name:"y",data:ae},{name:"x",data:Q}]};return new R(se)}function ne(Y){var te=V(Y,"version");E.strictEqual(te.readUInt8(0),1);var oe=Y.readString(A.Ber.OctetString,!0);Y.readSequence(160);var le=Y.readOID();E.strictEqual(le,"1.3.101.112","the ed25519 curve identifier"),Y.readSequence(161);var he=B.readBitString(Y),ae={type:"ed25519",parts:[{name:"A",data:B.zeroPadToLength(he,32)},{name:"k",data:oe}]};return new R(ae)}function ce(Y){var te=V(Y,"y"),oe=V(Y,"p"),le=V(Y,"q"),he=V(Y,"g"),ae={type:"dsa",parts:[{name:"y",data:te},{name:"p",data:oe},{name:"q",data:le},{name:"g",data:he}]};return new T(ae)}function fe(Y){Y.readSequence();var te=Y.readOID();E.strictEqual(te,"1.2.840.10045.2.1","must be ecPublicKey");for(var oe=Y.readOID(),le,he=Object.keys(I.curves),ae=0;ae<he.length;++ae){var Q=he[ae],se=I.curves[Q];if(se.pkcs8oid===oe){le=Q;break}}E.string(le,"a known ECDSA named curve");var Ae=Y.readString(A.Ber.BitString,!0);Ae=B.ecNormalize(Ae);var ge={type:"ecdsa",parts:[{name:"curve",data:_.from(le)},{name:"Q",data:Ae}]};return new T(ge)}function de(Y){var te=V(Y,"version");E.strictEqual(te.readUInt8(0),1);var oe=Y.readString(A.Ber.OctetString,!0);Y.readSequence(160);var le=F(Y);E.string(le,"a known elliptic curve"),Y.readSequence(161);var he=Y.readString(A.Ber.BitString,!0);he=B.ecNormalize(he);var ae={type:"ecdsa",parts:[{name:"curve",data:_.from(le)},{name:"Q",data:he},{name:"d",data:oe}]};return new R(ae)}function pe(Y,te){switch(Y.startSequence(),te.type){case"rsa":R.isPrivateKey(te)?ye(Y,te):ve(Y,te);break;case"dsa":R.isPrivateKey(te)?_e(Y,te):be(Y,te);break;case"ecdsa":R.isPrivateKey(te)?ue(Y,te):Te(Y,te);break;case"ed25519":R.isPrivateKey(te)?O(Y,te):z();break;default:throw new Error("Unknown key algo: "+te.type)}Y.endSequence()}function ve(Y,te){Y.writeBuffer(te.part.n.data,A.Ber.Integer),Y.writeBuffer(te.part.e.data,A.Ber.Integer)}function ye(Y,te){var oe=_.from([0]);Y.writeBuffer(oe,A.Ber.Integer),Y.writeBuffer(te.part.n.data,A.Ber.Integer),Y.writeBuffer(te.part.e.data,A.Ber.Integer),Y.writeBuffer(te.part.d.data,A.Ber.Integer),Y.writeBuffer(te.part.p.data,A.Ber.Integer),Y.writeBuffer(te.part.q.data,A.Ber.Integer),(!te.part.dmodp||!te.part.dmodq)&&B.addRSAMissing(te),Y.writeBuffer(te.part.dmodp.data,A.Ber.Integer),Y.writeBuffer(te.part.dmodq.data,A.Ber.Integer),Y.writeBuffer(te.part.iqmp.data,A.Ber.Integer)}function _e(Y,te){var oe=_.from([0]);Y.writeBuffer(oe,A.Ber.Integer),Y.writeBuffer(te.part.p.data,A.Ber.Integer),Y.writeBuffer(te.part.q.data,A.Ber.Integer),Y.writeBuffer(te.part.g.data,A.Ber.Integer),Y.writeBuffer(te.part.y.data,A.Ber.Integer),Y.writeBuffer(te.part.x.data,A.Ber.Integer)}function be(Y,te){Y.writeBuffer(te.part.y.data,A.Ber.Integer),Y.writeBuffer(te.part.p.data,A.Ber.Integer),Y.writeBuffer(te.part.q.data,A.Ber.Integer),Y.writeBuffer(te.part.g.data,A.Ber.Integer)}function Te(Y,te){Y.startSequence(),Y.writeOID("1.2.840.10045.2.1");var oe=te.part.curve.data.toString(),le=I.curves[oe].pkcs8oid;E.string(le,"a known ECDSA named curve"),Y.writeOID(le),Y.endSequence();var he=B.ecNormalize(te.part.Q.data,!0);Y.writeBuffer(he,A.Ber.BitString)}function ue(Y,te){var oe=_.from([1]);Y.writeBuffer(oe,A.Ber.Integer),Y.writeBuffer(te.part.d.data,A.Ber.OctetString),Y.startSequence(160);var le=te.part.curve.data.toString(),he=I.curves[le].pkcs8oid;E.string(he,"a known ECDSA named curve"),Y.writeOID(he),Y.endSequence(),Y.startSequence(161);var ae=B.ecNormalize(te.part.Q.data,!0);Y.writeBuffer(ae,A.Ber.BitString),Y.endSequence()}function O(Y,te){var oe=_.from([1]);Y.writeBuffer(oe,A.Ber.Integer),Y.writeBuffer(te.part.k.data,A.Ber.OctetString),Y.startSequence(160),Y.writeOID("1.3.101.112"),Y.endSequence(),Y.startSequence(161),B.writeBitString(Y,te.part.A.data),Y.endSequence()}function z(Y,te){throw new Error("Public keys are not supported for EdDSA PKCS#1")}return pkcs1}var rfc4253,hasRequiredRfc4253;function requireRfc4253(){if(hasRequiredRfc4253)return rfc4253;hasRequiredRfc4253=1,rfc4253={read:F.bind(void 0,!1,void 0),readType:F.bind(void 0,!1),write:L,readPartial:F.bind(void 0,!0),readInternal:F,keyTypeToAlg:D,algToKeyType:P};var E=requireAssert(),A=requireSafer().Buffer,_=requireAlgs(),I=requireUtils$1(),B=requireKey(),T=requirePrivateKey(),R=requireSshBuffer();function P(U){if(E.string(U),U==="ssh-dss")return"dsa";if(U==="ssh-rsa")return"rsa";if(U==="ssh-ed25519")return"ed25519";if(U==="ssh-curve25519")return"curve25519";if(U.match(/^ecdsa-sha2-/))return"ecdsa";throw new Error("Unknown algorithm "+U)}function D(U){if(E.object(U),U.type==="dsa")return"ssh-dss";if(U.type==="rsa")return"ssh-rsa";if(U.type==="ed25519")return"ssh-ed25519";if(U.type==="curve25519")return"ssh-curve25519";if(U.type==="ecdsa")return"ecdsa-sha2-"+U.part.curve.data.toString();throw new Error("Unknown key type "+U.type)}function F(U,V,K,J){typeof K=="string"&&(K=A.from(K)),E.buffer(K,"buf");var ee={},ie=ee.parts=[],ne=new R({buffer:K}),ce=ne.readString();E.ok(!ne.atEnd(),"key must have at least one part"),ee.type=P(ce);var fe=_.info[ee.type].parts.length;for(V&&V==="private"&&(fe=_.privInfo[ee.type].parts.length);!ne.atEnd()&&ie.length<fe;)ie.push(ne.readPart());for(;!U&&!ne.atEnd();)ie.push(ne.readPart());E.ok(ie.length>=1,"key must have at least one part"),E.ok(U||ne.atEnd(),"leftover bytes at end of key");var de=B,pe=_.info[ee.type];if((V==="private"||pe.parts.length!==ie.length)&&(pe=_.privInfo[ee.type],de=T),E.strictEqual(pe.parts.length,ie.length),ee.type==="ecdsa"){var ve=/^ecdsa-sha2-(.+)$/.exec(ce);E.ok(ve!==null),E.strictEqual(ve[1],ie[0].data.toString())}for(var ye=!0,_e=0;_e<pe.parts.length;++_e){var be=ie[_e];if(be.name=pe.parts[_e],ee.type==="ed25519"&&be.name==="k"&&(be.data=be.data.slice(0,32)),be.name!=="curve"&&pe.normalize!==!1){var Te;ee.type==="ed25519"?Te=I.zeroPadToLength(be.data,32):Te=I.mpNormalize(be.data),Te.toString("binary")!==be.data.toString("binary")&&(be.data=Te,ye=!1)}}return ye&&(ee._rfc4253Cache=ne.toBuffer()),U&&typeof U=="object"&&(U.remainder=ne.remainder(),U.consumed=ne._offset),new de(ee)}function L(U,V){E.object(U);var K=D(U),J,ee=_.info[U.type];T.isPrivateKey(U)&&(ee=_.privInfo[U.type]);var ie=ee.parts,ne=new R({});for(ne.writeString(K),J=0;J<ie.length;++J){var ce=U.part[ie[J]].data;ee.normalize!==!1&&(U.type==="ed25519"?ce=I.zeroPadToLength(ce,32):ce=I.mpNormalize(ce)),U.type==="ed25519"&&ie[J]==="k"&&(ce=A.concat([ce,U.part.A.data])),ne.writeBuffer(ce)}return ne.toBuffer()}return rfc4253}var bcryptPbkdf,hasRequiredBcryptPbkdf;function requireBcryptPbkdf(){if(hasRequiredBcryptPbkdf)return bcryptPbkdf;hasRequiredBcryptPbkdf=1;var E=requireNaclFast().lowlevel.crypto_hash,A=0,_=function(){this.S=[new Uint32Array([3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946]),new Uint32Array([1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055]),new Uint32Array([3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504]),new Uint32Array([976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462])],this.P=new Uint32Array([608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731])};function I(F,L,U){return(F[0][L[U+3]]+F[1][L[U+2]]^F[2][L[U+1]])+F[3][L[U]]}_.prototype.encipher=function(F,L){L===void 0&&(L=new Uint8Array(F.buffer),F.byteOffset!==0&&(L=L.subarray(F.byteOffset))),F[0]^=this.P[0];for(var U=1;U<16;U+=2)F[1]^=I(this.S,L,0)^this.P[U],F[0]^=I(this.S,L,4)^this.P[U+1];var V=F[0];F[0]=F[1]^this.P[17],F[1]=V},_.prototype.decipher=function(F){var L=new Uint8Array(F.buffer);F.byteOffset!==0&&(L=L.subarray(F.byteOffset)),F[0]^=this.P[17];for(var U=16;U>0;U-=2)F[1]^=I(this.S,L,0)^this.P[U],F[0]^=I(this.S,L,4)^this.P[U-1];var V=F[0];F[0]=F[1]^this.P[0],F[1]=V};function B(F,L){var U,V=0;for(U=0;U<4;U++,A++)A>=L&&(A=0),V=V<<8|F[A];return V}_.prototype.expand0state=function(F,L){var U=new Uint32Array(2),V,K,J=new Uint8Array(U.buffer);for(V=0,A=0;V<18;V++)this.P[V]^=B(F,L);for(A=0,V=0;V<18;V+=2)this.encipher(U,J),this.P[V]=U[0],this.P[V+1]=U[1];for(V=0;V<4;V++)for(K=0;K<256;K+=2)this.encipher(U,J),this.S[V][K]=U[0],this.S[V][K+1]=U[1]},_.prototype.expandstate=function(F,L,U,V){var K=new Uint32Array(2),J,ee;for(J=0,A=0;J<18;J++)this.P[J]^=B(U,V);for(J=0,A=0;J<18;J+=2)K[0]^=B(F,L),K[1]^=B(F,L),this.encipher(K),this.P[J]=K[0],this.P[J+1]=K[1];for(J=0;J<4;J++)for(ee=0;ee<256;ee+=2)K[0]^=B(F,L),K[1]^=B(F,L),this.encipher(K),this.S[J][ee]=K[0],this.S[J][ee+1]=K[1];A=0},_.prototype.enc=function(F,L){for(var U=0;U<L;U++)this.encipher(F.subarray(U*2))},_.prototype.dec=function(F,L){for(var U=0;U<L;U++)this.decipher(F.subarray(U*2))};var T=8,R=32;function P(F,L,U){var V=new _,K=new Uint32Array(T),J,ee=new Uint8Array([79,120,121,99,104,114,111,109,97,116,105,99,66,108,111,119,102,105,115,104,83,119,97,116,68,121,110,97,109,105,116,101]);for(V.expandstate(L,64,F,64),J=0;J<64;J++)V.expand0state(L,64),V.expand0state(F,64);for(J=0;J<T;J++)K[J]=B(ee,ee.byteLength);for(J=0;J<64;J++)V.enc(K,K.byteLength/8);for(J=0;J<T;J++)U[4*J+3]=K[J]>>>24,U[4*J+2]=K[J]>>>16,U[4*J+1]=K[J]>>>8,U[4*J+0]=K[J]}function D(F,L,U,V,K,J,ee){var ie=new Uint8Array(64),ne=new Uint8Array(64),ce=new Uint8Array(R),fe=new Uint8Array(R),de=new Uint8Array(V+4),pe,ve,ye,_e,be,Te,ue=J;if(ee<1||L===0||V===0||J===0||J>ce.byteLength*ce.byteLength||V>1<<20)return-1;for(_e=Math.floor((J+ce.byteLength-1)/ce.byteLength),ye=Math.floor((J+_e-1)/_e),pe=0;pe<V;pe++)de[pe]=U[pe];for(E(ie,F,L),Te=1;J>0;Te++){for(de[V+0]=Te>>>24,de[V+1]=Te>>>16,de[V+2]=Te>>>8,de[V+3]=Te,E(ne,de,V+4),P(ie,ne,fe),pe=ce.byteLength;pe--;)ce[pe]=fe[pe];for(pe=1;pe<ee;pe++)for(E(ne,fe,fe.byteLength),P(ie,ne,fe),ve=0;ve<ce.byteLength;ve++)ce[ve]^=fe[ve];for(ye=Math.min(ye,J),pe=0;pe<ye&&(be=pe*_e+(Te-1),!(be>=ue));pe++)K[be]=ce[pe];J-=pe}return 0}return bcryptPbkdf={BLOCKS:T,HASHSIZE:R,hash:P,pbkdf:D},bcryptPbkdf}var sshPrivate,hasRequiredSshPrivate;function requireSshPrivate(){if(hasRequiredSshPrivate)return sshPrivate;hasRequiredSshPrivate=1,sshPrivate={read:L,readSSHPrivate:V,write:K};var E=requireAssert();requireLib$4();var A=requireSafer().Buffer;requireAlgs();var _=requireUtils$1(),I=requireCryptoBrowserify();requireKey();var B=requirePrivateKey(),T=requirePem(),R=requireRfc4253(),P=requireSshBuffer(),D=requireErrors$1(),F;function L(J,ee){return T.read(J,ee)}var U="openssh-key-v1";function V(J,ee,ie){ee=new P({buffer:ee});var ne=ee.readCString();E.strictEqual(ne,U,"bad magic string");var ce=ee.readString(),fe=ee.readString(),de=ee.readBuffer(),pe=ee.readInt();if(pe!==1)throw new Error("OpenSSH-format key file contains multiple keys: this is unsupported.");var ve=ee.readBuffer();if(J==="public")return E.ok(ee.atEnd(),"excess bytes left after key"),R.read(ve);var ye=ee.readBuffer();E.ok(ee.atEnd(),"excess bytes left after key");var _e=new P({buffer:de});switch(fe){case"none":if(ce!=="none")throw new Error('OpenSSH-format key uses KDF "none" but specifies a cipher other than "none"');break;case"bcrypt":var be=_e.readBuffer(),Te=_e.readInt(),ue=_.opensshCipherInfo(ce);if(F===void 0&&(F=requireBcryptPbkdf()),typeof ie.passphrase=="string"&&(ie.passphrase=A.from(ie.passphrase,"utf-8")),!A.isBuffer(ie.passphrase))throw new D.KeyEncryptedError(ie.filename,"OpenSSH");var O=new Uint8Array(ie.passphrase),z=new Uint8Array(be),Y=new Uint8Array(ue.keySize+ue.blockSize),te=F.pbkdf(O,O.length,z,z.length,Y,Y.length,Te);if(te!==0)throw new Error("bcrypt_pbkdf function returned failure, parameters invalid");Y=A.from(Y);var oe=Y.slice(0,ue.keySize),le=Y.slice(ue.keySize,ue.keySize+ue.blockSize),he=I.createDecipheriv(ue.opensslName,oe,le);he.setAutoPadding(!1);var ae,Q=[];for(he.once("error",function(Se){throw Se.toString().indexOf("bad decrypt")!==-1?new Error("Incorrect passphrase supplied, could not decrypt key"):Se}),he.write(ye),he.end();(ae=he.read())!==null;)Q.push(ae);ye=A.concat(Q);break;default:throw new Error('OpenSSH-format key uses unknown KDF "'+fe+'"')}ee=new P({buffer:ye});var se=ee.readInt(),Ae=ee.readInt();if(se!==Ae)throw new Error("Incorrect passphrase supplied, could not decrypt key");var ge={},Ee=R.readInternal(ge,"private",ee.remainder());ee.skip(ge.consumed);var ke=ee.readString();return Ee.comment=ke,Ee}function K(J,ee){var ie;B.isPrivateKey(J)?ie=J.toPublic():ie=J;var ne="none",ce="none",fe=A.alloc(0),de={blockSize:8},pe;ee!==void 0&&(pe=ee.passphrase,typeof pe=="string"&&(pe=A.from(pe,"utf-8")),pe!==void 0&&(E.buffer(pe,"options.passphrase"),E.optionalString(ee.cipher,"options.cipher"),ne=ee.cipher,ne===void 0&&(ne="aes128-ctr"),de=_.opensshCipherInfo(ne),ce="bcrypt"));var ve;if(B.isPrivateKey(J)){ve=new P({});var ye=I.randomBytes(4).readUInt32BE(0);ve.writeInt(ye),ve.writeInt(ye),ve.write(J.toBuffer("rfc4253")),ve.writeString(J.comment||"");for(var _e=1;ve._offset%de.blockSize!==0;)ve.writeChar(_e++);ve=ve.toBuffer()}switch(ce){case"none":break;case"bcrypt":var be=I.randomBytes(16),Te=16,ue=new P({});ue.writeBuffer(be),ue.writeInt(Te),fe=ue.toBuffer(),F===void 0&&(F=requireBcryptPbkdf());var O=new Uint8Array(pe),z=new Uint8Array(be),Y=new Uint8Array(de.keySize+de.blockSize),te=F.pbkdf(O,O.length,z,z.length,Y,Y.length,Te);if(te!==0)throw new Error("bcrypt_pbkdf function returned failure, parameters invalid");Y=A.from(Y);var oe=Y.slice(0,de.keySize),le=Y.slice(de.keySize,de.keySize+de.blockSize),he=I.createCipheriv(de.opensslName,oe,le);he.setAutoPadding(!1);var ae,Q=[];for(he.once("error",function(we){throw we}),he.write(ve),he.end();(ae=he.read())!==null;)Q.push(ae);ve=A.concat(Q);break;default:throw new Error("Unsupported kdf "+ce)}var se=new P({});se.writeCString(U),se.writeString(ne),se.writeString(ce),se.writeBuffer(fe),se.writeInt(1),se.writeBuffer(ie.toBuffer("rfc4253")),ve&&se.writeBuffer(ve),se=se.toBuffer();var Ae;B.isPrivateKey(J)?Ae="OPENSSH PRIVATE KEY":Ae="OPENSSH PUBLIC KEY";var ge=se.toString("base64"),Ee=ge.length+ge.length/70+18+16+Ae.length*2+10;se=A.alloc(Ee);var ke=0;ke+=se.write("-----BEGIN "+Ae+`-----
`,ke);for(var Se=0;Se<ge.length;){var Ie=Se+70;Ie>ge.length&&(Ie=ge.length),ke+=se.write(ge.slice(Se,Ie),ke),se[ke++]=10,Se=Ie}return ke+=se.write("-----END "+Ae+`-----
`,ke),se.slice(0,ke)}return sshPrivate}var pem,hasRequiredPem;function requirePem(){if(hasRequiredPem)return pem;hasRequiredPem=1,pem={read:ie,write:ne};var E=requireAssert(),A=requireLib$4(),_=requireCryptoBrowserify(),I=requireSafer().Buffer;requireAlgs();var B=requireUtils$1(),T=requireKey(),R=requirePrivateKey(),P=requirePkcs1(),D=requirePkcs8(),F=requireSshPrivate(),L=requireRfc4253(),U=requireErrors$1(),V="1.2.840.113549.1.5.13",K="1.2.840.113549.1.5.12",J={"1.2.840.113549.3.7":"3des-cbc","2.16.840.1.101.3.4.1.2":"aes128-cbc","2.16.840.1.101.3.4.1.42":"aes256-cbc"};Object.keys(J).forEach(function(ce){});var ee={"1.2.840.113549.2.7":"sha1","1.2.840.113549.2.9":"sha256","1.2.840.113549.2.11":"sha512"};Object.keys(ee).forEach(function(ce){});function ie(ce,fe,de){var pe=ce;typeof ce!="string"&&(E.buffer(ce,"buf"),ce=ce.toString("ascii"));for(var ve=ce.trim().split(/[\r\n]+/g),ye,_e=-1;!ye&&_e<ve.length;)ye=ve[++_e].match(/[-]+[ ]*BEGIN ([A-Z0-9][A-Za-z0-9]+ )?(PUBLIC|PRIVATE) KEY[ ]*[-]+/);E.ok(ye,"invalid PEM header");for(var be,Te=ve.length;!be&&Te>0;)be=ve[--Te].match(/[-]+[ ]*END ([A-Z0-9][A-Za-z0-9]+ )?(PUBLIC|PRIVATE) KEY[ ]*[-]+/);E.ok(be,"invalid PEM footer"),E.equal(ye[2],be[2]);var ue=ye[2].toLowerCase(),O;ye[1]&&(E.equal(ye[1],be[1],"PEM header and footer mismatch"),O=ye[1].trim()),ve=ve.slice(_e,Te+1);for(var z={};ve=ve.slice(1),ye=ve[0].match(/^([A-Za-z0-9-]+): (.+)$/),!!ye;)z[ye[1].toLowerCase()]=ye[2];ve=ve.slice(0,-1).join(""),ce=I.from(ve,"base64");var Y,te,oe;if(z["proc-type"]){var le=z["proc-type"].split(",");if(le[0]==="4"&&le[1]==="ENCRYPTED")if(typeof fe.passphrase=="string"&&(fe.passphrase=I.from(fe.passphrase,"utf-8")),I.isBuffer(fe.passphrase))le=z["dek-info"].split(","),E.ok(le.length===2),Y=le[0].toLowerCase(),oe=I.from(le[1],"hex"),te=B.opensslKeyDeriv(Y,oe,fe.passphrase,1).key;else throw new U.KeyEncryptedError(fe.filename,"PEM")}if(O&&O.toLowerCase()==="encrypted"){var he=new A.BerReader(ce),ae;he.readSequence(),he.readSequence(),ae=he.offset+he.length;var Q=he.readOID();if(Q!==V)throw new Error("Unsupported PEM/PKCS8 encryption scheme: "+Q);he.readSequence(),he.readSequence();var se=he.offset+he.length,Ae=he.readOID();if(Ae!==K)throw new Error("Unsupported PBES2 KDF: "+Ae);he.readSequence();var ge=he.readString(A.Ber.OctetString,!0),Ee=he.readInt(),ke="sha1";if(he.offset<se){he.readSequence();var Se=he.readOID();if(ke=ee[Se],ke===void 0)throw new Error("Unsupported PBKDF2 hash: "+Se)}he._offset=se,he.readSequence();var Ie=he.readOID();if(Y=J[Ie],Y===void 0)throw new Error("Unsupported PBES2 cipher: "+Ie);if(oe=he.readString(A.Ber.OctetString,!0),he._offset=ae,ce=he.readString(A.Ber.OctetString,!0),typeof fe.passphrase=="string"&&(fe.passphrase=I.from(fe.passphrase,"utf-8")),!I.isBuffer(fe.passphrase))throw new U.KeyEncryptedError(fe.filename,"PEM");var we=B.opensshCipherInfo(Y);Y=we.opensslName,te=B.pbkdf2(ke,ge,Ee,we.keySize,fe.passphrase),O=void 0}if(Y&&te&&oe){var xe=_.createDecipheriv(Y,te,oe),Fe,Ge=[];for(xe.once("error",function(et){throw et.toString().indexOf("bad decrypt")!==-1?new Error("Incorrect passphrase supplied, could not decrypt key"):et}),xe.write(ce),xe.end();(Fe=xe.read())!==null;)Ge.push(Fe);ce=I.concat(Ge)}if(O&&O.toLowerCase()==="openssh")return F.readSSHPrivate(ue,ce,fe);if(O&&O.toLowerCase()==="ssh2")return L.readType(ue,ce,fe);var Oe=new A.BerReader(ce);return Oe.originalInput=pe,Oe.readSequence(),O?(de&&E.strictEqual(de,"pkcs1"),P.readPkcs1(O,ue,Oe)):(de&&E.strictEqual(de,"pkcs8"),D.readPkcs8(O,ue,Oe))}function ne(ce,fe,de){E.object(ce);var pe={ecdsa:"EC",rsa:"RSA",dsa:"DSA",ed25519:"EdDSA"}[ce.type],ve,ye=new A.BerWriter;if(R.isPrivateKey(ce))de&&de==="pkcs8"?(ve="PRIVATE KEY",D.writePkcs8(ye,ce)):(de&&E.strictEqual(de,"pkcs1"),ve=pe+" PRIVATE KEY",P.writePkcs1(ye,ce));else if(T.isKey(ce))de&&de==="pkcs1"?(ve=pe+" PUBLIC KEY",P.writePkcs1(ye,ce)):(de&&E.strictEqual(de,"pkcs8"),ve="PUBLIC KEY",D.writePkcs8(ye,ce));else throw new Error("key is not a Key or PrivateKey");var _e=ye.buffer.toString("base64"),be=_e.length+_e.length/64+18+16+ve.length*2+10,Te=I.alloc(be),ue=0;ue+=Te.write("-----BEGIN "+ve+`-----
`,ue);for(var O=0;O<_e.length;){var z=O+64;z>_e.length&&(z=_e.length),ue+=Te.write(_e.slice(O,z),ue),Te[ue++]=10,O=z}return ue+=Te.write("-----END "+ve+`-----
`,ue),Te.slice(0,ue)}return pem}var ssh,hasRequiredSsh;function requireSsh(){if(hasRequiredSsh)return ssh;hasRequiredSsh=1,ssh={read:R,write:P};var E=requireAssert(),A=requireSafer().Buffer,_=requireRfc4253();requireUtils$1();var I=requireKey();requirePrivateKey(),requireSshPrivate();var B=/^([a-z0-9-]+)[ \t]+([a-zA-Z0-9+\/]+[=]*)([ \t]+([^ \t][^\n]*[\n]*)?)?$/,T=/^([a-z0-9-]+)[ \t\n]+([a-zA-Z0-9+\/][a-zA-Z0-9+\/ \t\n=]*)([^a-zA-Z0-9+\/ \t\n=].*)?$/;function R(D,F){typeof D!="string"&&(E.buffer(D,"buf"),D=D.toString("ascii"));var L=D.trim().replace(/[\\\r]/g,""),U=L.match(B);U||(U=L.match(T)),E.ok(U,"key must match regex");var V=_.algToKeyType(U[1]),K=A.from(U[2],"base64"),J,ee={};if(U[4])try{J=_.read(K)}catch{U=L.match(T),E.ok(U,"key must match regex"),K=A.from(U[2],"base64"),J=_.readInternal(ee,"public",K)}else J=_.readInternal(ee,"public",K);if(E.strictEqual(V,J.type),U[4]&&U[4].length>0)J.comment=U[4];else if(ee.consumed){var ie=U[2]+(U[3]?U[3]:""),ne=Math.ceil(ee.consumed/3)*4;ie=ie.slice(0,ne-2).replace(/[^a-zA-Z0-9+\/=]/g,"")+ie.slice(ne-2);var ce=ee.consumed%3;for(ce>0&&ie.slice(ne-1,ne)!=="="&&ne--;ie.slice(ne,ne+1)==="=";)ne++;var fe=ie.slice(ne);fe=fe.replace(/[\r\n]/g," ").replace(/^\s+/,""),fe.match(/^[a-zA-Z0-9]/)&&(J.comment=fe)}return J}function P(D,F){if(E.object(D),!I.isKey(D))throw new Error("Must be a public key");var L=[],U=_.keyTypeToAlg(D);L.push(U);var V=_.write(D);return L.push(V.toString("base64")),D.comment&&L.push(D.comment),A.from(L.join(" "))}return ssh}var dnssec,hasRequiredDnssec;function requireDnssec(){if(hasRequiredDnssec)return dnssec;hasRequiredDnssec=1,dnssec={read:P,write:ie};var E=requireAssert(),A=requireSafer().Buffer,_=requireKey(),I=requirePrivateKey(),B=requireUtils$1();requireSshBuffer(),requireDhe();var T={"rsa-sha1":5,"rsa-sha256":8,"rsa-sha512":10,"ecdsa-p256-sha256":13,"ecdsa-p384-sha384":14},R={};Object.keys(T).forEach(function(ne){R[T[ne]]=ne.toUpperCase()});function P(ne,ce){typeof ne!="string"&&(E.buffer(ne,"buf"),ne=ne.toString("ascii"));var fe=ne.split(`
`);if(fe[0].match(/^Private-key-format\: v1/)){var de=fe[1].split(" "),pe=parseInt(de[1],10),ve=de[2];if(!R[pe])throw new Error("Unsupported algorithm: "+ve);return U(pe,fe.slice(2))}for(var ye=0;fe[ye].match(/^\;/);)ye++;if((fe[ye].match(/\. IN KEY /)||fe[ye].match(/\. IN DNSKEY /))&&fe[ye+1].length===0)return D(fe[ye]);throw new Error("Cannot parse dnssec key")}function D(ne){var ce=ne.split(" "),fe=parseInt(ce[5],10);if(!R[fe])throw new Error("Unsupported algorithm: "+fe);var de=ce.slice(6,ce.length).join(),pe=A.from(de,"base64");if(R[fe].match(/^RSA-/)){var ve=pe.readUInt8(0);if(ve!=3&&ve!=1)throw new Error("Cannot parse dnssec key: unsupported exponent length");var ye=pe.slice(1,ve+1);ye=B.mpNormalize(ye);var _e=pe.slice(1+ve);_e=B.mpNormalize(_e);var be={type:"rsa",parts:[]};return be.parts.push({name:"e",data:ye}),be.parts.push({name:"n",data:_e}),new _(be)}if(R[fe]==="ECDSA-P384-SHA384"||R[fe]==="ECDSA-P256-SHA256"){var Te="nistp384",ue=384;R[fe].match(/^ECDSA-P256-SHA256/)&&(Te="nistp256",ue=256);var O={type:"ecdsa",curve:Te,size:ue,parts:[{name:"curve",data:A.from(Te)},{name:"Q",data:B.ecNormalize(pe)}]};return new _(O)}throw new Error("Unsupported algorithm: "+R[fe])}function F(ne){return A.from(ne.split(" ")[1],"base64")}function L(ne){var ce={};ne.forEach(function(de){de.split(" ")[0]==="Modulus:"?ce.n=F(de):de.split(" ")[0]==="PublicExponent:"?ce.e=F(de):de.split(" ")[0]==="PrivateExponent:"?ce.d=F(de):de.split(" ")[0]==="Prime1:"?ce.p=F(de):de.split(" ")[0]==="Prime2:"?ce.q=F(de):de.split(" ")[0]==="Exponent1:"?ce.dmodp=F(de):de.split(" ")[0]==="Exponent2:"?ce.dmodq=F(de):de.split(" ")[0]==="Coefficient:"&&(ce.iqmp=F(de))});var fe={type:"rsa",parts:[{name:"e",data:B.mpNormalize(ce.e)},{name:"n",data:B.mpNormalize(ce.n)},{name:"d",data:B.mpNormalize(ce.d)},{name:"p",data:B.mpNormalize(ce.p)},{name:"q",data:B.mpNormalize(ce.q)},{name:"dmodp",data:B.mpNormalize(ce.dmodp)},{name:"dmodq",data:B.mpNormalize(ce.dmodq)},{name:"iqmp",data:B.mpNormalize(ce.iqmp)}]};return new I(fe)}function U(ne,ce){if(R[ne].match(/^RSA-/))return L(ce);if(R[ne]==="ECDSA-P384-SHA384"||R[ne]==="ECDSA-P256-SHA256"){var fe=A.from(ce[0].split(" ")[1],"base64"),de="nistp384",pe=384;R[ne]==="ECDSA-P256-SHA256"&&(de="nistp256",pe=256);var ve=B.publicFromPrivateECDSA(de,fe),ye=ve.part.Q.data,_e={type:"ecdsa",curve:de,size:pe,parts:[{name:"curve",data:A.from(de)},{name:"d",data:fe},{name:"Q",data:ye}]};return new I(_e)}throw new Error("Unsupported algorithm: "+R[ne])}function V(ne){var ce=ne.getFullYear()+"",fe=ne.getMonth()+1,de=ce+fe+ne.getUTCDate();return de+=""+ne.getUTCHours()+ne.getUTCMinutes(),de+=ne.getUTCSeconds(),de}function K(ne){if(!ne||!ne.hashAlgo||ne.hashAlgo==="sha1")return"5 (RSASHA1)";if(ne.hashAlgo==="sha256")return"8 (RSASHA256)";if(ne.hashAlgo==="sha512")return"10 (RSASHA512)";throw new Error("Unknown or unsupported hash: "+ne.hashAlgo)}function J(ne,ce){(!ne.part.dmodp||!ne.part.dmodq)&&B.addRSAMissing(ne);var fe="";fe+=`Private-key-format: v1.3
`,fe+="Algorithm: "+K(ce)+`
`;var de=B.mpDenormalize(ne.part.n.data);fe+="Modulus: "+de.toString("base64")+`
`;var pe=B.mpDenormalize(ne.part.e.data);fe+="PublicExponent: "+pe.toString("base64")+`
`;var ve=B.mpDenormalize(ne.part.d.data);fe+="PrivateExponent: "+ve.toString("base64")+`
`;var ye=B.mpDenormalize(ne.part.p.data);fe+="Prime1: "+ye.toString("base64")+`
`;var _e=B.mpDenormalize(ne.part.q.data);fe+="Prime2: "+_e.toString("base64")+`
`;var be=B.mpDenormalize(ne.part.dmodp.data);fe+="Exponent1: "+be.toString("base64")+`
`;var Te=B.mpDenormalize(ne.part.dmodq.data);fe+="Exponent2: "+Te.toString("base64")+`
`;var ue=B.mpDenormalize(ne.part.iqmp.data);fe+="Coefficient: "+ue.toString("base64")+`
`;var O=new Date;return fe+="Created: "+V(O)+`
`,fe+="Publish: "+V(O)+`
`,fe+="Activate: "+V(O)+`
`,A.from(fe,"ascii")}function ee(ne,ce){var fe="";if(fe+=`Private-key-format: v1.3
`,ne.curve==="nistp256")fe+=`Algorithm: 13 (ECDSAP256SHA256)
`;else if(ne.curve==="nistp384")fe+=`Algorithm: 14 (ECDSAP384SHA384)
`;else throw new Error("Unsupported curve");var de=ne.part.d.data.toString("base64");fe+="PrivateKey: "+de+`
`;var pe=new Date;return fe+="Created: "+V(pe)+`
`,fe+="Publish: "+V(pe)+`
`,fe+="Activate: "+V(pe)+`
`,A.from(fe,"ascii")}function ie(ne,ce){if(I.isPrivateKey(ne)){if(ne.type==="rsa")return J(ne,ce);if(ne.type==="ecdsa")return ee(ne);throw new Error("Unsupported algorithm: "+ne.type)}else throw _.isKey(ne)?new Error('Format "dnssec" only supports writing private keys'):new Error("key is not a Key or PrivateKey")}return dnssec}var putty,hasRequiredPutty;function requirePutty(){if(hasRequiredPutty)return putty;hasRequiredPutty=1,putty={read:D,write:U};var E=requireAssert(),A=requireSafer().Buffer,_=requireRfc4253(),I=requireKey(),B=requireSshBuffer(),T=requireCryptoBrowserify(),R=requirePrivateKey(),P=requireErrors$1();function D(K,J){for(var ee=K.toString("ascii").split(/[\r\n]+/),ie=!1,ne,ce=0,fe;ce<ee.length;)if(ne=L(ee[ce++]),ne&&(fe={"putty-user-key-file-2":2,"putty-user-key-file-3":3}[ne[0].toLowerCase()],fe)){ie=!0;break}if(!ie)throw new Error("No PuTTY format first line found");var de=ne[1];ne=L(ee[ce++]),E.equal(ne[0].toLowerCase(),"encryption");var pe=ne[1];ne=L(ee[ce++]),E.equal(ne[0].toLowerCase(),"comment");var ve=ne[1];ne=L(ee[ce++]),E.equal(ne[0].toLowerCase(),"public-lines");var ye=parseInt(ne[1],10);if(!isFinite(ye)||ye<0||ye>ee.length)throw new Error("Invalid public-lines count");var _e=A.from(ee.slice(ce,ce+ye).join(""),"base64"),be=_.algToKeyType(de),Te=_.read(_e);if(Te.type!==be)throw new Error("Outer key algorithm mismatch");if(ce+=ye,ee[ce]){ne=L(ee[ce++]),E.equal(ne[0].toLowerCase(),"private-lines");var ue=parseInt(ne[1],10);if(!isFinite(ue)||ue<0||ue>ee.length)throw new Error("Invalid private-lines count");var O=A.from(ee.slice(ce,ce+ue).join(""),"base64");if(pe!=="none"&&fe===3)throw new Error("Encrypted keys arenot supported for PuTTY format version 3");if(pe==="aes256-cbc"){if(!J.passphrase)throw new P.KeyEncryptedError(J.filename,"PEM");var z=A.alloc(16,0),Y=T.createDecipheriv("aes-256-cbc",F(J.passphrase),z);Y.setAutoPadding(!1),O=A.concat([Y.update(O),Y.final()])}if(Te=new R(Te),Te.type!==be)throw new Error("Outer key algorithm mismatch");var te=new B({buffer:O}),oe;if(de==="ssh-dss")oe=[{name:"x",data:te.readBuffer()}];else if(de==="ssh-rsa")oe=[{name:"d",data:te.readBuffer()},{name:"p",data:te.readBuffer()},{name:"q",data:te.readBuffer()},{name:"iqmp",data:te.readBuffer()}];else if(de.match(/^ecdsa-sha2-nistp/))oe=[{name:"d",data:te.readBuffer()}];else if(de==="ssh-ed25519")oe=[{name:"k",data:te.readBuffer()}];else throw new Error("Unsupported PPK key type: "+de);Te=new R({type:Te.type,parts:Te.parts.concat(oe)})}return Te.comment=ve,Te}function F(K){var J=T.createHash("sha1").update(A.concat([A.from([0,0,0,0]),A.from(K)])).digest(),ee=T.createHash("sha1").update(A.concat([A.from([0,0,0,1]),A.from(K)])).digest();return A.concat([J,ee]).slice(0,32)}function L(K){var J=K.indexOf(":");if(J===-1)return null;var ee=K.slice(0,J);for(++J;K[J]===" ";)++J;var ie=K.slice(J);return[ee,ie]}function U(K,J){if(E.object(K),!I.isKey(K))throw new Error("Must be a public key");var ee=_.keyTypeToAlg(K),ie=_.write(K),ne=K.comment||"",ce=ie.toString("base64"),fe=V(ce);return fe.unshift("Public-Lines: "+fe.length),fe.unshift("Comment: "+ne),fe.unshift("Encryption: none"),fe.unshift("PuTTY-User-Key-File-2: "+ee),A.from(fe.join(`
`)+`
`)}function V(K,J){for(var ee=[],ie=0;ie<K.length;)ee.push(K.slice(ie,ie+64)),ie+=64;return ee}return putty}var auto,hasRequiredAuto;function requireAuto(){if(hasRequiredAuto)return auto;hasRequiredAuto=1,auto={read:D,write:K};var E=requireAssert(),A=requireSafer().Buffer;requireUtils$1(),requireKey(),requirePrivateKey();var _=requirePem(),I=requireSsh(),B=requireRfc4253(),T=requireDnssec(),R=requirePutty(),P="Private-key-format: v1";function D(J,ee){if(typeof J=="string"){if(J.trim().match(/^[-]+[ ]*BEGIN/))return _.read(J,ee);if(J.match(/^\s*ssh-[a-z]/)||J.match(/^\s*ecdsa-/))return I.read(J,ee);if(J.match(/^putty-user-key-file-2:/i))return R.read(J,ee);if(V(J))return T.read(J,ee);J=A.from(J,"binary")}else{if(E.buffer(J),U(J))return _.read(J,ee);if(L(J))return I.read(J,ee);if(F(J))return R.read(J,ee);if(V(J))return T.read(J,ee)}if(J.readUInt32BE(0)<J.length)return B.read(J,ee);throw new Error("Failed to auto-detect format of key")}function F(J){for(var ee=0;ee<J.length&&(J[ee]===32||J[ee]===10||J[ee]===9);)++ee;return ee+22<=J.length&&J.slice(ee,ee+22).toString("ascii").toLowerCase()==="putty-user-key-file-2:"}function L(J){for(var ee=0;ee<J.length&&(J[ee]===32||J[ee]===10||J[ee]===9);)++ee;return ee+4<=J.length&&J.slice(ee,ee+4).toString("ascii")==="ssh-"||ee+6<=J.length&&J.slice(ee,ee+6).toString("ascii")==="ecdsa-"}function U(J){for(var ee=0;ee<J.length&&(J[ee]===32||J[ee]===10);)++ee;if(J[ee]!==45)return!1;for(;ee<J.length&&J[ee]===45;)++ee;for(;ee<J.length&&J[ee]===32;)++ee;return!(ee+5>J.length||J.slice(ee,ee+5).toString("ascii")!=="BEGIN")}function V(J){if(J.length<=P.length)return!1;var ee=J.slice(0,P.length);if(ee.toString("ascii")===P)return!0;typeof J!="string"&&(J=J.toString("ascii"));for(var ie=J.split(`
`),ne=0;ie[ne].match(/^\;/);)ne++;return!!(ie[ne].toString("ascii").match(/\. IN KEY /)||ie[ne].toString("ascii").match(/\. IN DNSKEY /))}function K(J,ee){throw new Error('"auto" format cannot be used for writing')}return auto}var privateKey,hasRequiredPrivateKey;function requirePrivateKey(){if(hasRequiredPrivateKey)return privateKey;hasRequiredPrivateKey=1,privateKey=ie;var E=requireAssert(),A=requireSafer().Buffer,_=requireAlgs(),I=requireCryptoBrowserify();requireFingerprint();var B=requireSignature(),T=requireErrors$1(),R=requireUtil$3(),P=requireUtils$1(),D=requireDhe(),F=D.generateECDSA,L=D.generateED25519,U=requireEdCompat(),V=requireNaclFast(),K=requireKey();T.InvalidAlgorithmError;var J=T.KeyParseError;T.KeyEncryptedError;var ee={};ee.auto=requireAuto(),ee.pem=requirePem(),ee.pkcs1=requirePkcs1(),ee.pkcs8=requirePkcs8(),ee.rfc4253=requireRfc4253(),ee["ssh-private"]=requireSshPrivate(),ee.openssh=ee["ssh-private"],ee.ssh=ee["ssh-private"],ee.dnssec=requireDnssec(),ee.putty=requirePutty();function ie(ne){E.object(ne,"options"),K.call(this,ne),this._pubCache=void 0}return R.inherits(ie,K),ie.formats=ee,ie.prototype.toBuffer=function(ne,ce){return ne===void 0&&(ne="pkcs1"),E.string(ne,"format"),E.object(ee[ne],"formats[format]"),E.optionalObject(ce,"options"),ee[ne].write(this,ce)},ie.prototype.hash=function(ne,ce){return this.toPublic().hash(ne,ce)},ie.prototype.fingerprint=function(ne,ce){return this.toPublic().fingerprint(ne,ce)},ie.prototype.toPublic=function(){if(this._pubCache)return this._pubCache;for(var ne=_.info[this.type],ce=[],fe=0;fe<ne.parts.length;++fe){var de=ne.parts[fe];ce.push(this.part[de])}return this._pubCache=new K({type:this.type,source:this,parts:ce}),this.comment&&(this._pubCache.comment=this.comment),this._pubCache},ie.prototype.derive=function(ne){E.string(ne,"type");var ce,fe,de;if(this.type==="ed25519"&&ne==="curve25519")return ce=this.part.k.data,ce[0]===0&&(ce=ce.slice(1)),de=V.box.keyPair.fromSecretKey(new Uint8Array(ce)),fe=A.from(de.publicKey),new ie({type:"curve25519",parts:[{name:"A",data:P.mpNormalize(fe)},{name:"k",data:P.mpNormalize(ce)}]});if(this.type==="curve25519"&&ne==="ed25519")return ce=this.part.k.data,ce[0]===0&&(ce=ce.slice(1)),de=V.sign.keyPair.fromSeed(new Uint8Array(ce)),fe=A.from(de.publicKey),new ie({type:"ed25519",parts:[{name:"A",data:P.mpNormalize(fe)},{name:"k",data:P.mpNormalize(ce)}]});throw new Error("Key derivation not supported from "+this.type+" to "+ne)},ie.prototype.createVerify=function(ne){return this.toPublic().createVerify(ne)},ie.prototype.createSign=function(ne){if(ne===void 0&&(ne=this.defaultHashAlgorithm()),E.string(ne,"hash algorithm"),this.type==="ed25519"&&U!==void 0)return new U.Signer(this,ne);if(this.type==="curve25519")throw new Error("Curve25519 keys are not suitable for signing or verification");var ce,fe,de;try{fe=ne.toUpperCase(),ce=I.createSign(fe)}catch(be){de=be}(ce===void 0||de instanceof Error&&de.message.match(/Unknown message digest/))&&(fe="RSA-",fe+=ne.toUpperCase(),ce=I.createSign(fe)),E.ok(ce,"failed to create verifier");var pe=ce.sign.bind(ce),ve=this.toBuffer("pkcs1"),ye=this.type,_e=this.curve;return ce.sign=function(){var be=pe(ve);return typeof be=="string"&&(be=A.from(be,"binary")),be=B.parse(be,ye,"asn1"),be.hashAlgorithm=ne,be.curve=_e,be},ce},ie.parse=function(ne,ce,fe){typeof ne!="string"&&E.buffer(ne,"data"),ce===void 0&&(ce="auto"),E.string(ce,"format"),typeof fe=="string"&&(fe={filename:fe}),E.optionalObject(fe,"options"),fe===void 0&&(fe={}),E.optionalString(fe.filename,"options.filename"),fe.filename===void 0&&(fe.filename="(unnamed)"),E.object(ee[ce],"formats[format]");try{var de=ee[ce].read(ne,fe);return E.ok(de instanceof ie,"key is not a private key"),de.comment||(de.comment=fe.filename),de}catch(pe){throw pe.name==="KeyEncryptedError"?pe:new J(fe.filename,ce,pe)}},ie.isPrivateKey=function(ne,ce){return P.isCompatible(ne,ie,ce)},ie.generate=function(ne,ce){switch(ce===void 0&&(ce={}),E.object(ce,"options"),ne){case"ecdsa":return ce.curve===void 0&&(ce.curve="nistp256"),E.string(ce.curve,"options.curve"),F(ce.curve);case"ed25519":return L();default:throw new Error('Key generation not supported with key type "'+ne+'"')}},ie.prototype._sshpkApiVersion=[1,6],ie._oldVersionDetect=function(ne){return E.func(ne.toPublic),E.func(ne.createSign),ne.derive?[1,3]:ne.defaultHashAlgorithm?[1,2]:ne.formats.auto?[1,1]:[1,0]},privateKey}var identity,hasRequiredIdentity;function requireIdentity(){if(hasRequiredIdentity)return identity;hasRequiredIdentity=1,identity=P;var E=requireAssert();requireAlgs(),requireCryptoBrowserify(),requireFingerprint(),requireSignature(),requireErrors$1(),requireUtil$3();var A=requireUtils$1(),_=requireLib$4(),I=requireSafer().Buffer,B=/^([*]|[a-z0-9][a-z0-9\-]{0,62})(?:\.([*]|[a-z0-9][a-z0-9\-]{0,62}))*$/i,T={};T.cn="2.5.4.3",T.o="2.5.4.10",T.ou="2.5.4.11",T.l="2.5.4.7",T.s="2.5.4.8",T.c="2.5.4.6",T.sn="2.5.4.4",T.postalCode="2.5.4.17",T.serialNumber="2.5.4.5",T.street="2.5.4.9",T.x500UniqueIdentifier="2.5.4.45",T.role="2.5.4.72",T.telephoneNumber="2.5.4.20",T.description="2.5.4.13",T.dc="0.9.2342.19200300.100.1.25",T.uid="0.9.2342.19200300.100.1.1",T.mail="0.9.2342.19200300.100.1.3",T.title="2.5.4.12",T.gn="2.5.4.42",T.initials="2.5.4.43",T.pseudonym="2.5.4.65",T.emailAddress="1.2.840.113549.1.9.1";var R={};Object.keys(T).forEach(function(U){R[T[U]]=U});function P(U){var V=this;if(E.object(U,"options"),E.arrayOfObject(U.components,"options.components"),this.components=U.components,this.componentLookup={},this.components.forEach(function(K){K.name&&!K.oid&&(K.oid=T[K.name]),K.oid&&!K.name&&(K.name=R[K.oid]),V.componentLookup[K.name]===void 0&&(V.componentLookup[K.name]=[]),V.componentLookup[K.name].push(K)}),this.componentLookup.cn&&this.componentLookup.cn.length>0&&(this.cn=this.componentLookup.cn[0].value),E.optionalString(U.type,"options.type"),U.type===void 0)this.components.length===1&&this.componentLookup.cn&&this.componentLookup.cn.length===1&&this.componentLookup.cn[0].value.match(B)?(this.type="host",this.hostname=this.componentLookup.cn[0].value):this.componentLookup.dc&&this.components.length===this.componentLookup.dc.length?(this.type="host",this.hostname=this.componentLookup.dc.map(function(K){return K.value}).join(".")):this.componentLookup.uid&&this.components.length===this.componentLookup.uid.length?(this.type="user",this.uid=this.componentLookup.uid[0].value):this.componentLookup.cn&&this.componentLookup.cn.length===1&&this.componentLookup.cn[0].value.match(B)?(this.type="host",this.hostname=this.componentLookup.cn[0].value):this.componentLookup.uid&&this.componentLookup.uid.length===1?(this.type="user",this.uid=this.componentLookup.uid[0].value):this.componentLookup.mail&&this.componentLookup.mail.length===1?(this.type="email",this.email=this.componentLookup.mail[0].value):this.componentLookup.cn&&this.componentLookup.cn.length===1?(this.type="user",this.uid=this.componentLookup.cn[0].value):this.type="unknown";else if(this.type=U.type,this.type==="host")this.hostname=U.hostname;else if(this.type==="user")this.uid=U.uid;else if(this.type==="email")this.email=U.email;else throw new Error("Unknown type "+this.type)}P.prototype.toString=function(){return this.components.map(function(U){var V=U.name.toUpperCase();V=V.replace(/=/g,"\\=");var K=U.value;return K=K.replace(/,/g,"\\,"),V+"="+K}).join(", ")},P.prototype.get=function(U,V){E.string(U,"name");var K=this.componentLookup[U];if(!(K===void 0||K.length===0)){if(!V&&K.length>1)throw new Error("Multiple values for attribute "+U);return V?K.map(function(J){return J.value}):K[0].value}},P.prototype.toArray=function(U){return this.components.map(function(V){return{name:V.name,value:V.value}})};var D=/[^a-zA-Z0-9 '(),+.\/:=?-]/,F=/[^\x00-\x7f]/;P.prototype.toAsn1=function(U,V){U.startSequence(V),this.components.forEach(function(K){if(U.startSequence(_.Ber.Constructor|_.Ber.Set),U.startSequence(),U.writeOID(K.oid),K.asn1type===_.Ber.Utf8String||K.value.match(F)){var J=I.from(K.value,"utf8");U.writeBuffer(J,_.Ber.Utf8String)}else if(K.asn1type===_.Ber.IA5String||K.value.match(D))U.writeString(K.value,_.Ber.IA5String);else{var ee=_.Ber.PrintableString;K.asn1type!==void 0&&(ee=K.asn1type),U.writeString(K.value,ee)}U.endSequence(),U.endSequence()}),U.endSequence()};function L(U,V){if(U==="**"||V==="**")return!0;var K=U.split("."),J=V.split(".");if(K.length!==J.length)return!1;for(var ee=0;ee<K.length;++ee)if(!(K[ee]==="*"||J[ee]==="*")&&K[ee]!==J[ee])return!1;return!0}return P.prototype.equals=function(U){if(!P.isIdentity(U,[1,0])||U.components.length!==this.components.length)return!1;for(var V=0;V<this.components.length;++V)if(this.components[V].oid!==U.components[V].oid||!L(this.components[V].value,U.components[V].value))return!1;return!0},P.forHost=function(U){return E.string(U,"hostname"),new P({type:"host",hostname:U,components:[{name:"cn",value:U}]})},P.forUser=function(U){return E.string(U,"uid"),new P({type:"user",uid:U,components:[{name:"uid",value:U}]})},P.forEmail=function(U){return E.string(U,"email"),new P({type:"email",email:U,components:[{name:"mail",value:U}]})},P.parseDN=function(U){E.string(U,"dn");for(var V=[""],K=0,J=U;J.length>0;){var ee;if((ee=/^,/.exec(J))!==null)V[++K]="",J=J.slice(ee[0].length);else if((ee=/^\\,/.exec(J))!==null)V[K]+=",",J=J.slice(ee[0].length);else if((ee=/^\\./.exec(J))!==null)V[K]+=ee[0],J=J.slice(ee[0].length);else if((ee=/^[^\\,]+/.exec(J))!==null)V[K]+=ee[0],J=J.slice(ee[0].length);else throw new Error("Failed to parse DN")}var ie=V.map(function(ne){ne=ne.trim();for(var ce=ne.indexOf("=");ce>0&&ne.charAt(ce-1)==="\\";)ce=ne.indexOf("=",ce+1);if(ce===-1)throw new Error("Failed to parse DN");var fe=ne.slice(0,ce).toLowerCase().replace(/\\=/g,"="),de=ne.slice(ce+1);return{name:fe,value:de}});return new P({components:ie})},P.fromArray=function(U){return E.arrayOfObject(U,"components"),U.forEach(function(V){if(E.object(V,"component"),E.string(V.name,"component.name"),!I.isBuffer(V.value)&&typeof V.value!="string")throw new Error("Invalid component value")}),new P({components:U})},P.parseAsn1=function(U,V){var K=[];U.readSequence(V);for(var J=U.offset+U.length;U.offset<J;){U.readSequence(_.Ber.Constructor|_.Ber.Set);var ee=U.offset+U.length;U.readSequence();var ie=U.readOID(),ne=U.peek(),ce;switch(ne){case _.Ber.PrintableString:case _.Ber.IA5String:case _.Ber.OctetString:case _.Ber.T61String:ce=U.readString(ne);break;case _.Ber.Utf8String:ce=U.readString(ne,!0),ce=ce.toString("utf8");break;case _.Ber.CharacterString:case _.Ber.BMPString:ce=U.readString(ne,!0),ce=ce.toString("utf16le");break;default:throw new Error("Unknown asn1 type "+ne)}K.push({oid:ie,asn1type:ne,value:ce}),U._offset=ee}return U._offset=J,new P({components:K})},P.isIdentity=function(U,V){return A.isCompatible(U,P,V)},P.prototype._sshpkApiVersion=[1,0],P._oldVersionDetect=function(U){return[1,0]},identity}var opensshCert,hasRequiredOpensshCert;function requireOpensshCert(){if(hasRequiredOpensshCert)return opensshCert;hasRequiredOpensshCert=1,opensshCert={read:J,verify:U,sign:ce,signAsync:fe,write:de,fromBuffer:ee,toBuffer:pe};var E=requireAssert(),A=requireSshBuffer(),_=requireCryptoBrowserify(),I=requireSafer().Buffer,B=requireAlgs(),T=requireKey();requirePrivateKey();var R=requireIdentity(),P=requireRfc4253(),D=requireSignature(),F=requireUtils$1(),L=requireCertificate();function U(_e,be){return!1}var V={user:1,host:2};Object.keys(V).forEach(function(_e){V[V[_e]]=_e});var K=/^ecdsa-sha2-([^@-]+)-cert-v01@openssh.com$/;function J(_e,be){I.isBuffer(_e)&&(_e=_e.toString("ascii"));var Te=_e.trim().split(/[ \t\n]+/g);if(Te.length<2||Te.length>3)throw new Error("Not a valid SSH certificate line");var ue=Te[0],O=Te[1];return O=I.from(O,"base64"),ee(O,ue)}function ee(_e,be,Te){var ue=new A({buffer:_e}),O=ue.readString();if(be!==void 0&&O!==be)throw new Error("SSH certificate algorithm mismatch");be===void 0&&(be=O);var z={};z.signatures={},z.signatures.openssh={},z.signatures.openssh.nonce=ue.readBuffer();var Y={},te=Y.parts=[];Y.type=ve(be);for(var oe=B.info[Y.type].parts.length;te.length<oe;)te.push(ue.readPart());E.ok(te.length>=1,"key must have at least one part");var le=B.info[Y.type];if(Y.type==="ecdsa"){var he=K.exec(be);E.ok(he!==null),E.strictEqual(he[1],te[0].data.toString())}for(var ae=0;ae<le.parts.length;++ae)if(te[ae].name=le.parts[ae],te[ae].name!=="curve"&&le.normalize!==!1){var Q=te[ae];Q.data=F.mpNormalize(Q.data)}z.subjectKey=new T(Y),z.serial=ue.readInt64();var se=V[ue.readInt()];E.string(se,"valid cert type"),z.signatures.openssh.keyId=ue.readString();for(var Ae=[],ge=ue.readBuffer(),Ee=new A({buffer:ge});!Ee.atEnd();)Ae.push(Ee.readString());Ae.length===0&&(Ae=["*"]),z.subjects=Ae.map(function(Fe){if(se==="user")return R.forUser(Fe);if(se==="host")return R.forHost(Fe);throw new Error("Unknown identity type "+se)}),z.validFrom=ie(ue.readInt64()),z.validUntil=ie(ue.readInt64());for(var ke=[],Se=new A({buffer:ue.readBuffer()}),Ie;!Se.atEnd();)Ie={critical:!0},Ie.name=Se.readString(),Ie.data=Se.readBuffer(),ke.push(Ie);for(Se=new A({buffer:ue.readBuffer()});!Se.atEnd();)Ie={critical:!1},Ie.name=Se.readString(),Ie.data=Se.readBuffer(),ke.push(Ie);z.signatures.openssh.exts=ke,ue.readBuffer();var we=ue.readBuffer();z.issuerKey=P.read(we),z.issuer=R.forHost("**");var xe=ue.readBuffer();return z.signatures.openssh.signature=D.parse(xe,z.issuerKey.type,"ssh"),Te!==void 0&&(Te.remainder=ue.remainder(),Te.consumed=ue._offset),new L(z)}function ie(_e){var be=_e.readUInt32BE(0)*4294967296;be+=_e.readUInt32BE(4);var Te=new Date;return Te.setTime(be*1e3),Te.sourceInt64=_e,Te}function ne(_e){if(_e.sourceInt64!==void 0)return _e.sourceInt64;var be=Math.round(_e.getTime()/1e3),Te=Math.floor(be/4294967296),ue=Math.floor(be%4294967296),O=I.alloc(8);return O.writeUInt32BE(Te,0),O.writeUInt32BE(ue,4),O}function ce(_e,be){_e.signatures.openssh===void 0&&(_e.signatures.openssh={});try{var Te=pe(_e,!0)}catch{return delete _e.signatures.openssh,!1}var ue=_e.signatures.openssh,O=void 0;(be.type==="rsa"||be.type==="dsa")&&(O="sha1");var z=be.createSign(O);return z.write(Te),ue.signature=z.sign(),!0}function fe(_e,be,Te){_e.signatures.openssh===void 0&&(_e.signatures.openssh={});try{var ue=pe(_e,!0)}catch(z){delete _e.signatures.openssh,Te(z);return}var O=_e.signatures.openssh;be(ue,function(z,Y){if(z){Te(z);return}try{Y.toBuffer("ssh")}catch(te){Te(te);return}O.signature=Y,Te()})}function de(_e,be){be===void 0&&(be={});var Te=pe(_e),ue=ye(_e.subjectKey)+" "+Te.toString("base64");return be.comment&&(ue=ue+" "+be.comment),ue}function pe(_e,be){E.object(_e.signatures.openssh,"signature for openssh format");var Te=_e.signatures.openssh;Te.nonce===void 0&&(Te.nonce=_.randomBytes(16));var ue=new A({});ue.writeString(ye(_e.subjectKey)),ue.writeBuffer(Te.nonce);var O=_e.subjectKey,z=B.info[O.type];z.parts.forEach(function(he){ue.writePart(O.part[he])}),ue.writeInt64(_e.serial);var Y=_e.subjects[0].type;E.notStrictEqual(Y,"unknown"),_e.subjects.forEach(function(he){E.strictEqual(he.type,Y)}),Y=V[Y],ue.writeInt(Y),Te.keyId===void 0&&(Te.keyId=_e.subjects[0].type+"_"+(_e.subjects[0].uid||_e.subjects[0].hostname)),ue.writeString(Te.keyId);var te=new A({});_e.subjects.forEach(function(he){Y===V.host?te.writeString(he.hostname):Y===V.user&&te.writeString(he.uid)}),ue.writeBuffer(te.toBuffer()),ue.writeInt64(ne(_e.validFrom)),ue.writeInt64(ne(_e.validUntil));var oe=Te.exts;oe===void 0&&(oe=[]);var le=new A({});return oe.forEach(function(he){he.critical===!0&&(le.writeString(he.name),le.writeBuffer(he.data))}),ue.writeBuffer(le.toBuffer()),le=new A({}),oe.forEach(function(he){he.critical!==!0&&(le.writeString(he.name),le.writeBuffer(he.data))}),ue.writeBuffer(le.toBuffer()),ue.writeBuffer(I.alloc(0)),te=P.write(_e.issuerKey),ue.writeBuffer(te),be||ue.writeBuffer(Te.signature.toBuffer("ssh")),ue.toBuffer()}function ve(_e){if(_e==="ssh-rsa-cert-v01@openssh.com")return"rsa";if(_e==="ssh-dss-cert-v01@openssh.com")return"dsa";if(_e.match(K))return"ecdsa";if(_e==="ssh-ed25519-cert-v01@openssh.com")return"ed25519";throw new Error("Unsupported cert type "+_e)}function ye(_e){if(_e.type==="rsa")return"ssh-rsa-cert-v01@openssh.com";if(_e.type==="dsa")return"ssh-dss-cert-v01@openssh.com";if(_e.type==="ecdsa")return"ecdsa-sha2-"+_e.curve+"-cert-v01@openssh.com";if(_e.type==="ed25519")return"ssh-ed25519-cert-v01@openssh.com";throw new Error("Unsupported key type "+_e.type)}return opensshCert}var x509,hasRequiredX509;function requireX509(){if(hasRequiredX509)return x509;hasRequiredX509=1,x509={read:J,verify:F,sign:z,signAsync:Y,write:te};var E=requireAssert(),A=requireLib$4(),_=requireSafer().Buffer;requireAlgs();var I=requireUtils$1();requireKey(),requirePrivateKey(),requirePem();var B=requireIdentity(),T=requireSignature(),R=requireCertificate(),P=requirePkcs8();function D(ae,Q){return E.strictEqual(ae.peek(),A.Ber.Integer,Q+" is not an Integer"),I.mpNormalize(ae.readString(A.Ber.Integer,!0))}function F(ae,Q){var se=ae.signatures.x509;E.object(se,"x509 signature");var Ae=se.algo.split("-");if(Ae[0]!==Q.type)return!1;var ge=se.cache;if(ge===void 0){var Ee=new A.BerWriter;oe(ae,Ee),ge=Ee.buffer}var ke=Q.createVerify(Ae[1]);return ke.write(ge),ke.verify(se.signature)}function L(ae){return A.Ber.Context|A.Ber.Constructor|ae}function U(ae){return A.Ber.Context|ae}var V={"rsa-md5":"1.2.840.113549.1.1.4","rsa-sha1":"1.2.840.113549.1.1.5","rsa-sha256":"1.2.840.113549.1.1.11","rsa-sha384":"1.2.840.113549.1.1.12","rsa-sha512":"1.2.840.113549.1.1.13","dsa-sha1":"1.2.840.10040.4.3","dsa-sha256":"2.16.840.1.101.3.4.3.2","ecdsa-sha1":"1.2.840.10045.4.1","ecdsa-sha256":"1.2.840.10045.4.3.2","ecdsa-sha384":"1.2.840.10045.4.3.3","ecdsa-sha512":"1.2.840.10045.4.3.4","ed25519-sha512":"1.3.101.112"};Object.keys(V).forEach(function(ae){V[V[ae]]=ae}),V["1.3.14.3.2.3"]="rsa-md5",V["1.3.14.3.2.29"]="rsa-sha1";var K={altName:"2.5.29.17",basicConstraints:"2.5.29.19",keyUsage:"2.5.29.15",extKeyUsage:"2.5.29.37"};function J(ae,Q){typeof ae=="string"&&(ae=_.from(ae,"binary")),E.buffer(ae,"buf");var se=new A.BerReader(ae);if(se.readSequence(),Math.abs(se.length-se.remain)>1)throw new Error("DER sequence does not contain whole byte stream");var Ae=se.offset;se.readSequence();var ge=se.offset+se.length,Ee=ge;if(se.peek()===L(0)){se.readSequence(L(0));var ke=se.readInt();E.ok(ke<=3,"only x.509 versions up to v3 supported")}var Se={};Se.signatures={};var Ie=Se.signatures.x509={};Ie.extras={},Se.serial=D(se,"serial"),se.readSequence();var we=se.offset+se.length,xe=se.readOID(),Fe=V[xe];if(Fe===void 0)throw new Error("unknown signature algorithm "+xe);if(se._offset=we,Se.issuer=B.parseAsn1(se),se.readSequence(),Se.validFrom=ee(se),Se.validUntil=ee(se),Se.subjects=[B.parseAsn1(se)],se.readSequence(),we=se.offset+se.length,Se.subjectKey=P.readPkcs8(void 0,"public",se),se._offset=we,se.peek()===L(1)&&(se.readSequence(L(1)),Ie.extras.issuerUniqueID=ae.slice(se.offset,se.offset+se.length),se._offset+=se.length),se.peek()===L(2)&&(se.readSequence(L(2)),Ie.extras.subjectUniqueID=ae.slice(se.offset,se.offset+se.length),se._offset+=se.length),se.peek()===L(3)){se.readSequence(L(3));var Ge=se.offset+se.length;for(se.readSequence();se.offset<Ge;)pe(Se,ae,se);E.strictEqual(se.offset,Ge)}E.strictEqual(se.offset,ge),se.readSequence(),we=se.offset+se.length;var Oe=se.readOID(),et=V[Oe];if(et===void 0)throw new Error("unknown signature algorithm "+Oe);se._offset=we;var Mt=se.readString(A.Ber.BitString,!0);Mt[0]===0&&(Mt=Mt.slice(1));var dt=et.split("-");return Ie.signature=T.parse(Mt,dt[0],"asn1"),Ie.signature.hashAlgorithm=dt[1],Ie.algo=et,Ie.cache=ae.slice(Ae,Ee),new R(Se)}function ee(ae){if(ae.peek()===A.Ber.UTCTime)return ye(ae.readString(A.Ber.UTCTime));if(ae.peek()===A.Ber.GeneralizedTime)return be(ae.readString(A.Ber.GeneralizedTime));throw new Error("Unsupported date format")}function ie(ae,Q){Q.getUTCFullYear()>=2050||Q.getUTCFullYear()<1950?ae.writeString(O(Q),A.Ber.GeneralizedTime):ae.writeString(ue(Q),A.Ber.UTCTime)}var ne={OtherName:L(0),RFC822Name:U(1),DNSName:U(2),X400Address:L(3),DirectoryName:L(4),EDIPartyName:L(5),URI:U(6),IPAddress:U(7),OID:U(8)},ce={serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",joyentDocker:"1.3.6.1.4.1.38678.1.4.1",joyentCmon:"1.3.6.1.4.1.38678.1.4.2"},fe={};Object.keys(ce).forEach(function(ae){fe[ce[ae]]=ae});var de=["signature","identity","keyEncryption","encryption","keyAgreement","ca","crl"];function pe(ae,Q,se){se.readSequence();var Ae=se.offset+se.length,ge=se.readOID(),Ee,ke=ae.signatures.x509;ke.extras.exts||(ke.extras.exts=[]);var Se;switch(se.peek()===A.Ber.Boolean&&(Se=se.readBoolean()),ge){case K.basicConstraints:se.readSequence(A.Ber.OctetString),se.readSequence();var Ie=se.offset+se.length,we=!1;se.peek()===A.Ber.Boolean&&(we=se.readBoolean()),ae.purposes===void 0&&(ae.purposes=[]),we===!0&&ae.purposes.push("ca");var xe={oid:ge,critical:Se};se.offset<Ie&&se.peek()===A.Ber.Integer&&(xe.pathLen=se.readInt()),ke.extras.exts.push(xe);break;case K.extKeyUsage:se.readSequence(A.Ber.OctetString),se.readSequence(),ae.purposes===void 0&&(ae.purposes=[]);for(var Fe=se.offset+se.length;se.offset<Fe;){var Ge=se.readOID();ae.purposes.push(fe[Ge]||Ge)}ae.purposes.indexOf("serverAuth")!==-1&&ae.purposes.indexOf("clientAuth")===-1?ae.subjects.forEach(function(Ut){Ut.type!=="host"&&(Ut.type="host",Ut.hostname=Ut.uid||Ut.email||Ut.components[0].value)}):ae.purposes.indexOf("clientAuth")!==-1&&ae.purposes.indexOf("serverAuth")===-1&&ae.subjects.forEach(function(Ut){Ut.type!=="user"&&(Ut.type="user",Ut.uid=Ut.hostname||Ut.email||Ut.components[0].value)}),ke.extras.exts.push({oid:ge,critical:Se});break;case K.keyUsage:se.readSequence(A.Ber.OctetString);var Oe=se.readString(A.Ber.BitString,!0),et=le(Oe,de);et.forEach(function(Ut){ae.purposes===void 0&&(ae.purposes=[]),ae.purposes.indexOf(Ut)===-1&&ae.purposes.push(Ut)}),ke.extras.exts.push({oid:ge,critical:Se,bits:Oe});break;case K.altName:se.readSequence(A.Ber.OctetString),se.readSequence();for(var Mt=se.offset+se.length;se.offset<Mt;)switch(se.peek()){case ne.OtherName:case ne.EDIPartyName:se.readSequence(),se._offset+=se.length;break;case ne.OID:se.readOID(ne.OID);break;case ne.RFC822Name:var dt=se.readString(ne.RFC822Name);Ee=B.forEmail(dt),ae.subjects[0].equals(Ee)||ae.subjects.push(Ee);break;case ne.DirectoryName:se.readSequence(ne.DirectoryName),Ee=B.parseAsn1(se),ae.subjects[0].equals(Ee)||ae.subjects.push(Ee);break;case ne.DNSName:var mt=se.readString(ne.DNSName);Ee=B.forHost(mt),ae.subjects[0].equals(Ee)||ae.subjects.push(Ee);break;default:se.readString(se.peek());break}ke.extras.exts.push({oid:ge,critical:Se});break;default:ke.extras.exts.push({oid:ge,critical:Se,data:se.readString(A.Ber.OctetString,!0)});break}se._offset=Ae}var ve=/^([0-9]{2})([0-9]{2})([0-9]{2})([0-9]{2})([0-9]{2})([0-9]{2})?Z$/;function ye(ae){var Q=ae.match(ve);E.ok(Q,"timestamps must be in UTC");var se=new Date,Ae=se.getUTCFullYear(),ge=Math.floor(Ae/100)*100,Ee=parseInt(Q[1],10);return Ae%100<50&&Ee>=60?Ee+=ge-1:Ee+=ge,se.setUTCFullYear(Ee,parseInt(Q[2],10)-1,parseInt(Q[3],10)),se.setUTCHours(parseInt(Q[4],10),parseInt(Q[5],10)),Q[6]&&Q[6].length>0&&se.setUTCSeconds(parseInt(Q[6],10)),se}var _e=/^([0-9]{4})([0-9]{2})([0-9]{2})([0-9]{2})([0-9]{2})([0-9]{2})?Z$/;function be(ae){var Q=ae.match(_e);E.ok(Q);var se=new Date;return se.setUTCFullYear(parseInt(Q[1],10),parseInt(Q[2],10)-1,parseInt(Q[3],10)),se.setUTCHours(parseInt(Q[4],10),parseInt(Q[5],10)),Q[6]&&Q[6].length>0&&se.setUTCSeconds(parseInt(Q[6],10)),se}function Te(ae,Q){Q===void 0&&(Q=2);for(var se=""+ae;se.length<Q;)se="0"+se;return se}function ue(ae){var Q="";return Q+=Te(ae.getUTCFullYear()%100),Q+=Te(ae.getUTCMonth()+1),Q+=Te(ae.getUTCDate()),Q+=Te(ae.getUTCHours()),Q+=Te(ae.getUTCMinutes()),Q+=Te(ae.getUTCSeconds()),Q+="Z",Q}function O(ae){var Q="";return Q+=Te(ae.getUTCFullYear(),4),Q+=Te(ae.getUTCMonth()+1),Q+=Te(ae.getUTCDate()),Q+=Te(ae.getUTCHours()),Q+=Te(ae.getUTCMinutes()),Q+=Te(ae.getUTCSeconds()),Q+="Z",Q}function z(ae,Q){ae.signatures.x509===void 0&&(ae.signatures.x509={});var se=ae.signatures.x509;if(se.algo=Q.type+"-"+Q.defaultHashAlgorithm(),V[se.algo]===void 0)return!1;var Ae=new A.BerWriter;oe(ae,Ae);var ge=Ae.buffer;se.cache=ge;var Ee=Q.createSign();return Ee.write(ge),ae.signatures.x509.signature=Ee.sign(),!0}function Y(ae,Q,se){ae.signatures.x509===void 0&&(ae.signatures.x509={});var Ae=ae.signatures.x509,ge=new A.BerWriter;oe(ae,ge);var Ee=ge.buffer;Ae.cache=Ee,Q(Ee,function(ke,Se){if(ke){se(ke);return}if(Ae.algo=Se.type+"-"+Se.hashAlgorithm,V[Ae.algo]===void 0){se(new Error('Invalid signing algorithm "'+Ae.algo+'"'));return}Ae.signature=Se,se()})}function te(ae,Q){var se=ae.signatures.x509;E.object(se,"x509 signature");var Ae=new A.BerWriter;Ae.startSequence(),se.cache?(Ae._ensure(se.cache.length),se.cache.copy(Ae._buf,Ae._offset),Ae._offset+=se.cache.length):oe(ae,Ae),Ae.startSequence(),Ae.writeOID(V[se.algo]),se.algo.match(/^rsa-/)&&Ae.writeNull(),Ae.endSequence();var ge=se.signature.toBuffer("asn1"),Ee=_.alloc(ge.length+1);return Ee[0]=0,ge.copy(Ee,1),Ae.writeBuffer(Ee,A.Ber.BitString),Ae.endSequence(),Ae.buffer}function oe(ae,Q){var se=ae.signatures.x509;E.object(se,"x509 signature"),Q.startSequence(),Q.startSequence(L(0)),Q.writeInt(2),Q.endSequence(),Q.writeBuffer(I.mpNormalize(ae.serial),A.Ber.Integer),Q.startSequence(),Q.writeOID(V[se.algo]),se.algo.match(/^rsa-/)&&Q.writeNull(),Q.endSequence(),ae.issuer.toAsn1(Q),Q.startSequence(),ie(Q,ae.validFrom),ie(Q,ae.validUntil),Q.endSequence();var Ae=ae.subjects[0],ge=ae.subjects.slice(1);if(Ae.toAsn1(Q),P.writePkcs8(Q,ae.subjectKey),se.extras&&se.extras.issuerUniqueID&&Q.writeBuffer(se.extras.issuerUniqueID,L(1)),se.extras&&se.extras.subjectUniqueID&&Q.writeBuffer(se.extras.subjectUniqueID,L(2)),ge.length>0||Ae.type==="host"||ae.purposes!==void 0&&ae.purposes.length>0||se.extras&&se.extras.exts){Q.startSequence(L(3)),Q.startSequence();var Ee=[];ae.purposes!==void 0&&ae.purposes.length>0&&(Ee.push({oid:K.basicConstraints,critical:!0}),Ee.push({oid:K.keyUsage,critical:!0}),Ee.push({oid:K.extKeyUsage,critical:!0})),Ee.push({oid:K.altName}),se.extras&&se.extras.exts&&(Ee=se.extras.exts);for(var ke=0;ke<Ee.length;++ke){if(Q.startSequence(),Q.writeOID(Ee[ke].oid),Ee[ke].critical!==void 0&&Q.writeBoolean(Ee[ke].critical),Ee[ke].oid===K.altName){Q.startSequence(A.Ber.OctetString),Q.startSequence(),Ae.type==="host"&&Q.writeString(Ae.hostname,U(2));for(var Se=0;Se<ge.length;++Se)ge[Se].type==="host"?Q.writeString(ge[Se].hostname,ne.DNSName):ge[Se].type==="email"?Q.writeString(ge[Se].email,ne.RFC822Name):(Q.startSequence(ne.DirectoryName),ge[Se].toAsn1(Q),Q.endSequence());Q.endSequence(),Q.endSequence()}else if(Ee[ke].oid===K.basicConstraints){Q.startSequence(A.Ber.OctetString),Q.startSequence();var Ie=ae.purposes.indexOf("ca")!==-1,we=Ee[ke].pathLen;Q.writeBoolean(Ie),we!==void 0&&Q.writeInt(we),Q.endSequence(),Q.endSequence()}else if(Ee[ke].oid===K.extKeyUsage)Q.startSequence(A.Ber.OctetString),Q.startSequence(),ae.purposes.forEach(function(Fe){if(Fe!=="ca"&&de.indexOf(Fe)===-1){var Ge=Fe;ce[Fe]!==void 0&&(Ge=ce[Fe]),Q.writeOID(Ge)}}),Q.endSequence(),Q.endSequence();else if(Ee[ke].oid===K.keyUsage){if(Q.startSequence(A.Ber.OctetString),Ee[ke].bits!==void 0)Q.writeBuffer(Ee[ke].bits,A.Ber.BitString);else{var xe=he(ae.purposes,de);Q.writeBuffer(xe,A.Ber.BitString)}Q.endSequence()}else Q.writeBuffer(Ee[ke].data,A.Ber.OctetString);Q.endSequence()}Q.endSequence(),Q.endSequence()}Q.endSequence()}function le(ae,Q){for(var se=8*(ae.length-1)-ae[0],Ae={},ge=0;ge<se;++ge){var Ee=1+Math.floor(ge/8),ke=7-ge%8,Se=1<<ke,Ie=(ae[Ee]&Se)!==0,we=Q[ge];Ie&&typeof we=="string"&&(Ae[we]=!0)}return Object.keys(Ae)}function he(ae,Q){var se=Q.length,Ae=Math.ceil(se/8),ge=Ae*8-se,Ee=_.alloc(1+Ae);Ee[0]=ge;for(var ke=0;ke<se;++ke){var Se=1+Math.floor(ke/8),Ie=7-ke%8,we=1<<Ie,xe=Q[ke];if(xe!==void 0){var Fe=ae.indexOf(xe)!==-1;Fe&&(Ee[Se]|=we)}}return Ee}return x509}var x509Pem,hasRequiredX509Pem;function requireX509Pem(){if(hasRequiredX509Pem)return x509Pem;hasRequiredX509Pem=1;var E=requireX509();x509Pem={read:I,verify:E.verify,sign:E.sign,write:B};var A=requireAssert();requireLib$4();var _=requireSafer().Buffer;requireAlgs(),requireUtils$1(),requireKey(),requirePrivateKey(),requirePem(),requireIdentity(),requireSignature(),requireCertificate();function I(T,R){typeof T!="string"&&(A.buffer(T,"buf"),T=T.toString("ascii"));for(var P=T.trim().split(/[\r\n]+/g),D,F=-1;!D&&F<P.length;)D=P[++F].match(/[-]+[ ]*BEGIN CERTIFICATE[ ]*[-]+/);A.ok(D,"invalid PEM header");for(var L,U=P.length;!L&&U>0;)L=P[--U].match(/[-]+[ ]*END CERTIFICATE[ ]*[-]+/);A.ok(L,"invalid PEM footer"),P=P.slice(F,U+1);for(var V={};P=P.slice(1),D=P[0].match(/^([A-Za-z0-9-]+): (.+)$/),!!D;)V[D[1].toLowerCase()]=D[2];return P=P.slice(0,-1).join(""),T=_.from(P,"base64"),E.read(T,R)}function B(T,R){var P=E.write(T,R),D="CERTIFICATE",F=P.toString("base64"),L=F.length+F.length/64+18+16+D.length*2+10,U=_.alloc(L),V=0;V+=U.write("-----BEGIN "+D+`-----
`,V);for(var K=0;K<F.length;){var J=K+64;J>F.length&&(J=F.length),V+=U.write(F.slice(K,J),V),U[V++]=10,K=J}return V+=U.write("-----END "+D+`-----
`,V),U.slice(0,V)}return x509Pem}var certificate,hasRequiredCertificate;function requireCertificate(){if(hasRequiredCertificate)return certificate;hasRequiredCertificate=1,certificate=K;var E=requireAssert(),A=requireSafer().Buffer,_=requireAlgs(),I=requireCryptoBrowserify(),B=requireFingerprint();requireSignature();var T=requireErrors$1();requireUtil$3();var R=requireUtils$1(),P=requireKey(),D=requirePrivateKey(),F=requireIdentity(),L={};L.openssh=requireOpensshCert(),L.x509=requireX509(),L.pem=requireX509Pem();var U=T.CertificateParseError,V=T.InvalidAlgorithmError;function K(J){E.object(J,"options"),E.arrayOfObject(J.subjects,"options.subjects"),R.assertCompatible(J.subjects[0],F,[1,0],"options.subjects"),R.assertCompatible(J.subjectKey,P,[1,0],"options.subjectKey"),R.assertCompatible(J.issuer,F,[1,0],"options.issuer"),J.issuerKey!==void 0&&R.assertCompatible(J.issuerKey,P,[1,0],"options.issuerKey"),E.object(J.signatures,"options.signatures"),E.buffer(J.serial,"options.serial"),E.date(J.validFrom,"options.validFrom"),E.date(J.validUntil,"optons.validUntil"),E.optionalArrayOfString(J.purposes,"options.purposes"),this._hashCache={},this.subjects=J.subjects,this.issuer=J.issuer,this.subjectKey=J.subjectKey,this.issuerKey=J.issuerKey,this.signatures=J.signatures,this.serial=J.serial,this.validFrom=J.validFrom,this.validUntil=J.validUntil,this.purposes=J.purposes}return K.formats=L,K.prototype.toBuffer=function(J,ee){return J===void 0&&(J="x509"),E.string(J,"format"),E.object(L[J],"formats[format]"),E.optionalObject(ee,"options"),L[J].write(this,ee)},K.prototype.toString=function(J,ee){return J===void 0&&(J="pem"),this.toBuffer(J,ee).toString()},K.prototype.fingerprint=function(J){J===void 0&&(J="sha256"),E.string(J,"algorithm");var ee={type:"certificate",hash:this.hash(J),algorithm:J};return new B(ee)},K.prototype.hash=function(J){if(E.string(J,"algorithm"),J=J.toLowerCase(),_.hashAlgs[J]===void 0)throw new V(J);if(this._hashCache[J])return this._hashCache[J];var ee=I.createHash(J).update(this.toBuffer("x509")).digest();return this._hashCache[J]=ee,ee},K.prototype.isExpired=function(J){return J===void 0&&(J=new Date),!(J.getTime()>=this.validFrom.getTime()&&J.getTime()<this.validUntil.getTime())},K.prototype.isSignedBy=function(J){return R.assertCompatible(J,K,[1,0],"issuer"),!this.issuer.equals(J.subjects[0])||this.issuer.purposes&&this.issuer.purposes.length>0&&this.issuer.purposes.indexOf("ca")===-1?!1:this.isSignedByKey(J.subjectKey)},K.prototype.getExtension=function(J){E.string(J,"keyOrOid");var ee=this.getExtensions().filter(function(ie){return ie.format==="x509"?ie.oid===J:ie.format==="openssh"?ie.name===J:!1})[0];return ee},K.prototype.getExtensions=function(){var J=[],ee=this.signatures.x509;ee&&ee.extras&&ee.extras.exts&&ee.extras.exts.forEach(function(ne){ne.format="x509",J.push(ne)});var ie=this.signatures.openssh;return ie&&ie.exts&&ie.exts.forEach(function(ne){ne.format="openssh",J.push(ne)}),J},K.prototype.isSignedByKey=function(J){if(R.assertCompatible(J,P,[1,2],"issuerKey"),this.issuerKey!==void 0)return this.issuerKey.fingerprint("sha512").matches(J);var ee=Object.keys(this.signatures)[0],ie=L[ee].verify(this,J);return ie&&(this.issuerKey=J),ie},K.prototype.signWith=function(J){R.assertCompatible(J,D,[1,2],"key");for(var ee=Object.keys(L),ie=!1,ne=0;ne<ee.length;++ne)if(ee[ne]!=="pem"){var ce=L[ee[ne]].sign(this,J);ce===!0&&(ie=!0)}if(!ie)throw new Error("Failed to sign the certificate for any available certificate formats")},K.createSelfSigned=function(J,ee,ie){var ne;Array.isArray(J)?ne=J:ne=[J],E.arrayOfObject(ne),ne.forEach(function(Te){R.assertCompatible(Te,F,[1,0],"subject")}),R.assertCompatible(ee,D,[1,2],"private key"),E.optionalObject(ie,"options"),ie===void 0&&(ie={}),E.optionalObject(ie.validFrom,"options.validFrom"),E.optionalObject(ie.validUntil,"options.validUntil");var ce=ie.validFrom,fe=ie.validUntil;if(ce===void 0&&(ce=new Date),fe===void 0){E.optionalNumber(ie.lifetime,"options.lifetime");var de=ie.lifetime;de===void 0&&(de=10*365*24*3600),fe=new Date,fe.setTime(fe.getTime()+de*1e3)}E.optionalBuffer(ie.serial,"options.serial");var pe=ie.serial;pe===void 0&&(pe=A.from("0000000000000001","hex"));var ve=ie.purposes;if(ve===void 0&&(ve=[]),ve.indexOf("signature")===-1&&ve.push("signature"),ve.indexOf("ca")===-1&&ve.push("ca"),ve.indexOf("crl")===-1&&ve.push("crl"),ve.length<=3){var ye=ne.filter(function(Te){return Te.type==="host"}),_e=ne.filter(function(Te){return Te.type==="user"});ye.length>0&&ve.indexOf("serverAuth")===-1&&ve.push("serverAuth"),_e.length>0&&ve.indexOf("clientAuth")===-1&&ve.push("clientAuth"),(_e.length>0||ye.length>0)&&(ve.indexOf("keyAgreement")===-1&&ve.push("keyAgreement"),ee.type==="rsa"&&ve.indexOf("encryption")===-1&&ve.push("encryption"))}var be=new K({subjects:ne,issuer:ne[0],subjectKey:ee.toPublic(),issuerKey:ee.toPublic(),signatures:{},serial:pe,validFrom:ce,validUntil:fe,purposes:ve});return be.signWith(ee),be},K.create=function(J,ee,ie,ne,ce){var fe;Array.isArray(J)?fe=J:fe=[J],E.arrayOfObject(fe),fe.forEach(function(O){R.assertCompatible(O,F,[1,0],"subject")}),R.assertCompatible(ee,P,[1,0],"key"),D.isPrivateKey(ee)&&(ee=ee.toPublic()),R.assertCompatible(ie,F,[1,0],"issuer"),R.assertCompatible(ne,D,[1,2],"issuer key"),E.optionalObject(ce,"options"),ce===void 0&&(ce={}),E.optionalObject(ce.validFrom,"options.validFrom"),E.optionalObject(ce.validUntil,"options.validUntil");var de=ce.validFrom,pe=ce.validUntil;if(de===void 0&&(de=new Date),pe===void 0){E.optionalNumber(ce.lifetime,"options.lifetime");var ve=ce.lifetime;ve===void 0&&(ve=10*365*24*3600),pe=new Date,pe.setTime(pe.getTime()+ve*1e3)}E.optionalBuffer(ce.serial,"options.serial");var ye=ce.serial;ye===void 0&&(ye=A.from("0000000000000001","hex"));var _e=ce.purposes;_e===void 0&&(_e=[]),_e.indexOf("signature")===-1&&_e.push("signature"),ce.ca===!0&&(_e.indexOf("ca")===-1&&_e.push("ca"),_e.indexOf("crl")===-1&&_e.push("crl"));var be=fe.filter(function(O){return O.type==="host"}),Te=fe.filter(function(O){return O.type==="user"});be.length>0&&_e.indexOf("serverAuth")===-1&&_e.push("serverAuth"),Te.length>0&&_e.indexOf("clientAuth")===-1&&_e.push("clientAuth"),(Te.length>0||be.length>0)&&(_e.indexOf("keyAgreement")===-1&&_e.push("keyAgreement"),ee.type==="rsa"&&_e.indexOf("encryption")===-1&&_e.push("encryption"));var ue=new K({subjects:fe,issuer:ie,subjectKey:ee,issuerKey:ne.toPublic(),signatures:{},serial:ye,validFrom:de,validUntil:pe,purposes:_e});return ue.signWith(ne),ue},K.parse=function(J,ee,ie){typeof J!="string"&&E.buffer(J,"data"),ee===void 0&&(ee="auto"),E.string(ee,"format"),typeof ie=="string"&&(ie={filename:ie}),E.optionalObject(ie,"options"),ie===void 0&&(ie={}),E.optionalString(ie.filename,"options.filename"),ie.filename===void 0&&(ie.filename="(unnamed)"),E.object(L[ee],"formats[format]");try{var ne=L[ee].read(J,ie);return ne}catch(ce){throw new U(ie.filename,ee,ce)}},K.isCertificate=function(J,ee){return R.isCompatible(J,K,ee)},K.prototype._sshpkApiVersion=[1,1],K._oldVersionDetect=function(J){return[1,0]},certificate}var fingerprint,hasRequiredFingerprint;function requireFingerprint(){if(hasRequiredFingerprint)return fingerprint;hasRequiredFingerprint=1,fingerprint=U;var E=requireAssert(),A=requireSafer().Buffer,_=requireAlgs(),I=requireCryptoBrowserify(),B=requireErrors$1(),T=requireKey(),R=requirePrivateKey(),P=requireCertificate(),D=requireUtils$1(),F=B.FingerprintFormatError,L=B.InvalidAlgorithmError;function U(ne){if(E.object(ne,"options"),E.string(ne.type,"options.type"),E.buffer(ne.hash,"options.hash"),E.string(ne.algorithm,"options.algorithm"),this.algorithm=ne.algorithm.toLowerCase(),_.hashAlgs[this.algorithm]!==!0)throw new L(this.algorithm);this.hash=ne.hash,this.type=ne.type,this.hashType=ne.hashType}U.prototype.toString=function(ne){switch(ne===void 0&&(this.algorithm==="md5"||this.hashType==="spki"?ne="hex":ne="base64"),E.string(ne),ne){case"hex":return this.hashType==="spki"?this.hash.toString("hex"):J(this.hash.toString("hex"));case"base64":return this.hashType==="spki"?this.hash.toString("base64"):ie(this.algorithm,this.hash.toString("base64"));default:throw new F(void 0,ne)}},U.prototype.matches=function(ne){E.object(ne,"key or certificate"),this.type==="key"&&this.hashType!=="ssh"?(D.assertCompatible(ne,T,[1,7],"key with spki"),R.isPrivateKey(ne)&&D.assertCompatible(ne,R,[1,6],"privatekey with spki support")):this.type==="key"?D.assertCompatible(ne,T,[1,0],"key"):D.assertCompatible(ne,P,[1,0],"certificate");var ce=ne.hash(this.algorithm,this.hashType),fe=I.createHash(this.algorithm).update(ce).digest("base64");return this.hash2===void 0&&(this.hash2=I.createHash(this.algorithm).update(this.hash).digest("base64")),this.hash2===fe};var V=/^[A-Za-z0-9+\/=]+$/,K=/^[a-fA-F0-9]+$/;U.parse=function(ne,ce){E.string(ne,"fingerprint");var fe,de,pe;Array.isArray(ce)&&(pe=ce,ce={}),E.optionalObject(ce,"options"),ce===void 0&&(ce={}),ce.enAlgs!==void 0&&(pe=ce.enAlgs),ce.algorithms!==void 0&&(pe=ce.algorithms),E.optionalArrayOfString(pe,"algorithms");var ve="ssh";ce.hashType!==void 0&&(ve=ce.hashType),E.string(ve,"options.hashType");var ye=ne.split(":");if(ye.length==2){if(fe=ye[0].toLowerCase(),!V.test(ye[1]))throw new F(ne);try{de=A.from(ye[1],"base64")}catch{throw new F(ne)}}else if(ye.length>2){if(fe="md5",ye[0].toLowerCase()==="md5"&&(ye=ye.slice(1)),ye=ye.map(function(_e){for(;_e.length<2;)_e="0"+_e;if(_e.length>2)throw new F(ne);return _e}),ye=ye.join(""),!K.test(ye)||ye.length%2!==0)throw new F(ne);try{de=A.from(ye,"hex")}catch{throw new F(ne)}}else{if(K.test(ne))de=A.from(ne,"hex");else if(V.test(ne))de=A.from(ne,"base64");else throw new F(ne);switch(de.length){case 32:fe="sha256";break;case 16:fe="md5";break;case 20:fe="sha1";break;case 64:fe="sha512";break;default:throw new F(ne)}ce.hashType===void 0&&(ve="spki")}if(fe===void 0)throw new F(ne);if(_.hashAlgs[fe]===void 0)throw new L(fe);if(pe!==void 0&&(pe=pe.map(function(_e){return _e.toLowerCase()}),pe.indexOf(fe)===-1))throw new L(fe);return new U({algorithm:fe,hash:de,type:ce.type||"key",hashType:ve})};function J(ne){return ne.replace(/(.{2})(?=.)/g,"$1:")}function ee(ne){return ne.replace(/=*$/,"")}function ie(ne,ce){return ne.toUpperCase()+":"+ee(ce)}return U.isFingerprint=function(ne,ce){return D.isCompatible(ne,U,ce)},U.prototype._sshpkApiVersion=[1,2],U._oldVersionDetect=function(ne){return E.func(ne.toString),E.func(ne.matches),[1,0]},fingerprint}var key,hasRequiredKey;function requireKey(){if(hasRequiredKey)return key;hasRequiredKey=1,key=K;var E=requireAssert(),A=requireAlgs(),_=requireCryptoBrowserify(),I=requireFingerprint(),B=requireSignature(),T=requireDhe().DiffieHellman,R=requireErrors$1(),P=requireUtils$1(),D=requirePrivateKey(),F;try{F=requireEdCompat()}catch{}var L=R.InvalidAlgorithmError,U=R.KeyParseError,V={};V.auto=requireAuto(),V.pem=requirePem(),V.pkcs1=requirePkcs1(),V.pkcs8=requirePkcs8(),V.rfc4253=requireRfc4253(),V.ssh=requireSsh(),V["ssh-private"]=requireSshPrivate(),V.openssh=V["ssh-private"],V.dnssec=requireDnssec(),V.putty=requirePutty(),V.ppk=V.putty;function K(J){E.object(J,"options"),E.arrayOfObject(J.parts,"options.parts"),E.string(J.type,"options.type"),E.optionalString(J.comment,"options.comment");var ee=A.info[J.type];if(typeof ee!="object")throw new L(J.type);for(var ie={},ne=0;ne<J.parts.length;++ne){var ce=J.parts[ne];ie[ce.name]=ce}this.type=J.type,this.parts=J.parts,this.part=ie,this.comment=void 0,this.source=J.source,this._rfc4253Cache=J._rfc4253Cache,this._hashCache={};var fe;if(this.curve=void 0,this.type==="ecdsa"){var de=this.part.curve.data.toString();this.curve=de,fe=A.curves[de].size}else if(this.type==="ed25519"||this.type==="curve25519")fe=256,this.curve="curve25519";else{var pe=this.part[ee.sizePart];fe=pe.data.length,fe=fe*8-P.countZeros(pe.data)}this.size=fe}return K.formats=V,K.prototype.toBuffer=function(J,ee){return J===void 0&&(J="ssh"),E.string(J,"format"),E.object(V[J],"formats[format]"),E.optionalObject(ee,"options"),J==="rfc4253"?(this._rfc4253Cache===void 0&&(this._rfc4253Cache=V.rfc4253.write(this)),this._rfc4253Cache):V[J].write(this,ee)},K.prototype.toString=function(J,ee){return this.toBuffer(J,ee).toString()},K.prototype.hash=function(J,ee){if(E.string(J,"algorithm"),E.optionalString(ee,"type"),ee===void 0&&(ee="ssh"),J=J.toLowerCase(),A.hashAlgs[J]===void 0)throw new L(J);var ie=J+"||"+ee;if(this._hashCache[ie])return this._hashCache[ie];var ne;if(ee==="ssh")ne=this.toBuffer("rfc4253");else if(ee==="spki")ne=V.pkcs8.pkcs8ToBuffer(this);else throw new Error("Hash type "+ee+" not supported");var ce=_.createHash(J).update(ne).digest();return this._hashCache[ie]=ce,ce},K.prototype.fingerprint=function(J,ee){J===void 0&&(J="sha256"),ee===void 0&&(ee="ssh"),E.string(J,"algorithm"),E.string(ee,"type");var ie={type:"key",hash:this.hash(J,ee),algorithm:J,hashType:ee};return new I(ie)},K.prototype.defaultHashAlgorithm=function(){var J="sha1";return this.type==="rsa"&&(J="sha256"),this.type==="dsa"&&this.size>1024&&(J="sha256"),this.type==="ed25519"&&(J="sha512"),this.type==="ecdsa"&&(this.size<=256?J="sha256":this.size<=384?J="sha384":J="sha512"),J},K.prototype.createVerify=function(J){if(J===void 0&&(J=this.defaultHashAlgorithm()),E.string(J,"hash algorithm"),this.type==="ed25519"&&F!==void 0)return new F.Verifier(this,J);if(this.type==="curve25519")throw new Error("Curve25519 keys are not suitable for signing or verification");var ee,ie,ne;try{ie=J.toUpperCase(),ee=_.createVerify(ie)}catch(ve){ne=ve}(ee===void 0||ne instanceof Error&&ne.message.match(/Unknown message digest/))&&(ie="RSA-",ie+=J.toUpperCase(),ee=_.createVerify(ie)),E.ok(ee,"failed to create verifier");var ce=ee.verify.bind(ee),fe=this.toBuffer("pkcs8"),de=this.curve,pe=this;return ee.verify=function(ve,ye){if(B.isSignature(ve,[2,0]))return ve.type!==pe.type||ve.hashAlgorithm&&ve.hashAlgorithm!==J||ve.curve&&pe.type==="ecdsa"&&ve.curve!==de?!1:ce(fe,ve.toBuffer("asn1"));if(typeof ve=="string"||Buffer$1.isBuffer(ve))return ce(fe,ve,ye);throw B.isSignature(ve,[1,0])?new Error("signature was created by too old a version of sshpk and cannot be verified"):new TypeError("signature must be a string, Buffer, or Signature object")},ee},K.prototype.createDiffieHellman=function(){if(this.type==="rsa")throw new Error("RSA keys do not support Diffie-Hellman");return new T(this)},K.prototype.createDH=K.prototype.createDiffieHellman,K.parse=function(J,ee,ie){typeof J!="string"&&E.buffer(J,"data"),ee===void 0&&(ee="auto"),E.string(ee,"format"),typeof ie=="string"&&(ie={filename:ie}),E.optionalObject(ie,"options"),ie===void 0&&(ie={}),E.optionalString(ie.filename,"options.filename"),ie.filename===void 0&&(ie.filename="(unnamed)"),E.object(V[ee],"formats[format]");try{var ne=V[ee].read(J,ie);return ne instanceof D&&(ne=ne.toPublic()),ne.comment||(ne.comment=ie.filename),ne}catch(ce){throw ce.name==="KeyEncryptedError"?ce:new U(ie.filename,ee,ce)}},K.isKey=function(J,ee){return P.isCompatible(J,K,ee)},K.prototype._sshpkApiVersion=[1,7],K._oldVersionDetect=function(J){return E.func(J.toBuffer),E.func(J.fingerprint),J.createDH?[1,4]:J.defaultHashAlgorithm?[1,3]:J.formats.auto?[1,2]:J.formats.pkcs1?[1,1]:[1,0]},key}var lib$3,hasRequiredLib$3;function requireLib$3(){if(hasRequiredLib$3)return lib$3;hasRequiredLib$3=1;var E=requireKey(),A=requireFingerprint(),_=requireSignature(),I=requirePrivateKey(),B=requireCertificate(),T=requireIdentity(),R=requireErrors$1();return lib$3={Key:E,parseKey:E.parse,Fingerprint:A,parseFingerprint:A.parse,Signature:_,parseSignature:_.parse,PrivateKey:I,parsePrivateKey:I.parse,generatePrivateKey:I.generate,Certificate:B,parseCertificate:B.parse,createSelfSignedCertificate:B.createSelfSigned,createCertificate:B.create,Identity:T,identityFromDN:T.parseDN,identityForHost:T.forHost,identityForUser:T.forUser,identityForEmail:T.forEmail,identityFromArray:T.fromArray,FingerprintFormatError:R.FingerprintFormatError,InvalidAlgorithmError:R.InvalidAlgorithmError,KeyParseError:R.KeyParseError,SignatureParseError:R.SignatureParseError,KeyEncryptedError:R.KeyEncryptedError,CertificateParseError:R.CertificateParseError},lib$3}var utils,hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils;hasRequiredUtils=1;var E=requireAssert(),A=requireLib$3(),_=requireUtil$3(),I={sha1:!0,sha256:!0,sha512:!0},B={rsa:!0,dsa:!0,ecdsa:!0};function T(D,F){Error.captureStackTrace&&Error.captureStackTrace(this,F||T),this.message=D,this.name=F.name}_.inherits(T,Error);function R(D){T.call(this,D,R)}_.inherits(R,T);function P(D){var F=D.toLowerCase().split("-");if(F.length!==2)throw new R(F[0].toUpperCase()+" is not a valid algorithm");if(F[0]!=="hmac"&&!B[F[0]])throw new R(F[0].toUpperCase()+" type keys are not supported");if(!I[F[1]])throw new R(F[1].toUpperCase()+" is not a supported hash algorithm");return F}return utils={HASH_ALGOS:I,PK_ALGOS:B,HttpSignatureError:T,InvalidAlgorithmError:R,validateAlgorithm:P,sshKeyToPEM:function(F){E.string(F,"ssh_key");var L=A.parseKey(F,"ssh");return L.toString("pem")},fingerprint:function(F){E.string(F,"ssh_key");var L=A.parseKey(F,"ssh");return L.fingerprint("md5").toString("hex")},pemToRsaSSHKey:function(F,L){E.equal("string",typeof F,"typeof pem");var U=A.parseKey(F,"pem");return U.comment=L,U.toString("ssh")}},utils}var parser,hasRequiredParser;function requireParser(){if(hasRequiredParser)return parser;hasRequiredParser=1;var E=requireAssert(),A=requireUtil$3(),_=requireUtils();_.HASH_ALGOS,_.PK_ALGOS;var I=_.HttpSignatureError,B=_.InvalidAlgorithmError,T=_.validateAlgorithm,R={New:0,Params:1},P={Name:0,Quote:1,Value:2,Comma:3};function D(K){I.call(this,K,D)}A.inherits(D,I);function F(K){I.call(this,K,F)}A.inherits(F,I);function L(K){I.call(this,K,L)}A.inherits(L,I);function U(K){I.call(this,K,U)}A.inherits(U,I);function V(K){I.call(this,K,V)}return A.inherits(V,I),parser={parseRequest:function(J,ee){E.object(J,"request"),E.object(J.headers,"request.headers"),ee===void 0&&(ee={}),ee.headers===void 0&&(ee.headers=[J.headers["x-date"]?"x-date":"date"]),E.object(ee,"options"),E.arrayOfString(ee.headers,"options.headers"),E.optionalFinite(ee.clockSkew,"options.clockSkew");var ie=ee.authorizationHeaderName||"authorization";if(!J.headers[ie])throw new U("no "+ie+" header present in the request");ee.clockSkew=ee.clockSkew||300;var ne=0,ce=R.New,fe=P.Name,de="",pe="",ve={scheme:"",params:{},signingString:""},ye=J.headers[ie];for(ne=0;ne<ye.length;ne++){var _e=ye.charAt(ne);switch(Number(ce)){case R.New:_e!==" "?ve.scheme+=_e:ce=R.Params;break;case R.Params:switch(Number(fe)){case P.Name:var be=_e.charCodeAt(0);if(be>=65&&be<=90||be>=97&&be<=122)de+=_e;else if(_e==="="){if(de.length===0)throw new F("bad param format");fe=P.Quote}else throw new F("bad param format");break;case P.Quote:if(_e==='"')pe="",fe=P.Value;else throw new F("bad param format");break;case P.Value:_e==='"'?(ve.params[de]=pe,fe=P.Comma):pe+=_e;break;case P.Comma:if(_e===",")de="",fe=P.Name;else throw new F("bad param format");break;default:throw new Error("Invalid substate")}break;default:throw new Error("Invalid substate")}}if(!ve.params.headers||ve.params.headers===""?J.headers["x-date"]?ve.params.headers=["x-date"]:ve.params.headers=["date"]:ve.params.headers=ve.params.headers.split(" "),!ve.scheme||ve.scheme!=="Signature")throw new F('scheme was not "Signature"');if(!ve.params.keyId)throw new F("keyId was not specified");if(!ve.params.algorithm)throw new F("algorithm was not specified");if(!ve.params.signature)throw new F("signature was not specified");ve.params.algorithm=ve.params.algorithm.toLowerCase();try{T(ve.params.algorithm)}catch(te){throw te instanceof B?new L(ve.params.algorithm+" is not supported"):te}for(ne=0;ne<ve.params.headers.length;ne++){var Te=ve.params.headers[ne].toLowerCase();if(ve.params.headers[ne]=Te,Te==="request-line")if(!ee.strict)ve.signingString+=J.method+" "+J.url+" HTTP/"+J.httpVersion;else throw new V("request-line is not a valid header with strict parsing enabled.");else if(Te==="(request-target)")ve.signingString+="(request-target): "+J.method.toLowerCase()+" "+J.url;else{var ue=J.headers[Te];if(ue===void 0)throw new U(Te+" was not in the request");ve.signingString+=Te+": "+ue}ne+1<ve.params.headers.length&&(ve.signingString+=`
`)}var O;if(J.headers.date||J.headers["x-date"]){J.headers["x-date"]?O=new Date(J.headers["x-date"]):O=new Date(J.headers.date);var z=new Date,Y=Math.abs(z.getTime()-O.getTime());if(Y>ee.clockSkew*1e3)throw new D("clock skew of "+Y/1e3+"s was greater than "+ee.clockSkew+"s")}if(ee.headers.forEach(function(te){if(ve.params.headers.indexOf(te.toLowerCase())<0)throw new U(te+" was not a signed header")}),ee.algorithms&&ee.algorithms.indexOf(ve.params.algorithm)===-1)throw new L(ve.params.algorithm+" is not a supported algorithm");return ve.algorithm=ve.params.algorithm.toUpperCase(),ve.keyId=ve.params.keyId,ve}},parser}var jsprim={},extsprintf={},hasRequiredExtsprintf;function requireExtsprintf(){if(hasRequiredExtsprintf)return extsprintf;hasRequiredExtsprintf=1;var E=requireAssert$1(),A=requireUtil$3();extsprintf.sprintf=_,extsprintf.printf=I,extsprintf.fprintf=B;function _(P){var D=["([^%]*)","%","(['\\-+ #0]*?)","([1-9]\\d*)?","(\\.([1-9]\\d*))?","[lhjztL]*?","([diouxXfFeEgGaAcCsSp%jr])"].join(""),F=new RegExp(D),L=Array.prototype.slice.call(arguments,1),U,V,K,J,ee,ie,ne,ce,fe,de="",pe=1;for(E.equal("string",typeof P);(fe=F.exec(P))!==null;){if(de+=fe[1],P=P.substring(fe[0].length),U=fe[2]||"",V=fe[3]||0,K=fe[4]||"",J=fe[6],ee=!1,ne=!1,ie=" ",J=="%"){de+="%";continue}if(L.length===0)throw new Error("too few args to sprintf");if(ce=L.shift(),pe++,U.match(/[\' #]/))throw new Error("unsupported flags: "+U);if(K.length>0)throw new Error("non-zero precision not supported");switch(U.match(/-/)&&(ee=!0),U.match(/0/)&&(ie="0"),U.match(/\+/)&&(ne=!0),J){case"s":if(ce==null)throw new Error("argument "+pe+": attempted to print undefined or null as a string");de+=T(ie,V,ee,ce.toString());break;case"d":ce=Math.floor(ce);case"f":ne=ne&&ce>0?"+":"",de+=ne+T(ie,V,ee,ce.toString());break;case"x":de+=T(ie,V,ee,ce.toString(16));break;case"j":V===0&&(V=10),de+=A.inspect(ce,!1,V);break;case"r":de+=R(ce);break;default:throw new Error("unsupported conversion: "+J)}}return de+=P,de}function I(){var P=Array.prototype.slice.call(arguments);P.unshift(process$1.stdout),B.apply(null,P)}function B(P){var D=Array.prototype.slice.call(arguments,1);return P.write(_.apply(this,D))}function T(P,D,F,L){for(var U=L;U.length<D;)F?U+=P:U=P+U;return U}function R(P){var D;if(!(P instanceof Error))throw new Error(_("invalid type for %%r: %j",P));if(D="EXCEPTION: "+P.constructor.name+": "+P.stack,P.cause&&typeof P.cause=="function"){var F=P.cause();F&&(D+=`
Caused by: `+R(F))}return D}return extsprintf}var util$1={},hasRequiredUtil$1;function requireUtil$1(){if(hasRequiredUtil$1)return util$1;hasRequiredUtil$1=1;function E(ee){return Array.isArray?Array.isArray(ee):J(ee)==="[object Array]"}util$1.isArray=E;function A(ee){return typeof ee=="boolean"}util$1.isBoolean=A;function _(ee){return ee===null}util$1.isNull=_;function I(ee){return ee==null}util$1.isNullOrUndefined=I;function B(ee){return typeof ee=="number"}util$1.isNumber=B;function T(ee){return typeof ee=="string"}util$1.isString=T;function R(ee){return typeof ee=="symbol"}util$1.isSymbol=R;function P(ee){return ee===void 0}util$1.isUndefined=P;function D(ee){return J(ee)==="[object RegExp]"}util$1.isRegExp=D;function F(ee){return typeof ee=="object"&&ee!==null}util$1.isObject=F;function L(ee){return J(ee)==="[object Date]"}util$1.isDate=L;function U(ee){return J(ee)==="[object Error]"||ee instanceof Error}util$1.isError=U;function V(ee){return typeof ee=="function"}util$1.isFunction=V;function K(ee){return ee===null||typeof ee=="boolean"||typeof ee=="number"||typeof ee=="string"||typeof ee=="symbol"||typeof ee>"u"}util$1.isPrimitive=K,util$1.isBuffer=Buffer$1.isBuffer;function J(ee){return Object.prototype.toString.call(ee)}return util$1}var verror,hasRequiredVerror;function requireVerror(){if(hasRequiredVerror)return verror;hasRequiredVerror=1;var E=requireAssert(),A=requireUtil$3(),_=requireExtsprintf(),I=requireUtil$1().isError,B=_.sprintf;verror=R,R.VError=R,R.SError=P,R.WError=F,R.MultiError=D;function T(L){var U,V,K,J,ee;if(E.object(L,"args"),E.bool(L.strict,"args.strict"),E.array(L.argv,"args.argv"),U=L.argv,U.length===0)V={},K=[];else if(I(U[0]))V={cause:U[0]},K=U.slice(1);else if(typeof U[0]=="object"){V={};for(ee in U[0])V[ee]=U[0][ee];K=U.slice(1)}else E.string(U[0],"first argument to VError, SError, or WError constructor must be a string, object, or Error"),V={},K=U;return E.object(V),!V.strict&&!L.strict&&(K=K.map(function(ie){return ie===null?"null":ie===void 0?"undefined":ie})),K.length===0?J="":J=B.apply(null,K),{options:V,shortmessage:J}}function R(){var L,U,V,K,J,ee,ie;if(L=Array.prototype.slice.call(arguments,0),!(this instanceof R))return U=Object.create(R.prototype),R.apply(U,arguments),U;if(V=T({argv:L,strict:!1}),V.options.name&&(E.string(V.options.name,`error's "name" must be a string`),this.name=V.options.name),this.jse_shortmsg=V.shortmessage,ee=V.shortmessage,K=V.options.cause,K&&(E.ok(I(K),"cause is not an Error"),this.jse_cause=K,V.options.skipCauseMessage||(ee+=": "+K.message)),this.jse_info={},V.options.info)for(ie in V.options.info)this.jse_info[ie]=V.options.info[ie];return this.message=ee,Error.call(this,ee),Error.captureStackTrace&&(J=V.options.constructorOpt||this.constructor,Error.captureStackTrace(this,J)),this}A.inherits(R,Error),R.prototype.name="VError",R.prototype.toString=function(){var U=this.hasOwnProperty("name")&&this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(U+=": "+this.message),U},R.prototype.cause=function(){var U=R.cause(this);return U===null?void 0:U},R.cause=function(L){return E.ok(I(L),"err must be an Error"),I(L.jse_cause)?L.jse_cause:null},R.info=function(L){var U,V,K;if(E.ok(I(L),"err must be an Error"),V=R.cause(L),V!==null?U=R.info(V):U={},typeof L.jse_info=="object"&&L.jse_info!==null)for(K in L.jse_info)U[K]=L.jse_info[K];return U},R.findCauseByName=function(L,U){var V;for(E.ok(I(L),"err must be an Error"),E.string(U,"name"),E.ok(U.length>0,"name cannot be empty"),V=L;V!==null;V=R.cause(V))if(E.ok(I(V)),V.name==U)return V;return null},R.hasCauseWithName=function(L,U){return R.findCauseByName(L,U)!==null},R.fullStack=function(L){E.ok(I(L),"err must be an Error");var U=R.cause(L);return U?L.stack+`
caused by: `+R.fullStack(U):L.stack},R.errorFromList=function(L){return E.arrayOfObject(L,"errors"),L.length===0?null:(L.forEach(function(U){E.ok(I(U))}),L.length==1?L[0]:new D(L))},R.errorForEach=function(L,U){E.ok(I(L),"err must be an Error"),E.func(U,"func"),L instanceof D?L.errors().forEach(function(K){U(K)}):U(L)};function P(){var L,U,V,K;return L=Array.prototype.slice.call(arguments,0),this instanceof P?(V=T({argv:L,strict:!0}),K=V.options,R.call(this,K,"%s",V.shortmessage),this):(U=Object.create(P.prototype),P.apply(U,arguments),U)}A.inherits(P,R);function D(L){E.array(L,"list of errors"),E.ok(L.length>0,"must be at least one error"),this.ase_errors=L,R.call(this,{cause:L[0]},"first of %d error%s",L.length,L.length==1?"":"s")}A.inherits(D,R),D.prototype.name="MultiError",D.prototype.errors=function(){return this.ase_errors.slice(0)};function F(){var L,U,V,K;return L=Array.prototype.slice.call(arguments,0),this instanceof F?(V=T({argv:L,strict:!1}),K=V.options,K.skipCauseMessage=!0,R.call(this,K,"%s",V.shortmessage),this):(U=Object.create(F.prototype),F.apply(U,L),U)}return A.inherits(F,R),F.prototype.name="WError",F.prototype.toString=function(){var U=this.hasOwnProperty("name")&&this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(U+=": "+this.message),this.jse_cause&&this.jse_cause.message&&(U+="; caused by "+this.jse_cause.toString()),U},F.prototype.cause=function(U){return I(U)&&(this.jse_cause=U),this.jse_cause},verror}var validate$2={exports:{}},validate$1=validate$2.exports,hasRequiredValidate$1;function requireValidate$1(){return hasRequiredValidate$1||(hasRequiredValidate$1=1,(function(E){(function(A,_){E.exports?E.exports=_():A.jsonSchema=_()})(validate$1,function(){var A=I;A.Integer={type:"integer"};var _={String,Boolean,Number,Object,Array,Date};A.validate=I;function I(B,T){return I(B,T,{changing:!1})}A.checkPropertyChange=function(B,T,R){return I(B,T,{changing:R||"property"})};var I=A._validate=function(B,T,R){R||(R={});var P=R.changing;function D(V){return V.type||_[V.name]==V&&V.name.toLowerCase()}var F=[];function L(V,K,J,ee){var ie;J+=J?typeof ee=="number"?"["+ee+"]":typeof ee>"u"?"":"."+ee:ee;function ne(_e){F.push({property:J,message:_e})}if((typeof K!="object"||K instanceof Array)&&(J||typeof K!="function")&&!(K&&D(K)))return typeof K=="function"?V instanceof K||ne("is not an instance of the class/constructor "+K.name):K&&ne("Invalid schema/property definition "+K),null;P&&K.readonly&&ne("is a readonly field, it can not be changed"),K.extends&&L(V,K.extends,J,ee);function ce(_e,be){if(_e){if(typeof _e=="string"&&_e!="any"&&(_e=="null"?be!==null:typeof be!=_e)&&!(be instanceof Array&&_e=="array")&&!(be instanceof Date&&_e=="date")&&!(_e=="integer"&&be%1===0))return[{property:J,message:be+" - "+typeof be+" value found, but a "+_e+" is required"}];if(_e instanceof Array){for(var Te=[],ue=0;ue<_e.length&&(Te=ce(_e[ue],be)).length;ue++);if(Te.length)return Te}else if(typeof _e=="object"){var O=F;F=[],L(be,_e,J);var z=F;return F=O,z}}return[]}if(V===void 0)K.required&&ne("is missing and it is required");else if(F=F.concat(ce(D(K),V)),K.disallow&&!ce(K.disallow,V).length&&ne(" disallowed value was matched"),V!==null){if(V instanceof Array){if(K.items){var fe=K.items instanceof Array,de=K.items;for(ee=0,ie=V.length;ee<ie;ee+=1)fe&&(de=K.items[ee]),R.coerce&&(V[ee]=R.coerce(V[ee],de)),F.concat(L(V[ee],de,J,ee))}K.minItems&&V.length<K.minItems&&ne("There must be a minimum of "+K.minItems+" in the array"),K.maxItems&&V.length>K.maxItems&&ne("There must be a maximum of "+K.maxItems+" in the array")}else(K.properties||K.additionalProperties)&&F.concat(U(V,K.properties,J,K.additionalProperties));if(K.pattern&&typeof V=="string"&&!V.match(K.pattern)&&ne("does not match the regex pattern "+K.pattern),K.maxLength&&typeof V=="string"&&V.length>K.maxLength&&ne("may only be "+K.maxLength+" characters long"),K.minLength&&typeof V=="string"&&V.length<K.minLength&&ne("must be at least "+K.minLength+" characters long"),typeof K.minimum<"u"&&typeof V==typeof K.minimum&&K.minimum>V&&ne("must have a minimum value of "+K.minimum),typeof K.maximum<"u"&&typeof V==typeof K.maximum&&K.maximum<V&&ne("must have a maximum value of "+K.maximum),K.enum){var pe=K.enum;ie=pe.length;for(var ve,ye=0;ye<ie;ye++)if(pe[ye]===V){ve=1;break}ve||ne("does not have a value in the enumeration "+pe.join(", "))}typeof K.maxDecimal=="number"&&V.toString().match(new RegExp("\\.[0-9]{"+(K.maxDecimal+1)+",}"))&&ne("may only have "+K.maxDecimal+" digits of decimal places")}return null}function U(V,K,J,ee){if(typeof K=="object"){(typeof V!="object"||V instanceof Array)&&F.push({property:J,message:"an object is required"});for(var ie in K)if(K.hasOwnProperty(ie)&&ie!="__proto__"&&ie!="constructor"){var ne=V.hasOwnProperty(ie)?V[ie]:void 0;if(ne===void 0&&R.existingOnly)continue;var ce=K[ie];ne===void 0&&ce.default&&(ne=V[ie]=ce.default),R.coerce&&ie in V&&(ne=V[ie]=R.coerce(ne,ce)),L(ne,ce,J,ie)}}for(ie in V){if(V.hasOwnProperty(ie)&&!(ie.charAt(0)=="_"&&ie.charAt(1)=="_")&&K&&!K[ie]&&ee===!1)if(R.filter){delete V[ie];continue}else F.push({property:J,message:"The property "+ie+" is not defined in the schema and the schema does not allow additional properties"});var fe=K&&K[ie]&&K[ie].requires;fe&&!(fe in V)&&F.push({property:J,message:"the presence of the property "+ie+" requires that "+fe+" also be present"}),ne=V[ie],ee&&(!(K&&typeof K=="object")||!(ie in K))&&(R.coerce&&(ne=V[ie]=R.coerce(ne,ee)),L(ne,ee,J,ie)),!P&&ne&&ne.$schema&&(F=F.concat(L(ne,ne.$schema,J,ie)))}return F}return T&&L(B,T,"",P||""),!P&&B&&B.$schema&&L(B,B.$schema,"",""),{valid:!F.length,errors:F}};return A.mustBeValid=function(B){if(!B.valid)throw new TypeError(B.errors.map(function(T){return"for property "+T.property+": "+T.message}).join(`, 
`))},A})})(validate$2)),validate$2.exports}var hasRequiredJsprim;function requireJsprim(){if(hasRequiredJsprim)return jsprim;hasRequiredJsprim=1;var E=requireAssert();requireUtil$3();var A=requireExtsprintf(),_=requireVerror(),I=requireValidate$1();jsprim.deepCopy=B,jsprim.deepEqual=T,jsprim.isEmpty=R,jsprim.hasKey=P,jsprim.forEachKey=D,jsprim.pluck=F,jsprim.flattenObject=K,jsprim.flattenIter=U,jsprim.validateJsonObject=xe,jsprim.validateJsonObjectJS=xe,jsprim.randElt=Fe,jsprim.extraProperties=St,jsprim.mergeObjects=vt,jsprim.startsWith=J,jsprim.endsWith=ee,jsprim.parseInteger=ke,jsprim.iso8601=ie,jsprim.rfc1123=fe,jsprim.parseDateTime=de,jsprim.hrtimediff=Oe,jsprim.hrtimeDiff=Oe,jsprim.hrtimeAccum=mt,jsprim.hrtimeAdd=Ut,jsprim.hrtimeNanosec=et,jsprim.hrtimeMicrosec=Mt,jsprim.hrtimeMillisec=dt;function B(It){var yt,Tt,Wt="__deepCopy";if(It&&It[Wt])throw new Error("attempted deep copy of cyclic object");if(It&&It.constructor==Object){yt={},It[Wt]=!0;for(Tt in It)Tt!=Wt&&(yt[Tt]=B(It[Tt]));return delete It[Wt],yt}if(It&&It.constructor==Array){for(yt=[],It[Wt]=!0,Tt=0;Tt<It.length;Tt++)yt.push(B(It[Tt]));return delete It[Wt],yt}return It}function T(It,yt){if(typeof It!=typeof yt)return!1;if(It===null||yt===null||typeof It!="object")return It===yt;if(It.constructor!=yt.constructor)return!1;var Tt;for(Tt in It)if(!yt.hasOwnProperty(Tt)||!T(It[Tt],yt[Tt]))return!1;for(Tt in yt)if(!It.hasOwnProperty(Tt))return!1;return!0}function R(It){var yt;for(yt in It)return!1;return!0}function P(It,yt){return E.equal(typeof yt,"string"),Object.prototype.hasOwnProperty.call(It,yt)}function D(It,yt){for(var Tt in It)P(It,Tt)&&yt(Tt,It[Tt])}function F(It,yt){return E.equal(typeof yt,"string"),L(It,yt)}function L(It,yt){if(!(It===null||typeof It!="object")){if(It.hasOwnProperty(yt))return It[yt];var Tt=yt.indexOf(".");if(Tt!=-1){var Wt=yt.substr(0,Tt);if(It.hasOwnProperty(Wt))return L(It[Wt],yt.substr(Tt+1))}}}function U(It,yt,Tt){V(It,yt,[],Tt)}function V(It,yt,Tt,Wt){var ft,_t;if(yt===0){ft=Tt.slice(0),ft.push(It),Wt(ft);return}E.ok(It!==null),E.equal(typeof It,"object"),E.equal(typeof yt,"number"),E.ok(yt>=0);for(_t in It)ft=Tt.slice(0),ft.push(_t),V(It[_t],yt-1,ft,Wt)}function K(It,yt){if(yt===0)return[It];E.ok(It!==null),E.equal(typeof It,"object"),E.equal(typeof yt,"number"),E.ok(yt>=0);var Tt=[],Wt;for(Wt in It)K(It[Wt],yt-1).forEach(function(ft){Tt.push([Wt].concat(ft))});return Tt}function J(It,yt){return It.substr(0,yt.length)==yt}function ee(It,yt){return It.substr(It.length-yt.length,yt.length)==yt}function ie(It){return typeof It=="number"&&(It=new Date(It)),E.ok(It.constructor===Date),A.sprintf("%4d-%02d-%02dT%02d:%02d:%02d.%03dZ",It.getUTCFullYear(),It.getUTCMonth()+1,It.getUTCDate(),It.getUTCHours(),It.getUTCMinutes(),It.getUTCSeconds(),It.getUTCMilliseconds())}var ne=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ce=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function fe(It){return A.sprintf("%s, %02d %s %04d %02d:%02d:%02d GMT",ce[It.getUTCDay()],It.getUTCDate(),ne[It.getUTCMonth()],It.getUTCFullYear(),It.getUTCHours(),It.getUTCMinutes(),It.getUTCSeconds())}function de(It){var yt=+It;return isNaN(yt)?new Date(It):new Date(yt)}var pe=Number.MAX_SAFE_INTEGER||9007199254740991,ve=Number.MIN_SAFE_INTEGER||-9007199254740991,ye={base:10,allowSign:!0,allowPrefix:!1,allowTrailing:!1,allowImprecise:!1,trimWhitespace:!1,leadingZeroIsOctal:!1},_e=48,be=57,Te=65,ue=66,O=79,z=84,Y=88,te=90,oe=97,le=98,he=111,ae=116,Q=120,se=122,Ae=48,ge=55,Ee=87;function ke(It,yt){E.string(It,"str"),E.optionalObject(yt,"options");var Tt=!1,Wt=ye;yt&&(Tt=P(yt,"base"),Wt=vt(Wt,yt),E.number(Wt.base,"options.base"),E.ok(Wt.base>=2,"options.base >= 2"),E.ok(Wt.base<=36,"options.base <= 36"),E.bool(Wt.allowSign,"options.allowSign"),E.bool(Wt.allowPrefix,"options.allowPrefix"),E.bool(Wt.allowTrailing,"options.allowTrailing"),E.bool(Wt.allowImprecise,"options.allowImprecise"),E.bool(Wt.trimWhitespace,"options.trimWhitespace"),E.bool(Wt.leadingZeroIsOctal,"options.leadingZeroIsOctal"),Wt.leadingZeroIsOctal&&E.ok(!Tt,'"base" and "leadingZeroIsOctal" are mutually exclusive'));var ft,_t=-1,Xt=Wt.base,Nt,qt=1,nr=0,ze=0,Ce=It.length;if(Wt.trimWhitespace)for(;ze<Ce&&Ie(It.charCodeAt(ze));)++ze;for(Wt.allowSign&&(It[ze]==="-"?(ze+=1,qt=-1):It[ze]==="+"&&(ze+=1)),It[ze]==="0"&&(Wt.allowPrefix&&(_t=we(It.charCodeAt(ze+1)),_t!==-1&&(!Tt||_t===Xt)&&(Xt=_t,ze+=2)),_t===-1&&Wt.leadingZeroIsOctal&&(Xt=8)),Nt=ze;ze<Ce&&(ft=Se(It.charCodeAt(ze)),ft!==-1&&ft<Xt);++ze)nr*=Xt,nr+=ft;if(Nt===ze)return new Error("invalid number: "+JSON.stringify(It));if(Wt.trimWhitespace)for(;ze<Ce&&Ie(It.charCodeAt(ze));)++ze;if(ze<Ce&&!Wt.allowTrailing)return new Error("trailing characters after number: "+JSON.stringify(It.slice(ze)));if(nr===0)return 0;var Le=nr*qt;return!Wt.allowImprecise&&(nr>pe||Le<ve)?new Error("number is outside of the supported range: "+JSON.stringify(It.slice(Nt,ze))):Le}function Se(It){return It>=_e&&It<=be?It-Ae:It>=Te&&It<=te?It-ge:It>=oe&&It<=se?It-Ee:-1}function Ie(It){return It===32||It>=9&&It<=13||It===160||It===5760||It===6158||It>=8192&&It<=8202||It===8232||It===8233||It===8239||It===8287||It===12288||It===65279}function we(It){return It===le||It===ue?2:It===he||It===O?8:It===ae||It===z?10:It===Q||It===Y?16:-1}function xe(It,yt){var Tt=I.validate(yt,It);if(Tt.errors.length===0)return null;var Wt=Tt.errors[0],ft=Wt.property,_t=Wt.message.toLowerCase(),Xt,Nt;(Xt=_t.indexOf("the property "))!=-1&&(Nt=_t.indexOf(" is not defined in the schema and the schema does not allow additional properties"))!=-1&&(Xt+=13,ft===""?ft=_t.substr(Xt,Nt-Xt):ft=ft+"."+_t.substr(Xt,Nt-Xt),_t="unsupported property");var qt=new _.VError('property "%s": %s',ft,_t);return qt.jsv_details=Wt,qt}function Fe(It){return E.ok(Array.isArray(It)&&It.length>0,"randElt argument must be a non-empty array"),It[Math.floor(Math.random()*It.length)]}function Ge(It){E.ok(It[0]>=0&&It[1]>=0,"negative numbers not allowed in hrtimes"),E.ok(It[1]<1e9,"nanoseconds column overflow")}function Oe(It,yt){Ge(It),Ge(yt),E.ok(It[0]>yt[0]||It[0]==yt[0]&&It[1]>=yt[1],"negative differences not allowed");var Tt=[It[0]-yt[0],0];return It[1]>=yt[1]?Tt[1]=It[1]-yt[1]:(Tt[0]--,Tt[1]=1e9-(yt[1]-It[1])),Tt}function et(It){return Ge(It),Math.floor(It[0]*1e9+It[1])}function Mt(It){return Ge(It),Math.floor(It[0]*1e6+It[1]/1e3)}function dt(It){return Ge(It),Math.floor(It[0]*1e3+It[1]/1e6)}function mt(It,yt){return Ge(It),Ge(yt),It[1]+=yt[1],It[1]>=1e9&&(It[0]++,It[1]-=1e9),It[0]+=yt[0],It}function Ut(It,yt){Ge(It);var Tt=[It[0],It[1]];return mt(Tt,yt)}function St(It,yt){E.ok(typeof It=="object"&&It!==null,"obj argument must be a non-null object"),E.ok(Array.isArray(yt),"allowed argument must be an array of strings");for(var Tt=0;Tt<yt.length;Tt++)E.ok(typeof yt[Tt]=="string","allowed argument must be an array of strings");return Object.keys(It).filter(function(Wt){return yt.indexOf(Wt)===-1})}function vt(It,yt,Tt){var Wt,ft;if(Wt={},Tt)for(ft in Tt)Wt[ft]=Tt[ft];if(It)for(ft in It)Wt[ft]=It[ft];if(yt)for(ft in yt)Wt[ft]=yt[ft];return Wt}return jsprim}var signer,hasRequiredSigner;function requireSigner(){if(hasRequiredSigner)return signer;hasRequiredSigner=1;var E=requireAssert(),A=requireCryptoBrowserify();requireStreamHttp();var _=requireUtil$3(),I=requireLib$3(),B=requireJsprim(),T=requireUtils(),R=requireUtil$3().format,P=T.HASH_ALGOS,D=T.PK_ALGOS,F=T.InvalidAlgorithmError,L=T.HttpSignatureError,U=T.validateAlgorithm,V='Signature keyId="%s",algorithm="%s",headers="%s",signature="%s"';function K(ie){L.call(this,ie,K)}_.inherits(K,L);function J(ie){L.call(this,ie,J)}_.inherits(J,L);function ee(ie){E.object(ie,"options");var ne=[];if(ie.algorithm!==void 0&&(E.string(ie.algorithm,"options.algorithm"),ne=U(ie.algorithm)),this.rs_alg=ne,ie.sign!==void 0)E.func(ie.sign,"options.sign"),this.rs_signFunc=ie.sign;else if(ne[0]==="hmac"&&ie.key!==void 0){if(E.string(ie.keyId,"options.keyId"),this.rs_keyId=ie.keyId,typeof ie.key!="string"&&!Buffer$1.isBuffer(ie.key))throw new TypeError("options.key for HMAC must be a string or Buffer");this.rs_signer=A.createHmac(ne[1].toUpperCase(),ie.key),this.rs_signer.sign=function(){var fe=this.digest("base64");return{hashAlgorithm:ne[1],toString:function(){return fe}}}}else if(ie.key!==void 0){var ce=ie.key;if((typeof ce=="string"||Buffer$1.isBuffer(ce))&&(ce=I.parsePrivateKey(ce)),E.ok(I.PrivateKey.isPrivateKey(ce,[1,2]),"options.key must be a sshpk.PrivateKey"),this.rs_key=ce,E.string(ie.keyId,"options.keyId"),this.rs_keyId=ie.keyId,!D[ce.type])throw new F(ce.type.toUpperCase()+" type keys are not supported");if(ne[0]!==void 0&&ce.type!==ne[0])throw new F("options.key must be a "+ne[0].toUpperCase()+" key, was given a "+ce.type.toUpperCase()+" key instead");this.rs_signer=ce.createSign(ne[1])}else throw new TypeError("options.sign (func) or options.key is required");this.rs_headers=[],this.rs_lines=[]}return ee.prototype.writeHeader=function(ie,ne){if(E.string(ie,"header"),ie=ie.toLowerCase(),E.string(ne,"value"),this.rs_headers.push(ie),this.rs_signFunc)this.rs_lines.push(ie+": "+ne);else{var ce=ie+": "+ne;this.rs_headers.length>0&&(ce=`
`+ce),this.rs_signer.update(ce)}return ne},ee.prototype.writeDateHeader=function(){return this.writeHeader("date",B.rfc1123(new Date))},ee.prototype.writeTarget=function(ie,ne){E.string(ie,"method"),E.string(ne,"path"),ie=ie.toLowerCase(),this.writeHeader("(request-target)",ie+" "+ne)},ee.prototype.sign=function(ie){if(E.func(ie,"callback"),this.rs_headers.length<1)throw new Error("At least one header must be signed");var ne,ce;if(this.rs_signFunc){var fe=this.rs_lines.join(`
`),de=this;this.rs_signFunc(fe,function(ye,_e){if(ye){ie(ye);return}try{E.object(_e,"signature"),E.string(_e.keyId,"signature.keyId"),E.string(_e.algorithm,"signature.algorithm"),E.string(_e.signature,"signature.signature"),ne=U(_e.algorithm),ce=R(V,_e.keyId,_e.algorithm,de.rs_headers.join(" "),_e.signature)}catch(be){ie(be);return}ie(null,ce)})}else{try{var pe=this.rs_signer.sign()}catch(ye){ie(ye);return}ne=(this.rs_alg[0]||this.rs_key.type)+"-"+pe.hashAlgorithm;var ve=pe.toString();ce=R(V,this.rs_keyId,ne,this.rs_headers.join(" "),ve),ie(null,ce)}},signer={isSigner:function(ie){return typeof ie=="object"&&ie instanceof ee},createSigner:function(ne){return new ee(ne)},signRequest:function(ne,ce){E.object(ne,"request"),E.object(ce,"options"),E.optionalString(ce.algorithm,"options.algorithm"),E.string(ce.keyId,"options.keyId"),E.optionalArrayOfString(ce.headers,"options.headers"),E.optionalString(ce.httpVersion,"options.httpVersion"),ne.getHeader("Date")||ne.setHeader("Date",B.rfc1123(new Date)),ce.headers||(ce.headers=["date"]),ce.httpVersion||(ce.httpVersion="1.1");var fe=[];ce.algorithm&&(ce.algorithm=ce.algorithm.toLowerCase(),fe=U(ce.algorithm));var de,pe="";for(de=0;de<ce.headers.length;de++){if(typeof ce.headers[de]!="string")throw new TypeError("options.headers must be an array of Strings");var ve=ce.headers[de].toLowerCase();if(ve==="request-line")if(!ce.strict)pe+=ne.method+" "+ne.path+" HTTP/"+ce.httpVersion;else throw new J("request-line is not a valid header with strict parsing enabled.");else if(ve==="(request-target)")pe+="(request-target): "+ne.method.toLowerCase()+" "+ne.path;else{var ye=ne.getHeader(ve);if(ye===void 0||ye==="")throw new K(ve+" was not in the request");pe+=ve+": "+ye}de+1<ce.headers.length&&(pe+=`
`)}ne.hasOwnProperty("_stringToSign")&&(ne._stringToSign=pe);var _e;if(fe[0]==="hmac"){if(typeof ce.key!="string"&&!Buffer$1.isBuffer(ce.key))throw new TypeError("options.key must be a string or Buffer");var be=A.createHmac(fe[1].toUpperCase(),ce.key);be.update(pe),_e=be.digest("base64")}else{var Te=ce.key;if((typeof Te=="string"||Buffer$1.isBuffer(Te))&&(Te=I.parsePrivateKey(ce.key)),E.ok(I.PrivateKey.isPrivateKey(Te,[1,2]),"options.key must be a sshpk.PrivateKey"),!D[Te.type])throw new F(Te.type.toUpperCase()+" type keys are not supported");if(fe[0]!==void 0&&Te.type!==fe[0])throw new F("options.key must be a "+fe[0].toUpperCase()+" key, was given a "+Te.type.toUpperCase()+" key instead");var ue=Te.createSign(fe[1]);ue.update(pe);var O=ue.sign();if(!P[O.hashAlgorithm])throw new F(O.hashAlgorithm.toUpperCase()+" is not a supported hash algorithm");ce.algorithm=Te.type+"-"+O.hashAlgorithm,_e=O.toString(),E.notStrictEqual(_e,"","empty signature produced")}var z=ce.authorizationHeaderName||"Authorization";return ne.setHeader(z,R(V,ce.keyId,ce.algorithm,ce.headers.join(" "),_e)),!0}},signer}var verify,hasRequiredVerify;function requireVerify(){if(hasRequiredVerify)return verify;hasRequiredVerify=1;var E=requireAssert(),A=requireCryptoBrowserify(),_=requireLib$3(),I=requireUtils();I.HASH_ALGOS,I.PK_ALGOS,I.InvalidAlgorithmError,I.HttpSignatureError;var B=I.validateAlgorithm;return verify={verifySignature:function(R,P){E.object(R,"parsedSignature"),(typeof P=="string"||Buffer$1.isBuffer(P))&&(P=_.parseKey(P)),E.ok(_.Key.isKey(P,[1,1]),"pubkey must be a sshpk.Key");var D=B(R.algorithm);if(D[0]==="hmac"||D[0]!==P.type)return!1;var F=P.createVerify(D[1]);return F.update(R.signingString),F.verify(R.params.signature,"base64")},verifyHMAC:function(R,P){E.object(R,"parsedHMAC"),E.string(P,"secret");var D=B(R.algorithm);if(D[0]!=="hmac")return!1;var F=D[1].toUpperCase(),L=A.createHmac(F,P);L.update(R.signingString);var U=A.createHmac(F,P);U.update(L.digest()),U=U.digest();var V=A.createHmac(F,P);return V.update(new Buffer$1(R.params.signature,"base64")),V=V.digest(),typeof U=="string"?U===V:Buffer$1.isBuffer(U)&&!U.equals?U.toString("binary")===V.toString("binary"):U.equals(V)}},verify}var lib$2,hasRequiredLib$2;function requireLib$2(){if(hasRequiredLib$2)return lib$2;hasRequiredLib$2=1;var E=requireParser(),A=requireSigner(),_=requireVerify(),I=requireUtils();return lib$2={parse:E.parseRequest,parseRequest:E.parseRequest,sign:A.signRequest,signRequest:A.signRequest,createSigner:A.createSigner,isSigner:A.isSigner,sshKeyToPEM:I.sshKeyToPEM,sshKeyFingerprint:I.fingerprint,pemToRsaSSHKey:I.pemToRsaSSHKey,verify:_.verifySignature,verifySignature:_.verifySignature,verifyHMAC:_.verifyHMAC},lib$2}var mimeTypes={};const require$$0$1={"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/3gpp-ims+xml":{source:"iana",compressible:!0},"application/3gpphal+json":{source:"iana",compressible:!0},"application/3gpphalforms+json":{source:"iana",compressible:!0},"application/a2l":{source:"iana"},"application/ace+cbor":{source:"iana"},"application/activemessage":{source:"iana"},"application/activity+json":{source:"iana",compressible:!0},"application/alto-costmap+json":{source:"iana",compressible:!0},"application/alto-costmapfilter+json":{source:"iana",compressible:!0},"application/alto-directory+json":{source:"iana",compressible:!0},"application/alto-endpointcost+json":{source:"iana",compressible:!0},"application/alto-endpointcostparams+json":{source:"iana",compressible:!0},"application/alto-endpointprop+json":{source:"iana",compressible:!0},"application/alto-endpointpropparams+json":{source:"iana",compressible:!0},"application/alto-error+json":{source:"iana",compressible:!0},"application/alto-networkmap+json":{source:"iana",compressible:!0},"application/alto-networkmapfilter+json":{source:"iana",compressible:!0},"application/alto-updatestreamcontrol+json":{source:"iana",compressible:!0},"application/alto-updatestreamparams+json":{source:"iana",compressible:!0},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/at+jwt":{source:"iana"},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-dynamic-event-message":{source:"iana"},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rdt+json":{source:"iana",compressible:!0},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana",compressible:!0},"application/bacnet-xdd+zip":{source:"iana",compressible:!1},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:!1,extensions:["bdoc"]},"application/beep+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/calendar+json":{source:"iana",compressible:!0},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/captive+json":{source:"iana",compressible:!0},"application/cbor":{source:"iana"},"application/cbor-seq":{source:"iana"},"application/cccex":{source:"iana"},"application/ccmp+xml":{source:"iana",compressible:!0},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana",compressible:!0},"application/cellml+xml":{source:"iana",compressible:!0},"application/cfw":{source:"iana"},"application/city+json":{source:"iana",compressible:!0},"application/clr":{source:"iana"},"application/clue+xml":{source:"iana",compressible:!0},"application/clue_info+xml":{source:"iana",compressible:!0},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana",compressible:!0},"application/coap-group+json":{source:"iana",compressible:!0},"application/coap-payload":{source:"iana"},"application/commonground":{source:"iana"},"application/conference-info+xml":{source:"iana",compressible:!0},"application/cose":{source:"iana"},"application/cose-key":{source:"iana"},"application/cose-key-set":{source:"iana"},"application/cpl+xml":{source:"iana",compressible:!0,extensions:["cpl"]},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana",compressible:!0},"application/cstadata+xml":{source:"iana",compressible:!0},"application/csvm+json":{source:"iana",compressible:!0},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cwt":{source:"iana"},"application/cybercash":{source:"iana"},"application/dart":{compressible:!0},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:!0,extensions:["mpp"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana",compressible:!0},"application/dicom":{source:"iana"},"application/dicom+json":{source:"iana",compressible:!0},"application/dicom+xml":{source:"iana",compressible:!0},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/dns+json":{source:"iana",compressible:!0},"application/dns-message":{source:"iana"},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dots+cbor":{source:"iana"},"application/dskpp+xml":{source:"iana",compressible:!0},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/ecmascript":{source:"iana",compressible:!0,extensions:["es","ecma"]},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:!1},"application/edifact":{source:"iana",compressible:!1},"application/efi":{source:"iana"},"application/elm+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/elm+xml":{source:"iana",compressible:!0},"application/emergencycalldata.cap+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/emergencycalldata.comment+xml":{source:"iana",compressible:!0},"application/emergencycalldata.control+xml":{source:"iana",compressible:!0},"application/emergencycalldata.deviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.ecall.msd":{source:"iana"},"application/emergencycalldata.providerinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.serviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.subscriberinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.veds+xml":{source:"iana",compressible:!0},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/encaprtp":{source:"iana"},"application/epp+xml":{source:"iana",compressible:!0},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/expect-ct-report+json":{source:"iana",compressible:!0},"application/express":{source:"iana",extensions:["exp"]},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/fhir+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/fhir+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/fido.trusted-apps+json":{compressible:!0},"application/fits":{source:"iana"},"application/flexfec":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:!1},"application/framework-attributes+xml":{source:"iana",compressible:!0},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/geo+json-seq":{source:"iana"},"application/geopackage+sqlite3":{source:"iana"},"application/geoxacml+xml":{source:"iana",compressible:!0},"application/gltf-buffer":{source:"iana"},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/h224":{source:"iana"},"application/held+xml":{source:"iana",compressible:!0},"application/hjson":{extensions:["hjson"]},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana",compressible:!0},"application/ibe-pkg-reply+xml":{source:"iana",compressible:!0},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/jf2feed+json":{source:"iana",compressible:!0},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:!0},"application/jrd+json":{source:"iana",compressible:!0},"application/jscalendar+json":{source:"iana",compressible:!0},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:!0},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/jwk+json":{source:"iana",compressible:!0},"application/jwk-set+json":{source:"iana",compressible:!0},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana",compressible:!0},"application/kpml-response+xml":{source:"iana",compressible:!0},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/link-format":{source:"iana"},"application/load-control+xml":{source:"iana",compressible:!0},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/lostsync+xml":{source:"iana",compressible:!0},"application/lpf+zip":{source:"iana",compressible:!1},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mathml-content+xml":{source:"iana",compressible:!0},"application/mathml-presentation+xml":{source:"iana",compressible:!0},"application/mbms-associated-procedure-description+xml":{source:"iana",compressible:!0},"application/mbms-deregister+xml":{source:"iana",compressible:!0},"application/mbms-envelope+xml":{source:"iana",compressible:!0},"application/mbms-msk+xml":{source:"iana",compressible:!0},"application/mbms-msk-response+xml":{source:"iana",compressible:!0},"application/mbms-protection-description+xml":{source:"iana",compressible:!0},"application/mbms-reception-report+xml":{source:"iana",compressible:!0},"application/mbms-register+xml":{source:"iana",compressible:!0},"application/mbms-register-response+xml":{source:"iana",compressible:!0},"application/mbms-schedule+xml":{source:"iana",compressible:!0},"application/mbms-user-service-description+xml":{source:"iana",compressible:!0},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",compressible:!0,extensions:["mpf"]},"application/media_control+xml":{source:"iana",compressible:!0},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:!0},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mipc":{source:"iana"},"application/missing-blocks+cbor-seq":{source:"iana"},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana",compressible:!0},"application/mrb-publish+xml":{source:"iana",compressible:!0},"application/msc-ivr+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msc-mixer+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mud+json":{source:"iana",compressible:!0},"application/multipart-core":{source:"iana"},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana",charset:"US-ASCII"},"application/news-groupinfo":{source:"iana",charset:"US-ASCII"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana",compressible:!0},"application/node":{source:"iana",extensions:["cjs"]},"application/nss":{source:"iana"},"application/oauth-authz-req+jwt":{source:"iana"},"application/oblivious-dns-message":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odm+xml":{source:"iana",compressible:!0},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{source:"iana",compressible:!0},"application/oscore":{source:"iana"},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p21":{source:"iana"},"application/p21+zip":{source:"iana",compressible:!1},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/parityfec":{source:"iana"},"application/passport":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pem-certificate-chain":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"]},"application/pgp-signature":{source:"iana",extensions:["asc","sig"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pidf-diff+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkcs8-encrypted":{source:"iana"},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/poc-settings+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:!0},"application/problem+json":{source:"iana",compressible:!0},"application/problem+xml":{source:"iana",compressible:!0},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.cyn":{source:"iana",charset:"7-BIT"},"application/prs.hpub+zip":{source:"iana",compressible:!1},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.xsf+xml":{source:"iana",compressible:!0},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/pvd+json":{source:"iana",compressible:!0},"application/qsig":{source:"iana"},"application/raml+yaml":{compressible:!0,extensions:["raml"]},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:!0},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"iana"},"application/reputon+json":{source:"iana",compressible:!0},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rfc+xml":{source:"iana",compressible:!0},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana",compressible:!0},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-publication":{source:"iana"},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana",compressible:!0},"application/samlmetadata+xml":{source:"iana",compressible:!0},"application/sarif+json":{source:"iana",compressible:!0},"application/sarif-external-properties+json":{source:"iana",compressible:!0},"application/sbe":{source:"iana"},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scaip+xml":{source:"iana",compressible:!0},"application/scim+json":{source:"iana",compressible:!0},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/secevent+jwt":{source:"iana"},"application/senml+cbor":{source:"iana"},"application/senml+json":{source:"iana",compressible:!0},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/senml-etch+cbor":{source:"iana"},"application/senml-etch+json":{source:"iana",compressible:!0},"application/senml-exi":{source:"iana"},"application/sensml+cbor":{source:"iana"},"application/sensml+json":{source:"iana",compressible:!0},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/sensml-exi":{source:"iana"},"application/sep+xml":{source:"iana",compressible:!0},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"]},"application/simple-filter+xml":{source:"iana",compressible:!0},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/sipc":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"iana"},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:!0},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/spdx+json":{source:"iana",compressible:!0},"application/spirits-event+xml":{source:"iana",compressible:!0},"application/sql":{source:"iana"},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/stix+json":{source:"iana",compressible:!0},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:!0},"application/taxii+json":{source:"iana",compressible:!0},"application/td+json":{source:"iana",compressible:!0},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/tetra_isi":{source:"iana"},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/tlsrpt+gzip":{source:"iana"},"application/tlsrpt+json":{source:"iana",compressible:!0},"application/tnauthlist":{source:"iana"},"application/token-introspection+jwt":{source:"iana"},"application/toml":{compressible:!0,extensions:["toml"]},"application/trickle-ice-sdpfrag":{source:"iana"},"application/trig":{source:"iana",extensions:["trig"]},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/tve-trigger":{source:"iana"},"application/tzif":{source:"iana"},"application/tzif-leap":{source:"iana"},"application/ubjson":{compressible:!1,extensions:["ubj"]},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana",compressible:!0},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/urc-uisocketdesc+xml":{source:"iana",compressible:!0},"application/vcard+json":{source:"iana",compressible:!0},"application/vcard+xml":{source:"iana",compressible:!0},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.3gpp-prose+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-v2x-local-service-information":{source:"iana"},"application/vnd.3gpp.5gnas":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.bsf+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gmop+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gtpc":{source:"iana"},"application/vnd.3gpp.interworking-data":{source:"iana"},"application/vnd.3gpp.lpp":{source:"iana"},"application/vnd.3gpp.mc-signalling-ear":{source:"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-payload":{source:"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-signalling":{source:"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-floor-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-signed+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-init-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-transmission-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mid-call+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ngap":{source:"iana"},"application/vnd.3gpp.pfcp":{source:"iana"},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.s1ap":{source:"iana"},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ussd+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.afpc.afplinedata":{source:"iana"},"application/vnd.afpc.afplinedata-pagedef":{source:"iana"},"application/vnd.afpc.cmoca-cmresource":{source:"iana"},"application/vnd.afpc.foca-charset":{source:"iana"},"application/vnd.afpc.foca-codedfont":{source:"iana"},"application/vnd.afpc.foca-codepage":{source:"iana"},"application/vnd.afpc.modca":{source:"iana"},"application/vnd.afpc.modca-cmtable":{source:"iana"},"application/vnd.afpc.modca-formdef":{source:"iana"},"application/vnd.afpc.modca-mediummap":{source:"iana"},"application/vnd.afpc.modca-objectcontainer":{source:"iana"},"application/vnd.afpc.modca-overlay":{source:"iana"},"application/vnd.afpc.modca-pagesegment":{source:"iana"},"application/vnd.age":{source:"iana",extensions:["age"]},"application/vnd.ah-barcode":{source:"iana"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amadeus+json":{source:"iana",compressible:!0},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana",compressible:!0},"application/vnd.android.ota":{source:"iana"},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.arrow.file":{source:"iana"},"application/vnd.apache.arrow.stream":{source:"iana"},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:!0},"application/vnd.aplextor.warrp+json":{source:"iana",compressible:!0},"application/vnd.apothekende.reservation+json":{source:"iana",compressible:!0},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.apple.pkpass":{compressible:!1,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"iana"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artisan+json":{source:"iana",compressible:!0},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avalon+json":{source:"iana",compressible:!0},"application/vnd.avistar+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.banana-accounting":{source:"iana"},"application/vnd.bbf.usp.error":{source:"iana"},"application/vnd.bbf.usp.msg":{source:"iana"},"application/vnd.bbf.usp.msg+json":{source:"iana",compressible:!0},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:!0},"application/vnd.bint.med-content":{source:"iana"},"application/vnd.biopax.rdf+xml":{source:"iana",compressible:!0},"application/vnd.blink-idb-value-wrapper":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.bpf":{source:"iana"},"application/vnd.bpf3":{source:"iana"},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.byu.uapi+json":{source:"iana",compressible:!0},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.capasystems-pg+json":{source:"iana",compressible:!0},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.ciedi":{source:"iana"},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collabio.xodocuments.document":{source:"iana"},"application/vnd.collabio.xodocuments.document-template":{source:"iana"},"application/vnd.collabio.xodocuments.presentation":{source:"iana"},"application/vnd.collabio.xodocuments.presentation-template":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:!0},"application/vnd.collection.doc+json":{source:"iana",compressible:!0},"application/vnd.collection.next+json":{source:"iana",compressible:!0},"application/vnd.comicbook+zip":{source:"iana",compressible:!1},"application/vnd.comicbook-rar":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:!0},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.cryptii.pipe+json":{source:"iana",compressible:!0},"application/vnd.crypto-shade-file":{source:"iana"},"application/vnd.cryptomator.encrypted":{source:"iana"},"application/vnd.cryptomator.vault":{source:"iana"},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana",compressible:!0},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana",compressible:!0},"application/vnd.cybank":{source:"iana"},"application/vnd.cyclonedx+json":{source:"iana",compressible:!0},"application/vnd.cyclonedx+xml":{source:"iana",compressible:!0},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana",compressible:!1},"application/vnd.d3m-dataset":{source:"iana"},"application/vnd.d3m-problem":{source:"iana"},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.datapackage+json":{source:"iana",compressible:!0},"application/vnd.dataresource+json":{source:"iana",compressible:!0},"application/vnd.dbf":{source:"iana",extensions:["dbf"]},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume.movie":{source:"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana",compressible:!0},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:!0},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:!0},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbisl+xml":{source:"iana",compressible:!0},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-container+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-generic+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-init+xml":{source:"iana",compressible:!0},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecip.rlp":{source:"iana"},"application/vnd.eclipse.ditto+json":{source:"iana",compressible:!0},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.efi.img":{source:"iana"},"application/vnd.efi.iso":{source:"iana"},"application/vnd.emclient.accessrequest+xml":{source:"iana",compressible:!0},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana",compressible:!0},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana",compressible:!1},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.asic-e+zip":{source:"iana",compressible:!1},"application/vnd.etsi.asic-s+zip":{source:"iana",compressible:!1},"application/vnd.etsi.cug+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvcommand+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvservice+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsync+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvueprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mcid+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana",compressible:!0},"application/vnd.etsi.pstn+xml":{source:"iana",compressible:!0},"application/vnd.etsi.sci+xml":{source:"iana",compressible:!0},"application/vnd.etsi.simservs+xml":{source:"iana",compressible:!0},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana",compressible:!0},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eu.kasparian.car+json":{source:"iana",compressible:!0},"application/vnd.eudora.data":{source:"iana"},"application/vnd.evolv.ecig.profile":{source:"iana"},"application/vnd.evolv.ecig.settings":{source:"iana"},"application/vnd.evolv.ecig.theme":{source:"iana"},"application/vnd.exstream-empower+zip":{source:"iana",compressible:!1},"application/vnd.exstream-package":{source:"iana"},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.familysearch.gedcom+zip":{source:"iana",compressible:!1},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"iana",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.ffsns":{source:"iana"},"application/vnd.ficlab.flb+zip":{source:"iana",compressible:!1},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujifilm.fb.docuworks":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.container":{source:"iana"},"application/vnd.fujifilm.fb.jfi+xml":{source:"iana",compressible:!0},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.futoin+cbor":{source:"iana"},"application/vnd.futoin+json":{source:"iana",compressible:!0},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.gentics.grd+json":{source:"iana",compressible:!0},"application/vnd.geo+json":{source:"iana",compressible:!0},"application/vnd.geocube+xml":{source:"iana",compressible:!0},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.slides":{source:"iana"},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.google-apps.document":{compressible:!1,extensions:["gdoc"]},"application/vnd.google-apps.presentation":{compressible:!1,extensions:["gslides"]},"application/vnd.google-apps.spreadsheet":{compressible:!1,extensions:["gsheet"]},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"iana",compressible:!0},"application/vnd.gov.sk.e-form+zip":{source:"iana",compressible:!1},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana",compressible:!0},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:!0},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hc+json":{source:"iana",compressible:!0},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:!0},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hl7cda+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hl7v2+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyper+json":{source:"iana",compressible:!0},"application/vnd.hyper-item+json":{source:"iana",compressible:!0},"application/vnd.hyperdrive+json":{source:"iana",compressible:!0},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"iana"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.imagemeter.folder+zip":{source:"iana",compressible:!1},"application/vnd.imagemeter.image+zip":{source:"iana",compressible:!1},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:!0},"application/vnd.informedcontrol.rms+xml":{source:"iana",compressible:!0},"application/vnd.informix-visionary":{source:"iana"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana",compressible:!0},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.packageitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.planningitem+xml":{source:"iana",compressible:!0},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.iso11783-10+zip":{source:"iana",compressible:!1},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las":{source:"iana"},"application/vnd.las.las+json":{source:"iana",compressible:!0},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.laszip":{source:"iana"},"application/vnd.leap+json":{source:"iana",compressible:!0},"application/vnd.liberty-request+xml":{source:"iana",compressible:!0},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.logipipe.circuit+zip":{source:"iana",compressible:!1},"application/vnd.loom":{source:"iana"},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.conftoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.license+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:!0},"application/vnd.maxar.archive.3tz+zip":{source:"iana",compressible:!1},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:!0},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:!0},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana",compressible:!0},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:!0},"application/vnd.ms-outlook":{compressible:!1,extensions:["msg"]},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana",compressible:!0},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana",compressible:!0},"application/vnd.ms-printing.printticket+xml":{source:"apache",compressible:!0},"application/vnd.ms-printschematicket+xml":{source:"iana",compressible:!0},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.nacamar.ybrid+json":{source:"iana",compressible:!0},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:!0},"application/vnd.nebumind.line":{source:"iana"},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nimn":{source:"iana"},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana",compressible:!0},"application/vnd.nokia.iptv.config+xml":{source:"iana",compressible:!0},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana",compressible:!0},"application/vnd.nokia.landmarkcollection+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana",compressible:!0},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.ocf+cbor":{source:"iana"},"application/vnd.oci.image.manifest.v1+json":{source:"iana",compressible:!0},"application/vnd.oftn.l10n+json":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana",compressible:!0},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana",compressible:!0},"application/vnd.oipf.dae.xhtml+xml":{source:"iana",compressible:!0},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana",compressible:!0},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.oipf.spdlist+xml":{source:"iana",compressible:!0},"application/vnd.oipf.ueprofile+xml":{source:"iana",compressible:!0},"application/vnd.oipf.userprofile+xml":{source:"iana",compressible:!0},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.drm-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.imd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sprov+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-feature-handler+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-pcc+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-subs-invite+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-user-prefs+xml":{source:"iana",compressible:!0},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana",compressible:!0},"application/vnd.oma.group-usage-list+xml":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+cbor":{source:"iana"},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.final-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.groups+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana",compressible:!0},"application/vnd.oma.xcap-directory+xml":{source:"iana",compressible:!0},"application/vnd.omads-email+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-file+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-folder+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.onepagertamp":{source:"iana"},"application/vnd.onepagertamx":{source:"iana"},"application/vnd.onepagertat":{source:"iana"},"application/vnd.onepagertatp":{source:"iana"},"application/vnd.onepagertatx":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.opentimestamps.ots":{source:"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana",compressible:!0},"application/vnd.oracle.resource+json":{source:"iana",compressible:!0},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana",compressible:!0},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:!0},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos.xml":{source:"iana"},"application/vnd.patentdive":{source:"iana"},"application/vnd.patientecommsdoc":{source:"iana"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana",compressible:!0},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.psfs":{source:"iana"},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana",compressible:!0},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana",compressible:!0},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana",extensions:["rar"]},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.resilient.logic":{source:"iana"},"application/vnd.restful+json":{source:"iana",compressible:!0},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sar":{source:"iana"},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.seis+json":{source:"iana",compressible:!0},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shade-save-file":{source:"iana"},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.shootproof+json":{source:"iana",compressible:!0},"application/vnd.shopkick+json":{source:"iana",compressible:!0},"application/vnd.shp":{source:"iana"},"application/vnd.shx":{source:"iana"},"application/vnd.sigrok.session":{source:"iana"},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:!0},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.snesdev-page-table":{source:"iana"},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sqlite3":{source:"iana"},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.sycle+xml":{source:"iana",compressible:!0},"application/vnd.syft+json":{source:"iana",compressible:!0},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tableschema+json":{source:"iana",compressible:!0},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{source:"iana",compressible:!0},"application/vnd.tmd.mediaflex.api+xml":{source:"iana",compressible:!0},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:!0},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.veritone.aion+json":{source:"iana",compressible:!0},"application/vnd.veryant.thin":{source:"iana"},"application/vnd.ves.encrypted":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.dpp":{source:"iana"},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana",compressible:!0},"application/vnd.wv.ssp+xml":{source:"iana",compressible:!0},"application/vnd.xacml+json":{source:"iana",compressible:!0},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana",compressible:!0},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.youtube.yt":{source:"iana"},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/voucher-cms+json":{source:"iana",compressible:!0},"application/vq-rtcpxr":{source:"iana"},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0,extensions:["wif"]},"application/webpush-options+json":{source:"iana",compressible:!0},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-arj":{compressible:!1,extensions:["arj"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:!1,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:!1},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:!0,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-iwork-keynote-sffkey":{extensions:["key"]},"application/x-iwork-numbers-sffnumbers":{extensions:["numbers"]},"application/x-iwork-pages-sffpages":{extensions:["pages"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-javascript":{compressible:!0},"application/x-keepass2":{extensions:["kdbx"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:!1},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:!0,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-pki-message":{source:"iana"},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-virtualbox-hdd":{compressible:!0,extensions:["hdd"]},"application/x-virtualbox-ova":{compressible:!0,extensions:["ova"]},"application/x-virtualbox-ovf":{compressible:!0,extensions:["ovf"]},"application/x-virtualbox-vbox":{compressible:!0,extensions:["vbox"]},"application/x-virtualbox-vbox-extpack":{compressible:!1,extensions:["vbox-extpack"]},"application/x-virtualbox-vdi":{compressible:!0,extensions:["vdi"]},"application/x-virtualbox-vhd":{compressible:!0,extensions:["vhd"]},"application/x-virtualbox-vmdk":{compressible:!0,extensions:["vmdk"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:!0,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:!0},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"]},"application/x-x509-ca-ra-cert":{source:"iana"},"application/x-x509-next-ca-cert":{source:"iana"},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana",compressible:!0},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-error+xml":{source:"iana",compressible:!0},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xcon-conference-info+xml":{source:"iana",compressible:!0},"application/xcon-conference-info-diff+xml":{source:"iana",compressible:!0},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache",compressible:!0},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana",compressible:!0},"application/xmpp+xml":{source:"iana",compressible:!0},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+json":{source:"iana",compressible:!0},"application/yang-data+xml":{source:"iana",compressible:!0},"application/yang-patch+json":{source:"iana",compressible:!0},"application/yang-patch+xml":{source:"iana",compressible:!0},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"application/zlib":{source:"iana"},"application/zstd":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/aac":{source:"iana"},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/flexfec":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:!1},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/melp":{source:"iana"},"audio/melp1200":{source:"iana"},"audio/melp2400":{source:"iana"},"audio/melp600":{source:"iana"},"audio/mhas":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp3":{compressible:!1,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/scip":{source:"iana"},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sofa":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tetra_acelp":{source:"iana"},"audio/tetra_acelp_bb":{source:"iana"},"audio/tone":{source:"iana"},"audio/tsvcis":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/usac":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dts.uhd":{source:"iana"},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.presonus.multitrack":{source:"iana"},"audio/vnd.qcelp":{source:"iana"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:!1},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:!1},"audio/vorbis":{source:"iana",compressible:!1},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:!1,extensions:["wav"]},"audio/wave":{compressible:!1,extensions:["wav"]},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/sfnt":{source:"iana"},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"image/aces":{source:"iana",extensions:["exr"]},"image/apng":{compressible:!1,extensions:["apng"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:!1},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana",compressible:!0,extensions:["ico"]},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana"},"image/vnd.ms-dds":{compressible:!0,extensions:["dds"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:!1},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/http":{source:"iana",compressible:!1},"message/imdn+xml":{source:"iana",compressible:!0},"message/news":{source:"iana"},"message/partial":{source:"iana",compressible:!1},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/s-http":{source:"iana"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"iana"},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana",extensions:["3mf"]},"model/e57":{source:"iana"},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"]},"model/obj":{source:"iana",extensions:["obj"]},"model/step":{source:"iana"},"model/step+xml":{source:"iana",compressible:!0,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"]},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana",compressible:!0},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana",extensions:["ogex"]},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"]},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"]},"model/vnd.pytha.pyox":{source:"iana"},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.sap.vds":{source:"iana",extensions:["vds"]},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"]},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"]},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"]},"multipart/alternative":{source:"iana",compressible:!1},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:!1},"multipart/form-data":{source:"iana",compressible:!1},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana"},"multipart/multilingual":{source:"iana"},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:!1},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:!1},"multipart/vnd.bint.med-plus":{source:"iana"},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:!0},"text/cmd":{compressible:!0},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/cql":{source:"iana"},"text/cql-expression":{source:"iana"},"text/cql-identifier":{source:"iana"},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"iana"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fhirpath":{source:"iana"},"text/flexfec":{source:"iana"},"text/fwdred":{source:"iana"},"text/gff3":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",compressible:!0},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:!0,extensions:["jsx"]},"text/less":{compressible:!0,extensions:["less"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mdx":{compressible:!0,extensions:["mdx"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/parameters":{source:"iana",charset:"UTF-8"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana",charset:"UTF-8"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shaclc":{source:"iana"},"text/shex":{source:"iana",extensions:["shex"]},"text/slim":{extensions:["slim","slm"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/strings":{source:"iana"},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana",charset:"UTF-8"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana",charset:"UTF-8"},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.ficlab.flt":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.gml":{source:"iana"},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.hans":{source:"iana"},"text/vnd.hgl":{source:"iana"},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.senx.warpscript":{source:"iana"},"text/vnd.si.uricatalogue":{source:"iana"},"text/vnd.sosi":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana",charset:"UTF-8"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:!0},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:!0},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:!0,extensions:["mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-org":{compressible:!0,extensions:["org"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:!0,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:!0,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{compressible:!0,extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"iana"},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"iana"},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/av1":{source:"iana"},"video/bmpeg":{source:"iana"},"video/bt656":{source:"iana"},"video/celb":{source:"iana"},"video/dv":{source:"iana"},"video/encaprtp":{source:"iana"},"video/ffv1":{source:"iana"},"video/flexfec":{source:"iana"},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h263-1998":{source:"iana"},"video/h263-2000":{source:"iana"},"video/h264":{source:"iana",extensions:["h264"]},"video/h264-rcdo":{source:"iana"},"video/h264-svc":{source:"iana"},"video/h265":{source:"iana"},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpeg2000":{source:"iana"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/jxsv":{source:"iana"},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp1s":{source:"iana"},"video/mp2p":{source:"iana"},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"iana"},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"iana"},"video/mpv":{source:"iana"},"video/nv":{source:"iana"},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/parityfec":{source:"iana"},"video/pointer":{source:"iana"},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/raptorfec":{source:"iana"},"video/raw":{source:"iana"},"video/rtp-enc-aescm128":{source:"iana"},"video/rtploopback":{source:"iana"},"video/rtx":{source:"iana"},"video/scip":{source:"iana"},"video/smpte291":{source:"iana"},"video/smpte292m":{source:"iana"},"video/ulpfec":{source:"iana"},"video/vc1":{source:"iana"},"video/vc2":{source:"iana"},"video/vnd.cctv":{source:"iana"},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"iana"},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"iana"},"video/vnd.directv.mpeg-tts":{source:"iana"},"video/vnd.dlna.mpeg-tts":{source:"iana"},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.hns.video":{source:"iana"},"video/vnd.iptvforum.1dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.1dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.2dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.2dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.ttsavc":{source:"iana"},"video/vnd.iptvforum.ttsmpeg2":{source:"iana"},"video/vnd.motorola.video":{source:"iana"},"video/vnd.motorola.videop":{source:"iana"},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"iana"},"video/vnd.nokia.mp4vr":{source:"iana"},"video/vnd.nokia.videovoip":{source:"iana"},"video/vnd.objectvideo":{source:"iana"},"video/vnd.radgamettools.bink":{source:"iana"},"video/vnd.radgamettools.smacker":{source:"iana"},"video/vnd.sealed.mpeg1":{source:"iana"},"video/vnd.sealed.mpeg4":{source:"iana"},"video/vnd.sealed.swf":{source:"iana"},"video/vnd.sealedmedia.softseal.mov":{source:"iana"},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/vnd.youtube.yt":{source:"iana"},"video/vp8":{source:"iana"},"video/vp9":{source:"iana"},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:!0},"x-shader/x-vertex":{compressible:!0}};/*!
 * mime-db
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015-2022 Douglas Christopher Wilson
 * MIT Licensed
 */var mimeDb,hasRequiredMimeDb;function requireMimeDb(){return hasRequiredMimeDb||(hasRequiredMimeDb=1,mimeDb=require$$0$1),mimeDb}var pathBrowserify,hasRequiredPathBrowserify;function requirePathBrowserify(){if(hasRequiredPathBrowserify)return pathBrowserify;hasRequiredPathBrowserify=1;function E(B){if(typeof B!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(B))}function A(B,T){for(var R="",P=0,D=-1,F=0,L,U=0;U<=B.length;++U){if(U<B.length)L=B.charCodeAt(U);else{if(L===47)break;L=47}if(L===47){if(!(D===U-1||F===1))if(D!==U-1&&F===2){if(R.length<2||P!==2||R.charCodeAt(R.length-1)!==46||R.charCodeAt(R.length-2)!==46){if(R.length>2){var V=R.lastIndexOf("/");if(V!==R.length-1){V===-1?(R="",P=0):(R=R.slice(0,V),P=R.length-1-R.lastIndexOf("/")),D=U,F=0;continue}}else if(R.length===2||R.length===1){R="",P=0,D=U,F=0;continue}}T&&(R.length>0?R+="/..":R="..",P=2)}else R.length>0?R+="/"+B.slice(D+1,U):R=B.slice(D+1,U),P=U-D-1;D=U,F=0}else L===46&&F!==-1?++F:F=-1}return R}function _(B,T){var R=T.dir||T.root,P=T.base||(T.name||"")+(T.ext||"");return R?R===T.root?R+P:R+B+P:P}var I={resolve:function(){for(var T="",R=!1,P,D=arguments.length-1;D>=-1&&!R;D--){var F;D>=0?F=arguments[D]:(P===void 0&&(P=process$1.cwd()),F=P),E(F),F.length!==0&&(T=F+"/"+T,R=F.charCodeAt(0)===47)}return T=A(T,!R),R?T.length>0?"/"+T:"/":T.length>0?T:"."},normalize:function(T){if(E(T),T.length===0)return".";var R=T.charCodeAt(0)===47,P=T.charCodeAt(T.length-1)===47;return T=A(T,!R),T.length===0&&!R&&(T="."),T.length>0&&P&&(T+="/"),R?"/"+T:T},isAbsolute:function(T){return E(T),T.length>0&&T.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var T,R=0;R<arguments.length;++R){var P=arguments[R];E(P),P.length>0&&(T===void 0?T=P:T+="/"+P)}return T===void 0?".":I.normalize(T)},relative:function(T,R){if(E(T),E(R),T===R||(T=I.resolve(T),R=I.resolve(R),T===R))return"";for(var P=1;P<T.length&&T.charCodeAt(P)===47;++P);for(var D=T.length,F=D-P,L=1;L<R.length&&R.charCodeAt(L)===47;++L);for(var U=R.length,V=U-L,K=F<V?F:V,J=-1,ee=0;ee<=K;++ee){if(ee===K){if(V>K){if(R.charCodeAt(L+ee)===47)return R.slice(L+ee+1);if(ee===0)return R.slice(L+ee)}else F>K&&(T.charCodeAt(P+ee)===47?J=ee:ee===0&&(J=0));break}var ie=T.charCodeAt(P+ee),ne=R.charCodeAt(L+ee);if(ie!==ne)break;ie===47&&(J=ee)}var ce="";for(ee=P+J+1;ee<=D;++ee)(ee===D||T.charCodeAt(ee)===47)&&(ce.length===0?ce+="..":ce+="/..");return ce.length>0?ce+R.slice(L+J):(L+=J,R.charCodeAt(L)===47&&++L,R.slice(L))},_makeLong:function(T){return T},dirname:function(T){if(E(T),T.length===0)return".";for(var R=T.charCodeAt(0),P=R===47,D=-1,F=!0,L=T.length-1;L>=1;--L)if(R=T.charCodeAt(L),R===47){if(!F){D=L;break}}else F=!1;return D===-1?P?"/":".":P&&D===1?"//":T.slice(0,D)},basename:function(T,R){if(R!==void 0&&typeof R!="string")throw new TypeError('"ext" argument must be a string');E(T);var P=0,D=-1,F=!0,L;if(R!==void 0&&R.length>0&&R.length<=T.length){if(R.length===T.length&&R===T)return"";var U=R.length-1,V=-1;for(L=T.length-1;L>=0;--L){var K=T.charCodeAt(L);if(K===47){if(!F){P=L+1;break}}else V===-1&&(F=!1,V=L+1),U>=0&&(K===R.charCodeAt(U)?--U===-1&&(D=L):(U=-1,D=V))}return P===D?D=V:D===-1&&(D=T.length),T.slice(P,D)}else{for(L=T.length-1;L>=0;--L)if(T.charCodeAt(L)===47){if(!F){P=L+1;break}}else D===-1&&(F=!1,D=L+1);return D===-1?"":T.slice(P,D)}},extname:function(T){E(T);for(var R=-1,P=0,D=-1,F=!0,L=0,U=T.length-1;U>=0;--U){var V=T.charCodeAt(U);if(V===47){if(!F){P=U+1;break}continue}D===-1&&(F=!1,D=U+1),V===46?R===-1?R=U:L!==1&&(L=1):R!==-1&&(L=-1)}return R===-1||D===-1||L===0||L===1&&R===D-1&&R===P+1?"":T.slice(R,D)},format:function(T){if(T===null||typeof T!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof T);return _("/",T)},parse:function(T){E(T);var R={root:"",dir:"",base:"",ext:"",name:""};if(T.length===0)return R;var P=T.charCodeAt(0),D=P===47,F;D?(R.root="/",F=1):F=0;for(var L=-1,U=0,V=-1,K=!0,J=T.length-1,ee=0;J>=F;--J){if(P=T.charCodeAt(J),P===47){if(!K){U=J+1;break}continue}V===-1&&(K=!1,V=J+1),P===46?L===-1?L=J:ee!==1&&(ee=1):L!==-1&&(ee=-1)}return L===-1||V===-1||ee===0||ee===1&&L===V-1&&L===U+1?V!==-1&&(U===0&&D?R.base=R.name=T.slice(1,V):R.base=R.name=T.slice(U,V)):(U===0&&D?(R.name=T.slice(1,L),R.base=T.slice(1,V)):(R.name=T.slice(U,L),R.base=T.slice(U,V)),R.ext=T.slice(L,V)),U>0?R.dir=T.slice(0,U-1):D&&(R.dir="/"),R},sep:"/",delimiter:":",win32:null,posix:null};return I.posix=I,pathBrowserify=I,pathBrowserify}/*!
 * mime-types
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var hasRequiredMimeTypes;function requireMimeTypes(){return hasRequiredMimeTypes||(hasRequiredMimeTypes=1,(function(E){var A=requireMimeDb(),_=requirePathBrowserify().extname,I=/^\s*([^;\s]*)(?:;|\s|$)/,B=/^text\//i;E.charset=T,E.charsets={lookup:T},E.contentType=R,E.extension=P,E.extensions=Object.create(null),E.lookup=D,E.types=Object.create(null),F(E.extensions,E.types);function T(L){if(!L||typeof L!="string")return!1;var U=I.exec(L),V=U&&A[U[1].toLowerCase()];return V&&V.charset?V.charset:U&&B.test(U[1])?"UTF-8":!1}function R(L){if(!L||typeof L!="string")return!1;var U=L.indexOf("/")===-1?E.lookup(L):L;if(!U)return!1;if(U.indexOf("charset")===-1){var V=E.charset(U);V&&(U+="; charset="+V.toLowerCase())}return U}function P(L){if(!L||typeof L!="string")return!1;var U=I.exec(L),V=U&&E.extensions[U[1].toLowerCase()];return!V||!V.length?!1:V[0]}function D(L){if(!L||typeof L!="string")return!1;var U=_("x."+L).toLowerCase().substr(1);return U&&E.types[U]||!1}function F(L,U){var V=["nginx","apache",void 0,"iana"];Object.keys(A).forEach(function(J){var ee=A[J],ie=ee.extensions;if(!(!ie||!ie.length)){L[J]=ie;for(var ne=0;ne<ie.length;ne++){var ce=ie[ne];if(U[ce]){var fe=V.indexOf(A[U[ce]].source),de=V.indexOf(ee.source);if(U[ce]!=="application/octet-stream"&&(fe>de||fe===de&&U[ce].substr(0,12)==="application/"))continue}U[ce]=J}}})}})(mimeTypes)),mimeTypes}var caseless={exports:{}},hasRequiredCaseless;function requireCaseless(){if(hasRequiredCaseless)return caseless.exports;hasRequiredCaseless=1;function E(A){this.dict=A||{}}return E.prototype.set=function(A,_,I){if(typeof A=="object")for(var B in A)this.set(B,A[B],_);else{typeof I>"u"&&(I=!0);var T=this.has(A);return!I&&T?this.dict[T]=this.dict[T]+","+_:this.dict[T||A]=_,T}},E.prototype.has=function(I){for(var _=Object.keys(this.dict),I=I.toLowerCase(),B=0;B<_.length;B++)if(_[B].toLowerCase()===I)return _[B];return!1},E.prototype.get=function(A){A=A.toLowerCase();var _,I,B=this.dict;return Object.keys(B).forEach(function(T){I=T.toLowerCase(),A===I&&(_=B[T])}),_},E.prototype.swap=function(A){var _=this.has(A);if(_!==A){if(!_)throw new Error('There is no header than matches "'+A+'"');this.dict[A]=this.dict[_],delete this.dict[_]}},E.prototype.del=function(A){var _=this.has(A);return delete this.dict[_||A]},caseless.exports=function(A){return new E(A)},caseless.exports.httpify=function(A,_){var I=new E(_);return A.setHeader=function(B,T,R){if(!(typeof T>"u"))return I.set(B,T,R)},A.hasHeader=function(B){return I.has(B)},A.getHeader=function(B){return I.get(B)},A.removeHeader=function(B){return I.del(B)},A.headers=I.dict,I},caseless.exports}var foreverAgent,hasRequiredForeverAgent;function requireForeverAgent(){if(hasRequiredForeverAgent)return foreverAgent;hasRequiredForeverAgent=1,foreverAgent=R,R.SSL=P;var E=requireUtil$3(),A=requireStreamHttp().Agent,_=require$$0$3,I=require$$0$3,B=requireHttpsBrowserify().Agent;function T(F,L){var U="";return typeof F=="string"?U=F+":"+L:U=F.host+":"+F.port+":"+(F.localAddress?F.localAddress+":":":"),U}function R(F){var L=this;L.options=F||{},L.requests={},L.sockets={},L.freeSockets={},L.maxSockets=L.options.maxSockets||A.defaultMaxSockets,L.minSockets=L.options.minSockets||R.defaultMinSockets,L.on("free",function(U,V,K){var J=T(V,K);if(L.requests[J]&&L.requests[J].length)L.requests[J].shift().onSocket(U);else if(L.sockets[J].length<L.minSockets){L.freeSockets[J]||(L.freeSockets[J]=[]),L.freeSockets[J].push(U);var ee=function(){U.destroy()};U._onIdleError=ee,U.on("error",ee)}else U.destroy()})}E.inherits(R,A),R.defaultMinSockets=5,R.prototype.createConnection=_.createConnection,R.prototype.addRequestNoreuse=A.prototype.addRequest,R.prototype.addRequest=function(F,L,U){var V=T(L,U);if(typeof L!="string"){var K=L;U=K.port,L=K.host}if(this.freeSockets[V]&&this.freeSockets[V].length>0&&!F.useChunkedEncodingByDefault){var J=this.freeSockets[V].pop();J.removeListener("error",J._onIdleError),delete J._onIdleError,F._reusedSocket=!0,F.onSocket(J)}else this.addRequestNoreuse(F,L,U)},R.prototype.removeSocket=function(F,L,U,V){if(this.sockets[L]){var K=this.sockets[L].indexOf(F);K!==-1&&this.sockets[L].splice(K,1)}else this.sockets[L]&&this.sockets[L].length===0&&(delete this.sockets[L],delete this.requests[L]);if(this.freeSockets[L]){var K=this.freeSockets[L].indexOf(F);K!==-1&&(this.freeSockets[L].splice(K,1),this.freeSockets[L].length===0&&delete this.freeSockets[L])}this.requests[L]&&this.requests[L].length&&this.createSocket(L,U,V).emit("free")};function P(F){R.call(this,F)}E.inherits(P,R),P.prototype.createConnection=D,P.prototype.addRequestNoreuse=B.prototype.addRequest;function D(F,L,U){return typeof F=="object"?U=F:typeof L=="object"?U=L:typeof U=="object"?U=U:U={},typeof F=="number"&&(U.port=F),typeof L=="string"&&(U.host=L),I.connect(U)}return foreverAgent}var browser$1,hasRequiredBrowser$1;function requireBrowser$1(){return hasRequiredBrowser$1||(hasRequiredBrowser$1=1,browser$1=typeof self=="object"?self.FormData:window.FormData),browser$1}var isstream={exports:{}},hasRequiredIsstream;function requireIsstream(){if(hasRequiredIsstream)return isstream.exports;hasRequiredIsstream=1;var E=requireStreamBrowserify();function A(T){return T instanceof E.Stream}function _(T){return A(T)&&typeof T._read=="function"&&typeof T._readableState=="object"}function I(T){return A(T)&&typeof T._write=="function"&&typeof T._writableState=="object"}function B(T){return _(T)&&I(T)}return isstream.exports=A,isstream.exports.isReadable=_,isstream.exports.isWritable=I,isstream.exports.isDuplex=B,isstream.exports}var isTypedarray,hasRequiredIsTypedarray;function requireIsTypedarray(){if(hasRequiredIsTypedarray)return isTypedarray;hasRequiredIsTypedarray=1,isTypedarray=_,_.strict=I,_.loose=B;var E=Object.prototype.toString,A={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0};function _(T){return I(T)||B(T)}function I(T){return T instanceof Int8Array||T instanceof Int16Array||T instanceof Int32Array||T instanceof Uint8Array||T instanceof Uint8ClampedArray||T instanceof Uint16Array||T instanceof Uint32Array||T instanceof Float32Array||T instanceof Float64Array}function B(T){return A[E.call(T)]}return isTypedarray}var getProxyFromURI_1,hasRequiredGetProxyFromURI;function requireGetProxyFromURI(){if(hasRequiredGetProxyFromURI)return getProxyFromURI_1;hasRequiredGetProxyFromURI=1;var E={};function A(T){return T.replace(/^\.*/,".").toLowerCase()}function _(T){T=T.trim().toLowerCase();var R=T.split(":",2),P=A(R[0]),D=R[1],F=T.indexOf(":")>-1;return{hostname:P,port:D,hasPort:F}}function I(T,R){var P=T.port||(T.protocol==="https:"?"443":"80"),D=A(T.hostname),F=R.split(",");return F.map(_).some(function(L){var U=D.indexOf(L.hostname),V=U>-1&&U===D.length-L.hostname.length;return L.hasPort?P===L.port&&V:V})}function B(T){var R=E.NO_PROXY||E.no_proxy||"";return R==="*"||R!==""&&I(T,R)?null:T.protocol==="http:"?E.HTTP_PROXY||E.http_proxy||null:T.protocol==="https:"&&(E.HTTPS_PROXY||E.https_proxy||E.HTTP_PROXY||E.http_proxy)||null}return getProxyFromURI_1=B,getProxyFromURI_1}var querystring={},hasRequiredQuerystring;function requireQuerystring(){if(hasRequiredQuerystring)return querystring;hasRequiredQuerystring=1;var E=requireLib$6(),A=require$$1$1;function _(I){this.request=I,this.lib=null,this.useQuerystring=null,this.parseOptions=null,this.stringifyOptions=null}return _.prototype.init=function(I){this.lib||(this.useQuerystring=I.useQuerystring,this.lib=this.useQuerystring?A:E,this.parseOptions=I.qsParseOptions||{},this.stringifyOptions=I.qsStringifyOptions||{})},_.prototype.stringify=function(I){return this.useQuerystring?this.rfc3986(this.lib.stringify(I,this.stringifyOptions.sep||null,this.stringifyOptions.eq||null,this.stringifyOptions)):this.lib.stringify(I,this.stringifyOptions)},_.prototype.parse=function(I){return this.useQuerystring?this.lib.parse(I,this.parseOptions.sep||null,this.parseOptions.eq||null,this.parseOptions):this.lib.parse(I,this.parseOptions)},_.prototype.rfc3986=function(I){return I.replace(/[!'()*]/g,function(B){return"%"+B.charCodeAt(0).toString(16).toUpperCase()})},_.prototype.unescape=A.unescape,querystring.Querystring=_,querystring}var har={},promise={},uri_all$1={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */var uri_all=uri_all$1.exports,hasRequiredUri_all;function requireUri_all(){return hasRequiredUri_all||(hasRequiredUri_all=1,(function(E,A){(function(_,I){I(A)})(uri_all,(function(_){function I(){for(var Re=arguments.length,Pe=Array(Re),Me=0;Me<Re;Me++)Pe[Me]=arguments[Me];if(Pe.length>1){Pe[0]=Pe[0].slice(0,-1);for(var $e=Pe.length-1,it=1;it<$e;++it)Pe[it]=Pe[it].slice(1,-1);return Pe[$e]=Pe[$e].slice(1),Pe.join("")}else return Pe[0]}function B(Re){return"(?:"+Re+")"}function T(Re){return Re===void 0?"undefined":Re===null?"null":Object.prototype.toString.call(Re).split(" ").pop().split("]").shift().toLowerCase()}function R(Re){return Re.toUpperCase()}function P(Re){return Re!=null?Re instanceof Array?Re:typeof Re.length!="number"||Re.split||Re.setInterval||Re.call?[Re]:Array.prototype.slice.call(Re):[]}function D(Re,Pe){var Me=Re;if(Pe)for(var $e in Pe)Me[$e]=Pe[$e];return Me}function F(Re){var Pe="[A-Za-z]",Me="[0-9]",$e=I(Me,"[A-Fa-f]"),it=B(B("%[EFef]"+$e+"%"+$e+$e+"%"+$e+$e)+"|"+B("%[89A-Fa-f]"+$e+"%"+$e+$e)+"|"+B("%"+$e+$e)),kt="[\\:\\/\\?\\#\\[\\]\\@]",xt="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Ot=I(kt,xt),Jt=Re?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",tr=Re?"[\\uE000-\\uF8FF]":"[]",br=I(Pe,Me,"[\\-\\.\\_\\~]",Jt);B(Pe+I(Pe,Me,"[\\+\\-\\.]")+"*"),B(B(it+"|"+I(br,xt,"[\\:]"))+"*");var ar=B(B("25[0-5]")+"|"+B("2[0-4]"+Me)+"|"+B("1"+Me+Me)+"|"+B("0?[1-9]"+Me)+"|0?0?"+Me),_r=B(ar+"\\."+ar+"\\."+ar+"\\."+ar),or=B($e+"{1,4}"),gr=B(B(or+"\\:"+or)+"|"+_r),xr=B(B(or+"\\:")+"{6}"+gr),vr=B("\\:\\:"+B(or+"\\:")+"{5}"+gr),Cr=B(B(or)+"?\\:\\:"+B(or+"\\:")+"{4}"+gr),Sr=B(B(B(or+"\\:")+"{0,1}"+or)+"?\\:\\:"+B(or+"\\:")+"{3}"+gr),dr=B(B(B(or+"\\:")+"{0,2}"+or)+"?\\:\\:"+B(or+"\\:")+"{2}"+gr),wr=B(B(B(or+"\\:")+"{0,3}"+or)+"?\\:\\:"+or+"\\:"+gr),fr=B(B(B(or+"\\:")+"{0,4}"+or)+"?\\:\\:"+gr),hr=B(B(B(or+"\\:")+"{0,5}"+or)+"?\\:\\:"+or),Ar=B(B(B(or+"\\:")+"{0,6}"+or)+"?\\:\\:"),ur=B([xr,vr,Cr,Sr,dr,wr,fr,hr,Ar].join("|")),zt=B(B(br+"|"+it)+"+");B("[vV]"+$e+"+\\."+I(br,xt,"[\\:]")+"+"),B(B(it+"|"+I(br,xt))+"*");var Kt=B(it+"|"+I(br,xt,"[\\:\\@]"));return B(B(it+"|"+I(br,xt,"[\\@]"))+"+"),B(B(Kt+"|"+I("[\\/\\?]",tr))+"*"),{NOT_SCHEME:new RegExp(I("[^]",Pe,Me,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(I("[^\\%\\:]",br,xt),"g"),NOT_HOST:new RegExp(I("[^\\%\\[\\]\\:]",br,xt),"g"),NOT_PATH:new RegExp(I("[^\\%\\/\\:\\@]",br,xt),"g"),NOT_PATH_NOSCHEME:new RegExp(I("[^\\%\\/\\@]",br,xt),"g"),NOT_QUERY:new RegExp(I("[^\\%]",br,xt,"[\\:\\@\\/\\?]",tr),"g"),NOT_FRAGMENT:new RegExp(I("[^\\%]",br,xt,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(I("[^]",br,xt),"g"),UNRESERVED:new RegExp(br,"g"),OTHER_CHARS:new RegExp(I("[^\\%]",br,Ot),"g"),PCT_ENCODED:new RegExp(it,"g"),IPV4ADDRESS:new RegExp("^("+_r+")$"),IPV6ADDRESS:new RegExp("^\\[?("+ur+")"+B(B("\\%25|\\%(?!"+$e+"{2})")+"("+zt+")")+"?\\]?$")}}var L=F(!1),U=F(!0),V=(function(){function Re(Pe,Me){var $e=[],it=!0,kt=!1,xt=void 0;try{for(var Ot=Pe[Symbol.iterator](),Jt;!(it=(Jt=Ot.next()).done)&&($e.push(Jt.value),!(Me&&$e.length===Me));it=!0);}catch(tr){kt=!0,xt=tr}finally{try{!it&&Ot.return&&Ot.return()}finally{if(kt)throw xt}}return $e}return function(Pe,Me){if(Array.isArray(Pe))return Pe;if(Symbol.iterator in Object(Pe))return Re(Pe,Me);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),K=function(Re){if(Array.isArray(Re)){for(var Pe=0,Me=Array(Re.length);Pe<Re.length;Pe++)Me[Pe]=Re[Pe];return Me}else return Array.from(Re)},J=2147483647,ee=36,ie=1,ne=26,ce=38,fe=700,de=72,pe=128,ve="-",ye=/^xn--/,_e=/[^\0-\x7E]/,be=/[\x2E\u3002\uFF0E\uFF61]/g,Te={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ue=ee-ie,O=Math.floor,z=String.fromCharCode;function Y(Re){throw new RangeError(Te[Re])}function te(Re,Pe){for(var Me=[],$e=Re.length;$e--;)Me[$e]=Pe(Re[$e]);return Me}function oe(Re,Pe){var Me=Re.split("@"),$e="";Me.length>1&&($e=Me[0]+"@",Re=Me[1]),Re=Re.replace(be,".");var it=Re.split("."),kt=te(it,Pe).join(".");return $e+kt}function le(Re){for(var Pe=[],Me=0,$e=Re.length;Me<$e;){var it=Re.charCodeAt(Me++);if(it>=55296&&it<=56319&&Me<$e){var kt=Re.charCodeAt(Me++);(kt&64512)==56320?Pe.push(((it&1023)<<10)+(kt&1023)+65536):(Pe.push(it),Me--)}else Pe.push(it)}return Pe}var he=function(Pe){return String.fromCodePoint.apply(String,K(Pe))},ae=function(Pe){return Pe-48<10?Pe-22:Pe-65<26?Pe-65:Pe-97<26?Pe-97:ee},Q=function(Pe,Me){return Pe+22+75*(Pe<26)-((Me!=0)<<5)},se=function(Pe,Me,$e){var it=0;for(Pe=$e?O(Pe/fe):Pe>>1,Pe+=O(Pe/Me);Pe>ue*ne>>1;it+=ee)Pe=O(Pe/ue);return O(it+(ue+1)*Pe/(Pe+ce))},Ae=function(Pe){var Me=[],$e=Pe.length,it=0,kt=pe,xt=de,Ot=Pe.lastIndexOf(ve);Ot<0&&(Ot=0);for(var Jt=0;Jt<Ot;++Jt)Pe.charCodeAt(Jt)>=128&&Y("not-basic"),Me.push(Pe.charCodeAt(Jt));for(var tr=Ot>0?Ot+1:0;tr<$e;){for(var br=it,ar=1,_r=ee;;_r+=ee){tr>=$e&&Y("invalid-input");var or=ae(Pe.charCodeAt(tr++));(or>=ee||or>O((J-it)/ar))&&Y("overflow"),it+=or*ar;var gr=_r<=xt?ie:_r>=xt+ne?ne:_r-xt;if(or<gr)break;var xr=ee-gr;ar>O(J/xr)&&Y("overflow"),ar*=xr}var vr=Me.length+1;xt=se(it-br,vr,br==0),O(it/vr)>J-kt&&Y("overflow"),kt+=O(it/vr),it%=vr,Me.splice(it++,0,kt)}return String.fromCodePoint.apply(String,Me)},ge=function(Pe){var Me=[];Pe=le(Pe);var $e=Pe.length,it=pe,kt=0,xt=de,Ot=!0,Jt=!1,tr=void 0;try{for(var br=Pe[Symbol.iterator](),ar;!(Ot=(ar=br.next()).done);Ot=!0){var _r=ar.value;_r<128&&Me.push(z(_r))}}catch(Vt){Jt=!0,tr=Vt}finally{try{!Ot&&br.return&&br.return()}finally{if(Jt)throw tr}}var or=Me.length,gr=or;for(or&&Me.push(ve);gr<$e;){var xr=J,vr=!0,Cr=!1,Sr=void 0;try{for(var dr=Pe[Symbol.iterator](),wr;!(vr=(wr=dr.next()).done);vr=!0){var fr=wr.value;fr>=it&&fr<xr&&(xr=fr)}}catch(Vt){Cr=!0,Sr=Vt}finally{try{!vr&&dr.return&&dr.return()}finally{if(Cr)throw Sr}}var hr=gr+1;xr-it>O((J-kt)/hr)&&Y("overflow"),kt+=(xr-it)*hr,it=xr;var Ar=!0,ur=!1,zt=void 0;try{for(var Kt=Pe[Symbol.iterator](),lr;!(Ar=(lr=Kt.next()).done);Ar=!0){var ot=lr.value;if(ot<it&&++kt>J&&Y("overflow"),ot==it){for(var ut=kt,Bt=ee;;Bt+=ee){var Lt=Bt<=xt?ie:Bt>=xt+ne?ne:Bt-xt;if(ut<Lt)break;var $t=ut-Lt,Zt=ee-Lt;Me.push(z(Q(Lt+$t%Zt,0))),ut=O($t/Zt)}Me.push(z(Q(ut,0))),xt=se(kt,hr,gr==or),kt=0,++gr}}}catch(Vt){ur=!0,zt=Vt}finally{try{!Ar&&Kt.return&&Kt.return()}finally{if(ur)throw zt}}++kt,++it}return Me.join("")},Ee=function(Pe){return oe(Pe,function(Me){return ye.test(Me)?Ae(Me.slice(4).toLowerCase()):Me})},ke=function(Pe){return oe(Pe,function(Me){return _e.test(Me)?"xn--"+ge(Me):Me})},Se={version:"2.1.0",ucs2:{decode:le,encode:he},decode:Ae,encode:ge,toASCII:ke,toUnicode:Ee},Ie={};function we(Re){var Pe=Re.charCodeAt(0),Me=void 0;return Pe<16?Me="%0"+Pe.toString(16).toUpperCase():Pe<128?Me="%"+Pe.toString(16).toUpperCase():Pe<2048?Me="%"+(Pe>>6|192).toString(16).toUpperCase()+"%"+(Pe&63|128).toString(16).toUpperCase():Me="%"+(Pe>>12|224).toString(16).toUpperCase()+"%"+(Pe>>6&63|128).toString(16).toUpperCase()+"%"+(Pe&63|128).toString(16).toUpperCase(),Me}function xe(Re){for(var Pe="",Me=0,$e=Re.length;Me<$e;){var it=parseInt(Re.substr(Me+1,2),16);if(it<128)Pe+=String.fromCharCode(it),Me+=3;else if(it>=194&&it<224){if($e-Me>=6){var kt=parseInt(Re.substr(Me+4,2),16);Pe+=String.fromCharCode((it&31)<<6|kt&63)}else Pe+=Re.substr(Me,6);Me+=6}else if(it>=224){if($e-Me>=9){var xt=parseInt(Re.substr(Me+4,2),16),Ot=parseInt(Re.substr(Me+7,2),16);Pe+=String.fromCharCode((it&15)<<12|(xt&63)<<6|Ot&63)}else Pe+=Re.substr(Me,9);Me+=9}else Pe+=Re.substr(Me,3),Me+=3}return Pe}function Fe(Re,Pe){function Me($e){var it=xe($e);return it.match(Pe.UNRESERVED)?it:$e}return Re.scheme&&(Re.scheme=String(Re.scheme).replace(Pe.PCT_ENCODED,Me).toLowerCase().replace(Pe.NOT_SCHEME,"")),Re.userinfo!==void 0&&(Re.userinfo=String(Re.userinfo).replace(Pe.PCT_ENCODED,Me).replace(Pe.NOT_USERINFO,we).replace(Pe.PCT_ENCODED,R)),Re.host!==void 0&&(Re.host=String(Re.host).replace(Pe.PCT_ENCODED,Me).toLowerCase().replace(Pe.NOT_HOST,we).replace(Pe.PCT_ENCODED,R)),Re.path!==void 0&&(Re.path=String(Re.path).replace(Pe.PCT_ENCODED,Me).replace(Re.scheme?Pe.NOT_PATH:Pe.NOT_PATH_NOSCHEME,we).replace(Pe.PCT_ENCODED,R)),Re.query!==void 0&&(Re.query=String(Re.query).replace(Pe.PCT_ENCODED,Me).replace(Pe.NOT_QUERY,we).replace(Pe.PCT_ENCODED,R)),Re.fragment!==void 0&&(Re.fragment=String(Re.fragment).replace(Pe.PCT_ENCODED,Me).replace(Pe.NOT_FRAGMENT,we).replace(Pe.PCT_ENCODED,R)),Re}function Ge(Re){return Re.replace(/^0*(.*)/,"$1")||"0"}function Oe(Re,Pe){var Me=Re.match(Pe.IPV4ADDRESS)||[],$e=V(Me,2),it=$e[1];return it?it.split(".").map(Ge).join("."):Re}function et(Re,Pe){var Me=Re.match(Pe.IPV6ADDRESS)||[],$e=V(Me,3),it=$e[1],kt=$e[2];if(it){for(var xt=it.toLowerCase().split("::").reverse(),Ot=V(xt,2),Jt=Ot[0],tr=Ot[1],br=tr?tr.split(":").map(Ge):[],ar=Jt.split(":").map(Ge),_r=Pe.IPV4ADDRESS.test(ar[ar.length-1]),or=_r?7:8,gr=ar.length-or,xr=Array(or),vr=0;vr<or;++vr)xr[vr]=br[vr]||ar[gr+vr]||"";_r&&(xr[or-1]=Oe(xr[or-1],Pe));var Cr=xr.reduce(function(hr,Ar,ur){if(!Ar||Ar==="0"){var zt=hr[hr.length-1];zt&&zt.index+zt.length===ur?zt.length++:hr.push({index:ur,length:1})}return hr},[]),Sr=Cr.sort(function(hr,Ar){return Ar.length-hr.length})[0],dr=void 0;if(Sr&&Sr.length>1){var wr=xr.slice(0,Sr.index),fr=xr.slice(Sr.index+Sr.length);dr=wr.join(":")+"::"+fr.join(":")}else dr=xr.join(":");return kt&&(dr+="%"+kt),dr}else return Re}var Mt=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,dt="".match(/(){0}/)[1]===void 0;function mt(Re){var Pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Me={},$e=Pe.iri!==!1?U:L;Pe.reference==="suffix"&&(Re=(Pe.scheme?Pe.scheme+":":"")+"//"+Re);var it=Re.match(Mt);if(it){dt?(Me.scheme=it[1],Me.userinfo=it[3],Me.host=it[4],Me.port=parseInt(it[5],10),Me.path=it[6]||"",Me.query=it[7],Me.fragment=it[8],isNaN(Me.port)&&(Me.port=it[5])):(Me.scheme=it[1]||void 0,Me.userinfo=Re.indexOf("@")!==-1?it[3]:void 0,Me.host=Re.indexOf("//")!==-1?it[4]:void 0,Me.port=parseInt(it[5],10),Me.path=it[6]||"",Me.query=Re.indexOf("?")!==-1?it[7]:void 0,Me.fragment=Re.indexOf("#")!==-1?it[8]:void 0,isNaN(Me.port)&&(Me.port=Re.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?it[4]:void 0)),Me.host&&(Me.host=et(Oe(Me.host,$e),$e)),Me.scheme===void 0&&Me.userinfo===void 0&&Me.host===void 0&&Me.port===void 0&&!Me.path&&Me.query===void 0?Me.reference="same-document":Me.scheme===void 0?Me.reference="relative":Me.fragment===void 0?Me.reference="absolute":Me.reference="uri",Pe.reference&&Pe.reference!=="suffix"&&Pe.reference!==Me.reference&&(Me.error=Me.error||"URI is not a "+Pe.reference+" reference.");var kt=Ie[(Pe.scheme||Me.scheme||"").toLowerCase()];if(!Pe.unicodeSupport&&(!kt||!kt.unicodeSupport)){if(Me.host&&(Pe.domainHost||kt&&kt.domainHost))try{Me.host=Se.toASCII(Me.host.replace($e.PCT_ENCODED,xe).toLowerCase())}catch(xt){Me.error=Me.error||"Host's domain name can not be converted to ASCII via punycode: "+xt}Fe(Me,L)}else Fe(Me,$e);kt&&kt.parse&&kt.parse(Me,Pe)}else Me.error=Me.error||"URI can not be parsed.";return Me}function Ut(Re,Pe){var Me=Pe.iri!==!1?U:L,$e=[];return Re.userinfo!==void 0&&($e.push(Re.userinfo),$e.push("@")),Re.host!==void 0&&$e.push(et(Oe(String(Re.host),Me),Me).replace(Me.IPV6ADDRESS,function(it,kt,xt){return"["+kt+(xt?"%25"+xt:"")+"]"})),(typeof Re.port=="number"||typeof Re.port=="string")&&($e.push(":"),$e.push(String(Re.port))),$e.length?$e.join(""):void 0}var St=/^\.\.?\//,vt=/^\/\.(\/|$)/,It=/^\/\.\.(\/|$)/,yt=/^\/?(?:.|\n)*?(?=\/|$)/;function Tt(Re){for(var Pe=[];Re.length;)if(Re.match(St))Re=Re.replace(St,"");else if(Re.match(vt))Re=Re.replace(vt,"/");else if(Re.match(It))Re=Re.replace(It,"/"),Pe.pop();else if(Re==="."||Re==="..")Re="";else{var Me=Re.match(yt);if(Me){var $e=Me[0];Re=Re.slice($e.length),Pe.push($e)}else throw new Error("Unexpected dot segment condition")}return Pe.join("")}function Wt(Re){var Pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Me=Pe.iri?U:L,$e=[],it=Ie[(Pe.scheme||Re.scheme||"").toLowerCase()];if(it&&it.serialize&&it.serialize(Re,Pe),Re.host&&!Me.IPV6ADDRESS.test(Re.host)){if(Pe.domainHost||it&&it.domainHost)try{Re.host=Pe.iri?Se.toUnicode(Re.host):Se.toASCII(Re.host.replace(Me.PCT_ENCODED,xe).toLowerCase())}catch(Ot){Re.error=Re.error||"Host's domain name can not be converted to "+(Pe.iri?"Unicode":"ASCII")+" via punycode: "+Ot}}Fe(Re,Me),Pe.reference!=="suffix"&&Re.scheme&&($e.push(Re.scheme),$e.push(":"));var kt=Ut(Re,Pe);if(kt!==void 0&&(Pe.reference!=="suffix"&&$e.push("//"),$e.push(kt),Re.path&&Re.path.charAt(0)!=="/"&&$e.push("/")),Re.path!==void 0){var xt=Re.path;!Pe.absolutePath&&(!it||!it.absolutePath)&&(xt=Tt(xt)),kt===void 0&&(xt=xt.replace(/^\/\//,"/%2F")),$e.push(xt)}return Re.query!==void 0&&($e.push("?"),$e.push(Re.query)),Re.fragment!==void 0&&($e.push("#"),$e.push(Re.fragment)),$e.join("")}function ft(Re,Pe){var Me=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},$e=arguments[3],it={};return $e||(Re=mt(Wt(Re,Me),Me),Pe=mt(Wt(Pe,Me),Me)),Me=Me||{},!Me.tolerant&&Pe.scheme?(it.scheme=Pe.scheme,it.userinfo=Pe.userinfo,it.host=Pe.host,it.port=Pe.port,it.path=Tt(Pe.path||""),it.query=Pe.query):(Pe.userinfo!==void 0||Pe.host!==void 0||Pe.port!==void 0?(it.userinfo=Pe.userinfo,it.host=Pe.host,it.port=Pe.port,it.path=Tt(Pe.path||""),it.query=Pe.query):(Pe.path?(Pe.path.charAt(0)==="/"?it.path=Tt(Pe.path):((Re.userinfo!==void 0||Re.host!==void 0||Re.port!==void 0)&&!Re.path?it.path="/"+Pe.path:Re.path?it.path=Re.path.slice(0,Re.path.lastIndexOf("/")+1)+Pe.path:it.path=Pe.path,it.path=Tt(it.path)),it.query=Pe.query):(it.path=Re.path,Pe.query!==void 0?it.query=Pe.query:it.query=Re.query),it.userinfo=Re.userinfo,it.host=Re.host,it.port=Re.port),it.scheme=Re.scheme),it.fragment=Pe.fragment,it}function _t(Re,Pe,Me){var $e=D({scheme:"null"},Me);return Wt(ft(mt(Re,$e),mt(Pe,$e),$e,!0),$e)}function Xt(Re,Pe){return typeof Re=="string"?Re=Wt(mt(Re,Pe),Pe):T(Re)==="object"&&(Re=mt(Wt(Re,Pe),Pe)),Re}function Nt(Re,Pe,Me){return typeof Re=="string"?Re=Wt(mt(Re,Me),Me):T(Re)==="object"&&(Re=Wt(Re,Me)),typeof Pe=="string"?Pe=Wt(mt(Pe,Me),Me):T(Pe)==="object"&&(Pe=Wt(Pe,Me)),Re===Pe}function qt(Re,Pe){return Re&&Re.toString().replace(!Pe||!Pe.iri?L.ESCAPE:U.ESCAPE,we)}function nr(Re,Pe){return Re&&Re.toString().replace(!Pe||!Pe.iri?L.PCT_ENCODED:U.PCT_ENCODED,xe)}var ze={scheme:"http",domainHost:!0,parse:function(Pe,Me){return Pe.host||(Pe.error=Pe.error||"HTTP URIs must have a host."),Pe},serialize:function(Pe,Me){var $e=String(Pe.scheme).toLowerCase()==="https";return(Pe.port===($e?443:80)||Pe.port==="")&&(Pe.port=void 0),Pe.path||(Pe.path="/"),Pe}},Ce={scheme:"https",domainHost:ze.domainHost,parse:ze.parse,serialize:ze.serialize};function Le(Re){return typeof Re.secure=="boolean"?Re.secure:String(Re.scheme).toLowerCase()==="wss"}var Ze={scheme:"ws",domainHost:!0,parse:function(Pe,Me){var $e=Pe;return $e.secure=Le($e),$e.resourceName=($e.path||"/")+($e.query?"?"+$e.query:""),$e.path=void 0,$e.query=void 0,$e},serialize:function(Pe,Me){if((Pe.port===(Le(Pe)?443:80)||Pe.port==="")&&(Pe.port=void 0),typeof Pe.secure=="boolean"&&(Pe.scheme=Pe.secure?"wss":"ws",Pe.secure=void 0),Pe.resourceName){var $e=Pe.resourceName.split("?"),it=V($e,2),kt=it[0],xt=it[1];Pe.path=kt&&kt!=="/"?kt:void 0,Pe.query=xt,Pe.resourceName=void 0}return Pe.fragment=void 0,Pe}},Je={scheme:"wss",domainHost:Ze.domainHost,parse:Ze.parse,serialize:Ze.serialize},nt={},rt="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",He="[0-9A-Fa-f]",Dt=B(B("%[EFef]"+He+"%"+He+He+"%"+He+He)+"|"+B("%[89A-Fa-f]"+He+"%"+He+He)+"|"+B("%"+He+He)),Rt="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",De="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",We=I(De,'[\\"\\\\]'),Ve="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",qe=new RegExp(rt,"g"),pt=new RegExp(Dt,"g"),At=new RegExp(I("[^]",Rt,"[\\.]",'[\\"]',We),"g"),jt=new RegExp(I("[^]",rt,Ve),"g"),rr=jt;function Ke(Re){var Pe=xe(Re);return Pe.match(qe)?Pe:Re}var Ne={scheme:"mailto",parse:function(Pe,Me){var $e=Pe,it=$e.to=$e.path?$e.path.split(","):[];if($e.path=void 0,$e.query){for(var kt=!1,xt={},Ot=$e.query.split("&"),Jt=0,tr=Ot.length;Jt<tr;++Jt){var br=Ot[Jt].split("=");switch(br[0]){case"to":for(var ar=br[1].split(","),_r=0,or=ar.length;_r<or;++_r)it.push(ar[_r]);break;case"subject":$e.subject=nr(br[1],Me);break;case"body":$e.body=nr(br[1],Me);break;default:kt=!0,xt[nr(br[0],Me)]=nr(br[1],Me);break}}kt&&($e.headers=xt)}$e.query=void 0;for(var gr=0,xr=it.length;gr<xr;++gr){var vr=it[gr].split("@");if(vr[0]=nr(vr[0]),Me.unicodeSupport)vr[1]=nr(vr[1],Me).toLowerCase();else try{vr[1]=Se.toASCII(nr(vr[1],Me).toLowerCase())}catch(Cr){$e.error=$e.error||"Email address's domain name can not be converted to ASCII via punycode: "+Cr}it[gr]=vr.join("@")}return $e},serialize:function(Pe,Me){var $e=Pe,it=P(Pe.to);if(it){for(var kt=0,xt=it.length;kt<xt;++kt){var Ot=String(it[kt]),Jt=Ot.lastIndexOf("@"),tr=Ot.slice(0,Jt).replace(pt,Ke).replace(pt,R).replace(At,we),br=Ot.slice(Jt+1);try{br=Me.iri?Se.toUnicode(br):Se.toASCII(nr(br,Me).toLowerCase())}catch(gr){$e.error=$e.error||"Email address's domain name can not be converted to "+(Me.iri?"Unicode":"ASCII")+" via punycode: "+gr}it[kt]=tr+"@"+br}$e.path=it.join(",")}var ar=Pe.headers=Pe.headers||{};Pe.subject&&(ar.subject=Pe.subject),Pe.body&&(ar.body=Pe.body);var _r=[];for(var or in ar)ar[or]!==nt[or]&&_r.push(or.replace(pt,Ke).replace(pt,R).replace(jt,we)+"="+ar[or].replace(pt,Ke).replace(pt,R).replace(rr,we));return _r.length&&($e.query=_r.join("&")),$e}},Ye=/^([^\:]+)\:(.*)/,st={scheme:"urn",parse:function(Pe,Me){var $e=Pe.path&&Pe.path.match(Ye),it=Pe;if($e){var kt=Me.scheme||it.scheme||"urn",xt=$e[1].toLowerCase(),Ot=$e[2],Jt=kt+":"+(Me.nid||xt),tr=Ie[Jt];it.nid=xt,it.nss=Ot,it.path=void 0,tr&&(it=tr.parse(it,Me))}else it.error=it.error||"URN can not be parsed.";return it},serialize:function(Pe,Me){var $e=Me.scheme||Pe.scheme||"urn",it=Pe.nid,kt=$e+":"+(Me.nid||it),xt=Ie[kt];xt&&(Pe=xt.serialize(Pe,Me));var Ot=Pe,Jt=Pe.nss;return Ot.path=(it||Me.nid)+":"+Jt,Ot}},bt=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Qe={scheme:"urn:uuid",parse:function(Pe,Me){var $e=Pe;return $e.uuid=$e.nss,$e.nss=void 0,!Me.tolerant&&(!$e.uuid||!$e.uuid.match(bt))&&($e.error=$e.error||"UUID is not valid."),$e},serialize:function(Pe,Me){var $e=Pe;return $e.nss=(Pe.uuid||"").toLowerCase(),$e}};Ie[ze.scheme]=ze,Ie[Ce.scheme]=Ce,Ie[Ze.scheme]=Ze,Ie[Je.scheme]=Je,Ie[Ne.scheme]=Ne,Ie[st.scheme]=st,Ie[Qe.scheme]=Qe,_.SCHEMES=Ie,_.pctEncChar=we,_.pctDecChars=xe,_.parse=mt,_.removeDotSegments=Tt,_.serialize=Wt,_.resolveComponents=ft,_.resolve=_t,_.normalize=Xt,_.equal=Nt,_.escapeComponent=qt,_.unescapeComponent=nr,Object.defineProperty(_,"__esModule",{value:!0})}))})(uri_all$1,uri_all$1.exports)),uri_all$1.exports}var fastDeepEqual,hasRequiredFastDeepEqual;function requireFastDeepEqual(){return hasRequiredFastDeepEqual||(hasRequiredFastDeepEqual=1,fastDeepEqual=function E(A,_){if(A===_)return!0;if(A&&_&&typeof A=="object"&&typeof _=="object"){if(A.constructor!==_.constructor)return!1;var I,B,T;if(Array.isArray(A)){if(I=A.length,I!=_.length)return!1;for(B=I;B--!==0;)if(!E(A[B],_[B]))return!1;return!0}if(A.constructor===RegExp)return A.source===_.source&&A.flags===_.flags;if(A.valueOf!==Object.prototype.valueOf)return A.valueOf()===_.valueOf();if(A.toString!==Object.prototype.toString)return A.toString()===_.toString();if(T=Object.keys(A),I=T.length,I!==Object.keys(_).length)return!1;for(B=I;B--!==0;)if(!Object.prototype.hasOwnProperty.call(_,T[B]))return!1;for(B=I;B--!==0;){var R=T[B];if(!E(A[R],_[R]))return!1}return!0}return A!==A&&_!==_}),fastDeepEqual}var ucs2length,hasRequiredUcs2length;function requireUcs2length(){return hasRequiredUcs2length||(hasRequiredUcs2length=1,ucs2length=function(A){for(var _=0,I=A.length,B=0,T;B<I;)_++,T=A.charCodeAt(B++),T>=55296&&T<=56319&&B<I&&(T=A.charCodeAt(B),(T&64512)==56320&&B++);return _}),ucs2length}var util,hasRequiredUtil;function requireUtil(){if(hasRequiredUtil)return util;hasRequiredUtil=1,util={copy:E,checkDataType:A,checkDataTypes:_,coerceToTypes:B,toHash:T,getProperty:D,escapeQuotes:F,equal:requireFastDeepEqual(),ucs2length:requireUcs2length(),varOccurences:L,varReplace:U,schemaHasRules:V,schemaHasRulesExcept:K,schemaUnknownRules:J,toQuotedString:ee,getPathExpr:ie,getPath:ne,getData:de,unescapeFragment:ve,unescapeJsonPointer:be,escapeFragment:ye,escapeJsonPointer:_e};function E(Te,ue){ue=ue||{};for(var O in Te)ue[O]=Te[O];return ue}function A(Te,ue,O,z){var Y=z?" !== ":" === ",te=z?" || ":" && ",oe=z?"!":"",le=z?"":"!";switch(Te){case"null":return ue+Y+"null";case"array":return oe+"Array.isArray("+ue+")";case"object":return"("+oe+ue+te+"typeof "+ue+Y+'"object"'+te+le+"Array.isArray("+ue+"))";case"integer":return"(typeof "+ue+Y+'"number"'+te+le+"("+ue+" % 1)"+te+ue+Y+ue+(O?te+oe+"isFinite("+ue+")":"")+")";case"number":return"(typeof "+ue+Y+'"'+Te+'"'+(O?te+oe+"isFinite("+ue+")":"")+")";default:return"typeof "+ue+Y+'"'+Te+'"'}}function _(Te,ue,O){switch(Te.length){case 1:return A(Te[0],ue,O,!0);default:var z="",Y=T(Te);Y.array&&Y.object&&(z=Y.null?"(":"(!"+ue+" || ",z+="typeof "+ue+' !== "object")',delete Y.null,delete Y.array,delete Y.object),Y.number&&delete Y.integer;for(var te in Y)z+=(z?" && ":"")+A(te,ue,O,!0);return z}}var I=T(["string","number","integer","boolean","null"]);function B(Te,ue){if(Array.isArray(ue)){for(var O=[],z=0;z<ue.length;z++){var Y=ue[z];(I[Y]||Te==="array"&&Y==="array")&&(O[O.length]=Y)}if(O.length)return O}else{if(I[ue])return[ue];if(Te==="array"&&ue==="array")return["array"]}}function T(Te){for(var ue={},O=0;O<Te.length;O++)ue[Te[O]]=!0;return ue}var R=/^[a-z$_][a-z$_0-9]*$/i,P=/'|\\/g;function D(Te){return typeof Te=="number"?"["+Te+"]":R.test(Te)?"."+Te:"['"+F(Te)+"']"}function F(Te){return Te.replace(P,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function L(Te,ue){ue+="[^0-9]";var O=Te.match(new RegExp(ue,"g"));return O?O.length:0}function U(Te,ue,O){return ue+="([^0-9])",O=O.replace(/\$/g,"$$$$"),Te.replace(new RegExp(ue,"g"),O+"$1")}function V(Te,ue){if(typeof Te=="boolean")return!Te;for(var O in Te)if(ue[O])return!0}function K(Te,ue,O){if(typeof Te=="boolean")return!Te&&O!="not";for(var z in Te)if(z!=O&&ue[z])return!0}function J(Te,ue){if(typeof Te!="boolean"){for(var O in Te)if(!ue[O])return O}}function ee(Te){return"'"+F(Te)+"'"}function ie(Te,ue,O,z){var Y=O?"'/' + "+ue+(z?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):z?"'[' + "+ue+" + ']'":"'[\\'' + "+ue+" + '\\']'";return pe(Te,Y)}function ne(Te,ue,O){var z=ee(O?"/"+_e(ue):D(ue));return pe(Te,z)}var ce=/^\/(?:[^~]|~0|~1)*$/,fe=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function de(Te,ue,O){var z,Y,te,oe;if(Te==="")return"rootData";if(Te[0]=="/"){if(!ce.test(Te))throw new Error("Invalid JSON-pointer: "+Te);Y=Te,te="rootData"}else{if(oe=Te.match(fe),!oe)throw new Error("Invalid JSON-pointer: "+Te);if(z=+oe[1],Y=oe[2],Y=="#"){if(z>=ue)throw new Error("Cannot access property/index "+z+" levels up, current level is "+ue);return O[ue-z]}if(z>ue)throw new Error("Cannot access data "+z+" levels up, current level is "+ue);if(te="data"+(ue-z||""),!Y)return te}for(var le=te,he=Y.split("/"),ae=0;ae<he.length;ae++){var Q=he[ae];Q&&(te+=D(be(Q)),le+=" && "+te)}return le}function pe(Te,ue){return Te=='""'?ue:(Te+" + "+ue).replace(/([^\\])' \+ '/g,"$1")}function ve(Te){return be(decodeURIComponent(Te))}function ye(Te){return encodeURIComponent(_e(Te))}function _e(Te){return Te.replace(/~/g,"~0").replace(/\//g,"~1")}function be(Te){return Te.replace(/~1/g,"/").replace(/~0/g,"~")}return util}var schema_obj,hasRequiredSchema_obj;function requireSchema_obj(){if(hasRequiredSchema_obj)return schema_obj;hasRequiredSchema_obj=1;var E=requireUtil();schema_obj=A;function A(_){E.copy(_,this)}return schema_obj}var jsonSchemaTraverse={exports:{}},hasRequiredJsonSchemaTraverse;function requireJsonSchemaTraverse(){if(hasRequiredJsonSchemaTraverse)return jsonSchemaTraverse.exports;hasRequiredJsonSchemaTraverse=1;var E=jsonSchemaTraverse.exports=function(I,B,T){typeof B=="function"&&(T=B,B={}),T=B.cb||T;var R=typeof T=="function"?T:T.pre||function(){},P=T.post||function(){};A(B,R,P,I,"",I)};E.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},E.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},E.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},E.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function A(I,B,T,R,P,D,F,L,U,V){if(R&&typeof R=="object"&&!Array.isArray(R)){B(R,P,D,F,L,U,V);for(var K in R){var J=R[K];if(Array.isArray(J)){if(K in E.arrayKeywords)for(var ee=0;ee<J.length;ee++)A(I,B,T,J[ee],P+"/"+K+"/"+ee,D,P,K,R,ee)}else if(K in E.propsKeywords){if(J&&typeof J=="object")for(var ie in J)A(I,B,T,J[ie],P+"/"+K+"/"+_(ie),D,P,K,R,ie)}else(K in E.keywords||I.allKeys&&!(K in E.skipKeywords))&&A(I,B,T,J,P+"/"+K,D,P,K,R)}T(R,P,D,F,L,U,V)}}function _(I){return I.replace(/~/g,"~0").replace(/\//g,"~1")}return jsonSchemaTraverse.exports}var resolve_1,hasRequiredResolve;function requireResolve(){if(hasRequiredResolve)return resolve_1;hasRequiredResolve=1;var E=requireUri_all(),A=requireFastDeepEqual(),_=requireUtil(),I=requireSchema_obj(),B=requireJsonSchemaTraverse();resolve_1=T,T.normalizeId=ne,T.fullPath=J,T.url=ce,T.ids=fe,T.inlineRef=U,T.schema=R;function T(de,pe,ve){var ye=this._refs[ve];if(typeof ye=="string")if(this._refs[ye])ye=this._refs[ye];else return T.call(this,de,pe,ye);if(ye=ye||this._schemas[ve],ye instanceof I)return U(ye.schema,this._opts.inlineRefs)?ye.schema:ye.validate||this._compile(ye);var _e=R.call(this,pe,ve),be,Te,ue;return _e&&(be=_e.schema,pe=_e.root,ue=_e.baseId),be instanceof I?Te=be.validate||de.call(this,be.schema,pe,void 0,ue):be!==void 0&&(Te=U(be,this._opts.inlineRefs)?be:de.call(this,be,pe,void 0,ue)),Te}function R(de,pe){var ve=E.parse(pe),ye=ee(ve),_e=J(this._getId(de.schema));if(Object.keys(de.schema).length===0||ye!==_e){var be=ne(ye),Te=this._refs[be];if(typeof Te=="string")return P.call(this,de,Te,ve);if(Te instanceof I)Te.validate||this._compile(Te),de=Te;else if(Te=this._schemas[be],Te instanceof I){if(Te.validate||this._compile(Te),be==ne(pe))return{schema:Te,root:de,baseId:_e};de=Te}else return;if(!de.schema)return;_e=J(this._getId(de.schema))}return F.call(this,ve,_e,de.schema,de)}function P(de,pe,ve){var ye=R.call(this,de,pe);if(ye){var _e=ye.schema,be=ye.baseId;de=ye.root;var Te=this._getId(_e);return Te&&(be=ce(be,Te)),F.call(this,ve,be,_e,de)}}var D=_.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function F(de,pe,ve,ye){if(de.fragment=de.fragment||"",de.fragment.slice(0,1)=="/"){for(var _e=de.fragment.split("/"),be=1;be<_e.length;be++){var Te=_e[be];if(Te){if(Te=_.unescapeFragment(Te),ve=ve[Te],ve===void 0)break;var ue;if(!D[Te]&&(ue=this._getId(ve),ue&&(pe=ce(pe,ue)),ve.$ref)){var O=ce(pe,ve.$ref),z=R.call(this,ye,O);z&&(ve=z.schema,ye=z.root,pe=z.baseId)}}}if(ve!==void 0&&ve!==ye.schema)return{schema:ve,root:ye,baseId:pe}}}var L=_.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function U(de,pe){if(pe===!1)return!1;if(pe===void 0||pe===!0)return V(de);if(pe)return K(de)<=pe}function V(de){var pe;if(Array.isArray(de)){for(var ve=0;ve<de.length;ve++)if(pe=de[ve],typeof pe=="object"&&!V(pe))return!1}else for(var ye in de)if(ye=="$ref"||(pe=de[ye],typeof pe=="object"&&!V(pe)))return!1;return!0}function K(de){var pe=0,ve;if(Array.isArray(de)){for(var ye=0;ye<de.length;ye++)if(ve=de[ye],typeof ve=="object"&&(pe+=K(ve)),pe==1/0)return 1/0}else for(var _e in de){if(_e=="$ref")return 1/0;if(L[_e])pe++;else if(ve=de[_e],typeof ve=="object"&&(pe+=K(ve)+1),pe==1/0)return 1/0}return pe}function J(de,pe){pe!==!1&&(de=ne(de));var ve=E.parse(de);return ee(ve)}function ee(de){return E.serialize(de).split("#")[0]+"#"}var ie=/#\/?$/;function ne(de){return de?de.replace(ie,""):""}function ce(de,pe){return pe=ne(pe),E.resolve(de,pe)}function fe(de){var pe=ne(this._getId(de)),ve={"":pe},ye={"":J(pe,!1)},_e={},be=this;return B(de,{allKeys:!0},function(Te,ue,O,z,Y,te,oe){if(ue!==""){var le=be._getId(Te),he=ve[z],ae=ye[z]+"/"+Y;if(oe!==void 0&&(ae+="/"+(typeof oe=="number"?oe:_.escapeFragment(oe))),typeof le=="string"){le=he=ne(he?E.resolve(he,le):le);var Q=be._refs[le];if(typeof Q=="string"&&(Q=be._refs[Q]),Q&&Q.schema){if(!A(Te,Q.schema))throw new Error('id "'+le+'" resolves to more than one schema')}else if(le!=ne(ae))if(le[0]=="#"){if(_e[le]&&!A(Te,_e[le]))throw new Error('id "'+le+'" resolves to more than one schema');_e[le]=Te}else be._refs[le]=ae}ve[ue]=he,ye[ue]=ae}}),_e}return resolve_1}var error_classes,hasRequiredError_classes;function requireError_classes(){if(hasRequiredError_classes)return error_classes;hasRequiredError_classes=1;var E=requireResolve();error_classes={Validation:I(A),MissingRef:I(_)};function A(B){this.message="validation failed",this.errors=B,this.ajv=this.validation=!0}_.message=function(B,T){return"can't resolve reference "+T+" from id "+B};function _(B,T,R){this.message=R||_.message(B,T),this.missingRef=E.url(B,T),this.missingSchema=E.normalizeId(E.fullPath(this.missingRef))}function I(B){return B.prototype=Object.create(Error.prototype),B.prototype.constructor=B,B}return error_classes}var fastJsonStableStringify,hasRequiredFastJsonStableStringify;function requireFastJsonStableStringify(){return hasRequiredFastJsonStableStringify||(hasRequiredFastJsonStableStringify=1,fastJsonStableStringify=function(E,A){A||(A={}),typeof A=="function"&&(A={cmp:A});var _=typeof A.cycles=="boolean"?A.cycles:!1,I=A.cmp&&(function(T){return function(R){return function(P,D){var F={key:P,value:R[P]},L={key:D,value:R[D]};return T(F,L)}}})(A.cmp),B=[];return(function T(R){if(R&&R.toJSON&&typeof R.toJSON=="function"&&(R=R.toJSON()),R!==void 0){if(typeof R=="number")return isFinite(R)?""+R:"null";if(typeof R!="object")return JSON.stringify(R);var P,D;if(Array.isArray(R)){for(D="[",P=0;P<R.length;P++)P&&(D+=","),D+=T(R[P])||"null";return D+"]"}if(R===null)return"null";if(B.indexOf(R)!==-1){if(_)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var F=B.push(R)-1,L=Object.keys(R).sort(I&&I(R));for(D="",P=0;P<L.length;P++){var U=L[P],V=T(R[U]);V&&(D&&(D+=","),D+=JSON.stringify(U)+":"+V)}return B.splice(F,1),"{"+D+"}"}})(E)}),fastJsonStableStringify}var validate,hasRequiredValidate;function requireValidate(){return hasRequiredValidate||(hasRequiredValidate=1,validate=function(A,_,I){var B="",T=A.schema.$async===!0,R=A.util.schemaHasRulesExcept(A.schema,A.RULES.all,"$ref"),P=A.self._getId(A.schema);if(A.opts.strictKeywords){var D=A.util.schemaUnknownRules(A.schema,A.RULES.keywords);if(D){var F="unknown keyword: "+D;if(A.opts.strictKeywords==="log")A.logger.warn(F);else throw new Error(F)}}if(A.isTop&&(B+=" var validate = ",T&&(A.async=!0,B+="async "),B+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",P&&(A.opts.sourceCode||A.opts.processCode)&&(B+=" "+("/*# sourceURL="+P+" */")+" ")),typeof A.schema=="boolean"||!(R||A.schema.$ref)){var _="false schema",L=A.level,U=A.dataLevel,V=A.schema[_],K=A.schemaPath+A.util.getProperty(_),J=A.errSchemaPath+"/"+_,pe=!A.opts.allErrors,_e,ee="data"+(U||""),de="valid"+L;if(A.schema===!1){A.isTop?pe=!0:B+=" var "+de+" = false; ";var ie=ie||[];ie.push(B),B="",A.createErrors!==!1?(B+=" { keyword: '"+(_e||"false schema")+"' , dataPath: (dataPath || '') + "+A.errorPath+" , schemaPath: "+A.util.toQuotedString(J)+" , params: {} ",A.opts.messages!==!1&&(B+=" , message: 'boolean schema is false' "),A.opts.verbose&&(B+=" , schema: false , parentSchema: validate.schema"+A.schemaPath+" , data: "+ee+" "),B+=" } "):B+=" {} ";var ne=B;B=ie.pop(),!A.compositeRule&&pe?A.async?B+=" throw new ValidationError(["+ne+"]); ":B+=" validate.errors = ["+ne+"]; return false; ":B+=" var err = "+ne+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else A.isTop?T?B+=" return data; ":B+=" validate.errors = null; return true; ":B+=" var "+de+" = true; ";return A.isTop&&(B+=" }; return validate; "),B}if(A.isTop){var ce=A.isTop,L=A.level=0,U=A.dataLevel=0,ee="data";if(A.rootId=A.resolve.fullPath(A.self._getId(A.root.schema)),A.baseId=A.baseId||A.rootId,delete A.isTop,A.dataPathArr=[""],A.schema.default!==void 0&&A.opts.useDefaults&&A.opts.strictDefaults){var fe="default is ignored in the schema root";if(A.opts.strictDefaults==="log")A.logger.warn(fe);else throw new Error(fe)}B+=" var vErrors = null; ",B+=" var errors = 0;     ",B+=" if (rootData === undefined) rootData = data; "}else{var L=A.level,U=A.dataLevel,ee="data"+(U||"");if(P&&(A.baseId=A.resolve.url(A.baseId,P)),T&&!A.async)throw new Error("async schema in sync schema");B+=" var errs_"+L+" = errors;"}var de="valid"+L,pe=!A.opts.allErrors,ve="",ye="",_e,be=A.schema.type,Te=Array.isArray(be);if(be&&A.opts.nullable&&A.schema.nullable===!0&&(Te?be.indexOf("null")==-1&&(be=be.concat("null")):be!="null"&&(be=[be,"null"],Te=!0)),Te&&be.length==1&&(be=be[0],Te=!1),A.schema.$ref&&R){if(A.opts.extendRefs=="fail")throw new Error('$ref: validation keywords used in schema at path "'+A.errSchemaPath+'" (see option extendRefs)');A.opts.extendRefs!==!0&&(R=!1,A.logger.warn('$ref: keywords ignored in schema at path "'+A.errSchemaPath+'"'))}if(A.schema.$comment&&A.opts.$comment&&(B+=" "+A.RULES.all.$comment.code(A,"$comment")),be){if(A.opts.coerceTypes)var ue=A.util.coerceToTypes(A.opts.coerceTypes,be);var O=A.RULES.types[be];if(ue||Te||O===!0||O&&!vt(O)){var K=A.schemaPath+".type",J=A.errSchemaPath+"/type",K=A.schemaPath+".type",J=A.errSchemaPath+"/type",z=Te?"checkDataTypes":"checkDataType";if(B+=" if ("+A.util[z](be,ee,A.opts.strictNumbers,!0)+") { ",ue){var Y="dataType"+L,te="coerced"+L;B+=" var "+Y+" = typeof "+ee+"; var "+te+" = undefined; ",A.opts.coerceTypes=="array"&&(B+=" if ("+Y+" == 'object' && Array.isArray("+ee+") && "+ee+".length == 1) { "+ee+" = "+ee+"[0]; "+Y+" = typeof "+ee+"; if ("+A.util.checkDataType(A.schema.type,ee,A.opts.strictNumbers)+") "+te+" = "+ee+"; } "),B+=" if ("+te+" !== undefined) ; ";var oe=ue;if(oe)for(var le,he=-1,ae=oe.length-1;he<ae;)le=oe[he+=1],le=="string"?B+=" else if ("+Y+" == 'number' || "+Y+" == 'boolean') "+te+" = '' + "+ee+"; else if ("+ee+" === null) "+te+" = ''; ":le=="number"||le=="integer"?(B+=" else if ("+Y+" == 'boolean' || "+ee+" === null || ("+Y+" == 'string' && "+ee+" && "+ee+" == +"+ee+" ",le=="integer"&&(B+=" && !("+ee+" % 1)"),B+=")) "+te+" = +"+ee+"; "):le=="boolean"?B+=" else if ("+ee+" === 'false' || "+ee+" === 0 || "+ee+" === null) "+te+" = false; else if ("+ee+" === 'true' || "+ee+" === 1) "+te+" = true; ":le=="null"?B+=" else if ("+ee+" === '' || "+ee+" === 0 || "+ee+" === false) "+te+" = null; ":A.opts.coerceTypes=="array"&&le=="array"&&(B+=" else if ("+Y+" == 'string' || "+Y+" == 'number' || "+Y+" == 'boolean' || "+ee+" == null) "+te+" = ["+ee+"]; ");B+=" else {   ";var ie=ie||[];ie.push(B),B="",A.createErrors!==!1?(B+=" { keyword: '"+(_e||"type")+"' , dataPath: (dataPath || '') + "+A.errorPath+" , schemaPath: "+A.util.toQuotedString(J)+" , params: { type: '",Te?B+=""+be.join(","):B+=""+be,B+="' } ",A.opts.messages!==!1&&(B+=" , message: 'should be ",Te?B+=""+be.join(","):B+=""+be,B+="' "),A.opts.verbose&&(B+=" , schema: validate.schema"+K+" , parentSchema: validate.schema"+A.schemaPath+" , data: "+ee+" "),B+=" } "):B+=" {} ";var ne=B;B=ie.pop(),!A.compositeRule&&pe?A.async?B+=" throw new ValidationError(["+ne+"]); ":B+=" validate.errors = ["+ne+"]; return false; ":B+=" var err = "+ne+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",B+=" } if ("+te+" !== undefined) {  ";var Q=U?"data"+(U-1||""):"parentData",se=U?A.dataPathArr[U]:"parentDataProperty";B+=" "+ee+" = "+te+"; ",U||(B+="if ("+Q+" !== undefined)"),B+=" "+Q+"["+se+"] = "+te+"; } "}else{var ie=ie||[];ie.push(B),B="",A.createErrors!==!1?(B+=" { keyword: '"+(_e||"type")+"' , dataPath: (dataPath || '') + "+A.errorPath+" , schemaPath: "+A.util.toQuotedString(J)+" , params: { type: '",Te?B+=""+be.join(","):B+=""+be,B+="' } ",A.opts.messages!==!1&&(B+=" , message: 'should be ",Te?B+=""+be.join(","):B+=""+be,B+="' "),A.opts.verbose&&(B+=" , schema: validate.schema"+K+" , parentSchema: validate.schema"+A.schemaPath+" , data: "+ee+" "),B+=" } "):B+=" {} ";var ne=B;B=ie.pop(),!A.compositeRule&&pe?A.async?B+=" throw new ValidationError(["+ne+"]); ":B+=" validate.errors = ["+ne+"]; return false; ":B+=" var err = "+ne+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}B+=" } "}}if(A.schema.$ref&&!R)B+=" "+A.RULES.all.$ref.code(A,"$ref")+" ",pe&&(B+=" } if (errors === ",ce?B+="0":B+="errs_"+L,B+=") { ",ye+="}");else{var Ae=A.RULES;if(Ae){for(var O,ge=-1,Ee=Ae.length-1;ge<Ee;)if(O=Ae[ge+=1],vt(O)){if(O.type&&(B+=" if ("+A.util.checkDataType(O.type,ee,A.opts.strictNumbers)+") { "),A.opts.useDefaults){if(O.type=="object"&&A.schema.properties){var V=A.schema.properties,ke=Object.keys(V),Se=ke;if(Se)for(var Ie,we=-1,xe=Se.length-1;we<xe;){Ie=Se[we+=1];var Fe=V[Ie];if(Fe.default!==void 0){var Ge=ee+A.util.getProperty(Ie);if(A.compositeRule){if(A.opts.strictDefaults){var fe="default is ignored for: "+Ge;if(A.opts.strictDefaults==="log")A.logger.warn(fe);else throw new Error(fe)}}else B+=" if ("+Ge+" === undefined ",A.opts.useDefaults=="empty"&&(B+=" || "+Ge+" === null || "+Ge+" === '' "),B+=" ) "+Ge+" = ",A.opts.useDefaults=="shared"?B+=" "+A.useDefault(Fe.default)+" ":B+=" "+JSON.stringify(Fe.default)+" ",B+="; "}}}else if(O.type=="array"&&Array.isArray(A.schema.items)){var Oe=A.schema.items;if(Oe){for(var Fe,he=-1,et=Oe.length-1;he<et;)if(Fe=Oe[he+=1],Fe.default!==void 0){var Ge=ee+"["+he+"]";if(A.compositeRule){if(A.opts.strictDefaults){var fe="default is ignored for: "+Ge;if(A.opts.strictDefaults==="log")A.logger.warn(fe);else throw new Error(fe)}}else B+=" if ("+Ge+" === undefined ",A.opts.useDefaults=="empty"&&(B+=" || "+Ge+" === null || "+Ge+" === '' "),B+=" ) "+Ge+" = ",A.opts.useDefaults=="shared"?B+=" "+A.useDefault(Fe.default)+" ":B+=" "+JSON.stringify(Fe.default)+" ",B+="; "}}}}var Mt=O.rules;if(Mt){for(var dt,mt=-1,Ut=Mt.length-1;mt<Ut;)if(dt=Mt[mt+=1],It(dt)){var St=dt.code(A,dt.keyword,O.type);St&&(B+=" "+St+" ",pe&&(ve+="}"))}}if(pe&&(B+=" "+ve+" ",ve=""),O.type&&(B+=" } ",be&&be===O.type&&!ue)){B+=" else { ";var K=A.schemaPath+".type",J=A.errSchemaPath+"/type",ie=ie||[];ie.push(B),B="",A.createErrors!==!1?(B+=" { keyword: '"+(_e||"type")+"' , dataPath: (dataPath || '') + "+A.errorPath+" , schemaPath: "+A.util.toQuotedString(J)+" , params: { type: '",Te?B+=""+be.join(","):B+=""+be,B+="' } ",A.opts.messages!==!1&&(B+=" , message: 'should be ",Te?B+=""+be.join(","):B+=""+be,B+="' "),A.opts.verbose&&(B+=" , schema: validate.schema"+K+" , parentSchema: validate.schema"+A.schemaPath+" , data: "+ee+" "),B+=" } "):B+=" {} ";var ne=B;B=ie.pop(),!A.compositeRule&&pe?A.async?B+=" throw new ValidationError(["+ne+"]); ":B+=" validate.errors = ["+ne+"]; return false; ":B+=" var err = "+ne+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",B+=" } "}pe&&(B+=" if (errors === ",ce?B+="0":B+="errs_"+L,B+=") { ",ye+="}")}}}pe&&(B+=" "+ye+" "),ce?(T?(B+=" if (errors === 0) return data;           ",B+=" else throw new ValidationError(vErrors); "):(B+=" validate.errors = vErrors; ",B+=" return errors === 0;       "),B+=" }; return validate;"):B+=" var "+de+" = errors === errs_"+L+";";function vt(Tt){for(var Wt=Tt.rules,ft=0;ft<Wt.length;ft++)if(It(Wt[ft]))return!0}function It(Tt){return A.schema[Tt.keyword]!==void 0||Tt.implements&&yt(Tt)}function yt(Tt){for(var Wt=Tt.implements,ft=0;ft<Wt.length;ft++)if(A.schema[Wt[ft]]!==void 0)return!0}return B}),validate}var compile_1,hasRequiredCompile;function requireCompile(){if(hasRequiredCompile)return compile_1;hasRequiredCompile=1;var E=requireResolve(),A=requireUtil(),_=requireError_classes(),I=requireFastJsonStableStringify(),B=requireValidate(),T=A.ucs2length,R=requireFastDeepEqual(),P=_.Validation;compile_1=D;function D(ne,ce,fe,de){var pe=this,ve=this._opts,ye=[void 0],_e={},be=[],Te={},ue=[],O={},z=[];ce=ce||{schema:ne,refVal:ye,refs:_e};var Y=F.call(this,ne,ce,de),te=this._compilations[Y.index];if(Y.compiling)return te.callValidate=Q;var oe=this._formats,le=this.RULES;try{var he=se(ne,ce,fe,de);te.validate=he;var ae=te.callValidate;return ae&&(ae.schema=he.schema,ae.errors=null,ae.refs=he.refs,ae.refVal=he.refVal,ae.root=he.root,ae.$async=he.$async,ve.sourceCode&&(ae.source=he.source)),he}finally{L.call(this,ne,ce,de)}function Q(){var Fe=te.validate,Ge=Fe.apply(this,arguments);return Q.errors=Fe.errors,Ge}function se(Fe,Ge,Oe,et){var Mt=!Ge||Ge&&Ge.schema==Fe;if(Ge.schema!=ce.schema)return D.call(pe,Fe,Ge,Oe,et);var dt=Fe.$async===!0,mt=B({isTop:!0,schema:Fe,isRoot:Mt,baseId:et,root:Ge,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:_.MissingRef,RULES:le,validate:B,util:A,resolve:E,resolveRef:Ae,usePattern:Ie,useDefault:we,useCustomRule:xe,opts:ve,formats:oe,logger:pe.logger,self:pe});mt=ie(ye,J)+ie(be,V)+ie(ue,K)+ie(z,ee)+mt,ve.processCode&&(mt=ve.processCode(mt,Fe));var Ut;try{var St=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",mt);Ut=St(pe,le,oe,ce,ye,ue,z,R,T,P),ye[0]=Ut}catch(vt){throw pe.logger.error("Error compiling schema, function code:",mt),vt}return Ut.schema=Fe,Ut.errors=null,Ut.refs=_e,Ut.refVal=ye,Ut.root=Mt?Ut:Ge,dt&&(Ut.$async=!0),ve.sourceCode===!0&&(Ut.source={code:mt,patterns:be,defaults:ue}),Ut}function Ae(Fe,Ge,Oe){Ge=E.url(Fe,Ge);var et=_e[Ge],Mt,dt;if(et!==void 0)return Mt=ye[et],dt="refVal["+et+"]",Se(Mt,dt);if(!Oe&&ce.refs){var mt=ce.refs[Ge];if(mt!==void 0)return Mt=ce.refVal[mt],dt=ge(Ge,Mt),Se(Mt,dt)}dt=ge(Ge);var Ut=E.call(pe,se,ce,Ge);if(Ut===void 0){var St=fe&&fe[Ge];St&&(Ut=E.inlineRef(St,ve.inlineRefs)?St:D.call(pe,St,ce,fe,Fe))}if(Ut===void 0)Ee(Ge);else return ke(Ge,Ut),Se(Ut,dt)}function ge(Fe,Ge){var Oe=ye.length;return ye[Oe]=Ge,_e[Fe]=Oe,"refVal"+Oe}function Ee(Fe){delete _e[Fe]}function ke(Fe,Ge){var Oe=_e[Fe];ye[Oe]=Ge}function Se(Fe,Ge){return typeof Fe=="object"||typeof Fe=="boolean"?{code:Ge,schema:Fe,inline:!0}:{code:Ge,$async:Fe&&!!Fe.$async}}function Ie(Fe){var Ge=Te[Fe];return Ge===void 0&&(Ge=Te[Fe]=be.length,be[Ge]=Fe),"pattern"+Ge}function we(Fe){switch(typeof Fe){case"boolean":case"number":return""+Fe;case"string":return A.toQuotedString(Fe);case"object":if(Fe===null)return"null";var Ge=I(Fe),Oe=O[Ge];return Oe===void 0&&(Oe=O[Ge]=ue.length,ue[Oe]=Fe),"default"+Oe}}function xe(Fe,Ge,Oe,et){if(pe._opts.validateSchema!==!1){var Mt=Fe.definition.dependencies;if(Mt&&!Mt.every(function(Wt){return Object.prototype.hasOwnProperty.call(Oe,Wt)}))throw new Error("parent schema must have all required keywords: "+Mt.join(","));var dt=Fe.definition.validateSchema;if(dt){var mt=dt(Ge);if(!mt){var Ut="keyword schema is invalid: "+pe.errorsText(dt.errors);if(pe._opts.validateSchema=="log")pe.logger.error(Ut);else throw new Error(Ut)}}}var St=Fe.definition.compile,vt=Fe.definition.inline,It=Fe.definition.macro,yt;if(St)yt=St.call(pe,Ge,Oe,et);else if(It)yt=It.call(pe,Ge,Oe,et),ve.validateSchema!==!1&&pe.validateSchema(yt,!0);else if(vt)yt=vt.call(pe,et,Fe.keyword,Ge,Oe);else if(yt=Fe.definition.validate,!yt)return;if(yt===void 0)throw new Error('custom keyword "'+Fe.keyword+'"failed to compile');var Tt=z.length;return z[Tt]=yt,{code:"customRule"+Tt,validate:yt}}}function F(ne,ce,fe){var de=U.call(this,ne,ce,fe);return de>=0?{index:de,compiling:!0}:(de=this._compilations.length,this._compilations[de]={schema:ne,root:ce,baseId:fe},{index:de,compiling:!1})}function L(ne,ce,fe){var de=U.call(this,ne,ce,fe);de>=0&&this._compilations.splice(de,1)}function U(ne,ce,fe){for(var de=0;de<this._compilations.length;de++){var pe=this._compilations[de];if(pe.schema==ne&&pe.root==ce&&pe.baseId==fe)return de}return-1}function V(ne,ce){return"var pattern"+ne+" = new RegExp("+A.toQuotedString(ce[ne])+");"}function K(ne){return"var default"+ne+" = defaults["+ne+"];"}function J(ne,ce){return ce[ne]===void 0?"":"var refVal"+ne+" = refVal["+ne+"];"}function ee(ne){return"var customRule"+ne+" = customRules["+ne+"];"}function ie(ne,ce){if(!ne.length)return"";for(var fe="",de=0;de<ne.length;de++)fe+=ce(de,ne);return fe}return compile_1}var cache={exports:{}},hasRequiredCache;function requireCache(){if(hasRequiredCache)return cache.exports;hasRequiredCache=1;var E=cache.exports=function(){this._cache={}};return E.prototype.put=function(_,I){this._cache[_]=I},E.prototype.get=function(_){return this._cache[_]},E.prototype.del=function(_){delete this._cache[_]},E.prototype.clear=function(){this._cache={}},cache.exports}var formats_1,hasRequiredFormats;function requireFormats(){if(hasRequiredFormats)return formats_1;hasRequiredFormats=1;var E=requireUtil(),A=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,_=[0,31,28,31,30,31,30,31,31,30,31,30,31],I=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,B=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,T=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,R=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,P=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,D=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,F=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,L=/^(?:\/(?:[^~/]|~0|~1)*)*$/,U=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,V=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;formats_1=K;function K(ye){return ye=ye=="full"?"full":"fast",E.copy(K[ye])}K.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":P,url:D,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:B,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:ve,uuid:F,"json-pointer":L,"json-pointer-uri-fragment":U,"relative-json-pointer":V},K.full={date:ee,time:ie,"date-time":ce,uri:de,"uri-reference":R,"uri-template":P,url:D,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:B,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:ve,uuid:F,"json-pointer":L,"json-pointer-uri-fragment":U,"relative-json-pointer":V};function J(ye){return ye%4===0&&(ye%100!==0||ye%400===0)}function ee(ye){var _e=ye.match(A);if(!_e)return!1;var be=+_e[1],Te=+_e[2],ue=+_e[3];return Te>=1&&Te<=12&&ue>=1&&ue<=(Te==2&&J(be)?29:_[Te])}function ie(ye,_e){var be=ye.match(I);if(!be)return!1;var Te=be[1],ue=be[2],O=be[3],z=be[5];return(Te<=23&&ue<=59&&O<=59||Te==23&&ue==59&&O==60)&&(!_e||z)}var ne=/t|\s/i;function ce(ye){var _e=ye.split(ne);return _e.length==2&&ee(_e[0])&&ie(_e[1],!0)}var fe=/\/|:/;function de(ye){return fe.test(ye)&&T.test(ye)}var pe=/[^\\]\\Z/;function ve(ye){if(pe.test(ye))return!1;try{return new RegExp(ye),!0}catch{return!1}}return formats_1}var ref,hasRequiredRef;function requireRef(){return hasRequiredRef||(hasRequiredRef=1,ref=function(A,_,I){var B=" ",T=A.level,R=A.dataLevel,P=A.schema[_],D=A.errSchemaPath+"/"+_,F=!A.opts.allErrors,L="data"+(R||""),U="valid"+T,V,K;if(P=="#"||P=="#/")A.isRoot?(V=A.async,K="validate"):(V=A.root.schema.$async===!0,K="root.refVal[0]");else{var J=A.resolveRef(A.baseId,P,A.isRoot);if(J===void 0){var ee=A.MissingRefError.message(A.baseId,P);if(A.opts.missingRefs=="fail"){A.logger.error(ee);var ie=ie||[];ie.push(B),B="",A.createErrors!==!1?(B+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+A.errorPath+" , schemaPath: "+A.util.toQuotedString(D)+" , params: { ref: '"+A.util.escapeQuotes(P)+"' } ",A.opts.messages!==!1&&(B+=" , message: 'can\\'t resolve reference "+A.util.escapeQuotes(P)+"' "),A.opts.verbose&&(B+=" , schema: "+A.util.toQuotedString(P)+" , parentSchema: validate.schema"+A.schemaPath+" , data: "+L+" "),B+=" } "):B+=" {} ";var ne=B;B=ie.pop(),!A.compositeRule&&F?A.async?B+=" throw new ValidationError(["+ne+"]); ":B+=" validate.errors = ["+ne+"]; return false; ":B+=" var err = "+ne+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",F&&(B+=" if (false) { ")}else if(A.opts.missingRefs=="ignore")A.logger.warn(ee),F&&(B+=" if (true) { ");else throw new A.MissingRefError(A.baseId,P,ee)}else if(J.inline){var ce=A.util.copy(A);ce.level++;var fe="valid"+ce.level;ce.schema=J.schema,ce.schemaPath="",ce.errSchemaPath=P;var de=A.validate(ce).replace(/validate\.schema/g,J.code);B+=" "+de+" ",F&&(B+=" if ("+fe+") { ")}else V=J.$async===!0||A.async&&J.$async!==!1,K=J.code}if(K){var ie=ie||[];ie.push(B),B="",A.opts.passContext?B+=" "+K+".call(this, ":B+=" "+K+"( ",B+=" "+L+", (dataPath || '')",A.errorPath!='""'&&(B+=" + "+A.errorPath);var pe=R?"data"+(R-1||""):"parentData",ve=R?A.dataPathArr[R]:"parentDataProperty";B+=" , "+pe+" , "+ve+", rootData)  ";var ye=B;if(B=ie.pop(),V){if(!A.async)throw new Error("async schema referenced by sync schema");F&&(B+=" var "+U+"; "),B+=" try { await "+ye+"; ",F&&(B+=" "+U+" = true; "),B+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",F&&(B+=" "+U+" = false; "),B+=" } ",F&&(B+=" if ("+U+") { ")}else B+=" if (!"+ye+") { if (vErrors === null) vErrors = "+K+".errors; else vErrors = vErrors.concat("+K+".errors); errors = vErrors.length; } ",F&&(B+=" else { ")}return B}),ref}var allOf,hasRequiredAllOf;function requireAllOf(){return hasRequiredAllOf||(hasRequiredAllOf=1,allOf=function(A,_,I){var B=" ",T=A.schema[_],R=A.schemaPath+A.util.getProperty(_),P=A.errSchemaPath+"/"+_,D=!A.opts.allErrors,F=A.util.copy(A),L="";F.level++;var U="valid"+F.level,V=F.baseId,K=!0,J=T;if(J)for(var ee,ie=-1,ne=J.length-1;ie<ne;)ee=J[ie+=1],(A.opts.strictKeywords?typeof ee=="object"&&Object.keys(ee).length>0||ee===!1:A.util.schemaHasRules(ee,A.RULES.all))&&(K=!1,F.schema=ee,F.schemaPath=R+"["+ie+"]",F.errSchemaPath=P+"/"+ie,B+="  "+A.validate(F)+" ",F.baseId=V,D&&(B+=" if ("+U+") { ",L+="}"));return D&&(K?B+=" if (true) { ":B+=" "+L.slice(0,-1)+" "),B}),allOf}var anyOf,hasRequiredAnyOf;function requireAnyOf(){return hasRequiredAnyOf||(hasRequiredAnyOf=1,anyOf=function(A,_,I){var B=" ",T=A.level,R=A.dataLevel,P=A.schema[_],D=A.schemaPath+A.util.getProperty(_),F=A.errSchemaPath+"/"+_,L=!A.opts.allErrors,U="data"+(R||""),V="valid"+T,K="errs__"+T,J=A.util.copy(A),ee="";J.level++;var ie="valid"+J.level,ne=P.every(function(_e){return A.opts.strictKeywords?typeof _e=="object"&&Object.keys(_e).length>0||_e===!1:A.util.schemaHasRules(_e,A.RULES.all)});if(ne){var ce=J.baseId;B+=" var "+K+" = errors; var "+V+" = false;  ";var fe=A.compositeRule;A.compositeRule=J.compositeRule=!0;var de=P;if(de)for(var pe,ve=-1,ye=de.length-1;ve<ye;)pe=de[ve+=1],J.schema=pe,J.schemaPath=D+"["+ve+"]",J.errSchemaPath=F+"/"+ve,B+="  "+A.validate(J)+" ",J.baseId=ce,B+=" "+V+" = "+V+" || "+ie+"; if (!"+V+") { ",ee+="}";A.compositeRule=J.compositeRule=fe,B+=" "+ee+" if (!"+V+") {   var err =   ",A.createErrors!==!1?(B+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+A.errorPath+" , schemaPath: "+A.util.toQuotedString(F)+" , params: {} ",A.opts.messages!==!1&&(B+=" , message: 'should match some schema in anyOf' "),A.opts.verbose&&(B+=" , schema: validate.schema"+D+" , parentSchema: validate.schema"+A.schemaPath+" , data: "+U+" "),B+=" } "):B+=" {} ",B+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!A.compositeRule&&L&&(A.async?B+=" throw new ValidationError(vErrors); ":B+=" validate.errors = vErrors; return false; "),B+=" } else {  errors = "+K+"; if (vErrors !== null) { if ("+K+") vErrors.length = "+K+"; else vErrors = null; } ",A.opts.allErrors&&(B+=" } ")}else L&&(B+=" if (true) { ");return B}),anyOf}var comment,hasRequiredComment;function requireComment(){return hasRequiredComment||(hasRequiredComment=1,comment=function(A,_,I){var B=" ",T=A.schema[_],R=A.errSchemaPath+"/"+_;A.opts.allErrors;var P=A.util.toQuotedString(T);return A.opts.$comment===!0?B+=" console.log("+P+");":typeof A.opts.$comment=="function"&&(B+=" self._opts.$comment("+P+", "+A.util.toQuotedString(R)+", validate.root.schema);"),B}),comment}var _const,hasRequired_const;function require_const(){return hasRequired_const||(hasRequired_const=1,_const=function(A,_,I){var B=" ",T=A.level,R=A.dataLevel,P=A.schema[_],D=A.schemaPath+A.util.getProperty(_),F=A.errSchemaPath+"/"+_,L=!A.opts.allErrors,U="data"+(R||""),V="valid"+T,K=A.opts.$data&&P&&P.$data;K&&(B+=" var schema"+T+" = "+A.util.getData(P.$data,R,A.dataPathArr)+"; "),K||(B+=" var schema"+T+" = validate.schema"+D+";"),B+="var "+V+" = equal("+U+", schema"+T+"); if (!"+V+") {   ";var J=J||[];J.push(B),B="",A.createErrors!==!1?(B+=" { keyword: 'const' , dataPath: (dataPath || '') + "+A.errorPath+" , schemaPath: "+A.util.toQuotedString(F)+" , params: { allowedValue: schema"+T+" } ",A.opts.messages!==!1&&(B+=" , message: 'should be equal to constant' "),A.opts.verbose&&(B+=" , schema: validate.schema"+D+" , parentSchema: validate.schema"+A.schemaPath+" , data: "+U+" "),B+=" } "):B+=" {} ";var ee=B;return B=J.pop(),!A.compositeRule&&L?A.async?B+=" throw new ValidationError(["+ee+"]); ":B+=" validate.errors = ["+ee+"]; return false; ":B+=" var err = "+ee+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",B+=" }",L&&(B+=" else { "),B}),_const}var contains,hasRequiredContains;function requireContains(){return hasRequiredContains||(hasRequiredContains=1,contains=function(A,_,I){var B=" ",T=A.level,R=A.dataLevel,P=A.schema[_],D=A.schemaPath+A.util.getProperty(_),F=A.errSchemaPath+"/"+_,L=!A.opts.allErrors,U="data"+(R||""),V="valid"+T,K="errs__"+T,J=A.util.copy(A),ee="";J.level++;var ie="valid"+J.level,ne="i"+T,ce=J.dataLevel=A.dataLevel+1,fe="data"+ce,de=A.baseId,pe=A.opts.strictKeywords?typeof P=="object"&&Object.keys(P).length>0||P===!1:A.util.schemaHasRules(P,A.RULES.all);if(B+="var "+K+" = errors;var "+V+";",pe){var ve=A.compositeRule;A.compositeRule=J.compositeRule=!0,J.schema=P,J.schemaPath=D,J.errSchemaPath=F,B+=" var "+ie+" = false; for (var "+ne+" = 0; "+ne+" < "+U+".length; "+ne+"++) { ",J.errorPath=A.util.getPathExpr(A.errorPath,ne,A.opts.jsonPointers,!0);var ye=U+"["+ne+"]";J.dataPathArr[ce]=ne;var _e=A.validate(J);J.baseId=de,A.util.varOccurences(_e,fe)<2?B+=" "+A.util.varReplace(_e,fe,ye)+" ":B+=" var "+fe+" = "+ye+"; "+_e+" ",B+=" if ("+ie+") break; }  ",A.compositeRule=J.compositeRule=ve,B+=" "+ee+" if (!"+ie+") {"}else B+=" if ("+U+".length == 0) {";var be=be||[];be.push(B),B="",A.createErrors!==!1?(B+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+A.errorPath+" , schemaPath: "+A.util.toQuotedString(F)+" , params: {} ",A.opts.messages!==!1&&(B+=" , message: 'should contain a valid item' "),A.opts.verbose&&(B+=" , schema: validate.schema"+D+" , parentSchema: validate.schema"+A.schemaPath+" , data: "+U+" "),B+=" } "):B+=" {} ";var Te=B;return B=be.pop(),!A.compositeRule&&L?A.async?B+=" throw new ValidationError(["+Te+"]); ":B+=" validate.errors = ["+Te+"]; return false; ":B+=" var err = "+Te+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",B+=" } else { ",pe&&(B+="  errors = "+K+"; if (vErrors !== null) { if ("+K+") vErrors.length = "+K+"; else vErrors = null; } "),A.opts.allErrors&&(B+=" } "),B}),contains}var dependencies,hasRequiredDependencies;function requireDependencies(){return hasRequiredDependencies||(hasRequiredDependencies=1,dependencies=function(A,_,I){var B=" ",T=A.level,R=A.dataLevel,P=A.schema[_],D=A.schemaPath+A.util.getProperty(_),F=A.errSchemaPath+"/"+_,L=!A.opts.allErrors,U="data"+(R||""),V="errs__"+T,K=A.util.copy(A),J="";K.level++;var ee="valid"+K.level,ie={},ne={},ce=A.opts.ownProperties;for(ve in P)if(ve!="__proto__"){var fe=P[ve],de=Array.isArray(fe)?ne:ie;de[ve]=fe}B+="var "+V+" = errors;";var pe=A.errorPath;B+="var missing"+T+";";for(var ve in ne)if(de=ne[ve],de.length){if(B+=" if ( "+U+A.util.getProperty(ve)+" !== undefined ",ce&&(B+=" && Object.prototype.hasOwnProperty.call("+U+", '"+A.util.escapeQuotes(ve)+"') "),L){B+=" && ( ";var ye=de;if(ye)for(var _e,be=-1,Te=ye.length-1;be<Te;){_e=ye[be+=1],be&&(B+=" || ");var ue=A.util.getProperty(_e),O=U+ue;B+=" ( ( "+O+" === undefined ",ce&&(B+=" || ! Object.prototype.hasOwnProperty.call("+U+", '"+A.util.escapeQuotes(_e)+"') "),B+=") && (missing"+T+" = "+A.util.toQuotedString(A.opts.jsonPointers?_e:ue)+") ) "}B+=")) {  ";var z="missing"+T,Y="' + "+z+" + '";A.opts._errorDataPathProperty&&(A.errorPath=A.opts.jsonPointers?A.util.getPathExpr(pe,z,!0):pe+" + "+z);var te=te||[];te.push(B),B="",A.createErrors!==!1?(B+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+A.errorPath+" , schemaPath: "+A.util.toQuotedString(F)+" , params: { property: '"+A.util.escapeQuotes(ve)+"', missingProperty: '"+Y+"', depsCount: "+de.length+", deps: '"+A.util.escapeQuotes(de.length==1?de[0]:de.join(", "))+"' } ",A.opts.messages!==!1&&(B+=" , message: 'should have ",de.length==1?B+="property "+A.util.escapeQuotes(de[0]):B+="properties "+A.util.escapeQuotes(de.join(", ")),B+=" when property "+A.util.escapeQuotes(ve)+" is present' "),A.opts.verbose&&(B+=" , schema: validate.schema"+D+" , parentSchema: validate.schema"+A.schemaPath+" , data: "+U+" "),B+=" } "):B+=" {} ";var oe=B;B=te.pop(),!A.compositeRule&&L?A.async?B+=" throw new ValidationError(["+oe+"]); ":B+=" validate.errors = ["+oe+"]; return false; ":B+=" var err = "+oe+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{B+=" ) { ";var le=de;if(le)for(var _e,he=-1,ae=le.length-1;he<ae;){_e=le[he+=1];var ue=A.util.getProperty(_e),Y=A.util.escapeQuotes(_e),O=U+ue;A.opts._errorDataPathProperty&&(A.errorPath=A.util.getPath(pe,_e,A.opts.jsonPointers)),B+=" if ( "+O+" === undefined ",ce&&(B+=" || ! Object.prototype.hasOwnProperty.call("+U+", '"+A.util.escapeQuotes(_e)+"') "),B+=") {  var err =   ",A.createErrors!==!1?(B+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+A.errorPath+" , schemaPath: "+A.util.toQuotedString(F)+" , params: { property: '"+A.util.escapeQuotes(ve)+"', missingProperty: '"+Y+"', depsCount: "+de.length+", deps: '"+A.util.escapeQuotes(de.length==1?de[0]:de.join(", "))+"' } ",A.opts.messages!==!1&&(B+=" , message: 'should have ",de.length==1?B+="property "+A.util.escapeQuotes(de[0]):B+="properties "+A.util.escapeQuotes(de.join(", ")),B+=" when property "+A.util.escapeQuotes(ve)+" is present' "),A.opts.verbose&&(B+=" , schema: validate.schema"+D+" , parentSchema: validate.schema"+A.schemaPath+" , data: "+U+" "),B+=" } "):B+=" {} ",B+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}B+=" }   ",L&&(J+="}",B+=" else { ")}A.errorPath=pe;var Q=K.baseId;for(var ve in ie){var fe=ie[ve];(A.opts.strictKeywords?typeof fe=="object"&&Object.keys(fe).length>0||fe===!1:A.util.schemaHasRules(fe,A.RULES.all))&&(B+=" "+ee+" = true; if ( "+U+A.util.getProperty(ve)+" !== undefined ",ce&&(B+=" && Object.prototype.hasOwnProperty.call("+U+", '"+A.util.escapeQuotes(ve)+"') "),B+=") { ",K.schema=fe,K.schemaPath=D+A.util.getProperty(ve),K.errSchemaPath=F+"/"+A.util.escapeFragment(ve),B+="  "+A.validate(K)+" ",K.baseId=Q,B+=" }  ",L&&(B+=" if ("+ee+") { ",J+="}"))}return L&&(B+="   "+J+" if ("+V+" == errors) {"),B}),dependencies}var _enum,hasRequired_enum;function require_enum(){return hasRequired_enum||(hasRequired_enum=1,_enum=function(A,_,I){var B=" ",T=A.level,R=A.dataLevel,P=A.schema[_],D=A.schemaPath+A.util.getProperty(_),F=A.errSchemaPath+"/"+_,L=!A.opts.allErrors,U="data"+(R||""),V="valid"+T,K=A.opts.$data&&P&&P.$data;K&&(B+=" var schema"+T+" = "+A.util.getData(P.$data,R,A.dataPathArr)+"; ");var J="i"+T,ee="schema"+T;K||(B+=" var "+ee+" = validate.schema"+D+";"),B+="var "+V+";",K&&(B+=" if (schema"+T+" === undefined) "+V+" = true; else if (!Array.isArray(schema"+T+")) "+V+" = false; else {"),B+=""+V+" = false;for (var "+J+"=0; "+J+"<"+ee+".length; "+J+"++) if (equal("+U+", "+ee+"["+J+"])) { "+V+" = true; break; }",K&&(B+="  }  "),B+=" if (!"+V+") {   ";var ie=ie||[];ie.push(B),B="",A.createErrors!==!1?(B+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+A.errorPath+" , schemaPath: "+A.util.toQuotedString(F)+" , params: { allowedValues: schema"+T+" } ",A.opts.messages!==!1&&(B+=" , message: 'should be equal to one of the allowed values' "),A.opts.verbose&&(B+=" , schema: validate.schema"+D+" , parentSchema: validate.schema"+A.schemaPath+" , data: "+U+" "),B+=" } "):B+=" {} ";var ne=B;return B=ie.pop(),!A.compositeRule&&L?A.async?B+=" throw new ValidationError(["+ne+"]); ":B+=" validate.errors = ["+ne+"]; return false; ":B+=" var err = "+ne+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",B+=" }",L&&(B+=" else { "),B}),_enum}var format,hasRequiredFormat;function requireFormat(){return hasRequiredFormat||(hasRequiredFormat=1,format=function(A,_,I){var B=" ",T=A.level,R=A.dataLevel,P=A.schema[_],D=A.schemaPath+A.util.getProperty(_),F=A.errSchemaPath+"/"+_,L=!A.opts.allErrors,U="data"+(R||"");if(A.opts.format===!1)return L&&(B+=" if (true) { "),B;var V=A.opts.$data&&P&&P.$data,K;V?(B+=" var schema"+T+" = "+A.util.getData(P.$data,R,A.dataPathArr)+"; ",K="schema"+T):K=P;var J=A.opts.unknownFormats,ee=Array.isArray(J);if(V){var ie="format"+T,ne="isObject"+T,ce="formatType"+T;B+=" var "+ie+" = formats["+K+"]; var "+ne+" = typeof "+ie+" == 'object' && !("+ie+" instanceof RegExp) && "+ie+".validate; var "+ce+" = "+ne+" && "+ie+".type || 'string'; if ("+ne+") { ",A.async&&(B+=" var async"+T+" = "+ie+".async; "),B+=" "+ie+" = "+ie+".validate; } if (  ",V&&(B+=" ("+K+" !== undefined && typeof "+K+" != 'string') || "),B+=" (",J!="ignore"&&(B+=" ("+K+" && !"+ie+" ",ee&&(B+=" && self._opts.unknownFormats.indexOf("+K+") == -1 "),B+=") || "),B+=" ("+ie+" && "+ce+" == '"+I+"' && !(typeof "+ie+" == 'function' ? ",A.async?B+=" (async"+T+" ? await "+ie+"("+U+") : "+ie+"("+U+")) ":B+=" "+ie+"("+U+") ",B+=" : "+ie+".test("+U+"))))) {"}else{var ie=A.formats[P];if(!ie){if(J=="ignore")return A.logger.warn('unknown format "'+P+'" ignored in schema at path "'+A.errSchemaPath+'"'),L&&(B+=" if (true) { "),B;if(ee&&J.indexOf(P)>=0)return L&&(B+=" if (true) { "),B;throw new Error('unknown format "'+P+'" is used in schema at path "'+A.errSchemaPath+'"')}var ne=typeof ie=="object"&&!(ie instanceof RegExp)&&ie.validate,ce=ne&&ie.type||"string";if(ne){var fe=ie.async===!0;ie=ie.validate}if(ce!=I)return L&&(B+=" if (true) { "),B;if(fe){if(!A.async)throw new Error("async format in sync schema");var de="formats"+A.util.getProperty(P)+".validate";B+=" if (!(await "+de+"("+U+"))) { "}else{B+=" if (! ";var de="formats"+A.util.getProperty(P);ne&&(de+=".validate"),typeof ie=="function"?B+=" "+de+"("+U+") ":B+=" "+de+".test("+U+") ",B+=") { "}}var pe=pe||[];pe.push(B),B="",A.createErrors!==!1?(B+=" { keyword: 'format' , dataPath: (dataPath || '') + "+A.errorPath+" , schemaPath: "+A.util.toQuotedString(F)+" , params: { format:  ",V?B+=""+K:B+=""+A.util.toQuotedString(P),B+="  } ",A.opts.messages!==!1&&(B+=` , message: 'should match format "`,V?B+="' + "+K+" + '":B+=""+A.util.escapeQuotes(P),B+=`"' `),A.opts.verbose&&(B+=" , schema:  ",V?B+="validate.schema"+D:B+=""+A.util.toQuotedString(P),B+="         , parentSchema: validate.schema"+A.schemaPath+" , data: "+U+" "),B+=" } "):B+=" {} ";var ve=B;return B=pe.pop(),!A.compositeRule&&L?A.async?B+=" throw new ValidationError(["+ve+"]); ":B+=" validate.errors = ["+ve+"]; return false; ":B+=" var err = "+ve+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",B+=" } ",L&&(B+=" else { "),B}),format}var _if,hasRequired_if;function require_if(){return hasRequired_if||(hasRequired_if=1,_if=function(A,_,I){var B=" ",T=A.level,R=A.dataLevel,P=A.schema[_],D=A.schemaPath+A.util.getProperty(_),F=A.errSchemaPath+"/"+_,L=!A.opts.allErrors,U="data"+(R||""),V="valid"+T,K="errs__"+T,J=A.util.copy(A);J.level++;var ee="valid"+J.level,ie=A.schema.then,ne=A.schema.else,ce=ie!==void 0&&(A.opts.strictKeywords?typeof ie=="object"&&Object.keys(ie).length>0||ie===!1:A.util.schemaHasRules(ie,A.RULES.all)),fe=ne!==void 0&&(A.opts.strictKeywords?typeof ne=="object"&&Object.keys(ne).length>0||ne===!1:A.util.schemaHasRules(ne,A.RULES.all)),de=J.baseId;if(ce||fe){var pe;J.createErrors=!1,J.schema=P,J.schemaPath=D,J.errSchemaPath=F,B+=" var "+K+" = errors; var "+V+" = true;  ";var ve=A.compositeRule;A.compositeRule=J.compositeRule=!0,B+="  "+A.validate(J)+" ",J.baseId=de,J.createErrors=!0,B+="  errors = "+K+"; if (vErrors !== null) { if ("+K+") vErrors.length = "+K+"; else vErrors = null; }  ",A.compositeRule=J.compositeRule=ve,ce?(B+=" if ("+ee+") {  ",J.schema=A.schema.then,J.schemaPath=A.schemaPath+".then",J.errSchemaPath=A.errSchemaPath+"/then",B+="  "+A.validate(J)+" ",J.baseId=de,B+=" "+V+" = "+ee+"; ",ce&&fe?(pe="ifClause"+T,B+=" var "+pe+" = 'then'; "):pe="'then'",B+=" } ",fe&&(B+=" else { ")):B+=" if (!"+ee+") { ",fe&&(J.schema=A.schema.else,J.schemaPath=A.schemaPath+".else",J.errSchemaPath=A.errSchemaPath+"/else",B+="  "+A.validate(J)+" ",J.baseId=de,B+=" "+V+" = "+ee+"; ",ce&&fe?(pe="ifClause"+T,B+=" var "+pe+" = 'else'; "):pe="'else'",B+=" } "),B+=" if (!"+V+") {   var err =   ",A.createErrors!==!1?(B+=" { keyword: 'if' , dataPath: (dataPath || '') + "+A.errorPath+" , schemaPath: "+A.util.toQuotedString(F)+" , params: { failingKeyword: "+pe+" } ",A.opts.messages!==!1&&(B+=` , message: 'should match "' + `+pe+` + '" schema' `),A.opts.verbose&&(B+=" , schema: validate.schema"+D+" , parentSchema: validate.schema"+A.schemaPath+" , data: "+U+" "),B+=" } "):B+=" {} ",B+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!A.compositeRule&&L&&(A.async?B+=" throw new ValidationError(vErrors); ":B+=" validate.errors = vErrors; return false; "),B+=" }   ",L&&(B+=" else { ")}else L&&(B+=" if (true) { ");return B}),_if}var items,hasRequiredItems;function requireItems(){return hasRequiredItems||(hasRequiredItems=1,items=function(A,_,I){var B=" ",T=A.level,R=A.dataLevel,P=A.schema[_],D=A.schemaPath+A.util.getProperty(_),F=A.errSchemaPath+"/"+_,L=!A.opts.allErrors,U="data"+(R||""),V="valid"+T,K="errs__"+T,J=A.util.copy(A),ee="";J.level++;var ie="valid"+J.level,ne="i"+T,ce=J.dataLevel=A.dataLevel+1,fe="data"+ce,de=A.baseId;if(B+="var "+K+" = errors;var "+V+";",Array.isArray(P)){var pe=A.schema.additionalItems;if(pe===!1){B+=" "+V+" = "+U+".length <= "+P.length+"; ";var ve=F;F=A.errSchemaPath+"/additionalItems",B+="  if (!"+V+") {   ";var ye=ye||[];ye.push(B),B="",A.createErrors!==!1?(B+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+A.errorPath+" , schemaPath: "+A.util.toQuotedString(F)+" , params: { limit: "+P.length+" } ",A.opts.messages!==!1&&(B+=" , message: 'should NOT have more than "+P.length+" items' "),A.opts.verbose&&(B+=" , schema: false , parentSchema: validate.schema"+A.schemaPath+" , data: "+U+" "),B+=" } "):B+=" {} ";var _e=B;B=ye.pop(),!A.compositeRule&&L?A.async?B+=" throw new ValidationError(["+_e+"]); ":B+=" validate.errors = ["+_e+"]; return false; ":B+=" var err = "+_e+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",B+=" } ",F=ve,L&&(ee+="}",B+=" else { ")}var be=P;if(be){for(var Te,ue=-1,O=be.length-1;ue<O;)if(Te=be[ue+=1],A.opts.strictKeywords?typeof Te=="object"&&Object.keys(Te).length>0||Te===!1:A.util.schemaHasRules(Te,A.RULES.all)){B+=" "+ie+" = true; if ("+U+".length > "+ue+") { ";var z=U+"["+ue+"]";J.schema=Te,J.schemaPath=D+"["+ue+"]",J.errSchemaPath=F+"/"+ue,J.errorPath=A.util.getPathExpr(A.errorPath,ue,A.opts.jsonPointers,!0),J.dataPathArr[ce]=ue;var Y=A.validate(J);J.baseId=de,A.util.varOccurences(Y,fe)<2?B+=" "+A.util.varReplace(Y,fe,z)+" ":B+=" var "+fe+" = "+z+"; "+Y+" ",B+=" }  ",L&&(B+=" if ("+ie+") { ",ee+="}")}}if(typeof pe=="object"&&(A.opts.strictKeywords?typeof pe=="object"&&Object.keys(pe).length>0||pe===!1:A.util.schemaHasRules(pe,A.RULES.all))){J.schema=pe,J.schemaPath=A.schemaPath+".additionalItems",J.errSchemaPath=A.errSchemaPath+"/additionalItems",B+=" "+ie+" = true; if ("+U+".length > "+P.length+") {  for (var "+ne+" = "+P.length+"; "+ne+" < "+U+".length; "+ne+"++) { ",J.errorPath=A.util.getPathExpr(A.errorPath,ne,A.opts.jsonPointers,!0);var z=U+"["+ne+"]";J.dataPathArr[ce]=ne;var Y=A.validate(J);J.baseId=de,A.util.varOccurences(Y,fe)<2?B+=" "+A.util.varReplace(Y,fe,z)+" ":B+=" var "+fe+" = "+z+"; "+Y+" ",L&&(B+=" if (!"+ie+") break; "),B+=" } }  ",L&&(B+=" if ("+ie+") { ",ee+="}")}}else if(A.opts.strictKeywords?typeof P=="object"&&Object.keys(P).length>0||P===!1:A.util.schemaHasRules(P,A.RULES.all)){J.schema=P,J.schemaPath=D,J.errSchemaPath=F,B+="  for (var "+ne+" = 0; "+ne+" < "+U+".length; "+ne+"++) { ",J.errorPath=A.util.getPathExpr(A.errorPath,ne,A.opts.jsonPointers,!0);var z=U+"["+ne+"]";J.dataPathArr[ce]=ne;var Y=A.validate(J);J.baseId=de,A.util.varOccurences(Y,fe)<2?B+=" "+A.util.varReplace(Y,fe,z)+" ":B+=" var "+fe+" = "+z+"; "+Y+" ",L&&(B+=" if (!"+ie+") break; "),B+=" }"}return L&&(B+=" "+ee+" if ("+K+" == errors) {"),B}),items}var _limit,hasRequired_limit;function require_limit(){return hasRequired_limit||(hasRequired_limit=1,_limit=function(A,_,I){var B=" ",T=A.level,R=A.dataLevel,P=A.schema[_],D=A.schemaPath+A.util.getProperty(_),F=A.errSchemaPath+"/"+_,L=!A.opts.allErrors,de,U="data"+(R||""),V=A.opts.$data&&P&&P.$data,K;V?(B+=" var schema"+T+" = "+A.util.getData(P.$data,R,A.dataPathArr)+"; ",K="schema"+T):K=P;var J=_=="maximum",ee=J?"exclusiveMaximum":"exclusiveMinimum",ie=A.schema[ee],ne=A.opts.$data&&ie&&ie.$data,ce=J?"<":">",fe=J?">":"<",de=void 0;if(!(V||typeof P=="number"||P===void 0))throw new Error(_+" must be number");if(!(ne||ie===void 0||typeof ie=="number"||typeof ie=="boolean"))throw new Error(ee+" must be number or boolean");if(ne){var pe=A.util.getData(ie.$data,R,A.dataPathArr),ve="exclusive"+T,ye="exclType"+T,_e="exclIsNumber"+T,be="op"+T,Te="' + "+be+" + '";B+=" var schemaExcl"+T+" = "+pe+"; ",pe="schemaExcl"+T,B+=" var "+ve+"; var "+ye+" = typeof "+pe+"; if ("+ye+" != 'boolean' && "+ye+" != 'undefined' && "+ye+" != 'number') { ";var de=ee,ue=ue||[];ue.push(B),B="",A.createErrors!==!1?(B+=" { keyword: '"+(de||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+A.errorPath+" , schemaPath: "+A.util.toQuotedString(F)+" , params: {} ",A.opts.messages!==!1&&(B+=" , message: '"+ee+" should be boolean' "),A.opts.verbose&&(B+=" , schema: validate.schema"+D+" , parentSchema: validate.schema"+A.schemaPath+" , data: "+U+" "),B+=" } "):B+=" {} ";var O=B;B=ue.pop(),!A.compositeRule&&L?A.async?B+=" throw new ValidationError(["+O+"]); ":B+=" validate.errors = ["+O+"]; return false; ":B+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",B+=" } else if ( ",V&&(B+=" ("+K+" !== undefined && typeof "+K+" != 'number') || "),B+=" "+ye+" == 'number' ? ( ("+ve+" = "+K+" === undefined || "+pe+" "+ce+"= "+K+") ? "+U+" "+fe+"= "+pe+" : "+U+" "+fe+" "+K+" ) : ( ("+ve+" = "+pe+" === true) ? "+U+" "+fe+"= "+K+" : "+U+" "+fe+" "+K+" ) || "+U+" !== "+U+") { var op"+T+" = "+ve+" ? '"+ce+"' : '"+ce+"='; ",P===void 0&&(de=ee,F=A.errSchemaPath+"/"+ee,K=pe,V=ne)}else{var _e=typeof ie=="number",Te=ce;if(_e&&V){var be="'"+Te+"'";B+=" if ( ",V&&(B+=" ("+K+" !== undefined && typeof "+K+" != 'number') || "),B+=" ( "+K+" === undefined || "+ie+" "+ce+"= "+K+" ? "+U+" "+fe+"= "+ie+" : "+U+" "+fe+" "+K+" ) || "+U+" !== "+U+") { "}else{_e&&P===void 0?(ve=!0,de=ee,F=A.errSchemaPath+"/"+ee,K=ie,fe+="="):(_e&&(K=Math[J?"min":"max"](ie,P)),ie===(_e?K:!0)?(ve=!0,de=ee,F=A.errSchemaPath+"/"+ee,fe+="="):(ve=!1,Te+="="));var be="'"+Te+"'";B+=" if ( ",V&&(B+=" ("+K+" !== undefined && typeof "+K+" != 'number') || "),B+=" "+U+" "+fe+" "+K+" || "+U+" !== "+U+") { "}}de=de||_;var ue=ue||[];ue.push(B),B="",A.createErrors!==!1?(B+=" { keyword: '"+(de||"_limit")+"' , dataPath: (dataPath || '') + "+A.errorPath+" , schemaPath: "+A.util.toQuotedString(F)+" , params: { comparison: "+be+", limit: "+K+", exclusive: "+ve+" } ",A.opts.messages!==!1&&(B+=" , message: 'should be "+Te+" ",V?B+="' + "+K:B+=""+K+"'"),A.opts.verbose&&(B+=" , schema:  ",V?B+="validate.schema"+D:B+=""+P,B+="         , parentSchema: validate.schema"+A.schemaPath+" , data: "+U+" "),B+=" } "):B+=" {} ";var O=B;return B=ue.pop(),!A.compositeRule&&L?A.async?B+=" throw new ValidationError(["+O+"]); ":B+=" validate.errors = ["+O+"]; return false; ":B+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",B+=" } ",L&&(B+=" else { "),B}),_limit}var _limitItems,hasRequired_limitItems;function require_limitItems(){return hasRequired_limitItems||(hasRequired_limitItems=1,_limitItems=function(A,_,I){var B=" ",T=A.level,R=A.dataLevel,P=A.schema[_],D=A.schemaPath+A.util.getProperty(_),F=A.errSchemaPath+"/"+_,L=!A.opts.allErrors,ee,U="data"+(R||""),V=A.opts.$data&&P&&P.$data,K;if(V?(B+=" var schema"+T+" = "+A.util.getData(P.$data,R,A.dataPathArr)+"; ",K="schema"+T):K=P,!(V||typeof P=="number"))throw new Error(_+" must be number");var J=_=="maxItems"?">":"<";B+="if ( ",V&&(B+=" ("+K+" !== undefined && typeof "+K+" != 'number') || "),B+=" "+U+".length "+J+" "+K+") { ";var ee=_,ie=ie||[];ie.push(B),B="",A.createErrors!==!1?(B+=" { keyword: '"+(ee||"_limitItems")+"' , dataPath: (dataPath || '') + "+A.errorPath+" , schemaPath: "+A.util.toQuotedString(F)+" , params: { limit: "+K+" } ",A.opts.messages!==!1&&(B+=" , message: 'should NOT have ",_=="maxItems"?B+="more":B+="fewer",B+=" than ",V?B+="' + "+K+" + '":B+=""+P,B+=" items' "),A.opts.verbose&&(B+=" , schema:  ",V?B+="validate.schema"+D:B+=""+P,B+="         , parentSchema: validate.schema"+A.schemaPath+" , data: "+U+" "),B+=" } "):B+=" {} ";var ne=B;return B=ie.pop(),!A.compositeRule&&L?A.async?B+=" throw new ValidationError(["+ne+"]); ":B+=" validate.errors = ["+ne+"]; return false; ":B+=" var err = "+ne+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",B+="} ",L&&(B+=" else { "),B}),_limitItems}var _limitLength,hasRequired_limitLength;function require_limitLength(){return hasRequired_limitLength||(hasRequired_limitLength=1,_limitLength=function(A,_,I){var B=" ",T=A.level,R=A.dataLevel,P=A.schema[_],D=A.schemaPath+A.util.getProperty(_),F=A.errSchemaPath+"/"+_,L=!A.opts.allErrors,ee,U="data"+(R||""),V=A.opts.$data&&P&&P.$data,K;if(V?(B+=" var schema"+T+" = "+A.util.getData(P.$data,R,A.dataPathArr)+"; ",K="schema"+T):K=P,!(V||typeof P=="number"))throw new Error(_+" must be number");var J=_=="maxLength"?">":"<";B+="if ( ",V&&(B+=" ("+K+" !== undefined && typeof "+K+" != 'number') || "),A.opts.unicode===!1?B+=" "+U+".length ":B+=" ucs2length("+U+") ",B+=" "+J+" "+K+") { ";var ee=_,ie=ie||[];ie.push(B),B="",A.createErrors!==!1?(B+=" { keyword: '"+(ee||"_limitLength")+"' , dataPath: (dataPath || '') + "+A.errorPath+" , schemaPath: "+A.util.toQuotedString(F)+" , params: { limit: "+K+" } ",A.opts.messages!==!1&&(B+=" , message: 'should NOT be ",_=="maxLength"?B+="longer":B+="shorter",B+=" than ",V?B+="' + "+K+" + '":B+=""+P,B+=" characters' "),A.opts.verbose&&(B+=" , schema:  ",V?B+="validate.schema"+D:B+=""+P,B+="         , parentSchema: validate.schema"+A.schemaPath+" , data: "+U+" "),B+=" } "):B+=" {} ";var ne=B;return B=ie.pop(),!A.compositeRule&&L?A.async?B+=" throw new ValidationError(["+ne+"]); ":B+=" validate.errors = ["+ne+"]; return false; ":B+=" var err = "+ne+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",B+="} ",L&&(B+=" else { "),B}),_limitLength}var _limitProperties,hasRequired_limitProperties;function require_limitProperties(){return hasRequired_limitProperties||(hasRequired_limitProperties=1,_limitProperties=function(A,_,I){var B=" ",T=A.level,R=A.dataLevel,P=A.schema[_],D=A.schemaPath+A.util.getProperty(_),F=A.errSchemaPath+"/"+_,L=!A.opts.allErrors,ee,U="data"+(R||""),V=A.opts.$data&&P&&P.$data,K;if(V?(B+=" var schema"+T+" = "+A.util.getData(P.$data,R,A.dataPathArr)+"; ",K="schema"+T):K=P,!(V||typeof P=="number"))throw new Error(_+" must be number");var J=_=="maxProperties"?">":"<";B+="if ( ",V&&(B+=" ("+K+" !== undefined && typeof "+K+" != 'number') || "),B+=" Object.keys("+U+").length "+J+" "+K+") { ";var ee=_,ie=ie||[];ie.push(B),B="",A.createErrors!==!1?(B+=" { keyword: '"+(ee||"_limitProperties")+"' , dataPath: (dataPath || '') + "+A.errorPath+" , schemaPath: "+A.util.toQuotedString(F)+" , params: { limit: "+K+" } ",A.opts.messages!==!1&&(B+=" , message: 'should NOT have ",_=="maxProperties"?B+="more":B+="fewer",B+=" than ",V?B+="' + "+K+" + '":B+=""+P,B+=" properties' "),A.opts.verbose&&(B+=" , schema:  ",V?B+="validate.schema"+D:B+=""+P,B+="         , parentSchema: validate.schema"+A.schemaPath+" , data: "+U+" "),B+=" } "):B+=" {} ";var ne=B;return B=ie.pop(),!A.compositeRule&&L?A.async?B+=" throw new ValidationError(["+ne+"]); ":B+=" validate.errors = ["+ne+"]; return false; ":B+=" var err = "+ne+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",B+="} ",L&&(B+=" else { "),B}),_limitProperties}var multipleOf,hasRequiredMultipleOf;function requireMultipleOf(){return hasRequiredMultipleOf||(hasRequiredMultipleOf=1,multipleOf=function(A,_,I){var B=" ",T=A.level,R=A.dataLevel,P=A.schema[_],D=A.schemaPath+A.util.getProperty(_),F=A.errSchemaPath+"/"+_,L=!A.opts.allErrors,U="data"+(R||""),V=A.opts.$data&&P&&P.$data,K;if(V?(B+=" var schema"+T+" = "+A.util.getData(P.$data,R,A.dataPathArr)+"; ",K="schema"+T):K=P,!(V||typeof P=="number"))throw new Error(_+" must be number");B+="var division"+T+";if (",V&&(B+=" "+K+" !== undefined && ( typeof "+K+" != 'number' || "),B+=" (division"+T+" = "+U+" / "+K+", ",A.opts.multipleOfPrecision?B+=" Math.abs(Math.round(division"+T+") - division"+T+") > 1e-"+A.opts.multipleOfPrecision+" ":B+=" division"+T+" !== parseInt(division"+T+") ",B+=" ) ",V&&(B+="  )  "),B+=" ) {   ";var J=J||[];J.push(B),B="",A.createErrors!==!1?(B+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+A.errorPath+" , schemaPath: "+A.util.toQuotedString(F)+" , params: { multipleOf: "+K+" } ",A.opts.messages!==!1&&(B+=" , message: 'should be multiple of ",V?B+="' + "+K:B+=""+K+"'"),A.opts.verbose&&(B+=" , schema:  ",V?B+="validate.schema"+D:B+=""+P,B+="         , parentSchema: validate.schema"+A.schemaPath+" , data: "+U+" "),B+=" } "):B+=" {} ";var ee=B;return B=J.pop(),!A.compositeRule&&L?A.async?B+=" throw new ValidationError(["+ee+"]); ":B+=" validate.errors = ["+ee+"]; return false; ":B+=" var err = "+ee+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",B+="} ",L&&(B+=" else { "),B}),multipleOf}var not,hasRequiredNot;function requireNot(){return hasRequiredNot||(hasRequiredNot=1,not=function(A,_,I){var B=" ",T=A.level,R=A.dataLevel,P=A.schema[_],D=A.schemaPath+A.util.getProperty(_),F=A.errSchemaPath+"/"+_,L=!A.opts.allErrors,U="data"+(R||""),V="errs__"+T,K=A.util.copy(A);K.level++;var J="valid"+K.level;if(A.opts.strictKeywords?typeof P=="object"&&Object.keys(P).length>0||P===!1:A.util.schemaHasRules(P,A.RULES.all)){K.schema=P,K.schemaPath=D,K.errSchemaPath=F,B+=" var "+V+" = errors;  ";var ee=A.compositeRule;A.compositeRule=K.compositeRule=!0,K.createErrors=!1;var ie;K.opts.allErrors&&(ie=K.opts.allErrors,K.opts.allErrors=!1),B+=" "+A.validate(K)+" ",K.createErrors=!0,ie&&(K.opts.allErrors=ie),A.compositeRule=K.compositeRule=ee,B+=" if ("+J+") {   ";var ne=ne||[];ne.push(B),B="",A.createErrors!==!1?(B+=" { keyword: 'not' , dataPath: (dataPath || '') + "+A.errorPath+" , schemaPath: "+A.util.toQuotedString(F)+" , params: {} ",A.opts.messages!==!1&&(B+=" , message: 'should NOT be valid' "),A.opts.verbose&&(B+=" , schema: validate.schema"+D+" , parentSchema: validate.schema"+A.schemaPath+" , data: "+U+" "),B+=" } "):B+=" {} ";var ce=B;B=ne.pop(),!A.compositeRule&&L?A.async?B+=" throw new ValidationError(["+ce+"]); ":B+=" validate.errors = ["+ce+"]; return false; ":B+=" var err = "+ce+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",B+=" } else {  errors = "+V+"; if (vErrors !== null) { if ("+V+") vErrors.length = "+V+"; else vErrors = null; } ",A.opts.allErrors&&(B+=" } ")}else B+="  var err =   ",A.createErrors!==!1?(B+=" { keyword: 'not' , dataPath: (dataPath || '') + "+A.errorPath+" , schemaPath: "+A.util.toQuotedString(F)+" , params: {} ",A.opts.messages!==!1&&(B+=" , message: 'should NOT be valid' "),A.opts.verbose&&(B+=" , schema: validate.schema"+D+" , parentSchema: validate.schema"+A.schemaPath+" , data: "+U+" "),B+=" } "):B+=" {} ",B+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",L&&(B+=" if (false) { ");return B}),not}var oneOf,hasRequiredOneOf;function requireOneOf(){return hasRequiredOneOf||(hasRequiredOneOf=1,oneOf=function(A,_,I){var B=" ",T=A.level,R=A.dataLevel,P=A.schema[_],D=A.schemaPath+A.util.getProperty(_),F=A.errSchemaPath+"/"+_,L=!A.opts.allErrors,U="data"+(R||""),V="valid"+T,K="errs__"+T,J=A.util.copy(A),ee="";J.level++;var ie="valid"+J.level,ne=J.baseId,ce="prevValid"+T,fe="passingSchemas"+T;B+="var "+K+" = errors , "+ce+" = false , "+V+" = false , "+fe+" = null; ";var de=A.compositeRule;A.compositeRule=J.compositeRule=!0;var pe=P;if(pe)for(var ve,ye=-1,_e=pe.length-1;ye<_e;)ve=pe[ye+=1],(A.opts.strictKeywords?typeof ve=="object"&&Object.keys(ve).length>0||ve===!1:A.util.schemaHasRules(ve,A.RULES.all))?(J.schema=ve,J.schemaPath=D+"["+ye+"]",J.errSchemaPath=F+"/"+ye,B+="  "+A.validate(J)+" ",J.baseId=ne):B+=" var "+ie+" = true; ",ye&&(B+=" if ("+ie+" && "+ce+") { "+V+" = false; "+fe+" = ["+fe+", "+ye+"]; } else { ",ee+="}"),B+=" if ("+ie+") { "+V+" = "+ce+" = true; "+fe+" = "+ye+"; }";return A.compositeRule=J.compositeRule=de,B+=""+ee+"if (!"+V+") {   var err =   ",A.createErrors!==!1?(B+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+A.errorPath+" , schemaPath: "+A.util.toQuotedString(F)+" , params: { passingSchemas: "+fe+" } ",A.opts.messages!==!1&&(B+=" , message: 'should match exactly one schema in oneOf' "),A.opts.verbose&&(B+=" , schema: validate.schema"+D+" , parentSchema: validate.schema"+A.schemaPath+" , data: "+U+" "),B+=" } "):B+=" {} ",B+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!A.compositeRule&&L&&(A.async?B+=" throw new ValidationError(vErrors); ":B+=" validate.errors = vErrors; return false; "),B+="} else {  errors = "+K+"; if (vErrors !== null) { if ("+K+") vErrors.length = "+K+"; else vErrors = null; }",A.opts.allErrors&&(B+=" } "),B}),oneOf}var pattern,hasRequiredPattern;function requirePattern(){return hasRequiredPattern||(hasRequiredPattern=1,pattern=function(A,_,I){var B=" ",T=A.level,R=A.dataLevel,P=A.schema[_],D=A.schemaPath+A.util.getProperty(_),F=A.errSchemaPath+"/"+_,L=!A.opts.allErrors,U="data"+(R||""),V=A.opts.$data&&P&&P.$data,K;V?(B+=" var schema"+T+" = "+A.util.getData(P.$data,R,A.dataPathArr)+"; ",K="schema"+T):K=P;var J=V?"(new RegExp("+K+"))":A.usePattern(P);B+="if ( ",V&&(B+=" ("+K+" !== undefined && typeof "+K+" != 'string') || "),B+=" !"+J+".test("+U+") ) {   ";var ee=ee||[];ee.push(B),B="",A.createErrors!==!1?(B+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+A.errorPath+" , schemaPath: "+A.util.toQuotedString(F)+" , params: { pattern:  ",V?B+=""+K:B+=""+A.util.toQuotedString(P),B+="  } ",A.opts.messages!==!1&&(B+=` , message: 'should match pattern "`,V?B+="' + "+K+" + '":B+=""+A.util.escapeQuotes(P),B+=`"' `),A.opts.verbose&&(B+=" , schema:  ",V?B+="validate.schema"+D:B+=""+A.util.toQuotedString(P),B+="         , parentSchema: validate.schema"+A.schemaPath+" , data: "+U+" "),B+=" } "):B+=" {} ";var ie=B;return B=ee.pop(),!A.compositeRule&&L?A.async?B+=" throw new ValidationError(["+ie+"]); ":B+=" validate.errors = ["+ie+"]; return false; ":B+=" var err = "+ie+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",B+="} ",L&&(B+=" else { "),B}),pattern}var properties$l,hasRequiredProperties;function requireProperties(){return hasRequiredProperties||(hasRequiredProperties=1,properties$l=function(A,_,I){var B=" ",T=A.level,R=A.dataLevel,P=A.schema[_],D=A.schemaPath+A.util.getProperty(_),F=A.errSchemaPath+"/"+_,L=!A.opts.allErrors,U="data"+(R||""),V="errs__"+T,K=A.util.copy(A),J="";K.level++;var ee="valid"+K.level,ie="key"+T,ne="idx"+T,ce=K.dataLevel=A.dataLevel+1,fe="data"+ce,de="dataProperties"+T,pe=Object.keys(P||{}).filter(he),ve=A.schema.patternProperties||{},ye=Object.keys(ve).filter(he),_e=A.schema.additionalProperties,be=pe.length||ye.length,Te=_e===!1,ue=typeof _e=="object"&&Object.keys(_e).length,O=A.opts.removeAdditional,z=Te||ue||O,Y=A.opts.ownProperties,te=A.baseId,oe=A.schema.required;if(oe&&!(A.opts.$data&&oe.$data)&&oe.length<A.opts.loopRequired)var le=A.util.toHash(oe);function he(Nt){return Nt!=="__proto__"}if(B+="var "+V+" = errors;var "+ee+" = true;",Y&&(B+=" var "+de+" = undefined;"),z){if(Y?B+=" "+de+" = "+de+" || Object.keys("+U+"); for (var "+ne+"=0; "+ne+"<"+de+".length; "+ne+"++) { var "+ie+" = "+de+"["+ne+"]; ":B+=" for (var "+ie+" in "+U+") { ",be){if(B+=" var isAdditional"+T+" = !(false ",pe.length)if(pe.length>8)B+=" || validate.schema"+D+".hasOwnProperty("+ie+") ";else{var ae=pe;if(ae)for(var Q,se=-1,Ae=ae.length-1;se<Ae;)Q=ae[se+=1],B+=" || "+ie+" == "+A.util.toQuotedString(Q)+" "}if(ye.length){var ge=ye;if(ge)for(var Ee,ke=-1,Se=ge.length-1;ke<Se;)Ee=ge[ke+=1],B+=" || "+A.usePattern(Ee)+".test("+ie+") "}B+=" ); if (isAdditional"+T+") { "}if(O=="all")B+=" delete "+U+"["+ie+"]; ";else{var Ie=A.errorPath,we="' + "+ie+" + '";if(A.opts._errorDataPathProperty&&(A.errorPath=A.util.getPathExpr(A.errorPath,ie,A.opts.jsonPointers)),Te)if(O)B+=" delete "+U+"["+ie+"]; ";else{B+=" "+ee+" = false; ";var xe=F;F=A.errSchemaPath+"/additionalProperties";var Fe=Fe||[];Fe.push(B),B="",A.createErrors!==!1?(B+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+A.errorPath+" , schemaPath: "+A.util.toQuotedString(F)+" , params: { additionalProperty: '"+we+"' } ",A.opts.messages!==!1&&(B+=" , message: '",A.opts._errorDataPathProperty?B+="is an invalid additional property":B+="should NOT have additional properties",B+="' "),A.opts.verbose&&(B+=" , schema: false , parentSchema: validate.schema"+A.schemaPath+" , data: "+U+" "),B+=" } "):B+=" {} ";var Ge=B;B=Fe.pop(),!A.compositeRule&&L?A.async?B+=" throw new ValidationError(["+Ge+"]); ":B+=" validate.errors = ["+Ge+"]; return false; ":B+=" var err = "+Ge+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",F=xe,L&&(B+=" break; ")}else if(ue)if(O=="failing"){B+=" var "+V+" = errors;  ";var Oe=A.compositeRule;A.compositeRule=K.compositeRule=!0,K.schema=_e,K.schemaPath=A.schemaPath+".additionalProperties",K.errSchemaPath=A.errSchemaPath+"/additionalProperties",K.errorPath=A.opts._errorDataPathProperty?A.errorPath:A.util.getPathExpr(A.errorPath,ie,A.opts.jsonPointers);var et=U+"["+ie+"]";K.dataPathArr[ce]=ie;var Mt=A.validate(K);K.baseId=te,A.util.varOccurences(Mt,fe)<2?B+=" "+A.util.varReplace(Mt,fe,et)+" ":B+=" var "+fe+" = "+et+"; "+Mt+" ",B+=" if (!"+ee+") { errors = "+V+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+U+"["+ie+"]; }  ",A.compositeRule=K.compositeRule=Oe}else{K.schema=_e,K.schemaPath=A.schemaPath+".additionalProperties",K.errSchemaPath=A.errSchemaPath+"/additionalProperties",K.errorPath=A.opts._errorDataPathProperty?A.errorPath:A.util.getPathExpr(A.errorPath,ie,A.opts.jsonPointers);var et=U+"["+ie+"]";K.dataPathArr[ce]=ie;var Mt=A.validate(K);K.baseId=te,A.util.varOccurences(Mt,fe)<2?B+=" "+A.util.varReplace(Mt,fe,et)+" ":B+=" var "+fe+" = "+et+"; "+Mt+" ",L&&(B+=" if (!"+ee+") break; ")}A.errorPath=Ie}be&&(B+=" } "),B+=" }  ",L&&(B+=" if ("+ee+") { ",J+="}")}var dt=A.opts.useDefaults&&!A.compositeRule;if(pe.length){var mt=pe;if(mt)for(var Q,Ut=-1,St=mt.length-1;Ut<St;){Q=mt[Ut+=1];var vt=P[Q];if(A.opts.strictKeywords?typeof vt=="object"&&Object.keys(vt).length>0||vt===!1:A.util.schemaHasRules(vt,A.RULES.all)){var It=A.util.getProperty(Q),et=U+It,yt=dt&&vt.default!==void 0;K.schema=vt,K.schemaPath=D+It,K.errSchemaPath=F+"/"+A.util.escapeFragment(Q),K.errorPath=A.util.getPath(A.errorPath,Q,A.opts.jsonPointers),K.dataPathArr[ce]=A.util.toQuotedString(Q);var Mt=A.validate(K);if(K.baseId=te,A.util.varOccurences(Mt,fe)<2){Mt=A.util.varReplace(Mt,fe,et);var Tt=et}else{var Tt=fe;B+=" var "+fe+" = "+et+"; "}if(yt)B+=" "+Mt+" ";else{if(le&&le[Q]){B+=" if ( "+Tt+" === undefined ",Y&&(B+=" || ! Object.prototype.hasOwnProperty.call("+U+", '"+A.util.escapeQuotes(Q)+"') "),B+=") { "+ee+" = false; ";var Ie=A.errorPath,xe=F,Wt=A.util.escapeQuotes(Q);A.opts._errorDataPathProperty&&(A.errorPath=A.util.getPath(Ie,Q,A.opts.jsonPointers)),F=A.errSchemaPath+"/required";var Fe=Fe||[];Fe.push(B),B="",A.createErrors!==!1?(B+=" { keyword: 'required' , dataPath: (dataPath || '') + "+A.errorPath+" , schemaPath: "+A.util.toQuotedString(F)+" , params: { missingProperty: '"+Wt+"' } ",A.opts.messages!==!1&&(B+=" , message: '",A.opts._errorDataPathProperty?B+="is a required property":B+="should have required property \\'"+Wt+"\\'",B+="' "),A.opts.verbose&&(B+=" , schema: validate.schema"+D+" , parentSchema: validate.schema"+A.schemaPath+" , data: "+U+" "),B+=" } "):B+=" {} ";var Ge=B;B=Fe.pop(),!A.compositeRule&&L?A.async?B+=" throw new ValidationError(["+Ge+"]); ":B+=" validate.errors = ["+Ge+"]; return false; ":B+=" var err = "+Ge+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",F=xe,A.errorPath=Ie,B+=" } else { "}else L?(B+=" if ( "+Tt+" === undefined ",Y&&(B+=" || ! Object.prototype.hasOwnProperty.call("+U+", '"+A.util.escapeQuotes(Q)+"') "),B+=") { "+ee+" = true; } else { "):(B+=" if ("+Tt+" !== undefined ",Y&&(B+=" &&   Object.prototype.hasOwnProperty.call("+U+", '"+A.util.escapeQuotes(Q)+"') "),B+=" ) { ");B+=" "+Mt+" } "}}L&&(B+=" if ("+ee+") { ",J+="}")}}if(ye.length){var ft=ye;if(ft)for(var Ee,_t=-1,Xt=ft.length-1;_t<Xt;){Ee=ft[_t+=1];var vt=ve[Ee];if(A.opts.strictKeywords?typeof vt=="object"&&Object.keys(vt).length>0||vt===!1:A.util.schemaHasRules(vt,A.RULES.all)){K.schema=vt,K.schemaPath=A.schemaPath+".patternProperties"+A.util.getProperty(Ee),K.errSchemaPath=A.errSchemaPath+"/patternProperties/"+A.util.escapeFragment(Ee),Y?B+=" "+de+" = "+de+" || Object.keys("+U+"); for (var "+ne+"=0; "+ne+"<"+de+".length; "+ne+"++) { var "+ie+" = "+de+"["+ne+"]; ":B+=" for (var "+ie+" in "+U+") { ",B+=" if ("+A.usePattern(Ee)+".test("+ie+")) { ",K.errorPath=A.util.getPathExpr(A.errorPath,ie,A.opts.jsonPointers);var et=U+"["+ie+"]";K.dataPathArr[ce]=ie;var Mt=A.validate(K);K.baseId=te,A.util.varOccurences(Mt,fe)<2?B+=" "+A.util.varReplace(Mt,fe,et)+" ":B+=" var "+fe+" = "+et+"; "+Mt+" ",L&&(B+=" if (!"+ee+") break; "),B+=" } ",L&&(B+=" else "+ee+" = true; "),B+=" }  ",L&&(B+=" if ("+ee+") { ",J+="}")}}}return L&&(B+=" "+J+" if ("+V+" == errors) {"),B}),properties$l}var propertyNames,hasRequiredPropertyNames;function requirePropertyNames(){return hasRequiredPropertyNames||(hasRequiredPropertyNames=1,propertyNames=function(A,_,I){var B=" ",T=A.level,R=A.dataLevel,P=A.schema[_],D=A.schemaPath+A.util.getProperty(_),F=A.errSchemaPath+"/"+_,L=!A.opts.allErrors,U="data"+(R||""),V="errs__"+T,K=A.util.copy(A),J="";K.level++;var ee="valid"+K.level;if(B+="var "+V+" = errors;",A.opts.strictKeywords?typeof P=="object"&&Object.keys(P).length>0||P===!1:A.util.schemaHasRules(P,A.RULES.all)){K.schema=P,K.schemaPath=D,K.errSchemaPath=F;var ie="key"+T,ne="idx"+T,ce="i"+T,fe="' + "+ie+" + '",de=K.dataLevel=A.dataLevel+1,pe="data"+de,ve="dataProperties"+T,ye=A.opts.ownProperties,_e=A.baseId;ye&&(B+=" var "+ve+" = undefined; "),ye?B+=" "+ve+" = "+ve+" || Object.keys("+U+"); for (var "+ne+"=0; "+ne+"<"+ve+".length; "+ne+"++) { var "+ie+" = "+ve+"["+ne+"]; ":B+=" for (var "+ie+" in "+U+") { ",B+=" var startErrs"+T+" = errors; ";var be=ie,Te=A.compositeRule;A.compositeRule=K.compositeRule=!0;var ue=A.validate(K);K.baseId=_e,A.util.varOccurences(ue,pe)<2?B+=" "+A.util.varReplace(ue,pe,be)+" ":B+=" var "+pe+" = "+be+"; "+ue+" ",A.compositeRule=K.compositeRule=Te,B+=" if (!"+ee+") { for (var "+ce+"=startErrs"+T+"; "+ce+"<errors; "+ce+"++) { vErrors["+ce+"].propertyName = "+ie+"; }   var err =   ",A.createErrors!==!1?(B+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+A.errorPath+" , schemaPath: "+A.util.toQuotedString(F)+" , params: { propertyName: '"+fe+"' } ",A.opts.messages!==!1&&(B+=" , message: 'property name \\'"+fe+"\\' is invalid' "),A.opts.verbose&&(B+=" , schema: validate.schema"+D+" , parentSchema: validate.schema"+A.schemaPath+" , data: "+U+" "),B+=" } "):B+=" {} ",B+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!A.compositeRule&&L&&(A.async?B+=" throw new ValidationError(vErrors); ":B+=" validate.errors = vErrors; return false; "),L&&(B+=" break; "),B+=" } }"}return L&&(B+=" "+J+" if ("+V+" == errors) {"),B}),propertyNames}var required$h,hasRequiredRequired;function requireRequired(){return hasRequiredRequired||(hasRequiredRequired=1,required$h=function(A,_,I){var B=" ",T=A.level,R=A.dataLevel,P=A.schema[_],D=A.schemaPath+A.util.getProperty(_),F=A.errSchemaPath+"/"+_,L=!A.opts.allErrors,U="data"+(R||""),V="valid"+T,K=A.opts.$data&&P&&P.$data;K&&(B+=" var schema"+T+" = "+A.util.getData(P.$data,R,A.dataPathArr)+"; ");var J="schema"+T;if(!K)if(P.length<A.opts.loopRequired&&A.schema.properties&&Object.keys(A.schema.properties).length){var ee=[],ie=P;if(ie)for(var ne,ce=-1,fe=ie.length-1;ce<fe;){ne=ie[ce+=1];var de=A.schema.properties[ne];de&&(A.opts.strictKeywords?typeof de=="object"&&Object.keys(de).length>0||de===!1:A.util.schemaHasRules(de,A.RULES.all))||(ee[ee.length]=ne)}}else var ee=P;if(K||ee.length){var pe=A.errorPath,ve=K||ee.length>=A.opts.loopRequired,ye=A.opts.ownProperties;if(L)if(B+=" var missing"+T+"; ",ve){K||(B+=" var "+J+" = validate.schema"+D+"; ");var _e="i"+T,be="schema"+T+"["+_e+"]",Te="' + "+be+" + '";A.opts._errorDataPathProperty&&(A.errorPath=A.util.getPathExpr(pe,be,A.opts.jsonPointers)),B+=" var "+V+" = true; ",K&&(B+=" if (schema"+T+" === undefined) "+V+" = true; else if (!Array.isArray(schema"+T+")) "+V+" = false; else {"),B+=" for (var "+_e+" = 0; "+_e+" < "+J+".length; "+_e+"++) { "+V+" = "+U+"["+J+"["+_e+"]] !== undefined ",ye&&(B+=" &&   Object.prototype.hasOwnProperty.call("+U+", "+J+"["+_e+"]) "),B+="; if (!"+V+") break; } ",K&&(B+="  }  "),B+="  if (!"+V+") {   ";var ue=ue||[];ue.push(B),B="",A.createErrors!==!1?(B+=" { keyword: 'required' , dataPath: (dataPath || '') + "+A.errorPath+" , schemaPath: "+A.util.toQuotedString(F)+" , params: { missingProperty: '"+Te+"' } ",A.opts.messages!==!1&&(B+=" , message: '",A.opts._errorDataPathProperty?B+="is a required property":B+="should have required property \\'"+Te+"\\'",B+="' "),A.opts.verbose&&(B+=" , schema: validate.schema"+D+" , parentSchema: validate.schema"+A.schemaPath+" , data: "+U+" "),B+=" } "):B+=" {} ";var O=B;B=ue.pop(),!A.compositeRule&&L?A.async?B+=" throw new ValidationError(["+O+"]); ":B+=" validate.errors = ["+O+"]; return false; ":B+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",B+=" } else { "}else{B+=" if ( ";var z=ee;if(z)for(var Y,_e=-1,te=z.length-1;_e<te;){Y=z[_e+=1],_e&&(B+=" || ");var oe=A.util.getProperty(Y),le=U+oe;B+=" ( ( "+le+" === undefined ",ye&&(B+=" || ! Object.prototype.hasOwnProperty.call("+U+", '"+A.util.escapeQuotes(Y)+"') "),B+=") && (missing"+T+" = "+A.util.toQuotedString(A.opts.jsonPointers?Y:oe)+") ) "}B+=") {  ";var be="missing"+T,Te="' + "+be+" + '";A.opts._errorDataPathProperty&&(A.errorPath=A.opts.jsonPointers?A.util.getPathExpr(pe,be,!0):pe+" + "+be);var ue=ue||[];ue.push(B),B="",A.createErrors!==!1?(B+=" { keyword: 'required' , dataPath: (dataPath || '') + "+A.errorPath+" , schemaPath: "+A.util.toQuotedString(F)+" , params: { missingProperty: '"+Te+"' } ",A.opts.messages!==!1&&(B+=" , message: '",A.opts._errorDataPathProperty?B+="is a required property":B+="should have required property \\'"+Te+"\\'",B+="' "),A.opts.verbose&&(B+=" , schema: validate.schema"+D+" , parentSchema: validate.schema"+A.schemaPath+" , data: "+U+" "),B+=" } "):B+=" {} ";var O=B;B=ue.pop(),!A.compositeRule&&L?A.async?B+=" throw new ValidationError(["+O+"]); ":B+=" validate.errors = ["+O+"]; return false; ":B+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",B+=" } else { "}else if(ve){K||(B+=" var "+J+" = validate.schema"+D+"; ");var _e="i"+T,be="schema"+T+"["+_e+"]",Te="' + "+be+" + '";A.opts._errorDataPathProperty&&(A.errorPath=A.util.getPathExpr(pe,be,A.opts.jsonPointers)),K&&(B+=" if ("+J+" && !Array.isArray("+J+")) {  var err =   ",A.createErrors!==!1?(B+=" { keyword: 'required' , dataPath: (dataPath || '') + "+A.errorPath+" , schemaPath: "+A.util.toQuotedString(F)+" , params: { missingProperty: '"+Te+"' } ",A.opts.messages!==!1&&(B+=" , message: '",A.opts._errorDataPathProperty?B+="is a required property":B+="should have required property \\'"+Te+"\\'",B+="' "),A.opts.verbose&&(B+=" , schema: validate.schema"+D+" , parentSchema: validate.schema"+A.schemaPath+" , data: "+U+" "),B+=" } "):B+=" {} ",B+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+J+" !== undefined) { "),B+=" for (var "+_e+" = 0; "+_e+" < "+J+".length; "+_e+"++) { if ("+U+"["+J+"["+_e+"]] === undefined ",ye&&(B+=" || ! Object.prototype.hasOwnProperty.call("+U+", "+J+"["+_e+"]) "),B+=") {  var err =   ",A.createErrors!==!1?(B+=" { keyword: 'required' , dataPath: (dataPath || '') + "+A.errorPath+" , schemaPath: "+A.util.toQuotedString(F)+" , params: { missingProperty: '"+Te+"' } ",A.opts.messages!==!1&&(B+=" , message: '",A.opts._errorDataPathProperty?B+="is a required property":B+="should have required property \\'"+Te+"\\'",B+="' "),A.opts.verbose&&(B+=" , schema: validate.schema"+D+" , parentSchema: validate.schema"+A.schemaPath+" , data: "+U+" "),B+=" } "):B+=" {} ",B+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",K&&(B+="  }  ")}else{var he=ee;if(he)for(var Y,ae=-1,Q=he.length-1;ae<Q;){Y=he[ae+=1];var oe=A.util.getProperty(Y),Te=A.util.escapeQuotes(Y),le=U+oe;A.opts._errorDataPathProperty&&(A.errorPath=A.util.getPath(pe,Y,A.opts.jsonPointers)),B+=" if ( "+le+" === undefined ",ye&&(B+=" || ! Object.prototype.hasOwnProperty.call("+U+", '"+A.util.escapeQuotes(Y)+"') "),B+=") {  var err =   ",A.createErrors!==!1?(B+=" { keyword: 'required' , dataPath: (dataPath || '') + "+A.errorPath+" , schemaPath: "+A.util.toQuotedString(F)+" , params: { missingProperty: '"+Te+"' } ",A.opts.messages!==!1&&(B+=" , message: '",A.opts._errorDataPathProperty?B+="is a required property":B+="should have required property \\'"+Te+"\\'",B+="' "),A.opts.verbose&&(B+=" , schema: validate.schema"+D+" , parentSchema: validate.schema"+A.schemaPath+" , data: "+U+" "),B+=" } "):B+=" {} ",B+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}A.errorPath=pe}else L&&(B+=" if (true) {");return B}),required$h}var uniqueItems,hasRequiredUniqueItems;function requireUniqueItems(){return hasRequiredUniqueItems||(hasRequiredUniqueItems=1,uniqueItems=function(A,_,I){var B=" ",T=A.level,R=A.dataLevel,P=A.schema[_],D=A.schemaPath+A.util.getProperty(_),F=A.errSchemaPath+"/"+_,L=!A.opts.allErrors,U="data"+(R||""),V="valid"+T,K=A.opts.$data&&P&&P.$data,J;if(K?(B+=" var schema"+T+" = "+A.util.getData(P.$data,R,A.dataPathArr)+"; ",J="schema"+T):J=P,(P||K)&&A.opts.uniqueItems!==!1){K&&(B+=" var "+V+"; if ("+J+" === false || "+J+" === undefined) "+V+" = true; else if (typeof "+J+" != 'boolean') "+V+" = false; else { "),B+=" var i = "+U+".length , "+V+" = true , j; if (i > 1) { ";var ee=A.schema.items&&A.schema.items.type,ie=Array.isArray(ee);if(!ee||ee=="object"||ee=="array"||ie&&(ee.indexOf("object")>=0||ee.indexOf("array")>=0))B+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+U+"[i], "+U+"[j])) { "+V+" = false; break outer; } } } ";else{B+=" var itemIndices = {}, item; for (;i--;) { var item = "+U+"[i]; ";var ne="checkDataType"+(ie?"s":"");B+=" if ("+A.util[ne](ee,"item",A.opts.strictNumbers,!0)+") continue; ",ie&&(B+=` if (typeof item == 'string') item = '"' + item; `),B+=" if (typeof itemIndices[item] == 'number') { "+V+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}B+=" } ",K&&(B+="  }  "),B+=" if (!"+V+") {   ";var ce=ce||[];ce.push(B),B="",A.createErrors!==!1?(B+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+A.errorPath+" , schemaPath: "+A.util.toQuotedString(F)+" , params: { i: i, j: j } ",A.opts.messages!==!1&&(B+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),A.opts.verbose&&(B+=" , schema:  ",K?B+="validate.schema"+D:B+=""+P,B+="         , parentSchema: validate.schema"+A.schemaPath+" , data: "+U+" "),B+=" } "):B+=" {} ";var fe=B;B=ce.pop(),!A.compositeRule&&L?A.async?B+=" throw new ValidationError(["+fe+"]); ":B+=" validate.errors = ["+fe+"]; return false; ":B+=" var err = "+fe+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",B+=" } ",L&&(B+=" else { ")}else L&&(B+=" if (true) { ");return B}),uniqueItems}var dotjs,hasRequiredDotjs;function requireDotjs(){return hasRequiredDotjs||(hasRequiredDotjs=1,dotjs={$ref:requireRef(),allOf:requireAllOf(),anyOf:requireAnyOf(),$comment:requireComment(),const:require_const(),contains:requireContains(),dependencies:requireDependencies(),enum:require_enum(),format:requireFormat(),if:require_if(),items:requireItems(),maximum:require_limit(),minimum:require_limit(),maxItems:require_limitItems(),minItems:require_limitItems(),maxLength:require_limitLength(),minLength:require_limitLength(),maxProperties:require_limitProperties(),minProperties:require_limitProperties(),multipleOf:requireMultipleOf(),not:requireNot(),oneOf:requireOneOf(),pattern:requirePattern(),properties:requireProperties(),propertyNames:requirePropertyNames(),required:requireRequired(),uniqueItems:requireUniqueItems(),validate:requireValidate()}),dotjs}var rules,hasRequiredRules;function requireRules(){if(hasRequiredRules)return rules;hasRequiredRules=1;var E=requireDotjs(),A=requireUtil().toHash;return rules=function(){var I=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],B=["type","$comment"],T=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],R=["number","integer","string","array","object","boolean","null"];return I.all=A(B),I.types=A(R),I.forEach(function(P){P.rules=P.rules.map(function(D){var F;if(typeof D=="object"){var L=Object.keys(D)[0];F=D[L],D=L,F.forEach(function(V){B.push(V),I.all[V]=!0})}B.push(D);var U=I.all[D]={keyword:D,code:E[D],implements:F};return U}),I.all.$comment={keyword:"$comment",code:E.$comment},P.type&&(I.types[P.type]=P)}),I.keywords=A(B.concat(T)),I.custom={},I},rules}var data,hasRequiredData;function requireData(){if(hasRequiredData)return data;hasRequiredData=1;var E=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];return data=function(A,_){for(var I=0;I<_.length;I++){A=JSON.parse(JSON.stringify(A));var B=_[I].split("/"),T=A,R;for(R=1;R<B.length;R++)T=T[B[R]];for(R=0;R<E.length;R++){var P=E[R],D=T[P];D&&(T[P]={anyOf:[D,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return A},data}var async,hasRequiredAsync;function requireAsync(){if(hasRequiredAsync)return async;hasRequiredAsync=1;var E=requireError_classes().MissingRef;async=A;function A(_,I,B){var T=this;if(typeof this._opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");typeof I=="function"&&(B=I,I=void 0);var R=P(_).then(function(){var F=T._addSchema(_,void 0,I);return F.validate||D(F)});return B&&R.then(function(F){B(null,F)},B),R;function P(F){var L=F.$schema;return L&&!T.getSchema(L)?A.call(T,{$ref:L},!0):Promise.resolve()}function D(F){try{return T._compile(F)}catch(U){if(U instanceof E)return L(U);throw U}function L(U){var V=U.missingSchema;if(ee(V))throw new Error("Schema "+V+" is loaded but "+U.missingRef+" cannot be resolved");var K=T._loadingSchemas[V];return K||(K=T._loadingSchemas[V]=T._opts.loadSchema(V),K.then(J,J)),K.then(function(ie){if(!ee(V))return P(ie).then(function(){ee(V)||T.addSchema(ie,V,void 0,I)})}).then(function(){return D(F)});function J(){delete T._loadingSchemas[V]}function ee(ie){return T._refs[ie]||T._schemas[ie]}}}}return async}var custom,hasRequiredCustom;function requireCustom(){return hasRequiredCustom||(hasRequiredCustom=1,custom=function(A,_,I){var B=" ",T=A.level,R=A.dataLevel,P=A.schema[_],D=A.schemaPath+A.util.getProperty(_),F=A.errSchemaPath+"/"+_,L=!A.opts.allErrors,U,V="data"+(R||""),K="valid"+T,J="errs__"+T,ee=A.opts.$data&&P&&P.$data,ie;ee?(B+=" var schema"+T+" = "+A.util.getData(P.$data,R,A.dataPathArr)+"; ",ie="schema"+T):ie=P;var ne=this,ce="definition"+T,fe=ne.definition,de="",pe,ve,ye,_e,be;if(ee&&fe.$data){be="keywordValidate"+T;var Te=fe.validateSchema;B+=" var "+ce+" = RULES.custom['"+_+"'].definition; var "+be+" = "+ce+".validate;"}else{if(_e=A.useCustomRule(ne,P,A.schema,A),!_e)return;ie="validate.schema"+D,be=_e.code,pe=fe.compile,ve=fe.inline,ye=fe.macro}var ue=be+".errors",O="i"+T,z="ruleErr"+T,Y=fe.async;if(Y&&!A.async)throw new Error("async keyword in sync schema");if(ve||ye||(B+=""+ue+" = null;"),B+="var "+J+" = errors;var "+K+";",ee&&fe.$data&&(de+="}",B+=" if ("+ie+" === undefined) { "+K+" = true; } else { ",Te&&(de+="}",B+=" "+K+" = "+ce+".validateSchema("+ie+"); if ("+K+") { ")),ve)fe.statements?B+=" "+_e.validate+" ":B+=" "+K+" = "+_e.validate+"; ";else if(ye){var te=A.util.copy(A),de="";te.level++;var oe="valid"+te.level;te.schema=_e.validate,te.schemaPath="";var le=A.compositeRule;A.compositeRule=te.compositeRule=!0;var he=A.validate(te).replace(/validate\.schema/g,be);A.compositeRule=te.compositeRule=le,B+=" "+he}else{var ae=ae||[];ae.push(B),B="",B+="  "+be+".call( ",A.opts.passContext?B+="this":B+="self",pe||fe.schema===!1?B+=" , "+V+" ":B+=" , "+ie+" , "+V+" , validate.schema"+A.schemaPath+" ",B+=" , (dataPath || '')",A.errorPath!='""'&&(B+=" + "+A.errorPath);var Q=R?"data"+(R-1||""):"parentData",se=R?A.dataPathArr[R]:"parentDataProperty";B+=" , "+Q+" , "+se+" , rootData )  ";var Ae=B;B=ae.pop(),fe.errors===!1?(B+=" "+K+" = ",Y&&(B+="await "),B+=""+Ae+"; "):Y?(ue="customErrors"+T,B+=" var "+ue+" = null; try { "+K+" = await "+Ae+"; } catch (e) { "+K+" = false; if (e instanceof ValidationError) "+ue+" = e.errors; else throw e; } "):B+=" "+ue+" = null; "+K+" = "+Ae+"; "}if(fe.modifying&&(B+=" if ("+Q+") "+V+" = "+Q+"["+se+"];"),B+=""+de,fe.valid)L&&(B+=" if (true) { ");else{B+=" if ( ",fe.valid===void 0?(B+=" !",ye?B+=""+oe:B+=""+K):B+=" "+!fe.valid+" ",B+=") { ",U=ne.keyword;var ae=ae||[];ae.push(B),B="";var ae=ae||[];ae.push(B),B="",A.createErrors!==!1?(B+=" { keyword: '"+(U||"custom")+"' , dataPath: (dataPath || '') + "+A.errorPath+" , schemaPath: "+A.util.toQuotedString(F)+" , params: { keyword: '"+ne.keyword+"' } ",A.opts.messages!==!1&&(B+=` , message: 'should pass "`+ne.keyword+`" keyword validation' `),A.opts.verbose&&(B+=" , schema: validate.schema"+D+" , parentSchema: validate.schema"+A.schemaPath+" , data: "+V+" "),B+=" } "):B+=" {} ";var ge=B;B=ae.pop(),!A.compositeRule&&L?A.async?B+=" throw new ValidationError(["+ge+"]); ":B+=" validate.errors = ["+ge+"]; return false; ":B+=" var err = "+ge+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var Ee=B;B=ae.pop(),ve?fe.errors?fe.errors!="full"&&(B+="  for (var "+O+"="+J+"; "+O+"<errors; "+O+"++) { var "+z+" = vErrors["+O+"]; if ("+z+".dataPath === undefined) "+z+".dataPath = (dataPath || '') + "+A.errorPath+"; if ("+z+".schemaPath === undefined) { "+z+'.schemaPath = "'+F+'"; } ',A.opts.verbose&&(B+=" "+z+".schema = "+ie+"; "+z+".data = "+V+"; "),B+=" } "):fe.errors===!1?B+=" "+Ee+" ":(B+=" if ("+J+" == errors) { "+Ee+" } else {  for (var "+O+"="+J+"; "+O+"<errors; "+O+"++) { var "+z+" = vErrors["+O+"]; if ("+z+".dataPath === undefined) "+z+".dataPath = (dataPath || '') + "+A.errorPath+"; if ("+z+".schemaPath === undefined) { "+z+'.schemaPath = "'+F+'"; } ',A.opts.verbose&&(B+=" "+z+".schema = "+ie+"; "+z+".data = "+V+"; "),B+=" } } "):ye?(B+="   var err =   ",A.createErrors!==!1?(B+=" { keyword: '"+(U||"custom")+"' , dataPath: (dataPath || '') + "+A.errorPath+" , schemaPath: "+A.util.toQuotedString(F)+" , params: { keyword: '"+ne.keyword+"' } ",A.opts.messages!==!1&&(B+=` , message: 'should pass "`+ne.keyword+`" keyword validation' `),A.opts.verbose&&(B+=" , schema: validate.schema"+D+" , parentSchema: validate.schema"+A.schemaPath+" , data: "+V+" "),B+=" } "):B+=" {} ",B+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!A.compositeRule&&L&&(A.async?B+=" throw new ValidationError(vErrors); ":B+=" validate.errors = vErrors; return false; ")):fe.errors===!1?B+=" "+Ee+" ":(B+=" if (Array.isArray("+ue+")) { if (vErrors === null) vErrors = "+ue+"; else vErrors = vErrors.concat("+ue+"); errors = vErrors.length;  for (var "+O+"="+J+"; "+O+"<errors; "+O+"++) { var "+z+" = vErrors["+O+"]; if ("+z+".dataPath === undefined) "+z+".dataPath = (dataPath || '') + "+A.errorPath+";  "+z+'.schemaPath = "'+F+'";  ',A.opts.verbose&&(B+=" "+z+".schema = "+ie+"; "+z+".data = "+V+"; "),B+=" } } else { "+Ee+" } "),B+=" } ",L&&(B+=" else { ")}return B}),custom}const $schema$k="http://json-schema.org/draft-07/schema#",$id$k="http://json-schema.org/draft-07/schema#",title$1="Core schema meta-schema",definitions$1={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type$i=["object","boolean"],properties$k={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},require$$13$1={$schema:$schema$k,$id:$id$k,title:title$1,definitions:definitions$1,type:type$i,properties:properties$k,default:!0};var definition_schema,hasRequiredDefinition_schema;function requireDefinition_schema(){if(hasRequiredDefinition_schema)return definition_schema;hasRequiredDefinition_schema=1;var E=require$$13$1;return definition_schema={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:E.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:E.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}},definition_schema}var keyword,hasRequiredKeyword;function requireKeyword(){if(hasRequiredKeyword)return keyword;hasRequiredKeyword=1;var E=/^[a-z_$][a-z0-9_$-]*$/i,A=requireCustom(),_=requireDefinition_schema();keyword={add:I,get:B,remove:T,validate:R};function I(P,D){var F=this.RULES;if(F.keywords[P])throw new Error("Keyword "+P+" is already defined");if(!E.test(P))throw new Error("Keyword "+P+" is not a valid identifier");if(D){this.validateKeyword(D,!0);var L=D.type;if(Array.isArray(L))for(var U=0;U<L.length;U++)K(P,L[U],D);else K(P,L,D);var V=D.metaSchema;V&&(D.$data&&this._opts.$data&&(V={anyOf:[V,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),D.validateSchema=this.compile(V,!0))}F.keywords[P]=F.all[P]=!0;function K(J,ee,ie){for(var ne,ce=0;ce<F.length;ce++){var fe=F[ce];if(fe.type==ee){ne=fe;break}}ne||(ne={type:ee,rules:[]},F.push(ne));var de={keyword:J,definition:ie,custom:!0,code:A,implements:ie.implements};ne.rules.push(de),F.custom[J]=de}return this}function B(P){var D=this.RULES.custom[P];return D?D.definition:this.RULES.keywords[P]||!1}function T(P){var D=this.RULES;delete D.keywords[P],delete D.all[P],delete D.custom[P];for(var F=0;F<D.length;F++)for(var L=D[F].rules,U=0;U<L.length;U++)if(L[U].keyword==P){L.splice(U,1);break}return this}function R(P,D){R.errors=null;var F=this._validateKeyword=this._validateKeyword||this.compile(_,!0);if(F(P))return!0;if(R.errors=F.errors,D)throw new Error("custom keyword definition is invalid: "+this.errorsText(F.errors));return!1}return keyword}const $schema$j="http://json-schema.org/draft-07/schema#",$id$j="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description="Meta-schema for $data reference (JSON Schema extension proposal)",type$h="object",required$g=["$data"],properties$j={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties=!1,require$$12$1={$schema:$schema$j,$id:$id$j,description,type:type$h,required:required$g,properties:properties$j,additionalProperties};var ajv,hasRequiredAjv;function requireAjv(){if(hasRequiredAjv)return ajv;hasRequiredAjv=1;var E=requireCompile(),A=requireResolve(),_=requireCache(),I=requireSchema_obj(),B=requireFastJsonStableStringify(),T=requireFormats(),R=requireRules(),P=requireData(),D=requireUtil();ajv=J,J.prototype.validate=ee,J.prototype.compile=ie,J.prototype.addSchema=ne,J.prototype.addMetaSchema=ce,J.prototype.validateSchema=fe,J.prototype.getSchema=pe,J.prototype.removeSchema=_e,J.prototype.addFormat=le,J.prototype.errorsText=oe,J.prototype._addSchema=Te,J.prototype._compile=ue,J.prototype.compileAsync=requireAsync();var F=requireKeyword();J.prototype.addKeyword=F.add,J.prototype.getKeyword=F.get,J.prototype.removeKeyword=F.remove,J.prototype.validateKeyword=F.validate;var L=requireError_classes();J.ValidationError=L.Validation,J.MissingRefError=L.MissingRef,J.$dataMetaSchema=P;var U="http://json-schema.org/draft-07/schema",V=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],K=["/properties"];function J(Se){if(!(this instanceof J))return new J(Se);Se=this._opts=D.copy(Se)||{},Ee(this),this._schemas={},this._refs={},this._fragments={},this._formats=T(Se.format),this._cache=Se.cache||new _,this._loadingSchemas={},this._compilations=[],this.RULES=R(),this._getId=O(Se),Se.loopRequired=Se.loopRequired||1/0,Se.errorDataPath=="property"&&(Se._errorDataPathProperty=!0),Se.serialize===void 0&&(Se.serialize=B),this._metaOpts=ge(this),Se.formats&&Q(this),Se.keywords&&se(this),he(this),typeof Se.meta=="object"&&this.addMetaSchema(Se.meta),Se.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),ae(this)}function ee(Se,Ie){var we;if(typeof Se=="string"){if(we=this.getSchema(Se),!we)throw new Error('no schema with key or ref "'+Se+'"')}else{var xe=this._addSchema(Se);we=xe.validate||this._compile(xe)}var Fe=we(Ie);return we.$async!==!0&&(this.errors=we.errors),Fe}function ie(Se,Ie){var we=this._addSchema(Se,void 0,Ie);return we.validate||this._compile(we)}function ne(Se,Ie,we,xe){if(Array.isArray(Se)){for(var Fe=0;Fe<Se.length;Fe++)this.addSchema(Se[Fe],void 0,we,xe);return this}var Ge=this._getId(Se);if(Ge!==void 0&&typeof Ge!="string")throw new Error("schema id must be string");return Ie=A.normalizeId(Ie||Ge),Ae(this,Ie),this._schemas[Ie]=this._addSchema(Se,we,xe,!0),this}function ce(Se,Ie,we){return this.addSchema(Se,Ie,we,!0),this}function fe(Se,Ie){var we=Se.$schema;if(we!==void 0&&typeof we!="string")throw new Error("$schema must be a string");if(we=we||this._opts.defaultMeta||de(this),!we)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var xe=this.validate(we,Se);if(!xe&&Ie){var Fe="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(Fe);else throw new Error(Fe)}return xe}function de(Se){var Ie=Se._opts.meta;return Se._opts.defaultMeta=typeof Ie=="object"?Se._getId(Ie)||Ie:Se.getSchema(U)?U:void 0,Se._opts.defaultMeta}function pe(Se){var Ie=ye(this,Se);switch(typeof Ie){case"object":return Ie.validate||this._compile(Ie);case"string":return this.getSchema(Ie);case"undefined":return ve(this,Se)}}function ve(Se,Ie){var we=A.schema.call(Se,{schema:{}},Ie);if(we){var xe=we.schema,Fe=we.root,Ge=we.baseId,Oe=E.call(Se,xe,Fe,void 0,Ge);return Se._fragments[Ie]=new I({ref:Ie,fragment:!0,schema:xe,root:Fe,baseId:Ge,validate:Oe}),Oe}}function ye(Se,Ie){return Ie=A.normalizeId(Ie),Se._schemas[Ie]||Se._refs[Ie]||Se._fragments[Ie]}function _e(Se){if(Se instanceof RegExp)return be(this,this._schemas,Se),be(this,this._refs,Se),this;switch(typeof Se){case"undefined":return be(this,this._schemas),be(this,this._refs),this._cache.clear(),this;case"string":var Ie=ye(this,Se);return Ie&&this._cache.del(Ie.cacheKey),delete this._schemas[Se],delete this._refs[Se],this;case"object":var we=this._opts.serialize,xe=we?we(Se):Se;this._cache.del(xe);var Fe=this._getId(Se);Fe&&(Fe=A.normalizeId(Fe),delete this._schemas[Fe],delete this._refs[Fe])}return this}function be(Se,Ie,we){for(var xe in Ie){var Fe=Ie[xe];!Fe.meta&&(!we||we.test(xe))&&(Se._cache.del(Fe.cacheKey),delete Ie[xe])}}function Te(Se,Ie,we,xe){if(typeof Se!="object"&&typeof Se!="boolean")throw new Error("schema should be object or boolean");var Fe=this._opts.serialize,Ge=Fe?Fe(Se):Se,Oe=this._cache.get(Ge);if(Oe)return Oe;xe=xe||this._opts.addUsedSchema!==!1;var et=A.normalizeId(this._getId(Se));et&&xe&&Ae(this,et);var Mt=this._opts.validateSchema!==!1&&!Ie,dt;Mt&&!(dt=et&&et==A.normalizeId(Se.$schema))&&this.validateSchema(Se,!0);var mt=A.ids.call(this,Se),Ut=new I({id:et,schema:Se,localRefs:mt,cacheKey:Ge,meta:we});return et[0]!="#"&&xe&&(this._refs[et]=Ut),this._cache.put(Ge,Ut),Mt&&dt&&this.validateSchema(Se,!0),Ut}function ue(Se,Ie){if(Se.compiling)return Se.validate=Fe,Fe.schema=Se.schema,Fe.errors=null,Fe.root=Ie||Fe,Se.schema.$async===!0&&(Fe.$async=!0),Fe;Se.compiling=!0;var we;Se.meta&&(we=this._opts,this._opts=this._metaOpts);var xe;try{xe=E.call(this,Se.schema,Ie,Se.localRefs)}catch(Ge){throw delete Se.validate,Ge}finally{Se.compiling=!1,Se.meta&&(this._opts=we)}return Se.validate=xe,Se.refs=xe.refs,Se.refVal=xe.refVal,Se.root=xe.root,xe;function Fe(){var Ge=Se.validate,Oe=Ge.apply(this,arguments);return Fe.errors=Ge.errors,Oe}}function O(Se){switch(Se.schemaId){case"auto":return te;case"id":return z;default:return Y}}function z(Se){return Se.$id&&this.logger.warn("schema $id ignored",Se.$id),Se.id}function Y(Se){return Se.id&&this.logger.warn("schema id ignored",Se.id),Se.$id}function te(Se){if(Se.$id&&Se.id&&Se.$id!=Se.id)throw new Error("schema $id is different from id");return Se.$id||Se.id}function oe(Se,Ie){if(Se=Se||this.errors,!Se)return"No errors";Ie=Ie||{};for(var we=Ie.separator===void 0?", ":Ie.separator,xe=Ie.dataVar===void 0?"data":Ie.dataVar,Fe="",Ge=0;Ge<Se.length;Ge++){var Oe=Se[Ge];Oe&&(Fe+=xe+Oe.dataPath+" "+Oe.message+we)}return Fe.slice(0,-we.length)}function le(Se,Ie){return typeof Ie=="string"&&(Ie=new RegExp(Ie)),this._formats[Se]=Ie,this}function he(Se){var Ie;if(Se._opts.$data&&(Ie=require$$12$1,Se.addMetaSchema(Ie,Ie.$id,!0)),Se._opts.meta!==!1){var we=require$$13$1;Se._opts.$data&&(we=P(we,K)),Se.addMetaSchema(we,U,!0),Se._refs["http://json-schema.org/schema"]=U}}function ae(Se){var Ie=Se._opts.schemas;if(Ie)if(Array.isArray(Ie))Se.addSchema(Ie);else for(var we in Ie)Se.addSchema(Ie[we],we)}function Q(Se){for(var Ie in Se._opts.formats){var we=Se._opts.formats[Ie];Se.addFormat(Ie,we)}}function se(Se){for(var Ie in Se._opts.keywords){var we=Se._opts.keywords[Ie];Se.addKeyword(Ie,we)}}function Ae(Se,Ie){if(Se._schemas[Ie]||Se._refs[Ie])throw new Error('schema with key or id "'+Ie+'" already exists')}function ge(Se){for(var Ie=D.copy(Se._opts),we=0;we<V.length;we++)delete Ie[V[we]];return Ie}function Ee(Se){var Ie=Se._opts.logger;if(Ie===!1)Se.logger={log:ke,warn:ke,error:ke};else{if(Ie===void 0&&(Ie=console),!(typeof Ie=="object"&&Ie.log&&Ie.warn&&Ie.error))throw new Error("logger must implement log, warn and error methods");Se.logger=Ie}}function ke(){}return ajv}var error,hasRequiredError;function requireError(){if(hasRequiredError)return error;hasRequiredError=1;function E(A){var _="validation failed";this.name="HARError",this.message=_,this.errors=A,typeof Error.captureStackTrace=="function"?Error.captureStackTrace(this,this.constructor):this.stack=new Error(_).stack}return E.prototype=Error.prototype,error=E,error}const $id$i="afterRequest.json#",$schema$i="http://json-schema.org/draft-06/schema#",type$g="object",optional$4=!0,required$f=["lastAccess","eTag","hitCount"],properties$i={expires:{type:"string",pattern:"^(\\d{4})(-)?(\\d\\d)(-)?(\\d\\d)(T)?(\\d\\d)(:)?(\\d\\d)(:)?(\\d\\d)(\\.\\d+)?(Z|([+-])(\\d\\d)(:)?(\\d\\d))?"},lastAccess:{type:"string",pattern:"^(\\d{4})(-)?(\\d\\d)(-)?(\\d\\d)(T)?(\\d\\d)(:)?(\\d\\d)(:)?(\\d\\d)(\\.\\d+)?(Z|([+-])(\\d\\d)(:)?(\\d\\d))?"},eTag:{type:"string"},hitCount:{type:"integer"},comment:{type:"string"}},require$$0={$id:$id$i,$schema:$schema$i,type:type$g,optional:optional$4,required:required$f,properties:properties$i},$id$h="beforeRequest.json#",$schema$h="http://json-schema.org/draft-06/schema#",type$f="object",optional$3=!0,required$e=["lastAccess","eTag","hitCount"],properties$h={expires:{type:"string",pattern:"^(\\d{4})(-)?(\\d\\d)(-)?(\\d\\d)(T)?(\\d\\d)(:)?(\\d\\d)(:)?(\\d\\d)(\\.\\d+)?(Z|([+-])(\\d\\d)(:)?(\\d\\d))?"},lastAccess:{type:"string",pattern:"^(\\d{4})(-)?(\\d\\d)(-)?(\\d\\d)(T)?(\\d\\d)(:)?(\\d\\d)(:)?(\\d\\d)(\\.\\d+)?(Z|([+-])(\\d\\d)(:)?(\\d\\d))?"},eTag:{type:"string"},hitCount:{type:"integer"},comment:{type:"string"}},require$$1={$id:$id$h,$schema:$schema$h,type:type$f,optional:optional$3,required:required$e,properties:properties$h},$id$g="browser.json#",$schema$g="http://json-schema.org/draft-06/schema#",type$e="object",required$d=["name","version"],properties$g={name:{type:"string"},version:{type:"string"},comment:{type:"string"}},require$$2={$id:$id$g,$schema:$schema$g,type:type$e,required:required$d,properties:properties$g},$id$f="cache.json#",$schema$f="http://json-schema.org/draft-06/schema#",properties$f={beforeRequest:{oneOf:[{type:"null"},{$ref:"beforeRequest.json#"}]},afterRequest:{oneOf:[{type:"null"},{$ref:"afterRequest.json#"}]},comment:{type:"string"}},require$$3$1={$id:$id$f,$schema:$schema$f,properties:properties$f},$id$e="content.json#",$schema$e="http://json-schema.org/draft-06/schema#",type$d="object",required$c=["size","mimeType"],properties$e={size:{type:"integer"},compression:{type:"integer"},mimeType:{type:"string"},text:{type:"string"},encoding:{type:"string"},comment:{type:"string"}},require$$4$1={$id:$id$e,$schema:$schema$e,type:type$d,required:required$c,properties:properties$e},$id$d="cookie.json#",$schema$d="http://json-schema.org/draft-06/schema#",type$c="object",required$b=["name","value"],properties$d={name:{type:"string"},value:{type:"string"},path:{type:"string"},domain:{type:"string"},expires:{type:["string","null"],format:"date-time"},httpOnly:{type:"boolean"},secure:{type:"boolean"},comment:{type:"string"}},require$$5={$id:$id$d,$schema:$schema$d,type:type$c,required:required$b,properties:properties$d},$id$c="creator.json#",$schema$c="http://json-schema.org/draft-06/schema#",type$b="object",required$a=["name","version"],properties$c={name:{type:"string"},version:{type:"string"},comment:{type:"string"}},require$$6={$id:$id$c,$schema:$schema$c,type:type$b,required:required$a,properties:properties$c},$id$b="entry.json#",$schema$b="http://json-schema.org/draft-06/schema#",type$a="object",optional$2=!0,required$9=["startedDateTime","time","request","response","cache","timings"],properties$b={pageref:{type:"string"},startedDateTime:{type:"string",format:"date-time",pattern:"^(\\d{4})(-)?(\\d\\d)(-)?(\\d\\d)(T)?(\\d\\d)(:)?(\\d\\d)(:)?(\\d\\d)(\\.\\d+)?(Z|([+-])(\\d\\d)(:)?(\\d\\d))"},time:{type:"number",min:0},request:{$ref:"request.json#"},response:{$ref:"response.json#"},cache:{$ref:"cache.json#"},timings:{$ref:"timings.json#"},serverIPAddress:{type:"string",oneOf:[{format:"ipv4"},{format:"ipv6"}]},connection:{type:"string"},comment:{type:"string"}},require$$7={$id:$id$b,$schema:$schema$b,type:type$a,optional:optional$2,required:required$9,properties:properties$b},$id$a="har.json#",$schema$a="http://json-schema.org/draft-06/schema#",type$9="object",required$8=["log"],properties$a={log:{$ref:"log.json#"}},require$$8={$id:$id$a,$schema:$schema$a,type:type$9,required:required$8,properties:properties$a},$id$9="header.json#",$schema$9="http://json-schema.org/draft-06/schema#",type$8="object",required$7=["name","value"],properties$9={name:{type:"string"},value:{type:"string"},comment:{type:"string"}},require$$9={$id:$id$9,$schema:$schema$9,type:type$8,required:required$7,properties:properties$9},$id$8="log.json#",$schema$8="http://json-schema.org/draft-06/schema#",type$7="object",required$6=["version","creator","entries"],properties$8={version:{type:"string"},creator:{$ref:"creator.json#"},browser:{$ref:"browser.json#"},pages:{type:"array",items:{$ref:"page.json#"}},entries:{type:"array",items:{$ref:"entry.json#"}},comment:{type:"string"}},require$$10={$id:$id$8,$schema:$schema$8,type:type$7,required:required$6,properties:properties$8},$id$7="page.json#",$schema$7="http://json-schema.org/draft-06/schema#",type$6="object",optional$1=!0,required$5=["startedDateTime","id","title","pageTimings"],properties$7={startedDateTime:{type:"string",format:"date-time",pattern:"^(\\d{4})(-)?(\\d\\d)(-)?(\\d\\d)(T)?(\\d\\d)(:)?(\\d\\d)(:)?(\\d\\d)(\\.\\d+)?(Z|([+-])(\\d\\d)(:)?(\\d\\d))"},id:{type:"string",unique:!0},title:{type:"string"},pageTimings:{$ref:"pageTimings.json#"},comment:{type:"string"}},require$$11={$id:$id$7,$schema:$schema$7,type:type$6,optional:optional$1,required:required$5,properties:properties$7},$id$6="pageTimings.json#",$schema$6="http://json-schema.org/draft-06/schema#",type$5="object",properties$6={onContentLoad:{type:"number",min:-1},onLoad:{type:"number",min:-1},comment:{type:"string"}},require$$12={$id:$id$6,$schema:$schema$6,type:type$5,properties:properties$6},$id$5="postData.json#",$schema$5="http://json-schema.org/draft-06/schema#",type$4="object",optional=!0,required$4=["mimeType"],properties$5={mimeType:{type:"string"},text:{type:"string"},params:{type:"array",required:["name"],properties:{name:{type:"string"},value:{type:"string"},fileName:{type:"string"},contentType:{type:"string"},comment:{type:"string"}}},comment:{type:"string"}},require$$13={$id:$id$5,$schema:$schema$5,type:type$4,optional,required:required$4,properties:properties$5},$id$4="query.json#",$schema$4="http://json-schema.org/draft-06/schema#",type$3="object",required$3=["name","value"],properties$4={name:{type:"string"},value:{type:"string"},comment:{type:"string"}},require$$14={$id:$id$4,$schema:$schema$4,type:type$3,required:required$3,properties:properties$4},$id$3="request.json#",$schema$3="http://json-schema.org/draft-06/schema#",type$2="object",required$2=["method","url","httpVersion","cookies","headers","queryString","headersSize","bodySize"],properties$3={method:{type:"string"},url:{type:"string",format:"uri"},httpVersion:{type:"string"},cookies:{type:"array",items:{$ref:"cookie.json#"}},headers:{type:"array",items:{$ref:"header.json#"}},queryString:{type:"array",items:{$ref:"query.json#"}},postData:{$ref:"postData.json#"},headersSize:{type:"integer"},bodySize:{type:"integer"},comment:{type:"string"}},require$$15={$id:$id$3,$schema:$schema$3,type:type$2,required:required$2,properties:properties$3},$id$2="response.json#",$schema$2="http://json-schema.org/draft-06/schema#",type$1="object",required$1=["status","statusText","httpVersion","cookies","headers","content","redirectURL","headersSize","bodySize"],properties$2={status:{type:"integer"},statusText:{type:"string"},httpVersion:{type:"string"},cookies:{type:"array",items:{$ref:"cookie.json#"}},headers:{type:"array",items:{$ref:"header.json#"}},content:{$ref:"content.json#"},redirectURL:{type:"string"},headersSize:{type:"integer"},bodySize:{type:"integer"},comment:{type:"string"}},require$$16={$id:$id$2,$schema:$schema$2,type:type$1,required:required$1,properties:properties$2},$id$1="timings.json#",$schema$1="http://json-schema.org/draft-06/schema#",required=["send","wait","receive"],properties$1={dns:{type:"number",min:-1},connect:{type:"number",min:-1},blocked:{type:"number",min:-1},send:{type:"number",min:-1},wait:{type:"number",min:-1},receive:{type:"number",min:-1},ssl:{type:"number",min:-1},comment:{type:"string"}},require$$17={$id:$id$1,$schema:$schema$1,required,properties:properties$1};var lib$1,hasRequiredLib$1;function requireLib$1(){return hasRequiredLib$1||(hasRequiredLib$1=1,lib$1={afterRequest:require$$0,beforeRequest:require$$1,browser:require$$2,cache:require$$3$1,content:require$$4$1,cookie:require$$5,creator:require$$6,entry:require$$7,har:require$$8,header:require$$9,log:require$$10,page:require$$11,pageTimings:require$$12,postData:require$$13,query:require$$14,request:require$$15,response:require$$16,timings:require$$17}),lib$1}const $schema="http://json-schema.org/draft-06/schema#",$id="http://json-schema.org/draft-06/schema#",title="Core schema meta-schema",definitions={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type=["object","boolean"],properties={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},title:{type:"string"},description:{type:"string"},default:{},examples:{type:"array",items:{}},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:{}},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:{},enum:{type:"array",minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},require$$3={$schema,$id,title,definitions,type,properties,default:{}};var hasRequiredPromise;function requirePromise(){if(hasRequiredPromise)return promise;hasRequiredPromise=1;var E=requireAjv(),A=requireError(),_=requireLib$1(),I;function B(){var R=new E({allErrors:!0});return R.addMetaSchema(require$$3),R.addSchema(_),R}function T(R,P){P=P||{},I=I||B();var D=I.getSchema(R+".json");return new Promise(function(F,L){var U=D(P);U?F(P):L(new A(D.errors))})}return promise.afterRequest=function(R){return T("afterRequest",R)},promise.beforeRequest=function(R){return T("beforeRequest",R)},promise.browser=function(R){return T("browser",R)},promise.cache=function(R){return T("cache",R)},promise.content=function(R){return T("content",R)},promise.cookie=function(R){return T("cookie",R)},promise.creator=function(R){return T("creator",R)},promise.entry=function(R){return T("entry",R)},promise.har=function(R){return T("har",R)},promise.header=function(R){return T("header",R)},promise.log=function(R){return T("log",R)},promise.page=function(R){return T("page",R)},promise.pageTimings=function(R){return T("pageTimings",R)},promise.postData=function(R){return T("postData",R)},promise.query=function(R){return T("query",R)},promise.request=function(R){return T("request",R)},promise.response=function(R){return T("response",R)},promise.timings=function(R){return T("timings",R)},promise}var hasRequiredHar;function requireHar(){if(hasRequiredHar)return har;hasRequiredHar=1;var E=require$$0$3,A=require$$1$1,_=requirePromise(),I=requireExtend();function B(T){this.request=T}return B.prototype.reducer=function(T,R){if(T[R.name]===void 0)return T[R.name]=R.value,T;var P=[T[R.name],R.value];return T[R.name]=P,T},B.prototype.prep=function(T){if(T.queryObj={},T.headersObj={},T.postData.jsonObj=!1,T.postData.paramsObj=!1,T.queryString&&T.queryString.length&&(T.queryObj=T.queryString.reduce(this.reducer,{})),T.headers&&T.headers.length&&(T.headersObj=T.headers.reduceRight(function(D,F){return D[F.name]=F.value,D},{})),T.cookies&&T.cookies.length){var R=T.cookies.map(function(D){return D.name+"="+D.value});R.length&&(T.headersObj.cookie=R.join("; "))}function P(D){return D.some(function(F){return T.postData.mimeType.indexOf(F)===0})}if(P(["multipart/mixed","multipart/related","multipart/form-data","multipart/alternative"]))T.postData.mimeType="multipart/form-data";else if(P(["application/x-www-form-urlencoded"]))T.postData.params?(T.postData.paramsObj=T.postData.params.reduce(this.reducer,{}),T.postData.text=A.stringify(T.postData.paramsObj)):T.postData.text="";else if(P(["text/json","text/x-json","application/json","application/x-json"])&&(T.postData.mimeType="application/json",T.postData.text))try{T.postData.jsonObj=JSON.parse(T.postData.text)}catch(D){this.request.debug(D),T.postData.mimeType="text/plain"}return T},B.prototype.options=function(T){if(!T.har)return T;var R={};if(I(R,T.har),R.log&&R.log.entries&&(R=R.log.entries[0]),R.url=R.url||T.url||T.uri||T.baseUrl||"/",R.httpVersion=R.httpVersion||"HTTP/1.1",R.queryString=R.queryString||[],R.headers=R.headers||[],R.cookies=R.cookies||[],R.postData=R.postData||{},R.postData.mimeType=R.postData.mimeType||"application/octet-stream",R.bodySize=0,R.headersSize=0,R.postData.size=0,!_.request(R))return T;var P=this.prep(R);P.url&&(T.url=P.url),P.method&&(T.method=P.method),Object.keys(P.queryObj).length&&(T.qs=P.queryObj),Object.keys(P.headersObj).length&&(T.headers=P.headersObj);function D(F){return P.postData.mimeType.indexOf(F)===0}return D("application/x-www-form-urlencoded")?T.form=P.postData.paramsObj:D("application/json")?P.postData.jsonObj&&(T.body=P.postData.jsonObj,T.json=!0):D("multipart/form-data")?(T.formData={},P.postData.params.forEach(function(F){var L={};if(!F.fileName&&!F.contentType){T.formData[F.name]=F.value;return}F.fileName&&!F.value?L.value=E.createReadStream(F.fileName):F.value&&(L.value=F.value),F.fileName&&(L.options={filename:F.fileName,contentType:F.contentType?F.contentType:null}),T.formData[F.name]=L})):P.postData.text&&(T.body=P.postData.text),T},har.Har=B,har}var auth={},rngBrowser={exports:{}},hasRequiredRngBrowser;function requireRngBrowser(){if(hasRequiredRngBrowser)return rngBrowser.exports;hasRequiredRngBrowser=1;var E=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(E){var A=new Uint8Array(16);rngBrowser.exports=function(){return E(A),A}}else{var _=new Array(16);rngBrowser.exports=function(){for(var B=0,T;B<16;B++)(B&3)===0&&(T=Math.random()*4294967296),_[B]=T>>>((B&3)<<3)&255;return _}}return rngBrowser.exports}var bytesToUuid_1,hasRequiredBytesToUuid;function requireBytesToUuid(){if(hasRequiredBytesToUuid)return bytesToUuid_1;hasRequiredBytesToUuid=1;for(var E=[],A=0;A<256;++A)E[A]=(A+256).toString(16).substr(1);function _(I,B){var T=B||0,R=E;return[R[I[T++]],R[I[T++]],R[I[T++]],R[I[T++]],"-",R[I[T++]],R[I[T++]],"-",R[I[T++]],R[I[T++]],"-",R[I[T++]],R[I[T++]],"-",R[I[T++]],R[I[T++]],R[I[T++]],R[I[T++]],R[I[T++]],R[I[T++]]].join("")}return bytesToUuid_1=_,bytesToUuid_1}var v4_1,hasRequiredV4;function requireV4(){if(hasRequiredV4)return v4_1;hasRequiredV4=1;var E=requireRngBrowser(),A=requireBytesToUuid();function _(I,B,T){var R=B&&T||0;typeof I=="string"&&(B=I==="binary"?new Array(16):null,I=null),I=I||{};var P=I.random||(I.rng||E)();if(P[6]=P[6]&15|64,P[8]=P[8]&63|128,B)for(var D=0;D<16;++D)B[R+D]=P[D];return B||A(P)}return v4_1=_,v4_1}var hasRequiredAuth;function requireAuth(){if(hasRequiredAuth)return auth;hasRequiredAuth=1;var E=requireCaseless(),A=requireV4(),_=requireHelpers(),I=_.md5,B=_.toBase64;function T(R){this.request=R,this.hasAuth=!1,this.sentAuth=!1,this.bearerToken=null,this.user=null,this.pass=null}return T.prototype.basic=function(R,P,D){var F=this;(typeof R!="string"||P!==void 0&&typeof P!="string")&&F.request.emit("error",new Error("auth() received invalid user or password")),F.user=R,F.pass=P,F.hasAuth=!0;var L=R+":"+(P||"");if(D||typeof D>"u"){var U="Basic "+B(L);return F.sentAuth=!0,U}},T.prototype.bearer=function(R,P){var D=this;if(D.bearerToken=R,D.hasAuth=!0,P||typeof P>"u"){typeof R=="function"&&(R=R());var F="Bearer "+(R||"");return D.sentAuth=!0,F}},T.prototype.digest=function(R,P,D){for(var F=this,L={},U=/([a-z0-9_-]+)=(?:"([^"]+)"|([a-z0-9_-]+))/gi;;){var V=U.exec(D);if(!V)break;L[V[1]]=V[2]||V[3]}var K=function(ve,ye,_e,be,Te,ue){var O=I(ye+":"+_e+":"+be);return ve&&ve.toLowerCase()==="md5-sess"?I(O+":"+Te+":"+ue):O},J=/(^|,)\s*auth\s*($|,)/.test(L.qop)&&"auth",ee=J&&"00000001",ie=J&&A().replace(/-/g,""),ne=K(L.algorithm,F.user,L.realm,F.pass,L.nonce,ie),ce=I(R+":"+P),fe=I(J?ne+":"+L.nonce+":"+ee+":"+ie+":"+J+":"+ce:ne+":"+L.nonce+":"+ce),de={username:F.user,realm:L.realm,nonce:L.nonce,uri:P,qop:J,response:fe,nc:ee,cnonce:ie,algorithm:L.algorithm,opaque:L.opaque};D=[];for(var pe in de)de[pe]&&(pe==="qop"||pe==="nc"||pe==="algorithm"?D.push(pe+"="+de[pe]):D.push(pe+'="'+de[pe]+'"'));return D="Digest "+D.join(", "),F.sentAuth=!0,D},T.prototype.onRequest=function(R,P,D,F){var L=this,U=L.request,V;F===void 0&&R===void 0?L.request.emit("error",new Error("no auth mechanism defined")):F!==void 0?V=L.bearer(F,D):V=L.basic(R,P,D),V&&U.setHeader("authorization",V)},T.prototype.onResponse=function(R){var P=this,D=P.request;if(!P.hasAuth||P.sentAuth)return null;var F=E(R.headers),L=F.get("www-authenticate"),U=L&&L.split(" ")[0].toLowerCase();switch(D.debug("reauth",U),U){case"basic":return P.basic(P.user,P.pass,!0);case"bearer":return P.bearer(P.bearerToken,!0);case"digest":return P.digest(D.method,D.path,L)}},auth.Auth=T,auth}var oauth={},oauthSign={},hasRequiredOauthSign;function requireOauthSign(){if(hasRequiredOauthSign)return oauthSign;hasRequiredOauthSign=1;var E=requireCryptoBrowserify();function A(V,K,J){return E.createHmac(J,V).update(K).digest("base64")}function _(V,K){return E.createSign("RSA-SHA1").update(K).sign(V,"base64")}function I(V){return encodeURIComponent(V).replace(/!/g,"%21").replace(/\*/g,"%2A").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/'/g,"%27")}function B(V){var K,J,ee=[];for(K in V)if(J=V[K],Array.isArray(J))for(var ie=0;ie<J.length;ie++)ee.push([K,J[ie]]);else if(typeof J=="object")for(var ne in J)ee.push([K+"["+ne+"]",J[ne]]);else ee.push([K,J]);return ee}function T(V,K){return V>K?1:V<K?-1:0}function R(V,K,J){var ee=B(J).map(function(ne){return[I(ne[0]),I(ne[1]||"")]}).sort(function(ne,ce){return T(ne[0],ce[0])||T(ne[1],ce[1])}).map(function(ne){return ne.join("=")}).join("&"),ie=[I(V?V.toUpperCase():"GET"),I(K),I(ee)].join("&");return ie}function P(V,K,J,ee,ie){var ne=R(V,K,J),ce=[ee||"",ie||""].map(I).join("&");return A(ce,ne,"sha1")}function D(V,K,J,ee,ie){var ne=R(V,K,J),ce=[ee||"",ie||""].map(I).join("&");return A(ce,ne,"sha256")}function F(V,K,J,ee,ie){var ne=R(V,K,J),ce=ee||"";return _(ce,ne)}function L(V,K){var J=[V||"",K||""].map(I).join("&");return J}function U(V,K,J,ee,ie,ne){var ce,fe=1;switch(V){case"RSA-SHA1":ce=F;break;case"HMAC-SHA1":ce=P;break;case"HMAC-SHA256":ce=D;break;case"PLAINTEXT":ce=L,fe=4;break;default:throw new Error("Signature method not supported: "+V)}return ce.apply(null,[].slice.call(arguments,fe))}return oauthSign.hmacsign=P,oauthSign.hmacsign256=D,oauthSign.rsasign=F,oauthSign.plaintext=L,oauthSign.sign=U,oauthSign.rfc3986=I,oauthSign.generateBase=R,oauthSign}var hasRequiredOauth;function requireOauth(){if(hasRequiredOauth)return oauth;hasRequiredOauth=1;var E=require$$2$1,A=requireLib$6(),_=requireCaseless(),I=requireV4(),B=requireOauthSign(),T=requireCryptoBrowserify(),R=requireSafeBuffer$1().Buffer;function P(D){this.request=D,this.params=null}return P.prototype.buildParams=function(D,F,L,U,V,K){var J={};for(var ee in D)J["oauth_"+ee]=D[ee];J.oauth_version||(J.oauth_version="1.0"),J.oauth_timestamp||(J.oauth_timestamp=Math.floor(Date.now()/1e3).toString()),J.oauth_nonce||(J.oauth_nonce=I().replace(/-/g,"")),J.oauth_signature_method||(J.oauth_signature_method="HMAC-SHA1");var ie=J.oauth_consumer_secret||J.oauth_private_key;delete J.oauth_consumer_secret,delete J.oauth_private_key;var ne=J.oauth_token_secret;delete J.oauth_token_secret;var ce=J.oauth_realm;delete J.oauth_realm,delete J.oauth_transport_method;var fe=F.protocol+"//"+F.host+F.pathname,de=K.parse([].concat(U,V,K.stringify(J)).join("&"));return J.oauth_signature=B.sign(J.oauth_signature_method,L,fe,de,ie,ne),ce&&(J.realm=ce),J},P.prototype.buildBodyHash=function(D,F){["HMAC-SHA1","RSA-SHA1"].indexOf(D.signature_method||"HMAC-SHA1")<0&&this.request.emit("error",new Error("oauth: "+D.signature_method+" signature_method not supported with body_hash signing."));var L=T.createHash("sha1");L.update(F||"");var U=L.digest("hex");return R.from(U,"hex").toString("base64")},P.prototype.concatParams=function(D,F,L){L=L||"";var U=Object.keys(D).filter(function(V){return V!=="realm"&&V!=="oauth_signature"}).sort();return D.realm&&U.splice(0,0,"realm"),U.push("oauth_signature"),U.map(function(V){return V+"="+L+B.rfc3986(D[V])+L}).join(F)},P.prototype.onRequest=function(D){var F=this;F.params=D;var L=F.request.uri||{},U=F.request.method||"",V=_(F.request.headers),K=F.request.body||"",J=F.request.qsLib||A,ee,ie,ne=V.get("content-type")||"",ce="application/x-www-form-urlencoded",fe=D.transport_method||"header";ne.slice(0,ce.length)===ce&&(ne=ce,ee=K),L.query&&(ie=L.query),fe==="body"&&(U!=="POST"||ne!==ce)&&F.request.emit("error",new Error("oauth: transport_method of body requires POST and content-type "+ce)),!ee&&typeof D.body_hash=="boolean"&&(D.body_hash=F.buildBodyHash(D,F.request.body.toString()));var de=F.buildParams(D,L,U,ie,ee,J);switch(fe){case"header":F.request.setHeader("Authorization","OAuth "+F.concatParams(de,",",'"'));break;case"query":var pe=F.request.uri.href+=(ie?"&":"?")+F.concatParams(de,"&");F.request.uri=E.parse(pe),F.request.path=F.request.uri.path;break;case"body":F.request.body=(ee?ee+"&":"")+F.concatParams(de,"&");break;default:F.request.emit("error",new Error("oauth: transport_method invalid"))}},oauth.OAuth=P,oauth}var hawk={},hasRequiredHawk;function requireHawk(){return hasRequiredHawk||(hasRequiredHawk=1,(function(E){var A=requireCryptoBrowserify();function _(B){var T=(B+1)*6,R=A.randomBytes(Math.ceil(T/8)),P=R.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");return P.slice(0,B)}function I(B,T,R){var P=A.createHash(T);return P.update(`hawk.1.payload
`),P.update((R?R.split(";")[0].trim().toLowerCase():"")+`
`),P.update(B||""),P.update(`
`),P.digest("base64")}E.calculateMac=function(B,T){var R=`hawk.1.header
`+T.ts+`
`+T.nonce+`
`+(T.method||"").toUpperCase()+`
`+T.resource+`
`+T.host.toLowerCase()+`
`+T.port+`
`+(T.hash||"")+`
`;T.ext&&(R=R+T.ext.replace("\\","\\\\").replace(`
`,"\\n")),R=R+`
`,T.app&&(R=R+T.app+`
`+(T.dlg||"")+`
`);var P=A.createHmac(B.algorithm,B.key).update(R),D=P.digest("base64");return D},E.header=function(B,T,R){var P=R.timestamp||Math.floor((Date.now()+(R.localtimeOffsetMsec||0))/1e3),D=R.credentials;if(!D||!D.id||!D.key||!D.algorithm||["sha1","sha256"].indexOf(D.algorithm)===-1)return"";var F={ts:P,nonce:R.nonce||_(6),method:T,resource:B.pathname+(B.search||""),host:B.hostname,port:B.port||(B.protocol==="http:"?80:443),hash:R.hash,ext:R.ext,app:R.app,dlg:R.dlg};!F.hash&&(R.payload||R.payload==="")&&(F.hash=I(R.payload,D.algorithm,R.contentType));var L=E.calculateMac(D,F),U=F.ext!==null&&F.ext!==void 0&&F.ext!=="",V='Hawk id="'+D.id+'", ts="'+F.ts+'", nonce="'+F.nonce+(F.hash?'", hash="'+F.hash:"")+(U?'", ext="'+F.ext.replace(/\\/g,"\\\\").replace(/"/g,'\\"'):"")+'", mac="'+L+'"';return F.app&&(V=V+', app="'+F.app+(F.dlg?'", dlg="'+F.dlg:"")+'"'),V}})(hawk)),hawk}var multipart={},delayed_stream,hasRequiredDelayed_stream;function requireDelayed_stream(){if(hasRequiredDelayed_stream)return delayed_stream;hasRequiredDelayed_stream=1;var E=requireStreamBrowserify().Stream,A=requireUtil$3();delayed_stream=_;function _(){this.source=null,this.dataSize=0,this.maxDataSize=1024*1024,this.pauseStream=!0,this._maxDataSizeExceeded=!1,this._released=!1,this._bufferedEvents=[]}return A.inherits(_,E),_.create=function(I,B){var T=new this;B=B||{};for(var R in B)T[R]=B[R];T.source=I;var P=I.emit;return I.emit=function(){return T._handleEmit(arguments),P.apply(I,arguments)},I.on("error",function(){}),T.pauseStream&&I.pause(),T},Object.defineProperty(_.prototype,"readable",{configurable:!0,enumerable:!0,get:function(){return this.source.readable}}),_.prototype.setEncoding=function(){return this.source.setEncoding.apply(this.source,arguments)},_.prototype.resume=function(){this._released||this.release(),this.source.resume()},_.prototype.pause=function(){this.source.pause()},_.prototype.release=function(){this._released=!0,this._bufferedEvents.forEach(function(I){this.emit.apply(this,I)}.bind(this)),this._bufferedEvents=[]},_.prototype.pipe=function(){var I=E.prototype.pipe.apply(this,arguments);return this.resume(),I},_.prototype._handleEmit=function(I){if(this._released){this.emit.apply(this,I);return}I[0]==="data"&&(this.dataSize+=I[1].length,this._checkIfMaxDataSizeExceeded()),this._bufferedEvents.push(I)},_.prototype._checkIfMaxDataSizeExceeded=function(){if(!this._maxDataSizeExceeded&&!(this.dataSize<=this.maxDataSize)){this._maxDataSizeExceeded=!0;var I="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this.emit("error",new Error(I))}},delayed_stream}var combined_stream,hasRequiredCombined_stream;function requireCombined_stream(){if(hasRequiredCombined_stream)return combined_stream;hasRequiredCombined_stream=1;var E=requireUtil$3(),A=requireStreamBrowserify().Stream,_=requireDelayed_stream();combined_stream=I;function I(){this.writable=!1,this.readable=!0,this.dataSize=0,this.maxDataSize=2*1024*1024,this.pauseStreams=!0,this._released=!1,this._streams=[],this._currentStream=null,this._insideLoop=!1,this._pendingNext=!1}return E.inherits(I,A),I.create=function(B){var T=new this;B=B||{};for(var R in B)T[R]=B[R];return T},I.isStreamLike=function(B){return typeof B!="function"&&typeof B!="string"&&typeof B!="boolean"&&typeof B!="number"&&!Buffer$1.isBuffer(B)},I.prototype.append=function(B){var T=I.isStreamLike(B);if(T){if(!(B instanceof _)){var R=_.create(B,{maxDataSize:1/0,pauseStream:this.pauseStreams});B.on("data",this._checkDataSize.bind(this)),B=R}this._handleErrors(B),this.pauseStreams&&B.pause()}return this._streams.push(B),this},I.prototype.pipe=function(B,T){return A.prototype.pipe.call(this,B,T),this.resume(),B},I.prototype._getNext=function(){if(this._currentStream=null,this._insideLoop){this._pendingNext=!0;return}this._insideLoop=!0;try{do this._pendingNext=!1,this._realGetNext();while(this._pendingNext)}finally{this._insideLoop=!1}},I.prototype._realGetNext=function(){var B=this._streams.shift();if(typeof B>"u"){this.end();return}if(typeof B!="function"){this._pipeNext(B);return}var T=B;T(function(R){var P=I.isStreamLike(R);P&&(R.on("data",this._checkDataSize.bind(this)),this._handleErrors(R)),this._pipeNext(R)}.bind(this))},I.prototype._pipeNext=function(B){this._currentStream=B;var T=I.isStreamLike(B);if(T){B.on("end",this._getNext.bind(this)),B.pipe(this,{end:!1});return}var R=B;this.write(R),this._getNext()},I.prototype._handleErrors=function(B){var T=this;B.on("error",function(R){T._emitError(R)})},I.prototype.write=function(B){this.emit("data",B)},I.prototype.pause=function(){this.pauseStreams&&(this.pauseStreams&&this._currentStream&&typeof this._currentStream.pause=="function"&&this._currentStream.pause(),this.emit("pause"))},I.prototype.resume=function(){this._released||(this._released=!0,this.writable=!0,this._getNext()),this.pauseStreams&&this._currentStream&&typeof this._currentStream.resume=="function"&&this._currentStream.resume(),this.emit("resume")},I.prototype.end=function(){this._reset(),this.emit("end")},I.prototype.destroy=function(){this._reset(),this.emit("close")},I.prototype._reset=function(){this.writable=!1,this._streams=[],this._currentStream=null},I.prototype._checkDataSize=function(){if(this._updateDataSize(),!(this.dataSize<=this.maxDataSize)){var B="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this._emitError(new Error(B))}},I.prototype._updateDataSize=function(){this.dataSize=0;var B=this;this._streams.forEach(function(T){T.dataSize&&(B.dataSize+=T.dataSize)}),this._currentStream&&this._currentStream.dataSize&&(this.dataSize+=this._currentStream.dataSize)},I.prototype._emitError=function(B){this._reset(),this.emit("error",B)},combined_stream}var hasRequiredMultipart;function requireMultipart(){if(hasRequiredMultipart)return multipart;hasRequiredMultipart=1;var E=requireV4(),A=requireCombined_stream(),_=requireIsstream(),I=requireSafeBuffer$1().Buffer;function B(T){this.request=T,this.boundary=E(),this.chunked=!1,this.body=null}return B.prototype.isChunked=function(T){var R=this,P=!1,D=T.data||T;return D.forEach||R.request.emit("error",new Error("Argument error, options.multipart.")),T.chunked!==void 0&&(P=T.chunked),R.request.getHeader("transfer-encoding")==="chunked"&&(P=!0),P||D.forEach(function(F){typeof F.body>"u"&&R.request.emit("error",new Error("Body attribute missing in multipart.")),_(F.body)&&(P=!0)}),P},B.prototype.setHeaders=function(T){var R=this;T&&!R.request.hasHeader("transfer-encoding")&&R.request.setHeader("transfer-encoding","chunked");var P=R.request.getHeader("content-type");!P||P.indexOf("multipart")===-1?R.request.setHeader("content-type","multipart/related; boundary="+R.boundary):P.indexOf("boundary")!==-1?R.boundary=P.replace(/.*boundary=([^\s;]+).*/,"$1"):R.request.setHeader("content-type",P+"; boundary="+R.boundary)},B.prototype.build=function(T,R){var P=this,D=R?new A:[];function F(L){return typeof L=="number"&&(L=L.toString()),R?D.append(L):D.push(I.from(L))}return P.request.preambleCRLF&&F(`\r
`),T.forEach(function(L){var U="--"+P.boundary+`\r
`;Object.keys(L).forEach(function(V){V!=="body"&&(U+=V+": "+L[V]+`\r
`)}),U+=`\r
`,F(U),F(L.body),F(`\r
`)}),F("--"+P.boundary+"--"),P.request.postambleCRLF&&F(`\r
`),D},B.prototype.onRequest=function(T){var R=this,P=R.isChunked(T),D=T.data||T;R.setHeaders(P),R.chunked=P,R.body=R.build(D,P)},multipart.Multipart=B,multipart}var redirect={},hasRequiredRedirect;function requireRedirect(){if(hasRequiredRedirect)return redirect;hasRequiredRedirect=1;var E=require$$2$1,A=/^https?:/;function _(I){this.request=I,this.followRedirect=!0,this.followRedirects=!0,this.followAllRedirects=!1,this.followOriginalHttpMethod=!1,this.allowRedirect=function(){return!0},this.maxRedirects=10,this.redirects=[],this.redirectsFollowed=0,this.removeRefererHeader=!1}return _.prototype.onRequest=function(I){var B=this;I.maxRedirects!==void 0&&(B.maxRedirects=I.maxRedirects),typeof I.followRedirect=="function"&&(B.allowRedirect=I.followRedirect),I.followRedirect!==void 0&&(B.followRedirects=!!I.followRedirect),I.followAllRedirects!==void 0&&(B.followAllRedirects=I.followAllRedirects),(B.followRedirects||B.followAllRedirects)&&(B.redirects=B.redirects||[]),I.removeRefererHeader!==void 0&&(B.removeRefererHeader=I.removeRefererHeader),I.followOriginalHttpMethod!==void 0&&(B.followOriginalHttpMethod=I.followOriginalHttpMethod)},_.prototype.redirectTo=function(I){var B=this,T=B.request,R=null;if(I.statusCode>=300&&I.statusCode<400&&I.caseless.has("location")){var P=I.caseless.get("location");if(T.debug("redirect",P),B.followAllRedirects)R=P;else if(B.followRedirects)switch(T.method){case"PATCH":case"PUT":case"POST":case"DELETE":break;default:R=P;break}}else if(I.statusCode===401){var D=T._auth.onResponse(I);D&&(T.setHeader("authorization",D),R=T.uri)}return R},_.prototype.onResponse=function(I){var B=this,T=B.request,R=B.redirectTo(I);if(!R||!B.allowRedirect.call(T,I))return!1;if(T.debug("redirect to",R),I.resume&&I.resume(),B.redirectsFollowed>=B.maxRedirects)return T.emit("error",new Error("Exceeded maxRedirects. Probably stuck in a redirect loop "+T.uri.href)),!1;B.redirectsFollowed+=1,A.test(R)||(R=E.resolve(T.uri.href,R));var P=T.uri;return T.uri=E.parse(R),T.uri.protocol!==P.protocol&&delete T.agent,B.redirects.push({statusCode:I.statusCode,redirectUri:R}),B.followAllRedirects&&T.method!=="HEAD"&&I.statusCode!==401&&I.statusCode!==307&&(T.method=B.followOriginalHttpMethod?T.method:"GET"),delete T.src,delete T.req,delete T._started,I.statusCode!==401&&I.statusCode!==307&&(delete T.body,delete T._form,T.headers&&(T.removeHeader("host"),T.removeHeader("content-type"),T.removeHeader("content-length"),T.uri.hostname!==T.originalHost.split(":")[0]&&T.removeHeader("authorization"))),B.removeRefererHeader||T.setHeader("referer",P.href),T.emit("redirect"),T.init(),!0},redirect.Redirect=_,redirect}var tunnel={},tunnelAgent={},hasRequiredTunnelAgent;function requireTunnelAgent(){if(hasRequiredTunnelAgent)return tunnelAgent;hasRequiredTunnelAgent=1;var E={},A=require$$0$3,_=requireStreamHttp(),I=requireHttpsBrowserify(),B=requireEvents(),T=requireAssert$1(),R=requireUtil$3(),P=requireSafeBuffer$1().Buffer;tunnelAgent.httpOverHttp=D,tunnelAgent.httpsOverHttp=F,tunnelAgent.httpOverHttps=L,tunnelAgent.httpsOverHttps=U;function D(ie){var ne=new V(ie);return ne.request=_.request,ne}function F(ie){var ne=new V(ie);return ne.request=_.request,ne.createSocket=K,ne.defaultPort=443,ne}function L(ie){var ne=new V(ie);return ne.request=I.request,ne}function U(ie){var ne=new V(ie);return ne.request=I.request,ne.createSocket=K,ne.defaultPort=443,ne}function V(ie){var ne=this;ne.options=ie||{},ne.proxyOptions=ne.options.proxy||{},ne.maxSockets=ne.options.maxSockets||_.Agent.defaultMaxSockets,ne.requests=[],ne.sockets=[],ne.on("free",function(fe,de,pe){for(var ve=0,ye=ne.requests.length;ve<ye;++ve){var _e=ne.requests[ve];if(_e.host===de&&_e.port===pe){ne.requests.splice(ve,1),_e.request.onSocket(fe);return}}fe.destroy(),ne.removeSocket(fe)})}R.inherits(V,B.EventEmitter),V.prototype.addRequest=function(ne,ce){var fe=this;if(typeof ce=="string"&&(ce={host:ce,port:arguments[2],path:arguments[3]}),fe.sockets.length>=this.maxSockets){fe.requests.push({host:ce.host,port:ce.port,request:ne});return}fe.createConnection({host:ce.host,port:ce.port,request:ne})},V.prototype.createConnection=function(ne){var ce=this;ce.createSocket(ne,function(fe){fe.on("free",de),fe.on("close",pe),fe.on("agentRemove",pe),ne.request.onSocket(fe);function de(){ce.emit("free",fe,ne.host,ne.port)}function pe(ve){ce.removeSocket(fe),fe.removeListener("free",de),fe.removeListener("close",pe),fe.removeListener("agentRemove",pe)}})},V.prototype.createSocket=function(ne,ce){var fe=this,de={};fe.sockets.push(de);var pe=J({},fe.proxyOptions,{method:"CONNECT",path:ne.host+":"+ne.port,agent:!1});pe.proxyAuth&&(pe.headers=pe.headers||{},pe.headers["Proxy-Authorization"]="Basic "+P.from(pe.proxyAuth).toString("base64")),ee("making CONNECT request");var ve=fe.request(pe);ve.useChunkedEncodingByDefault=!1,ve.once("response",ye),ve.once("upgrade",_e),ve.once("connect",be),ve.once("error",Te),ve.end();function ye(ue){ue.upgrade=!0}function _e(ue,O,z){process$1.nextTick(function(){be(ue,O,z)})}function be(ue,O,z){if(ve.removeAllListeners(),O.removeAllListeners(),ue.statusCode===200)T.equal(z.length,0),ee("tunneling connection has established"),fe.sockets[fe.sockets.indexOf(de)]=O,ce(O);else{ee("tunneling socket could not be established, statusCode=%d",ue.statusCode);var Y=new Error("tunneling socket could not be established, statusCode="+ue.statusCode);Y.code="ECONNRESET",ne.request.emit("error",Y),fe.removeSocket(de)}}function Te(ue){ve.removeAllListeners(),ee(`tunneling socket could not be established, cause=%s
`,ue.message,ue.stack);var O=new Error("tunneling socket could not be established, cause="+ue.message);O.code="ECONNRESET",ne.request.emit("error",O),fe.removeSocket(de)}},V.prototype.removeSocket=function(ne){var ce=this.sockets.indexOf(ne);if(ce!==-1){this.sockets.splice(ce,1);var fe=this.requests.shift();fe&&this.createConnection(fe)}};function K(ie,ne){var ce=this;V.prototype.createSocket.call(ce,ie,function(fe){var de=A.connect(0,J({},ce.options,{servername:ie.host,socket:fe}));ce.sockets[ce.sockets.indexOf(fe)]=de,ne(de)})}function J(ie){for(var ne=1,ce=arguments.length;ne<ce;++ne){var fe=arguments[ne];if(typeof fe=="object")for(var de=Object.keys(fe),pe=0,ve=de.length;pe<ve;++pe){var ye=de[pe];fe[ye]!==void 0&&(ie[ye]=fe[ye])}}return ie}var ee;return E.NODE_DEBUG&&/\btunnel\b/.test(E.NODE_DEBUG)?ee=function(){var ie=Array.prototype.slice.call(arguments);typeof ie[0]=="string"?ie[0]="TUNNEL: "+ie[0]:ie.unshift("TUNNEL:"),console.error.apply(console,ie)}:ee=function(){},tunnelAgent.debug=ee,tunnelAgent}var hasRequiredTunnel;function requireTunnel(){if(hasRequiredTunnel)return tunnel;hasRequiredTunnel=1;var E=require$$2$1,A=requireTunnelAgent(),_=["accept","accept-charset","accept-encoding","accept-language","accept-ranges","cache-control","content-encoding","content-language","content-location","content-md5","content-range","content-type","connection","date","expect","max-forwards","pragma","referer","te","user-agent","via"],I=["proxy-authorization"];function B(L){var U=L.port,V=L.protocol,K=L.hostname+":";return U?K+=U:V==="https:"?K+="443":K+="80",K}function T(L,U){var V=U.reduce(function(K,J){return K[J.toLowerCase()]=!0,K},{});return Object.keys(L).filter(function(K){return V[K.toLowerCase()]}).reduce(function(K,J){return K[J]=L[J],K},{})}function R(L,U){var V=L.proxy,K={proxy:{host:V.hostname,port:+V.port,proxyAuth:V.auth,headers:U},headers:L.headers,ca:L.ca,cert:L.cert,key:L.key,passphrase:L.passphrase,pfx:L.pfx,ciphers:L.ciphers,rejectUnauthorized:L.rejectUnauthorized,secureOptions:L.secureOptions,secureProtocol:L.secureProtocol};return K}function P(L,U){var V=L.protocol==="https:"?"https":"http",K=U.protocol==="https:"?"Https":"Http";return[V,K].join("Over")}function D(L){var U=L.uri,V=L.proxy,K=P(U,V);return A[K]}function F(L){this.request=L,this.proxyHeaderWhiteList=_,this.proxyHeaderExclusiveList=[],typeof L.tunnel<"u"&&(this.tunnelOverride=L.tunnel)}return F.prototype.isEnabled=function(){var L=this,U=L.request;return typeof L.tunnelOverride<"u"?L.tunnelOverride:U.uri.protocol==="https:"},F.prototype.setup=function(L){var U=this,V=U.request;if(L=L||{},typeof V.proxy=="string"&&(V.proxy=E.parse(V.proxy)),!V.proxy||!V.tunnel)return!1;L.proxyHeaderWhiteList&&(U.proxyHeaderWhiteList=L.proxyHeaderWhiteList),L.proxyHeaderExclusiveList&&(U.proxyHeaderExclusiveList=L.proxyHeaderExclusiveList);var K=U.proxyHeaderExclusiveList.concat(I),J=U.proxyHeaderWhiteList.concat(K),ee=T(V.headers,J);ee.host=B(V.uri),K.forEach(V.removeHeader,V);var ie=D(V),ne=R(V,ee);return V.agent=ie(ne),!0},F.defaultProxyHeaderWhiteList=_,F.defaultProxyHeaderExclusiveList=I,tunnel.Tunnel=F,tunnel}var performanceNow$1={exports:{}},performanceNow=performanceNow$1.exports,hasRequiredPerformanceNow;function requirePerformanceNow(){return hasRequiredPerformanceNow||(hasRequiredPerformanceNow=1,(function(){var E,A,_,I,B,T;typeof performance<"u"&&performance!==null&&performance.now?performanceNow$1.exports=function(){return performance.now()}:typeof process$1<"u"&&process$1!==null&&process$1.hrtime?(performanceNow$1.exports=function(){return(E()-B)/1e6},A=process$1.hrtime,E=function(){var R;return R=A(),R[0]*1e9+R[1]},I=E(),T=process$1.uptime()*1e9,B=I-T):Date.now?(performanceNow$1.exports=function(){return Date.now()-_},_=Date.now()):(performanceNow$1.exports=function(){return new Date().getTime()-_},_=new Date().getTime())}).call(performanceNow)),performanceNow$1.exports}var request,hasRequiredRequest$1;function requireRequest$1(){if(hasRequiredRequest$1)return request;hasRequiredRequest$1=1;var E={},A=requireStreamHttp(),_=requireHttpsBrowserify(),I=require$$2$1,B=requireUtil$3(),T=requireStreamBrowserify(),R=requireLib$5(),P=requireAwsSign2(),D=requireAws4(),F=requireLib$2(),L=requireMimeTypes(),U=requireCaseless(),V=requireForeverAgent(),K=requireBrowser$1(),J=requireExtend(),ee=requireIsstream(),ie=requireIsTypedarray().strict,ne=requireHelpers(),ce=requireCookies(),fe=requireGetProxyFromURI(),de=requireQuerystring().Querystring,pe=requireHar().Har,ve=requireAuth().Auth,ye=requireOauth().OAuth,_e=requireHawk(),be=requireMultipart().Multipart,Te=requireRedirect().Redirect,ue=requireTunnel().Tunnel,O=requirePerformanceNow(),z=requireSafeBuffer$1().Buffer,Y=ne.safeStringify,te=ne.isReadStream,oe=ne.toBase64,le=ne.defer,he=ne.copy,ae=ne.version,Q=ce.jar(),se={};function Ae(we,xe){var Fe={};for(var Ge in xe){var Oe=we.indexOf(Ge)===-1;Oe&&(Fe[Ge]=xe[Ge])}return Fe}function ge(we,xe){var Fe={};for(var Ge in xe){var Oe=we.indexOf(Ge)!==-1,et=typeof xe[Ge]=="function";Oe&&et||(Fe[Ge]=xe[Ge])}return Fe}function Ee(){var we=this;return{uri:we.uri,method:we.method,headers:we.headers}}function ke(){var we=this;return{statusCode:we.statusCode,body:we.body,headers:we.headers,request:Ee.call(we.request)}}function Se(we){var xe=this;we.har&&(xe._har=new pe(xe),we=xe._har.options(we)),T.Stream.call(xe);var Fe=Object.keys(Se.prototype),Ge=Ae(Fe,we);J(xe,Ge),we=ge(Fe,we),xe.readable=!0,xe.writable=!0,we.method&&(xe.explicitMethod=!0),xe._qs=new de(xe),xe._auth=new ve(xe),xe._oauth=new ye(xe),xe._multipart=new be(xe),xe._redirect=new Te(xe),xe._tunnel=new ue(xe),xe.init(we)}B.inherits(Se,T.Stream),Se.debug=E.NODE_DEBUG&&/\brequest\b/.test(E.NODE_DEBUG);function Ie(){Se.debug&&console.error("REQUEST %s",B.format.apply(B,arguments))}return Se.prototype.debug=Ie,Se.prototype.init=function(we){var xe=this;we||(we={}),xe.headers=xe.headers?he(xe.headers):{};for(var Fe in xe.headers)typeof xe.headers[Fe]>"u"&&delete xe.headers[Fe];if(U.httpify(xe,xe.headers),xe.method||(xe.method=we.method||"GET"),xe.localAddress||(xe.localAddress=we.localAddress),xe._qs.init(we),Ie(we),!xe.pool&&xe.pool!==!1&&(xe.pool=se),xe.dests=xe.dests||[],xe.__isRequestRequest=!0,!xe._callback&&xe.callback&&(xe._callback=xe.callback,xe.callback=function(){xe._callbackCalled||(xe._callbackCalled=!0,xe._callback.apply(xe,arguments))},xe.on("error",xe.callback.bind()),xe.on("complete",xe.callback.bind(xe,null))),!xe.uri&&xe.url&&(xe.uri=xe.url,delete xe.url),xe.baseUrl){if(typeof xe.baseUrl!="string")return xe.emit("error",new Error("options.baseUrl must be a string"));if(typeof xe.uri!="string")return xe.emit("error",new Error("options.uri must be a string when using options.baseUrl"));if(xe.uri.indexOf("//")===0||xe.uri.indexOf("://")!==-1)return xe.emit("error",new Error("options.uri must be a path when using options.baseUrl"));var Ge=xe.baseUrl.lastIndexOf("/")===xe.baseUrl.length-1,Oe=xe.uri.indexOf("/")===0;Ge&&Oe?xe.uri=xe.baseUrl+xe.uri.slice(1):Ge||Oe?xe.uri=xe.baseUrl+xe.uri:xe.uri===""?xe.uri=xe.baseUrl:xe.uri=xe.baseUrl+"/"+xe.uri,delete xe.baseUrl}if(!xe.uri)return xe.emit("error",new Error("options.uri is a required argument"));if(typeof xe.uri=="string"&&(xe.uri=I.parse(xe.uri)),xe.uri.href||(xe.uri.href=I.format(xe.uri)),xe.uri.protocol==="unix:")return xe.emit("error",new Error("`unix://` URL scheme is no longer supported. Please use the format `http://unix:SOCKET:PATH`"));if(xe.uri.host==="unix"&&xe.enableUnixSocket(),xe.strictSSL===!1&&(xe.rejectUnauthorized=!1),xe.uri.pathname||(xe.uri.pathname="/"),!(xe.uri.host||xe.uri.hostname&&xe.uri.port)&&!xe.uri.isUnix){var et=I.format(xe.uri),Mt='Invalid URI "'+et+'"';return Object.keys(we).length===0&&(Mt+=". This can be caused by a crappy redirection."),xe.abort(),xe.emit("error",new Error(Mt))}if(xe.hasOwnProperty("proxy")||(xe.proxy=fe(xe.uri)),xe.tunnel=xe._tunnel.isEnabled(),xe.proxy&&xe._tunnel.setup(we),xe._redirect.onRequest(we),xe.setHost=!1,!xe.hasHeader("host")){var dt=xe.originalHostHeaderName||"host";xe.setHeader(dt,xe.uri.host),xe.uri.port&&(xe.uri.port==="80"&&xe.uri.protocol==="http:"||xe.uri.port==="443"&&xe.uri.protocol==="https:")&&xe.setHeader(dt,xe.uri.hostname),xe.setHost=!0}if(xe.jar(xe._jar||we.jar),xe.uri.port||(xe.uri.protocol==="http:"?xe.uri.port=80:xe.uri.protocol==="https:"&&(xe.uri.port=443)),xe.proxy&&!xe.tunnel?(xe.port=xe.proxy.port,xe.host=xe.proxy.hostname):(xe.port=xe.uri.port,xe.host=xe.uri.hostname),we.form&&xe.form(we.form),we.formData){var mt=we.formData,Ut=xe.form(),St=function(ze,Ce){Ce&&Ce.hasOwnProperty("value")&&Ce.hasOwnProperty("options")?Ut.append(ze,Ce.value,Ce.options):Ut.append(ze,Ce)};for(var vt in mt)if(mt.hasOwnProperty(vt)){var It=mt[vt];if(It instanceof Array)for(var yt=0;yt<It.length;yt++)St(vt,It[yt]);else St(vt,It)}}if(we.qs&&xe.qs(we.qs),xe.uri.path?xe.path=xe.uri.path:xe.path=xe.uri.pathname+(xe.uri.search||""),xe.path.length===0&&(xe.path="/"),we.aws&&xe.aws(we.aws),we.hawk&&xe.hawk(we.hawk),we.httpSignature&&xe.httpSignature(we.httpSignature),we.auth&&(Object.prototype.hasOwnProperty.call(we.auth,"username")&&(we.auth.user=we.auth.username),Object.prototype.hasOwnProperty.call(we.auth,"password")&&(we.auth.pass=we.auth.password),xe.auth(we.auth.user,we.auth.pass,we.auth.sendImmediately,we.auth.bearer)),xe.gzip&&!xe.hasHeader("accept-encoding")&&xe.setHeader("accept-encoding","gzip, deflate"),xe.uri.auth&&!xe.hasHeader("authorization")){var Tt=xe.uri.auth.split(":").map(function(ze){return xe._qs.unescape(ze)});xe.auth(Tt[0],Tt.slice(1).join(":"),!0)}if(!xe.tunnel&&xe.proxy&&xe.proxy.auth&&!xe.hasHeader("proxy-authorization")){var Wt=xe.proxy.auth.split(":").map(function(ze){return xe._qs.unescape(ze)}),ft="Basic "+oe(Wt.join(":"));xe.setHeader("proxy-authorization",ft)}xe.proxy&&!xe.tunnel&&(xe.path=xe.uri.protocol+"//"+xe.uri.host+xe.path),we.json&&xe.json(we.json),we.multipart&&xe.multipart(we.multipart),we.time&&(xe.timing=!0,xe.elapsedTime=xe.elapsedTime||0);function _t(){if(ie(xe.body)&&(xe.body=z.from(xe.body)),!xe.hasHeader("content-length")){var ze;typeof xe.body=="string"?ze=z.byteLength(xe.body):Array.isArray(xe.body)?ze=xe.body.reduce(function(Ce,Le){return Ce+Le.length},0):ze=xe.body.length,ze?xe.setHeader("content-length",ze):xe.emit("error",new Error("Argument error, options.body."))}}xe.body&&!ee(xe.body)&&_t(),we.oauth?xe.oauth(we.oauth):xe._oauth.params&&xe.hasHeader("authorization")&&xe.oauth(xe._oauth.params);var Xt=xe.proxy&&!xe.tunnel?xe.proxy.protocol:xe.uri.protocol,Nt={"http:":A,"https:":_},qt=xe.httpModules||{};if(xe.httpModule=qt[Xt]||Nt[Xt],!xe.httpModule)return xe.emit("error",new Error("Invalid protocol: "+Xt));if(we.ca&&(xe.ca=we.ca),!xe.agent)if(we.agentOptions&&(xe.agentOptions=we.agentOptions),we.agentClass)xe.agentClass=we.agentClass;else if(we.forever){var nr=ae();nr.major===0&&nr.minor<=10?xe.agentClass=Xt==="http:"?V:V.SSL:(xe.agentClass=xe.httpModule.Agent,xe.agentOptions=xe.agentOptions||{},xe.agentOptions.keepAlive=!0)}else xe.agentClass=xe.httpModule.Agent;xe.pool===!1?xe.agent=!1:xe.agent=xe.agent||xe.getNewAgent(),xe.on("pipe",function(ze){if(xe.ntick&&xe._started&&xe.emit("error",new Error("You cannot pipe to this stream after the outbound request has started.")),xe.src=ze,te(ze))xe.hasHeader("content-type")||xe.setHeader("content-type",L.lookup(ze.path));else{if(ze.headers)for(var Ce in ze.headers)xe.hasHeader(Ce)||xe.setHeader(Ce,ze.headers[Ce]);xe._json&&!xe.hasHeader("content-type")&&xe.setHeader("content-type","application/json"),ze.method&&!xe.explicitMethod&&(xe.method=ze.method)}}),le(function(){if(!xe._aborted){var ze=function(){if(xe._form&&(xe._auth.hasAuth?xe._auth.hasAuth&&xe._auth.sentAuth&&xe._form.pipe(xe):xe._form.pipe(xe)),xe._multipart&&xe._multipart.chunked&&xe._multipart.body.pipe(xe),xe.body)ee(xe.body)?xe.body.pipe(xe):(_t(),Array.isArray(xe.body)?xe.body.forEach(function(Ce){xe.write(Ce)}):xe.write(xe.body),xe.end());else if(xe.requestBodyStream)console.warn("options.requestBodyStream is deprecated, please pass the request object to stream.pipe."),xe.requestBodyStream.pipe(xe);else if(!xe.src){if(xe._auth.hasAuth&&!xe._auth.sentAuth){xe.end();return}xe.method!=="GET"&&typeof xe.method<"u"&&xe.setHeader("content-length",0),xe.end()}};xe._form&&!xe.hasHeader("content-length")?(xe.setHeader(xe._form.getHeaders(),!0),xe._form.getLength(function(Ce,Le){!Ce&&!isNaN(Le)&&xe.setHeader("content-length",Le),ze()})):ze(),xe.ntick=!0}})},Se.prototype.getNewAgent=function(){var we=this,xe=we.agentClass,Fe={};if(we.agentOptions)for(var Ge in we.agentOptions)Fe[Ge]=we.agentOptions[Ge];we.ca&&(Fe.ca=we.ca),we.ciphers&&(Fe.ciphers=we.ciphers),we.secureProtocol&&(Fe.secureProtocol=we.secureProtocol),we.secureOptions&&(Fe.secureOptions=we.secureOptions),typeof we.rejectUnauthorized<"u"&&(Fe.rejectUnauthorized=we.rejectUnauthorized),we.cert&&we.key&&(Fe.key=we.key,Fe.cert=we.cert),we.pfx&&(Fe.pfx=we.pfx),we.passphrase&&(Fe.passphrase=we.passphrase);var Oe="";xe!==we.httpModule.Agent&&(Oe+=xe.name);var et=we.proxy;typeof et=="string"&&(et=I.parse(et));var Mt=et&&et.protocol==="https:"||this.uri.protocol==="https:";return Mt&&(Fe.ca&&(Oe&&(Oe+=":"),Oe+=Fe.ca),typeof Fe.rejectUnauthorized<"u"&&(Oe&&(Oe+=":"),Oe+=Fe.rejectUnauthorized),Fe.cert&&(Oe&&(Oe+=":"),Oe+=Fe.cert.toString("ascii")+Fe.key.toString("ascii")),Fe.pfx&&(Oe&&(Oe+=":"),Oe+=Fe.pfx.toString("ascii")),Fe.ciphers&&(Oe&&(Oe+=":"),Oe+=Fe.ciphers),Fe.secureProtocol&&(Oe&&(Oe+=":"),Oe+=Fe.secureProtocol),Fe.secureOptions&&(Oe&&(Oe+=":"),Oe+=Fe.secureOptions)),we.pool===se&&!Oe&&Object.keys(Fe).length===0&&we.httpModule.globalAgent?we.httpModule.globalAgent:(Oe=we.uri.protocol+Oe,we.pool[Oe]||(we.pool[Oe]=new xe(Fe),we.pool.maxSockets&&(we.pool[Oe].maxSockets=we.pool.maxSockets)),we.pool[Oe])},Se.prototype.start=function(){var we=this;if(we.timing)var xe=new Date().getTime(),Fe=O();if(!we._aborted){we._started=!0,we.method=we.method||"GET",we.href=we.uri.href,we.src&&we.src.stat&&we.src.stat.size&&!we.hasHeader("content-length")&&we.setHeader("content-length",we.src.stat.size),we._aws&&we.aws(we._aws,!0);var Ge=he(we);delete Ge.auth,Ie("make request",we.uri.href),delete Ge.timeout;try{we.req=we.httpModule.request(Ge)}catch(et){we.emit("error",et);return}we.timing&&(we.startTime=xe,we.startTimeNow=Fe,we.timings={});var Oe;we.timeout&&!we.timeoutTimer&&(we.timeout<0?Oe=0:typeof we.timeout=="number"&&isFinite(we.timeout)&&(Oe=we.timeout)),we.req.on("response",we.onRequestResponse.bind(we)),we.req.on("error",we.onRequestError.bind(we)),we.req.on("drain",function(){we.emit("drain")}),we.req.on("socket",function(et){var Mt=et._connecting||et.connecting;if(we.timing&&(we.timings.socket=O()-we.startTimeNow,Mt)){var dt=function(){we.timings.lookup=O()-we.startTimeNow},mt=function(){we.timings.connect=O()-we.startTimeNow};et.once("lookup",dt),et.once("connect",mt),we.req.once("error",function(){et.removeListener("lookup",dt),et.removeListener("connect",mt)})}var Ut=function(){we.req.setTimeout(Oe,function(){if(we.req){we.abort();var vt=new Error("ESOCKETTIMEDOUT");vt.code="ESOCKETTIMEDOUT",vt.connect=!1,we.emit("error",vt)}})};if(Oe!==void 0)if(Mt){var St=function(){et.removeListener("connect",St),we.clearTimeout(),Ut()};et.on("connect",St),we.req.on("error",function(vt){et.removeListener("connect",St)}),we.timeoutTimer=setTimeout(function(){et.removeListener("connect",St),we.abort();var vt=new Error("ETIMEDOUT");vt.code="ETIMEDOUT",vt.connect=!0,we.emit("error",vt)},Oe)}else Ut();we.emit("socket",et)}),we.emit("request",we.req)}},Se.prototype.onRequestError=function(we){var xe=this;if(!xe._aborted){if(xe.req&&xe.req._reusedSocket&&we.code==="ECONNRESET"&&xe.agent.addRequestNoreuse){xe.agent={addRequest:xe.agent.addRequestNoreuse.bind(xe.agent)},xe.start(),xe.req.end();return}xe.clearTimeout(),xe.emit("error",we)}},Se.prototype.onRequestResponse=function(we){var xe=this;if(xe.timing&&(xe.timings.response=O()-xe.startTimeNow),Ie("onRequestResponse",xe.uri.href,we.statusCode,we.headers),we.on("end",function(){xe.timing&&(xe.timings.end=O()-xe.startTimeNow,we.timingStart=xe.startTime,xe.timings.socket||(xe.timings.socket=0),xe.timings.lookup||(xe.timings.lookup=xe.timings.socket),xe.timings.connect||(xe.timings.connect=xe.timings.lookup),xe.timings.response||(xe.timings.response=xe.timings.connect),Ie("elapsed time",xe.timings.end),xe.elapsedTime+=Math.round(xe.timings.end),we.elapsedTime=xe.elapsedTime,we.timings=xe.timings,we.timingPhases={wait:xe.timings.socket,dns:xe.timings.lookup-xe.timings.socket,tcp:xe.timings.connect-xe.timings.lookup,firstByte:xe.timings.response-xe.timings.connect,download:xe.timings.end-xe.timings.response,total:xe.timings.end}),Ie("response end",xe.uri.href,we.statusCode,we.headers)}),xe._aborted){Ie("aborted",xe.uri.href),we.resume();return}if(xe.response=we,we.request=xe,we.toJSON=ke,xe.httpModule===_&&xe.strictSSL&&(!we.hasOwnProperty("socket")||!we.socket.authorized)){Ie("strict ssl error",xe.uri.href);var Fe=we.hasOwnProperty("socket")?we.socket.authorizationError:xe.uri.href+" does not support SSL";xe.emit("error",new Error("SSL Error: "+Fe));return}xe.originalHost=xe.getHeader("host"),xe.originalHostHeaderName||(xe.originalHostHeaderName=xe.hasHeader("host")),xe.setHost&&xe.removeHeader("host"),xe.clearTimeout();var Ge=xe._jar&&xe._jar.setCookie?xe._jar:Q,Oe=function(St){try{Ge.setCookie(St,xe.uri.href,{ignoreError:!0})}catch(vt){xe.emit("error",vt)}};if(we.caseless=U(we.headers),we.caseless.has("set-cookie")&&!xe._disableCookies){var et=we.caseless.has("set-cookie");Array.isArray(we.headers[et])?we.headers[et].forEach(Oe):Oe(we.headers[et])}if(!xe._redirect.onResponse(we)){{we.on("close",function(){xe._ended||xe.response.emit("end")}),we.once("end",function(){xe._ended=!0});var Mt=function(St){return xe.method==="HEAD"||St>=100&&St<200||St===204||St===304},dt;if(xe.gzip&&!Mt(we.statusCode)){var mt=we.headers["content-encoding"]||"identity";mt=mt.trim().toLowerCase();var Ut={flush:R.Z_SYNC_FLUSH,finishFlush:R.Z_SYNC_FLUSH};mt==="gzip"?(dt=R.createGunzip(Ut),we.pipe(dt)):mt==="deflate"?(dt=R.createInflate(Ut),we.pipe(dt)):(mt!=="identity"&&Ie("ignoring unrecognized Content-Encoding "+mt),dt=we)}else dt=we;xe.encoding&&(xe.dests.length!==0?console.error("Ignoring encoding parameter as this stream is being piped to another stream which makes the encoding option invalid."):dt.setEncoding(xe.encoding)),xe._paused&&dt.pause(),xe.responseContent=dt,xe.emit("response",we),xe.dests.forEach(function(St){xe.pipeDest(St)}),dt.on("data",function(St){xe.timing&&!xe.responseStarted&&(xe.responseStartTime=new Date().getTime(),we.responseStartTime=xe.responseStartTime),xe._destdata=!0,xe.emit("data",St)}),dt.once("end",function(St){xe.emit("end",St)}),dt.on("error",function(St){xe.emit("error",St)}),dt.on("close",function(){xe.emit("close")}),xe.callback?xe.readResponseBody(we):xe.on("end",function(){if(xe._aborted){Ie("aborted",xe.uri.href);return}xe.emit("complete",we)})}Ie("finish init function",xe.uri.href)}},Se.prototype.readResponseBody=function(we){var xe=this;Ie("reading response's body");var Fe=[],Ge=0,Oe=[];xe.on("data",function(et){z.isBuffer(et)?et.length&&(Ge+=et.length,Fe.push(et)):Oe.push(et)}),xe.on("end",function(){if(Ie("end event",xe.uri.href),xe._aborted){Ie("aborted",xe.uri.href),Fe=[],Ge=0;return}if(Ge?(Ie("has body",xe.uri.href,Ge),we.body=z.concat(Fe,Ge),xe.encoding!==null&&(we.body=we.body.toString(xe.encoding)),Fe=[],Ge=0):Oe.length&&(xe.encoding==="utf8"&&Oe[0].length>0&&Oe[0][0]==="\uFEFF"&&(Oe[0]=Oe[0].substring(1)),we.body=Oe.join("")),xe._json)try{we.body=JSON.parse(we.body,xe._jsonReviver)}catch{Ie("invalid JSON received",xe.uri.href)}Ie("emitting complete",xe.uri.href),typeof we.body>"u"&&!xe._json&&(we.body=xe.encoding===null?z.alloc(0):""),xe.emit("complete",we,we.body)})},Se.prototype.abort=function(){var we=this;we._aborted=!0,we.req?we.req.abort():we.response&&we.response.destroy(),we.clearTimeout(),we.emit("abort")},Se.prototype.pipeDest=function(we){var xe=this,Fe=xe.response;if(we.headers&&!we.headersSent){if(Fe.caseless.has("content-type")){var Ge=Fe.caseless.has("content-type");we.setHeader?we.setHeader(Ge,Fe.headers[Ge]):we.headers[Ge]=Fe.headers[Ge]}if(Fe.caseless.has("content-length")){var Oe=Fe.caseless.has("content-length");we.setHeader?we.setHeader(Oe,Fe.headers[Oe]):we.headers[Oe]=Fe.headers[Oe]}}if(we.setHeader&&!we.headersSent){for(var et in Fe.headers)(!xe.gzip||et!=="content-encoding")&&we.setHeader(et,Fe.headers[et]);we.statusCode=Fe.statusCode}xe.pipefilter&&xe.pipefilter(Fe,we)},Se.prototype.qs=function(we,xe){var Fe=this,Ge;!xe&&Fe.uri.query?Ge=Fe._qs.parse(Fe.uri.query):Ge={};for(var Oe in we)Ge[Oe]=we[Oe];var et=Fe._qs.stringify(Ge);return et===""||(Fe.uri=I.parse(Fe.uri.href.split("?")[0]+"?"+et),Fe.url=Fe.uri,Fe.path=Fe.uri.path,Fe.uri.host==="unix"&&Fe.enableUnixSocket()),Fe},Se.prototype.form=function(we){var xe=this;return we?(/^application\/x-www-form-urlencoded\b/.test(xe.getHeader("content-type"))||xe.setHeader("content-type","application/x-www-form-urlencoded"),xe.body=typeof we=="string"?xe._qs.rfc3986(we.toString("utf8")):xe._qs.stringify(we).toString("utf8"),xe):(xe._form=new K,xe._form.on("error",function(Fe){Fe.message="form-data: "+Fe.message,xe.emit("error",Fe),xe.abort()}),xe._form)},Se.prototype.multipart=function(we){var xe=this;return xe._multipart.onRequest(we),xe._multipart.chunked||(xe.body=xe._multipart.body),xe},Se.prototype.json=function(we){var xe=this;return xe.hasHeader("accept")||xe.setHeader("accept","application/json"),typeof xe.jsonReplacer=="function"&&(xe._jsonReplacer=xe.jsonReplacer),xe._json=!0,typeof we=="boolean"?xe.body!==void 0&&(/^application\/x-www-form-urlencoded\b/.test(xe.getHeader("content-type"))?xe.body=xe._qs.rfc3986(xe.body):xe.body=Y(xe.body,xe._jsonReplacer),xe.hasHeader("content-type")||xe.setHeader("content-type","application/json")):(xe.body=Y(we,xe._jsonReplacer),xe.hasHeader("content-type")||xe.setHeader("content-type","application/json")),typeof xe.jsonReviver=="function"&&(xe._jsonReviver=xe.jsonReviver),xe},Se.prototype.getHeader=function(we,xe){var Fe=this,Ge,Oe,et;return xe||(xe=Fe.headers),Object.keys(xe).forEach(function(Mt){Mt.length===we.length&&(Oe=new RegExp(we,"i"),et=Mt.match(Oe),et&&(Ge=xe[Mt]))}),Ge},Se.prototype.enableUnixSocket=function(){var we=this.uri.path.split(":"),xe=we[0],Fe=we[1];this.socketPath=xe,this.uri.pathname=Fe,this.uri.path=Fe,this.uri.host=xe,this.uri.hostname=xe,this.uri.isUnix=!0},Se.prototype.auth=function(we,xe,Fe,Ge){var Oe=this;return Oe._auth.onRequest(we,xe,Fe,Ge),Oe},Se.prototype.aws=function(we,xe){var Fe=this;if(!xe)return Fe._aws=we,Fe;if(we.sign_version===4||we.sign_version==="4"){var Ge={host:Fe.uri.host,path:Fe.uri.path,method:Fe.method,headers:Fe.headers,body:Fe.body};we.service&&(Ge.service=we.service);var Oe=D.sign(Ge,{accessKeyId:we.key,secretAccessKey:we.secret,sessionToken:we.session});Fe.setHeader("authorization",Oe.headers.Authorization),Fe.setHeader("x-amz-date",Oe.headers["X-Amz-Date"]),Oe.headers["X-Amz-Security-Token"]&&Fe.setHeader("x-amz-security-token",Oe.headers["X-Amz-Security-Token"])}else{var et=new Date;Fe.setHeader("date",et.toUTCString());var Mt={key:we.key,secret:we.secret,verb:Fe.method.toUpperCase(),date:et,contentType:Fe.getHeader("content-type")||"",md5:Fe.getHeader("content-md5")||"",amazonHeaders:P.canonicalizeHeaders(Fe.headers)},dt=Fe.uri.path;we.bucket&&dt?Mt.resource="/"+we.bucket+dt:we.bucket&&!dt?Mt.resource="/"+we.bucket:!we.bucket&&dt?Mt.resource=dt:!we.bucket&&!dt&&(Mt.resource="/"),Mt.resource=P.canonicalizeResource(Mt.resource),Fe.setHeader("authorization",P.authorization(Mt))}return Fe},Se.prototype.httpSignature=function(we){var xe=this;return F.signRequest({getHeader:function(Fe){return xe.getHeader(Fe,xe.headers)},setHeader:function(Fe,Ge){xe.setHeader(Fe,Ge)},method:xe.method,path:xe.path},we),Ie("httpSignature authorization",xe.getHeader("authorization")),xe},Se.prototype.hawk=function(we){var xe=this;xe.setHeader("Authorization",_e.header(xe.uri,xe.method,we))},Se.prototype.oauth=function(we){var xe=this;return xe._oauth.onRequest(we),xe},Se.prototype.jar=function(we){var xe=this,Fe;if(xe._redirect.redirectsFollowed===0&&(xe.originalCookieHeader=xe.getHeader("cookie")),!we)Fe=!1,xe._disableCookies=!0;else{var Ge=we.getCookieString?we:Q,Oe=xe.uri.href;Ge&&(Fe=Ge.getCookieString(Oe))}return Fe&&Fe.length&&(xe.originalCookieHeader?xe.setHeader("cookie",xe.originalCookieHeader+"; "+Fe):xe.setHeader("cookie",Fe)),xe._jar=we,xe},Se.prototype.pipe=function(we,xe){var Fe=this;if(Fe.response)if(Fe._destdata)Fe.emit("error",new Error("You cannot pipe after data has been emitted from the response."));else if(Fe._ended)Fe.emit("error",new Error("You cannot pipe after the response has been ended."));else return T.Stream.prototype.pipe.call(Fe,we,xe),Fe.pipeDest(we),we;else return Fe.dests.push(we),T.Stream.prototype.pipe.call(Fe,we,xe),we},Se.prototype.write=function(){var we=this;if(!we._aborted&&(we._started||we.start(),we.req))return we.req.write.apply(we.req,arguments)},Se.prototype.end=function(we){var xe=this;xe._aborted||(we&&xe.write(we),xe._started||xe.start(),xe.req&&xe.req.end())},Se.prototype.pause=function(){var we=this;we.responseContent?we.responseContent.pause.apply(we.responseContent,arguments):we._paused=!0},Se.prototype.resume=function(){var we=this;we.responseContent?we.responseContent.resume.apply(we.responseContent,arguments):we._paused=!1},Se.prototype.destroy=function(){var we=this;this.clearTimeout(),we._ended?we.response&&we.response.destroy():we.end()},Se.prototype.clearTimeout=function(){this.timeoutTimer&&(clearTimeout(this.timeoutTimer),this.timeoutTimer=null)},Se.defaultProxyHeaderWhiteList=ue.defaultProxyHeaderWhiteList.slice(),Se.defaultProxyHeaderExclusiveList=ue.defaultProxyHeaderExclusiveList.slice(),Se.prototype.toJSON=Ee,request=Se,request}var request_1,hasRequiredRequest;function requireRequest(){if(hasRequiredRequest)return request_1;hasRequiredRequest=1;var E=requireExtend(),A=requireCookies(),_=requireHelpers(),I=_.paramsHaveRequestBody;function B(D,F,L){typeof F=="function"&&(L=F);var U={};return F!==null&&typeof F=="object"?E(U,F,{uri:D}):typeof D=="string"?E(U,{uri:D}):E(U,D),U.callback=L||U.callback,U}function T(D,F,L){if(typeof D>"u")throw new Error("undefined is not a valid uri or options object.");var U=B(D,F,L);if(U.method==="HEAD"&&I(U))throw new Error("HTTP HEAD requests MUST NOT include a request body.");return new T.Request(U)}function R(D){var F=D.toUpperCase();return function(L,U,V){var K=B(L,U,V);return K.method=F,T(K,K.callback)}}T.get=R("get"),T.head=R("head"),T.options=R("options"),T.post=R("post"),T.put=R("put"),T.patch=R("patch"),T.del=R("delete"),T.delete=R("delete"),T.jar=function(D){return A.jar(D)},T.cookie=function(D){return A.parse(D)};function P(D,F,L,U){return function(V,K,J){var ee=B(V,K,J),ie={};return E(!0,ie,F,ee),ie.pool=ee.pool||F.pool,U&&(ie.method=U.toUpperCase()),typeof L=="function"&&(D=L),D(ie,ie.callback)}}return T.defaults=function(D,F){var L=this;D=D||{},typeof D=="function"&&(F=D,D={});var U=P(L,D,F),V=["get","head","post","put","patch","del","delete"];return V.forEach(function(K){U[K]=P(L[K],D,F,K)}),U.cookie=P(L.cookie,D,F),U.jar=L.jar,U.defaults=L.defaults,U},T.forever=function(D,F){var L={};return F&&E(L,F),D&&(L.agentOptions=D),L.forever=!0,T.defaults(L)},request_1=T,T.Request=requireRequest$1(),T.initParams=B,Object.defineProperty(T,"debug",{enumerable:!0,get:function(){return T.Request.debug},set:function(D){T.Request.debug=D}}),request_1}var lodash_clonedeep={exports:{}};lodash_clonedeep.exports;var hasRequiredLodash_clonedeep;function requireLodash_clonedeep(){return hasRequiredLodash_clonedeep||(hasRequiredLodash_clonedeep=1,(function(E,A){var _=200,I="__lodash_hash_undefined__",B=9007199254740991,T="[object Arguments]",R="[object Array]",P="[object Boolean]",D="[object Date]",F="[object Error]",L="[object Function]",U="[object GeneratorFunction]",V="[object Map]",K="[object Number]",J="[object Object]",ee="[object Promise]",ie="[object RegExp]",ne="[object Set]",ce="[object String]",fe="[object Symbol]",de="[object WeakMap]",pe="[object ArrayBuffer]",ve="[object DataView]",ye="[object Float32Array]",_e="[object Float64Array]",be="[object Int8Array]",Te="[object Int16Array]",ue="[object Int32Array]",O="[object Uint8Array]",z="[object Uint8ClampedArray]",Y="[object Uint16Array]",te="[object Uint32Array]",oe=/[\\^$.*+?()[\]{}|]/g,le=/\w*$/,he=/^\[object .+?Constructor\]$/,ae=/^(?:0|[1-9]\d*)$/,Q={};Q[T]=Q[R]=Q[pe]=Q[ve]=Q[P]=Q[D]=Q[ye]=Q[_e]=Q[be]=Q[Te]=Q[ue]=Q[V]=Q[K]=Q[J]=Q[ie]=Q[ne]=Q[ce]=Q[fe]=Q[O]=Q[z]=Q[Y]=Q[te]=!0,Q[F]=Q[L]=Q[de]=!1;var se=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,Ae=typeof self=="object"&&self&&self.Object===Object&&self,ge=se||Ae||Function("return this")(),Ee=A&&!A.nodeType&&A,ke=Ee&&!0&&E&&!E.nodeType&&E,Se=ke&&ke.exports===Ee;function Ie(at,Ft){return at.set(Ft[0],Ft[1]),at}function we(at,Ft){return at.add(Ft),at}function xe(at,Ft){for(var Yt=-1,pr=at?at.length:0;++Yt<pr&&Ft(at[Yt],Yt,at)!==!1;);return at}function Fe(at,Ft){for(var Yt=-1,pr=Ft.length,Br=at.length;++Yt<pr;)at[Br+Yt]=Ft[Yt];return at}function Ge(at,Ft,Yt,pr){for(var Br=-1,Tr=at?at.length:0;++Br<Tr;)Yt=Ft(Yt,at[Br],Br,at);return Yt}function Oe(at,Ft){for(var Yt=-1,pr=Array(at);++Yt<at;)pr[Yt]=Ft(Yt);return pr}function et(at,Ft){return at?.[Ft]}function Mt(at){var Ft=!1;if(at!=null&&typeof at.toString!="function")try{Ft=!!(at+"")}catch{}return Ft}function dt(at){var Ft=-1,Yt=Array(at.size);return at.forEach(function(pr,Br){Yt[++Ft]=[Br,pr]}),Yt}function mt(at,Ft){return function(Yt){return at(Ft(Yt))}}function Ut(at){var Ft=-1,Yt=Array(at.size);return at.forEach(function(pr){Yt[++Ft]=pr}),Yt}var St=Array.prototype,vt=Function.prototype,It=Object.prototype,yt=ge["__core-js_shared__"],Tt=(function(){var at=/[^.]+$/.exec(yt&&yt.keys&&yt.keys.IE_PROTO||"");return at?"Symbol(src)_1."+at:""})(),Wt=vt.toString,ft=It.hasOwnProperty,_t=It.toString,Xt=RegExp("^"+Wt.call(ft).replace(oe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Nt=Se?ge.Buffer:void 0,qt=ge.Symbol,nr=ge.Uint8Array,ze=mt(Object.getPrototypeOf,Object),Ce=Object.create,Le=It.propertyIsEnumerable,Ze=St.splice,Je=Object.getOwnPropertySymbols,nt=Nt?Nt.isBuffer:void 0,rt=mt(Object.keys,Object),He=tt(ge,"DataView"),Dt=tt(ge,"Map"),Rt=tt(ge,"Promise"),De=tt(ge,"Set"),We=tt(ge,"WeakMap"),Ve=tt(Object,"create"),qe=Ir(He),pt=Ir(Dt),At=Ir(Rt),jt=Ir(De),rr=Ir(We),Ke=qt?qt.prototype:void 0,Ne=Ke?Ke.valueOf:void 0;function Ye(at){var Ft=-1,Yt=at?at.length:0;for(this.clear();++Ft<Yt;){var pr=at[Ft];this.set(pr[0],pr[1])}}function st(){this.__data__=Ve?Ve(null):{}}function bt(at){return this.has(at)&&delete this.__data__[at]}function Qe(at){var Ft=this.__data__;if(Ve){var Yt=Ft[at];return Yt===I?void 0:Yt}return ft.call(Ft,at)?Ft[at]:void 0}function Re(at){var Ft=this.__data__;return Ve?Ft[at]!==void 0:ft.call(Ft,at)}function Pe(at,Ft){var Yt=this.__data__;return Yt[at]=Ve&&Ft===void 0?I:Ft,this}Ye.prototype.clear=st,Ye.prototype.delete=bt,Ye.prototype.get=Qe,Ye.prototype.has=Re,Ye.prototype.set=Pe;function Me(at){var Ft=-1,Yt=at?at.length:0;for(this.clear();++Ft<Yt;){var pr=at[Ft];this.set(pr[0],pr[1])}}function $e(){this.__data__=[]}function it(at){var Ft=this.__data__,Yt=hr(Ft,at);if(Yt<0)return!1;var pr=Ft.length-1;return Yt==pr?Ft.pop():Ze.call(Ft,Yt,1),!0}function kt(at){var Ft=this.__data__,Yt=hr(Ft,at);return Yt<0?void 0:Ft[Yt][1]}function xt(at){return hr(this.__data__,at)>-1}function Ot(at,Ft){var Yt=this.__data__,pr=hr(Yt,at);return pr<0?Yt.push([at,Ft]):Yt[pr][1]=Ft,this}Me.prototype.clear=$e,Me.prototype.delete=it,Me.prototype.get=kt,Me.prototype.has=xt,Me.prototype.set=Ot;function Jt(at){var Ft=-1,Yt=at?at.length:0;for(this.clear();++Ft<Yt;){var pr=at[Ft];this.set(pr[0],pr[1])}}function tr(){this.__data__={hash:new Ye,map:new(Dt||Me),string:new Ye}}function br(at){return Ue(this,at).delete(at)}function ar(at){return Ue(this,at).get(at)}function _r(at){return Ue(this,at).has(at)}function or(at,Ft){return Ue(this,at).set(at,Ft),this}Jt.prototype.clear=tr,Jt.prototype.delete=br,Jt.prototype.get=ar,Jt.prototype.has=_r,Jt.prototype.set=or;function gr(at){this.__data__=new Me(at)}function xr(){this.__data__=new Me}function vr(at){return this.__data__.delete(at)}function Cr(at){return this.__data__.get(at)}function Sr(at){return this.__data__.has(at)}function dr(at,Ft){var Yt=this.__data__;if(Yt instanceof Me){var pr=Yt.__data__;if(!Dt||pr.length<_-1)return pr.push([at,Ft]),this;Yt=this.__data__=new Jt(pr)}return Yt.set(at,Ft),this}gr.prototype.clear=xr,gr.prototype.delete=vr,gr.prototype.get=Cr,gr.prototype.has=Sr,gr.prototype.set=dr;function wr(at,Ft){var Yt=jr(at)||Pr(at)?Oe(at.length,String):[],pr=Yt.length,Br=!!pr;for(var Tr in at)ft.call(at,Tr)&&!(Br&&(Tr=="length"||Qt(Tr,pr)))&&Yt.push(Tr);return Yt}function fr(at,Ft,Yt){var pr=at[Ft];(!(ft.call(at,Ft)&&Or(pr,Yt))||Yt===void 0&&!(Ft in at))&&(at[Ft]=Yt)}function hr(at,Ft){for(var Yt=at.length;Yt--;)if(Or(at[Yt][0],Ft))return Yt;return-1}function Ar(at,Ft){return at&&Er(Ft,wt(Ft),at)}function ur(at,Ft,Yt,pr,Br,Tr,Nr){var Dr;if(pr&&(Dr=Tr?pr(at,Br,Tr,Nr):pr(at)),Dr!==void 0)return Dr;if(!me(at))return at;var Lr=jr(at);if(Lr){if(Dr=Xe(at),!Ft)return yr(at,Dr)}else{var zr=je(at),Mr=zr==L||zr==U;if(Hr(at))return Bt(at,Ft);if(zr==J||zr==T||Mr&&!Tr){if(Mt(at))return Tr?at:{};if(Dr=lt(Mr?{}:at),!Ft)return ct(at,Ar(Dr,at))}else{if(!Q[zr])return Tr?at:{};Dr=Ct(at,zr,ur,Ft)}}Nr||(Nr=new gr);var Qr=Nr.get(at);if(Qr)return Qr;if(Nr.set(at,Dr),!Lr)var Vr=Yt?Be(at):wt(at);return xe(Vr||at,function(Ur,Xr){Vr&&(Xr=Ur,Ur=at[Xr]),fr(Dr,Xr,ur(Ur,Ft,Yt,pr,Xr,at,Nr))}),Dr}function zt(at){return me(at)?Ce(at):{}}function Kt(at,Ft,Yt){var pr=Ft(at);return jr(at)?pr:Fe(pr,Yt(at))}function lr(at){return _t.call(at)}function ot(at){if(!me(at)||er(at))return!1;var Ft=ti(at)||Mt(at)?Xt:he;return Ft.test(Ir(at))}function ut(at){if(!ir(at))return rt(at);var Ft=[];for(var Yt in Object(at))ft.call(at,Yt)&&Yt!="constructor"&&Ft.push(Yt);return Ft}function Bt(at,Ft){if(Ft)return at.slice();var Yt=new at.constructor(at.length);return at.copy(Yt),Yt}function Lt(at){var Ft=new at.constructor(at.byteLength);return new nr(Ft).set(new nr(at)),Ft}function $t(at,Ft){var Yt=Ft?Lt(at.buffer):at.buffer;return new at.constructor(Yt,at.byteOffset,at.byteLength)}function Zt(at,Ft,Yt){var pr=Ft?Yt(dt(at),!0):dt(at);return Ge(pr,Ie,new at.constructor)}function Vt(at){var Ft=new at.constructor(at.source,le.exec(at));return Ft.lastIndex=at.lastIndex,Ft}function Et(at,Ft,Yt){var pr=Ft?Yt(Ut(at),!0):Ut(at);return Ge(pr,we,new at.constructor)}function sr(at){return Ne?Object(Ne.call(at)):{}}function cr(at,Ft){var Yt=Ft?Lt(at.buffer):at.buffer;return new at.constructor(Yt,at.byteOffset,at.length)}function yr(at,Ft){var Yt=-1,pr=at.length;for(Ft||(Ft=Array(pr));++Yt<pr;)Ft[Yt]=at[Yt];return Ft}function Er(at,Ft,Yt,pr){Yt||(Yt={});for(var Br=-1,Tr=Ft.length;++Br<Tr;){var Nr=Ft[Br],Dr=void 0;fr(Yt,Nr,Dr===void 0?at[Nr]:Dr)}return Yt}function ct(at,Ft){return Er(at,gt(at),Ft)}function Be(at){return Kt(at,wt,gt)}function Ue(at,Ft){var Yt=at.__data__;return Ht(Ft)?Yt[typeof Ft=="string"?"string":"hash"]:Yt.map}function tt(at,Ft){var Yt=et(at,Ft);return ot(Yt)?Yt:void 0}var gt=Je?mt(Je,Object):Pt,je=lr;(He&&je(new He(new ArrayBuffer(1)))!=ve||Dt&&je(new Dt)!=V||Rt&&je(Rt.resolve())!=ee||De&&je(new De)!=ne||We&&je(new We)!=de)&&(je=function(at){var Ft=_t.call(at),Yt=Ft==J?at.constructor:void 0,pr=Yt?Ir(Yt):void 0;if(pr)switch(pr){case qe:return ve;case pt:return V;case At:return ee;case jt:return ne;case rr:return de}return Ft});function Xe(at){var Ft=at.length,Yt=at.constructor(Ft);return Ft&&typeof at[0]=="string"&&ft.call(at,"index")&&(Yt.index=at.index,Yt.input=at.input),Yt}function lt(at){return typeof at.constructor=="function"&&!ir(at)?zt(ze(at)):{}}function Ct(at,Ft,Yt,pr){var Br=at.constructor;switch(Ft){case pe:return Lt(at);case P:case D:return new Br(+at);case ve:return $t(at,pr);case ye:case _e:case be:case Te:case ue:case O:case z:case Y:case te:return cr(at,pr);case V:return Zt(at,pr,Yt);case K:case ce:return new Br(at);case ie:return Vt(at);case ne:return Et(at,pr,Yt);case fe:return sr(at)}}function Qt(at,Ft){return Ft=Ft??B,!!Ft&&(typeof at=="number"||ae.test(at))&&at>-1&&at%1==0&&at<Ft}function Ht(at){var Ft=typeof at;return Ft=="string"||Ft=="number"||Ft=="symbol"||Ft=="boolean"?at!=="__proto__":at===null}function er(at){return!!Tt&&Tt in at}function ir(at){var Ft=at&&at.constructor,Yt=typeof Ft=="function"&&Ft.prototype||It;return at===Yt}function Ir(at){if(at!=null){try{return Wt.call(at)}catch{}try{return at+""}catch{}}return""}function kr(at){return ur(at,!0,!0)}function Or(at,Ft){return at===Ft||at!==at&&Ft!==Ft}function Pr(at){return qr(at)&&ft.call(at,"callee")&&(!Le.call(at,"callee")||_t.call(at)==T)}var jr=Array.isArray;function $r(at){return at!=null&&Wr(at.length)&&!ti(at)}function qr(at){return ht(at)&&$r(at)}var Hr=nt||Gt;function ti(at){var Ft=me(at)?_t.call(at):"";return Ft==L||Ft==U}function Wr(at){return typeof at=="number"&&at>-1&&at%1==0&&at<=B}function me(at){var Ft=typeof at;return!!at&&(Ft=="object"||Ft=="function")}function ht(at){return!!at&&typeof at=="object"}function wt(at){return $r(at)?wr(at):ut(at)}function Pt(){return[]}function Gt(){return!1}E.exports=kr})(lodash_clonedeep,lodash_clonedeep.exports)),lodash_clonedeep.exports}var main$1={exports:{}},browser={},hasRequiredBrowser;function requireBrowser(){return hasRequiredBrowser||(hasRequiredBrowser=1,browser.endianness=function(){return"LE"},browser.hostname=function(){return typeof location<"u"?location.hostname:""},browser.loadavg=function(){return[]},browser.uptime=function(){return 0},browser.freemem=function(){return Number.MAX_VALUE},browser.totalmem=function(){return Number.MAX_VALUE},browser.cpus=function(){return[]},browser.type=function(){return"Browser"},browser.release=function(){return typeof navigator<"u"?navigator.appVersion:""},browser.networkInterfaces=browser.getNetworkInterfaces=function(){return{}},browser.arch=function(){return"javascript"},browser.platform=function(){return"browser"},browser.tmpdir=browser.tmpDir=function(){return"/tmp"},browser.EOL=`
`,browser.homedir=function(){return"/"}),browser}const version="16.6.1",require$$4={version};var hasRequiredMain$1;function requireMain$1(){if(hasRequiredMain$1)return main$1.exports;hasRequiredMain$1=1;var E={};const A=require$$0$3,_=requirePathBrowserify(),I=requireBrowser(),B=requireCryptoBrowserify(),R=require$$4.version,P=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function D(ye){const _e={};let be=ye.toString();be=be.replace(/\r\n?/mg,`
`);let Te;for(;(Te=P.exec(be))!=null;){const ue=Te[1];let O=Te[2]||"";O=O.trim();const z=O[0];O=O.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),z==='"'&&(O=O.replace(/\\n/g,`
`),O=O.replace(/\\r/g,"\r")),_e[ue]=O}return _e}function F(ye){ye=ye||{};const _e=ee(ye);ye.path=_e;const be=ve.configDotenv(ye);if(!be.parsed){const z=new Error(`MISSING_DATA: Cannot parse ${_e} for an unknown reason`);throw z.code="MISSING_DATA",z}const Te=K(ye).split(","),ue=Te.length;let O;for(let z=0;z<ue;z++)try{const Y=Te[z].trim(),te=J(be,Y);O=ve.decrypt(te.ciphertext,te.key);break}catch(Y){if(z+1>=ue)throw Y}return ve.parse(O)}function L(ye){console.log(`[dotenv@${R}][WARN] ${ye}`)}function U(ye){console.log(`[dotenv@${R}][DEBUG] ${ye}`)}function V(ye){console.log(`[dotenv@${R}] ${ye}`)}function K(ye){return ye&&ye.DOTENV_KEY&&ye.DOTENV_KEY.length>0?ye.DOTENV_KEY:E.DOTENV_KEY&&E.DOTENV_KEY.length>0?E.DOTENV_KEY:""}function J(ye,_e){let be;try{be=new URL(_e)}catch(Y){if(Y.code==="ERR_INVALID_URL"){const te=new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw te.code="INVALID_DOTENV_KEY",te}throw Y}const Te=be.password;if(!Te){const Y=new Error("INVALID_DOTENV_KEY: Missing key part");throw Y.code="INVALID_DOTENV_KEY",Y}const ue=be.searchParams.get("environment");if(!ue){const Y=new Error("INVALID_DOTENV_KEY: Missing environment part");throw Y.code="INVALID_DOTENV_KEY",Y}const O=`DOTENV_VAULT_${ue.toUpperCase()}`,z=ye.parsed[O];if(!z){const Y=new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${O} in your .env.vault file.`);throw Y.code="NOT_FOUND_DOTENV_ENVIRONMENT",Y}return{ciphertext:z,key:Te}}function ee(ye){let _e=null;if(ye&&ye.path&&ye.path.length>0)if(Array.isArray(ye.path))for(const be of ye.path)A.existsSync(be)&&(_e=be.endsWith(".vault")?be:`${be}.vault`);else _e=ye.path.endsWith(".vault")?ye.path:`${ye.path}.vault`;else _e=_.resolve(process$1.cwd(),".env.vault");return A.existsSync(_e)?_e:null}function ie(ye){return ye[0]==="~"?_.join(I.homedir(),ye.slice(1)):ye}function ne(ye){const _e=!!(ye&&ye.debug),be=ye&&"quiet"in ye?ye.quiet:!0;(_e||!be)&&V("Loading env from encrypted .env.vault");const Te=ve._parseVault(ye);let ue=E;return ye&&ye.processEnv!=null&&(ue=ye.processEnv),ve.populate(ue,Te,ye),{parsed:Te}}function ce(ye){const _e=_.resolve(process$1.cwd(),".env");let be="utf8";const Te=!!(ye&&ye.debug),ue=ye&&"quiet"in ye?ye.quiet:!0;ye&&ye.encoding?be=ye.encoding:Te&&U("No encoding is specified. UTF-8 is used by default");let O=[_e];if(ye&&ye.path)if(!Array.isArray(ye.path))O=[ie(ye.path)];else{O=[];for(const oe of ye.path)O.push(ie(oe))}let z;const Y={};for(const oe of O)try{const le=ve.parse(A.readFileSync(oe,{encoding:be}));ve.populate(Y,le,ye)}catch(le){Te&&U(`Failed to load ${oe} ${le.message}`),z=le}let te=E;if(ye&&ye.processEnv!=null&&(te=ye.processEnv),ve.populate(te,Y,ye),Te||!ue){const oe=Object.keys(Y).length,le=[];for(const he of O)try{const ae=_.relative(process$1.cwd(),he);le.push(ae)}catch(ae){Te&&U(`Failed to load ${he} ${ae.message}`),z=ae}V(`injecting env (${oe}) from ${le.join(",")}`)}return z?{parsed:Y,error:z}:{parsed:Y}}function fe(ye){if(K(ye).length===0)return ve.configDotenv(ye);const _e=ee(ye);return _e?ve._configVault(ye):(L(`You set DOTENV_KEY but you are missing a .env.vault file at ${_e}. Did you forget to build it?`),ve.configDotenv(ye))}function de(ye,_e){const be=Buffer$1.from(_e.slice(-64),"hex");let Te=Buffer$1.from(ye,"base64");const ue=Te.subarray(0,12),O=Te.subarray(-16);Te=Te.subarray(12,-16);try{const z=B.createDecipheriv("aes-256-gcm",be,ue);return z.setAuthTag(O),`${z.update(Te)}${z.final()}`}catch(z){const Y=z instanceof RangeError,te=z.message==="Invalid key length",oe=z.message==="Unsupported state or unable to authenticate data";if(Y||te){const le=new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw le.code="INVALID_DOTENV_KEY",le}else if(oe){const le=new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw le.code="DECRYPTION_FAILED",le}else throw z}}function pe(ye,_e,be={}){const Te=!!(be&&be.debug),ue=!!(be&&be.override);if(typeof _e!="object"){const O=new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw O.code="OBJECT_REQUIRED",O}for(const O of Object.keys(_e))Object.prototype.hasOwnProperty.call(ye,O)?(ue===!0&&(ye[O]=_e[O]),Te&&U(ue===!0?`"${O}" is already defined and WAS overwritten`:`"${O}" is already defined and was NOT overwritten`)):ye[O]=_e[O]}const ve={configDotenv:ce,_configVault:ne,_parseVault:F,config:fe,decrypt:de,parse:D,populate:pe};return main$1.exports.configDotenv=ve.configDotenv,main$1.exports._configVault=ve._configVault,main$1.exports._parseVault=ve._parseVault,main$1.exports.config=ve.config,main$1.exports.decrypt=ve.decrypt,main$1.exports.parse=ve.parse,main$1.exports.populate=ve.populate,main$1.exports=ve,main$1.exports}var hasRequiredDist;function requireDist(){return hasRequiredDist||(hasRequiredDist=1,(function(E){var A={},_=requireRequest(),I=requireLodash_clonedeep(),B=requirePathBrowserify(),T=requireMain$1();class R{static round(Be,Ue){return parseFloat(Be.toFixed(Ue))}static clamp(Be,Ue,tt){return Math.max(Ue,Math.min(Be,tt))}static calculateStandardDeviation(Be){if(Be.length===0)return 0;const Ue=Be.reduce((tt,gt)=>tt+gt)/Be.length;return Math.sqrt(Be.reduce((tt,gt)=>tt+Math.pow(gt-Ue,2),0)/Be.length)}static degreesToRadians(Be){return Be*Math.PI/180}static radiansToDegrees(Be){return Be*180/Math.PI}}class P{n300;n100;n50;nmiss;constructor(Be){this.nmiss=Be.nmiss??0,this.n300=Be.n300??-1,this.n100=Be.n100??0,this.n50=Be.n50??0;let Ue;if(Be.nobjects){let tt=this.n300;Ue=Be.nobjects;let gt;tt<0&&(tt=Math.max(0,Ue-this.n100-this.n50-this.nmiss)),gt=tt+this.n100+this.n50+this.nmiss,gt>Ue&&(tt-=Math.min(tt,gt-Ue)),gt=tt+this.n100+this.n50+this.nmiss,gt>Ue&&(this.n100-=Math.min(this.n100,gt-Ue)),gt=tt+this.n100+this.n50+this.nmiss,gt>Ue&&(this.n50-=Math.min(this.n50,gt-Ue)),gt=tt+this.n100+this.n50+this.nmiss,gt>Ue&&(this.nmiss-=Math.min(this.nmiss,gt-Ue)),this.n300=Ue-this.n100-this.n50-this.nmiss}if(Be.percent){if(!Be.nobjects)throw new TypeError("nobjects is required when specifying percent");Ue=Be.nobjects;const tt=Ue-this.nmiss,gt=new P({n300:tt,n100:0,n50:0,nmiss:this.nmiss}).value()*100;let je=Be.percent;je=Math.max(0,Math.min(gt,je)),this.n100=Math.round(-3*((je*.01-1)*Ue+this.nmiss)*.5),this.n100>tt&&(this.n100=0,this.n50=Math.round(-6*((je*.01-1)*Ue+this.nmiss)*.5),this.n50=Math.min(tt,this.n50)),this.n300=Ue-this.n100-this.n50-this.nmiss}}value(Be){let Ue=this.n300;if(Ue<0){if(!Be)throw new TypeError("Either n300 or nobjects must be specified");Ue=Be-this.n100-this.n50-this.nmiss}else Be??=Ue+this.n100+this.n50+this.nmiss;const tt=(Ue*6+this.n100*2+this.n50)/(Be*6);return R.clamp(tt,0,1)}}E.Anchor=void 0,(function(ct){ct.topLeft="TopLeft",ct.center="Centre",ct.centerLeft="CentreLeft",ct.topRight="TopRight",ct.bottomCenter="BottomCentre",ct.topCenter="TopCentre",ct.custom="Custom",ct.centerRight="CentreRight",ct.bottomLeft="BottomLeft",ct.bottomRight="BottomRight"})(E.Anchor||(E.Anchor={})),E.AnimationLoopType=void 0,(function(ct){ct.loopForever="LoopForever",ct.loopOnce="LoopOnce"})(E.AnimationLoopType||(E.AnimationLoopType={}));class D{static getRandomArrayElement(Be){return Be[Math.floor(Math.random()*Be.length)]}static deepCopy(Be){return I(Be)}static initializeArray(Be,Ue){const tt=new Array(Be);if(Ue!==void 0)for(let gt=0;gt<Be;++gt)tt[gt]=Ue;return tt}static sleep(Be){return new Promise(Ue=>setTimeout(Ue,Be*1e3))}}class F{requiresAPIkey=!0;endpoint="";params=new Map;fetchAttempts=0;setEndpoint(Be){return this.endpoint=Be,this}setRequireAPIkey(Be){return this.requiresAPIkey=Be,this}buildURL(){let Be=this.host+this.endpoint;if(this instanceof L&&this.endpoint==="upload"){Be+="/";for(const[,Ue]of this.params.entries())Be+=Ue;return Be}if(Be+="?",this.requiresAPIkey){if(!this.APIkey)throw new Error("An API key is not specified as environment variable");Be+=this.APIkeyParam}for(const[Ue,tt]of this.params.entries())Be+=`${Ue}=${encodeURIComponent(tt)}&`;return Be}sendRequest(){return new Promise(Be=>{const Ue=this.buildURL(),tt=[];_(Ue).on("data",gt=>{tt.push(Buffer$1.from(gt))}).on("complete",async gt=>{++this.fetchAttempts;const{statusCode:je}=gt;return(je===500||je===503)&&this.fetchAttempts<5?(console.error(`Request to ${Ue} failed; ${this.fetchAttempts} attempts so far; retrying`),await D.sleep(.2),Be(this.sendRequest())):Be({data:Buffer$1.concat(tt),statusCode:gt.statusCode})}).on("error",gt=>{throw gt})})}addParameter(Be,Ue){return this.params.set(Be,Ue),this}removeParameter(Be){return this.params.delete(Be),this}}class L extends F{host="https://osudroid.moe/api/";APIkey=A.DROID_API_KEY;APIkeyParam=`apiKey=${this.APIkey}&`}class U extends F{host="https://osu.ppy.sh/api/";APIkey=A.OSU_API_KEY;APIkeyParam=`k=${this.APIkey}&`}E.Modes=void 0,(function(ct){ct.droid="droid",ct.osu="osu"})(E.Modes||(E.Modes={})),E.ObjectTypes=void 0,(function(ct){ct[ct.circle=1]="circle",ct[ct.slider=2]="slider",ct[ct.newCombo=4]="newCombo",ct[ct.spinner=8]="spinner",ct[ct.comboOffset=112]="comboOffset"})(E.ObjectTypes||(E.ObjectTypes={}));class V{x;y;constructor(Be,Ue){this.x=Be,this.y=Ue}multiply(Be){return new V(this.x*Be.x,this.y*Be.y)}divide(Be){if(Be===0)throw new Error("Division by 0");return new V(this.x/Be,this.y/Be)}add(Be){return new V(this.x+Be.x,this.y+Be.y)}subtract(Be){return new V(this.x-Be.x,this.y-Be.y)}get length(){return Math.hypot(this.x,this.y)}dot(Be){return this.x*Be.x+this.y*Be.y}scale(Be){return new V(this.x*Be,this.y*Be)}getDistance(Be){return Math.hypot(this.x-Be.x,this.y-Be.y)}getAngle(Be){return Math.atan2(Be.y-this.y,Be.x-this.x)}normalize(){const Be=this.length;this.x/=Be,this.y/=Be}equals(Be){return this.x===Be.x&&this.y===Be.y}toString(){return`${this.x},${this.y}`}}class K{static baseRadius=64;startTime;type;position;endPosition;endTime;get duration(){return this.endTime-this.startTime}isNewCombo;comboOffset;samples=[];_stackHeight=0;get stackHeight(){return this._stackHeight}set stackHeight(Be){this._stackHeight=Be}_droidScale=1;get droidScale(){return this._droidScale}set droidScale(Be){this._droidScale=Be}_osuScale=1;get osuScale(){return this._osuScale}set osuScale(Be){this._osuScale=Be}get typeStr(){let Be="";return this.type&E.ObjectTypes.circle&&(Be+="circle | "),this.type&E.ObjectTypes.slider&&(Be+="slider | "),this.type&E.ObjectTypes.spinner&&(Be+="spinner | "),Be.substring(0,Math.max(0,Be.length-3))}constructor(Be){this.startTime=Be.startTime,this.endTime=Be.endTime??Be.startTime,this.type=Be.type??E.ObjectTypes.circle,this.position=Be.position,this.endPosition=Be.endPosition??this.position,this.isNewCombo=Be.newCombo??!1,this.comboOffset=Be.comboOffset??0}getRadius(Be){switch(Be){case E.Modes.droid:return K.baseRadius*this._droidScale;case E.Modes.osu:return K.baseRadius*this._osuScale}}getStackOffset(Be){let Ue=this._stackHeight;switch(Be){case E.Modes.droid:Ue*=this._droidScale*4;break;case E.Modes.osu:Ue*=this._osuScale*-6.4;break}return new V(Ue,Ue)}getStackedPosition(Be){return this.evaluateStackedPosition(this.position,Be)}getStackedEndPosition(Be){return this.evaluateStackedPosition(this.endPosition,Be)}evaluateStackedPosition(Be,Ue){return this.type&E.ObjectTypes.spinner?Be:Be.add(this.getStackOffset(Ue))}}class J extends K{constructor(Be){super(Be)}toString(){return`Position: [${this.position.x}, ${this.position.y}]`}}class ee extends J{}class ie extends K{repeatIndex;spanDuration;constructor(Be){super(Be),this.repeatIndex=Be.repeatIndex,this.spanDuration=Be.spanDuration}toString(){return`Position: [${this.position.x}, ${this.position.y}], repeat index: ${this.repeatIndex}, span duration: ${this.spanDuration}`}}class ne extends K{spanIndex;spanStartTime;constructor(Be){super(Be),this.spanIndex=Be.spanIndex,this.spanStartTime=Be.spanStartTime}toString(){return`Position: [${this.position.x}, ${this.position.y}], span index: ${this.spanIndex}, span start time: ${this.spanStartTime}`}}class ce extends J{}class fe extends K{nestedHitObjects=[];path;velocity;tickDistance;lazyEndPosition;lazyTravelDistance=0;lazyTravelTime=0;spanDuration;head;tail;nodeSamples;get ticks(){return this.nestedHitObjects.filter(Be=>Be instanceof ne).length}get repeats(){return this.repetitions-1}get stackHeight(){return this._stackHeight}set stackHeight(Be){super.stackHeight=Be;for(const Ue of this.nestedHitObjects)Ue.stackHeight=Be}get droidScale(){return this._droidScale}set droidScale(Be){super.droidScale=Be;for(const Ue of this.nestedHitObjects)Ue.droidScale=Be}get osuScale(){return this._osuScale}set osuScale(Be){super.osuScale=Be;for(const Ue of this.nestedHitObjects)Ue.osuScale=Be}repetitions;static legacyLastTickOffset=36;constructor(Be){super({endPosition:Be.position.add(Be.path.positionAt(Be.repetitions%2)),...Be}),this.repetitions=Be.repetitions,this.path=Be.path,this.nodeSamples=Be.nodeSamples;const Ue=100*Be.mapSliderVelocity*Be.speedMultiplier;this.velocity=Ue/Be.msPerBeat,this.tickDistance=Ue/Be.mapTickRate*Be.tickDistanceMultiplier,this.endTime=this.startTime+this.repetitions*this.path.expectedDistance/this.velocity,this.spanDuration=this.duration/this.repetitions,this.head=new ee({position:this.position,startTime:this.startTime,type:0}),this.nestedHitObjects.push(this.head);const gt=Math.min(1e5,this.path.expectedDistance),je=Math.min(Math.max(this.tickDistance,0),gt);if(je!==0){const Qt=this.velocity*10;for(let Ht=0;Ht<this.repetitions;++Ht){const er=this.startTime+Ht*this.spanDuration,ir=Ht%2===1,Ir=[];for(let kr=je;kr<=gt&&!(kr>=gt-Qt);kr+=je){const Or=kr/gt,Pr=ir?1-Or:Or,jr=this.position.add(this.path.positionAt(Or)),$r=new ne({startTime:er+Pr*this.spanDuration,position:jr,spanIndex:Ht,spanStartTime:er});Ir.push($r)}if(ir&&Ir.reverse(),this.nestedHitObjects.push(...Ir),Ht<this.repetitions-1){const kr=this.position.add(this.path.positionAt((Ht+1)%2)),Or=new ie({position:kr,startTime:er+this.spanDuration,repeatIndex:Ht,spanDuration:this.spanDuration});this.nestedHitObjects.push(Or)}}}const Xe=this.repeats,lt=this.startTime+Xe*this.spanDuration,Ct=Math.max(this.startTime+this.duration/2,lt+this.spanDuration-fe.legacyLastTickOffset);this.tail=new ce({position:this.endPosition,startTime:Ct}),this.nestedHitObjects.push(this.tail),this.nestedHitObjects.sort((Qt,Ht)=>Qt.startTime-Ht.startTime)}toString(){return`Position: [${this.position.x}, ${this.position.y}], distance: ${this.path.expectedDistance}, repetitions: ${this.repetitions}, slider ticks: ${this.nestedHitObjects.filter(Be=>Be instanceof ne).length}`}}E.BeatmapCountdown=void 0,(function(ct){ct[ct.noCountDown=0]="noCountDown",ct[ct.normal=1]="normal",ct[ct.half=2]="half",ct[ct.double=3]="double"})(E.BeatmapCountdown||(E.BeatmapCountdown={})),E.BeatmapOverlayPosition=void 0,(function(ct){ct.noChange="NoChange",ct.below="Below",ct.above="Above"})(E.BeatmapOverlayPosition||(E.BeatmapOverlayPosition={})),E.SampleBank=void 0,(function(ct){ct[ct.none=0]="none",ct[ct.normal=1]="normal",ct[ct.soft=2]="soft",ct[ct.drum=3]="drum"})(E.SampleBank||(E.SampleBank={})),E.GameMode=void 0,(function(ct){ct[ct.osu=0]="osu",ct[ct.taiko=1]="taiko",ct[ct.catch=2]="catch",ct[ct.mania=3]="mania"})(E.GameMode||(E.GameMode={}));class de{audioFilename="";audioLeadIn=0;previewTime=-1;countdown=E.BeatmapCountdown.normal;sampleBank=E.SampleBank.normal;sampleVolume=100;stackLeniency=.7;mode=E.GameMode.osu;letterBoxInBreaks=!1;useSkinSprites=!1;overlayPosition=E.BeatmapOverlayPosition.noChange;skinPreference="";epilepsyWarning=!1;countdownOffset=0;widescreenStoryboard=!1;samplesMatchPlaybackRate=!0}E.EditorGridSize=void 0,(function(ct){ct[ct.tiny=4]="tiny",ct[ct.small=8]="small",ct[ct.medium=16]="medium",ct[ct.large=32]="large"})(E.EditorGridSize||(E.EditorGridSize={}));class pe{bookmarks=[];distanceSnap=1;beatDivisor=4;gridSize=E.EditorGridSize.small;timelineZoom=1}class ve{title="";titleUnicode="";artist="";artistUnicode="";creator="";version="";source="";tags=[];beatmapId;beatmapSetId;get fullTitle(){return`${this.artist} - ${this.title} (${this.creator}) [${this.version}]`}get fullUnicodeTitle(){return`${this.artistUnicode||this.artist} - ${this.titleUnicode||this.title} (${this.creator}) [${this.version}]`}}class ye{ar;cs=5;od=5;hp=5;sliderMultiplier=1;sliderTickRate=1}E.StoryboardLayerType=void 0,(function(ct){ct.background="Background",ct.fail="Fail",ct.pass="Pass",ct.foreground="Foreground",ct.overlay="Overlay",ct.sample="Sample"})(E.StoryboardLayerType||(E.StoryboardLayerType={}));class _e{background;video;storyboard;breaks=[];get storyboardReplacesBackground(){return this.storyboard?.getLayer(E.StoryboardLayerType.background).elements.some(Be=>Be.path.toLowerCase()===this.background?.filename)??!1}}class be{time;constructor(Be){this.time=Be.time}}class Te extends be{msPerBeat;timeSignature;constructor(Be){super(Be),this.msPerBeat=Be.msPerBeat,this.timeSignature=Be.timeSignature}isRedundant(){return!1}toString(){return"{ time: "+this.time+", ms_per_beat: "+this.msPerBeat.toFixed(2)+", timeSignature: "+this.timeSignature+" }"}}class ue{_points=[];get points(){return this._points}add(Be){let Ue=this.controlPointAt(Be.time);if(!(Ue instanceof Te)&&Be.isRedundant(Ue))return!1;for(;Be.time===Ue.time&&this.remove(Ue);)Ue=this.controlPointAt(Be.time);return this._points.splice(this.findInsertionIndex(Be.time),0,Be),!0}remove(Be){for(let Ue=0;Ue<this._points.length&&!(this._points[Ue].time>Be.time);++Ue)if(this._points[Ue].time===Be.time&&this._points[Ue].isRedundant(Be))return this._points.splice(Ue,1),!0;return!1}removeAt(Be){return this._points.splice(Be,1)[0]}clear(){this._points.length=0}binarySearchWithFallback(Be,Ue=this.defaultControlPoint){return this.binarySearch(Be)??Ue}binarySearch(Be){if(this._points.length===0||Be<this._points[0].time)return null;if(Be>=this._points.at(-1).time)return this._points.at(-1);let Ue=0,tt=this._points.length-2;for(;Ue<=tt;){const gt=Ue+(tt-Ue>>1);if(this._points[gt].time<Be)Ue=gt+1;else if(this._points[gt].time>Be)tt=gt-1;else return this._points[gt]}return this._points[Ue-1]}findInsertionIndex(Be){if(this._points.length===0||Be<this._points[0].time)return 0;if(Be>=this._points.at(-1).time)return this._points.length;let Ue=0,tt=this._points.length-2;for(;Ue<=tt;){const gt=Ue+(tt-Ue>>1);if(this._points[gt].time<Be)Ue=gt+1;else if(this._points[gt].time>Be)tt=gt-1;else return gt}return Ue}}class O extends ue{defaultControlPoint=new Te({time:0,msPerBeat:1e3,timeSignature:4});controlPointAt(Be){return this.binarySearchWithFallback(Be,this.points[0]??this.defaultControlPoint)}}class z extends be{speedMultiplier;generateTicks;constructor(Be){super(Be),this.speedMultiplier=Be.speedMultiplier,this.generateTicks=Be.generateTicks}isRedundant(Be){return this.speedMultiplier===Be.speedMultiplier&&this.generateTicks===Be.generateTicks}toString(){return"{ time: "+this.time+", speed multiplier: "+this.speedMultiplier.toFixed(2)+" }"}}class Y extends ue{defaultControlPoint=new z({time:0,speedMultiplier:1,generateTicks:!0});controlPointAt(Be){return this.binarySearchWithFallback(Be)}}class te extends be{isKiai;omitFirstBarLine;constructor(Be){super(Be),this.isKiai=Be.isKiai,this.omitFirstBarLine=Be.omitFirstBarLine}isRedundant(Be){return this.isKiai===Be.isKiai}toString(){return"{ time: "+this.time+", kiai: "+this.isKiai+" }"}}class oe extends ue{defaultControlPoint=new te({time:0,isKiai:!1,omitFirstBarLine:!1});controlPointAt(Be){return this.binarySearchWithFallback(Be)}}class le extends be{sampleBank;sampleVolume;customSampleBank;constructor(Be){super(Be),this.sampleBank=Be.sampleBank,this.sampleVolume=Be.sampleVolume,this.customSampleBank=Be.customSampleBank}isRedundant(Be){return this.sampleBank===Be.sampleBank&&this.sampleVolume===Be.sampleVolume&&this.customSampleBank===Be.customSampleBank}toString(){return"{ time: "+this.time+", sample bank: "+this.sampleBank+", sample volume: "+this.sampleVolume+" }"}}class he extends ue{defaultControlPoint=new le({time:0,sampleBank:E.SampleBank.normal,sampleVolume:100,customSampleBank:0});controlPointAt(Be){return this.binarySearchWithFallback(Be)}}class ae{timing=new O;difficulty=new Y;effect=new oe;sample=new he;clear(){this.timing.clear(),this.difficulty.clear(),this.effect.clear(),this.sample.clear()}}class Q{combo=[];sliderTrackOverride;sliderBorder}class se extends K{constructor(Be){super({...Be,position:new V(256,192)})}toString(){return`Position: [${this.position.x}, ${this.position.y}], duration: ${this.duration}`}}class Ae{_objects=[];get objects(){return this._objects}_circles=0;get circles(){return this._circles}_sliders=0;get sliders(){return this._sliders}_spinners=0;get spinners(){return this._spinners}_sliderTicks=0;get sliderTicks(){return this._sliderTicks}get sliderEnds(){return this.sliders}_sliderRepeatPoints=0;get sliderRepeatPoints(){return this._sliderRepeatPoints}add(...Be){for(const Ue of Be)if(this._objects.splice(this.findInsertionIndex(Ue.startTime),0,Ue),Ue instanceof J)++this._circles;else if(Ue instanceof fe){++this._sliders;for(const tt of Ue.nestedHitObjects)tt instanceof ne?++this._sliderTicks:tt instanceof ie&&++this._sliderRepeatPoints}else++this._spinners}removeAt(Be){const Ue=this._objects.splice(Be,1)[0];if(Ue instanceof J)--this._circles;else if(Ue instanceof fe){--this._sliders;for(const tt of Ue.nestedHitObjects)tt instanceof ne?--this._sliderTicks:tt instanceof ie&&--this._sliderRepeatPoints}else Ue instanceof se&&--this._spinners;return Ue}clear(){this._objects.length=0,this._circles=0,this._sliders=0,this._spinners=0,this._sliderTicks=0,this._sliderRepeatPoints=0}findInsertionIndex(Be){if(this._objects.length===0||Be<this._objects[0].startTime)return 0;if(Be>=this._objects.at(-1).startTime)return this._objects.length;let Ue=0,tt=this._objects.length-2;for(;Ue<=tt;){const gt=Ue+(tt-Ue>>1);if(this._objects[gt].startTime<Be)Ue=gt+1;else if(this._objects[gt].startTime>Be)tt=gt-1;else return gt}return Ue}}class ge{formatVersion=1;general=new de;editor=new pe;metadata=new ve;difficulty=new ye;events=new _e;controlPoints=new ae;colors=new Q;hitObjects=new Ae;get maxCombo(){return this.hitObjects.circles+this.hitObjects.sliders+this.hitObjects.sliderTicks+this.hitObjects.sliderRepeatPoints+this.hitObjects.sliderEnds+this.hitObjects.spinners}get mostCommonBeatLength(){const Be=this.hitObjects.objects[this.hitObjects.objects.length-1]?.endTime??this.controlPoints.timing.points[this.controlPoints.timing.points.length-1]?.time??0;return this.controlPoints.timing.points.map((tt,gt,je)=>{if(tt.time>Be)return{beatLength:tt.msPerBeat,duration:0};const Xe=gt===0?0:tt.time,lt=gt===je.length-1?Be:je[gt+1].time;return{beatLength:tt.msPerBeat,duration:lt-Xe}}).sort((tt,gt)=>gt.duration-tt.duration)[0]?.beatLength??0}getOffsetTime(Be){return Be+(this.formatVersion<5?24:0)}maxDroidScore(Be){let Ue=1;for(const lt of Be.mods)lt.isApplicableToDroid()&&(Ue*=lt.droidScoreMultiplier);const{speedMultiplier:tt}=Be;tt>=1?Ue*=1+(tt-1)*.24:Ue*=Math.pow(.3,(1-tt)*4);const gt=1+this.difficulty.od/10+this.difficulty.hp/10+(this.difficulty.cs-3)/4;let je=0,Xe=0;for(const lt of this.hitObjects.objects){if(!(lt instanceof fe)){Xe+=Math.floor(300+300*je*gt/25),++je;continue}const{ticks:Ct}=lt;Xe+=30,++je,Xe+=30*lt.repeats,je+=lt.repeats,Xe+=10*Ct,je+=Ct,Xe+=Math.floor(300+300*je*gt/25),++je}return Math.floor(Xe*Ue)}maxOsuScore(Be=[]){const Ue=this.difficulty.cs+this.difficulty.hp+this.difficulty.od;let tt=2,gt=1;for(const lt of Be)lt.isApplicableToOsu()&&(gt*=lt.pcScoreMultiplier);switch(!0){case Ue<=5:tt=2;break;case Ue<=12:tt=3;break;case Ue<=17:tt=4;break;case Ue<=24:tt=5;break;case Ue>=25:tt=6;break}let je=0,Xe=0;for(const lt of this.hitObjects.objects){if(!(lt instanceof fe)){Xe+=Math.floor(300+300*je*tt*gt/25),++je;continue}const{ticks:Ct}=lt;Xe+=30,++je,Xe+=30*lt.repeats,je+=lt.repeats,Xe+=10*Ct,je+=Ct,Xe+=Math.floor(300+300*je*tt*gt/25),++je}return Xe}toString(){let Be=this.metadata.artist+" - "+this.metadata.title+" [";return(this.metadata.titleUnicode||this.metadata.artistUnicode)&&(Be+="("+this.metadata.artistUnicode+" - "+this.metadata.titleUnicode+")"),Be+=this.metadata.version+"] mapped by "+this.metadata.creator+`

AR`+R.round(this.difficulty.ar,2)+" OD"+R.round(this.difficulty.od,2)+" CS"+R.round(this.difficulty.cs,2)+" HP"+R.round(this.difficulty.hp,2)+`
`+this.hitObjects.circles+" circles, "+this.hitObjects.sliders+" sliders, "+this.hitObjects.spinners+` spinners
`+this.maxCombo+" max combo",Be}}class Ee{filename;offset;constructor(Be,Ue){this.filename=Be,this.offset=Ue}}class ke{overallDifficulty;constructor(Be){this.overallDifficulty=Be}}class Se extends ke{static hitWindow300ToOD(Be,Ue){return Ue?5-(Be-55)/6:5-(Be-75)/5}static hitWindow100ToOD(Be,Ue){return Ue?5-(Be-120)/8:5-(Be-150)/10}static hitWindow50ToOD(Be,Ue){return Ue?5-(Be-180)/10:5-(Be-250)/10}hitWindowFor300(Be){return Be?55+6*(5-this.overallDifficulty):75+5*(5-this.overallDifficulty)}hitWindowFor100(Be){return Be?120+8*(5-this.overallDifficulty):150+10*(5-this.overallDifficulty)}hitWindowFor50(Be){return Be?180+10*(5-this.overallDifficulty):250+10*(5-this.overallDifficulty)}}class Ie extends ke{static hitWindow300ToOD(Be){return(80-Be)/6}static hitWindow100ToOD(Be){return(140-Be)/8}static hitWindow50ToOD(Be){return(200-Be)/10}hitWindowFor300(){return 80-6*this.overallDifficulty}hitWindowFor100(){return 140-8*this.overallDifficulty}hitWindowFor50(){return 200-10*this.overallDifficulty}}class we{isApplicableToDroid(){return"droidRanked"in this}isApplicableToOsu(){return"pcRanked"in this}}class xe extends we{acronym="DT";name="DoubleTime";droidRanked=!0;pcRanked=!0;droidScoreMultiplier=1.12;pcScoreMultiplier=1.12;bitwise=64;droidString="d"}class Fe extends we{acronym="HT";name="HalfTime";droidRanked=!0;pcRanked=!0;droidScoreMultiplier=.3;pcScoreMultiplier=.3;bitwise=256;droidString="t"}class Ge extends we{acronym="NC";name="NightCore";droidRanked=!0;pcRanked=!0;droidScoreMultiplier=1.12;pcScoreMultiplier=1.12;bitwise=512;droidString="c"}class Oe extends we{acronym="HR";name="HardRock";bitwise=16;droidRanked=!0;pcRanked=!0;droidScoreMultiplier=1.06;pcScoreMultiplier=1.06;droidString="r"}class et extends we{acronym="EZ";name="Easy";droidRanked=!0;pcRanked=!0;droidScoreMultiplier=.5;pcScoreMultiplier=.5;bitwise=2;droidString="e"}class Mt extends we{acronym="PR";name="Precise";droidRanked=!0;droidScoreMultiplier=1.06;droidString="s"}class dt extends we{acronym="RE";name="ReallyEasy";droidRanked=!1;droidScoreMultiplier=.4;droidString="l"}class mt extends we{acronym="AT";name="Autoplay";droidRanked=!1;pcRanked=!1;droidScoreMultiplier=1;pcScoreMultiplier=1;bitwise=2048;droidString="a"}class Ut extends we{acronym="AP";name="Autopilot";droidRanked=!1;pcRanked=!1;droidScoreMultiplier=.001;pcScoreMultiplier=0;bitwise=8192;droidString="p"}class St extends we{acronym="FL";name="Flashlight";droidRanked=!1;pcRanked=!0;droidScoreMultiplier=1.12;pcScoreMultiplier=1.12;bitwise=1024;droidString="i"}class vt extends we{static fadeInDurationMultiplier=.4;static fadeOutDurationMultiplier=.3;acronym="HD";name="Hidden";bitwise=8;droidRanked=!0;pcRanked=!0;droidScoreMultiplier=1.06;pcScoreMultiplier=1.06;droidString="h"}class It extends we{acronym="NF";name="NoFail";droidRanked=!0;pcRanked=!0;droidScoreMultiplier=.5;pcScoreMultiplier=.5;bitwise=1;droidString="n"}class yt extends we{acronym="PF";name="Perfect";droidRanked=!1;pcRanked=!0;droidScoreMultiplier=1;pcScoreMultiplier=1;bitwise=16384;droidString="f"}class Tt extends we{acronym="RX";name="Relax";droidRanked=!1;pcRanked=!1;droidScoreMultiplier=.001;pcScoreMultiplier=0;bitwise=128;droidString="x"}class Wt extends we{acronym="V2";name="ScoreV2";droidRanked=!1;pcRanked=!1;droidScoreMultiplier=1;pcScoreMultiplier=1;bitwise=1<<29;droidString="v"}class ft extends we{acronym="SC";name="SmallCircle";droidRanked=!1;droidScoreMultiplier=1.06;droidString="m"}class _t extends we{acronym="SO";name="SpunOut";pcRanked=!0;pcScoreMultiplier=.9;bitwise=4096}class Xt extends we{acronym="SD";name="Sudden Death";droidRanked=!1;pcRanked=!0;droidScoreMultiplier=1;pcScoreMultiplier=1;bitwise=32;droidString="u"}class Nt extends we{acronym="TD";name="TouchDevice";pcRanked=!0;pcScoreMultiplier=1;bitwise=4}class qt{static incompatibleMods=[[new xe,new Ge,new Fe],[new It,new Xt,new yt],[new Oe,new et],[new mt,new Tt,new Ut]];static allMods=[new mt,new Tt,new Ut,new et,new It,new vt,new Oe,new xe,new Ge,new Fe,new St,new Xt,new yt,new Mt,new dt,new Wt,new ft,new _t,new Nt];static speedChangingMods=[new xe,new Ge,new Fe];static mapChangingMods=[...this.speedChangingMods,new et,new Oe,new ft];static droidStringToMods(Be,Ue){return this.processParsingOptions(this.allMods.filter(tt=>tt.isApplicableToDroid()&&Be.toLowerCase().includes(tt.droidString)),Ue)}static pcModbitsToMods(Be,Ue){return this.processParsingOptions(this.allMods.filter(tt=>tt.isApplicableToOsu()&&tt.bitwise&Be),Ue)}static pcStringToMods(Be,Ue){const tt=[];for(Be=Be.toLowerCase();Be;){let gt=1;for(const je of this.allMods)if(Be.startsWith(je.acronym.toLowerCase())){tt.push(je),gt=2;break}Be=Be.slice(gt)}return this.processParsingOptions(tt,Ue)}static checkDuplicateMods(Be){return Array.from(new Set(Be))}static checkIncompatibleMods(Be){for(const Ue of this.incompatibleMods){const tt=Be.filter(gt=>Ue.some(je=>gt.acronym===je.acronym));tt.length>1&&(Be=Be.filter(gt=>Ue.every(je=>gt.acronym!==je.acronym)),Be.push(tt[0]))}return Be}static removeSpeedChangingMods(Be){return Be.slice().filter(Ue=>!this.speedChangingMods.some(tt=>Ue.acronym===tt.acronym))}static processParsingOptions(Be,Ue){return Ue?.checkDuplicate!==!1&&(Be=this.checkDuplicateMods(Be)),Ue?.checkIncompatible!==!1&&(Be=this.checkIncompatibleMods(Be)),Be}}class nr{static assumedDroidHeight=681;static droidCSToDroidScale(Be,Ue=[]){let tt=this.assumedDroidHeight/480*(54.42-Be*4.48)*2/128+.575498292837548;return Ue.some(gt=>gt instanceof Oe)&&(tt-=.125),Ue.some(gt=>gt instanceof et)&&(tt+=.125),Ue.some(gt=>gt instanceof dt)&&(tt+=.125),Ue.some(gt=>gt instanceof ft)&&(tt-=this.assumedDroidHeight/480*(4*4.48)*2/128),Math.max(tt,.001)}static droidScaleToStandardRadius(Be){return 64*Math.max(.001,Be)/(this.assumedDroidHeight*.85/384)}static standardRadiusToDroidScale(Be){return Be*(this.assumedDroidHeight*.85/384)/K.baseRadius}static standardRadiusToStandardCS(Be){return 5+(1-Be/(K.baseRadius/2))*5/.7}static standardCSToStandardScale(Be){return(1-.7*(Be-5)/5)/2}static standardScaleToDroidScale(Be){return this.standardRadiusToDroidScale(K.baseRadius*Be)}static standardCSToDroidScale(Be){return this.standardScaleToDroidScale(this.standardCSToStandardScale(Be))}}class ze{cs;ar;od;hp;mods;speedMultiplier;isForceAR;oldStatistics;calculated=!1;static OD0_MS=80;static OD10_MS=20;static AR0_MS=1800;static AR5_MS=1200;static AR10_MS=450;static OD_MS_STEP=(ze.OD0_MS-ze.OD10_MS)/10;static AR_MS_STEP1=(ze.AR0_MS-ze.AR5_MS)/5;static AR_MS_STEP2=(ze.AR5_MS-ze.AR10_MS)/5;constructor(Be={}){this.cs=Be.cs,this.ar=Be.ar,this.od=Be.od,this.hp=Be.hp,this.mods=Be.mods??[],this.speedMultiplier=Be.speedMultiplier??1,this.isForceAR=Be.isForceAR??!1,this.oldStatistics=Be.oldStatistics??!1}calculate(Be){if(this.calculated)return this;this.calculated=!0,Be?.mods&&(this.mods=qt.pcStringToMods(Be.mods)),Be?.speedMultiplier&&(this.speedMultiplier=Be.speedMultiplier),Be?.isForceAR&&(this.isForceAR=Be.isForceAR);let Ue=1;switch(this.mods.some(tt=>tt instanceof xe)&&(this.speedMultiplier*=1.5),this.mods.some(tt=>tt instanceof Fe)&&(this.speedMultiplier*=.75),this.mods.some(tt=>tt instanceof Ge)&&(this.speedMultiplier*=1.5),this.mods.some(tt=>tt instanceof Oe)&&(Ue*=1.4),this.mods.some(tt=>tt instanceof et)&&(Ue*=.5),Be?.mode??E.Modes.osu){case E.Modes.droid:if(this.mods.some(tt=>tt instanceof Ge)&&this.oldStatistics&&(this.speedMultiplier*=1.39/1.5),this.od!==void 0){this.od*=Ue,this.mods.some(je=>je instanceof dt)&&(this.od/=2),this.od=Math.min(this.od,10);const tt=this.mods.some(je=>je instanceof Mt),gt=new Se(this.od).hitWindowFor300(tt)/this.speedMultiplier;Be?.convertDroidOD!==!1?this.od=Ie.hitWindow300ToOD(gt):this.od=Se.hitWindow300ToOD(gt,tt)}if(this.cs!==void 0){const tt=nr.droidCSToDroidScale(this.cs,this.mods),gt=nr.droidScaleToStandardRadius(tt);this.cs=Math.min(nr.standardRadiusToStandardCS(gt),10)}this.hp!==void 0&&(this.mods.some(tt=>tt instanceof dt)&&(this.hp/=2),this.hp=Math.min(this.hp*Ue,10)),this.ar!==void 0&&!this.isForceAR&&(this.ar*=Ue,this.mods.some(tt=>tt instanceof dt)&&(this.mods.some(tt=>tt instanceof et)&&(this.ar*=2,this.ar-=.5),this.ar-=.5,this.ar-=this.speedMultiplier-1),this.ar=ze.modifyAR(this.ar,this.speedMultiplier,1));break;case E.Modes.osu:if(!this.mods.some(tt=>qt.mapChangingMods.find(gt=>gt.acronym===tt.acronym))&&this.speedMultiplier===1)break;this.cs!==void 0&&(this.mods.some(tt=>tt instanceof Oe)&&(this.cs*=1.3),this.mods.some(tt=>tt instanceof et)&&(this.cs*=.5),this.cs=Math.min(this.cs,10)),this.hp!==void 0&&(this.hp=Math.min(this.hp*Ue,10)),this.ar!==void 0&&!this.isForceAR&&(this.ar=ze.modifyAR(this.ar,this.speedMultiplier,Ue)),this.od!==void 0&&(this.od=ze.modifyOD(this.od,this.speedMultiplier,Ue));break}return this}toString(){return`CS: ${this.cs?.toFixed(2)}, AR: ${this.ar?.toFixed(2)}, OD: ${this.od?.toFixed(2)}, HP: ${this.hp?.toFixed(2)}`}static modifyAR(Be,Ue,tt){let gt=Be;gt*=tt;let je=this.arToMS(gt);return je=Math.min(this.AR0_MS,Math.max(this.AR10_MS,je)),je/=Ue,gt=je>this.AR5_MS?(this.AR0_MS-je)/this.AR_MS_STEP1:5+(this.AR5_MS-je)/this.AR_MS_STEP2,gt}static arToMS(Be){return Be<5?this.AR0_MS-this.AR_MS_STEP1*Be:this.AR5_MS-this.AR_MS_STEP2*(Be-5)}static modifyOD(Be,Ue,tt){const gt=new Ie(Math.min(10,Be*tt)).hitWindowFor300()/Ue;return(this.OD0_MS-gt)/this.OD_MS_STEP}}E.HitSoundType=void 0,(function(ct){ct[ct.none=0]="none",ct[ct.normal=1]="normal",ct[ct.whistle=2]="whistle",ct[ct.finish=4]="finish",ct[ct.clap=8]="clap"})(E.HitSoundType||(E.HitSoundType={}));var Ce;(function(ct){ct[ct.MAX_PARSE_VALUE=2147483647]="MAX_PARSE_VALUE",ct[ct.MAX_COORDINATE_VALUE=131072]="MAX_COORDINATE_VALUE",ct[ct.MIN_REPETITIONS_VALUE=0]="MIN_REPETITIONS_VALUE",ct[ct.MAX_REPETITIONS_VALUE=9e3]="MAX_REPETITIONS_VALUE",ct[ct.MIN_DISTANCE_VALUE=0]="MIN_DISTANCE_VALUE",ct[ct.MAX_DISTANCE_VALUE=131072]="MAX_DISTANCE_VALUE",ct[ct.MIN_SPEEDMULTIPLIER_VALUE=.1]="MIN_SPEEDMULTIPLIER_VALUE",ct[ct.MAX_SPEEDMULTIPLIER_VALUE=10]="MAX_SPEEDMULTIPLIER_VALUE",ct[ct.MIN_MSPERBEAT_VALUE=6]="MIN_MSPERBEAT_VALUE",ct[ct.MAX_MSPERBEAT_VALUE=6e4]="MAX_MSPERBEAT_VALUE"})(Ce||(Ce={})),E.PathType=void 0,(function(ct){ct.Catmull="C",ct.Bezier="B",ct.Linear="L",ct.PerfectCurve="P"})(E.PathType||(E.PathType={}));class Le{static FLOAT_EPSILON=.001;static almostEqualsNumber(Be,Ue,tt=this.FLOAT_EPSILON){return Math.abs(Be-Ue)<=tt}static almostEqualsVector(Be,Ue,tt=this.FLOAT_EPSILON){return this.almostEqualsNumber(Be.x,Ue.x,tt)&&this.almostEqualsNumber(Be.y,Ue.y,tt)}static almostEqualRelative(Be,Ue,tt=10*Math.pow(2,-53)){return this.almostEqualNormRelative(Be,Ue,Be-Ue,tt)}static almostEqualNormRelative(Be,Ue,tt,gt){if(!Number.isFinite(Be)||!Number.isFinite(Ue))return Be===Ue;if(Number.isNaN(Be)||Number.isNaN(Ue))return!1;const je=Math.pow(2,-53);return Math.abs(Be)<je||Math.abs(Ue)<je?Math.abs(tt)<gt:Be===0&&Math.abs(Ue)<gt||Ue===0&&Math.abs(Be)<gt?!0:Math.abs(tt)<gt*Math.max(Math.abs(Be),Math.abs(Ue))}}class Ze{static bezierTolerance=.25;static catmullDetail=50;static circularArcTolerance=.1;static approximateBezier(Be){const Ue=[],tt=Be.length-1;if(tt<0)return Ue;const gt=new Array(tt+1),je=new Array(tt*2+1),Xe=[D.deepCopy(Be)],lt=[],Ct=je;for(;Xe.length>0;){const Qt=Xe.pop();if(this.bezierIsFlatEnough(Qt)){this.bezierApproximate(Qt,Ue,gt,je,tt+1),lt.push(Qt);continue}const Ht=lt.length>0?lt.pop():new Array(tt+1);this.bezierSubdivide(Qt,Ct,Ht,gt,tt+1);for(let er=0;er<tt+1;++er)Qt[er]=Ct[er];Xe.push(Ht),Xe.push(Qt)}return Ue.push(Be[tt]),Ue}static approximateCatmull(Be){const Ue=[];for(let tt=0;tt<Be.length-1;++tt){const gt=tt>0?Be[tt-1]:Be[tt],je=Be[tt],Xe=Be[tt+1],lt=tt<Be.length-2?Be[tt+2]:Xe.add(Xe).subtract(je);for(let Ct=0;Ct<this.catmullDetail;++Ct)Ue.push(this.catmullFindPoint(gt,je,Xe,lt,Ct/this.catmullDetail)),Ue.push(this.catmullFindPoint(gt,je,Xe,lt,(Ct+1)/this.catmullDetail))}return Ue}static approximateCircularArc(Be){const Ue=Be[0],tt=Be[1],gt=Be[2];if(Le.almostEqualsNumber(0,(tt.y-Ue.y)*(gt.x-Ue.x)-(tt.x-Ue.x)*(gt.y-Ue.y)))return this.approximateBezier(Be);const je=2*(Ue.x*tt.subtract(gt).y+tt.x*gt.subtract(Ue).y+gt.x*Ue.subtract(tt).y),Xe=Math.pow(Ue.length,2),lt=Math.pow(tt.length,2),Ct=Math.pow(gt.length,2),Qt=new V(Xe*tt.subtract(gt).y+lt*gt.subtract(Ue).y+Ct*Ue.subtract(tt).y,Xe*gt.subtract(tt).x+lt*Ue.subtract(gt).x+Ct*tt.subtract(Ue).x).divide(je),Ht=Ue.subtract(Qt),er=gt.subtract(Qt),ir=Ht.length,Ir=Math.atan2(Ht.y,Ht.x);let kr=Math.atan2(er.y,er.x);for(;kr<Ir;)kr+=2*Math.PI;let Or=1,Pr=kr-Ir,jr=gt.subtract(Ue);jr=new V(jr.y,-jr.x),jr.dot(tt.subtract(Ue))<0&&(Or=-Or,Pr=2*Math.PI-Pr);const $r=2*ir<=this.circularArcTolerance?2:Math.max(2,Math.ceil(Pr/(2*Math.acos(1-this.circularArcTolerance/ir)))),qr=[];for(let Hr=0;Hr<$r;++Hr){const ti=Hr/($r-1),Wr=Ir+Or*ti*Pr,me=new V(Math.cos(Wr),Math.sin(Wr)).scale(ir);qr.push(Qt.add(me))}return qr}static approximateLinear(Be){return Be}static bezierIsFlatEnough(Be){for(let Ue=1;Ue<Be.length-1;++Ue){const tt=Be[Ue-1],gt=Be[Ue],je=Be[Ue+1],Xe=tt.subtract(gt.scale(2)).add(je);if(Math.pow(Xe.length,2)>Math.pow(this.bezierTolerance,2)*4)return!1}return!0}static bezierApproximate(Be,Ue,tt,gt,je){const Xe=gt,lt=tt;this.bezierSubdivide(Be,Xe,lt,tt,je);for(let Ct=0;Ct<je-1;++Ct)Xe[je+Ct]=lt[Ct+1];Ue.push(Be[0]);for(let Ct=1;Ct<je-1;++Ct){const Qt=2*Ct,Ht=Xe[Qt-1].add(Xe[Qt].scale(2)).add(Xe[Qt+1]).scale(.25);Ue.push(Ht)}}static bezierSubdivide(Be,Ue,tt,gt,je){const Xe=gt;for(let lt=0;lt<je;++lt)Xe[lt]=Be[lt];for(let lt=0;lt<je;++lt){Ue[lt]=Xe[0],tt[je-lt-1]=Xe[je-lt-1];for(let Ct=0;Ct<je-lt-1;++Ct)Xe[Ct]=Xe[Ct].add(Xe[Ct+1]).divide(2)}}static catmullFindPoint(Be,Ue,tt,gt,je){const Xe=Math.pow(je,2),lt=Math.pow(je,3);return new V(.5*(2*Ue.x+(-Be.x+tt.x)*je+(2*Be.x-5*Ue.x+4*tt.x-gt.x)*Xe+(-Be.x+3*Ue.x-3*tt.x+gt.x)*lt),.5*(2*Ue.y+(-Be.y+tt.y)*je+(2*Be.y-5*Ue.y+4*tt.y-gt.y)*Xe+(-Be.y+3*Ue.y-3*tt.y+gt.y)*lt))}}class Je{pathType;controlPoints;expectedDistance;isInitialized=!1;calculatedPath=[];cumulativeLength=[];constructor(Be){this.pathType=Be.pathType,this.controlPoints=Be.controlPoints,this.expectedDistance=Be.expectedDistance,this.ensureInitialized()}ensureInitialized(){this.isInitialized||(this.isInitialized=!0,this.calculatedPath.length=0,this.cumulativeLength.length=0,this.calculatePath(),this.calculateCumulativeLength())}calculatePath(){this.calculatedPath.length=0;let Be=0;for(let Ue=0;Ue<this.controlPoints.length;Ue++)if(Ue===this.controlPoints.length-1||this.controlPoints[Ue].equals(this.controlPoints[Ue+1])){const tt=Ue+1,gt=this.controlPoints.slice(Be,tt);this.calculateSubPath(gt).forEach(je=>{(this.calculatedPath.length===0||!this.calculatedPath.at(-1).equals(je))&&this.calculatedPath.push(je)}),Be=tt}}calculateSubPath(Be){switch(this.pathType){case E.PathType.Linear:return Ze.approximateLinear(Be);case E.PathType.PerfectCurve:if(Be.length!==3)break;return Ze.approximateCircularArc(Be);case E.PathType.Catmull:return Ze.approximateCatmull(Be)}return Ze.approximateBezier(Be)}calculateCumulativeLength(){let Be=0;this.cumulativeLength.length=0,this.cumulativeLength.push(0);for(let Ue=0;Ue<this.calculatedPath.length-1;++Ue){const tt=this.calculatedPath[Ue+1].subtract(this.calculatedPath[Ue]);Be+=tt.length,this.cumulativeLength.push(Be)}if(Be!==this.expectedDistance){if(this.controlPoints.length>=2&&this.controlPoints.at(-1).equals(this.controlPoints.at(-2))&&this.expectedDistance>Be){this.cumulativeLength.push(Be);return}this.cumulativeLength.pop();let Ue=this.calculatedPath.length-1;if(Be>this.expectedDistance)for(;this.cumulativeLength.length>0&&this.cumulativeLength.at(-1)>=this.expectedDistance;)this.cumulativeLength.pop(),this.calculatedPath.splice(Ue--,1);if(Ue<=0){this.cumulativeLength.push(0);return}const tt=this.calculatedPath[Ue].subtract(this.calculatedPath[Ue-1]);tt.normalize(),this.calculatedPath[Ue]=this.calculatedPath[Ue-1].add(tt.scale(this.expectedDistance-this.cumulativeLength.at(-1))),this.cumulativeLength.push(this.expectedDistance)}}positionAt(Be){this.ensureInitialized();const Ue=this.progressToDistance(Be);return this.interpolateVerticles(this.indexOfDistance(Ue),Ue)}progressToDistance(Be){return Math.min(Math.max(Be,0),1)*this.expectedDistance}interpolateVerticles(Be,Ue){if(this.calculatedPath.length===0)return new V(0,0);if(Be<=0)return this.calculatedPath[0];if(Be>=this.calculatedPath.length)return this.calculatedPath.at(-1);const tt=this.calculatedPath[Be-1],gt=this.calculatedPath[Be],je=this.cumulativeLength[Be-1],Xe=this.cumulativeLength[Be];if(Le.almostEqualsNumber(je,Xe))return tt;const lt=(Ue-je)/(Xe-je);return tt.add(gt.subtract(tt).scale(lt))}indexOfDistance(Be){if(this.cumulativeLength.length===0||Be<this.cumulativeLength[0])return 0;if(Be>=this.cumulativeLength.at(-1))return this.cumulativeLength.length;let Ue=0,tt=this.cumulativeLength.length-2;for(;Ue<=tt;){const gt=Ue+(tt-Ue>>1);if(this.cumulativeLength[gt]<Be)Ue=gt+1;else if(this.cumulativeLength[gt]>Be)tt=gt-1;else return gt}return Ue}}class nt{static HIT_WHISTLE="hitwhistle";static HIT_FINISH="hitfinish";static HIT_NORMAL="hitnormal";static HIT_CLAP="hitclap";name;bank;volume;customSampleBank;isLayered;get isCustom(){return this.name!==nt.HIT_NORMAL&&this.name!==nt.HIT_WHISTLE&&this.name!==nt.HIT_FINISH&&this.name!==nt.HIT_CLAP}constructor(Be,Ue,tt=0,gt=0,je=!1){this.name=Be,this.bank=Ue,this.customSampleBank=tt,this.volume=gt,this.isLayered=je}}class rt{filename;normal;add;volume;customSampleBank;constructor(Be){this.filename=Be?.filename??"",this.normal=Be?.normal??E.SampleBank.none,this.add=Be?.add??E.SampleBank.none,this.volume=Be?.volume??0,this.customSampleBank=Be?.customSampleBank??0}}var He;(function(ct){ct.general="General",ct.editor="Editor",ct.metadata="Metadata",ct.difficulty="Difficulty",ct.events="Events",ct.variables="Variables",ct.timingPoints="TimingPoints",ct.colors="Colours",ct.hitObjects="HitObjects"})(He||(He={}));class Dt{get result(){return this.finalResult}static latestVersion=14;formatVersion=Dt.latestVersion;line=0;currentLine="";section=He.general;decode(Be){this.reset();for(let Ue of Be.split(`
`)){if(this.currentLine=Ue,++this.line,this.shouldSkipLine(Ue))continue;if(this.section!==He.metadata){const gt=Ue.indexOf("//");gt>0&&(Ue=Ue.substring(0,gt))}if(Ue=this.currentLine=Ue.trimEnd(),Ue.startsWith("[")&&Ue.endsWith("]")){const gt=Ue.substring(1,Ue.length-1);if(!Object.values(He).includes(gt)){console.warn(`Unknown section "${Ue}" at line ${this.line}`);continue}this.section=gt;continue}if(!Ue)continue;const tt=Ue.indexOf("file format v");if(tt>=0){this.formatVersion=parseInt(Ue.substring(tt+13));continue}try{this.decodeLine(Ue)}catch(gt){console.warn(gt.message),console.log(`at line ${this.line}
${this.currentLine}
${this.decoders[this.section]?.logExceptionPosition()}`)}}return this}shouldSkipLine(Be){return!Be||Be.trimStart().startsWith("//")}decodeLine(Be){this.decoders[this.section]?.decode(Be)}reset(){this.line=0,this.currentLine="",this.section=He.general}}class Rt{lastPosition="";target;formatVersion;constructor(Be,Ue=Dt.latestVersion){this.target=Be,this.formatVersion=Ue}decode(Be){return this.decodeInternal(Be),this.target}logExceptionPosition(){return"-> "+this.lastPosition+" <-"}property(Be){const Ue=Be.split(":");return Ue[0]=this.setPosition(Ue[0]).trim(),Ue[1]=this.setPosition(Ue.slice(1).join(":")).trim(),Ue}setPosition(Be){return this.lastPosition=Be.trim(),this.lastPosition}tryParseInt(Be,Ue=-Ce.MAX_PARSE_VALUE,tt=Ce.MAX_PARSE_VALUE,gt=!1){const je=parseInt(Be);if(je<Ue)throw new RangeError("Value is too low");if(je>tt)throw new RangeError("Value is too high");if(!gt&&Number.isNaN(je))throw new RangeError("Not a number");return je}tryParseFloat(Be,Ue=-Ce.MAX_PARSE_VALUE,tt=Ce.MAX_PARSE_VALUE,gt=!1){const je=parseFloat(Be);if(je<Ue)throw new RangeError("Value is too low");if(je>tt)throw new RangeError("Value is too high");if(!gt&&Number.isNaN(je))throw new RangeError("Not a number");return je}isNumberValid(Be,Ue=-Ce.MAX_PARSE_VALUE,tt=Ce.MAX_PARSE_VALUE){return Be>=Ue&&Be<=tt}}class De extends Rt{extraComboOffset=0;forceNewCombo=!1;decodeInternal(Be){const Ue=Be.split(",");if(Ue.length<4)throw new Error("Ignoring malformed hitobject");const tt=this.target.getOffsetTime(this.tryParseFloat(this.setPosition(Ue[2]))),gt=this.tryParseInt(this.setPosition(Ue[3]));let je=gt,Xe=(je&E.ObjectTypes.comboOffset)>>4;je&=~E.ObjectTypes.comboOffset;let lt=!!(gt&E.ObjectTypes.newCombo);je&=~E.ObjectTypes.newCombo;const Ct=new V(this.tryParseFloat(this.setPosition(Ue[0]),-Ce.MAX_COORDINATE_VALUE,Ce.MAX_COORDINATE_VALUE),this.tryParseFloat(this.setPosition(Ue[1]),-Ce.MAX_COORDINATE_VALUE,Ce.MAX_COORDINATE_VALUE)),Qt=this.tryParseInt(Ue[4]),Ht=new rt;let er=null;if(gt&E.ObjectTypes.circle)lt||=this.forceNewCombo,Xe+=this.extraComboOffset,this.forceNewCombo=!1,this.extraComboOffset=0,er=new J({startTime:tt,type:gt,position:Ct,newCombo:lt,comboOffset:Xe}),Ue.length>5&&this.readCustomSampleBanks(Ht,Ue[5]);else if(gt&E.ObjectTypes.slider){if(Ue.length<8)throw new Error("Ignoring malformed slider");const ir=Math.max(0,this.tryParseInt(this.setPosition(Ue[6]),-Ce.MAX_PARSE_VALUE,Ce.MAX_REPETITIONS_VALUE)),Ir=Math.max(0,this.tryParseFloat(this.setPosition(Ue[7]))),kr=this.target.controlPoints.difficulty.controlPointAt(tt),Or=this.target.controlPoints.timing.controlPointAt(tt),Pr=[new V(0,0)],jr=this.setPosition(Ue[5]).split("|");let $r=jr.shift();for(const wt of jr){const Pt=wt.split(":"),Gt=new V(this.tryParseFloat(Pt[0],-Ce.MAX_COORDINATE_VALUE,Ce.MAX_COORDINATE_VALUE),this.tryParseFloat(Pt[1],-Ce.MAX_COORDINATE_VALUE,Ce.MAX_COORDINATE_VALUE));Pr.push(Gt.subtract(Ct))}Pr[0].equals(Pr[1])&&Pr.shift(),$r===E.PathType.PerfectCurve&&(Pr.length!==3?$r=E.PathType.Bezier:Le.almostEqualsNumber(0,(Pr[1].y-Pr[0].y)*(Pr[2].x-Pr[0].x)-(Pr[1].x-Pr[0].x)*(Pr[2].y-Pr[0].y))&&($r=E.PathType.Linear));const qr=new Je({pathType:$r,controlPoints:Pr,expectedDistance:Ir});Ue.length>10&&this.readCustomSampleBanks(Ht,Ue[10]);const Hr=ir+1,ti=[];for(let wt=0;wt<Hr;++wt)ti.push(new rt(Ht));if(Ue.length>9&&Ue[9]){const wt=Ue[9].split("|");for(let Pt=0;Pt<Math.min(wt.length,Hr);++Pt)this.readCustomSampleBanks(ti[Pt],wt[Pt])}const Wr=[];for(let wt=0;wt<Hr;++wt)Wr.push(Qt);if(Ue.length>8&&Ue[8]){const wt=Ue[8].split("|");for(let Pt=0;Pt<Math.min(wt.length,Hr);++Pt)Wr[Pt]=parseInt(wt[Pt])}const me=[];for(let wt=0;wt<Hr;++wt)me.push(this.convertSoundType(Wr[wt],ti[wt]));lt||=this.forceNewCombo,Xe+=this.extraComboOffset,this.forceNewCombo=!1,this.extraComboOffset=0;let ht=Number.POSITIVE_INFINITY;kr.generateTicks&&(this.isNumberValid(Or.msPerBeat,Ce.MIN_MSPERBEAT_VALUE,Ce.MAX_MSPERBEAT_VALUE)?ht=this.target.formatVersion<8?1/kr.speedMultiplier:1:ht=0),er=new fe({position:Ct,startTime:tt,type:gt,newCombo:lt,comboOffset:Xe,nodeSamples:me,repetitions:ir,path:qr,speedMultiplier:R.clamp(kr.speedMultiplier,Ce.MIN_SPEEDMULTIPLIER_VALUE,Ce.MAX_SPEEDMULTIPLIER_VALUE),msPerBeat:Or.msPerBeat,mapSliderVelocity:this.target.difficulty.sliderMultiplier,mapTickRate:this.target.difficulty.sliderTickRate,tickDistanceMultiplier:ht})}else gt&E.ObjectTypes.spinner&&(this.forceNewCombo||=this.target.formatVersion<=8||lt,this.extraComboOffset+=Xe,er=new se({startTime:tt,type:gt,endTime:this.tryParseInt(this.setPosition(Ue[5]))}),Ue.length>6&&this.readCustomSampleBanks(Ht,Ue[6]));if(!er)throw new Error("Ignoring malformed hitobject");er.samples=this.convertSoundType(Qt,Ht),this.target.hitObjects.add(er)}applyStacking(Be,Ue){if(this.target.formatVersion<6){this.applyStackingOld();return}const tt=3;let gt=600;const je=this.target.difficulty.ar;je>5?gt=1200+-750*(je-5)/5:je<5?gt=1200- -600*(5-je)/5:gt=1200;let Xe=Ue;const lt=gt*this.target.general.stackLeniency;if(Ue<this.target.hitObjects.objects.length-1)for(let Qt=Ue;Qt>=Be;--Qt){let Ht=Qt;for(let er=Ht+1;er<this.target.hitObjects.objects.length;++er){const ir=this.target.hitObjects.objects[Ht];if(ir instanceof se)break;const Ir=this.target.hitObjects.objects[er];if(Ir instanceof se)break;const kr=ir.endTime;if(Ir.startTime-kr>lt)break;const Or=ir instanceof fe?ir.endPosition.getDistance(Ir.position)<tt:!1;(ir.position.getDistance(Ir.position)<tt||Or)&&(Ht=er,Ir.stackHeight=0)}if(Ht>Xe&&(Xe=Ht,Xe===this.target.hitObjects.objects.length-1))break}let Ct=Be;for(let Qt=Xe;Qt>Be;--Qt){let Ht=Qt,er=this.target.hitObjects.objects[Qt];if(!(er.stackHeight!==0||er.type&E.ObjectTypes.spinner)){if(er.type&E.ObjectTypes.circle)for(;--Ht>=0;){const ir=this.target.hitObjects.objects[Ht];if(ir instanceof se)continue;const Ir=ir.endTime;if(er.startTime-Ir>lt)break;if(Ht<Ct&&(ir.stackHeight=0,Ct=Ht),ir instanceof fe?ir.endPosition.getDistance(er.position)<tt:!1){const Or=er.stackHeight-ir.stackHeight+1;for(let Pr=Ht+1;Pr<=Qt;++Pr){const jr=this.target.hitObjects.objects[Pr];ir.endPosition.getDistance(jr.position)<tt&&(jr.stackHeight-=Or)}break}ir.position.getDistance(er.position)<tt&&(ir.stackHeight=er.stackHeight+1,er=ir)}else if(er instanceof fe)for(;--Ht>=Be;){const ir=this.target.hitObjects.objects[Ht];if(ir instanceof se)continue;if(er.startTime-ir.startTime>lt)break;(ir instanceof J?ir.position:ir.endPosition).getDistance(er.position)<tt&&(ir.stackHeight=er.stackHeight+1,er=ir)}}}}applyStackingOld(){if(this.target.formatVersion>5){this.applyStacking(0,this.target.hitObjects.objects.length-1);return}const Be=3;let Ue=600;const tt=this.target.difficulty.ar;tt>5?Ue=1200+-750*(tt-5)/5:tt<5?Ue=1200- -600*(5-tt)/5:Ue=1200;for(let gt=0;gt<this.target.hitObjects.objects.length;++gt){const je=this.target.hitObjects.objects[gt];if(je.stackHeight!==0&&!(je instanceof fe))continue;let Xe=je.endTime,lt=0;for(let Ct=gt+1;Ct<this.target.hitObjects.objects.length;++Ct){const Qt=Ue*this.target.general.stackLeniency;if(this.target.hitObjects.objects[Ct].startTime-Qt>Xe)break;const Ht=je instanceof fe?je.endPosition:je.position;this.target.hitObjects.objects[Ct].position.getDistance(je.position)<Be?(++je.stackHeight,Xe=this.target.hitObjects.objects[Ct].endTime):this.target.hitObjects.objects[Ct].position.getDistance(Ht)<Be&&(++lt,this.target.hitObjects.objects[Ct].stackHeight-=lt,Xe=this.target.hitObjects.objects[Ct].endTime)}}}convertSoundType(Be,Ue){if(Ue.filename)return[new nt(Ue.filename,void 0,Ue.customSampleBank,Ue.volume)];const tt=[new nt(nt.HIT_NORMAL,Ue.normal,Ue.customSampleBank,Ue.volume,Be!==E.HitSoundType.none&&!(Be&E.HitSoundType.normal))];return Be&E.HitSoundType.finish&&tt.push(new nt(nt.HIT_FINISH,Ue.add,Ue.customSampleBank,Ue.volume)),Be&E.HitSoundType.whistle&&tt.push(new nt(nt.HIT_WHISTLE,Ue.add,Ue.customSampleBank,Ue.volume)),Be&E.HitSoundType.clap&&tt.push(new nt(nt.HIT_CLAP,Ue.add,Ue.customSampleBank,Ue.volume)),tt}readCustomSampleBanks(Be,Ue){if(!Ue)return;const tt=Ue.split(":");Be.normal=parseInt(tt[0]);const gt=parseInt(tt[1]);Be.add=gt===E.SampleBank.none?Be.normal:gt,tt.length>2&&(Be.customSampleBank=parseInt(tt[2])),tt.length>3&&(Be.volume=Math.max(0,parseInt(tt[3]))),tt.length>4&&(Be.filename=tt[4])}}class We extends Rt{decodeInternal(Be){const Ue=this.property(Be);switch(Ue[0]){case"AudioFilename":this.target.general.audioFilename=Ue[1];break;case"AudioLeadIn":this.target.general.audioLeadIn=this.tryParseInt(Ue[1]);break;case"PreviewTime":this.target.general.previewTime=this.tryParseInt(Ue[1]);break;case"Countdown":this.target.general.countdown=this.tryParseInt(Ue[1]);break;case"SampleSet":switch(Ue[1]){case"Normal":this.target.general.sampleBank=E.SampleBank.normal;break;case"Soft":this.target.general.sampleBank=E.SampleBank.soft;break;case"Drum":this.target.general.sampleBank=E.SampleBank.drum;break}break;case"SampleVolume":this.target.general.sampleVolume=this.tryParseInt(Ue[1]);break;case"StackLeniency":this.target.general.stackLeniency=this.tryParseFloat(Ue[1]);break;case"Mode":this.target.general.mode=this.tryParseInt(Ue[1]);break;case"LetterboxInBreaks":this.target.general.letterBoxInBreaks=!!this.tryParseInt(Ue[1]);break;case"UseSkinSprites":this.target.general.useSkinSprites=!!this.tryParseInt(Ue[1]);break;case"OverlayPosition":this.target.general.overlayPosition=Ue[1];break;case"SkinPreference":this.target.general.skinPreference=Ue[1]??"";break;case"EpilepsyWarning":this.target.general.epilepsyWarning=!!this.tryParseInt(Ue[1]);break;case"CountdownOffset":this.target.general.countdownOffset=this.tryParseInt(Ue[1]||"0");break;case"WidescreenStoryboard":this.target.general.widescreenStoryboard=!!this.tryParseInt(Ue[1]);break;case"SamplesMatchPlaybackRate":this.target.general.samplesMatchPlaybackRate=!!this.tryParseInt(Ue[1]);break;case"EditorBookmarks":this.target.editor.bookmarks=Ue[1].split(",").map(tt=>this.tryParseInt(tt))}}}class Ve extends Rt{decodeInternal(Be){const Ue=this.property(Be);switch(Ue[0]){case"Bookmarks":this.target.editor.bookmarks=Ue[1].split(",").map(tt=>this.tryParseInt(tt));break;case"DistanceSpacing":this.target.editor.distanceSnap=this.tryParseFloat(Ue[1]);break;case"BeatDivisor":this.target.editor.beatDivisor=this.tryParseFloat(Ue[1]);break;case"GridSize":this.target.editor.gridSize=this.tryParseInt(Ue[1]);break;case"TimelineZoom":this.target.editor.timelineZoom=this.tryParseFloat(Ue[1]);break}}}class qe{filename;startTime;offset;constructor(Be,Ue,tt){this.startTime=Be,this.filename=Ue,this.offset=tt}}class pt{static MIN_BREAK_DURATION=650;startTime;endTime;duration;constructor(Be){this.startTime=Be.startTime,this.endTime=Be.endTime,this.duration=this.endTime-this.startTime}toString(){return`Start time: ${this.startTime}, end time: ${this.endTime}, duration: ${this.duration}`}contains(Be){return Be>=this.startTime&&Be<=this.endTime-pt.MIN_BREAK_DURATION/2}}class At extends Rt{storyboardLines=[];decodeInternal(Be){const Ue=Be.split(",");switch(Ue[0]){case"0":this.parseBackground(Ue);break;case"1":case"Video":this.parseVideo(Ue);break;case"2":case"Break":this.parseBreak(Ue);break;default:this.storyboardLines.push(Be)}}parseBackground(Be){this.target.events.background=new Ee(this.setPosition(Be[2]).replace(/"/g,""),new V(this.tryParseFloat(this.setPosition(Be[3]??"0")),this.tryParseFloat(this.setPosition(Be[4]??"0"))))}parseVideo(Be){this.target.events.video=new qe(this.tryParseInt(this.setPosition(Be[1])),this.setPosition(Be[2]).replace(/"/g,""),new V(this.tryParseFloat(this.setPosition(Be[3]??"0")),this.tryParseFloat(this.setPosition(Be[4]??"0"))))}parseBreak(Be){this.target.events.breaks.push(new pt({startTime:this.tryParseInt(this.setPosition(Be[1])),endTime:this.tryParseInt(this.setPosition(Be[2]))}))}}class jt extends Rt{decodeInternal(Be){const Ue=this.property(Be);switch(Ue[0]){case"CircleSize":this.target.difficulty.cs=this.tryParseFloat(this.setPosition(Ue[1]));break;case"OverallDifficulty":this.target.difficulty.od=this.tryParseFloat(this.setPosition(Ue[1]));break;case"ApproachRate":this.target.difficulty.ar=this.tryParseFloat(this.setPosition(Ue[1]));break;case"HPDrainRate":this.target.difficulty.hp=this.tryParseFloat(this.setPosition(Ue[1]));break;case"SliderMultiplier":this.target.difficulty.sliderMultiplier=this.tryParseFloat(this.setPosition(Ue[1]));break;case"SliderTickRate":this.target.difficulty.sliderTickRate=this.tryParseFloat(this.setPosition(Ue[1]))}}}class rr extends Rt{decodeInternal(Be){const Ue=this.property(Be);switch(Ue[0]){case"Title":this.target.metadata.title=Ue[1];break;case"TitleUnicode":this.target.metadata.titleUnicode=Ue[1];break;case"Artist":this.target.metadata.artist=Ue[1];break;case"ArtistUnicode":this.target.metadata.artistUnicode=Ue[1];break;case"Creator":this.target.metadata.creator=Ue[1];break;case"Version":this.target.metadata.version=Ue[1];break;case"Source":this.target.metadata.source=Ue[1];break;case"Tags":this.target.metadata.tags=Ue[1].split(" ");break;case"BeatmapID":this.target.metadata.beatmapId=parseInt(Ue[1]);break;case"BeatmapSetID":this.target.metadata.beatmapSetId=parseInt(Ue[1]);break}}}var Ke;(function(ct){ct[ct.none=0]="none",ct[ct.kiai=1]="kiai",ct[ct.omitFirstBarLine=8]="omitFirstBarLine"})(Ke||(Ke={}));class Ne extends Rt{decodeInternal(Be){const Ue=Be.split(",");if(Ue.length<2)throw new Error("Ignoring malformed timing point");const tt=this.target.getOffsetTime(this.tryParseFloat(this.setPosition(Ue[0]))),gt=this.tryParseFloat(this.setPosition(Ue[1]),void 0,void 0,!0);let je=4;if(Ue.length>=3&&(je=this.tryParseInt(this.setPosition(Ue[2]))),je<1)throw new RangeError("The numerator of a time signature must be positive");let Xe=this.target.general.sampleBank;Ue.length>=4&&(Xe=this.tryParseInt(this.setPosition(Ue[3])));let lt=0;Ue.length>=5&&(lt=this.tryParseInt(this.setPosition(Ue[4])));let Ct=this.target.general.sampleVolume;Ue.length>=6&&(Ct=this.tryParseInt(this.setPosition(Ue[5])));let Qt=!1,Ht=!1;if(Ue.length>=8){const ir=this.tryParseInt(this.setPosition(Ue[7]));Qt=!!(ir&Ke.kiai),Ht=!!(ir&Ke.omitFirstBarLine)}let er=!0;if(Ue.length>=7&&(er=Ue[6]==="1"),er){if(Number.isNaN(gt))throw new Error("Beat length cannot be NaN in a timing control point");this.target.controlPoints.timing.add(new Te({time:tt,msPerBeat:gt,timeSignature:je}))}this.target.controlPoints.difficulty.add(new z({time:tt,speedMultiplier:gt<0?100/-gt:1,generateTicks:!Number.isNaN(gt)})),this.target.controlPoints.effect.add(new te({time:tt,isKiai:Qt,omitFirstBarLine:Ht})),this.target.controlPoints.sample.add(new le({time:tt,sampleBank:Xe,sampleVolume:Ct,customSampleBank:lt}))}}class Ye{r;g;b;a;constructor(Be,Ue,tt,gt=1){this.r=R.clamp(Be,0,255),this.g=R.clamp(Ue,0,255),this.b=R.clamp(tt,0,255),this.a=R.clamp(gt,0,1)}toString(){return this.a===1?`${this.r},${this.g},${this.b}`:`${this.r},${this.g},${this.b},${this.a}`}equals(Be){return this.r===Be.r&&this.g===Be.g&&this.b===Be.b&&this.a===Be.a}}class st extends Rt{decodeInternal(Be){const Ue=this.property(Be),tt=this.setPosition(Ue[1]).split(",").map(je=>this.tryParseInt(je));if(tt.length!==3&&tt.length!==4)throw new TypeError("Color specified in incorrect format (should be R,G,B or R,G,B,A)");const gt=new Ye(tt[0],tt[1],tt[2],tt[3]);if(Ue[0].startsWith("Combo")){this.target.colors.combo.push(gt);return}switch(Ue[0]){case"SliderTrackOverride":this.target.colors.sliderTrackOverride=gt;break;case"SliderBorder":this.target.colors.sliderBorder=gt;break}}}E.BlendingEquation=void 0,(function(ct){ct[ct.inherit=0]="inherit",ct[ct.add=1]="add",ct[ct.min=2]="min",ct[ct.max=3]="max",ct[ct.subtract=4]="subtract",ct[ct.reverseSubtract=5]="reverseSubtract"})(E.BlendingEquation||(E.BlendingEquation={})),E.BlendingType=void 0,(function(ct){ct[ct.inherit=0]="inherit",ct[ct.constantAlpha=1]="constantAlpha",ct[ct.constantColor=2]="constantColor",ct[ct.dstAlpha=3]="dstAlpha",ct[ct.dstColor=4]="dstColor",ct[ct.one=5]="one",ct[ct.oneMinusConstantAlpha=6]="oneMinusConstantAlpha",ct[ct.oneMinusConstantColor=7]="oneMinusConstantColor",ct[ct.oneMinusDstAlpha=8]="oneMinusDstAlpha",ct[ct.oneMinusDstColor=9]="oneMinusDstColor",ct[ct.oneMinusSrcAlpha=10]="oneMinusSrcAlpha",ct[ct.oneMinusSrcColor=11]="oneMinusSrcColor",ct[ct.srcAlpha=12]="srcAlpha",ct[ct.srcAlphaSaturate=13]="srcAlphaSaturate",ct[ct.srcColor=14]="srcColor",ct[ct.zero=15]="zero"})(E.BlendingType||(E.BlendingType={}));class bt{source;destination;sourceAlpha;destinationAlpha;rgbEquation;alphaEquation;static none=new bt(E.BlendingType.one,E.BlendingType.zero,E.BlendingType.one,E.BlendingType.zero,E.BlendingEquation.add,E.BlendingEquation.add);static inherit=new bt(E.BlendingType.inherit,E.BlendingType.inherit,E.BlendingType.inherit,E.BlendingType.inherit,E.BlendingEquation.inherit,E.BlendingEquation.inherit);static mixture=new bt(E.BlendingType.srcAlpha,E.BlendingType.oneMinusSrcAlpha,E.BlendingType.one,E.BlendingType.one,E.BlendingEquation.add,E.BlendingEquation.add);static additive=new bt(E.BlendingType.srcAlpha,E.BlendingType.one,E.BlendingType.one,E.BlendingType.one,E.BlendingEquation.add,E.BlendingEquation.add);constructor(Be,Ue,tt,gt,je,Xe){this.source=Be,this.destination=Ue,this.sourceAlpha=tt,this.destinationAlpha=gt,this.rgbEquation=je,this.alphaEquation=Xe}}E.StoryboardCommandType=void 0,(function(ct){ct.movement="M",ct.movementX="MX",ct.movementY="MY",ct.fade="F",ct.scale="S",ct.vectorScale="V",ct.rotation="R",ct.color="C",ct.parameter="P",ct.loop="L",ct.trigger="T"})(E.StoryboardCommandType||(E.StoryboardCommandType={})),E.StoryboardParameterCommandType=void 0,(function(ct){ct.horizontalFlip="H",ct.verticalFlip="V",ct.blendingMode="A"})(E.StoryboardParameterCommandType||(E.StoryboardParameterCommandType={}));class Qe{type;parameterType;easing;startTime;endTime;startValue;endValue;get duration(){return this.endTime-this.startTime}constructor(Be,Ue,tt,gt,je,Xe,lt){this.easing=Be,this.startTime=Ue,this.endTime=tt,this.startValue=gt,this.endValue=je,this.type=Xe,this.parameterType=lt}isParameter(){return this.parameterType!==void 0}toString(){return`${this.startTime} -> ${this.endTime}, ${this.startValue} -> ${this.endValue} ${this.easing}`}}class Re{type;parameterType;_commands=[];_startTime=Number.MAX_SAFE_INTEGER;_endTime=Number.MIN_SAFE_INTEGER;_startValue=null;_endValue=null;get commands(){return this._commands}get startTime(){return this._startTime}get endTime(){return this._endTime}get startValue(){return this._startValue}get endValue(){return this._endValue}get hasCommands(){return this._commands.length>0}constructor(Be,Ue){this.type=Be,this.parameterType=Ue}add(Be,Ue,tt,gt,je){Ue>tt||(this._commands.push(new Qe(Be,Ue,tt,gt,je,this.type,this.parameterType)),Ue<this._startTime&&(this._startValue=gt,this._startTime=Ue),tt>this._endTime&&(this._endValue=je,this._endTime=tt),this._commands.sort((Xe,lt)=>Xe.startTime-lt.startTime))}}class Pe{move=new Re(E.StoryboardCommandType.movement);x=new Re(E.StoryboardCommandType.movementX);y=new Re(E.StoryboardCommandType.movementY);scale=new Re(E.StoryboardCommandType.scale);vectorScale=new Re(E.StoryboardCommandType.vectorScale);rotation=new Re(E.StoryboardCommandType.rotation);color=new Re(E.StoryboardCommandType.color);alpha=new Re(E.StoryboardCommandType.fade);blendingParameters=new Re(E.StoryboardCommandType.parameter,E.StoryboardParameterCommandType.blendingMode);flipHorizontal=new Re(E.StoryboardCommandType.parameter,E.StoryboardParameterCommandType.horizontalFlip);flipVertical=new Re(E.StoryboardCommandType.parameter,E.StoryboardParameterCommandType.verticalFlip);timelines=[this.x,this.y,this.scale,this.vectorScale,this.rotation,this.color,this.alpha,this.blendingParameters,this.flipHorizontal,this.flipVertical];get commandsStartTime(){return Math.min(...this.timelines.map(Be=>Be.startTime))}get commandsEndTime(){return Math.max(...this.timelines.map(Be=>Be.endTime))}get commandsDuration(){return this.commandsEndTime-this.commandsStartTime}get startTime(){return this.commandsStartTime}get endTime(){return this.commandsEndTime}get duration(){return this.endTime-this.startTime}get hasCommands(){return this.timelines.some(Be=>Be.hasCommands)}getCommands(Be,Ue=0){const tt=Be(this);return Ue!==0?tt.commands.map(gt=>new Qe(gt.easing,Ue+gt.startTime,Ue+gt.endTime,gt.startValue,gt.endValue,gt.type,gt.parameterType)):tt.commands}}class Me extends Pe{loopStartTime;totalIterations;get startTime(){return this.loopStartTime+this.commandsStartTime}get endTime(){return this.startTime+this.commandsDuration*this.totalIterations}constructor(Be,Ue){if(super(),Ue<0)throw new RangeError("Repeat count must be zero or above.");this.loopStartTime=Be,this.totalIterations=Ue+1}getCommands(Be,Ue=0){const tt=[];for(let gt=0;gt<this.totalIterations;++gt){const je=this.loopStartTime+gt*this.commandsDuration;tt.push(...super.getCommands(Be,Ue+je))}return tt}toString(){return`${this.loopStartTime} x${this.totalIterations}`}}class $e extends Pe{triggerName;triggerStartTime;triggerEndTime;groupNumber;constructor(Be,Ue,tt,gt){super(),this.triggerName=Be,this.triggerStartTime=Ue,this.triggerEndTime=tt,this.groupNumber=gt}toString(){return`${this.triggerName} ${this.triggerStartTime} -> ${this.triggerEndTime} (${this.groupNumber})`}}class it{path;get endTime(){return this.startTime}get duration(){return this.endTime-this.startTime}constructor(Be){this.path=Be}}class kt extends it{loops=[];triggers=[];origin;initialPosition;timelineGroup=new Pe;get startTime(){const Be=[];let Ue=this.timelineGroup.alpha.commands[0];Ue&&Be.push({startTime:Ue.startTime,isZeroStartValue:Ue.startValue===0});for(const tt of this.loops)Ue=tt.alpha.commands[0],Ue&&Be.push({startTime:Ue.startTime+tt.loopStartTime,isZeroStartValue:Ue.startValue===0});if(Be.length>0){const tt=Be.sort((gt,je)=>gt.startTime-je.startTime)[0];if(tt.isZeroStartValue)return tt.startTime}return this.earliestTransformTime}get earliestTransformTime(){let Be=this.timelineGroup.startTime;for(const Ue of this.loops)Be=Math.min(Be,Ue.startTime);return Be}get endTime(){return Math.max(this.timelineGroup.endTime,...this.loops.map(Be=>Be.endTime))}get hasCommands(){return this.timelineGroup.hasCommands||this.loops.some(Be=>Be.hasCommands)}constructor(Be,Ue,tt){super(Be),this.origin=Ue,this.initialPosition=tt}addLoop(Be,Ue){const tt=new Me(Be,Ue);return this.loops.push(tt),tt}addTrigger(Be,Ue,tt,gt){const je=new $e(Be,Ue,tt,gt);return this.triggers.push(je),je}toString(){return`${this.path}, ${this.origin}, ${this.initialPosition}`}}class xt extends kt{frameCount;frameDelay;loopType;constructor(Be,Ue,tt,gt,je,Xe){super(Be,Ue,tt),this.frameCount=gt,this.frameDelay=je,this.loopType=Xe}}class Ot extends it{_startTime;get startTime(){return this._startTime}volume;constructor(Be,Ue,tt){super(Be),this._startTime=Ue,this.volume=tt}}E.StoryboardEventType=void 0,(function(ct){ct.background="Background",ct.sprite="Sprite",ct.color="Colour",ct.sample="Sample",ct.animation="Animation"})(E.StoryboardEventType||(E.StoryboardEventType={}));class Jt extends Rt{storyboardSprite=null;timelineGroup;decodeInternal(Be){if(["//","0","1","Video","2","Break","3"].some(gt=>Be.startsWith(gt)))return;let Ue=0;for(const gt of Be)if(gt===" "||gt==="_")++Ue;else break;for(Be=Be.substring(Ue);Be.includes("$");){const gt=Be;for(const je in this.target.variables)Be=Be.replace(je,this.target.variables[je]);if(Be===gt)break}const tt=Be.split(",");if(Ue===0)switch(this.storyboardSprite=null,this.setPosition(tt[0])){case E.StoryboardEventType.sprite:{this.storyboardSprite=new kt(this.cleanFilename(this.setPosition(tt[3])),this.setPosition(tt[2]),new V(this.tryParseFloat(this.setPosition(tt[4]),-Ce.MAX_COORDINATE_VALUE,Ce.MAX_COORDINATE_VALUE),this.tryParseFloat(this.setPosition(tt[5]),-Ce.MAX_COORDINATE_VALUE,Ce.MAX_COORDINATE_VALUE))),this.target.getLayer(this.setPosition(tt[1])).elements.push(this.storyboardSprite);break}case E.StoryboardEventType.animation:{let gt=this.tryParseInt(this.setPosition(tt[7]));const je=tt[8]==="1"||tt[8]==="LoopOnce"?E.AnimationLoopType.loopOnce:E.AnimationLoopType.loopForever;this.formatVersion<6&&(gt=Math.round(.015*gt)*1.186*(1e3/60)),this.storyboardSprite=new xt(this.cleanFilename(this.setPosition(tt[3])),this.setPosition(tt[2]),new V(this.tryParseFloat(this.setPosition(tt[4]),-Ce.MAX_COORDINATE_VALUE,Ce.MAX_COORDINATE_VALUE),this.tryParseFloat(this.setPosition(tt[5]),-Ce.MAX_COORDINATE_VALUE,Ce.MAX_COORDINATE_VALUE)),this.tryParseInt(this.setPosition(tt[6])),gt,je),this.target.getLayer(this.setPosition(tt[1])).elements.push(this.storyboardSprite);break}case E.StoryboardEventType.sample:this.target.getLayer(this.setPosition(tt[2])).elements.push(new Ot(this.cleanFilename(this.setPosition(tt[3])),this.tryParseInt(this.setPosition(tt[1])),tt.length>4?this.tryParseInt(this.setPosition(tt[4])):100));break;default:throw new TypeError(`Unknown event type: ${this.setPosition(tt[0])}`)}else switch(Ue<2&&(this.timelineGroup=this.storyboardSprite?.timelineGroup),this.setPosition(tt[0])){case E.StoryboardCommandType.trigger:this.timelineGroup=this.storyboardSprite?.addTrigger(this.setPosition(tt[1]),tt.length>2?this.tryParseInt(this.setPosition(tt[2])):Number.MIN_SAFE_INTEGER,tt.length>3?this.tryParseInt(this.setPosition(tt[3])):Number.MAX_SAFE_INTEGER,tt.length>4?this.tryParseInt(this.setPosition(tt[4])):0);break;case E.StoryboardCommandType.loop:this.timelineGroup=this.storyboardSprite?.addLoop(this.tryParseInt(this.setPosition(tt[1])),Math.max(0,this.tryParseInt(this.setPosition(tt[2]))-1));break;default:{tt[3]||(tt[3]=this.setPosition(tt[2]));const gt=this.tryParseInt(this.setPosition(tt[1])),je=this.tryParseInt(this.setPosition(tt[2])),Xe=this.tryParseInt(this.setPosition(tt[3]));switch(tt[0]){case E.StoryboardCommandType.fade:{const lt=this.tryParseFloat(this.setPosition(tt[4])),Ct=tt.length>5?this.tryParseFloat(this.setPosition(tt[5])):lt;this.timelineGroup?.alpha.add(gt,je,Xe,lt,Ct);break}case E.StoryboardCommandType.scale:{const lt=this.tryParseFloat(this.setPosition(tt[4])),Ct=tt.length>5?this.tryParseFloat(this.setPosition(tt[5])):lt;this.timelineGroup?.scale.add(gt,je,Xe,lt,Ct);break}case E.StoryboardCommandType.vectorScale:{const lt=this.tryParseFloat(this.setPosition(tt[4])),Ct=this.tryParseFloat(this.setPosition(tt[5])),Qt=tt.length>6?this.tryParseFloat(this.setPosition(tt[6])):lt,Ht=tt.length>7?this.tryParseFloat(this.setPosition(tt[7])):Ct;this.timelineGroup?.vectorScale.add(gt,je,Xe,new V(lt,Ct),new V(Qt,Ht));break}case E.StoryboardCommandType.rotation:{const lt=this.tryParseFloat(this.setPosition(tt[4])),Ct=tt.length>5?this.tryParseFloat(this.setPosition(tt[5])):lt;this.timelineGroup?.rotation.add(gt,je,Xe,R.radiansToDegrees(lt),R.radiansToDegrees(Ct));break}case E.StoryboardCommandType.movement:{const lt=this.tryParseFloat(this.setPosition(tt[4])),Ct=this.tryParseFloat(this.setPosition(tt[5])),Qt=tt.length>6?this.tryParseFloat(this.setPosition(tt[6])):lt,Ht=tt.length>7?this.tryParseFloat(this.setPosition(tt[7])):Ct;this.timelineGroup?.move.add(gt,je,Xe,new V(lt,Qt),new V(Ct,Ht));break}case E.StoryboardCommandType.movementX:{const lt=this.tryParseFloat(this.setPosition(tt[4])),Ct=tt.length>5?this.tryParseFloat(this.setPosition(tt[5])):lt;this.timelineGroup?.x.add(gt,je,Xe,lt,Ct);break}case E.StoryboardCommandType.movementY:{const lt=this.tryParseFloat(this.setPosition(tt[4])),Ct=tt.length>5?this.tryParseFloat(this.setPosition(tt[5])):lt;this.timelineGroup?.y.add(gt,je,Xe,lt,Ct);break}case E.StoryboardCommandType.color:{const lt=this.tryParseFloat(this.setPosition(tt[4])),Ct=this.tryParseFloat(this.setPosition(tt[5])),Qt=this.tryParseFloat(this.setPosition(tt[6])),Ht=tt.length>7?this.tryParseFloat(this.setPosition(tt[7])):lt,er=tt.length>8?this.tryParseFloat(tt[8]):Ct,ir=tt.length>9?this.tryParseFloat(tt[9]):Qt;this.timelineGroup?.color.add(gt,je,Xe,new Ye(lt,Ct,Qt),new Ye(Ht,er,ir));break}case E.StoryboardCommandType.parameter:switch(this.setPosition(tt[4])){case E.StoryboardParameterCommandType.blendingMode:this.timelineGroup?.blendingParameters.add(gt,je,Xe,bt.additive,je===Xe?bt.additive:bt.inherit);break;case E.StoryboardParameterCommandType.horizontalFlip:this.timelineGroup?.flipHorizontal.add(gt,je,Xe,!0,je===Xe);break;case E.StoryboardParameterCommandType.verticalFlip:this.timelineGroup?.flipVertical.add(gt,je,Xe,!0,je===Xe);break}break;default:throw new TypeError(`Unknown command type: ${this.setPosition(tt[0])}`)}}}}cleanFilename(Be){let Ue=0,tt=Be.length;for(;Ue<tt&&Be.charAt(Ue)==='"';)++Ue;for(;tt>Ue&&Be.charAt(tt-1)==='"';)--tt;return B.normalize(Ue>0||tt<Be.length?Be.substring(Ue,tt):Be)}}class tr extends Rt{decodeInternal(Be){const Ue=this.property(Be);switch(Ue[0]){case"UseSkinSprites":this.target.useSkinSprites=!!this.tryParseInt(Ue[1]);break}}}class br extends Rt{decodeInternal(Be){const Ue=Be.split("=");this.target.variables[Ue[0]]=Ue[1]}}class ar{name;depth;visibleWhenPassing;visibleWhenFailing;elements=[];constructor(Be,Ue,tt=!0,gt=!0){this.name=Be,this.depth=Ue,this.visibleWhenPassing=tt,this.visibleWhenFailing=gt}}class _r{layers={Background:new ar(E.StoryboardLayerType.background,3),Fail:new ar(E.StoryboardLayerType.fail,2,!1),Pass:new ar(E.StoryboardLayerType.pass,1,!0,!1),Foreground:new ar(E.StoryboardLayerType.foreground,0),Overlay:new ar(E.StoryboardLayerType.overlay,Number.MIN_SAFE_INTEGER)};useSkinSprites=!1;variables={};minimumLayerDepth=0;get earliestEventTime(){return Object.values(this.layers).map(Be=>Be.elements).flat().sort((Be,Ue)=>Be.startTime-Ue.startTime)[0]?.startTime??null}get latestEventTime(){return Object.values(this.layers).map(Be=>Be.elements).flat().sort((Be,Ue)=>Ue.endTime-Be.endTime)[0]?.endTime??null}getLayer(Be,Ue=!0){let tt=this.layers[Be];return!tt&&Ue&&(tt=new ar(Be,--this.minimumLayerDepth),this.layers[Be]=tt),tt??null}}class or extends Dt{finalResult=new _r;decoders={};constructor(Be=Dt.latestVersion){super(),this.formatVersion=Be}reset(){super.reset(),this.finalResult=new _r,this.decoders={General:new tr(this.finalResult,this.formatVersion),Events:new Jt(this.finalResult,this.formatVersion),Variables:new br(this.finalResult,this.formatVersion)}}}class gr{static stackDistance=3;static applyStandardStacking(Be,Ue,tt,gt,je=0,Xe=Ue.length-1){if(Be<6){this.applyStandardOldStacking(Ue,tt,gt);return}const lt=ze.arToMS(tt);let Ct=Xe;const Qt=lt*gt;if(Xe<Ue.length-1)for(let er=Xe;er>=je;--er){let ir=er;for(let Ir=ir+1;Ir<Ue.length;++Ir){const kr=Ue[ir];if(kr instanceof se)break;const Or=Ue[Ir];if(Or instanceof se||Or.startTime-kr.endTime>Qt)break;const Pr=kr instanceof fe?kr.endPosition.getDistance(Or.position)<this.stackDistance:!1;(kr.position.getDistance(Or.position)<this.stackDistance||Pr)&&(ir=Ir,Or.stackHeight=0)}if(ir>Ct&&(Ct=ir,Ct===Ue.length-1))break}let Ht=je;for(let er=Ct;er>je;--er){let ir=er,Ir=Ue[er];if(!(Ir.stackHeight!==0||Ir instanceof se)){if(Ir instanceof J)for(;--ir>=0;){const kr=Ue[ir];if(!(kr instanceof se)){if(Ir.startTime-kr.endTime>Qt)break;if(ir<Ht&&(kr.stackHeight=0,Ht=ir),kr instanceof fe&&kr.endPosition.getDistance(Ir.position)<this.stackDistance){const Or=Ir.stackHeight-kr.stackHeight+1;for(let Pr=ir+1;Pr<=er;++Pr){const jr=Ue[Pr];kr.endPosition.getDistance(jr.position)<this.stackDistance&&(jr.stackHeight-=Or)}break}kr.position.getDistance(Ir.position)<this.stackDistance&&(kr.stackHeight=Ir.stackHeight+1,Ir=kr)}}else if(Ir instanceof fe)for(;--ir>=je;){const kr=Ue[ir];if(!(kr instanceof se)){if(Ir.startTime-kr.startTime>Qt)break;kr.endPosition.getDistance(Ir.position)<this.stackDistance&&(kr.stackHeight=Ir.stackHeight+1,Ir=kr)}}}}}static applyDroidStacking(Be,Ue){if(Be.length===0)return;Be[0].stackHeight=0;const tt=nr.standardScaleToDroidScale(Be[0].droidScale);for(let gt=0;gt<Be.length-1;++gt){const je=Be[gt],Xe=Be[gt+1];Xe.startTime-je.startTime<2e3*Ue&&Xe.position.getDistance(je.position)<Math.sqrt(tt)?Xe.stackHeight=je.stackHeight+1:Xe.stackHeight=0}}static applyStandardOldStacking(Be,Ue,tt){const gt=ze.arToMS(Ue);for(let je=0;je<Be.length;++je){const Xe=Be[je];if(Xe.stackHeight!==0&&!(Xe instanceof fe))continue;let lt=Xe.endTime,Ct=0;for(let Qt=je+1;Qt<Be.length;++Qt){const Ht=gt*tt;if(Be[Qt].startTime-Ht>lt)break;Be[Qt].position.getDistance(Xe.position)<this.stackDistance?(++Xe.stackHeight,lt=Be[Qt].endTime):Be[Qt].position.getDistance(Xe.endPosition)<this.stackDistance&&(++Ct,Be[Qt].stackHeight-=Ct,lt=Be[Qt].endTime)}}}}class xr extends Dt{finalResult=new ge;decoders={};previousSection=He.general;decode(Be,Ue=[],tt=!0){if(super.decode(Be),tt){const Ct=this.decoders[He.events];Ct.storyboardLines.length>0&&(this.finalResult.events.storyboard=new or(this.finalResult.formatVersion).decode(Ct.storyboardLines.join(`
`)).result)}const gt=new ze({cs:this.finalResult.difficulty.cs,mods:Ue}).calculate({mode:E.Modes.droid}).cs,je=nr.standardCSToStandardScale(gt),Xe=new ze({cs:this.finalResult.difficulty.cs,mods:Ue}).calculate({mode:E.Modes.osu}).cs,lt=nr.standardCSToStandardScale(Xe);return this.finalResult.hitObjects.objects.forEach(Ct=>{Ct.droidScale=je,Ct.osuScale=lt}),gr.applyStandardStacking(this.formatVersion,this.finalResult.hitObjects.objects,this.finalResult.difficulty.ar,this.finalResult.general.stackLeniency,0,this.finalResult.hitObjects.objects.length-1),this}decodeLine(Be){this.finalResult.formatVersion!==this.formatVersion&&(this.finalResult.formatVersion=this.formatVersion),this.previousSection!==this.section&&(this.previousSection===He.difficulty&&this.finalResult.difficulty.ar===void 0&&(this.finalResult.difficulty.ar=this.finalResult.difficulty.od),this.previousSection=this.section),super.decodeLine(Be)}reset(){super.reset(),this.finalResult=new ge,this.decoders={General:new We(this.finalResult),Editor:new Ve(this.finalResult),Metadata:new rr(this.finalResult),Difficulty:new jt(this.finalResult),Events:new At(this.finalResult),TimingPoints:new Ne(this.finalResult),Colours:new st(this.finalResult),HitObjects:new De(this.finalResult)}}}class vr{target;finalResult="";get result(){return this.finalResult}constructor(Be){this.target=Be}encode(){return this.reset(),this.encodeInternal(),this}writeLine(Be=""){this.finalResult+=Be+`
`}encodeInternal(){for(const Be of this.encoders)this.writeLine(Be.encode())}}class Cr{result="";encodeSections;constructor(Be=!0){this.encodeSections=Be}encode(){return this.encodeInternal(),this.result}write(Be){this.result+=Be}writeLine(Be=""){this.write(Be),this.write(`
`)}}class Sr extends Cr{map;constructor(Be,Ue=!0){super(Ue),this.map=Be}sampleBankToString(Be){switch(Be){case E.SampleBank.normal:return"Normal";case E.SampleBank.soft:return"Soft";case E.SampleBank.drum:return"Drum";default:return"None"}}}class dr extends Sr{encodeInternal(){const Be=this.map.colors;if(!(Be.combo.length===0&&!Be.sliderBorder&&!Be.sliderTrackOverride)){this.encodeSections&&this.writeLine("[Colours]");for(let Ue=0;Ue<Be.combo.length;++Ue){const tt=Be.combo[Ue];this.write(`Combo${Ue+1}: `),this.write(`${tt.r},`),this.write(`${tt.g},`),this.write(`${tt.b}`),this.writeLine()}}}}class wr extends Sr{controlPointGroups={};encodeInternal(){if(!(this.map.controlPoints.timing.points.length===0&&this.map.controlPoints.difficulty.points.length===0&&this.map.controlPoints.effect.points.length===0&&this.map.controlPoints.sample.points.length===0)){this.encodeSections&&this.writeLine("[TimingPoints]"),this.collectTimingControlPointInfo(),this.collectDifficultyControlPointInfo(),this.collectEffectControlPointInfo(),this.collectSampleControlPointInfo();for(const Be of Object.values(this.controlPointGroups).sort((Ue,tt)=>Ue.time-tt.time)){Be.timing&&(this.write(`${Be.timing.time},`),this.write(`${Be.timing.msPerBeat},`),this.outputControlPointGroup(Be,!0)),this.write(`${Be.time},`);const Ue=Be.difficulty??this.map.controlPoints.difficulty.controlPointAt(Be.time);this.write(`${-100/Ue.speedMultiplier},`),this.outputControlPointGroup(Be,!1)}}}collectTimingControlPointInfo(){for(const Be of this.map.controlPoints.timing.points){const Ue=this.controlPointGroups[Be.time]??{time:Be.time};Ue.timing??=Be,this.controlPointGroups[Be.time]=Ue}}collectDifficultyControlPointInfo(){for(const Be of this.map.controlPoints.difficulty.points){const Ue=this.controlPointGroups[Be.time]??{time:Be.time};Ue.difficulty??=Be,this.controlPointGroups[Be.time]=Ue}}collectEffectControlPointInfo(){for(const Be of this.map.controlPoints.effect.points){const Ue=this.controlPointGroups[Be.time]??{time:Be.time};Ue.effect??=Be,this.controlPointGroups[Be.time]=Ue}}collectSampleControlPointInfo(){for(const Be of this.map.controlPoints.sample.points){const Ue=this.controlPointGroups[Be.time]??{time:Be.time};Ue.sample??=Be,this.controlPointGroups[Be.time]=Ue}}outputControlPointGroup(Be,Ue){const tt=Be.sample??this.map.controlPoints.sample.controlPointAt(Be.time),gt=Be.effect??this.map.controlPoints.effect.controlPointAt(Be.time);let je=Ke.none;gt.isKiai&&(je|=Ke.kiai),gt.omitFirstBarLine&&(je|=Ke.omitFirstBarLine),this.write(`${(Be.timing??this.map.controlPoints.timing.controlPointAt(Be.time)).timeSignature},`),this.write(`${tt.sampleBank.toString()},`),this.write(`${tt.customSampleBank.toString()},`),this.write(`${tt.sampleVolume.toString()},`),this.write(`${Ue?"1":"0"},`),this.write(je.toString()),this.writeLine()}}class fr extends Sr{encodeInternal(){this.encodeSections&&this.writeLine("[Difficulty]");const Be=this.map.difficulty;this.writeLine(`HPDrainRate: ${Be.hp}`),this.writeLine(`CircleSize: ${Be.cs}`),this.writeLine(`OverallDifficulty: ${Be.od}`),this.writeLine(`ApproachRate: ${Be.ar??Be.od}`),this.writeLine(`SliderMultiplier: ${Be.sliderMultiplier}`),this.writeLine(`SliderTickRate: ${Be.sliderTickRate}`)}}class hr extends Sr{encodeInternal(){this.encodeSections&&this.writeLine("[Editor]");const Be=this.map.editor;Be.bookmarks.length>0&&this.writeLine(Be.bookmarks.join()),this.writeLine(`DistanceSpacing: ${Be.distanceSnap}`),this.writeLine(`BeatDivisor: ${Be.beatDivisor}`),this.writeLine(`GridSize: ${Be.gridSize}`),this.writeLine(`TimelineZoom: ${Be.timelineZoom}`)}}class Ar extends Cr{storyboard;constructor(Be,Ue=!0){super(Ue),this.storyboard=Be}}class ur extends Ar{encodeInternal(){this.encodeSections&&this.writeLine("[Events]"),this.writeLine("//Storyboard Layer 0 (Background)"),this.encodeLayer(E.StoryboardLayerType.background),this.writeLine("//Storyboard Layer 1 (Fail)"),this.encodeLayer(E.StoryboardLayerType.fail),this.writeLine("//Storyboard Layer 2 (Pass)"),this.encodeLayer(E.StoryboardLayerType.pass),this.writeLine("//Storyboard Layer 3 (Foreground)"),this.encodeLayer(E.StoryboardLayerType.foreground),this.writeLine("//Storyboard Layer 4 (Overlay)"),this.encodeLayer(E.StoryboardLayerType.overlay),this.writeLine("//Storyboard Sound Samples"),this.encodeLayer(E.StoryboardLayerType.sample)}write(Be){super.write(this.encodeVariables(Be))}writeLine(Be=""){super.writeLine(this.encodeVariables(Be))}encodeVariables(Be){for(const Ue in this.storyboard.variables)Be=Be.replace(new RegExp(this.storyboard.variables[Ue],"g"),Ue);return Be}encodeLayer(Be){const Ue=this.storyboard.getLayer(Be,!1);for(const tt of Ue?.elements??[])tt instanceof xt?(this.write(`${E.StoryboardEventType.animation},`),this.write(`${Be},`),this.write(`${tt.origin},`),this.write(`"${tt.path}",`),this.write(`${tt.initialPosition},`),this.write(`${tt.frameCount},`),this.write(`${tt.frameDelay},`),this.writeLine(`${tt.loopType}`),this.encodeElement(tt)):tt instanceof kt?(this.write(`${E.StoryboardEventType.sprite},`),this.write(`${Be},`),this.write(`${tt.origin},`),this.write(`"${tt.path}",`),this.writeLine(`${tt.initialPosition}`),this.encodeElement(tt)):tt instanceof Ot&&(this.write(`${E.StoryboardEventType.sample},`),this.write(`${tt.startTime},`),this.write(`${Be},`),this.write(`"${tt.path}",`),this.writeLine(`${tt.volume}`))}encodeElement(Be){for(const Ue of Be.loops)this.encodeTimelineGroup(Ue);this.encodeTimelineGroup(Be.timelineGroup);for(const Ue of Be.triggers)this.encodeTimelineGroup(Ue)}encodeTimelineGroup(Be){Be instanceof Me?(this.write(" "),this.write(`${E.StoryboardCommandType.loop},`),this.write(`${Be.startTime},`),this.write(`${Be.totalIterations}`)):Be instanceof $e&&(this.write(" "),this.write(`${E.StoryboardCommandType.trigger},`),this.write(`${Be.triggerName}`),Be.triggerEndTime!==Number.MAX_SAFE_INTEGER&&(this.write(","),this.write(`${Be.triggerStartTime},`),this.write(`${Be.triggerEndTime}`)),Be.groupNumber!==0&&(this.write(","),this.write(`${Be.groupNumber}`))),this.encodeTimeline(Be.alpha),this.encodeTimeline(Be.blendingParameters),this.encodeTimeline(Be.color),this.encodeTimeline(Be.move),this.encodeTimeline(Be.rotation),this.encodeTimeline(Be.scale),this.encodeTimeline(Be.vectorScale),this.encodeTimeline(Be.x),this.encodeTimeline(Be.y)}encodeTimeline(Be){for(const Ue of Be.commands)this.encodeCommand(Ue)}encodeCommand(Be){this.write(" "),this.write(`${Be.type},`),this.write(`${Be.easing},`),this.write(`${Be.startTime},`),this.write(Be.startTime!==Be.endTime?`${Be.endTime}`:""),this.write(","),Be.startValue instanceof V&&Be.endValue instanceof V?(this.write(Be.startValue.toString()),Be.startValue.equals(Be.endValue)||(this.write(","),this.write(Be.endValue.toString()))):Be.isParameter()?this.write(Be.parameterType):Be.startValue instanceof Ye&&Be.endValue instanceof Ye?(this.write(Be.startValue.toString()),Be.startValue.equals(Be.endValue)||(this.write(","),this.write(Be.endValue.toString()))):typeof Be.startValue=="number"&&typeof Be.endValue=="number"&&(Be.type===E.StoryboardCommandType.rotation?this.write(R.degreesToRadians(Be.startValue).toString()):this.write(Be.startValue.toString()),Be.startValue!==Be.endValue&&(this.write(","),Be.type===E.StoryboardCommandType.rotation?this.write(R.degreesToRadians(Be.endValue).toString()):this.write(Be.endValue.toString()))),this.writeLine()}}class zt extends Ar{encodeInternal(){this.encodeSections&&this.writeLine("[Variables]");for(const Be in this.storyboard.variables)this.writeLine(`${Be}=${this.storyboard.variables[Be]}`)}}class Kt extends vr{finalResult="";encoders=[];encodeSections;constructor(Be,Ue=!0){super(Be),this.encodeSections=Ue}reset(){this.finalResult="",this.encoders=[new zt(this.target,this.encodeSections),new ur(this.target,this.encodeSections)]}}class lr extends Sr{encodeInternal(){this.encodeSections&&this.writeLine("[Events]"),this.writeLine("//Background and Video Events");const Be=this.map.events;Be.background&&this.writeLine(`0,0,"${Be.background.filename}",${Be.background.offset.x},${Be.background.offset.y}`),Be.video&&this.writeLine(`Video,${Be.video.startTime},"${Be.video.filename}",${Be.video.offset.x},${Be.video.offset.y}`),this.writeLine("//Break Periods");for(const Ue of Be.breaks)this.writeLine(`2,${Ue.startTime},${Ue.endTime}`);this.map.events.storyboard?this.writeLine(new Kt(this.map.events.storyboard,!1).encode().result):(this.writeLine("//Storyboard Layer 0 (Background)"),this.writeLine("//Storyboard Layer 1 (Fail)"),this.writeLine("//Storyboard Layer 2 (Pass)"),this.writeLine("//Storyboard Layer 3 (Foreground)"),this.writeLine("//Storyboard Layer 4 (Overlay)"),this.writeLine("//Storyboard Sound Samples"))}}class ot extends Sr{encodeInternal(){this.encodeSections&&this.writeLine("[General]");const Be=this.map.general;Be.audioFilename&&this.writeLine(`AudioFilename: ${Be.audioFilename}`),this.writeLine(`AudioLeadIn: ${Be.audioLeadIn}`),this.writeLine(`PreviewTime: ${Be.previewTime}`),this.writeLine(`Countdown: ${Be.countdown}`),this.writeLine(`SampleSet: ${this.sampleBankToString(Be.sampleBank)}`),this.writeLine(`StackLeniency: ${Be.stackLeniency}`),this.writeLine(`Mode: ${Be.mode}`),this.writeLine(`LetterboxInBreaks: ${Be.letterBoxInBreaks?1:0}`),Be.epilepsyWarning&&this.writeLine("EpilepsyWarning: 1"),Be.countdownOffset>0&&this.writeLine(`CountdownOffset: ${Be.countdownOffset}`),this.writeLine(`WidescreenStoryboard: ${Be.widescreenStoryboard?1:0}`),Be.samplesMatchPlaybackRate&&this.writeLine("SamplesMatchPlaybackRate: 1")}}class ut extends Sr{encodeInternal(){this.encodeSections&&this.writeLine("[HitObjects]");for(const Be of this.map.hitObjects.objects)this.encodeHitObject(Be)}encodeHitObject(Be){this.write(`${Be.position.x},`),this.write(`${Be.position.y},`),this.write(`${Be.startTime},`),this.write(`${Be.type},`),this.write(`${this.samplesToHitSoundType(Be.samples).toString()},`),Be instanceof fe?(this.addSliderPath(Be),this.write(this.getSampleBank(Be.samples))):(Be instanceof se&&this.write(`${Be.endTime},`),this.write(this.getSampleBank(Be.samples))),this.writeLine()}samplesToHitSoundType(Be){let Ue=E.HitSoundType.none;for(const tt of Be)switch(tt.name){case nt.HIT_WHISTLE:Ue|=E.HitSoundType.whistle;break;case nt.HIT_FINISH:Ue|=E.HitSoundType.finish;break;case nt.HIT_CLAP:Ue|=E.HitSoundType.clap;break}return Ue}addSliderPath(Be){this.write(Be.path.pathType+"|");for(let Ue=1;Ue<Be.path.controlPoints.length;++Ue){const tt=Be.path.controlPoints[Ue].add(Be.position);this.write(`${tt.x}:${tt.y}`),this.write(Ue!=Be.path.controlPoints.length-1?"|":",")}this.write(`${Be.repeats+1},`),this.write(`${Be.path.expectedDistance},`);for(let Ue=0;Ue<Be.nodeSamples.length;++Ue)this.write(this.samplesToHitSoundType(Be.nodeSamples[Ue]).toString()),this.write(Ue!=Be.nodeSamples.length-1?"|":",");for(let Ue=0;Ue<Be.nodeSamples.length;++Ue)this.write(this.getSampleBank(Be.nodeSamples[Ue],!0)),this.write(Ue!=Be.nodeSamples.length-1?"|":",")}getSampleBank(Be,Ue=!1){const tt=Be.find(Xe=>Xe.name===nt.HIT_NORMAL)?.bank??E.SampleBank.none,gt=Be.find(Xe=>Xe.name&&Xe.name!==nt.HIT_NORMAL)?.bank??E.SampleBank.none;let je=`${tt}:${gt}`;if(!Ue){const Xe=Be[0];je+=":",je+=`${Xe?.customSampleBank??0}:`,je+=`${Xe?.volume??100}:`;let lt="";Xe?.isCustom&&(lt+=`${this.sampleBankToString(Xe.bank??E.SampleBank.none)}-${Xe.name}`,Xe.customSampleBank>0&&(lt+=Xe.customSampleBank.toString()),je+=lt)}return je}sampleBankToString(Be){switch(Be){case E.SampleBank.none:return"";default:return super.sampleBankToString(Be)}}}class Bt extends Sr{encodeInternal(){this.encodeSections&&this.writeLine("[Metadata]");const Be=this.map.metadata;this.writeLine(`Title: ${Be.title}`),Be.titleUnicode&&this.writeLine(`TitleUnicode: ${Be.titleUnicode}`),this.writeLine(`Artist: ${Be.artist}`),Be.artistUnicode&&this.writeLine(`ArtistUnicode: ${Be.artistUnicode}`),this.writeLine(`Creator: ${Be.creator}`),this.writeLine(`Version: ${Be.version}`),Be.source&&this.writeLine(`Source: ${Be.source}`),Be.tags.length>0&&this.writeLine(`Tags: ${Be.tags.join(" ")}`),(Be.beatmapId??-1)>0&&this.writeLine(`BeatmapID: ${Be.beatmapId}`),(Be.beatmapSetId??-1)>0&&this.writeLine(`BeatmapSetID: ${Be.beatmapSetId}`)}}class Lt extends vr{encoders=[];latestVersion=14;encodeInternal(){this.writeLine(`osu file format v${this.latestVersion}`),this.writeLine(),super.encodeInternal()}reset(){this.finalResult="",this.encoders=[new ot(this.target),new hr(this.target),new Bt(this.target),new fr(this.target),new lr(this.target),new wr(this.target),new dr(this.target),new ut(this.target)]}}class $t{static expand(Be,Ue,tt=1.6,gt=50){const je=Ue.upperBound,Xe=Ue.lowerBound;if(Xe>=je)throw new RangeError("Upper bound must be greater than lower bound.");let lt=Be(Xe),Ct=Be(je);for(let Qt=0;Qt<gt;++Qt){if(Math.sign(lt)!==Math.sign(Ct))return!0;Math.abs(lt)<Math.abs(Ct)?(Ue.lowerBound+=tt*(Ue.lowerBound-Ue.upperBound),lt=Be(Ue.lowerBound)):(Ue.upperBound+=tt*(Ue.upperBound-Ue.lowerBound),Ct=Be(Ue.upperBound))}return Ue.lowerBound=Xe,Ue.upperBound=je,!1}static reduce(Be,Ue,tt=1e3){const gt=Ue.upperBound,je=Ue.lowerBound;if(je>=gt)throw new RangeError("Upper bound must be greater than lower bound.");const Xe=Be(Ue.lowerBound),lt=Be(Ue.upperBound);if(Math.sign(Xe)!=Math.sign(lt))return!0;const Ct=(Ue.upperBound-Ue.lowerBound)/tt;let Qt=Ue.lowerBound;const Ht=Math.sign(Xe);for(let er=0;er<tt;++er){const ir=Qt+Ct,Ir=Be(ir);if(!Number.isFinite(Ir)){Qt=ir;continue}if(Math.sign(Ir)!=Ht)return Ue.upperBound=ir,Ue.lowerBound=Qt,!0;Qt=ir}return Ue.lowerBound=je,Ue.upperBound=gt,!1}static expandReduce(Be,Ue,tt=1.6,gt=50,je=100){return this.expand(Be,Ue,tt,gt)||this.reduce(Be,Ue,je)}}class Zt{static findRootExpand(Be,Ue,tt=1e-8,gt=100,je=1.6,Xe=100){return $t.expandReduce(Be,Ue,je,Xe,Xe*10),this.findRoot(Be,Ue,tt,gt)}static findRoot(Be,Ue,tt=1e-8,gt=100){const je=this.tryFindRoot(Be,Ue,tt,gt);if(je===null)throw new Error("The algorithm has failed, exceeded the number of iterations allowed or there is no root within the provided bounds.");return je}static tryFindRoot(Be,Ue,tt,gt){if(tt<=0)throw new RangeError("Accuracy must be greater than 0.");let{lowerBound:je,upperBound:Xe}=Ue,lt=Be(je),Ct=Be(Xe),Qt=Ct,Ht=0,er=0,ir=Xe,Ir=Number.NaN;if(Math.sign(lt)===Math.sign(Ct))return null;for(let kr=0;kr<=gt;++kr){Math.sign(Qt)===Math.sign(Ct)&&(Xe=je,Ct=lt,er=Ht=ir-je),Math.abs(Ct)<Math.abs(Qt)&&(je=ir,ir=Xe,Xe=je,lt=Qt,Qt=Ct,Ct=lt);const Or=2*Math.pow(2,-53)*Math.abs(ir)+tt/2,Pr=Ir;if(Ir=(Xe-ir)/2,Math.abs(Ir)<=Or||Le.almostEqualNormRelative(Qt,0,Qt,tt))return ir;if(Ir===Pr)return null;if(Math.abs(er)>=Or&&Math.abs(lt)>Math.abs(Qt)){const jr=Qt/lt;let $r,qr;if(Le.almostEqualRelative(je,Xe))$r=2*Ir*jr,qr=1-jr;else{qr=lt/Ct;const Hr=Qt/Ct;$r=jr*(2*Ir*qr*(qr-Hr)-(ir-je)*(Hr-1)),qr=(qr-1)*(Hr-1)*(jr-1)}$r>0&&(qr=-qr),$r=Math.abs($r),2*$r<Math.min(3*Ir*qr-Math.abs(Or*qr),Math.abs(er*qr))?(er=Ht,Ht=$r/qr):(Ht=Ir,er=Ht)}else Ht=Ir,er=Ht;je=ir,lt=Qt,Math.abs(Ht)>Or?ir+=Ht:ir+=this.sign(Or,Ir),Qt=Be(ir)}return null}static sign(Be,Ue){return Ue>=0?Be>=0?Be:-Be:Be>=0?-Be:Be}}E.Easing=void 0,(function(ct){ct[ct.none=0]="none",ct[ct.out=1]="out",ct[ct.in=2]="in",ct[ct.inQuad=3]="inQuad",ct[ct.outQuad=4]="outQuad",ct[ct.inOutQuad=5]="inOutQuad",ct[ct.inCubic=6]="inCubic",ct[ct.outCubic=7]="outCubic",ct[ct.inOutCubic=8]="inOutCubic",ct[ct.inQuart=9]="inQuart",ct[ct.outQuart=10]="outQuart",ct[ct.inOutQuart=11]="inOutQuart",ct[ct.inQuint=12]="inQuint",ct[ct.outQuint=13]="outQuint",ct[ct.inOutQuint=14]="inOutQuint",ct[ct.inSine=15]="inSine",ct[ct.outSine=16]="outSine",ct[ct.inOutSine=17]="inOutSine",ct[ct.inExpo=18]="inExpo",ct[ct.outExpo=19]="outExpo",ct[ct.inOutExpo=20]="inOutExpo",ct[ct.inCirc=21]="inCirc",ct[ct.outCirc=22]="outCirc",ct[ct.inOutCirc=23]="inOutCirc",ct[ct.inElastic=24]="inElastic",ct[ct.outElastic=25]="outElastic",ct[ct.outElasticHalf=26]="outElasticHalf",ct[ct.outElasticQuarter=27]="outElasticQuarter",ct[ct.inOutElastic=28]="inOutElastic",ct[ct.inBack=29]="inBack",ct[ct.outBack=30]="outBack",ct[ct.inOutBack=31]="inOutBack",ct[ct.inBounce=32]="inBounce",ct[ct.outBounce=33]="outBounce",ct[ct.inOutBounce=34]="inOutBounce",ct[ct.outPow10=35]="outPow10"})(E.Easing||(E.Easing={}));class Vt{static evaluate(Be,Ue){if(Ue.length===0)return 0;let tt=Ue.at(-1);for(let gt=Ue.length-2;gt>=0;--gt)tt*=Be,tt+=Ue[gt];return tt}}class Et{static erfImpAn=[.003379167095512574,-.0007369565304816795,-.3747323373929196,.0817442448733587,-.04210893199365486,.007016570951209576,-.004950912559824351,.0008716465990379225];static erfImpAd=[1,-.2180882180879246,.4125429727254421,-.08418911478731068,.0655338856400242,-.01200196044549418,.00408165558926174,-.0006159007215577697];static erfImpBn=[-.03617903907182625,.2922518834448827,.2814470417976045,.12561020886276694,.02741350282689305,.002508396721680658];static erfImpBd=[1,1.8545005897903486,1.4357580303783142,.5828276587530365,.1248104769329497,.011372417654635328];static erfImpCn=[-.03978768926111369,.1531652124678783,.19126029560093624,.10276327061989304,.029637090615738836,.004609348678027549,.0003076078203486802];static erfImpCd=[1,1.955200729876277,1.6476231719938486,.7682386070221263,.20979318593650978,.03195693168999134,.0021336316089578537];static erfImpDn=[-.030083856055794972,.05385788298444545,.07262115416519142,.03676284698880493,.009646290155725275,.0013345348007529107,778087599782504e-19];static erfImpDd=[1,1.7596709814716753,1.3288357143796112,.5525285965087576,.1337930569413329,.017950964517628076,.001047124400199374,-10664038182035734e-24];static erfImpEn=[-.011790757013722784,.01426213209053881,.02022344359029608,.00930668299990432,.00213357802422066,.000250229873864601,1205349122195882e-20];static erfImpEd=[1,1.5037622520362048,.9653977862044629,.3392652304767967,.068974064954157,.007710602624917683,.0003714211015310693];static erfImpFn=[-.005469547955387293,.004041902787317071,.005496336955316117,.002126164726039454,.0003949840144950839,3655654770644424e-20,13548589710993232e-22];static erfImpFd=[1,1.210196977736308,.6209146682211439,.1730384306611428,.0276550813773432,.002406259744243097,8918118172513366e-20,-4655288362833827e-27];static erfImpGn=[-.002707225359057783,.00131875634250294,.0011992593326100233,.00027849619811344664,2678229882183318e-20,9230436723150282e-22];static erfImpGd=[1,.8146328085431416,.26890166585629954,.04498772161030411,.003817596633202485,.0001315718978885969,4048153596757641e-27];static erfImpHn=[-.001099467206917422,.00040642544275042267,.0002744994894169007,4652937706466594e-20,32095542539576746e-22,778286018145021e-22];static erfImpHd=[1,.588173710611846,.13936333128940975,.016632934041708368,.0010002392131023491,2425483752158723e-20];static erfImpIn=[-.0005690799360109496,.0001694985403737623,5184723545811009e-20,38281931223192885e-22,8249899312818944e-23];static erfImpId=[1,.3396372500511393,.04347264787031066,.002485493352246371,5356333053371529e-20,-11749094440545958e-29];static erfImpJn=[-.00024131359948399134,5742249752025015e-20,11599896292738377e-21,581762134402594e-21,8539715550856736e-24];static erfImpJd=[1,.23304413829968784,.02041869405464403,.0007971856475643983,11701928167017232e-21];static erfImpKn=[-.00014667469927776036,1626665521122805e-20,26911624850916523e-22,979584479468092e-22,10199464762572346e-25];static erfImpKd=[1,.16590781294484722,.010336171619150588,.0002865930263738684,29840157084090034e-22];static erfImpLn=[-5839057976297718e-20,4125103251054962e-21,43179092242025094e-23,9933651555900132e-24,653480510020105e-25];static erfImpLd=[1,.1050770860720399,.004142784286754756,726338754644524e-19,4778184710473988e-22];static erfImpMn=[-19645779760922958e-21,1572438876668007e-21,5439025111927009e-23,3174724923691177e-25];static erfImpMd=[1,.05280398924095763,.0009268760691517533,5410117232266303e-21,5350938458036424e-31];static erfImpNn=[-789224703978723e-20,622088451660987e-21,1457284456768824e-23,603715505542715e-25];static erfImpNd=[1,.03753288463562937,.0004679195359746253,19384703927584565e-22];static ervInvImpAn=[-.0005087819496582806,-.008368748197417368,.03348066254097446,-.012692614766297402,-.03656379714117627,.02198786811111689,.008226878746769157,-.005387729650712429];static ervInvImpAd=[1,-.9700050433032906,-1.565745582341758,1.5622155839842302,.662328840472003,-.7122890234154285,-.05273963823400997,.07952836873415717,-.0023339375937419,.0008862163904564247];static ervInvImpBn=[-.2024335083559388,.10526468069939171,8.3705032834312,17.6447298408374,-18.85106480587143,-44.6382324441787,17.445385985570866,21.12946554483405,-3.671922547077293];static ervInvImpBd=[1,6.242641248542475,3.971343795334387,-28.66081804998,-20.14326346804852,48.56092131087399,10.82686673554602,-22.64369334131397,1.7211476576120028];static ervInvImpCn=[-.1311027816799519,-.1637940471933171,.11703015634199525,.38707973897260434,.3377855389120359,.1428695344081572,.029015791000532906,.002145589953888053,-6794655751811264e-22,2852253317822171e-23,-681149956853777e-24];static ervInvImpCd=[1,3.466254072425672,5.381683457070069,4.778465929458438,2.5930192162362027,.848854343457902,.1522643382953318,.01105924229346489];static ervInvImpDn=[-.0350353787183178,-.002224265292134479,.018557330651423107,.009508047013259196,.001871234928195592,.00015754461742496055,460469890584318e-20,-2304047769118826e-25,266339227425782e-26];static ervInvImpDd=[1,1.365334981755406,.7620591645536234,.22009110576413124,.03415891436709477,.00263861676657016,7646752923027944e-20];static ervInvImpEn=[-.016743100507663373,-.001129514387455803,.001056288621524929,.0002093863174875881,14962478375834237e-21,4496967899277065e-22,4625961635228786e-24,-2811287356288318e-29,9905570997331033e-32];static ervInvImpEd=[1,.5914293448864175,.1381518657490833,.01607460870936765,.0009640118070051655,275335474764726e-19,282243172016108e-21];static ervInvImpFn=[-.002497821279189813,-779190719229054e-20,2547230374130275e-20,1623977773425109e-21,3963410113048012e-23,4116328311909442e-25,145596286718675e-26,-11676501239718427e-34];static ervInvImpFd=[1,.2071231122144225,.01694108381209759,.0006905382656226846,14500735981823264e-21,14443775662814415e-23,5097612765997785e-25];static ervInvImpGn=[-.0005390429110190786,-2839875900472772e-22,8994651148922914e-22,2293458592659209e-23,2255614448635001e-25,9478466275030226e-28,13588013010892486e-31,-3488903933999489e-37];static ervInvImpGd=[1,.08457462340018994,.002820929847262647,4682929219408942e-20,3999688121938621e-22,1618092908879045e-24,2315586083102596e-27];static erf(Be){return Be===0?0:Be===Number.POSITIVE_INFINITY?1:Be===Number.NEGATIVE_INFINITY?-1:Number.isNaN(Be)?Number.NaN:this.erfImp(Be,!1)}static erfc(Be){return Be===0?1:Be===Number.POSITIVE_INFINITY?0:Be===Number.NEGATIVE_INFINITY?2:Number.isNaN(Be)?Number.NaN:this.erfImp(Be,!0)}static erfInv(Be){if(Be===0)return 0;if(Be>=1)return Number.POSITIVE_INFINITY;if(Be<=-1)return Number.NEGATIVE_INFINITY;if(Number.isNaN(Be))return Number.NaN;let Ue,tt,gt;return Be<0?(Ue=-Be,tt=1-Ue,gt=-1):(Ue=Be,tt=1-Be,gt=1),this.erfInvImp(Ue,tt,gt)}static erfcInv(Be){if(Number.isNaN(Be))return Number.NaN;if(Be<=0)return Number.POSITIVE_INFINITY;if(Be>=2)return Number.NEGATIVE_INFINITY;if(Number.isNaN(Be))return Number.NaN;let Ue,tt,gt;return Be>1?(tt=2-Be,Ue=1-tt,gt=-1):(Ue=1-Be,tt=Be,gt=1),this.erfInvImp(Ue,tt,gt)}static erfImp(Be,Ue){if(Be<0)return Ue?Be<-.5?2-this.erfImp(-Be,!0):1+this.erfImp(-Be,!1):-this.erfImp(-Be,!1);let tt;if(Be<.5)Be<1e-10?tt=Be*1.125+Be*.003379167095512574:tt=Be*1.125+Be*Vt.evaluate(Be,this.erfImpAn)/Vt.evaluate(Be,this.erfImpAd);else if(Be<110){Ue=!Ue;let gt,je;switch(!0){case Be<.75:gt=Vt.evaluate(Be-.5,this.erfImpBn)/Vt.evaluate(Be-.5,this.erfImpBd),je=.3440242112;break;case Be<1.25:gt=Vt.evaluate(Be-.75,this.erfImpCn)/Vt.evaluate(Be-.75,this.erfImpCd),je=.419990927;break;case Be<2.25:gt=Vt.evaluate(Be-1.25,this.erfImpDn)/Vt.evaluate(Be-1.25,this.erfImpDd),je=.4898625016;break;case Be<3.5:gt=Vt.evaluate(Be-2.25,this.erfImpEn)/Vt.evaluate(Be-2.25,this.erfImpEd),je=.5317370892;break;case Be<5.25:gt=Vt.evaluate(Be-3.5,this.erfImpFn)/Vt.evaluate(Be-3.5,this.erfImpFd),je=.5489973426;break;case Be<8:gt=Vt.evaluate(Be-5.25,this.erfImpGn)/Vt.evaluate(Be-5.25,this.erfImpGd),je=.5571740866;break;case Be<11.5:gt=Vt.evaluate(Be-8,this.erfImpHn)/Vt.evaluate(Be-8,this.erfImpHd),je=.5609807968;break;case Be<17:gt=Vt.evaluate(Be-11.5,this.erfImpIn)/Vt.evaluate(Be-11.5,this.erfImpId),je=.5626493692;break;case Be<24:gt=Vt.evaluate(Be-17,this.erfImpJn)/Vt.evaluate(Be-17,this.erfImpJd),je=.5634598136;break;case Be<38:gt=Vt.evaluate(Be-24,this.erfImpKn)/Vt.evaluate(Be-24,this.erfImpKd),je=.5638477802;break;case Be<60:gt=Vt.evaluate(Be-38,this.erfImpLn)/Vt.evaluate(Be-38,this.erfImpLd),je=.5640528202;break;case Be<85:gt=Vt.evaluate(Be-60,this.erfImpMn)/Vt.evaluate(Be-60,this.erfImpMd),je=.5641309023;break;default:gt=Vt.evaluate(Be-85,this.erfImpNn)/Vt.evaluate(Be-85,this.erfImpNd),je=.5641584396}tt=Math.exp(-Be*Be)/Be*(je+gt)}else tt=0,Ue=!Ue;return Ue&&(tt=1-tt),tt}static erfInvImp(Be,Ue,tt){let gt;if(Be<=.5){const je=.08913147449493408,Xe=Be*(Be+10),lt=Vt.evaluate(Be,this.ervInvImpAn)/Vt.evaluate(Be,this.ervInvImpAd);gt=Xe*(je+lt)}else if(Ue>=.25){const je=2.249481201171875,Xe=Math.sqrt(-2*Math.log(Ue)),lt=Ue-.25,Ct=Vt.evaluate(lt,this.ervInvImpBn)/Vt.evaluate(lt,this.ervInvImpBd);gt=Xe/(je+Ct)}else{const je=Math.sqrt(-Math.log(Ue));let Xe,lt;switch(!0){case je<3:{Xe=.807220458984375;const Ct=je-1.125;lt=Vt.evaluate(Ct,this.ervInvImpCn)/Vt.evaluate(Ct,this.ervInvImpCd);break}case je<6:{Xe=.9399557113647461;const Ct=je-3;lt=Vt.evaluate(Ct,this.ervInvImpDn)/Vt.evaluate(Ct,this.ervInvImpDd);break}case je<18:{Xe=.9836282730102539;const Ct=je-6;lt=Vt.evaluate(Ct,this.ervInvImpEn)/Vt.evaluate(Ct,this.ervInvImpEd);break}case je<44:{Xe=.9971456527709961;const Ct=je-18;lt=Vt.evaluate(Ct,this.ervInvImpFn)/Vt.evaluate(Ct,this.ervInvImpFd);break}default:{Xe=.9994134902954102;const Ct=je-44;lt=Vt.evaluate(Ct,this.ervInvImpGn)/Vt.evaluate(Ct,this.ervInvImpGd)}}gt=je*(Xe+lt)}return tt*gt}}class sr{static lerp(Be,Ue,tt){return Be+(Ue-Be)*tt}}E.RankedStatus=void 0,(function(ct){ct[ct.graveyard=-2]="graveyard",ct[ct.wip=-1]="wip",ct[ct.pending=0]="pending",ct[ct.ranked=1]="ranked",ct[ct.approved=2]="approved",ct[ct.qualified=3]="qualified",ct[ct.loved=4]="loved"})(E.RankedStatus||(E.RankedStatus={}));class cr{title="";get fullTitle(){return`${this.artist} - ${this.title} (${this.creator}) [${this.version}]`}artist="";creator="";version="";source="";approved=0;beatmapID=0;beatmapsetID=0;plays=0;favorites=0;submitDate=new Date(0);lastUpdate=new Date(0);hitLength=0;totalLength=0;bpm=0;circles=0;sliders=0;spinners=0;get objects(){return this.circles+this.sliders+this.spinners}maxCombo=0;cs=0;ar=0;od=0;hp=0;packs=[];aimDifficulty=0;speedDifficulty=0;totalDifficulty=0;hash="";storyboardAvailable=!1;videoAvailable=!1;get beatmap(){return this.cachedBeatmap}cachedBeatmap=null;static async getInformation(Be,Ue){const tt=new U().setEndpoint("get_beatmaps").addParameter(typeof Be=="string"?"h":"b",Be),gt=new cr,je=await tt.sendRequest();if(je.statusCode!==200)throw new Error("osu! API error");const Xe=JSON.parse(je.data.toString("utf-8"))[0];return!Xe||parseInt(Xe.mode)!==0?null:(gt.fillMetadata(Xe),Ue!==!1&&await gt.retrieveBeatmapFile(),gt)}fillMetadata(Be){this.title=Be.title,this.artist=Be.artist,this.creator=Be.creator,this.version=Be.version,this.source=Be.source,this.approved=parseInt(Be.approved),this.beatmapID=parseInt(Be.beatmap_id),this.beatmapsetID=parseInt(Be.beatmapset_id),this.plays=parseInt(Be.playcount),this.favorites=parseInt(Be.favourite_count);const Ue=Be.last_update.split(/[- :]/).map(gt=>parseInt(gt));this.lastUpdate=new Date(Date.UTC(Ue[0],Ue[1]-1,Ue[2],Ue[3],Ue[4],Ue[5]));const tt=Be.submit_date.split(/[- :]/).map(gt=>parseInt(gt));return this.submitDate=new Date(Date.UTC(tt[0],tt[1]-1,tt[2],tt[3],tt[4],tt[5])),this.hitLength=parseInt(Be.hit_length),this.totalLength=parseInt(Be.total_length),this.bpm=parseFloat(Be.bpm),this.circles=Be.count_normal?parseInt(Be.count_normal):0,this.sliders=Be.count_slider?parseInt(Be.count_slider):0,this.spinners=Be.count_spinner?parseInt(Be.count_spinner):0,this.maxCombo=parseInt(Be.max_combo),this.cs=parseFloat(Be.diff_size),this.ar=parseFloat(Be.diff_approach),this.od=parseFloat(Be.diff_overall),this.hp=parseFloat(Be.diff_drain),Be.packs&&(this.packs=Be.packs.split(",").map(gt=>gt.trim())),this.aimDifficulty=Be.diff_aim?parseFloat(Be.diff_aim):0,this.speedDifficulty=Be.diff_speed?parseFloat(Be.diff_speed):0,this.totalDifficulty=Be.difficultyrating?parseFloat(Be.difficultyrating):0,this.hash=Be.file_md5,this.storyboardAvailable=!!parseInt(Be.storyboard),this.videoAvailable=!!parseInt(Be.video),this}hasDownloadedBeatmap(){return this.cachedBeatmap!==null}retrieveBeatmapFile(Be){return new Promise(Ue=>{if(this.hasDownloadedBeatmap()&&!Be)return Ue();const tt=`https://osu.ppy.sh/osu/${this.beatmapID}`,gt=[];_(tt).on("data",je=>{gt.push(Buffer$1.from(je))}).on("complete",je=>{if(je.statusCode!==200)return Ue();this.cachedBeatmap=new xr().decode(Buffer$1.concat(gt).toString("utf8")).result,Ue()})})}convertBPM(Be){let Ue=this.bpm;return Ue*=Be.speedMultiplier,parseFloat(Ue.toFixed(2))}convertStatus(){let Be="approved";for(const Ue in E.RankedStatus)if(E.RankedStatus[Ue]===this.approved){Be=Ue;break}return Be!=="wip"?Be.charAt(0).toUpperCase()+Be.slice(1):Be.toUpperCase()}convertTime(Be){let Ue=this.hitLength,tt=this.totalLength;return Ue/=Be.speedMultiplier,tt/=Be.speedMultiplier,`${this.timeString(this.hitLength)}${this.hitLength===Ue?"":` (${this.timeString(Ue)})`}/${this.timeString(this.totalLength)}${this.totalLength===tt?"":` (${this.timeString(tt)})`}`}timeString(Be){let Ue=new Date(1e3*Math.ceil(Be)).toISOString().substr(11,8).replace(/^[0:]+/,"");return Be<60&&(Ue="0:"+Ue),Ue}showStatistics(Be,Ue){const tt={cs:this.cs,ar:this.ar,od:this.od,hp:this.hp,mods:Ue?.mods??[],isForceAR:!1,speedMultiplier:1};switch(Ue&&(Ue.isForceAR&&(tt.ar=Ue.ar??tt.ar),tt.isForceAR=Ue.isForceAR??tt.isForceAR,tt.speedMultiplier=Ue.speedMultiplier??tt.speedMultiplier),Be){case 0:{const gt=new ze(tt).calculate();let je=`${this.fullTitle}${(gt.mods.length??0)>0?` +${gt.mods.map(Xe=>Xe.acronym).join("")}`:""}`;return(tt.speedMultiplier!==1||gt.isForceAR)&&(je+=" (",gt.isForceAR&&(je+=`AR${gt.ar}`),tt.speedMultiplier!==1&&(gt.isForceAR&&(je+=", "),je+=`${tt.speedMultiplier}x`),je+=")"),je}case 1:{let gt=`${this.source?`**Source**: ${this.source}
`:""}**Download**: [osu!](https://osu.ppy.sh/d/${this.beatmapsetID})${this.videoAvailable?` [(no video)](https://osu.ppy.sh/d/${this.beatmapsetID}n)`:""} - [Chimu](https://chimu.moe/en/d/${this.beatmapsetID}) - [Sayobot](https://txy1.sayobot.cn/beatmaps/download/full/${this.beatmapsetID})${this.videoAvailable?` [(no video)](https://txy1.sayobot.cn/beatmaps/download/novideo/${this.beatmapsetID})`:""} - [Beatconnect](https://beatconnect.io/b/${this.beatmapsetID}/) - [Nerina](https://nerina.pw/d/${this.beatmapsetID})${this.approved>=E.RankedStatus.ranked&&this.approved!==E.RankedStatus.qualified?` - [Ripple](https://storage.ripple.moe/d/${this.beatmapsetID})`:""}`;if(this.packs.length>0){gt+=`
**Beatmap Pack**: `;for(let je=0;je<this.packs.length;je++)gt+=`[${this.packs[je]}](https://osu.ppy.sh/beatmaps/packs/${this.packs[je]})`,je+1<this.packs.length&&(gt+=" - ")}return gt+=`
 ${this.storyboardAvailable?"":""} **|**  ${this.videoAvailable?"":""}`,gt}case 2:return`**Circles**: ${this.circles} - **Sliders**: ${this.sliders} - **Spinners**: ${this.spinners}`;case 3:{const gt=new ze({cs:this.cs,ar:this.ar,od:this.od,hp:this.hp}).calculate({mode:E.Modes.droid}),je=new ze(tt).calculate({mode:E.Modes.droid});gt.cs=R.round(gt.cs,2),gt.ar=R.round(gt.ar,2),gt.od=R.round(gt.od,2),gt.hp=R.round(gt.hp,2),je.cs=R.round(je.cs,2),je.ar=R.round(je.ar,2),je.od=R.round(je.od,2),je.hp=R.round(je.hp,2);const Xe=this.beatmap?.maxDroidScore(new ze(tt))??0;return`**CS**: ${gt.cs}${Le.almostEqualsNumber(gt.cs,je.cs)?"":` (${je.cs})`} - **AR**: ${gt.ar}${Le.almostEqualsNumber(gt.ar,je.ar)?"":` (${je.ar})`} - **OD**: ${gt.od}${Le.almostEqualsNumber(gt.od,je.od)?"":` (${je.od})`} - **HP**: ${gt.hp}${Le.almostEqualsNumber(gt.hp,je.hp)?"":` (${je.hp})`}${Xe>0?`
**Max Score**: ${Xe.toLocaleString()}`:""}`}case 4:{const gt=new ze(tt).calculate();gt.cs=R.round(gt.cs,2),gt.ar=R.round(gt.ar,2),gt.od=R.round(gt.od,2),gt.hp=R.round(gt.hp,2);const je=this.beatmap?.maxOsuScore(gt.mods)??0;return`**CS**: ${this.cs}${Le.almostEqualsNumber(this.cs,gt.cs)?"":` (${gt.cs})`} - **AR**: ${this.ar}${Le.almostEqualsNumber(this.ar,gt.ar)?"":` (${gt.ar})`} - **OD**: ${this.od}${Le.almostEqualsNumber(this.od,gt.od)?"":` (${gt.od})`} - **HP**: ${this.hp}${Le.almostEqualsNumber(this.hp,gt.hp)?"":` (${gt.hp})`}${je>0?`
**Max Score**: ${je.toLocaleString()}`:""}`}case 5:{const gt=new ze(tt).calculate(),je=this.convertBPM(gt);let Xe="**BPM**: ";if(this.beatmap){const lt=this.beatmap.controlPoints.timing.points;if(lt.length===1)Xe+=`${this.bpm}${Le.almostEqualsNumber(this.bpm,je)?"":` (${je})`} - **Length**: ${this.convertTime(gt)} - **Max Combo**: ${this.maxCombo}x`;else{let Ct=this.bpm,Qt=this.bpm;for(const ir of lt){const Ir=parseFloat((6e4/ir.msPerBeat).toFixed(2));Ct=Math.max(Ct,Ir),Qt=Math.min(Qt,Ir)}Ct=Math.round(Ct),Qt=Math.round(Qt);const Ht=Math.round(Qt*gt.speedMultiplier),er=Math.round(Ct*gt.speedMultiplier);Xe+=Le.almostEqualsNumber(Qt,this.bpm)&&Le.almostEqualsNumber(Ct,this.bpm)?`${this.bpm} `:`${Qt}-${Ct} (${this.bpm}) `,Le.almostEqualsNumber(this.bpm,je)||(Le.almostEqualsNumber(Ht,er)?Xe+=`(${je}) `:Xe+=`(${Ht}-${er} (${je})) `),Xe+=`- **Length**: ${this.convertTime(gt)} - **Max Combo**: ${this.maxCombo}x`}}else Xe+=`${this.bpm}${Le.almostEqualsNumber(this.bpm,je)?"":` (${je})`} - **Length**: ${this.convertTime(gt)} - **Max Combo**: ${this.maxCombo}x`;return Xe}case 6:return`**Last Update**: ${this.lastUpdate.toUTCString()} | **${this.convertStatus()}**`;case 7:return` **${this.favorites.toLocaleString()}** -  **${this.plays.toLocaleString()}**`;default:throw{name:"NotSupportedError",message:`This mode (${Be}) is not supported`}}}get statusColor(){switch(this.approved){case-2:return 16711711;case-1:return 9442302;case 0:return 16312092;case 1:return 2483712;case 2:return 16741376;case 3:return 5301186;case 4:return 16711796;default:return 0}}toString(){return`${this.fullTitle}
CS: ${this.cs} - AR: ${this.ar} - OD: ${this.od} - HP: ${this.hp}
BPM: ${this.bpm} - Length: ${this.hitLength}/${this.totalLength} - Max Combo: ${this.maxCombo}
Last Update: ${this.lastUpdate}`}}class yr{static invCDF(Be,Ue,tt){if(Ue<0)throw new RangeError("Invalid parametrization for the distribution.");return Be-Ue*Math.SQRT2*Et.erfcInv(2*tt)}}class Er{static baseSize=new V(512,384)}T.config(),E.Accuracy=P,E.Beatmap=ge,E.BeatmapBackground=Ee,E.BeatmapColor=Q,E.BeatmapControlPoints=ae,E.BeatmapDecoder=xr,E.BeatmapDifficulty=ye,E.BeatmapEditor=pe,E.BeatmapEncoder=Lt,E.BeatmapEvents=_e,E.BeatmapGeneral=de,E.BeatmapHitObjects=Ae,E.BeatmapMetadata=ve,E.BeatmapVideo=qe,E.BlendingParameters=bt,E.BreakPoint=pt,E.Brent=Zt,E.Circle=J,E.CircleSizeCalculator=nr,E.Command=Qe,E.CommandLoop=Me,E.CommandTimeline=Re,E.CommandTimelineGroup=Pe,E.CommandTrigger=$e,E.ControlPointManager=ue,E.DifficultyControlPoint=z,E.DifficultyControlPointManager=Y,E.DroidAPIRequestBuilder=L,E.DroidHitWindow=Se,E.EffectControlPoint=te,E.EffectControlPointManager=oe,E.ErrorFunction=Et,E.HitObject=K,E.HitObjectStackEvaluator=gr,E.HitSampleInfo=nt,E.Interpolation=sr,E.MapInfo=cr,E.MapStats=ze,E.MathUtils=R,E.Mod=we,E.ModAuto=mt,E.ModAutopilot=Ut,E.ModDoubleTime=xe,E.ModEasy=et,E.ModFlashlight=St,E.ModHalfTime=Fe,E.ModHardRock=Oe,E.ModHidden=vt,E.ModNightCore=Ge,E.ModNoFail=It,E.ModPerfect=yt,E.ModPrecise=Mt,E.ModReallyEasy=dt,E.ModRelax=Tt,E.ModScoreV2=Wt,E.ModSmallCircle=ft,E.ModSpunOut=_t,E.ModSuddenDeath=Xt,E.ModTouchDevice=Nt,E.ModUtil=qt,E.NormalDistribution=yr,E.OsuAPIRequestBuilder=U,E.OsuHitWindow=Ie,E.PathApproximator=Ze,E.Playfield=Er,E.Polynomial=Vt,E.Precision=Le,E.RGBColor=Ye,E.SampleBankInfo=rt,E.SampleControlPoint=le,E.SampleControlPointManager=he,E.Slider=fe,E.SliderHead=ee,E.SliderPath=Je,E.SliderRepeat=ie,E.SliderTail=ce,E.SliderTick=ne,E.Spinner=se,E.Storyboard=_r,E.StoryboardAnimation=xt,E.StoryboardDecoder=or,E.StoryboardElement=it,E.StoryboardEncoder=Kt,E.StoryboardLayer=ar,E.StoryboardSample=Ot,E.StoryboardSprite=kt,E.TimingControlPoint=Te,E.TimingControlPointManager=O,E.Utils=D,E.Vector2=V,E.ZeroCrossingBracketing=$t})(dist)),dist}var distExports=requireDist();class StoryboardSprite extends ScopedClass{constructor(A,_){switch(super(),this.data=A,this.layerType=_,this.container.interactive=!1,this.container.interactiveChildren=!1,A.origin){case distExports.Anchor.topLeft:{this.container.anchor.set(0);break}case distExports.Anchor.center:{this.container.anchor.set(.5);break}case distExports.Anchor.centerLeft:{this.container.anchor.set(0,.5);break}case distExports.Anchor.topRight:{this.container.anchor.set(1,0);break}case distExports.Anchor.bottomCenter:{this.container.anchor.set(.5,1);break}case distExports.Anchor.topCenter:{this.container.anchor.set(.5,0);break}case distExports.Anchor.centerRight:{this.container.anchor.set(1,.5);break}case distExports.Anchor.bottomLeft:{this.container.anchor.set(0,1);break}case distExports.Anchor.bottomRight:this.container.anchor.set(1)}this.container.position.set(A.initialPosition.x,A.initialPosition.y),this.container.label=A.path.replaceAll("\\","/");const{startTime:I,endTime:B}=this.timeRange();this.startTime=I,this.endTime=B}container=new Sprite$1({visible:!1});order=0;startTime=0;endTime=0;timeRange(){const A=[...this.data.timelineGroup.alpha.commands,...this.data.timelineGroup.blendingParameters.commands,...this.data.timelineGroup.color.commands,...this.data.timelineGroup.flipHorizontal.commands,...this.data.timelineGroup.flipVertical.commands,...this.data.timelineGroup.move.commands,...this.data.timelineGroup.rotation.commands,...this.data.timelineGroup.scale.commands,...this.data.timelineGroup.vectorScale.commands,...this.data.timelineGroup.x.commands,...this.data.timelineGroup.y.commands,...this.data.loops],_=Math.min(...A.map(B=>B.startTime))-50,I=Math.max(...A.map(B=>B.endTime));return{startTime:_,endTime:I}}loadTexture(){const A=this.context.consume("textures");if(!A)return;const _=A.get(this.data.path.replaceAll("\\","/").toLowerCase());_&&(this.container.texture=_)}update(A){if(A>this.startTime+50&&this.container.visible===!1&&(this.container.visible=!0),A<this.startTime)return;const _=this.data.timelineGroup;this.processGroups(_,A);for(const I of this.data.loops)this.processLoop(I,A)}processGroups(A,_){if(A.alpha.hasCommands){const I=this.getNearestCommand(_,A.alpha);this.processAlpha(_,I)}if(A.move.hasCommands){const I=this.getNearestCommand(_,A.move);this.processMove(_,I)}if(A.scale.hasCommands){const I=this.getNearestCommand(_,A.scale);this.processScale(_,I)}if(A.vectorScale.hasCommands){const I=this.getNearestCommand(_,A.vectorScale);this.processVectorScale(_,I)}if(A.rotation.hasCommands){const I=this.getNearestCommand(_,A.rotation);this.processRotate(_,I)}if(A.color.hasCommands){const I=this.getNearestCommand(_,A.color);this.processColor(_,I)}if(A.x.hasCommands){const I=this.getNearestCommand(_,A.x);this.processMoveX(_,I)}if(A.y.hasCommands){const I=this.getNearestCommand(_,A.y);this.processMoveY(_,I)}if(A.blendingParameters.hasCommands){const I=this.getNearestCommand(_,A.blendingParameters);this.processBlending(_,I)}if(A.flipHorizontal.hasCommands){const I=this.getNearestCommand(_,A.flipHorizontal);this.processFlipHorizontal(_,I)}if(A.flipVertical.hasCommands){const I=this.getNearestCommand(_,A.flipVertical);this.processFlipVerticle(_,I)}}processAlpha(A,_){const I=_,{startValue:B,endValue:T,startTime:R,endTime:P,duration:D,easing:F}=I,L=EasingsMap[F];if(A<R){this.container.alpha=B;return}if(R<=A&&A<=P){const U=L(D!==0?(A-R)/D:0);this.container.alpha=this.lerp(U,B,T);return}if(P<A){this.container.alpha=T;return}}processMove(A,_){const I=_,{startValue:B,endValue:T,startTime:R,endTime:P,duration:D,easing:F}=I,L=EasingsMap[F];if(A<R){this.container.position.set(B.x,T.x);return}if(R<=A&&A<=P){const U=L(D!==0?(A-R)/D:0),{x:V,y:K}=B,{x:J,y:ee}=T;this.container.position.set(this.lerp(U,V,K),this.lerp(U,J,ee));return}if(P<A){this.container.position.set(B.y,T.y);return}}processScale(A,_){const I=_,{startValue:B,endValue:T,startTime:R,endTime:P,duration:D,easing:F}=I,L=EasingsMap[F];if(A<R){this.container.scale.set(B);return}if(R<=A&&A<=P){const U=L(D!==0?(A-R)/D:0);this.container.scale.set(this.lerp(U,B,T));return}if(P<A){this.container.scale.set(T);return}}processVectorScale(A,_){const I=_,{startValue:B,endValue:T,startTime:R,endTime:P,duration:D,easing:F}=I,L=EasingsMap[F];if(A<R){this.container.scale.set(B.x,B.y);return}if(R<=A&&A<=P){const U=L(D!==0?(A-R)/D:0),{x:V,y:K}=B,{x:J,y:ee}=T;this.container.scale.set(this.lerp(U,V,J),this.lerp(U,K,ee));return}if(P<A){this.container.scale.set(T.x,T.y);return}}processRotate(A,_){const I=_,{startValue:B,endValue:T,startTime:R,endTime:P,duration:D,easing:F}=I,L=EasingsMap[F];if(A<R){this.container.angle=B;return}if(R<=A&&A<=P){const U=L(D!==0?(A-R)/D:0);this.container.angle=this.lerp(U,B,T);return}if(P<A){this.container.angle=T;return}}processColor(A,_){const I=_,{startValue:B,endValue:T,startTime:R,endTime:P,duration:D,easing:F}=I,L=EasingsMap[F];if(A<R){const{r:U,g:V,b:K}=B;this.container.tint={r:U,g:V,b:K};return}if(R<=A&&A<=P){const U=L(D!==0?(A-R)/D:0),{r:V,g:K,b:J}=B,{r:ee,g:ie,b:ne}=T;this.container.tint={r:this.lerp(U,V,ee),g:this.lerp(U,K,ie),b:this.lerp(U,J,ne)};return}if(P<A){const{r:U,g:V,b:K}=T;this.container.tint={r:U,g:V,b:K};return}}processMoveX(A,_){const I=_,{startValue:B,endValue:T,startTime:R,endTime:P,duration:D,easing:F}=I,L=EasingsMap[F];if(A<R){this.container.x=B;return}if(R<=A&&A<=P){const U=L(D!==0?(A-R)/D:0);this.container.x=this.lerp(U,B,T);return}if(P<A){this.container.x=T;return}}processMoveY(A,_){const I=_,{startValue:B,endValue:T,startTime:R,endTime:P,duration:D,easing:F}=I,L=EasingsMap[F];if(A<R){this.container.y=B;return}if(R<=A&&A<=P){const U=L(D!==0?(A-R)/D:0);this.container.y=this.lerp(U,B,T);return}if(P<A){this.container.y=T;return}}processBlending(A,_){const I=_,{startTime:B}=I;if(A<B){this.container.blendMode="normal";return}this.container.blendMode="add"}processFlipHorizontal(A,_){const{startValue:I,endValue:B,startTime:T,endTime:R,duration:P}=_;if(A<=R){this.container.scale.x*=I?-1:1;return}if(A>R){this.container.scale.x*=B?-1:1;return}}processFlipVerticle(A,_){const{startValue:I,endValue:B,startTime:T,endTime:R,duration:P}=_;if(A<=R){this.container.scale.y*=I?-1:1;return}if(A>R){this.container.scale.y*=B?-1:1;return}}processLoop(A,_){const{startTime:I,endTime:B,totalIterations:T}=A,R=(B-I)/T,P=(Math.max(0,Math.min(_,B-1))-I)%R;this.processGroups(A,P)}getNearestCommand(A,_){let I=0;for(let B=0;B<_.commands.length&&!(_.commands[B].startTime>=A);B++)(_.commands[B].startTime!==_.commands[I].startTime||_.commands[B].endTime!==_.commands[I].endTime)&&(I=B);return _.commands[I]}lerp(A,_,I){return _+(I-_)*Math.min(1,Math.max(0,A))}destroy(){this.container.destroy()}off(){this.container.visible=!1}}class StoryboardAnimation extends StoryboardSprite{constructor(A,_){super(A,_),this.data=A,this.layerType=_}_textureArr=[];loadTexture(){const A=this.context.consume("textures");if(A)for(let _=0;_<this.data.frameCount;_++){const I=this.data.path.replaceAll("\\","/").toLowerCase(),B=I.split(".").slice(0,-1).join("."),T=I.split(".").at(-1)??"",R=A.get(`${B}${_}.${T}`);if(!R)return;this._textureArr.push(R)}}update(A){const _=Math.floor((A-this.data.startTime)/this.data.frameDelay),I=this.data.loopType===distExports.AnimationLoopType.loopForever?_%this.data.frameCount:Math.min(_,this.data.frameCount);this.container.texture=this._textureArr[I],super.update(A)}}class Storyboard extends ScopedClass{constructor(A){super(),this.blob=A;const _=new Graphics$1().rect(-106.666666667,0,853.333333333,480).fill({color:0,alpha:.01});this.fill=new Graphics$1().rect(-106.666666667,0,853.333333333,480).fill({color:0,alpha:0}),this.container.addChild(_,this.fill,this.backgroundLayer,this.foregroundLayer,this.overlayLayer),this.container.boundsArea=new Rectangle(-106.666666667,0,853.333333333,480),this.container.mask=_,inject("config/background")?.onChange("storyboard",I=>{this.container.visible=I})}data;sprites;masterData;masterSprites;container=new Container({label:"storyboard",isRenderGroup:!0,visible:inject("config/background")?.storyboard});backgroundLayer=new Container({label:"backgroundLayer",interactive:!1,interactiveChildren:!1,isRenderGroup:!0,sortableChildren:!0});foregroundLayer=new Container({label:"foregroundLayer",interactive:!1,interactiveChildren:!1,isRenderGroup:!0,sortableChildren:!1});overlayLayer=new Container({label:"overlayLayer",interactive:!1,interactiveChildren:!1,isRenderGroup:!0,sortableChildren:!1});fill;async loadTextures(){const A=new Map,_=[...this.context.consume("resources")].map(async([I,B])=>{if(["png","jpg","jpeg"].includes(I.split(".").at(-1).toLowerCase()))try{const T=await Assets.load({src:URL.createObjectURL(B),parser:"texture"});A.set(I.toLowerCase(),T)}catch{console.log(`Cannot load resource with name: ${I}`)}});await Promise.all(_),this.context.provide("textures",A)}async load(A){const I=new distExports.StoryboardDecoder().decode(A).result,B=await Promise.all([...[...I.layers.Background?.elements??[]].filter(P=>P instanceof distExports.StoryboardSprite).map(P=>{const D=(P instanceof distExports.StoryboardAnimation?new StoryboardAnimation(P,distExports.StoryboardLayerType.background):new StoryboardSprite(P,distExports.StoryboardLayerType.background)).hook(this.context);return D.loadTexture(),D}),...[...I.layers.Foreground?.elements??[]].filter(P=>P instanceof distExports.StoryboardSprite).map(P=>{const D=(P instanceof distExports.StoryboardAnimation?new StoryboardAnimation(P,distExports.StoryboardLayerType.foreground):new StoryboardSprite(P,distExports.StoryboardLayerType.foreground)).hook(this.context);return D.loadTexture(),D}),...[...I.layers.Overlay?.elements??[]].filter(P=>P instanceof distExports.StoryboardSprite).map(P=>{const D=(P instanceof distExports.StoryboardAnimation?new StoryboardAnimation(P,distExports.StoryboardLayerType.overlay):new StoryboardSprite(P,distExports.StoryboardLayerType.overlay)).hook(this.context);return D.loadTexture(),D})]),T=B.map((P,D)=>(P.order=D,P)),R=new IntervalTree;for(let P=0;P<B.length;P++){const{startTime:D,endTime:F}=B[P];R.insert([D,F],P)}return{data:I,sprites:T,tree:R}}_masterTree;async loadMaster(A){const{data:_,sprites:I,tree:B}=await this.load(A);if(this._masterTree&&(this._masterTree.clear(),this._masterTree=void 0),this.masterSprites){for(const T of this.masterSprites){switch(T.layerType){case distExports.StoryboardLayerType.background:{this.backgroundLayer.removeChild(T.container);break}case distExports.StoryboardLayerType.foreground:{this.foregroundLayer.removeChild(T.container);break}case distExports.StoryboardLayerType.overlay:{this.overlayLayer.removeChild(T.container);break}}T.destroy()}this.masterSprites=[]}this.masterData=_,this.masterSprites=I,this._masterTree=B}_tree;async loadCurrent(){const A=await this.blob.text(),{data:_,sprites:I,tree:B}=await this.load(A);this.data=_,this.sprites=I,this._tree=B}_previous=new Set;_previousMaster=new Set;update(A){if(!inject("config/background")?.storyboard)return;const _=new Set(this._tree?.search([A-1,A+1])),I=new Set(this._masterTree?.search([A-1,A+1])),B=this._previous.difference(_),T=this._previousMaster.difference(I);for(const U of B){const V=this.sprites[U];switch(V.off(),V.layerType){case distExports.StoryboardLayerType.background:{this.backgroundLayer.removeChild(V.container);break}case distExports.StoryboardLayerType.foreground:{this.foregroundLayer.removeChild(V.container);break}case distExports.StoryboardLayerType.overlay:{this.overlayLayer.removeChild(V.container);break}}}for(const U of T){const V=this.masterSprites[U];if(V?.off(),!!V)switch(V.layerType){case distExports.StoryboardLayerType.background:{this.backgroundLayer.removeChild(V.container);break}case distExports.StoryboardLayerType.foreground:{this.foregroundLayer.removeChild(V.container);break}case distExports.StoryboardLayerType.overlay:{this.overlayLayer.removeChild(V.container);break}}}const R=_.difference(this._previous),P=I.difference(this._previousMaster);this._previous=_,this._previousMaster=I;const D=[],F=[],L=[];for(const U of P){const V=this.masterSprites[U];if(V)switch(V.layerType){case distExports.StoryboardLayerType.background:{D.push(V.container);break}case distExports.StoryboardLayerType.foreground:{F.push(V.container);break}case distExports.StoryboardLayerType.overlay:{L.push(V.container);break}}}for(const U of R){const V=this.sprites[U];switch(V.layerType){case distExports.StoryboardLayerType.background:{D.push(V.container);break}case distExports.StoryboardLayerType.foreground:{F.push(V.container);break}case distExports.StoryboardLayerType.overlay:{L.push(V.container);break}}}for(const U of I)this.masterSprites[U]?.update(A);for(const U of _)this.sprites[U].update(A);D.length>0&&this.backgroundLayer.addChild(...D),F.length>0&&this.foregroundLayer.addChild(...F),L.length>0&&this.overlayLayer.addChild(...L)}sortChildren(){const A=[...this.masterSprites,...this.sprites];for(let _=0;_<A.length;_++)A[_].container.zIndex=_}checkRemoveBG(){const A=this.sprites.some(I=>I.data.path.replaceAll("\\","/")===this.context.consume("beatmapset")?.backgroundKey),_=new GraphicsContext().rect(-106.666666667,0,853.333333333,480).fill({color:0,alpha:A?1:0});this.fill.context.destroy(),this.fill.context=_}destroy(){for(const A of this.masterSprites)A.destroy();for(const A of this.sprites)A.destroy();this.foregroundLayer.destroy(),this.backgroundLayer.destroy(),this.overlayLayer.destroy(),this.container.destroy()}}var main={},lib={},hasRequiredLib;function requireLib(){return hasRequiredLib||(hasRequiredLib=1,(function(E){(function(A,_){return _(E)})(lib,function(A){var _=(function(){var I=[];return function(B){return I[0]=(B&128)===128?"1":"0",I[1]=(B&64)===64?"1":"0",I[2]=(B&32)===32?"1":"0",I[3]=(B&16)===16?"1":"0",I[4]=(B&8)===8?"1":"0",I[5]=(B&4)===4?"1":"0",I[6]=(B&2)===2?"1":"0",I[7]=(B&1)===1?"1":"0",I.join("")}})();A.getFrameByteLength=function(I,B,T,R,P){var D=A.sampleLengthMap[R][P],F=T?P==="11"?4:1:0,L=I*1e3/8;return Math.floor(D*L/B+F)},A.getXingOffset=function(I,B){var T=B==="11";return I==="11"?T?21:36:T?13:21},A.v1l1Bitrates={"0000":"free","0001":32,"0010":64,"0011":96,"0100":128,"0101":160,"0110":192,"0111":224,1e3:256,1001:288,1010:320,1011:352,1100:384,1101:416,1110:448,1111:"bad"},A.v1l2Bitrates={"0000":"free","0001":32,"0010":48,"0011":56,"0100":64,"0101":80,"0110":96,"0111":112,1e3:128,1001:160,1010:192,1011:224,1100:256,1101:320,1110:384,1111:"bad"},A.v1l3Bitrates={"0000":"free","0001":32,"0010":40,"0011":48,"0100":56,"0101":64,"0110":80,"0111":96,1e3:112,1001:128,1010:160,1011:192,1100:224,1101:256,1110:320,1111:"bad"},A.v2l1Bitrates={"0000":"free","0001":32,"0010":48,"0011":56,"0100":64,"0101":80,"0110":96,"0111":112,1e3:128,1001:144,1010:160,1011:176,1100:192,1101:224,1110:256,1111:"bad"},A.v2l2Bitrates={"0000":"free","0001":8,"0010":16,"0011":24,"0100":32,"0101":40,"0110":48,"0111":56,1e3:64,1001:80,1010:96,1011:112,1100:128,1101:144,1110:160,1111:"bad"},A.v2l3Bitrates=A.v2l2Bitrates,A.v1SamplingRates={"00":44100,"01":48e3,10:32e3,11:"reserved"},A.v2SamplingRates={"00":22050,"01":24e3,10:16e3,11:"reserved"},A.v25SamplingRates={"00":11025,"01":12e3,10:8e3,11:"reserved"},A.channelModes={"00":"Stereo","01":"Joint stereo (Stereo)",10:"Dual channel (Stereo)",11:"Single channel (Mono)"},A.mpegVersionDescription={"00":"MPEG Version 2.5 (unofficial)","01":"reserved",10:"MPEG Version 2 (ISO/IEC 13818-3)",11:"MPEG Version 1 (ISO/IEC 11172-3)"},A.layerDescription={"00":"reserved","01":"Layer III",10:"Layer II",11:"Layer I"},A.bitrateMap={11:{"01":A.v1l3Bitrates,10:A.v1l2Bitrates,11:A.v1l1Bitrates},10:{"01":A.v2l3Bitrates,10:A.v2l2Bitrates,11:A.v2l1Bitrates}},A.samplingRateMap={"00":A.v25SamplingRates,10:A.v2SamplingRates,11:A.v1SamplingRates},A.v1SampleLengths={"01":1152,10:1152,11:384},A.v2SampleLengths={"01":576,10:1152,11:384},A.sampleLengthMap={"01":A.v2SampleLengths,10:A.v2SampleLengths,11:A.v1SampleLengths},A.wordSeqFromStr=function(I){for(var B=I.length-1,T=[];B>=0;--B)T[B]=I.charCodeAt(B);return T},A.seq={id3:A.wordSeqFromStr("ID3"),xing:A.wordSeqFromStr("Xing"),info:A.wordSeqFromStr("Info")},A.noOp=function(){},A.unsynchsafe=function(I){for(var B=0,T=2130706432;T;)B>>=1,B|=I&T,T>>=8;return B},A.isSeq=function(I,B,T){for(var R=I.length-1;R>=0;R--)if(I[R]!==B.getUint8(T+R))return!1;return!0},A.locateSeq=function(I,B,T,R){for(var P=0,D=R-I.length+1;P<D;++P)if(A.isSeq(I,B,T+P))return T+P;return-1},A.locateStrTrm={iso:function(I,B,T){return A.locateSeq([0],I,B,T)},ucs:function(I,B,T){var R=A.locateSeq([0,0],I,B,T);return R===-1?-1:((R-B)%2!==0&&++R,R)}},A.readStr={iso:function(I,B,T){return String.fromCharCode.apply(null,new Uint8Array(I.buffer,B,T))},ucs:function(I,B,T){(I.getUint16(B)===65534||I.getUint16(B)===65279)&&(B+=2,T-=2);var R=I.buffer;return B%2===1&&(R=R.slice(B,B+T),B=0),String.fromCharCode.apply(null,new Uint16Array(R,B,T/2))}},A.readTrmStr={iso:function(I,B,T){var R=A.locateStrTrm.iso(I,B,T);return R!==-1&&(T=R-B),A.readStr.iso(I,B,T)},ucs:function(I,B,T){var R=A.locateStrTrm.ucs(I,B,T);return R!==-1&&(T=R-B),A.readStr.ucs(I,B,T)}},A.readFrameHeader=function(I,B){if(B||(B=0),I.byteLength-B<=4)return null;var T=I.getUint8(B);if(T!==255)return null;var R=I.getUint8(B+1);if(R<224)return null;var P=_(R).substr(3,2),D=_(R).substr(5,2),F={_section:{type:"frameHeader",byteLength:4,offset:B},mpegAudioVersionBits:P,mpegAudioVersion:A.mpegVersionDescription[P],layerDescriptionBits:D,layerDescription:A.layerDescription[D],isProtected:R&1};if(F.protectionBit=F.isProtected?"1":"0",F.mpegAudioVersion==="reserved"||F.layerDescription==="reserved")return null;var L=I.getUint8(B+2);if(L=_(L),F.bitrateBits=L.substr(0,4),F.bitrate=A.bitrateMap[P][D][F.bitrateBits],F.bitrate==="bad"||(F.samplingRateBits=L.substr(4,2),F.samplingRate=A.samplingRateMap[P][F.samplingRateBits],F.samplingRate==="reserved"))return null;F.frameIsPaddedBit=L.substr(6,1),F.frameIsPadded=F.frameIsPaddedBit==="1",F.framePadding=F.frameIsPadded?1:0,F.privateBit=L.substr(7,1);var U=I.getUint8(B+3);return F.channelModeBits=_(U).substr(0,2),F.channelMode=A.channelModes[F.channelModeBits],F},A.readFrame=function(I,B,T){B||(B=0);var R={_section:{type:"frame",offset:B},header:A.readFrameHeader(I,B)},P=R.header;if(!P)return null;R._section.sampleLength=A.sampleLengthMap[P.mpegAudioVersionBits][P.layerDescriptionBits],R._section.byteLength=A.getFrameByteLength(P.bitrate,P.samplingRate,P.framePadding,P.mpegAudioVersionBits,P.layerDescriptionBits),R._section.nextFrameIndex=B+R._section.byteLength;var D=A.getXingOffset(P.mpegAudioVersionBits,P.channelModeBits);return A.isSeq(A.seq.xing,I,B+D)||A.isSeq(A.seq.info,I,B+D)||T&&!A.readFrameHeader(I,R._section.nextFrameIndex)?null:R}})})(lib)),lib}var id3v2={},hasRequiredId3v2;function requireId3v2(){return hasRequiredId3v2||(hasRequiredId3v2=1,(function(E){(function(A,_){return _(E,requireLib())})(id3v2,function(A,_){var I={AENC:"Audio encryption",APIC:"Attached picture",CHAP:"Chapter",COMM:"Comments",COMR:"Commercial frame",ENCR:"Encryption method registration",EQUA:"Equalization",ETCO:"Event timing codes",GEOB:"General encapsulated object",GRID:"Group identification registration",IPLS:"Involved people list",LINK:"Linked information",MCDI:"Music CD identifier",MLLT:"MPEG location lookup table",OWNE:"Ownership frame",PRIV:"Private frame",PCNT:"Play counter",POPM:"Popularimeter",POSS:"Position synchronisation frame",RBUF:"Recommended buffer size",RVAD:"Relative volume adjustment",RVRB:"Reverb",SYLT:"Synchronized lyric/text",SYTC:"Synchronized tempo codes",TALB:"Album/Movie/Show title",TBPM:"BPM (beats per minute)",TCOM:"Composer",TCON:"Content type",TCOP:"Copyright message",TDAT:"Date",TDLY:"Playlist delay",TENC:"Encoded by",TEXT:"Lyricist/Text writer",TFLT:"File type",TIME:"Time",TIT1:"Content group description",TIT2:"Title/songname/content description",TIT3:"Subtitle/Description refinement",TKEY:"Initial key",TLAN:"Language(s)",TLEN:"Length",TMED:"Media type",TOAL:"Original album/movie/show title",TOFN:"Original filename",TOLY:"Original lyricist(s)/text writer(s)",TOPE:"Original artist(s)/performer(s)",TORY:"Original release year",TOWN:"File owner/licensee",TPE1:"Lead performer(s)/Soloist(s)",TPE2:"Band/orchestra/accompaniment",TPE3:"Conductor/performer refinement",TPE4:"Interpreted, remixed, or otherwise modified by",TPOS:"Part of a set",TPUB:"Publisher",TRCK:"Track number/Position in set",TRDA:"Recording dates",TRSN:"Internet radio station name",TRSO:"Internet radio station owner",TSIZ:"Size",TSRC:"ISRC (international standard recording code)",TSSE:"Software/Hardware and settings used for encoding",TYER:"Year",TXXX:"User defined text information frame",UFID:"Unique file identifier",USER:"Terms of use",USLT:"Unsychronized lyric/text transcription",WCOM:"Commercial information",WCOP:"Copyright/Legal information",WOAF:"Official audio file webpage",WOAR:"Official artist/performer webpage",WOAS:"Official audio source webpage",WORS:"Official internet radio station homepage",WPAY:"Payment",WPUB:"Publishers official webpage",WXXX:"User defined URL link frame"},B={};B.T=function(T,R,P){var D={encoding:T.getUint8(R)};return D.value=_.readStr[D.encoding===0?"iso":"ucs"](T,R+1,P-1),D},B.TXXX=function(T,R,P){var D={encoding:T.getUint8(R)};if(P<2)return D;var F=D.encoding===0?"iso":"ucs",L=R+1,U=_.locateStrTrm[F](T,L,P-4);return U===-1||(D.description=_.readStr[F](T,L,U-L),U+=F==="ucs"?2:1,D.value=_.readStr[F](T,U,R+P-U)),D},B.W=function(T,R,P){return{value:_.readStr.iso(T,R,P)}},B.WXXX=function(T,R,P){var D={encoding:T.getUint8(R)};if(P<2)return D;var F=D.encoding===0?"iso":"ucs",L=R+1,U=_.locateStrTrm[F](T,L,P-4);return U===-1||(D.description=_.readStr[F](T,L,U-L),U+=F==="ucs"?2:1,D.value=_.readStr.iso(T,U,R+P-U)),D},B.COMM=function(T,R,P){var D={encoding:T.getUint8(R)};if(P<5)return D;var F=D.encoding===0?"iso":"ucs",L=R+4;D.language=_.readTrmStr.iso(T,R+1,3);var U=_.locateStrTrm[F](T,L,P-4);return U===-1||(D.description=_.readStr[F](T,L,U-L),U+=F==="ucs"?2:1,D.text=_.readStr[F](T,U,R+P-U)),D},B.UFID=function(T,R,P){var D=_.readTrmStr.iso(T,R,P),F=new DataView(T.buffer,R+D.length+1,P-D.length-1);return{ownerIdentifier:D,identifier:F}},B.IPLS=function(T,R,P){for(var D={encoding:T.getUint8(R),values:[]},F=D.encoding===0?"iso":"ucs",L=R+1,U;L<R+P;)U=_.locateStrTrm[F](T,L,P-(L-R)),U===-1&&(U=R+P),D.values.push(_.readStr[F](T,L,U-L)),L=U+(F==="ucs"?2:1);return D},B.USER=function(T,R,P){var D={encoding:T.getUint8(R)};if(P<5)return D;D.language=_.readTrmStr.iso(T,R+1,3);var F=R+4,L=D.encoding===0?"iso":"ucs";return D.text=_.readStr[L](T,F,R+P-F),D},B.PRIV=function(T,R,P){var D=_.readTrmStr.iso(T,R,P),F=new DataView(T.buffer,R+D.length+1,P-D.length-1);return{ownerIdentifier:D,privateData:F}},B.PCNT=function(T,R,P){return P<4?{}:{counter:T.getUint32(R)}},B.POPM=function(T,R,P){var D={email:_.readTrmStr.iso(T,R,P)};return R+=D.email.length+1,P<6||(D.rating=T.getUint8(R),D.counter=T.getUint32(R+1)),D},B.APIC=function(T,R,P){var D={encoding:T.getUint8(R)};if(P<4)return D;var F=D.encoding===0?"iso":"ucs",L,U;return L=R+1,U=_.locateStrTrm.iso(T,L,P-1),U===-1||(D.mimeType=_.readStr.iso(T,L,U-L),L=U+1,D.pictureType=T.getUint8(L),L+=1,U=_.locateStrTrm[F](T,L,R+P-L),U===-1)||(D.description=_.readStr[F](T,L,U-L),L=U+(F==="ucs"?2:1),D.pictureData=new DataView(T.buffer,L,R+P-L)),D},B.CHAP=function(T,R,P){var D={encoding:T.getUint8(R)},F=_.locateStrTrm.iso(T,R,P-1);if(F===-1)return D;D.id=_.readStr.iso(T,R,F-R),D.startTime=T.getUint32(F+1),D.endTime=T.getUint32(F+5),D.startOffset=T.getUint32(F+9),D.endOffset=T.getUint32(F+13);var L=F+17;for(D.frames=[];L<R+P;){var U=A.readId3v2TagFrame(T,L);D.frames.push(U),L+=U.header.size+10}return D},A.readId3v2TagFrame=function(T,R){var P={header:{id:_.readStr.iso(T,R,4),size:T.getUint32(R+4),flagsOctet1:T.getUint8(R+8),flagsOctet2:T.getUint8(R+9)}};if(P.header.size<1)return P;var D=(function(F,L){return L==="TXXX"?F.TXXX:L.charAt(0)==="T"?F.T:L==="WXXX"?F.WXXX:L.charAt(0)==="W"?F.W:L==="COMM"||L==="USLT"?F.COMM:F[L]||_.noOp})(B,P.header.id);return P.name=I[P.header.id],P.content=D(T,R+10,P.header.size),P},A.readId3v2Tag=function(T,R){if(R||(R=0),T.byteLength-R<10||!_.isSeq(_.seq.id3,T,R))return null;var P=T.getUint8(R+5),D={_section:{type:"ID3v2",offset:R},header:{majorVersion:T.getUint8(R+3),minorRevision:T.getUint8(R+4),flagsOctet:P,unsynchronisationFlag:(P&128)===128,extendedHeaderFlag:(P&64)===64,experimentalIndicatorFlag:(P&32)===32,size:_.unsynchsafe(T.getUint32(R+6))},frames:[]};D._section.byteLength=D.header.size+10;var F=R+D._section.byteLength;if(D.header.majorVersion!==3)return D;var L;for(R+=10;R<F&&!(T.getUint32(R)===0||(L=A.readId3v2TagFrame(T,R),!L));)D.frames.push(L),R+=L.header.size+10;return D}})})(id3v2)),id3v2}var xing={},hasRequiredXing;function requireXing(){return hasRequiredXing||(hasRequiredXing=1,(function(E){(function(A,_){return _(E,requireLib())})(xing,function(A,_){A.readXingTag=function(I,B){B||(B=0);var T={_section:{type:"Xing",offset:B},header:_.readFrameHeader(I,B)},R=T.header;if(!R)return null;var P=B+_.getXingOffset(R.mpegAudioVersionBits,R.channelModeBits);return I.byteLength<P+4||(T.identifier=_.isSeq(_.seq.xing,I,P)&&"Xing"||_.isSeq(_.seq.info,I,P)&&"Info",!T.identifier)?null:(T._section.byteLength=_.getFrameByteLength(R.bitrate,R.samplingRate,R.framePadding,R.mpegAudioVersionBits,R.layerDescriptionBits),T._section.nextFrameIndex=B+T._section.byteLength,T)}})})(xing)),xing}var hasRequiredMain;function requireMain(){return hasRequiredMain||(hasRequiredMain=1,(function(E){(function(A,_){return _(E,requireLib(),requireId3v2(),requireXing())})(main,function(A,_,I,B){A.readFrameHeader=function(T,R){return _.readFrameHeader(T,R)},A.readFrame=function(T,R,P){return _.readFrame(T,R,P)},A.readLastFrame=function(T,R,P){R||(R=T.byteLength-1);for(var D=null;R>=0;--R)if(T.getUint8(R)===255&&(D=A.readFrame(T,R,P),D))return D;return null},A.readId3v2Tag=function(T,R){return I.readId3v2Tag(T,R)},A.readXingTag=function(T,R){return B.readXingTag(T,R)},A.readTags=function(T,R){R||(R=0);for(var P=[],D=null,F=!1,L=T.byteLength,U=[A.readId3v2Tag,A.readXingTag,A.readFrame],V=U.length;R<L&&!F;++R)for(var K=0;K<V;++K)if(D=U[K](T,R),D){if(P.push(D),R+=D._section.byteLength,D._section.type==="frame"){F=!0;break}K=-1}return P}})})(main)),main}requireMain();const HITSOUND_REGEX=/(normal|soft|drum)-(hitnormal|hitwhistle|hitclap|hitfinish|slidertick|sliderwhistle|sliderslide)([1-9][0-9]*)?/;class SampleManager{constructor(A,_){this.audioContext=A,this.files=_}map=new Map;async load(){await Promise.all([...this.files].map(async([A,_])=>{if(!HITSOUND_REGEX.test(A)||!_)return;let I;try{I=await this.audioContext.decodeAudioData(await _.arrayBuffer())}catch{I=this.audioContext.createBuffer(1,1,this.audioContext.sampleRate);return}const B=A.split(".").slice(0,-1).join(".");this.map.set(B,I)}))}get(A,_,I){const B=inject("skinManager"),T=`${A}-${_}${I===1?"":I}`,R=`${A}-${_}`,P=B?.currentSkin,D=B?.defaultSkin;return I===0?P?.getHitsound(R)??D?.getHitsound(R):this.map.get(T)??P?.getHitsound(R)??D?.getHitsound(R)}}class BeatmapSet extends ScopedClass{constructor(A){super(),this.resources=A,this.playbackRate=inject("config/experimental")?.doubleTime?1.5:1,this.context.provide("audioContext",this.audioContext),this.context.provide("resources",A),this.context.provide("beatmapset",this);const _=this.context.provide("masterGainNode",this.audioContext.createGain());connect(_,this.audioContext.destination),_.gain.value=inject("config/audio")?.masterVolume??.8,inject("config/audio")?.onChange("masterVolume",I=>{_.gain.value=I}),provide("beatmapset",this),this.animationFrame=requestAnimationFrame(()=>this.frame()),inject("config/experimental")?.onChange("mods",({mods:I,shouldPlaybackChange:B})=>{B&&(this.toggle(),this.playbackRate=I.includes("DT")?1.5:1,this.toggle())})}difficulties=[];audioContext="userAgentData"in navigator?new AudioContext:new Context;animationFrame;playbackRate=1;async loadBeatmapSkin(){await this.context.provide("beatmapSkin",new Skin(this.context.consume("resources"))).init()}async loadResources(){inject("ui/loading")?.setText("Loading hitSamples"),console.time("Load hitSamples"),await this.context.provide("sampleManager",new SampleManager(this.audioContext,this.resources)).load(),console.timeEnd("Load hitSamples"),await this.loadBeatmapSkin(),await this.loadStoryboard()}async getDifficulties(){const A=[...this.resources].filter(([I])=>I.split(".").at(-1)==="osu")??[];this.difficulties=(await Promise.all(A.map(async([I,B])=>{const T=await B?.text();return T?new Beatmap(T).hook(this.context):null}))).filter(I=>I!==null).sort((I,B)=>-I.difficultyAttributes.starRating+B.difficultyAttributes.starRating);const _=document.querySelector("#diffsContainer");_&&(_.innerHTML="");for(let I=0;I<this.difficulties.length;I++){const B=this.difficulties[I],T=document.createElement("div");T.className="flex gap-2.5 items-center";const R=document.createElement("button");R.className="flex w-full items-center gap-2.5 p-2.5 hover:bg-white/10 cursor-pointer transition-colors rounded-[10px] text-white";const P=getDiffColour(this.difficulties[I].difficultyAttributes.starRating);R.innerHTML=`${extraMode.replace('stroke="white"',`stroke="${P}"`).replace('fill="white"',`fill="${P}"`)}
			<span class="flex-1 text-left">${B.data.metadata.version}</span>
			<div>${this.difficulties[I].difficultyAttributes.starRating.toFixed(2)}</div>`,R.addEventListener("click",()=>{this.loadMaster(I),document.querySelector("#diffsContainer")?.classList.add("showOut"),document.querySelector("#diffsContainer")?.classList.remove("showIn")});const D=document.createElement("button");D.innerHTML='<i class="ri-add-line"></i>',D.className="h-full hover:bg-white/10 p-2.5 flex items-center justify-center rounded-[10px] cursor-pointer transition-colors text-white",D.style.aspectRatio="1 / 1",D.addEventListener("click",()=>{this.loadSlave(I),document.querySelector("#diffsContainer")?.classList.add("showOut"),document.querySelector("#diffsContainer")?.classList.remove("showIn")}),T?.append(R,D),_?.append(T)}}master;slaves=new Set;audioKey="";async loadAudio(A){if(A.data.general.audioFilename===this.audioKey)return;this.audioKey=A.data.general.audioFilename,console.time("Constructing audio");const _=this.context.consume("resources")?.get(this.audioKey.toLowerCase());if(!_)throw new Error("Cannot find audio in resource?");inject("ui/loading")?.setText("Loading audio"),inject("ui/sidepanel/modding/spectrogram")?.unloadTexture(),await this.context.provide("audio",new Audio(this.audioContext).hook(this.context)).createBufferNode(_),console.timeEnd("Constructing audio")}videoKey=null;async loadVideo(A){const _=A.data.events.storyboard?.layers.get("Video")?.elements.at(0)?.filePath??"";if(this.videoKey===_)return;_===""&&inject("ui/main/viewer/background")?.updateFrame(),this.videoKey=_;const I=this.context.consume("resources")?.get((A.data.events.storyboard?.layers.get("Video")?.elements.at(0)?.filePath??"").toLowerCase());if(!I)return;inject("ui/loading")?.setText("Loading video");const B=inject("ui/main/viewer/background");B&&(B.init=!1);const T=this.context.provide("video",new Video);try{await T.load(I,A.data.events.storyboard?.layers.get("Video")?.elements.at(0)?.startTime??0)}catch(R){console.error(R)}}backgroundKey=null;async loadBackground(A){if(this.backgroundKey===A.data.events.backgroundPath)return;this.backgroundKey=A.data.events.backgroundPath;const _=inject("ui/main/viewer/background"),I=this.context.consume("resources")?.get(A.data.events.backgroundPath?.toLowerCase()??"");if(!I)return;inject("ui/loading")?.setText("Loading background");const B=URL.createObjectURL(I);_?.updateTexture(await Assets.load({src:B,parser:"texture"})),document.body.style.backgroundImage=`url("${B}")`,await loadColorPalette(B)}async loadStoryboard(){const A=this.context.consume("resources")?.keys().find(B=>B.includes(".osb"));if(!A)return;const _=this.context.consume("resources")?.get(A.toLowerCase()),I=this.context.provide("storyboard",new Storyboard(_));I.hook(this.context),await I.loadTextures(),inject("ui/main/viewer/background")?.injectStoryboardContainer(I.container),await I.loadCurrent()}async loadPeripherals(A){inject("ui/loading")?.setText("Loading audio and background"),document.title=`${A.data.metadata.artist} - ${A.data.metadata.title} [${A.data.metadata.version}] | JoSu!`;const _=document.querySelector("#masterDiff");_&&(_.innerHTML=`
			<span class="truncate">${A.data.metadata.version}</span>
			<br/>
			<span class="text-xs">
				CS <span class="font-medium">${A.data.difficulty.circleSize.toFixed(1).replace(".0","")}</span> / 
				AR <span class="font-medium">${A.difficultyAttributes.approachRate.toFixed(1).replace(".0","")}</span> / 
				OD <span class="font-medium">${A.difficultyAttributes.overallDifficulty.toFixed(1).replace(".0","")}</span> / 
				HP <span class="font-medium">${A.difficultyAttributes.drainRate.toFixed(1).replace(".0","")}</span> 
			</span>`);const I=document.querySelector("#extraMode");if(I){const R=getDiffColour(A.difficultyAttributes.starRating);I.innerHTML=I.innerHTML.replace(/stroke=".*"/g,`stroke="${R}"`).replace(/fill=".*"/,`fill="${R}"`)}const B=document.querySelector("#masterSR");B&&(B.textContent=`${A.difficultyAttributes.starRating.toFixed(2)}`);const T=this.context.consume("storyboard");await Promise.all([this.loadAudio(A),this.loadVideo(A),this.loadBackground(A),T?.loadMaster(A.raw)]),T?.checkRemoveBG(),T?.sortChildren(),inject("ui/sidepanel/metadata")?.updateMetadata(A.data.metadata),A.loadTimingPoints()}async loadBeatmap(A,_){inject("ui/loading")?.setText("Loading hitObjects"),inject("ui/main/viewer/gameplays")?.addGameplay(A.container,_),A.container.spinner.spin=!0,await A.loadHitObjects(),A.load(),A.container.spinner.spin=!1,A.seek(this.context.consume("audio")?.currentTime??0),A.toggle()}async loadMaster(A){const _=this.difficulties[A];if(!_||this.master===_)return;const I=this.master,B=this.slaves.has(_);this.loadPeripherals(_),B&&I?(inject("ui/main/viewer/gameplays")?.switchGameplay(_.container,I.container),this.slaves.delete(_),this.slaves.add(I)):(this.master?.destroy(),await this.loadBeatmap(_,0));const T=inject("ui/sidepanel/modding/difficulty");T&&(T.data=_.strains),inject("ui/main/viewer/timeline")?.loadObjects(_.objects),this.master=_,this.setIds()}async loadSlave(A){const _=this.difficulties[A];_&&(_===this.master||this.slaves.has(_)||(await this.loadBeatmap(_),this.slaves.add(_),this.setIds()))}unloadSlave(A){const _=this.difficulties[A];_&&(_===this.master||!this.slaves.has(_)||(_.destroy(),this.slaves.delete(_),this.setIds()))}toggle(){const A=inject("ui/main/controls/play"),_=this.context.consume("audio");_?.toggle(),this.master?.toggle();for(const I of this.slaves)I.toggle();if(_?.state==="PLAYING"&&inject("config/background")?.video&&this.context.consume("video")?.play(_?.currentTime),_?.state==="STOPPED"&&this.context.consume("video")?.stop(_?.currentTime),this._currentNextTick=_?.currentTime??0,A)switch(this.context.consume("audio")?.state){case"PLAYING":{(async()=>A.sprite.texture=await Assets.load("./assets/pause.png"))();break}case"STOPPED":{(async()=>A.sprite.texture=await Assets.load("./assets/play.png"))();break}}}seek(A){const _=this.context.consume("audio");if(!_)throw new Error("Audio hasn't been initialized");_.currentTime=A,this.master?.seek(_.currentTime);for(const I of this.slaves)I.seek(_.currentTime);this.context.consume("video")?.seek(_.currentTime)}cacheBPM;cacheSV;cacheSample;frame(){if(!this.master){this.animationFrame=requestAnimationFrame(()=>this.frame());return}const A=this.context.consume("audio");if(!A){this.animationFrame=requestAnimationFrame(()=>this.frame());return}const _=A.currentTime;this.master?.frame(_);for(const P of this.slaves)P.frame(_);const I=inject("ui/main/controls/timestamp");I?.updateDigit(_);const B=this.master.data.controlPoints.timingPointAt(_),T=this.master.data.controlPoints.difficultyPointAt(_),R=this.master.data.controlPoints.samplePointAt(_);if(this.cacheBPM!==B||this.cacheSV!==T||this.cacheSample!==R){const P=Math.max(B.startTime,T.startTime,R.startTime);inject("ui/sidepanel/timing")?.scrollToTimingPoint(P)}this.cacheBPM!==B&&(this.cacheBPM=B,I?.updateBPM(B.bpm),inject("ui/main/viewer/timeline")?.updateTimingPoint(B)),this.cacheSV!==T&&(this.cacheSV=T,I?.updateSliderVelocity(T.sliderVelocity)),this.cacheSample!==R&&(this.cacheSample=R),inject("ui/main/controls/progress")?.setPercentage(_/A.duration),inject("ui/main/viewer/timeline")?.update(_),inject("ui/main/viewer/timeline")?.draw(_),this.context.consume("storyboard")?.update(_),this.animationFrame=requestAnimationFrame(()=>this.frame())}_currentNextTick;handleWheel(A){const _=A.deltaY>0?1:A.deltaY<0?-1:0;_!==0&&this.smoothTick(_,A.shiftKey,this.context.consume("audio")?.state==="PLAYING")}smoothTick(A,_=!1,I=!1){const B=this.context.consume("audio");if(!B)return;this._currentNextTick||(this._currentNextTick=B.currentTime);const T=this.getNextStep(A,I?B.currentTime:A===1?Math.max(this._currentNextTick,B.currentTime):Math.min(this._currentNextTick,B.currentTime),_);this._currentNextTick=Math.max(0,T),I||this.smoothSeek(this._currentNextTick),I&&(this._currentTween?.stop(),this.seek(this._currentNextTick))}_currentTween;isSeeking=!1;smoothSeek(A,_=200){this._currentTween&&this._currentTween.stop();const I=this.context.consume("audio");if(!I)return;this.isSeeking=!0;const B=new Tween({value:I.currentTime}).easing(Easings.Out).to({value:A},_).onUpdate(({value:T})=>this.seek(T)).onComplete(()=>{tweenGroup.remove(B),this.isSeeking=!1}).onStop(()=>{tweenGroup.remove(B),this.isSeeking=!1}).start();tweenGroup.add(B),this._currentTween=B}getNextStep(A,_,I=!1){const B=this.context.consume("audio");if(!B||!this.master)return 0;const T=_??B.currentTime,R=this.master.data.controlPoints.timingPointAt(T),P=inject("config/timeline")?.divisor??1,D=R.beatLength/P,F=R.startTime+(A+Math.floor((T-R.startTime)/D)+1e-8)*D;return I?T+A:F}destroy(){cancelAnimationFrame(this.animationFrame);const A=this.context.consume("audio");A?.state==="PLAYING"&&A?.toggle(),inject("ui/main/viewer/timeline")?.loadObjects([]),inject("ui/main/viewer/background")?.ejectStoryboardContainer(),this.context.consume("storyboard")?.destroy(),this.master?.destroy();for(const _ of this.slaves)_.destroy();this.context.consume("video")?.destroy(),inject("ui/sidepanel/modding/spectrogram")?.unloadTexture(),provide("beatmapset",void 0)}setIds(){const A=this.master?.data.metadata.beatmapId,_=[...this.slaves].map(P=>P.data.metadata.beatmapId),I=[A,..._].filter(P=>P!==void 0),B=new URL(window.location.href),T=B.searchParams;for(let P=0;P<I.length;P++){const D=I[P];if(P===0){T.set("b",D.toString());continue}T.append("b",D.toString())}window.history.replaceState(null,"",B);const R=document.querySelector("#idInput");R&&(R.value=I.join(", "))}}class Replay{decoder=new ScoreDecoder;data;evals=[];cursor=new Sprite$1({label:"cursor",anchor:.5,interactive:!1,eventMode:"none"});trails;constructor(){this.cursor.texture=inject("skinManager")?.getCurrentSkin().getTexture("cursor")??BLANK_TEXTURE,this.trails=[...Array(10)].map((A,_)=>new Sprite$1({anchor:.5,alpha:(10-_)/10,interactive:!1,eventMode:"none"}));for(const A of this.trails)A.texture=inject("skinManager")?.getCurrentSkin().getTexture("cursortrail")??BLANK_TEXTURE;inject("skinManager")?.addSkinChangeListener(A=>{this.cursor.texture=A.getTexture("cursor")??BLANK_TEXTURE;for(const _ of this.trails)_.texture=A.getTexture("cursortrail")??BLANK_TEXTURE})}async process(A){this.data=await this.decoder.decodeFromBuffer(await A.arrayBuffer(),!0)}evaluate(A){if(!this.data?.replay)throw"Replay has not been initiated";const _=this.data.replay?.frames,I=[];let B=0;for(const T of A.objects){const R=T instanceof DrawableSlider?T.drawableCircles[0].object.startTime-T.drawableCircles[0].object.hitWindows.windowFor(HitResult.Meh):T.object.startTime-T.object.hitWindows.windowFor(HitResult.Meh),P=T.object instanceof Slider||T.object instanceof Spinner$1?T.object.endTime:T.object.startTime+T.object.hitWindows.windowFor(HitResult.Meh);for(;_[B]&&_[B].startTime<R;)B++;const D=[];for(;_[B]&&_[B].startTime<=P;)D.push(_[B++]);const F=T.eval(D);T.evaluation=F,I.push(F),B=_.findLastIndex(L=>L.startTime<=Math.min(F.hitTime,T.object.startTime+T.object.hitWindows.windowFor(HitResult.Meh)+1))+1}return I}frame(A){const _=this.data?.replay?.frames??[];let I=binarySearch(A,_,(D,F)=>D.startTime-F);for(;_[I].startTime>A&&!(I<=0);)I--;const B=_[I],T=_[I+1]??B,R=Clamp((A-B.startTime)/Math.max(1,T.startTime-B.startTime)),P=B.position.add(T.position.subtract(B.position).scale(R));this.cursor.x=P.x,this.cursor.y=P.y;for(let D=0;D<10;D++){const F=I-D;if(F<0){this.trails[D].visible=!1;continue}this.trails[D].visible=!0,this.trails[D].x=_[F].position.x,this.trails[D].y=_[F].position.y}}}class HTTPError extends Error{response;request;options;constructor(A,_,I){const B=A.status||A.status===0?A.status:"",T=A.statusText||"",R=`${B} ${T}`.trim(),P=R?`status code ${R}`:"an unknown error";super(`Request failed with ${P}: ${_.method} ${_.url}`),this.name="HTTPError",this.response=A,this.request=_,this.options=I}}class TimeoutError extends Error{request;constructor(A){super(`Request timed out: ${A.method} ${A.url}`),this.name="TimeoutError",this.request=A}}const supportsRequestStreams=(()=>{let E=!1,A=!1;const _=typeof globalThis.ReadableStream=="function",I=typeof globalThis.Request=="function";if(_&&I)try{A=new globalThis.Request("https://empty.invalid",{body:new globalThis.ReadableStream,method:"POST",get duplex(){return E=!0,"half"}}).headers.has("Content-Type")}catch(B){if(B instanceof Error&&B.message==="unsupported BodyInit type")return!1;throw B}return E&&!A})(),supportsAbortController=typeof globalThis.AbortController=="function",supportsAbortSignal=typeof globalThis.AbortSignal=="function"&&typeof globalThis.AbortSignal.any=="function",supportsResponseStreams=typeof globalThis.ReadableStream=="function",supportsFormData=typeof globalThis.FormData=="function",requestMethods=["get","post","put","patch","head","delete"],responseTypes={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},maxSafeTimeout=2147483647,usualFormBoundarySize=new TextEncoder().encode("------WebKitFormBoundaryaxpyiPgbbPti10Rw").length,stop=Symbol("stop"),kyOptionKeys={json:!0,parseJson:!0,stringifyJson:!0,searchParams:!0,prefixUrl:!0,retry:!0,timeout:!0,hooks:!0,throwHttpErrors:!0,onDownloadProgress:!0,onUploadProgress:!0,fetch:!0},requestOptionsRegistry={method:!0,headers:!0,body:!0,mode:!0,credentials:!0,cache:!0,redirect:!0,referrer:!0,referrerPolicy:!0,integrity:!0,keepalive:!0,signal:!0,window:!0,dispatcher:!0,duplex:!0,priority:!0},getBodySize=E=>{if(!E)return 0;if(E instanceof FormData){let A=0;for(const[_,I]of E)A+=usualFormBoundarySize,A+=new TextEncoder().encode(`Content-Disposition: form-data; name="${_}"`).length,A+=typeof I=="string"?new TextEncoder().encode(I).length:I.size;return A}if(E instanceof Blob)return E.size;if(E instanceof ArrayBuffer)return E.byteLength;if(typeof E=="string")return new TextEncoder().encode(E).length;if(E instanceof URLSearchParams)return new TextEncoder().encode(E.toString()).length;if("byteLength"in E)return E.byteLength;if(typeof E=="object"&&E!==null)try{const A=JSON.stringify(E);return new TextEncoder().encode(A).length}catch{return 0}return 0},streamResponse=(E,A)=>{const _=Number(E.headers.get("content-length"))||0;let I=0;return E.status===204?(A&&A({percent:1,totalBytes:_,transferredBytes:I},new Uint8Array),new Response(null,{status:E.status,statusText:E.statusText,headers:E.headers})):new Response(new ReadableStream({async start(B){const T=E.body.getReader();A&&A({percent:0,transferredBytes:0,totalBytes:_},new Uint8Array);async function R(){const{done:P,value:D}=await T.read();if(P){B.close();return}if(A){I+=D.byteLength;const F=_===0?0:I/_;A({percent:F,transferredBytes:I,totalBytes:_},D)}B.enqueue(D),await R()}await R()}}),{status:E.status,statusText:E.statusText,headers:E.headers})},streamRequest=(E,A)=>{const _=getBodySize(E.body);let I=0;return new Request(E,{duplex:"half",body:new ReadableStream({async start(B){const T=E.body instanceof ReadableStream?E.body.getReader():new Response("").body.getReader();async function R(){const{done:P,value:D}=await T.read();if(P){A&&A({percent:1,transferredBytes:I,totalBytes:Math.max(_,I)},new Uint8Array),B.close();return}I+=D.byteLength;let F=_===0?0:I/_;(_<I||F===1)&&(F=.99),A&&A({percent:Number(F.toFixed(2)),transferredBytes:I,totalBytes:_},D),B.enqueue(D),await R()}await R()}})})},isObject=E=>E!==null&&typeof E=="object",validateAndMerge=(...E)=>{for(const A of E)if((!isObject(A)||Array.isArray(A))&&A!==void 0)throw new TypeError("The `options` argument must be an object");return deepMerge({},...E)},mergeHeaders=(E={},A={})=>{const _=new globalThis.Headers(E),I=A instanceof globalThis.Headers,B=new globalThis.Headers(A);for(const[T,R]of B.entries())I&&R==="undefined"||R===void 0?_.delete(T):_.set(T,R);return _};function newHookValue(E,A,_){return Object.hasOwn(A,_)&&A[_]===void 0?[]:deepMerge(E[_]??[],A[_]??[])}const mergeHooks=(E={},A={})=>({beforeRequest:newHookValue(E,A,"beforeRequest"),beforeRetry:newHookValue(E,A,"beforeRetry"),afterResponse:newHookValue(E,A,"afterResponse"),beforeError:newHookValue(E,A,"beforeError")}),deepMerge=(...E)=>{let A={},_={},I={};for(const B of E)if(Array.isArray(B))Array.isArray(A)||(A=[]),A=[...A,...B];else if(isObject(B)){for(let[T,R]of Object.entries(B))isObject(R)&&T in A&&(R=deepMerge(A[T],R)),A={...A,[T]:R};isObject(B.hooks)&&(I=mergeHooks(I,B.hooks),A.hooks=I),isObject(B.headers)&&(_=mergeHeaders(_,B.headers),A.headers=_)}return A},normalizeRequestMethod=E=>requestMethods.includes(E)?E.toUpperCase():E,retryMethods=["get","put","head","delete","options","trace"],retryStatusCodes=[408,413,429,500,502,503,504],retryAfterStatusCodes=[413,429,503],defaultRetryOptions={limit:2,methods:retryMethods,statusCodes:retryStatusCodes,afterStatusCodes:retryAfterStatusCodes,maxRetryAfter:Number.POSITIVE_INFINITY,backoffLimit:Number.POSITIVE_INFINITY,delay:E=>.3*2**(E-1)*1e3},normalizeRetryOptions=(E={})=>{if(typeof E=="number")return{...defaultRetryOptions,limit:E};if(E.methods&&!Array.isArray(E.methods))throw new Error("retry.methods must be an array");if(E.statusCodes&&!Array.isArray(E.statusCodes))throw new Error("retry.statusCodes must be an array");return{...defaultRetryOptions,...E}};async function timeout(E,A,_,I){return new Promise((B,T)=>{const R=setTimeout(()=>{_&&_.abort(),T(new TimeoutError(E))},I.timeout);I.fetch(E,A).then(B).catch(T).then(()=>{clearTimeout(R)})})}async function delay(E,{signal:A}){return new Promise((_,I)=>{A&&(A.throwIfAborted(),A.addEventListener("abort",B,{once:!0}));function B(){clearTimeout(T),I(A.reason)}const T=setTimeout(()=>{A?.removeEventListener("abort",B),_()},E)})}const findUnknownOptions=(E,A)=>{const _={};for(const I in A)!(I in requestOptionsRegistry)&&!(I in kyOptionKeys)&&!(I in E)&&(_[I]=A[I]);return _};class Ky{static create(A,_){const I=new Ky(A,_),B=async()=>{if(typeof I._options.timeout=="number"&&I._options.timeout>maxSafeTimeout)throw new RangeError(`The \`timeout\` option cannot be greater than ${maxSafeTimeout}`);await Promise.resolve();let P=await I._fetch();for(const D of I._options.hooks.afterResponse){const F=await D(I.request,I._options,I._decorateResponse(P.clone()));F instanceof globalThis.Response&&(P=F)}if(I._decorateResponse(P),!P.ok&&I._options.throwHttpErrors){let D=new HTTPError(P,I.request,I._options);for(const F of I._options.hooks.beforeError)D=await F(D);throw D}if(I._options.onDownloadProgress){if(typeof I._options.onDownloadProgress!="function")throw new TypeError("The `onDownloadProgress` option must be a function");if(!supportsResponseStreams)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return streamResponse(P.clone(),I._options.onDownloadProgress)}return P},R=(I._options.retry.methods.includes(I.request.method.toLowerCase())?I._retry(B):B()).finally(async()=>{I.request.bodyUsed||await I.request.body?.cancel()});for(const[P,D]of Object.entries(responseTypes))R[P]=async()=>{I.request.headers.set("accept",I.request.headers.get("accept")||D);const F=await R;if(P==="json"){if(F.status===204||(await F.clone().arrayBuffer()).byteLength===0)return"";if(_.parseJson)return _.parseJson(await F.text())}return F[P]()};return R}request;abortController;_retryCount=0;_input;_options;constructor(A,_={}){if(this._input=A,this._options={..._,headers:mergeHeaders(this._input.headers,_.headers),hooks:mergeHooks({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},_.hooks),method:normalizeRequestMethod(_.method??this._input.method??"GET"),prefixUrl:String(_.prefixUrl||""),retry:normalizeRetryOptions(_.retry),throwHttpErrors:_.throwHttpErrors!==!1,timeout:_.timeout??1e4,fetch:_.fetch??globalThis.fetch.bind(globalThis)},typeof this._input!="string"&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&typeof this._input=="string"){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(supportsAbortController&&supportsAbortSignal){const I=this._options.signal??this._input.signal;this.abortController=new globalThis.AbortController,this._options.signal=I?AbortSignal.any([I,this.abortController.signal]):this.abortController.signal}if(supportsRequestStreams&&(this._options.duplex="half"),this._options.json!==void 0&&(this._options.body=this._options.stringifyJson?.(this._options.json)??JSON.stringify(this._options.json),this._options.headers.set("content-type",this._options.headers.get("content-type")??"application/json")),this.request=new globalThis.Request(this._input,this._options),this._options.searchParams){const B="?"+(typeof this._options.searchParams=="string"?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(this._options.searchParams).toString()),T=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,B);(supportsFormData&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)&&!(this._options.headers&&this._options.headers["content-type"])&&this.request.headers.delete("content-type"),this.request=new globalThis.Request(new globalThis.Request(T,{...this.request}),this._options)}if(this._options.onUploadProgress){if(typeof this._options.onUploadProgress!="function")throw new TypeError("The `onUploadProgress` option must be a function");if(!supportsRequestStreams)throw new Error("Request streams are not supported in your environment. The `duplex` option for `Request` is not available.");this.request.body&&(this.request=streamRequest(this.request,this._options.onUploadProgress))}}_calculateRetryDelay(A){if(this._retryCount++,this._retryCount>this._options.retry.limit||A instanceof TimeoutError)throw A;if(A instanceof HTTPError){if(!this._options.retry.statusCodes.includes(A.response.status))throw A;const I=A.response.headers.get("Retry-After")??A.response.headers.get("RateLimit-Reset")??A.response.headers.get("X-RateLimit-Reset")??A.response.headers.get("X-Rate-Limit-Reset");if(I&&this._options.retry.afterStatusCodes.includes(A.response.status)){let B=Number(I)*1e3;Number.isNaN(B)?B=Date.parse(I)-Date.now():B>=Date.parse("2024-01-01")&&(B-=Date.now());const T=this._options.retry.maxRetryAfter??B;return B<T?B:T}if(A.response.status===413)throw A}const _=this._options.retry.delay(this._retryCount);return Math.min(this._options.retry.backoffLimit,_)}_decorateResponse(A){return this._options.parseJson&&(A.json=async()=>this._options.parseJson(await A.text())),A}async _retry(A){try{return await A()}catch(_){const I=Math.min(this._calculateRetryDelay(_),maxSafeTimeout);if(this._retryCount<1)throw _;await delay(I,{signal:this._options.signal});for(const B of this._options.hooks.beforeRetry)if(await B({request:this.request,options:this._options,error:_,retryCount:this._retryCount})===stop)return;return this._retry(A)}}async _fetch(){for(const I of this._options.hooks.beforeRequest){const B=await I(this.request,this._options);if(B instanceof Request){this.request=B;break}if(B instanceof Response)return B}const A=findUnknownOptions(this.request,this._options),_=this.request;return this.request=_.clone(),this._options.timeout===!1?this._options.fetch(_,A):timeout(_,A,this.abortController,this._options)}}/*! MIT License  Sindre Sorhus */const createInstance=E=>{const A=(_,I)=>Ky.create(_,validateAndMerge(E,I));for(const _ of requestMethods)A[_]=(I,B)=>Ky.create(I,validateAndMerge(E,B,{method:_}));return A.create=_=>createInstance(validateAndMerge(_)),A.extend=_=>(typeof _=="function"&&(_=_(E??{})),createInstance(validateAndMerge(E,_))),A.stop=stop,A},ky=createInstance();var IDType=(E=>(E.BEATMAP_SET="s",E.BEATMAP="b",E))(IDType||{});const sanitizeID=E=>/^[0-9]+$/g.test(E)?E:null;function processID(E){if(/^[0-9]+$/g.test(E))return{id:E,type:"b"};try{const A=new URL(E);if(A.hostname!=="osu.ppy.sh")return null;const _=A.pathname.split("/");if(!_[1]||!_[2])return null;switch(_[1]){case"beatmapsets":{if(!A.hash){const R=sanitizeID(_[2]);return R?{id:R,type:"s"}:null}const[I,B]=A.hash.split("/");if(!B){const R=sanitizeID(_[2]);return R?{id:R,type:"s"}:null}const T=sanitizeID(B);return T?{id:T,type:"b"}:null}case"s":{const I=sanitizeID(_[2]);return I?{id:I,type:"s"}:null}case"beatmaps":case"b":{const I=sanitizeID(_[2]);return I?{id:I,type:"b"}:null}}return null}catch{return null}}async function getBeatmapsetId(E){try{if(!/\d+/g.test(E))throw new Error("beatmapId is not a number!");inject("ui/loading")?.setText("Getting beatmapsetId...");const{beatmaps:A}=await ky.get(`https://api.try-z.net/beatmaps?ids=${E}`).json();return A.length===0?null:A[0]?.beatmapset_id??null}catch(A){return console.error(A),null}}async function getBeatmapsetIdFromHash(E){try{if(!/\d+[a-f]+/g.test(E))throw new Error("checksum is not in valid format!");return inject("ui/loading")?.setText("Getting beatmapsetId..."),(await ky.get(`https://api.try-z.net/b/h/${E}`).json()).beatmapset_id??null}catch(A){return console.error(A),null}}async function getBeatmapFromId(E,A){const _=inject("config/mirror");if(!_)throw new Error("Mirror Config not initialized yet!!!");const{mirror:{urlTemplate:I}}=_,B=A??await getBeatmapsetId(E);if(!B)throw new Error(`Map(set) with id ${E??A} does not exist!!!`);try{return inject("ui/loading")?.setText("Getting beatmap..."),await ky.get(I.replaceAll("$setId",B.toString()),{headers:{Accept:"application/x-osu-beatmap-archive"},onDownloadProgress(R){inject("ui/loading")?.setText(`Downloading map: ${(100*(R.percent??0)).toFixed(2)}%`)}}).blob()}catch(T){return console.error(T),null}}async function getBeatmapFromHash(E){const A=inject("config/mirror");if(!A)throw new Error("Mirror Config not initialized yet!!!");const{mirror:{urlTemplate:_}}=A,I=await getBeatmapsetIdFromHash(E);if(!I)throw new Error(`Map with hash ${E} does not exist!!!`);try{return inject("ui/loading")?.setText("Getting beatmap..."),await ky.get(_.replaceAll("$setId",I.toString()),{headers:{Accept:"application/x-osu-beatmap-archive"},onDownloadProgress(T){inject("ui/loading")?.setText(`Downloading map: ${(100*(T.percent??0)).toFixed(2)}%`)}}).blob()}catch(B){return console.error(B),null}}async function getBeatmapFromExternalUrl(E){try{inject("ui/loading")?.setText("Getting beatmap...");const A=new FormData;return A.append("url",E),await ky.post("./api/download",{body:A,onDownloadProgress(I){inject("ui/loading")?.setText(`Downloading map: ${(100*(I.percent??0)).toFixed(2)}%`)}}).blob()}catch(A){return console.error(A),null}}class ConfigSection{_callbacks=new Map;onChange(A,_){this._callbacks.get(A)||this._callbacks.set(A,new Set),this._callbacks.get(A)?.add(_)}async emitChange(A,_){inject("config")?.saveSettings();const I=this._callbacks.get(A);I&&await Promise.all([...I].map(B=>new Promise(T=>{setTimeout(()=>{B(_),T(void 0)},10)})))}jsonify(){}}class AudioConfig extends ConfigSection{constructor(A){if(super(),this.loadEventListeners(),!A)return;const{masterVolume:_,musicVolume:I,effectVolume:B,hitsound:T}=A;this.masterVolume=_??.8,this.musicVolume=I??.5,this.effectVolume=B??.5,this.hitsound=T??!0}_masterVolume=.8;get masterVolume(){return this._masterVolume}set masterVolume(A){this._masterVolume=A;const _=document.querySelector("label[for=masterVolume]");_&&(_.textContent=`${Math.round(A*100)}%`);const I=document.querySelector("#masterVolume");I&&(I.value=`${A}`),this.emitChange("masterVolume",A)}_musicVolume=.5;get musicVolume(){return this._musicVolume}set musicVolume(A){this._musicVolume=A;const _=document.querySelector("label[for=musicVolume]");_&&(_.textContent=`${Math.round(A*100)}%`);const I=document.querySelector("#musicVolume");I&&(I.value=`${A}`),this.emitChange("musicVolume",A)}_effectVolume=.5;get effectVolume(){return this._effectVolume}set effectVolume(A){this._effectVolume=A;const _=document.querySelector("label[for=effectVolume]");_&&(_.textContent=`${Math.round(A*100)}%`);const I=document.querySelector("#effectVolume");I&&(I.value=`${A}`),this.emitChange("effectVolume",A)}_hitsound=!1;get hitsound(){return this._hitsound}set hitsound(A){this._hitsound=A;const _=document.querySelector("#hitsound");_&&(_.checked=A),this.emitChange("hitsound",A)}loadEventListeners(){document.querySelector("#masterVolume")?.addEventListener("input",A=>{const _=+(A.target?.value??.8);this.masterVolume=_}),document.querySelector("#musicVolume")?.addEventListener("input",A=>{const _=+(A.target?.value??.5);this.musicVolume=_}),document.querySelector("#effectVolume")?.addEventListener("input",A=>{const _=+(A.target?.value??.5);this.effectVolume=_}),document.querySelector("#hitsound")?.addEventListener("change",A=>{const _=A.target?.checked??!0;this.hitsound=_})}jsonify(){return{masterVolume:this.masterVolume,musicVolume:this.musicVolume,effectVolume:this.effectVolume,hitsound:this.hitsound}}}class BackgroundConfig extends ConfigSection{constructor(A){if(super(),this.loadEventListeners(),!A)return;const{backgroundDim:_,backgroundBlur:I,video:B,storyboard:T,breakSection:R}=A;this.backgroundDim=_??70,this.backgroundBlur=I??0,this.video=B??!0,this.storyboard=T??!0,this.breakSection=R??!1}_backgroundDim=60;get backgroundDim(){return this._backgroundDim}set backgroundDim(A){this._backgroundDim=A;const _=document.querySelector("label[for=backgroundDim]");if(!_)return;_.textContent=`${A}%`;const I=document.querySelector("#backgroundDim");I&&(I.value=`${A}`),this.emitChange("backgroundDim",A)}_backgroundBlur=0;get backgroundBlur(){return this._backgroundBlur}set backgroundBlur(A){this._backgroundBlur=A;const _=document.querySelector("label[for=backgroundBlur]");if(!_)return;_.textContent=`${A}%`;const I=document.querySelector("#backgroundBlur");I&&(I.value=`${A}`),this.emitChange("backgroundBlur",A)}_breakSection=!1;get breakSection(){return this._breakSection}set breakSection(A){A!==this._breakSection&&(this._breakSection=A,this.emitChange("breakSection",A))}_video=!0;get video(){return this._video}set video(A){this._video=A;const _=document.querySelector("#video");_&&(_.checked=A,this.emitChange("video",A))}_storyboard=!0;get storyboard(){return this._storyboard}set storyboard(A){this._storyboard=A;const _=document.querySelector("#storyboard");_&&(_.checked=A,this.emitChange("storyboard",A))}loadEventListeners(){document.querySelector("#backgroundDim")?.addEventListener("input",A=>{const _=+(A.target?.value??60);this.backgroundDim=_}),document.querySelector("#backgroundBlur")?.addEventListener("input",A=>{const _=+(A.target?.value??0);this.backgroundBlur=_}),document.querySelector("#video")?.addEventListener("change",A=>{const _=A.target?.checked??!0;this.video=_}),document.querySelector("#storyboard")?.addEventListener("change",A=>{const _=A.target?.checked??!0;this.storyboard=_})}jsonify(){return{backgroundDim:this.backgroundDim,backgroundBlur:this.backgroundBlur,video:this.video,storyboard:this.storyboard}}}const defaultPalette={crust:1118491,mantle:1579045,base:1973806,surface0:3224132,surface1:4540250,surface2:5790576,overlay0:7106694,overlay1:8357020,overlay2:9673138,subtext0:10923464,subtext1:12239582,text:13489908};class ColorConfig extends ConfigSection{_color=defaultPalette;get color(){return this._color}set color(A){this._color={...defaultPalette,...A},this.emitChange("color",this._color)}}class ExperimentalConfig extends ConfigSection{constructor(A){if(super(),this.loadEventListeners(),!A)return;const{asyncLoading:_,overlapGameplays:I,hidden:B,hardRock:T,doubleTime:R}=A;this.asyncLoading=_??!0,this.overlapGameplays=I??!1,this.hidden=B??new URLSearchParams(window.location.search).get("m")?.includes("HD")??!1,this.hardRock=T??new URLSearchParams(window.location.search).get("m")?.includes("HR")??!1,this.doubleTime=R??new URLSearchParams(window.location.search).get("m")?.includes("DT")??!1}_asyncLoading=!0;get asyncLoading(){return this._asyncLoading}set asyncLoading(A){this._asyncLoading=A;const _=document.querySelector("#asyncLoading");_&&(_.checked=A,this.emitChange("asyncLoading",A))}_overlapGameplays=!0;get overlapGameplays(){return this._overlapGameplays}set overlapGameplays(A){this._overlapGameplays=A;const _=document.querySelector("#overlapGameplays");_&&(_.checked=A,this.emitChange("overlapGameplays",A))}_hardRock=!0;get hardRock(){return this._hardRock}set hardRock(A){this._hardRock=A;const _=document.querySelector("#modsHR");_&&(_.checked=A,this.emitChange("mods",{shouldRecalculate:!0,shouldPlaybackChange:!1,mods:this.getModsString()}))}_doubleTime=!0;get doubleTime(){return this._doubleTime}set doubleTime(A){this._doubleTime=A;const _=document.querySelector("#modsDT");_&&(_.checked=A,this.emitChange("mods",{shouldRecalculate:!1,shouldPlaybackChange:!0,mods:this.getModsString()}))}_hidden=!0;get hidden(){return this._hidden}set hidden(A){this._hidden=A;const _=document.querySelector("#modsHD");_&&(_.checked=A,this.emitChange("mods",{shouldRecalculate:!1,shouldPlaybackChange:!1,mods:this.getModsString()}))}getModsString(){const A=this.hidden?"HD":"",_=this.hardRock?"HR":"",I=this.doubleTime?"DT":"";return`${A}${_}${I}`}loadEventListeners(){document.querySelector("#overlapGameplays")?.addEventListener("change",A=>{const _=A.target?.checked??!0;this.overlapGameplays=_}),document.querySelector("#modsHD")?.addEventListener("change",A=>{const _=A.target?.checked??!0;this.hidden=_}),document.querySelector("#modsHR")?.addEventListener("change",A=>{const _=A.target?.checked??!0;this.hardRock=_}),document.querySelector("#modsDT")?.addEventListener("change",A=>{const _=A.target?.checked??!0;this.doubleTime=_})}jsonify(){return{asyncLoading:this.asyncLoading,overlapGameplays:this.overlapGameplays}}}class FullscreenConfig extends ConfigSection{constructor(A){if(super(),!A)return;const{fullscreen:_}=A;this.fullscreen=_}_fullscreen=!1;get fullscreen(){return this._fullscreen}set fullscreen(A){this._fullscreen=A,this.emitChange("fullscreen",A)}jsonify(){return{}}}class GameplayConfig extends ConfigSection{constructor(A){if(super(),this.loadEventListeners(),!A)return;const{showGrid:_,hitAnimation:I,snakeInSlider:B,snakeOutSlider:T}=A;this.showGrid=_??!0,this.hitAnimation=I??!0,this.snakeInSlider=B??!0,this.snakeOutSlider=T??!0}_showGrid=!0;get showGrid(){return this._showGrid}set showGrid(A){this._showGrid=A;const _=document.querySelector("#grid");_&&(_.checked=A,this.emitChange("showGrid",A))}_hitAnimation=!0;get hitAnimation(){return this._hitAnimation}set hitAnimation(A){this._hitAnimation=A;const _=document.querySelector("#hitAnim");_&&(_.checked=A,this.emitChange("hitAnimation",A))}_snakeInSlider=!0;get snakeInSlider(){return this._snakeInSlider}set snakeInSlider(A){this._snakeInSlider=A;const _=document.querySelector("#snakeIn");_&&(_.checked=A,this.emitChange("snakeIn",A))}_snakeOutSlider=!0;get snakeOutSlider(){return this._snakeOutSlider}set snakeOutSlider(A){this._snakeOutSlider=A;const _=document.querySelector("#snakeOut");_&&(_.checked=A,this.emitChange("snakeOut",A))}loadEventListeners(){document.querySelector("#grid")?.addEventListener("change",A=>{const _=A.target?.checked??!0;this.showGrid=_}),document.querySelector("#hitAnim")?.addEventListener("change",A=>{const _=A.target?.checked??!0;this.hitAnimation=_}),document.querySelector("#snakeIn")?.addEventListener("change",A=>{const _=A.target?.checked??!0;this.snakeInSlider=_}),document.querySelector("#snakeOut")?.addEventListener("change",A=>{const _=A.target?.checked??!0;this.snakeOutSlider=_})}jsonify(){return{showGrid:this.showGrid,hitAnimation:this.hitAnimation,snakeInSlider:this.snakeInSlider,snakeOutSlider:this.snakeOutSlider}}}class MirrorConfig extends ConfigSection{constructor(A){if(super(),this.loadEventListeners(),!A)return;const{mirror:_}=A;this.mirror=_??{name:"Nerinyan",urlTemplate:"https://api.nerinyan.moe/d/$setId"}}_mirror={name:"Nerinyan",urlTemplate:"https://api.nerinyan.moe/d/$setId"};get mirror(){return this._mirror}set mirror(A){this._mirror=A;for(const _ of document.querySelectorAll("[name=beatmapMirror]"))_.checked=_.value===A.name;this.emitChange("mirror",A)}loadEventListeners(){for(const A of document.querySelectorAll("[name=beatmapMirror]"))A.addEventListener("change",_=>{const I=_.target.value,B=_.target.dataset.url;B&&(this.mirror={name:I,urlTemplate:B})})}jsonify(){return{mirror:this.mirror}}}var RENDERER_VAL=(E=>(E.webgl="WebGL",E.webgpu="WebGPU",E))(RENDERER_VAL||{});class RendererConfig extends ConfigSection{constructor(A){if(super(),this.loadEventListeners(),!A)return;const{renderer:_,resolution:I,antialiasing:B}=A;this.renderer=_==="WEBGL2"?"webgl":_??"webgl",this.resolution=I??1,this.antialiasing=B??!0}_renderer="webgl";get renderer(){return this._renderer}set renderer(A){this._renderer=A;const _=document.querySelector("#currentRenderer");_&&(_.innerText=RENDERER_VAL[A],this.emitChange("renderer",A))}_resolution=1;get resolution(){return this._resolution}set resolution(A){this._resolution=A,this.emitChange("resolution",A)}_antialiasing=!0;get antialiasing(){return this._antialiasing}set antialiasing(A){const _=document.querySelector("#antialiasing");_&&(_.checked=A,this._antialiasing!==A&&(this._antialiasing=A,this.emitChange("antialiasing",A)))}async emitChange(A,_){super.emitChange(A,_)}onChange(A,_){super.onChange(A,_)}loadEventListeners(){document.querySelector("#antialiasing")?.addEventListener("change",A=>{const _=A.target?.checked??!0;this.antialiasing=_});for(const A of document.querySelectorAll(".renderer-select"))A.addEventListener("click",_=>{const I=_.target?.dataset.renderer??"webgl";this.renderer=I})}jsonify(){return{renderer:this.renderer,resolution:this.resolution,antialiasing:this.antialiasing}}}class SkinningConfig extends ConfigSection{constructor(A){if(super(),this.loadEventListeners(),!A)return;const{skinningIdx:_,disableBeatmapSkin:I}=A;this.skinningIdx=_??0,this.disableBeatmapSkin=I??!1}_skinningIdx=0;get skinningIdx(){return this._skinningIdx}set skinningIdx(A){this._skinningIdx=A,this.emitChange("skin",A)}_disableBeatmapSkin=!1;get disableBeatmapSkin(){return this._disableBeatmapSkin}set disableBeatmapSkin(A){this._disableBeatmapSkin=A;const _=document.querySelector("#disableBeatmapSkin");_&&(_.checked=A,this.emitChange("disableBeatmapSkin",A))}loadEventListeners(){document.querySelector("#disableBeatmapSkin")?.addEventListener("change",A=>{const _=A.target?.checked??!0;this.disableBeatmapSkin=_})}jsonify(){return{skinningIdx:this.skinningIdx,disableBeatmapSkin:this.disableBeatmapSkin}}}class TimelineConfig extends ConfigSection{constructor(A){if(super(),!A)return;const{scale:_,divisor:I}=A;this.scale=_??1,this.divisor=I??4}_scale=1;get scale(){return this._scale}set scale(A){this._scale=A,this.emitChange("scale",A)}_divisor=4;get divisor(){return this._divisor}set divisor(A){this._divisor=A,this.emitChange("divisor",A)}onChange(A,_){super.onChange(A,_)}handleWheel(A){A.deltaY<0&&(this.divisor=Math.min(16,this.divisor===9?12:this.divisor===12?16:this.divisor+1)),A.deltaY>0&&(this.divisor=Math.max(1,this.divisor===16?12:this.divisor===12?9:this.divisor-1))}jsonify(){return{scale:this.scale,divisor:this.divisor}}}let Config$1=class{renderer;mirror;timeline;background;skinning;audio;color;experimental;fullscreen;gameplay;constructor(){const A=this.loadSettings();this.renderer=provide("config/renderer",new RendererConfig(A?.renderer??{antialiasing:!0,renderer:"webgl"})),this.mirror=provide("config/mirror",new MirrorConfig(A?.mirror)),this.timeline=provide("config/timeline",new TimelineConfig(A?.timeline)),this.background=provide("config/background",new BackgroundConfig(A?.background??{backgroundDim:60,backgroundBlur:0,storyboard:!0,video:!0,breakSection:!1})),this.audio=provide("config/audio",new AudioConfig(A?.audio??{masterVolume:.8,musicVolume:.5,effectVolume:.5,hitsound:!1})),this.skinning=provide("config/skinning",new SkinningConfig(A?.skinning??{skinningIdx:0,disableBeatmapSkin:!1})),this.color=provide("config/color",new ColorConfig),this.experimental=provide("config/experimental",new ExperimentalConfig(A?.experimental??{asyncLoading:!0,overlapGameplays:!1})),this.fullscreen=provide("config/fullscreen",new FullscreenConfig({fullscreen:!1})),this.gameplay=provide("config/gameplay",new GameplayConfig(A?.gameplay??{showGrid:!0,hitAnimation:!0,snakeInSlider:!0,snakeOutSlider:!0}));const _=document.querySelector("#overlay"),I=document.querySelector("#settings");_&&_.addEventListener("click",()=>{_?.classList.add("overlayHidden"),_?.classList.remove("overlay"),I?.classList.remove("show")});const B=document.querySelector("#settingsButton");B&&B.addEventListener("click",()=>{I?.classList.add("show"),_?.classList.add("overlay"),_?.classList.remove("overlayHidden")}),document.addEventListener("keydown",T=>{T.key.toLowerCase()!=="o"||!T.ctrlKey||(T.preventDefault(),I?.classList.toggle("show"),_?.classList.toggle("overlay"),_?.classList.toggle("overlayHidden"))})}loadSettings(){return JSON.parse(localStorage.getItem("josuSettings")??"null")}saveSettings(){localStorage.setItem("josuSettings",JSON.stringify({audio:this.audio.jsonify(),background:this.background.jsonify(),mirror:this.mirror.jsonify(),renderer:this.renderer.jsonify(),skinning:this.skinning.jsonify(),timeline:this.timeline.jsonify(),experimental:this.experimental.jsonify(),gameplay:this.gameplay.jsonify()}))}};class ResponsiveHandler{direction="landscape";callbacks=new Set;on(A,_){this.callbacks.add(_)}responsive(){const A=inject("ui/app");if(!A)return;const _=A.screen.width,I=A.screen.height;if(_>I&&this.direction!=="landscape"){this.direction="landscape";for(const B of this.callbacks)B(this.direction)}if(_<I&&this.direction!=="portrait"){this.direction="portrait";for(const B of this.callbacks)B(this.direction)}}}async function getArgon(){const E=[...Array(10)].map((B,T)=>`default-${T}@2x.png`),A=["drum","normal","soft"].map(B=>["hitclap","hitfinish","hitnormal","hitwhistle","sliderslide","slidertick","sliderwhistle"].map(T=>`${B}-${T}.wav`)),_=[...E,...A.reduce((B,T)=>(B.push(...T),B),[]),"followpoint.png","timelinehitcircle@2x.png","hit300@2x.png","hit100@2x.png","hit50@2x.png","hit0@2x.png","hitcircle@2x.png","hitcircleflash@2x.png","hitcircleglow@2x.png","hitcircleoverlay@2x.png","hitcircleselect@2x.png","sliderb@2x.png","sliderb-nd@2x.png","sliderfollowcircle@2x.png","reversearrow@2x.png","repeat-edge-piece@2x.png","sliderendcircle.png","sliderstartcircle@2x.png","sliderscorepoint@2x.png","spinner-approachcircle@2x.png","spinner-bottom@2x.png","skin.ini"],I=new Map;return await Promise.all(_.map(async B=>{try{const T=await ky.get(`./skinning/argon/${B}`).blob();I.set(B,T)}catch{return}})),I}async function getDefaultLegacy(){const E=[...Array(10)].map((B,T)=>`default-${T}@2x.png`),A=["drum","normal","soft"].map(B=>["hitclap","hitfinish","hitnormal","hitwhistle","sliderslide","slidertick","sliderwhistle"].map(T=>`${B}-${T}.wav`)),_=["approachcircle@2x.png",...E,...A.reduce((B,T)=>(B.push(...T),B),[]),"cursor@2x.png","cursortrail.png","followpoint@2x.png","hit300@2x.png","hit100@2x.png","hit50@2x.png","hit0@2x.png","hitcircle@2x.png","hitcircleoverlay@2x.png","hitcircleselect@2x.png","skin.ini","sliderb0@2x.png","sliderb1@2x.png","sliderb2@2x.png","sliderb3@2x.png","sliderb4@2x.png","sliderb5@2x.png","sliderb6@2x.png","sliderb7@2x.png","sliderb8@2x.png","sliderb9@2x.png","sliderb-nd@2x.png","sliderb-spec@2x.png","sliderfollowcircle@2x.png","reversearrow@2x.png","sliderscorepoint@2x.png","spinner-approachcircle@2x.png","spinner-bottom@2x.png"],I=new Map;return await Promise.all(_.map(async B=>{try{const T=await ky.get(`./skinning/legacy/${B}`).blob();I.set(B,T)}catch{return}})),I}async function getYugen(){const E=[...Array(10)].map((B,T)=>`default-${T}@2x.png`),A=["drum","normal","soft"].map(B=>["hitclap","hitfinish","hitnormal","hitwhistle","sliderslide","slidertick","sliderwhistle"].map(T=>`${B}-${T}.wav`)),_=["approachcircle.png","cursor@2x.png","cursortrail.png",...E,...A.reduce((B,T)=>(B.push(...T),B),[]),"followpoint@2x.png","followpoint-0.png","followpoint-1.png","followpoint-2.png","hit300.png","hit100.png","hit50.png","hit0.png","hitcircle@2x.png","hitcircleoverlay@2x.png","skin.ini","sliderb0@2x.png","sliderfollowcircle@2x.png","reversearrow@2x.png","sliderscorepoint.png","spinner-approachcircle@2x.png","spinner-bottom@2x.png"],I=new Map;return await Promise.all(_.map(async B=>{try{const T=await ky.get(`./skinning/yugen/${B}`).blob();I.set(B,T)}catch{return}})),I}class Database{db;init(){return new Promise((A,_)=>{const I=window.indexedDB.open("josuDB",1);I.onupgradeneeded=B=>{this.db=B.target.result,this.db.createObjectStore("skins",{autoIncrement:!0})},I.onerror=()=>{console.error("Request open database error!"),_(I.error)},I.onsuccess=B=>{this.db=B.target.result,A(void 0)}})}getAll(){return new Promise((A,_)=>{const B=this.db.transaction("skins","readonly").objectStore("skins");B.getAll().onsuccess=T=>{A(T.target.result)},B.getAll().onerror=T=>{console.error("Get all skins from database error!"),_(T)}})}get(A){return new Promise((_,I)=>{const T=this.db.transaction("skins","readonly").objectStore("skins");T.get(A).onsuccess=R=>{_(R.target.result)},T.get(A).onerror=R=>{console.error("Get all from database error!"),I(R)}})}add(A,_){return new Promise((I,B)=>{const P=this.db.transaction("skins","readwrite").objectStore("skins").put(A,_);P.onsuccess=D=>{I(D.target.result)},P.onerror=D=>{console.error("Add to database error!"),B(D)}})}remove(A){return new Promise((_,I)=>{const R=this.db.transaction("skins","readwrite").objectStore("skins").delete(A);R.onsuccess=P=>{_(P.target.result)},R.onerror=P=>{console.error("Remove from database error!"),I(P)}})}getAllKeys(){return new Promise((A,_)=>{const B=this.db.transaction("skins","readonly").objectStore("skins");B.getAllKeys().onsuccess=T=>{A(T.target.result)},B.getAllKeys().onerror=T=>{console.error("Get all skins from database error!"),_(T)}})}}class SkinManager{skins=[];currentSkin;defaultSkin;indexed=new Database;callbacks=new Set;constructor(){document.querySelector("#reloadDefaultSkins")?.addEventListener("click",async()=>{await this.indexed.remove("default"),await this.indexed.remove("yugen"),await this.indexed.remove("argon"),await this.loadDefaultSkins(),await this.refreshSkinList();const A=this.getCurrentSkin();if(A?.metadata?.type==="CUSTOM")return;const _=this.skins.findIndex(I=>I.name===A?.metadata?.name);_===-1||this.skins[_].type==="CUSTOM"||await this.loadSkin(_)})}addSkinChangeListener(A){return this.callbacks.add(A),A}removeSkinChangeListener(A){this.callbacks.delete(A)}emitSkinChange(){for(const A of this.callbacks)A(this.getCurrentSkin())}async loadSkins(){await this.indexed.init(),await this.loadDefaultSkins();const A=await this.indexed.getAll();this.skins.push(...A),await this.loadDefaultSkin(),await Promise.all([this.refreshSkinList(),this.loadSkin(inject("config/skinning")?.skinningIdx??0)]),inject("config/skinning")?.onChange("skin",async _=>{await this.loadSkin(_)}),inject("config/skinning")?.onChange("disableBeatmapSkin",async()=>{this.emitSkinChange()})}getCurrentSkin(){return this.currentSkin}async loadDefaultSkin(){const A=this.skins.find(_=>_.type==="DEFAULT"&&_.name==="Default");this.defaultSkin=new Skin(A?.resources),await this.defaultSkin.init()}async loadSkin(A){const _=this.skins[A];if(!_){inject("config/skinning").skinningIdx=0;return}_.type==="DEFAULT"&&_.name==="Default"?this.currentSkin=this.defaultSkin:(this.currentSkin=new Skin(_?.resources,_),await this.currentSkin.init());const I=document.querySelector("#currentSkin");I&&(I.innerHTML=_.name),this.emitSkinChange()}async addSkin(A){const _=new Skin(A);await _.init();const I={type:"CUSTOM",name:_.config.General.Name,resources:A};await this.indexed.add(I,`${_.config.General.Name}-${Date.now()}`),_.metadata=I,this.currentSkin=_;const B=document.querySelector("#currentSkin");B&&(B.innerHTML=_.config.General.Name),await this.refreshSkinList(),this.emitSkinChange()}async removeSkin(A){await this.indexed.remove(A),await this.refreshSkinList(),await this.loadSkin(0)}async refreshSkinList(){const[A,_]=await Promise.all([this.indexed.getAll(),this.indexed.getAllKeys()]);this.skins=[...A];const I=document.querySelector("#skinsContainer");I&&(I.innerHTML="");for(let B=0;B<this.skins.length;B++){const T=this.skins[B],R=document.createElement("div");R.className="flex gap-2.5 items-center";const P=document.createElement("button");P.className="flex w-full items-center gap-2.5 p-2.5 hover:bg-white/10 cursor-pointer transition-colors rounded-[10px] text-white",P.innerHTML=T.name,P.addEventListener("click",()=>{inject("config/skinning").skinningIdx=B,document.querySelector("#skinsContainer")?.classList.add("showOut"),document.querySelector("#skinsContainer")?.classList.remove("showIn")});const D=document.createElement("button");D.innerHTML='<i class="ri-delete-bin-6-fill"></i>',D.className="h-full hover:bg-white/10 p-2.5 flex items-center justify-center rounded-[10px] cursor-pointer transition-colors text-white",D.style.aspectRatio="1 / 1",D.addEventListener("click",()=>{this.removeSkin(_[B]),document.querySelector("#skinsContainer")?.classList.add("showOut"),document.querySelector("#skinsContainer")?.classList.remove("showIn")}),R?.append(P),T.type==="CUSTOM"&&R?.append(D),I?.append(R)}}async loadDefaultSkins(){const A=await this.indexed.getAllKeys();A.includes("default")||await this.indexed.add({type:"DEFAULT",name:"Default",resources:await getDefaultLegacy()},"default"),A.includes("yugen")||await this.indexed.add({type:"DEFAULT",name:"YUGEN",resources:await getYugen()},"yugen"),A.includes("argon")||await this.indexed.add({type:"ARGON",name:"Argon",resources:await getArgon()},"argon")}}class Loading{_ele;_eleText;constructor(){this._ele=document.querySelector("#loading"),this._eleText=document.querySelector("#loadingText")}_state="ON";on(){this._state!=="ON"&&(this._state="ON",this._ele.style.display="flex")}off(){this._state!=="OFF"&&(this._state="OFF",this._ele.style.display="none")}setText(A){this._eleText.innerText=A}}class Fullscreen{container=new LayoutContainer({label:"play",layout:{aspectRatio:1,backgroundColor:inject("config/color")?.color.crust,height:"100%",flexShrink:0,alignItems:"center",justifyContent:"center"}});sprite=new Sprite$1;constructor(){(async()=>{const A=await Assets.load("./assets/maximize.png");this.sprite.texture=A,this.sprite.width=20,this.sprite.height=20,this.sprite.layout={width:20,height:20},this.sprite.tint=inject("config/color")?.color.text??16777215,this.container.addChild(this.sprite)})(),inject("config/color")?.onChange("color",({crust:A,text:_})=>{this.container.layout={backgroundColor:A},this.sprite.tint=_}),this.container.cursor="pointer",this.container.addEventListener("pointertap",()=>{const A=inject("config/fullscreen");A&&(A.fullscreen=!A.fullscreen)}),this.container.addEventListener("pointerenter",()=>{this.container.layout={backgroundColor:inject("config/color")?.color.surface2??16777215}}),this.container.addEventListener("pointerleave",()=>{this.container.layout={backgroundColor:inject("config/color")?.color.crust??16777215}})}}let Metadata$1=class{container=new LayoutContainer({label:"metadata",layout:{aspectRatio:1,height:"100%",backgroundColor:inject("config/color")?.color.mantle,flexShrink:0,alignItems:"center",justifyContent:"center"}});sprite=new Sprite$1;constructor(){(async()=>{const A=await Assets.load("./assets/metadata.png");this.sprite.texture=A,this.sprite.width=20,this.sprite.height=20,this.sprite.layout={width:20,height:20},this.sprite.tint=inject("config/color")?.color.text??16777215,this.container.addChild(this.sprite)})(),inject("config/color")?.onChange("color",({mantle:A,text:_})=>{this.container.layout={backgroundColor:A},this.sprite.tint=_}),this.container.cursor="pointer",this.container.addEventListener("pointertap",()=>{inject("game")?.state.toggleSidebar()}),this.container.addEventListener("pointerenter",()=>{this.container.layout={backgroundColor:inject("config/color")?.color.surface2??16777215}}),this.container.addEventListener("pointerleave",()=>{this.container.layout={backgroundColor:inject("config/color")?.color.mantle??16777215}})}};class Play{container=new LayoutContainer({label:"play",layout:{aspectRatio:1,backgroundColor:inject("config/color")?.color.crust,height:"100%",flexShrink:0,alignItems:"center",justifyContent:"center"}});sprite=new Sprite$1;constructor(){(async()=>{const A=await Assets.load("./assets/play.png");this.sprite.texture=A,this.sprite.width=20,this.sprite.height=20,this.sprite.layout={width:20,height:20},this.sprite.tint=inject("config/color")?.color.text??16777215,this.container.addChild(this.sprite)})(),inject("config/color")?.onChange("color",({crust:A,text:_})=>{this.container.layout={backgroundColor:A},this.sprite.tint=_}),this.container.cursor="pointer",this.container.addEventListener("pointertap",()=>inject("beatmapset")?.toggle()),this.container.addEventListener("pointerenter",()=>{this.container.layout={backgroundColor:inject("config/color")?.color.surface2??16777215}}),this.container.addEventListener("pointerleave",()=>{this.container.layout={backgroundColor:inject("config/color")?.color.crust??16777215}})}}class ProgressBar{container=new LayoutContainer({layout:{flex:1,height:"100%",backgroundColor:inject("config/color")?.color.crust,alignItems:"center",justifyContent:"center",paddingInline:30,overflow:"hidden"}});line=new LayoutContainer({layout:{height:4,width:"100%",backgroundColor:inject("config/color")?.color.surface0,borderRadius:4}});thumb=new Graphics$1().rect(-1,-30,2,60).moveTo(-6,-30).lineTo(-1,-26).lineTo(1,-26).lineTo(6,-30).lineTo(-6,-30).moveTo(-6,30).lineTo(-1,26).lineTo(1,26).lineTo(6,30).lineTo(-6,30).fill(inject("config/color")?.color.text);timeline;constructor(){this.timeline=new Graphics$1,this.timeline.interactive=!1,this.container.addChild(this.line,this.thumb,this.timeline),this.thumb.x=30,this.thumb.y=30,this.timeline.x=30,this.timeline.y=20,this.container.on("layout",()=>{this.thumb.y=(this.container.layout?.computedLayout.height??0)/2,this.timeline.scale.set((this.container.layout?.computedLayout.width??60)-60,1),this.timeline.y=(this.container.layout?.computedLayout.height??0)/2-10}),this.addEventHandler(),inject("config/color")?.onChange("color",({crust:A,surface0:_,text:I})=>{this.container.layout={backgroundColor:A},this.line.layout={backgroundColor:_},this.thumb.clear().rect(-1,-30,2,60).moveTo(-6,-30).lineTo(-1,-26).lineTo(1,-26).lineTo(6,-30).lineTo(-6,-30).moveTo(-6,30).lineTo(-1,26).lineTo(1,26).lineTo(6,30).lineTo(-6,30).fill(I)})}isSeeking=!1;addEventHandler(){const A=(_,I=!1)=>{const B=inject("beatmapset"),T=B?.context.consume("audio"),R=this.getPercentage(_);B&&(B._currentNextTick=R*(T?.duration??0)),I||(B?._currentTween?.stop(),B?.seek(R*(T?.duration??0))),I&&B?.smoothSeek(R*(T?.duration??0),100)};this.container.addEventListener("pointerdown",_=>{this.isSeeking=!0,A(_,!0)}),this.container.addEventListener("pointermove",_=>{this.isSeeking&&A(_,!1)}),this.container.addEventListener("pointerup",()=>{this.isSeeking=!1}),this.container.addEventListener("pointerupoutside",()=>{this.isSeeking=!1})}getPercentage(A){const{x:_}=A.getLocalPosition(this.container),I=this.container.layout?.computedLayout.width;return I?Math.min(1,Math.max(0,(_-30)/(I-60))):0}setPercentage(A){const _=(this.container.layout?.computedLayout.width??60)-60;_&&(this.thumb.x=Math.round(30+_*Math.min(1,Math.max(0,A))))}drawTimeline(A,_,I=[]){this.timeline.clear();for(const{start:B,end:T}of _)this.timeline.rect(B,8,T-B,4).fill({color:16767352,alpha:.7});for(const{start:B,end:T}of I)this.timeline.rect(B,8,T-B,4).fill({color:16777215,alpha:.3});for(const B of A){if(!B)continue;const{position:T,color:R}=B;this.timeline.moveTo(T,0).lineTo(T,-12).stroke({color:R,alpha:.7,pixelLine:!0})}this.container.addChild(this.line,this.timeline,this.thumb)}}class Timestamp{container=new LayoutContainer({label:"timestamp",layout:{width:150,height:"100%",backgroundColor:inject("config/color")?.color.base,flexShrink:0,flexDirection:"column",alignItems:"center",justifyContent:"center",gap:2}});digitsContainer=new LayoutContainer;digits=[];timingContainer=new LayoutContainer({layout:{gap:5,alignItems:"baseline"}});bpm=new BitmapText$1({text:"0BPM",style:{fontFamily:"Rubik",fontSize:12,fontWeight:"500",fill:inject("config/color")?.color.text,align:"center"},layout:{objectFit:"none",objectPosition:"center"}});sliderVelocity=new BitmapText$1({text:"x0.00",style:{fontFamily:"Rubik",fontSize:10,fontWeight:"400",fill:inject("config/color")?.color.text,align:"center"},layout:{objectFit:"none",objectPosition:"center"}});constructor(){this.digits.push(this.createDigit("0"),this.createDigit("0"),this.createDigit(":",4),this.createDigit("0"),this.createDigit("0"),this.createDigit(":",4),this.createDigit("0"),this.createDigit("0"),this.createDigit("0")),this.digitsContainer.addChild(...this.digits),this.timingContainer.addChild(this.bpm,this.sliderVelocity),this.container.addChild(this.digitsContainer,this.timingContainer),inject("config/color")?.onChange("color",({base:A,text:_})=>{this.container.layout={backgroundColor:A},this.bpm.style.fill=_,this.sliderVelocity.style.fill=_;for(const I of this.digits)I.style.fill=_}),inject("responsiveHandler")?.on("layout",A=>{switch(A){case"landscape":{this.container.layout={width:150,height:"100%"};break}case"portrait":{this.container.layout={width:"100%",height:60};break}}})}createDigit(A,_=9){return new BitmapText$1({text:A,style:{fontFamily:"Rubik",fontSize:15,fontWeight:"400",fill:inject("config/color")?.color.text,align:"center"},layout:{width:_,objectFit:"none",objectPosition:"center"}})}updateDigit(A){const _=Math.floor(A/6e4)%100,I=Math.floor(A%6e4/1e3)%60,B=Math.floor(A%1e3);this.digits[0].text=Math.floor(_/10),this.digits[1].text=_%10,this.digits[3].text=Math.floor(I/10),this.digits[4].text=I%10,this.digits[6].text=Math.floor(B/100),this.digits[7].text=Math.floor(B%100/10),this.digits[8].text=B%10}updateBPM(A){this.bpm.text=`${A.toFixed(0)}BPM`}updateSliderVelocity(A){this.sliderVelocity.text=`x${A.toFixed(2)}`}}class Controls{container=new ZContainer({label:"controls",layout:{width:"100%",height:60,flexGrow:0,backgroundColor:inject("config/color")?.color.crust,flexDirection:"row",borderRadius:20,overflow:"hidden"}});open=!1;constructor(){const A=provide("ui/main/controls/timestamp",new Timestamp),_=provide("ui/main/controls/metadata",new Metadata$1),I=provide("ui/main/controls/play",new Play),B=provide("ui/main/controls/progress",new ProgressBar),T=provide("ui/main/controls/fullscreen",new Fullscreen),R=provide("ui/main/controls/rest",new LayoutContainer({layout:{flex:1,height:"100%"}}));R.addChild(_.container,I.container,B.container,T.container),this.container.addChild(A.container,R),this.container.addEventListener("pointertap",P=>{P.stopPropagation()}),inject("config/color")?.onChange("color",({crust:P})=>{this.container.layout={backgroundColor:P}}),inject("config/fullscreen")?.onChange("fullscreen",P=>{const D=inject("responsiveHandler")?.direction;this.container.layout={position:P&&D==="landscape"?"absolute":"relative",borderRadius:P||D==="portrait"?0:20,bottom:P?0:void 0,height:P&&D==="landscape"?0:D==="portrait"?"auto":60},this.container.visible=!P,this.open=!P,this.container.alpha=D==="portrait"&&P?0:1}),inject("responsiveHandler")?.on("layout",P=>{const D=inject("config/fullscreen")?.fullscreen;switch(P){case"landscape":{this.container.layout={borderRadius:D?0:20,flexDirection:"row",height:60},R.layout={flex:1,height:"100%"},this.container.layout={position:D?"absolute":"relative"},this.container.visible=!D,this.open=!D,this.container.alpha=1;break}case"portrait":{this.container.layout={borderRadius:0,flexDirection:"column",height:"auto"},R.layout={flex:void 0,height:60},this.container.layout={position:"relative"},this.container.visible=!D,this.open=!D,this.container.alpha=D?0:1;break}}})}}class Background{blurFilter=new BlurFilter({strength:(inject("config/background")?.backgroundBlur??0)/100*50,quality:4});container=new Container({label:"background",layout:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},eventMode:"none",interactive:!1,interactiveChildren:!1});sprite=new Sprite$1({layout:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectPosition:"center",objectFit:"cover"},filters:[this.blurFilter]});video=new Sprite$1({layout:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectPosition:"center",objectFit:"cover"}});storyboardContainer=new Container;constructor(){this.container.addChild(this.sprite,this.video,this.storyboardContainer),this.container.on("layout",A=>{const{width:_,height:I}=A.computedLayout,R=inject("config/fullscreen")?.fullscreen?0:80,P=Math.min(_/640,(I-R)/480),D=640*P,F=480*P;this.storyboardContainer.scale.set(P),this.storyboardContainer.x=(_-D)/2,this.storyboardContainer.y=R+(I-R-F)/2}),inject("config/background")?.onChange("video",A=>{this.video.visible=A}),inject("config/background")?.onChange("backgroundBlur",A=>{this.blurFilter.strength=A/100*50})}updateTexture(A){this.sprite.texture=A,this.container.removeChild(this.sprite),this.container.addChild(this.sprite,this.video,this.storyboardContainer)}init=!1;timer;lastFrame;updateFrame(A){if(!A){this.lastFrame?.close(),this.video=new Sprite$1({layout:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectPosition:"center",objectFit:"cover"}}),this.container.removeChild(this.video),this.container.addChild(this.sprite,this.video,this.storyboardContainer);return}if(!this.init){this.video.texture.destroy(),this.video.texture=Texture.from(A),this.container.removeChild(this.video),this.container.addChild(this.sprite,this.video,this.storyboardContainer),this.init=!0,this.lastFrame?.close(),this.lastFrame=A;return}const _=this.video.texture,I=Texture.from(A);this.video.texture=I,_.source.destroy(),_.baseTexture.destroy(),_.destroy(),this.lastFrame?.close(),this.lastFrame=A}injectStoryboardContainer(A){this.storyboardContainer.removeChildren(),this.storyboardContainer.addChild(A)}ejectStoryboardContainer(){this.storyboardContainer.removeChildren()}}class FPS{container=new LayoutContainer({layout:{position:"absolute",bottom:10,right:10,padding:8,width:70,backgroundColor:[0,0,0,.7],borderRadius:10,display:"flex",flexDirection:"column",alignItems:"flex-end"}});constructor(){const A=provide("ui/main/viewer/gameplays/fps",new BitmapText$1({text:"0 fps",style:{fontFamily:"Rubik",fontWeight:"400",fill:16777215,fontSize:12,align:"right"},layout:{objectFit:"none",objectPosition:"center right"}})),_=provide("ui/main/viewer/gameplays/frametime",new BitmapText$1({text:"0 ms",style:{fontFamily:"Rubik",fontWeight:"400",fill:16777215,fontSize:12,align:"right"},layout:{objectFit:"none",objectPosition:"center right"}}));this.container.addChild(A,_)}}class Gameplays{container=new Container({label:"gameplays",layout:{width:"100%",flex:1},interactive:!0});gameplays=new Set;addGameplay(A,_){if(_===void 0)this.gameplays.add(A);else{const I=[...this.gameplays],B=[...I.slice(0,_),A,...I.slice(_)];this.gameplays=new Set(B)}this.container.addChildAt(A.container,0),this.reLayoutChildren(A)}removeGameplay(A){this.gameplays.delete(A),this.container.removeChild(A.container),this.reLayoutChildren()}switchGameplay(A,_){const I=[...this.gameplays],B=I.findIndex(R=>R===A),T=I.findIndex(R=>R===_);B===-1||T===-1||(I[B]=_,I[T]=A,this.gameplays=new Set(I),this.reLayoutChildren())}w=0;h=0;constructor(){const A=new FPS;this.container.addChild(A.container),this.container.on("layout",_=>{const I=_.computedLayout.width,B=_.computedLayout.height;(I!==this.w||B!==this.h)&&(this.w=I,this.h=B,this.reLayoutChildren())}),inject("responsiveHandler")?.on("layout",_=>{switch(_){case"landscape":{this.container.layout={flex:1,aspectRatio:void 0};break}case"portrait":{this.container.layout={flex:void 0,aspectRatio:4/3};break}}}),inject("config/experimental")?.onChange("overlapGameplays",()=>this.reLayoutChildren())}tweenMap=new Map;reLayoutChildren(A){const _=inject("config/experimental")?.overlapGameplays,I=[...this.gameplays],B=Math.ceil(Math.sqrt(this.gameplays.size)),T=Math.ceil(I.length/B),R=I.length%B===0?0:B-I.length%B,P=Math.ceil(this.gameplays.size/B),D=_?100:100/B,F=_?100:100/P;for(let L=0;L<I.length;L++){const U=I[L],V=_?0:L%B,K=_?0:Math.floor(L/B),J=this.tweenMap.get(U);J?.stop(),J&&tweenGroup.remove(J);const ee={top:U.container.layout?.yoga.getPosition(1).value,left:U.container.layout?.yoga.getPosition(0).value,width:U.container.layout?.yoga.getWidth().value,height:U.container.layout?.yoga.getHeight().value,paddingTop:U.container.layout?.yoga.getPadding(1).value,paddingLeft:U.container.layout?.yoga.getPadding(0).value,paddingBottom:U.container.layout?.yoga.getPadding(3).value,paddingRight:U.container.layout?.yoga.getPadding(2).value,scale:0,borderRadius:U.background.layout?.style.borderRadius??20},ie={top:_?0:Math.floor(L/B)*F,left:_?0:L%B*D+(K===T-1?D*R/2:0),width:D,height:F,paddingTop:D!==100?K===0?10:5:0,paddingBottom:D!==100?K===Math.floor((I.length-1)/B)?10:5:0,paddingLeft:D!==100?V===0?10:5:0,paddingRight:D!==100?V===B-1||L===I.length-1?10:5:0,scale:1,borderRadius:D!==100?20:0},ne=new Tween({value:ee}).easing(defaultEasing).to({value:ie},500).onUpdate(({value:{top:ce,left:fe,width:de,height:pe,paddingTop:ve,paddingBottom:ye,paddingLeft:_e,paddingRight:be,scale:Te,borderRadius:ue}})=>{U.container.layout={top:U===A?`${ie.top}%`:`${ce??0}%`,left:U===A?`${ie.left}%`:`${fe??0}%`,width:U===A?`${ie.width}%`:`${de??0}%`,height:U===A?`${ie.height}%`:`${pe??0}%`,paddingTop:ve,paddingLeft:_e,paddingBottom:ye,paddingRight:be},U===A&&(U.container.scale=.5+.5*Te,U.container.alpha=Te),U.background.layout={borderRadius:ue}}).onComplete(()=>{this.tweenMap.delete(U),tweenGroup.remove(ne)}).onStop(()=>{this.tweenMap.delete(U),tweenGroup.remove(ne)}).start();if(tweenGroup.add(ne),U.background.visible=!_||L===I.length-1,D!==100){U.showDiffName(L!==0&&!_);const ce=Math.min(1,1/B*1.5);U.statsContainer.scale.set(ce)}else U.hideDiffName(),U.statsContainer.scale.set(1)}}}let Button$1=class{constructor(A,_){this.onClick=_,(async()=>{const I=await Assets.load(A);this.sprite.texture=I,this.sprite.width=20,this.sprite.height=20,this.sprite.layout={width:20,height:20},this.sprite.tint=inject("config/color")?.color.text??16777215,this.container.addChild(this.sprite)})(),inject("config/color")?.onChange("color",({base:I,text:B})=>{this.container.layout={backgroundColor:I},this.sprite.tint=B}),this.container.cursor="pointer",this.container.addEventListener("pointertap",I=>{this.onClick?.(I)}),this.container.addEventListener("pointerenter",()=>{this.container.layout={backgroundColor:inject("config/color")?.color.surface2??16777215}}),this.container.addEventListener("pointerleave",()=>{this.container.layout={backgroundColor:inject("config/color")?.color.base??16777215}})}container=new LayoutContainer({label:"play",layout:{aspectRatio:1,backgroundColor:inject("config/color")?.color.base,height:40,width:40,flexShrink:0,alignItems:"center",justifyContent:"center"}});sprite=new Sprite$1};class Zoomer{container=new ZContainer({label:"zoomer",layout:{height:80,width:40,flexDirection:"column"}});constructor(){const A=new Button$1("./assets/plus.png",()=>{const I=inject("config/timeline");I&&(I.scale=Math.min(1.5,I.scale+.1))}),_=new Button$1("./assets/minus.png",()=>{const I=inject("config/timeline");I&&(I.scale=Math.min(1.5,I.scale-.1))});this.container.addChild(A.container,_.container),inject("config/fullscreen")?.onChange("fullscreen",I=>{I&&(this.container.renderable=!1),I||(this.container.renderable=!0)})}}const defaultStyle={fontFamily:"Rubik",fill:12239582,wordWrap:!0,align:"left"},defaultLayout={objectFit:"none",objectPosition:"top left",width:"100%"};class Metadata{container;artist=new Text$1({text:"",style:{...defaultStyle,fontSize:16,fontWeight:"400",fill:inject("config/color")?.color.text},layout:defaultLayout});artistUnicode=new Text$1({text:"",style:{...defaultStyle,fontSize:16,fontWeight:"400",fill:inject("config/color")?.color.text},layout:defaultLayout});title=new Text$1({text:"",style:{...defaultStyle,fontSize:16,fontWeight:"400",fill:inject("config/color")?.color.text},layout:defaultLayout});titleUnicode=new Text$1({text:"",style:{...defaultStyle,fontSize:16,fontWeight:"400",fill:inject("config/color")?.color.text},layout:defaultLayout});version=new Text$1({text:"",style:{...defaultStyle,fontSize:16,fontWeight:"400",fill:inject("config/color")?.color.text},layout:defaultLayout});source=new Text$1({text:"",style:{...defaultStyle,fontSize:16,fontWeight:"400",fill:inject("config/color")?.color.text},layout:defaultLayout});tags=new Text$1({text:"",style:{...defaultStyle,fontSize:16,fontWeight:"400",fill:inject("config/color")?.color.text},layout:defaultLayout});constructor(){this.container=new LayoutContainer({label:"metadata",layout:{width:360,flex:1,flexDirection:"column",overflow:"scroll",justifyContent:"flex-start",alignItems:"flex-start",alignContent:"flex-start",gap:15,boxSizing:"border-box",backgroundColor:inject("config/color")?.color.mantle,borderRadius:0,borderWidth:1,borderColor:[0,0,0,0]}}),inject("config/color")?.onChange("color",({mantle:D})=>{this.container.layout={backgroundColor:D}});const A=this.createContainer("artist",this.artist),_=this.createContainer("artist unicode",this.artistUnicode),I=this.createContainer("title",this.title),B=this.createContainer("title unicode",this.titleUnicode),T=this.createContainer("version",this.version),R=this.createContainer("source",this.source),P=this.createContainer("tags",this.tags);this.container.addChild(A,_,I,B,T,R,P),inject("responsiveHandler")?.on("layout",D=>{switch(D){case"landscape":{this.container.layout={width:360};break}case"portrait":{this.container.layout={width:"100%"};break}}})}createContainer(A,_){const I=new Text$1({text:A,style:{...defaultStyle,fontSize:14,fontWeight:"300",fill:inject("config/color")?.color.subtext1},layout:{objectPosition:"top left",objectFit:"none",width:"100%"}}),B=new LayoutContainer({label:A,layout:{width:"100%",flexDirection:"column",flexShrink:0,gap:5}});return B.addChild(I,_),inject("config/color")?.onChange("color",({subtext1:T,text:R})=>{I.style.fill=T,_.style.fill=R}),B}updateMetadata(A){this.artist.text=A.artist,this.artistUnicode.text=A.artistUnicode.replaceAll("",", "),this.title.text=A.title,this.titleUnicode.text=A.titleUnicode,this.version.text=A.version,this.source.text=A.source,this.tags.text=A.tags.join(", ");const _=document.querySelector("#mapper"),I=document.querySelector("#title");_&&(_.innerHTML=`by <span class="font-medium">${A.creator}</span>`),I&&(I.textContent=`${A.artist} - ${A.title}`)}}class Button{constructor(A,_){this.onClick=_,(async()=>{const I=await Assets.load(A);this.sprite.texture=I,this.sprite.width=20,this.sprite.height=20,this.sprite.layout={width:20,height:20},this.sprite.tint=inject("config/color")?.color.text??16777215,this.container.addChild(this.sprite)})(),inject("config/color")?.onChange("color",({mantle:I,text:B})=>{this.container.layout={backgroundColor:I},this.sprite.tint=B}),this.container.cursor="pointer",this.container.addEventListener("pointertap",I=>{this.onClick?.(I)}),this.container.addEventListener("pointerenter",()=>{this.container.layout={backgroundColor:inject("config/color")?.color.surface2??16777215}}),this.container.addEventListener("pointerleave",()=>{this.container.layout={backgroundColor:inject("config/color")?.color.mantle??16777215}})}container=new LayoutContainer({label:"play",layout:{aspectRatio:1,backgroundColor:inject("config/color")?.color.mantle,height:20,width:20,flexShrink:0,alignItems:"center",justifyContent:"center",borderRadius:10}});sprite=new Sprite$1}class Beatsnap{container;constructor(){this.container=new LayoutContainer({layout:{width:160,height:80,flexDirection:"column",alignItems:"center",justifyContent:"center",paddingInline:20,paddingBlock:5,gap:5,backgroundColor:inject("config/color")?.color.mantle}});const A=new Text$1({text:"Beat Snap Divisor",style:{...defaultStyle,fontSize:14,fontWeight:"500",align:"center",fill:inject("config/color")?.color.text},layout:{objectFit:"none",width:"100%"}}),_=new Text$1({text:`1/${inject("config/timeline")?.divisor??4}`,style:{...defaultStyle,wordWrap:!1,fontSize:14,fill:inject("config/color")?.color.text},layout:{objectFit:"none"}}),I=new Button("./assets/left.png",()=>{const R=inject("config/timeline");R&&(R.divisor=Math.max(1,R.divisor===16?12:R.divisor===12?9:R.divisor-1))}),B=new Button("./assets/right.png",()=>{const R=inject("config/timeline");R&&(R.divisor=Math.min(16,R.divisor===9?12:R.divisor===12?16:R.divisor+1))}),T=new Container({layout:{width:"100%",justifyContent:"space-between",alignItems:"center"}});this.container.addChild(A,T),T.addChild(I.container,_,B.container),inject("config/fullscreen")?.onChange("fullscreen",R=>{R&&(this.container.renderable=!1),R||(this.container.renderable=!0)}),inject("config/color")?.onChange("color",({mantle:R,text:P})=>{this.container.layout={backgroundColor:R},A.style.fill=P,_.style.fill=P}),inject("responsiveHandler")?.on("layout",R=>{if(R==="landscape"){A.visible=!0,this.container.layout={width:160},T.layout={flexDirection:"row",height:void 0},Assets.load("./assets/left.png").then(P=>{I.sprite.texture=P}),Assets.load("./assets/right.png").then(P=>{B.sprite.texture=P});return}if(R==="portrait"){A.visible=!1,this.container.layout={width:40},T.layout={flexDirection:"column",height:"100%"},Assets.load("./assets/up.png").then(P=>{I.sprite.texture=P}),Assets.load("./assets/down.png").then(P=>{B.sprite.texture=P});return}}),inject("config/timeline")?.onChange("divisor",R=>{_.text=`1/${R}`})}}class Viewer{container=new LayoutContainer({label:"viewer",layout:{width:"100%",flex:1,flexDirection:"column",backgroundColor:[0,0,0,.2],borderRadius:20,overflow:"hidden"},interactive:!0});constructor(){const A=provide("ui/main/viewer/timeline",new Timeline),_=provide("ui/main/viewer/zoomer",new Zoomer),I=provide("ui/main/viewer/beatsnap",new Beatsnap),B=provide("ui/main/viewer/gameplays",new Gameplays),T=provide("ui/main/viewer/background",new Background),R=new LayoutContainer({layout:{width:"100%",height:80,backgroundColor:{r:0,g:0,b:0,a:.8}}});R.addChild(A.container,_.container,I.container),this.container.addChild(T.container,R,B.container),inject("config/fullscreen")?.onChange("fullscreen",P=>{const D=inject("responsiveHandler")?.direction;this.container.layout={borderRadius:P||D==="portrait"?0:20},R.layout={height:P?D==="portrait"?80:0:80}}),inject("responsiveHandler")?.on("layout",P=>{const D=inject("config/fullscreen")?.fullscreen;switch(P){case"landscape":{this.container.layout={borderRadius:D?0:20,flex:1,aspectRatio:void 0};break}case"portrait":{this.container.layout={flex:void 0,borderRadius:0};break}}R.layout={height:D?P==="portrait"?80:0:80}})}}class Main{container=new LayoutContainer({label:"main",layout:{position:"relative",flex:1,height:"100%",boxSizing:"border-box",flexDirection:"column",gap:10,overflow:"hidden"}});constructor(){const A=provide("ui/main/controls",new Controls),_=provide("ui/main/viewer",new Viewer);this.container.addChild(_.container,A.container),inject("responsiveHandler")?.on("layout",I=>{const B=inject("config/fullscreen")?.fullscreen;switch(I){case"landscape":{this.container.layout={gap:B?0:10};break}case"portrait":{this.container.layout={gap:0};break}}}),inject("config/fullscreen")?.onChange("fullscreen",I=>{const B=inject("responsiveHandler")?.direction;this.container.layout={gap:I||B==="portrait"?0:10}}),this.container.addEventListener("wheel",I=>{if(!I.altKey){if(I.ctrlKey){inject("config/timeline")?.handleWheel(I);return}inject("beatmapset")?.handleWheel(I)}},{capture:!0,passive:!1}),this.container.addEventListener("pointertap",()=>{inject("config/fullscreen")?.fullscreen&&inject("responsiveHandler")?.direction!=="landscape"&&(A.open=!A.open,A.open&&(A.container.visible=!0,A.container.triggerAnimation("alpha",A.container.alpha??0,1,I=>{A.container.alpha=I},200,Easings.InOut)),A.open||A.container.triggerAnimation("alpha",A.container.alpha??1,0,I=>{A.container.alpha=I},200,Easings.InOut,()=>{A.container.visible=!1}))}),this.container.addEventListener("pointermove",I=>{if(!inject("config/fullscreen")?.fullscreen||inject("responsiveHandler")?.direction==="portrait")return;const B=this.container.toLocal(I.global),R=(this.container.layout?.computedLayout.height??0)-B.y<60;R!==A.open&&(A.open=R,A.open&&(A.container.visible=!0,A.container.triggerAnimation("height",A.container.layout?.computedLayout.height??0,60,P=>{A.container.layout={height:P}},200,Easings.InOut)),A.open||A.container.triggerAnimation("height",A.container.layout?.computedLayout.height??60,0,P=>{A.container.layout={height:P}},200,Easings.InOut,()=>{A.container.visible=!1}))})}}class DifficultyGraph{container;graph=new Graphics$1;context=new GraphicsContext;_data=[];get data(){return this._data}set data(A){this._data=A,this.drawGraph()}constructor(){this.container=new LayoutContainer({layout:{width:"100%",aspectRatio:2,backgroundColor:inject("config/color")?.color.crust,borderRadius:10,overflow:"hidden",flexShrink:0}}),this.container.addChild(this.graph),this.container?.on("layout",A=>{const{width:_,height:I}=A.computedLayout;this.drawGraph(_,I)}),this.graph.tint=inject("config/color")?.color.subtext0??16777215,inject("config/color")?.onChange("color",({crust:A,subtext0:_})=>{this.container.layout={backgroundColor:A},this.graph.tint=_})}drawGraph(A=360,_=180){const I=new GraphicsContext,B=Math.max(...this.data.map(({strain:R})=>R)),T=this.data.at(-1)?.time??1;for(let R=0;R<6;R++)R===0||R===5||(I.moveTo(R*(A/5),_),I.lineTo(R*(A/5),0).stroke({color:16777215,alpha:.2}));for(let R=0;R<4;R++)R===0||R===3||(I.moveTo(0,R*(_/3)),I.lineTo(A,R*(_/3)).stroke({color:16777215,alpha:.2}));I.moveTo(0,_);for(const{time:R,strain:P}of this.data)I.lineTo(R/T*A,-(P/B)*_+_);I.moveTo(0,_),I.fill({color:16777215,alpha:.2}),I.stroke({color:16777215,width:1}),this.graph.context=I,this.context.destroy(),this.context=I}}class Spectrogram{container=new Container;sprite=new Sprite$1;mask=new Graphics$1;spinner=new Graphics$1({layout:!0});scale;background=new Graphics$1;overlay=new Graphics$1;constructor(){this.container.layout={width:"100%",aspectRatio:1,flexShrink:0},this.background.roundRect(0,0,360,360,10).fill({color:inject("config/color")?.color.surface0}),this.spinner.layout=!1,this.spinner.arc(0,0,30,0,5*Math.PI/6).stroke({color:"white",width:10,cap:"round"}),this.sprite.width=360,this.sprite.height=360,this.scale=new LayoutContainer({layout:{flexDirection:"column",justifyContent:"space-between",paddingLeft:10,paddingTop:10,paddingBottom:10},x:0,y:0});const A=this.generateScale();this.scale.addChild(...A);const _=new FillGradient({start:{x:0,y:0},end:{x:.2,y:0},colorStops:[{offset:0,color:"rgba(0, 0, 0, 0.5)"},{offset:1,color:"rgba(0, 0, 0, 0)"}],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"});this.overlay.rect(0,0,360,360).fill(_),this.mask.roundRect(0,0,360,360,10).fill({color:0,alpha:.1}),this.container.addChild(this.background,this.spinner,this.sprite,this.overlay,this.scale,this.mask),this.container.mask=this.mask,this.container.on("layout",I=>{const{width:B}=I.computedLayout;this.mask.clear().roundRect(0,0,B,B,10).fill({color:0,alpha:.01}),this.background.clear().roundRect(0,0,B,B,10).fill({color:inject("config/color")?.color.surface0}),this.sprite.width=B,this.sprite.height=B,this.spinner.x=B/2,this.spinner.y=B/2,this.overlay.clear().rect(0,0,B,B).fill(_),this.scale.layout={height:B}}),inject("config/color")?.onChange("color",({surface0:I})=>{this.background.clear().roundRect(0,0,this.container.layout?.computedLayout.width??360,this.container.layout?.computedLayout.width??360,10).fill({color:I})}),this.spin=!0}setTexture(A){this.sprite.texture=A,this.spin=!1}unloadTexture(){this.sprite.texture=BLANK_TEXTURE,this.spin=!0}_lastTime=0;spinFn(A){this.spinner.angle+=.4*(A-this._lastTime),this._lastTime=A,this.spin&&requestAnimationFrame(_=>this.spinFn(_))}_spin=!1;get spin(){return this._spin}set spin(A){this._spin=A,A&&requestAnimationFrame(_=>this.spinFn(_))}generateScale(){return["22kHz","20kHz","","16kHz","","12kHz","","8kHz","","4kHz","","0kHz"].map(I=>new Text$1({text:I,style:{...defaultStyle,fontSize:12,fill:16777215},layout:!0}))}}class Modding{container;constructor(){this.container=new LayoutContainer({label:"modding",layout:{width:360,flexDirection:"column",gap:15,overflow:"scroll",borderWidth:1,borderColor:[0,0,0,0],flex:1}});const A=this.createEntry("spectrogram",provide("ui/sidepanel/modding/spectrogram",new Spectrogram).container),_=this.createEntry("difficulty graph",provide("ui/sidepanel/modding/difficulty",new DifficultyGraph).container);this.container.addChild(A,_),inject("responsiveHandler")?.on("layout",I=>{switch(I){case"landscape":{this.container.layout={width:360};break}case"portrait":{this.container.layout={width:"100%"};break}}})}createEntry(A,_){const I=new Container({layout:{flexDirection:"column",width:"100%",gap:10,flexShrink:0}}),B=new Text$1({text:A,style:{...defaultStyle,fontSize:14,fontWeight:"300",fill:inject("config/color")?.color.subtext1},layout:{objectPosition:"top left",objectFit:"none",width:"100%",flexShrink:0}});return inject("config/color")?.onChange("color",({subtext1:T})=>{B.style.fill=T}),I.addChild(B,_),I}}class Point{constructor(A){this.data=A,this.accent=A instanceof TimingPoint?15961e3:A instanceof DifficultyPoint?10937249:inject("config/color")?.color.text??13489908,this.color=new Graphics$1().roundRect(0,0,360,40,10).fill(16777215),this.color.tint=this.bg,this.container=new Container({width:360,height:40,alpha:.5}),inject("config/color")?.onChange("color",({mantle:_})=>{this._destroyed||(this.bg=_,this.accent=A instanceof TimingPoint?15961e3:A instanceof DifficultyPoint?10937249:inject("config/color")?.color.text??13489908,this.indicator.visible&&this.select(),this.indicator.visible||this.unselect())}),this.timestamp=new Text$1({text:millisecondsToMinutesString(A.startTime),style:{fontSize:14,fontFamily:"Rubik",fill:this.accent,align:"left"},layout:!1}),this.content1=new Text$1({text:A instanceof TimingPoint?`${Math.round(A.bpm)} BPM`:A instanceof DifficultyPoint?`x${A.sliderVelocity.toFixed(2)}`:`${A.sampleSet} : ${A.customIndex===0?"Default":`Custom ${A.customIndex}`}`,style:{fontSize:14,fontFamily:"Rubik",fill:this.accent,align:"left",fontWeight:"500"},layout:!1}),this.content1.x=80,this.content2=new Text$1({text:A instanceof TimingPoint?`Signature ${A.timeSignature}/4`:A instanceof DifficultyPoint?"":`Volume ${A.volume}%`,style:{fontSize:14,fontFamily:"Rubik",fill:this.accent,align:"left"},layout:!1}),this.indicator=new Graphics$1().moveTo(0,0).lineTo(0,10).lineTo(5,5).lineTo(0,0).fill(16777215),this.indicator.tint=this.accent,this.indicator.x=10,this.indicator.y=15,this.indicator.visible=!1,this.container.addChild(this.color,this.timestamp,this.content1,this.content2,this.indicator),this.container.visible=!1,this.container.interactiveChildren=!1,this.reWidth(360)}container;indicator;timestamp;content1;content2;color;accent;bg=inject("config/color")?.color.mantle??1579045;reWidth(A,_=40){this.color.clear().roundRect(0,0,A,40,10).fill(16777215),this.content2.x=A-this.content2.width-20,this.content2.y=(_-this.content2.height)/2,this.timestamp.x=20,this.timestamp.y=(_-this.timestamp.height)/2,this.content1.x=100,this.content1.y=(_-this.content1.height)/2}on(){this.container.visible!==!0&&(this.container.visible=!0,this.container.layout?.forceUpdate())}off(){this.container.visible!==!1&&(this.container.visible=!1)}select(){this.container.alpha=1,this.color.tint=this.accent,this.timestamp.style.fill=this.bg,this.content1.style.fill=this.bg,this.content2.style.fill=this.bg,this.indicator.tint=this.bg,this.indicator.visible=!0}unselect(){this.container.alpha=.5,this.color.tint=this.bg,this.timestamp.style.fill=this.accent,this.content1.style.fill=this.accent,this.content2.style.fill=this.accent,this.indicator.tint=this.accent,this.indicator.visible=!1}_destroyed=!1;destroy(){this.container.destroy(),this.color.destroy(),this.timestamp.destroy(),this.content1.destroy(),this.content2.destroy(),this.indicator.destroy(),this._destroyed=!0}}class Timing{container;_timingContainer;_scrollOffset=0;animationControler=new AnimationController;_cachedWidth=360;constructor(){this.container=new LayoutContainer({label:"timing",layout:{width:360,flex:1,overflow:"hidden",backgroundColor:inject("config/color")?.color.mantle,borderRadius:0},visible:!1}),this._timingContainer=new Container,this.container.addChild(this._timingContainer),this.container.on("layout",()=>{const A=this.currentIdx*45-(this.container.layout?.computedLayout.height??0)+40;if(this.scrollTo(Math.max(0,A)),this.container.layout?.computedLayout.width!==this._cachedWidth){this._cachedWidth=this.container.layout?.computedLayout.width;for(const _ of this.points)_.reWidth(this.container.layout?.computedLayout.width??360)}}),inject("config/color")?.onChange("color",({mantle:A})=>{this.container.layout={backgroundColor:A}}),inject("responsiveHandler")?.on("layout",A=>{switch(A){case"landscape":{this.container.layout={width:360};break}case"portrait":this.container.layout={width:"100%"}}}),inject("state")?.on("sidebar",A=>{A==="OPENED"&&(this.container.visible=!0),A==="CLOSED"&&(this.container.visible=!1)}),this.container.on("wheel",A=>{const _=A.deltaY;this.scrollTo(this._scrollOffset+_*1.5)}),this.container.on("pointerdown",A=>this.handleDragStart(A)),this.container.on("pointermove",A=>this.handleDragMove(A)),this.container.on("pointerup",()=>this.handleDragEnd()),this.container.on("pointerout",()=>this.handleDragEnd())}points=[];createTimingPointsSync(A){const _=[];let I=0;for(const B of A){const T=new Point(B);T.container.y=I++*45,_.push(T)}return _}async createTimingPointsAsync(A){return await Promise.all(A.map((_,I)=>new Promise(B=>{setTimeout(()=>{const T=new Point(_);T.container.y=I*45,B(T)},10)})))}async updateTimingPoints(A){if(this.points.length>0){for(const B of this.points)B.destroy();this._timingContainer.removeChildren()}this.points=[];const I=inject("config/experimental")?.asyncLoading?await this.createTimingPointsAsync(A):this.createTimingPointsSync(A);this._timingContainer.boundsArea=new Rectangle(0,0,360,I.length*45-5),this.points=I}currentIdx=0;scrollToTimingPoint(A){const _=this.points.findIndex(B=>B.data.startTime===A);this.points[this.currentIdx]?.unselect(),this.currentIdx=_,this.points[_]?.select();const I=_*45-(this.container.layout?.computedLayout.height??0)+40;I<this._scrollOffset&&Math.abs(I-this._scrollOffset)<(this.container.layout?.computedLayout.height??0)||this.scrollTo(Math.max(0,I))}previous=new Set;_scrollTo(A){this._scrollOffset=A,this._timingContainer.y=-A;const _=Math.floor(A/45),I=Math.ceil((A+(this.container?.layout?.computedLayout.height??0))/45),B=new Set;for(let R=_;R<=I;R++)B.add(R);const T=this.previous.difference(B);for(const R of T)this.points[R]&&(this.points[R].off(),this._timingContainer.removeChild(this.points[R].container));for(const R of B)this.points[R]&&(this.points[R].on(),this._timingContainer.addChild(this.points[R].container));this.previous=B}scrollTo(A,_=!1){const I=this.points.length*45-5-(this.container.layout?.computedLayout.height??0),B=Math.max(-200,Math.min(I+200,A));if(_){if(B<0){this._scrollTo(0);return}if(B>I){this._scrollTo(I);return}this._scrollTo(B);return}const T=this.animationControler.addAnimation("offset",this._scrollOffset,B,R=>{this._scrollTo(R),this.bounceBack()&&T.stop()},200,Easings.OutCubic,()=>{if(B<0){this.scrollTo(0);return}if(B>I){this.scrollTo(I);return}})}_currentLoop;_isDown=!1;_startPosition=0;_cacheOffset=0;_startTime=0;_currentVelocity=0;_currentTime=0;handleDragStart(A){this._isDown=!0,this._currentLoop&&cancelAnimationFrame(this._currentLoop),this._cacheOffset=this._scrollOffset,this._currentVelocity=0,this._startPosition=A.y,this._startTime=performance.now()}handleDragMove(A){if(!this._isDown)return;const _=A.y-this._startPosition;this._currentTime=performance.now(),this._currentVelocity=_/(this._currentTime-this._startTime);const I=0,B=this.points.length*45-5-(this.container.layout?.computedLayout.height??0);this._scrollTo(Math.max(I-200,Math.min(B+200,this._cacheOffset-_)))}handleDragEnd(){if(this._isDown){if(this._isDown=!1,Math.abs(this._currentVelocity)<1||performance.now()-this._currentTime>50){this.bounceBack(0);return}this._last=performance.now(),this._currentLoop=requestAnimationFrame(()=>this.handleVelocity())}}bounceBack(A=200){const I=this.points.length*45-5-(this.container.layout?.computedLayout.height??0);return this._scrollOffset<0-A?(this.scrollTo(0),!0):this._scrollOffset>I+A?(this.scrollTo(I),!0):!1}_last=0;handleVelocity(){if(this.bounceBack())return;const A=performance.now()-this._last;if(this._scrollTo(this._scrollOffset-A*this._currentVelocity),Math.abs(this._currentVelocity)<.01){this.bounceBack(0);return}this._currentVelocity*=.85,this._currentLoop=requestAnimationFrame(()=>this.handleVelocity())}}class SidePanel{tabs=[{title:"Metadata",content:provide("ui/sidepanel/metadata",new Metadata)},{title:"Timing",content:provide("ui/sidepanel/timing",new Timing)},{title:"Modding",content:provide("ui/sidepanel/modding",new Modding)}];header=new LayoutContainer({label:"header",layout:{width:"100%",alignItems:"center",justifyContent:"space-between"}});tabSwitcher=new LayoutContainer({label:"tab switcher",layout:{gap:5,flex:1}});container=new ZContainer({label:"side panel",layout:{width:0,height:"100%",backgroundColor:inject("config/color")?.color.mantle,borderRadius:20,flexDirection:"column",justifyContent:"flex-start",boxSizing:"border-box",overflow:"hidden",padding:20,paddingInline:0,gap:20,borderColor:[0,0,0,0]}});headers;constructor(){this.container.alphaFilter.alpha=0,this.headers=this.tabs.map(({title:I},B)=>{const T=new LayoutContainer({layout:{width:"intrinsic",paddingInline:50,height:40,alignItems:"center",flexShrink:0,borderRadius:10,backgroundColor:inject("config/color")?.color.base},cursor:"pointer"}),R=new Text$1({text:I,style:{fontFamily:"Rubik",fontSize:14,fill:inject("config/color")?.color.text,fontWeight:"400",align:"center"},layout:{objectFit:"none"}});return T.addChild(R),T.addEventListener("pointertap",()=>{this.switchTab(B)}),inject("config/color")?.onChange("color",({base:P,text:D})=>{T.layout={backgroundColor:P},R.style.fill=D}),T}),this.tabSwitcher.addChild(...this.headers);const A=new LayoutContainer({layout:{width:30,height:30,alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0)"}}),_=new Sprite$1({width:20,height:20,layout:{width:20,height:20}});(async()=>(_.texture=await Assets.load({src:"./assets/x.png",parser:"texture"}),_.tint=inject("config/color")?.color.text??16777215))(),inject("config/color")?.onChange("color",({text:I})=>{_.tint=I}),A.cursor="pointer",A.addEventListener("pointertap",()=>this.closeSidePanel()),A.addChild(_),this.header.addChild(this.tabSwitcher,A),this.container.addChild(this.header),this.index=0,this.switchTab(0),inject("config/color")?.onChange("color",({mantle:I,surface1:B,base:T})=>{this.container.layout={backgroundColor:I};for(let R=0;R<this.headers.length;R++)R===this.index?this.headers[R].layout={backgroundColor:B}:this.headers[R].layout={backgroundColor:T}}),inject("responsiveHandler")?.on("layout",I=>{switch(I){case"landscape":{this.container.layout={position:"relative",width:inject("game")?.state.sidebar==="CLOSED"?0:400,height:"100%",padding:20};break}case"portrait":{this.container.layout={position:"absolute",bottom:0,width:"100%",height:inject("game")?.state.sidebar==="CLOSED"?0:"70%",padding:inject("game")?.state.sidebar==="CLOSED"?1:20};break}}}),inject("state")?.on("sidebar",I=>this.handleState(I))}handleState(A){const _=inject("responsiveHandler")?.direction??"landscape",I=200;switch(A){case"OPENED":{_==="landscape"&&this.container.triggerAnimation("width",this.container.layout?.computedLayout.width??0,400,B=>{this.container.layout={width:B}},I),_==="portrait"&&(this.container.triggerAnimation("height",0,70,B=>{this.container.layout={height:`${B}%`}},I),this.container.triggerAnimation("paddingAll",0,20,B=>{this.container.layout={padding:B}},I)),this.container.triggerAnimation("padding",0,20,B=>{this.container.layout={paddingInline:B}},I),this.container.triggerAnimation("opacity",this.container.alphaFilter.alpha,1,B=>{this.container.alphaFilter.alpha=B},I);break}case"CLOSED":{_==="landscape"&&this.container.triggerAnimation("width",this.container.layout?.computedLayout.width??400,0,B=>{this.container.layout={width:B}},I),_==="portrait"&&(this.container.triggerAnimation("height",70,0,B=>{this.container.layout={height:`${B}%`}},I),this.container.triggerAnimation("paddingAll",20,0,B=>{this.container.layout={padding:B}},I)),this.container.triggerAnimation("padding",20,0,B=>{this.container.layout={paddingInline:B}},I),this.container.triggerAnimation("opacity",this.container.alphaFilter.alpha,0,B=>{this.container.alphaFilter.alpha=B},I);break}}}closeSidePanel(){inject("game")?.state.toggleSidebar("CLOSED")}index;switchTab(A){this.container.removeChild(this.tabs[this.index].content.container),this.headers[this.index].layout={backgroundColor:inject("config/color")?.color.base},this.index=A,this.container.addChild(this.tabs[this.index].content.container),this.headers[this.index].layout={backgroundColor:inject("config/color")?.color.surface1}}}const MAX_BITS$1=15,D_CODES=30,BL_CODES=19,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,HEAP_SIZE=2*L_CODES+1,END_BLOCK=256,MAX_BL_BITS=7,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,Buf_size=16,Z_DEFAULT_COMPRESSION=-1,Z_FILTERED=1,Z_HUFFMAN_ONLY=2,Z_DEFAULT_STRATEGY=0,Z_NO_FLUSH$1=0,Z_PARTIAL_FLUSH=1,Z_FULL_FLUSH=3,Z_FINISH$1=4,Z_OK$1=0,Z_STREAM_END$1=1,Z_NEED_DICT$1=2,Z_STREAM_ERROR$1=-2,Z_DATA_ERROR$1=-3,Z_BUF_ERROR$1=-5;function extractArray(E){return flatArray(E.map(([A,_])=>new Array(A).fill(_,0,A)))}function flatArray(E){return E.reduce((A,_)=>A.concat(Array.isArray(_)?flatArray(_):_),[])}const _dist_code=[0,1,2,3].concat(...extractArray([[2,4],[2,5],[4,6],[4,7],[8,8],[8,9],[16,10],[16,11],[32,12],[32,13],[64,14],[64,15],[2,0],[1,16],[1,17],[2,18],[2,19],[4,20],[4,21],[8,22],[8,23],[16,24],[16,25],[32,26],[32,27],[64,28],[64,29]]));function Tree(){const E=this;function A(B){const T=E.dyn_tree,R=E.stat_desc.static_tree,P=E.stat_desc.extra_bits,D=E.stat_desc.extra_base,F=E.stat_desc.max_length;let L,U,V,K,J,ee,ie=0;for(K=0;K<=MAX_BITS$1;K++)B.bl_count[K]=0;for(T[B.heap[B.heap_max]*2+1]=0,L=B.heap_max+1;L<HEAP_SIZE;L++)U=B.heap[L],K=T[T[U*2+1]*2+1]+1,K>F&&(K=F,ie++),T[U*2+1]=K,!(U>E.max_code)&&(B.bl_count[K]++,J=0,U>=D&&(J=P[U-D]),ee=T[U*2],B.opt_len+=ee*(K+J),R&&(B.static_len+=ee*(R[U*2+1]+J)));if(ie!==0){do{for(K=F-1;B.bl_count[K]===0;)K--;B.bl_count[K]--,B.bl_count[K+1]+=2,B.bl_count[F]--,ie-=2}while(ie>0);for(K=F;K!==0;K--)for(U=B.bl_count[K];U!==0;)V=B.heap[--L],!(V>E.max_code)&&(T[V*2+1]!=K&&(B.opt_len+=(K-T[V*2+1])*T[V*2],T[V*2+1]=K),U--)}}function _(B,T){let R=0;do R|=B&1,B>>>=1,R<<=1;while(--T>0);return R>>>1}function I(B,T,R){const P=[];let D=0,F,L,U;for(F=1;F<=MAX_BITS$1;F++)P[F]=D=D+R[F-1]<<1;for(L=0;L<=T;L++)U=B[L*2+1],U!==0&&(B[L*2]=_(P[U]++,U))}E.build_tree=function(B){const T=E.dyn_tree,R=E.stat_desc.static_tree,P=E.stat_desc.elems;let D,F,L=-1,U;for(B.heap_len=0,B.heap_max=HEAP_SIZE,D=0;D<P;D++)T[D*2]!==0?(B.heap[++B.heap_len]=L=D,B.depth[D]=0):T[D*2+1]=0;for(;B.heap_len<2;)U=B.heap[++B.heap_len]=L<2?++L:0,T[U*2]=1,B.depth[U]=0,B.opt_len--,R&&(B.static_len-=R[U*2+1]);for(E.max_code=L,D=Math.floor(B.heap_len/2);D>=1;D--)B.pqdownheap(T,D);U=P;do D=B.heap[1],B.heap[1]=B.heap[B.heap_len--],B.pqdownheap(T,1),F=B.heap[1],B.heap[--B.heap_max]=D,B.heap[--B.heap_max]=F,T[U*2]=T[D*2]+T[F*2],B.depth[U]=Math.max(B.depth[D],B.depth[F])+1,T[D*2+1]=T[F*2+1]=U,B.heap[1]=U++,B.pqdownheap(T,1);while(B.heap_len>=2);B.heap[--B.heap_max]=B.heap[1],A(B),I(T,E.max_code,B.bl_count)}}Tree._length_code=[0,1,2,3,4,5,6,7].concat(...extractArray([[2,8],[2,9],[2,10],[2,11],[4,12],[4,13],[4,14],[4,15],[8,16],[8,17],[8,18],[8,19],[16,20],[16,21],[16,22],[16,23],[32,24],[32,25],[32,26],[31,27],[1,28]]));Tree.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0];Tree.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576];Tree.d_code=function(E){return E<256?_dist_code[E]:_dist_code[256+(E>>>7)]};Tree.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0];Tree.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];Tree.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7];Tree.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];function StaticTree(E,A,_,I,B){const T=this;T.static_tree=E,T.extra_bits=A,T.extra_base=_,T.elems=I,T.max_length=B}const static_ltree2_first_part=[12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,19,275,147,403,83,339,211,467,51,307,179,435,115,371,243,499,11,267,139,395,75,331,203,459,43,299,171,427,107,363,235,491,27,283,155,411,91,347,219,475,59,315,187,443,123,379,251,507,7,263,135,391,71,327,199,455,39,295,167,423,103,359,231,487,23,279,151,407,87,343,215,471,55,311,183,439,119,375,247,503,15,271,143,399,79,335,207,463,47,303,175,431,111,367,239,495,31,287,159,415,95,351,223,479,63,319,191,447,127,383,255,511,0,64,32,96,16,80,48,112,8,72,40,104,24,88,56,120,4,68,36,100,20,84,52,116,3,131,67,195,35,163,99,227],static_ltree2_second_part=extractArray([[144,8],[112,9],[24,7],[8,8]]);StaticTree.static_ltree=flatArray(static_ltree2_first_part.map((E,A)=>[E,static_ltree2_second_part[A]]));const static_dtree_first_part=[0,16,8,24,4,20,12,28,2,18,10,26,6,22,14,30,1,17,9,25,5,21,13,29,3,19,11,27,7,23],static_dtree_second_part=extractArray([[30,5]]);StaticTree.static_dtree=flatArray(static_dtree_first_part.map((E,A)=>[E,static_dtree_second_part[A]]));StaticTree.static_l_desc=new StaticTree(StaticTree.static_ltree,Tree.extra_lbits,LITERALS+1,L_CODES,MAX_BITS$1);StaticTree.static_d_desc=new StaticTree(StaticTree.static_dtree,Tree.extra_dbits,0,D_CODES,MAX_BITS$1);StaticTree.static_bl_desc=new StaticTree(null,Tree.extra_blbits,0,BL_CODES,MAX_BL_BITS);const MAX_MEM_LEVEL=9,DEF_MEM_LEVEL=8;function Config(E,A,_,I,B){const T=this;T.good_length=E,T.max_lazy=A,T.nice_length=_,T.max_chain=I,T.func=B}const STORED$1=0,FAST=1,SLOW=2,config_table=[new Config(0,0,0,0,STORED$1),new Config(4,4,8,4,FAST),new Config(4,5,16,8,FAST),new Config(4,6,32,32,FAST),new Config(4,4,16,16,SLOW),new Config(8,16,32,32,SLOW),new Config(8,16,128,128,SLOW),new Config(8,32,128,256,SLOW),new Config(32,128,258,1024,SLOW),new Config(32,258,258,4096,SLOW)],z_errmsg=["need dictionary","stream end","","","stream error","data error","","buffer error","",""],NeedMore=0,BlockDone=1,FinishStarted=2,FinishDone=3,PRESET_DICT$1=32,INIT_STATE=42,BUSY_STATE=113,FINISH_STATE=666,Z_DEFLATED$1=8,STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1;function smaller(E,A,_,I){const B=E[A*2],T=E[_*2];return B<T||B==T&&I[A]<=I[_]}function Deflate(){const E=this;let A,_,I,B,T,R,P,D,F,L,U,V,K,J,ee,ie,ne,ce,fe,de,pe,ve,ye,_e,be,Te,ue,O,z,Y,te,oe,le;const he=new Tree,ae=new Tree,Q=new Tree;E.depth=[];let se,Ae,ge,Ee,ke,Se;E.bl_count=[],E.heap=[],te=[],oe=[],le=[];function Ie(){F=2*T,U[K-1]=0;for(let Je=0;Je<K-1;Je++)U[Je]=0;Te=config_table[ue].max_lazy,z=config_table[ue].good_length,Y=config_table[ue].nice_length,be=config_table[ue].max_chain,pe=0,ne=0,ye=0,ce=_e=MIN_MATCH-1,de=0,V=0}function we(){let Je;for(Je=0;Je<L_CODES;Je++)te[Je*2]=0;for(Je=0;Je<D_CODES;Je++)oe[Je*2]=0;for(Je=0;Je<BL_CODES;Je++)le[Je*2]=0;te[END_BLOCK*2]=1,E.opt_len=E.static_len=0,Ae=ge=0}function xe(){he.dyn_tree=te,he.stat_desc=StaticTree.static_l_desc,ae.dyn_tree=oe,ae.stat_desc=StaticTree.static_d_desc,Q.dyn_tree=le,Q.stat_desc=StaticTree.static_bl_desc,ke=0,Se=0,Ee=8,we()}E.pqdownheap=function(Je,nt){const rt=E.heap,He=rt[nt];let Dt=nt<<1;for(;Dt<=E.heap_len&&(Dt<E.heap_len&&smaller(Je,rt[Dt+1],rt[Dt],E.depth)&&Dt++,!smaller(Je,He,rt[Dt],E.depth));)rt[nt]=rt[Dt],nt=Dt,Dt<<=1;rt[nt]=He};function Fe(Je,nt){let rt=-1,He,Dt=Je[1],Rt=0,De=7,We=4;Dt===0&&(De=138,We=3),Je[(nt+1)*2+1]=65535;for(let Ve=0;Ve<=nt;Ve++)He=Dt,Dt=Je[(Ve+1)*2+1],!(++Rt<De&&He==Dt)&&(Rt<We?le[He*2]+=Rt:He!==0?(He!=rt&&le[He*2]++,le[REP_3_6*2]++):Rt<=10?le[REPZ_3_10*2]++:le[REPZ_11_138*2]++,Rt=0,rt=He,Dt===0?(De=138,We=3):He==Dt?(De=6,We=3):(De=7,We=4))}function Ge(){let Je;for(Fe(te,he.max_code),Fe(oe,ae.max_code),Q.build_tree(E),Je=BL_CODES-1;Je>=3&&le[Tree.bl_order[Je]*2+1]===0;Je--);return E.opt_len+=3*(Je+1)+5+5+4,Je}function Oe(Je){E.pending_buf[E.pending++]=Je}function et(Je){Oe(Je&255),Oe(Je>>>8&255)}function Mt(Je){Oe(Je>>8&255),Oe(Je&255&255)}function dt(Je,nt){let rt;const He=nt;Se>Buf_size-He?(rt=Je,ke|=rt<<Se&65535,et(ke),ke=rt>>>Buf_size-Se,Se+=He-Buf_size):(ke|=Je<<Se&65535,Se+=He)}function mt(Je,nt){const rt=Je*2;dt(nt[rt]&65535,nt[rt+1]&65535)}function Ut(Je,nt){let rt,He=-1,Dt,Rt=Je[1],De=0,We=7,Ve=4;for(Rt===0&&(We=138,Ve=3),rt=0;rt<=nt;rt++)if(Dt=Rt,Rt=Je[(rt+1)*2+1],!(++De<We&&Dt==Rt)){if(De<Ve)do mt(Dt,le);while(--De!==0);else Dt!==0?(Dt!=He&&(mt(Dt,le),De--),mt(REP_3_6,le),dt(De-3,2)):De<=10?(mt(REPZ_3_10,le),dt(De-3,3)):(mt(REPZ_11_138,le),dt(De-11,7));De=0,He=Dt,Rt===0?(We=138,Ve=3):Dt==Rt?(We=6,Ve=3):(We=7,Ve=4)}}function St(Je,nt,rt){let He;for(dt(Je-257,5),dt(nt-1,5),dt(rt-4,4),He=0;He<rt;He++)dt(le[Tree.bl_order[He]*2+1],3);Ut(te,Je-1),Ut(oe,nt-1)}function vt(){Se==16?(et(ke),ke=0,Se=0):Se>=8&&(Oe(ke&255),ke>>>=8,Se-=8)}function It(){dt(STATIC_TREES<<1,3),mt(END_BLOCK,StaticTree.static_ltree),vt(),1+Ee+10-Se<9&&(dt(STATIC_TREES<<1,3),mt(END_BLOCK,StaticTree.static_ltree),vt()),Ee=7}function yt(Je,nt){let rt,He,Dt;if(E.dist_buf[Ae]=Je,E.lc_buf[Ae]=nt&255,Ae++,Je===0?te[nt*2]++:(ge++,Je--,te[(Tree._length_code[nt]+LITERALS+1)*2]++,oe[Tree.d_code(Je)*2]++),(Ae&8191)===0&&ue>2){for(rt=Ae*8,He=pe-ne,Dt=0;Dt<D_CODES;Dt++)rt+=oe[Dt*2]*(5+Tree.extra_dbits[Dt]);if(rt>>>=3,ge<Math.floor(Ae/2)&&rt<Math.floor(He/2))return!0}return Ae==se-1}function Tt(Je,nt){let rt,He,Dt=0,Rt,De;if(Ae!==0)do rt=E.dist_buf[Dt],He=E.lc_buf[Dt],Dt++,rt===0?mt(He,Je):(Rt=Tree._length_code[He],mt(Rt+LITERALS+1,Je),De=Tree.extra_lbits[Rt],De!==0&&(He-=Tree.base_length[Rt],dt(He,De)),rt--,Rt=Tree.d_code(rt),mt(Rt,nt),De=Tree.extra_dbits[Rt],De!==0&&(rt-=Tree.base_dist[Rt],dt(rt,De)));while(Dt<Ae);mt(END_BLOCK,Je),Ee=Je[END_BLOCK*2+1]}function Wt(){Se>8?et(ke):Se>0&&Oe(ke&255),ke=0,Se=0}function ft(Je,nt,rt){Wt(),Ee=8,et(nt),et(~nt),E.pending_buf.set(D.subarray(Je,Je+nt),E.pending),E.pending+=nt}function _t(Je,nt,rt){dt((STORED_BLOCK<<1)+(rt?1:0),3),ft(Je,nt)}function Xt(Je,nt,rt){let He,Dt,Rt=0;ue>0?(he.build_tree(E),ae.build_tree(E),Rt=Ge(),He=E.opt_len+3+7>>>3,Dt=E.static_len+3+7>>>3,Dt<=He&&(He=Dt)):He=Dt=nt+5,nt+4<=He&&Je!=-1?_t(Je,nt,rt):Dt==He?(dt((STATIC_TREES<<1)+(rt?1:0),3),Tt(StaticTree.static_ltree,StaticTree.static_dtree)):(dt((DYN_TREES<<1)+(rt?1:0),3),St(he.max_code+1,ae.max_code+1,Rt+1),Tt(te,oe)),we(),rt&&Wt()}function Nt(Je){Xt(ne>=0?ne:-1,pe-ne,Je),ne=pe,A.flush_pending()}function qt(){let Je,nt,rt,He;do{if(He=F-ye-pe,He===0&&pe===0&&ye===0)He=T;else if(He==-1)He--;else if(pe>=T+T-MIN_LOOKAHEAD){D.set(D.subarray(T,T+T),0),ve-=T,pe-=T,ne-=T,Je=K,rt=Je;do nt=U[--rt]&65535,U[rt]=nt>=T?nt-T:0;while(--Je!==0);Je=T,rt=Je;do nt=L[--rt]&65535,L[rt]=nt>=T?nt-T:0;while(--Je!==0);He+=T}if(A.avail_in===0)return;Je=A.read_buf(D,pe+ye,He),ye+=Je,ye>=MIN_MATCH&&(V=D[pe]&255,V=(V<<ie^D[pe+1]&255)&ee)}while(ye<MIN_LOOKAHEAD&&A.avail_in!==0)}function nr(Je){let nt=65535,rt;for(nt>I-5&&(nt=I-5);;){if(ye<=1){if(qt(),ye===0&&Je==Z_NO_FLUSH$1)return NeedMore;if(ye===0)break}if(pe+=ye,ye=0,rt=ne+nt,(pe===0||pe>=rt)&&(ye=pe-rt,pe=rt,Nt(!1),A.avail_out===0)||pe-ne>=T-MIN_LOOKAHEAD&&(Nt(!1),A.avail_out===0))return NeedMore}return Nt(Je==Z_FINISH$1),A.avail_out===0?Je==Z_FINISH$1?FinishStarted:NeedMore:Je==Z_FINISH$1?FinishDone:BlockDone}function ze(Je){let nt=be,rt=pe,He,Dt,Rt=_e;const De=pe>T-MIN_LOOKAHEAD?pe-(T-MIN_LOOKAHEAD):0;let We=Y;const Ve=P,qe=pe+MAX_MATCH;let pt=D[rt+Rt-1],At=D[rt+Rt];_e>=z&&(nt>>=2),We>ye&&(We=ye);do if(He=Je,!(D[He+Rt]!=At||D[He+Rt-1]!=pt||D[He]!=D[rt]||D[++He]!=D[rt+1])){rt+=2,He++;do;while(D[++rt]==D[++He]&&D[++rt]==D[++He]&&D[++rt]==D[++He]&&D[++rt]==D[++He]&&D[++rt]==D[++He]&&D[++rt]==D[++He]&&D[++rt]==D[++He]&&D[++rt]==D[++He]&&rt<qe);if(Dt=MAX_MATCH-(qe-rt),rt=qe-MAX_MATCH,Dt>Rt){if(ve=Je,Rt=Dt,Dt>=We)break;pt=D[rt+Rt-1],At=D[rt+Rt]}}while((Je=L[Je&Ve]&65535)>De&&--nt!==0);return Rt<=ye?Rt:ye}function Ce(Je){let nt=0,rt;for(;;){if(ye<MIN_LOOKAHEAD){if(qt(),ye<MIN_LOOKAHEAD&&Je==Z_NO_FLUSH$1)return NeedMore;if(ye===0)break}if(ye>=MIN_MATCH&&(V=(V<<ie^D[pe+(MIN_MATCH-1)]&255)&ee,nt=U[V]&65535,L[pe&P]=U[V],U[V]=pe),nt!==0&&(pe-nt&65535)<=T-MIN_LOOKAHEAD&&O!=Z_HUFFMAN_ONLY&&(ce=ze(nt)),ce>=MIN_MATCH)if(rt=yt(pe-ve,ce-MIN_MATCH),ye-=ce,ce<=Te&&ye>=MIN_MATCH){ce--;do pe++,V=(V<<ie^D[pe+(MIN_MATCH-1)]&255)&ee,nt=U[V]&65535,L[pe&P]=U[V],U[V]=pe;while(--ce!==0);pe++}else pe+=ce,ce=0,V=D[pe]&255,V=(V<<ie^D[pe+1]&255)&ee;else rt=yt(0,D[pe]&255),ye--,pe++;if(rt&&(Nt(!1),A.avail_out===0))return NeedMore}return Nt(Je==Z_FINISH$1),A.avail_out===0?Je==Z_FINISH$1?FinishStarted:NeedMore:Je==Z_FINISH$1?FinishDone:BlockDone}function Le(Je){let nt=0,rt,He;for(;;){if(ye<MIN_LOOKAHEAD){if(qt(),ye<MIN_LOOKAHEAD&&Je==Z_NO_FLUSH$1)return NeedMore;if(ye===0)break}if(ye>=MIN_MATCH&&(V=(V<<ie^D[pe+(MIN_MATCH-1)]&255)&ee,nt=U[V]&65535,L[pe&P]=U[V],U[V]=pe),_e=ce,fe=ve,ce=MIN_MATCH-1,nt!==0&&_e<Te&&(pe-nt&65535)<=T-MIN_LOOKAHEAD&&(O!=Z_HUFFMAN_ONLY&&(ce=ze(nt)),ce<=5&&(O==Z_FILTERED||ce==MIN_MATCH&&pe-ve>4096)&&(ce=MIN_MATCH-1)),_e>=MIN_MATCH&&ce<=_e){He=pe+ye-MIN_MATCH,rt=yt(pe-1-fe,_e-MIN_MATCH),ye-=_e-1,_e-=2;do++pe<=He&&(V=(V<<ie^D[pe+(MIN_MATCH-1)]&255)&ee,nt=U[V]&65535,L[pe&P]=U[V],U[V]=pe);while(--_e!==0);if(de=0,ce=MIN_MATCH-1,pe++,rt&&(Nt(!1),A.avail_out===0))return NeedMore}else if(de!==0){if(rt=yt(0,D[pe-1]&255),rt&&Nt(!1),pe++,ye--,A.avail_out===0)return NeedMore}else de=1,pe++,ye--}return de!==0&&(rt=yt(0,D[pe-1]&255),de=0),Nt(Je==Z_FINISH$1),A.avail_out===0?Je==Z_FINISH$1?FinishStarted:NeedMore:Je==Z_FINISH$1?FinishDone:BlockDone}function Ze(Je){return Je.total_in=Je.total_out=0,Je.msg=null,E.pending=0,E.pending_out=0,_=BUSY_STATE,B=Z_NO_FLUSH$1,xe(),Ie(),Z_OK$1}E.deflateInit=function(Je,nt,rt,He,Dt,Rt){return He||(He=Z_DEFLATED$1),Dt||(Dt=DEF_MEM_LEVEL),Rt||(Rt=Z_DEFAULT_STRATEGY),Je.msg=null,nt==Z_DEFAULT_COMPRESSION&&(nt=6),Dt<1||Dt>MAX_MEM_LEVEL||He!=Z_DEFLATED$1||rt<9||rt>15||nt<0||nt>9||Rt<0||Rt>Z_HUFFMAN_ONLY?Z_STREAM_ERROR$1:(Je.dstate=E,R=rt,T=1<<R,P=T-1,J=Dt+7,K=1<<J,ee=K-1,ie=Math.floor((J+MIN_MATCH-1)/MIN_MATCH),D=new Uint8Array(T*2),L=[],U=[],se=1<<Dt+6,E.pending_buf=new Uint8Array(se*4),I=se*4,E.dist_buf=new Uint16Array(se),E.lc_buf=new Uint8Array(se),ue=nt,O=Rt,Ze(Je))},E.deflateEnd=function(){return _!=INIT_STATE&&_!=BUSY_STATE&&_!=FINISH_STATE?Z_STREAM_ERROR$1:(E.lc_buf=null,E.dist_buf=null,E.pending_buf=null,U=null,L=null,D=null,E.dstate=null,_==BUSY_STATE?Z_DATA_ERROR$1:Z_OK$1)},E.deflateParams=function(Je,nt,rt){let He=Z_OK$1;return nt==Z_DEFAULT_COMPRESSION&&(nt=6),nt<0||nt>9||rt<0||rt>Z_HUFFMAN_ONLY?Z_STREAM_ERROR$1:(config_table[ue].func!=config_table[nt].func&&Je.total_in!==0&&(He=Je.deflate(Z_PARTIAL_FLUSH)),ue!=nt&&(ue=nt,Te=config_table[ue].max_lazy,z=config_table[ue].good_length,Y=config_table[ue].nice_length,be=config_table[ue].max_chain),O=rt,He)},E.deflateSetDictionary=function(Je,nt,rt){let He=rt,Dt,Rt=0;if(!nt||_!=INIT_STATE)return Z_STREAM_ERROR$1;if(He<MIN_MATCH)return Z_OK$1;for(He>T-MIN_LOOKAHEAD&&(He=T-MIN_LOOKAHEAD,Rt=rt-He),D.set(nt.subarray(Rt,Rt+He),0),pe=He,ne=He,V=D[0]&255,V=(V<<ie^D[1]&255)&ee,Dt=0;Dt<=He-MIN_MATCH;Dt++)V=(V<<ie^D[Dt+(MIN_MATCH-1)]&255)&ee,L[Dt&P]=U[V],U[V]=Dt;return Z_OK$1},E.deflate=function(Je,nt){let rt,He,Dt,Rt,De;if(nt>Z_FINISH$1||nt<0)return Z_STREAM_ERROR$1;if(!Je.next_out||!Je.next_in&&Je.avail_in!==0||_==FINISH_STATE&&nt!=Z_FINISH$1)return Je.msg=z_errmsg[Z_NEED_DICT$1-Z_STREAM_ERROR$1],Z_STREAM_ERROR$1;if(Je.avail_out===0)return Je.msg=z_errmsg[Z_NEED_DICT$1-Z_BUF_ERROR$1],Z_BUF_ERROR$1;if(A=Je,Rt=B,B=nt,_==INIT_STATE&&(He=Z_DEFLATED$1+(R-8<<4)<<8,Dt=(ue-1&255)>>1,Dt>3&&(Dt=3),He|=Dt<<6,pe!==0&&(He|=PRESET_DICT$1),He+=31-He%31,_=BUSY_STATE,Mt(He)),E.pending!==0){if(A.flush_pending(),A.avail_out===0)return B=-1,Z_OK$1}else if(A.avail_in===0&&nt<=Rt&&nt!=Z_FINISH$1)return A.msg=z_errmsg[Z_NEED_DICT$1-Z_BUF_ERROR$1],Z_BUF_ERROR$1;if(_==FINISH_STATE&&A.avail_in!==0)return Je.msg=z_errmsg[Z_NEED_DICT$1-Z_BUF_ERROR$1],Z_BUF_ERROR$1;if(A.avail_in!==0||ye!==0||nt!=Z_NO_FLUSH$1&&_!=FINISH_STATE){switch(De=-1,config_table[ue].func){case STORED$1:De=nr(nt);break;case FAST:De=Ce(nt);break;case SLOW:De=Le(nt);break}if((De==FinishStarted||De==FinishDone)&&(_=FINISH_STATE),De==NeedMore||De==FinishStarted)return A.avail_out===0&&(B=-1),Z_OK$1;if(De==BlockDone){if(nt==Z_PARTIAL_FLUSH)It();else if(_t(0,0,!1),nt==Z_FULL_FLUSH)for(rt=0;rt<K;rt++)U[rt]=0;if(A.flush_pending(),A.avail_out===0)return B=-1,Z_OK$1}}return nt!=Z_FINISH$1?Z_OK$1:Z_STREAM_END$1}}function ZStream$1(){const E=this;E.next_in_index=0,E.next_out_index=0,E.avail_in=0,E.total_in=0,E.avail_out=0,E.total_out=0}ZStream$1.prototype={deflateInit(E,A){const _=this;return _.dstate=new Deflate,A||(A=MAX_BITS$1),_.dstate.deflateInit(_,E,A)},deflate(E){const A=this;return A.dstate?A.dstate.deflate(A,E):Z_STREAM_ERROR$1},deflateEnd(){const E=this;if(!E.dstate)return Z_STREAM_ERROR$1;const A=E.dstate.deflateEnd();return E.dstate=null,A},deflateParams(E,A){const _=this;return _.dstate?_.dstate.deflateParams(_,E,A):Z_STREAM_ERROR$1},deflateSetDictionary(E,A){const _=this;return _.dstate?_.dstate.deflateSetDictionary(_,E,A):Z_STREAM_ERROR$1},read_buf(E,A,_){const I=this;let B=I.avail_in;return B>_&&(B=_),B===0?0:(I.avail_in-=B,E.set(I.next_in.subarray(I.next_in_index,I.next_in_index+B),A),I.next_in_index+=B,I.total_in+=B,B)},flush_pending(){const E=this;let A=E.dstate.pending;A>E.avail_out&&(A=E.avail_out),A!==0&&(E.next_out.set(E.dstate.pending_buf.subarray(E.dstate.pending_out,E.dstate.pending_out+A),E.next_out_index),E.next_out_index+=A,E.dstate.pending_out+=A,E.total_out+=A,E.avail_out-=A,E.dstate.pending-=A,E.dstate.pending===0&&(E.dstate.pending_out=0))}};function ZipDeflate(E){const A=this,_=new ZStream$1,I=getMaximumCompressedSize(E&&E.chunkSize?E.chunkSize:64*1024),B=Z_NO_FLUSH$1,T=new Uint8Array(I);let R=E?E.level:Z_DEFAULT_COMPRESSION;typeof R>"u"&&(R=Z_DEFAULT_COMPRESSION),_.deflateInit(R),_.next_out=T,A.append=function(P,D){let F,L,U=0,V=0,K=0;const J=[];if(P.length){_.next_in_index=0,_.next_in=P,_.avail_in=P.length;do{if(_.next_out_index=0,_.avail_out=I,F=_.deflate(B),F!=Z_OK$1)throw new Error("deflating: "+_.msg);_.next_out_index&&(_.next_out_index==I?J.push(new Uint8Array(T)):J.push(T.subarray(0,_.next_out_index))),K+=_.next_out_index,D&&_.next_in_index>0&&_.next_in_index!=U&&(D(_.next_in_index),U=_.next_in_index)}while(_.avail_in>0||_.avail_out===0);return J.length>1?(L=new Uint8Array(K),J.forEach(function(ee){L.set(ee,V),V+=ee.length})):L=J[0]?new Uint8Array(J[0]):new Uint8Array,L}},A.flush=function(){let P,D,F=0,L=0;const U=[];do{if(_.next_out_index=0,_.avail_out=I,P=_.deflate(Z_FINISH$1),P!=Z_STREAM_END$1&&P!=Z_OK$1)throw new Error("deflating: "+_.msg);I-_.avail_out>0&&U.push(T.slice(0,_.next_out_index)),L+=_.next_out_index}while(_.avail_in>0||_.avail_out===0);return _.deflateEnd(),D=new Uint8Array(L),U.forEach(function(V){D.set(V,F),F+=V.length}),D}}function getMaximumCompressedSize(E){return E+5*(Math.floor(E/16383)+1)}const MAX_BITS=15,Z_OK=0,Z_STREAM_END=1,Z_NEED_DICT=2,Z_STREAM_ERROR=-2,Z_DATA_ERROR=-3,Z_MEM_ERROR=-4,Z_BUF_ERROR=-5,inflate_mask=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],MANY=1440,Z_NO_FLUSH=0,Z_FINISH=4,fixed_bl=9,fixed_bd=5,fixed_tl=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],fixed_td=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],cplens=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],cplext=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],cpdist=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],cpdext=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],BMAX=15;function InfTree(){const E=this;let A,_,I,B,T,R;function P(F,L,U,V,K,J,ee,ie,ne,ce,fe){let de,pe,ve,ye,_e,be,Te,ue,O,z,Y,te,oe,le,he;z=0,_e=U;do I[F[L+z]]++,z++,_e--;while(_e!==0);if(I[0]==U)return ee[0]=-1,ie[0]=0,Z_OK;for(ue=ie[0],be=1;be<=BMAX&&I[be]===0;be++);for(Te=be,ue<be&&(ue=be),_e=BMAX;_e!==0&&I[_e]===0;_e--);for(ve=_e,ue>_e&&(ue=_e),ie[0]=ue,le=1<<be;be<_e;be++,le<<=1)if((le-=I[be])<0)return Z_DATA_ERROR;if((le-=I[_e])<0)return Z_DATA_ERROR;for(I[_e]+=le,R[1]=be=0,z=1,oe=2;--_e!==0;)R[oe]=be+=I[z],oe++,z++;_e=0,z=0;do(be=F[L+z])!==0&&(fe[R[be]++]=_e),z++;while(++_e<U);for(U=R[ve],R[0]=_e=0,z=0,ye=-1,te=-ue,T[0]=0,Y=0,he=0;Te<=ve;Te++)for(de=I[Te];de--!==0;){for(;Te>te+ue;){if(ye++,te+=ue,he=ve-te,he=he>ue?ue:he,(pe=1<<(be=Te-te))>de+1&&(pe-=de+1,oe=Te,be<he))for(;++be<he&&!((pe<<=1)<=I[++oe]);)pe-=I[oe];if(he=1<<be,ce[0]+he>MANY)return Z_DATA_ERROR;T[ye]=Y=ce[0],ce[0]+=he,ye!==0?(R[ye]=_e,B[0]=be,B[1]=ue,be=_e>>>te-ue,B[2]=Y-T[ye-1]-be,ne.set(B,(T[ye-1]+be)*3)):ee[0]=Y}for(B[1]=Te-te,z>=U?B[0]=192:fe[z]<V?(B[0]=fe[z]<256?0:96,B[2]=fe[z++]):(B[0]=J[fe[z]-V]+16+64,B[2]=K[fe[z++]-V]),pe=1<<Te-te,be=_e>>>te;be<he;be+=pe)ne.set(B,(Y+be)*3);for(be=1<<Te-1;(_e&be)!==0;be>>>=1)_e^=be;for(_e^=be,O=(1<<te)-1;(_e&O)!=R[ye];)ye--,te-=ue,O=(1<<te)-1}return le!==0&&ve!=1?Z_BUF_ERROR:Z_OK}function D(F){let L;for(A||(A=[],_=[],I=new Int32Array(BMAX+1),B=[],T=new Int32Array(BMAX),R=new Int32Array(BMAX+1)),_.length<F&&(_=[]),L=0;L<F;L++)_[L]=0;for(L=0;L<BMAX+1;L++)I[L]=0;for(L=0;L<3;L++)B[L]=0;T.set(I.subarray(0,BMAX),0),R.set(I.subarray(0,BMAX+1),0)}E.inflate_trees_bits=function(F,L,U,V,K){let J;return D(19),A[0]=0,J=P(F,0,19,19,null,null,U,L,V,A,_),J==Z_DATA_ERROR?K.msg="oversubscribed dynamic bit lengths tree":(J==Z_BUF_ERROR||L[0]===0)&&(K.msg="incomplete dynamic bit lengths tree",J=Z_DATA_ERROR),J},E.inflate_trees_dynamic=function(F,L,U,V,K,J,ee,ie,ne){let ce;return D(288),A[0]=0,ce=P(U,0,F,257,cplens,cplext,J,V,ie,A,_),ce!=Z_OK||V[0]===0?(ce==Z_DATA_ERROR?ne.msg="oversubscribed literal/length tree":ce!=Z_MEM_ERROR&&(ne.msg="incomplete literal/length tree",ce=Z_DATA_ERROR),ce):(D(288),ce=P(U,F,L,0,cpdist,cpdext,ee,K,ie,A,_),ce!=Z_OK||K[0]===0&&F>257?(ce==Z_DATA_ERROR?ne.msg="oversubscribed distance tree":ce==Z_BUF_ERROR?(ne.msg="incomplete distance tree",ce=Z_DATA_ERROR):ce!=Z_MEM_ERROR&&(ne.msg="empty distance tree with lengths",ce=Z_DATA_ERROR),ce):Z_OK)}}InfTree.inflate_trees_fixed=function(E,A,_,I){return E[0]=fixed_bl,A[0]=fixed_bd,_[0]=fixed_tl,I[0]=fixed_td,Z_OK};const START=0,LEN=1,LENEXT=2,DIST=3,DISTEXT=4,COPY=5,LIT=6,WASH=7,END=8,BADCODE=9;function InfCodes(){const E=this;let A,_=0,I,B=0,T=0,R=0,P=0,D=0,F=0,L=0,U,V=0,K,J=0;function ee(ie,ne,ce,fe,de,pe,ve,ye){let _e,be,Te,ue,O,z,Y,te,oe,le,he,ae,Q,se,Ae,ge;Y=ye.next_in_index,te=ye.avail_in,O=ve.bitb,z=ve.bitk,oe=ve.write,le=oe<ve.read?ve.read-oe-1:ve.end-oe,he=inflate_mask[ie],ae=inflate_mask[ne];do{for(;z<20;)te--,O|=(ye.read_byte(Y++)&255)<<z,z+=8;if(_e=O&he,be=ce,Te=fe,ge=(Te+_e)*3,(ue=be[ge])===0){O>>=be[ge+1],z-=be[ge+1],ve.win[oe++]=be[ge+2],le--;continue}do{if(O>>=be[ge+1],z-=be[ge+1],(ue&16)!==0){for(ue&=15,Q=be[ge+2]+(O&inflate_mask[ue]),O>>=ue,z-=ue;z<15;)te--,O|=(ye.read_byte(Y++)&255)<<z,z+=8;_e=O&ae,be=de,Te=pe,ge=(Te+_e)*3,ue=be[ge];do if(O>>=be[ge+1],z-=be[ge+1],(ue&16)!==0){for(ue&=15;z<ue;)te--,O|=(ye.read_byte(Y++)&255)<<z,z+=8;if(se=be[ge+2]+(O&inflate_mask[ue]),O>>=ue,z-=ue,le-=Q,oe>=se)Ae=oe-se,oe-Ae>0&&2>oe-Ae?(ve.win[oe++]=ve.win[Ae++],ve.win[oe++]=ve.win[Ae++],Q-=2):(ve.win.set(ve.win.subarray(Ae,Ae+2),oe),oe+=2,Ae+=2,Q-=2);else{Ae=oe-se;do Ae+=ve.end;while(Ae<0);if(ue=ve.end-Ae,Q>ue){if(Q-=ue,oe-Ae>0&&ue>oe-Ae)do ve.win[oe++]=ve.win[Ae++];while(--ue!==0);else ve.win.set(ve.win.subarray(Ae,Ae+ue),oe),oe+=ue,Ae+=ue,ue=0;Ae=0}}if(oe-Ae>0&&Q>oe-Ae)do ve.win[oe++]=ve.win[Ae++];while(--Q!==0);else ve.win.set(ve.win.subarray(Ae,Ae+Q),oe),oe+=Q,Ae+=Q,Q=0;break}else if((ue&64)===0)_e+=be[ge+2],_e+=O&inflate_mask[ue],ge=(Te+_e)*3,ue=be[ge];else return ye.msg="invalid distance code",Q=ye.avail_in-te,Q=z>>3<Q?z>>3:Q,te+=Q,Y-=Q,z-=Q<<3,ve.bitb=O,ve.bitk=z,ye.avail_in=te,ye.total_in+=Y-ye.next_in_index,ye.next_in_index=Y,ve.write=oe,Z_DATA_ERROR;while(!0);break}if((ue&64)===0){if(_e+=be[ge+2],_e+=O&inflate_mask[ue],ge=(Te+_e)*3,(ue=be[ge])===0){O>>=be[ge+1],z-=be[ge+1],ve.win[oe++]=be[ge+2],le--;break}}else return(ue&32)!==0?(Q=ye.avail_in-te,Q=z>>3<Q?z>>3:Q,te+=Q,Y-=Q,z-=Q<<3,ve.bitb=O,ve.bitk=z,ye.avail_in=te,ye.total_in+=Y-ye.next_in_index,ye.next_in_index=Y,ve.write=oe,Z_STREAM_END):(ye.msg="invalid literal/length code",Q=ye.avail_in-te,Q=z>>3<Q?z>>3:Q,te+=Q,Y-=Q,z-=Q<<3,ve.bitb=O,ve.bitk=z,ye.avail_in=te,ye.total_in+=Y-ye.next_in_index,ye.next_in_index=Y,ve.write=oe,Z_DATA_ERROR)}while(!0)}while(le>=258&&te>=10);return Q=ye.avail_in-te,Q=z>>3<Q?z>>3:Q,te+=Q,Y-=Q,z-=Q<<3,ve.bitb=O,ve.bitk=z,ye.avail_in=te,ye.total_in+=Y-ye.next_in_index,ye.next_in_index=Y,ve.write=oe,Z_OK}E.init=function(ie,ne,ce,fe,de,pe){A=START,F=ie,L=ne,U=ce,V=fe,K=de,J=pe,I=null},E.proc=function(ie,ne,ce){let fe,de,pe,ve=0,ye=0,_e=0,be,Te,ue,O;for(_e=ne.next_in_index,be=ne.avail_in,ve=ie.bitb,ye=ie.bitk,Te=ie.write,ue=Te<ie.read?ie.read-Te-1:ie.end-Te;;)switch(A){case START:if(ue>=258&&be>=10&&(ie.bitb=ve,ie.bitk=ye,ne.avail_in=be,ne.total_in+=_e-ne.next_in_index,ne.next_in_index=_e,ie.write=Te,ce=ee(F,L,U,V,K,J,ie,ne),_e=ne.next_in_index,be=ne.avail_in,ve=ie.bitb,ye=ie.bitk,Te=ie.write,ue=Te<ie.read?ie.read-Te-1:ie.end-Te,ce!=Z_OK)){A=ce==Z_STREAM_END?WASH:BADCODE;break}T=F,I=U,B=V,A=LEN;case LEN:for(fe=T;ye<fe;){if(be!==0)ce=Z_OK;else return ie.bitb=ve,ie.bitk=ye,ne.avail_in=be,ne.total_in+=_e-ne.next_in_index,ne.next_in_index=_e,ie.write=Te,ie.inflate_flush(ne,ce);be--,ve|=(ne.read_byte(_e++)&255)<<ye,ye+=8}if(de=(B+(ve&inflate_mask[fe]))*3,ve>>>=I[de+1],ye-=I[de+1],pe=I[de],pe===0){R=I[de+2],A=LIT;break}if((pe&16)!==0){P=pe&15,_=I[de+2],A=LENEXT;break}if((pe&64)===0){T=pe,B=de/3+I[de+2];break}if((pe&32)!==0){A=WASH;break}return A=BADCODE,ne.msg="invalid literal/length code",ce=Z_DATA_ERROR,ie.bitb=ve,ie.bitk=ye,ne.avail_in=be,ne.total_in+=_e-ne.next_in_index,ne.next_in_index=_e,ie.write=Te,ie.inflate_flush(ne,ce);case LENEXT:for(fe=P;ye<fe;){if(be!==0)ce=Z_OK;else return ie.bitb=ve,ie.bitk=ye,ne.avail_in=be,ne.total_in+=_e-ne.next_in_index,ne.next_in_index=_e,ie.write=Te,ie.inflate_flush(ne,ce);be--,ve|=(ne.read_byte(_e++)&255)<<ye,ye+=8}_+=ve&inflate_mask[fe],ve>>=fe,ye-=fe,T=L,I=K,B=J,A=DIST;case DIST:for(fe=T;ye<fe;){if(be!==0)ce=Z_OK;else return ie.bitb=ve,ie.bitk=ye,ne.avail_in=be,ne.total_in+=_e-ne.next_in_index,ne.next_in_index=_e,ie.write=Te,ie.inflate_flush(ne,ce);be--,ve|=(ne.read_byte(_e++)&255)<<ye,ye+=8}if(de=(B+(ve&inflate_mask[fe]))*3,ve>>=I[de+1],ye-=I[de+1],pe=I[de],(pe&16)!==0){P=pe&15,D=I[de+2],A=DISTEXT;break}if((pe&64)===0){T=pe,B=de/3+I[de+2];break}return A=BADCODE,ne.msg="invalid distance code",ce=Z_DATA_ERROR,ie.bitb=ve,ie.bitk=ye,ne.avail_in=be,ne.total_in+=_e-ne.next_in_index,ne.next_in_index=_e,ie.write=Te,ie.inflate_flush(ne,ce);case DISTEXT:for(fe=P;ye<fe;){if(be!==0)ce=Z_OK;else return ie.bitb=ve,ie.bitk=ye,ne.avail_in=be,ne.total_in+=_e-ne.next_in_index,ne.next_in_index=_e,ie.write=Te,ie.inflate_flush(ne,ce);be--,ve|=(ne.read_byte(_e++)&255)<<ye,ye+=8}D+=ve&inflate_mask[fe],ve>>=fe,ye-=fe,A=COPY;case COPY:for(O=Te-D;O<0;)O+=ie.end;for(;_!==0;){if(ue===0&&(Te==ie.end&&ie.read!==0&&(Te=0,ue=Te<ie.read?ie.read-Te-1:ie.end-Te),ue===0&&(ie.write=Te,ce=ie.inflate_flush(ne,ce),Te=ie.write,ue=Te<ie.read?ie.read-Te-1:ie.end-Te,Te==ie.end&&ie.read!==0&&(Te=0,ue=Te<ie.read?ie.read-Te-1:ie.end-Te),ue===0)))return ie.bitb=ve,ie.bitk=ye,ne.avail_in=be,ne.total_in+=_e-ne.next_in_index,ne.next_in_index=_e,ie.write=Te,ie.inflate_flush(ne,ce);ie.win[Te++]=ie.win[O++],ue--,O==ie.end&&(O=0),_--}A=START;break;case LIT:if(ue===0&&(Te==ie.end&&ie.read!==0&&(Te=0,ue=Te<ie.read?ie.read-Te-1:ie.end-Te),ue===0&&(ie.write=Te,ce=ie.inflate_flush(ne,ce),Te=ie.write,ue=Te<ie.read?ie.read-Te-1:ie.end-Te,Te==ie.end&&ie.read!==0&&(Te=0,ue=Te<ie.read?ie.read-Te-1:ie.end-Te),ue===0)))return ie.bitb=ve,ie.bitk=ye,ne.avail_in=be,ne.total_in+=_e-ne.next_in_index,ne.next_in_index=_e,ie.write=Te,ie.inflate_flush(ne,ce);ce=Z_OK,ie.win[Te++]=R,ue--,A=START;break;case WASH:if(ye>7&&(ye-=8,be++,_e--),ie.write=Te,ce=ie.inflate_flush(ne,ce),Te=ie.write,ue=Te<ie.read?ie.read-Te-1:ie.end-Te,ie.read!=ie.write)return ie.bitb=ve,ie.bitk=ye,ne.avail_in=be,ne.total_in+=_e-ne.next_in_index,ne.next_in_index=_e,ie.write=Te,ie.inflate_flush(ne,ce);A=END;case END:return ce=Z_STREAM_END,ie.bitb=ve,ie.bitk=ye,ne.avail_in=be,ne.total_in+=_e-ne.next_in_index,ne.next_in_index=_e,ie.write=Te,ie.inflate_flush(ne,ce);case BADCODE:return ce=Z_DATA_ERROR,ie.bitb=ve,ie.bitk=ye,ne.avail_in=be,ne.total_in+=_e-ne.next_in_index,ne.next_in_index=_e,ie.write=Te,ie.inflate_flush(ne,ce);default:return ce=Z_STREAM_ERROR,ie.bitb=ve,ie.bitk=ye,ne.avail_in=be,ne.total_in+=_e-ne.next_in_index,ne.next_in_index=_e,ie.write=Te,ie.inflate_flush(ne,ce)}},E.free=function(){}}const border=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],TYPE=0,LENS=1,STORED=2,TABLE=3,BTREE=4,DTREE=5,CODES=6,DRY=7,DONELOCKS=8,BADBLOCKS=9;function InfBlocks(E,A){const _=this;let I=TYPE,B=0,T=0,R=0,P;const D=[0],F=[0],L=new InfCodes;let U=0,V=new Int32Array(MANY*3);const K=0,J=new InfTree;_.bitk=0,_.bitb=0,_.win=new Uint8Array(A),_.end=A,_.read=0,_.write=0,_.reset=function(ee,ie){ie&&(ie[0]=K),I==CODES&&L.free(ee),I=TYPE,_.bitk=0,_.bitb=0,_.read=_.write=0},_.reset(E,null),_.inflate_flush=function(ee,ie){let ne,ce,fe;return ce=ee.next_out_index,fe=_.read,ne=(fe<=_.write?_.write:_.end)-fe,ne>ee.avail_out&&(ne=ee.avail_out),ne!==0&&ie==Z_BUF_ERROR&&(ie=Z_OK),ee.avail_out-=ne,ee.total_out+=ne,ee.next_out.set(_.win.subarray(fe,fe+ne),ce),ce+=ne,fe+=ne,fe==_.end&&(fe=0,_.write==_.end&&(_.write=0),ne=_.write-fe,ne>ee.avail_out&&(ne=ee.avail_out),ne!==0&&ie==Z_BUF_ERROR&&(ie=Z_OK),ee.avail_out-=ne,ee.total_out+=ne,ee.next_out.set(_.win.subarray(fe,fe+ne),ce),ce+=ne,fe+=ne),ee.next_out_index=ce,_.read=fe,ie},_.proc=function(ee,ie){let ne,ce,fe,de,pe,ve,ye,_e;for(de=ee.next_in_index,pe=ee.avail_in,ce=_.bitb,fe=_.bitk,ve=_.write,ye=ve<_.read?_.read-ve-1:_.end-ve;;){let be,Te,ue,O,z,Y,te,oe;switch(I){case TYPE:for(;fe<3;){if(pe!==0)ie=Z_OK;else return _.bitb=ce,_.bitk=fe,ee.avail_in=pe,ee.total_in+=de-ee.next_in_index,ee.next_in_index=de,_.write=ve,_.inflate_flush(ee,ie);pe--,ce|=(ee.read_byte(de++)&255)<<fe,fe+=8}switch(ne=ce&7,U=ne&1,ne>>>1){case 0:ce>>>=3,fe-=3,ne=fe&7,ce>>>=ne,fe-=ne,I=LENS;break;case 1:be=[],Te=[],ue=[[]],O=[[]],InfTree.inflate_trees_fixed(be,Te,ue,O),L.init(be[0],Te[0],ue[0],0,O[0],0),ce>>>=3,fe-=3,I=CODES;break;case 2:ce>>>=3,fe-=3,I=TABLE;break;case 3:return ce>>>=3,fe-=3,I=BADBLOCKS,ee.msg="invalid block type",ie=Z_DATA_ERROR,_.bitb=ce,_.bitk=fe,ee.avail_in=pe,ee.total_in+=de-ee.next_in_index,ee.next_in_index=de,_.write=ve,_.inflate_flush(ee,ie)}break;case LENS:for(;fe<32;){if(pe!==0)ie=Z_OK;else return _.bitb=ce,_.bitk=fe,ee.avail_in=pe,ee.total_in+=de-ee.next_in_index,ee.next_in_index=de,_.write=ve,_.inflate_flush(ee,ie);pe--,ce|=(ee.read_byte(de++)&255)<<fe,fe+=8}if((~ce>>>16&65535)!=(ce&65535))return I=BADBLOCKS,ee.msg="invalid stored block lengths",ie=Z_DATA_ERROR,_.bitb=ce,_.bitk=fe,ee.avail_in=pe,ee.total_in+=de-ee.next_in_index,ee.next_in_index=de,_.write=ve,_.inflate_flush(ee,ie);B=ce&65535,ce=fe=0,I=B!==0?STORED:U!==0?DRY:TYPE;break;case STORED:if(pe===0||ye===0&&(ve==_.end&&_.read!==0&&(ve=0,ye=ve<_.read?_.read-ve-1:_.end-ve),ye===0&&(_.write=ve,ie=_.inflate_flush(ee,ie),ve=_.write,ye=ve<_.read?_.read-ve-1:_.end-ve,ve==_.end&&_.read!==0&&(ve=0,ye=ve<_.read?_.read-ve-1:_.end-ve),ye===0)))return _.bitb=ce,_.bitk=fe,ee.avail_in=pe,ee.total_in+=de-ee.next_in_index,ee.next_in_index=de,_.write=ve,_.inflate_flush(ee,ie);if(ie=Z_OK,ne=B,ne>pe&&(ne=pe),ne>ye&&(ne=ye),_.win.set(ee.read_buf(de,ne),ve),de+=ne,pe-=ne,ve+=ne,ye-=ne,(B-=ne)!==0)break;I=U!==0?DRY:TYPE;break;case TABLE:for(;fe<14;){if(pe!==0)ie=Z_OK;else return _.bitb=ce,_.bitk=fe,ee.avail_in=pe,ee.total_in+=de-ee.next_in_index,ee.next_in_index=de,_.write=ve,_.inflate_flush(ee,ie);pe--,ce|=(ee.read_byte(de++)&255)<<fe,fe+=8}if(T=ne=ce&16383,(ne&31)>29||(ne>>5&31)>29)return I=BADBLOCKS,ee.msg="too many length or distance symbols",ie=Z_DATA_ERROR,_.bitb=ce,_.bitk=fe,ee.avail_in=pe,ee.total_in+=de-ee.next_in_index,ee.next_in_index=de,_.write=ve,_.inflate_flush(ee,ie);if(ne=258+(ne&31)+(ne>>5&31),!P||P.length<ne)P=[];else for(_e=0;_e<ne;_e++)P[_e]=0;ce>>>=14,fe-=14,R=0,I=BTREE;case BTREE:for(;R<4+(T>>>10);){for(;fe<3;){if(pe!==0)ie=Z_OK;else return _.bitb=ce,_.bitk=fe,ee.avail_in=pe,ee.total_in+=de-ee.next_in_index,ee.next_in_index=de,_.write=ve,_.inflate_flush(ee,ie);pe--,ce|=(ee.read_byte(de++)&255)<<fe,fe+=8}P[border[R++]]=ce&7,ce>>>=3,fe-=3}for(;R<19;)P[border[R++]]=0;if(D[0]=7,ne=J.inflate_trees_bits(P,D,F,V,ee),ne!=Z_OK)return ie=ne,ie==Z_DATA_ERROR&&(P=null,I=BADBLOCKS),_.bitb=ce,_.bitk=fe,ee.avail_in=pe,ee.total_in+=de-ee.next_in_index,ee.next_in_index=de,_.write=ve,_.inflate_flush(ee,ie);R=0,I=DTREE;case DTREE:for(;ne=T,!(R>=258+(ne&31)+(ne>>5&31));){let le,he;for(ne=D[0];fe<ne;){if(pe!==0)ie=Z_OK;else return _.bitb=ce,_.bitk=fe,ee.avail_in=pe,ee.total_in+=de-ee.next_in_index,ee.next_in_index=de,_.write=ve,_.inflate_flush(ee,ie);pe--,ce|=(ee.read_byte(de++)&255)<<fe,fe+=8}if(ne=V[(F[0]+(ce&inflate_mask[ne]))*3+1],he=V[(F[0]+(ce&inflate_mask[ne]))*3+2],he<16)ce>>>=ne,fe-=ne,P[R++]=he;else{for(_e=he==18?7:he-14,le=he==18?11:3;fe<ne+_e;){if(pe!==0)ie=Z_OK;else return _.bitb=ce,_.bitk=fe,ee.avail_in=pe,ee.total_in+=de-ee.next_in_index,ee.next_in_index=de,_.write=ve,_.inflate_flush(ee,ie);pe--,ce|=(ee.read_byte(de++)&255)<<fe,fe+=8}if(ce>>>=ne,fe-=ne,le+=ce&inflate_mask[_e],ce>>>=_e,fe-=_e,_e=R,ne=T,_e+le>258+(ne&31)+(ne>>5&31)||he==16&&_e<1)return P=null,I=BADBLOCKS,ee.msg="invalid bit length repeat",ie=Z_DATA_ERROR,_.bitb=ce,_.bitk=fe,ee.avail_in=pe,ee.total_in+=de-ee.next_in_index,ee.next_in_index=de,_.write=ve,_.inflate_flush(ee,ie);he=he==16?P[_e-1]:0;do P[_e++]=he;while(--le!==0);R=_e}}if(F[0]=-1,z=[],Y=[],te=[],oe=[],z[0]=9,Y[0]=6,ne=T,ne=J.inflate_trees_dynamic(257+(ne&31),1+(ne>>5&31),P,z,Y,te,oe,V,ee),ne!=Z_OK)return ne==Z_DATA_ERROR&&(P=null,I=BADBLOCKS),ie=ne,_.bitb=ce,_.bitk=fe,ee.avail_in=pe,ee.total_in+=de-ee.next_in_index,ee.next_in_index=de,_.write=ve,_.inflate_flush(ee,ie);L.init(z[0],Y[0],V,te[0],V,oe[0]),I=CODES;case CODES:if(_.bitb=ce,_.bitk=fe,ee.avail_in=pe,ee.total_in+=de-ee.next_in_index,ee.next_in_index=de,_.write=ve,(ie=L.proc(_,ee,ie))!=Z_STREAM_END)return _.inflate_flush(ee,ie);if(ie=Z_OK,L.free(ee),de=ee.next_in_index,pe=ee.avail_in,ce=_.bitb,fe=_.bitk,ve=_.write,ye=ve<_.read?_.read-ve-1:_.end-ve,U===0){I=TYPE;break}I=DRY;case DRY:if(_.write=ve,ie=_.inflate_flush(ee,ie),ve=_.write,ye=ve<_.read?_.read-ve-1:_.end-ve,_.read!=_.write)return _.bitb=ce,_.bitk=fe,ee.avail_in=pe,ee.total_in+=de-ee.next_in_index,ee.next_in_index=de,_.write=ve,_.inflate_flush(ee,ie);I=DONELOCKS;case DONELOCKS:return ie=Z_STREAM_END,_.bitb=ce,_.bitk=fe,ee.avail_in=pe,ee.total_in+=de-ee.next_in_index,ee.next_in_index=de,_.write=ve,_.inflate_flush(ee,ie);case BADBLOCKS:return ie=Z_DATA_ERROR,_.bitb=ce,_.bitk=fe,ee.avail_in=pe,ee.total_in+=de-ee.next_in_index,ee.next_in_index=de,_.write=ve,_.inflate_flush(ee,ie);default:return ie=Z_STREAM_ERROR,_.bitb=ce,_.bitk=fe,ee.avail_in=pe,ee.total_in+=de-ee.next_in_index,ee.next_in_index=de,_.write=ve,_.inflate_flush(ee,ie)}}},_.free=function(ee){_.reset(ee,null),_.win=null,V=null},_.set_dictionary=function(ee,ie,ne){_.win.set(ee.subarray(ie,ie+ne),0),_.read=_.write=ne},_.sync_point=function(){return I==LENS?1:0}}const PRESET_DICT=32,Z_DEFLATED=8,METHOD=0,FLAG=1,DICT4=2,DICT3=3,DICT2=4,DICT1=5,DICT0=6,BLOCKS=7,DONE=12,BAD=13,mark=[0,0,255,255];function Inflate(){const E=this;E.mode=0,E.method=0,E.was=[0],E.need=0,E.marker=0,E.wbits=0;function A(_){return!_||!_.istate?Z_STREAM_ERROR:(_.total_in=_.total_out=0,_.msg=null,_.istate.mode=BLOCKS,_.istate.blocks.reset(_,null),Z_OK)}E.inflateEnd=function(_){return E.blocks&&E.blocks.free(_),E.blocks=null,Z_OK},E.inflateInit=function(_,I){return _.msg=null,E.blocks=null,I<8||I>15?(E.inflateEnd(_),Z_STREAM_ERROR):(E.wbits=I,_.istate.blocks=new InfBlocks(_,1<<I),A(_),Z_OK)},E.inflate=function(_,I){let B,T;if(!_||!_.istate||!_.next_in)return Z_STREAM_ERROR;const R=_.istate;for(I=I==Z_FINISH?Z_BUF_ERROR:Z_OK,B=Z_BUF_ERROR;;)switch(R.mode){case METHOD:if(_.avail_in===0)return B;if(B=I,_.avail_in--,_.total_in++,((R.method=_.read_byte(_.next_in_index++))&15)!=Z_DEFLATED){R.mode=BAD,_.msg="unknown compression method",R.marker=5;break}if((R.method>>4)+8>R.wbits){R.mode=BAD,_.msg="invalid win size",R.marker=5;break}R.mode=FLAG;case FLAG:if(_.avail_in===0)return B;if(B=I,_.avail_in--,_.total_in++,T=_.read_byte(_.next_in_index++)&255,((R.method<<8)+T)%31!==0){R.mode=BAD,_.msg="incorrect header check",R.marker=5;break}if((T&PRESET_DICT)===0){R.mode=BLOCKS;break}R.mode=DICT4;case DICT4:if(_.avail_in===0)return B;B=I,_.avail_in--,_.total_in++,R.need=(_.read_byte(_.next_in_index++)&255)<<24&4278190080,R.mode=DICT3;case DICT3:if(_.avail_in===0)return B;B=I,_.avail_in--,_.total_in++,R.need+=(_.read_byte(_.next_in_index++)&255)<<16&16711680,R.mode=DICT2;case DICT2:if(_.avail_in===0)return B;B=I,_.avail_in--,_.total_in++,R.need+=(_.read_byte(_.next_in_index++)&255)<<8&65280,R.mode=DICT1;case DICT1:return _.avail_in===0?B:(B=I,_.avail_in--,_.total_in++,R.need+=_.read_byte(_.next_in_index++)&255,R.mode=DICT0,Z_NEED_DICT);case DICT0:return R.mode=BAD,_.msg="need dictionary",R.marker=0,Z_STREAM_ERROR;case BLOCKS:if(B=R.blocks.proc(_,B),B==Z_DATA_ERROR){R.mode=BAD,R.marker=0;break}if(B==Z_OK&&(B=I),B!=Z_STREAM_END)return B;B=I,R.blocks.reset(_,R.was),R.mode=DONE;case DONE:return _.avail_in=0,Z_STREAM_END;case BAD:return Z_DATA_ERROR;default:return Z_STREAM_ERROR}},E.inflateSetDictionary=function(_,I,B){let T=0,R=B;if(!_||!_.istate||_.istate.mode!=DICT0)return Z_STREAM_ERROR;const P=_.istate;return R>=1<<P.wbits&&(R=(1<<P.wbits)-1,T=B-R),P.blocks.set_dictionary(I,T,R),P.mode=BLOCKS,Z_OK},E.inflateSync=function(_){let I,B,T,R,P;if(!_||!_.istate)return Z_STREAM_ERROR;const D=_.istate;if(D.mode!=BAD&&(D.mode=BAD,D.marker=0),(I=_.avail_in)===0)return Z_BUF_ERROR;for(B=_.next_in_index,T=D.marker;I!==0&&T<4;)_.read_byte(B)==mark[T]?T++:_.read_byte(B)!==0?T=0:T=4-T,B++,I--;return _.total_in+=B-_.next_in_index,_.next_in_index=B,_.avail_in=I,D.marker=T,T!=4?Z_DATA_ERROR:(R=_.total_in,P=_.total_out,A(_),_.total_in=R,_.total_out=P,D.mode=BLOCKS,Z_OK)},E.inflateSyncPoint=function(_){return!_||!_.istate||!_.istate.blocks?Z_STREAM_ERROR:_.istate.blocks.sync_point()}}function ZStream(){}ZStream.prototype={inflateInit(E){const A=this;return A.istate=new Inflate,E||(E=MAX_BITS),A.istate.inflateInit(A,E)},inflate(E){const A=this;return A.istate?A.istate.inflate(A,E):Z_STREAM_ERROR},inflateEnd(){const E=this;if(!E.istate)return Z_STREAM_ERROR;const A=E.istate.inflateEnd(E);return E.istate=null,A},inflateSync(){const E=this;return E.istate?E.istate.inflateSync(E):Z_STREAM_ERROR},inflateSetDictionary(E,A){const _=this;return _.istate?_.istate.inflateSetDictionary(_,E,A):Z_STREAM_ERROR},read_byte(E){return this.next_in[E]},read_buf(E,A){return this.next_in.subarray(E,E+A)}};function ZipInflate(E){const A=this,_=new ZStream,I=E&&E.chunkSize?Math.floor(E.chunkSize*2):128*1024,B=Z_NO_FLUSH,T=new Uint8Array(I);let R=!1;_.inflateInit(),_.next_out=T,A.append=function(P,D){const F=[];let L,U,V=0,K=0,J=0;if(P.length!==0){_.next_in_index=0,_.next_in=P,_.avail_in=P.length;do{if(_.next_out_index=0,_.avail_out=I,_.avail_in===0&&!R&&(_.next_in_index=0,R=!0),L=_.inflate(B),R&&L===Z_BUF_ERROR){if(_.avail_in!==0)throw new Error("inflating: bad input")}else if(L!==Z_OK&&L!==Z_STREAM_END)throw new Error("inflating: "+_.msg);if((R||L===Z_STREAM_END)&&_.avail_in===P.length)throw new Error("inflating: bad input");_.next_out_index&&(_.next_out_index===I?F.push(new Uint8Array(T)):F.push(T.subarray(0,_.next_out_index))),J+=_.next_out_index,D&&_.next_in_index>0&&_.next_in_index!=V&&(D(_.next_in_index),V=_.next_in_index)}while(_.avail_in>0||_.avail_out===0);return F.length>1?(U=new Uint8Array(J),F.forEach(function(ee){U.set(ee,K),K+=ee.length})):U=F[0]?new Uint8Array(F[0]):new Uint8Array,U}},A.flush=function(){_.inflateEnd()}}const MAX_32_BITS=4294967295,MAX_16_BITS=65535,COMPRESSION_METHOD_DEFLATE=8,COMPRESSION_METHOD_STORE=0,COMPRESSION_METHOD_AES=99,LOCAL_FILE_HEADER_SIGNATURE=67324752,SPLIT_ZIP_FILE_SIGNATURE=134695760,DATA_DESCRIPTOR_RECORD_SIGNATURE=SPLIT_ZIP_FILE_SIGNATURE,CENTRAL_FILE_HEADER_SIGNATURE=33639248,END_OF_CENTRAL_DIR_SIGNATURE=101010256,ZIP64_END_OF_CENTRAL_DIR_SIGNATURE=101075792,ZIP64_END_OF_CENTRAL_DIR_LOCATOR_SIGNATURE=117853008,END_OF_CENTRAL_DIR_LENGTH=22,ZIP64_END_OF_CENTRAL_DIR_LOCATOR_LENGTH=20,ZIP64_END_OF_CENTRAL_DIR_LENGTH=56,DATA_DESCRIPTOR_RECORD_LENGTH=12,DATA_DESCRIPTOR_RECORD_ZIP_64_LENGTH=20,DATA_DESCRIPTOR_RECORD_SIGNATURE_LENGTH=4,EXTRAFIELD_TYPE_ZIP64=1,EXTRAFIELD_TYPE_AES=39169,EXTRAFIELD_TYPE_NTFS=10,EXTRAFIELD_TYPE_NTFS_TAG1=1,EXTRAFIELD_TYPE_EXTENDED_TIMESTAMP=21589,EXTRAFIELD_TYPE_UNICODE_PATH=28789,EXTRAFIELD_TYPE_UNICODE_COMMENT=25461,EXTRAFIELD_TYPE_USDZ=6534,BITFLAG_ENCRYPTED=1,BITFLAG_LEVEL=6,BITFLAG_DATA_DESCRIPTOR=8,BITFLAG_LANG_ENCODING_FLAG=2048,FILE_ATTR_MSDOS_DIR_MASK=16,FILE_ATTR_UNIX_TYPE_MASK=61440,FILE_ATTR_UNIX_TYPE_DIR=16384,FILE_ATTR_UNIX_EXECUTABLE_MASK=73,DIRECTORY_SIGNATURE="/",HEADER_SIZE=30,HEADER_OFFSET_SIGNATURE=10,HEADER_OFFSET_COMPRESSED_SIZE=14,HEADER_OFFSET_UNCOMPRESSED_SIZE=18,UNDEFINED_VALUE=void 0,UNDEFINED_TYPE="undefined",FUNCTION_TYPE="function";class StreamAdapter{constructor(A){return class extends TransformStream{constructor(_,I){const B=new A(I);super({transform(T,R){R.enqueue(B.append(T))},flush(T){const R=B.flush();R&&T.enqueue(R)}})}}}}const MINIMUM_CHUNK_SIZE=64;let maxWorkers=2;try{typeof navigator!=UNDEFINED_TYPE&&navigator.hardwareConcurrency&&(maxWorkers=navigator.hardwareConcurrency)}catch(E){}const DEFAULT_CONFIGURATION={chunkSize:512*1024,maxWorkers,terminateWorkerTimeout:5e3,useWebWorkers:!0,useCompressionStream:!0,workerScripts:UNDEFINED_VALUE,CompressionStreamNative:typeof CompressionStream!=UNDEFINED_TYPE&&CompressionStream,DecompressionStreamNative:typeof DecompressionStream!=UNDEFINED_TYPE&&DecompressionStream},config=Object.assign({},DEFAULT_CONFIGURATION);function getConfiguration(){return config}function getChunkSize(E){return Math.max(E.chunkSize,MINIMUM_CHUNK_SIZE)}function configure(E){const{baseURL:A,chunkSize:_,maxWorkers:I,terminateWorkerTimeout:B,useCompressionStream:T,useWebWorkers:R,Deflate:P,Inflate:D,CompressionStream:F,DecompressionStream:L,workerScripts:U}=E;if(setIfDefined("baseURL",A),setIfDefined("chunkSize",_),setIfDefined("maxWorkers",I),setIfDefined("terminateWorkerTimeout",B),setIfDefined("useCompressionStream",T),setIfDefined("useWebWorkers",R),P&&(config.CompressionStream=new StreamAdapter(P)),D&&(config.DecompressionStream=new StreamAdapter(D)),setIfDefined("CompressionStream",F),setIfDefined("DecompressionStream",L),U!==UNDEFINED_VALUE){const{deflate:V,inflate:K}=U;if((V||K)&&(config.workerScripts||(config.workerScripts={})),V){if(!Array.isArray(V))throw new Error("workerScripts.deflate must be an array");config.workerScripts.deflate=V}if(K){if(!Array.isArray(K))throw new Error("workerScripts.inflate must be an array");config.workerScripts.inflate=K}}}function setIfDefined(E,A){A!==UNDEFINED_VALUE&&(config[E]=A)}const table$1={application:{"andrew-inset":"ez",annodex:"anx","atom+xml":"atom","atomcat+xml":"atomcat","atomserv+xml":"atomsrv",bbolin:"lin","cu-seeme":"cu","davmount+xml":"davmount",dsptype:"tsp",ecmascript:["es","ecma"],futuresplash:"spl",hta:"hta","java-archive":"jar","java-serialized-object":"ser","java-vm":"class",m3g:"m3g","mac-binhex40":"hqx",mathematica:["nb","ma","mb"],msaccess:"mdb",msword:["doc","dot","wiz"],mxf:"mxf",oda:"oda",ogg:"ogx",pdf:"pdf","pgp-keys":"key","pgp-signature":["asc","sig"],"pics-rules":"prf",postscript:["ps","ai","eps","epsi","epsf","eps2","eps3"],rar:"rar","rdf+xml":"rdf","rss+xml":"rss",rtf:"rtf","xhtml+xml":["xhtml","xht"],xml:["xml","xsl","xsd","xpdl"],"xspf+xml":"xspf",zip:"zip","vnd.android.package-archive":"apk","vnd.cinderella":"cdy","vnd.google-earth.kml+xml":"kml","vnd.google-earth.kmz":"kmz","vnd.mozilla.xul+xml":"xul","vnd.ms-excel":["xls","xlb","xlt","xlm","xla","xlc","xlw"],"vnd.ms-pki.seccat":"cat","vnd.ms-pki.stl":"stl","vnd.ms-powerpoint":["ppt","pps","pot","ppa","pwz"],"vnd.oasis.opendocument.chart":"odc","vnd.oasis.opendocument.database":"odb","vnd.oasis.opendocument.formula":"odf","vnd.oasis.opendocument.graphics":"odg","vnd.oasis.opendocument.graphics-template":"otg","vnd.oasis.opendocument.image":"odi","vnd.oasis.opendocument.presentation":"odp","vnd.oasis.opendocument.presentation-template":"otp","vnd.oasis.opendocument.spreadsheet":"ods","vnd.oasis.opendocument.spreadsheet-template":"ots","vnd.oasis.opendocument.text":"odt","vnd.oasis.opendocument.text-master":["odm","otm"],"vnd.oasis.opendocument.text-template":"ott","vnd.oasis.opendocument.text-web":"oth","vnd.openxmlformats-officedocument.spreadsheetml.sheet":"xlsx","vnd.openxmlformats-officedocument.spreadsheetml.template":"xltx","vnd.openxmlformats-officedocument.presentationml.presentation":"pptx","vnd.openxmlformats-officedocument.presentationml.slideshow":"ppsx","vnd.openxmlformats-officedocument.presentationml.template":"potx","vnd.openxmlformats-officedocument.wordprocessingml.document":"docx","vnd.openxmlformats-officedocument.wordprocessingml.template":"dotx","vnd.smaf":"mmf","vnd.stardivision.calc":"sdc","vnd.stardivision.chart":"sds","vnd.stardivision.draw":"sda","vnd.stardivision.impress":"sdd","vnd.stardivision.math":["sdf","smf"],"vnd.stardivision.writer":["sdw","vor"],"vnd.stardivision.writer-global":"sgl","vnd.sun.xml.calc":"sxc","vnd.sun.xml.calc.template":"stc","vnd.sun.xml.draw":"sxd","vnd.sun.xml.draw.template":"std","vnd.sun.xml.impress":"sxi","vnd.sun.xml.impress.template":"sti","vnd.sun.xml.math":"sxm","vnd.sun.xml.writer":"sxw","vnd.sun.xml.writer.global":"sxg","vnd.sun.xml.writer.template":"stw","vnd.symbian.install":["sis","sisx"],"vnd.visio":["vsd","vst","vss","vsw","vsdx","vssx","vstx","vssm","vstm"],"vnd.wap.wbxml":"wbxml","vnd.wap.wmlc":"wmlc","vnd.wap.wmlscriptc":"wmlsc","vnd.wordperfect":"wpd","vnd.wordperfect5.1":"wp5","x-123":"wk","x-7z-compressed":"7z","x-abiword":"abw","x-apple-diskimage":"dmg","x-bcpio":"bcpio","x-bittorrent":"torrent","x-cbr":["cbr","cba","cbt","cb7"],"x-cbz":"cbz","x-cdf":["cdf","cda"],"x-cdlink":"vcd","x-chess-pgn":"pgn","x-cpio":"cpio","x-csh":"csh","x-director":["dir","dxr","cst","cct","cxt","w3d","fgd","swa"],"x-dms":"dms","x-doom":"wad","x-dvi":"dvi","x-httpd-eruby":"rhtml","x-font":"pcf.Z","x-freemind":"mm","x-gnumeric":"gnumeric","x-go-sgf":"sgf","x-graphing-calculator":"gcf","x-gtar":["gtar","taz"],"x-hdf":"hdf","x-httpd-php":["phtml","pht","php"],"x-httpd-php-source":"phps","x-httpd-php3":"php3","x-httpd-php3-preprocessed":"php3p","x-httpd-php4":"php4","x-httpd-php5":"php5","x-ica":"ica","x-info":"info","x-internet-signup":["ins","isp"],"x-iphone":"iii","x-iso9660-image":"iso","x-java-jnlp-file":"jnlp","x-jmol":"jmz","x-killustrator":"kil","x-latex":"latex","x-lyx":"lyx","x-lzx":"lzx","x-maker":["frm","fb","fbdoc"],"x-ms-wmd":"wmd","x-msdos-program":["com","exe","bat","dll"],"x-netcdf":["nc"],"x-ns-proxy-autoconfig":["pac","dat"],"x-nwc":"nwc","x-object":"o","x-oz-application":"oza","x-pkcs7-certreqresp":"p7r","x-python-code":["pyc","pyo"],"x-qgis":["qgs","shp","shx"],"x-quicktimeplayer":"qtl","x-redhat-package-manager":["rpm","rpa"],"x-ruby":"rb","x-sh":"sh","x-shar":"shar","x-shockwave-flash":["swf","swfl"],"x-silverlight":"scr","x-stuffit":"sit","x-sv4cpio":"sv4cpio","x-sv4crc":"sv4crc","x-tar":"tar","x-tex-gf":"gf","x-tex-pk":"pk","x-texinfo":["texinfo","texi"],"x-trash":["~","%","bak","old","sik"],"x-ustar":"ustar","x-wais-source":"src","x-wingz":"wz","x-x509-ca-cert":["crt","der","cer"],"x-xcf":"xcf","x-xfig":"fig","x-xpinstall":"xpi",applixware:"aw","atomsvc+xml":"atomsvc","ccxml+xml":"ccxml","cdmi-capability":"cdmia","cdmi-container":"cdmic","cdmi-domain":"cdmid","cdmi-object":"cdmio","cdmi-queue":"cdmiq","docbook+xml":"dbk","dssc+der":"dssc","dssc+xml":"xdssc","emma+xml":"emma","epub+zip":"epub",exi:"exi","font-tdpfr":"pfr","gml+xml":"gml","gpx+xml":"gpx",gxf:"gxf",hyperstudio:"stk","inkml+xml":["ink","inkml"],ipfix:"ipfix","jsonml+json":"jsonml","lost+xml":"lostxml","mads+xml":"mads",marc:"mrc","marcxml+xml":"mrcx","mathml+xml":["mathml","mml"],mbox:"mbox","mediaservercontrol+xml":"mscml","metalink+xml":"metalink","metalink4+xml":"meta4","mets+xml":"mets","mods+xml":"mods",mp21:["m21","mp21"],mp4:"mp4s","oebps-package+xml":"opf","omdoc+xml":"omdoc",onenote:["onetoc","onetoc2","onetmp","onepkg"],oxps:"oxps","patch-ops-error+xml":"xer","pgp-encrypted":"pgp",pkcs10:"p10","pkcs7-mime":["p7m","p7c"],"pkcs7-signature":"p7s",pkcs8:"p8","pkix-attr-cert":"ac","pkix-crl":"crl","pkix-pkipath":"pkipath",pkixcmp:"pki","pls+xml":"pls","prs.cww":"cww","pskc+xml":"pskcxml","reginfo+xml":"rif","relax-ng-compact-syntax":"rnc","resource-lists+xml":"rl","resource-lists-diff+xml":"rld","rls-services+xml":"rs","rpki-ghostbusters":"gbr","rpki-manifest":"mft","rpki-roa":"roa","rsd+xml":"rsd","sbml+xml":"sbml","scvp-cv-request":"scq","scvp-cv-response":"scs","scvp-vp-request":"spq","scvp-vp-response":"spp",sdp:"sdp","set-payment-initiation":"setpay","set-registration-initiation":"setreg","shf+xml":"shf","sparql-query":"rq","sparql-results+xml":"srx",srgs:"gram","srgs+xml":"grxml","sru+xml":"sru","ssdl+xml":"ssdl","ssml+xml":"ssml","tei+xml":["tei","teicorpus"],"thraud+xml":"tfi","timestamped-data":"tsd","vnd.3gpp.pic-bw-large":"plb","vnd.3gpp.pic-bw-small":"psb","vnd.3gpp.pic-bw-var":"pvb","vnd.3gpp2.tcap":"tcap","vnd.3m.post-it-notes":"pwn","vnd.accpac.simply.aso":"aso","vnd.accpac.simply.imp":"imp","vnd.acucobol":"acu","vnd.acucorp":["atc","acutc"],"vnd.adobe.air-application-installer-package+zip":"air","vnd.adobe.formscentral.fcdt":"fcdt","vnd.adobe.fxp":["fxp","fxpl"],"vnd.adobe.xdp+xml":"xdp","vnd.adobe.xfdf":"xfdf","vnd.ahead.space":"ahead","vnd.airzip.filesecure.azf":"azf","vnd.airzip.filesecure.azs":"azs","vnd.amazon.ebook":"azw","vnd.americandynamics.acc":"acc","vnd.amiga.ami":"ami","vnd.anser-web-certificate-issue-initiation":"cii","vnd.anser-web-funds-transfer-initiation":"fti","vnd.antix.game-component":"atx","vnd.apple.installer+xml":"mpkg","vnd.apple.mpegurl":"m3u8","vnd.aristanetworks.swi":"swi","vnd.astraea-software.iota":"iota","vnd.audiograph":"aep","vnd.blueice.multipass":"mpm","vnd.bmi":"bmi","vnd.businessobjects":"rep","vnd.chemdraw+xml":"cdxml","vnd.chipnuts.karaoke-mmd":"mmd","vnd.claymore":"cla","vnd.cloanto.rp9":"rp9","vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"vnd.cluetrust.cartomobile-config":"c11amc","vnd.cluetrust.cartomobile-config-pkg":"c11amz","vnd.commonspace":"csp","vnd.contact.cmsg":"cdbcmsg","vnd.cosmocaller":"cmc","vnd.crick.clicker":"clkx","vnd.crick.clicker.keyboard":"clkk","vnd.crick.clicker.palette":"clkp","vnd.crick.clicker.template":"clkt","vnd.crick.clicker.wordbank":"clkw","vnd.criticaltools.wbs+xml":"wbs","vnd.ctc-posml":"pml","vnd.cups-ppd":"ppd","vnd.curl.car":"car","vnd.curl.pcurl":"pcurl","vnd.dart":"dart","vnd.data-vision.rdz":"rdz","vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"vnd.dece.ttml+xml":["uvt","uvvt"],"vnd.dece.unspecified":["uvx","uvvx"],"vnd.dece.zip":["uvz","uvvz"],"vnd.denovo.fcselayout-link":"fe_launch","vnd.dna":"dna","vnd.dolby.mlp":"mlp","vnd.dpgraph":"dpg","vnd.dreamfactory":"dfac","vnd.ds-keypoint":"kpxx","vnd.dvb.ait":"ait","vnd.dvb.service":"svc","vnd.dynageo":"geo","vnd.ecowin.chart":"mag","vnd.enliven":"nml","vnd.epson.esf":"esf","vnd.epson.msf":"msf","vnd.epson.quickanime":"qam","vnd.epson.salt":"slt","vnd.epson.ssf":"ssf","vnd.eszigno3+xml":["es3","et3"],"vnd.ezpix-album":"ez2","vnd.ezpix-package":"ez3","vnd.fdf":"fdf","vnd.fdsn.mseed":"mseed","vnd.fdsn.seed":["seed","dataless"],"vnd.flographit":"gph","vnd.fluxtime.clip":"ftc","vnd.framemaker":["fm","frame","maker","book"],"vnd.frogans.fnc":"fnc","vnd.frogans.ltf":"ltf","vnd.fsc.weblaunch":"fsc","vnd.fujitsu.oasys":"oas","vnd.fujitsu.oasys2":"oa2","vnd.fujitsu.oasys3":"oa3","vnd.fujitsu.oasysgp":"fg5","vnd.fujitsu.oasysprs":"bh2","vnd.fujixerox.ddd":"ddd","vnd.fujixerox.docuworks":"xdw","vnd.fujixerox.docuworks.binder":"xbd","vnd.fuzzysheet":"fzs","vnd.genomatix.tuxedo":"txd","vnd.geogebra.file":"ggb","vnd.geogebra.tool":"ggt","vnd.geometry-explorer":["gex","gre"],"vnd.geonext":"gxt","vnd.geoplan":"g2w","vnd.geospace":"g3w","vnd.gmx":"gmx","vnd.grafeq":["gqf","gqs"],"vnd.groove-account":"gac","vnd.groove-help":"ghf","vnd.groove-identity-message":"gim","vnd.groove-injector":"grv","vnd.groove-tool-message":"gtm","vnd.groove-tool-template":"tpl","vnd.groove-vcard":"vcg","vnd.hal+xml":"hal","vnd.handheld-entertainment+xml":"zmm","vnd.hbci":"hbci","vnd.hhe.lesson-player":"les","vnd.hp-hpgl":"hpgl","vnd.hp-hpid":"hpid","vnd.hp-hps":"hps","vnd.hp-jlyt":"jlt","vnd.hp-pcl":"pcl","vnd.hp-pclxl":"pclxl","vnd.hydrostatix.sof-data":"sfd-hdstx","vnd.ibm.minipay":"mpy","vnd.ibm.modcap":["afp","listafp","list3820"],"vnd.ibm.rights-management":"irm","vnd.ibm.secure-container":"sc","vnd.iccprofile":["icc","icm"],"vnd.igloader":"igl","vnd.immervision-ivp":"ivp","vnd.immervision-ivu":"ivu","vnd.insors.igm":"igm","vnd.intercon.formnet":["xpw","xpx"],"vnd.intergeo":"i2g","vnd.intu.qbo":"qbo","vnd.intu.qfx":"qfx","vnd.ipunplugged.rcprofile":"rcprofile","vnd.irepository.package+xml":"irp","vnd.is-xpr":"xpr","vnd.isac.fcs":"fcs","vnd.jam":"jam","vnd.jcp.javame.midlet-rms":"rms","vnd.jisp":"jisp","vnd.joost.joda-archive":"joda","vnd.kahootz":["ktz","ktr"],"vnd.kde.karbon":"karbon","vnd.kde.kchart":"chrt","vnd.kde.kformula":"kfo","vnd.kde.kivio":"flw","vnd.kde.kontour":"kon","vnd.kde.kpresenter":["kpr","kpt"],"vnd.kde.kspread":"ksp","vnd.kde.kword":["kwd","kwt"],"vnd.kenameaapp":"htke","vnd.kidspiration":"kia","vnd.kinar":["kne","knp"],"vnd.koan":["skp","skd","skt","skm"],"vnd.kodak-descriptor":"sse","vnd.las.las+xml":"lasxml","vnd.llamagraphics.life-balance.desktop":"lbd","vnd.llamagraphics.life-balance.exchange+xml":"lbe","vnd.lotus-1-2-3":"123","vnd.lotus-approach":"apr","vnd.lotus-freelance":"pre","vnd.lotus-notes":"nsf","vnd.lotus-organizer":"org","vnd.lotus-screencam":"scm","vnd.lotus-wordpro":"lwp","vnd.macports.portpkg":"portpkg","vnd.mcd":"mcd","vnd.medcalcdata":"mc1","vnd.mediastation.cdkey":"cdkey","vnd.mfer":"mwf","vnd.mfmp":"mfm","vnd.micrografx.flo":"flo","vnd.micrografx.igx":"igx","vnd.mif":"mif","vnd.mobius.daf":"daf","vnd.mobius.dis":"dis","vnd.mobius.mbk":"mbk","vnd.mobius.mqy":"mqy","vnd.mobius.msl":"msl","vnd.mobius.plc":"plc","vnd.mobius.txf":"txf","vnd.mophun.application":"mpn","vnd.mophun.certificate":"mpc","vnd.ms-artgalry":"cil","vnd.ms-cab-compressed":"cab","vnd.ms-excel.addin.macroenabled.12":"xlam","vnd.ms-excel.sheet.binary.macroenabled.12":"xlsb","vnd.ms-excel.sheet.macroenabled.12":"xlsm","vnd.ms-excel.template.macroenabled.12":"xltm","vnd.ms-fontobject":"eot","vnd.ms-htmlhelp":"chm","vnd.ms-ims":"ims","vnd.ms-lrm":"lrm","vnd.ms-officetheme":"thmx","vnd.ms-powerpoint.addin.macroenabled.12":"ppam","vnd.ms-powerpoint.presentation.macroenabled.12":"pptm","vnd.ms-powerpoint.slide.macroenabled.12":"sldm","vnd.ms-powerpoint.slideshow.macroenabled.12":"ppsm","vnd.ms-powerpoint.template.macroenabled.12":"potm","vnd.ms-project":["mpp","mpt"],"vnd.ms-word.document.macroenabled.12":"docm","vnd.ms-word.template.macroenabled.12":"dotm","vnd.ms-works":["wps","wks","wcm","wdb"],"vnd.ms-wpl":"wpl","vnd.ms-xpsdocument":"xps","vnd.mseq":"mseq","vnd.musician":"mus","vnd.muvee.style":"msty","vnd.mynfc":"taglet","vnd.neurolanguage.nlu":"nlu","vnd.nitf":["ntf","nitf"],"vnd.noblenet-directory":"nnd","vnd.noblenet-sealer":"nns","vnd.noblenet-web":"nnw","vnd.nokia.n-gage.data":"ngdat","vnd.nokia.n-gage.symbian.install":"n-gage","vnd.nokia.radio-preset":"rpst","vnd.nokia.radio-presets":"rpss","vnd.novadigm.edm":"edm","vnd.novadigm.edx":"edx","vnd.novadigm.ext":"ext","vnd.oasis.opendocument.chart-template":"otc","vnd.oasis.opendocument.formula-template":"odft","vnd.oasis.opendocument.image-template":"oti","vnd.olpc-sugar":"xo","vnd.oma.dd2+xml":"dd2","vnd.openofficeorg.extension":"oxt","vnd.openxmlformats-officedocument.presentationml.slide":"sldx","vnd.osgeo.mapguide.package":"mgp","vnd.osgi.dp":"dp","vnd.osgi.subsystem":"esa","vnd.palm":["pdb","pqa","oprc"],"vnd.pawaafile":"paw","vnd.pg.format":"str","vnd.pg.osasli":"ei6","vnd.picsel":"efif","vnd.pmi.widget":"wg","vnd.pocketlearn":"plf","vnd.powerbuilder6":"pbd","vnd.previewsystems.box":"box","vnd.proteus.magazine":"mgz","vnd.publishare-delta-tree":"qps","vnd.pvi.ptid1":"ptid","vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"vnd.realvnc.bed":"bed","vnd.recordare.musicxml":"mxl","vnd.recordare.musicxml+xml":"musicxml","vnd.rig.cryptonote":"cryptonote","vnd.rn-realmedia":"rm","vnd.rn-realmedia-vbr":"rmvb","vnd.route66.link66+xml":"link66","vnd.sailingtracker.track":"st","vnd.seemail":"see","vnd.sema":"sema","vnd.semd":"semd","vnd.semf":"semf","vnd.shana.informed.formdata":"ifm","vnd.shana.informed.formtemplate":"itp","vnd.shana.informed.interchange":"iif","vnd.shana.informed.package":"ipk","vnd.simtech-mindmapper":["twd","twds"],"vnd.smart.teacher":"teacher","vnd.solent.sdkm+xml":["sdkm","sdkd"],"vnd.spotfire.dxp":"dxp","vnd.spotfire.sfs":"sfs","vnd.stepmania.package":"smzip","vnd.stepmania.stepchart":"sm","vnd.sus-calendar":["sus","susp"],"vnd.svd":"svd","vnd.syncml+xml":"xsm","vnd.syncml.dm+wbxml":"bdm","vnd.syncml.dm+xml":"xdm","vnd.tao.intent-module-archive":"tao","vnd.tcpdump.pcap":["pcap","cap","dmp"],"vnd.tmobile-livetv":"tmo","vnd.trid.tpt":"tpt","vnd.triscape.mxs":"mxs","vnd.trueapp":"tra","vnd.ufdl":["ufd","ufdl"],"vnd.uiq.theme":"utz","vnd.umajin":"umj","vnd.unity":"unityweb","vnd.uoml+xml":"uoml","vnd.vcx":"vcx","vnd.visionary":"vis","vnd.vsf":"vsf","vnd.webturbo":"wtb","vnd.wolfram.player":"nbp","vnd.wqd":"wqd","vnd.wt.stf":"stf","vnd.xara":"xar","vnd.xfdl":"xfdl","vnd.yamaha.hv-dic":"hvd","vnd.yamaha.hv-script":"hvs","vnd.yamaha.hv-voice":"hvp","vnd.yamaha.openscoreformat":"osf","vnd.yamaha.openscoreformat.osfpvg+xml":"osfpvg","vnd.yamaha.smaf-audio":"saf","vnd.yamaha.smaf-phrase":"spf","vnd.yellowriver-custom-menu":"cmp","vnd.zul":["zir","zirz"],"vnd.zzazz.deck+xml":"zaz","voicexml+xml":"vxml",widget:"wgt",winhlp:"hlp","wsdl+xml":"wsdl","wspolicy+xml":"wspolicy","x-ace-compressed":"ace","x-authorware-bin":["aab","x32","u32","vox"],"x-authorware-map":"aam","x-authorware-seg":"aas","x-blorb":["blb","blorb"],"x-bzip":"bz","x-bzip2":["bz2","boz"],"x-cfs-compressed":"cfs","x-chat":"chat","x-conference":"nsc","x-dgc-compressed":"dgc","x-dtbncx+xml":"ncx","x-dtbook+xml":"dtb","x-dtbresource+xml":"res","x-eva":"eva","x-font-bdf":"bdf","x-font-ghostscript":"gsf","x-font-linux-psf":"psf","x-font-pcf":"pcf","x-font-snf":"snf","x-font-ttf":["ttf","ttc"],"x-font-type1":["pfa","pfb","pfm","afm"],"x-freearc":"arc","x-gca-compressed":"gca","x-glulx":"ulx","x-gramps-xml":"gramps","x-install-instructions":"install","x-lzh-compressed":["lzh","lha"],"x-mie":"mie","x-mobipocket-ebook":["prc","mobi"],"x-ms-application":"application","x-ms-shortcut":"lnk","x-ms-xbap":"xbap","x-msbinder":"obd","x-mscardfile":"crd","x-msclip":"clp","application/x-ms-installer":"msi","x-msmediaview":["mvb","m13","m14"],"x-msmetafile":["wmf","wmz","emf","emz"],"x-msmoney":"mny","x-mspublisher":"pub","x-msschedule":"scd","x-msterminal":"trm","x-mswrite":"wri","x-nzb":"nzb","x-pkcs12":["p12","pfx"],"x-pkcs7-certificates":["p7b","spc"],"x-research-info-systems":"ris","x-silverlight-app":"xap","x-sql":"sql","x-stuffitx":"sitx","x-subrip":"srt","x-t3vm-image":"t3","x-tex-tfm":"tfm","x-tgif":"obj","x-xliff+xml":"xlf","x-xz":"xz","x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"xaml+xml":"xaml","xcap-diff+xml":"xdf","xenc+xml":"xenc","xml-dtd":"dtd","xop+xml":"xop","xproc+xml":"xpl","xslt+xml":"xslt","xv+xml":["mxml","xhvml","xvml","xvm"],yang:"yang","yin+xml":"yin",envoy:"evy",fractals:"fif","internet-property-stream":"acx",olescript:"axs","vnd.ms-outlook":"msg","vnd.ms-pkicertstore":"sst","x-compress":"z","x-perfmon":["pma","pmc","pmr","pmw"],"ynd.ms-pkipko":"pko",gzip:["gz","tgz"],"smil+xml":["smi","smil"],"vnd.debian.binary-package":["deb","udeb"],"vnd.hzn-3d-crossword":"x3d","vnd.sqlite3":["db","sqlite","sqlite3","db-wal","sqlite-wal","db-shm","sqlite-shm"],"vnd.wap.sic":"sic","vnd.wap.slc":"slc","x-krita":["kra","krz"],"x-perl":["pm","pl"],yaml:["yaml","yml"]},audio:{amr:"amr","amr-wb":"awb",annodex:"axa",basic:["au","snd"],flac:"flac",midi:["mid","midi","kar","rmi"],mpeg:["mpga","mpega","mp3","m4a","mp2a","m2a","m3a"],mpegurl:"m3u",ogg:["oga","ogg","spx"],"prs.sid":"sid","x-aiff":"aifc","x-gsm":"gsm","x-ms-wma":"wma","x-ms-wax":"wax","x-pn-realaudio":"ram","x-realaudio":"ra","x-sd2":"sd2",adpcm:"adp",mp4:"mp4a",s3m:"s3m",silk:"sil","vnd.dece.audio":["uva","uvva"],"vnd.digital-winds":"eol","vnd.dra":"dra","vnd.dts":"dts","vnd.dts.hd":"dtshd","vnd.lucent.voice":"lvp","vnd.ms-playready.media.pya":"pya","vnd.nuera.ecelp4800":"ecelp4800","vnd.nuera.ecelp7470":"ecelp7470","vnd.nuera.ecelp9600":"ecelp9600","vnd.rip":"rip",webm:"weba","x-caf":"caf","x-matroska":"mka","x-pn-realaudio-plugin":"rmp",xm:"xm",aac:"aac",aiff:["aiff","aif","aff"],opus:"opus",wav:"wav"},chemical:{"x-alchemy":"alc","x-cache":["cac","cache"],"x-cache-csf":"csf","x-cactvs-binary":["cbin","cascii","ctab"],"x-cdx":"cdx","x-chem3d":"c3d","x-cif":"cif","x-cmdf":"cmdf","x-cml":"cml","x-compass":"cpa","x-crossfire":"bsd","x-csml":["csml","csm"],"x-ctx":"ctx","x-cxf":["cxf","cef"],"x-embl-dl-nucleotide":["emb","embl"],"x-gamess-input":["inp","gam","gamin"],"x-gaussian-checkpoint":["fch","fchk"],"x-gaussian-cube":"cub","x-gaussian-input":["gau","gjc","gjf"],"x-gaussian-log":"gal","x-gcg8-sequence":"gcg","x-genbank":"gen","x-hin":"hin","x-isostar":["istr","ist"],"x-jcamp-dx":["jdx","dx"],"x-kinemage":"kin","x-macmolecule":"mcm","x-macromodel-input":"mmod","x-mdl-molfile":"mol","x-mdl-rdfile":"rd","x-mdl-rxnfile":"rxn","x-mdl-sdfile":"sd","x-mdl-tgf":"tgf","x-mmcif":"mcif","x-mol2":"mol2","x-molconn-Z":"b","x-mopac-graph":"gpt","x-mopac-input":["mop","mopcrt","zmt"],"x-mopac-out":"moo","x-ncbi-asn1":"asn","x-ncbi-asn1-ascii":["prt","ent"],"x-ncbi-asn1-binary":"val","x-rosdal":"ros","x-swissprot":"sw","x-vamas-iso14976":"vms","x-vmd":"vmd","x-xtel":"xtel","x-xyz":"xyz"},font:{otf:"otf",woff:"woff",woff2:"woff2"},image:{gif:"gif",ief:"ief",jpeg:["jpeg","jpg","jpe","jfif","jfif-tbnl","jif"],pcx:"pcx",png:"png","svg+xml":["svg","svgz"],tiff:["tiff","tif"],"vnd.djvu":["djvu","djv"],"vnd.wap.wbmp":"wbmp","x-canon-cr2":"cr2","x-canon-crw":"crw","x-cmu-raster":"ras","x-coreldraw":"cdr","x-coreldrawpattern":"pat","x-coreldrawtemplate":"cdt","x-corelphotopaint":"cpt","x-epson-erf":"erf","x-icon":"ico","x-jg":"art","x-jng":"jng","x-nikon-nef":"nef","x-olympus-orf":"orf","x-portable-anymap":"pnm","x-portable-bitmap":"pbm","x-portable-graymap":"pgm","x-portable-pixmap":"ppm","x-rgb":"rgb","x-xbitmap":"xbm","x-xpixmap":"xpm","x-xwindowdump":"xwd",bmp:"bmp",cgm:"cgm",g3fax:"g3",ktx:"ktx","prs.btif":"btif",sgi:"sgi","vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"vnd.dwg":"dwg","vnd.dxf":"dxf","vnd.fastbidsheet":"fbs","vnd.fpx":"fpx","vnd.fst":"fst","vnd.fujixerox.edmics-mmr":"mmr","vnd.fujixerox.edmics-rlc":"rlc","vnd.ms-modi":"mdi","vnd.ms-photo":"wdp","vnd.net-fpx":"npx","vnd.xiff":"xif",webp:"webp","x-3ds":"3ds","x-cmx":"cmx","x-freehand":["fh","fhc","fh4","fh5","fh7"],"x-pict":["pic","pct"],"x-tga":"tga","cis-cod":"cod",avif:"avifs",heic:["heif","heic"],pjpeg:["pjpg"],"vnd.adobe.photoshop":"psd","x-adobe-dng":"dng","x-fuji-raf":"raf","x-icns":"icns","x-kodak-dcr":"dcr","x-kodak-k25":"k25","x-kodak-kdc":"kdc","x-minolta-mrw":"mrw","x-panasonic-raw":["raw","rw2","rwl"],"x-pentax-pef":["pef","ptx"],"x-sigma-x3f":"x3f","x-sony-arw":"arw","x-sony-sr2":"sr2","x-sony-srf":"srf"},message:{rfc822:["eml","mime","mht","mhtml","nws"]},model:{iges:["igs","iges"],mesh:["msh","mesh","silo"],vrml:["wrl","vrml"],"x3d+vrml":["x3dv","x3dvz"],"x3d+xml":"x3dz","x3d+binary":["x3db","x3dbz"],"vnd.collada+xml":"dae","vnd.dwf":"dwf","vnd.gdl":"gdl","vnd.gtw":"gtw","vnd.mts":"mts","vnd.usdz+zip":"usdz","vnd.vtu":"vtu"},text:{"cache-manifest":["manifest","appcache"],calendar:["ics","icz","ifb"],css:"css",csv:"csv",h323:"323",html:["html","htm","shtml","stm"],iuls:"uls",plain:["txt","text","brf","conf","def","list","log","in","bas","diff","ksh"],richtext:"rtx",scriptlet:["sct","wsc"],texmacs:"tm","tab-separated-values":"tsv","vnd.sun.j2me.app-descriptor":"jad","vnd.wap.wml":"wml","vnd.wap.wmlscript":"wmls","x-bibtex":"bib","x-boo":"boo","x-c++hdr":["h++","hpp","hxx","hh"],"x-c++src":["c++","cpp","cxx","cc"],"x-component":"htc","x-dsrc":"d","x-diff":"patch","x-haskell":"hs","x-java":"java","x-literate-haskell":"lhs","x-moc":"moc","x-pascal":["p","pas","pp","inc"],"x-pcs-gcd":"gcd","x-python":"py","x-scala":"scala","x-setext":"etx","x-tcl":["tcl","tk"],"x-tex":["tex","ltx","sty","cls"],"x-vcalendar":"vcs","x-vcard":"vcf",n3:"n3","prs.lines.tag":"dsc",sgml:["sgml","sgm"],troff:["t","tr","roff","man","me","ms"],turtle:"ttl","uri-list":["uri","uris","urls"],vcard:"vcard","vnd.curl":"curl","vnd.curl.dcurl":"dcurl","vnd.curl.scurl":"scurl","vnd.curl.mcurl":"mcurl","vnd.dvb.subtitle":"sub","vnd.fly":"fly","vnd.fmi.flexstor":"flx","vnd.graphviz":"gv","vnd.in3d.3dml":"3dml","vnd.in3d.spot":"spot","x-asm":["s","asm"],"x-c":["c","h","dic"],"x-fortran":["f","for","f77","f90"],"x-opml":"opml","x-nfo":"nfo","x-sfv":"sfv","x-uuencode":"uu",webviewhtml:"htt",javascript:"js",json:"json",markdown:["md","markdown","mdown","markdn"],"vnd.wap.si":"si","vnd.wap.sl":"sl"},video:{avif:"avif","3gpp":"3gp",annodex:"axv",dl:"dl",dv:["dif","dv"],fli:"fli",gl:"gl",mpeg:["mpeg","mpg","mpe","m1v","m2v","mp2","mpa","mpv2"],mp4:["mp4","mp4v","mpg4"],quicktime:["qt","mov"],ogg:"ogv","vnd.mpegurl":["mxu","m4u"],"x-flv":"flv","x-la-asf":["lsf","lsx"],"x-mng":"mng","x-ms-asf":["asf","asx","asr"],"x-ms-wm":"wm","x-ms-wmv":"wmv","x-ms-wmx":"wmx","x-ms-wvx":"wvx","x-msvideo":"avi","x-sgi-movie":"movie","x-matroska":["mpv","mkv","mk3d","mks"],"3gpp2":"3g2",h261:"h261",h263:"h263",h264:"h264",jpeg:"jpgv",jpm:["jpm","jpgm"],mj2:["mj2","mjp2"],"vnd.dece.hd":["uvh","uvvh"],"vnd.dece.mobile":["uvm","uvvm"],"vnd.dece.pd":["uvp","uvvp"],"vnd.dece.sd":["uvs","uvvs"],"vnd.dece.video":["uvv","uvvv"],"vnd.dvb.file":"dvb","vnd.fvt":"fvt","vnd.ms-playready.media.pyv":"pyv","vnd.uvvu.mp4":["uvu","uvvu"],"vnd.vivo":"viv",webm:"webm","x-f4v":"f4v","x-m4v":"m4v","x-ms-vob":"vob","x-smv":"smv",mp2t:"ts"},"x-conference":{"x-cooltalk":"ice"},"x-world":{"x-vrml":["vrm","flr","wrz","xaf","xof"]}};(()=>{const E={};for(const A of Object.keys(table$1))for(const _ of Object.keys(table$1[A])){const I=table$1[A][_];if(typeof I=="string")E[I]=A+"/"+_;else for(let B=0;B<I.length;B++)E[I[B]]=A+"/"+_}return E})();const table=[];for(let E=0;E<256;E++){let A=E;for(let _=0;_<8;_++)A&1?A=A>>>1^3988292384:A=A>>>1;table[E]=A}class Crc32{constructor(A){this.crc=A||-1}append(A){let _=this.crc|0;for(let I=0,B=A.length|0;I<B;I++)_=_>>>8^table[(_^A[I])&255];this.crc=_}get(){return~this.crc}}class Crc32Stream extends TransformStream{constructor(){let A;const _=new Crc32;super({transform(I,B){_.append(I),B.enqueue(I)},flush(){const I=new Uint8Array(4);new DataView(I.buffer).setUint32(0,_.get()),A.value=I}}),A=this}}function encodeText(E){if(typeof TextEncoder==UNDEFINED_TYPE){E=unescape(encodeURIComponent(E));const A=new Uint8Array(E.length);for(let _=0;_<A.length;_++)A[_]=E.charCodeAt(_);return A}else return new TextEncoder().encode(E)}const bitArray={concat(E,A){if(E.length===0||A.length===0)return E.concat(A);const _=E[E.length-1],I=bitArray.getPartial(_);return I===32?E.concat(A):bitArray._shiftRight(A,I,_|0,E.slice(0,E.length-1))},bitLength(E){const A=E.length;if(A===0)return 0;const _=E[A-1];return(A-1)*32+bitArray.getPartial(_)},clamp(E,A){if(E.length*32<A)return E;E=E.slice(0,Math.ceil(A/32));const _=E.length;return A=A&31,_>0&&A&&(E[_-1]=bitArray.partial(A,E[_-1]&2147483648>>A-1,1)),E},partial(E,A,_){return E===32?A:(_?A|0:A<<32-E)+E*1099511627776},getPartial(E){return Math.round(E/1099511627776)||32},_shiftRight(E,A,_,I){for(I===void 0&&(I=[]);A>=32;A-=32)I.push(_),_=0;if(A===0)return I.concat(E);for(let R=0;R<E.length;R++)I.push(_|E[R]>>>A),_=E[R]<<32-A;const B=E.length?E[E.length-1]:0,T=bitArray.getPartial(B);return I.push(bitArray.partial(A+T&31,A+T>32?_:I.pop(),1)),I}},codec={bytes:{fromBits(E){const _=bitArray.bitLength(E)/8,I=new Uint8Array(_);let B;for(let T=0;T<_;T++)(T&3)===0&&(B=E[T/4]),I[T]=B>>>24,B<<=8;return I},toBits(E){const A=[];let _,I=0;for(_=0;_<E.length;_++)I=I<<8|E[_],(_&3)===3&&(A.push(I),I=0);return _&3&&A.push(bitArray.partial(8*(_&3),I)),A}}},hash={};hash.sha1=class{constructor(E){const A=this;A.blockSize=512,A._init=[1732584193,4023233417,2562383102,271733878,3285377520],A._key=[1518500249,1859775393,2400959708,3395469782],E?(A._h=E._h.slice(0),A._buffer=E._buffer.slice(0),A._length=E._length):A.reset()}reset(){const E=this;return E._h=E._init.slice(0),E._buffer=[],E._length=0,E}update(E){const A=this;typeof E=="string"&&(E=codec.utf8String.toBits(E));const _=A._buffer=bitArray.concat(A._buffer,E),I=A._length,B=A._length=I+bitArray.bitLength(E);if(B>9007199254740991)throw new Error("Cannot hash more than 2^53 - 1 bits");const T=new Uint32Array(_);let R=0;for(let P=A.blockSize+I-(A.blockSize+I&A.blockSize-1);P<=B;P+=A.blockSize)A._block(T.subarray(16*R,16*(R+1))),R+=1;return _.splice(0,16*R),A}finalize(){const E=this;let A=E._buffer;const _=E._h;A=bitArray.concat(A,[bitArray.partial(1,1)]);for(let I=A.length+2;I&15;I++)A.push(0);for(A.push(Math.floor(E._length/4294967296)),A.push(E._length|0);A.length;)E._block(A.splice(0,16));return E.reset(),_}_f(E,A,_,I){if(E<=19)return A&_|~A&I;if(E<=39)return A^_^I;if(E<=59)return A&_|A&I|_&I;if(E<=79)return A^_^I}_S(E,A){return A<<E|A>>>32-E}_block(E){const A=this,_=A._h,I=Array(80);for(let F=0;F<16;F++)I[F]=E[F];let B=_[0],T=_[1],R=_[2],P=_[3],D=_[4];for(let F=0;F<=79;F++){F>=16&&(I[F]=A._S(1,I[F-3]^I[F-8]^I[F-14]^I[F-16]));const L=A._S(5,B)+A._f(F,T,R,P)+D+I[F]+A._key[Math.floor(F/20)]|0;D=P,P=R,R=A._S(30,T),T=B,B=L}_[0]=_[0]+B|0,_[1]=_[1]+T|0,_[2]=_[2]+R|0,_[3]=_[3]+P|0,_[4]=_[4]+D|0}};const cipher={};cipher.aes=class{constructor(E){const A=this;A._tables=[[[],[],[],[],[]],[[],[],[],[],[]]],A._tables[0][0][0]||A._precompute();const _=A._tables[0][4],I=A._tables[1],B=E.length;let T,R,P,D=1;if(B!==4&&B!==6&&B!==8)throw new Error("invalid aes key size");for(A._key=[R=E.slice(0),P=[]],T=B;T<4*B+28;T++){let F=R[T-1];(T%B===0||B===8&&T%B===4)&&(F=_[F>>>24]<<24^_[F>>16&255]<<16^_[F>>8&255]<<8^_[F&255],T%B===0&&(F=F<<8^F>>>24^D<<24,D=D<<1^(D>>7)*283)),R[T]=R[T-B]^F}for(let F=0;T;F++,T--){const L=R[F&3?T:T-4];T<=4||F<4?P[F]=L:P[F]=I[0][_[L>>>24]]^I[1][_[L>>16&255]]^I[2][_[L>>8&255]]^I[3][_[L&255]]}}encrypt(E){return this._crypt(E,0)}decrypt(E){return this._crypt(E,1)}_precompute(){const E=this._tables[0],A=this._tables[1],_=E[4],I=A[4],B=[],T=[];let R,P,D,F;for(let L=0;L<256;L++)T[(B[L]=L<<1^(L>>7)*283)^L]=L;for(let L=R=0;!_[L];L^=P||1,R=T[R]||1){let U=R^R<<1^R<<2^R<<3^R<<4;U=U>>8^U&255^99,_[L]=U,I[U]=L,F=B[D=B[P=B[L]]];let V=F*16843009^D*65537^P*257^L*16843008,K=B[U]*257^U*16843008;for(let J=0;J<4;J++)E[J][L]=K=K<<24^K>>>8,A[J][U]=V=V<<24^V>>>8}for(let L=0;L<5;L++)E[L]=E[L].slice(0),A[L]=A[L].slice(0)}_crypt(E,A){if(E.length!==4)throw new Error("invalid aes block size");const _=this._key[A],I=_.length/4-2,B=[0,0,0,0],T=this._tables[A],R=T[0],P=T[1],D=T[2],F=T[3],L=T[4];let U=E[0]^_[0],V=E[A?3:1]^_[1],K=E[2]^_[2],J=E[A?1:3]^_[3],ee=4,ie,ne,ce;for(let fe=0;fe<I;fe++)ie=R[U>>>24]^P[V>>16&255]^D[K>>8&255]^F[J&255]^_[ee],ne=R[V>>>24]^P[K>>16&255]^D[J>>8&255]^F[U&255]^_[ee+1],ce=R[K>>>24]^P[J>>16&255]^D[U>>8&255]^F[V&255]^_[ee+2],J=R[J>>>24]^P[U>>16&255]^D[V>>8&255]^F[K&255]^_[ee+3],ee+=4,U=ie,V=ne,K=ce;for(let fe=0;fe<4;fe++)B[A?3&-fe:fe]=L[U>>>24]<<24^L[V>>16&255]<<16^L[K>>8&255]<<8^L[J&255]^_[ee++],ie=U,U=V,V=K,K=J,J=ie;return B}};const random={getRandomValues(E){const A=new Uint32Array(E.buffer),_=I=>{let B=987654321;const T=4294967295;return function(){return B=36969*(B&65535)+(B>>16)&T,I=18e3*(I&65535)+(I>>16)&T,(((B<<16)+I&T)/4294967296+.5)*(Math.random()>.5?1:-1)}};for(let I=0,B;I<E.length;I+=4){const T=_((B||Math.random())*4294967296);B=T()*987654071,A[I/4]=T()*4294967296|0}return E}},mode={};mode.ctrGladman=class{constructor(E,A){this._prf=E,this._initIv=A,this._iv=A}reset(){this._iv=this._initIv}update(E){return this.calculate(this._prf,E,this._iv)}incWord(E){if((E>>24&255)===255){let A=E>>16&255,_=E>>8&255,I=E&255;A===255?(A=0,_===255?(_=0,I===255?I=0:++I):++_):++A,E=0,E+=A<<16,E+=_<<8,E+=I}else E+=1<<24;return E}incCounter(E){(E[0]=this.incWord(E[0]))===0&&(E[1]=this.incWord(E[1]))}calculate(E,A,_){let I;if(!(I=A.length))return[];const B=bitArray.bitLength(A);for(let T=0;T<I;T+=4){this.incCounter(_);const R=E.encrypt(_);A[T]^=R[0],A[T+1]^=R[1],A[T+2]^=R[2],A[T+3]^=R[3]}return bitArray.clamp(A,B)}};const misc={importKey(E){return new misc.hmacSha1(codec.bytes.toBits(E))},pbkdf2(E,A,_,I){if(_=_||1e4,I<0||_<0)throw new Error("invalid params to pbkdf2");const B=(I>>5)+1<<2;let T,R,P,D,F;const L=new ArrayBuffer(B),U=new DataView(L);let V=0;const K=bitArray;for(A=codec.bytes.toBits(A),F=1;V<(B||1);F++){for(T=R=E.encrypt(K.concat(A,[F])),P=1;P<_;P++)for(R=E.encrypt(R),D=0;D<R.length;D++)T[D]^=R[D];for(P=0;V<(B||1)&&P<T.length;P++)U.setInt32(V,T[P]),V+=4}return L.slice(0,I/8)}};misc.hmacSha1=class{constructor(E){const A=this,_=A._hash=hash.sha1,I=[[],[]];A._baseHash=[new _,new _];const B=A._baseHash[0].blockSize/32;E.length>B&&(E=new _().update(E).finalize());for(let T=0;T<B;T++)I[0][T]=E[T]^909522486,I[1][T]=E[T]^1549556828;A._baseHash[0].update(I[0]),A._baseHash[1].update(I[1]),A._resultHash=new _(A._baseHash[0])}reset(){const E=this;E._resultHash=new E._hash(E._baseHash[0]),E._updated=!1}update(E){const A=this;A._updated=!0,A._resultHash.update(E)}digest(){const E=this,A=E._resultHash.finalize(),_=new E._hash(E._baseHash[1]).update(A).finalize();return E.reset(),_}encrypt(E){if(this._updated)throw new Error("encrypt on already updated hmac called!");return this.update(E),this.digest(E)}};const GET_RANDOM_VALUES_SUPPORTED=typeof crypto!=UNDEFINED_TYPE&&typeof crypto.getRandomValues==FUNCTION_TYPE,ERR_INVALID_PASSWORD="Invalid password",ERR_INVALID_SIGNATURE="Invalid signature",ERR_ABORT_CHECK_PASSWORD="zipjs-abort-check-password";function getRandomValues(E){return GET_RANDOM_VALUES_SUPPORTED?crypto.getRandomValues(E):random.getRandomValues(E)}const BLOCK_LENGTH=16,RAW_FORMAT="raw",PBKDF2_ALGORITHM={name:"PBKDF2"},HASH_ALGORITHM={name:"HMAC"},HASH_FUNCTION="SHA-1",BASE_KEY_ALGORITHM=Object.assign({hash:HASH_ALGORITHM},PBKDF2_ALGORITHM),DERIVED_BITS_ALGORITHM=Object.assign({iterations:1e3,hash:{name:HASH_FUNCTION}},PBKDF2_ALGORITHM),DERIVED_BITS_USAGE=["deriveBits"],SALT_LENGTH=[8,12,16],KEY_LENGTH=[16,24,32],SIGNATURE_LENGTH=10,COUNTER_DEFAULT_VALUE=[0,0,0,0],CRYPTO_API_SUPPORTED=typeof crypto!=UNDEFINED_TYPE,subtle=CRYPTO_API_SUPPORTED&&crypto.subtle,SUBTLE_API_SUPPORTED=CRYPTO_API_SUPPORTED&&typeof subtle!=UNDEFINED_TYPE,codecBytes=codec.bytes,Aes=cipher.aes,CtrGladman=mode.ctrGladman,HmacSha1=misc.hmacSha1;let IMPORT_KEY_SUPPORTED=CRYPTO_API_SUPPORTED&&SUBTLE_API_SUPPORTED&&typeof subtle.importKey==FUNCTION_TYPE,DERIVE_BITS_SUPPORTED=CRYPTO_API_SUPPORTED&&SUBTLE_API_SUPPORTED&&typeof subtle.deriveBits==FUNCTION_TYPE;class AESDecryptionStream extends TransformStream{constructor({password:A,rawPassword:_,signed:I,encryptionStrength:B,checkPasswordOnly:T}){super({start(){Object.assign(this,{ready:new Promise(R=>this.resolveReady=R),password:encodePassword(A,_),signed:I,strength:B-1,pending:new Uint8Array})},async transform(R,P){const D=this,{password:F,strength:L,resolveReady:U,ready:V}=D;F?(await createDecryptionKeys(D,L,F,subarray(R,0,SALT_LENGTH[L]+2)),R=subarray(R,SALT_LENGTH[L]+2),T?P.error(new Error(ERR_ABORT_CHECK_PASSWORD)):U()):await V;const K=new Uint8Array(R.length-SIGNATURE_LENGTH-(R.length-SIGNATURE_LENGTH)%BLOCK_LENGTH);P.enqueue(append(D,R,K,0,SIGNATURE_LENGTH,!0))},async flush(R){const{signed:P,ctr:D,hmac:F,pending:L,ready:U}=this;if(F&&D){await U;const V=subarray(L,0,L.length-SIGNATURE_LENGTH),K=subarray(L,L.length-SIGNATURE_LENGTH);let J=new Uint8Array;if(V.length){const ee=toBits(codecBytes,V);F.update(ee);const ie=D.update(ee);J=fromBits(codecBytes,ie)}if(P){const ee=subarray(fromBits(codecBytes,F.digest()),0,SIGNATURE_LENGTH);for(let ie=0;ie<SIGNATURE_LENGTH;ie++)if(ee[ie]!=K[ie])throw new Error(ERR_INVALID_SIGNATURE)}R.enqueue(J)}}})}}class AESEncryptionStream extends TransformStream{constructor({password:A,rawPassword:_,encryptionStrength:I}){let B;super({start(){Object.assign(this,{ready:new Promise(T=>this.resolveReady=T),password:encodePassword(A,_),strength:I-1,pending:new Uint8Array})},async transform(T,R){const P=this,{password:D,strength:F,resolveReady:L,ready:U}=P;let V=new Uint8Array;D?(V=await createEncryptionKeys(P,F,D),L()):await U;const K=new Uint8Array(V.length+T.length-T.length%BLOCK_LENGTH);K.set(V,0),R.enqueue(append(P,T,K,V.length,0))},async flush(T){const{ctr:R,hmac:P,pending:D,ready:F}=this;if(P&&R){await F;let L=new Uint8Array;if(D.length){const U=R.update(toBits(codecBytes,D));P.update(U),L=fromBits(codecBytes,U)}B.signature=fromBits(codecBytes,P.digest()).slice(0,SIGNATURE_LENGTH),T.enqueue(concat(L,B.signature))}}}),B=this}}function append(E,A,_,I,B,T){const{ctr:R,hmac:P,pending:D}=E,F=A.length-B;D.length&&(A=concat(D,A),_=expand(_,F-F%BLOCK_LENGTH));let L;for(L=0;L<=F-BLOCK_LENGTH;L+=BLOCK_LENGTH){const U=toBits(codecBytes,subarray(A,L,L+BLOCK_LENGTH));T&&P.update(U);const V=R.update(U);T||P.update(V),_.set(fromBits(codecBytes,V),L+I)}return E.pending=subarray(A,L),_}async function createDecryptionKeys(E,A,_,I){const B=await createKeys$1(E,A,_,subarray(I,0,SALT_LENGTH[A])),T=subarray(I,SALT_LENGTH[A]);if(B[0]!=T[0]||B[1]!=T[1])throw new Error(ERR_INVALID_PASSWORD)}async function createEncryptionKeys(E,A,_){const I=getRandomValues(new Uint8Array(SALT_LENGTH[A])),B=await createKeys$1(E,A,_,I);return concat(I,B)}async function createKeys$1(E,A,_,I){E.password=null;const B=await importKey(RAW_FORMAT,_,BASE_KEY_ALGORITHM,!1,DERIVED_BITS_USAGE),T=await deriveBits(Object.assign({salt:I},DERIVED_BITS_ALGORITHM),B,8*(KEY_LENGTH[A]*2+2)),R=new Uint8Array(T),P=toBits(codecBytes,subarray(R,0,KEY_LENGTH[A])),D=toBits(codecBytes,subarray(R,KEY_LENGTH[A],KEY_LENGTH[A]*2)),F=subarray(R,KEY_LENGTH[A]*2);return Object.assign(E,{keys:{key:P,authentication:D,passwordVerification:F},ctr:new CtrGladman(new Aes(P),Array.from(COUNTER_DEFAULT_VALUE)),hmac:new HmacSha1(D)}),F}async function importKey(E,A,_,I,B){if(IMPORT_KEY_SUPPORTED)try{return await subtle.importKey(E,A,_,I,B)}catch{return IMPORT_KEY_SUPPORTED=!1,misc.importKey(A)}else return misc.importKey(A)}async function deriveBits(E,A,_){if(DERIVE_BITS_SUPPORTED)try{return await subtle.deriveBits(E,A,_)}catch{return DERIVE_BITS_SUPPORTED=!1,misc.pbkdf2(A,E.salt,DERIVED_BITS_ALGORITHM.iterations,_)}else return misc.pbkdf2(A,E.salt,DERIVED_BITS_ALGORITHM.iterations,_)}function encodePassword(E,A){return A===UNDEFINED_VALUE?encodeText(E):A}function concat(E,A){let _=E;return E.length+A.length&&(_=new Uint8Array(E.length+A.length),_.set(E,0),_.set(A,E.length)),_}function expand(E,A){if(A&&A>E.length){const _=E;E=new Uint8Array(A),E.set(_,0)}return E}function subarray(E,A,_){return E.subarray(A,_)}function fromBits(E,A){return E.fromBits(A)}function toBits(E,A){return E.toBits(A)}const HEADER_LENGTH=12;class ZipCryptoDecryptionStream extends TransformStream{constructor({password:A,passwordVerification:_,checkPasswordOnly:I}){super({start(){Object.assign(this,{password:A,passwordVerification:_}),createKeys(this,A)},transform(B,T){const R=this;if(R.password){const P=decrypt(R,B.subarray(0,HEADER_LENGTH));if(R.password=null,P[HEADER_LENGTH-1]!=R.passwordVerification)throw new Error(ERR_INVALID_PASSWORD);B=B.subarray(HEADER_LENGTH)}I?T.error(new Error(ERR_ABORT_CHECK_PASSWORD)):T.enqueue(decrypt(R,B))}})}}class ZipCryptoEncryptionStream extends TransformStream{constructor({password:A,passwordVerification:_}){super({start(){Object.assign(this,{password:A,passwordVerification:_}),createKeys(this,A)},transform(I,B){const T=this;let R,P;if(T.password){T.password=null;const D=getRandomValues(new Uint8Array(HEADER_LENGTH));D[HEADER_LENGTH-1]=T.passwordVerification,R=new Uint8Array(I.length+D.length),R.set(encrypt(T,D),0),P=HEADER_LENGTH}else R=new Uint8Array(I.length),P=0;R.set(encrypt(T,I),P),B.enqueue(R)}})}}function decrypt(E,A){const _=new Uint8Array(A.length);for(let I=0;I<A.length;I++)_[I]=getByte(E)^A[I],updateKeys(E,_[I]);return _}function encrypt(E,A){const _=new Uint8Array(A.length);for(let I=0;I<A.length;I++)_[I]=getByte(E)^A[I],updateKeys(E,A[I]);return _}function createKeys(E,A){const _=[305419896,591751049,878082192];Object.assign(E,{keys:_,crcKey0:new Crc32(_[0]),crcKey2:new Crc32(_[2])});for(let I=0;I<A.length;I++)updateKeys(E,A.charCodeAt(I))}function updateKeys(E,A){let[_,I,B]=E.keys;E.crcKey0.append([A]),_=~E.crcKey0.get(),I=getInt32(Math.imul(getInt32(I+getInt8(_)),134775813)+1),E.crcKey2.append([I>>>24]),B=~E.crcKey2.get(),E.keys=[_,I,B]}function getByte(E){const A=E.keys[2]|2;return getInt8(Math.imul(A,A^1)>>>8)}function getInt8(E){return E&255}function getInt32(E){return E&4294967295}const ERR_INVALID_UNCOMPRESSED_SIZE="Invalid uncompressed size",COMPRESSION_FORMAT="deflate-raw";class DeflateStream extends TransformStream{constructor(A,{chunkSize:_,CompressionStream:I,CompressionStreamNative:B}){super({});const{compressed:T,encrypted:R,useCompressionStream:P,zipCrypto:D,signed:F,level:L}=A,U=this;let V,K,J=super.readable;(!R||D)&&F&&(V=new Crc32Stream,J=pipeThrough(J,V)),T&&(J=pipeThroughCommpressionStream(J,P,{level:L,chunkSize:_},B,I)),R&&(D?J=pipeThrough(J,new ZipCryptoEncryptionStream(A)):(K=new AESEncryptionStream(A),J=pipeThrough(J,K))),setReadable(U,J,()=>{let ee;R&&!D&&(ee=K.signature),(!R||D)&&F&&(ee=new DataView(V.value.buffer).getUint32(0)),U.signature=ee})}}class InflateStream extends TransformStream{constructor(A,{chunkSize:_,DecompressionStream:I,DecompressionStreamNative:B}){super({});const{zipCrypto:T,encrypted:R,signed:P,signature:D,compressed:F,useCompressionStream:L}=A;let U,V,K=super.readable;R&&(T?K=pipeThrough(K,new ZipCryptoDecryptionStream(A)):(V=new AESDecryptionStream(A),K=pipeThrough(K,V))),F&&(K=pipeThroughCommpressionStream(K,L,{chunkSize:_},B,I)),(!R||T)&&P&&(U=new Crc32Stream,K=pipeThrough(K,U)),setReadable(this,K,()=>{if((!R||T)&&P){const J=new DataView(U.value.buffer);if(D!=J.getUint32(0,!1))throw new Error(ERR_INVALID_SIGNATURE)}})}}function setReadable(E,A,_){A=pipeThrough(A,new TransformStream({flush:_})),Object.defineProperty(E,"readable",{get(){return A}})}function pipeThroughCommpressionStream(E,A,_,I,B){try{const T=A&&I?I:B;E=pipeThrough(E,new T(COMPRESSION_FORMAT,_))}catch(T){if(A)E=pipeThrough(E,new B(COMPRESSION_FORMAT,_));else throw T}return E}function pipeThrough(E,A){return E.pipeThrough(A)}const MESSAGE_EVENT_TYPE="message",MESSAGE_START="start",MESSAGE_PULL="pull",MESSAGE_DATA="data",MESSAGE_ACK_DATA="ack",MESSAGE_CLOSE="close",CODEC_DEFLATE="deflate",CODEC_INFLATE="inflate";class CodecStream extends TransformStream{constructor(A,_){super({});const I=this,{codecType:B}=A;let T;B.startsWith(CODEC_DEFLATE)?T=DeflateStream:B.startsWith(CODEC_INFLATE)&&(T=InflateStream),I.outputSize=0;let R=0;const P=new T(A,_),D=super.readable,F=new TransformStream({transform(U,V){U&&U.length&&(R+=U.length,V.enqueue(U))},flush(){Object.assign(I,{inputSize:R})}}),L=new TransformStream({transform(U,V){if(U&&U.length&&(V.enqueue(U),I.outputSize+=U.length,A.outputSize&&I.outputSize>A.outputSize))throw new Error(ERR_INVALID_UNCOMPRESSED_SIZE)},flush(){const{signature:U}=P;Object.assign(I,{signature:U,inputSize:R})}});Object.defineProperty(I,"readable",{get(){return D.pipeThrough(F).pipeThrough(P).pipeThrough(L)}})}}class ChunkStream extends TransformStream{constructor(A){let _;super({transform:I,flush(B){_&&_.length&&B.enqueue(_)}});function I(B,T){if(_){const R=new Uint8Array(_.length+B.length);R.set(_),R.set(B,_.length),B=R,_=null}B.length>A?(T.enqueue(B.slice(0,A)),I(B.slice(A),T)):_=B}}}let WEB_WORKERS_SUPPORTED=typeof Worker!=UNDEFINED_TYPE;class CodecWorker{constructor(A,{readable:_,writable:I},{options:B,config:T,streamOptions:R,useWebWorkers:P,transferStreams:D,scripts:F},L){const{signal:U}=R;return Object.assign(A,{busy:!0,readable:_.pipeThrough(new ChunkStream(T.chunkSize)).pipeThrough(new ProgressWatcherStream(R),{signal:U}),writable:I,options:Object.assign({},B),scripts:F,transferStreams:D,terminate(){return new Promise(V=>{const{worker:K,busy:J}=A;K?(J?A.resolveTerminated=V:(K.terminate(),V()),A.interface=null):V()})},onTaskFinished(){const{resolveTerminated:V}=A;V&&(A.resolveTerminated=null,A.terminated=!0,A.worker.terminate(),V()),A.busy=!1,L(A)}}),(P&&WEB_WORKERS_SUPPORTED?createWebWorkerInterface:createWorkerInterface)(A,T)}}class ProgressWatcherStream extends TransformStream{constructor({onstart:A,onprogress:_,size:I,onend:B}){let T=0;super({async start(){A&&await callHandler(A,I)},async transform(R,P){T+=R.length,_&&await callHandler(_,T,I),P.enqueue(R)},async flush(){B&&await callHandler(B,T)}})}}async function callHandler(E,...A){try{await E(...A)}catch{}}function createWorkerInterface(E,A){return{run:()=>runWorker$1(E,A)}}function createWebWorkerInterface(E,A){const{baseURL:_,chunkSize:I}=A;if(!E.interface){let B;try{B=getWebWorker(E.scripts[0],_,E)}catch{return WEB_WORKERS_SUPPORTED=!1,createWorkerInterface(E,A)}Object.assign(E,{worker:B,interface:{run:()=>runWebWorker(E,{chunkSize:I})}})}return E.interface}async function runWorker$1({options:E,readable:A,writable:_,onTaskFinished:I},B){let T;try{T=new CodecStream(E,B),await A.pipeThrough(T).pipeTo(_,{preventClose:!0,preventAbort:!0});const{signature:R,inputSize:P,outputSize:D}=T;return{signature:R,inputSize:P,outputSize:D}}catch(R){throw T&&(R.outputSize=T.outputSize),R}finally{I()}}async function runWebWorker(E,A){let _,I;const B=new Promise((V,K)=>{_=V,I=K});Object.assign(E,{reader:null,writer:null,resolveResult:_,rejectResult:I,result:B});const{readable:T,options:R,scripts:P}=E,{writable:D,closed:F}=watchClosedStream(E.writable),L=sendMessage({type:MESSAGE_START,scripts:P.slice(1),options:R,config:A,readable:T,writable:D},E);L||Object.assign(E,{reader:T.getReader(),writer:D.getWriter()});const U=await B;return L||await D.getWriter().close(),await F,U}function watchClosedStream(E){let A;const _=new Promise(B=>A=B);return{writable:new WritableStream({async write(B){const T=E.getWriter();await T.ready,await T.write(B),T.releaseLock()},close(){A()},abort(B){return E.getWriter().abort(B)}}),closed:_}}let classicWorkersSupported=!0,transferStreamsSupported=!0;function getWebWorker(E,A,_){const I={type:"module"};let B,T;typeof E==FUNCTION_TYPE&&(E=E());try{B=new URL(E,A)}catch{B=E}if(classicWorkersSupported)try{T=new Worker(B)}catch{classicWorkersSupported=!1,T=new Worker(B,I)}else T=new Worker(B,I);return T.addEventListener(MESSAGE_EVENT_TYPE,R=>onMessage(R,_)),T}function sendMessage(E,{worker:A,writer:_,onTaskFinished:I,transferStreams:B}){try{const{value:T,readable:R,writable:P}=E,D=[];if(T&&(T.byteLength<T.buffer.byteLength?E.value=T.buffer.slice(0,T.byteLength):E.value=T.buffer,D.push(E.value)),B&&transferStreamsSupported?(R&&D.push(R),P&&D.push(P)):E.readable=E.writable=null,D.length)try{return A.postMessage(E,D),!0}catch{transferStreamsSupported=!1,E.readable=E.writable=null,A.postMessage(E)}else A.postMessage(E)}catch(T){throw _&&_.releaseLock(),I(),T}}async function onMessage({data:E},A){const{type:_,value:I,messageId:B,result:T,error:R}=E,{reader:P,writer:D,resolveResult:F,rejectResult:L,onTaskFinished:U}=A;try{if(R){const{message:K,stack:J,code:ee,name:ie,outputSize:ne}=R,ce=new Error(K);Object.assign(ce,{stack:J,code:ee,name:ie,outputSize:ne}),V(ce)}else{if(_==MESSAGE_PULL){const{value:K,done:J}=await P.read();sendMessage({type:MESSAGE_DATA,value:K,done:J,messageId:B},A)}_==MESSAGE_DATA&&(await D.ready,await D.write(new Uint8Array(I)),sendMessage({type:MESSAGE_ACK_DATA,messageId:B},A)),_==MESSAGE_CLOSE&&V(null,T)}}catch(K){sendMessage({type:MESSAGE_CLOSE,messageId:B},A),V(K)}function V(K,J){K?L(K):F(J),D&&D.releaseLock(),U()}}let pool=[];const pendingRequests=[];let indexWorker=0;async function runWorker(E,A){const{options:_,config:I}=A,{transferStreams:B,useWebWorkers:T,useCompressionStream:R,codecType:P,compressed:D,signed:F,encrypted:L}=_,{workerScripts:U,maxWorkers:V}=I;A.transferStreams=B||B===UNDEFINED_VALUE;const K=!D&&!F&&!L&&!A.transferStreams;return A.useWebWorkers=!K&&(T||T===UNDEFINED_VALUE&&I.useWebWorkers),A.scripts=A.useWebWorkers&&U?U[P]:[],_.useCompressionStream=R||R===UNDEFINED_VALUE&&I.useCompressionStream,(await J()).run();async function J(){const ie=pool.find(ne=>!ne.busy);if(ie)return clearTerminateTimeout(ie),new CodecWorker(ie,E,A,ee);if(pool.length<V){const ne={indexWorker};return indexWorker++,pool.push(ne),new CodecWorker(ne,E,A,ee)}else return new Promise(ne=>pendingRequests.push({resolve:ne,stream:E,workerOptions:A}))}function ee(ie){if(pendingRequests.length){const[{resolve:ne,stream:ce,workerOptions:fe}]=pendingRequests.splice(0,1);ne(new CodecWorker(ie,ce,fe,ee))}else ie.worker?(clearTerminateTimeout(ie),terminateWorker(ie,A)):pool=pool.filter(ne=>ne!=ie)}}function terminateWorker(E,A){const{config:_}=A,{terminateWorkerTimeout:I}=_;Number.isFinite(I)&&I>=0&&(E.terminated?E.terminated=!1:E.terminateTimeout=setTimeout(async()=>{pool=pool.filter(B=>B!=E);try{await E.terminate()}catch{}},I))}function clearTerminateTimeout(E){const{terminateTimeout:A}=E;A&&(clearTimeout(A),E.terminateTimeout=null)}function e(E,A={}){const _=`const{Array:e,Object:t,Number:n,Math:r,Error:s,Uint8Array:i,Uint16Array:o,Uint32Array:c,Int32Array:f,Map:a,DataView:l,Promise:u,TextEncoder:w,crypto:h,postMessage:d,TransformStream:p,ReadableStream:y,WritableStream:m,CompressionStream:b,DecompressionStream:g}=self,k=void 0,v="undefined",S="function";class z{constructor(e){return class extends p{constructor(t,n){const r=new e(n);super({transform(e,t){t.enqueue(r.append(e))},flush(e){const t=r.flush();t&&e.enqueue(t)}})}}}}const C=[];for(let e=0;256>e;e++){let t=e;for(let e=0;8>e;e++)1&t?t=t>>>1^3988292384:t>>>=1;C[e]=t}class x{constructor(e){this.t=e||-1}append(e){let t=0|this.t;for(let n=0,r=0|e.length;r>n;n++)t=t>>>8^C[255&(t^e[n])];this.t=t}get(){return~this.t}}class A extends p{constructor(){let e;const t=new x;super({transform(e,n){t.append(e),n.enqueue(e)},flush(){const n=new i(4);new l(n.buffer).setUint32(0,t.get()),e.value=n}}),e=this}}const I={concat(e,t){if(0===e.length||0===t.length)return e.concat(t);const n=e[e.length-1],r=I.i(n);return 32===r?e.concat(t):I.o(t,r,0|n,e.slice(0,e.length-1))},l(e){const t=e.length;if(0===t)return 0;const n=e[t-1];return 32*(t-1)+I.i(n)},u(e,t){if(32*e.length<t)return e;const n=(e=e.slice(0,r.ceil(t/32))).length;return t&=31,n>0&&t&&(e[n-1]=I.h(t,e[n-1]&2147483648>>t-1,1)),e},h:(e,t,n)=>32===e?t:(n?0|t:t<<32-e)+1099511627776*e,i:e=>r.round(e/1099511627776)||32,o(e,t,n,r){for(void 0===r&&(r=[]);t>=32;t-=32)r.push(n),n=0;if(0===t)return r.concat(e);for(let s=0;s<e.length;s++)r.push(n|e[s]>>>t),n=e[s]<<32-t;const s=e.length?e[e.length-1]:0,i=I.i(s);return r.push(I.h(t+i&31,t+i>32?n:r.pop(),1)),r}},_={bytes:{p(e){const t=I.l(e)/8,n=new i(t);let r;for(let s=0;t>s;s++)3&s||(r=e[s/4]),n[s]=r>>>24,r<<=8;return n},m(e){const t=[];let n,r=0;for(n=0;n<e.length;n++)r=r<<8|e[n],3&~n||(t.push(r),r=0);return 3&n&&t.push(I.h(8*(3&n),r)),t}}},P=class{constructor(e){const t=this;t.blockSize=512,t.k=[1732584193,4023233417,2562383102,271733878,3285377520],t.v=[1518500249,1859775393,2400959708,3395469782],e?(t.S=e.S.slice(0),t.C=e.C.slice(0),t.A=e.A):t.reset()}reset(){const e=this;return e.S=e.k.slice(0),e.C=[],e.A=0,e}update(e){const t=this;"string"==typeof e&&(e=_.I.m(e));const n=t.C=I.concat(t.C,e),r=t.A,i=t.A=r+I.l(e);if(i>9007199254740991)throw new s("Cannot hash more than 2^53 - 1 bits");const o=new c(n);let f=0;for(let e=t.blockSize+r-(t.blockSize+r&t.blockSize-1);i>=e;e+=t.blockSize)t._(o.subarray(16*f,16*(f+1))),f+=1;return n.splice(0,16*f),t}P(){const e=this;let t=e.C;const n=e.S;t=I.concat(t,[I.h(1,1)]);for(let e=t.length+2;15&e;e++)t.push(0);for(t.push(r.floor(e.A/4294967296)),t.push(0|e.A);t.length;)e._(t.splice(0,16));return e.reset(),n}D(e,t,n,r){return e>19?e>39?e>59?e>79?void 0:t^n^r:t&n|t&r|n&r:t^n^r:t&n|~t&r}V(e,t){return t<<e|t>>>32-e}_(t){const n=this,s=n.S,i=e(80);for(let e=0;16>e;e++)i[e]=t[e];let o=s[0],c=s[1],f=s[2],a=s[3],l=s[4];for(let e=0;79>=e;e++){16>e||(i[e]=n.V(1,i[e-3]^i[e-8]^i[e-14]^i[e-16]));const t=n.V(5,o)+n.D(e,c,f,a)+l+i[e]+n.v[r.floor(e/20)]|0;l=a,a=f,f=n.V(30,c),c=o,o=t}s[0]=s[0]+o|0,s[1]=s[1]+c|0,s[2]=s[2]+f|0,s[3]=s[3]+a|0,s[4]=s[4]+l|0}},D={getRandomValues(e){const t=new c(e.buffer),n=e=>{let t=987654321;const n=4294967295;return()=>(t=36969*(65535&t)+(t>>16)&n,(((t<<16)+(e=18e3*(65535&e)+(e>>16)&n)&n)/4294967296+.5)*(r.random()>.5?1:-1))};for(let s,i=0;i<e.length;i+=4){const e=n(4294967296*(s||r.random()));s=987654071*e(),t[i/4]=4294967296*e()|0}return e}},V={importKey:e=>new V.R(_.bytes.m(e)),B(e,t,n,r){if(n=n||1e4,0>r||0>n)throw new s("invalid params to pbkdf2");const i=1+(r>>5)<<2;let o,c,f,a,u;const w=new ArrayBuffer(i),h=new l(w);let d=0;const p=I;for(t=_.bytes.m(t),u=1;(i||1)>d;u++){for(o=c=e.encrypt(p.concat(t,[u])),f=1;n>f;f++)for(c=e.encrypt(c),a=0;a<c.length;a++)o[a]^=c[a];for(f=0;(i||1)>d&&f<o.length;f++)h.setInt32(d,o[f]),d+=4}return w.slice(0,r/8)},R:class{constructor(e){const t=this,n=t.M=P,r=[[],[]];t.U=[new n,new n];const s=t.U[0].blockSize/32;e.length>s&&(e=(new n).update(e).P());for(let t=0;s>t;t++)r[0][t]=909522486^e[t],r[1][t]=1549556828^e[t];t.U[0].update(r[0]),t.U[1].update(r[1]),t.K=new n(t.U[0])}reset(){const e=this;e.K=new e.M(e.U[0]),e.N=!1}update(e){this.N=!0,this.K.update(e)}digest(){const e=this,t=e.K.P(),n=new e.M(e.U[1]).update(t).P();return e.reset(),n}encrypt(e){if(this.N)throw new s("encrypt on already updated hmac called!");return this.update(e),this.digest(e)}}},R=typeof h!=v&&typeof h.getRandomValues==S,B="Invalid password",E="Invalid signature",M="zipjs-abort-check-password";function U(e){return R?h.getRandomValues(e):D.getRandomValues(e)}const K=16,N={name:"PBKDF2"},O=t.assign({hash:{name:"HMAC"}},N),T=t.assign({iterations:1e3,hash:{name:"SHA-1"}},N),W=["deriveBits"],j=[8,12,16],H=[16,24,32],L=10,F=[0,0,0,0],q=typeof h!=v,G=q&&h.subtle,J=q&&typeof G!=v,Q=_.bytes,X=class{constructor(e){const t=this;t.O=[[[],[],[],[],[]],[[],[],[],[],[]]],t.O[0][0][0]||t.T();const n=t.O[0][4],r=t.O[1],i=e.length;let o,c,f,a=1;if(4!==i&&6!==i&&8!==i)throw new s("invalid aes key size");for(t.v=[c=e.slice(0),f=[]],o=i;4*i+28>o;o++){let e=c[o-1];(o%i===0||8===i&&o%i===4)&&(e=n[e>>>24]<<24^n[e>>16&255]<<16^n[e>>8&255]<<8^n[255&e],o%i===0&&(e=e<<8^e>>>24^a<<24,a=a<<1^283*(a>>7))),c[o]=c[o-i]^e}for(let e=0;o;e++,o--){const t=c[3&e?o:o-4];f[e]=4>=o||4>e?t:r[0][n[t>>>24]]^r[1][n[t>>16&255]]^r[2][n[t>>8&255]]^r[3][n[255&t]]}}encrypt(e){return this.W(e,0)}decrypt(e){return this.W(e,1)}T(){const e=this.O[0],t=this.O[1],n=e[4],r=t[4],s=[],i=[];let o,c,f,a;for(let e=0;256>e;e++)i[(s[e]=e<<1^283*(e>>7))^e]=e;for(let l=o=0;!n[l];l^=c||1,o=i[o]||1){let i=o^o<<1^o<<2^o<<3^o<<4;i=i>>8^255&i^99,n[l]=i,r[i]=l,a=s[f=s[c=s[l]]];let u=16843009*a^65537*f^257*c^16843008*l,w=257*s[i]^16843008*i;for(let n=0;4>n;n++)e[n][l]=w=w<<24^w>>>8,t[n][i]=u=u<<24^u>>>8}for(let n=0;5>n;n++)e[n]=e[n].slice(0),t[n]=t[n].slice(0)}W(e,t){if(4!==e.length)throw new s("invalid aes block size");const n=this.v[t],r=n.length/4-2,i=[0,0,0,0],o=this.O[t],c=o[0],f=o[1],a=o[2],l=o[3],u=o[4];let w,h,d,p=e[0]^n[0],y=e[t?3:1]^n[1],m=e[2]^n[2],b=e[t?1:3]^n[3],g=4;for(let e=0;r>e;e++)w=c[p>>>24]^f[y>>16&255]^a[m>>8&255]^l[255&b]^n[g],h=c[y>>>24]^f[m>>16&255]^a[b>>8&255]^l[255&p]^n[g+1],d=c[m>>>24]^f[b>>16&255]^a[p>>8&255]^l[255&y]^n[g+2],b=c[b>>>24]^f[p>>16&255]^a[y>>8&255]^l[255&m]^n[g+3],g+=4,p=w,y=h,m=d;for(let e=0;4>e;e++)i[t?3&-e:e]=u[p>>>24]<<24^u[y>>16&255]<<16^u[m>>8&255]<<8^u[255&b]^n[g++],w=p,p=y,y=m,m=b,b=w;return i}},Y=class{constructor(e,t){this.j=e,this.H=t,this.L=t}reset(){this.L=this.H}update(e){return this.F(this.j,e,this.L)}q(e){if(255&~(e>>24))e+=1<<24;else{let t=e>>16&255,n=e>>8&255,r=255&e;255===t?(t=0,255===n?(n=0,255===r?r=0:++r):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=r}return e}G(e){0===(e[0]=this.q(e[0]))&&(e[1]=this.q(e[1]))}F(e,t,n){let r;if(!(r=t.length))return[];const s=I.l(t);for(let s=0;r>s;s+=4){this.G(n);const r=e.encrypt(n);t[s]^=r[0],t[s+1]^=r[1],t[s+2]^=r[2],t[s+3]^=r[3]}return I.u(t,s)}},Z=V.R;let $=q&&J&&typeof G.importKey==S,ee=q&&J&&typeof G.deriveBits==S;class te extends p{constructor({password:e,rawPassword:n,signed:r,encryptionStrength:o,checkPasswordOnly:c}){super({start(){t.assign(this,{ready:new u(e=>this.J=e),password:ie(e,n),signed:r,X:o-1,pending:new i})},async transform(e,t){const n=this,{password:r,X:o,J:f,ready:a}=n;r?(await(async(e,t,n,r)=>{const i=await se(e,t,n,ce(r,0,j[t])),o=ce(r,j[t]);if(i[0]!=o[0]||i[1]!=o[1])throw new s(B)})(n,o,r,ce(e,0,j[o]+2)),e=ce(e,j[o]+2),c?t.error(new s(M)):f()):await a;const l=new i(e.length-L-(e.length-L)%K);t.enqueue(re(n,e,l,0,L,!0))},async flush(e){const{signed:t,Y:n,Z:r,pending:o,ready:c}=this;if(r&&n){await c;const f=ce(o,0,o.length-L),a=ce(o,o.length-L);let l=new i;if(f.length){const e=ae(Q,f);r.update(e);const t=n.update(e);l=fe(Q,t)}if(t){const e=ce(fe(Q,r.digest()),0,L);for(let t=0;L>t;t++)if(e[t]!=a[t])throw new s(E)}e.enqueue(l)}}})}}class ne extends p{constructor({password:e,rawPassword:n,encryptionStrength:r}){let s;super({start(){t.assign(this,{ready:new u(e=>this.J=e),password:ie(e,n),X:r-1,pending:new i})},async transform(e,t){const n=this,{password:r,X:s,J:o,ready:c}=n;let f=new i;r?(f=await(async(e,t,n)=>{const r=U(new i(j[t]));return oe(r,await se(e,t,n,r))})(n,s,r),o()):await c;const a=new i(f.length+e.length-e.length%K);a.set(f,0),t.enqueue(re(n,e,a,f.length,0))},async flush(e){const{Y:t,Z:n,pending:r,ready:o}=this;if(n&&t){await o;let c=new i;if(r.length){const e=t.update(ae(Q,r));n.update(e),c=fe(Q,e)}s.signature=fe(Q,n.digest()).slice(0,L),e.enqueue(oe(c,s.signature))}}}),s=this}}function re(e,t,n,r,s,o){const{Y:c,Z:f,pending:a}=e,l=t.length-s;let u;for(a.length&&(t=oe(a,t),n=((e,t)=>{if(t&&t>e.length){const n=e;(e=new i(t)).set(n,0)}return e})(n,l-l%K)),u=0;l-K>=u;u+=K){const e=ae(Q,ce(t,u,u+K));o&&f.update(e);const s=c.update(e);o||f.update(s),n.set(fe(Q,s),u+r)}return e.pending=ce(t,u),n}async function se(n,r,s,o){n.password=null;const c=await(async(e,t,n,r,s)=>{if(!$)return V.importKey(t);try{return await G.importKey("raw",t,n,!1,s)}catch(e){return $=!1,V.importKey(t)}})(0,s,O,0,W),f=await(async(e,t,n)=>{if(!ee)return V.B(t,e.salt,T.iterations,n);try{return await G.deriveBits(e,t,n)}catch(r){return ee=!1,V.B(t,e.salt,T.iterations,n)}})(t.assign({salt:o},T),c,8*(2*H[r]+2)),a=new i(f),l=ae(Q,ce(a,0,H[r])),u=ae(Q,ce(a,H[r],2*H[r])),w=ce(a,2*H[r]);return t.assign(n,{keys:{key:l,$:u,passwordVerification:w},Y:new Y(new X(l),e.from(F)),Z:new Z(u)}),w}function ie(e,t){return t===k?(e=>{if(typeof w==v){const t=new i((e=unescape(encodeURIComponent(e))).length);for(let n=0;n<t.length;n++)t[n]=e.charCodeAt(n);return t}return(new w).encode(e)})(e):t}function oe(e,t){let n=e;return e.length+t.length&&(n=new i(e.length+t.length),n.set(e,0),n.set(t,e.length)),n}function ce(e,t,n){return e.subarray(t,n)}function fe(e,t){return e.p(t)}function ae(e,t){return e.m(t)}class le extends p{constructor({password:e,passwordVerification:n,checkPasswordOnly:r}){super({start(){t.assign(this,{password:e,passwordVerification:n}),de(this,e)},transform(e,t){const n=this;if(n.password){const t=we(n,e.subarray(0,12));if(n.password=null,t[11]!=n.passwordVerification)throw new s(B);e=e.subarray(12)}r?t.error(new s(M)):t.enqueue(we(n,e))}})}}class ue extends p{constructor({password:e,passwordVerification:n}){super({start(){t.assign(this,{password:e,passwordVerification:n}),de(this,e)},transform(e,t){const n=this;let r,s;if(n.password){n.password=null;const t=U(new i(12));t[11]=n.passwordVerification,r=new i(e.length+t.length),r.set(he(n,t),0),s=12}else r=new i(e.length),s=0;r.set(he(n,e),s),t.enqueue(r)}})}}function we(e,t){const n=new i(t.length);for(let r=0;r<t.length;r++)n[r]=ye(e)^t[r],pe(e,n[r]);return n}function he(e,t){const n=new i(t.length);for(let r=0;r<t.length;r++)n[r]=ye(e)^t[r],pe(e,t[r]);return n}function de(e,n){const r=[305419896,591751049,878082192];t.assign(e,{keys:r,ee:new x(r[0]),te:new x(r[2])});for(let t=0;t<n.length;t++)pe(e,n.charCodeAt(t))}function pe(e,t){let[n,s,i]=e.keys;e.ee.append([t]),n=~e.ee.get(),s=be(r.imul(be(s+me(n)),134775813)+1),e.te.append([s>>>24]),i=~e.te.get(),e.keys=[n,s,i]}function ye(e){const t=2|e.keys[2];return me(r.imul(t,1^t)>>>8)}function me(e){return 255&e}function be(e){return 4294967295&e}const ge="deflate-raw";class ke extends p{constructor(e,{chunkSize:t,CompressionStream:n,CompressionStreamNative:r}){super({});const{compressed:s,encrypted:i,useCompressionStream:o,zipCrypto:c,signed:f,level:a}=e,u=this;let w,h,d=super.readable;i&&!c||!f||(w=new A,d=Ce(d,w)),s&&(d=ze(d,o,{level:a,chunkSize:t},r,n)),i&&(c?d=Ce(d,new ue(e)):(h=new ne(e),d=Ce(d,h))),Se(u,d,()=>{let e;i&&!c&&(e=h.signature),i&&!c||!f||(e=new l(w.value.buffer).getUint32(0)),u.signature=e})}}class ve extends p{constructor(e,{chunkSize:t,DecompressionStream:n,DecompressionStreamNative:r}){super({});const{zipCrypto:i,encrypted:o,signed:c,signature:f,compressed:a,useCompressionStream:u}=e;let w,h,d=super.readable;o&&(i?d=Ce(d,new le(e)):(h=new te(e),d=Ce(d,h))),a&&(d=ze(d,u,{chunkSize:t},r,n)),o&&!i||!c||(w=new A,d=Ce(d,w)),Se(this,d,()=>{if((!o||i)&&c){const e=new l(w.value.buffer);if(f!=e.getUint32(0,!1))throw new s(E)}})}}function Se(e,n,r){n=Ce(n,new p({flush:r})),t.defineProperty(e,"readable",{get:()=>n})}function ze(e,t,n,r,s){try{e=Ce(e,new(t&&r?r:s)(ge,n))}catch(r){if(!t)throw r;e=Ce(e,new s(ge,n))}return e}function Ce(e,t){return e.pipeThrough(t)}const xe="data",Ae="close";class Ie extends p{constructor(e,n){super({});const r=this,{codecType:i}=e;let o;i.startsWith("deflate")?o=ke:i.startsWith("inflate")&&(o=ve),r.outputSize=0;let c=0;const f=new o(e,n),a=super.readable,l=new p({transform(e,t){e&&e.length&&(c+=e.length,t.enqueue(e))},flush(){t.assign(r,{inputSize:c})}}),u=new p({transform(t,n){if(t&&t.length&&(n.enqueue(t),r.outputSize+=t.length,e.outputSize&&r.outputSize>e.outputSize))throw new s("Invalid uncompressed size")},flush(){const{signature:e}=f;t.assign(r,{signature:e,inputSize:c})}});t.defineProperty(r,"readable",{get:()=>a.pipeThrough(l).pipeThrough(f).pipeThrough(u)})}}class _e extends p{constructor(e){let t;super({transform:function n(r,s){if(t){const e=new i(t.length+r.length);e.set(t),e.set(r,t.length),r=e,t=null}r.length>e?(s.enqueue(r.slice(0,e)),n(r.slice(e),s)):t=r},flush(e){t&&t.length&&e.enqueue(t)}})}}const Pe=new a,De=new a;let Ve,Re=0,Be=!0;async function Ee(e){try{const{options:t,scripts:r,config:s}=e;if(r&&r.length)try{Be?importScripts.apply(k,r):await Me(r)}catch(e){Be=!1,await Me(r)}self.initCodec&&self.initCodec(),s.CompressionStreamNative=self.CompressionStream,s.DecompressionStreamNative=self.DecompressionStream,self.Deflate&&(s.CompressionStream=new z(self.Deflate)),self.Inflate&&(s.DecompressionStream=new z(self.Inflate));const i={highWaterMark:1},o=e.readable||new y({async pull(e){const t=new u(e=>Pe.set(Re,e));Ue({type:"pull",messageId:Re}),Re=(Re+1)%n.MAX_SAFE_INTEGER;const{value:r,done:s}=await t;e.enqueue(r),s&&e.close()}},i),c=e.writable||new m({async write(e){let t;const r=new u(e=>t=e);De.set(Re,t),Ue({type:xe,value:e,messageId:Re}),Re=(Re+1)%n.MAX_SAFE_INTEGER,await r}},i),f=new Ie(t,s);Ve=new AbortController;const{signal:a}=Ve;await o.pipeThrough(f).pipeThrough(new _e(s.chunkSize)).pipeTo(c,{signal:a,preventClose:!0,preventAbort:!0}),await c.getWriter().close();const{signature:l,inputSize:w,outputSize:h}=f;Ue({type:Ae,result:{signature:l,inputSize:w,outputSize:h}})}catch(e){e.outputSize=0,Ke(e)}}async function Me(e){for(const t of e)await import(t)}function Ue(e){let{value:t}=e;if(t)if(t.length)try{t=new i(t),e.value=t.buffer,d(e,[e.value])}catch(t){d(e)}else d(e);else d(e)}function Ke(e=new s("Unknown error")){const{message:t,stack:n,code:r,name:i,outputSize:o}=e;d({error:{message:t,stack:n,code:r,name:i,outputSize:o}})}addEventListener("message",({data:e})=>{const{type:t,messageId:n,value:r,done:s}=e;try{if("start"==t&&Ee(e),t==xe){const e=Pe.get(n);Pe.delete(n),e({value:new i(r),done:s})}if("ack"==t){const e=De.get(n);De.delete(n),e()}t==Ae&&Ve.abort()}catch(e){Ke(e)}});const Ne=-2;function Oe(t){return Te(t.map(([t,n])=>new e(t).fill(n,0,t)))}function Te(t){return t.reduce((t,n)=>t.concat(e.isArray(n)?Te(n):n),[])}const We=[0,1,2,3].concat(...Oe([[2,4],[2,5],[4,6],[4,7],[8,8],[8,9],[16,10],[16,11],[32,12],[32,13],[64,14],[64,15],[2,0],[1,16],[1,17],[2,18],[2,19],[4,20],[4,21],[8,22],[8,23],[16,24],[16,25],[32,26],[32,27],[64,28],[64,29]]));function je(){const e=this;function t(e,t){let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}e.ne=n=>{const s=e.re,i=e.ie.se,o=e.ie.oe;let c,f,a,l=-1;for(n.ce=0,n.fe=573,c=0;o>c;c++)0!==s[2*c]?(n.ae[++n.ce]=l=c,n.le[c]=0):s[2*c+1]=0;for(;2>n.ce;)a=n.ae[++n.ce]=2>l?++l:0,s[2*a]=1,n.le[a]=0,n.ue--,i&&(n.we-=i[2*a+1]);for(e.he=l,c=r.floor(n.ce/2);c>=1;c--)n.de(s,c);a=o;do{c=n.ae[1],n.ae[1]=n.ae[n.ce--],n.de(s,1),f=n.ae[1],n.ae[--n.fe]=c,n.ae[--n.fe]=f,s[2*a]=s[2*c]+s[2*f],n.le[a]=r.max(n.le[c],n.le[f])+1,s[2*c+1]=s[2*f+1]=a,n.ae[1]=a++,n.de(s,1)}while(n.ce>=2);n.ae[--n.fe]=n.ae[1],(t=>{const n=e.re,r=e.ie.se,s=e.ie.pe,i=e.ie.ye,o=e.ie.me;let c,f,a,l,u,w,h=0;for(l=0;15>=l;l++)t.be[l]=0;for(n[2*t.ae[t.fe]+1]=0,c=t.fe+1;573>c;c++)f=t.ae[c],l=n[2*n[2*f+1]+1]+1,l>o&&(l=o,h++),n[2*f+1]=l,f>e.he||(t.be[l]++,u=0,i>f||(u=s[f-i]),w=n[2*f],t.ue+=w*(l+u),r&&(t.we+=w*(r[2*f+1]+u)));if(0!==h){do{for(l=o-1;0===t.be[l];)l--;t.be[l]--,t.be[l+1]+=2,t.be[o]--,h-=2}while(h>0);for(l=o;0!==l;l--)for(f=t.be[l];0!==f;)a=t.ae[--c],a>e.he||(n[2*a+1]!=l&&(t.ue+=(l-n[2*a+1])*n[2*a],n[2*a+1]=l),f--)}})(n),((e,n,r)=>{const s=[];let i,o,c,f=0;for(i=1;15>=i;i++)s[i]=f=f+r[i-1]<<1;for(o=0;n>=o;o++)c=e[2*o+1],0!==c&&(e[2*o]=t(s[c]++,c))})(s,e.he,n.be)}}function He(e,t,n,r,s){const i=this;i.se=e,i.pe=t,i.ye=n,i.oe=r,i.me=s}je.ge=[0,1,2,3,4,5,6,7].concat(...Oe([[2,8],[2,9],[2,10],[2,11],[4,12],[4,13],[4,14],[4,15],[8,16],[8,17],[8,18],[8,19],[16,20],[16,21],[16,22],[16,23],[32,24],[32,25],[32,26],[31,27],[1,28]])),je.ke=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],je.ve=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],je.Se=e=>256>e?We[e]:We[256+(e>>>7)],je.ze=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],je.Ce=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],je.xe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],je.Ae=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];const Le=Oe([[144,8],[112,9],[24,7],[8,8]]);He.Ie=Te([12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,19,275,147,403,83,339,211,467,51,307,179,435,115,371,243,499,11,267,139,395,75,331,203,459,43,299,171,427,107,363,235,491,27,283,155,411,91,347,219,475,59,315,187,443,123,379,251,507,7,263,135,391,71,327,199,455,39,295,167,423,103,359,231,487,23,279,151,407,87,343,215,471,55,311,183,439,119,375,247,503,15,271,143,399,79,335,207,463,47,303,175,431,111,367,239,495,31,287,159,415,95,351,223,479,63,319,191,447,127,383,255,511,0,64,32,96,16,80,48,112,8,72,40,104,24,88,56,120,4,68,36,100,20,84,52,116,3,131,67,195,35,163,99,227].map((e,t)=>[e,Le[t]]));const Fe=Oe([[30,5]]);function qe(e,t,n,r,s){const i=this;i._e=e,i.Pe=t,i.De=n,i.Ve=r,i.Re=s}He.Be=Te([0,16,8,24,4,20,12,28,2,18,10,26,6,22,14,30,1,17,9,25,5,21,13,29,3,19,11,27,7,23].map((e,t)=>[e,Fe[t]])),He.Ee=new He(He.Ie,je.ze,257,286,15),He.Me=new He(He.Be,je.Ce,0,30,15),He.Ue=new He(null,je.xe,0,19,7);const Ge=[new qe(0,0,0,0,0),new qe(4,4,8,4,1),new qe(4,5,16,8,1),new qe(4,6,32,32,1),new qe(4,4,16,16,2),new qe(8,16,32,32,2),new qe(8,16,128,128,2),new qe(8,32,128,256,2),new qe(32,128,258,1024,2),new qe(32,258,258,4096,2)],Je=["need dictionary","stream end","","","stream error","data error","","buffer error","",""],Qe=113,Xe=666,Ye=262;function Ze(e,t,n,r){const s=e[2*t],i=e[2*n];return i>s||s==i&&r[t]<=r[n]}function $e(){const e=this;let t,n,s,c,f,a,l,u,w,h,d,p,y,m,b,g,k,v,S,z,C,x,A,I,_,P,D,V,R,B,E,M,U;const K=new je,N=new je,O=new je;let T,W,j,H,L,F;function q(){let t;for(t=0;286>t;t++)E[2*t]=0;for(t=0;30>t;t++)M[2*t]=0;for(t=0;19>t;t++)U[2*t]=0;E[512]=1,e.ue=e.we=0,W=j=0}function G(e,t){let n,r=-1,s=e[1],i=0,o=7,c=4;0===s&&(o=138,c=3),e[2*(t+1)+1]=65535;for(let f=0;t>=f;f++)n=s,s=e[2*(f+1)+1],++i<o&&n==s||(c>i?U[2*n]+=i:0!==n?(n!=r&&U[2*n]++,U[32]++):i>10?U[36]++:U[34]++,i=0,r=n,0===s?(o=138,c=3):n==s?(o=6,c=3):(o=7,c=4))}function J(t){e.Ke[e.pending++]=t}function Q(e){J(255&e),J(e>>>8&255)}function X(e,t){let n;const r=t;F>16-r?(n=e,L|=n<<F&65535,Q(L),L=n>>>16-F,F+=r-16):(L|=e<<F&65535,F+=r)}function Y(e,t){const n=2*e;X(65535&t[n],65535&t[n+1])}function Z(e,t){let n,r,s=-1,i=e[1],o=0,c=7,f=4;for(0===i&&(c=138,f=3),n=0;t>=n;n++)if(r=i,i=e[2*(n+1)+1],++o>=c||r!=i){if(f>o)do{Y(r,U)}while(0!==--o);else 0!==r?(r!=s&&(Y(r,U),o--),Y(16,U),X(o-3,2)):o>10?(Y(18,U),X(o-11,7)):(Y(17,U),X(o-3,3));o=0,s=r,0===i?(c=138,f=3):r==i?(c=6,f=3):(c=7,f=4)}}function $(){16==F?(Q(L),L=0,F=0):8>F||(J(255&L),L>>>=8,F-=8)}function ee(t,n){let s,i,o;if(e.Ne[W]=t,e.Oe[W]=255&n,W++,0===t?E[2*n]++:(j++,t--,E[2*(je.ge[n]+256+1)]++,M[2*je.Se(t)]++),!(8191&W)&&D>2){for(s=8*W,i=C-k,o=0;30>o;o++)s+=M[2*o]*(5+je.Ce[o]);if(s>>>=3,j<r.floor(W/2)&&s<r.floor(i/2))return!0}return W==T-1}function te(t,n){let r,s,i,o,c=0;if(0!==W)do{r=e.Ne[c],s=e.Oe[c],c++,0===r?Y(s,t):(i=je.ge[s],Y(i+256+1,t),o=je.ze[i],0!==o&&(s-=je.ke[i],X(s,o)),r--,i=je.Se(r),Y(i,n),o=je.Ce[i],0!==o&&(r-=je.ve[i],X(r,o)))}while(W>c);Y(256,t),H=t[513]}function ne(){F>8?Q(L):F>0&&J(255&L),L=0,F=0}function re(t,n,r){X(0+(r?1:0),3),((t,n)=>{ne(),H=8,Q(n),Q(~n),e.Ke.set(u.subarray(t,t+n),e.pending),e.pending+=n})(t,n)}function se(n){((t,n,r)=>{let s,i,o=0;D>0?(K.ne(e),N.ne(e),o=(()=>{let t;for(G(E,K.he),G(M,N.he),O.ne(e),t=18;t>=3&&0===U[2*je.Ae[t]+1];t--);return e.ue+=14+3*(t+1),t})(),s=e.ue+3+7>>>3,i=e.we+3+7>>>3,i>s||(s=i)):s=i=n+5,n+4>s||-1==t?i==s?(X(2+(r?1:0),3),te(He.Ie,He.Be)):(X(4+(r?1:0),3),((e,t,n)=>{let r;for(X(e-257,5),X(t-1,5),X(n-4,4),r=0;n>r;r++)X(U[2*je.Ae[r]+1],3);Z(E,e-1),Z(M,t-1)})(K.he+1,N.he+1,o+1),te(E,M)):re(t,n,r),q(),r&&ne()})(0>k?-1:k,C-k,n),k=C,t.Te()}function ie(){let e,n,r,s;do{if(s=w-A-C,0===s&&0===C&&0===A)s=f;else if(-1==s)s--;else if(C>=f+f-Ye){u.set(u.subarray(f,f+f),0),x-=f,C-=f,k-=f,e=y,r=e;do{n=65535&d[--r],d[r]=f>n?0:n-f}while(0!==--e);e=f,r=e;do{n=65535&h[--r],h[r]=f>n?0:n-f}while(0!==--e);s+=f}if(0===t.We)return;e=t.je(u,C+A,s),A+=e,3>A||(p=255&u[C],p=(p<<g^255&u[C+1])&b)}while(Ye>A&&0!==t.We)}function oe(e){let t,n,r=_,s=C,i=I;const o=C>f-Ye?C-(f-Ye):0;let c=B;const a=l,w=C+258;let d=u[s+i-1],p=u[s+i];R>I||(r>>=2),c>A&&(c=A);do{if(t=e,u[t+i]==p&&u[t+i-1]==d&&u[t]==u[s]&&u[++t]==u[s+1]){s+=2,t++;do{}while(u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&w>s);if(n=258-(w-s),s=w-258,n>i){if(x=e,i=n,n>=c)break;d=u[s+i-1],p=u[s+i]}}}while((e=65535&h[e&a])>o&&0!==--r);return i>A?A:i}e.le=[],e.be=[],e.ae=[],E=[],M=[],U=[],e.de=(t,n)=>{const r=e.ae,s=r[n];let i=n<<1;for(;i<=e.ce&&(i<e.ce&&Ze(t,r[i+1],r[i],e.le)&&i++,!Ze(t,s,r[i],e.le));)r[n]=r[i],n=i,i<<=1;r[n]=s},e.He=(t,S,x,W,j,G)=>(W||(W=8),j||(j=8),G||(G=0),t.Le=null,-1==S&&(S=6),1>j||j>9||8!=W||9>x||x>15||0>S||S>9||0>G||G>2?Ne:(t.Fe=e,a=x,f=1<<a,l=f-1,m=j+7,y=1<<m,b=y-1,g=r.floor((m+3-1)/3),u=new i(2*f),h=[],d=[],T=1<<j+6,e.Ke=new i(4*T),s=4*T,e.Ne=new o(T),e.Oe=new i(T),D=S,V=G,(t=>(t.qe=t.Ge=0,t.Le=null,e.pending=0,e.Je=0,n=Qe,c=0,K.re=E,K.ie=He.Ee,N.re=M,N.ie=He.Me,O.re=U,O.ie=He.Ue,L=0,F=0,H=8,q(),(()=>{w=2*f,d[y-1]=0;for(let e=0;y-1>e;e++)d[e]=0;P=Ge[D].Pe,R=Ge[D]._e,B=Ge[D].De,_=Ge[D].Ve,C=0,k=0,A=0,v=I=2,z=0,p=0})(),0))(t))),e.Qe=()=>42!=n&&n!=Qe&&n!=Xe?Ne:(e.Oe=null,e.Ne=null,e.Ke=null,d=null,h=null,u=null,e.Fe=null,n==Qe?-3:0),e.Xe=(e,t,n)=>{let r=0;return-1==t&&(t=6),0>t||t>9||0>n||n>2?Ne:(Ge[D].Re!=Ge[t].Re&&0!==e.qe&&(r=e.Ye(1)),D!=t&&(D=t,P=Ge[D].Pe,R=Ge[D]._e,B=Ge[D].De,_=Ge[D].Ve),V=n,r)},e.Ze=(e,t,r)=>{let s,i=r,o=0;if(!t||42!=n)return Ne;if(3>i)return 0;for(i>f-Ye&&(i=f-Ye,o=r-i),u.set(t.subarray(o,o+i),0),C=i,k=i,p=255&u[0],p=(p<<g^255&u[1])&b,s=0;i-3>=s;s++)p=(p<<g^255&u[s+2])&b,h[s&l]=d[p],d[p]=s;return 0},e.Ye=(r,i)=>{let o,w,m,_,R;if(i>4||0>i)return Ne;if(!r.$e||!r.et&&0!==r.We||n==Xe&&4!=i)return r.Le=Je[4],Ne;if(0===r.tt)return r.Le=Je[7],-5;var B;if(t=r,_=c,c=i,42==n&&(w=8+(a-8<<4)<<8,m=(D-1&255)>>1,m>3&&(m=3),w|=m<<6,0!==C&&(w|=32),w+=31-w%31,n=Qe,J((B=w)>>8&255),J(255&B)),0!==e.pending){if(t.Te(),0===t.tt)return c=-1,0}else if(0===t.We&&_>=i&&4!=i)return t.Le=Je[7],-5;if(n==Xe&&0!==t.We)return r.Le=Je[7],-5;if(0!==t.We||0!==A||0!=i&&n!=Xe){switch(R=-1,Ge[D].Re){case 0:R=(e=>{let n,r=65535;for(r>s-5&&(r=s-5);;){if(1>=A){if(ie(),0===A&&0==e)return 0;if(0===A)break}if(C+=A,A=0,n=k+r,(0===C||C>=n)&&(A=C-n,C=n,se(!1),0===t.tt))return 0;if(C-k>=f-Ye&&(se(!1),0===t.tt))return 0}return se(4==e),0===t.tt?4==e?2:0:4==e?3:1})(i);break;case 1:R=(e=>{let n,r=0;for(;;){if(Ye>A){if(ie(),Ye>A&&0==e)return 0;if(0===A)break}if(3>A||(p=(p<<g^255&u[C+2])&b,r=65535&d[p],h[C&l]=d[p],d[p]=C),0===r||(C-r&65535)>f-Ye||2!=V&&(v=oe(r)),3>v)n=ee(0,255&u[C]),A--,C++;else if(n=ee(C-x,v-3),A-=v,v>P||3>A)C+=v,v=0,p=255&u[C],p=(p<<g^255&u[C+1])&b;else{v--;do{C++,p=(p<<g^255&u[C+2])&b,r=65535&d[p],h[C&l]=d[p],d[p]=C}while(0!==--v);C++}if(n&&(se(!1),0===t.tt))return 0}return se(4==e),0===t.tt?4==e?2:0:4==e?3:1})(i);break;case 2:R=(e=>{let n,r,s=0;for(;;){if(Ye>A){if(ie(),Ye>A&&0==e)return 0;if(0===A)break}if(3>A||(p=(p<<g^255&u[C+2])&b,s=65535&d[p],h[C&l]=d[p],d[p]=C),I=v,S=x,v=2,0!==s&&P>I&&f-Ye>=(C-s&65535)&&(2!=V&&(v=oe(s)),5>=v&&(1==V||3==v&&C-x>4096)&&(v=2)),3>I||v>I)if(0!==z){if(n=ee(0,255&u[C-1]),n&&se(!1),C++,A--,0===t.tt)return 0}else z=1,C++,A--;else{r=C+A-3,n=ee(C-1-S,I-3),A-=I-1,I-=2;do{++C>r||(p=(p<<g^255&u[C+2])&b,s=65535&d[p],h[C&l]=d[p],d[p]=C)}while(0!==--I);if(z=0,v=2,C++,n&&(se(!1),0===t.tt))return 0}}return 0!==z&&(n=ee(0,255&u[C-1]),z=0),se(4==e),0===t.tt?4==e?2:0:4==e?3:1})(i)}if(2!=R&&3!=R||(n=Xe),0==R||2==R)return 0===t.tt&&(c=-1),0;if(1==R){if(1==i)X(2,3),Y(256,He.Ie),$(),9>1+H+10-F&&(X(2,3),Y(256,He.Ie),$()),H=7;else if(re(0,0,!1),3==i)for(o=0;y>o;o++)d[o]=0;if(t.Te(),0===t.tt)return c=-1,0}}return 4!=i?0:1}}function et(){const e=this;e.nt=0,e.rt=0,e.We=0,e.qe=0,e.tt=0,e.Ge=0}function tt(e){const t=new et,n=(o=e&&e.chunkSize?e.chunkSize:65536)+5*(r.floor(o/16383)+1);var o;const c=new i(n);let f=e?e.level:-1;void 0===f&&(f=-1),t.He(f),t.$e=c,this.append=(e,r)=>{let o,f,a=0,l=0,u=0;const w=[];if(e.length){t.nt=0,t.et=e,t.We=e.length;do{if(t.rt=0,t.tt=n,o=t.Ye(0),0!=o)throw new s("deflating: "+t.Le);t.rt&&(t.rt==n?w.push(new i(c)):w.push(c.subarray(0,t.rt))),u+=t.rt,r&&t.nt>0&&t.nt!=a&&(r(t.nt),a=t.nt)}while(t.We>0||0===t.tt);return w.length>1?(f=new i(u),w.forEach(e=>{f.set(e,l),l+=e.length})):f=w[0]?new i(w[0]):new i,f}},this.flush=()=>{let e,r,o=0,f=0;const a=[];do{if(t.rt=0,t.tt=n,e=t.Ye(4),1!=e&&0!=e)throw new s("deflating: "+t.Le);n-t.tt>0&&a.push(c.slice(0,t.rt)),f+=t.rt}while(t.We>0||0===t.tt);return t.Qe(),r=new i(f),a.forEach(e=>{r.set(e,o),o+=e.length}),r}}et.prototype={He(e,t){const n=this;return n.Fe=new $e,t||(t=15),n.Fe.He(n,e,t)},Ye(e){const t=this;return t.Fe?t.Fe.Ye(t,e):Ne},Qe(){const e=this;if(!e.Fe)return Ne;const t=e.Fe.Qe();return e.Fe=null,t},Xe(e,t){const n=this;return n.Fe?n.Fe.Xe(n,e,t):Ne},Ze(e,t){const n=this;return n.Fe?n.Fe.Ze(n,e,t):Ne},je(e,t,n){const r=this;let s=r.We;return s>n&&(s=n),0===s?0:(r.We-=s,e.set(r.et.subarray(r.nt,r.nt+s),t),r.nt+=s,r.qe+=s,s)},Te(){const e=this;let t=e.Fe.pending;t>e.tt&&(t=e.tt),0!==t&&(e.$e.set(e.Fe.Ke.subarray(e.Fe.Je,e.Fe.Je+t),e.rt),e.rt+=t,e.Fe.Je+=t,e.Ge+=t,e.tt-=t,e.Fe.pending-=t,0===e.Fe.pending&&(e.Fe.Je=0))}};const nt=-2,rt=-3,st=-5,it=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],ot=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],ct=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],ft=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],at=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],lt=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],ut=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];function wt(){let e,t,n,r,s,i;function o(e,t,o,c,f,a,l,u,w,h,d){let p,y,m,b,g,k,v,S,z,C,x,A,I,_,P;C=0,g=o;do{n[e[t+C]]++,C++,g--}while(0!==g);if(n[0]==o)return l[0]=-1,u[0]=0,0;for(S=u[0],k=1;15>=k&&0===n[k];k++);for(v=k,k>S&&(S=k),g=15;0!==g&&0===n[g];g--);for(m=g,S>g&&(S=g),u[0]=S,_=1<<k;g>k;k++,_<<=1)if(0>(_-=n[k]))return rt;if(0>(_-=n[g]))return rt;for(n[g]+=_,i[1]=k=0,C=1,I=2;0!==--g;)i[I]=k+=n[C],I++,C++;g=0,C=0;do{0!==(k=e[t+C])&&(d[i[k]++]=g),C++}while(++g<o);for(o=i[m],i[0]=g=0,C=0,b=-1,A=-S,s[0]=0,x=0,P=0;m>=v;v++)for(p=n[v];0!==p--;){for(;v>A+S;){if(b++,A+=S,P=m-A,P=P>S?S:P,(y=1<<(k=v-A))>p+1&&(y-=p+1,I=v,P>k))for(;++k<P&&(y<<=1)>n[++I];)y-=n[I];if(P=1<<k,h[0]+P>1440)return rt;s[b]=x=h[0],h[0]+=P,0!==b?(i[b]=g,r[0]=k,r[1]=S,k=g>>>A-S,r[2]=x-s[b-1]-k,w.set(r,3*(s[b-1]+k))):l[0]=x}for(r[1]=v-A,o>C?d[C]<c?(r[0]=256>d[C]?0:96,r[2]=d[C++]):(r[0]=a[d[C]-c]+16+64,r[2]=f[d[C++]-c]):r[0]=192,y=1<<v-A,k=g>>>A;P>k;k+=y)w.set(r,3*(x+k));for(k=1<<v-1;0!==(g&k);k>>>=1)g^=k;for(g^=k,z=(1<<A)-1;(g&z)!=i[b];)b--,A-=S,z=(1<<A)-1}return 0!==_&&1!=m?st:0}function c(o){let c;for(e||(e=[],t=[],n=new f(16),r=[],s=new f(15),i=new f(16)),t.length<o&&(t=[]),c=0;o>c;c++)t[c]=0;for(c=0;16>c;c++)n[c]=0;for(c=0;3>c;c++)r[c]=0;s.set(n.subarray(0,15),0),i.set(n.subarray(0,16),0)}this.st=(n,r,s,i,f)=>{let a;return c(19),e[0]=0,a=o(n,0,19,19,null,null,s,r,i,e,t),a==rt?f.Le="oversubscribed dynamic bit lengths tree":a!=st&&0!==r[0]||(f.Le="incomplete dynamic bit lengths tree",a=rt),a},this.it=(n,r,s,i,f,a,l,u,w)=>{let h;return c(288),e[0]=0,h=o(s,0,n,257,ft,at,a,i,u,e,t),0!=h||0===i[0]?(h==rt?w.Le="oversubscribed literal/length tree":-4!=h&&(w.Le="incomplete literal/length tree",h=rt),h):(c(288),h=o(s,n,r,0,lt,ut,l,f,u,e,t),0!=h||0===f[0]&&n>257?(h==rt?w.Le="oversubscribed distance tree":h==st?(w.Le="incomplete distance tree",h=rt):-4!=h&&(w.Le="empty distance tree with lengths",h=rt),h):0)}}function ht(){const e=this;let t,n,r,s,i=0,o=0,c=0,f=0,a=0,l=0,u=0,w=0,h=0,d=0;function p(e,t,n,r,s,i,o,c){let f,a,l,u,w,h,d,p,y,m,b,g,k,v,S,z;d=c.nt,p=c.We,w=o.ot,h=o.ct,y=o.write,m=y<o.read?o.read-y-1:o.end-y,b=it[e],g=it[t];do{for(;20>h;)p--,w|=(255&c.ft(d++))<<h,h+=8;if(f=w&b,a=n,l=r,z=3*(l+f),0!==(u=a[z]))for(;;){if(w>>=a[z+1],h-=a[z+1],16&u){for(u&=15,k=a[z+2]+(w&it[u]),w>>=u,h-=u;15>h;)p--,w|=(255&c.ft(d++))<<h,h+=8;for(f=w&g,a=s,l=i,z=3*(l+f),u=a[z];;){if(w>>=a[z+1],h-=a[z+1],16&u){for(u&=15;u>h;)p--,w|=(255&c.ft(d++))<<h,h+=8;if(v=a[z+2]+(w&it[u]),w>>=u,h-=u,m-=k,v>y){S=y-v;do{S+=o.end}while(0>S);if(u=o.end-S,k>u){if(k-=u,y-S>0&&u>y-S)do{o.lt[y++]=o.lt[S++]}while(0!==--u);else o.lt.set(o.lt.subarray(S,S+u),y),y+=u,S+=u,u=0;S=0}}else S=y-v,y-S>0&&2>y-S?(o.lt[y++]=o.lt[S++],o.lt[y++]=o.lt[S++],k-=2):(o.lt.set(o.lt.subarray(S,S+2),y),y+=2,S+=2,k-=2);if(y-S>0&&k>y-S)do{o.lt[y++]=o.lt[S++]}while(0!==--k);else o.lt.set(o.lt.subarray(S,S+k),y),y+=k,S+=k,k=0;break}if(64&u)return c.Le="invalid distance code",k=c.We-p,k=k>h>>3?h>>3:k,p+=k,d-=k,h-=k<<3,o.ot=w,o.ct=h,c.We=p,c.qe+=d-c.nt,c.nt=d,o.write=y,rt;f+=a[z+2],f+=w&it[u],z=3*(l+f),u=a[z]}break}if(64&u)return 32&u?(k=c.We-p,k=k>h>>3?h>>3:k,p+=k,d-=k,h-=k<<3,o.ot=w,o.ct=h,c.We=p,c.qe+=d-c.nt,c.nt=d,o.write=y,1):(c.Le="invalid literal/length code",k=c.We-p,k=k>h>>3?h>>3:k,p+=k,d-=k,h-=k<<3,o.ot=w,o.ct=h,c.We=p,c.qe+=d-c.nt,c.nt=d,o.write=y,rt);if(f+=a[z+2],f+=w&it[u],z=3*(l+f),0===(u=a[z])){w>>=a[z+1],h-=a[z+1],o.lt[y++]=a[z+2],m--;break}}else w>>=a[z+1],h-=a[z+1],o.lt[y++]=a[z+2],m--}while(m>=258&&p>=10);return k=c.We-p,k=k>h>>3?h>>3:k,p+=k,d-=k,h-=k<<3,o.ot=w,o.ct=h,c.We=p,c.qe+=d-c.nt,c.nt=d,o.write=y,0}e.init=(e,i,o,c,f,a)=>{t=0,u=e,w=i,r=o,h=c,s=f,d=a,n=null},e.ut=(e,y,m)=>{let b,g,k,v,S,z,C,x=0,A=0,I=0;for(I=y.nt,v=y.We,x=e.ot,A=e.ct,S=e.write,z=S<e.read?e.read-S-1:e.end-S;;)switch(t){case 0:if(z>=258&&v>=10&&(e.ot=x,e.ct=A,y.We=v,y.qe+=I-y.nt,y.nt=I,e.write=S,m=p(u,w,r,h,s,d,e,y),I=y.nt,v=y.We,x=e.ot,A=e.ct,S=e.write,z=S<e.read?e.read-S-1:e.end-S,0!=m)){t=1==m?7:9;break}c=u,n=r,o=h,t=1;case 1:for(b=c;b>A;){if(0===v)return e.ot=x,e.ct=A,y.We=v,y.qe+=I-y.nt,y.nt=I,e.write=S,e.wt(y,m);m=0,v--,x|=(255&y.ft(I++))<<A,A+=8}if(g=3*(o+(x&it[b])),x>>>=n[g+1],A-=n[g+1],k=n[g],0===k){f=n[g+2],t=6;break}if(16&k){a=15&k,i=n[g+2],t=2;break}if(!(64&k)){c=k,o=g/3+n[g+2];break}if(32&k){t=7;break}return t=9,y.Le="invalid literal/length code",m=rt,e.ot=x,e.ct=A,y.We=v,y.qe+=I-y.nt,y.nt=I,e.write=S,e.wt(y,m);case 2:for(b=a;b>A;){if(0===v)return e.ot=x,e.ct=A,y.We=v,y.qe+=I-y.nt,y.nt=I,e.write=S,e.wt(y,m);m=0,v--,x|=(255&y.ft(I++))<<A,A+=8}i+=x&it[b],x>>=b,A-=b,c=w,n=s,o=d,t=3;case 3:for(b=c;b>A;){if(0===v)return e.ot=x,e.ct=A,y.We=v,y.qe+=I-y.nt,y.nt=I,e.write=S,e.wt(y,m);m=0,v--,x|=(255&y.ft(I++))<<A,A+=8}if(g=3*(o+(x&it[b])),x>>=n[g+1],A-=n[g+1],k=n[g],16&k){a=15&k,l=n[g+2],t=4;break}if(!(64&k)){c=k,o=g/3+n[g+2];break}return t=9,y.Le="invalid distance code",m=rt,e.ot=x,e.ct=A,y.We=v,y.qe+=I-y.nt,y.nt=I,e.write=S,e.wt(y,m);case 4:for(b=a;b>A;){if(0===v)return e.ot=x,e.ct=A,y.We=v,y.qe+=I-y.nt,y.nt=I,e.write=S,e.wt(y,m);m=0,v--,x|=(255&y.ft(I++))<<A,A+=8}l+=x&it[b],x>>=b,A-=b,t=5;case 5:for(C=S-l;0>C;)C+=e.end;for(;0!==i;){if(0===z&&(S==e.end&&0!==e.read&&(S=0,z=S<e.read?e.read-S-1:e.end-S),0===z&&(e.write=S,m=e.wt(y,m),S=e.write,z=S<e.read?e.read-S-1:e.end-S,S==e.end&&0!==e.read&&(S=0,z=S<e.read?e.read-S-1:e.end-S),0===z)))return e.ot=x,e.ct=A,y.We=v,y.qe+=I-y.nt,y.nt=I,e.write=S,e.wt(y,m);e.lt[S++]=e.lt[C++],z--,C==e.end&&(C=0),i--}t=0;break;case 6:if(0===z&&(S==e.end&&0!==e.read&&(S=0,z=S<e.read?e.read-S-1:e.end-S),0===z&&(e.write=S,m=e.wt(y,m),S=e.write,z=S<e.read?e.read-S-1:e.end-S,S==e.end&&0!==e.read&&(S=0,z=S<e.read?e.read-S-1:e.end-S),0===z)))return e.ot=x,e.ct=A,y.We=v,y.qe+=I-y.nt,y.nt=I,e.write=S,e.wt(y,m);m=0,e.lt[S++]=f,z--,t=0;break;case 7:if(A>7&&(A-=8,v++,I--),e.write=S,m=e.wt(y,m),S=e.write,z=S<e.read?e.read-S-1:e.end-S,e.read!=e.write)return e.ot=x,e.ct=A,y.We=v,y.qe+=I-y.nt,y.nt=I,e.write=S,e.wt(y,m);t=8;case 8:return m=1,e.ot=x,e.ct=A,y.We=v,y.qe+=I-y.nt,y.nt=I,e.write=S,e.wt(y,m);case 9:return m=rt,e.ot=x,e.ct=A,y.We=v,y.qe+=I-y.nt,y.nt=I,e.write=S,e.wt(y,m);default:return m=nt,e.ot=x,e.ct=A,y.We=v,y.qe+=I-y.nt,y.nt=I,e.write=S,e.wt(y,m)}},e.ht=()=>{}}wt.dt=(e,t,n,r)=>(e[0]=9,t[0]=5,n[0]=ot,r[0]=ct,0);const dt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];function pt(e,t){const n=this;let r,s=0,o=0,c=0,a=0;const l=[0],u=[0],w=new ht;let h=0,d=new f(4320);const p=new wt;n.ct=0,n.ot=0,n.lt=new i(t),n.end=t,n.read=0,n.write=0,n.reset=(e,t)=>{t&&(t[0]=0),6==s&&w.ht(e),s=0,n.ct=0,n.ot=0,n.read=n.write=0},n.reset(e,null),n.wt=(e,t)=>{let r,s,i;return s=e.rt,i=n.read,r=(i>n.write?n.end:n.write)-i,r>e.tt&&(r=e.tt),0!==r&&t==st&&(t=0),e.tt-=r,e.Ge+=r,e.$e.set(n.lt.subarray(i,i+r),s),s+=r,i+=r,i==n.end&&(i=0,n.write==n.end&&(n.write=0),r=n.write-i,r>e.tt&&(r=e.tt),0!==r&&t==st&&(t=0),e.tt-=r,e.Ge+=r,e.$e.set(n.lt.subarray(i,i+r),s),s+=r,i+=r),e.rt=s,n.read=i,t},n.ut=(e,t)=>{let i,f,y,m,b,g,k,v;for(m=e.nt,b=e.We,f=n.ot,y=n.ct,g=n.write,k=g<n.read?n.read-g-1:n.end-g;;){let S,z,C,x,A,I,_,P;switch(s){case 0:for(;3>y;){if(0===b)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);t=0,b--,f|=(255&e.ft(m++))<<y,y+=8}switch(i=7&f,h=1&i,i>>>1){case 0:f>>>=3,y-=3,i=7&y,f>>>=i,y-=i,s=1;break;case 1:S=[],z=[],C=[[]],x=[[]],wt.dt(S,z,C,x),w.init(S[0],z[0],C[0],0,x[0],0),f>>>=3,y-=3,s=6;break;case 2:f>>>=3,y-=3,s=3;break;case 3:return f>>>=3,y-=3,s=9,e.Le="invalid block type",t=rt,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t)}break;case 1:for(;32>y;){if(0===b)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);t=0,b--,f|=(255&e.ft(m++))<<y,y+=8}if((~f>>>16&65535)!=(65535&f))return s=9,e.Le="invalid stored block lengths",t=rt,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);o=65535&f,f=y=0,s=0!==o?2:0!==h?7:0;break;case 2:if(0===b)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);if(0===k&&(g==n.end&&0!==n.read&&(g=0,k=g<n.read?n.read-g-1:n.end-g),0===k&&(n.write=g,t=n.wt(e,t),g=n.write,k=g<n.read?n.read-g-1:n.end-g,g==n.end&&0!==n.read&&(g=0,k=g<n.read?n.read-g-1:n.end-g),0===k)))return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);if(t=0,i=o,i>b&&(i=b),i>k&&(i=k),n.lt.set(e.je(m,i),g),m+=i,b-=i,g+=i,k-=i,0!==(o-=i))break;s=0!==h?7:0;break;case 3:for(;14>y;){if(0===b)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);t=0,b--,f|=(255&e.ft(m++))<<y,y+=8}if(c=i=16383&f,(31&i)>29||(i>>5&31)>29)return s=9,e.Le="too many length or distance symbols",t=rt,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);if(i=258+(31&i)+(i>>5&31),!r||r.length<i)r=[];else for(v=0;i>v;v++)r[v]=0;f>>>=14,y-=14,a=0,s=4;case 4:for(;4+(c>>>10)>a;){for(;3>y;){if(0===b)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);t=0,b--,f|=(255&e.ft(m++))<<y,y+=8}r[dt[a++]]=7&f,f>>>=3,y-=3}for(;19>a;)r[dt[a++]]=0;if(l[0]=7,i=p.st(r,l,u,d,e),0!=i)return(t=i)==rt&&(r=null,s=9),n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);a=0,s=5;case 5:for(;i=c,258+(31&i)+(i>>5&31)>a;){let o,w;for(i=l[0];i>y;){if(0===b)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);t=0,b--,f|=(255&e.ft(m++))<<y,y+=8}if(i=d[3*(u[0]+(f&it[i]))+1],w=d[3*(u[0]+(f&it[i]))+2],16>w)f>>>=i,y-=i,r[a++]=w;else{for(v=18==w?7:w-14,o=18==w?11:3;i+v>y;){if(0===b)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);t=0,b--,f|=(255&e.ft(m++))<<y,y+=8}if(f>>>=i,y-=i,o+=f&it[v],f>>>=v,y-=v,v=a,i=c,v+o>258+(31&i)+(i>>5&31)||16==w&&1>v)return r=null,s=9,e.Le="invalid bit length repeat",t=rt,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);w=16==w?r[v-1]:0;do{r[v++]=w}while(0!==--o);a=v}}if(u[0]=-1,A=[],I=[],_=[],P=[],A[0]=9,I[0]=6,i=c,i=p.it(257+(31&i),1+(i>>5&31),r,A,I,_,P,d,e),0!=i)return i==rt&&(r=null,s=9),t=i,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);w.init(A[0],I[0],d,_[0],d,P[0]),s=6;case 6:if(n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,1!=(t=w.ut(n,e,t)))return n.wt(e,t);if(t=0,w.ht(e),m=e.nt,b=e.We,f=n.ot,y=n.ct,g=n.write,k=g<n.read?n.read-g-1:n.end-g,0===h){s=0;break}s=7;case 7:if(n.write=g,t=n.wt(e,t),g=n.write,k=g<n.read?n.read-g-1:n.end-g,n.read!=n.write)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);s=8;case 8:return t=1,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);case 9:return t=rt,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);default:return t=nt,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t)}}},n.ht=e=>{n.reset(e,null),n.lt=null,d=null},n.yt=(e,t,r)=>{n.lt.set(e.subarray(t,t+r),0),n.read=n.write=r},n.bt=()=>1==s?1:0}const yt=13,mt=[0,0,255,255];function bt(){const e=this;function t(e){return e&&e.gt?(e.qe=e.Ge=0,e.Le=null,e.gt.mode=7,e.gt.kt.reset(e,null),0):nt}e.mode=0,e.method=0,e.vt=[0],e.St=0,e.marker=0,e.zt=0,e.Ct=t=>(e.kt&&e.kt.ht(t),e.kt=null,0),e.xt=(n,r)=>(n.Le=null,e.kt=null,8>r||r>15?(e.Ct(n),nt):(e.zt=r,n.gt.kt=new pt(n,1<<r),t(n),0)),e.At=(e,t)=>{let n,r;if(!e||!e.gt||!e.et)return nt;const s=e.gt;for(t=4==t?st:0,n=st;;)switch(s.mode){case 0:if(0===e.We)return n;if(n=t,e.We--,e.qe++,8!=(15&(s.method=e.ft(e.nt++)))){s.mode=yt,e.Le="unknown compression method",s.marker=5;break}if(8+(s.method>>4)>s.zt){s.mode=yt,e.Le="invalid win size",s.marker=5;break}s.mode=1;case 1:if(0===e.We)return n;if(n=t,e.We--,e.qe++,r=255&e.ft(e.nt++),((s.method<<8)+r)%31!=0){s.mode=yt,e.Le="incorrect header check",s.marker=5;break}if(!(32&r)){s.mode=7;break}s.mode=2;case 2:if(0===e.We)return n;n=t,e.We--,e.qe++,s.St=(255&e.ft(e.nt++))<<24&4278190080,s.mode=3;case 3:if(0===e.We)return n;n=t,e.We--,e.qe++,s.St+=(255&e.ft(e.nt++))<<16&16711680,s.mode=4;case 4:if(0===e.We)return n;n=t,e.We--,e.qe++,s.St+=(255&e.ft(e.nt++))<<8&65280,s.mode=5;case 5:return 0===e.We?n:(n=t,e.We--,e.qe++,s.St+=255&e.ft(e.nt++),s.mode=6,2);case 6:return s.mode=yt,e.Le="need dictionary",s.marker=0,nt;case 7:if(n=s.kt.ut(e,n),n==rt){s.mode=yt,s.marker=0;break}if(0==n&&(n=t),1!=n)return n;n=t,s.kt.reset(e,s.vt),s.mode=12;case 12:return e.We=0,1;case yt:return rt;default:return nt}},e.It=(e,t,n)=>{let r=0,s=n;if(!e||!e.gt||6!=e.gt.mode)return nt;const i=e.gt;return s<1<<i.zt||(s=(1<<i.zt)-1,r=n-s),i.kt.yt(t,r,s),i.mode=7,0},e._t=e=>{let n,r,s,i,o;if(!e||!e.gt)return nt;const c=e.gt;if(c.mode!=yt&&(c.mode=yt,c.marker=0),0===(n=e.We))return st;for(r=e.nt,s=c.marker;0!==n&&4>s;)e.ft(r)==mt[s]?s++:s=0!==e.ft(r)?0:4-s,r++,n--;return e.qe+=r-e.nt,e.nt=r,e.We=n,c.marker=s,4!=s?rt:(i=e.qe,o=e.Ge,t(e),e.qe=i,e.Ge=o,c.mode=7,0)},e.Pt=e=>e&&e.gt&&e.gt.kt?e.gt.kt.bt():nt}function gt(){}function kt(e){const t=new gt,n=e&&e.chunkSize?r.floor(2*e.chunkSize):131072,o=new i(n);let c=!1;t.xt(),t.$e=o,this.append=(e,r)=>{const f=[];let a,l,u=0,w=0,h=0;if(0!==e.length){t.nt=0,t.et=e,t.We=e.length;do{if(t.rt=0,t.tt=n,0!==t.We||c||(t.nt=0,c=!0),a=t.At(0),c&&a===st){if(0!==t.We)throw new s("inflating: bad input")}else if(0!==a&&1!==a)throw new s("inflating: "+t.Le);if((c||1===a)&&t.We===e.length)throw new s("inflating: bad input");t.rt&&(t.rt===n?f.push(new i(o)):f.push(o.subarray(0,t.rt))),h+=t.rt,r&&t.nt>0&&t.nt!=u&&(r(t.nt),u=t.nt)}while(t.We>0||0===t.tt);return f.length>1?(l=new i(h),f.forEach(e=>{l.set(e,w),w+=e.length})):l=f[0]?new i(f[0]):new i,l}},this.flush=()=>{t.Ct()}}gt.prototype={xt(e){const t=this;return t.gt=new bt,e||(e=15),t.gt.xt(t,e)},At(e){const t=this;return t.gt?t.gt.At(t,e):nt},Ct(){const e=this;if(!e.gt)return nt;const t=e.gt.Ct(e);return e.gt=null,t},_t(){const e=this;return e.gt?e.gt._t(e):nt},It(e,t){const n=this;return n.gt?n.gt.It(n,e,t):nt},ft(e){return this.et[e]},je(e,t){return this.et.subarray(e,e+t)}},self.initCodec=()=>{self.Deflate=tt,self.Inflate=kt};
`,I=()=>A.useDataURI?"data:text/javascript,"+encodeURIComponent(_):URL.createObjectURL(new Blob([_],{type:"text/javascript"}));E({workerScripts:{inflate:[I],deflate:[I]}})}const ERR_ITERATOR_COMPLETED_TOO_SOON="Writer iterator completed too soon",HTTP_HEADER_CONTENT_TYPE="Content-Type",DEFAULT_CHUNK_SIZE=64*1024,PROPERTY_NAME_WRITABLE="writable";class Stream{constructor(){this.size=0}init(){this.initialized=!0}}class Reader extends Stream{get readable(){const A=this,{chunkSize:_=DEFAULT_CHUNK_SIZE}=A,I=new ReadableStream({start(){this.chunkOffset=0},async pull(B){const{offset:T=0,size:R,diskNumberStart:P}=I,{chunkOffset:D}=this,F=R===UNDEFINED_VALUE?_:Math.min(_,R-D),L=await readUint8Array(A,T+D,F,P);B.enqueue(L),D+_>R||R===UNDEFINED_VALUE&&!L.length&&F?B.close():this.chunkOffset+=_}});return I}}class BlobReader extends Reader{constructor(A){super(),Object.assign(this,{blob:A,size:A.size})}async readUint8Array(A,_){const I=this,B=A+_;let R=await(A||B<I.size?I.blob.slice(A,B):I.blob).arrayBuffer();return R.byteLength>_&&(R=R.slice(A,B)),new Uint8Array(R)}}class BlobWriter extends Stream{constructor(A){super();const _=this,I=new TransformStream,B=[];A&&B.push([HTTP_HEADER_CONTENT_TYPE,A]),Object.defineProperty(_,PROPERTY_NAME_WRITABLE,{get(){return I.writable}}),_.blob=new Response(I.readable,{headers:B}).blob()}getData(){return this.blob}}class SplitDataReader extends Reader{constructor(A){super(),this.readers=A}async init(){const A=this,{readers:_}=A;A.lastDiskNumber=0,A.lastDiskOffset=0,await Promise.all(_.map(async(I,B)=>{await I.init(),B!=_.length-1&&(A.lastDiskOffset+=I.size),A.size+=I.size})),super.init()}async readUint8Array(A,_,I=0){const B=this,{readers:T}=this;let R,P=I;P==-1&&(P=T.length-1);let D=A;for(;T[P]&&D>=T[P].size;)D-=T[P].size,P++;const F=T[P];if(F){const L=F.size;if(D+_<=L)R=await readUint8Array(F,D,_);else{const U=L-D;R=new Uint8Array(_);const V=await readUint8Array(F,D,U);R.set(V,0);const K=await B.readUint8Array(A+U,_-U,I);R.set(K,U),V.length+K.length<_&&(R=R.subarray(0,V.length+K.length))}}else R=new Uint8Array;return B.lastDiskNumber=Math.max(P,B.lastDiskNumber),R}}class SplitDataWriter extends Stream{constructor(A,_=4294967295){super();const I=this;Object.assign(I,{diskNumber:0,diskOffset:0,size:0,maxSize:_,availableSize:_});let B,T,R;const P=new WritableStream({async write(L){const{availableSize:U}=I;if(R)L.length>=U?(await D(L.subarray(0,U)),await F(),I.diskOffset+=B.size,I.diskNumber++,R=null,await this.write(L.subarray(U))):await D(L);else{const{value:V,done:K}=await A.next();if(K&&!V)throw new Error(ERR_ITERATOR_COMPLETED_TOO_SOON);B=V,B.size=0,B.maxSize&&(I.maxSize=B.maxSize),I.availableSize=I.maxSize,await initStream(B),T=V.writable,R=T.getWriter(),await this.write(L)}},async close(){await R.ready,await F()}});Object.defineProperty(I,PROPERTY_NAME_WRITABLE,{get(){return P}});async function D(L){const U=L.length;U&&(await R.ready,await R.write(L),B.size+=U,I.size+=U,I.availableSize-=U)}async function F(){await R.close()}}}class GenericReader{constructor(A){return Array.isArray(A)&&(A=new SplitDataReader(A)),A instanceof ReadableStream&&(A={readable:A}),A}}class GenericWriter{constructor(A){return A.writable===UNDEFINED_VALUE&&typeof A.next==FUNCTION_TYPE&&(A=new SplitDataWriter(A)),A instanceof WritableStream&&(A={writable:A}),A.size===UNDEFINED_VALUE&&(A.size=0),A instanceof SplitDataWriter||Object.assign(A,{diskNumber:0,diskOffset:0,availableSize:1/0,maxSize:1/0}),A}}async function initStream(E,A){if(E.init&&!E.initialized)await E.init(A);else return Promise.resolve()}function readUint8Array(E,A,_,I){return E.readUint8Array(A,_,I)}const CP437="\0 !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~ ".split(""),VALID_CP437=CP437.length==256;function decodeCP437(E){if(VALID_CP437){let A="";for(let _=0;_<E.length;_++)A+=CP437[E[_]];return A}else return new TextDecoder().decode(E)}function decodeText(E,A){return A&&A.trim().toLowerCase()=="cp437"?decodeCP437(E):new TextDecoder(A).decode(E)}const PROPERTY_NAME_FILENAME="filename",PROPERTY_NAME_RAW_FILENAME="rawFilename",PROPERTY_NAME_COMMENT="comment",PROPERTY_NAME_RAW_COMMENT="rawComment",PROPERTY_NAME_UNCOMPRESSED_SIZE="uncompressedSize",PROPERTY_NAME_COMPRESSED_SIZE="compressedSize",PROPERTY_NAME_OFFSET="offset",PROPERTY_NAME_DISK_NUMBER_START="diskNumberStart",PROPERTY_NAME_LAST_MODIFICATION_DATE="lastModDate",PROPERTY_NAME_RAW_LAST_MODIFICATION_DATE="rawLastModDate",PROPERTY_NAME_LAST_ACCESS_DATE="lastAccessDate",PROPERTY_NAME_RAW_LAST_ACCESS_DATE="rawLastAccessDate",PROPERTY_NAME_CREATION_DATE="creationDate",PROPERTY_NAME_RAW_CREATION_DATE="rawCreationDate",PROPERTY_NAME_INTERNAL_FILE_ATTRIBUTE="internalFileAttribute",PROPERTY_NAME_INTERNAL_FILE_ATTRIBUTES="internalFileAttributes",PROPERTY_NAME_EXTERNAL_FILE_ATTRIBUTE="externalFileAttribute",PROPERTY_NAME_EXTERNAL_FILE_ATTRIBUTES="externalFileAttributes",PROPERTY_NAME_MS_DOS_COMPATIBLE="msDosCompatible",PROPERTY_NAME_ZIP64="zip64",PROPERTY_NAME_ENCRYPTED="encrypted",PROPERTY_NAME_VERSION="version",PROPERTY_NAME_VERSION_MADE_BY="versionMadeBy",PROPERTY_NAME_ZIPCRYPTO="zipCrypto",PROPERTY_NAME_DIRECTORY="directory",PROPERTY_NAME_EXECUTABLE="executable",PROPERTY_NAME_COMPRESSION_METHOD="compressionMethod",PROPERTY_NAME_SIGNATURE="signature",PROPERTY_NAME_EXTRA_FIELD="extraField",PROPERTY_NAMES=[PROPERTY_NAME_FILENAME,PROPERTY_NAME_RAW_FILENAME,PROPERTY_NAME_COMPRESSED_SIZE,PROPERTY_NAME_UNCOMPRESSED_SIZE,PROPERTY_NAME_LAST_MODIFICATION_DATE,PROPERTY_NAME_RAW_LAST_MODIFICATION_DATE,PROPERTY_NAME_COMMENT,PROPERTY_NAME_RAW_COMMENT,PROPERTY_NAME_LAST_ACCESS_DATE,PROPERTY_NAME_CREATION_DATE,PROPERTY_NAME_OFFSET,PROPERTY_NAME_DISK_NUMBER_START,PROPERTY_NAME_DISK_NUMBER_START,PROPERTY_NAME_INTERNAL_FILE_ATTRIBUTE,PROPERTY_NAME_INTERNAL_FILE_ATTRIBUTES,PROPERTY_NAME_EXTERNAL_FILE_ATTRIBUTE,PROPERTY_NAME_EXTERNAL_FILE_ATTRIBUTES,PROPERTY_NAME_MS_DOS_COMPATIBLE,PROPERTY_NAME_ZIP64,PROPERTY_NAME_ENCRYPTED,PROPERTY_NAME_VERSION,PROPERTY_NAME_VERSION_MADE_BY,PROPERTY_NAME_ZIPCRYPTO,PROPERTY_NAME_DIRECTORY,PROPERTY_NAME_EXECUTABLE,PROPERTY_NAME_COMPRESSION_METHOD,PROPERTY_NAME_SIGNATURE,PROPERTY_NAME_EXTRA_FIELD,"bitFlag","filenameUTF8","commentUTF8","rawExtraField","extraFieldZip64","extraFieldUnicodePath","extraFieldUnicodeComment","extraFieldAES","extraFieldNTFS","extraFieldExtendedTimestamp"];class Entry{constructor(A){PROPERTY_NAMES.forEach(_=>this[_]=A[_])}}const OPTION_FILENAME_ENCODING="filenameEncoding",OPTION_COMMENT_ENCODING="commentEncoding",OPTION_DECODE_TEXT="decodeText",OPTION_EXTRACT_PREPENDED_DATA="extractPrependedData",OPTION_EXTRACT_APPENDED_DATA="extractAppendedData",OPTION_PASSWORD="password",OPTION_RAW_PASSWORD="rawPassword",OPTION_PASS_THROUGH="passThrough",OPTION_SIGNAL="signal",OPTION_CHECK_PASSWORD_ONLY="checkPasswordOnly",OPTION_CHECK_OVERLAPPING_ENTRY_ONLY="checkOverlappingEntryOnly",OPTION_CHECK_OVERLAPPING_ENTRY="checkOverlappingEntry",OPTION_CHECK_SIGNATURE="checkSignature",OPTION_USE_WEB_WORKERS="useWebWorkers",OPTION_USE_COMPRESSION_STREAM="useCompressionStream",OPTION_TRANSFER_STREAMS="transferStreams",OPTION_PREVENT_CLOSE="preventClose",ERR_BAD_FORMAT="File format is not recognized",ERR_EOCDR_NOT_FOUND="End of central directory not found",ERR_EOCDR_LOCATOR_ZIP64_NOT_FOUND="End of Zip64 central directory locator not found",ERR_CENTRAL_DIRECTORY_NOT_FOUND="Central directory header not found",ERR_LOCAL_FILE_HEADER_NOT_FOUND="Local file header not found",ERR_EXTRAFIELD_ZIP64_NOT_FOUND="Zip64 extra field not found",ERR_ENCRYPTED="File contains encrypted entry",ERR_UNSUPPORTED_ENCRYPTION="Encryption method not supported",ERR_UNSUPPORTED_COMPRESSION="Compression method not supported",ERR_SPLIT_ZIP_FILE="Split zip file",ERR_OVERLAPPING_ENTRY="Overlapping entry found",CHARSET_UTF8="utf-8",CHARSET_CP437="cp437",ZIP64_PROPERTIES=[[PROPERTY_NAME_UNCOMPRESSED_SIZE,MAX_32_BITS],[PROPERTY_NAME_COMPRESSED_SIZE,MAX_32_BITS],[PROPERTY_NAME_OFFSET,MAX_32_BITS],[PROPERTY_NAME_DISK_NUMBER_START,MAX_16_BITS]],ZIP64_EXTRACTION={[MAX_16_BITS]:{getValue:getUint32,bytes:4},[MAX_32_BITS]:{getValue:getBigUint64,bytes:8}};class ZipReader{constructor(A,_={}){Object.assign(this,{reader:new GenericReader(A),options:_,config:getConfiguration(),readRanges:[]})}async*getEntriesGenerator(A={}){const _=this;let{reader:I}=_;const{config:B}=_;if(await initStream(I),(I.size===UNDEFINED_VALUE||!I.readUint8Array)&&(I=new BlobReader(await new Response(I.readable).blob()),await initStream(I)),I.size<END_OF_CENTRAL_DIR_LENGTH)throw new Error(ERR_BAD_FORMAT);I.chunkSize=getChunkSize(B);const T=await seekSignature(I,END_OF_CENTRAL_DIR_SIGNATURE,I.size,END_OF_CENTRAL_DIR_LENGTH,MAX_16_BITS*16);if(!T){const Te=await readUint8Array(I,0,4),ue=getDataView(Te);throw getUint32(ue)==SPLIT_ZIP_FILE_SIGNATURE?new Error(ERR_SPLIT_ZIP_FILE):new Error(ERR_EOCDR_NOT_FOUND)}const R=getDataView(T);let P=getUint32(R,12),D=getUint32(R,16);const F=T.offset,L=getUint16(R,20),U=F+END_OF_CENTRAL_DIR_LENGTH+L;let V=getUint16(R,4);const K=I.lastDiskNumber||0;let J=getUint16(R,6),ee=getUint16(R,8),ie=0,ne=0;if(D==MAX_32_BITS||P==MAX_32_BITS||ee==MAX_16_BITS||J==MAX_16_BITS){const Te=await readUint8Array(I,T.offset-ZIP64_END_OF_CENTRAL_DIR_LOCATOR_LENGTH,ZIP64_END_OF_CENTRAL_DIR_LOCATOR_LENGTH),ue=getDataView(Te);if(getUint32(ue,0)==ZIP64_END_OF_CENTRAL_DIR_LOCATOR_SIGNATURE){D=getBigUint64(ue,8);let O=await readUint8Array(I,D,ZIP64_END_OF_CENTRAL_DIR_LENGTH,-1),z=getDataView(O);const Y=T.offset-ZIP64_END_OF_CENTRAL_DIR_LOCATOR_LENGTH-ZIP64_END_OF_CENTRAL_DIR_LENGTH;if(getUint32(z,0)!=ZIP64_END_OF_CENTRAL_DIR_SIGNATURE&&D!=Y){const te=D;D=Y,D>te&&(ie=D-te),O=await readUint8Array(I,D,ZIP64_END_OF_CENTRAL_DIR_LENGTH,-1),z=getDataView(O)}if(getUint32(z,0)!=ZIP64_END_OF_CENTRAL_DIR_SIGNATURE)throw new Error(ERR_EOCDR_LOCATOR_ZIP64_NOT_FOUND);V==MAX_16_BITS&&(V=getUint32(z,16)),J==MAX_16_BITS&&(J=getUint32(z,20)),ee==MAX_16_BITS&&(ee=getBigUint64(z,32)),P==MAX_32_BITS&&(P=getBigUint64(z,40)),D-=P}}if(D>=I.size&&(ie=I.size-D-P-END_OF_CENTRAL_DIR_LENGTH,D=I.size-P-END_OF_CENTRAL_DIR_LENGTH),K!=V)throw new Error(ERR_SPLIT_ZIP_FILE);if(D<0)throw new Error(ERR_BAD_FORMAT);let ce=0,fe=await readUint8Array(I,D,P,J),de=getDataView(fe);if(P){const Te=T.offset-P;if(getUint32(de,ce)!=CENTRAL_FILE_HEADER_SIGNATURE&&D!=Te){const ue=D;D=Te,D>ue&&(ie+=D-ue),fe=await readUint8Array(I,D,P,J),de=getDataView(fe)}}const pe=T.offset-D-(I.lastDiskOffset||0);if(P!=pe&&pe>=0&&(P=pe,fe=await readUint8Array(I,D,P,J),de=getDataView(fe)),D<0||D>=I.size)throw new Error(ERR_BAD_FORMAT);const ve=getOptionValue(_,A,OPTION_FILENAME_ENCODING),ye=getOptionValue(_,A,OPTION_COMMENT_ENCODING);for(let Te=0;Te<ee;Te++){const ue=new ZipEntry(I,B,_.options);if(getUint32(de,ce)!=CENTRAL_FILE_HEADER_SIGNATURE)throw new Error(ERR_CENTRAL_DIRECTORY_NOT_FOUND);readCommonHeader(ue,de,ce+6);const O=!!ue.bitFlag.languageEncodingFlag,z=ce+46,Y=z+ue.filenameLength,te=Y+ue.extraFieldLength,oe=getUint16(de,ce+4),le=oe>>8==0,he=oe>>8==3,ae=fe.subarray(z,Y),Q=getUint16(de,ce+32),se=te+Q,Ae=fe.subarray(te,se),ge=O,Ee=O,ke=getUint32(de,ce+38),Se=le&&(getUint8(de,ce+38)&FILE_ATTR_MSDOS_DIR_MASK)==FILE_ATTR_MSDOS_DIR_MASK||he&&(ke>>16&FILE_ATTR_UNIX_TYPE_MASK)==FILE_ATTR_UNIX_TYPE_DIR||ae.length&&ae[ae.length-1]==DIRECTORY_SIGNATURE.charCodeAt(0),Ie=he&&(ke>>16&FILE_ATTR_UNIX_EXECUTABLE_MASK)!=0,we=getUint32(de,ce+42)+ie;Object.assign(ue,{versionMadeBy:oe,msDosCompatible:le,compressedSize:0,uncompressedSize:0,commentLength:Q,directory:Se,offset:we,diskNumberStart:getUint16(de,ce+34),internalFileAttributes:getUint16(de,ce+36),externalFileAttributes:ke,rawFilename:ae,filenameUTF8:ge,commentUTF8:Ee,rawExtraField:fe.subarray(Y,te),executable:Ie}),ue.internalFileAttribute=ue.internalFileAttributes,ue.externalFileAttribute=ue.externalFileAttributes;const xe=getOptionValue(_,A,OPTION_DECODE_TEXT)||decodeText,Fe=ge?CHARSET_UTF8:ve||CHARSET_CP437,Ge=Ee?CHARSET_UTF8:ye||CHARSET_CP437;let Oe=xe(ae,Fe);Oe===UNDEFINED_VALUE&&(Oe=decodeText(ae,Fe));let et=xe(Ae,Ge);et===UNDEFINED_VALUE&&(et=decodeText(Ae,Ge)),Object.assign(ue,{rawComment:Ae,filename:Oe,comment:et,directory:Se||Oe.endsWith(DIRECTORY_SIGNATURE)}),ne=Math.max(we,ne),readCommonFooter(ue,ue,de,ce+6),ue.zipCrypto=ue.encrypted&&!ue.extraFieldAES;const Mt=new Entry(ue);Mt.getData=(mt,Ut)=>ue.getData(mt,Mt,_.readRanges,Ut),Mt.arrayBuffer=async mt=>{const Ut=new TransformStream,[St]=await Promise.all([new Response(Ut.readable).arrayBuffer(),ue.getData(Ut,Mt,_.readRanges,mt)]);return St},ce=se;const{onprogress:dt}=A;if(dt)try{await dt(Te+1,ee,new Entry(ue))}catch{}yield Mt}const _e=getOptionValue(_,A,OPTION_EXTRACT_PREPENDED_DATA),be=getOptionValue(_,A,OPTION_EXTRACT_APPENDED_DATA);return _e&&(_.prependedData=ne>0?await readUint8Array(I,0,ne):new Uint8Array),_.comment=L?await readUint8Array(I,F+END_OF_CENTRAL_DIR_LENGTH,L):new Uint8Array,be&&(_.appendedData=U<I.size?await readUint8Array(I,U,I.size-U):new Uint8Array),!0}async getEntries(A={}){const _=[];for await(const I of this.getEntriesGenerator(A))_.push(I);return _}async close(){}}class ZipEntry{constructor(A,_,I){Object.assign(this,{reader:A,config:_,options:I})}async getData(A,_,I,B={}){const T=this,{reader:R,offset:P,diskNumberStart:D,extraFieldAES:F,extraFieldZip64:L,compressionMethod:U,config:V,bitFlag:K,signature:J,rawLastModDate:ee,uncompressedSize:ie,compressedSize:ne}=T,{dataDescriptor:ce}=K,fe=_.localDirectory={},de=await readUint8Array(R,P,HEADER_SIZE,D),pe=getDataView(de);let ve=getOptionValue(T,B,OPTION_PASSWORD),ye=getOptionValue(T,B,OPTION_RAW_PASSWORD);const _e=getOptionValue(T,B,OPTION_PASS_THROUGH);if(ve=ve&&ve.length&&ve,ye=ye&&ye.length&&ye,F&&F.originalCompressionMethod!=COMPRESSION_METHOD_AES)throw new Error(ERR_UNSUPPORTED_COMPRESSION);if(U!=COMPRESSION_METHOD_STORE&&U!=COMPRESSION_METHOD_DEFLATE&&!_e)throw new Error(ERR_UNSUPPORTED_COMPRESSION);if(getUint32(pe,0)!=LOCAL_FILE_HEADER_SIGNATURE)throw new Error(ERR_LOCAL_FILE_HEADER_NOT_FOUND);readCommonHeader(fe,pe,4);const{extraFieldLength:be,filenameLength:Te,lastAccessDate:ue,creationDate:O}=fe;fe.rawExtraField=be?await readUint8Array(R,P+HEADER_SIZE+Te,be,D):new Uint8Array,readCommonFooter(T,fe,pe,4,!0),Object.assign(_,{lastAccessDate:ue,creationDate:O});const z=T.encrypted&&fe.encrypted&&!_e,Y=z&&!F;if(_e||(_.zipCrypto=Y),z){if(!Y&&F.strength===UNDEFINED_VALUE)throw new Error(ERR_UNSUPPORTED_ENCRYPTION);if(!ve&&!ye)throw new Error(ERR_ENCRYPTED)}const te=P+HEADER_SIZE+Te+be,oe=ne,le=R.readable;Object.assign(le,{diskNumberStart:D,offset:te,size:oe});const he=getOptionValue(T,B,OPTION_SIGNAL),ae=getOptionValue(T,B,OPTION_CHECK_PASSWORD_ONLY);let Q=getOptionValue(T,B,OPTION_CHECK_OVERLAPPING_ENTRY);const se=getOptionValue(T,B,OPTION_CHECK_OVERLAPPING_ENTRY_ONLY);se&&(Q=!0);const{onstart:Ae,onprogress:ge,onend:Ee}=B,ke={options:{codecType:CODEC_INFLATE,password:ve,rawPassword:ye,zipCrypto:Y,encryptionStrength:F&&F.strength,signed:getOptionValue(T,B,OPTION_CHECK_SIGNATURE)&&!_e,passwordVerification:Y&&(ce?ee>>>8&255:J>>>24&255),outputSize:ie,signature:J,compressed:U!=0&&!_e,encrypted:T.encrypted&&!_e,useWebWorkers:getOptionValue(T,B,OPTION_USE_WEB_WORKERS),useCompressionStream:getOptionValue(T,B,OPTION_USE_COMPRESSION_STREAM),transferStreams:getOptionValue(T,B,OPTION_TRANSFER_STREAMS),checkPasswordOnly:ae},config:V,streamOptions:{signal:he,size:oe,onstart:Ae,onprogress:ge,onend:Ee}};Q&&await detectOverlappingEntry({reader:R,fileEntry:_,offset:P,diskNumberStart:D,signature:J,compressedSize:ne,uncompressedSize:ie,dataOffset:te,dataDescriptor:ce||fe.bitFlag.dataDescriptor,extraFieldZip64:L||fe.extraFieldZip64,readRanges:I});let Se;try{if(!se){ae&&(A=new WritableStream),A=new GenericWriter(A),await initStream(A,_e?ne:ie),{writable:Se}=A;const{outputSize:Ie}=await runWorker({readable:le,writable:Se},ke);if(A.size+=Ie,Ie!=(_e?ne:ie))throw new Error(ERR_INVALID_UNCOMPRESSED_SIZE)}}catch(Ie){if(Ie.outputSize!==UNDEFINED_VALUE&&(A.size+=Ie.outputSize),!ae||Ie.message!=ERR_ABORT_CHECK_PASSWORD)throw Ie}finally{!getOptionValue(T,B,OPTION_PREVENT_CLOSE)&&Se&&!Se.locked&&await Se.getWriter().close()}return ae||se?UNDEFINED_VALUE:A.getData?A.getData():Se}}function readCommonHeader(E,A,_){const I=E.rawBitFlag=getUint16(A,_+2),B=(I&BITFLAG_ENCRYPTED)==BITFLAG_ENCRYPTED,T=getUint32(A,_+6);Object.assign(E,{encrypted:B,version:getUint16(A,_),bitFlag:{level:(I&BITFLAG_LEVEL)>>1,dataDescriptor:(I&BITFLAG_DATA_DESCRIPTOR)==BITFLAG_DATA_DESCRIPTOR,languageEncodingFlag:(I&BITFLAG_LANG_ENCODING_FLAG)==BITFLAG_LANG_ENCODING_FLAG},rawLastModDate:T,lastModDate:getDate(T),filenameLength:getUint16(A,_+22),extraFieldLength:getUint16(A,_+24)})}function readCommonFooter(E,A,_,I,B){const{rawExtraField:T}=A,R=A.extraField=new Map,P=getDataView(new Uint8Array(T));let D=0;try{for(;D<T.length;){const ne=getUint16(P,D),ce=getUint16(P,D+2);R.set(ne,{type:ne,data:T.slice(D+4,D+4+ce)}),D+=4+ce}}catch{}const F=getUint16(_,I+4);Object.assign(A,{signature:getUint32(_,I+HEADER_OFFSET_SIGNATURE),compressedSize:getUint32(_,I+HEADER_OFFSET_COMPRESSED_SIZE),uncompressedSize:getUint32(_,I+HEADER_OFFSET_UNCOMPRESSED_SIZE)});const L=R.get(EXTRAFIELD_TYPE_ZIP64);L&&(readExtraFieldZip64(L,A),A.extraFieldZip64=L);const U=R.get(EXTRAFIELD_TYPE_UNICODE_PATH);U&&(readExtraFieldUnicode(U,PROPERTY_NAME_FILENAME,PROPERTY_NAME_RAW_FILENAME,A,E),A.extraFieldUnicodePath=U);const V=R.get(EXTRAFIELD_TYPE_UNICODE_COMMENT);V&&(readExtraFieldUnicode(V,PROPERTY_NAME_COMMENT,PROPERTY_NAME_RAW_COMMENT,A,E),A.extraFieldUnicodeComment=V);const K=R.get(EXTRAFIELD_TYPE_AES);K?(readExtraFieldAES(K,A,F),A.extraFieldAES=K):A.compressionMethod=F;const J=R.get(EXTRAFIELD_TYPE_NTFS);J&&(readExtraFieldNTFS(J,A),A.extraFieldNTFS=J);const ee=R.get(EXTRAFIELD_TYPE_EXTENDED_TIMESTAMP);ee&&(readExtraFieldExtendedTimestamp(ee,A,B),A.extraFieldExtendedTimestamp=ee);const ie=R.get(EXTRAFIELD_TYPE_USDZ);ie&&(A.extraFieldUSDZ=ie)}function readExtraFieldZip64(E,A){A.zip64=!0;const _=getDataView(E.data),I=ZIP64_PROPERTIES.filter(([B,T])=>A[B]==T);for(let B=0,T=0;B<I.length;B++){const[R,P]=I[B];if(A[R]==P){const D=ZIP64_EXTRACTION[P];A[R]=E[R]=D.getValue(_,T),T+=D.bytes}else if(E[R])throw new Error(ERR_EXTRAFIELD_ZIP64_NOT_FOUND)}}function readExtraFieldUnicode(E,A,_,I,B){const T=getDataView(E.data),R=new Crc32;R.append(B[_]);const P=getDataView(new Uint8Array(4));P.setUint32(0,R.get(),!0);const D=getUint32(T,1);Object.assign(E,{version:getUint8(T,0),[A]:decodeText(E.data.subarray(5)),valid:!B.bitFlag.languageEncodingFlag&&D==getUint32(P,0)}),E.valid&&(I[A]=E[A],I[A+"UTF8"]=!0)}function readExtraFieldAES(E,A,_){const I=getDataView(E.data),B=getUint8(I,4);Object.assign(E,{vendorVersion:getUint8(I,0),vendorId:getUint8(I,2),strength:B,originalCompressionMethod:_,compressionMethod:getUint16(I,5)}),A.compressionMethod=E.compressionMethod}function readExtraFieldNTFS(E,A){const _=getDataView(E.data);let I=4,B;try{for(;I<E.data.length&&!B;){const T=getUint16(_,I),R=getUint16(_,I+2);T==EXTRAFIELD_TYPE_NTFS_TAG1&&(B=E.data.slice(I+4,I+4+R)),I+=4+R}}catch{}try{if(B&&B.length==24){const T=getDataView(B),R=T.getBigUint64(0,!0),P=T.getBigUint64(8,!0),D=T.getBigUint64(16,!0);Object.assign(E,{rawLastModDate:R,rawLastAccessDate:P,rawCreationDate:D});const F=getDateNTFS(R),L=getDateNTFS(P),U=getDateNTFS(D),V={lastModDate:F,lastAccessDate:L,creationDate:U};Object.assign(E,V),Object.assign(A,V)}}catch{}}function readExtraFieldExtendedTimestamp(E,A,_){const I=getDataView(E.data),B=getUint8(I,0),T=[],R=[];_?((B&1)==1&&(T.push(PROPERTY_NAME_LAST_MODIFICATION_DATE),R.push(PROPERTY_NAME_RAW_LAST_MODIFICATION_DATE)),(B&2)==2&&(T.push(PROPERTY_NAME_LAST_ACCESS_DATE),R.push(PROPERTY_NAME_RAW_LAST_ACCESS_DATE)),(B&4)==4&&(T.push(PROPERTY_NAME_CREATION_DATE),R.push(PROPERTY_NAME_RAW_CREATION_DATE))):E.data.length>=5&&(T.push(PROPERTY_NAME_LAST_MODIFICATION_DATE),R.push(PROPERTY_NAME_RAW_LAST_MODIFICATION_DATE));let P=1;T.forEach((D,F)=>{if(E.data.length>=P+4){const L=getUint32(I,P);A[D]=E[D]=new Date(L*1e3);const U=R[F];E[U]=L}P+=4})}async function detectOverlappingEntry({reader:E,fileEntry:A,offset:_,diskNumberStart:I,signature:B,compressedSize:T,uncompressedSize:R,dataOffset:P,dataDescriptor:D,extraFieldZip64:F,readRanges:L}){let U=0;if(I)for(let J=0;J<I;J++){const ee=E.readers[J];U+=ee.size}let V=0;if(D&&(F?V=DATA_DESCRIPTOR_RECORD_ZIP_64_LENGTH:V=DATA_DESCRIPTOR_RECORD_LENGTH),V){const J=await readUint8Array(E,P+T,V+DATA_DESCRIPTOR_RECORD_SIGNATURE_LENGTH,I);if(getUint32(getDataView(J),0)==DATA_DESCRIPTOR_RECORD_SIGNATURE){const ie=getUint32(getDataView(J),4);let ne,ce;F?(ne=getBigUint64(getDataView(J),8),ce=getBigUint64(getDataView(J),16)):(ne=getUint32(getDataView(J),8),ce=getUint32(getDataView(J),12)),(A.encrypted&&!A.zipCrypto||ie==B)&&ne==T&&ce==R&&(V+=DATA_DESCRIPTOR_RECORD_SIGNATURE_LENGTH)}}const K={start:U+_,end:U+P+T+V,fileEntry:A};for(const J of L)if(J.fileEntry!=A&&K.start>=J.start&&K.start<J.end){const ee=new Error(ERR_OVERLAPPING_ENTRY);throw ee.overlappingEntry=J.fileEntry,ee}L.push(K)}async function seekSignature(E,A,_,I,B){const T=new Uint8Array(4),R=getDataView(T);setUint32(R,0,A);const P=I+B;return await D(I)||await D(Math.min(P,_));async function D(F){const L=_-F,U=await readUint8Array(E,L,F);for(let V=U.length-I;V>=0;V--)if(U[V]==T[0]&&U[V+1]==T[1]&&U[V+2]==T[2]&&U[V+3]==T[3])return{offset:L+V,buffer:U.slice(V,V+I).buffer}}}function getOptionValue(E,A,_){return A[_]===UNDEFINED_VALUE?E.options[_]:A[_]}function getDate(E){const A=(E&4294901760)>>16,_=E&65535;try{return new Date(1980+((A&65024)>>9),((A&480)>>5)-1,A&31,(_&63488)>>11,(_&2016)>>5,(_&31)*2,0)}catch{}}function getDateNTFS(E){return new Date(Number(E/BigInt(1e4)-BigInt(116444736e5)))}function getUint8(E,A){return E.getUint8(A)}function getUint16(E,A){return E.getUint16(A,!0)}function getUint32(E,A){return E.getUint32(A,!0)}function getBigUint64(E,A){return Number(E.getBigUint64(A,!0))}function setUint32(E,A,_){E.setUint32(A,_,!0)}function getDataView(E){return new DataView(E.buffer)}let baseURL;try{baseURL=import.meta.url}catch(E){}configure({baseURL});e(configure);configure({Deflate:ZipDeflate,Inflate:ZipInflate});async function extract(E){const A=new BlobReader(E),_=new ZipReader(A),I=await _.getEntries(),B=new Map;for(const T of I){const R=new BlobWriter,P=await T.getData?.(R);B.set(T.filename.toLowerCase(),P)}return _.close(),B}const ZipHandler={extract};RenderTarget.defaultOptions.depth=!0;RenderTarget.defaultOptions.stencil=!0;class Game{app;animationController=new AnimationController;state=provide("state",new State);responsiveHandler=provide("responsiveHandler",new ResponsiveHandler);constructor(){provide("skinManager",new SkinManager);const A=provide("config",new Config$1);A.experimental.onChange("mods",({mods:_})=>{const I=window.location,B=new URLSearchParams(I.search);_===""?B.delete("m"):B.set("m",_),window.history.replaceState(null,"",`?${B.toString()}`)}),A.fullscreen.onChange("fullscreen",_=>{const I=new URL(window.location.href),B=I.searchParams;_?(B.set("fullscreen","true"),document.body.classList.add("fullscreen")):(B.delete("fullscreen"),document.body.classList.remove("fullscreen")),window.history.replaceState(null,"",I)})}resizeFrame=(A,_,I)=>{A.renderer.resize(_,I),A.render()};async initApplication(){RenderTarget.defaultOptions.depth=!0,RenderTarget.defaultOptions.stencil=!0;const A=new Application;await A.init({antialias:inject("config/renderer")?.antialiasing,powerPreference:"high-performance",backgroundAlpha:0,autoDensity:!0,resolution:devicePixelRatio,preference:inject("config/renderer")?.renderer??"webgl"}),A.stage.layout={width:A.screen.width,height:A.screen.width,flexDirection:"row",gap:0},GpuBlendModesToPixi.max={color:{operation:"add",srcFactor:"one",dstFactor:"zero"},alpha:{operation:"add",srcFactor:"one",dstFactor:"zero"}};const _=document.querySelector("#app");return _&&new ResizeObserver(B=>{for(const T of B){if(T.target!==_)continue;const R=Math.round(+getComputedStyle(_).width.replaceAll("px","")),P=Math.round(+getComputedStyle(_).height.replaceAll("px",""));requestAnimationFrame(()=>this.resizeFrame(A,R,P))}}).observe(_),A}async init(){const A=provide("ui/app",await this.initApplication()),_=provide("ui/main",new Main),I=provide("ui/sidepanel",new SidePanel);inject("config/fullscreen").fullscreen=!!new URLSearchParams(window.location.search).get("fullscreen"),provide("ui/loading",new Loading),A.stage.addChild(_.container,I.container),this.responsiveHandler.on("layout",R=>{switch(R){case"landscape":{A.stage.layout={flexDirection:"row"};break}case"portrait":{A.stage.layout={flexDirection:"column"};break}}}),this.state.on("sidebar",R=>{switch(R){case"OPENED":{this.animationController.addAnimation("gap",0,10,D=>{A.stage.layout={gap:D}},200),document.body.classList.add("sidepanel");break}case"CLOSED":{this.animationController.addAnimation("gap",10,0,D=>{A.stage.layout={gap:D}},200),document.body.classList.remove("sidepanel");break}}}),i$2({app:A}),document.querySelector("#app")?.append(A.canvas),document.querySelector("#idInput")?.addEventListener("keydown",R=>{R.key==="Enter"&&this.loadFromInput()}),document.querySelector("#submitId")?.addEventListener("click",()=>this.loadFromInput()),document.addEventListener("dragover",R=>R.preventDefault()),document.addEventListener("drop",R=>{R.preventDefault(),R.dataTransfer?.files.length&&this.processFile(R.dataTransfer.files[0])}),document.querySelector("#fileInput")?.addEventListener("change",R=>{R.target?.files?.length&&this.processFile(R.target?.files?.[0])}),inject("config/renderer")?.onChange("antialiasing",()=>{window.location.reload()}),inject("config/renderer")?.onChange("renderer",()=>{window.location.reload()}),await inject("skinManager")?.loadSkins(),!(await this.loadFromHash()||await this.loadFromQuery())&&(document.querySelector("#splash")?.classList.add("showSplash","flex"),document.querySelector("#splash")?.classList.remove("hidden"),document.querySelector("#splashContainer")?.classList.add("showContainer"),document.querySelector("#splashContainer button")?.addEventListener("click",()=>{document.querySelector("#splash")?.classList.remove("showSplash"),document.querySelector("#splashContainer")?.classList.remove("showContainer"),document.querySelector("#splash")?.classList.add("hideSplash"),document.querySelector("#splashContainer")?.classList.add("hideContainer")}))}async processFile(A){const _=A.name.split(".").at(-1);if(_&&["osz","osk","osr"].includes(_)){if(_==="osz"){inject("ui/loading")?.on(),inject("ui/loading")?.setText("Importing beatmapset ");try{inject("beatmapset")?.destroy(),await this.loadBlob(new Blob([A]))}catch(I){console.error(I)}inject("ui/loading")?.off(),document.querySelector("#diffsContainer")?.classList.remove("hidden"),document.querySelector("#diffsContainer")?.classList.remove("showOut"),document.querySelector("#diffsContainer")?.classList.add("showIn");return}if(_==="osk"){inject("ui/loading")?.on(),inject("ui/loading")?.setText("Loading skin");const I=await ZipHandler.extract(new Blob([A]));await inject("skinManager")?.addSkin(I),inject("ui/loading")?.off()}if(_==="osr"){const I=inject("beatmapset"),B=new Replay;await B.process(new Blob([A]));const T=I?.difficulties.findIndex(R=>R.md5===B.data?.info.beatmapHashMD5);if(T===-1||T===void 0||T===null){const R=document.createElement("div"),P=document.createElement("div"),D=document.createElement("div"),F=document.createElement("button"),L=document.createElement("button"),U=document.createElement("button");P.innerText="Cannot find beatmap matching with the replay hash. Please select the following options.",F.innerText="Fetch from online source",L.innerText="Force using replay",U.innerText="Cancel",B.data?.info.beatmapHashMD5&&D.append(F),D.append(L,U),R.append(P,D),R.classList.add("absolute","top-[50%]","left-[50%]","-translate-[50%]","w-[600px]","max-w-full","p-8","flex","flex-col","gap-5","rounded-xl","border","border-surface-1","bg-base","text-text"),D.classList.add("flex","items-center","justify-end","gap-2.5"),U.classList.add("p-2","px-4","bg-crust","rounded-lg","hover:bg-mantle","text-text","text-sm","cursor-pointer"),F.classList.add("p-2","px-4","bg-text","rounded-lg","hover:bg-subtext-0","text-mantle","text-sm","cursor-pointer"),L.classList.add("p-2","px-4","bg-surface-0","rounded-lg","hover:bg-surface-1","text-text","text-sm","cursor-pointer"),U.addEventListener("click",()=>{document.body.removeChild(R)}),L.addEventListener("click",()=>{I?.master?.hookReplay(B),document.body.removeChild(R)}),F.addEventListener("click",async()=>{if(!B.data?.info.beatmapHashMD5)return;await this.loadHash(B.data?.info.beatmapHashMD5);const V=inject("beatmapset"),K=V?.difficulties.findIndex(J=>J.md5===B.data?.info.beatmapHashMD5);K!==-1&&K!==void 0&&K!==null&&V?.difficulties[K].hookReplay(B),document.body.removeChild(R)}),document.body.append(R)}else I?.master!==I?.difficulties[T]&&!I?.slaves.has(I?.difficulties[T])&&await I?.loadMaster(T),I?.difficulties[T]?.hookReplay(B)}}}async loadFromHash(){const A=new URL(window.location.href).hash.slice(1);if(!A)return!1;inject("ui/loading")?.on();try{const _=await getBeatmapFromExternalUrl(A);if(!_)return!1;await this.loadBlob(_)}catch(_){console.error(_)}return inject("ui/loading")?.off(),document.querySelector("#diffsContainer")?.classList.remove("hidden"),document.querySelector("#diffsContainer")?.classList.remove("showOut"),document.querySelector("#diffsContainer")?.classList.add("showIn"),!0}async loadFromQuery(){const A=new URLSearchParams(window.location.search).getAll("b"),_=A.length!==0?A:[];return _.length===0?(inject("ui/loading")?.off(),!1):(await this.loadIDs(_),!0)}async loadFromInput(){const A=document.querySelector("#idInput"),_=A?.value.split(",").map(I=>processID(I.trim()));if(A?.blur(),!!_?.length){if(_[0]?.type===IDType.BEATMAP_SET){await this.loadSetID(_[0].id);return}await this.loadIDs(_.filter(I=>I?.type===IDType.BEATMAP).map(I=>I?.id??null).filter(I=>I!==null))}}async loadIDs(A){inject("ui/loading")?.on();try{let _=inject("beatmapset");if(!_||!_?.difficulties.some(I=>I.data.metadata.beatmapId===+A[0])){_?.destroy();const I=await getBeatmapFromId(A[0]);if(I===null)throw new Error("Cannot download beatmap");console.log("Download Completed!"),_=await this.loadBlob(I)}A.length===0&&await _.loadMaster(0);for(let I=0;I<A.length;I++){const B=A[I],T=_.difficulties.findIndex(R=>R.data.metadata.beatmapId===+B);T!==-1&&(I===0&&await _.loadMaster(T),I!==0&&_.loadSlave(T))}_.master||(document.querySelector("#diffsContainer")?.classList.remove("hidden"),document.querySelector("#diffsContainer")?.classList.remove("showOut"),document.querySelector("#diffsContainer")?.classList.add("showIn"))}catch(_){console.error(_)}inject("ui/loading")?.off()}async loadSetID(A){inject("ui/loading")?.on();try{let _=inject("beatmapset");if(!_||!_?.difficulties.some(I=>I.data.metadata.beatmapSetId===+A)){_?.destroy();const I=await getBeatmapFromId("",A);if(I===null)throw new Error("Cannot download beatmap");console.log("Download Completed!"),_=await this.loadBlob(I)}_.master||(document.querySelector("#diffsContainer")?.classList.remove("hidden"),document.querySelector("#diffsContainer")?.classList.remove("showOut"),document.querySelector("#diffsContainer")?.classList.add("showIn"))}catch(_){console.error(_)}inject("ui/loading")?.off()}async loadHash(A){inject("ui/loading")?.on();try{let _=inject("beatmapset");if(!_||!_?.difficulties.some(B=>B.md5===A)){_?.destroy();const B=await getBeatmapFromHash(A);if(B===null)throw new Error("Cannot download beatmap");console.log("Download Completed!"),_=await this.loadBlob(B)}const I=_.difficulties.findIndex(B=>B.md5===A);I!==-1&&await _.loadMaster(I)}catch(_){console.error(_)}inject("ui/loading")?.off()}async loadBlob(A){const _=await ZipHandler.extract(A),I=new BeatmapSet(_);return console.log("Init beatmapset"),await I.loadResources(),await I.getDifficulties(),I}resize(){const A=inject("ui/app");if(!A)return;const _=A.screen.width,I=A.screen.height,B=A.stage.layout?._computedLayout.width,T=A.stage.layout?._computedLayout.height;this.responsiveHandler.responsive(),!(B===_&&T===I)&&(A.stage.layout={width:_,height:I})}update(){this.resize(),tweenGroup.update()}}document.addEventListener("keydown",E=>{const A=inject("beatmapset"),_=A?.context.consume("audio");if(!(!A||!_))switch(E.key){case"ArrowLeft":{A.smoothTick(-1,E.shiftKey,A.context.consume("audio")?.state==="PLAYING");break}case"ArrowRight":{A.smoothTick(1,E.shiftKey,A.context.consume("audio")?.state==="PLAYING");break}case" ":{const I=document.activeElement;if(I?.tagName==="INPUT"&&I?.getAttribute("type")==="text")return;A.toggle();break}case"c":case"C":{if(!E.ctrlKey||!A.master)return;const I=[];for(const F of A.master.container.selected)I.push(A.master.objects[F].object);if(!I.length)return;const B=I[0].startTime,T=I.toSorted((F,L)=>F.startTime-L.startTime).map(F=>F.currentComboIndex+1).join(","),R=Math.floor(B/1e3/60),P=Math.floor((B-R*1e3*60)/1e3),D=B%1e3;navigator.clipboard.writeText(`${R.toString().padStart(2,"0")}:${P.toString().padStart(2,"0")}:${D.toString().padStart(3,"0")} (${T})`)}}});document.addEventListener("wheel",E=>{E.ctrlKey&&E.preventDefault()},{capture:!0,passive:!1});for(const E of document.querySelectorAll(".flyout-toggle")){const A=E.parentElement;if(!A)continue;const _=A.querySelector(".flyout");_&&E.addEventListener("click",I=>{if(I.stopPropagation(),_.classList.contains("hidden")){_.classList.remove("hidden"),_.classList.add("showIn");return}_.classList.toggle("showOut"),_.classList.toggle("showIn")})}document.body.addEventListener("click",E=>{const A=document.querySelectorAll(".flyout");for(const _ of A){const I=_.getBoundingClientRect(),B=E.clientX<I.left||E.clientX>I.right||E.clientY<I.top||E.clientY>I.bottom;if(_.classList.contains("showIn")&&B){E.preventDefault(),_.classList.add("showOut"),_.classList.remove("showIn");return}}});(async()=>{try{await navigator.wakeLock.request("screen")}catch{}await Promise.all([Assets.load({src:"./assets/metadata.png",parser:"texture"}),Assets.load({src:"./assets/back.png",parser:"texture"}),Assets.load({src:"./assets/play.png",parser:"texture"}),Assets.load({src:"./assets/pause.png",parser:"texture"}),Assets.load({src:"./assets/next.png",parser:"texture"}),Assets.load({src:"./assets/maximize.png",parser:"texture"}),Assets.load({src:"./assets/x.png",parser:"texture"})]),await provide("game",new Game).init()})();export{AccessibilitySystem as A,Bounds as B,Container as C,DOMPipe as D,Edge as E,FlexDirection as F,Graphics$1 as G,HTMLTextSystem as H,MeshPipe as M,NineSliceSpritePipe as N,Rectangle as R,TickerPlugin as T,BigPool as a,accessibilityTarget as b,EventSystem as c,FederatedContainer as d,extensions as e,ResizePlugin as f,GraphicsPipe as g,GraphicsContextSystem as h,GlParticleContainerPipe as i,GpuParticleContainerPipe as j,CanvasTextSystem as k,CanvasTextPipe as l,BitmapTextPipe as m,HTMLTextPipe as n,TilingSpritePipe as o,FilterSystem as p,FilterPipe as q};
